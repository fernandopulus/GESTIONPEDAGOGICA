var xfe=Object.defineProperty;var vfe=(e,t,r)=>t in e?xfe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var cj=(e,t,r)=>vfe(e,typeof t!="symbol"?t+"":t,r);function bfe(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var Eht=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function yfe(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var uj={exports:{}},$b={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _7;function wfe(){if(_7)return $b;_7=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,s){var i=null;if(s!==void 0&&(i=""+s),a.key!==void 0&&(i=""+a.key),"key"in a){s={};for(var o in a)o!=="key"&&(s[o]=a[o])}else s=a;return a=s.ref,{$$typeof:e,type:n,key:i,ref:a!==void 0?a:null,props:s}}return $b.Fragment=t,$b.jsx=r,$b.jsxs=r,$b}var N7;function Efe(){return N7||(N7=1,uj.exports=wfe()),uj.exports}var l=Efe(),dj={exports:{}},cn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S7;function Cfe(){if(S7)return cn;S7=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function h(Y){return Y===null||typeof Y!="object"?null:(Y=f&&Y[f]||Y["@@iterator"],typeof Y=="function"?Y:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,x={};function b(Y,ee,P){this.props=Y,this.context=ee,this.refs=x,this.updater=P||p}b.prototype.isReactComponent={},b.prototype.setState=function(Y,ee){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,ee,"setState")},b.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function y(){}y.prototype=b.prototype;function w(Y,ee,P){this.props=Y,this.context=ee,this.refs=x,this.updater=P||p}var _=w.prototype=new y;_.constructor=w,g(_,b.prototype),_.isPureReactComponent=!0;var B=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function E(Y,ee,P,Q,X,te){return P=te.ref,{$$typeof:e,type:Y,key:ee,ref:P!==void 0?P:null,props:te}}function N(Y,ee){return E(Y.type,ee,void 0,void 0,void 0,Y.props)}function j(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===e}function R(Y){var ee={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(P){return ee[P]})}var D=/\/+/g;function O(Y,ee){return typeof Y=="object"&&Y!==null&&Y.key!=null?R(""+Y.key):ee.toString(36)}function L(){}function M(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(L,L):(Y.status="pending",Y.then(function(ee){Y.status==="pending"&&(Y.status="fulfilled",Y.value=ee)},function(ee){Y.status==="pending"&&(Y.status="rejected",Y.reason=ee)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function J(Y,ee,P,Q,X){var te=typeof Y;(te==="undefined"||te==="boolean")&&(Y=null);var ae=!1;if(Y===null)ae=!0;else switch(te){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(Y.$$typeof){case e:case t:ae=!0;break;case d:return ae=Y._init,J(ae(Y._payload),ee,P,Q,X)}}if(ae)return X=X(Y),ae=Q===""?"."+O(Y,0):Q,B(X)?(P="",ae!=null&&(P=ae.replace(D,"$&/")+"/"),J(X,ee,P,"",function(ce){return ce})):X!=null&&(j(X)&&(X=N(X,P+(X.key==null||Y&&Y.key===X.key?"":(""+X.key).replace(D,"$&/")+"/")+ae)),ee.push(X)),1;ae=0;var se=Q===""?".":Q+":";if(B(Y))for(var oe=0;oe<Y.length;oe++)Q=Y[oe],te=se+O(Q,oe),ae+=J(Q,ee,P,te,X);else if(oe=h(Y),typeof oe=="function")for(Y=oe.call(Y),oe=0;!(Q=Y.next()).done;)Q=Q.value,te=se+O(Q,oe++),ae+=J(Q,ee,P,te,X);else if(te==="object"){if(typeof Y.then=="function")return J(M(Y),ee,P,Q,X);throw ee=String(Y),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return ae}function V(Y,ee,P){if(Y==null)return Y;var Q=[],X=0;return J(Y,Q,"","",function(te){return ee.call(P,te,X++)}),Q}function K(Y){if(Y._status===-1){var ee=Y._result;ee=ee(),ee.then(function(P){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=P)},function(P){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=P)}),Y._status===-1&&(Y._status=0,Y._result=ee)}if(Y._status===1)return Y._result.default;throw Y._result}var z=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)};function G(){}return cn.Children={map:V,forEach:function(Y,ee,P){V(Y,function(){ee.apply(this,arguments)},P)},count:function(Y){var ee=0;return V(Y,function(){ee++}),ee},toArray:function(Y){return V(Y,function(ee){return ee})||[]},only:function(Y){if(!j(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},cn.Component=b,cn.Fragment=r,cn.Profiler=a,cn.PureComponent=w,cn.StrictMode=n,cn.Suspense=c,cn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,cn.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return k.H.useMemoCache(Y)}},cn.cache=function(Y){return function(){return Y.apply(null,arguments)}},cn.cloneElement=function(Y,ee,P){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var Q=g({},Y.props),X=Y.key,te=void 0;if(ee!=null)for(ae in ee.ref!==void 0&&(te=void 0),ee.key!==void 0&&(X=""+ee.key),ee)!I.call(ee,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&ee.ref===void 0||(Q[ae]=ee[ae]);var ae=arguments.length-2;if(ae===1)Q.children=P;else if(1<ae){for(var se=Array(ae),oe=0;oe<ae;oe++)se[oe]=arguments[oe+2];Q.children=se}return E(Y.type,X,void 0,void 0,te,Q)},cn.createContext=function(Y){return Y={$$typeof:i,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:s,_context:Y},Y},cn.createElement=function(Y,ee,P){var Q,X={},te=null;if(ee!=null)for(Q in ee.key!==void 0&&(te=""+ee.key),ee)I.call(ee,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(X[Q]=ee[Q]);var ae=arguments.length-2;if(ae===1)X.children=P;else if(1<ae){for(var se=Array(ae),oe=0;oe<ae;oe++)se[oe]=arguments[oe+2];X.children=se}if(Y&&Y.defaultProps)for(Q in ae=Y.defaultProps,ae)X[Q]===void 0&&(X[Q]=ae[Q]);return E(Y,te,void 0,void 0,null,X)},cn.createRef=function(){return{current:null}},cn.forwardRef=function(Y){return{$$typeof:o,render:Y}},cn.isValidElement=j,cn.lazy=function(Y){return{$$typeof:d,_payload:{_status:-1,_result:Y},_init:K}},cn.memo=function(Y,ee){return{$$typeof:u,type:Y,compare:ee===void 0?null:ee}},cn.startTransition=function(Y){var ee=k.T,P={};k.T=P;try{var Q=Y(),X=k.S;X!==null&&X(P,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(G,z)}catch(te){z(te)}finally{k.T=ee}},cn.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},cn.use=function(Y){return k.H.use(Y)},cn.useActionState=function(Y,ee,P){return k.H.useActionState(Y,ee,P)},cn.useCallback=function(Y,ee){return k.H.useCallback(Y,ee)},cn.useContext=function(Y){return k.H.useContext(Y)},cn.useDebugValue=function(){},cn.useDeferredValue=function(Y,ee){return k.H.useDeferredValue(Y,ee)},cn.useEffect=function(Y,ee,P){var Q=k.H;if(typeof P=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect(Y,ee)},cn.useId=function(){return k.H.useId()},cn.useImperativeHandle=function(Y,ee,P){return k.H.useImperativeHandle(Y,ee,P)},cn.useInsertionEffect=function(Y,ee){return k.H.useInsertionEffect(Y,ee)},cn.useLayoutEffect=function(Y,ee){return k.H.useLayoutEffect(Y,ee)},cn.useMemo=function(Y,ee){return k.H.useMemo(Y,ee)},cn.useOptimistic=function(Y,ee){return k.H.useOptimistic(Y,ee)},cn.useReducer=function(Y,ee,P){return k.H.useReducer(Y,ee,P)},cn.useRef=function(Y){return k.H.useRef(Y)},cn.useState=function(Y){return k.H.useState(Y)},cn.useSyncExternalStore=function(Y,ee,P){return k.H.useSyncExternalStore(Y,ee,P)},cn.useTransition=function(){return k.H.useTransition()},cn.version="19.1.1",cn}var k7;function N1(){return k7||(k7=1,dj.exports=Cfe()),dj.exports}var S=N1();const at=Cl(S),_fe=bfe({__proto__:null,default:at},[S]);var Aj={exports:{}},Gb={},fj={exports:{}},hj={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B7;function Nfe(){return B7||(B7=1,function(e){function t(V,K){var z=V.length;V.push(K);e:for(;0<z;){var G=z-1>>>1,Y=V[G];if(0<a(Y,K))V[G]=K,V[z]=Y,z=G;else break e}}function r(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var K=V[0],z=V.pop();if(z!==K){V[0]=z;e:for(var G=0,Y=V.length,ee=Y>>>1;G<ee;){var P=2*(G+1)-1,Q=V[P],X=P+1,te=V[X];if(0>a(Q,z))X<Y&&0>a(te,Q)?(V[G]=te,V[X]=z,G=X):(V[G]=Q,V[P]=z,G=P);else if(X<Y&&0>a(te,z))V[G]=te,V[X]=z,G=X;else break e}}return K}function a(V,K){var z=V.sortIndex-K.sortIndex;return z!==0?z:V.id-K.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],u=[],d=1,f=null,h=3,p=!1,g=!1,x=!1,b=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function B(V){for(var K=r(u);K!==null;){if(K.callback===null)n(u);else if(K.startTime<=V)n(u),K.sortIndex=K.expirationTime,t(c,K);else break;K=r(u)}}function k(V){if(x=!1,B(V),!g)if(r(c)!==null)g=!0,I||(I=!0,O());else{var K=r(u);K!==null&&J(k,K.startTime-V)}}var I=!1,E=-1,N=5,j=-1;function R(){return b?!0:!(e.unstable_now()-j<N)}function D(){if(b=!1,I){var V=e.unstable_now();j=V;var K=!0;try{e:{g=!1,x&&(x=!1,w(E),E=-1),p=!0;var z=h;try{t:{for(B(V),f=r(c);f!==null&&!(f.expirationTime>V&&R());){var G=f.callback;if(typeof G=="function"){f.callback=null,h=f.priorityLevel;var Y=G(f.expirationTime<=V);if(V=e.unstable_now(),typeof Y=="function"){f.callback=Y,B(V),K=!0;break t}f===r(c)&&n(c),B(V)}else n(c);f=r(c)}if(f!==null)K=!0;else{var ee=r(u);ee!==null&&J(k,ee.startTime-V),K=!1}}break e}finally{f=null,h=z,p=!1}K=void 0}}finally{K?O():I=!1}}}var O;if(typeof _=="function")O=function(){_(D)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,M=L.port2;L.port1.onmessage=D,O=function(){M.postMessage(null)}}else O=function(){y(D,0)};function J(V,K){E=y(function(){V(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(V){switch(h){case 1:case 2:case 3:var K=3;break;default:K=h}var z=h;h=K;try{return V()}finally{h=z}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(V,K){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var z=h;h=V;try{return K()}finally{h=z}},e.unstable_scheduleCallback=function(V,K,z){var G=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?G+z:G):z=G,V){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=z+Y,V={id:d++,callback:K,priorityLevel:V,startTime:z,expirationTime:Y,sortIndex:-1},z>G?(V.sortIndex=z,t(u,V),r(c)===null&&V===r(u)&&(x?(w(E),E=-1):x=!0,J(k,z-G))):(V.sortIndex=Y,t(c,V),g||p||(g=!0,I||(I=!0,O()))),V},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(V){var K=h;return function(){var z=h;h=K;try{return V.apply(this,arguments)}finally{h=z}}}}(hj)),hj}var j7;function Sfe(){return j7||(j7=1,fj.exports=Nfe()),fj.exports}var mj={exports:{}},Oo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T7;function kfe(){if(T7)return Oo;T7=1;var e=N1();function t(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(c,u,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:f==null?null:""+f,children:c,containerInfo:u,implementation:d}}var i=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Oo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Oo.createPortal=function(c,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return s(c,u,null,d)},Oo.flushSync=function(c){var u=i.T,d=n.p;try{if(i.T=null,n.p=2,c)return c()}finally{i.T=u,n.p=d,n.d.f()}},Oo.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(c,u))},Oo.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},Oo.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin),h=typeof u.integrity=="string"?u.integrity:void 0,p=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?n.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:h,fetchPriority:p}):d==="script"&&n.d.X(c,{crossOrigin:f,integrity:h,fetchPriority:p,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Oo.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);n.d.M(c,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(c)},Oo.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin);n.d.L(c,d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Oo.preloadModule=function(c,u){if(typeof c=="string")if(u){var d=o(u.as,u.crossOrigin);n.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(c)},Oo.requestFormReset=function(c){n.d.r(c)},Oo.unstable_batchedUpdates=function(c,u){return c(u)},Oo.useFormState=function(c,u,d){return i.H.useFormState(c,u,d)},Oo.useFormStatus=function(){return i.H.useHostTransitionStatus()},Oo.version="19.1.1",Oo}var I7;function AY(){if(I7)return mj.exports;I7=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),mj.exports=kfe(),mj.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F7;function Bfe(){if(F7)return Gb;F7=1;var e=Sfe(),t=N1(),r=AY();function n(A){var m="https://react.dev/errors/"+A;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+A+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function s(A){var m=A,v=A;if(A.alternate)for(;m.return;)m=m.return;else{A=m;do m=A,(m.flags&4098)!==0&&(v=m.return),A=m.return;while(A)}return m.tag===3?v:null}function i(A){if(A.tag===13){var m=A.memoizedState;if(m===null&&(A=A.alternate,A!==null&&(m=A.memoizedState)),m!==null)return m.dehydrated}return null}function o(A){if(s(A)!==A)throw Error(n(188))}function c(A){var m=A.alternate;if(!m){if(m=s(A),m===null)throw Error(n(188));return m!==A?null:A}for(var v=A,C=m;;){var U=v.return;if(U===null)break;var q=U.alternate;if(q===null){if(C=U.return,C!==null){v=C;continue}break}if(U.child===q.child){for(q=U.child;q;){if(q===v)return o(U),A;if(q===C)return o(U),m;q=q.sibling}throw Error(n(188))}if(v.return!==C.return)v=U,C=q;else{for(var ue=!1,be=U.child;be;){if(be===v){ue=!0,v=U,C=q;break}if(be===C){ue=!0,C=U,v=q;break}be=be.sibling}if(!ue){for(be=q.child;be;){if(be===v){ue=!0,v=q,C=U;break}if(be===C){ue=!0,C=q,v=U;break}be=be.sibling}if(!ue)throw Error(n(189))}}if(v.alternate!==C)throw Error(n(190))}if(v.tag!==3)throw Error(n(188));return v.stateNode.current===v?A:m}function u(A){var m=A.tag;if(m===5||m===26||m===27||m===6)return A;for(A=A.child;A!==null;){if(m=u(A),m!==null)return m;A=A.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),_=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function O(A){return A===null||typeof A!="object"?null:(A=D&&A[D]||A["@@iterator"],typeof A=="function"?A:null)}var L=Symbol.for("react.client.reference");function M(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===L?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case g:return"Fragment";case b:return"Profiler";case x:return"StrictMode";case k:return"Suspense";case I:return"SuspenseList";case j:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case p:return"Portal";case _:return(A.displayName||"Context")+".Provider";case w:return(A._context.displayName||"Context")+".Consumer";case B:var m=A.render;return A=A.displayName,A||(A=m.displayName||m.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case E:return m=A.displayName||null,m!==null?m:M(A.type)||"Memo";case N:m=A._payload,A=A._init;try{return M(A(m))}catch{}}return null}var J=Array.isArray,V=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},G=[],Y=-1;function ee(A){return{current:A}}function P(A){0>Y||(A.current=G[Y],G[Y]=null,Y--)}function Q(A,m){Y++,G[Y]=A.current,A.current=m}var X=ee(null),te=ee(null),ae=ee(null),se=ee(null);function oe(A,m){switch(Q(ae,m),Q(te,A),Q(X,null),m.nodeType){case 9:case 11:A=(A=m.documentElement)&&(A=A.namespaceURI)?ZU(A):0;break;default:if(A=m.tagName,m=m.namespaceURI)m=ZU(m),A=e7(m,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}P(X),Q(X,A)}function ce(){P(X),P(te),P(ae)}function me(A){A.memoizedState!==null&&Q(se,A);var m=X.current,v=e7(m,A.type);m!==v&&(Q(te,A),Q(X,v))}function ke(A){te.current===A&&(P(X),P(te)),se.current===A&&(P(se),Ub._currentValue=z)}var ne=Object.prototype.hasOwnProperty,_e=e.unstable_scheduleCallback,De=e.unstable_cancelCallback,Ne=e.unstable_shouldYield,fe=e.unstable_requestPaint,Ie=e.unstable_now,Me=e.unstable_getCurrentPriorityLevel,Xe=e.unstable_ImmediatePriority,ye=e.unstable_UserBlockingPriority,Fe=e.unstable_NormalPriority,Re=e.unstable_LowPriority,Ge=e.unstable_IdlePriority,Ke=e.log,Ze=e.unstable_setDisableYieldValue,ft=null,Nt=null;function Tt(A){if(typeof Ke=="function"&&Ze(A),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(ft,A)}catch{}}var St=Math.clz32?Math.clz32:fr,Dt=Math.log,gt=Math.LN2;function fr(A){return A>>>=0,A===0?32:31-(Dt(A)/gt|0)|0}var zt=256,Mr=4194304;function wr(A){var m=A&42;if(m!==0)return m;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function Dr(A,m,v){var C=A.pendingLanes;if(C===0)return 0;var U=0,q=A.suspendedLanes,ue=A.pingedLanes;A=A.warmLanes;var be=C&134217727;return be!==0?(C=be&~q,C!==0?U=wr(C):(ue&=be,ue!==0?U=wr(ue):v||(v=be&~A,v!==0&&(U=wr(v))))):(be=C&~q,be!==0?U=wr(be):ue!==0?U=wr(ue):v||(v=C&~A,v!==0&&(U=wr(v)))),U===0?0:m!==0&&m!==U&&(m&q)===0&&(q=U&-U,v=m&-m,q>=v||q===32&&(v&4194048)!==0)?m:U}function vn(A,m){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&m)===0}function Tr(A,m){switch(A){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ga(){var A=zt;return zt<<=1,(zt&4194048)===0&&(zt=256),A}function nn(){var A=Mr;return Mr<<=1,(Mr&62914560)===0&&(Mr=4194304),A}function oa(A){for(var m=[],v=0;31>v;v++)m.push(A);return m}function Ba(A,m){A.pendingLanes|=m,m!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function rn(A,m,v,C,U,q){var ue=A.pendingLanes;A.pendingLanes=v,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=v,A.entangledLanes&=v,A.errorRecoveryDisabledLanes&=v,A.shellSuspendCounter=0;var be=A.entanglements,Pe=A.expirationTimes,ct=A.hiddenUpdates;for(v=ue&~v;0<v;){var Bt=31-St(v),Rt=1<<Bt;be[Bt]=0,Pe[Bt]=-1;var At=ct[Bt];if(At!==null)for(ct[Bt]=null,Bt=0;Bt<At.length;Bt++){var mt=At[Bt];mt!==null&&(mt.lane&=-536870913)}v&=~Rt}C!==0&&gr(A,C,0),q!==0&&U===0&&A.tag!==0&&(A.suspendedLanes|=q&~(ue&~m))}function gr(A,m,v){A.pendingLanes|=m,A.suspendedLanes&=~m;var C=31-St(m);A.entangledLanes|=m,A.entanglements[C]=A.entanglements[C]|1073741824|v&4194090}function tt(A,m){var v=A.entangledLanes|=m;for(A=A.entanglements;v;){var C=31-St(v),U=1<<C;U&m|A[C]&m&&(A[C]|=m),v&=~U}}function xt(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function et(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function vt(){var A=K.p;return A!==0?A:(A=window.event,A===void 0?32:v7(A.type))}function wt(A,m){var v=K.p;try{return K.p=A,m()}finally{K.p=v}}var yt=Math.random().toString(36).slice(2),nr="__reactFiber$"+yt,xr="__reactProps$"+yt,qr="__reactContainer$"+yt,Zr="__reactEvents$"+yt,Kr="__reactListeners$"+yt,he="__reactHandles$"+yt,je="__reactResources$"+yt,Ce="__reactMarker$"+yt;function we(A){delete A[nr],delete A[xr],delete A[Zr],delete A[Kr],delete A[he]}function Se(A){var m=A[nr];if(m)return m;for(var v=A.parentNode;v;){if(m=v[qr]||v[nr]){if(v=m.alternate,m.child!==null||v!==null&&v.child!==null)for(A=a7(A);A!==null;){if(v=A[nr])return v;A=a7(A)}return m}A=v,v=A.parentNode}return null}function Te(A){if(A=A[nr]||A[qr]){var m=A.tag;if(m===5||m===6||m===13||m===26||m===27||m===3)return A}return null}function Je(A){var m=A.tag;if(m===5||m===26||m===27||m===6)return A.stateNode;throw Error(n(33))}function dt(A){var m=A[je];return m||(m=A[je]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function $e(A){A[Ce]=!0}var nt=new Set,ot={};function Pt(A,m){Vt(A,m),Vt(A+"Capture",m)}function Vt(A,m){for(ot[A]=m,A=0;A<m.length;A++)nt.add(m[A])}var Jt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ht={},Gt={};function kr(A){return ne.call(Gt,A)?!0:ne.call(Ht,A)?!1:Jt.test(A)?Gt[A]=!0:(Ht[A]=!0,!1)}function sn(A,m,v){if(kr(m))if(v===null)A.removeAttribute(m);else{switch(typeof v){case"undefined":case"function":case"symbol":A.removeAttribute(m);return;case"boolean":var C=m.toLowerCase().slice(0,5);if(C!=="data-"&&C!=="aria-"){A.removeAttribute(m);return}}A.setAttribute(m,""+v)}}function on(A,m,v){if(v===null)A.removeAttribute(m);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(m);return}A.setAttribute(m,""+v)}}function An(A,m,v,C){if(C===null)A.removeAttribute(v);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(v);return}A.setAttributeNS(m,v,""+C)}}var hs,Eo;function ms(A){if(hs===void 0)try{throw Error()}catch(v){var m=v.stack.trim().match(/\n( *(at )?)/);hs=m&&m[1]||"",Eo=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hs+A+Eo}var Js=!1;function Ts(A,m){if(!A||Js)return"";Js=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(m){var Rt=function(){throw Error()};if(Object.defineProperty(Rt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Rt,[])}catch(mt){var At=mt}Reflect.construct(A,[],Rt)}else{try{Rt.call()}catch(mt){At=mt}A.call(Rt.prototype)}}else{try{throw Error()}catch(mt){At=mt}(Rt=A())&&typeof Rt.catch=="function"&&Rt.catch(function(){})}}catch(mt){if(mt&&At&&typeof mt.stack=="string")return[mt.stack,At.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var U=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");U&&U.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var q=C.DetermineComponentFrameRoot(),ue=q[0],be=q[1];if(ue&&be){var Pe=ue.split(`
`),ct=be.split(`
`);for(U=C=0;C<Pe.length&&!Pe[C].includes("DetermineComponentFrameRoot");)C++;for(;U<ct.length&&!ct[U].includes("DetermineComponentFrameRoot");)U++;if(C===Pe.length||U===ct.length)for(C=Pe.length-1,U=ct.length-1;1<=C&&0<=U&&Pe[C]!==ct[U];)U--;for(;1<=C&&0<=U;C--,U--)if(Pe[C]!==ct[U]){if(C!==1||U!==1)do if(C--,U--,0>U||Pe[C]!==ct[U]){var Bt=`
`+Pe[C].replace(" at new "," at ");return A.displayName&&Bt.includes("<anonymous>")&&(Bt=Bt.replace("<anonymous>",A.displayName)),Bt}while(1<=C&&0<=U);break}}}finally{Js=!1,Error.prepareStackTrace=v}return(v=A?A.displayName||A.name:"")?ms(v):""}function pi(A){switch(A.tag){case 26:case 27:case 5:return ms(A.type);case 16:return ms("Lazy");case 13:return ms("Suspense");case 19:return ms("SuspenseList");case 0:case 15:return Ts(A.type,!1);case 11:return Ts(A.type.render,!1);case 1:return Ts(A.type,!0);case 31:return ms("Activity");default:return""}}function xa(A){try{var m="";do m+=pi(A),A=A.return;while(A);return m}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}function Zs(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function Kd(A){var m=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function Mh(A){var m=Kd(A)?"checked":"value",v=Object.getOwnPropertyDescriptor(A.constructor.prototype,m),C=""+A[m];if(!A.hasOwnProperty(m)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var U=v.get,q=v.set;return Object.defineProperty(A,m,{configurable:!0,get:function(){return U.call(this)},set:function(ue){C=""+ue,q.call(this,ue)}}),Object.defineProperty(A,m,{enumerable:v.enumerable}),{getValue:function(){return C},setValue:function(ue){C=""+ue},stopTracking:function(){A._valueTracker=null,delete A[m]}}}}function Kc(A){A._valueTracker||(A._valueTracker=Mh(A))}function uf(A){if(!A)return!1;var m=A._valueTracker;if(!m)return!0;var v=m.getValue(),C="";return A&&(C=Kd(A)?A.checked?"true":"false":A.value),A=C,A!==v?(m.setValue(A),!0):!1}function gi(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var qd=/[\n"\\]/g;function Fn(A){return A.replace(qd,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function xi(A,m,v,C,U,q,ue,be){A.name="",ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?A.type=ue:A.removeAttribute("type"),m!=null?ue==="number"?(m===0&&A.value===""||A.value!=m)&&(A.value=""+Zs(m)):A.value!==""+Zs(m)&&(A.value=""+Zs(m)):ue!=="submit"&&ue!=="reset"||A.removeAttribute("value"),m!=null?Wc(A,ue,Zs(m)):v!=null?Wc(A,ue,Zs(v)):C!=null&&A.removeAttribute("value"),U==null&&q!=null&&(A.defaultChecked=!!q),U!=null&&(A.checked=U&&typeof U!="function"&&typeof U!="symbol"),be!=null&&typeof be!="function"&&typeof be!="symbol"&&typeof be!="boolean"?A.name=""+Zs(be):A.removeAttribute("name")}function qc(A,m,v,C,U,q,ue,be){if(q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(A.type=q),m!=null||v!=null){if(!(q!=="submit"&&q!=="reset"||m!=null))return;v=v!=null?""+Zs(v):"",m=m!=null?""+Zs(m):v,be||m===A.value||(A.value=m),A.defaultValue=m}C=C??U,C=typeof C!="function"&&typeof C!="symbol"&&!!C,A.checked=be?A.checked:!!C,A.defaultChecked=!!C,ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"&&(A.name=ue)}function Wc(A,m,v){m==="number"&&gi(A.ownerDocument)===A||A.defaultValue===""+v||(A.defaultValue=""+v)}function Nl(A,m,v,C){if(A=A.options,m){m={};for(var U=0;U<v.length;U++)m["$"+v[U]]=!0;for(v=0;v<A.length;v++)U=m.hasOwnProperty("$"+A[v].value),A[v].selected!==U&&(A[v].selected=U),U&&C&&(A[v].defaultSelected=!0)}else{for(v=""+Zs(v),m=null,U=0;U<A.length;U++){if(A[U].value===v){A[U].selected=!0,C&&(A[U].defaultSelected=!0);return}m!==null||A[U].disabled||(m=A[U])}m!==null&&(m.selected=!0)}}function Hn(A,m,v){if(m!=null&&(m=""+Zs(m),m!==A.value&&(A.value=m),v==null)){A.defaultValue!==m&&(A.defaultValue=m);return}A.defaultValue=v!=null?""+Zs(v):""}function Xc(A,m,v,C){if(m==null){if(C!=null){if(v!=null)throw Error(n(92));if(J(C)){if(1<C.length)throw Error(n(93));C=C[0]}v=C}v==null&&(v=""),m=v}v=Zs(m),A.defaultValue=v,C=A.textContent,C===v&&C!==""&&C!==null&&(A.value=C)}function Co(A,m){if(m){var v=A.firstChild;if(v&&v===A.lastChild&&v.nodeType===3){v.nodeValue=m;return}}A.textContent=m}var ic=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Uh(A,m,v){var C=m.indexOf("--")===0;v==null||typeof v=="boolean"||v===""?C?A.setProperty(m,""):m==="float"?A.cssFloat="":A[m]="":C?A.setProperty(m,v):typeof v!="number"||v===0||ic.has(m)?m==="float"?A.cssFloat=v:A[m]=(""+v).trim():A[m]=v+"px"}function df(A,m,v){if(m!=null&&typeof m!="object")throw Error(n(62));if(A=A.style,v!=null){for(var C in v)!v.hasOwnProperty(C)||m!=null&&m.hasOwnProperty(C)||(C.indexOf("--")===0?A.setProperty(C,""):C==="float"?A.cssFloat="":A[C]="");for(var U in m)C=m[U],m.hasOwnProperty(U)&&v[U]!==C&&Uh(A,U,C)}else for(var q in m)m.hasOwnProperty(q)&&Uh(A,q,m[q])}function Af(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function lc(A){return Wd.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var Sl=null;function la(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var cc=null,kl=null;function Ir(A){var m=Te(A);if(m&&(A=m.stateNode)){var v=A[xr]||null;e:switch(A=m.stateNode,m.type){case"input":if(xi(A,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name),m=v.name,v.type==="radio"&&m!=null){for(v=A;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll('input[name="'+Fn(""+m)+'"][type="radio"]'),m=0;m<v.length;m++){var C=v[m];if(C!==A&&C.form===A.form){var U=C[xr]||null;if(!U)throw Error(n(90));xi(C,U.value,U.defaultValue,U.defaultValue,U.checked,U.defaultChecked,U.type,U.name)}}for(m=0;m<v.length;m++)C=v[m],C.form===A.form&&uf(C)}break e;case"textarea":Hn(A,v.value,v.defaultValue);break e;case"select":m=v.value,m!=null&&Nl(A,!!v.multiple,m,!1)}}}var Bl=!1;function Qh(A,m,v){if(Bl)return A(m,v);Bl=!0;try{var C=A(m);return C}finally{if(Bl=!1,(cc!==null||kl!==null)&&(GE(),cc&&(m=cc,A=kl,kl=cc=null,Ir(m),A)))for(m=0;m<A.length;m++)Ir(A[m])}}function Ii(A,m){var v=A.stateNode;if(v===null)return null;var C=v[xr]||null;if(C===null)return null;v=C[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(A=A.type,C=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!C;break e;default:A=!1}if(A)return null;if(v&&typeof v!="function")throw Error(n(231,m,typeof v));return v}var _o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ro=!1;if(_o)try{var jl={};Object.defineProperty(jl,"passive",{get:function(){ro=!0}}),window.addEventListener("test",jl,jl),window.removeEventListener("test",jl,jl)}catch{ro=!1}var No=null,Yc=null,uc=null;function ff(){if(uc)return uc;var A,m=Yc,v=m.length,C,U="value"in No?No.value:No.textContent,q=U.length;for(A=0;A<v&&m[A]===U[A];A++);var ue=v-A;for(C=1;C<=ue&&m[v-C]===U[q-C];C++);return uc=U.slice(A,1<C?1-C:void 0)}function So(A){var m=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&m===13&&(A=13)):A=m,A===10&&(A=13),32<=A||A===13?A:0}function Fi(){return!0}function Tl(){return!1}function ps(A){function m(v,C,U,q,ue){this._reactName=v,this._targetInst=U,this.type=C,this.nativeEvent=q,this.target=ue,this.currentTarget=null;for(var be in A)A.hasOwnProperty(be)&&(v=A[be],this[be]=v?v(q):q[be]);return this.isDefaultPrevented=(q.defaultPrevented!=null?q.defaultPrevented:q.returnValue===!1)?Fi:Tl,this.isPropagationStopped=Tl,this}return d(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=Fi)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=Fi)},persist:function(){},isPersistent:Fi}),m}var bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jc=ps(bn),Il=d({},bn,{view:0,detail:0}),hf=ps(Il),Ku,qu,ll,Oi=d({},Il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ru,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==ll&&(ll&&A.type==="mousemove"?(Ku=A.screenX-ll.screenX,qu=A.screenY-ll.screenY):qu=Ku=0,ll=A),Ku)},movementY:function(A){return"movementY"in A?A.movementY:qu}}),gs=ps(Oi),Hh=d({},Oi,{dataTransfer:0}),Zc=ps(Hh),vi=d({},Il,{relatedTarget:0}),eu=ps(vi),dc=d({},bn,{animationName:0,elapsedTime:0,pseudoElement:0}),Xd=ps(dc),Wu=d({},bn,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),Yd=ps(Wu),mf=d({},bn,{data:0}),Xu=ps(mf),tu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ju(A){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(A):(A=Jd[A])?!!m[A]:!1}function ru(){return Ju}var Vh=d({},Il,{key:function(A){if(A.key){var m=tu[A.key]||A.key;if(m!=="Unidentified")return m}return A.type==="keypress"?(A=So(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?Yu[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ru,charCode:function(A){return A.type==="keypress"?So(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?So(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),Ac=ps(Vh),nu=d({},Oi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zu=ps(nu),Di=d({},Il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ru}),Zd=ps(Di),W=d({},bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ae=ps(W),Oe=d({},Oi,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=ps(Oe),qe=d({},bn,{newState:0,oldState:0}),bt=ps(qe),Ut=[9,13,27,32],Zt=_o&&"CompositionEvent"in window,F=null;_o&&"documentMode"in document&&(F=document.documentMode);var re=_o&&"TextEvent"in window&&!F,le=_o&&(!Zt||F&&8<F&&11>=F),ve=" ",ze=!1;function lt(A,m){switch(A){case"keyup":return Ut.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qt(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var Fr=!1;function yn(A,m){switch(A){case"compositionend":return Qt(m);case"keypress":return m.which!==32?null:(ze=!0,ve);case"textInput":return A=m.data,A===ve&&ze?null:A;default:return null}}function Wr(A,m){if(Fr)return A==="compositionend"||!Zt&&lt(A,m)?(A=ff(),uc=Yc=No=null,Fr=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return le&&m.locale!=="ko"?null:m.data;default:return null}}var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ea(A){var m=A&&A.nodeName&&A.nodeName.toLowerCase();return m==="input"?!!Vn[A.type]:m==="textarea"}function Fl(A,m,v,C){cc?kl?kl.push(C):kl=[C]:cc=C,m=JE(m,"onChange"),0<m.length&&(v=new Jc("onChange","change",null,v,C),A.push({event:v,listeners:m}))}var ts=null,ko=null;function au(A){qU(A,0)}function eA(A){var m=Je(A);if(uf(m))return A}function zh(A,m){if(A==="change")return m}var pf=!1;if(_o){var Is;if(_o){var tA="oninput"in document;if(!tA){var gf=document.createElement("div");gf.setAttribute("oninput","return;"),tA=typeof gf.oninput=="function"}Is=tA}else Is=!1;pf=Is&&(!document.documentMode||9<document.documentMode)}function xf(){ts&&(ts.detachEvent("onpropertychange",$h),ko=ts=null)}function $h(A){if(A.propertyName==="value"&&eA(ko)){var m=[];Fl(m,ko,A,la(A)),Qh(au,m)}}function Bo(A,m,v){A==="focusin"?(xf(),ts=m,ko=v,ts.attachEvent("onpropertychange",$h)):A==="focusout"&&xf()}function ob(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return eA(ko)}function $m(A,m){if(A==="click")return eA(m)}function zg(A,m){if(A==="input"||A==="change")return eA(m)}function Ol(A,m){return A===m&&(A!==0||1/A===1/m)||A!==A&&m!==m}var ei=typeof Object.is=="function"?Object.is:Ol;function rA(A,m){if(ei(A,m))return!0;if(typeof A!="object"||A===null||typeof m!="object"||m===null)return!1;var v=Object.keys(A),C=Object.keys(m);if(v.length!==C.length)return!1;for(C=0;C<v.length;C++){var U=v[C];if(!ne.call(m,U)||!ei(A[U],m[U]))return!1}return!0}function Gm(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function ed(A,m){var v=Gm(A);A=0;for(var C;v;){if(v.nodeType===3){if(C=A+v.textContent.length,A<=m&&C>=m)return{node:v,offset:m-A};A=C}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=Gm(v)}}function nA(A,m){return A&&m?A===m?!0:A&&A.nodeType===3?!1:m&&m.nodeType===3?nA(A,m.parentNode):"contains"in A?A.contains(m):A.compareDocumentPosition?!!(A.compareDocumentPosition(m)&16):!1:!1}function no(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var m=gi(A.document);m instanceof A.HTMLIFrameElement;){try{var v=typeof m.contentWindow.location.href=="string"}catch{v=!1}if(v)A=m.contentWindow;else break;m=gi(A.document)}return m}function bi(A){var m=A&&A.nodeName&&A.nodeName.toLowerCase();return m&&(m==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||m==="textarea"||A.contentEditable==="true")}var aA=_o&&"documentMode"in document&&11>=document.documentMode,jo=null,fc=null,su=null,hc=!1;function Ka(A,m,v){var C=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;hc||jo==null||jo!==gi(C)||(C=jo,"selectionStart"in C&&bi(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),su&&rA(su,C)||(su=C,C=JE(fc,"onSelect"),0<C.length&&(m=new Jc("onSelect","select",null,m,v),A.push({event:m,listeners:C}),m.target=jo)))}function mc(A,m){var v={};return v[A.toLowerCase()]=m.toLowerCase(),v["Webkit"+A]="webkit"+m,v["Moz"+A]="moz"+m,v}var xs={animationend:mc("Animation","AnimationEnd"),animationiteration:mc("Animation","AnimationIteration"),animationstart:mc("Animation","AnimationStart"),transitionrun:mc("Transition","TransitionRun"),transitionstart:mc("Transition","TransitionStart"),transitioncancel:mc("Transition","TransitionCancel"),transitionend:mc("Transition","TransitionEnd")},To={},vf={};_o&&(vf=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function iu(A){if(To[A])return To[A];if(!xs[A])return A;var m=xs[A],v;for(v in m)if(m.hasOwnProperty(v)&&v in vf)return To[A]=m[v];return A}var Gh=iu("animationend"),sA=iu("animationiteration"),iA=iu("animationstart"),oA=iu("transitionrun"),bf=iu("transitionstart"),Kh=iu("transitioncancel"),lA=iu("transitionend"),td=new Map,yf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yf.push("scrollEnd");function qa(A,m){td.set(A,m),Pt(m,[A])}var cl=new WeakMap;function hn(A,m){if(typeof A=="object"&&A!==null){var v=cl.get(A);return v!==void 0?v:(m={value:A,source:m,stack:xa(m)},cl.set(A,m),m)}return{value:A,source:m,stack:xa(m)}}var mn=[],va=0,rs=0;function Dl(){for(var A=va,m=rs=va=0;m<A;){var v=mn[m];mn[m++]=null;var C=mn[m];mn[m++]=null;var U=mn[m];mn[m++]=null;var q=mn[m];if(mn[m++]=null,C!==null&&U!==null){var ue=C.pending;ue===null?U.next=U:(U.next=ue.next,ue.next=U),C.pending=U}q!==0&&$g(v,U,q)}}function cA(A,m,v,C){mn[va++]=A,mn[va++]=m,mn[va++]=v,mn[va++]=C,rs|=C,A.lanes|=C,A=A.alternate,A!==null&&(A.lanes|=C)}function uA(A,m,v,C){return cA(A,m,v,C),wf(A)}function rd(A,m){return cA(A,null,null,m),wf(A)}function $g(A,m,v){A.lanes|=v;var C=A.alternate;C!==null&&(C.lanes|=v);for(var U=!1,q=A.return;q!==null;)q.childLanes|=v,C=q.alternate,C!==null&&(C.childLanes|=v),q.tag===22&&(A=q.stateNode,A===null||A._visibility&1||(U=!0)),A=q,q=q.return;return A.tag===3?(q=A.stateNode,U&&m!==null&&(U=31-St(v),A=q.hiddenUpdates,C=A[U],C===null?A[U]=[m]:C.push(m),m.lane=v|536870912),q):null}function wf(A){if(50<Ib)throw Ib=0,FB=null,Error(n(185));for(var m=A.return;m!==null;)A=m,m=A.return;return A.tag===3?A.stateNode:null}var ti={};function Pl(A,m,v,C){this.tag=A,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pi(A,m,v,C){return new Pl(A,m,v,C)}function qh(A){return A=A.prototype,!(!A||!A.isReactComponent)}function ou(A,m){var v=A.alternate;return v===null?(v=Pi(A.tag,m,A.key,A.mode),v.elementType=A.elementType,v.type=A.type,v.stateNode=A.stateNode,v.alternate=A,A.alternate=v):(v.pendingProps=m,v.type=A.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=A.flags&65011712,v.childLanes=A.childLanes,v.lanes=A.lanes,v.child=A.child,v.memoizedProps=A.memoizedProps,v.memoizedState=A.memoizedState,v.updateQueue=A.updateQueue,m=A.dependencies,v.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},v.sibling=A.sibling,v.index=A.index,v.ref=A.ref,v.refCleanup=A.refCleanup,v}function Km(A,m){A.flags&=65011714;var v=A.alternate;return v===null?(A.childLanes=0,A.lanes=m,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=v.childLanes,A.lanes=v.lanes,A.child=v.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=v.memoizedProps,A.memoizedState=v.memoizedState,A.updateQueue=v.updateQueue,A.type=v.type,m=v.dependencies,A.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),A}function Ef(A,m,v,C,U,q){var ue=0;if(C=A,typeof A=="function")qh(A)&&(ue=1);else if(typeof A=="string")ue=sfe(A,v,X.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case j:return A=Pi(31,v,m,U),A.elementType=j,A.lanes=q,A;case g:return nd(v.children,U,q,m);case x:ue=8,U|=24;break;case b:return A=Pi(12,v,m,U|2),A.elementType=b,A.lanes=q,A;case k:return A=Pi(13,v,m,U),A.elementType=k,A.lanes=q,A;case I:return A=Pi(19,v,m,U),A.elementType=I,A.lanes=q,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case y:case _:ue=10;break e;case w:ue=9;break e;case B:ue=11;break e;case E:ue=14;break e;case N:ue=16,C=null;break e}ue=29,v=Error(n(130,A===null?"null":typeof A,"")),C=null}return m=Pi(ue,v,m,U),m.elementType=A,m.type=C,m.lanes=q,m}function nd(A,m,v,C){return A=Pi(7,A,C,m),A.lanes=v,A}function Gg(A,m,v){return A=Pi(6,A,null,m),A.lanes=v,A}function qm(A,m,v){return m=Pi(4,A.children!==null?A.children:[],A.key,m),m.lanes=v,m.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},m}var dA=[],ad=0,Wh=null,Kg=0,Rl=[],ul=0,Cf=null,sd=1,id="";function _f(A,m){dA[ad++]=Kg,dA[ad++]=Wh,Wh=A,Kg=m}function pE(A,m,v){Rl[ul++]=sd,Rl[ul++]=id,Rl[ul++]=Cf,Cf=A;var C=sd;A=id;var U=32-St(C)-1;C&=~(1<<U),v+=1;var q=32-St(m)+U;if(30<q){var ue=U-U%5;q=(C&(1<<ue)-1).toString(32),C>>=ue,U-=ue,sd=1<<32-St(m)+U|v<<U|C,id=q+A}else sd=1<<q|v<<U|C,id=A}function Wm(A){A.return!==null&&(_f(A,1),pE(A,1,0))}function Xm(A){for(;A===Wh;)Wh=dA[--ad],dA[ad]=null,Kg=dA[--ad],dA[ad]=null;for(;A===Cf;)Cf=Rl[--ul],Rl[ul]=null,id=Rl[--ul],Rl[ul]=null,sd=Rl[--ul],Rl[ul]=null}var Fs=null,Wa=null,Mn=!1,AA=null,lu=!1,lb=Error(n(519));function Nf(A){var m=Error(n(418,""));throw Xh(hn(m,A)),lb}function gE(A){var m=A.stateNode,v=A.type,C=A.memoizedProps;switch(m[nr]=A,m[xr]=C,v){case"dialog":Nn("cancel",m),Nn("close",m);break;case"iframe":case"object":case"embed":Nn("load",m);break;case"video":case"audio":for(v=0;v<Ob.length;v++)Nn(Ob[v],m);break;case"source":Nn("error",m);break;case"img":case"image":case"link":Nn("error",m),Nn("load",m);break;case"details":Nn("toggle",m);break;case"input":Nn("invalid",m),qc(m,C.value,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name,!0),Kc(m);break;case"select":Nn("invalid",m);break;case"textarea":Nn("invalid",m),Xc(m,C.value,C.defaultValue,C.children),Kc(m)}v=C.children,typeof v!="string"&&typeof v!="number"&&typeof v!="bigint"||m.textContent===""+v||C.suppressHydrationWarning===!0||JU(m.textContent,v)?(C.popover!=null&&(Nn("beforetoggle",m),Nn("toggle",m)),C.onScroll!=null&&Nn("scroll",m),C.onScrollEnd!=null&&Nn("scrollend",m),C.onClick!=null&&(m.onclick=ZE),m=!0):m=!1,m||Nf(A)}function od(A){for(Fs=A.return;Fs;)switch(Fs.tag){case 5:case 13:lu=!1;return;case 27:case 3:lu=!0;return;default:Fs=Fs.return}}function ao(A){if(A!==Fs)return!1;if(!Mn)return od(A),Mn=!0,!1;var m=A.tag,v;if((v=m!==3&&m!==27)&&((v=m===5)&&(v=A.type,v=!(v!=="form"&&v!=="button")||WB(A.type,A.memoizedProps)),v=!v),v&&Wa&&Nf(A),od(A),m===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));e:{for(A=A.nextSibling,m=0;A;){if(A.nodeType===8)if(v=A.data,v==="/$"){if(m===0){Wa=md(A.nextSibling);break e}m--}else v!=="$"&&v!=="$!"&&v!=="$?"||m++;A=A.nextSibling}Wa=null}}else m===27?(m=Wa,f0(A.type)?(A=ZB,ZB=null,Wa=A):Wa=m):Wa=Fs?md(A.stateNode.nextSibling):null;return!0}function dl(){Wa=Fs=null,Mn=!1}function xE(){var A=AA;return A!==null&&(Ul===null?Ul=A:Ul.push.apply(Ul,A),AA=null),A}function Xh(A){AA===null?AA=[A]:AA.push(A)}var cu=ee(null),ri=null,ld=null;function fA(A,m,v){Q(cu,m._currentValue),m._currentValue=v}function uu(A){A._currentValue=cu.current,P(cu)}function qg(A,m,v){for(;A!==null;){var C=A.alternate;if((A.childLanes&m)!==m?(A.childLanes|=m,C!==null&&(C.childLanes|=m)):C!==null&&(C.childLanes&m)!==m&&(C.childLanes|=m),A===v)break;A=A.return}}function Wg(A,m,v,C){var U=A.child;for(U!==null&&(U.return=A);U!==null;){var q=U.dependencies;if(q!==null){var ue=U.child;q=q.firstContext;e:for(;q!==null;){var be=q;q=U;for(var Pe=0;Pe<m.length;Pe++)if(be.context===m[Pe]){q.lanes|=v,be=q.alternate,be!==null&&(be.lanes|=v),qg(q.return,v,A),C||(ue=null);break e}q=be.next}}else if(U.tag===18){if(ue=U.return,ue===null)throw Error(n(341));ue.lanes|=v,q=ue.alternate,q!==null&&(q.lanes|=v),qg(ue,v,A),ue=null}else ue=U.child;if(ue!==null)ue.return=U;else for(ue=U;ue!==null;){if(ue===A){ue=null;break}if(U=ue.sibling,U!==null){U.return=ue.return,ue=U;break}ue=ue.return}U=ue}}function Yh(A,m,v,C){A=null;for(var U=m,q=!1;U!==null;){if(!q){if((U.flags&524288)!==0)q=!0;else if((U.flags&262144)!==0)break}if(U.tag===10){var ue=U.alternate;if(ue===null)throw Error(n(387));if(ue=ue.memoizedProps,ue!==null){var be=U.type;ei(U.pendingProps.value,ue.value)||(A!==null?A.push(be):A=[be])}}else if(U===se.current){if(ue=U.alternate,ue===null)throw Error(n(387));ue.memoizedState.memoizedState!==U.memoizedState.memoizedState&&(A!==null?A.push(Ub):A=[Ub])}U=U.return}A!==null&&Wg(m,A,v,C),m.flags|=262144}function Xg(A){for(A=A.firstContext;A!==null;){if(!ei(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function du(A){ri=A,ld=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function Os(A){return Yg(ri,A)}function hA(A,m){return ri===null&&du(A),Yg(A,m)}function Yg(A,m){var v=m._currentValue;if(m={context:m,memoizedValue:v,next:null},ld===null){if(A===null)throw Error(n(308));ld=m,A.dependencies={lanes:0,firstContext:m},A.flags|=524288}else ld=ld.next=m;return v}var aB=typeof AbortController<"u"?AbortController:function(){var A=[],m=this.signal={aborted:!1,addEventListener:function(v,C){A.push(C)}};this.abort=function(){m.aborted=!0,A.forEach(function(v){return v()})}},vE=e.unstable_scheduleCallback,sB=e.unstable_NormalPriority,Ds={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cb(){return{controller:new aB,data:new Map,refCount:0}}function Ym(A){A.refCount--,A.refCount===0&&vE(sB,function(){A.controller.abort()})}var Jm=null,ub=0,Sf=0,cd=null;function iB(A,m){if(Jm===null){var v=Jm=[];ub=0,Sf=UB(),cd={status:"pending",value:void 0,then:function(C){v.push(C)}}}return ub++,m.then(bE,bE),m}function bE(){if(--ub===0&&Jm!==null){cd!==null&&(cd.status="fulfilled");var A=Jm;Jm=null,Sf=0,cd=null;for(var m=0;m<A.length;m++)(0,A[m])()}}function yE(A,m){var v=[],C={status:"pending",value:null,reason:null,then:function(U){v.push(U)}};return A.then(function(){C.status="fulfilled",C.value=m;for(var U=0;U<v.length;U++)(0,v[U])(m)},function(U){for(C.status="rejected",C.reason=U,U=0;U<v.length;U++)(0,v[U])(void 0)}),C}var T=V.S;V.S=function(A,m){typeof m=="object"&&m!==null&&typeof m.then=="function"&&iB(A,m),T!==null&&T(A,m)};var H=ee(null);function Z(){var A=H.current;return A!==null?A:Ta.pooledCache}function ie(A,m){m===null?Q(H,H.current):Q(H,m.pool)}function de(){var A=Z();return A===null?null:{parent:Ds._currentValue,pool:A}}var pe=Error(n(460)),ge=Error(n(474)),xe=Error(n(542)),Ee={then:function(){}};function Be(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Ue(){}function it(A,m,v){switch(v=A[v],v===void 0?A.push(m):v!==m&&(m.then(Ue,Ue),m=v),m.status){case"fulfilled":return m.value;case"rejected":throw A=m.reason,Ft(A),A;default:if(typeof m.status=="string")m.then(Ue,Ue);else{if(A=Ta,A!==null&&100<A.shellSuspendCounter)throw Error(n(482));A=m,A.status="pending",A.then(function(C){if(m.status==="pending"){var U=m;U.status="fulfilled",U.value=C}},function(C){if(m.status==="pending"){var U=m;U.status="rejected",U.reason=C}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw A=m.reason,Ft(A),A}throw rt=m,pe}}var rt=null;function We(){if(rt===null)throw Error(n(459));var A=rt;return rt=null,A}function Ft(A){if(A===pe||A===xe)throw Error(n(483))}var pt=!1;function Qe(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ve(A,m){A=A.updateQueue,m.updateQueue===A&&(m.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function _t(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function Ot(A,m,v){var C=A.updateQueue;if(C===null)return null;if(C=C.shared,(ua&2)!==0){var U=C.pending;return U===null?m.next=m:(m.next=U.next,U.next=m),C.pending=m,m=wf(A),$g(A,null,v),m}return cA(A,C,m,v),wf(A)}function jt(A,m,v){if(m=m.updateQueue,m!==null&&(m=m.shared,(v&4194048)!==0)){var C=m.lanes;C&=A.pendingLanes,v|=C,m.lanes=v,tt(A,v)}}function rr(A,m){var v=A.updateQueue,C=A.alternate;if(C!==null&&(C=C.updateQueue,v===C)){var U=null,q=null;if(v=v.firstBaseUpdate,v!==null){do{var ue={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};q===null?U=q=ue:q=q.next=ue,v=v.next}while(v!==null);q===null?U=q=m:q=q.next=m}else U=q=m;v={baseState:C.baseState,firstBaseUpdate:U,lastBaseUpdate:q,shared:C.shared,callbacks:C.callbacks},A.updateQueue=v;return}A=v.lastBaseUpdate,A===null?v.firstBaseUpdate=m:A.next=m,v.lastBaseUpdate=m}var Yt=!1;function br(){if(Yt){var A=cd;if(A!==null)throw A}}function er(A,m,v,C){Yt=!1;var U=A.updateQueue;pt=!1;var q=U.firstBaseUpdate,ue=U.lastBaseUpdate,be=U.shared.pending;if(be!==null){U.shared.pending=null;var Pe=be,ct=Pe.next;Pe.next=null,ue===null?q=ct:ue.next=ct,ue=Pe;var Bt=A.alternate;Bt!==null&&(Bt=Bt.updateQueue,be=Bt.lastBaseUpdate,be!==ue&&(be===null?Bt.firstBaseUpdate=ct:be.next=ct,Bt.lastBaseUpdate=Pe))}if(q!==null){var Rt=U.baseState;ue=0,Bt=ct=Pe=null,be=q;do{var At=be.lane&-536870913,mt=At!==be.lane;if(mt?(Rn&At)===At:(C&At)===At){At!==0&&At===Sf&&(Yt=!0),Bt!==null&&(Bt=Bt.next={lane:0,tag:be.tag,payload:be.payload,callback:null,next:null});e:{var $r=A,Or=be;At=m;var ya=v;switch(Or.tag){case 1:if($r=Or.payload,typeof $r=="function"){Rt=$r.call(ya,Rt,At);break e}Rt=$r;break e;case 3:$r.flags=$r.flags&-65537|128;case 0:if($r=Or.payload,At=typeof $r=="function"?$r.call(ya,Rt,At):$r,At==null)break e;Rt=d({},Rt,At);break e;case 2:pt=!0}}At=be.callback,At!==null&&(A.flags|=64,mt&&(A.flags|=8192),mt=U.callbacks,mt===null?U.callbacks=[At]:mt.push(At))}else mt={lane:At,tag:be.tag,payload:be.payload,callback:be.callback,next:null},Bt===null?(ct=Bt=mt,Pe=Rt):Bt=Bt.next=mt,ue|=At;if(be=be.next,be===null){if(be=U.shared.pending,be===null)break;mt=be,be=mt.next,mt.next=null,U.lastBaseUpdate=mt,U.shared.pending=null}}while(!0);Bt===null&&(Pe=Rt),U.baseState=Pe,U.firstBaseUpdate=ct,U.lastBaseUpdate=Bt,q===null&&(U.shared.lanes=0),c0|=ue,A.lanes=ue,A.memoizedState=Rt}}function Dn(A,m){if(typeof A!="function")throw Error(n(191,A));A.call(m)}function zn(A,m){var v=A.callbacks;if(v!==null)for(A.callbacks=null,A=0;A<v.length;A++)Dn(v[A],m)}var fn=ee(null),ln=ee(0);function ta(A,m){A=Rf,Q(ln,A),Q(fn,m),Rf=A|m.baseLanes}function $n(){Q(ln,Rf),Q(fn,fn.current)}function Xr(){Rf=ln.current,P(fn),P(ln)}var ca=0,Br=null,Ur=null,On=null,Pn=!1,ni=!1,Ps=!1,ns=0,as=0,vs=null,Ll=0;function Gn(){throw Error(n(321))}function bs(A,m){if(m===null)return!1;for(var v=0;v<m.length&&v<A.length;v++)if(!ei(A[v],m[v]))return!1;return!0}function pc(A,m,v,C,U,q){return ca=q,Br=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,V.H=A===null||A.memoizedState===null?IM:FM,Ps=!1,q=v(C,U),Ps=!1,ni&&(q=kf(m,v,C,U)),mA(A),q}function mA(A){V.H=FE;var m=Ur!==null&&Ur.next!==null;if(ca=0,On=Ur=Br=null,Pn=!1,as=0,vs=null,m)throw Error(n(300));A===null||Ri||(A=A.dependencies,A!==null&&Xg(A)&&(Ri=!0))}function kf(A,m,v,C){Br=A;var U=0;do{if(ni&&(vs=null),as=0,ni=!1,25<=U)throw Error(n(301));if(U+=1,On=Ur=null,A.updateQueue!=null){var q=A.updateQueue;q.lastEffect=null,q.events=null,q.stores=null,q.memoCache!=null&&(q.memoCache.index=0)}V.H=pAe,q=m(v,C)}while(ni);return q}function pA(){var A=V.H,m=A.useState()[0];return m=typeof m.then=="function"?gA(m):m,A=A.useState()[0],(Ur!==null?Ur.memoizedState:null)!==A&&(Br.flags|=1024),m}function ja(){var A=ns!==0;return ns=0,A}function Zm(A,m,v){m.updateQueue=A.updateQueue,m.flags&=-2053,A.lanes&=~v}function Jg(A){if(Pn){for(A=A.memoizedState;A!==null;){var m=A.queue;m!==null&&(m.pending=null),A=A.next}Pn=!1}ca=0,On=Ur=Br=null,ni=!1,as=ns=0,vs=null}function so(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?Br.memoizedState=On=A:On=On.next=A,On}function Ra(){if(Ur===null){var A=Br.alternate;A=A!==null?A.memoizedState:null}else A=Ur.next;var m=On===null?Br.memoizedState:On.next;if(m!==null)On=m,Ur=A;else{if(A===null)throw Br.alternate===null?Error(n(467)):Error(n(310));Ur=A,A={memoizedState:Ur.memoizedState,baseState:Ur.baseState,baseQueue:Ur.baseQueue,queue:Ur.queue,next:null},On===null?Br.memoizedState=On=A:On=On.next=A}return On}function Bf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gA(A){var m=as;return as+=1,vs===null&&(vs=[]),A=it(vs,A,m),m=Br,(On===null?m.memoizedState:On.next)===null&&(m=m.alternate,V.H=m===null||m.memoizedState===null?IM:FM),A}function Io(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return gA(A);if(A.$$typeof===_)return Os(A)}throw Error(n(438,String(A)))}function xA(A){var m=null,v=Br.updateQueue;if(v!==null&&(m=v.memoCache),m==null){var C=Br.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(m={data:C.data.map(function(U){return U.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),v===null&&(v=Bf(),Br.updateQueue=v),v.memoCache=m,v=m.data[m.index],v===void 0)for(v=m.data[m.index]=Array(A),C=0;C<A;C++)v[C]=R;return m.index++,v}function Fo(A,m){return typeof m=="function"?m(A):m}function ep(A){var m=Ra();return Jh(m,Ur,A)}function Jh(A,m,v){var C=A.queue;if(C===null)throw Error(n(311));C.lastRenderedReducer=v;var U=A.baseQueue,q=C.pending;if(q!==null){if(U!==null){var ue=U.next;U.next=q.next,q.next=ue}m.baseQueue=U=q,C.pending=null}if(q=A.baseState,U===null)A.memoizedState=q;else{m=U.next;var be=ue=null,Pe=null,ct=m,Bt=!1;do{var Rt=ct.lane&-536870913;if(Rt!==ct.lane?(Rn&Rt)===Rt:(ca&Rt)===Rt){var At=ct.revertLane;if(At===0)Pe!==null&&(Pe=Pe.next={lane:0,revertLane:0,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),Rt===Sf&&(Bt=!0);else if((ca&At)===At){ct=ct.next,At===Sf&&(Bt=!0);continue}else Rt={lane:0,revertLane:ct.revertLane,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null},Pe===null?(be=Pe=Rt,ue=q):Pe=Pe.next=Rt,Br.lanes|=At,c0|=At;Rt=ct.action,Ps&&v(q,Rt),q=ct.hasEagerState?ct.eagerState:v(q,Rt)}else At={lane:Rt,revertLane:ct.revertLane,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null},Pe===null?(be=Pe=At,ue=q):Pe=Pe.next=At,Br.lanes|=Rt,c0|=Rt;ct=ct.next}while(ct!==null&&ct!==m);if(Pe===null?ue=q:Pe.next=be,!ei(q,A.memoizedState)&&(Ri=!0,Bt&&(v=cd,v!==null)))throw v;A.memoizedState=q,A.baseState=ue,A.baseQueue=Pe,C.lastRenderedState=q}return U===null&&(C.lanes=0),[A.memoizedState,C.dispatch]}function Zg(A){var m=Ra(),v=m.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=A;var C=v.dispatch,U=v.pending,q=m.memoizedState;if(U!==null){v.pending=null;var ue=U=U.next;do q=A(q,ue.action),ue=ue.next;while(ue!==U);ei(q,m.memoizedState)||(Ri=!0),m.memoizedState=q,m.baseQueue===null&&(m.baseState=q),v.lastRenderedState=q}return[q,C]}function tp(A,m,v){var C=Br,U=Ra(),q=Mn;if(q){if(v===void 0)throw Error(n(407));v=v()}else v=m();var ue=!ei((Ur||U).memoizedState,v);ue&&(U.memoizedState=v,Ri=!0),U=U.queue;var be=Zh.bind(null,C,U,A);if(r0(2048,8,be,[A]),U.getSnapshot!==m||ue||On!==null&&On.memoizedState.tag&1){if(C.flags|=2048,dd(9,sp(),rp.bind(null,C,U,v,m),null),Ta===null)throw Error(n(349));q||(ca&124)!==0||ex(C,m,v)}return v}function ex(A,m,v){A.flags|=16384,A={getSnapshot:m,value:v},m=Br.updateQueue,m===null?(m=Bf(),Br.updateQueue=m,m.stores=[A]):(v=m.stores,v===null?m.stores=[A]:v.push(A))}function rp(A,m,v,C){m.value=v,m.getSnapshot=C,wE(m)&&EE(A)}function Zh(A,m,v){return v(function(){wE(m)&&EE(A)})}function wE(A){var m=A.getSnapshot;A=A.value;try{var v=m();return!ei(A,v)}catch{return!0}}function EE(A){var m=rd(A,2);m!==null&&wc(m,A,2)}function np(A){var m=so();if(typeof A=="function"){var v=A;if(A=v(),Ps){Tt(!0);try{v()}finally{Tt(!1)}}}return m.memoizedState=m.baseState=A,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fo,lastRenderedState:A},m}function ud(A,m,v,C){return A.baseState=v,Jh(A,Ur,typeof C=="function"?C:Fo)}function oB(A,m,v,C,U){if(IE(A))throw Error(n(485));if(A=m.action,A!==null){var q={payload:U,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ue){q.listeners.push(ue)}};V.T!==null?v(!0):q.isTransition=!1,C(q),v=m.pending,v===null?(q.next=m.pending=q,CE(m,q)):(q.next=v.next,m.pending=v.next=q)}}function CE(A,m){var v=m.action,C=m.payload,U=A.state;if(m.isTransition){var q=V.T,ue={};V.T=ue;try{var be=v(U,C),Pe=V.S;Pe!==null&&Pe(ue,be),_E(A,m,be)}catch(ct){e0(A,m,ct)}finally{V.T=q}}else try{q=v(U,C),_E(A,m,q)}catch(ct){e0(A,m,ct)}}function _E(A,m,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(C){db(A,m,C)},function(C){return e0(A,m,C)}):db(A,m,v)}function db(A,m,v){m.status="fulfilled",m.value=v,Ab(m),A.state=v,m=A.pending,m!==null&&(v=m.next,v===m?A.pending=null:(v=v.next,m.next=v,CE(A,v)))}function e0(A,m,v){var C=A.pending;if(A.pending=null,C!==null){C=C.next;do m.status="rejected",m.reason=v,Ab(m),m=m.next;while(m!==C)}A.action=null}function Ab(A){A=A.listeners;for(var m=0;m<A.length;m++)(0,A[m])()}function fb(A,m){return m}function ap(A,m){if(Mn){var v=Ta.formState;if(v!==null){e:{var C=Br;if(Mn){if(Wa){t:{for(var U=Wa,q=lu;U.nodeType!==8;){if(!q){U=null;break t}if(U=md(U.nextSibling),U===null){U=null;break t}}q=U.data,U=q==="F!"||q==="F"?U:null}if(U){Wa=md(U.nextSibling),C=U.data==="F!";break e}}Nf(C)}C=!1}C&&(m=v[0])}}return v=so(),v.memoizedState=v.baseState=m,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fb,lastRenderedState:m},v.queue=C,v=BM.bind(null,Br,C),C.dispatch=v,C=np(!1),q=lB.bind(null,Br,!1,C.queue),C=so(),U={state:m,dispatch:null,action:A,pending:null},C.queue=U,v=oB.bind(null,Br,U,q,v),U.dispatch=v,C.memoizedState=A,[m,v,!1]}function tx(A){var m=Ra();return t0(m,Ur,A)}function t0(A,m,v){if(m=Jh(A,m,fb)[0],A=ep(Fo)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var C=gA(m)}catch(ue){throw ue===pe?xe:ue}else C=m;m=Ra();var U=m.queue,q=U.dispatch;return v!==m.memoizedState&&(Br.flags|=2048,dd(9,sp(),NE.bind(null,U,v),null)),[C,q,A]}function NE(A,m){A.action=m}function SE(A){var m=Ra(),v=Ur;if(v!==null)return t0(m,v,A);Ra(),m=m.memoizedState,v=Ra();var C=v.queue.dispatch;return v.memoizedState=A,[m,C,!1]}function dd(A,m,v,C){return A={tag:A,create:v,deps:C,inst:m,next:null},m=Br.updateQueue,m===null&&(m=Bf(),Br.updateQueue=m),v=m.lastEffect,v===null?m.lastEffect=A.next=A:(C=v.next,v.next=A,A.next=C,m.lastEffect=A),A}function sp(){return{destroy:void 0,resource:void 0}}function rx(){return Ra().memoizedState}function gc(A,m,v,C){var U=so();C=C===void 0?null:C,Br.flags|=A,U.memoizedState=dd(1|m,sp(),v,C)}function r0(A,m,v,C){var U=Ra();C=C===void 0?null:C;var q=U.memoizedState.inst;Ur!==null&&C!==null&&bs(C,Ur.memoizedState.deps)?U.memoizedState=dd(m,q,v,C):(Br.flags|=A,U.memoizedState=dd(1|m,q,v,C))}function hb(A,m){gc(8390656,8,A,m)}function kE(A,m){r0(2048,8,A,m)}function mb(A,m){return r0(4,2,A,m)}function jf(A,m){return r0(4,4,A,m)}function BE(A,m){if(typeof m=="function"){A=A();var v=m(A);return function(){typeof v=="function"?v():m(null)}}if(m!=null)return A=A(),m.current=A,function(){m.current=null}}function pb(A,m,v){v=v!=null?v.concat([A]):null,r0(4,4,BE.bind(null,m,A),v)}function gb(){}function xb(A,m){var v=Ra();m=m===void 0?null:m;var C=v.memoizedState;return m!==null&&bs(m,C[1])?C[0]:(v.memoizedState=[A,m],A)}function jE(A,m){var v=Ra();m=m===void 0?null:m;var C=v.memoizedState;if(m!==null&&bs(m,C[1]))return C[0];if(C=A(),Ps){Tt(!0);try{A()}finally{Tt(!1)}}return v.memoizedState=[C,m],C}function Tf(A,m,v){return v===void 0||(ca&1073741824)!==0?A.memoizedState=m:(A.memoizedState=v,A=_U(),Br.lanes|=A,c0|=A,v)}function nx(A,m,v,C){return ei(v,m)?v:fn.current!==null?(A=Tf(A,v,C),ei(A,m)||(Ri=!0),A):(ca&42)===0?(Ri=!0,A.memoizedState=v):(A=_U(),Br.lanes|=A,c0|=A,m)}function ip(A,m,v,C,U){var q=K.p;K.p=q!==0&&8>q?q:8;var ue=V.T,be={};V.T=be,lB(A,!1,m,v);try{var Pe=U(),ct=V.S;if(ct!==null&&ct(be,Pe),Pe!==null&&typeof Pe=="object"&&typeof Pe.then=="function"){var Bt=yE(Pe,C);wb(A,m,Bt,yc(A))}else wb(A,m,C,yc(A))}catch(Rt){wb(A,m,{then:function(){},status:"rejected",reason:Rt},yc())}finally{K.p=q,V.T=ue}}function Ad(){}function Au(A,m,v,C){if(A.tag!==5)throw Error(n(476));var U=fd(A).queue;ip(A,U,m,z,v===null?Ad:function(){return op(A),v(C)})}function fd(A){var m=A.memoizedState;if(m!==null)return m;m={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fo,lastRenderedState:z},next:null};var v={};return m.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fo,lastRenderedState:v},next:null},A.memoizedState=m,A=A.alternate,A!==null&&(A.memoizedState=m),m}function op(A){var m=fd(A).next.queue;wb(A,m,{},yc())}function lp(){return Os(Ub)}function vb(){return Ra().memoizedState}function TE(){return Ra().memoizedState}function bb(A){for(var m=A.return;m!==null;){switch(m.tag){case 24:case 3:var v=yc();A=_t(v);var C=Ot(m,A,v);C!==null&&(wc(C,m,v),jt(C,m,v)),m={cache:cb()},A.payload=m;return}m=m.return}}function yb(A,m,v){var C=yc();v={lane:C,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null},IE(A)?jM(m,v):(v=uA(A,m,v,C),v!==null&&(wc(v,A,C),TM(v,m,C)))}function BM(A,m,v){var C=yc();wb(A,m,v,C)}function wb(A,m,v,C){var U={lane:C,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null};if(IE(A))jM(m,U);else{var q=A.alternate;if(A.lanes===0&&(q===null||q.lanes===0)&&(q=m.lastRenderedReducer,q!==null))try{var ue=m.lastRenderedState,be=q(ue,v);if(U.hasEagerState=!0,U.eagerState=be,ei(be,ue))return cA(A,m,U,0),Ta===null&&Dl(),!1}catch{}finally{}if(v=uA(A,m,U,C),v!==null)return wc(v,A,C),TM(v,m,C),!0}return!1}function lB(A,m,v,C){if(C={lane:2,revertLane:UB(),action:C,hasEagerState:!1,eagerState:null,next:null},IE(A)){if(m)throw Error(n(479))}else m=uA(A,v,C,2),m!==null&&wc(m,A,2)}function IE(A){var m=A.alternate;return A===Br||m!==null&&m===Br}function jM(A,m){ni=Pn=!0;var v=A.pending;v===null?m.next=m:(m.next=v.next,v.next=m),A.pending=m}function TM(A,m,v){if((v&4194048)!==0){var C=m.lanes;C&=A.pendingLanes,v|=C,m.lanes=v,tt(A,v)}}var FE={readContext:Os,use:Io,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useLayoutEffect:Gn,useInsertionEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useSyncExternalStore:Gn,useId:Gn,useHostTransitionStatus:Gn,useFormState:Gn,useActionState:Gn,useOptimistic:Gn,useMemoCache:Gn,useCacheRefresh:Gn},IM={readContext:Os,use:Io,useCallback:function(A,m){return so().memoizedState=[A,m===void 0?null:m],A},useContext:Os,useEffect:hb,useImperativeHandle:function(A,m,v){v=v!=null?v.concat([A]):null,gc(4194308,4,BE.bind(null,m,A),v)},useLayoutEffect:function(A,m){return gc(4194308,4,A,m)},useInsertionEffect:function(A,m){gc(4,2,A,m)},useMemo:function(A,m){var v=so();m=m===void 0?null:m;var C=A();if(Ps){Tt(!0);try{A()}finally{Tt(!1)}}return v.memoizedState=[C,m],C},useReducer:function(A,m,v){var C=so();if(v!==void 0){var U=v(m);if(Ps){Tt(!0);try{v(m)}finally{Tt(!1)}}}else U=m;return C.memoizedState=C.baseState=U,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:U},C.queue=A,A=A.dispatch=yb.bind(null,Br,A),[C.memoizedState,A]},useRef:function(A){var m=so();return A={current:A},m.memoizedState=A},useState:function(A){A=np(A);var m=A.queue,v=BM.bind(null,Br,m);return m.dispatch=v,[A.memoizedState,v]},useDebugValue:gb,useDeferredValue:function(A,m){var v=so();return Tf(v,A,m)},useTransition:function(){var A=np(!1);return A=ip.bind(null,Br,A.queue,!0,!1),so().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,m,v){var C=Br,U=so();if(Mn){if(v===void 0)throw Error(n(407));v=v()}else{if(v=m(),Ta===null)throw Error(n(349));(Rn&124)!==0||ex(C,m,v)}U.memoizedState=v;var q={value:v,getSnapshot:m};return U.queue=q,hb(Zh.bind(null,C,q,A),[A]),C.flags|=2048,dd(9,sp(),rp.bind(null,C,q,v,m),null),v},useId:function(){var A=so(),m=Ta.identifierPrefix;if(Mn){var v=id,C=sd;v=(C&~(1<<32-St(C)-1)).toString(32)+v,m="«"+m+"R"+v,v=ns++,0<v&&(m+="H"+v.toString(32)),m+="»"}else v=Ll++,m="«"+m+"r"+v.toString(32)+"»";return A.memoizedState=m},useHostTransitionStatus:lp,useFormState:ap,useActionState:ap,useOptimistic:function(A){var m=so();m.memoizedState=m.baseState=A;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=v,m=lB.bind(null,Br,!0,v),v.dispatch=m,[A,m]},useMemoCache:xA,useCacheRefresh:function(){return so().memoizedState=bb.bind(null,Br)}},FM={readContext:Os,use:Io,useCallback:xb,useContext:Os,useEffect:kE,useImperativeHandle:pb,useInsertionEffect:mb,useLayoutEffect:jf,useMemo:jE,useReducer:ep,useRef:rx,useState:function(){return ep(Fo)},useDebugValue:gb,useDeferredValue:function(A,m){var v=Ra();return nx(v,Ur.memoizedState,A,m)},useTransition:function(){var A=ep(Fo)[0],m=Ra().memoizedState;return[typeof A=="boolean"?A:gA(A),m]},useSyncExternalStore:tp,useId:vb,useHostTransitionStatus:lp,useFormState:tx,useActionState:tx,useOptimistic:function(A,m){var v=Ra();return ud(v,Ur,A,m)},useMemoCache:xA,useCacheRefresh:TE},pAe={readContext:Os,use:Io,useCallback:xb,useContext:Os,useEffect:kE,useImperativeHandle:pb,useInsertionEffect:mb,useLayoutEffect:jf,useMemo:jE,useReducer:Zg,useRef:rx,useState:function(){return Zg(Fo)},useDebugValue:gb,useDeferredValue:function(A,m){var v=Ra();return Ur===null?Tf(v,A,m):nx(v,Ur.memoizedState,A,m)},useTransition:function(){var A=Zg(Fo)[0],m=Ra().memoizedState;return[typeof A=="boolean"?A:gA(A),m]},useSyncExternalStore:tp,useId:vb,useHostTransitionStatus:lp,useFormState:SE,useActionState:SE,useOptimistic:function(A,m){var v=Ra();return Ur!==null?ud(v,Ur,A,m):(v.baseState=A,[A,v.queue.dispatch])},useMemoCache:xA,useCacheRefresh:TE},ax=null,Eb=0;function OE(A){var m=Eb;return Eb+=1,ax===null&&(ax=[]),it(ax,A,m)}function Cb(A,m){m=m.props.ref,A.ref=m!==void 0?m:null}function DE(A,m){throw m.$$typeof===f?Error(n(525)):(A=Object.prototype.toString.call(m),Error(n(31,A==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":A)))}function OM(A){var m=A._init;return m(A._payload)}function DM(A){function m(Ye,He){if(A){var st=Ye.deletions;st===null?(Ye.deletions=[He],Ye.flags|=16):st.push(He)}}function v(Ye,He){if(!A)return null;for(;He!==null;)m(Ye,He),He=He.sibling;return null}function C(Ye){for(var He=new Map;Ye!==null;)Ye.key!==null?He.set(Ye.key,Ye):He.set(Ye.index,Ye),Ye=Ye.sibling;return He}function U(Ye,He){return Ye=ou(Ye,He),Ye.index=0,Ye.sibling=null,Ye}function q(Ye,He,st){return Ye.index=st,A?(st=Ye.alternate,st!==null?(st=st.index,st<He?(Ye.flags|=67108866,He):st):(Ye.flags|=67108866,He)):(Ye.flags|=1048576,He)}function ue(Ye){return A&&Ye.alternate===null&&(Ye.flags|=67108866),Ye}function be(Ye,He,st,It){return He===null||He.tag!==6?(He=Gg(st,Ye.mode,It),He.return=Ye,He):(He=U(He,st),He.return=Ye,He)}function Pe(Ye,He,st,It){var hr=st.type;return hr===g?Bt(Ye,He,st.props.children,It,st.key):He!==null&&(He.elementType===hr||typeof hr=="object"&&hr!==null&&hr.$$typeof===N&&OM(hr)===He.type)?(He=U(He,st.props),Cb(He,st),He.return=Ye,He):(He=Ef(st.type,st.key,st.props,null,Ye.mode,It),Cb(He,st),He.return=Ye,He)}function ct(Ye,He,st,It){return He===null||He.tag!==4||He.stateNode.containerInfo!==st.containerInfo||He.stateNode.implementation!==st.implementation?(He=qm(st,Ye.mode,It),He.return=Ye,He):(He=U(He,st.children||[]),He.return=Ye,He)}function Bt(Ye,He,st,It,hr){return He===null||He.tag!==7?(He=nd(st,Ye.mode,It,hr),He.return=Ye,He):(He=U(He,st),He.return=Ye,He)}function Rt(Ye,He,st){if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return He=Gg(""+He,Ye.mode,st),He.return=Ye,He;if(typeof He=="object"&&He!==null){switch(He.$$typeof){case h:return st=Ef(He.type,He.key,He.props,null,Ye.mode,st),Cb(st,He),st.return=Ye,st;case p:return He=qm(He,Ye.mode,st),He.return=Ye,He;case N:var It=He._init;return He=It(He._payload),Rt(Ye,He,st)}if(J(He)||O(He))return He=nd(He,Ye.mode,st,null),He.return=Ye,He;if(typeof He.then=="function")return Rt(Ye,OE(He),st);if(He.$$typeof===_)return Rt(Ye,hA(Ye,He),st);DE(Ye,He)}return null}function At(Ye,He,st,It){var hr=He!==null?He.key:null;if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return hr!==null?null:be(Ye,He,""+st,It);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case h:return st.key===hr?Pe(Ye,He,st,It):null;case p:return st.key===hr?ct(Ye,He,st,It):null;case N:return hr=st._init,st=hr(st._payload),At(Ye,He,st,It)}if(J(st)||O(st))return hr!==null?null:Bt(Ye,He,st,It,null);if(typeof st.then=="function")return At(Ye,He,OE(st),It);if(st.$$typeof===_)return At(Ye,He,hA(Ye,st),It);DE(Ye,st)}return null}function mt(Ye,He,st,It,hr){if(typeof It=="string"&&It!==""||typeof It=="number"||typeof It=="bigint")return Ye=Ye.get(st)||null,be(He,Ye,""+It,hr);if(typeof It=="object"&&It!==null){switch(It.$$typeof){case h:return Ye=Ye.get(It.key===null?st:It.key)||null,Pe(He,Ye,It,hr);case p:return Ye=Ye.get(It.key===null?st:It.key)||null,ct(He,Ye,It,hr);case N:var wn=It._init;return It=wn(It._payload),mt(Ye,He,st,It,hr)}if(J(It)||O(It))return Ye=Ye.get(st)||null,Bt(He,Ye,It,hr,null);if(typeof It.then=="function")return mt(Ye,He,st,OE(It),hr);if(It.$$typeof===_)return mt(Ye,He,st,hA(He,It),hr);DE(He,It)}return null}function $r(Ye,He,st,It){for(var hr=null,wn=null,Er=He,Pr=He=0,Mi=null;Er!==null&&Pr<st.length;Pr++){Er.index>Pr?(Mi=Er,Er=null):Mi=Er.sibling;var Kn=At(Ye,Er,st[Pr],It);if(Kn===null){Er===null&&(Er=Mi);break}A&&Er&&Kn.alternate===null&&m(Ye,Er),He=q(Kn,He,Pr),wn===null?hr=Kn:wn.sibling=Kn,wn=Kn,Er=Mi}if(Pr===st.length)return v(Ye,Er),Mn&&_f(Ye,Pr),hr;if(Er===null){for(;Pr<st.length;Pr++)Er=Rt(Ye,st[Pr],It),Er!==null&&(He=q(Er,He,Pr),wn===null?hr=Er:wn.sibling=Er,wn=Er);return Mn&&_f(Ye,Pr),hr}for(Er=C(Er);Pr<st.length;Pr++)Mi=mt(Er,Ye,Pr,st[Pr],It),Mi!==null&&(A&&Mi.alternate!==null&&Er.delete(Mi.key===null?Pr:Mi.key),He=q(Mi,He,Pr),wn===null?hr=Mi:wn.sibling=Mi,wn=Mi);return A&&Er.forEach(function(x0){return m(Ye,x0)}),Mn&&_f(Ye,Pr),hr}function Or(Ye,He,st,It){if(st==null)throw Error(n(151));for(var hr=null,wn=null,Er=He,Pr=He=0,Mi=null,Kn=st.next();Er!==null&&!Kn.done;Pr++,Kn=st.next()){Er.index>Pr?(Mi=Er,Er=null):Mi=Er.sibling;var x0=At(Ye,Er,Kn.value,It);if(x0===null){Er===null&&(Er=Mi);break}A&&Er&&x0.alternate===null&&m(Ye,Er),He=q(x0,He,Pr),wn===null?hr=x0:wn.sibling=x0,wn=x0,Er=Mi}if(Kn.done)return v(Ye,Er),Mn&&_f(Ye,Pr),hr;if(Er===null){for(;!Kn.done;Pr++,Kn=st.next())Kn=Rt(Ye,Kn.value,It),Kn!==null&&(He=q(Kn,He,Pr),wn===null?hr=Kn:wn.sibling=Kn,wn=Kn);return Mn&&_f(Ye,Pr),hr}for(Er=C(Er);!Kn.done;Pr++,Kn=st.next())Kn=mt(Er,Ye,Pr,Kn.value,It),Kn!==null&&(A&&Kn.alternate!==null&&Er.delete(Kn.key===null?Pr:Kn.key),He=q(Kn,He,Pr),wn===null?hr=Kn:wn.sibling=Kn,wn=Kn);return A&&Er.forEach(function(gfe){return m(Ye,gfe)}),Mn&&_f(Ye,Pr),hr}function ya(Ye,He,st,It){if(typeof st=="object"&&st!==null&&st.type===g&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case h:e:{for(var hr=st.key;He!==null;){if(He.key===hr){if(hr=st.type,hr===g){if(He.tag===7){v(Ye,He.sibling),It=U(He,st.props.children),It.return=Ye,Ye=It;break e}}else if(He.elementType===hr||typeof hr=="object"&&hr!==null&&hr.$$typeof===N&&OM(hr)===He.type){v(Ye,He.sibling),It=U(He,st.props),Cb(It,st),It.return=Ye,Ye=It;break e}v(Ye,He);break}else m(Ye,He);He=He.sibling}st.type===g?(It=nd(st.props.children,Ye.mode,It,st.key),It.return=Ye,Ye=It):(It=Ef(st.type,st.key,st.props,null,Ye.mode,It),Cb(It,st),It.return=Ye,Ye=It)}return ue(Ye);case p:e:{for(hr=st.key;He!==null;){if(He.key===hr)if(He.tag===4&&He.stateNode.containerInfo===st.containerInfo&&He.stateNode.implementation===st.implementation){v(Ye,He.sibling),It=U(He,st.children||[]),It.return=Ye,Ye=It;break e}else{v(Ye,He);break}else m(Ye,He);He=He.sibling}It=qm(st,Ye.mode,It),It.return=Ye,Ye=It}return ue(Ye);case N:return hr=st._init,st=hr(st._payload),ya(Ye,He,st,It)}if(J(st))return $r(Ye,He,st,It);if(O(st)){if(hr=O(st),typeof hr!="function")throw Error(n(150));return st=hr.call(st),Or(Ye,He,st,It)}if(typeof st.then=="function")return ya(Ye,He,OE(st),It);if(st.$$typeof===_)return ya(Ye,He,hA(Ye,st),It);DE(Ye,st)}return typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint"?(st=""+st,He!==null&&He.tag===6?(v(Ye,He.sibling),It=U(He,st),It.return=Ye,Ye=It):(v(Ye,He),It=Gg(st,Ye.mode,It),It.return=Ye,Ye=It),ue(Ye)):v(Ye,He)}return function(Ye,He,st,It){try{Eb=0;var hr=ya(Ye,He,st,It);return ax=null,hr}catch(Er){if(Er===pe||Er===xe)throw Er;var wn=Pi(29,Er,null,Ye.mode);return wn.lanes=It,wn.return=Ye,wn}finally{}}}var sx=DM(!0),PM=DM(!1),fu=ee(null),vA=null;function n0(A){var m=A.alternate;Q(yi,yi.current&1),Q(fu,A),vA===null&&(m===null||fn.current!==null||m.memoizedState!==null)&&(vA=A)}function RM(A){if(A.tag===22){if(Q(yi,yi.current),Q(fu,A),vA===null){var m=A.alternate;m!==null&&m.memoizedState!==null&&(vA=A)}}else a0()}function a0(){Q(yi,yi.current),Q(fu,fu.current)}function If(A){P(fu),vA===A&&(vA=null),P(yi)}var yi=ee(0);function PE(A){for(var m=A;m!==null;){if(m.tag===13){var v=m.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||JB(v)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===A)break;for(;m.sibling===null;){if(m.return===null||m.return===A)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}function cB(A,m,v,C){m=A.memoizedState,v=v(C,m),v=v==null?m:d({},m,v),A.memoizedState=v,A.lanes===0&&(A.updateQueue.baseState=v)}var uB={enqueueSetState:function(A,m,v){A=A._reactInternals;var C=yc(),U=_t(C);U.payload=m,v!=null&&(U.callback=v),m=Ot(A,U,C),m!==null&&(wc(m,A,C),jt(m,A,C))},enqueueReplaceState:function(A,m,v){A=A._reactInternals;var C=yc(),U=_t(C);U.tag=1,U.payload=m,v!=null&&(U.callback=v),m=Ot(A,U,C),m!==null&&(wc(m,A,C),jt(m,A,C))},enqueueForceUpdate:function(A,m){A=A._reactInternals;var v=yc(),C=_t(v);C.tag=2,m!=null&&(C.callback=m),m=Ot(A,C,v),m!==null&&(wc(m,A,v),jt(m,A,v))}};function LM(A,m,v,C,U,q,ue){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(C,q,ue):m.prototype&&m.prototype.isPureReactComponent?!rA(v,C)||!rA(U,q):!0}function MM(A,m,v,C){A=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(v,C),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(v,C),m.state!==A&&uB.enqueueReplaceState(m,m.state,null)}function cp(A,m){var v=m;if("ref"in m){v={};for(var C in m)C!=="ref"&&(v[C]=m[C])}if(A=A.defaultProps){v===m&&(v=d({},v));for(var U in A)v[U]===void 0&&(v[U]=A[U])}return v}var RE=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function UM(A){RE(A)}function QM(A){console.error(A)}function HM(A){RE(A)}function LE(A,m){try{var v=A.onUncaughtError;v(m.value,{componentStack:m.stack})}catch(C){setTimeout(function(){throw C})}}function VM(A,m,v){try{var C=A.onCaughtError;C(v.value,{componentStack:v.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(U){setTimeout(function(){throw U})}}function dB(A,m,v){return v=_t(v),v.tag=3,v.payload={element:null},v.callback=function(){LE(A,m)},v}function zM(A){return A=_t(A),A.tag=3,A}function $M(A,m,v,C){var U=v.type.getDerivedStateFromError;if(typeof U=="function"){var q=C.value;A.payload=function(){return U(q)},A.callback=function(){VM(m,v,C)}}var ue=v.stateNode;ue!==null&&typeof ue.componentDidCatch=="function"&&(A.callback=function(){VM(m,v,C),typeof U!="function"&&(u0===null?u0=new Set([this]):u0.add(this));var be=C.stack;this.componentDidCatch(C.value,{componentStack:be!==null?be:""})})}function gAe(A,m,v,C,U){if(v.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(m=v.alternate,m!==null&&Yh(m,v,U,!0),v=fu.current,v!==null){switch(v.tag){case 13:return vA===null?DB():v.alternate===null&&ys===0&&(ys=3),v.flags&=-257,v.flags|=65536,v.lanes=U,C===Ee?v.flags|=16384:(m=v.updateQueue,m===null?v.updateQueue=new Set([C]):m.add(C),RB(A,C,U)),!1;case 22:return v.flags|=65536,C===Ee?v.flags|=16384:(m=v.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([C])},v.updateQueue=m):(v=m.retryQueue,v===null?m.retryQueue=new Set([C]):v.add(C)),RB(A,C,U)),!1}throw Error(n(435,v.tag))}return RB(A,C,U),DB(),!1}if(Mn)return m=fu.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=U,C!==lb&&(A=Error(n(422),{cause:C}),Xh(hn(A,v)))):(C!==lb&&(m=Error(n(423),{cause:C}),Xh(hn(m,v))),A=A.current.alternate,A.flags|=65536,U&=-U,A.lanes|=U,C=hn(C,v),U=dB(A.stateNode,C,U),rr(A,U),ys!==4&&(ys=2)),!1;var q=Error(n(520),{cause:C});if(q=hn(q,v),Tb===null?Tb=[q]:Tb.push(q),ys!==4&&(ys=2),m===null)return!0;C=hn(C,v),v=m;do{switch(v.tag){case 3:return v.flags|=65536,A=U&-U,v.lanes|=A,A=dB(v.stateNode,C,A),rr(v,A),!1;case 1:if(m=v.type,q=v.stateNode,(v.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(u0===null||!u0.has(q))))return v.flags|=65536,U&=-U,v.lanes|=U,U=zM(U),$M(U,A,v,C),rr(v,U),!1}v=v.return}while(v!==null);return!1}var GM=Error(n(461)),Ri=!1;function io(A,m,v,C){m.child=A===null?PM(m,null,v,C):sx(m,A.child,v,C)}function KM(A,m,v,C,U){v=v.render;var q=m.ref;if("ref"in C){var ue={};for(var be in C)be!=="ref"&&(ue[be]=C[be])}else ue=C;return du(m),C=pc(A,m,v,ue,q,U),be=ja(),A!==null&&!Ri?(Zm(A,m,U),Ff(A,m,U)):(Mn&&be&&Wm(m),m.flags|=1,io(A,m,C,U),m.child)}function qM(A,m,v,C,U){if(A===null){var q=v.type;return typeof q=="function"&&!qh(q)&&q.defaultProps===void 0&&v.compare===null?(m.tag=15,m.type=q,WM(A,m,q,C,U)):(A=Ef(v.type,null,C,m,m.mode,U),A.ref=m.ref,A.return=m,m.child=A)}if(q=A.child,!vB(A,U)){var ue=q.memoizedProps;if(v=v.compare,v=v!==null?v:rA,v(ue,C)&&A.ref===m.ref)return Ff(A,m,U)}return m.flags|=1,A=ou(q,C),A.ref=m.ref,A.return=m,m.child=A}function WM(A,m,v,C,U){if(A!==null){var q=A.memoizedProps;if(rA(q,C)&&A.ref===m.ref)if(Ri=!1,m.pendingProps=C=q,vB(A,U))(A.flags&131072)!==0&&(Ri=!0);else return m.lanes=A.lanes,Ff(A,m,U)}return AB(A,m,v,C,U)}function XM(A,m,v){var C=m.pendingProps,U=C.children,q=A!==null?A.memoizedState:null;if(C.mode==="hidden"){if((m.flags&128)!==0){if(C=q!==null?q.baseLanes|v:v,A!==null){for(U=m.child=A.child,q=0;U!==null;)q=q|U.lanes|U.childLanes,U=U.sibling;m.childLanes=q&~C}else m.childLanes=0,m.child=null;return YM(A,m,C,v)}if((v&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},A!==null&&ie(m,q!==null?q.cachePool:null),q!==null?ta(m,q):$n(),RM(m);else return m.lanes=m.childLanes=536870912,YM(A,m,q!==null?q.baseLanes|v:v,v)}else q!==null?(ie(m,q.cachePool),ta(m,q),a0(),m.memoizedState=null):(A!==null&&ie(m,null),$n(),a0());return io(A,m,U,v),m.child}function YM(A,m,v,C){var U=Z();return U=U===null?null:{parent:Ds._currentValue,pool:U},m.memoizedState={baseLanes:v,cachePool:U},A!==null&&ie(m,null),$n(),RM(m),A!==null&&Yh(A,m,C,!0),null}function ME(A,m){var v=m.ref;if(v===null)A!==null&&A.ref!==null&&(m.flags|=4194816);else{if(typeof v!="function"&&typeof v!="object")throw Error(n(284));(A===null||A.ref!==v)&&(m.flags|=4194816)}}function AB(A,m,v,C,U){return du(m),v=pc(A,m,v,C,void 0,U),C=ja(),A!==null&&!Ri?(Zm(A,m,U),Ff(A,m,U)):(Mn&&C&&Wm(m),m.flags|=1,io(A,m,v,U),m.child)}function JM(A,m,v,C,U,q){return du(m),m.updateQueue=null,v=kf(m,C,v,U),mA(A),C=ja(),A!==null&&!Ri?(Zm(A,m,q),Ff(A,m,q)):(Mn&&C&&Wm(m),m.flags|=1,io(A,m,v,q),m.child)}function ZM(A,m,v,C,U){if(du(m),m.stateNode===null){var q=ti,ue=v.contextType;typeof ue=="object"&&ue!==null&&(q=Os(ue)),q=new v(C,q),m.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,q.updater=uB,m.stateNode=q,q._reactInternals=m,q=m.stateNode,q.props=C,q.state=m.memoizedState,q.refs={},Qe(m),ue=v.contextType,q.context=typeof ue=="object"&&ue!==null?Os(ue):ti,q.state=m.memoizedState,ue=v.getDerivedStateFromProps,typeof ue=="function"&&(cB(m,v,ue,C),q.state=m.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(ue=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),ue!==q.state&&uB.enqueueReplaceState(q,q.state,null),er(m,C,q,U),br(),q.state=m.memoizedState),typeof q.componentDidMount=="function"&&(m.flags|=4194308),C=!0}else if(A===null){q=m.stateNode;var be=m.memoizedProps,Pe=cp(v,be);q.props=Pe;var ct=q.context,Bt=v.contextType;ue=ti,typeof Bt=="object"&&Bt!==null&&(ue=Os(Bt));var Rt=v.getDerivedStateFromProps;Bt=typeof Rt=="function"||typeof q.getSnapshotBeforeUpdate=="function",be=m.pendingProps!==be,Bt||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(be||ct!==ue)&&MM(m,q,C,ue),pt=!1;var At=m.memoizedState;q.state=At,er(m,C,q,U),br(),ct=m.memoizedState,be||At!==ct||pt?(typeof Rt=="function"&&(cB(m,v,Rt,C),ct=m.memoizedState),(Pe=pt||LM(m,v,Pe,C,At,ct,ue))?(Bt||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(m.flags|=4194308)):(typeof q.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=C,m.memoizedState=ct),q.props=C,q.state=ct,q.context=ue,C=Pe):(typeof q.componentDidMount=="function"&&(m.flags|=4194308),C=!1)}else{q=m.stateNode,Ve(A,m),ue=m.memoizedProps,Bt=cp(v,ue),q.props=Bt,Rt=m.pendingProps,At=q.context,ct=v.contextType,Pe=ti,typeof ct=="object"&&ct!==null&&(Pe=Os(ct)),be=v.getDerivedStateFromProps,(ct=typeof be=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(ue!==Rt||At!==Pe)&&MM(m,q,C,Pe),pt=!1,At=m.memoizedState,q.state=At,er(m,C,q,U),br();var mt=m.memoizedState;ue!==Rt||At!==mt||pt||A!==null&&A.dependencies!==null&&Xg(A.dependencies)?(typeof be=="function"&&(cB(m,v,be,C),mt=m.memoizedState),(Bt=pt||LM(m,v,Bt,C,At,mt,Pe)||A!==null&&A.dependencies!==null&&Xg(A.dependencies))?(ct||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(C,mt,Pe),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(C,mt,Pe)),typeof q.componentDidUpdate=="function"&&(m.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof q.componentDidUpdate!="function"||ue===A.memoizedProps&&At===A.memoizedState||(m.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||ue===A.memoizedProps&&At===A.memoizedState||(m.flags|=1024),m.memoizedProps=C,m.memoizedState=mt),q.props=C,q.state=mt,q.context=Pe,C=Bt):(typeof q.componentDidUpdate!="function"||ue===A.memoizedProps&&At===A.memoizedState||(m.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||ue===A.memoizedProps&&At===A.memoizedState||(m.flags|=1024),C=!1)}return q=C,ME(A,m),C=(m.flags&128)!==0,q||C?(q=m.stateNode,v=C&&typeof v.getDerivedStateFromError!="function"?null:q.render(),m.flags|=1,A!==null&&C?(m.child=sx(m,A.child,null,U),m.child=sx(m,null,v,U)):io(A,m,v,U),m.memoizedState=q.state,A=m.child):A=Ff(A,m,U),A}function eU(A,m,v,C){return dl(),m.flags|=256,io(A,m,v,C),m.child}var fB={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hB(A){return{baseLanes:A,cachePool:de()}}function mB(A,m,v){return A=A!==null?A.childLanes&~v:0,m&&(A|=hu),A}function tU(A,m,v){var C=m.pendingProps,U=!1,q=(m.flags&128)!==0,ue;if((ue=q)||(ue=A!==null&&A.memoizedState===null?!1:(yi.current&2)!==0),ue&&(U=!0,m.flags&=-129),ue=(m.flags&32)!==0,m.flags&=-33,A===null){if(Mn){if(U?n0(m):a0(),Mn){var be=Wa,Pe;if(Pe=be){e:{for(Pe=be,be=lu;Pe.nodeType!==8;){if(!be){be=null;break e}if(Pe=md(Pe.nextSibling),Pe===null){be=null;break e}}be=Pe}be!==null?(m.memoizedState={dehydrated:be,treeContext:Cf!==null?{id:sd,overflow:id}:null,retryLane:536870912,hydrationErrors:null},Pe=Pi(18,null,null,0),Pe.stateNode=be,Pe.return=m,m.child=Pe,Fs=m,Wa=null,Pe=!0):Pe=!1}Pe||Nf(m)}if(be=m.memoizedState,be!==null&&(be=be.dehydrated,be!==null))return JB(be)?m.lanes=32:m.lanes=536870912,null;If(m)}return be=C.children,C=C.fallback,U?(a0(),U=m.mode,be=UE({mode:"hidden",children:be},U),C=nd(C,U,v,null),be.return=m,C.return=m,be.sibling=C,m.child=be,U=m.child,U.memoizedState=hB(v),U.childLanes=mB(A,ue,v),m.memoizedState=fB,C):(n0(m),pB(m,be))}if(Pe=A.memoizedState,Pe!==null&&(be=Pe.dehydrated,be!==null)){if(q)m.flags&256?(n0(m),m.flags&=-257,m=gB(A,m,v)):m.memoizedState!==null?(a0(),m.child=A.child,m.flags|=128,m=null):(a0(),U=C.fallback,be=m.mode,C=UE({mode:"visible",children:C.children},be),U=nd(U,be,v,null),U.flags|=2,C.return=m,U.return=m,C.sibling=U,m.child=C,sx(m,A.child,null,v),C=m.child,C.memoizedState=hB(v),C.childLanes=mB(A,ue,v),m.memoizedState=fB,m=U);else if(n0(m),JB(be)){if(ue=be.nextSibling&&be.nextSibling.dataset,ue)var ct=ue.dgst;ue=ct,C=Error(n(419)),C.stack="",C.digest=ue,Xh({value:C,source:null,stack:null}),m=gB(A,m,v)}else if(Ri||Yh(A,m,v,!1),ue=(v&A.childLanes)!==0,Ri||ue){if(ue=Ta,ue!==null&&(C=v&-v,C=(C&42)!==0?1:xt(C),C=(C&(ue.suspendedLanes|v))!==0?0:C,C!==0&&C!==Pe.retryLane))throw Pe.retryLane=C,rd(A,C),wc(ue,A,C),GM;be.data==="$?"||DB(),m=gB(A,m,v)}else be.data==="$?"?(m.flags|=192,m.child=A.child,m=null):(A=Pe.treeContext,Wa=md(be.nextSibling),Fs=m,Mn=!0,AA=null,lu=!1,A!==null&&(Rl[ul++]=sd,Rl[ul++]=id,Rl[ul++]=Cf,sd=A.id,id=A.overflow,Cf=m),m=pB(m,C.children),m.flags|=4096);return m}return U?(a0(),U=C.fallback,be=m.mode,Pe=A.child,ct=Pe.sibling,C=ou(Pe,{mode:"hidden",children:C.children}),C.subtreeFlags=Pe.subtreeFlags&65011712,ct!==null?U=ou(ct,U):(U=nd(U,be,v,null),U.flags|=2),U.return=m,C.return=m,C.sibling=U,m.child=C,C=U,U=m.child,be=A.child.memoizedState,be===null?be=hB(v):(Pe=be.cachePool,Pe!==null?(ct=Ds._currentValue,Pe=Pe.parent!==ct?{parent:ct,pool:ct}:Pe):Pe=de(),be={baseLanes:be.baseLanes|v,cachePool:Pe}),U.memoizedState=be,U.childLanes=mB(A,ue,v),m.memoizedState=fB,C):(n0(m),v=A.child,A=v.sibling,v=ou(v,{mode:"visible",children:C.children}),v.return=m,v.sibling=null,A!==null&&(ue=m.deletions,ue===null?(m.deletions=[A],m.flags|=16):ue.push(A)),m.child=v,m.memoizedState=null,v)}function pB(A,m){return m=UE({mode:"visible",children:m},A.mode),m.return=A,A.child=m}function UE(A,m){return A=Pi(22,A,null,m),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function gB(A,m,v){return sx(m,A.child,null,v),A=pB(m,m.pendingProps.children),A.flags|=2,m.memoizedState=null,A}function rU(A,m,v){A.lanes|=m;var C=A.alternate;C!==null&&(C.lanes|=m),qg(A.return,m,v)}function xB(A,m,v,C,U){var q=A.memoizedState;q===null?A.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:C,tail:v,tailMode:U}:(q.isBackwards=m,q.rendering=null,q.renderingStartTime=0,q.last=C,q.tail=v,q.tailMode=U)}function nU(A,m,v){var C=m.pendingProps,U=C.revealOrder,q=C.tail;if(io(A,m,C.children,v),C=yi.current,(C&2)!==0)C=C&1|2,m.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=m.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&rU(A,v,m);else if(A.tag===19)rU(A,v,m);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===m)break e;for(;A.sibling===null;){if(A.return===null||A.return===m)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}C&=1}switch(Q(yi,C),U){case"forwards":for(v=m.child,U=null;v!==null;)A=v.alternate,A!==null&&PE(A)===null&&(U=v),v=v.sibling;v=U,v===null?(U=m.child,m.child=null):(U=v.sibling,v.sibling=null),xB(m,!1,U,v,q);break;case"backwards":for(v=null,U=m.child,m.child=null;U!==null;){if(A=U.alternate,A!==null&&PE(A)===null){m.child=U;break}A=U.sibling,U.sibling=v,v=U,U=A}xB(m,!0,v,null,q);break;case"together":xB(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function Ff(A,m,v){if(A!==null&&(m.dependencies=A.dependencies),c0|=m.lanes,(v&m.childLanes)===0)if(A!==null){if(Yh(A,m,v,!1),(v&m.childLanes)===0)return null}else return null;if(A!==null&&m.child!==A.child)throw Error(n(153));if(m.child!==null){for(A=m.child,v=ou(A,A.pendingProps),m.child=v,v.return=m;A.sibling!==null;)A=A.sibling,v=v.sibling=ou(A,A.pendingProps),v.return=m;v.sibling=null}return m.child}function vB(A,m){return(A.lanes&m)!==0?!0:(A=A.dependencies,!!(A!==null&&Xg(A)))}function xAe(A,m,v){switch(m.tag){case 3:oe(m,m.stateNode.containerInfo),fA(m,Ds,A.memoizedState.cache),dl();break;case 27:case 5:me(m);break;case 4:oe(m,m.stateNode.containerInfo);break;case 10:fA(m,m.type,m.memoizedProps.value);break;case 13:var C=m.memoizedState;if(C!==null)return C.dehydrated!==null?(n0(m),m.flags|=128,null):(v&m.child.childLanes)!==0?tU(A,m,v):(n0(m),A=Ff(A,m,v),A!==null?A.sibling:null);n0(m);break;case 19:var U=(A.flags&128)!==0;if(C=(v&m.childLanes)!==0,C||(Yh(A,m,v,!1),C=(v&m.childLanes)!==0),U){if(C)return nU(A,m,v);m.flags|=128}if(U=m.memoizedState,U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),Q(yi,yi.current),C)break;return null;case 22:case 23:return m.lanes=0,XM(A,m,v);case 24:fA(m,Ds,A.memoizedState.cache)}return Ff(A,m,v)}function aU(A,m,v){if(A!==null)if(A.memoizedProps!==m.pendingProps)Ri=!0;else{if(!vB(A,v)&&(m.flags&128)===0)return Ri=!1,xAe(A,m,v);Ri=(A.flags&131072)!==0}else Ri=!1,Mn&&(m.flags&1048576)!==0&&pE(m,Kg,m.index);switch(m.lanes=0,m.tag){case 16:e:{A=m.pendingProps;var C=m.elementType,U=C._init;if(C=U(C._payload),m.type=C,typeof C=="function")qh(C)?(A=cp(C,A),m.tag=1,m=ZM(null,m,C,A,v)):(m.tag=0,m=AB(null,m,C,A,v));else{if(C!=null){if(U=C.$$typeof,U===B){m.tag=11,m=KM(null,m,C,A,v);break e}else if(U===E){m.tag=14,m=qM(null,m,C,A,v);break e}}throw m=M(C)||C,Error(n(306,m,""))}}return m;case 0:return AB(A,m,m.type,m.pendingProps,v);case 1:return C=m.type,U=cp(C,m.pendingProps),ZM(A,m,C,U,v);case 3:e:{if(oe(m,m.stateNode.containerInfo),A===null)throw Error(n(387));C=m.pendingProps;var q=m.memoizedState;U=q.element,Ve(A,m),er(m,C,null,v);var ue=m.memoizedState;if(C=ue.cache,fA(m,Ds,C),C!==q.cache&&Wg(m,[Ds],v,!0),br(),C=ue.element,q.isDehydrated)if(q={element:C,isDehydrated:!1,cache:ue.cache},m.updateQueue.baseState=q,m.memoizedState=q,m.flags&256){m=eU(A,m,C,v);break e}else if(C!==U){U=hn(Error(n(424)),m),Xh(U),m=eU(A,m,C,v);break e}else{switch(A=m.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(Wa=md(A.firstChild),Fs=m,Mn=!0,AA=null,lu=!0,v=PM(m,null,C,v),m.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling}else{if(dl(),C===U){m=Ff(A,m,v);break e}io(A,m,C,v)}m=m.child}return m;case 26:return ME(A,m),A===null?(v=l7(m.type,null,m.pendingProps,null))?m.memoizedState=v:Mn||(v=m.type,A=m.pendingProps,C=eC(ae.current).createElement(v),C[nr]=m,C[xr]=A,lo(C,v,A),$e(C),m.stateNode=C):m.memoizedState=l7(m.type,A.memoizedProps,m.pendingProps,A.memoizedState),null;case 27:return me(m),A===null&&Mn&&(C=m.stateNode=s7(m.type,m.pendingProps,ae.current),Fs=m,lu=!0,U=Wa,f0(m.type)?(ZB=U,Wa=md(C.firstChild)):Wa=U),io(A,m,m.pendingProps.children,v),ME(A,m),A===null&&(m.flags|=4194304),m.child;case 5:return A===null&&Mn&&((U=C=Wa)&&(C=GAe(C,m.type,m.pendingProps,lu),C!==null?(m.stateNode=C,Fs=m,Wa=md(C.firstChild),lu=!1,U=!0):U=!1),U||Nf(m)),me(m),U=m.type,q=m.pendingProps,ue=A!==null?A.memoizedProps:null,C=q.children,WB(U,q)?C=null:ue!==null&&WB(U,ue)&&(m.flags|=32),m.memoizedState!==null&&(U=pc(A,m,pA,null,null,v),Ub._currentValue=U),ME(A,m),io(A,m,C,v),m.child;case 6:return A===null&&Mn&&((A=v=Wa)&&(v=KAe(v,m.pendingProps,lu),v!==null?(m.stateNode=v,Fs=m,Wa=null,A=!0):A=!1),A||Nf(m)),null;case 13:return tU(A,m,v);case 4:return oe(m,m.stateNode.containerInfo),C=m.pendingProps,A===null?m.child=sx(m,null,C,v):io(A,m,C,v),m.child;case 11:return KM(A,m,m.type,m.pendingProps,v);case 7:return io(A,m,m.pendingProps,v),m.child;case 8:return io(A,m,m.pendingProps.children,v),m.child;case 12:return io(A,m,m.pendingProps.children,v),m.child;case 10:return C=m.pendingProps,fA(m,m.type,C.value),io(A,m,C.children,v),m.child;case 9:return U=m.type._context,C=m.pendingProps.children,du(m),U=Os(U),C=C(U),m.flags|=1,io(A,m,C,v),m.child;case 14:return qM(A,m,m.type,m.pendingProps,v);case 15:return WM(A,m,m.type,m.pendingProps,v);case 19:return nU(A,m,v);case 31:return C=m.pendingProps,v=m.mode,C={mode:C.mode,children:C.children},A===null?(v=UE(C,v),v.ref=m.ref,m.child=v,v.return=m,m=v):(v=ou(A.child,C),v.ref=m.ref,m.child=v,v.return=m,m=v),m;case 22:return XM(A,m,v);case 24:return du(m),C=Os(Ds),A===null?(U=Z(),U===null&&(U=Ta,q=cb(),U.pooledCache=q,q.refCount++,q!==null&&(U.pooledCacheLanes|=v),U=q),m.memoizedState={parent:C,cache:U},Qe(m),fA(m,Ds,U)):((A.lanes&v)!==0&&(Ve(A,m),er(m,null,null,v),br()),U=A.memoizedState,q=m.memoizedState,U.parent!==C?(U={parent:C,cache:C},m.memoizedState=U,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=U),fA(m,Ds,C)):(C=q.cache,fA(m,Ds,C),C!==U.cache&&Wg(m,[Ds],v,!0))),io(A,m,m.pendingProps.children,v),m.child;case 29:throw m.pendingProps}throw Error(n(156,m.tag))}function Of(A){A.flags|=4}function sU(A,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!f7(m)){if(m=fu.current,m!==null&&((Rn&4194048)===Rn?vA!==null:(Rn&62914560)!==Rn&&(Rn&536870912)===0||m!==vA))throw rt=Ee,ge;A.flags|=8192}}function QE(A,m){m!==null&&(A.flags|=4),A.flags&16384&&(m=A.tag!==22?nn():536870912,A.lanes|=m,cx|=m)}function _b(A,m){if(!Mn)switch(A.tailMode){case"hidden":m=A.tail;for(var v=null;m!==null;)m.alternate!==null&&(v=m),m=m.sibling;v===null?A.tail=null:v.sibling=null;break;case"collapsed":v=A.tail;for(var C=null;v!==null;)v.alternate!==null&&(C=v),v=v.sibling;C===null?m||A.tail===null?A.tail=null:A.tail.sibling=null:C.sibling=null}}function ss(A){var m=A.alternate!==null&&A.alternate.child===A.child,v=0,C=0;if(m)for(var U=A.child;U!==null;)v|=U.lanes|U.childLanes,C|=U.subtreeFlags&65011712,C|=U.flags&65011712,U.return=A,U=U.sibling;else for(U=A.child;U!==null;)v|=U.lanes|U.childLanes,C|=U.subtreeFlags,C|=U.flags,U.return=A,U=U.sibling;return A.subtreeFlags|=C,A.childLanes=v,m}function vAe(A,m,v){var C=m.pendingProps;switch(Xm(m),m.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ss(m),null;case 1:return ss(m),null;case 3:return v=m.stateNode,C=null,A!==null&&(C=A.memoizedState.cache),m.memoizedState.cache!==C&&(m.flags|=2048),uu(Ds),ce(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(A===null||A.child===null)&&(ao(m)?Of(m):A===null||A.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,xE())),ss(m),null;case 26:return v=m.memoizedState,A===null?(Of(m),v!==null?(ss(m),sU(m,v)):(ss(m),m.flags&=-16777217)):v?v!==A.memoizedState?(Of(m),ss(m),sU(m,v)):(ss(m),m.flags&=-16777217):(A.memoizedProps!==C&&Of(m),ss(m),m.flags&=-16777217),null;case 27:ke(m),v=ae.current;var U=m.type;if(A!==null&&m.stateNode!=null)A.memoizedProps!==C&&Of(m);else{if(!C){if(m.stateNode===null)throw Error(n(166));return ss(m),null}A=X.current,ao(m)?gE(m):(A=s7(U,C,v),m.stateNode=A,Of(m))}return ss(m),null;case 5:if(ke(m),v=m.type,A!==null&&m.stateNode!=null)A.memoizedProps!==C&&Of(m);else{if(!C){if(m.stateNode===null)throw Error(n(166));return ss(m),null}if(A=X.current,ao(m))gE(m);else{switch(U=eC(ae.current),A){case 1:A=U.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:A=U.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":A=U.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":A=U.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":A=U.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof C.is=="string"?U.createElement("select",{is:C.is}):U.createElement("select"),C.multiple?A.multiple=!0:C.size&&(A.size=C.size);break;default:A=typeof C.is=="string"?U.createElement(v,{is:C.is}):U.createElement(v)}}A[nr]=m,A[xr]=C;e:for(U=m.child;U!==null;){if(U.tag===5||U.tag===6)A.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===m)break e;for(;U.sibling===null;){if(U.return===null||U.return===m)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}m.stateNode=A;e:switch(lo(A,v,C),v){case"button":case"input":case"select":case"textarea":A=!!C.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&Of(m)}}return ss(m),m.flags&=-16777217,null;case 6:if(A&&m.stateNode!=null)A.memoizedProps!==C&&Of(m);else{if(typeof C!="string"&&m.stateNode===null)throw Error(n(166));if(A=ae.current,ao(m)){if(A=m.stateNode,v=m.memoizedProps,C=null,U=Fs,U!==null)switch(U.tag){case 27:case 5:C=U.memoizedProps}A[nr]=m,A=!!(A.nodeValue===v||C!==null&&C.suppressHydrationWarning===!0||JU(A.nodeValue,v)),A||Nf(m)}else A=eC(A).createTextNode(C),A[nr]=m,m.stateNode=A}return ss(m),null;case 13:if(C=m.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(U=ao(m),C!==null&&C.dehydrated!==null){if(A===null){if(!U)throw Error(n(318));if(U=m.memoizedState,U=U!==null?U.dehydrated:null,!U)throw Error(n(317));U[nr]=m}else dl(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;ss(m),U=!1}else U=xE(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=U),U=!0;if(!U)return m.flags&256?(If(m),m):(If(m),null)}if(If(m),(m.flags&128)!==0)return m.lanes=v,m;if(v=C!==null,A=A!==null&&A.memoizedState!==null,v){C=m.child,U=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(U=C.alternate.memoizedState.cachePool.pool);var q=null;C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(q=C.memoizedState.cachePool.pool),q!==U&&(C.flags|=2048)}return v!==A&&v&&(m.child.flags|=8192),QE(m,m.updateQueue),ss(m),null;case 4:return ce(),A===null&&zB(m.stateNode.containerInfo),ss(m),null;case 10:return uu(m.type),ss(m),null;case 19:if(P(yi),U=m.memoizedState,U===null)return ss(m),null;if(C=(m.flags&128)!==0,q=U.rendering,q===null)if(C)_b(U,!1);else{if(ys!==0||A!==null&&(A.flags&128)!==0)for(A=m.child;A!==null;){if(q=PE(A),q!==null){for(m.flags|=128,_b(U,!1),A=q.updateQueue,m.updateQueue=A,QE(m,A),m.subtreeFlags=0,A=v,v=m.child;v!==null;)Km(v,A),v=v.sibling;return Q(yi,yi.current&1|2),m.child}A=A.sibling}U.tail!==null&&Ie()>zE&&(m.flags|=128,C=!0,_b(U,!1),m.lanes=4194304)}else{if(!C)if(A=PE(q),A!==null){if(m.flags|=128,C=!0,A=A.updateQueue,m.updateQueue=A,QE(m,A),_b(U,!0),U.tail===null&&U.tailMode==="hidden"&&!q.alternate&&!Mn)return ss(m),null}else 2*Ie()-U.renderingStartTime>zE&&v!==536870912&&(m.flags|=128,C=!0,_b(U,!1),m.lanes=4194304);U.isBackwards?(q.sibling=m.child,m.child=q):(A=U.last,A!==null?A.sibling=q:m.child=q,U.last=q)}return U.tail!==null?(m=U.tail,U.rendering=m,U.tail=m.sibling,U.renderingStartTime=Ie(),m.sibling=null,A=yi.current,Q(yi,C?A&1|2:A&1),m):(ss(m),null);case 22:case 23:return If(m),Xr(),C=m.memoizedState!==null,A!==null?A.memoizedState!==null!==C&&(m.flags|=8192):C&&(m.flags|=8192),C?(v&536870912)!==0&&(m.flags&128)===0&&(ss(m),m.subtreeFlags&6&&(m.flags|=8192)):ss(m),v=m.updateQueue,v!==null&&QE(m,v.retryQueue),v=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(v=A.memoizedState.cachePool.pool),C=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(C=m.memoizedState.cachePool.pool),C!==v&&(m.flags|=2048),A!==null&&P(H),null;case 24:return v=null,A!==null&&(v=A.memoizedState.cache),m.memoizedState.cache!==v&&(m.flags|=2048),uu(Ds),ss(m),null;case 25:return null;case 30:return null}throw Error(n(156,m.tag))}function bAe(A,m){switch(Xm(m),m.tag){case 1:return A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 3:return uu(Ds),ce(),A=m.flags,(A&65536)!==0&&(A&128)===0?(m.flags=A&-65537|128,m):null;case 26:case 27:case 5:return ke(m),null;case 13:if(If(m),A=m.memoizedState,A!==null&&A.dehydrated!==null){if(m.alternate===null)throw Error(n(340));dl()}return A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 19:return P(yi),null;case 4:return ce(),null;case 10:return uu(m.type),null;case 22:case 23:return If(m),Xr(),A!==null&&P(H),A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 24:return uu(Ds),null;case 25:return null;default:return null}}function iU(A,m){switch(Xm(m),m.tag){case 3:uu(Ds),ce();break;case 26:case 27:case 5:ke(m);break;case 4:ce();break;case 13:If(m);break;case 19:P(yi);break;case 10:uu(m.type);break;case 22:case 23:If(m),Xr(),A!==null&&P(H);break;case 24:uu(Ds)}}function Nb(A,m){try{var v=m.updateQueue,C=v!==null?v.lastEffect:null;if(C!==null){var U=C.next;v=U;do{if((v.tag&A)===A){C=void 0;var q=v.create,ue=v.inst;C=q(),ue.destroy=C}v=v.next}while(v!==U)}}catch(be){Ca(m,m.return,be)}}function s0(A,m,v){try{var C=m.updateQueue,U=C!==null?C.lastEffect:null;if(U!==null){var q=U.next;C=q;do{if((C.tag&A)===A){var ue=C.inst,be=ue.destroy;if(be!==void 0){ue.destroy=void 0,U=m;var Pe=v,ct=be;try{ct()}catch(Bt){Ca(U,Pe,Bt)}}}C=C.next}while(C!==q)}}catch(Bt){Ca(m,m.return,Bt)}}function oU(A){var m=A.updateQueue;if(m!==null){var v=A.stateNode;try{zn(m,v)}catch(C){Ca(A,A.return,C)}}}function lU(A,m,v){v.props=cp(A.type,A.memoizedProps),v.state=A.memoizedState;try{v.componentWillUnmount()}catch(C){Ca(A,m,C)}}function Sb(A,m){try{var v=A.ref;if(v!==null){switch(A.tag){case 26:case 27:case 5:var C=A.stateNode;break;case 30:C=A.stateNode;break;default:C=A.stateNode}typeof v=="function"?A.refCleanup=v(C):v.current=C}}catch(U){Ca(A,m,U)}}function bA(A,m){var v=A.ref,C=A.refCleanup;if(v!==null)if(typeof C=="function")try{C()}catch(U){Ca(A,m,U)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(U){Ca(A,m,U)}else v.current=null}function cU(A){var m=A.type,v=A.memoizedProps,C=A.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":v.autoFocus&&C.focus();break e;case"img":v.src?C.src=v.src:v.srcSet&&(C.srcset=v.srcSet)}}catch(U){Ca(A,A.return,U)}}function bB(A,m,v){try{var C=A.stateNode;QAe(C,A.type,v,m),C[xr]=m}catch(U){Ca(A,A.return,U)}}function uU(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&f0(A.type)||A.tag===4}function yB(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||uU(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&f0(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function wB(A,m,v){var C=A.tag;if(C===5||C===6)A=A.stateNode,m?(v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v).insertBefore(A,m):(m=v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v,m.appendChild(A),v=v._reactRootContainer,v!=null||m.onclick!==null||(m.onclick=ZE));else if(C!==4&&(C===27&&f0(A.type)&&(v=A.stateNode,m=null),A=A.child,A!==null))for(wB(A,m,v),A=A.sibling;A!==null;)wB(A,m,v),A=A.sibling}function HE(A,m,v){var C=A.tag;if(C===5||C===6)A=A.stateNode,m?v.insertBefore(A,m):v.appendChild(A);else if(C!==4&&(C===27&&f0(A.type)&&(v=A.stateNode),A=A.child,A!==null))for(HE(A,m,v),A=A.sibling;A!==null;)HE(A,m,v),A=A.sibling}function dU(A){var m=A.stateNode,v=A.memoizedProps;try{for(var C=A.type,U=m.attributes;U.length;)m.removeAttributeNode(U[0]);lo(m,C,v),m[nr]=A,m[xr]=v}catch(q){Ca(A,A.return,q)}}var Df=!1,Rs=!1,EB=!1,AU=typeof WeakSet=="function"?WeakSet:Set,Li=null;function yAe(A,m){if(A=A.containerInfo,KB=iC,A=no(A),bi(A)){if("selectionStart"in A)var v={start:A.selectionStart,end:A.selectionEnd};else e:{v=(v=A.ownerDocument)&&v.defaultView||window;var C=v.getSelection&&v.getSelection();if(C&&C.rangeCount!==0){v=C.anchorNode;var U=C.anchorOffset,q=C.focusNode;C=C.focusOffset;try{v.nodeType,q.nodeType}catch{v=null;break e}var ue=0,be=-1,Pe=-1,ct=0,Bt=0,Rt=A,At=null;t:for(;;){for(var mt;Rt!==v||U!==0&&Rt.nodeType!==3||(be=ue+U),Rt!==q||C!==0&&Rt.nodeType!==3||(Pe=ue+C),Rt.nodeType===3&&(ue+=Rt.nodeValue.length),(mt=Rt.firstChild)!==null;)At=Rt,Rt=mt;for(;;){if(Rt===A)break t;if(At===v&&++ct===U&&(be=ue),At===q&&++Bt===C&&(Pe=ue),(mt=Rt.nextSibling)!==null)break;Rt=At,At=Rt.parentNode}Rt=mt}v=be===-1||Pe===-1?null:{start:be,end:Pe}}else v=null}v=v||{start:0,end:0}}else v=null;for(qB={focusedElem:A,selectionRange:v},iC=!1,Li=m;Li!==null;)if(m=Li,A=m.child,(m.subtreeFlags&1024)!==0&&A!==null)A.return=m,Li=A;else for(;Li!==null;){switch(m=Li,q=m.alternate,A=m.flags,m.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&q!==null){A=void 0,v=m,U=q.memoizedProps,q=q.memoizedState,C=v.stateNode;try{var $r=cp(v.type,U,v.elementType===v.type);A=C.getSnapshotBeforeUpdate($r,q),C.__reactInternalSnapshotBeforeUpdate=A}catch(Or){Ca(v,v.return,Or)}}break;case 3:if((A&1024)!==0){if(A=m.stateNode.containerInfo,v=A.nodeType,v===9)YB(A);else if(v===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":YB(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(n(163))}if(A=m.sibling,A!==null){A.return=m.return,Li=A;break}Li=m.return}}function fU(A,m,v){var C=v.flags;switch(v.tag){case 0:case 11:case 15:i0(A,v),C&4&&Nb(5,v);break;case 1:if(i0(A,v),C&4)if(A=v.stateNode,m===null)try{A.componentDidMount()}catch(ue){Ca(v,v.return,ue)}else{var U=cp(v.type,m.memoizedProps);m=m.memoizedState;try{A.componentDidUpdate(U,m,A.__reactInternalSnapshotBeforeUpdate)}catch(ue){Ca(v,v.return,ue)}}C&64&&oU(v),C&512&&Sb(v,v.return);break;case 3:if(i0(A,v),C&64&&(A=v.updateQueue,A!==null)){if(m=null,v.child!==null)switch(v.child.tag){case 27:case 5:m=v.child.stateNode;break;case 1:m=v.child.stateNode}try{zn(A,m)}catch(ue){Ca(v,v.return,ue)}}break;case 27:m===null&&C&4&&dU(v);case 26:case 5:i0(A,v),m===null&&C&4&&cU(v),C&512&&Sb(v,v.return);break;case 12:i0(A,v);break;case 13:i0(A,v),C&4&&pU(A,v),C&64&&(A=v.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(v=jAe.bind(null,v),qAe(A,v))));break;case 22:if(C=v.memoizedState!==null||Df,!C){m=m!==null&&m.memoizedState!==null||Rs,U=Df;var q=Rs;Df=C,(Rs=m)&&!q?o0(A,v,(v.subtreeFlags&8772)!==0):i0(A,v),Df=U,Rs=q}break;case 30:break;default:i0(A,v)}}function hU(A){var m=A.alternate;m!==null&&(A.alternate=null,hU(m)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(m=A.stateNode,m!==null&&we(m)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var Xa=null,Ml=!1;function Pf(A,m,v){for(v=v.child;v!==null;)mU(A,m,v),v=v.sibling}function mU(A,m,v){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(ft,v)}catch{}switch(v.tag){case 26:Rs||bA(v,m),Pf(A,m,v),v.memoizedState?v.memoizedState.count--:v.stateNode&&(v=v.stateNode,v.parentNode.removeChild(v));break;case 27:Rs||bA(v,m);var C=Xa,U=Ml;f0(v.type)&&(Xa=v.stateNode,Ml=!1),Pf(A,m,v),Pb(v.stateNode),Xa=C,Ml=U;break;case 5:Rs||bA(v,m);case 6:if(C=Xa,U=Ml,Xa=null,Pf(A,m,v),Xa=C,Ml=U,Xa!==null)if(Ml)try{(Xa.nodeType===9?Xa.body:Xa.nodeName==="HTML"?Xa.ownerDocument.body:Xa).removeChild(v.stateNode)}catch(q){Ca(v,m,q)}else try{Xa.removeChild(v.stateNode)}catch(q){Ca(v,m,q)}break;case 18:Xa!==null&&(Ml?(A=Xa,n7(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,v.stateNode),zb(A)):n7(Xa,v.stateNode));break;case 4:C=Xa,U=Ml,Xa=v.stateNode.containerInfo,Ml=!0,Pf(A,m,v),Xa=C,Ml=U;break;case 0:case 11:case 14:case 15:Rs||s0(2,v,m),Rs||s0(4,v,m),Pf(A,m,v);break;case 1:Rs||(bA(v,m),C=v.stateNode,typeof C.componentWillUnmount=="function"&&lU(v,m,C)),Pf(A,m,v);break;case 21:Pf(A,m,v);break;case 22:Rs=(C=Rs)||v.memoizedState!==null,Pf(A,m,v),Rs=C;break;default:Pf(A,m,v)}}function pU(A,m){if(m.memoizedState===null&&(A=m.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{zb(A)}catch(v){Ca(m,m.return,v)}}function wAe(A){switch(A.tag){case 13:case 19:var m=A.stateNode;return m===null&&(m=A.stateNode=new AU),m;case 22:return A=A.stateNode,m=A._retryCache,m===null&&(m=A._retryCache=new AU),m;default:throw Error(n(435,A.tag))}}function CB(A,m){var v=wAe(A);m.forEach(function(C){var U=TAe.bind(null,A,C);v.has(C)||(v.add(C),C.then(U,U))})}function xc(A,m){var v=m.deletions;if(v!==null)for(var C=0;C<v.length;C++){var U=v[C],q=A,ue=m,be=ue;e:for(;be!==null;){switch(be.tag){case 27:if(f0(be.type)){Xa=be.stateNode,Ml=!1;break e}break;case 5:Xa=be.stateNode,Ml=!1;break e;case 3:case 4:Xa=be.stateNode.containerInfo,Ml=!0;break e}be=be.return}if(Xa===null)throw Error(n(160));mU(q,ue,U),Xa=null,Ml=!1,q=U.alternate,q!==null&&(q.return=null),U.return=null}if(m.subtreeFlags&13878)for(m=m.child;m!==null;)gU(m,A),m=m.sibling}var hd=null;function gU(A,m){var v=A.alternate,C=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:xc(m,A),vc(A),C&4&&(s0(3,A,A.return),Nb(3,A),s0(5,A,A.return));break;case 1:xc(m,A),vc(A),C&512&&(Rs||v===null||bA(v,v.return)),C&64&&Df&&(A=A.updateQueue,A!==null&&(C=A.callbacks,C!==null&&(v=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=v===null?C:v.concat(C))));break;case 26:var U=hd;if(xc(m,A),vc(A),C&512&&(Rs||v===null||bA(v,v.return)),C&4){var q=v!==null?v.memoizedState:null;if(C=A.memoizedState,v===null)if(C===null)if(A.stateNode===null){e:{C=A.type,v=A.memoizedProps,U=U.ownerDocument||U;t:switch(C){case"title":q=U.getElementsByTagName("title")[0],(!q||q[Ce]||q[nr]||q.namespaceURI==="http://www.w3.org/2000/svg"||q.hasAttribute("itemprop"))&&(q=U.createElement(C),U.head.insertBefore(q,U.querySelector("head > title"))),lo(q,C,v),q[nr]=A,$e(q),C=q;break e;case"link":var ue=d7("link","href",U).get(C+(v.href||""));if(ue){for(var be=0;be<ue.length;be++)if(q=ue[be],q.getAttribute("href")===(v.href==null||v.href===""?null:v.href)&&q.getAttribute("rel")===(v.rel==null?null:v.rel)&&q.getAttribute("title")===(v.title==null?null:v.title)&&q.getAttribute("crossorigin")===(v.crossOrigin==null?null:v.crossOrigin)){ue.splice(be,1);break t}}q=U.createElement(C),lo(q,C,v),U.head.appendChild(q);break;case"meta":if(ue=d7("meta","content",U).get(C+(v.content||""))){for(be=0;be<ue.length;be++)if(q=ue[be],q.getAttribute("content")===(v.content==null?null:""+v.content)&&q.getAttribute("name")===(v.name==null?null:v.name)&&q.getAttribute("property")===(v.property==null?null:v.property)&&q.getAttribute("http-equiv")===(v.httpEquiv==null?null:v.httpEquiv)&&q.getAttribute("charset")===(v.charSet==null?null:v.charSet)){ue.splice(be,1);break t}}q=U.createElement(C),lo(q,C,v),U.head.appendChild(q);break;default:throw Error(n(468,C))}q[nr]=A,$e(q),C=q}A.stateNode=C}else A7(U,A.type,A.stateNode);else A.stateNode=u7(U,C,A.memoizedProps);else q!==C?(q===null?v.stateNode!==null&&(v=v.stateNode,v.parentNode.removeChild(v)):q.count--,C===null?A7(U,A.type,A.stateNode):u7(U,C,A.memoizedProps)):C===null&&A.stateNode!==null&&bB(A,A.memoizedProps,v.memoizedProps)}break;case 27:xc(m,A),vc(A),C&512&&(Rs||v===null||bA(v,v.return)),v!==null&&C&4&&bB(A,A.memoizedProps,v.memoizedProps);break;case 5:if(xc(m,A),vc(A),C&512&&(Rs||v===null||bA(v,v.return)),A.flags&32){U=A.stateNode;try{Co(U,"")}catch(mt){Ca(A,A.return,mt)}}C&4&&A.stateNode!=null&&(U=A.memoizedProps,bB(A,U,v!==null?v.memoizedProps:U)),C&1024&&(EB=!0);break;case 6:if(xc(m,A),vc(A),C&4){if(A.stateNode===null)throw Error(n(162));C=A.memoizedProps,v=A.stateNode;try{v.nodeValue=C}catch(mt){Ca(A,A.return,mt)}}break;case 3:if(nC=null,U=hd,hd=tC(m.containerInfo),xc(m,A),hd=U,vc(A),C&4&&v!==null&&v.memoizedState.isDehydrated)try{zb(m.containerInfo)}catch(mt){Ca(A,A.return,mt)}EB&&(EB=!1,xU(A));break;case 4:C=hd,hd=tC(A.stateNode.containerInfo),xc(m,A),vc(A),hd=C;break;case 12:xc(m,A),vc(A);break;case 13:xc(m,A),vc(A),A.child.flags&8192&&A.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(jB=Ie()),C&4&&(C=A.updateQueue,C!==null&&(A.updateQueue=null,CB(A,C)));break;case 22:U=A.memoizedState!==null;var Pe=v!==null&&v.memoizedState!==null,ct=Df,Bt=Rs;if(Df=ct||U,Rs=Bt||Pe,xc(m,A),Rs=Bt,Df=ct,vc(A),C&8192)e:for(m=A.stateNode,m._visibility=U?m._visibility&-2:m._visibility|1,U&&(v===null||Pe||Df||Rs||up(A)),v=null,m=A;;){if(m.tag===5||m.tag===26){if(v===null){Pe=v=m;try{if(q=Pe.stateNode,U)ue=q.style,typeof ue.setProperty=="function"?ue.setProperty("display","none","important"):ue.display="none";else{be=Pe.stateNode;var Rt=Pe.memoizedProps.style,At=Rt!=null&&Rt.hasOwnProperty("display")?Rt.display:null;be.style.display=At==null||typeof At=="boolean"?"":(""+At).trim()}}catch(mt){Ca(Pe,Pe.return,mt)}}}else if(m.tag===6){if(v===null){Pe=m;try{Pe.stateNode.nodeValue=U?"":Pe.memoizedProps}catch(mt){Ca(Pe,Pe.return,mt)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===A)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===A)break e;for(;m.sibling===null;){if(m.return===null||m.return===A)break e;v===m&&(v=null),m=m.return}v===m&&(v=null),m.sibling.return=m.return,m=m.sibling}C&4&&(C=A.updateQueue,C!==null&&(v=C.retryQueue,v!==null&&(C.retryQueue=null,CB(A,v))));break;case 19:xc(m,A),vc(A),C&4&&(C=A.updateQueue,C!==null&&(A.updateQueue=null,CB(A,C)));break;case 30:break;case 21:break;default:xc(m,A),vc(A)}}function vc(A){var m=A.flags;if(m&2){try{for(var v,C=A.return;C!==null;){if(uU(C)){v=C;break}C=C.return}if(v==null)throw Error(n(160));switch(v.tag){case 27:var U=v.stateNode,q=yB(A);HE(A,q,U);break;case 5:var ue=v.stateNode;v.flags&32&&(Co(ue,""),v.flags&=-33);var be=yB(A);HE(A,be,ue);break;case 3:case 4:var Pe=v.stateNode.containerInfo,ct=yB(A);wB(A,ct,Pe);break;default:throw Error(n(161))}}catch(Bt){Ca(A,A.return,Bt)}A.flags&=-3}m&4096&&(A.flags&=-4097)}function xU(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var m=A;xU(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),A=A.sibling}}function i0(A,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)fU(A,m.alternate,m),m=m.sibling}function up(A){for(A=A.child;A!==null;){var m=A;switch(m.tag){case 0:case 11:case 14:case 15:s0(4,m,m.return),up(m);break;case 1:bA(m,m.return);var v=m.stateNode;typeof v.componentWillUnmount=="function"&&lU(m,m.return,v),up(m);break;case 27:Pb(m.stateNode);case 26:case 5:bA(m,m.return),up(m);break;case 22:m.memoizedState===null&&up(m);break;case 30:up(m);break;default:up(m)}A=A.sibling}}function o0(A,m,v){for(v=v&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var C=m.alternate,U=A,q=m,ue=q.flags;switch(q.tag){case 0:case 11:case 15:o0(U,q,v),Nb(4,q);break;case 1:if(o0(U,q,v),C=q,U=C.stateNode,typeof U.componentDidMount=="function")try{U.componentDidMount()}catch(ct){Ca(C,C.return,ct)}if(C=q,U=C.updateQueue,U!==null){var be=C.stateNode;try{var Pe=U.shared.hiddenCallbacks;if(Pe!==null)for(U.shared.hiddenCallbacks=null,U=0;U<Pe.length;U++)Dn(Pe[U],be)}catch(ct){Ca(C,C.return,ct)}}v&&ue&64&&oU(q),Sb(q,q.return);break;case 27:dU(q);case 26:case 5:o0(U,q,v),v&&C===null&&ue&4&&cU(q),Sb(q,q.return);break;case 12:o0(U,q,v);break;case 13:o0(U,q,v),v&&ue&4&&pU(U,q);break;case 22:q.memoizedState===null&&o0(U,q,v),Sb(q,q.return);break;case 30:break;default:o0(U,q,v)}m=m.sibling}}function _B(A,m){var v=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(v=A.memoizedState.cachePool.pool),A=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(A=m.memoizedState.cachePool.pool),A!==v&&(A!=null&&A.refCount++,v!=null&&Ym(v))}function NB(A,m){A=null,m.alternate!==null&&(A=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==A&&(m.refCount++,A!=null&&Ym(A))}function yA(A,m,v,C){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)vU(A,m,v,C),m=m.sibling}function vU(A,m,v,C){var U=m.flags;switch(m.tag){case 0:case 11:case 15:yA(A,m,v,C),U&2048&&Nb(9,m);break;case 1:yA(A,m,v,C);break;case 3:yA(A,m,v,C),U&2048&&(A=null,m.alternate!==null&&(A=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==A&&(m.refCount++,A!=null&&Ym(A)));break;case 12:if(U&2048){yA(A,m,v,C),A=m.stateNode;try{var q=m.memoizedProps,ue=q.id,be=q.onPostCommit;typeof be=="function"&&be(ue,m.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(Pe){Ca(m,m.return,Pe)}}else yA(A,m,v,C);break;case 13:yA(A,m,v,C);break;case 23:break;case 22:q=m.stateNode,ue=m.alternate,m.memoizedState!==null?q._visibility&2?yA(A,m,v,C):kb(A,m):q._visibility&2?yA(A,m,v,C):(q._visibility|=2,ix(A,m,v,C,(m.subtreeFlags&10256)!==0)),U&2048&&_B(ue,m);break;case 24:yA(A,m,v,C),U&2048&&NB(m.alternate,m);break;default:yA(A,m,v,C)}}function ix(A,m,v,C,U){for(U=U&&(m.subtreeFlags&10256)!==0,m=m.child;m!==null;){var q=A,ue=m,be=v,Pe=C,ct=ue.flags;switch(ue.tag){case 0:case 11:case 15:ix(q,ue,be,Pe,U),Nb(8,ue);break;case 23:break;case 22:var Bt=ue.stateNode;ue.memoizedState!==null?Bt._visibility&2?ix(q,ue,be,Pe,U):kb(q,ue):(Bt._visibility|=2,ix(q,ue,be,Pe,U)),U&&ct&2048&&_B(ue.alternate,ue);break;case 24:ix(q,ue,be,Pe,U),U&&ct&2048&&NB(ue.alternate,ue);break;default:ix(q,ue,be,Pe,U)}m=m.sibling}}function kb(A,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var v=A,C=m,U=C.flags;switch(C.tag){case 22:kb(v,C),U&2048&&_B(C.alternate,C);break;case 24:kb(v,C),U&2048&&NB(C.alternate,C);break;default:kb(v,C)}m=m.sibling}}var Bb=8192;function ox(A){if(A.subtreeFlags&Bb)for(A=A.child;A!==null;)bU(A),A=A.sibling}function bU(A){switch(A.tag){case 26:ox(A),A.flags&Bb&&A.memoizedState!==null&&ofe(hd,A.memoizedState,A.memoizedProps);break;case 5:ox(A);break;case 3:case 4:var m=hd;hd=tC(A.stateNode.containerInfo),ox(A),hd=m;break;case 22:A.memoizedState===null&&(m=A.alternate,m!==null&&m.memoizedState!==null?(m=Bb,Bb=16777216,ox(A),Bb=m):ox(A));break;default:ox(A)}}function yU(A){var m=A.alternate;if(m!==null&&(A=m.child,A!==null)){m.child=null;do m=A.sibling,A.sibling=null,A=m;while(A!==null)}}function jb(A){var m=A.deletions;if((A.flags&16)!==0){if(m!==null)for(var v=0;v<m.length;v++){var C=m[v];Li=C,EU(C,A)}yU(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)wU(A),A=A.sibling}function wU(A){switch(A.tag){case 0:case 11:case 15:jb(A),A.flags&2048&&s0(9,A,A.return);break;case 3:jb(A);break;case 12:jb(A);break;case 22:var m=A.stateNode;A.memoizedState!==null&&m._visibility&2&&(A.return===null||A.return.tag!==13)?(m._visibility&=-3,VE(A)):jb(A);break;default:jb(A)}}function VE(A){var m=A.deletions;if((A.flags&16)!==0){if(m!==null)for(var v=0;v<m.length;v++){var C=m[v];Li=C,EU(C,A)}yU(A)}for(A=A.child;A!==null;){switch(m=A,m.tag){case 0:case 11:case 15:s0(8,m,m.return),VE(m);break;case 22:v=m.stateNode,v._visibility&2&&(v._visibility&=-3,VE(m));break;default:VE(m)}A=A.sibling}}function EU(A,m){for(;Li!==null;){var v=Li;switch(v.tag){case 0:case 11:case 15:s0(8,v,m);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var C=v.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:Ym(v.memoizedState.cache)}if(C=v.child,C!==null)C.return=v,Li=C;else e:for(v=A;Li!==null;){C=Li;var U=C.sibling,q=C.return;if(hU(C),C===v){Li=null;break e}if(U!==null){U.return=q,Li=U;break e}Li=q}}}var EAe={getCacheForType:function(A){var m=Os(Ds),v=m.data.get(A);return v===void 0&&(v=A(),m.data.set(A,v)),v}},CAe=typeof WeakMap=="function"?WeakMap:Map,ua=0,Ta=null,_n=null,Rn=0,da=0,bc=null,l0=!1,lx=!1,SB=!1,Rf=0,ys=0,c0=0,dp=0,kB=0,hu=0,cx=0,Tb=null,Ul=null,BB=!1,jB=0,zE=1/0,$E=null,u0=null,oo=0,d0=null,ux=null,dx=0,TB=0,IB=null,CU=null,Ib=0,FB=null;function yc(){if((ua&2)!==0&&Rn!==0)return Rn&-Rn;if(V.T!==null){var A=Sf;return A!==0?A:UB()}return vt()}function _U(){hu===0&&(hu=(Rn&536870912)===0||Mn?Ga():536870912);var A=fu.current;return A!==null&&(A.flags|=32),hu}function wc(A,m,v){(A===Ta&&(da===2||da===9)||A.cancelPendingCommit!==null)&&(Ax(A,0),A0(A,Rn,hu,!1)),Ba(A,v),((ua&2)===0||A!==Ta)&&(A===Ta&&((ua&2)===0&&(dp|=v),ys===4&&A0(A,Rn,hu,!1)),wA(A))}function NU(A,m,v){if((ua&6)!==0)throw Error(n(327));var C=!v&&(m&124)===0&&(m&A.expiredLanes)===0||vn(A,m),U=C?SAe(A,m):PB(A,m,!0),q=C;do{if(U===0){lx&&!C&&A0(A,m,0,!1);break}else{if(v=A.current.alternate,q&&!_Ae(v)){U=PB(A,m,!1),q=!1;continue}if(U===2){if(q=m,A.errorRecoveryDisabledLanes&q)var ue=0;else ue=A.pendingLanes&-536870913,ue=ue!==0?ue:ue&536870912?536870912:0;if(ue!==0){m=ue;e:{var be=A;U=Tb;var Pe=be.current.memoizedState.isDehydrated;if(Pe&&(Ax(be,ue).flags|=256),ue=PB(be,ue,!1),ue!==2){if(SB&&!Pe){be.errorRecoveryDisabledLanes|=q,dp|=q,U=4;break e}q=Ul,Ul=U,q!==null&&(Ul===null?Ul=q:Ul.push.apply(Ul,q))}U=ue}if(q=!1,U!==2)continue}}if(U===1){Ax(A,0),A0(A,m,0,!0);break}e:{switch(C=A,q=U,q){case 0:case 1:throw Error(n(345));case 4:if((m&4194048)!==m)break;case 6:A0(C,m,hu,!l0);break e;case 2:Ul=null;break;case 3:case 5:break;default:throw Error(n(329))}if((m&62914560)===m&&(U=jB+300-Ie(),10<U)){if(A0(C,m,hu,!l0),Dr(C,0,!0)!==0)break e;C.timeoutHandle=t7(SU.bind(null,C,v,Ul,$E,BB,m,hu,dp,cx,l0,q,2,-0,0),U);break e}SU(C,v,Ul,$E,BB,m,hu,dp,cx,l0,q,0,-0,0)}}break}while(!0);wA(A)}function SU(A,m,v,C,U,q,ue,be,Pe,ct,Bt,Rt,At,mt){if(A.timeoutHandle=-1,Rt=m.subtreeFlags,(Rt&8192||(Rt&16785408)===16785408)&&(Mb={stylesheets:null,count:0,unsuspend:ife},bU(m),Rt=lfe(),Rt!==null)){A.cancelPendingCommit=Rt(OU.bind(null,A,m,q,v,C,U,ue,be,Pe,Bt,1,At,mt)),A0(A,q,ue,!ct);return}OU(A,m,q,v,C,U,ue,be,Pe)}function _Ae(A){for(var m=A;;){var v=m.tag;if((v===0||v===11||v===15)&&m.flags&16384&&(v=m.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var C=0;C<v.length;C++){var U=v[C],q=U.getSnapshot;U=U.value;try{if(!ei(q(),U))return!1}catch{return!1}}if(v=m.child,m.subtreeFlags&16384&&v!==null)v.return=m,m=v;else{if(m===A)break;for(;m.sibling===null;){if(m.return===null||m.return===A)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function A0(A,m,v,C){m&=~kB,m&=~dp,A.suspendedLanes|=m,A.pingedLanes&=~m,C&&(A.warmLanes|=m),C=A.expirationTimes;for(var U=m;0<U;){var q=31-St(U),ue=1<<q;C[q]=-1,U&=~ue}v!==0&&gr(A,v,m)}function GE(){return(ua&6)===0?(Fb(0),!1):!0}function OB(){if(_n!==null){if(da===0)var A=_n.return;else A=_n,ld=ri=null,Jg(A),ax=null,Eb=0,A=_n;for(;A!==null;)iU(A.alternate,A),A=A.return;_n=null}}function Ax(A,m){var v=A.timeoutHandle;v!==-1&&(A.timeoutHandle=-1,VAe(v)),v=A.cancelPendingCommit,v!==null&&(A.cancelPendingCommit=null,v()),OB(),Ta=A,_n=v=ou(A.current,null),Rn=m,da=0,bc=null,l0=!1,lx=vn(A,m),SB=!1,cx=hu=kB=dp=c0=ys=0,Ul=Tb=null,BB=!1,(m&8)!==0&&(m|=m&32);var C=A.entangledLanes;if(C!==0)for(A=A.entanglements,C&=m;0<C;){var U=31-St(C),q=1<<U;m|=A[U],C&=~q}return Rf=m,Dl(),v}function kU(A,m){Br=null,V.H=FE,m===pe||m===xe?(m=We(),da=3):m===ge?(m=We(),da=4):da=m===GM?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,bc=m,_n===null&&(ys=1,LE(A,hn(m,A.current)))}function BU(){var A=V.H;return V.H=FE,A===null?FE:A}function jU(){var A=V.A;return V.A=EAe,A}function DB(){ys=4,l0||(Rn&4194048)!==Rn&&fu.current!==null||(lx=!0),(c0&134217727)===0&&(dp&134217727)===0||Ta===null||A0(Ta,Rn,hu,!1)}function PB(A,m,v){var C=ua;ua|=2;var U=BU(),q=jU();(Ta!==A||Rn!==m)&&($E=null,Ax(A,m)),m=!1;var ue=ys;e:do try{if(da!==0&&_n!==null){var be=_n,Pe=bc;switch(da){case 8:OB(),ue=6;break e;case 3:case 2:case 9:case 6:fu.current===null&&(m=!0);var ct=da;if(da=0,bc=null,fx(A,be,Pe,ct),v&&lx){ue=0;break e}break;default:ct=da,da=0,bc=null,fx(A,be,Pe,ct)}}NAe(),ue=ys;break}catch(Bt){kU(A,Bt)}while(!0);return m&&A.shellSuspendCounter++,ld=ri=null,ua=C,V.H=U,V.A=q,_n===null&&(Ta=null,Rn=0,Dl()),ue}function NAe(){for(;_n!==null;)TU(_n)}function SAe(A,m){var v=ua;ua|=2;var C=BU(),U=jU();Ta!==A||Rn!==m?($E=null,zE=Ie()+500,Ax(A,m)):lx=vn(A,m);e:do try{if(da!==0&&_n!==null){m=_n;var q=bc;t:switch(da){case 1:da=0,bc=null,fx(A,m,q,1);break;case 2:case 9:if(Be(q)){da=0,bc=null,IU(m);break}m=function(){da!==2&&da!==9||Ta!==A||(da=7),wA(A)},q.then(m,m);break e;case 3:da=7;break e;case 4:da=5;break e;case 7:Be(q)?(da=0,bc=null,IU(m)):(da=0,bc=null,fx(A,m,q,7));break;case 5:var ue=null;switch(_n.tag){case 26:ue=_n.memoizedState;case 5:case 27:var be=_n;if(!ue||f7(ue)){da=0,bc=null;var Pe=be.sibling;if(Pe!==null)_n=Pe;else{var ct=be.return;ct!==null?(_n=ct,KE(ct)):_n=null}break t}}da=0,bc=null,fx(A,m,q,5);break;case 6:da=0,bc=null,fx(A,m,q,6);break;case 8:OB(),ys=6;break e;default:throw Error(n(462))}}kAe();break}catch(Bt){kU(A,Bt)}while(!0);return ld=ri=null,V.H=C,V.A=U,ua=v,_n!==null?0:(Ta=null,Rn=0,Dl(),ys)}function kAe(){for(;_n!==null&&!Ne();)TU(_n)}function TU(A){var m=aU(A.alternate,A,Rf);A.memoizedProps=A.pendingProps,m===null?KE(A):_n=m}function IU(A){var m=A,v=m.alternate;switch(m.tag){case 15:case 0:m=JM(v,m,m.pendingProps,m.type,void 0,Rn);break;case 11:m=JM(v,m,m.pendingProps,m.type.render,m.ref,Rn);break;case 5:Jg(m);default:iU(v,m),m=_n=Km(m,Rf),m=aU(v,m,Rf)}A.memoizedProps=A.pendingProps,m===null?KE(A):_n=m}function fx(A,m,v,C){ld=ri=null,Jg(m),ax=null,Eb=0;var U=m.return;try{if(gAe(A,U,m,v,Rn)){ys=1,LE(A,hn(v,A.current)),_n=null;return}}catch(q){if(U!==null)throw _n=U,q;ys=1,LE(A,hn(v,A.current)),_n=null;return}m.flags&32768?(Mn||C===1?A=!0:lx||(Rn&536870912)!==0?A=!1:(l0=A=!0,(C===2||C===9||C===3||C===6)&&(C=fu.current,C!==null&&C.tag===13&&(C.flags|=16384))),FU(m,A)):KE(m)}function KE(A){var m=A;do{if((m.flags&32768)!==0){FU(m,l0);return}A=m.return;var v=vAe(m.alternate,m,Rf);if(v!==null){_n=v;return}if(m=m.sibling,m!==null){_n=m;return}_n=m=A}while(m!==null);ys===0&&(ys=5)}function FU(A,m){do{var v=bAe(A.alternate,A);if(v!==null){v.flags&=32767,_n=v;return}if(v=A.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!m&&(A=A.sibling,A!==null)){_n=A;return}_n=A=v}while(A!==null);ys=6,_n=null}function OU(A,m,v,C,U,q,ue,be,Pe){A.cancelPendingCommit=null;do qE();while(oo!==0);if((ua&6)!==0)throw Error(n(327));if(m!==null){if(m===A.current)throw Error(n(177));if(q=m.lanes|m.childLanes,q|=rs,rn(A,v,q,ue,be,Pe),A===Ta&&(_n=Ta=null,Rn=0),ux=m,d0=A,dx=v,TB=q,IB=U,CU=C,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,IAe(Fe,function(){return MU(),null})):(A.callbackNode=null,A.callbackPriority=0),C=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||C){C=V.T,V.T=null,U=K.p,K.p=2,ue=ua,ua|=4;try{yAe(A,m,v)}finally{ua=ue,K.p=U,V.T=C}}oo=1,DU(),PU(),RU()}}function DU(){if(oo===1){oo=0;var A=d0,m=ux,v=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||v){v=V.T,V.T=null;var C=K.p;K.p=2;var U=ua;ua|=4;try{gU(m,A);var q=qB,ue=no(A.containerInfo),be=q.focusedElem,Pe=q.selectionRange;if(ue!==be&&be&&be.ownerDocument&&nA(be.ownerDocument.documentElement,be)){if(Pe!==null&&bi(be)){var ct=Pe.start,Bt=Pe.end;if(Bt===void 0&&(Bt=ct),"selectionStart"in be)be.selectionStart=ct,be.selectionEnd=Math.min(Bt,be.value.length);else{var Rt=be.ownerDocument||document,At=Rt&&Rt.defaultView||window;if(At.getSelection){var mt=At.getSelection(),$r=be.textContent.length,Or=Math.min(Pe.start,$r),ya=Pe.end===void 0?Or:Math.min(Pe.end,$r);!mt.extend&&Or>ya&&(ue=ya,ya=Or,Or=ue);var Ye=ed(be,Or),He=ed(be,ya);if(Ye&&He&&(mt.rangeCount!==1||mt.anchorNode!==Ye.node||mt.anchorOffset!==Ye.offset||mt.focusNode!==He.node||mt.focusOffset!==He.offset)){var st=Rt.createRange();st.setStart(Ye.node,Ye.offset),mt.removeAllRanges(),Or>ya?(mt.addRange(st),mt.extend(He.node,He.offset)):(st.setEnd(He.node,He.offset),mt.addRange(st))}}}}for(Rt=[],mt=be;mt=mt.parentNode;)mt.nodeType===1&&Rt.push({element:mt,left:mt.scrollLeft,top:mt.scrollTop});for(typeof be.focus=="function"&&be.focus(),be=0;be<Rt.length;be++){var It=Rt[be];It.element.scrollLeft=It.left,It.element.scrollTop=It.top}}iC=!!KB,qB=KB=null}finally{ua=U,K.p=C,V.T=v}}A.current=m,oo=2}}function PU(){if(oo===2){oo=0;var A=d0,m=ux,v=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||v){v=V.T,V.T=null;var C=K.p;K.p=2;var U=ua;ua|=4;try{fU(A,m.alternate,m)}finally{ua=U,K.p=C,V.T=v}}oo=3}}function RU(){if(oo===4||oo===3){oo=0,fe();var A=d0,m=ux,v=dx,C=CU;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?oo=5:(oo=0,ux=d0=null,LU(A,A.pendingLanes));var U=A.pendingLanes;if(U===0&&(u0=null),et(v),m=m.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(ft,m,void 0,(m.current.flags&128)===128)}catch{}if(C!==null){m=V.T,U=K.p,K.p=2,V.T=null;try{for(var q=A.onRecoverableError,ue=0;ue<C.length;ue++){var be=C[ue];q(be.value,{componentStack:be.stack})}}finally{V.T=m,K.p=U}}(dx&3)!==0&&qE(),wA(A),U=A.pendingLanes,(v&4194090)!==0&&(U&42)!==0?A===FB?Ib++:(Ib=0,FB=A):Ib=0,Fb(0)}}function LU(A,m){(A.pooledCacheLanes&=m)===0&&(m=A.pooledCache,m!=null&&(A.pooledCache=null,Ym(m)))}function qE(A){return DU(),PU(),RU(),MU()}function MU(){if(oo!==5)return!1;var A=d0,m=TB;TB=0;var v=et(dx),C=V.T,U=K.p;try{K.p=32>v?32:v,V.T=null,v=IB,IB=null;var q=d0,ue=dx;if(oo=0,ux=d0=null,dx=0,(ua&6)!==0)throw Error(n(331));var be=ua;if(ua|=4,wU(q.current),vU(q,q.current,ue,v),ua=be,Fb(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(ft,q)}catch{}return!0}finally{K.p=U,V.T=C,LU(A,m)}}function UU(A,m,v){m=hn(v,m),m=dB(A.stateNode,m,2),A=Ot(A,m,2),A!==null&&(Ba(A,2),wA(A))}function Ca(A,m,v){if(A.tag===3)UU(A,A,v);else for(;m!==null;){if(m.tag===3){UU(m,A,v);break}else if(m.tag===1){var C=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(u0===null||!u0.has(C))){A=hn(v,A),v=zM(2),C=Ot(m,v,2),C!==null&&($M(v,C,m,A),Ba(C,2),wA(C));break}}m=m.return}}function RB(A,m,v){var C=A.pingCache;if(C===null){C=A.pingCache=new CAe;var U=new Set;C.set(m,U)}else U=C.get(m),U===void 0&&(U=new Set,C.set(m,U));U.has(v)||(SB=!0,U.add(v),A=BAe.bind(null,A,m,v),m.then(A,A))}function BAe(A,m,v){var C=A.pingCache;C!==null&&C.delete(m),A.pingedLanes|=A.suspendedLanes&v,A.warmLanes&=~v,Ta===A&&(Rn&v)===v&&(ys===4||ys===3&&(Rn&62914560)===Rn&&300>Ie()-jB?(ua&2)===0&&Ax(A,0):kB|=v,cx===Rn&&(cx=0)),wA(A)}function QU(A,m){m===0&&(m=nn()),A=rd(A,m),A!==null&&(Ba(A,m),wA(A))}function jAe(A){var m=A.memoizedState,v=0;m!==null&&(v=m.retryLane),QU(A,v)}function TAe(A,m){var v=0;switch(A.tag){case 13:var C=A.stateNode,U=A.memoizedState;U!==null&&(v=U.retryLane);break;case 19:C=A.stateNode;break;case 22:C=A.stateNode._retryCache;break;default:throw Error(n(314))}C!==null&&C.delete(m),QU(A,v)}function IAe(A,m){return _e(A,m)}var WE=null,hx=null,LB=!1,XE=!1,MB=!1,Ap=0;function wA(A){A!==hx&&A.next===null&&(hx===null?WE=hx=A:hx=hx.next=A),XE=!0,LB||(LB=!0,OAe())}function Fb(A,m){if(!MB&&XE){MB=!0;do for(var v=!1,C=WE;C!==null;){if(A!==0){var U=C.pendingLanes;if(U===0)var q=0;else{var ue=C.suspendedLanes,be=C.pingedLanes;q=(1<<31-St(42|A)+1)-1,q&=U&~(ue&~be),q=q&201326741?q&201326741|1:q?q|2:0}q!==0&&(v=!0,$U(C,q))}else q=Rn,q=Dr(C,C===Ta?q:0,C.cancelPendingCommit!==null||C.timeoutHandle!==-1),(q&3)===0||vn(C,q)||(v=!0,$U(C,q));C=C.next}while(v);MB=!1}}function FAe(){HU()}function HU(){XE=LB=!1;var A=0;Ap!==0&&(HAe()&&(A=Ap),Ap=0);for(var m=Ie(),v=null,C=WE;C!==null;){var U=C.next,q=VU(C,m);q===0?(C.next=null,v===null?WE=U:v.next=U,U===null&&(hx=v)):(v=C,(A!==0||(q&3)!==0)&&(XE=!0)),C=U}Fb(A)}function VU(A,m){for(var v=A.suspendedLanes,C=A.pingedLanes,U=A.expirationTimes,q=A.pendingLanes&-62914561;0<q;){var ue=31-St(q),be=1<<ue,Pe=U[ue];Pe===-1?((be&v)===0||(be&C)!==0)&&(U[ue]=Tr(be,m)):Pe<=m&&(A.expiredLanes|=be),q&=~be}if(m=Ta,v=Rn,v=Dr(A,A===m?v:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),C=A.callbackNode,v===0||A===m&&(da===2||da===9)||A.cancelPendingCommit!==null)return C!==null&&C!==null&&De(C),A.callbackNode=null,A.callbackPriority=0;if((v&3)===0||vn(A,v)){if(m=v&-v,m===A.callbackPriority)return m;switch(C!==null&&De(C),et(v)){case 2:case 8:v=ye;break;case 32:v=Fe;break;case 268435456:v=Ge;break;default:v=Fe}return C=zU.bind(null,A),v=_e(v,C),A.callbackPriority=m,A.callbackNode=v,m}return C!==null&&C!==null&&De(C),A.callbackPriority=2,A.callbackNode=null,2}function zU(A,m){if(oo!==0&&oo!==5)return A.callbackNode=null,A.callbackPriority=0,null;var v=A.callbackNode;if(qE()&&A.callbackNode!==v)return null;var C=Rn;return C=Dr(A,A===Ta?C:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),C===0?null:(NU(A,C,m),VU(A,Ie()),A.callbackNode!=null&&A.callbackNode===v?zU.bind(null,A):null)}function $U(A,m){if(qE())return null;NU(A,m,!0)}function OAe(){zAe(function(){(ua&6)!==0?_e(Xe,FAe):HU()})}function UB(){return Ap===0&&(Ap=Ga()),Ap}function GU(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:lc(""+A)}function KU(A,m){var v=m.ownerDocument.createElement("input");return v.name=m.name,v.value=m.value,A.id&&v.setAttribute("form",A.id),m.parentNode.insertBefore(v,m),A=new FormData(A),v.parentNode.removeChild(v),A}function DAe(A,m,v,C,U){if(m==="submit"&&v&&v.stateNode===U){var q=GU((U[xr]||null).action),ue=C.submitter;ue&&(m=(m=ue[xr]||null)?GU(m.formAction):ue.getAttribute("formAction"),m!==null&&(q=m,ue=null));var be=new Jc("action","action",null,C,U);A.push({event:be,listeners:[{instance:null,listener:function(){if(C.defaultPrevented){if(Ap!==0){var Pe=ue?KU(U,ue):new FormData(U);Au(v,{pending:!0,data:Pe,method:U.method,action:q},null,Pe)}}else typeof q=="function"&&(be.preventDefault(),Pe=ue?KU(U,ue):new FormData(U),Au(v,{pending:!0,data:Pe,method:U.method,action:q},q,Pe))},currentTarget:U}]})}}for(var QB=0;QB<yf.length;QB++){var HB=yf[QB],PAe=HB.toLowerCase(),RAe=HB[0].toUpperCase()+HB.slice(1);qa(PAe,"on"+RAe)}qa(Gh,"onAnimationEnd"),qa(sA,"onAnimationIteration"),qa(iA,"onAnimationStart"),qa("dblclick","onDoubleClick"),qa("focusin","onFocus"),qa("focusout","onBlur"),qa(oA,"onTransitionRun"),qa(bf,"onTransitionStart"),qa(Kh,"onTransitionCancel"),qa(lA,"onTransitionEnd"),Vt("onMouseEnter",["mouseout","mouseover"]),Vt("onMouseLeave",["mouseout","mouseover"]),Vt("onPointerEnter",["pointerout","pointerover"]),Vt("onPointerLeave",["pointerout","pointerover"]),Pt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ob="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LAe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ob));function qU(A,m){m=(m&4)!==0;for(var v=0;v<A.length;v++){var C=A[v],U=C.event;C=C.listeners;e:{var q=void 0;if(m)for(var ue=C.length-1;0<=ue;ue--){var be=C[ue],Pe=be.instance,ct=be.currentTarget;if(be=be.listener,Pe!==q&&U.isPropagationStopped())break e;q=be,U.currentTarget=ct;try{q(U)}catch(Bt){RE(Bt)}U.currentTarget=null,q=Pe}else for(ue=0;ue<C.length;ue++){if(be=C[ue],Pe=be.instance,ct=be.currentTarget,be=be.listener,Pe!==q&&U.isPropagationStopped())break e;q=be,U.currentTarget=ct;try{q(U)}catch(Bt){RE(Bt)}U.currentTarget=null,q=Pe}}}}function Nn(A,m){var v=m[Zr];v===void 0&&(v=m[Zr]=new Set);var C=A+"__bubble";v.has(C)||(WU(m,A,2,!1),v.add(C))}function VB(A,m,v){var C=0;m&&(C|=4),WU(v,A,C,m)}var YE="_reactListening"+Math.random().toString(36).slice(2);function zB(A){if(!A[YE]){A[YE]=!0,nt.forEach(function(v){v!=="selectionchange"&&(LAe.has(v)||VB(v,!1,A),VB(v,!0,A))});var m=A.nodeType===9?A:A.ownerDocument;m===null||m[YE]||(m[YE]=!0,VB("selectionchange",!1,m))}}function WU(A,m,v,C){switch(v7(m)){case 2:var U=dfe;break;case 8:U=Afe;break;default:U=aj}v=U.bind(null,m,v,A),U=void 0,!ro||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(U=!0),C?U!==void 0?A.addEventListener(m,v,{capture:!0,passive:U}):A.addEventListener(m,v,!0):U!==void 0?A.addEventListener(m,v,{passive:U}):A.addEventListener(m,v,!1)}function $B(A,m,v,C,U){var q=C;if((m&1)===0&&(m&2)===0&&C!==null)e:for(;;){if(C===null)return;var ue=C.tag;if(ue===3||ue===4){var be=C.stateNode.containerInfo;if(be===U)break;if(ue===4)for(ue=C.return;ue!==null;){var Pe=ue.tag;if((Pe===3||Pe===4)&&ue.stateNode.containerInfo===U)return;ue=ue.return}for(;be!==null;){if(ue=Se(be),ue===null)return;if(Pe=ue.tag,Pe===5||Pe===6||Pe===26||Pe===27){C=q=ue;continue e}be=be.parentNode}}C=C.return}Qh(function(){var ct=q,Bt=la(v),Rt=[];e:{var At=td.get(A);if(At!==void 0){var mt=Jc,$r=A;switch(A){case"keypress":if(So(v)===0)break e;case"keydown":case"keyup":mt=Ac;break;case"focusin":$r="focus",mt=eu;break;case"focusout":$r="blur",mt=eu;break;case"beforeblur":case"afterblur":mt=eu;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=gs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=Zc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=Zd;break;case Gh:case sA:case iA:mt=Xd;break;case lA:mt=Ae;break;case"scroll":case"scrollend":mt=hf;break;case"wheel":mt=Le;break;case"copy":case"cut":case"paste":mt=Yd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=Zu;break;case"toggle":case"beforetoggle":mt=bt}var Or=(m&4)!==0,ya=!Or&&(A==="scroll"||A==="scrollend"),Ye=Or?At!==null?At+"Capture":null:At;Or=[];for(var He=ct,st;He!==null;){var It=He;if(st=It.stateNode,It=It.tag,It!==5&&It!==26&&It!==27||st===null||Ye===null||(It=Ii(He,Ye),It!=null&&Or.push(Db(He,It,st))),ya)break;He=He.return}0<Or.length&&(At=new mt(At,$r,null,v,Bt),Rt.push({event:At,listeners:Or}))}}if((m&7)===0){e:{if(At=A==="mouseover"||A==="pointerover",mt=A==="mouseout"||A==="pointerout",At&&v!==Sl&&($r=v.relatedTarget||v.fromElement)&&(Se($r)||$r[qr]))break e;if((mt||At)&&(At=Bt.window===Bt?Bt:(At=Bt.ownerDocument)?At.defaultView||At.parentWindow:window,mt?($r=v.relatedTarget||v.toElement,mt=ct,$r=$r?Se($r):null,$r!==null&&(ya=s($r),Or=$r.tag,$r!==ya||Or!==5&&Or!==27&&Or!==6)&&($r=null)):(mt=null,$r=ct),mt!==$r)){if(Or=gs,It="onMouseLeave",Ye="onMouseEnter",He="mouse",(A==="pointerout"||A==="pointerover")&&(Or=Zu,It="onPointerLeave",Ye="onPointerEnter",He="pointer"),ya=mt==null?At:Je(mt),st=$r==null?At:Je($r),At=new Or(It,He+"leave",mt,v,Bt),At.target=ya,At.relatedTarget=st,It=null,Se(Bt)===ct&&(Or=new Or(Ye,He+"enter",$r,v,Bt),Or.target=st,Or.relatedTarget=ya,It=Or),ya=It,mt&&$r)t:{for(Or=mt,Ye=$r,He=0,st=Or;st;st=mx(st))He++;for(st=0,It=Ye;It;It=mx(It))st++;for(;0<He-st;)Or=mx(Or),He--;for(;0<st-He;)Ye=mx(Ye),st--;for(;He--;){if(Or===Ye||Ye!==null&&Or===Ye.alternate)break t;Or=mx(Or),Ye=mx(Ye)}Or=null}else Or=null;mt!==null&&XU(Rt,At,mt,Or,!1),$r!==null&&ya!==null&&XU(Rt,ya,$r,Or,!0)}}e:{if(At=ct?Je(ct):window,mt=At.nodeName&&At.nodeName.toLowerCase(),mt==="select"||mt==="input"&&At.type==="file")var hr=zh;else if(ea(At))if(pf)hr=zg;else{hr=ob;var wn=Bo}else mt=At.nodeName,!mt||mt.toLowerCase()!=="input"||At.type!=="checkbox"&&At.type!=="radio"?ct&&Af(ct.elementType)&&(hr=zh):hr=$m;if(hr&&(hr=hr(A,ct))){Fl(Rt,hr,v,Bt);break e}wn&&wn(A,At,ct),A==="focusout"&&ct&&At.type==="number"&&ct.memoizedProps.value!=null&&Wc(At,"number",At.value)}switch(wn=ct?Je(ct):window,A){case"focusin":(ea(wn)||wn.contentEditable==="true")&&(jo=wn,fc=ct,su=null);break;case"focusout":su=fc=jo=null;break;case"mousedown":hc=!0;break;case"contextmenu":case"mouseup":case"dragend":hc=!1,Ka(Rt,v,Bt);break;case"selectionchange":if(aA)break;case"keydown":case"keyup":Ka(Rt,v,Bt)}var Er;if(Zt)e:{switch(A){case"compositionstart":var Pr="onCompositionStart";break e;case"compositionend":Pr="onCompositionEnd";break e;case"compositionupdate":Pr="onCompositionUpdate";break e}Pr=void 0}else Fr?lt(A,v)&&(Pr="onCompositionEnd"):A==="keydown"&&v.keyCode===229&&(Pr="onCompositionStart");Pr&&(le&&v.locale!=="ko"&&(Fr||Pr!=="onCompositionStart"?Pr==="onCompositionEnd"&&Fr&&(Er=ff()):(No=Bt,Yc="value"in No?No.value:No.textContent,Fr=!0)),wn=JE(ct,Pr),0<wn.length&&(Pr=new Xu(Pr,A,null,v,Bt),Rt.push({event:Pr,listeners:wn}),Er?Pr.data=Er:(Er=Qt(v),Er!==null&&(Pr.data=Er)))),(Er=re?yn(A,v):Wr(A,v))&&(Pr=JE(ct,"onBeforeInput"),0<Pr.length&&(wn=new Xu("onBeforeInput","beforeinput",null,v,Bt),Rt.push({event:wn,listeners:Pr}),wn.data=Er)),DAe(Rt,A,ct,v,Bt)}qU(Rt,m)})}function Db(A,m,v){return{instance:A,listener:m,currentTarget:v}}function JE(A,m){for(var v=m+"Capture",C=[];A!==null;){var U=A,q=U.stateNode;if(U=U.tag,U!==5&&U!==26&&U!==27||q===null||(U=Ii(A,v),U!=null&&C.unshift(Db(A,U,q)),U=Ii(A,m),U!=null&&C.push(Db(A,U,q))),A.tag===3)return C;A=A.return}return[]}function mx(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function XU(A,m,v,C,U){for(var q=m._reactName,ue=[];v!==null&&v!==C;){var be=v,Pe=be.alternate,ct=be.stateNode;if(be=be.tag,Pe!==null&&Pe===C)break;be!==5&&be!==26&&be!==27||ct===null||(Pe=ct,U?(ct=Ii(v,q),ct!=null&&ue.unshift(Db(v,ct,Pe))):U||(ct=Ii(v,q),ct!=null&&ue.push(Db(v,ct,Pe)))),v=v.return}ue.length!==0&&A.push({event:m,listeners:ue})}var MAe=/\r\n?/g,UAe=/\u0000|\uFFFD/g;function YU(A){return(typeof A=="string"?A:""+A).replace(MAe,`
`).replace(UAe,"")}function JU(A,m){return m=YU(m),YU(A)===m}function ZE(){}function ba(A,m,v,C,U,q){switch(v){case"children":typeof C=="string"?m==="body"||m==="textarea"&&C===""||Co(A,C):(typeof C=="number"||typeof C=="bigint")&&m!=="body"&&Co(A,""+C);break;case"className":on(A,"class",C);break;case"tabIndex":on(A,"tabindex",C);break;case"dir":case"role":case"viewBox":case"width":case"height":on(A,v,C);break;case"style":df(A,C,q);break;case"data":if(m!=="object"){on(A,"data",C);break}case"src":case"href":if(C===""&&(m!=="a"||v!=="href")){A.removeAttribute(v);break}if(C==null||typeof C=="function"||typeof C=="symbol"||typeof C=="boolean"){A.removeAttribute(v);break}C=lc(""+C),A.setAttribute(v,C);break;case"action":case"formAction":if(typeof C=="function"){A.setAttribute(v,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof q=="function"&&(v==="formAction"?(m!=="input"&&ba(A,m,"name",U.name,U,null),ba(A,m,"formEncType",U.formEncType,U,null),ba(A,m,"formMethod",U.formMethod,U,null),ba(A,m,"formTarget",U.formTarget,U,null)):(ba(A,m,"encType",U.encType,U,null),ba(A,m,"method",U.method,U,null),ba(A,m,"target",U.target,U,null)));if(C==null||typeof C=="symbol"||typeof C=="boolean"){A.removeAttribute(v);break}C=lc(""+C),A.setAttribute(v,C);break;case"onClick":C!=null&&(A.onclick=ZE);break;case"onScroll":C!=null&&Nn("scroll",A);break;case"onScrollEnd":C!=null&&Nn("scrollend",A);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(n(61));if(v=C.__html,v!=null){if(U.children!=null)throw Error(n(60));A.innerHTML=v}}break;case"multiple":A.multiple=C&&typeof C!="function"&&typeof C!="symbol";break;case"muted":A.muted=C&&typeof C!="function"&&typeof C!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(C==null||typeof C=="function"||typeof C=="boolean"||typeof C=="symbol"){A.removeAttribute("xlink:href");break}v=lc(""+C),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":C!=null&&typeof C!="function"&&typeof C!="symbol"?A.setAttribute(v,""+C):A.removeAttribute(v);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":C&&typeof C!="function"&&typeof C!="symbol"?A.setAttribute(v,""):A.removeAttribute(v);break;case"capture":case"download":C===!0?A.setAttribute(v,""):C!==!1&&C!=null&&typeof C!="function"&&typeof C!="symbol"?A.setAttribute(v,C):A.removeAttribute(v);break;case"cols":case"rows":case"size":case"span":C!=null&&typeof C!="function"&&typeof C!="symbol"&&!isNaN(C)&&1<=C?A.setAttribute(v,C):A.removeAttribute(v);break;case"rowSpan":case"start":C==null||typeof C=="function"||typeof C=="symbol"||isNaN(C)?A.removeAttribute(v):A.setAttribute(v,C);break;case"popover":Nn("beforetoggle",A),Nn("toggle",A),sn(A,"popover",C);break;case"xlinkActuate":An(A,"http://www.w3.org/1999/xlink","xlink:actuate",C);break;case"xlinkArcrole":An(A,"http://www.w3.org/1999/xlink","xlink:arcrole",C);break;case"xlinkRole":An(A,"http://www.w3.org/1999/xlink","xlink:role",C);break;case"xlinkShow":An(A,"http://www.w3.org/1999/xlink","xlink:show",C);break;case"xlinkTitle":An(A,"http://www.w3.org/1999/xlink","xlink:title",C);break;case"xlinkType":An(A,"http://www.w3.org/1999/xlink","xlink:type",C);break;case"xmlBase":An(A,"http://www.w3.org/XML/1998/namespace","xml:base",C);break;case"xmlLang":An(A,"http://www.w3.org/XML/1998/namespace","xml:lang",C);break;case"xmlSpace":An(A,"http://www.w3.org/XML/1998/namespace","xml:space",C);break;case"is":sn(A,"is",C);break;case"innerText":case"textContent":break;default:(!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(v=oc.get(v)||v,sn(A,v,C))}}function GB(A,m,v,C,U,q){switch(v){case"style":df(A,C,q);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(n(61));if(v=C.__html,v!=null){if(U.children!=null)throw Error(n(60));A.innerHTML=v}}break;case"children":typeof C=="string"?Co(A,C):(typeof C=="number"||typeof C=="bigint")&&Co(A,""+C);break;case"onScroll":C!=null&&Nn("scroll",A);break;case"onScrollEnd":C!=null&&Nn("scrollend",A);break;case"onClick":C!=null&&(A.onclick=ZE);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ot.hasOwnProperty(v))e:{if(v[0]==="o"&&v[1]==="n"&&(U=v.endsWith("Capture"),m=v.slice(2,U?v.length-7:void 0),q=A[xr]||null,q=q!=null?q[v]:null,typeof q=="function"&&A.removeEventListener(m,q,U),typeof C=="function")){typeof q!="function"&&q!==null&&(v in A?A[v]=null:A.hasAttribute(v)&&A.removeAttribute(v)),A.addEventListener(m,C,U);break e}v in A?A[v]=C:C===!0?A.setAttribute(v,""):sn(A,v,C)}}}function lo(A,m,v){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nn("error",A),Nn("load",A);var C=!1,U=!1,q;for(q in v)if(v.hasOwnProperty(q)){var ue=v[q];if(ue!=null)switch(q){case"src":C=!0;break;case"srcSet":U=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:ba(A,m,q,ue,v,null)}}U&&ba(A,m,"srcSet",v.srcSet,v,null),C&&ba(A,m,"src",v.src,v,null);return;case"input":Nn("invalid",A);var be=q=ue=U=null,Pe=null,ct=null;for(C in v)if(v.hasOwnProperty(C)){var Bt=v[C];if(Bt!=null)switch(C){case"name":U=Bt;break;case"type":ue=Bt;break;case"checked":Pe=Bt;break;case"defaultChecked":ct=Bt;break;case"value":q=Bt;break;case"defaultValue":be=Bt;break;case"children":case"dangerouslySetInnerHTML":if(Bt!=null)throw Error(n(137,m));break;default:ba(A,m,C,Bt,v,null)}}qc(A,q,be,Pe,ct,ue,U,!1),Kc(A);return;case"select":Nn("invalid",A),C=ue=q=null;for(U in v)if(v.hasOwnProperty(U)&&(be=v[U],be!=null))switch(U){case"value":q=be;break;case"defaultValue":ue=be;break;case"multiple":C=be;default:ba(A,m,U,be,v,null)}m=q,v=ue,A.multiple=!!C,m!=null?Nl(A,!!C,m,!1):v!=null&&Nl(A,!!C,v,!0);return;case"textarea":Nn("invalid",A),q=U=C=null;for(ue in v)if(v.hasOwnProperty(ue)&&(be=v[ue],be!=null))switch(ue){case"value":C=be;break;case"defaultValue":U=be;break;case"children":q=be;break;case"dangerouslySetInnerHTML":if(be!=null)throw Error(n(91));break;default:ba(A,m,ue,be,v,null)}Xc(A,C,U,q),Kc(A);return;case"option":for(Pe in v)if(v.hasOwnProperty(Pe)&&(C=v[Pe],C!=null))switch(Pe){case"selected":A.selected=C&&typeof C!="function"&&typeof C!="symbol";break;default:ba(A,m,Pe,C,v,null)}return;case"dialog":Nn("beforetoggle",A),Nn("toggle",A),Nn("cancel",A),Nn("close",A);break;case"iframe":case"object":Nn("load",A);break;case"video":case"audio":for(C=0;C<Ob.length;C++)Nn(Ob[C],A);break;case"image":Nn("error",A),Nn("load",A);break;case"details":Nn("toggle",A);break;case"embed":case"source":case"link":Nn("error",A),Nn("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ct in v)if(v.hasOwnProperty(ct)&&(C=v[ct],C!=null))switch(ct){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:ba(A,m,ct,C,v,null)}return;default:if(Af(m)){for(Bt in v)v.hasOwnProperty(Bt)&&(C=v[Bt],C!==void 0&&GB(A,m,Bt,C,v,void 0));return}}for(be in v)v.hasOwnProperty(be)&&(C=v[be],C!=null&&ba(A,m,be,C,v,null))}function QAe(A,m,v,C){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var U=null,q=null,ue=null,be=null,Pe=null,ct=null,Bt=null;for(mt in v){var Rt=v[mt];if(v.hasOwnProperty(mt)&&Rt!=null)switch(mt){case"checked":break;case"value":break;case"defaultValue":Pe=Rt;default:C.hasOwnProperty(mt)||ba(A,m,mt,null,C,Rt)}}for(var At in C){var mt=C[At];if(Rt=v[At],C.hasOwnProperty(At)&&(mt!=null||Rt!=null))switch(At){case"type":q=mt;break;case"name":U=mt;break;case"checked":ct=mt;break;case"defaultChecked":Bt=mt;break;case"value":ue=mt;break;case"defaultValue":be=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(n(137,m));break;default:mt!==Rt&&ba(A,m,At,mt,C,Rt)}}xi(A,ue,be,Pe,ct,Bt,q,U);return;case"select":mt=ue=be=At=null;for(q in v)if(Pe=v[q],v.hasOwnProperty(q)&&Pe!=null)switch(q){case"value":break;case"multiple":mt=Pe;default:C.hasOwnProperty(q)||ba(A,m,q,null,C,Pe)}for(U in C)if(q=C[U],Pe=v[U],C.hasOwnProperty(U)&&(q!=null||Pe!=null))switch(U){case"value":At=q;break;case"defaultValue":be=q;break;case"multiple":ue=q;default:q!==Pe&&ba(A,m,U,q,C,Pe)}m=be,v=ue,C=mt,At!=null?Nl(A,!!v,At,!1):!!C!=!!v&&(m!=null?Nl(A,!!v,m,!0):Nl(A,!!v,v?[]:"",!1));return;case"textarea":mt=At=null;for(be in v)if(U=v[be],v.hasOwnProperty(be)&&U!=null&&!C.hasOwnProperty(be))switch(be){case"value":break;case"children":break;default:ba(A,m,be,null,C,U)}for(ue in C)if(U=C[ue],q=v[ue],C.hasOwnProperty(ue)&&(U!=null||q!=null))switch(ue){case"value":At=U;break;case"defaultValue":mt=U;break;case"children":break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(n(91));break;default:U!==q&&ba(A,m,ue,U,C,q)}Hn(A,At,mt);return;case"option":for(var $r in v)if(At=v[$r],v.hasOwnProperty($r)&&At!=null&&!C.hasOwnProperty($r))switch($r){case"selected":A.selected=!1;break;default:ba(A,m,$r,null,C,At)}for(Pe in C)if(At=C[Pe],mt=v[Pe],C.hasOwnProperty(Pe)&&At!==mt&&(At!=null||mt!=null))switch(Pe){case"selected":A.selected=At&&typeof At!="function"&&typeof At!="symbol";break;default:ba(A,m,Pe,At,C,mt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Or in v)At=v[Or],v.hasOwnProperty(Or)&&At!=null&&!C.hasOwnProperty(Or)&&ba(A,m,Or,null,C,At);for(ct in C)if(At=C[ct],mt=v[ct],C.hasOwnProperty(ct)&&At!==mt&&(At!=null||mt!=null))switch(ct){case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(n(137,m));break;default:ba(A,m,ct,At,C,mt)}return;default:if(Af(m)){for(var ya in v)At=v[ya],v.hasOwnProperty(ya)&&At!==void 0&&!C.hasOwnProperty(ya)&&GB(A,m,ya,void 0,C,At);for(Bt in C)At=C[Bt],mt=v[Bt],!C.hasOwnProperty(Bt)||At===mt||At===void 0&&mt===void 0||GB(A,m,Bt,At,C,mt);return}}for(var Ye in v)At=v[Ye],v.hasOwnProperty(Ye)&&At!=null&&!C.hasOwnProperty(Ye)&&ba(A,m,Ye,null,C,At);for(Rt in C)At=C[Rt],mt=v[Rt],!C.hasOwnProperty(Rt)||At===mt||At==null&&mt==null||ba(A,m,Rt,At,C,mt)}var KB=null,qB=null;function eC(A){return A.nodeType===9?A:A.ownerDocument}function ZU(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function e7(A,m){if(A===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&m==="foreignObject"?0:A}function WB(A,m){return A==="textarea"||A==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var XB=null;function HAe(){var A=window.event;return A&&A.type==="popstate"?A===XB?!1:(XB=A,!0):(XB=null,!1)}var t7=typeof setTimeout=="function"?setTimeout:void 0,VAe=typeof clearTimeout=="function"?clearTimeout:void 0,r7=typeof Promise=="function"?Promise:void 0,zAe=typeof queueMicrotask=="function"?queueMicrotask:typeof r7<"u"?function(A){return r7.resolve(null).then(A).catch($Ae)}:t7;function $Ae(A){setTimeout(function(){throw A})}function f0(A){return A==="head"}function n7(A,m){var v=m,C=0,U=0;do{var q=v.nextSibling;if(A.removeChild(v),q&&q.nodeType===8)if(v=q.data,v==="/$"){if(0<C&&8>C){v=C;var ue=A.ownerDocument;if(v&1&&Pb(ue.documentElement),v&2&&Pb(ue.body),v&4)for(v=ue.head,Pb(v),ue=v.firstChild;ue;){var be=ue.nextSibling,Pe=ue.nodeName;ue[Ce]||Pe==="SCRIPT"||Pe==="STYLE"||Pe==="LINK"&&ue.rel.toLowerCase()==="stylesheet"||v.removeChild(ue),ue=be}}if(U===0){A.removeChild(q),zb(m);return}U--}else v==="$"||v==="$?"||v==="$!"?U++:C=v.charCodeAt(0)-48;else C=0;v=q}while(v);zb(m)}function YB(A){var m=A.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var v=m;switch(m=m.nextSibling,v.nodeName){case"HTML":case"HEAD":case"BODY":YB(v),we(v);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(v.rel.toLowerCase()==="stylesheet")continue}A.removeChild(v)}}function GAe(A,m,v,C){for(;A.nodeType===1;){var U=v;if(A.nodeName.toLowerCase()!==m.toLowerCase()){if(!C&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(C){if(!A[Ce])switch(m){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(q=A.getAttribute("rel"),q==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(q!==U.rel||A.getAttribute("href")!==(U.href==null||U.href===""?null:U.href)||A.getAttribute("crossorigin")!==(U.crossOrigin==null?null:U.crossOrigin)||A.getAttribute("title")!==(U.title==null?null:U.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(q=A.getAttribute("src"),(q!==(U.src==null?null:U.src)||A.getAttribute("type")!==(U.type==null?null:U.type)||A.getAttribute("crossorigin")!==(U.crossOrigin==null?null:U.crossOrigin))&&q&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(m==="input"&&A.type==="hidden"){var q=U.name==null?null:""+U.name;if(U.type==="hidden"&&A.getAttribute("name")===q)return A}else return A;if(A=md(A.nextSibling),A===null)break}return null}function KAe(A,m,v){if(m==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!v||(A=md(A.nextSibling),A===null))return null;return A}function JB(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function qAe(A,m){var v=A.ownerDocument;if(A.data!=="$?"||v.readyState==="complete")m();else{var C=function(){m(),v.removeEventListener("DOMContentLoaded",C)};v.addEventListener("DOMContentLoaded",C),A._reactRetry=C}}function md(A){for(;A!=null;A=A.nextSibling){var m=A.nodeType;if(m===1||m===3)break;if(m===8){if(m=A.data,m==="$"||m==="$!"||m==="$?"||m==="F!"||m==="F")break;if(m==="/$")return null}}return A}var ZB=null;function a7(A){A=A.previousSibling;for(var m=0;A;){if(A.nodeType===8){var v=A.data;if(v==="$"||v==="$!"||v==="$?"){if(m===0)return A;m--}else v==="/$"&&m++}A=A.previousSibling}return null}function s7(A,m,v){switch(m=eC(v),A){case"html":if(A=m.documentElement,!A)throw Error(n(452));return A;case"head":if(A=m.head,!A)throw Error(n(453));return A;case"body":if(A=m.body,!A)throw Error(n(454));return A;default:throw Error(n(451))}}function Pb(A){for(var m=A.attributes;m.length;)A.removeAttributeNode(m[0]);we(A)}var mu=new Map,i7=new Set;function tC(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var Lf=K.d;K.d={f:WAe,r:XAe,D:YAe,C:JAe,L:ZAe,m:efe,X:rfe,S:tfe,M:nfe};function WAe(){var A=Lf.f(),m=GE();return A||m}function XAe(A){var m=Te(A);m!==null&&m.tag===5&&m.type==="form"?op(m):Lf.r(A)}var px=typeof document>"u"?null:document;function o7(A,m,v){var C=px;if(C&&typeof m=="string"&&m){var U=Fn(m);U='link[rel="'+A+'"][href="'+U+'"]',typeof v=="string"&&(U+='[crossorigin="'+v+'"]'),i7.has(U)||(i7.add(U),A={rel:A,crossOrigin:v,href:m},C.querySelector(U)===null&&(m=C.createElement("link"),lo(m,"link",A),$e(m),C.head.appendChild(m)))}}function YAe(A){Lf.D(A),o7("dns-prefetch",A,null)}function JAe(A,m){Lf.C(A,m),o7("preconnect",A,m)}function ZAe(A,m,v){Lf.L(A,m,v);var C=px;if(C&&A&&m){var U='link[rel="preload"][as="'+Fn(m)+'"]';m==="image"&&v&&v.imageSrcSet?(U+='[imagesrcset="'+Fn(v.imageSrcSet)+'"]',typeof v.imageSizes=="string"&&(U+='[imagesizes="'+Fn(v.imageSizes)+'"]')):U+='[href="'+Fn(A)+'"]';var q=U;switch(m){case"style":q=gx(A);break;case"script":q=xx(A)}mu.has(q)||(A=d({rel:"preload",href:m==="image"&&v&&v.imageSrcSet?void 0:A,as:m},v),mu.set(q,A),C.querySelector(U)!==null||m==="style"&&C.querySelector(Rb(q))||m==="script"&&C.querySelector(Lb(q))||(m=C.createElement("link"),lo(m,"link",A),$e(m),C.head.appendChild(m)))}}function efe(A,m){Lf.m(A,m);var v=px;if(v&&A){var C=m&&typeof m.as=="string"?m.as:"script",U='link[rel="modulepreload"][as="'+Fn(C)+'"][href="'+Fn(A)+'"]',q=U;switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":q=xx(A)}if(!mu.has(q)&&(A=d({rel:"modulepreload",href:A},m),mu.set(q,A),v.querySelector(U)===null)){switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(v.querySelector(Lb(q)))return}C=v.createElement("link"),lo(C,"link",A),$e(C),v.head.appendChild(C)}}}function tfe(A,m,v){Lf.S(A,m,v);var C=px;if(C&&A){var U=dt(C).hoistableStyles,q=gx(A);m=m||"default";var ue=U.get(q);if(!ue){var be={loading:0,preload:null};if(ue=C.querySelector(Rb(q)))be.loading=5;else{A=d({rel:"stylesheet",href:A,"data-precedence":m},v),(v=mu.get(q))&&ej(A,v);var Pe=ue=C.createElement("link");$e(Pe),lo(Pe,"link",A),Pe._p=new Promise(function(ct,Bt){Pe.onload=ct,Pe.onerror=Bt}),Pe.addEventListener("load",function(){be.loading|=1}),Pe.addEventListener("error",function(){be.loading|=2}),be.loading|=4,rC(ue,m,C)}ue={type:"stylesheet",instance:ue,count:1,state:be},U.set(q,ue)}}}function rfe(A,m){Lf.X(A,m);var v=px;if(v&&A){var C=dt(v).hoistableScripts,U=xx(A),q=C.get(U);q||(q=v.querySelector(Lb(U)),q||(A=d({src:A,async:!0},m),(m=mu.get(U))&&tj(A,m),q=v.createElement("script"),$e(q),lo(q,"link",A),v.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},C.set(U,q))}}function nfe(A,m){Lf.M(A,m);var v=px;if(v&&A){var C=dt(v).hoistableScripts,U=xx(A),q=C.get(U);q||(q=v.querySelector(Lb(U)),q||(A=d({src:A,async:!0,type:"module"},m),(m=mu.get(U))&&tj(A,m),q=v.createElement("script"),$e(q),lo(q,"link",A),v.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},C.set(U,q))}}function l7(A,m,v,C){var U=(U=ae.current)?tC(U):null;if(!U)throw Error(n(446));switch(A){case"meta":case"title":return null;case"style":return typeof v.precedence=="string"&&typeof v.href=="string"?(m=gx(v.href),v=dt(U).hoistableStyles,C=v.get(m),C||(C={type:"style",instance:null,count:0,state:null},v.set(m,C)),C):{type:"void",instance:null,count:0,state:null};case"link":if(v.rel==="stylesheet"&&typeof v.href=="string"&&typeof v.precedence=="string"){A=gx(v.href);var q=dt(U).hoistableStyles,ue=q.get(A);if(ue||(U=U.ownerDocument||U,ue={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},q.set(A,ue),(q=U.querySelector(Rb(A)))&&!q._p&&(ue.instance=q,ue.state.loading=5),mu.has(A)||(v={rel:"preload",as:"style",href:v.href,crossOrigin:v.crossOrigin,integrity:v.integrity,media:v.media,hrefLang:v.hrefLang,referrerPolicy:v.referrerPolicy},mu.set(A,v),q||afe(U,A,v,ue.state))),m&&C===null)throw Error(n(528,""));return ue}if(m&&C!==null)throw Error(n(529,""));return null;case"script":return m=v.async,v=v.src,typeof v=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=xx(v),v=dt(U).hoistableScripts,C=v.get(m),C||(C={type:"script",instance:null,count:0,state:null},v.set(m,C)),C):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,A))}}function gx(A){return'href="'+Fn(A)+'"'}function Rb(A){return'link[rel="stylesheet"]['+A+"]"}function c7(A){return d({},A,{"data-precedence":A.precedence,precedence:null})}function afe(A,m,v,C){A.querySelector('link[rel="preload"][as="style"]['+m+"]")?C.loading=1:(m=A.createElement("link"),C.preload=m,m.addEventListener("load",function(){return C.loading|=1}),m.addEventListener("error",function(){return C.loading|=2}),lo(m,"link",v),$e(m),A.head.appendChild(m))}function xx(A){return'[src="'+Fn(A)+'"]'}function Lb(A){return"script[async]"+A}function u7(A,m,v){if(m.count++,m.instance===null)switch(m.type){case"style":var C=A.querySelector('style[data-href~="'+Fn(v.href)+'"]');if(C)return m.instance=C,$e(C),C;var U=d({},v,{"data-href":v.href,"data-precedence":v.precedence,href:null,precedence:null});return C=(A.ownerDocument||A).createElement("style"),$e(C),lo(C,"style",U),rC(C,v.precedence,A),m.instance=C;case"stylesheet":U=gx(v.href);var q=A.querySelector(Rb(U));if(q)return m.state.loading|=4,m.instance=q,$e(q),q;C=c7(v),(U=mu.get(U))&&ej(C,U),q=(A.ownerDocument||A).createElement("link"),$e(q);var ue=q;return ue._p=new Promise(function(be,Pe){ue.onload=be,ue.onerror=Pe}),lo(q,"link",C),m.state.loading|=4,rC(q,v.precedence,A),m.instance=q;case"script":return q=xx(v.src),(U=A.querySelector(Lb(q)))?(m.instance=U,$e(U),U):(C=v,(U=mu.get(q))&&(C=d({},v),tj(C,U)),A=A.ownerDocument||A,U=A.createElement("script"),$e(U),lo(U,"link",C),A.head.appendChild(U),m.instance=U);case"void":return null;default:throw Error(n(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(C=m.instance,m.state.loading|=4,rC(C,v.precedence,A));return m.instance}function rC(A,m,v){for(var C=v.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),U=C.length?C[C.length-1]:null,q=U,ue=0;ue<C.length;ue++){var be=C[ue];if(be.dataset.precedence===m)q=be;else if(q!==U)break}q?q.parentNode.insertBefore(A,q.nextSibling):(m=v.nodeType===9?v.head:v,m.insertBefore(A,m.firstChild))}function ej(A,m){A.crossOrigin==null&&(A.crossOrigin=m.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=m.referrerPolicy),A.title==null&&(A.title=m.title)}function tj(A,m){A.crossOrigin==null&&(A.crossOrigin=m.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=m.referrerPolicy),A.integrity==null&&(A.integrity=m.integrity)}var nC=null;function d7(A,m,v){if(nC===null){var C=new Map,U=nC=new Map;U.set(v,C)}else U=nC,C=U.get(v),C||(C=new Map,U.set(v,C));if(C.has(A))return C;for(C.set(A,null),v=v.getElementsByTagName(A),U=0;U<v.length;U++){var q=v[U];if(!(q[Ce]||q[nr]||A==="link"&&q.getAttribute("rel")==="stylesheet")&&q.namespaceURI!=="http://www.w3.org/2000/svg"){var ue=q.getAttribute(m)||"";ue=A+ue;var be=C.get(ue);be?be.push(q):C.set(ue,[q])}}return C}function A7(A,m,v){A=A.ownerDocument||A,A.head.insertBefore(v,m==="title"?A.querySelector("head > title"):null)}function sfe(A,m,v){if(v===1||m.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return A=m.disabled,typeof m.precedence=="string"&&A==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function f7(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var Mb=null;function ife(){}function ofe(A,m,v){if(Mb===null)throw Error(n(475));var C=Mb;if(m.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var U=gx(v.href),q=A.querySelector(Rb(U));if(q){A=q._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(C.count++,C=aC.bind(C),A.then(C,C)),m.state.loading|=4,m.instance=q,$e(q);return}q=A.ownerDocument||A,v=c7(v),(U=mu.get(U))&&ej(v,U),q=q.createElement("link"),$e(q);var ue=q;ue._p=new Promise(function(be,Pe){ue.onload=be,ue.onerror=Pe}),lo(q,"link",v),m.instance=q}C.stylesheets===null&&(C.stylesheets=new Map),C.stylesheets.set(m,A),(A=m.state.preload)&&(m.state.loading&3)===0&&(C.count++,m=aC.bind(C),A.addEventListener("load",m),A.addEventListener("error",m))}}function lfe(){if(Mb===null)throw Error(n(475));var A=Mb;return A.stylesheets&&A.count===0&&rj(A,A.stylesheets),0<A.count?function(m){var v=setTimeout(function(){if(A.stylesheets&&rj(A,A.stylesheets),A.unsuspend){var C=A.unsuspend;A.unsuspend=null,C()}},6e4);return A.unsuspend=m,function(){A.unsuspend=null,clearTimeout(v)}}:null}function aC(){if(this.count--,this.count===0){if(this.stylesheets)rj(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var sC=null;function rj(A,m){A.stylesheets=null,A.unsuspend!==null&&(A.count++,sC=new Map,m.forEach(cfe,A),sC=null,aC.call(A))}function cfe(A,m){if(!(m.state.loading&4)){var v=sC.get(A);if(v)var C=v.get(null);else{v=new Map,sC.set(A,v);for(var U=A.querySelectorAll("link[data-precedence],style[data-precedence]"),q=0;q<U.length;q++){var ue=U[q];(ue.nodeName==="LINK"||ue.getAttribute("media")!=="not all")&&(v.set(ue.dataset.precedence,ue),C=ue)}C&&v.set(null,C)}U=m.instance,ue=U.getAttribute("data-precedence"),q=v.get(ue)||C,q===C&&v.set(null,U),v.set(ue,U),this.count++,C=aC.bind(this),U.addEventListener("load",C),U.addEventListener("error",C),q?q.parentNode.insertBefore(U,q.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(U,A.firstChild)),m.state.loading|=4}}var Ub={$$typeof:_,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function ufe(A,m,v,C,U,q,ue,be){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=oa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oa(0),this.hiddenUpdates=oa(null),this.identifierPrefix=C,this.onUncaughtError=U,this.onCaughtError=q,this.onRecoverableError=ue,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=be,this.incompleteTransitions=new Map}function h7(A,m,v,C,U,q,ue,be,Pe,ct,Bt,Rt){return A=new ufe(A,m,v,ue,be,Pe,ct,Rt),m=1,q===!0&&(m|=24),q=Pi(3,null,null,m),A.current=q,q.stateNode=A,m=cb(),m.refCount++,A.pooledCache=m,m.refCount++,q.memoizedState={element:C,isDehydrated:v,cache:m},Qe(q),A}function m7(A){return A?(A=ti,A):ti}function p7(A,m,v,C,U,q){U=m7(U),C.context===null?C.context=U:C.pendingContext=U,C=_t(m),C.payload={element:v},q=q===void 0?null:q,q!==null&&(C.callback=q),v=Ot(A,C,m),v!==null&&(wc(v,A,m),jt(v,A,m))}function g7(A,m){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var v=A.retryLane;A.retryLane=v!==0&&v<m?v:m}}function nj(A,m){g7(A,m),(A=A.alternate)&&g7(A,m)}function x7(A){if(A.tag===13){var m=rd(A,67108864);m!==null&&wc(m,A,67108864),nj(A,67108864)}}var iC=!0;function dfe(A,m,v,C){var U=V.T;V.T=null;var q=K.p;try{K.p=2,aj(A,m,v,C)}finally{K.p=q,V.T=U}}function Afe(A,m,v,C){var U=V.T;V.T=null;var q=K.p;try{K.p=8,aj(A,m,v,C)}finally{K.p=q,V.T=U}}function aj(A,m,v,C){if(iC){var U=sj(C);if(U===null)$B(A,m,C,oC,v),b7(A,C);else if(hfe(U,A,m,v,C))C.stopPropagation();else if(b7(A,C),m&4&&-1<ffe.indexOf(A)){for(;U!==null;){var q=Te(U);if(q!==null)switch(q.tag){case 3:if(q=q.stateNode,q.current.memoizedState.isDehydrated){var ue=wr(q.pendingLanes);if(ue!==0){var be=q;for(be.pendingLanes|=2,be.entangledLanes|=2;ue;){var Pe=1<<31-St(ue);be.entanglements[1]|=Pe,ue&=~Pe}wA(q),(ua&6)===0&&(zE=Ie()+500,Fb(0))}}break;case 13:be=rd(q,2),be!==null&&wc(be,q,2),GE(),nj(q,2)}if(q=sj(C),q===null&&$B(A,m,C,oC,v),q===U)break;U=q}U!==null&&C.stopPropagation()}else $B(A,m,C,null,v)}}function sj(A){return A=la(A),ij(A)}var oC=null;function ij(A){if(oC=null,A=Se(A),A!==null){var m=s(A);if(m===null)A=null;else{var v=m.tag;if(v===13){if(A=i(m),A!==null)return A;A=null}else if(v===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;A=null}else m!==A&&(A=null)}}return oC=A,null}function v7(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Me()){case Xe:return 2;case ye:return 8;case Fe:case Re:return 32;case Ge:return 268435456;default:return 32}default:return 32}}var oj=!1,h0=null,m0=null,p0=null,Qb=new Map,Hb=new Map,g0=[],ffe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function b7(A,m){switch(A){case"focusin":case"focusout":h0=null;break;case"dragenter":case"dragleave":m0=null;break;case"mouseover":case"mouseout":p0=null;break;case"pointerover":case"pointerout":Qb.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hb.delete(m.pointerId)}}function Vb(A,m,v,C,U,q){return A===null||A.nativeEvent!==q?(A={blockedOn:m,domEventName:v,eventSystemFlags:C,nativeEvent:q,targetContainers:[U]},m!==null&&(m=Te(m),m!==null&&x7(m)),A):(A.eventSystemFlags|=C,m=A.targetContainers,U!==null&&m.indexOf(U)===-1&&m.push(U),A)}function hfe(A,m,v,C,U){switch(m){case"focusin":return h0=Vb(h0,A,m,v,C,U),!0;case"dragenter":return m0=Vb(m0,A,m,v,C,U),!0;case"mouseover":return p0=Vb(p0,A,m,v,C,U),!0;case"pointerover":var q=U.pointerId;return Qb.set(q,Vb(Qb.get(q)||null,A,m,v,C,U)),!0;case"gotpointercapture":return q=U.pointerId,Hb.set(q,Vb(Hb.get(q)||null,A,m,v,C,U)),!0}return!1}function y7(A){var m=Se(A.target);if(m!==null){var v=s(m);if(v!==null){if(m=v.tag,m===13){if(m=i(v),m!==null){A.blockedOn=m,wt(A.priority,function(){if(v.tag===13){var C=yc();C=xt(C);var U=rd(v,C);U!==null&&wc(U,v,C),nj(v,C)}});return}}else if(m===3&&v.stateNode.current.memoizedState.isDehydrated){A.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}A.blockedOn=null}function lC(A){if(A.blockedOn!==null)return!1;for(var m=A.targetContainers;0<m.length;){var v=sj(A.nativeEvent);if(v===null){v=A.nativeEvent;var C=new v.constructor(v.type,v);Sl=C,v.target.dispatchEvent(C),Sl=null}else return m=Te(v),m!==null&&x7(m),A.blockedOn=v,!1;m.shift()}return!0}function w7(A,m,v){lC(A)&&v.delete(m)}function mfe(){oj=!1,h0!==null&&lC(h0)&&(h0=null),m0!==null&&lC(m0)&&(m0=null),p0!==null&&lC(p0)&&(p0=null),Qb.forEach(w7),Hb.forEach(w7)}function cC(A,m){A.blockedOn===m&&(A.blockedOn=null,oj||(oj=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,mfe)))}var uC=null;function E7(A){uC!==A&&(uC=A,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){uC===A&&(uC=null);for(var m=0;m<A.length;m+=3){var v=A[m],C=A[m+1],U=A[m+2];if(typeof C!="function"){if(ij(C||v)===null)continue;break}var q=Te(v);q!==null&&(A.splice(m,3),m-=3,Au(q,{pending:!0,data:U,method:v.method,action:C},C,U))}}))}function zb(A){function m(Pe){return cC(Pe,A)}h0!==null&&cC(h0,A),m0!==null&&cC(m0,A),p0!==null&&cC(p0,A),Qb.forEach(m),Hb.forEach(m);for(var v=0;v<g0.length;v++){var C=g0[v];C.blockedOn===A&&(C.blockedOn=null)}for(;0<g0.length&&(v=g0[0],v.blockedOn===null);)y7(v),v.blockedOn===null&&g0.shift();if(v=(A.ownerDocument||A).$$reactFormReplay,v!=null)for(C=0;C<v.length;C+=3){var U=v[C],q=v[C+1],ue=U[xr]||null;if(typeof q=="function")ue||E7(v);else if(ue){var be=null;if(q&&q.hasAttribute("formAction")){if(U=q,ue=q[xr]||null)be=ue.formAction;else if(ij(U)!==null)continue}else be=ue.action;typeof be=="function"?v[C+1]=be:(v.splice(C,3),C-=3),E7(v)}}}function lj(A){this._internalRoot=A}dC.prototype.render=lj.prototype.render=function(A){var m=this._internalRoot;if(m===null)throw Error(n(409));var v=m.current,C=yc();p7(v,C,A,m,null,null)},dC.prototype.unmount=lj.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var m=A.containerInfo;p7(A.current,2,null,A,null,null),GE(),m[qr]=null}};function dC(A){this._internalRoot=A}dC.prototype.unstable_scheduleHydration=function(A){if(A){var m=vt();A={blockedOn:null,target:A,priority:m};for(var v=0;v<g0.length&&m!==0&&m<g0[v].priority;v++);g0.splice(v,0,A),v===0&&y7(A)}};var C7=t.version;if(C7!=="19.1.1")throw Error(n(527,C7,"19.1.1"));K.findDOMNode=function(A){var m=A._reactInternals;if(m===void 0)throw typeof A.render=="function"?Error(n(188)):(A=Object.keys(A).join(","),Error(n(268,A)));return A=c(m),A=A!==null?u(A):null,A=A===null?null:A.stateNode,A};var pfe={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var AC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!AC.isDisabled&&AC.supportsFiber)try{ft=AC.inject(pfe),Nt=AC}catch{}}return Gb.createRoot=function(A,m){if(!a(A))throw Error(n(299));var v=!1,C="",U=UM,q=QM,ue=HM,be=null;return m!=null&&(m.unstable_strictMode===!0&&(v=!0),m.identifierPrefix!==void 0&&(C=m.identifierPrefix),m.onUncaughtError!==void 0&&(U=m.onUncaughtError),m.onCaughtError!==void 0&&(q=m.onCaughtError),m.onRecoverableError!==void 0&&(ue=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(be=m.unstable_transitionCallbacks)),m=h7(A,1,!1,null,null,v,C,U,q,ue,be,null),A[qr]=m.current,zB(A),new lj(m)},Gb.hydrateRoot=function(A,m,v){if(!a(A))throw Error(n(299));var C=!1,U="",q=UM,ue=QM,be=HM,Pe=null,ct=null;return v!=null&&(v.unstable_strictMode===!0&&(C=!0),v.identifierPrefix!==void 0&&(U=v.identifierPrefix),v.onUncaughtError!==void 0&&(q=v.onUncaughtError),v.onCaughtError!==void 0&&(ue=v.onCaughtError),v.onRecoverableError!==void 0&&(be=v.onRecoverableError),v.unstable_transitionCallbacks!==void 0&&(Pe=v.unstable_transitionCallbacks),v.formState!==void 0&&(ct=v.formState)),m=h7(A,1,!0,m,v??null,C,U,q,ue,be,Pe,ct),m.context=m7(null),v=m.current,C=yc(),C=xt(C),U=_t(C),U.callback=null,Ot(v,U,C),v=C,m.current.lanes=v,Ba(m,v),wA(m),A[qr]=m.current,zB(A),new dC(m)},Gb.version="19.1.1",Gb}var O7;function jfe(){if(O7)return Aj.exports;O7=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Aj.exports=Bfe(),Aj.exports}var Tfe=jfe();const Ife=Cl(Tfe),Ffe=()=>{};var D7={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fY=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},Ofe=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const a=e[r++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[r++];t[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=e[r++],i=e[r++],o=e[r++],c=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;t[n++]=String.fromCharCode(55296+(c>>10)),t[n++]=String.fromCharCode(56320+(c&1023))}else{const s=e[r++],i=e[r++];t[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63)}}return t.join("")},hY={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<e.length;a+=3){const s=e[a],i=a+1<e.length,o=i?e[a+1]:0,c=a+2<e.length,u=c?e[a+2]:0,d=s>>2,f=(s&3)<<4|o>>4;let h=(o&15)<<2|u>>6,p=u&63;c||(p=64,i||(h=64)),n.push(r[d],r[f],r[h],r[p])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(fY(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Ofe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<e.length;){const s=r[e.charAt(a++)],o=a<e.length?r[e.charAt(a)]:0;++a;const u=a<e.length?r[e.charAt(a)]:64;++a;const f=a<e.length?r[e.charAt(a)]:64;if(++a,s==null||o==null||u==null||f==null)throw new Dfe;const h=s<<2|o>>4;if(n.push(h),u!==64){const p=o<<4&240|u>>2;if(n.push(p),f!==64){const g=u<<6&192|f;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Dfe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pfe=function(e){const t=fY(e);return hY.encodeByteArray(t,!0)},F5=function(e){return Pfe(e).replace(/\./g,"")},mY=function(e){try{return hY.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rfe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lfe=()=>Rfe().__FIREBASE_DEFAULTS__,Mfe=()=>{if(typeof process>"u"||typeof D7>"u")return;const e=D7.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Ufe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&mY(e[1]);return t&&JSON.parse(t)},QS=()=>{try{return Ffe()||Lfe()||Mfe()||Ufe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},pY=e=>{var t,r;return(r=(t=QS())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},fD=e=>{const t=pY(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},gY=()=>{var e;return(e=QS())==null?void 0:e.config},xY=e=>{var t;return(t=QS())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qfe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function HS(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vY(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",a=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[F5(JSON.stringify(r)),F5(JSON.stringify(i)),""].join(".")}const $y={};function Hfe(){const e={prod:[],emulator:[]};for(const t of Object.keys($y))$y[t]?e.emulator.push(t):e.prod.push(t);return e}function Vfe(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let P7=!1;function VS(e,t){if(typeof window>"u"||typeof document>"u"||!Bh(window.location.host)||$y[e]===t||$y[e]||P7)return;$y[e]=t;function r(h){return`__firebase__banner__${h}`}const n="__firebase__banner",s=Hfe().prod.length>0;function i(){const h=document.getElementById(n);h&&h.remove()}function o(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,p){h.setAttribute("width","24"),h.setAttribute("id",p),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function u(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{P7=!0,i()},h}function d(h,p){h.setAttribute("id",p),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function f(){const h=Vfe(n),p=r("text"),g=document.getElementById(p)||document.createElement("span"),x=r("learnmore"),b=document.getElementById(x)||document.createElement("a"),y=r("preprendIcon"),w=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const _=h.element;o(_),d(b,x);const B=u();c(w,y),_.append(w,g,b,B),document.body.appendChild(_)}s?(g.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zfe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nl())}function $fe(){var t;const e=(t=QS())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Gfe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Kfe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function qfe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Wfe(){const e=nl();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Xfe(){return!$fe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Yfe(){try{return typeof indexedDB=="object"}catch{return!1}}function Jfe(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;t(((s=a.error)==null?void 0:s.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zfe="FirebaseError";class Ud extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=Zfe,Object.setPrototypeOf(this,Ud.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,y2.prototype.create)}}class y2{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},a=`${this.service}/${t}`,s=this.errors[t],i=s?ehe(s,n):"Error",o=`${this.serviceName}: ${i} (${a}).`;return new Ud(a,o,n)}}function ehe(e,t){return e.replace(the,(r,n)=>{const a=t[n];return a!=null?String(a):`<${n}?>`})}const the=/\{\$([^}]+)}/g;function rhe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function dm(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const a of r){if(!n.includes(a))return!1;const s=e[a],i=t[a];if(R7(s)&&R7(i)){if(!dm(s,i))return!1}else if(s!==i)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function R7(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function Ey(e){const t={};return e.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");t[decodeURIComponent(a)]=decodeURIComponent(s)}}),t}function Cy(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function nhe(e,t){const r=new ahe(e,t);return r.subscribe.bind(r)}class ahe{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let a;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");she(t,["next","error","complete"])?a=t:a={next:t,error:r,complete:n},a.next===void 0&&(a.next=pj),a.error===void 0&&(a.error=pj),a.complete===void 0&&(a.complete=pj);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function she(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function pj(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(e){return e&&e._delegate?e._delegate:e}class Ah{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ihe=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new Qfe;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(lhe(t))try{this.getOrInitializeService({instanceIdentifier:xp})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(t=xp){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=xp){return this.instances.has(t)}getOptions(t=xp){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&i.resolve(a)}return a}onInit(t,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(t),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&t(s,n),()=>{a.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:ohe(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=xp){return this.component?this.component.multipleInstances?t:xp:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function ohe(e){return e===xp?void 0:e}function lhe(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class che{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new ihe(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(kn||(kn={}));const uhe={debug:kn.DEBUG,verbose:kn.VERBOSE,info:kn.INFO,warn:kn.WARN,error:kn.ERROR,silent:kn.SILENT},dhe=kn.INFO,Ahe={[kn.DEBUG]:"log",[kn.VERBOSE]:"log",[kn.INFO]:"info",[kn.WARN]:"warn",[kn.ERROR]:"error"},fhe=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),a=Ahe[t];if(a)console[a](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let hD=class{constructor(t){this.name=t,this._logLevel=dhe,this._logHandler=fhe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in kn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?uhe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,kn.DEBUG,...t),this._logHandler(this,kn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,kn.VERBOSE,...t),this._logHandler(this,kn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,kn.INFO,...t),this._logHandler(this,kn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,kn.WARN,...t),this._logHandler(this,kn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,kn.ERROR,...t),this._logHandler(this,kn.ERROR,...t)}};const hhe=(e,t)=>t.some(r=>e instanceof r);let L7,M7;function mhe(){return L7||(L7=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function phe(){return M7||(M7=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bY=new WeakMap,c6=new WeakMap,yY=new WeakMap,gj=new WeakMap,mD=new WeakMap;function ghe(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{r(Y0(e.result)),a()},i=()=>{n(e.error),a()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(r=>{r instanceof IDBCursor&&bY.set(r,e)}).catch(()=>{}),mD.set(t,e),t}function xhe(e){if(c6.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{r(),a()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});c6.set(e,t)}let u6={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return c6.get(e);if(t==="objectStoreNames")return e.objectStoreNames||yY.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Y0(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function vhe(e){u6=e(u6)}function bhe(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(xj(this),t,...r);return yY.set(n,t.sort?t.sort():[t]),Y0(n)}:phe().includes(e)?function(...t){return e.apply(xj(this),t),Y0(bY.get(this))}:function(...t){return Y0(e.apply(xj(this),t))}}function yhe(e){return typeof e=="function"?bhe(e):(e instanceof IDBTransaction&&xhe(e),hhe(e,mhe())?new Proxy(e,u6):e)}function Y0(e){if(e instanceof IDBRequest)return ghe(e);if(gj.has(e))return gj.get(e);const t=yhe(e);return t!==e&&(gj.set(e,t),mD.set(t,e)),t}const xj=e=>mD.get(e);function whe(e,t,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const i=indexedDB.open(e,t),o=Y0(i);return n&&i.addEventListener("upgradeneeded",c=>{n(Y0(i.result),c.oldVersion,c.newVersion,Y0(i.transaction),c)}),r&&i.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),o.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const Ehe=["get","getKey","getAll","getAllKeys","count"],Che=["put","add","delete","clear"],vj=new Map;function U7(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(vj.get(t))return vj.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=Che.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||Ehe.includes(r)))return;const s=async function(i,...o){const c=this.transaction(i,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[r](...o),a&&c.done]))[0]};return vj.set(t,s),s}vhe(e=>({...e,get:(t,r,n)=>U7(t,r)||e.get(t,r,n),has:(t,r)=>!!U7(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _he{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Nhe(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function Nhe(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const d6="@firebase/app",Q7="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh=new hD("@firebase/app"),She="@firebase/app-compat",khe="@firebase/analytics-compat",Bhe="@firebase/analytics",jhe="@firebase/app-check-compat",The="@firebase/app-check",Ihe="@firebase/auth",Fhe="@firebase/auth-compat",Ohe="@firebase/database",Dhe="@firebase/data-connect",Phe="@firebase/database-compat",Rhe="@firebase/functions",Lhe="@firebase/functions-compat",Mhe="@firebase/installations",Uhe="@firebase/installations-compat",Qhe="@firebase/messaging",Hhe="@firebase/messaging-compat",Vhe="@firebase/performance",zhe="@firebase/performance-compat",$he="@firebase/remote-config",Ghe="@firebase/remote-config-compat",Khe="@firebase/storage",qhe="@firebase/storage-compat",Whe="@firebase/firestore",Xhe="@firebase/ai",Yhe="@firebase/firestore-compat",Jhe="firebase",Zhe="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6="[DEFAULT]",e0e={[d6]:"fire-core",[She]:"fire-core-compat",[Bhe]:"fire-analytics",[khe]:"fire-analytics-compat",[The]:"fire-app-check",[jhe]:"fire-app-check-compat",[Ihe]:"fire-auth",[Fhe]:"fire-auth-compat",[Ohe]:"fire-rtdb",[Dhe]:"fire-data-connect",[Phe]:"fire-rtdb-compat",[Rhe]:"fire-fn",[Lhe]:"fire-fn-compat",[Mhe]:"fire-iid",[Uhe]:"fire-iid-compat",[Qhe]:"fire-fcm",[Hhe]:"fire-fcm-compat",[Vhe]:"fire-perf",[zhe]:"fire-perf-compat",[$he]:"fire-rc",[Ghe]:"fire-rc-compat",[Khe]:"fire-gcs",[qhe]:"fire-gcs-compat",[Whe]:"fire-fst",[Yhe]:"fire-fst-compat",[Xhe]:"fire-vertex","fire-js":"fire-js",[Jhe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw=new Map,t0e=new Map,f6=new Map;function H7(e,t){try{e.container.addComponent(t)}catch(r){fh.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function Am(e){const t=e.name;if(f6.has(t))return fh.debug(`There were multiple attempts to register component ${t}.`),!1;f6.set(t,e);for(const r of yw.values())H7(r,e);for(const r of t0e.values())H7(r,e);return!0}function E2(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function Tc(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0e={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},J0=new y2("app","Firebase",r0e);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0e{constructor(t,r,n){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ah("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw J0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g=Zhe;function pD(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n={name:A6,automaticDataCollectionEnabled:!0,...t},a=n.name;if(typeof a!="string"||!a)throw J0.create("bad-app-name",{appName:String(a)});if(r||(r=gY()),!r)throw J0.create("no-options");const s=yw.get(a);if(s){if(dm(r,s.options)&&dm(n,s.config))return s;throw J0.create("duplicate-app",{appName:a})}const i=new che(a);for(const c of f6.values())i.addComponent(c);const o=new n0e(r,n,i);return yw.set(a,o),o}function zS(e=A6){const t=yw.get(e);if(!t&&e===A6&&gY())return pD();if(!t)throw J0.create("no-app",{appName:e});return t}function V7(){return Array.from(yw.values())}function Ru(e,t,r){let n=e0e[e]??e;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const i=[`Unable to register library "${n}" with version "${t}":`];a&&i.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&i.push("and"),s&&i.push(`version name "${t}" contains illegal characters (whitespace or "/")`),fh.warn(i.join(" "));return}Am(new Ah(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0e="firebase-heartbeat-database",s0e=1,ww="firebase-heartbeat-store";let bj=null;function wY(){return bj||(bj=whe(a0e,s0e,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(ww)}catch(r){console.warn(r)}}}}).catch(e=>{throw J0.create("idb-open",{originalErrorMessage:e.message})})),bj}async function i0e(e){try{const r=(await wY()).transaction(ww),n=await r.objectStore(ww).get(EY(e));return await r.done,n}catch(t){if(t instanceof Ud)fh.warn(t.message);else{const r=J0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});fh.warn(r.message)}}}async function z7(e,t){try{const n=(await wY()).transaction(ww,"readwrite");await n.objectStore(ww).put(t,EY(e)),await n.done}catch(r){if(r instanceof Ud)fh.warn(r.message);else{const n=J0.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});fh.warn(n.message)}}}function EY(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0e=1024,l0e=30;class c0e{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new d0e(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=$7();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>l0e){const i=A0e(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){fh.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=$7(),{heartbeatsToSend:n,unsentEntries:a}=u0e(this._heartbeatsCache.heartbeats),s=F5(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return fh.warn(r),""}}}function $7(){return new Date().toISOString().substring(0,10)}function u0e(e,t=o0e){const r=[];let n=e.slice();for(const a of e){const s=r.find(i=>i.agent===a.agent);if(s){if(s.dates.push(a.date),G7(r)>t){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),G7(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class d0e{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yfe()?Jfe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await i0e(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return z7(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return z7(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function G7(e){return F5(JSON.stringify({version:2,heartbeats:e})).length}function A0e(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0e(e){Am(new Ah("platform-logger",t=>new _he(t),"PRIVATE")),Am(new Ah("heartbeat",t=>new c0e(t),"PRIVATE")),Ru(d6,Q7,e),Ru(d6,Q7,"esm2020"),Ru("fire-js","")}f0e("");function CY(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const h0e=CY,_Y=new y2("auth","Firebase",CY());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5=new hD("@firebase/auth");function m0e(e,...t){O5.logLevel<=kn.WARN&&O5.warn(`Auth (${_g}): ${e}`,...t)}function z_(e,...t){O5.logLevel<=kn.ERROR&&O5.error(`Auth (${_g}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(e,...t){throw gD(e,...t)}function zA(e,...t){return gD(e,...t)}function NY(e,t,r){const n={...h0e(),[t]:r};return new y2("auth","Firebase",n).create(t,{appName:e.name})}function Z0(e){return NY(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gD(e,...t){if(typeof e!="string"){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return _Y.create(e,...t)}function Vr(e,t,...r){if(!e)throw gD(t,...r)}function Wf(e){const t="INTERNAL ASSERTION FAILED: "+e;throw z_(t),new Error(t)}function hh(e,t){e||Wf(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h6(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function p0e(){return K7()==="http:"||K7()==="https:"}function K7(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0e(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(p0e()||Kfe()||"connection"in navigator)?navigator.onLine:!0}function x0e(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(t,r){this.shortDelay=t,this.longDelay=r,hh(r>t,"Short delay should be less than long delay!"),this.isMobile=zfe()||qfe()}get(){return g0e()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(e,t){hh(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SY{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0e=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],y0e=new C2(3e4,6e4);function Tm(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function jh(e,t,r,n,a={}){return kY(e,a,async()=>{let s={},i={};n&&(t==="GET"?i=n:s={body:JSON.stringify(n)});const o=w2({key:e.config.apiKey,...i}).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const u={method:t,headers:c,...s};return Gfe()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&Bh(e.emulatorConfig.host)&&(u.credentials="include"),SY.fetch()(await BY(e,e.config.apiHost,r,o),u)})}async function kY(e,t,r){e._canInitEmulator=!1;const n={...v0e,...t};try{const a=new E0e(e),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw fC(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw fC(e,"credential-already-in-use",i);if(c==="EMAIL_EXISTS")throw fC(e,"email-already-in-use",i);if(c==="USER_DISABLED")throw fC(e,"user-disabled",i);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw NY(e,d,u);Rd(e,d)}}catch(a){if(a instanceof Ud)throw a;Rd(e,"network-request-failed",{message:String(a)})}}async function $S(e,t,r,n,a={}){const s=await jh(e,t,r,n,a);return"mfaPendingCredential"in s&&Rd(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function BY(e,t,r,n){const a=`${t}${r}?${n}`,s=e,i=s.config.emulator?xD(e.config,a):`${e.config.apiScheme}://${a}`;return b0e.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(i).toString():i}function w0e(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class E0e{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(zA(this.auth,"network-request-failed")),y0e.get())})}}function fC(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=zA(e,t,n);return a.customData._tokenResponse=r,a}function q7(e){return e!==void 0&&e.enterprise!==void 0}class C0e{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return w0e(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function _0e(e,t){return jh(e,"GET","/v2/recaptchaConfig",Tm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N0e(e,t){return jh(e,"POST","/v1/accounts:delete",t)}async function D5(e,t){return jh(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function S0e(e,t=!1){const r=Xn(e),n=await r.getIdToken(t),a=vD(n);Vr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:Gy(yj(a.auth_time)),issuedAtTime:Gy(yj(a.iat)),expirationTime:Gy(yj(a.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function yj(e){return Number(e)*1e3}function vD(e){const[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return z_("JWT malformed, contained fewer than 3 sections"),null;try{const a=mY(r);return a?JSON.parse(a):(z_("Failed to decode base64 JWT payload"),null)}catch(a){return z_("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function W7(e){const t=vD(e);return Vr(t,"internal-error"),Vr(typeof t.exp<"u","internal-error"),Vr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ew(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof Ud&&k0e(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function k0e({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0e{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gy(this.lastLoginAt),this.creationTime=Gy(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P5(e){var f;const t=e.auth,r=await e.getIdToken(),n=await Ew(e,D5(t,{idToken:r}));Vr(n==null?void 0:n.users.length,t,"internal-error");const a=n.users[0];e._notifyReloadListener(a);const s=(f=a.providerUserInfo)!=null&&f.length?jY(a.providerUserInfo):[],i=T0e(e.providerData,s),o=e.isAnonymous,c=!(e.email&&a.passwordHash)&&!(i!=null&&i.length),u=o?c:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new m6(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(e,d)}async function j0e(e){const t=Xn(e);await P5(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function T0e(e,t){return[...e.filter(n=>!t.some(a=>a.providerId===n.providerId)),...t]}function jY(e){return e.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I0e(e,t){const r=await kY(e,{},async()=>{const n=w2({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:s}=e.config,i=await BY(e,a,"/v1/token",`key=${s}`),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:n};return e.emulatorConfig&&Bh(e.emulatorConfig.host)&&(c.credentials="include"),SY.fetch()(i,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function F0e(e,t){return jh(e,"POST","/v2/accounts:revokeToken",Tm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Vr(t.idToken,"internal-error"),Vr(typeof t.idToken<"u","internal-error"),Vr(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):W7(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){Vr(t.length!==0,"internal-error");const r=W7(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Vr(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await I0e(t,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,i=new mv;return n&&(Vr(typeof n=="string","internal-error",{appName:t}),i.refreshToken=n),a&&(Vr(typeof a=="string","internal-error",{appName:t}),i.accessToken=a),s&&(Vr(typeof s=="number","internal-error",{appName:t}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new mv,this.toJSON())}_performRefresh(){return Wf("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(e,t){Vr(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class _d{constructor({uid:t,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new B0e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new m6(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const r=await Ew(this,this.stsTokenManager.getToken(this.auth,t));return Vr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return S0e(this,t)}reload(){return j0e(this)}_assign(t){this!==t&&(Vr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new _d({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){Vr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await P5(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Tc(this.auth.app))return Promise.reject(Z0(this.auth));const t=await this.getIdToken();return await Ew(this,N0e(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,i=r.photoURL??void 0,o=r.tenantId??void 0,c=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:f,emailVerified:h,isAnonymous:p,providerData:g,stsTokenManager:x}=r;Vr(f&&x,t,"internal-error");const b=mv.fromJSON(this.name,x);Vr(typeof f=="string",t,"internal-error"),v0(n,t.name),v0(a,t.name),Vr(typeof h=="boolean",t,"internal-error"),Vr(typeof p=="boolean",t,"internal-error"),v0(s,t.name),v0(i,t.name),v0(o,t.name),v0(c,t.name),v0(u,t.name),v0(d,t.name);const y=new _d({uid:f,auth:t,email:a,emailVerified:h,displayName:n,isAnonymous:p,photoURL:i,phoneNumber:s,tenantId:o,stsTokenManager:b,createdAt:u,lastLoginAt:d});return g&&Array.isArray(g)&&(y.providerData=g.map(w=>({...w}))),c&&(y._redirectEventId=c),y}static async _fromIdTokenResponse(t,r,n=!1){const a=new mv;a.updateFromServerResponse(r);const s=new _d({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:n});return await P5(s),s}static async _fromGetAccountInfoResponse(t,r,n){const a=r.users[0];Vr(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?jY(a.providerUserInfo):[],i=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),o=new mv;o.updateFromIdToken(n);const c=new _d({uid:a.localId,auth:t,stsTokenManager:o,isAnonymous:i}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new m6(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7=new Map;function Xf(e){hh(e instanceof Function,"Expected a class definition");let t=X7.get(e);return t?(hh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,X7.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TY{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}TY.type="NONE";const Y7=TY;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(e,t,r){return`firebase:${e}:${t}:${r}`}class pv{constructor(t,r,n){this.persistence=t,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=$_(this.userKey,a.apiKey,s),this.fullPersistenceKey=$_("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await D5(this.auth,{idToken:t}).catch(()=>{});return r?_d._fromGetAccountInfoResponse(this.auth,r,t):null}return _d._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new pv(Xf(Y7),t,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||Xf(Y7);const i=$_(n,t.config.apiKey,t.name);let o=null;for(const u of r)try{const d=await u._get(i);if(d){let f;if(typeof d=="string"){const h=await D5(t,{idToken:d}).catch(()=>{});if(!h)break;f=await _d._fromGetAccountInfoResponse(t,h,d)}else f=_d._fromJSON(t,d);u!==s&&(o=f),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new pv(s,t,n):(s=c[0],o&&await s._set(i,o.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(i)}catch{}})),new pv(s,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J7(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(DY(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(IY(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(RY(t))return"Blackberry";if(LY(t))return"Webos";if(FY(t))return"Safari";if((t.includes("chrome/")||OY(t))&&!t.includes("edge/"))return"Chrome";if(PY(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function IY(e=nl()){return/firefox\//i.test(e)}function FY(e=nl()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function OY(e=nl()){return/crios\//i.test(e)}function DY(e=nl()){return/iemobile/i.test(e)}function PY(e=nl()){return/android/i.test(e)}function RY(e=nl()){return/blackberry/i.test(e)}function LY(e=nl()){return/webos/i.test(e)}function bD(e=nl()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function O0e(e=nl()){var t;return bD(e)&&!!((t=window.navigator)!=null&&t.standalone)}function D0e(){return Wfe()&&document.documentMode===10}function MY(e=nl()){return bD(e)||PY(e)||LY(e)||RY(e)||/windows phone/i.test(e)||DY(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UY(e,t=[]){let r;switch(e){case"Browser":r=J7(nl());break;case"Worker":r=`${J7(nl())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${_g}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0e{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const n=s=>new Promise((i,o)=>{try{const c=t(s);i(c)}catch(c){o(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R0e(e,t={}){return jh(e,"GET","/v2/passwordPolicy",Tm(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0e=6;class M0e{constructor(t){var n;const r=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??L0e,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=t.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,r),this.validatePasswordCharacterOptions(t,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(t,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=t.length>=n),a&&(r.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<t.length;a++)n=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0e{constructor(t,r,n,a){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Z7(this),this.idTokenSubscription=new Z7(this),this.beforeStateQueue=new P0e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_Y,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=Xf(r)),this._initializationPromise=this.queue(async()=>{var n,a,s;if(!this._deleted&&(this.persistenceManager=await pv.create(this,t),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await D5(this,{idToken:t}),n=await _d._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(Tc(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(t);(!i||i===o)&&(c!=null&&c.user)&&(n=c.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Vr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await P5(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=x0e()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Tc(this.app))return Promise.reject(Z0(this));const r=t?Xn(t):null;return r&&Vr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&Vr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Tc(this.app)?Promise.reject(Z0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Tc(this.app)?Promise.reject(Z0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xf(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await R0e(this),r=new M0e(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new y2("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await F0e(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,r){const n=await this.getOrInitRedirectPersistenceManager(r);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&Xf(t)||this._popupRedirectResolver;Vr(r,this,"argument-error"),this.redirectPersistenceManager=await pv.create(this,[Xf(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===t?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Vr(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const c=t.addObserver(r,n,a);return()=>{i=!0,c()}}else{const c=t.addObserver(r);return()=>{i=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Vr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=UY(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var r;if(Tc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return t!=null&&t.error&&m0e(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ng(e){return Xn(e)}class Z7{constructor(t){this.auth=t,this.observer=null,this.addObserver=nhe(r=>this.observer=r)}get next(){return Vr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Q0e(e){GS=e}function QY(e){return GS.loadJS(e)}function H0e(){return GS.recaptchaEnterpriseScript}function V0e(){return GS.gapiScript}function z0e(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class $0e{constructor(){this.enterprise=new G0e}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class G0e{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const K0e="recaptcha-enterprise",HY="NO_RECAPTCHA";class q0e{constructor(t){this.type=K0e,this.auth=Ng(t)}async verify(t="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,o)=>{_0e(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new C0e(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,i(u.siteKey)}}).catch(c=>{o(c)})})}function a(s,i,o){const c=window.grecaptcha;q7(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:t}).then(u=>{i(u)}).catch(()=>{i(HY)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $0e().execute("siteKey",{action:"verify"}):new Promise((s,i)=>{n(this.auth).then(o=>{if(!r&&q7(window.grecaptcha))a(o,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let c=H0e();c.length!==0&&(c+=o),QY(c).then(()=>{a(o,s,i)}).catch(u=>{i(u)})}}).catch(o=>{i(o)})})}}async function e9(e,t,r,n=!1,a=!1){const s=new q0e(e);let i;if(a)i=HY;else try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const o={...t};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function p6(e,t,r,n,a){var s;if((s=e._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await e9(e,t,r,r==="getOobCode");return n(e,i)}else return n(e,t).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await e9(e,t,r,r==="getOobCode");return n(e,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0e(e,t){const r=E2(e,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(dm(s,t??{}))return a;Rd(a,"already-initialized")}return r.initialize({options:t})}function X0e(e,t){const r=(t==null?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Xf);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function Y0e(e,t,r){const n=Ng(e);Vr(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const a=!1,s=VY(t),{host:i,port:o}=J0e(t),c=o===null?"":`:${o}`,u={url:`${s}//${i}${c}/`},d=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){Vr(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Vr(dm(u,n.config.emulator)&&dm(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Bh(i)?(HS(`${s}//${i}${c}`),VS("Auth",!0)):Z0e()}function VY(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function J0e(e){const t=VY(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:t9(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:t9(i)}}}function t9(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Z0e(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return Wf("not implemented")}_getIdTokenResponse(t){return Wf("not implemented")}_linkToIdToken(t,r){return Wf("not implemented")}_getReauthenticationResolver(t){return Wf("not implemented")}}async function eme(e,t){return jh(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tme(e,t){return $S(e,"POST","/v1/accounts:signInWithPassword",Tm(e,t))}async function rme(e,t){return jh(e,"POST","/v1/accounts:sendOobCode",Tm(e,t))}async function nme(e,t){return rme(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ame(e,t){return $S(e,"POST","/v1/accounts:signInWithEmailLink",Tm(e,t))}async function sme(e,t){return $S(e,"POST","/v1/accounts:signInWithEmailLink",Tm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw extends yD{constructor(t,r,n,a=null){super("password",n),this._email=t,this._password=r,this._tenantId=a}static _fromEmailAndPassword(t,r){return new Cw(t,r,"password")}static _fromEmailAndCode(t,r,n=null){return new Cw(t,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return p6(t,r,"signInWithPassword",tme);case"emailLink":return ame(t,{email:this._email,oobCode:this._password});default:Rd(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return p6(t,n,"signUpPassword",eme);case"emailLink":return sme(t,{idToken:r,email:this._email,oobCode:this._password});default:Rd(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gv(e,t){return $S(e,"POST","/v1/accounts:signInWithIdp",Tm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ime="http://localhost";class ag extends yD{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new ag(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):Rd("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const i=new ag(n,a);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(t){const r=this.buildRequest();return gv(t,r)}_linkToIdToken(t,r){const n=this.buildRequest();return n.idToken=r,gv(t,n)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,gv(t,r)}buildRequest(){const t={requestUri:ime,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=w2(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ome(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lme(e){const t=Ey(Cy(e)).link,r=t?Ey(Cy(t)).deep_link_id:null,n=Ey(Cy(e)).deep_link_id;return(n?Ey(Cy(n)).link:null)||n||r||t||e}class wD{constructor(t){const r=Ey(Cy(t)),n=r.apiKey??null,a=r.oobCode??null,s=ome(r.mode??null);Vr(n&&a&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(t){const r=lme(t);try{return new wD(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(){this.providerId=S1.PROVIDER_ID}static credential(t,r){return Cw._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const n=wD.parseLink(r);return Vr(n,"argument-error"),Cw._fromEmailAndCode(t,n.code,n.tenantId)}}S1.PROVIDER_ID="password";S1.EMAIL_PASSWORD_SIGN_IN_METHOD="password";S1.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zY{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2 extends zY{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0 extends _2{constructor(){super("facebook.com")}static credential(t){return ag._fromParams({providerId:D0.PROVIDER_ID,signInMethod:D0.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return D0.credentialFromTaggedObject(t)}static credentialFromError(t){return D0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return D0.credential(t.oauthAccessToken)}catch{return null}}}D0.FACEBOOK_SIGN_IN_METHOD="facebook.com";D0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0 extends _2{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return ag._fromParams({providerId:P0.PROVIDER_ID,signInMethod:P0.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return P0.credentialFromTaggedObject(t)}static credentialFromError(t){return P0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return P0.credential(r,n)}catch{return null}}}P0.GOOGLE_SIGN_IN_METHOD="google.com";P0.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0 extends _2{constructor(){super("github.com")}static credential(t){return ag._fromParams({providerId:R0.PROVIDER_ID,signInMethod:R0.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return R0.credentialFromTaggedObject(t)}static credentialFromError(t){return R0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return R0.credential(t.oauthAccessToken)}catch{return null}}}R0.GITHUB_SIGN_IN_METHOD="github.com";R0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0 extends _2{constructor(){super("twitter.com")}static credential(t,r){return ag._fromParams({providerId:L0.PROVIDER_ID,signInMethod:L0.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return L0.credentialFromTaggedObject(t)}static credentialFromError(t){return L0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return L0.credential(r,n)}catch{return null}}}L0.TWITTER_SIGN_IN_METHOD="twitter.com";L0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,a=!1){const s=await _d._fromIdTokenResponse(t,n,a),i=r9(n);return new Mv({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);const a=r9(n);return new Mv({user:t,providerId:a,_tokenResponse:n,operationType:r})}}function r9(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5 extends Ud{constructor(t,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,R5.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,r,n,a){return new R5(t,r,n,a)}}function $Y(e,t,r,n){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?R5._fromErrorAndOperation(e,s,t,n):s})}async function cme(e,t,r=!1){const n=await Ew(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return Mv._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ume(e,t,r=!1){const{auth:n}=e;if(Tc(n.app))return Promise.reject(Z0(n));const a="reauthenticate";try{const s=await Ew(e,$Y(n,a,t,e),r);Vr(s.idToken,n,"internal-error");const i=vD(s.idToken);Vr(i,n,"internal-error");const{sub:o}=i;return Vr(e.uid===o,n,"user-mismatch"),Mv._forOperation(e,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Rd(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GY(e,t,r=!1){if(Tc(e.app))return Promise.reject(Z0(e));const n="signIn",a=await $Y(e,n,t),s=await Mv._fromIdTokenResponse(e,n,a);return r||await e._updateCurrentUser(s.user),s}async function dme(e,t){return GY(Ng(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ame(e){const t=Ng(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function fme(e,t,r){const n=Ng(e);await p6(n,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",nme)}function hme(e,t,r){return Tc(e.app)?Promise.reject(Z0(e)):dme(Xn(e),S1.credential(t,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Ame(e),n})}function mme(e,t,r,n){return Xn(e).onIdTokenChanged(t,r,n)}function pme(e,t,r){return Xn(e).beforeAuthStateChanged(t,r)}function KY(e,t,r,n){return Xn(e).onAuthStateChanged(t,r,n)}function gme(e){return Xn(e).signOut()}const L5="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qY{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(L5,"1"),this.storage.removeItem(L5),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xme=1e3,vme=10;class WY extends qY{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=MY(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&t(r,a,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((i,o,c)=>{this.notifyListeners(i,c)});return}const n=t.key;r?this.detachListener():this.stopPolling();const a=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);D0e()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,vme):a()}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},xme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}WY.type="LOCAL";const bme=WY;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XY extends qY{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}XY.type="SESSION";const YY=XY;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yme(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(a=>a.isListeningto(t));if(r)return r;const n=new KS(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:n,eventType:a,data:s}=r.data,i=this.handlersMap[a];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const o=Array.from(i).map(async u=>u(r.origin,s)),c=await yme(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}KS.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wme{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,i;return new Promise((o,c)=>{const u=ED("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(h.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:t,eventId:u,data:r},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(){return window}function Eme(e){$A().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JY(){return typeof $A().WorkerGlobalScope<"u"&&typeof $A().importScripts=="function"}async function Cme(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _me(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function Nme(){return JY()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZY="firebaseLocalStorageDb",Sme=1,M5="firebaseLocalStorage",eJ="fbase_key";class N2{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function qS(e,t){return e.transaction([M5],t?"readwrite":"readonly").objectStore(M5)}function kme(){const e=indexedDB.deleteDatabase(ZY);return new N2(e).toPromise()}function g6(){const e=indexedDB.open(ZY,Sme);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(M5,{keyPath:eJ})}catch(a){r(a)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(M5)?t(n):(n.close(),await kme(),t(await g6()))})})}async function n9(e,t,r){const n=qS(e,!0).put({[eJ]:t,value:r});return new N2(n).toPromise()}async function Bme(e,t){const r=qS(e,!1).get(t),n=await new N2(r).toPromise();return n===void 0?null:n.value}function a9(e,t){const r=qS(e,!0).delete(t);return new N2(r).toPromise()}const jme=800,Tme=3;class tJ{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await g6(),this.db)}async _withRetries(t){let r=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(r++>Tme)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JY()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=KS._getInstance(Nme()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await Cme(),!this.activeServiceWorker)return;this.sender=new wme(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(r=t[0])!=null&&r.fulfilled&&(n=t[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||_me()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await g6();return await n9(t,L5,"1"),await a9(t,L5),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>n9(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(n=>Bme(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>a9(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const s=qS(a,!1).getAll();return new N2(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(t.length!==0)for(const{fbase_key:a,value:s}of t)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tJ.type="LOCAL";const Ime=tJ;new C2(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fme(e,t){return t?Xf(t):(Vr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD extends yD{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return gv(t,this._buildIdpRequest())}_linkToIdToken(t,r){return gv(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return gv(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function Ome(e){return GY(e.auth,new CD(e),e.bypassAuthState)}function Dme(e){const{auth:t,user:r}=e;return Vr(r,t,"internal-error"),ume(r,new CD(e),e.bypassAuthState)}async function Pme(e){const{auth:t,user:r}=e;return Vr(r,t,"internal-error"),cme(r,new CD(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rJ{constructor(t,r,n,a,s=!1){this.auth=t,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:i,type:o}=t;if(i){this.reject(i);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Ome;case"linkViaPopup":case"linkViaRedirect":return Pme;case"reauthViaPopup":case"reauthViaRedirect":return Dme;default:Rd(this.auth,"internal-error")}}resolve(t){hh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){hh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rme=new C2(2e3,1e4);class tv extends rJ{constructor(t,r,n,a,s){super(t,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,tv.currentPopupAction&&tv.currentPopupAction.cancel(),tv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Vr(t,this.auth,"internal-error"),t}async onExecution(){hh(this.filter.length===1,"Popup operations only handle one event");const t=ED();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(zA(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(zA(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,tv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zA(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Rme.get())};t()}}tv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lme="pendingRedirect",G_=new Map;class Mme extends rJ{constructor(t,r,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let t=G_.get(this.auth._key());if(!t){try{const n=await Ume(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(r){t=()=>Promise.reject(r)}G_.set(this.auth._key(),t)}return this.bypassAuthState||G_.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ume(e,t){const r=Vme(t),n=Hme(e);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function Qme(e,t){G_.set(e._key(),t)}function Hme(e){return Xf(e._redirectPersistence)}function Vme(e){return $_(Lme,e.config.apiKey,e.name)}async function zme(e,t,r=!1){if(Tc(e.app))return Promise.reject(Z0(e));const n=Ng(e),a=Fme(n,t),i=await new Mme(n,a,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,t)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $me=600*1e3;class Gme{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(r=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Kme(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var n;if(t.error&&!nJ(t)){const a=((n=t.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(zA(this.auth,a))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const n=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=$me&&this.cachedEventUids.clear(),this.cachedEventUids.has(s9(t))}saveEventToCache(t){this.cachedEventUids.add(s9(t)),this.lastProcessedEventTime=Date.now()}}function s9(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function nJ({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Kme(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nJ(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qme(e,t={}){return jh(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wme=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xme=/^https?/;async function Yme(e){if(e.config.emulator)return;const{authorizedDomains:t}=await qme(e);for(const r of t)try{if(Jme(r))return}catch{}Rd(e,"unauthorized-domain")}function Jme(e){const t=h6(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return i.hostname===""&&n===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!Xme.test(r))return!1;if(Wme.test(e))return n===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zme=new C2(3e4,6e4);function i9(){const e=$A().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function epe(e){return new Promise((t,r)=>{var a,s,i;function n(){i9(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{i9(),r(zA(e,"network-request-failed"))},timeout:Zme.get()})}if((s=(a=$A().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((i=$A().gapi)!=null&&i.load)n();else{const o=z0e("iframefcb");return $A()[o]=()=>{gapi.load?n():r(zA(e,"network-request-failed"))},QY(`${V0e()}?onload=${o}`).catch(c=>r(c))}}).catch(t=>{throw K_=null,t})}let K_=null;function tpe(e){return K_=K_||epe(e),K_}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rpe=new C2(5e3,15e3),npe="__/auth/iframe",ape="emulator/auth/iframe",spe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ipe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ope(e){const t=e.config;Vr(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?xD(t,ape):`https://${e.config.authDomain}/${npe}`,n={apiKey:t.apiKey,appName:e.name,v:_g},a=ipe.get(e.config.apiHost);a&&(n.eid=a);const s=e._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${w2(n).slice(1)}`}async function lpe(e){const t=await tpe(e),r=$A().gapi;return Vr(r,e,"internal-error"),t.open({where:document.body,url:ope(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:spe,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const i=zA(e,"network-request-failed"),o=$A().setTimeout(()=>{s(i)},rpe.get());function c(){$A().clearTimeout(o),a(n)}n.ping(c).then(c,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cpe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},upe=500,dpe=600,Ape="_blank",fpe="http://localhost";class o9{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hpe(e,t,r,n=upe,a=dpe){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const c={...cpe,width:n.toString(),height:a.toString(),top:s,left:i},u=nl().toLowerCase();r&&(o=OY(u)?Ape:r),IY(u)&&(t=t||fpe,c.scrollbars="yes");const d=Object.entries(c).reduce((h,[p,g])=>`${h}${p}=${g},`,"");if(O0e(u)&&o!=="_self")return mpe(t||"",o),new o9(null);const f=window.open(t||"",o,d);Vr(f,e,"popup-blocked");try{f.focus()}catch{}return new o9(f)}function mpe(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ppe="__/auth/handler",gpe="emulator/auth/handler",xpe=encodeURIComponent("fac");async function l9(e,t,r,n,a,s){Vr(e.config.authDomain,e,"auth-domain-config-required"),Vr(e.config.apiKey,e,"invalid-api-key");const i={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:_g,eventId:a};if(t instanceof zY){t.setDefaultLanguage(e.languageCode),i.providerId=t.providerId||"",rhe(t.getCustomParameters())||(i.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,f]of Object.entries({}))i[d]=f}if(t instanceof _2){const d=t.getScopes().filter(f=>f!=="");d.length>0&&(i.scopes=d.join(","))}e.tenantId&&(i.tid=e.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const c=await e._getAppCheckToken(),u=c?`#${xpe}=${encodeURIComponent(c)}`:"";return`${vpe(e)}?${w2(o).slice(1)}${u}`}function vpe({config:e}){return e.emulator?xD(e,gpe):`https://${e.authDomain}/${ppe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj="webStorageSupport";class bpe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YY,this._completeRedirectFn=zme,this._overrideRedirectResult=Qme}async _openPopup(t,r,n,a){var i;hh((i=this.eventManagers[t._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await l9(t,r,n,h6(),a);return hpe(t,s,ED())}async _openRedirect(t,r,n,a){await this._originValidation(t);const s=await l9(t,r,n,h6(),a);return Eme(s),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(hh(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(t);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(t){const r=await lpe(t),n=new Gme(t);return r.register("authEvent",a=>(Vr(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=r,n}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(wj,{type:wj},a=>{var i;const s=(i=a==null?void 0:a[0])==null?void 0:i[wj];s!==void 0&&r(!!s),Rd(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Yme(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return MY()||FY()||bD()}}const ype=bpe;var c9="@firebase/auth",u9="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wpe{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Vr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Epe(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Cpe(e){Am(new Ah("auth",(t,{options:r})=>{const n=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;Vr(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:i,authDomain:o,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UY(e)},u=new U0e(n,a,s,c);return X0e(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),Am(new Ah("auth-internal",t=>{const r=Ng(t.getProvider("auth").getImmediate());return(n=>new wpe(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ru(c9,u9,Epe(e)),Ru(c9,u9,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _pe=300,Npe=xY("authIdTokenMaxAge")||_pe;let d9=null;const Spe=e=>async t=>{const r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Npe)return;const a=r==null?void 0:r.token;d9!==a&&(d9=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function aJ(e=zS()){const t=E2(e,"auth");if(t.isInitialized())return t.getImmediate();const r=W0e(e,{popupRedirectResolver:ype,persistence:[Ime,bme,YY]}),n=xY("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=Spe(s.toString());pme(r,i,()=>i(r.currentUser)),mme(r,o=>i(o))}}const a=pY("auth");return a&&Y0e(r,`http://${a}`),r}function kpe(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}Q0e({loadJS(e){return new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=a=>{const s=zA("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",kpe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Cpe("Browser");var Bpe="firebase",jpe="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ru(Bpe,jpe,"app");var A9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var em,sJ;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(E,N){function j(){}j.prototype=N.prototype,E.D=N.prototype,E.prototype=new j,E.prototype.constructor=E,E.C=function(R,D,O){for(var L=Array(arguments.length-2),M=2;M<arguments.length;M++)L[M-2]=arguments[M];return N.prototype[D].apply(R,L)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(E,N,j){j||(j=0);var R=Array(16);if(typeof N=="string")for(var D=0;16>D;++D)R[D]=N.charCodeAt(j++)|N.charCodeAt(j++)<<8|N.charCodeAt(j++)<<16|N.charCodeAt(j++)<<24;else for(D=0;16>D;++D)R[D]=N[j++]|N[j++]<<8|N[j++]<<16|N[j++]<<24;N=E.g[0],j=E.g[1],D=E.g[2];var O=E.g[3],L=N+(O^j&(D^O))+R[0]+3614090360&4294967295;N=j+(L<<7&4294967295|L>>>25),L=O+(D^N&(j^D))+R[1]+3905402710&4294967295,O=N+(L<<12&4294967295|L>>>20),L=D+(j^O&(N^j))+R[2]+606105819&4294967295,D=O+(L<<17&4294967295|L>>>15),L=j+(N^D&(O^N))+R[3]+3250441966&4294967295,j=D+(L<<22&4294967295|L>>>10),L=N+(O^j&(D^O))+R[4]+4118548399&4294967295,N=j+(L<<7&4294967295|L>>>25),L=O+(D^N&(j^D))+R[5]+1200080426&4294967295,O=N+(L<<12&4294967295|L>>>20),L=D+(j^O&(N^j))+R[6]+2821735955&4294967295,D=O+(L<<17&4294967295|L>>>15),L=j+(N^D&(O^N))+R[7]+4249261313&4294967295,j=D+(L<<22&4294967295|L>>>10),L=N+(O^j&(D^O))+R[8]+1770035416&4294967295,N=j+(L<<7&4294967295|L>>>25),L=O+(D^N&(j^D))+R[9]+2336552879&4294967295,O=N+(L<<12&4294967295|L>>>20),L=D+(j^O&(N^j))+R[10]+4294925233&4294967295,D=O+(L<<17&4294967295|L>>>15),L=j+(N^D&(O^N))+R[11]+2304563134&4294967295,j=D+(L<<22&4294967295|L>>>10),L=N+(O^j&(D^O))+R[12]+1804603682&4294967295,N=j+(L<<7&4294967295|L>>>25),L=O+(D^N&(j^D))+R[13]+4254626195&4294967295,O=N+(L<<12&4294967295|L>>>20),L=D+(j^O&(N^j))+R[14]+2792965006&4294967295,D=O+(L<<17&4294967295|L>>>15),L=j+(N^D&(O^N))+R[15]+1236535329&4294967295,j=D+(L<<22&4294967295|L>>>10),L=N+(D^O&(j^D))+R[1]+4129170786&4294967295,N=j+(L<<5&4294967295|L>>>27),L=O+(j^D&(N^j))+R[6]+3225465664&4294967295,O=N+(L<<9&4294967295|L>>>23),L=D+(N^j&(O^N))+R[11]+643717713&4294967295,D=O+(L<<14&4294967295|L>>>18),L=j+(O^N&(D^O))+R[0]+3921069994&4294967295,j=D+(L<<20&4294967295|L>>>12),L=N+(D^O&(j^D))+R[5]+3593408605&4294967295,N=j+(L<<5&4294967295|L>>>27),L=O+(j^D&(N^j))+R[10]+38016083&4294967295,O=N+(L<<9&4294967295|L>>>23),L=D+(N^j&(O^N))+R[15]+3634488961&4294967295,D=O+(L<<14&4294967295|L>>>18),L=j+(O^N&(D^O))+R[4]+3889429448&4294967295,j=D+(L<<20&4294967295|L>>>12),L=N+(D^O&(j^D))+R[9]+568446438&4294967295,N=j+(L<<5&4294967295|L>>>27),L=O+(j^D&(N^j))+R[14]+3275163606&4294967295,O=N+(L<<9&4294967295|L>>>23),L=D+(N^j&(O^N))+R[3]+4107603335&4294967295,D=O+(L<<14&4294967295|L>>>18),L=j+(O^N&(D^O))+R[8]+1163531501&4294967295,j=D+(L<<20&4294967295|L>>>12),L=N+(D^O&(j^D))+R[13]+2850285829&4294967295,N=j+(L<<5&4294967295|L>>>27),L=O+(j^D&(N^j))+R[2]+4243563512&4294967295,O=N+(L<<9&4294967295|L>>>23),L=D+(N^j&(O^N))+R[7]+1735328473&4294967295,D=O+(L<<14&4294967295|L>>>18),L=j+(O^N&(D^O))+R[12]+2368359562&4294967295,j=D+(L<<20&4294967295|L>>>12),L=N+(j^D^O)+R[5]+4294588738&4294967295,N=j+(L<<4&4294967295|L>>>28),L=O+(N^j^D)+R[8]+2272392833&4294967295,O=N+(L<<11&4294967295|L>>>21),L=D+(O^N^j)+R[11]+1839030562&4294967295,D=O+(L<<16&4294967295|L>>>16),L=j+(D^O^N)+R[14]+4259657740&4294967295,j=D+(L<<23&4294967295|L>>>9),L=N+(j^D^O)+R[1]+2763975236&4294967295,N=j+(L<<4&4294967295|L>>>28),L=O+(N^j^D)+R[4]+1272893353&4294967295,O=N+(L<<11&4294967295|L>>>21),L=D+(O^N^j)+R[7]+4139469664&4294967295,D=O+(L<<16&4294967295|L>>>16),L=j+(D^O^N)+R[10]+3200236656&4294967295,j=D+(L<<23&4294967295|L>>>9),L=N+(j^D^O)+R[13]+681279174&4294967295,N=j+(L<<4&4294967295|L>>>28),L=O+(N^j^D)+R[0]+3936430074&4294967295,O=N+(L<<11&4294967295|L>>>21),L=D+(O^N^j)+R[3]+3572445317&4294967295,D=O+(L<<16&4294967295|L>>>16),L=j+(D^O^N)+R[6]+76029189&4294967295,j=D+(L<<23&4294967295|L>>>9),L=N+(j^D^O)+R[9]+3654602809&4294967295,N=j+(L<<4&4294967295|L>>>28),L=O+(N^j^D)+R[12]+3873151461&4294967295,O=N+(L<<11&4294967295|L>>>21),L=D+(O^N^j)+R[15]+530742520&4294967295,D=O+(L<<16&4294967295|L>>>16),L=j+(D^O^N)+R[2]+3299628645&4294967295,j=D+(L<<23&4294967295|L>>>9),L=N+(D^(j|~O))+R[0]+4096336452&4294967295,N=j+(L<<6&4294967295|L>>>26),L=O+(j^(N|~D))+R[7]+1126891415&4294967295,O=N+(L<<10&4294967295|L>>>22),L=D+(N^(O|~j))+R[14]+2878612391&4294967295,D=O+(L<<15&4294967295|L>>>17),L=j+(O^(D|~N))+R[5]+4237533241&4294967295,j=D+(L<<21&4294967295|L>>>11),L=N+(D^(j|~O))+R[12]+1700485571&4294967295,N=j+(L<<6&4294967295|L>>>26),L=O+(j^(N|~D))+R[3]+2399980690&4294967295,O=N+(L<<10&4294967295|L>>>22),L=D+(N^(O|~j))+R[10]+4293915773&4294967295,D=O+(L<<15&4294967295|L>>>17),L=j+(O^(D|~N))+R[1]+2240044497&4294967295,j=D+(L<<21&4294967295|L>>>11),L=N+(D^(j|~O))+R[8]+1873313359&4294967295,N=j+(L<<6&4294967295|L>>>26),L=O+(j^(N|~D))+R[15]+4264355552&4294967295,O=N+(L<<10&4294967295|L>>>22),L=D+(N^(O|~j))+R[6]+2734768916&4294967295,D=O+(L<<15&4294967295|L>>>17),L=j+(O^(D|~N))+R[13]+1309151649&4294967295,j=D+(L<<21&4294967295|L>>>11),L=N+(D^(j|~O))+R[4]+4149444226&4294967295,N=j+(L<<6&4294967295|L>>>26),L=O+(j^(N|~D))+R[11]+3174756917&4294967295,O=N+(L<<10&4294967295|L>>>22),L=D+(N^(O|~j))+R[2]+718787259&4294967295,D=O+(L<<15&4294967295|L>>>17),L=j+(O^(D|~N))+R[9]+3951481745&4294967295,E.g[0]=E.g[0]+N&4294967295,E.g[1]=E.g[1]+(D+(L<<21&4294967295|L>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+O&4294967295}n.prototype.u=function(E,N){N===void 0&&(N=E.length);for(var j=N-this.blockSize,R=this.B,D=this.h,O=0;O<N;){if(D==0)for(;O<=j;)a(this,E,O),O+=this.blockSize;if(typeof E=="string"){for(;O<N;)if(R[D++]=E.charCodeAt(O++),D==this.blockSize){a(this,R),D=0;break}}else for(;O<N;)if(R[D++]=E[O++],D==this.blockSize){a(this,R),D=0;break}}this.h=D,this.o+=N},n.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var N=1;N<E.length-8;++N)E[N]=0;var j=8*this.o;for(N=E.length-8;N<E.length;++N)E[N]=j&255,j/=256;for(this.u(E),E=Array(16),N=j=0;4>N;++N)for(var R=0;32>R;R+=8)E[j++]=this.g[N]>>>R&255;return E};function s(E,N){var j=o;return Object.prototype.hasOwnProperty.call(j,E)?j[E]:j[E]=N(E)}function i(E,N){this.h=N;for(var j=[],R=!0,D=E.length-1;0<=D;D--){var O=E[D]|0;R&&O==N||(j[D]=O,R=!1)}this.g=j}var o={};function c(E){return-128<=E&&128>E?s(E,function(N){return new i([N|0],0>N?-1:0)}):new i([E|0],0>E?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return b(u(-E));for(var N=[],j=1,R=0;E>=j;R++)N[R]=E/j|0,j*=4294967296;return new i(N,0)}function d(E,N){if(E.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(E.charAt(0)=="-")return b(d(E.substring(1),N));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var j=u(Math.pow(N,8)),R=f,D=0;D<E.length;D+=8){var O=Math.min(8,E.length-D),L=parseInt(E.substring(D,D+O),N);8>O?(O=u(Math.pow(N,O)),R=R.j(O).add(u(L))):(R=R.j(j),R=R.add(u(L)))}return R}var f=c(0),h=c(1),p=c(16777216);e=i.prototype,e.m=function(){if(x(this))return-b(this).m();for(var E=0,N=1,j=0;j<this.g.length;j++){var R=this.i(j);E+=(0<=R?R:4294967296+R)*N,N*=4294967296}return E},e.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(g(this))return"0";if(x(this))return"-"+b(this).toString(E);for(var N=u(Math.pow(E,6)),j=this,R="";;){var D=B(j,N).g;j=y(j,D.j(N));var O=((0<j.g.length?j.g[0]:j.h)>>>0).toString(E);if(j=D,g(j))return O+R;for(;6>O.length;)O="0"+O;R=O+R}},e.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function g(E){if(E.h!=0)return!1;for(var N=0;N<E.g.length;N++)if(E.g[N]!=0)return!1;return!0}function x(E){return E.h==-1}e.l=function(E){return E=y(this,E),x(E)?-1:g(E)?0:1};function b(E){for(var N=E.g.length,j=[],R=0;R<N;R++)j[R]=~E.g[R];return new i(j,~E.h).add(h)}e.abs=function(){return x(this)?b(this):this},e.add=function(E){for(var N=Math.max(this.g.length,E.g.length),j=[],R=0,D=0;D<=N;D++){var O=R+(this.i(D)&65535)+(E.i(D)&65535),L=(O>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);R=L>>>16,O&=65535,L&=65535,j[D]=L<<16|O}return new i(j,j[j.length-1]&-2147483648?-1:0)};function y(E,N){return E.add(b(N))}e.j=function(E){if(g(this)||g(E))return f;if(x(this))return x(E)?b(this).j(b(E)):b(b(this).j(E));if(x(E))return b(this.j(b(E)));if(0>this.l(p)&&0>E.l(p))return u(this.m()*E.m());for(var N=this.g.length+E.g.length,j=[],R=0;R<2*N;R++)j[R]=0;for(R=0;R<this.g.length;R++)for(var D=0;D<E.g.length;D++){var O=this.i(R)>>>16,L=this.i(R)&65535,M=E.i(D)>>>16,J=E.i(D)&65535;j[2*R+2*D]+=L*J,w(j,2*R+2*D),j[2*R+2*D+1]+=O*J,w(j,2*R+2*D+1),j[2*R+2*D+1]+=L*M,w(j,2*R+2*D+1),j[2*R+2*D+2]+=O*M,w(j,2*R+2*D+2)}for(R=0;R<N;R++)j[R]=j[2*R+1]<<16|j[2*R];for(R=N;R<2*N;R++)j[R]=0;return new i(j,0)};function w(E,N){for(;(E[N]&65535)!=E[N];)E[N+1]+=E[N]>>>16,E[N]&=65535,N++}function _(E,N){this.g=E,this.h=N}function B(E,N){if(g(N))throw Error("division by zero");if(g(E))return new _(f,f);if(x(E))return N=B(b(E),N),new _(b(N.g),b(N.h));if(x(N))return N=B(E,b(N)),new _(b(N.g),N.h);if(30<E.g.length){if(x(E)||x(N))throw Error("slowDivide_ only works with positive integers.");for(var j=h,R=N;0>=R.l(E);)j=k(j),R=k(R);var D=I(j,1),O=I(R,1);for(R=I(R,2),j=I(j,2);!g(R);){var L=O.add(R);0>=L.l(E)&&(D=D.add(j),O=L),R=I(R,1),j=I(j,1)}return N=y(E,D.j(N)),new _(D,N)}for(D=f;0<=E.l(N);){for(j=Math.max(1,Math.floor(E.m()/N.m())),R=Math.ceil(Math.log(j)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),O=u(j),L=O.j(N);x(L)||0<L.l(E);)j-=R,O=u(j),L=O.j(N);g(O)&&(O=h),D=D.add(O),E=y(E,L)}return new _(D,E)}e.A=function(E){return B(this,E).h},e.and=function(E){for(var N=Math.max(this.g.length,E.g.length),j=[],R=0;R<N;R++)j[R]=this.i(R)&E.i(R);return new i(j,this.h&E.h)},e.or=function(E){for(var N=Math.max(this.g.length,E.g.length),j=[],R=0;R<N;R++)j[R]=this.i(R)|E.i(R);return new i(j,this.h|E.h)},e.xor=function(E){for(var N=Math.max(this.g.length,E.g.length),j=[],R=0;R<N;R++)j[R]=this.i(R)^E.i(R);return new i(j,this.h^E.h)};function k(E){for(var N=E.g.length+1,j=[],R=0;R<N;R++)j[R]=E.i(R)<<1|E.i(R-1)>>>31;return new i(j,E.h)}function I(E,N){var j=N>>5;N%=32;for(var R=E.g.length-j,D=[],O=0;O<R;O++)D[O]=0<N?E.i(O+j)>>>N|E.i(O+j+1)<<32-N:E.i(O+j);return new i(D,E.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,sJ=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,em=i}).apply(typeof A9<"u"?A9:typeof self<"u"?self:typeof window<"u"?window:{});var hC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var iJ,_y,oJ,q_,x6,lJ,cJ,uJ;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(F,re,le){return F==Array.prototype||F==Object.prototype||(F[re]=le.value),F};function r(F){F=[typeof globalThis=="object"&&globalThis,F,typeof window=="object"&&window,typeof self=="object"&&self,typeof hC=="object"&&hC];for(var re=0;re<F.length;++re){var le=F[re];if(le&&le.Math==Math)return le}throw Error("Cannot find global object")}var n=r(this);function a(F,re){if(re)e:{var le=n;F=F.split(".");for(var ve=0;ve<F.length-1;ve++){var ze=F[ve];if(!(ze in le))break e;le=le[ze]}F=F[F.length-1],ve=le[F],re=re(ve),re!=ve&&re!=null&&t(le,F,{configurable:!0,writable:!0,value:re})}}function s(F,re){F instanceof String&&(F+="");var le=0,ve=!1,ze={next:function(){if(!ve&&le<F.length){var lt=le++;return{value:re(lt,F[lt]),done:!1}}return ve=!0,{done:!0,value:void 0}}};return ze[Symbol.iterator]=function(){return ze},ze}a("Array.prototype.values",function(F){return F||function(){return s(this,function(re,le){return le})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function c(F){var re=typeof F;return re=re!="object"?re:F?Array.isArray(F)?"array":re:"null",re=="array"||re=="object"&&typeof F.length=="number"}function u(F){var re=typeof F;return re=="object"&&F!=null||re=="function"}function d(F,re,le){return F.call.apply(F.bind,arguments)}function f(F,re,le){if(!F)throw Error();if(2<arguments.length){var ve=Array.prototype.slice.call(arguments,2);return function(){var ze=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ze,ve),F.apply(re,ze)}}return function(){return F.apply(re,arguments)}}function h(F,re,le){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function p(F,re){var le=Array.prototype.slice.call(arguments,1);return function(){var ve=le.slice();return ve.push.apply(ve,arguments),F.apply(this,ve)}}function g(F,re){function le(){}le.prototype=re.prototype,F.aa=re.prototype,F.prototype=new le,F.prototype.constructor=F,F.Qb=function(ve,ze,lt){for(var Qt=Array(arguments.length-2),Fr=2;Fr<arguments.length;Fr++)Qt[Fr-2]=arguments[Fr];return re.prototype[ze].apply(ve,Qt)}}function x(F){const re=F.length;if(0<re){const le=Array(re);for(let ve=0;ve<re;ve++)le[ve]=F[ve];return le}return[]}function b(F,re){for(let le=1;le<arguments.length;le++){const ve=arguments[le];if(c(ve)){const ze=F.length||0,lt=ve.length||0;F.length=ze+lt;for(let Qt=0;Qt<lt;Qt++)F[ze+Qt]=ve[Qt]}else F.push(ve)}}class y{constructor(re,le){this.i=re,this.j=le,this.h=0,this.g=null}get(){let re;return 0<this.h?(this.h--,re=this.g,this.g=re.next,re.next=null):re=this.i(),re}}function w(F){return/^[\s\xa0]*$/.test(F)}function _(){var F=o.navigator;return F&&(F=F.userAgent)?F:""}function B(F){return B[" "](F),F}B[" "]=function(){};var k=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function I(F,re,le){for(const ve in F)re.call(le,F[ve],ve,F)}function E(F,re){for(const le in F)re.call(void 0,F[le],le,F)}function N(F){const re={};for(const le in F)re[le]=F[le];return re}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(F,re){let le,ve;for(let ze=1;ze<arguments.length;ze++){ve=arguments[ze];for(le in ve)F[le]=ve[le];for(let lt=0;lt<j.length;lt++)le=j[lt],Object.prototype.hasOwnProperty.call(ve,le)&&(F[le]=ve[le])}}function D(F){var re=1;F=F.split(":");const le=[];for(;0<re&&F.length;)le.push(F.shift()),re--;return F.length&&le.push(F.join(":")),le}function O(F){o.setTimeout(()=>{throw F},0)}function L(){var F=G;let re=null;return F.g&&(re=F.g,F.g=F.g.next,F.g||(F.h=null),re.next=null),re}class M{constructor(){this.h=this.g=null}add(re,le){const ve=J.get();ve.set(re,le),this.h?this.h.next=ve:this.g=ve,this.h=ve}}var J=new y(()=>new V,F=>F.reset());class V{constructor(){this.next=this.g=this.h=null}set(re,le){this.h=re,this.g=le,this.next=null}reset(){this.next=this.g=this.h=null}}let K,z=!1,G=new M,Y=()=>{const F=o.Promise.resolve(void 0);K=()=>{F.then(ee)}};var ee=()=>{for(var F;F=L();){try{F.h.call(F.g)}catch(le){O(le)}var re=J;re.j(F),100>re.h&&(re.h++,F.next=re.g,re.g=F)}z=!1};function P(){this.s=this.s,this.C=this.C}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(F,re){this.type=F,this.g=this.target=re,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var X=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var F=!1,re=Object.defineProperty({},"passive",{get:function(){F=!0}});try{const le=()=>{};o.addEventListener("test",le,re),o.removeEventListener("test",le,re)}catch{}return F}();function te(F,re){if(Q.call(this,F?F.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,F){var le=this.type=F.type,ve=F.changedTouches&&F.changedTouches.length?F.changedTouches[0]:null;if(this.target=F.target||F.srcElement,this.g=re,re=F.relatedTarget){if(k){e:{try{B(re.nodeName);var ze=!0;break e}catch{}ze=!1}ze||(re=null)}}else le=="mouseover"?re=F.fromElement:le=="mouseout"&&(re=F.toElement);this.relatedTarget=re,ve?(this.clientX=ve.clientX!==void 0?ve.clientX:ve.pageX,this.clientY=ve.clientY!==void 0?ve.clientY:ve.pageY,this.screenX=ve.screenX||0,this.screenY=ve.screenY||0):(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0),this.button=F.button,this.key=F.key||"",this.ctrlKey=F.ctrlKey,this.altKey=F.altKey,this.shiftKey=F.shiftKey,this.metaKey=F.metaKey,this.pointerId=F.pointerId||0,this.pointerType=typeof F.pointerType=="string"?F.pointerType:ae[F.pointerType]||"",this.state=F.state,this.i=F,F.defaultPrevented&&te.aa.h.call(this)}}g(te,Q);var ae={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var F=this.i;F.preventDefault?F.preventDefault():F.returnValue=!1};var se="closure_listenable_"+(1e6*Math.random()|0),oe=0;function ce(F,re,le,ve,ze){this.listener=F,this.proxy=null,this.src=re,this.type=le,this.capture=!!ve,this.ha=ze,this.key=++oe,this.da=this.fa=!1}function me(F){F.da=!0,F.listener=null,F.proxy=null,F.src=null,F.ha=null}function ke(F){this.src=F,this.g={},this.h=0}ke.prototype.add=function(F,re,le,ve,ze){var lt=F.toString();F=this.g[lt],F||(F=this.g[lt]=[],this.h++);var Qt=_e(F,re,ve,ze);return-1<Qt?(re=F[Qt],le||(re.fa=!1)):(re=new ce(re,this.src,lt,!!ve,ze),re.fa=le,F.push(re)),re};function ne(F,re){var le=re.type;if(le in F.g){var ve=F.g[le],ze=Array.prototype.indexOf.call(ve,re,void 0),lt;(lt=0<=ze)&&Array.prototype.splice.call(ve,ze,1),lt&&(me(re),F.g[le].length==0&&(delete F.g[le],F.h--))}}function _e(F,re,le,ve){for(var ze=0;ze<F.length;++ze){var lt=F[ze];if(!lt.da&&lt.listener==re&&lt.capture==!!le&&lt.ha==ve)return ze}return-1}var De="closure_lm_"+(1e6*Math.random()|0),Ne={};function fe(F,re,le,ve,ze){if(Array.isArray(re)){for(var lt=0;lt<re.length;lt++)fe(F,re[lt],le,ve,ze);return null}return le=Ze(le),F&&F[se]?F.K(re,le,u(ve)?!!ve.capture:!1,ze):Ie(F,re,le,!1,ve,ze)}function Ie(F,re,le,ve,ze,lt){if(!re)throw Error("Invalid event type");var Qt=u(ze)?!!ze.capture:!!ze,Fr=Ge(F);if(Fr||(F[De]=Fr=new ke(F)),le=Fr.add(re,le,ve,Qt,lt),le.proxy)return le;if(ve=Me(),le.proxy=ve,ve.src=F,ve.listener=le,F.addEventListener)X||(ze=Qt),ze===void 0&&(ze=!1),F.addEventListener(re.toString(),ve,ze);else if(F.attachEvent)F.attachEvent(Fe(re.toString()),ve);else if(F.addListener&&F.removeListener)F.addListener(ve);else throw Error("addEventListener and attachEvent are unavailable.");return le}function Me(){function F(le){return re.call(F.src,F.listener,le)}const re=Re;return F}function Xe(F,re,le,ve,ze){if(Array.isArray(re))for(var lt=0;lt<re.length;lt++)Xe(F,re[lt],le,ve,ze);else ve=u(ve)?!!ve.capture:!!ve,le=Ze(le),F&&F[se]?(F=F.i,re=String(re).toString(),re in F.g&&(lt=F.g[re],le=_e(lt,le,ve,ze),-1<le&&(me(lt[le]),Array.prototype.splice.call(lt,le,1),lt.length==0&&(delete F.g[re],F.h--)))):F&&(F=Ge(F))&&(re=F.g[re.toString()],F=-1,re&&(F=_e(re,le,ve,ze)),(le=-1<F?re[F]:null)&&ye(le))}function ye(F){if(typeof F!="number"&&F&&!F.da){var re=F.src;if(re&&re[se])ne(re.i,F);else{var le=F.type,ve=F.proxy;re.removeEventListener?re.removeEventListener(le,ve,F.capture):re.detachEvent?re.detachEvent(Fe(le),ve):re.addListener&&re.removeListener&&re.removeListener(ve),(le=Ge(re))?(ne(le,F),le.h==0&&(le.src=null,re[De]=null)):me(F)}}}function Fe(F){return F in Ne?Ne[F]:Ne[F]="on"+F}function Re(F,re){if(F.da)F=!0;else{re=new te(re,this);var le=F.listener,ve=F.ha||F.src;F.fa&&ye(F),F=le.call(ve,re)}return F}function Ge(F){return F=F[De],F instanceof ke?F:null}var Ke="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ze(F){return typeof F=="function"?F:(F[Ke]||(F[Ke]=function(re){return F.handleEvent(re)}),F[Ke])}function ft(){P.call(this),this.i=new ke(this),this.M=this,this.F=null}g(ft,P),ft.prototype[se]=!0,ft.prototype.removeEventListener=function(F,re,le,ve){Xe(this,F,re,le,ve)};function Nt(F,re){var le,ve=F.F;if(ve)for(le=[];ve;ve=ve.F)le.push(ve);if(F=F.M,ve=re.type||re,typeof re=="string")re=new Q(re,F);else if(re instanceof Q)re.target=re.target||F;else{var ze=re;re=new Q(ve,F),R(re,ze)}if(ze=!0,le)for(var lt=le.length-1;0<=lt;lt--){var Qt=re.g=le[lt];ze=Tt(Qt,ve,!0,re)&&ze}if(Qt=re.g=F,ze=Tt(Qt,ve,!0,re)&&ze,ze=Tt(Qt,ve,!1,re)&&ze,le)for(lt=0;lt<le.length;lt++)Qt=re.g=le[lt],ze=Tt(Qt,ve,!1,re)&&ze}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var F=this.i,re;for(re in F.g){for(var le=F.g[re],ve=0;ve<le.length;ve++)me(le[ve]);delete F.g[re],F.h--}}this.F=null},ft.prototype.K=function(F,re,le,ve){return this.i.add(String(F),re,!1,le,ve)},ft.prototype.L=function(F,re,le,ve){return this.i.add(String(F),re,!0,le,ve)};function Tt(F,re,le,ve){if(re=F.i.g[String(re)],!re)return!0;re=re.concat();for(var ze=!0,lt=0;lt<re.length;++lt){var Qt=re[lt];if(Qt&&!Qt.da&&Qt.capture==le){var Fr=Qt.listener,yn=Qt.ha||Qt.src;Qt.fa&&ne(F.i,Qt),ze=Fr.call(yn,ve)!==!1&&ze}}return ze&&!ve.defaultPrevented}function St(F,re,le){if(typeof F=="function")le&&(F=h(F,le));else if(F&&typeof F.handleEvent=="function")F=h(F.handleEvent,F);else throw Error("Invalid listener argument");return 2147483647<Number(re)?-1:o.setTimeout(F,re||0)}function Dt(F){F.g=St(()=>{F.g=null,F.i&&(F.i=!1,Dt(F))},F.l);const re=F.h;F.h=null,F.m.apply(null,re)}class gt extends P{constructor(re,le){super(),this.m=re,this.l=le,this.h=null,this.i=!1,this.g=null}j(re){this.h=arguments,this.g?this.i=!0:Dt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fr(F){P.call(this),this.h=F,this.g={}}g(fr,P);var zt=[];function Mr(F){I(F.g,function(re,le){this.g.hasOwnProperty(le)&&ye(re)},F),F.g={}}fr.prototype.N=function(){fr.aa.N.call(this),Mr(this)},fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wr=o.JSON.stringify,Dr=o.JSON.parse,vn=class{stringify(F){return o.JSON.stringify(F,void 0)}parse(F){return o.JSON.parse(F,void 0)}};function Tr(){}Tr.prototype.h=null;function Ga(F){return F.h||(F.h=F.i())}function nn(){}var oa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ba(){Q.call(this,"d")}g(Ba,Q);function rn(){Q.call(this,"c")}g(rn,Q);var gr={},tt=null;function xt(){return tt=tt||new ft}gr.La="serverreachability";function et(F){Q.call(this,gr.La,F)}g(et,Q);function vt(F){const re=xt();Nt(re,new et(re))}gr.STAT_EVENT="statevent";function wt(F,re){Q.call(this,gr.STAT_EVENT,F),this.stat=re}g(wt,Q);function yt(F){const re=xt();Nt(re,new wt(re,F))}gr.Ma="timingevent";function nr(F,re){Q.call(this,gr.Ma,F),this.size=re}g(nr,Q);function xr(F,re){if(typeof F!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){F()},re)}function qr(){this.g=!0}qr.prototype.xa=function(){this.g=!1};function Zr(F,re,le,ve,ze,lt){F.info(function(){if(F.g)if(lt)for(var Qt="",Fr=lt.split("&"),yn=0;yn<Fr.length;yn++){var Wr=Fr[yn].split("=");if(1<Wr.length){var Vn=Wr[0];Wr=Wr[1];var ea=Vn.split("_");Qt=2<=ea.length&&ea[1]=="type"?Qt+(Vn+"="+Wr+"&"):Qt+(Vn+"=redacted&")}}else Qt=null;else Qt=lt;return"XMLHTTP REQ ("+ve+") [attempt "+ze+"]: "+re+`
`+le+`
`+Qt})}function Kr(F,re,le,ve,ze,lt,Qt){F.info(function(){return"XMLHTTP RESP ("+ve+") [ attempt "+ze+"]: "+re+`
`+le+`
`+lt+" "+Qt})}function he(F,re,le,ve){F.info(function(){return"XMLHTTP TEXT ("+re+"): "+Ce(F,le)+(ve?" "+ve:"")})}function je(F,re){F.info(function(){return"TIMEOUT: "+re})}qr.prototype.info=function(){};function Ce(F,re){if(!F.g)return re;if(!re)return null;try{var le=JSON.parse(re);if(le){for(F=0;F<le.length;F++)if(Array.isArray(le[F])){var ve=le[F];if(!(2>ve.length)){var ze=ve[1];if(Array.isArray(ze)&&!(1>ze.length)){var lt=ze[0];if(lt!="noop"&&lt!="stop"&&lt!="close")for(var Qt=1;Qt<ze.length;Qt++)ze[Qt]=""}}}}return wr(le)}catch{return re}}var we={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Se={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Te;function Je(){}g(Je,Tr),Je.prototype.g=function(){return new XMLHttpRequest},Je.prototype.i=function(){return{}},Te=new Je;function dt(F,re,le,ve){this.j=F,this.i=re,this.l=le,this.R=ve||1,this.U=new fr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $e}function $e(){this.i=null,this.g="",this.h=!1}var nt={},ot={};function Pt(F,re,le){F.L=1,F.v=Xc(xi(re)),F.m=le,F.P=!0,Vt(F,null)}function Vt(F,re){F.F=Date.now(),Gt(F),F.A=xi(F.v);var le=F.A,ve=F.R;Array.isArray(ve)||(ve=[String(ve)]),Ir(le.i,"t",ve),F.C=0,le=F.j.J,F.h=new $e,F.g=Ae(F.j,le?re:null,!F.m),0<F.O&&(F.M=new gt(h(F.Y,F,F.g),F.O)),re=F.U,le=F.g,ve=F.ca;var ze="readystatechange";Array.isArray(ze)||(ze&&(zt[0]=ze.toString()),ze=zt);for(var lt=0;lt<ze.length;lt++){var Qt=fe(le,ze[lt],ve||re.handleEvent,!1,re.h||re);if(!Qt)break;re.g[Qt.key]=Qt}re=F.H?N(F.H):{},F.m?(F.u||(F.u="POST"),re["Content-Type"]="application/x-www-form-urlencoded",F.g.ea(F.A,F.u,F.m,re)):(F.u="GET",F.g.ea(F.A,F.u,null,re)),vt(),Zr(F.i,F.u,F.A,F.l,F.R,F.m)}dt.prototype.ca=function(F){F=F.target;const re=this.M;re&&gs(F)==3?re.j():this.Y(F)},dt.prototype.Y=function(F){try{if(F==this.g)e:{const ea=gs(this.g);var re=this.g.Ba();const Fl=this.g.Z();if(!(3>ea)&&(ea!=3||this.g&&(this.h.h||this.g.oa()||Hh(this.g)))){this.J||ea!=4||re==7||(re==8||0>=Fl?vt(3):vt(2)),sn(this);var le=this.g.Z();this.X=le;t:if(Jt(this)){var ve=Hh(this.g);F="";var ze=ve.length,lt=gs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){An(this),on(this);var Qt="";break t}this.h.i=new o.TextDecoder}for(re=0;re<ze;re++)this.h.h=!0,F+=this.h.i.decode(ve[re],{stream:!(lt&&re==ze-1)});ve.length=0,this.h.g+=F,this.C=0,Qt=this.h.g}else Qt=this.g.oa();if(this.o=le==200,Kr(this.i,this.u,this.A,this.l,this.R,ea,le),this.o){if(this.T&&!this.K){t:{if(this.g){var Fr,yn=this.g;if((Fr=yn.g?yn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Fr)){var Wr=Fr;break t}}Wr=null}if(le=Wr)he(this.i,this.l,le,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hs(this,le);else{this.o=!1,this.s=3,yt(12),An(this),on(this);break e}}if(this.P){le=!0;let ts;for(;!this.J&&this.C<Qt.length;)if(ts=Ht(this,Qt),ts==ot){ea==4&&(this.s=4,yt(14),le=!1),he(this.i,this.l,null,"[Incomplete Response]");break}else if(ts==nt){this.s=4,yt(15),he(this.i,this.l,Qt,"[Invalid Chunk]"),le=!1;break}else he(this.i,this.l,ts,null),hs(this,ts);if(Jt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ea!=4||Qt.length!=0||this.h.h||(this.s=1,yt(16),le=!1),this.o=this.o&&le,!le)he(this.i,this.l,Qt,"[Invalid Chunked Response]"),An(this),on(this);else if(0<Qt.length&&!this.W){this.W=!0;var Vn=this.j;Vn.g==this&&Vn.ba&&!Vn.M&&(Vn.j.info("Great, no buffering proxy detected. Bytes received: "+Qt.length),ru(Vn),Vn.M=!0,yt(11))}}else he(this.i,this.l,Qt,null),hs(this,Qt);ea==4&&An(this),this.o&&!this.J&&(ea==4?nu(this.j,this):(this.o=!1,Gt(this)))}else Zc(this.g),le==400&&0<Qt.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),An(this),on(this)}}}catch{}finally{}};function Jt(F){return F.g?F.u=="GET"&&F.L!=2&&F.j.Ca:!1}function Ht(F,re){var le=F.C,ve=re.indexOf(`
`,le);return ve==-1?ot:(le=Number(re.substring(le,ve)),isNaN(le)?nt:(ve+=1,ve+le>re.length?ot:(re=re.slice(ve,ve+le),F.C=ve+le,re)))}dt.prototype.cancel=function(){this.J=!0,An(this)};function Gt(F){F.S=Date.now()+F.I,kr(F,F.I)}function kr(F,re){if(F.B!=null)throw Error("WatchDog timer not null");F.B=xr(h(F.ba,F),re)}function sn(F){F.B&&(o.clearTimeout(F.B),F.B=null)}dt.prototype.ba=function(){this.B=null;const F=Date.now();0<=F-this.S?(je(this.i,this.A),this.L!=2&&(vt(),yt(17)),An(this),this.s=2,on(this)):kr(this,this.S-F)};function on(F){F.j.G==0||F.J||nu(F.j,F)}function An(F){sn(F);var re=F.M;re&&typeof re.ma=="function"&&re.ma(),F.M=null,Mr(F.U),F.g&&(re=F.g,F.g=null,re.abort(),re.ma())}function hs(F,re){try{var le=F.j;if(le.G!=0&&(le.g==F||pi(le.h,F))){if(!F.K&&pi(le.h,F)&&le.G==3){try{var ve=le.Da.g.parse(re)}catch{ve=null}if(Array.isArray(ve)&&ve.length==3){var ze=ve;if(ze[0]==0){e:if(!le.u){if(le.g)if(le.g.F+3e3<F.F)Ac(le),Xd(le);else break e;Ju(le),yt(18)}}else le.za=ze[1],0<le.za-le.T&&37500>ze[2]&&le.F&&le.v==0&&!le.C&&(le.C=xr(h(le.Za,le),6e3));if(1>=Ts(le.h)&&le.ca){try{le.ca()}catch{}le.ca=void 0}}else Di(le,11)}else if((F.K||le.g==F)&&Ac(le),!w(re))for(ze=le.Da.g.parse(re),re=0;re<ze.length;re++){let Wr=ze[re];if(le.T=Wr[0],Wr=Wr[1],le.G==2)if(Wr[0]=="c"){le.K=Wr[1],le.ia=Wr[2];const Vn=Wr[3];Vn!=null&&(le.la=Vn,le.j.info("VER="+le.la));const ea=Wr[4];ea!=null&&(le.Aa=ea,le.j.info("SVER="+le.Aa));const Fl=Wr[5];Fl!=null&&typeof Fl=="number"&&0<Fl&&(ve=1.5*Fl,le.L=ve,le.j.info("backChannelRequestTimeoutMs_="+ve)),ve=le;const ts=F.g;if(ts){const ko=ts.g?ts.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ko){var lt=ve.h;lt.g||ko.indexOf("spdy")==-1&&ko.indexOf("quic")==-1&&ko.indexOf("h2")==-1||(lt.j=lt.l,lt.g=new Set,lt.h&&(xa(lt,lt.h),lt.h=null))}if(ve.D){const au=ts.g?ts.g.getResponseHeader("X-HTTP-Session-Id"):null;au&&(ve.ya=au,Hn(ve.I,ve.D,au))}}le.G=3,le.l&&le.l.ua(),le.ba&&(le.R=Date.now()-F.F,le.j.info("Handshake RTT: "+le.R+"ms")),ve=le;var Qt=F;if(ve.qa=W(ve,ve.J?ve.ia:null,ve.W),Qt.K){Zs(ve.h,Qt);var Fr=Qt,yn=ve.L;yn&&(Fr.I=yn),Fr.B&&(sn(Fr),Gt(Fr)),ve.g=Qt}else Jd(ve);0<le.i.length&&Yd(le)}else Wr[0]!="stop"&&Wr[0]!="close"||Di(le,7);else le.G==3&&(Wr[0]=="stop"||Wr[0]=="close"?Wr[0]=="stop"?Di(le,7):dc(le):Wr[0]!="noop"&&le.l&&le.l.ta(Wr),le.v=0)}}vt(4)}catch{}}var Eo=class{constructor(F,re){this.g=F,this.map=re}};function ms(F){this.l=F||10,o.PerformanceNavigationTiming?(F=o.performance.getEntriesByType("navigation"),F=0<F.length&&(F[0].nextHopProtocol=="hq"||F[0].nextHopProtocol=="h2")):F=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=F?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Js(F){return F.h?!0:F.g?F.g.size>=F.j:!1}function Ts(F){return F.h?1:F.g?F.g.size:0}function pi(F,re){return F.h?F.h==re:F.g?F.g.has(re):!1}function xa(F,re){F.g?F.g.add(re):F.h=re}function Zs(F,re){F.h&&F.h==re?F.h=null:F.g&&F.g.has(re)&&F.g.delete(re)}ms.prototype.cancel=function(){if(this.i=Kd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const F of this.g.values())F.cancel();this.g.clear()}};function Kd(F){if(F.h!=null)return F.i.concat(F.h.D);if(F.g!=null&&F.g.size!==0){let re=F.i;for(const le of F.g.values())re=re.concat(le.D);return re}return x(F.i)}function Mh(F){if(F.V&&typeof F.V=="function")return F.V();if(typeof Map<"u"&&F instanceof Map||typeof Set<"u"&&F instanceof Set)return Array.from(F.values());if(typeof F=="string")return F.split("");if(c(F)){for(var re=[],le=F.length,ve=0;ve<le;ve++)re.push(F[ve]);return re}re=[],le=0;for(ve in F)re[le++]=F[ve];return re}function Kc(F){if(F.na&&typeof F.na=="function")return F.na();if(!F.V||typeof F.V!="function"){if(typeof Map<"u"&&F instanceof Map)return Array.from(F.keys());if(!(typeof Set<"u"&&F instanceof Set)){if(c(F)||typeof F=="string"){var re=[];F=F.length;for(var le=0;le<F;le++)re.push(le);return re}re=[],le=0;for(const ve in F)re[le++]=ve;return re}}}function uf(F,re){if(F.forEach&&typeof F.forEach=="function")F.forEach(re,void 0);else if(c(F)||typeof F=="string")Array.prototype.forEach.call(F,re,void 0);else for(var le=Kc(F),ve=Mh(F),ze=ve.length,lt=0;lt<ze;lt++)re.call(void 0,ve[lt],le&&le[lt],F)}var gi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qd(F,re){if(F){F=F.split("&");for(var le=0;le<F.length;le++){var ve=F[le].indexOf("="),ze=null;if(0<=ve){var lt=F[le].substring(0,ve);ze=F[le].substring(ve+1)}else lt=F[le];re(lt,ze?decodeURIComponent(ze.replace(/\+/g," ")):"")}}}function Fn(F){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,F instanceof Fn){this.h=F.h,qc(this,F.j),this.o=F.o,this.g=F.g,Wc(this,F.s),this.l=F.l;var re=F.i,le=new Sl;le.i=re.i,re.g&&(le.g=new Map(re.g),le.h=re.h),Nl(this,le),this.m=F.m}else F&&(re=String(F).match(gi))?(this.h=!1,qc(this,re[1]||"",!0),this.o=Co(re[2]||""),this.g=Co(re[3]||"",!0),Wc(this,re[4]),this.l=Co(re[5]||"",!0),Nl(this,re[6]||"",!0),this.m=Co(re[7]||"")):(this.h=!1,this.i=new Sl(null,this.h))}Fn.prototype.toString=function(){var F=[],re=this.j;re&&F.push(ic(re,df,!0),":");var le=this.g;return(le||re=="file")&&(F.push("//"),(re=this.o)&&F.push(ic(re,df,!0),"@"),F.push(encodeURIComponent(String(le)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),le=this.s,le!=null&&F.push(":",String(le))),(le=this.l)&&(this.g&&le.charAt(0)!="/"&&F.push("/"),F.push(ic(le,le.charAt(0)=="/"?oc:Af,!0))),(le=this.i.toString())&&F.push("?",le),(le=this.m)&&F.push("#",ic(le,lc)),F.join("")};function xi(F){return new Fn(F)}function qc(F,re,le){F.j=le?Co(re,!0):re,F.j&&(F.j=F.j.replace(/:$/,""))}function Wc(F,re){if(re){if(re=Number(re),isNaN(re)||0>re)throw Error("Bad port number "+re);F.s=re}else F.s=null}function Nl(F,re,le){re instanceof Sl?(F.i=re,Qh(F.i,F.h)):(le||(re=ic(re,Wd)),F.i=new Sl(re,F.h))}function Hn(F,re,le){F.i.set(re,le)}function Xc(F){return Hn(F,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),F}function Co(F,re){return F?re?decodeURI(F.replace(/%25/g,"%2525")):decodeURIComponent(F):""}function ic(F,re,le){return typeof F=="string"?(F=encodeURI(F).replace(re,Uh),le&&(F=F.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F):null}function Uh(F){return F=F.charCodeAt(0),"%"+(F>>4&15).toString(16)+(F&15).toString(16)}var df=/[#\/\?@]/g,Af=/[#\?:]/g,oc=/[#\?]/g,Wd=/[#\?@]/g,lc=/#/g;function Sl(F,re){this.h=this.g=null,this.i=F||null,this.j=!!re}function la(F){F.g||(F.g=new Map,F.h=0,F.i&&qd(F.i,function(re,le){F.add(decodeURIComponent(re.replace(/\+/g," ")),le)}))}e=Sl.prototype,e.add=function(F,re){la(this),this.i=null,F=Bl(this,F);var le=this.g.get(F);return le||this.g.set(F,le=[]),le.push(re),this.h+=1,this};function cc(F,re){la(F),re=Bl(F,re),F.g.has(re)&&(F.i=null,F.h-=F.g.get(re).length,F.g.delete(re))}function kl(F,re){return la(F),re=Bl(F,re),F.g.has(re)}e.forEach=function(F,re){la(this),this.g.forEach(function(le,ve){le.forEach(function(ze){F.call(re,ze,ve,this)},this)},this)},e.na=function(){la(this);const F=Array.from(this.g.values()),re=Array.from(this.g.keys()),le=[];for(let ve=0;ve<re.length;ve++){const ze=F[ve];for(let lt=0;lt<ze.length;lt++)le.push(re[ve])}return le},e.V=function(F){la(this);let re=[];if(typeof F=="string")kl(this,F)&&(re=re.concat(this.g.get(Bl(this,F))));else{F=Array.from(this.g.values());for(let le=0;le<F.length;le++)re=re.concat(F[le])}return re},e.set=function(F,re){return la(this),this.i=null,F=Bl(this,F),kl(this,F)&&(this.h-=this.g.get(F).length),this.g.set(F,[re]),this.h+=1,this},e.get=function(F,re){return F?(F=this.V(F),0<F.length?String(F[0]):re):re};function Ir(F,re,le){cc(F,re),0<le.length&&(F.i=null,F.g.set(Bl(F,re),x(le)),F.h+=le.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const F=[],re=Array.from(this.g.keys());for(var le=0;le<re.length;le++){var ve=re[le];const lt=encodeURIComponent(String(ve)),Qt=this.V(ve);for(ve=0;ve<Qt.length;ve++){var ze=lt;Qt[ve]!==""&&(ze+="="+encodeURIComponent(String(Qt[ve]))),F.push(ze)}}return this.i=F.join("&")};function Bl(F,re){return re=String(re),F.j&&(re=re.toLowerCase()),re}function Qh(F,re){re&&!F.j&&(la(F),F.i=null,F.g.forEach(function(le,ve){var ze=ve.toLowerCase();ve!=ze&&(cc(this,ve),Ir(this,ze,le))},F)),F.j=re}function Ii(F,re){const le=new qr;if(o.Image){const ve=new Image;ve.onload=p(ro,le,"TestLoadImage: loaded",!0,re,ve),ve.onerror=p(ro,le,"TestLoadImage: error",!1,re,ve),ve.onabort=p(ro,le,"TestLoadImage: abort",!1,re,ve),ve.ontimeout=p(ro,le,"TestLoadImage: timeout",!1,re,ve),o.setTimeout(function(){ve.ontimeout&&ve.ontimeout()},1e4),ve.src=F}else re(!1)}function _o(F,re){const le=new qr,ve=new AbortController,ze=setTimeout(()=>{ve.abort(),ro(le,"TestPingServer: timeout",!1,re)},1e4);fetch(F,{signal:ve.signal}).then(lt=>{clearTimeout(ze),lt.ok?ro(le,"TestPingServer: ok",!0,re):ro(le,"TestPingServer: server error",!1,re)}).catch(()=>{clearTimeout(ze),ro(le,"TestPingServer: error",!1,re)})}function ro(F,re,le,ve,ze){try{ze&&(ze.onload=null,ze.onerror=null,ze.onabort=null,ze.ontimeout=null),ve(le)}catch{}}function jl(){this.g=new vn}function No(F,re,le){const ve=le||"";try{uf(F,function(ze,lt){let Qt=ze;u(ze)&&(Qt=wr(ze)),re.push(ve+lt+"="+encodeURIComponent(Qt))})}catch(ze){throw re.push(ve+"type="+encodeURIComponent("_badmap")),ze}}function Yc(F){this.l=F.Ub||null,this.j=F.eb||!1}g(Yc,Tr),Yc.prototype.g=function(){return new uc(this.l,this.j)},Yc.prototype.i=function(F){return function(){return F}}({});function uc(F,re){ft.call(this),this.D=F,this.o=re,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(uc,ft),e=uc.prototype,e.open=function(F,re){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=F,this.A=re,this.readyState=1,Fi(this)},e.send=function(F){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const re={headers:this.u,method:this.B,credentials:this.m,cache:void 0};F&&(re.body=F),(this.D||o).fetch(new Request(this.A,re)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,So(this)),this.readyState=0},e.Sa=function(F){if(this.g&&(this.l=F,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=F.headers,this.readyState=2,Fi(this)),this.g&&(this.readyState=3,Fi(this),this.g)))if(this.responseType==="arraybuffer")F.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in F){if(this.j=F.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ff(this)}else F.text().then(this.Ra.bind(this),this.ga.bind(this))};function ff(F){F.j.read().then(F.Pa.bind(F)).catch(F.ga.bind(F))}e.Pa=function(F){if(this.g){if(this.o&&F.value)this.response.push(F.value);else if(!this.o){var re=F.value?F.value:new Uint8Array(0);(re=this.v.decode(re,{stream:!F.done}))&&(this.response=this.responseText+=re)}F.done?So(this):Fi(this),this.readyState==3&&ff(this)}},e.Ra=function(F){this.g&&(this.response=this.responseText=F,So(this))},e.Qa=function(F){this.g&&(this.response=F,So(this))},e.ga=function(){this.g&&So(this)};function So(F){F.readyState=4,F.l=null,F.j=null,F.v=null,Fi(F)}e.setRequestHeader=function(F,re){this.u.append(F,re)},e.getResponseHeader=function(F){return this.h&&this.h.get(F.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const F=[],re=this.h.entries();for(var le=re.next();!le.done;)le=le.value,F.push(le[0]+": "+le[1]),le=re.next();return F.join(`\r
`)};function Fi(F){F.onreadystatechange&&F.onreadystatechange.call(F)}Object.defineProperty(uc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(F){this.m=F?"include":"same-origin"}});function Tl(F){let re="";return I(F,function(le,ve){re+=ve,re+=":",re+=le,re+=`\r
`}),re}function ps(F,re,le){e:{for(ve in le){var ve=!1;break e}ve=!0}ve||(le=Tl(le),typeof F=="string"?le!=null&&encodeURIComponent(String(le)):Hn(F,re,le))}function bn(F){ft.call(this),this.headers=new Map,this.o=F||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(bn,ft);var Jc=/^https?$/i,Il=["POST","PUT"];e=bn.prototype,e.Ha=function(F){this.J=F},e.ea=function(F,re,le,ve){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+F);re=re?re.toUpperCase():"GET",this.D=F,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Te.g(),this.v=this.o?Ga(this.o):Ga(Te),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(re,String(F),!0),this.B=!1}catch(lt){hf(this,lt);return}if(F=le||"",le=new Map(this.headers),ve)if(Object.getPrototypeOf(ve)===Object.prototype)for(var ze in ve)le.set(ze,ve[ze]);else if(typeof ve.keys=="function"&&typeof ve.get=="function")for(const lt of ve.keys())le.set(lt,ve.get(lt));else throw Error("Unknown input type for opt_headers: "+String(ve));ve=Array.from(le.keys()).find(lt=>lt.toLowerCase()=="content-type"),ze=o.FormData&&F instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Il,re,void 0))||ve||ze||le.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[lt,Qt]of le)this.g.setRequestHeader(lt,Qt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Oi(this),this.u=!0,this.g.send(F),this.u=!1}catch(lt){hf(this,lt)}};function hf(F,re){F.h=!1,F.g&&(F.j=!0,F.g.abort(),F.j=!1),F.l=re,F.m=5,Ku(F),ll(F)}function Ku(F){F.A||(F.A=!0,Nt(F,"complete"),Nt(F,"error"))}e.abort=function(F){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=F||7,Nt(this,"complete"),Nt(this,"abort"),ll(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ll(this,!0)),bn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?qu(this):this.bb())},e.bb=function(){qu(this)};function qu(F){if(F.h&&typeof i<"u"&&(!F.v[1]||gs(F)!=4||F.Z()!=2)){if(F.u&&gs(F)==4)St(F.Ea,0,F);else if(Nt(F,"readystatechange"),gs(F)==4){F.h=!1;try{const Qt=F.Z();e:switch(Qt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var re=!0;break e;default:re=!1}var le;if(!(le=re)){var ve;if(ve=Qt===0){var ze=String(F.D).match(gi)[1]||null;!ze&&o.self&&o.self.location&&(ze=o.self.location.protocol.slice(0,-1)),ve=!Jc.test(ze?ze.toLowerCase():"")}le=ve}if(le)Nt(F,"complete"),Nt(F,"success");else{F.m=6;try{var lt=2<gs(F)?F.g.statusText:""}catch{lt=""}F.l=lt+" ["+F.Z()+"]",Ku(F)}}finally{ll(F)}}}}function ll(F,re){if(F.g){Oi(F);const le=F.g,ve=F.v[0]?()=>{}:null;F.g=null,F.v=null,re||Nt(F,"ready");try{le.onreadystatechange=ve}catch{}}}function Oi(F){F.I&&(o.clearTimeout(F.I),F.I=null)}e.isActive=function(){return!!this.g};function gs(F){return F.g?F.g.readyState:0}e.Z=function(){try{return 2<gs(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(F){if(this.g){var re=this.g.responseText;return F&&re.indexOf(F)==0&&(re=re.substring(F.length)),Dr(re)}};function Hh(F){try{if(!F.g)return null;if("response"in F.g)return F.g.response;switch(F.H){case"":case"text":return F.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in F.g)return F.g.mozResponseArrayBuffer}return null}catch{return null}}function Zc(F){const re={};F=(F.g&&2<=gs(F)&&F.g.getAllResponseHeaders()||"").split(`\r
`);for(let ve=0;ve<F.length;ve++){if(w(F[ve]))continue;var le=D(F[ve]);const ze=le[0];if(le=le[1],typeof le!="string")continue;le=le.trim();const lt=re[ze]||[];re[ze]=lt,lt.push(le)}E(re,function(ve){return ve.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vi(F,re,le){return le&&le.internalChannelParams&&le.internalChannelParams[F]||re}function eu(F){this.Aa=0,this.i=[],this.j=new qr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vi("failFast",!1,F),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vi("baseRetryDelayMs",5e3,F),this.cb=vi("retryDelaySeedMs",1e4,F),this.Wa=vi("forwardChannelMaxRetries",2,F),this.wa=vi("forwardChannelRequestTimeoutMs",2e4,F),this.pa=F&&F.xmlHttpFactory||void 0,this.Xa=F&&F.Tb||void 0,this.Ca=F&&F.useFetchStreams||!1,this.L=void 0,this.J=F&&F.supportsCrossDomainXhr||!1,this.K="",this.h=new ms(F&&F.concurrentRequestLimit),this.Da=new jl,this.P=F&&F.fastHandshake||!1,this.O=F&&F.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=F&&F.Rb||!1,F&&F.xa&&this.j.xa(),F&&F.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&F&&F.detectBufferingProxy||!1,this.ja=void 0,F&&F.longPollingTimeout&&0<F.longPollingTimeout&&(this.ja=F.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=eu.prototype,e.la=8,e.G=1,e.connect=function(F,re,le,ve){yt(0),this.W=F,this.H=re||{},le&&ve!==void 0&&(this.H.OSID=le,this.H.OAID=ve),this.F=this.X,this.I=W(this,null,this.W),Yd(this)};function dc(F){if(Wu(F),F.G==3){var re=F.U++,le=xi(F.I);if(Hn(le,"SID",F.K),Hn(le,"RID",re),Hn(le,"TYPE","terminate"),tu(F,le),re=new dt(F,F.j,re),re.L=2,re.v=Xc(xi(le)),le=!1,o.navigator&&o.navigator.sendBeacon)try{le=o.navigator.sendBeacon(re.v.toString(),"")}catch{}!le&&o.Image&&(new Image().src=re.v,le=!0),le||(re.g=Ae(re.j,null),re.g.ea(re.v)),re.F=Date.now(),Gt(re)}Zd(F)}function Xd(F){F.g&&(ru(F),F.g.cancel(),F.g=null)}function Wu(F){Xd(F),F.u&&(o.clearTimeout(F.u),F.u=null),Ac(F),F.h.cancel(),F.s&&(typeof F.s=="number"&&o.clearTimeout(F.s),F.s=null)}function Yd(F){if(!Js(F.h)&&!F.s){F.s=!0;var re=F.Ga;K||Y(),z||(K(),z=!0),G.add(re,F),F.B=0}}function mf(F,re){return Ts(F.h)>=F.h.j-(F.s?1:0)?!1:F.s?(F.i=re.D.concat(F.i),!0):F.G==1||F.G==2||F.B>=(F.Va?0:F.Wa)?!1:(F.s=xr(h(F.Ga,F,re),Zu(F,F.B)),F.B++,!0)}e.Ga=function(F){if(this.s)if(this.s=null,this.G==1){if(!F){this.U=Math.floor(1e5*Math.random()),F=this.U++;const ze=new dt(this,this.j,F);let lt=this.o;if(this.S&&(lt?(lt=N(lt),R(lt,this.S)):lt=this.S),this.m!==null||this.O||(ze.H=lt,lt=null),this.P)e:{for(var re=0,le=0;le<this.i.length;le++){t:{var ve=this.i[le];if("__data__"in ve.map&&(ve=ve.map.__data__,typeof ve=="string")){ve=ve.length;break t}ve=void 0}if(ve===void 0)break;if(re+=ve,4096<re){re=le;break e}if(re===4096||le===this.i.length-1){re=le+1;break e}}re=1e3}else re=1e3;re=Yu(this,ze,re),le=xi(this.I),Hn(le,"RID",F),Hn(le,"CVER",22),this.D&&Hn(le,"X-HTTP-Session-Id",this.D),tu(this,le),lt&&(this.O?re="headers="+encodeURIComponent(String(Tl(lt)))+"&"+re:this.m&&ps(le,this.m,lt)),xa(this.h,ze),this.Ua&&Hn(le,"TYPE","init"),this.P?(Hn(le,"$req",re),Hn(le,"SID","null"),ze.T=!0,Pt(ze,le,null)):Pt(ze,le,re),this.G=2}}else this.G==3&&(F?Xu(this,F):this.i.length==0||Js(this.h)||Xu(this))};function Xu(F,re){var le;re?le=re.l:le=F.U++;const ve=xi(F.I);Hn(ve,"SID",F.K),Hn(ve,"RID",le),Hn(ve,"AID",F.T),tu(F,ve),F.m&&F.o&&ps(ve,F.m,F.o),le=new dt(F,F.j,le,F.B+1),F.m===null&&(le.H=F.o),re&&(F.i=re.D.concat(F.i)),re=Yu(F,le,1e3),le.I=Math.round(.5*F.wa)+Math.round(.5*F.wa*Math.random()),xa(F.h,le),Pt(le,ve,re)}function tu(F,re){F.H&&I(F.H,function(le,ve){Hn(re,ve,le)}),F.l&&uf({},function(le,ve){Hn(re,ve,le)})}function Yu(F,re,le){le=Math.min(F.i.length,le);var ve=F.l?h(F.l.Na,F.l,F):null;e:{var ze=F.i;let lt=-1;for(;;){const Qt=["count="+le];lt==-1?0<le?(lt=ze[0].g,Qt.push("ofs="+lt)):lt=0:Qt.push("ofs="+lt);let Fr=!0;for(let yn=0;yn<le;yn++){let Wr=ze[yn].g;const Vn=ze[yn].map;if(Wr-=lt,0>Wr)lt=Math.max(0,ze[yn].g-100),Fr=!1;else try{No(Vn,Qt,"req"+Wr+"_")}catch{ve&&ve(Vn)}}if(Fr){ve=Qt.join("&");break e}}}return F=F.i.splice(0,le),re.D=F,ve}function Jd(F){if(!F.g&&!F.u){F.Y=1;var re=F.Fa;K||Y(),z||(K(),z=!0),G.add(re,F),F.v=0}}function Ju(F){return F.g||F.u||3<=F.v?!1:(F.Y++,F.u=xr(h(F.Fa,F),Zu(F,F.v)),F.v++,!0)}e.Fa=function(){if(this.u=null,Vh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var F=2*this.R;this.j.info("BP detection timer enabled: "+F),this.A=xr(h(this.ab,this),F)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),Xd(this),Vh(this))};function ru(F){F.A!=null&&(o.clearTimeout(F.A),F.A=null)}function Vh(F){F.g=new dt(F,F.j,"rpc",F.Y),F.m===null&&(F.g.H=F.o),F.g.O=0;var re=xi(F.qa);Hn(re,"RID","rpc"),Hn(re,"SID",F.K),Hn(re,"AID",F.T),Hn(re,"CI",F.F?"0":"1"),!F.F&&F.ja&&Hn(re,"TO",F.ja),Hn(re,"TYPE","xmlhttp"),tu(F,re),F.m&&F.o&&ps(re,F.m,F.o),F.L&&(F.g.I=F.L);var le=F.g;F=F.ia,le.L=1,le.v=Xc(xi(re)),le.m=null,le.P=!0,Vt(le,F)}e.Za=function(){this.C!=null&&(this.C=null,Xd(this),Ju(this),yt(19))};function Ac(F){F.C!=null&&(o.clearTimeout(F.C),F.C=null)}function nu(F,re){var le=null;if(F.g==re){Ac(F),ru(F),F.g=null;var ve=2}else if(pi(F.h,re))le=re.D,Zs(F.h,re),ve=1;else return;if(F.G!=0){if(re.o)if(ve==1){le=re.m?re.m.length:0,re=Date.now()-re.F;var ze=F.B;ve=xt(),Nt(ve,new nr(ve,le)),Yd(F)}else Jd(F);else if(ze=re.s,ze==3||ze==0&&0<re.X||!(ve==1&&mf(F,re)||ve==2&&Ju(F)))switch(le&&0<le.length&&(re=F.h,re.i=re.i.concat(le)),ze){case 1:Di(F,5);break;case 4:Di(F,10);break;case 3:Di(F,6);break;default:Di(F,2)}}}function Zu(F,re){let le=F.Ta+Math.floor(Math.random()*F.cb);return F.isActive()||(le*=2),le*re}function Di(F,re){if(F.j.info("Error code "+re),re==2){var le=h(F.fb,F),ve=F.Xa;const ze=!ve;ve=new Fn(ve||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||qc(ve,"https"),Xc(ve),ze?Ii(ve.toString(),le):_o(ve.toString(),le)}else yt(2);F.G=0,F.l&&F.l.sa(re),Zd(F),Wu(F)}e.fb=function(F){F?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Zd(F){if(F.G=0,F.ka=[],F.l){const re=Kd(F.h);(re.length!=0||F.i.length!=0)&&(b(F.ka,re),b(F.ka,F.i),F.h.i.length=0,x(F.i),F.i.length=0),F.l.ra()}}function W(F,re,le){var ve=le instanceof Fn?xi(le):new Fn(le);if(ve.g!="")re&&(ve.g=re+"."+ve.g),Wc(ve,ve.s);else{var ze=o.location;ve=ze.protocol,re=re?re+"."+ze.hostname:ze.hostname,ze=+ze.port;var lt=new Fn(null);ve&&qc(lt,ve),re&&(lt.g=re),ze&&Wc(lt,ze),le&&(lt.l=le),ve=lt}return le=F.D,re=F.ya,le&&re&&Hn(ve,le,re),Hn(ve,"VER",F.la),tu(F,ve),ve}function Ae(F,re,le){if(re&&!F.J)throw Error("Can't create secondary domain capable XhrIo object.");return re=F.Ca&&!F.pa?new bn(new Yc({eb:le})):new bn(F.pa),re.Ha(F.J),re}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Oe(){}e=Oe.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Le(){}Le.prototype.g=function(F,re){return new qe(F,re)};function qe(F,re){ft.call(this),this.g=new eu(re),this.l=F,this.h=re&&re.messageUrlParams||null,F=re&&re.messageHeaders||null,re&&re.clientProtocolHeaderRequired&&(F?F["X-Client-Protocol"]="webchannel":F={"X-Client-Protocol":"webchannel"}),this.g.o=F,F=re&&re.initMessageHeaders||null,re&&re.messageContentType&&(F?F["X-WebChannel-Content-Type"]=re.messageContentType:F={"X-WebChannel-Content-Type":re.messageContentType}),re&&re.va&&(F?F["X-WebChannel-Client-Profile"]=re.va:F={"X-WebChannel-Client-Profile":re.va}),this.g.S=F,(F=re&&re.Sb)&&!w(F)&&(this.g.m=F),this.v=re&&re.supportsCrossDomainXhr||!1,this.u=re&&re.sendRawJson||!1,(re=re&&re.httpSessionIdParam)&&!w(re)&&(this.g.D=re,F=this.h,F!==null&&re in F&&(F=this.h,re in F&&delete F[re])),this.j=new Zt(this)}g(qe,ft),qe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qe.prototype.close=function(){dc(this.g)},qe.prototype.o=function(F){var re=this.g;if(typeof F=="string"){var le={};le.__data__=F,F=le}else this.u&&(le={},le.__data__=wr(F),F=le);re.i.push(new Eo(re.Ya++,F)),re.G==3&&Yd(re)},qe.prototype.N=function(){this.g.l=null,delete this.j,dc(this.g),delete this.g,qe.aa.N.call(this)};function bt(F){Ba.call(this),F.__headers__&&(this.headers=F.__headers__,this.statusCode=F.__status__,delete F.__headers__,delete F.__status__);var re=F.__sm__;if(re){e:{for(const le in re){F=le;break e}F=void 0}(this.i=F)&&(F=this.i,re=re!==null&&F in re?re[F]:void 0),this.data=re}else this.data=F}g(bt,Ba);function Ut(){rn.call(this),this.status=1}g(Ut,rn);function Zt(F){this.g=F}g(Zt,Oe),Zt.prototype.ua=function(){Nt(this.g,"a")},Zt.prototype.ta=function(F){Nt(this.g,new bt(F))},Zt.prototype.sa=function(F){Nt(this.g,new Ut)},Zt.prototype.ra=function(){Nt(this.g,"b")},Le.prototype.createWebChannel=Le.prototype.g,qe.prototype.send=qe.prototype.o,qe.prototype.open=qe.prototype.m,qe.prototype.close=qe.prototype.close,uJ=function(){return new Le},cJ=function(){return xt()},lJ=gr,x6={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},we.NO_ERROR=0,we.TIMEOUT=8,we.HTTP_ERROR=6,q_=we,Se.COMPLETE="complete",oJ=Se,nn.EventType=oa,oa.OPEN="a",oa.CLOSE="b",oa.ERROR="c",oa.MESSAGE="d",ft.prototype.listen=ft.prototype.K,_y=nn,bn.prototype.listenOnce=bn.prototype.L,bn.prototype.getLastError=bn.prototype.Ka,bn.prototype.getLastErrorCode=bn.prototype.Ba,bn.prototype.getStatus=bn.prototype.Z,bn.prototype.getResponseJson=bn.prototype.Oa,bn.prototype.getResponseText=bn.prototype.oa,bn.prototype.send=bn.prototype.ea,bn.prototype.setWithCredentials=bn.prototype.Ha,iJ=bn}).apply(typeof hC<"u"?hC:typeof self<"u"?self:typeof window<"u"?window:{});const f9="@firebase/firestore",h9="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vo=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Vo.UNAUTHENTICATED=new Vo(null),Vo.GOOGLE_CREDENTIALS=new Vo("google-credentials-uid"),Vo.FIRST_PARTY=new Vo("first-party-uid"),Vo.MOCK_USER=new Vo("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k1="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg=new hD("@firebase/firestore");function Gx(){return sg.logLevel}function cr(e,...t){if(sg.logLevel<=kn.DEBUG){const r=t.map(_D);sg.debug(`Firestore (${k1}): ${e}`,...r)}}function mh(e,...t){if(sg.logLevel<=kn.ERROR){const r=t.map(_D);sg.error(`Firestore (${k1}): ${e}`,...r)}}function ig(e,...t){if(sg.logLevel<=kn.WARN){const r=t.map(_D);sg.warn(`Firestore (${k1}): ${e}`,...r)}}function _D(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(e,t,r){let n="Unexpected state";typeof t=="string"?n=t:r=t,dJ(e,n,r)}function dJ(e,t,r){let n=`FIRESTORE (${k1}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw mh(n),new Error(n)}function sa(e,t,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,e||dJ(t,a,n)}function tn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xt extends Ud{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AJ{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class fJ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(Vo.UNAUTHENTICATED))}shutdown(){}}class Tpe{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class Ipe{constructor(t){this.t=t,this.currentUser=Vo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){sa(this.o===void 0,42304);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new nh;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new nh,t.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const c=s;t.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},o=c=>{cr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(cr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new nh)}},0),i()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==t?(cr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(sa(typeof n.accessToken=="string",31837,{l:n}),new AJ(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return sa(t===null||typeof t=="string",2055,{h:t}),new Vo(t)}}class Fpe{constructor(t,r,n){this.P=t,this.T=r,this.I=n,this.type="FirstParty",this.user=Vo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Ope{constructor(t,r,n){this.P=t,this.T=r,this.I=n}getToken(){return Promise.resolve(new Fpe(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable(()=>r(Vo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class m9{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Dpe{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Tc(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){sa(this.o===void 0,3512);const n=s=>{s.error!=null&&cr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.m;return this.m=s.token,cr("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const a=s=>{cr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):cr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new m9(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(sa(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new m9(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ppe(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=Ppe(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=t.charAt(a[s]%62))}return n}}function Bn(e,t){return e<t?-1:e>t?1:0}function v6(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const a=e.charAt(n),s=t.charAt(n);if(a!==s)return Ej(a)===Ej(s)?Bn(a,s):Ej(a)?1:-1}return Bn(e.length,t.length)}const Rpe=55296,Lpe=57343;function Ej(e){const t=e.charCodeAt(0);return t>=Rpe&&t<=Lpe}function Uv(e,t,r){return e.length===t.length&&e.every((n,a)=>r(n,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9="__name__";class jA{constructor(t,r,n){r===void 0?r=0:r>t.length&&zr(637,{offset:r,range:t.length}),n===void 0?n=t.length-r:n>t.length-r&&zr(1746,{length:n,range:t.length-r}),this.segments=t,this.offset=r,this.len=n}get length(){return this.len}isEqual(t){return jA.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof jA?t.forEach(n=>{r.push(n)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,n=this.limit();r<n;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const n=Math.min(t.length,r.length);for(let a=0;a<n;a++){const s=jA.compareSegments(t.get(a),r.get(a));if(s!==0)return s}return Bn(t.length,r.length)}static compareSegments(t,r){const n=jA.isNumericId(t),a=jA.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?jA.extractNumericId(t).compare(jA.extractNumericId(r)):v6(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return em.fromString(t.substring(4,t.length-2))}}class Na extends jA{construct(t,r,n){return new Na(t,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const n of t){if(n.indexOf("//")>=0)throw new Xt(Ct.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new Na(r)}static emptyPath(){return new Na([])}}const Mpe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gi extends jA{construct(t,r,n){return new Gi(t,r,n)}static isValidIdentifier(t){return Mpe.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gi.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===p9}static keyField(){return new Gi([p9])}static fromServerFormat(t){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new Xt(Ct.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;a<t.length;){const o=t[a];if(o==="\\"){if(a+1===t.length)throw new Xt(Ct.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Xt(Ct.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=c,a+=2}else o==="`"?(i=!i,a++):o!=="."||i?(n+=o,a++):(s(),a++)}if(s(),i)throw new Xt(Ct.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Gi(r)}static emptyPath(){return new Gi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(t){this.path=t}static fromPath(t){return new yr(Na.fromString(t))}static fromName(t){return new yr(Na.fromString(t).popFirst(5))}static empty(){return new yr(Na.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Na.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return Na.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new yr(new Na(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hJ(e,t,r){if(!r)throw new Xt(Ct.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function mJ(e,t,r,n){if(t===!0&&n===!0)throw new Xt(Ct.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function g9(e){if(!yr.isDocumentKey(e))throw new Xt(Ct.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function x9(e){if(yr.isDocumentKey(e))throw new Xt(Ct.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function pJ(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function XS(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":zr(12329,{type:typeof e})}function el(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Xt(Ct.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=XS(e);throw new Xt(Ct.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function Upe(e,t){if(t<=0)throw new Xt(Ct.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(e,t){const r={typeString:e};return t&&(r.value=t),r}function S2(e,t){if(!pJ(e))throw new Xt(Ct.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in t)if(t[n]){const a=t[n].typeString,s="value"in t[n]?{value:t[n].value}:void 0;if(!(n in e)){r=`JSON missing required field: '${n}'`;break}const i=e[n];if(a&&typeof i!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&i!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new Xt(Ct.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v9=-62135596800,b9=1e6;class sr{static now(){return sr.fromMillis(Date.now())}static fromDate(t){return sr.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),n=Math.floor((t-1e3*r)*b9);return new sr(r,n)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Xt(Ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Xt(Ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<v9)throw new Xt(Ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Xt(Ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/b9}_compareTo(t){return this.seconds===t.seconds?Bn(this.nanoseconds,t.nanoseconds):Bn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:sr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(S2(t,sr._jsonSchema))return new sr(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-v9;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}sr._jsonSchemaVersion="firestore/timestamp/1.0",sr._jsonSchema={type:fi("string",sr._jsonSchemaVersion),seconds:fi("number"),nanoseconds:fi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{static fromTimestamp(t){return new Yr(t)}static min(){return new Yr(new sr(0,0))}static max(){return new Yr(new sr(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w=-1;function Qpe(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,a=Yr.fromTimestamp(n===1e9?new sr(r+1,0):new sr(r,n));return new fm(a,yr.empty(),t)}function Hpe(e){return new fm(e.readTime,e.key,_w)}class fm{constructor(t,r,n){this.readTime=t,this.documentKey=r,this.largestBatchId=n}static min(){return new fm(Yr.min(),yr.empty(),_w)}static max(){return new fm(Yr.max(),yr.empty(),_w)}}function Vpe(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=yr.comparator(e.documentKey,t.documentKey),r!==0?r:Bn(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zpe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $pe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B1(e){if(e.code!==Ct.FAILED_PRECONDITION||e.message!==zpe)throw e;cr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&zr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Lt((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Lt?r:Lt.resolve(r)}catch(r){return Lt.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Lt.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Lt.reject(r)}static resolve(t){return new Lt((r,n)=>{r(t)})}static reject(t){return new Lt((r,n)=>{n(t)})}static waitFor(t){return new Lt((r,n)=>{let a=0,s=0,i=!1;t.forEach(o=>{++a,o.next(()=>{++s,i&&s===a&&r()},c=>n(c))}),i=!0,s===a&&r()})}static or(t){let r=Lt.resolve(!1);for(const n of t)r=r.next(a=>a?Lt.resolve(a):n());return r}static forEach(t,r){const n=[];return t.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(t,r){return new Lt((n,a)=>{const s=t.length,i=new Array(s);let o=0;for(let c=0;c<s;c++){const u=c;r(t[u]).next(d=>{i[u]=d,++o,o===s&&n(i)},d=>a(d))}})}static doWhile(t,r){return new Lt((n,a)=>{const s=()=>{t()===!0?r().next(()=>{s()},a):n()};s()})}}function Gpe(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function j1(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}YS.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND=-1;function JS(e){return e==null}function U5(e){return e===0&&1/e==-1/0}function Kpe(e){return typeof e=="number"&&Number.isInteger(e)&&!U5(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gJ="";function qpe(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=y9(t)),t=Wpe(e.get(r),t);return y9(t)}function Wpe(e,t){let r=t;const n=e.length;for(let a=0;a<n;a++){const s=e.charAt(a);switch(s){case"\0":r+="";break;case gJ:r+="";break;default:r+=s}}return r}function y9(e){return e+gJ+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w9(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function Im(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function xJ(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(t,r){this.comparator=t,this.root=r||mo.EMPTY}insert(t,r){return new cs(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,mo.BLACK,null,null))}remove(t){return new cs(this.comparator,this.root.remove(t,this.comparator).copy(null,null,mo.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(t,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(t){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(t,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,n)=>(t(r,n),!1))}toString(){const t=[];return this.inorderTraversal((r,n)=>(t.push(`${r}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new mC(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new mC(this.root,t,this.comparator,!1)}getReverseIterator(){return new mC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new mC(this.root,t,this.comparator,!0)}}class mC{constructor(t,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=r?n(t.key,r):1,r&&a&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class mo{constructor(t,r,n,a,s){this.key=t,this.value=r,this.color=n??mo.RED,this.left=a??mo.EMPTY,this.right=s??mo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,n,a,s){return new mo(t??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let a=this;const s=n(t,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(t,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return mo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let n,a=this;if(r(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(t,a.key)===0){if(a.right.isEmpty())return mo.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,mo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,mo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw zr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw zr(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw zr(27949);return t+(this.isRed()?0:1)}}mo.EMPTY=null,mo.RED=!0,mo.BLACK=!1;mo.EMPTY=new class{constructor(){this.size=0}get key(){throw zr(57766)}get value(){throw zr(16141)}get color(){throw zr(16727)}get left(){throw zr(29726)}get right(){throw zr(36894)}copy(t,r,n,a,s){return this}insert(t,r,n){return new mo(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(t){this.comparator=t,this.data=new cs(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,n)=>(t(r),!1))}forEachInRange(t,r){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,t[1])>=0)return;r(a.key)}}forEachWhile(t,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new E9(this.data.getIterator())}getIteratorFrom(t){return new E9(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(n=>{r=r.add(n)}),r}isEqual(t){if(!(t instanceof _i)||this.size!==t.size)return!1;const r=this.data.getIterator(),n=t.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new _i(this.comparator);return r.data=t,r}}class E9{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(t){this.fields=t,t.sort(Gi.comparator)}static empty(){return new Pc([])}unionWith(t){let r=new _i(Gi.comparator);for(const n of this.fields)r=r.add(n);for(const n of t)r=r.add(n);return new Pc(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return Uv(this.fields,t.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vJ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new vJ("Invalid base64 string: "+s):s}}(t);return new Yi(r)}static fromUint8Array(t){const r=function(a){let s="";for(let i=0;i<a.length;++i)s+=String.fromCharCode(a[i]);return s}(t);return new Yi(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Bn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Yi.EMPTY_BYTE_STRING=new Yi("");const Xpe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hm(e){if(sa(!!e,39018),typeof e=="string"){let t=0;const r=Xpe.exec(e);if(sa(!!r,46558,{timestamp:e}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),t=Number(a)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Hs(e.seconds),nanos:Hs(e.nanos)}}function Hs(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function mm(e){return typeof e=="string"?Yi.fromBase64String(e):Yi.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bJ="server_timestamp",yJ="__type__",wJ="__previous_value__",EJ="__local_write_time__";function ZS(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[yJ])==null?void 0:n.stringValue)===bJ}function e4(e){const t=e.mapValue.fields[wJ];return ZS(t)?e4(t):t}function Nw(e){const t=hm(e.mapValue.fields[EJ].timestampValue);return new sr(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ype{constructor(t,r,n,a,s,i,o,c,u,d){this.databaseId=t,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const Q5="(default)";class Qv{constructor(t,r){this.projectId=t,this.database=r||Q5}static empty(){return new Qv("","")}get isDefaultDatabase(){return this.database===Q5}isEqual(t){return t instanceof Qv&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CJ="__type__",Jpe="__max__",pC={mapValue:{}},_J="__vector__",H5="value";function pm(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ZS(e)?4:ege(e)?9007199254740991:Zpe(e)?10:11:zr(28295,{value:e})}function ZA(e,t){if(e===t)return!0;const r=pm(e);if(r!==pm(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Nw(e).isEqual(Nw(t));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const i=hm(a.timestampValue),o=hm(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,s){return mm(a.bytesValue).isEqual(mm(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,s){return Hs(a.geoPointValue.latitude)===Hs(s.geoPointValue.latitude)&&Hs(a.geoPointValue.longitude)===Hs(s.geoPointValue.longitude)}(e,t);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return Hs(a.integerValue)===Hs(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const i=Hs(a.doubleValue),o=Hs(s.doubleValue);return i===o?U5(i)===U5(o):isNaN(i)&&isNaN(o)}return!1}(e,t);case 9:return Uv(e.arrayValue.values||[],t.arrayValue.values||[],ZA);case 10:case 11:return function(a,s){const i=a.mapValue.fields||{},o=s.mapValue.fields||{};if(w9(i)!==w9(o))return!1;for(const c in i)if(i.hasOwnProperty(c)&&(o[c]===void 0||!ZA(i[c],o[c])))return!1;return!0}(e,t);default:return zr(52216,{left:e})}}function Sw(e,t){return(e.values||[]).find(r=>ZA(r,t))!==void 0}function Hv(e,t){if(e===t)return 0;const r=pm(e),n=pm(t);if(r!==n)return Bn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Bn(e.booleanValue,t.booleanValue);case 2:return function(s,i){const o=Hs(s.integerValue||s.doubleValue),c=Hs(i.integerValue||i.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(e,t);case 3:return C9(e.timestampValue,t.timestampValue);case 4:return C9(Nw(e),Nw(t));case 5:return v6(e.stringValue,t.stringValue);case 6:return function(s,i){const o=mm(s),c=mm(i);return o.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(s,i){const o=s.split("/"),c=i.split("/");for(let u=0;u<o.length&&u<c.length;u++){const d=Bn(o[u],c[u]);if(d!==0)return d}return Bn(o.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,i){const o=Bn(Hs(s.latitude),Hs(i.latitude));return o!==0?o:Bn(Hs(s.longitude),Hs(i.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return _9(e.arrayValue,t.arrayValue);case 10:return function(s,i){var h,p,g,x;const o=s.fields||{},c=i.fields||{},u=(h=o[H5])==null?void 0:h.arrayValue,d=(p=c[H5])==null?void 0:p.arrayValue,f=Bn(((g=u==null?void 0:u.values)==null?void 0:g.length)||0,((x=d==null?void 0:d.values)==null?void 0:x.length)||0);return f!==0?f:_9(u,d)}(e.mapValue,t.mapValue);case 11:return function(s,i){if(s===pC.mapValue&&i===pC.mapValue)return 0;if(s===pC.mapValue)return 1;if(i===pC.mapValue)return-1;const o=s.fields||{},c=Object.keys(o),u=i.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const h=v6(c[f],d[f]);if(h!==0)return h;const p=Hv(o[c[f]],u[d[f]]);if(p!==0)return p}return Bn(c.length,d.length)}(e.mapValue,t.mapValue);default:throw zr(23264,{he:r})}}function C9(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Bn(e,t);const r=hm(e),n=hm(t),a=Bn(r.seconds,n.seconds);return a!==0?a:Bn(r.nanos,n.nanos)}function _9(e,t){const r=e.values||[],n=t.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=Hv(r[a],n[a]);if(s)return s}return Bn(r.length,n.length)}function Vv(e){return b6(e)}function b6(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const n=hm(r);return`time(${n.seconds},${n.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return mm(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return yr.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=b6(s);return n+"]"}(e.arrayValue):"mapValue"in e?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const i of n)s?s=!1:a+=",",a+=`${i}:${b6(r.fields[i])}`;return a+"}"}(e.mapValue):zr(61005,{value:e})}function W_(e){switch(pm(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=e4(e);return t?16+W_(t):16;case 5:return 2*e.stringValue.length;case 6:return mm(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+W_(s),0)}(e.arrayValue);case 10:case 11:return function(n){let a=0;return Im(n.fields,(s,i)=>{a+=s.length+W_(i)}),a}(e.mapValue);default:throw zr(13486,{value:e})}}function V5(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function y6(e){return!!e&&"integerValue"in e}function SD(e){return!!e&&"arrayValue"in e}function N9(e){return!!e&&"nullValue"in e}function S9(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function X_(e){return!!e&&"mapValue"in e}function Zpe(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[CJ])==null?void 0:n.stringValue)===_J}function Ky(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Im(e.mapValue.fields,(r,n)=>t.mapValue.fields[r]=Ky(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=Ky(e.arrayValue.values[r]);return t}return{...e}}function ege(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Jpe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(t){this.value=t}static empty(){return new Wl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let n=0;n<t.length-1;++n)if(r=(r.mapValue.fields||{})[t.get(n)],!X_(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ky(r)}setAll(t){let r=Gi.emptyPath(),n={},a=[];t.forEach((i,o)=>{if(!r.isImmediateParentOf(o)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=o.popLast()}i?n[o.lastSegment()]=Ky(i):a.push(o.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(t){const r=this.field(t.popLast());X_(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return ZA(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<t.length;++n){let a=r.mapValue.fields[t.get(n)];X_(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[t.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(t,r,n){Im(r,(a,s)=>t[a]=s);for(const a of n)delete t[a]}clone(){return new Wl(Ky(this.value))}}function NJ(e){const t=[];return Im(e.fields,(r,n)=>{const a=new Gi([r]);if(X_(n)){const s=NJ(n.mapValue).fields;if(s.length===0)t.push(a);else for(const i of s)t.push(a.child(i))}else t.push(a)}),new Pc(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(t,r,n,a,s,i,o){this.key=t,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(t){return new Ko(t,0,Yr.min(),Yr.min(),Yr.min(),Wl.empty(),0)}static newFoundDocument(t,r,n,a){return new Ko(t,1,r,Yr.min(),n,a,0)}static newNoDocument(t,r){return new Ko(t,2,r,Yr.min(),Yr.min(),Wl.empty(),0)}static newUnknownDocument(t,r){return new Ko(t,3,r,Yr.min(),Yr.min(),Wl.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(Yr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Wl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Wl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Yr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ko&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ko(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(t,r){this.position=t,this.inclusive=r}}function k9(e,t,r){let n=0;for(let a=0;a<e.position.length;a++){const s=t[a],i=e.position[a];if(s.field.isKeyField()?n=yr.comparator(yr.fromName(i.referenceValue),r.key):n=Hv(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function B9(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!ZA(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(t,r="asc"){this.field=t,this.dir=r}}function tge(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SJ{}class Ai extends SJ{constructor(t,r,n){super(),this.field=t,this.op=r,this.value=n}static create(t,r,n){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,n):new nge(t,r,n):r==="array-contains"?new ige(t,n):r==="in"?new oge(t,n):r==="not-in"?new lge(t,n):r==="array-contains-any"?new cge(t,n):new Ai(t,r,n)}static createKeyFieldInFilter(t,r,n){return r==="in"?new age(t,n):new sge(t,n)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Hv(r,this.value)):r!==null&&pm(this.value)===pm(r)&&this.matchesComparison(Hv(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return zr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ld extends SJ{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new Ld(t,r)}matches(t){return kJ(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function kJ(e){return e.op==="and"}function BJ(e){return rge(e)&&kJ(e)}function rge(e){for(const t of e.filters)if(t instanceof Ld)return!1;return!0}function w6(e){if(e instanceof Ai)return e.field.canonicalString()+e.op.toString()+Vv(e.value);if(BJ(e))return e.filters.map(t=>w6(t)).join(",");{const t=e.filters.map(r=>w6(r)).join(",");return`${e.op}(${t})`}}function jJ(e,t){return e instanceof Ai?function(n,a){return a instanceof Ai&&n.op===a.op&&n.field.isEqual(a.field)&&ZA(n.value,a.value)}(e,t):e instanceof Ld?function(n,a){return a instanceof Ld&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,i,o)=>s&&jJ(i,a.filters[o]),!0):!1}(e,t):void zr(19439)}function TJ(e){return e instanceof Ai?function(r){return`${r.field.canonicalString()} ${r.op} ${Vv(r.value)}`}(e):e instanceof Ld?function(r){return r.op.toString()+" {"+r.getFilters().map(TJ).join(" ,")+"}"}(e):"Filter"}class nge extends Ai{constructor(t,r,n){super(t,r,n),this.key=yr.fromName(n.referenceValue)}matches(t){const r=yr.comparator(t.key,this.key);return this.matchesComparison(r)}}class age extends Ai{constructor(t,r){super(t,"in",r),this.keys=IJ("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class sge extends Ai{constructor(t,r){super(t,"not-in",r),this.keys=IJ("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function IJ(e,t){var r;return(((r=t.arrayValue)==null?void 0:r.values)||[]).map(n=>yr.fromName(n.referenceValue))}class ige extends Ai{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return SD(r)&&Sw(r.arrayValue,this.value)}}class oge extends Ai{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&Sw(this.value.arrayValue,r)}}class lge extends Ai{constructor(t,r){super(t,"not-in",r)}matches(t){if(Sw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Sw(this.value.arrayValue,r)}}class cge extends Ai{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!SD(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Sw(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uge{constructor(t,r=null,n=[],a=[],s=null,i=null,o=null){this.path=t,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=i,this.endAt=o,this.Te=null}}function j9(e,t=null,r=[],n=[],a=null,s=null,i=null){return new uge(e,t,r,n,a,s,i)}function kD(e){const t=tn(e);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(n=>w6(n)).join(","),r+="|ob:",r+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),JS(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(n=>Vv(n)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(n=>Vv(n)).join(",")),t.Te=r}return t.Te}function BD(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!tge(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!jJ(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!B9(e.startAt,t.startAt)&&B9(e.endAt,t.endAt)}function E6(e){return yr.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(t,r=null,n=[],a=[],s=null,i="F",o=null,c=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function dge(e,t,r,n,a,s,i,o){return new Sg(e,t,r,n,a,s,i,o)}function t4(e){return new Sg(e)}function T9(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function jD(e){return e.collectionGroup!==null}function xv(e){const t=tn(e);if(t.Ie===null){t.Ie=[];const r=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),r.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new _i(Gi.comparator);return i.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(t).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new kw(s,n))}),r.has(Gi.keyField().canonicalString())||t.Ie.push(new kw(Gi.keyField(),n))}return t.Ie}function GA(e){const t=tn(e);return t.Ee||(t.Ee=Age(t,xv(e))),t.Ee}function Age(e,t){if(e.limitType==="F")return j9(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new kw(a.field,s)});const r=e.endAt?new zv(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new zv(e.startAt.position,e.startAt.inclusive):null;return j9(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function C6(e,t){const r=e.filters.concat([t]);return new Sg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function z5(e,t,r){return new Sg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function r4(e,t){return BD(GA(e),GA(t))&&e.limitType===t.limitType}function FJ(e){return`${kD(GA(e))}|lt:${e.limitType}`}function Kx(e){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>TJ(a)).join(", ")}]`),JS(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>Vv(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>Vv(a)).join(",")),`Target(${n})`}(GA(e))}; limitType=${e.limitType})`}function n4(e,t){return t.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):yr.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(e,t)&&function(n,a){for(const s of xv(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(e,t)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(e,t)&&function(n,a){return!(n.startAt&&!function(i,o,c){const u=k9(i,o,c);return i.inclusive?u<=0:u<0}(n.startAt,xv(n),a)||n.endAt&&!function(i,o,c){const u=k9(i,o,c);return i.inclusive?u>=0:u>0}(n.endAt,xv(n),a))}(e,t)}function fge(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function OJ(e){return(t,r)=>{let n=!1;for(const a of xv(e)){const s=hge(a,t,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function hge(e,t,r){const n=e.field.isKeyField()?yr.comparator(t.key,r.key):function(s,i,o){const c=i.data.field(s),u=o.data.field(s);return c!==null&&u!==null?Hv(c,u):zr(42886)}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return zr(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,t))return s}}has(t){return this.get(t)!==void 0}set(t,r){const n=this.mapKeyFn(t),a=this.inner[n];if(a===void 0)return this.inner[n]=[[t,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],t))return void(a[s]=[t,r]);a.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],t))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(t){Im(this.inner,(r,n)=>{for(const[a,s]of n)t(a,s)})}isEmpty(){return xJ(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mge=new cs(yr.comparator);function ph(){return mge}const DJ=new cs(yr.comparator);function Ny(...e){let t=DJ;for(const r of e)t=t.insert(r.key,r);return t}function PJ(e){let t=DJ;return e.forEach((r,n)=>t=t.insert(r,n.overlayedDocument)),t}function jp(){return qy()}function RJ(){return qy()}function qy(){return new kg(e=>e.toString(),(e,t)=>e.isEqual(t))}const pge=new cs(yr.comparator),gge=new _i(yr.comparator);function jn(...e){let t=gge;for(const r of e)t=t.add(r);return t}const xge=new _i(Bn);function vge(){return xge}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:U5(t)?"-0":t}}function LJ(e){return{integerValue:""+e}}function bge(e,t){return Kpe(t)?LJ(t):TD(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(){this._=void 0}}function yge(e,t,r){return e instanceof Bw?function(a,s){const i={fields:{[yJ]:{stringValue:bJ},[EJ]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&ZS(s)&&(s=e4(s)),s&&(i.fields[wJ]=s),{mapValue:i}}(r,t):e instanceof $v?UJ(e,t):e instanceof jw?QJ(e,t):function(a,s){const i=MJ(a,s),o=I9(i)+I9(a.Ae);return y6(i)&&y6(a.Ae)?LJ(o):TD(a.serializer,o)}(e,t)}function wge(e,t,r){return e instanceof $v?UJ(e,t):e instanceof jw?QJ(e,t):r}function MJ(e,t){return e instanceof $5?function(n){return y6(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class Bw extends a4{}class $v extends a4{constructor(t){super(),this.elements=t}}function UJ(e,t){const r=HJ(t);for(const n of e.elements)r.some(a=>ZA(a,n))||r.push(n);return{arrayValue:{values:r}}}class jw extends a4{constructor(t){super(),this.elements=t}}function QJ(e,t){let r=HJ(t);for(const n of e.elements)r=r.filter(a=>!ZA(a,n));return{arrayValue:{values:r}}}class $5 extends a4{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function I9(e){return Hs(e.integerValue||e.doubleValue)}function HJ(e){return SD(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VJ{constructor(t,r){this.field=t,this.transform=r}}function Ege(e,t){return e.field.isEqual(t.field)&&function(n,a){return n instanceof $v&&a instanceof $v||n instanceof jw&&a instanceof jw?Uv(n.elements,a.elements,ZA):n instanceof $5&&a instanceof $5?ZA(n.Ae,a.Ae):n instanceof Bw&&a instanceof Bw}(e.transform,t.transform)}class Cge{constructor(t,r){this.version=t,this.transformResults=r}}class yl{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new yl}static exists(t){return new yl(void 0,t)}static updateTime(t){return new yl(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Y_(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class s4{}function zJ(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new i4(e.key,yl.none()):new k2(e.key,e.data,yl.none());{const r=e.data,n=Wl.empty();let a=new _i(Gi.comparator);for(let s of t.fields)if(!a.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),a=a.add(s)}return new Fm(e.key,n,new Pc(a.toArray()),yl.none())}}function _ge(e,t,r){e instanceof k2?function(a,s,i){const o=a.value.clone(),c=O9(a.fieldTransforms,s,i.transformResults);o.setAll(c),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(e,t,r):e instanceof Fm?function(a,s,i){if(!Y_(a.precondition,s))return void s.convertToUnknownDocument(i.version);const o=O9(a.fieldTransforms,s,i.transformResults),c=s.data;c.setAll($J(a)),c.setAll(o),s.convertToFoundDocument(i.version,c).setHasCommittedMutations()}(e,t,r):function(a,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,t,r)}function Wy(e,t,r,n){return e instanceof k2?function(s,i,o,c){if(!Y_(s.precondition,i))return o;const u=s.value.clone(),d=D9(s.fieldTransforms,c,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(e,t,r,n):e instanceof Fm?function(s,i,o,c){if(!Y_(s.precondition,i))return o;const u=D9(s.fieldTransforms,c,i),d=i.data;return d.setAll($J(s)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,r,n):function(s,i,o){return Y_(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(e,t,r)}function Nge(e,t){let r=null;for(const n of e.fieldTransforms){const a=t.data.field(n.field),s=MJ(n.transform,a||null);s!=null&&(r===null&&(r=Wl.empty()),r.set(n.field,s))}return r||null}function F9(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Uv(n,a,(s,i)=>Ege(s,i))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class k2 extends s4{constructor(t,r,n,a=[]){super(),this.key=t,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Fm extends s4{constructor(t,r,n,a,s=[]){super(),this.key=t,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function $J(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}}),t}function O9(e,t,r){const n=new Map;sa(e.length===r.length,32656,{Re:r.length,Ve:e.length});for(let a=0;a<r.length;a++){const s=e[a],i=s.transform,o=t.data.field(s.field);n.set(s.field,wge(i,o,r[a]))}return n}function D9(e,t,r){const n=new Map;for(const a of e){const s=a.transform,i=r.data.field(a.field);n.set(a.field,yge(s,i,t))}return n}class i4 extends s4{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Sge extends s4{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kge{constructor(t,r,n,a){this.batchId=t,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(t,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(t.key)&&_ge(s,t,n[a])}}applyToLocalView(t,r){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(r=Wy(n,t,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(r=Wy(n,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const n=RJ();return this.mutations.forEach(a=>{const s=t.get(a.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=r.has(a.key)?null:o;const c=zJ(i,o);c!==null&&n.set(a.key,c),i.isValidDocument()||i.convertToNoDocument(Yr.min())}),n}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),jn())}isEqual(t){return this.batchId===t.batchId&&Uv(this.mutations,t.mutations,(r,n)=>F9(r,n))&&Uv(this.baseMutations,t.baseMutations,(r,n)=>F9(r,n))}}class ID{constructor(t,r,n,a){this.batch=t,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(t,r,n){sa(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let a=function(){return pge}();const s=t.mutations;for(let i=0;i<s.length;i++)a=a.insert(s[i].key,n[i].version);return new ID(t,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bge{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jge{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var si,Ln;function Tge(e){switch(e){case Ct.OK:return zr(64938);case Ct.CANCELLED:case Ct.UNKNOWN:case Ct.DEADLINE_EXCEEDED:case Ct.RESOURCE_EXHAUSTED:case Ct.INTERNAL:case Ct.UNAVAILABLE:case Ct.UNAUTHENTICATED:return!1;case Ct.INVALID_ARGUMENT:case Ct.NOT_FOUND:case Ct.ALREADY_EXISTS:case Ct.PERMISSION_DENIED:case Ct.FAILED_PRECONDITION:case Ct.ABORTED:case Ct.OUT_OF_RANGE:case Ct.UNIMPLEMENTED:case Ct.DATA_LOSS:return!0;default:return zr(15467,{code:e})}}function GJ(e){if(e===void 0)return mh("GRPC error has no .code"),Ct.UNKNOWN;switch(e){case si.OK:return Ct.OK;case si.CANCELLED:return Ct.CANCELLED;case si.UNKNOWN:return Ct.UNKNOWN;case si.DEADLINE_EXCEEDED:return Ct.DEADLINE_EXCEEDED;case si.RESOURCE_EXHAUSTED:return Ct.RESOURCE_EXHAUSTED;case si.INTERNAL:return Ct.INTERNAL;case si.UNAVAILABLE:return Ct.UNAVAILABLE;case si.UNAUTHENTICATED:return Ct.UNAUTHENTICATED;case si.INVALID_ARGUMENT:return Ct.INVALID_ARGUMENT;case si.NOT_FOUND:return Ct.NOT_FOUND;case si.ALREADY_EXISTS:return Ct.ALREADY_EXISTS;case si.PERMISSION_DENIED:return Ct.PERMISSION_DENIED;case si.FAILED_PRECONDITION:return Ct.FAILED_PRECONDITION;case si.ABORTED:return Ct.ABORTED;case si.OUT_OF_RANGE:return Ct.OUT_OF_RANGE;case si.UNIMPLEMENTED:return Ct.UNIMPLEMENTED;case si.DATA_LOSS:return Ct.DATA_LOSS;default:return zr(39323,{code:e})}}(Ln=si||(si={}))[Ln.OK=0]="OK",Ln[Ln.CANCELLED=1]="CANCELLED",Ln[Ln.UNKNOWN=2]="UNKNOWN",Ln[Ln.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ln[Ln.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ln[Ln.NOT_FOUND=5]="NOT_FOUND",Ln[Ln.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ln[Ln.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ln[Ln.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ln[Ln.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ln[Ln.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ln[Ln.ABORTED=10]="ABORTED",Ln[Ln.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ln[Ln.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ln[Ln.INTERNAL=13]="INTERNAL",Ln[Ln.UNAVAILABLE=14]="UNAVAILABLE",Ln[Ln.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ige(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fge=new em([4294967295,4294967295],0);function P9(e){const t=Ige().encode(e),r=new sJ;return r.update(t),new Uint8Array(r.digest())}function R9(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),a=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new em([r,n],0),new em([a,s],0)]}class FD{constructor(t,r,n){if(this.bitmap=t,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Sy(`Invalid padding: ${r}`);if(n<0)throw new Sy(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new Sy(`Invalid hash count: ${n}`);if(t.length===0&&r!==0)throw new Sy(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=em.fromNumber(this.ge)}ye(t,r,n){let a=t.add(r.multiply(em.fromNumber(n)));return a.compare(Fge)===1&&(a=new em([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=P9(t),[n,a]=R9(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);if(!this.we(i))return!1}return!0}static create(t,r,n){const a=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),i=new FD(s,a,r);return n.forEach(o=>i.insert(o)),i}insert(t){if(this.ge===0)return;const r=P9(t),[n,a]=R9(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);this.Se(i)}}Se(t){const r=Math.floor(t/8),n=t%8;this.bitmap[r]|=1<<n}}class Sy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(t,r,n,a,s){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,r,n){const a=new Map;return a.set(t,B2.createSynthesizedTargetChangeForCurrentChange(t,r,n)),new o4(Yr.min(),a,new cs(Bn),ph(),jn())}}class B2{constructor(t,r,n,a,s){this.resumeToken=t,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,r,n){return new B2(n,r,jn(),jn(),jn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(t,r,n,a){this.be=t,this.removedTargetIds=r,this.key=n,this.De=a}}class KJ{constructor(t,r){this.targetId=t,this.Ce=r}}class qJ{constructor(t,r,n=Yi.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=r,this.resumeToken=n,this.cause=a}}class L9{constructor(){this.ve=0,this.Fe=M9(),this.Me=Yi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=jn(),r=jn(),n=jn();return this.Fe.forEach((a,s)=>{switch(s){case 0:t=t.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:zr(38017,{changeType:s})}}),new B2(this.Me,this.xe,t,r,n)}qe(){this.Oe=!1,this.Fe=M9()}Qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,sa(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Oge{constructor(t){this.Ge=t,this.ze=new Map,this.je=ph(),this.Je=gC(),this.He=gC(),this.Ye=new cs(Bn)}Ze(t){for(const r of t.be)t.De&&t.De.isFoundDocument()?this.Xe(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,r=>{const n=this.nt(r);switch(t.state){case 0:this.rt(r)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(t.resumeToken));break;default:zr(56790,{state:t.state})}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(t){const r=t.targetId,n=t.Ce.count,a=this.ot(r);if(a){const s=a.target;if(E6(s))if(n===0){const i=new yr(s.path);this.et(r,i,Ko.newNoDocument(i,Yr.min()))}else sa(n===1,20013,{expectedCount:n});else{const i=this._t(r);if(i!==n){const o=this.ut(t),c=o?this.ct(o,t,i):1;if(c!==0){this.it(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let i,o;try{i=mm(n).toUint8Array()}catch(c){if(c instanceof vJ)return ig("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new FD(i,a,s)}catch(c){return ig(c instanceof Sy?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.ge===0?null:o}ct(t,r,n){return r.Ce.count===n-this.Pt(t,r.targetId)?0:2}Pt(t,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const i=this.Ge.ht(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;t.mightContain(o)||(this.et(r,s,null),a++)}),a}Tt(t){const r=new Map;this.ze.forEach((s,i)=>{const o=this.ot(i);if(o){if(s.current&&E6(o.target)){const c=new yr(o.target.path);this.It(c).has(i)||this.Et(i,c)||this.et(i,c,Ko.newNoDocument(c,t))}s.Be&&(r.set(i,s.ke()),s.qe())}});let n=jn();this.He.forEach((s,i)=>{let o=!0;i.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.je.forEach((s,i)=>i.setReadTime(t));const a=new o4(t,r,this.Ye,this.je,n);return this.je=ph(),this.Je=gC(),this.He=gC(),this.Ye=new cs(Bn),a}Xe(t,r){if(!this.rt(t))return;const n=this.Et(t,r.key)?2:0;this.nt(t).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(t)),this.He=this.He.insert(r.key,this.dt(r.key).add(t))}et(t,r,n){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(t)),this.He=this.He.insert(r,this.dt(r).add(t)),n&&(this.je=this.je.insert(r,n))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let r=this.ze.get(t);return r||(r=new L9,this.ze.set(t,r)),r}dt(t){let r=this.He.get(t);return r||(r=new _i(Bn),this.He=this.He.insert(t,r)),r}It(t){let r=this.Je.get(t);return r||(r=new _i(Bn),this.Je=this.Je.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||cr("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new L9),this.Ge.getRemoteKeysForTarget(t).forEach(r=>{this.et(t,r,null)})}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function gC(){return new cs(yr.comparator)}function M9(){return new cs(yr.comparator)}const Dge={asc:"ASCENDING",desc:"DESCENDING"},Pge={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Rge={and:"AND",or:"OR"};class Lge{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function _6(e,t){return e.useProto3Json||JS(t)?t:{value:t}}function G5(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function WJ(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Mge(e,t){return G5(e,t.toTimestamp())}function KA(e){return sa(!!e,49232),Yr.fromTimestamp(function(r){const n=hm(r);return new sr(n.seconds,n.nanos)}(e))}function OD(e,t){return N6(e,t).canonicalString()}function N6(e,t){const r=function(a){return new Na(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?r:r.child(t)}function XJ(e){const t=Na.fromString(e);return sa(tZ(t),10190,{key:t.toString()}),t}function S6(e,t){return OD(e.databaseId,t.path)}function Cj(e,t){const r=XJ(t);if(r.get(1)!==e.databaseId.projectId)throw new Xt(Ct.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new Xt(Ct.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new yr(JJ(r))}function YJ(e,t){return OD(e.databaseId,t)}function Uge(e){const t=XJ(e);return t.length===4?Na.emptyPath():JJ(t)}function k6(e){return new Na(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function JJ(e){return sa(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function U9(e,t,r){return{name:S6(e,t),fields:r.value.mapValue.fields}}function Qge(e,t){let r;if("targetChange"in t){t.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:zr(39313,{state:u})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(sa(d===void 0||typeof d=="string",58123),Yi.fromBase64String(d||"")):(sa(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Yi.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,o=i&&function(u){const d=u.code===void 0?Ct.UNKNOWN:GJ(u.code);return new Xt(d,u.message||"")}(i);r=new qJ(n,a,s,o||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const a=Cj(e,n.document.name),s=KA(n.document.updateTime),i=n.document.createTime?KA(n.document.createTime):Yr.min(),o=new Wl({mapValue:{fields:n.document.fields}}),c=Ko.newFoundDocument(a,s,i,o),u=n.targetIds||[],d=n.removedTargetIds||[];r=new J_(u,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const a=Cj(e,n.document),s=n.readTime?KA(n.readTime):Yr.min(),i=Ko.newNoDocument(a,s),o=n.removedTargetIds||[];r=new J_([],o,i.key,i)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const a=Cj(e,n.document),s=n.removedTargetIds||[];r=new J_([],s,a,null)}else{if(!("filter"in t))return zr(11601,{Rt:t});{t.filter;const n=t.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,i=new jge(a,s),o=n.targetId;r=new KJ(o,i)}}return r}function Hge(e,t){let r;if(t instanceof k2)r={update:U9(e,t.key,t.value)};else if(t instanceof i4)r={delete:S6(e,t.key)};else if(t instanceof Fm)r={update:U9(e,t.key,t.data),updateMask:Yge(t.fieldMask)};else{if(!(t instanceof Sge))return zr(16599,{Vt:t.type});r={verify:S6(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(n=>function(s,i){const o=i.transform;if(o instanceof Bw)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof $v)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof jw)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof $5)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw zr(20930,{transform:i.transform})}(0,n))),t.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:Mge(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:zr(27497)}(e,t.precondition)),r}function Vge(e,t){return e&&e.length>0?(sa(t!==void 0,14353),e.map(r=>function(a,s){let i=a.updateTime?KA(a.updateTime):KA(s);return i.isEqual(Yr.min())&&(i=KA(s)),new Cge(i,a.transformResults||[])}(r,t))):[]}function zge(e,t){return{documents:[YJ(e,t.path)]}}function $ge(e,t){const r={structuredQuery:{}},n=t.path;let a;t.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=YJ(e,a);const s=function(u){if(u.length!==0)return eZ(Ld.create(u,"and"))}(t.filters);s&&(r.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:qx(h.field),direction:qge(h.dir)}}(d))}(t.orderBy);i&&(r.structuredQuery.orderBy=i);const o=_6(e,t.limit);return o!==null&&(r.structuredQuery.limit=o),t.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ft:r,parent:a}}function Gge(e){let t=Uge(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){sa(n===1,65062);const d=r.from[0];d.allDescendants?a=d.collectionId:t=t.child(d.collectionId)}let s=[];r.where&&(s=function(f){const h=ZJ(f);return h instanceof Ld&&BJ(h)?h.getFilters():[h]}(r.where));let i=[];r.orderBy&&(i=function(f){return f.map(h=>function(g){return new kw(Wx(g.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(r.orderBy));let o=null;r.limit&&(o=function(f){let h;return h=typeof f=="object"?f.value:f,JS(h)?null:h}(r.limit));let c=null;r.startAt&&(c=function(f){const h=!!f.before,p=f.values||[];return new zv(p,h)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const h=!f.before,p=f.values||[];return new zv(p,h)}(r.endAt)),dge(t,a,i,s,o,"F",c,u)}function Kge(e,t){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return zr(28987,{purpose:a})}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function ZJ(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Wx(r.unaryFilter.field);return Ai.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Wx(r.unaryFilter.field);return Ai.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Wx(r.unaryFilter.field);return Ai.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Wx(r.unaryFilter.field);return Ai.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return zr(61313);default:return zr(60726)}}(e):e.fieldFilter!==void 0?function(r){return Ai.create(Wx(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return zr(58110);default:return zr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return Ld.create(r.compositeFilter.filters.map(n=>ZJ(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return zr(1026)}}(r.compositeFilter.op))}(e):zr(30097,{filter:e})}function qge(e){return Dge[e]}function Wge(e){return Pge[e]}function Xge(e){return Rge[e]}function qx(e){return{fieldPath:e.canonicalString()}}function Wx(e){return Gi.fromServerFormat(e.fieldPath)}function eZ(e){return e instanceof Ai?function(r){if(r.op==="=="){if(S9(r.value))return{unaryFilter:{field:qx(r.field),op:"IS_NAN"}};if(N9(r.value))return{unaryFilter:{field:qx(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(S9(r.value))return{unaryFilter:{field:qx(r.field),op:"IS_NOT_NAN"}};if(N9(r.value))return{unaryFilter:{field:qx(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qx(r.field),op:Wge(r.op),value:r.value}}}(e):e instanceof Ld?function(r){const n=r.getFilters().map(a=>eZ(a));return n.length===1?n[0]:{compositeFilter:{op:Xge(r.op),filters:n}}}(e):zr(54877,{filter:e})}function Yge(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function tZ(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(t,r,n,a,s=Yr.min(),i=Yr.min(),o=Yi.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(t){return new H0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new H0(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new H0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new H0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jge{constructor(t){this.yt=t}}function Zge(e){const t=Gge({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?z5(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class exe{constructor(){this.Cn=new txe}addToCollectionParentIndex(t,r){return this.Cn.add(r),Lt.resolve()}getCollectionParents(t,r){return Lt.resolve(this.Cn.getEntries(r))}addFieldIndex(t,r){return Lt.resolve()}deleteFieldIndex(t,r){return Lt.resolve()}deleteAllFieldIndexes(t){return Lt.resolve()}createTargetIndexes(t,r){return Lt.resolve()}getDocumentsMatchingTarget(t,r){return Lt.resolve(null)}getIndexType(t,r){return Lt.resolve(0)}getFieldIndexes(t,r){return Lt.resolve([])}getNextCollectionGroupToUpdate(t){return Lt.resolve(null)}getMinOffset(t,r){return Lt.resolve(fm.min())}getMinOffsetFromCollectionGroup(t,r){return Lt.resolve(fm.min())}updateCollectionGroup(t,r,n){return Lt.resolve()}updateIndexEntries(t,r){return Lt.resolve()}}class txe{constructor(){this.index={}}add(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r]||new _i(Na.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(t){return(this.index[t]||new _i(Na.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rZ=41943040;class zl{static withCacheSize(t){return new zl(t,zl.DEFAULT_COLLECTION_PERCENTILE,zl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zl.DEFAULT_COLLECTION_PERCENTILE=10,zl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zl.DEFAULT=new zl(rZ,zl.DEFAULT_COLLECTION_PERCENTILE,zl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zl.DISABLED=new zl(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Gv(0)}static cr(){return new Gv(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9="LruGarbageCollector",rxe=1048576;function V9([e,t],[r,n]){const a=Bn(e,r);return a===0?Bn(t,n):a}class nxe{constructor(t){this.Ir=t,this.buffer=new _i(V9),this.Er=0}dr(){return++this.Er}Ar(t){const r=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();V9(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class axe{constructor(t,r,n){this.garbageCollector=t,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){cr(H9,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){j1(r)?cr(H9,"Ignoring IndexedDB error during garbage collection: ",r):await B1(r)}await this.Vr(3e5)})}}class sxe{constructor(t,r){this.mr=t,this.params=r}calculateTargetCount(t,r){return this.mr.gr(t).next(n=>Math.floor(r/100*n))}nthSequenceNumber(t,r){if(r===0)return Lt.resolve(YS.ce);const n=new nxe(r);return this.mr.forEachTarget(t,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(t,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(t,r,n){return this.mr.removeTargets(t,r,n)}removeOrphanedDocuments(t,r){return this.mr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(cr("LruGarbageCollector","Garbage collection skipped; disabled"),Lt.resolve(Q9)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(cr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Q9):this.yr(t,r))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,r){let n,a,s,i,o,c,u;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(cr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,i=Date.now(),this.nthSequenceNumber(t,a))).next(f=>(n=f,o=Date.now(),this.removeTargets(t,n,r))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(t,n))).next(f=>(u=Date.now(),Gx()<=kn.DEBUG&&cr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${a} in `+(o-i)+`ms
	Removed ${s} targets in `+(c-o)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Lt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function ixe(e,t){return new sxe(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oxe{constructor(){this.changes=new kg(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,Ko.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Lt.resolve(n):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lxe{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cxe{constructor(t,r,n,a){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(t,r){let n=null;return this.documentOverlayCache.getOverlay(t,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(t,r))).next(a=>(n!==null&&Wy(n.mutation,a,Pc.empty(),sr.now()),a))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.getLocalViewOfDocuments(t,n,jn()).next(()=>n))}getLocalViewOfDocuments(t,r,n=jn()){const a=jp();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,n).next(s=>{let i=Ny();return s.forEach((o,c)=>{i=i.insert(o,c.overlayedDocument)}),i}))}getOverlayedDocuments(t,r){const n=jp();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,jn()))}populateOverlays(t,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(t,a).next(s=>{s.forEach((i,o)=>{r.set(i,o)})})}computeViews(t,r,n,a){let s=ph();const i=qy(),o=function(){return qy()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof Fm)?s=s.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),Wy(d.mutation,u,d.mutation.getFieldMask(),sr.now())):i.set(u.key,Pc.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((u,d)=>i.set(u,d)),r.forEach((u,d)=>o.set(u,new lxe(d,i.get(u)??null))),o))}recalculateAndSaveOverlays(t,r){const n=qy();let a=new cs((i,o)=>i-o),s=jn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(i=>{for(const o of i)o.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||Pc.empty();d=o.applyToLocalView(u,d),n.set(c,d);const f=(a.get(o.batchId)||jn()).add(c);a=a.insert(o.batchId,f)})}).next(()=>{const i=[],o=a.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,d=c.value,f=RJ();d.forEach(h=>{if(!s.has(h)){const p=zJ(r.get(h),n.get(h));p!==null&&f.set(h,p),s=s.add(h)}}),i.push(this.documentOverlayCache.saveOverlays(t,u,f))}return Lt.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,r,n,a){return function(i){return yr.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):jD(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,n,a):this.getDocumentsMatchingCollectionQuery(t,r,n,a)}getNextDocuments(t,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,n,a).next(s=>{const i=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,n.largestBatchId,a-s.size):Lt.resolve(jp());let o=_w,c=s;return i.next(u=>Lt.forEach(u,(d,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),s.get(d)?Lt.resolve():this.remoteDocumentCache.getEntry(t,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,c,u,jn())).next(d=>({batchId:o,changes:PJ(d)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new yr(r)).next(n=>{let a=Ny();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(t,r,n,a){const s=r.collectionGroup;let i=Ny();return this.indexManager.getCollectionParents(t,s).next(o=>Lt.forEach(o,c=>{const u=function(f,h){return new Sg(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,n,a).next(d=>{d.forEach((f,h)=>{i=i.insert(f,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(t,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,n,s,a))).next(i=>{s.forEach((c,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,Ko.newInvalidDocument(d)))});let o=Ny();return i.forEach((c,u)=>{const d=s.get(c);d!==void 0&&Wy(d.mutation,u,Pc.empty(),sr.now()),n4(r,u)&&(o=o.insert(c,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uxe{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,r){return Lt.resolve(this.Lr.get(r))}saveBundleMetadata(t,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:KA(a.createTime)}}(r)),Lt.resolve()}getNamedQuery(t,r){return Lt.resolve(this.kr.get(r))}saveNamedQuery(t,r){return this.kr.set(r.name,function(a){return{name:a.name,query:Zge(a.bundledQuery),readTime:KA(a.readTime)}}(r)),Lt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dxe{constructor(){this.overlays=new cs(yr.comparator),this.qr=new Map}getOverlay(t,r){return Lt.resolve(this.overlays.get(r))}getOverlays(t,r){const n=jp();return Lt.forEach(r,a=>this.getOverlay(t,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(t,r,n){return n.forEach((a,s)=>{this.St(t,r,s)}),Lt.resolve()}removeOverlaysForBatchId(t,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),Lt.resolve()}getOverlaysForCollection(t,r,n){const a=jp(),s=r.length+1,i=new yr(r.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return Lt.resolve(a)}getOverlaysForCollectionGroup(t,r,n,a){let s=new cs((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=jp(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=jp(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=a)););return Lt.resolve(o)}St(t,r,n){const a=this.overlays.get(n.key);if(a!==null){const i=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Bge(r,n));let s=this.qr.get(r);s===void 0&&(s=jn(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Axe{constructor(){this.sessionToken=Yi.EMPTY_BYTE_STRING}getSessionToken(t){return Lt.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Lt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(){this.Qr=new _i(Hi.$r),this.Ur=new _i(Hi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,r){const n=new Hi(t,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,r){t.forEach(n=>this.addReference(n,r))}removeReference(t,r){this.Gr(new Hi(t,r))}zr(t,r){t.forEach(n=>this.removeReference(n,r))}jr(t){const r=new yr(new Na([])),n=new Hi(r,t),a=new Hi(r,t+1),s=[];return this.Ur.forEachInRange([n,a],i=>{this.Gr(i),s.push(i.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const r=new yr(new Na([])),n=new Hi(r,t),a=new Hi(r,t+1);let s=jn();return this.Ur.forEachInRange([n,a],i=>{s=s.add(i.key)}),s}containsKey(t){const r=new Hi(t,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&t.isEqual(n.key)}}class Hi{constructor(t,r){this.key=t,this.Yr=r}static $r(t,r){return yr.comparator(t.key,r.key)||Bn(t.Yr,r.Yr)}static Kr(t,r){return Bn(t.Yr,r.Yr)||yr.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fxe{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new _i(Hi.$r)}checkEmpty(t){return Lt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,n,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new kge(s,r,n,a);this.mutationQueue.push(i);for(const o of a)this.Zr=this.Zr.add(new Hi(o.key,s)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return Lt.resolve(i)}lookupMutationBatch(t,r){return Lt.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(t,r){const n=r+1,a=this.ei(n),s=a<0?0:a;return Lt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Lt.resolve(this.mutationQueue.length===0?ND:this.tr-1)}getAllMutationBatches(t){return Lt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const n=new Hi(r,0),a=new Hi(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,a],i=>{const o=this.Xr(i.Yr);s.push(o)}),Lt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,r){let n=new _i(Bn);return r.forEach(a=>{const s=new Hi(a,0),i=new Hi(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,i],o=>{n=n.add(o.Yr)})}),Lt.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,r){const n=r.path,a=n.length+1;let s=n;yr.isDocumentKey(s)||(s=s.child(""));const i=new Hi(new yr(s),0);let o=new _i(Bn);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(o=o.add(c.Yr)),!0)},i),Lt.resolve(this.ti(o))}ti(t){const r=[];return t.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(t,r){sa(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Lt.forEach(r.mutations,a=>{const s=new Hi(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Zr=n})}ir(t){}containsKey(t,r){const n=new Hi(r,0),a=this.Zr.firstAfterOrEqual(n);return Lt.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,Lt.resolve()}ni(t,r){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const r=this.ei(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hxe{constructor(t){this.ri=t,this.docs=function(){return new cs(yr.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,i=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const n=this.docs.get(r);return Lt.resolve(n?n.document.mutableCopy():Ko.newInvalidDocument(r))}getEntries(t,r){let n=ph();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():Ko.newInvalidDocument(a))}),Lt.resolve(n)}getDocumentsMatchingQuery(t,r,n,a){let s=ph();const i=r.path,o=new yr(i.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||Vpe(Hpe(d),n)<=0||(a.has(d.key)||n4(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Lt.resolve(s)}getAllFromCollectionGroup(t,r,n,a){zr(9500)}ii(t,r){return Lt.forEach(this.docs,n=>r(n))}newChangeBuffer(t){return new mxe(this)}getSize(t){return Lt.resolve(this.size)}}class mxe extends oxe{constructor(t){super(),this.Nr=t}applyChanges(t){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(n)}),Lt.waitFor(r)}getFromCache(t,r){return this.Nr.getEntry(t,r)}getAllFromCache(t,r){return this.Nr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pxe{constructor(t){this.persistence=t,this.si=new kg(r=>kD(r),BD),this.lastRemoteSnapshotVersion=Yr.min(),this.highestTargetId=0,this.oi=0,this._i=new DD,this.targetCount=0,this.ai=Gv.ur()}forEachTarget(t,r){return this.si.forEach((n,a)=>r(a)),Lt.resolve()}getLastRemoteSnapshotVersion(t){return Lt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Lt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Lt.resolve(this.highestTargetId)}setTargetsMetadata(t,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),Lt.resolve()}Pr(t){this.si.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.ai=new Gv(r),this.highestTargetId=r),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,r){return this.Pr(r),this.targetCount+=1,Lt.resolve()}updateTargetData(t,r){return this.Pr(r),Lt.resolve()}removeTargetData(t,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Lt.resolve()}removeTargets(t,r,n){let a=0;const s=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(t,o.targetId)),a++)}),Lt.waitFor(s).next(()=>a)}getTargetCount(t){return Lt.resolve(this.targetCount)}getTargetData(t,r){const n=this.si.get(r)||null;return Lt.resolve(n)}addMatchingKeys(t,r,n){return this._i.Wr(r,n),Lt.resolve()}removeMatchingKeys(t,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(i=>{s.push(a.markPotentiallyOrphaned(t,i))}),Lt.waitFor(s)}removeMatchingKeysForTargetId(t,r){return this._i.jr(r),Lt.resolve()}getMatchingKeysForTargetId(t,r){const n=this._i.Hr(r);return Lt.resolve(n)}containsKey(t,r){return Lt.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nZ{constructor(t,r){this.ui={},this.overlays={},this.ci=new YS(0),this.li=!1,this.li=!0,this.hi=new Axe,this.referenceDelegate=t(this),this.Pi=new pxe(this),this.indexManager=new exe,this.remoteDocumentCache=function(a){return new hxe(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new Jge(r),this.Ii=new uxe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new dxe,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let n=this.ui[t.toKey()];return n||(n=new fxe(r,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,r,n){cr("MemoryPersistence","Starting transaction:",t);const a=new gxe(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(t,r){return Lt.or(Object.values(this.ui).map(n=>()=>n.containsKey(t,r)))}}class gxe extends $pe{constructor(t){super(),this.currentSequenceNumber=t}}class PD{constructor(t){this.persistence=t,this.Ri=new DD,this.Vi=null}static mi(t){return new PD(t)}get fi(){if(this.Vi)return this.Vi;throw zr(60996)}addReference(t,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),Lt.resolve()}removeReference(t,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),Lt.resolve()}markPotentiallyOrphaned(t,r){return this.fi.add(r.toString()),Lt.resolve()}removeTarget(t,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,r.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(t,r))}Ei(){this.Vi=new Set}di(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Lt.forEach(this.fi,n=>{const a=yr.fromPath(n);return this.gi(t,a).next(s=>{s||r.removeEntry(a,Yr.min())})}).next(()=>(this.Vi=null,r.apply(t)))}updateLimboDocument(t,r){return this.gi(t,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(t){return 0}gi(t,r){return Lt.or([()=>Lt.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ai(t,r)])}}class K5{constructor(t,r){this.persistence=t,this.pi=new kg(n=>qpe(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=ixe(this,r)}static mi(t,r){return new K5(t,r)}Ei(){}di(t){return Lt.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}gr(t){const r=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(n=>r.next(a=>n+a))}wr(t){let r=0;return this.pr(t,n=>{r++}).next(()=>r)}pr(t,r){return Lt.forEach(this.pi,(n,a)=>this.br(t,n,a).next(s=>s?Lt.resolve():r(a)))}removeTargets(t,r,n){return this.persistence.getTargetCache().removeTargets(t,r,n)}removeOrphanedDocuments(t,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(t,i=>this.br(t,i,r).next(o=>{o||(n++,s.removeEntry(i,Yr.min()))})).next(()=>s.apply(t)).next(()=>n)}markPotentiallyOrphaned(t,r){return this.pi.set(r,t.currentSequenceNumber),Lt.resolve()}removeTarget(t,r){const n=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Lt.resolve()}removeReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Lt.resolve()}updateLimboDocument(t,r){return this.pi.set(r,t.currentSequenceNumber),Lt.resolve()}Ti(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=W_(t.data.value)),r}br(t,r,n){return Lt.or([()=>this.persistence.Ai(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const a=this.pi.get(r);return Lt.resolve(a!==void 0&&a>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(t,r,n,a){this.targetId=t,this.fromCache=r,this.Es=n,this.ds=a}static As(t,r){let n=jn(),a=jn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new RD(t,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xxe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vxe{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Xfe()?8:Gpe(nl())>0?6:4}()}initialize(t,r){this.ps=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,n,a){const s={result:null};return this.ys(t,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.ws(t,r,a,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new xxe;return this.Ss(t,r,i).next(o=>{if(s.result=o,this.Vs)return this.bs(t,r,i,o.size)})}).next(()=>s.result)}bs(t,r,n,a){return n.documentReadCount<this.fs?(Gx()<=kn.DEBUG&&cr("QueryEngine","SDK will not create cache indexes for query:",Kx(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Lt.resolve()):(Gx()<=kn.DEBUG&&cr("QueryEngine","Query:",Kx(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(Gx()<=kn.DEBUG&&cr("QueryEngine","The SDK decides to create cache indexes for query:",Kx(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,GA(r))):Lt.resolve())}ys(t,r){if(T9(r))return Lt.resolve(null);let n=GA(r);return this.indexManager.getIndexType(t,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=z5(r,null,"F"),n=GA(r)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const i=jn(...s);return this.ps.getDocuments(t,i).next(o=>this.indexManager.getMinOffset(t,n).next(c=>{const u=this.Ds(r,o);return this.Cs(r,u,i,c.readTime)?this.ys(t,z5(r,null,"F")):this.vs(t,u,r,c)}))})))}ws(t,r,n,a){return T9(r)||a.isEqual(Yr.min())?Lt.resolve(null):this.ps.getDocuments(t,n).next(s=>{const i=this.Ds(r,s);return this.Cs(r,i,n,a)?Lt.resolve(null):(Gx()<=kn.DEBUG&&cr("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Kx(r)),this.vs(t,i,r,Qpe(a,_w)).next(o=>o))})}Ds(t,r){let n=new _i(OJ(t));return r.forEach((a,s)=>{n4(t,s)&&(n=n.add(s))}),n}Cs(t,r,n,a){if(t.limit===null)return!1;if(n.size!==r.size)return!0;const s=t.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(t,r,n){return Gx()<=kn.DEBUG&&cr("QueryEngine","Using full collection scan to execute query:",Kx(r)),this.ps.getDocumentsMatchingQuery(t,r,fm.min(),n)}vs(t,r,n,a){return this.ps.getDocumentsMatchingQuery(t,n,a).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="LocalStore",bxe=3e8;class yxe{constructor(t,r,n,a){this.persistence=t,this.Fs=r,this.serializer=a,this.Ms=new cs(Bn),this.xs=new kg(s=>kD(s),BD),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new cxe(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ms))}}function wxe(e,t,r,n){return new yxe(e,t,r,n)}async function aZ(e,t){const r=tn(e);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Bs(t),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],o=[];let c=jn();for(const u of a){i.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({Ls:u,removedBatchIds:i,addedBatchIds:o}))})})}function Exe(e,t){const r=tn(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=t.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(o,c,u,d){const f=u.batch,h=f.keys();let p=Lt.resolve();return h.forEach(g=>{p=p.next(()=>d.getEntry(c,g)).next(x=>{const b=u.docVersions.get(g);sa(b!==null,48541),x.version.compareTo(b)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(c,f))}(r,n,t,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let c=jn();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c}(t))).next(()=>r.localDocuments.getDocuments(n,a))})}function sZ(e){const t=tn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Pi.getLastRemoteSnapshotVersion(r))}function Cxe(e,t){const r=tn(e),n=t.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const o=[];t.targetChanges.forEach((d,f)=>{const h=a.get(f);if(!h)return;o.push(r.Pi.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(s,d.addedDocuments,f)));let p=h.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?p=p.withResumeToken(Yi.EMPTY_BYTE_STRING,Yr.min()).withLastLimboFreeSnapshotVersion(Yr.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,n)),a=a.insert(f,p),function(x,b,y){return x.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=bxe?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,p,d)&&o.push(r.Pi.updateTargetData(s,p))});let c=ph(),u=jn();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(_xe(s,i,t.documentUpdates).next(d=>{c=d.ks,u=d.qs})),!n.isEqual(Yr.min())){const d=r.Pi.getLastRemoteSnapshotVersion(s).next(f=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(d)}return Lt.waitFor(o).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.Ms=a,s))}function _xe(e,t,r){let n=jn(),a=jn();return r.forEach(s=>n=n.add(s)),t.getEntries(e,n).next(s=>{let i=ph();return r.forEach((o,c)=>{const u=s.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(o)),c.isNoDocument()&&c.version.isEqual(Yr.min())?(t.removeEntry(o,c.readTime),i=i.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(c),i=i.insert(o,c)):cr(LD,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)}),{ks:i,qs:a}})}function Nxe(e,t){const r=tn(e);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=ND),r.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function Sxe(e,t){const r=tn(e);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,t).next(s=>s?(a=s,Lt.resolve(a)):r.Pi.allocateTargetId(n).next(i=>(a=new H0(t,i,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(t,n.targetId)),n})}async function B6(e,t,r){const n=tn(e),a=n.Ms.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,a))}catch(i){if(!j1(i))throw i;cr(LD,`Failed to update sequence numbers for target ${t}: ${i}`)}n.Ms=n.Ms.remove(t),n.xs.delete(a.target)}function z9(e,t,r){const n=tn(e);let a=Yr.min(),s=jn();return n.persistence.runTransaction("Execute query","readwrite",i=>function(c,u,d){const f=tn(c),h=f.xs.get(d);return h!==void 0?Lt.resolve(f.Ms.get(h)):f.Pi.getTargetData(u,d)}(n,i,GA(t)).next(o=>{if(o)return a=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(i,o.targetId).next(c=>{s=c})}).next(()=>n.Fs.getDocumentsMatchingQuery(i,t,r?a:Yr.min(),r?s:jn())).next(o=>(kxe(n,fge(t),o),{documents:o,Qs:s})))}function kxe(e,t,r){let n=e.Os.get(t)||Yr.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),e.Os.set(t,n)}class $9{constructor(){this.activeTargetIds=vge()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Bxe{constructor(){this.Mo=new $9,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,n){}addLocalQueryTarget(t,r=!0){return r&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,r,n){this.xo[t]=r}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new $9,Promise.resolve()}handleUserChange(t,r,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jxe{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G9="ConnectivityMonitor";class K9{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){cr(G9,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){cr(G9,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xC=null;function j6(){return xC===null?xC=function(){return 268435456+Math.round(2147483648*Math.random())}():xC++,"0x"+xC.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j="RestConnection",Txe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ixe{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+t.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===Q5?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(t,r,n,a,s){const i=j6(),o=this.zo(t,r.toUriEncodedString());cr(_j,`Sending RPC '${t}' ${i}:`,o,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,a,s);const{host:u}=new URL(o),d=Bh(u);return this.Jo(t,o,c,n,d).then(f=>(cr(_j,`Received RPC '${t}' ${i}: `,f),f),f=>{throw ig(_j,`RPC '${t}' ${i} failed with error: `,f,"url: ",o,"request:",n),f})}Ho(t,r,n,a,s,i){return this.Go(t,r,n,a,s)}jo(t,r,n){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+k1}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>t[s]=a),n&&n.headers.forEach((a,s)=>t[s]=a)}zo(t,r){const n=Txe[t];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fxe{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do="WebChannelConnection";class Oxe extends Ixe{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,r,n,a,s){const i=j6();return new Promise((o,c)=>{const u=new iJ;u.setWithCredentials(!0),u.listenOnce(oJ.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case q_.NO_ERROR:const f=u.getResponseJson();cr(Do,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(f)),o(f);break;case q_.TIMEOUT:cr(Do,`RPC '${t}' ${i} timed out`),c(new Xt(Ct.DEADLINE_EXCEEDED,"Request time out"));break;case q_.HTTP_ERROR:const h=u.getStatus();if(cr(Do,`RPC '${t}' ${i} failed with status:`,h,"response text:",u.getResponseText()),h>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const x=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(Ct).indexOf(w)>=0?w:Ct.UNKNOWN}(g.status);c(new Xt(x,g.message))}else c(new Xt(Ct.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Xt(Ct.UNAVAILABLE,"Connection failed."));break;default:zr(9055,{l_:t,streamId:i,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{cr(Do,`RPC '${t}' ${i} completed.`)}});const d=JSON.stringify(a);cr(Do,`RPC '${t}' ${i} sending request:`,a),u.send(r,"POST",d,n,15)})}T_(t,r,n){const a=j6(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=uJ(),o=cJ(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");cr(Do,`Creating RPC '${t}' stream ${a}: ${d}`,c);const f=i.createWebChannel(d,c);this.I_(f);let h=!1,p=!1;const g=new Fxe({Yo:b=>{p?cr(Do,`Not sending because RPC '${t}' stream ${a} is closed:`,b):(h||(cr(Do,`Opening RPC '${t}' stream ${a} transport.`),f.open(),h=!0),cr(Do,`RPC '${t}' stream ${a} sending:`,b),f.send(b))},Zo:()=>f.close()}),x=(b,y,w)=>{b.listen(y,_=>{try{w(_)}catch(B){setTimeout(()=>{throw B},0)}})};return x(f,_y.EventType.OPEN,()=>{p||(cr(Do,`RPC '${t}' stream ${a} transport opened.`),g.o_())}),x(f,_y.EventType.CLOSE,()=>{p||(p=!0,cr(Do,`RPC '${t}' stream ${a} transport closed`),g.a_(),this.E_(f))}),x(f,_y.EventType.ERROR,b=>{p||(p=!0,ig(Do,`RPC '${t}' stream ${a} transport errored. Name:`,b.name,"Message:",b.message),g.a_(new Xt(Ct.UNAVAILABLE,"The operation could not be completed")))}),x(f,_y.EventType.MESSAGE,b=>{var y;if(!p){const w=b.data[0];sa(!!w,16349);const _=w,B=(_==null?void 0:_.error)||((y=_[0])==null?void 0:y.error);if(B){cr(Do,`RPC '${t}' stream ${a} received error:`,B);const k=B.status;let I=function(j){const R=si[j];if(R!==void 0)return GJ(R)}(k),E=B.message;I===void 0&&(I=Ct.INTERNAL,E="Unknown error status: "+k+" with message "+B.message),p=!0,g.a_(new Xt(I,E)),f.close()}else cr(Do,`RPC '${t}' stream ${a} received:`,w),g.u_(w)}}),x(o,lJ.STAT_EVENT,b=>{b.stat===x6.PROXY?cr(Do,`RPC '${t}' stream ${a} detected buffering proxy`):b.stat===x6.NOPROXY&&cr(Do,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{g.__()},0),g}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(r=>r===t)}}function Nj(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(e){return new Lge(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iZ{constructor(t,r,n=1e3,a=1.5,s=6e4){this.Mi=t,this.timerId=r,this.d_=n,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&cr("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9="PersistentStream";class oZ{constructor(t,r,n,a,s,i,o,c){this.Mi=t,this.S_=n,this.b_=a,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new iZ(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===Ct.RESOURCE_EXHAUSTED?(mh(r.toString()),mh("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===Ct.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(r)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{t(()=>{const a=new Xt(Ct.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(t,r){const n=this.W_(this.D_);this.stream=this.j_(t,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return cr(q9,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return r=>{this.Mi.enqueueAndForget(()=>this.D_===t?r():(cr(q9,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Dxe extends oZ{constructor(t,r,n,a,s,i){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}j_(t,r){return this.connection.T_("Listen",t,r)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=Qge(this.serializer,t),n=function(s){if(!("targetChange"in s))return Yr.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Yr.min():i.readTime?KA(i.readTime):Yr.min()}(t);return this.listener.H_(r,n)}Y_(t){const r={};r.database=k6(this.serializer),r.addTarget=function(s,i){let o;const c=i.target;if(o=E6(c)?{documents:zge(s,c)}:{query:$ge(s,c).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=WJ(s,i.resumeToken);const u=_6(s,i.expectedCount);u!==null&&(o.expectedCount=u)}else if(i.snapshotVersion.compareTo(Yr.min())>0){o.readTime=G5(s,i.snapshotVersion.toTimestamp());const u=_6(s,i.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,t);const n=Kge(this.serializer,t);n&&(r.labels=n),this.q_(r)}Z_(t){const r={};r.database=k6(this.serializer),r.removeTarget=t,this.q_(r)}}class Pxe extends oZ{constructor(t,r,n,a,s,i){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}J_(t){return sa(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,sa(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){sa(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=Vge(t.writeResults,t.commitTime),n=KA(t.commitTime);return this.listener.na(n,r)}ra(){const t={};t.database=k6(this.serializer),this.q_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map(n=>Hge(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rxe{}class Lxe extends Rxe{constructor(t,r,n,a){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Xt(Ct.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Go(t,N6(r,n),a,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Xt(Ct.UNKNOWN,s.toString())})}Ho(t,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(t,N6(r,n),a,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Xt(Ct.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Mxe{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mh(r),this.aa=!1):cr("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="RemoteStore";class Uxe{constructor(t,r,n,a,s){this.localStore=t,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(i=>{n.enqueueAndForget(async()=>{Bg(this)&&(cr(og,"Restarting streams for network reachability change."),await async function(c){const u=tn(c);u.Ea.add(4),await j2(u),u.Ra.set("Unknown"),u.Ea.delete(4),await c4(u)}(this))})}),this.Ra=new Mxe(n,a)}}async function c4(e){if(Bg(e))for(const t of e.da)await t(!0)}async function j2(e){for(const t of e.da)await t(!1)}function lZ(e,t){const r=tn(e);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),HD(r)?QD(r):T1(r).O_()&&UD(r,t))}function MD(e,t){const r=tn(e),n=T1(r);r.Ia.delete(t),n.O_()&&cZ(r,t),r.Ia.size===0&&(n.O_()?n.L_():Bg(r)&&r.Ra.set("Unknown"))}function UD(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Yr.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}T1(e).Y_(t)}function cZ(e,t){e.Va.Ue(t),T1(e).Z_(t)}function QD(e){e.Va=new Oge({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),T1(e).start(),e.Ra.ua()}function HD(e){return Bg(e)&&!T1(e).x_()&&e.Ia.size>0}function Bg(e){return tn(e).Ea.size===0}function uZ(e){e.Va=void 0}async function Qxe(e){e.Ra.set("Online")}async function Hxe(e){e.Ia.forEach((t,r)=>{UD(e,t)})}async function Vxe(e,t){uZ(e),HD(e)?(e.Ra.ha(t),QD(e)):e.Ra.set("Unknown")}async function zxe(e,t,r){if(e.Ra.set("Online"),t instanceof qJ&&t.state===2&&t.cause)try{await async function(a,s){const i=s.cause;for(const o of s.targetIds)a.Ia.has(o)&&(await a.remoteSyncer.rejectListen(o,i),a.Ia.delete(o),a.Va.removeTarget(o))}(e,t)}catch(n){cr(og,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await q5(e,n)}else if(t instanceof J_?e.Va.Ze(t):t instanceof KJ?e.Va.st(t):e.Va.tt(t),!r.isEqual(Yr.min()))try{const n=await sZ(e.localStore);r.compareTo(n)>=0&&await function(s,i){const o=s.Va.Tt(i);return o.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(c.resumeToken,i))}}),o.targetMismatches.forEach((c,u)=>{const d=s.Ia.get(c);if(!d)return;s.Ia.set(c,d.withResumeToken(Yi.EMPTY_BYTE_STRING,d.snapshotVersion)),cZ(s,c);const f=new H0(d.target,c,u,d.sequenceNumber);UD(s,f)}),s.remoteSyncer.applyRemoteEvent(o)}(e,r)}catch(n){cr(og,"Failed to raise snapshot:",n),await q5(e,n)}}async function q5(e,t,r){if(!j1(t))throw t;e.Ea.add(1),await j2(e),e.Ra.set("Offline"),r||(r=()=>sZ(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{cr(og,"Retrying IndexedDB access"),await r(),e.Ea.delete(1),await c4(e)})}function dZ(e,t){return t().catch(r=>q5(e,r,t))}async function u4(e){const t=tn(e),r=gm(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:ND;for(;$xe(t);)try{const a=await Nxe(t.localStore,n);if(a===null){t.Ta.length===0&&r.L_();break}n=a.batchId,Gxe(t,a)}catch(a){await q5(t,a)}AZ(t)&&fZ(t)}function $xe(e){return Bg(e)&&e.Ta.length<10}function Gxe(e,t){e.Ta.push(t);const r=gm(e);r.O_()&&r.X_&&r.ea(t.mutations)}function AZ(e){return Bg(e)&&!gm(e).x_()&&e.Ta.length>0}function fZ(e){gm(e).start()}async function Kxe(e){gm(e).ra()}async function qxe(e){const t=gm(e);for(const r of e.Ta)t.ea(r.mutations)}async function Wxe(e,t,r){const n=e.Ta.shift(),a=ID.from(n,t,r);await dZ(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await u4(e)}async function Xxe(e,t){t&&gm(e).X_&&await async function(n,a){if(function(i){return Tge(i)&&i!==Ct.ABORTED}(a.code)){const s=n.Ta.shift();gm(n).B_(),await dZ(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await u4(n)}}(e,t),AZ(e)&&fZ(e)}async function W9(e,t){const r=tn(e);r.asyncQueue.verifyOperationInProgress(),cr(og,"RemoteStore received new credentials");const n=Bg(r);r.Ea.add(3),await j2(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await c4(r)}async function Yxe(e,t){const r=tn(e);t?(r.Ea.delete(2),await c4(r)):t||(r.Ea.add(2),await j2(r),r.Ra.set("Unknown"))}function T1(e){return e.ma||(e.ma=function(r,n,a){const s=tn(r);return s.sa(),new Dxe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:Qxe.bind(null,e),t_:Hxe.bind(null,e),r_:Vxe.bind(null,e),H_:zxe.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),HD(e)?QD(e):e.Ra.set("Unknown")):(await e.ma.stop(),uZ(e))})),e.ma}function gm(e){return e.fa||(e.fa=function(r,n,a){const s=tn(r);return s.sa(),new Pxe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Kxe.bind(null,e),r_:Xxe.bind(null,e),ta:qxe.bind(null,e),na:Wxe.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await u4(e)):(await e.fa.stop(),e.Ta.length>0&&(cr(og,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(t,r,n,a,s){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new nh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,n,a,s){const i=Date.now()+n,o=new VD(t,r,i,a,s);return o.start(n),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Xt(Ct.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zD(e,t){if(mh("AsyncQueue",`${t}: ${e}`),j1(e))return new Xt(Ct.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{static emptySet(t){return new vv(t.comparator)}constructor(t){this.comparator=t?(r,n)=>t(r,n)||yr.comparator(r.key,n.key):(r,n)=>yr.comparator(r.key,n.key),this.keyedMap=Ny(),this.sortedSet=new cs(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,n)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof vv)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const n=new vv;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(){this.ga=new cs(yr.comparator)}track(t){const r=t.doc.key,n=this.ga.get(r);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(r,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(r):t.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):zr(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal((r,n)=>{t.push(n)}),t}}class Kv{constructor(t,r,n,a,s,i,o,c,u){this.query=t,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(t,r,n,a,s){const i=[];return r.forEach(o=>{i.push({type:0,doc:o})}),new Kv(t,r,vv.emptySet(r),i,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&r4(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,n=t.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jxe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class Zxe{constructor(){this.queries=Y9(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=tn(r),s=a.queries;a.queries=Y9(),s.forEach((i,o)=>{for(const c of o.Sa)c.onError(n)})})(this,new Xt(Ct.ABORTED,"Firestore shutting down"))}}function Y9(){return new kg(e=>FJ(e),r4)}async function $D(e,t){const r=tn(e);let n=3;const a=t.query;let s=r.queries.get(a);s?!s.ba()&&t.Da()&&(n=2):(s=new Jxe,n=t.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(i){const o=zD(i,`Initialization of query '${Kx(t.query)}' failed`);return void t.onError(o)}r.queries.set(a,s),s.Sa.push(t),t.va(r.onlineState),s.wa&&t.Fa(s.wa)&&KD(r)}async function GD(e,t){const r=tn(e),n=t.query;let a=3;const s=r.queries.get(n);if(s){const i=s.Sa.indexOf(t);i>=0&&(s.Sa.splice(i,1),s.Sa.length===0?a=t.Da()?0:1:!s.ba()&&t.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function eve(e,t){const r=tn(e);let n=!1;for(const a of t){const s=a.query,i=r.queries.get(s);if(i){for(const o of i.Sa)o.Fa(a)&&(n=!0);i.wa=a}}n&&KD(r)}function tve(e,t,r){const n=tn(e),a=n.queries.get(t);if(a)for(const s of a.Sa)s.onError(r);n.queries.delete(t)}function KD(e){e.Ca.forEach(t=>{t.next()})}var T6,J9;(J9=T6||(T6={})).Ma="default",J9.Cache="cache";class qD{constructor(t,r,n){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const a of t.docChanges)a.type!==3&&n.push(a);t=new Kv(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=Kv.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==T6.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hZ{constructor(t){this.key=t}}class mZ{constructor(t){this.key=t}}class rve{constructor(t,r){this.query=t,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=jn(),this.mutatedKeys=jn(),this.eu=OJ(t),this.tu=new vv(this.eu)}get nu(){return this.Ya}ru(t,r){const n=r?r.iu:new X9,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,i=a,o=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((d,f)=>{const h=a.get(d),p=n4(this.query,f)?f:null,g=!!h&&this.mutatedKeys.has(h.key),x=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let b=!1;h&&p?h.data.isEqual(p.data)?g!==x&&(n.track({type:3,doc:p}),b=!0):this.su(h,p)||(n.track({type:2,doc:p}),b=!0,(c&&this.eu(p,c)>0||u&&this.eu(p,u)<0)&&(o=!0)):!h&&p?(n.track({type:0,doc:p}),b=!0):h&&!p&&(n.track({type:1,doc:h}),b=!0,(c||u)&&(o=!0)),b&&(p?(i=i.add(p),s=x?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{tu:i,iu:n,Cs:o,mutatedKeys:s}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,n,a){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const i=t.iu.ya();i.sort((d,f)=>function(p,g){const x=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zr(20277,{Rt:b})}};return x(p)-x(g)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(n),a=a??!1;const o=r&&!a?this._u():[],c=this.Xa.size===0&&this.current&&!a?1:0,u=c!==this.Za;return this.Za=c,i.length!==0||u?{snapshot:new Kv(this.query,t.tu,s,i,t.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new X9,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=jn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return t.forEach(n=>{this.Xa.has(n)||r.push(new mZ(n))}),this.Xa.forEach(n=>{t.has(n)||r.push(new hZ(n))}),r}cu(t){this.Ya=t.Qs,this.Xa=jn();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return Kv.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const WD="SyncEngine";class nve{constructor(t,r,n){this.query=t,this.targetId=r,this.view=n}}class ave{constructor(t){this.key=t,this.hu=!1}}class sve{constructor(t,r,n,a,s,i){this.localStore=t,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new kg(o=>FJ(o),r4),this.Iu=new Map,this.Eu=new Set,this.du=new cs(yr.comparator),this.Au=new Map,this.Ru=new DD,this.Vu={},this.mu=new Map,this.fu=Gv.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ive(e,t,r=!0){const n=yZ(e);let a;const s=n.Tu.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await pZ(n,t,r,!0),a}async function ove(e,t){const r=yZ(e);await pZ(r,t,!0,!1)}async function pZ(e,t,r,n){const a=await Sxe(e.localStore,GA(t)),s=a.targetId,i=e.sharedClientState.addLocalQueryTarget(s,r);let o;return n&&(o=await lve(e,t,s,i==="current",a.resumeToken)),e.isPrimaryClient&&r&&lZ(e.remoteStore,a),o}async function lve(e,t,r,n,a){e.pu=(f,h,p)=>async function(x,b,y,w){let _=b.view.ru(y);_.Cs&&(_=await z9(x.localStore,b.query,!1).then(({documents:E})=>b.view.ru(E,_)));const B=w&&w.targetChanges.get(b.targetId),k=w&&w.targetMismatches.get(b.targetId)!=null,I=b.view.applyChanges(_,x.isPrimaryClient,B,k);return eQ(x,b.targetId,I.au),I.snapshot}(e,f,h,p);const s=await z9(e.localStore,t,!0),i=new rve(t,s.Qs),o=i.ru(s.documents),c=B2.createSynthesizedTargetChangeForCurrentChange(r,n&&e.onlineState!=="Offline",a),u=i.applyChanges(o,e.isPrimaryClient,c);eQ(e,r,u.au);const d=new nve(t,r,i);return e.Tu.set(t,d),e.Iu.has(r)?e.Iu.get(r).push(t):e.Iu.set(r,[t]),u.snapshot}async function cve(e,t,r){const n=tn(e),a=n.Tu.get(t),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(i=>!r4(i,t))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await B6(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&MD(n.remoteStore,a.targetId),I6(n,a.targetId)}).catch(B1)):(I6(n,a.targetId),await B6(n.localStore,a.targetId,!0))}async function uve(e,t){const r=tn(e),n=r.Tu.get(t),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),MD(r.remoteStore,n.targetId))}async function dve(e,t,r){const n=xve(e);try{const a=await function(i,o){const c=tn(i),u=sr.now(),d=o.reduce((p,g)=>p.add(g.key),jn());let f,h;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=ph(),x=jn();return c.Ns.getEntries(p,d).next(b=>{g=b,g.forEach((y,w)=>{w.isValidDocument()||(x=x.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,g)).next(b=>{f=b;const y=[];for(const w of o){const _=Nge(w,f.get(w.key).overlayedDocument);_!=null&&y.push(new Fm(w.key,_,NJ(_.value.mapValue),yl.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,y,o)}).next(b=>{h=b;const y=b.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(p,b.batchId,y)})}).then(()=>({batchId:h.batchId,changes:PJ(f)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(a.batchId),function(i,o,c){let u=i.Vu[i.currentUser.toKey()];u||(u=new cs(Bn)),u=u.insert(o,c),i.Vu[i.currentUser.toKey()]=u}(n,a.batchId,r),await T2(n,a.changes),await u4(n.remoteStore)}catch(a){const s=zD(a,"Failed to persist write");r.reject(s)}}async function gZ(e,t){const r=tn(e);try{const n=await Cxe(r.localStore,t);t.targetChanges.forEach((a,s)=>{const i=r.Au.get(s);i&&(sa(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?i.hu=!0:a.modifiedDocuments.size>0?sa(i.hu,14607):a.removedDocuments.size>0&&(sa(i.hu,42227),i.hu=!1))}),await T2(r,n,t)}catch(n){await B1(n)}}function Z9(e,t,r){const n=tn(e);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,i)=>{const o=i.view.va(t);o.snapshot&&a.push(o.snapshot)}),function(i,o){const c=tn(i);c.onlineState=o;let u=!1;c.queries.forEach((d,f)=>{for(const h of f.Sa)h.va(o)&&(u=!0)}),u&&KD(c)}(n.eventManager,t),a.length&&n.Pu.H_(a),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function Ave(e,t,r){const n=tn(e);n.sharedClientState.updateQueryState(t,"rejected",r);const a=n.Au.get(t),s=a&&a.key;if(s){let i=new cs(yr.comparator);i=i.insert(s,Ko.newNoDocument(s,Yr.min()));const o=jn().add(s),c=new o4(Yr.min(),new Map,new cs(Bn),i,o);await gZ(n,c),n.du=n.du.remove(s),n.Au.delete(t),XD(n)}else await B6(n.localStore,t,!1).then(()=>I6(n,t,r)).catch(B1)}async function fve(e,t){const r=tn(e),n=t.batch.batchId;try{const a=await Exe(r.localStore,t);vZ(r,n,null),xZ(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await T2(r,a)}catch(a){await B1(a)}}async function hve(e,t,r){const n=tn(e);try{const a=await function(i,o){const c=tn(i);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,o).next(f=>(sa(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,t);vZ(n,t,r),xZ(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await T2(n,a)}catch(a){await B1(a)}}function xZ(e,t){(e.mu.get(t)||[]).forEach(r=>{r.resolve()}),e.mu.delete(t)}function vZ(e,t,r){const n=tn(e);let a=n.Vu[n.currentUser.toKey()];if(a){const s=a.get(t);s&&(r?s.reject(r):s.resolve(),a=a.remove(t)),n.Vu[n.currentUser.toKey()]=a}}function I6(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.Iu.get(t))e.Tu.delete(n),r&&e.Pu.yu(n,r);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(n=>{e.Ru.containsKey(n)||bZ(e,n)})}function bZ(e,t){e.Eu.delete(t.path.canonicalString());const r=e.du.get(t);r!==null&&(MD(e.remoteStore,r),e.du=e.du.remove(t),e.Au.delete(r),XD(e))}function eQ(e,t,r){for(const n of r)n instanceof hZ?(e.Ru.addReference(n.key,t),mve(e,n)):n instanceof mZ?(cr(WD,"Document no longer in limbo: "+n.key),e.Ru.removeReference(n.key,t),e.Ru.containsKey(n.key)||bZ(e,n.key)):zr(19791,{wu:n})}function mve(e,t){const r=t.key,n=r.path.canonicalString();e.du.get(r)||e.Eu.has(n)||(cr(WD,"New document in limbo: "+r),e.Eu.add(n),XD(e))}function XD(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const r=new yr(Na.fromString(t)),n=e.fu.next();e.Au.set(n,new ave(r)),e.du=e.du.insert(r,n),lZ(e.remoteStore,new H0(GA(t4(r.path)),n,"TargetPurposeLimboResolution",YS.ce))}}async function T2(e,t,r){const n=tn(e),a=[],s=[],i=[];n.Tu.isEmpty()||(n.Tu.forEach((o,c)=>{i.push(n.pu(c,t,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){a.push(u);const f=RD.As(c.targetId,u);s.push(f)}}))}),await Promise.all(i),n.Pu.H_(a),await async function(c,u){const d=tn(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Lt.forEach(u,h=>Lt.forEach(h.Es,p=>d.persistence.referenceDelegate.addReference(f,h.targetId,p)).next(()=>Lt.forEach(h.ds,p=>d.persistence.referenceDelegate.removeReference(f,h.targetId,p)))))}catch(f){if(!j1(f))throw f;cr(LD,"Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const p=d.Ms.get(h),g=p.snapshotVersion,x=p.withLastLimboFreeSnapshotVersion(g);d.Ms=d.Ms.insert(h,x)}}}(n.localStore,s))}async function pve(e,t){const r=tn(e);if(!r.currentUser.isEqual(t)){cr(WD,"User change. New user:",t.toKey());const n=await aZ(r.localStore,t);r.currentUser=t,function(s,i){s.mu.forEach(o=>{o.forEach(c=>{c.reject(new Xt(Ct.CANCELLED,i))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await T2(r,n.Ls)}}function gve(e,t){const r=tn(e),n=r.Au.get(t);if(n&&n.hu)return jn().add(n.key);{let a=jn();const s=r.Iu.get(t);if(!s)return a;for(const i of s){const o=r.Tu.get(i);a=a.unionWith(o.view.nu)}return a}}function yZ(e){const t=tn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gZ.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=gve.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ave.bind(null,t),t.Pu.H_=eve.bind(null,t.eventManager),t.Pu.yu=tve.bind(null,t.eventManager),t}function xve(e){const t=tn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=fve.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=hve.bind(null,t),t}class W5{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=l4(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return wxe(this.persistence,new vxe,t.initialUser,this.serializer)}Cu(t){return new nZ(PD.mi,this.serializer)}Du(t){return new Bxe}async terminate(){var t,r;(t=this.gcScheduler)==null||t.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}W5.provider={build:()=>new W5};class vve extends W5{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){sa(this.persistence.referenceDelegate instanceof K5,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new axe(n,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?zl.withCacheSize(this.cacheSizeBytes):zl.DEFAULT;return new nZ(n=>K5.mi(n,r),this.serializer)}}class F6{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Z9(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=pve.bind(null,this.syncEngine),await Yxe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Zxe}()}createDatastore(t){const r=l4(t.databaseInfo.databaseId),n=function(s){return new Oxe(s)}(t.databaseInfo);return function(s,i,o,c){return new Lxe(s,i,o,c)}(t.authCredentials,t.appCheckCredentials,n,r)}createRemoteStore(t){return function(n,a,s,i,o){return new Uxe(n,a,s,i,o)}(this.localStore,this.datastore,t.asyncQueue,r=>Z9(this.syncEngine,r,0),function(){return K9.v()?new K9:new jxe}())}createSyncEngine(t,r){return function(a,s,i,o,c,u,d){const f=new sve(a,s,i,o,c,u);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(a){const s=tn(a);cr(og,"RemoteStore shutting down."),s.Ea.add(5),await j2(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(r=this.eventManager)==null||r.terminate()}}F6.provider={build:()=>new F6};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):mh("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="FirestoreClient";class bve{constructor(t,r,n,a,s){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Vo.UNAUTHENTICATED,this.clientId=WS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{cr(xm,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(cr(xm,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new nh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const n=zD(r,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function Sj(e,t){e.asyncQueue.verifyOperationInProgress(),cr(xm,"Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async a=>{n.isEqual(a)||(await aZ(t.localStore,a),n=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function tQ(e,t){e.asyncQueue.verifyOperationInProgress();const r=await yve(e);cr(xm,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(n=>W9(t.remoteStore,n)),e.setAppCheckTokenChangeListener((n,a)=>W9(t.remoteStore,a)),e._onlineComponents=t}async function yve(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){cr(xm,"Using user provided OfflineComponentProvider");try{await Sj(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(a){return a.name==="FirebaseError"?a.code===Ct.FAILED_PRECONDITION||a.code===Ct.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;ig("Error using user provided cache. Falling back to memory cache: "+r),await Sj(e,new W5)}}else cr(xm,"Using default OfflineComponentProvider"),await Sj(e,new vve(void 0));return e._offlineComponents}async function wZ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(cr(xm,"Using user provided OnlineComponentProvider"),await tQ(e,e._uninitializedComponentsProvider._online)):(cr(xm,"Using default OnlineComponentProvider"),await tQ(e,new F6))),e._onlineComponents}function wve(e){return wZ(e).then(t=>t.syncEngine)}async function X5(e){const t=await wZ(e),r=t.eventManager;return r.onListen=ive.bind(null,t.syncEngine),r.onUnlisten=cve.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=ove.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=uve.bind(null,t.syncEngine),r}function Eve(e,t,r={}){const n=new nh;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,o,c,u){const d=new YD({next:h=>{d.Nu(),i.enqueueAndForget(()=>GD(s,f));const p=h.docs.has(o);!p&&h.fromCache?u.reject(new Xt(Ct.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&c&&c.source==="server"?u.reject(new Xt(Ct.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new qD(t4(o.path),d,{includeMetadataChanges:!0,qa:!0});return $D(s,f)}(await X5(e),e.asyncQueue,t,r,n)),n.promise}function Cve(e,t,r={}){const n=new nh;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,o,c,u){const d=new YD({next:h=>{d.Nu(),i.enqueueAndForget(()=>GD(s,f)),h.fromCache&&c.source==="server"?u.reject(new Xt(Ct.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new qD(o,d,{includeMetadataChanges:!0,qa:!0});return $D(s,f)}(await X5(e),e.asyncQueue,t,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EZ(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rQ=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CZ="firestore.googleapis.com",nQ=!0;class aQ{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Xt(Ct.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=CZ,this.ssl=nQ}else this.host=t.host,this.ssl=t.ssl??nQ;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=rZ;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<rxe)throw new Xt(Ct.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}mJ("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=EZ(t.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Xt(Ct.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Xt(Ct.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Xt(Ct.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class d4{constructor(t,r,n,a){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aQ({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xt(Ct.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Xt(Ct.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aQ(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new fJ;switch(n.type){case"firstParty":return new Ope(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Xt(Ct.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=rQ.get(r);n&&(cr("ComponentProvider","Removing Datastore"),rQ.delete(r),n.terminate())}(this),Promise.resolve()}}function _Z(e,t,r,n={}){var u;e=el(e,d4);const a=Bh(t),s=e._getSettings(),i={...s,emulatorOptions:e._getEmulatorOptions()},o=`${t}:${r}`;a&&(HS(`https://${o}`),VS("Firestore",!0)),s.host!==CZ&&s.host!==o&&ig("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:o,ssl:a,emulatorOptions:n};if(!dm(c,i)&&(e._setSettings(c),n.mockUserToken)){let d,f;if(typeof n.mockUserToken=="string")d=n.mockUserToken,f=Vo.MOCK_USER;else{d=vY(n.mockUserToken,(u=e._app)==null?void 0:u.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new Xt(Ct.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Vo(h)}e._authCredentials=new Tpe(new AJ(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(t,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Qd(this.firestore,t,this._query)}}class is{constructor(t,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ah(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new is(this.firestore,t,this._key)}toJSON(){return{type:is._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,n){if(S2(r,is._jsonSchema))return new is(t,n||null,new yr(Na.fromString(r.referencePath)))}}is._jsonSchemaVersion="firestore/documentReference/1.0",is._jsonSchema={type:fi("string",is._jsonSchemaVersion),referencePath:fi("string")};class ah extends Qd{constructor(t,r,n){super(t,r,t4(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new is(this.firestore,null,new yr(t))}withConverter(t){return new ah(this.firestore,t,this._path)}}function kt(e,t,...r){if(e=Xn(e),hJ("collection","path",t),e instanceof d4){const n=Na.fromString(t,...r);return x9(n),new ah(e,null,n)}{if(!(e instanceof is||e instanceof ah))throw new Xt(Ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Na.fromString(t,...r));return x9(n),new ah(e.firestore,null,n)}}function dr(e,t,...r){if(e=Xn(e),arguments.length===1&&(t=WS.newId()),hJ("doc","path",t),e instanceof d4){const n=Na.fromString(t,...r);return g9(n),new is(e,null,new yr(n))}{if(!(e instanceof is||e instanceof ah))throw new Xt(Ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Na.fromString(t,...r));return g9(n),new is(e.firestore,e instanceof ah?e.converter:null,new yr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sQ="AsyncQueue";class iQ{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new iZ(this,"async_queue_retry"),this._c=()=>{const n=Nj();n&&cr(sQ,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const r=Nj();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=Nj();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const r=new nh;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!j1(t))throw t;cr(sQ,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const r=this.ac.then(()=>(this.rc=!0,t().catch(n=>{throw this.nc=n,this.rc=!1,mh("INTERNAL UNHANDLED ERROR: ",oQ(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(t,r,n){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const a=VD.createAndSchedule(this,t,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&zr(47125,{Pc:oQ(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function oQ(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lQ(e){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(e,["next","error","complete"])}class Md extends d4{constructor(t,r,n,a){super(t,r,n,a),this.type="firestore",this._queue=new iQ,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new iQ(t),this._firestoreClient=void 0,await t}}}function JD(e,t){const r=typeof e=="object"?e:zS(),n=typeof e=="string"?e:Q5,a=E2(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=fD("firestore");s&&_Z(a,...s)}return a}function I1(e){if(e._terminated)throw new Xt(Ct.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||_ve(e),e._firestoreClient}function _ve(e){var n,a,s;const t=e._freezeSettings(),r=function(o,c,u,d){return new Ype(o,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,EZ(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((n=e._app)==null?void 0:n.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(a=t.localCache)!=null&&a._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new bve(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ic(Yi.fromBase64String(t))}catch(r){throw new Xt(Ct.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new Ic(Yi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ic._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(S2(t,Ic._jsonSchema))return Ic.fromBase64String(t.bytes)}}Ic._jsonSchemaVersion="firestore/bytes/1.0",Ic._jsonSchema={type:fi("string",Ic._jsonSchemaVersion),bytes:fi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Xt(Ct.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Xt(Ct.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Xt(Ct.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Bn(this._lat,t._lat)||Bn(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bd._jsonSchemaVersion}}static fromJSON(t){if(S2(t,Bd._jsonSchema))return new Bd(t.latitude,t.longitude)}}Bd._jsonSchemaVersion="firestore/geoPoint/1.0",Bd._jsonSchema={type:fi("string",Bd._jsonSchemaVersion),latitude:fi("number"),longitude:fi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:jd._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(S2(t,jd._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(r=>typeof r=="number"))return new jd(t.vectorValues);throw new Xt(Ct.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}jd._jsonSchemaVersion="firestore/vectorValue/1.0",jd._jsonSchema={type:fi("string",jd._jsonSchemaVersion),vectorValues:fi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nve=/^__.*__$/;class Sve{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return this.fieldMask!==null?new Fm(t,this.data,this.fieldMask,r,this.fieldTransforms):new k2(t,this.data,r,this.fieldTransforms)}}class NZ{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return new Fm(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function SZ(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zr(40011,{Ac:e})}}class A4{constructor(t,r,n,a,s,i){this.settings=t,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new A4({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.gc(t),n}yc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Y5(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(SZ(this.Ac)&&Nve.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class kve{constructor(t,r,n){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=n||l4(t)}Cc(t,r,n,a=!1){return new A4({Ac:t,methodName:r,Dc:n,path:Gi.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function D1(e){const t=e._freezeSettings(),r=l4(e._databaseId);return new kve(e._databaseId,!!t.ignoreUndefinedProperties,r)}function ZD(e,t,r,n,a,s={}){const i=e.Cc(s.merge||s.mergeFields?2:0,t,r,a);rP("Data must be an object, but it was:",i,n);const o=TZ(n,i);let c,u;if(s.merge)c=new Pc(i.fieldMask),u=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const h=O6(t,f,r);if(!i.contains(h))throw new Xt(Ct.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);FZ(d,h)||d.push(h)}c=new Pc(d),u=i.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=i.fieldTransforms;return new Sve(new Wl(o),c,u)}class f4 extends O1{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof f4}}function Bve(e,t,r){return new A4({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class eP extends O1{_toFieldTransform(t){return new VJ(t.path,new Bw)}isEqual(t){return t instanceof eP}}class tP extends O1{constructor(t,r){super(t),this.vc=r}_toFieldTransform(t){const r=Bve(this,t,!0),n=this.vc.map(s=>P1(s,r)),a=new $v(n);return new VJ(t.path,a)}isEqual(t){return t instanceof tP&&dm(this.vc,t.vc)}}function kZ(e,t,r,n){const a=e.Cc(1,t,r);rP("Data must be an object, but it was:",a,n);const s=[],i=Wl.empty();Im(n,(c,u)=>{const d=nP(t,c,r);u=Xn(u);const f=a.yc(d);if(u instanceof f4)s.push(d);else{const h=P1(u,f);h!=null&&(s.push(d),i.set(d,h))}});const o=new Pc(s);return new NZ(i,o,a.fieldTransforms)}function BZ(e,t,r,n,a,s){const i=e.Cc(1,t,r),o=[O6(t,n,r)],c=[a];if(s.length%2!=0)throw new Xt(Ct.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)o.push(O6(t,s[h])),c.push(s[h+1]);const u=[],d=Wl.empty();for(let h=o.length-1;h>=0;--h)if(!FZ(u,o[h])){const p=o[h];let g=c[h];g=Xn(g);const x=i.yc(p);if(g instanceof f4)u.push(p);else{const b=P1(g,x);b!=null&&(u.push(p),d.set(p,b))}}const f=new Pc(u);return new NZ(d,f,i.fieldTransforms)}function jZ(e,t,r,n=!1){return P1(r,e.Cc(n?4:3,t))}function P1(e,t){if(IZ(e=Xn(e)))return rP("Unsupported field value:",t,e),TZ(e,t);if(e instanceof O1)return function(n,a){if(!SZ(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(n,a){const s=[];let i=0;for(const o of n){let c=P1(o,a.wc(i));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),i++}return{arrayValue:{values:s}}}(e,t)}return function(n,a){if((n=Xn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return bge(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=sr.fromDate(n);return{timestampValue:G5(a.serializer,s)}}if(n instanceof sr){const s=new sr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:G5(a.serializer,s)}}if(n instanceof Bd)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ic)return{bytesValue:WJ(a.serializer,n._byteString)};if(n instanceof is){const s=a.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw a.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:OD(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof jd)return function(i,o){return{mapValue:{fields:{[CJ]:{stringValue:_J},[H5]:{arrayValue:{values:i.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return TD(o.serializer,u)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${XS(n)}`)}(e,t)}function TZ(e,t){const r={};return xJ(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Im(e,(n,a)=>{const s=P1(a,t.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function IZ(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof sr||e instanceof Bd||e instanceof Ic||e instanceof is||e instanceof O1||e instanceof jd)}function rP(e,t,r){if(!IZ(r)||!pJ(r)){const n=XS(r);throw n==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+n)}}function O6(e,t,r){if((t=Xn(t))instanceof F1)return t._internalPath;if(typeof t=="string")return nP(e,t);throw Y5("Field path arguments must be of type string or ",e,!1,void 0,r)}const jve=new RegExp("[~\\*/\\[\\]]");function nP(e,t,r){if(t.search(jve)>=0)throw Y5(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new F1(...t.split("."))._internalPath}catch{throw Y5(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function Y5(e,t,r,n,a){const s=n&&!n.isEmpty(),i=a!==void 0;let o=`Function ${t}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(s||i)&&(c+=" (found",s&&(c+=` in field ${n}`),i&&(c+=` in document ${a}`),c+=")"),new Xt(Ct.INVALID_ARGUMENT,o+e+c)}function FZ(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(t,r,n,a,s){this._firestore=t,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new is(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Tve(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(h4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Tve extends aP{data(){return super.data()}}function h4(e,t){return typeof t=="string"?nP(e,t):t instanceof F1?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OZ(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Xt(Ct.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sP{}class I2 extends sP{}function $t(e,t,...r){let n=[];t instanceof sP&&n.push(t),n=n.concat(r),function(s){const i=s.filter(c=>c instanceof m4).length,o=s.filter(c=>c instanceof F2).length;if(i>1||i>0&&o>0)throw new Xt(Ct.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class F2 extends I2{constructor(t,r,n){super(),this._field=t,this._op=r,this._value=n,this.type="where"}static _create(t,r,n){return new F2(t,r,n)}_apply(t){const r=this._parse(t);return PZ(t._query,r),new Qd(t.firestore,t.converter,C6(t._query,r))}_parse(t){const r=D1(t.firestore);return function(s,i,o,c,u,d,f){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Xt(Ct.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){uQ(f,d);const g=[];for(const x of f)g.push(cQ(c,s,x));h={arrayValue:{values:g}}}else h=cQ(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||uQ(f,d),h=jZ(o,i,f,d==="in"||d==="not-in");return Ai.create(u,d,h)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function Jr(e,t,r){const n=t,a=h4("where",e);return F2._create(a,n,r)}class m4 extends sP{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new m4(t,r)}_parse(t){const r=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Ld.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(a,s){let i=a;const o=s.getFlattenedFilters();for(const c of o)PZ(i,c),i=C6(i,c)}(t._query,r),new Qd(t.firestore,t.converter,C6(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class p4 extends I2{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new p4(t,r)}_apply(t){const r=function(a,s,i){if(a.startAt!==null)throw new Xt(Ct.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Xt(Ct.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new kw(s,i)}(t._query,this._field,this._direction);return new Qd(t.firestore,t.converter,function(a,s){const i=a.explicitOrderBy.concat([s]);return new Sg(a.path,a.collectionGroup,i,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,r))}}function Sr(e,t="asc"){const r=t,n=h4("orderBy",e);return p4._create(n,r)}class g4 extends I2{constructor(t,r,n){super(),this.type=t,this._limit=r,this._limitType=n}static _create(t,r,n){return new g4(t,r,n)}_apply(t){return new Qd(t.firestore,t.converter,z5(t._query,this._limit,this._limitType))}}function Td(e){return Upe("limit",e),g4._create("limit",e,"F")}class x4 extends I2{constructor(t,r,n){super(),this.type=t,this._docOrFields=r,this._inclusive=n}static _create(t,r,n){return new x4(t,r,n)}_apply(t){const r=Ive(t,this.type,this._docOrFields,this._inclusive);return new Qd(t.firestore,t.converter,function(a,s){return new Sg(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,s,a.endAt)}(t._query,r))}}function DZ(...e){return x4._create("startAfter",e,!1)}function Ive(e,t,r,n){if(r[0]=Xn(r[0]),r[0]instanceof aP)return function(s,i,o,c,u){if(!c)throw new Xt(Ct.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const d=[];for(const f of xv(s))if(f.field.isKeyField())d.push(V5(i,c.key));else{const h=c.data.field(f.field);if(ZS(h))throw new Xt(Ct.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const p=f.field.canonicalString();throw new Xt(Ct.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}d.push(h)}return new zv(d,u)}(e._query,e.firestore._databaseId,t,r[0]._document,n);{const a=D1(e.firestore);return function(i,o,c,u,d,f){const h=i.explicitOrderBy;if(d.length>h.length)throw new Xt(Ct.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let g=0;g<d.length;g++){const x=d[g];if(h[g].field.isKeyField()){if(typeof x!="string")throw new Xt(Ct.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof x}`);if(!jD(i)&&x.indexOf("/")!==-1)throw new Xt(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${x}' contains a slash.`);const b=i.path.child(Na.fromString(x));if(!yr.isDocumentKey(b))throw new Xt(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const y=new yr(b);p.push(V5(o,y))}else{const b=jZ(c,u,x);p.push(b)}}return new zv(p,f)}(e._query,e.firestore._databaseId,a,t,r,n)}}function cQ(e,t,r){if(typeof(r=Xn(r))=="string"){if(r==="")throw new Xt(Ct.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jD(t)&&r.indexOf("/")!==-1)throw new Xt(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=t.path.child(Na.fromString(r));if(!yr.isDocumentKey(n))throw new Xt(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return V5(e,new yr(n))}if(r instanceof is)return V5(e,r._key);throw new Xt(Ct.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${XS(r)}.`)}function uQ(e,t){if(!Array.isArray(e)||e.length===0)throw new Xt(Ct.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function PZ(e,t){const r=function(a,s){for(const i of a)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new Xt(Ct.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Xt(Ct.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class RZ{convertValue(t,r="none"){switch(pm(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Hs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(mm(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw zr(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const n={};return Im(t,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(t){var n,a,s;const r=(s=(a=(n=t.fields)==null?void 0:n[H5].arrayValue)==null?void 0:a.values)==null?void 0:s.map(i=>Hs(i.doubleValue));return new jd(r)}convertGeoPoint(t){return new Bd(Hs(t.latitude),Hs(t.longitude))}convertArray(t,r){return(t.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(t,r){switch(r){case"previous":const n=e4(t);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Nw(t));default:return null}}convertTimestamp(t){const r=hm(t);return new sr(r.seconds,r.nanos)}convertDocumentKey(t,r){const n=Na.fromString(t);sa(tZ(n),9688,{name:t});const a=new Qv(n.get(1),n.get(3)),s=new yr(n.popFirst(5));return a.isEqual(r)||mh(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(e,t,r){let n;return n=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,n}class rv{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class tm extends aP{constructor(t,r,n,a,s,i){super(t,r,n,a,i),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new Xy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const n=this._document.data.field(h4("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Xt(Ct.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=tm._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}tm._jsonSchemaVersion="firestore/documentSnapshot/1.0",tm._jsonSchema={type:fi("string",tm._jsonSchemaVersion),bundleSource:fi("string","DocumentSnapshot"),bundleName:fi("string"),bundle:fi("string")};class Xy extends tm{data(t={}){return super.data(t)}}class rm{constructor(t,r,n,a){this._firestore=t,this._userDataWriter=r,this._snapshot=a,this.metadata=new rv(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(n=>{t.call(r,new Xy(this._firestore,this._userDataWriter,n.key,n,new rv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Xt(Ct.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let i=0;return a._snapshot.docChanges.map(o=>{const c=new Xy(a._firestore,a._userDataWriter,o.doc.key,o.doc,new rv(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:i++}})}{let i=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const c=new Xy(a._firestore,a._userDataWriter,o.doc.key,o.doc,new rv(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:Fve(o.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Xt(Ct.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=rm._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=WS.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Fve(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zr(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(e){e=el(e,is);const t=el(e.firestore,Md);return Eve(I1(t),e._key).then(r=>LZ(t,e,r))}rm._jsonSchemaVersion="firestore/querySnapshot/1.0",rm._jsonSchema={type:fi("string",rm._jsonSchemaVersion),bundleSource:fi("string","QuerySnapshot"),bundleName:fi("string"),bundle:fi("string")};class oP extends RZ{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ic(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new is(this.firestore,null,r)}}function ga(e){e=el(e,Qd);const t=el(e.firestore,Md),r=I1(t),n=new oP(t);return OZ(e._query),Cve(r,e._query).then(a=>new rm(t,n,e,a))}function Ji(e,t,r){e=el(e,is);const n=el(e.firestore,Md),a=iP(e.converter,t,r);return L1(n,[ZD(D1(n),"setDoc",e._key,a,e.converter!==null,r).toMutation(e._key,yl.none())])}function Vu(e,t,r,...n){e=el(e,is);const a=el(e.firestore,Md),s=D1(a);let i;return i=typeof(t=Xn(t))=="string"||t instanceof F1?BZ(s,"updateDoc",e._key,t,r,n):kZ(s,"updateDoc",e._key,t),L1(a,[i.toMutation(e._key,yl.exists(!0))])}function za(e){return L1(el(e.firestore,Md),[new i4(e._key,yl.none())])}function Tn(e,t){const r=el(e.firestore,Md),n=dr(e),a=iP(e.converter,t);return L1(r,[ZD(D1(e.firestore),"addDoc",n._key,a,e.converter!==null,{}).toMutation(n._key,yl.exists(!1))]).then(()=>n)}function pr(e,...t){var c,u,d;e=Xn(e);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof t[n]!="object"||lQ(t[n])||(r=t[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(lQ(t[n])){const f=t[n];t[n]=(c=f.next)==null?void 0:c.bind(f),t[n+1]=(u=f.error)==null?void 0:u.bind(f),t[n+2]=(d=f.complete)==null?void 0:d.bind(f)}let s,i,o;if(e instanceof is)i=el(e.firestore,Md),o=t4(e._key.path),s={next:f=>{t[n]&&t[n](LZ(i,e,f))},error:t[n+1],complete:t[n+2]};else{const f=el(e,Qd);i=el(f.firestore,Md),o=f._query;const h=new oP(i);s={next:p=>{t[n]&&t[n](new rm(i,h,f,p))},error:t[n+1],complete:t[n+2]},OZ(e._query)}return function(h,p,g,x){const b=new YD(x),y=new qD(p,b,g);return h.asyncQueue.enqueueAndForget(async()=>$D(await X5(h),y)),()=>{b.Nu(),h.asyncQueue.enqueueAndForget(async()=>GD(await X5(h),y))}}(I1(i),o,a,s)}function L1(e,t){return function(n,a){const s=new nh;return n.asyncQueue.enqueueAndForget(async()=>dve(await wve(n),a,s)),s.promise}(I1(e),t)}function LZ(e,t,r){const n=r.docs.get(t._key),a=new oP(e);return new tm(e,a,t._key,n,new rv(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MZ{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=D1(t)}set(t,r,n){this._verifyNotCommitted();const a=kj(t,this._firestore),s=iP(a.converter,r,n),i=ZD(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(i.toMutation(a._key,yl.none())),this}update(t,r,n,...a){this._verifyNotCommitted();const s=kj(t,this._firestore);let i;return i=typeof(r=Xn(r))=="string"||r instanceof F1?BZ(this._dataReader,"WriteBatch.update",s._key,r,n,a):kZ(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(i.toMutation(s._key,yl.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=kj(t,this._firestore);return this._mutations=this._mutations.concat(new i4(r._key,yl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Xt(Ct.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function kj(e,t){if((e=Xn(e)).firestore!==t)throw new Xt(Ct.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Ni(){return new eP("serverTimestamp")}function UZ(...e){return new tP("arrayUnion",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(e){return I1(e=el(e,Md)),new MZ(e,t=>L1(e,t))}(function(t,r=!0){(function(a){k1=a})(_g),Am(new Ah("firestore",(n,{instanceIdentifier:a,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new Md(new Ipe(n.getProvider("auth-internal")),new Dpe(i,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Xt(Ct.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qv(u.options.projectId,d)}(i,a),i);return s={useFetchStreams:r,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Ru(f9,h9,t),Ru(f9,h9,"esm2020")})();const Ove=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:RZ,Bytes:Ic,CollectionReference:ah,DocumentReference:is,DocumentSnapshot:tm,FieldPath:F1,FieldValue:O1,Firestore:Md,FirestoreError:Xt,GeoPoint:Bd,Query:Qd,QueryCompositeFilterConstraint:m4,QueryConstraint:I2,QueryDocumentSnapshot:Xy,QueryFieldFilterConstraint:F2,QueryLimitConstraint:g4,QueryOrderByConstraint:p4,QuerySnapshot:rm,QueryStartAtConstraint:x4,SnapshotMetadata:rv,Timestamp:sr,VectorValue:jd,WriteBatch:MZ,_AutoId:WS,_ByteString:Yi,_DatabaseId:Qv,_DocumentKey:yr,_EmptyAuthCredentialsProvider:fJ,_FieldPath:Gi,_cast:el,_logWarn:ig,_validateIsNotUsedTogether:mJ,addDoc:Tn,arrayUnion:UZ,collection:kt,connectFirestoreEmulator:_Z,deleteDoc:za,doc:dr,ensureFirestoreConfigured:I1,executeWrite:L1,getDoc:R1,getDocs:ga,getFirestore:JD,limit:Td,onSnapshot:pr,orderBy:Sr,query:$t,serverTimestamp:Ni,setDoc:Ji,startAfter:DZ,updateDoc:Vu,where:Jr,writeBatch:jg},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QZ="firebasestorage.googleapis.com",HZ="storageBucket",Dve=120*1e3,Pve=600*1e3,Rve=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends Ud{constructor(t,r,n=0){super(Bj(t),`Firebase Storage: ${r} (${Bj(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,fs.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Bj(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Va;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Va||(Va={}));function Bj(e){return"storage/"+e}function lP(){const e="An unknown error occurred, please check the error payload for server response.";return new fs(Va.UNKNOWN,e)}function Lve(e){return new fs(Va.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function Mve(e){return new fs(Va.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Uve(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new fs(Va.UNAUTHENTICATED,e)}function Qve(){return new fs(Va.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Hve(e){return new fs(Va.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function VZ(){return new fs(Va.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function zZ(){return new fs(Va.CANCELED,"User canceled the upload/download.")}function Vve(e){return new fs(Va.INVALID_URL,"Invalid URL '"+e+"'.")}function zve(e){return new fs(Va.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function $ve(){return new fs(Va.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+HZ+"' property when initializing the app?")}function $Z(){return new fs(Va.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Gve(){return new fs(Va.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Kve(){return new fs(Va.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function qve(e){return new fs(Va.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function D6(e){return new fs(Va.INVALID_ARGUMENT,e)}function GZ(){return new fs(Va.APP_DELETED,"The Firebase app was deleted.")}function Wve(e){return new fs(Va.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Yy(e,t){return new fs(Va.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Kb(e){throw new fs(Va.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let n;try{n=xl.makeFromUrl(t,r)}catch{return new xl(t,"")}if(n.path==="")return n;throw zve(t)}static makeFromUrl(t,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function s(B){B.path.charAt(B.path.length-1)==="/"&&(B.path_=B.path_.slice(0,-1))}const i="(/(.*))?$",o=new RegExp("^gs://"+a+i,"i"),c={bucket:1,path:3};function u(B){B.path_=decodeURIComponent(B.path)}const d="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",p=new RegExp(`^https?://${f}/${d}/b/${a}/o${h}`,"i"),g={bucket:1,path:3},x=r===QZ?"(?:storage.googleapis.com|storage.cloud.google.com)":r,b="([^?#]*)",y=new RegExp(`^https?://${x}/${a}/${b}`,"i"),_=[{regex:o,indices:c,postModify:s},{regex:p,indices:g,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let B=0;B<_.length;B++){const k=_[B],I=k.regex.exec(t);if(I){const E=I[k.indices.bucket];let N=I[k.indices.path];N||(N=""),n=new xl(E,N),k.postModify(n);break}}if(n==null)throw Vve(t);return n}}class Xve{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yve(e,t,r){let n=1,a=null,s=null,i=!1,o=0;function c(){return o===2}let u=!1;function d(...b){u||(u=!0,t.apply(null,b))}function f(b){a=setTimeout(()=>{a=null,e(p,c())},b)}function h(){s&&clearTimeout(s)}function p(b,...y){if(u){h();return}if(b){h(),d.call(null,b,...y);return}if(c()||i){h(),d.call(null,b,...y);return}n<64&&(n*=2);let _;o===1?(o=2,_=0):_=(n+Math.random())*1e3,f(_)}let g=!1;function x(b){g||(g=!0,h(),!u&&(a!==null?(b||(o=2),clearTimeout(a),f(0)):b||(o=1)))}return f(0),s=setTimeout(()=>{i=!0,x(!0)},r),x}function Jve(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zve(e){return e!==void 0}function e1e(e){return typeof e=="function"}function t1e(e){return typeof e=="object"&&!Array.isArray(e)}function v4(e){return typeof e=="string"||e instanceof String}function dQ(e){return cP()&&e instanceof Blob}function cP(){return typeof Blob<"u"}function P6(e,t,r,n){if(n<t)throw D6(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw D6(`Invalid value for '${e}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(e,t,r){let n=t;return r==null&&(n=`https://${t}`),`${r}://${n}/v0${e}`}function KZ(e){const t=encodeURIComponent;let r="?";for(const n in e)if(e.hasOwnProperty(n)){const a=t(n)+"="+t(e[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var Hp;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Hp||(Hp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qZ(e,t){const r=e>=500&&e<600,a=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return r||a||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1e{constructor(t,r,n,a,s,i,o,c,u,d,f,h=!0,p=!1){this.url_=t,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=o,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=h,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,x)=>{this.resolve_=g,this.reject_=x,this.start_()})}start_(){const t=(n,a)=>{if(a){n(!1,new vC(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const i=o=>{const c=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(i),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(i),this.pendingConnection_=null;const o=s.getErrorCode()===Hp.NO_ERROR,c=s.getStatus();if(!o||qZ(c,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===Hp.ABORT;n(!1,new vC(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;n(!0,new vC(u,s))})},r=(n,a)=>{const s=this.resolve_,i=this.reject_,o=a.connection;if(a.wasSuccessCode)try{const c=this.callback_(o,o.getResponse());Zve(c)?s(c):s()}catch(c){i(c)}else if(o!==null){const c=lP();c.serverResponse=o.getErrorText(),this.errorCallback_?i(this.errorCallback_(o,c)):i(c)}else if(a.canceled){const c=this.appDelete_?GZ():zZ();i(c)}else{const c=VZ();i(c)}};this.canceled_?r(!1,new vC(!1,null,!0)):this.backoffId_=Yve(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Jve(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class vC{constructor(t,r,n){this.wasSuccessCode=t,this.connection=r,this.canceled=!!n}}function n1e(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function a1e(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function s1e(e,t){t&&(e["X-Firebase-GMPID"]=t)}function i1e(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function o1e(e,t,r,n,a,s,i=!0,o=!1){const c=KZ(e.urlParams),u=e.url+c,d=Object.assign({},e.headers);return s1e(d,t),n1e(d,r),a1e(d,s),i1e(d,n),new r1e(u,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function c1e(...e){const t=l1e();if(t!==void 0){const r=new t;for(let n=0;n<e.length;n++)r.append(e[n]);return r.getBlob()}else{if(cP())return new Blob(e);throw new fs(Va.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function u1e(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1e(e){if(typeof atob>"u")throw qve("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jj{constructor(t,r){this.data=t,this.contentType=r||null}}function A1e(e,t){switch(e){case LA.RAW:return new jj(WZ(t));case LA.BASE64:case LA.BASE64URL:return new jj(XZ(e,t));case LA.DATA_URL:return new jj(h1e(t),m1e(t))}throw lP()}function WZ(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n<=127)t.push(n);else if(n<=2047)t.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<e.length-1&&(e.charCodeAt(r+1)&64512)===56320))t.push(239,191,189);else{const s=n,i=e.charCodeAt(++r);n=65536|(s&1023)<<10|i&1023,t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(t)}function f1e(e){let t;try{t=decodeURIComponent(e)}catch{throw Yy(LA.DATA_URL,"Malformed data URL.")}return WZ(t)}function XZ(e,t){switch(e){case LA.BASE64:{const a=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(a||s)throw Yy(e,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case LA.BASE64URL:{const a=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(a||s)throw Yy(e,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=d1e(t)}catch(a){throw a.message.includes("polyfill")?a:Yy(e,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class YZ{constructor(t){this.base64=!1,this.contentType=null;const r=t.match(/^data:([^,]+)?,/);if(r===null)throw Yy(LA.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=p1e(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}function h1e(e){const t=new YZ(e);return t.base64?XZ(LA.BASE64,t.rest):f1e(t.rest)}function m1e(e){return new YZ(e).contentType}function p1e(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(t,r){let n=0,a="";dQ(t)?(this.data_=t,n=t.size,a=t.type):t instanceof ArrayBuffer?(r?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(r?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(t,r){if(dQ(this.data_)){const n=this.data_,a=u1e(n,t,r);return a===null?null:new $f(a)}else{const n=new Uint8Array(this.data_.buffer,t,r-t);return new $f(n,!0)}}static getBlob(...t){if(cP()){const r=t.map(n=>n instanceof $f?n.data_:n);return new $f(c1e.apply(null,r))}else{const r=t.map(i=>v4(i)?A1e(LA.RAW,i).data:i.data_);let n=0;r.forEach(i=>{n+=i.byteLength});const a=new Uint8Array(n);let s=0;return r.forEach(i=>{for(let o=0;o<i.length;o++)a[s++]=i[o]}),new $f(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(e){let t;try{t=JSON.parse(e)}catch{return null}return t1e(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1e(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function x1e(e,t){const r=t.split("/").filter(n=>n.length>0).join("/");return e.length===0?r:e+"/"+r}function JZ(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1e(e,t){return t}class Al{constructor(t,r,n,a){this.server=t,this.local=r||t,this.writable=!!n,this.xform=a||v1e}}let bC=null;function b1e(e){return!v4(e)||e.length<2?e:JZ(e)}function dP(){if(bC)return bC;const e=[];e.push(new Al("bucket")),e.push(new Al("generation")),e.push(new Al("metageneration")),e.push(new Al("name","fullPath",!0));function t(s,i){return b1e(i)}const r=new Al("name");r.xform=t,e.push(r);function n(s,i){return i!==void 0?Number(i):i}const a=new Al("size");return a.xform=n,e.push(a),e.push(new Al("timeCreated")),e.push(new Al("updated")),e.push(new Al("md5Hash",null,!0)),e.push(new Al("cacheControl",null,!0)),e.push(new Al("contentDisposition",null,!0)),e.push(new Al("contentEncoding",null,!0)),e.push(new Al("contentLanguage",null,!0)),e.push(new Al("contentType",null,!0)),e.push(new Al("metadata","customMetadata",!0)),bC=e,bC}function y1e(e,t){function r(){const n=e.bucket,a=e.fullPath,s=new xl(n,a);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:r})}function w1e(e,t,r){const n={};n.type="file";const a=r.length;for(let s=0;s<a;s++){const i=r[s];n[i.local]=i.xform(n,t[i.server])}return y1e(n,e),n}function ZZ(e,t,r){const n=uP(t);return n===null?null:w1e(e,n,r)}function E1e(e,t,r,n){const a=uP(t);if(a===null||!v4(a.downloadTokens))return null;const s=a.downloadTokens;if(s.length===0)return null;const i=encodeURIComponent;return s.split(",").map(u=>{const d=e.bucket,f=e.fullPath,h="/b/"+i(d)+"/o/"+i(f),p=Tg(h,r,n),g=KZ({alt:"media",token:u});return p+g})[0]}function eee(e,t){const r={},n=t.length;for(let a=0;a<n;a++){const s=t[a];s.writable&&(r[s.server]=e[s.local])}return JSON.stringify(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AQ="prefixes",fQ="items";function C1e(e,t,r){const n={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[AQ])for(const a of r[AQ]){const s=a.replace(/\/$/,""),i=e._makeStorageReference(new xl(t,s));n.prefixes.push(i)}if(r[fQ])for(const a of r[fQ]){const s=e._makeStorageReference(new xl(t,a.name));n.items.push(s)}return n}function _1e(e,t,r){const n=uP(r);return n===null?null:C1e(e,t,n)}class Om{constructor(t,r,n,a){this.url=t,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(e){if(!e)throw lP()}function AP(e,t){function r(n,a){const s=ZZ(e,a,t);return qA(s!==null),s}return r}function N1e(e,t){function r(n,a){const s=_1e(e,t,a);return qA(s!==null),s}return r}function S1e(e,t){function r(n,a){const s=ZZ(e,a,t);return qA(s!==null),E1e(s,a,e.host,e._protocol)}return r}function M1(e){function t(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=Qve():a=Uve():r.getStatus()===402?a=Mve(e.bucket):r.getStatus()===403?a=Hve(e.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return t}function fP(e){const t=M1(e);function r(n,a){let s=t(n,a);return n.getStatus()===404&&(s=Lve(e.path)),s.serverResponse=a.serverResponse,s}return r}function k1e(e,t,r){const n=t.fullServerUrl(),a=Tg(n,e.host,e._protocol),s="GET",i=e.maxOperationRetryTime,o=new Om(a,s,AP(e,r),i);return o.errorHandler=fP(t),o}function B1e(e,t,r,n,a){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",r.length>0&&(s.delimiter=r),n&&(s.pageToken=n),a&&(s.maxResults=a);const i=t.bucketOnlyServerUrl(),o=Tg(i,e.host,e._protocol),c="GET",u=e.maxOperationRetryTime,d=new Om(o,c,N1e(e,t.bucket),u);return d.urlParams=s,d.errorHandler=M1(t),d}function j1e(e,t,r){const n=t.fullServerUrl(),a=Tg(n,e.host,e._protocol),s="GET",i=e.maxOperationRetryTime,o=new Om(a,s,S1e(e,r),i);return o.errorHandler=fP(t),o}function T1e(e,t){const r=t.fullServerUrl(),n=Tg(r,e.host,e._protocol),a="DELETE",s=e.maxOperationRetryTime;function i(c,u){}const o=new Om(n,a,i,s);return o.successCodes=[200,204],o.errorHandler=fP(t),o}function I1e(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function tee(e,t,r){const n=Object.assign({},r);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=I1e(null,t)),n}function ree(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),i={"X-Goog-Upload-Protocol":"multipart"};function o(){let _="";for(let B=0;B<2;B++)_=_+Math.random().toString().slice(2);return _}const c=o();i["Content-Type"]="multipart/related; boundary="+c;const u=tee(t,n,a),d=eee(u,r),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,h=`\r
--`+c+"--",p=$f.getBlob(f,n,h);if(p===null)throw $Z();const g={name:u.fullPath},x=Tg(s,e.host,e._protocol),b="POST",y=e.maxUploadRetryTime,w=new Om(x,b,AP(e,r),y);return w.urlParams=g,w.headers=i,w.body=p.uploadData(),w.errorHandler=M1(t),w}class J5{constructor(t,r,n,a){this.current=t,this.total=r,this.finalized=!!n,this.metadata=a||null}}function hP(e,t){let r=null;try{r=e.getResponseHeader("X-Goog-Upload-Status")}catch{qA(!1)}return qA(!!r&&(t||["active"]).indexOf(r)!==-1),r}function F1e(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),i=tee(t,n,a),o={name:i.fullPath},c=Tg(s,e.host,e._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":i.contentType,"Content-Type":"application/json; charset=utf-8"},f=eee(i,r),h=e.maxUploadRetryTime;function p(x){hP(x);let b;try{b=x.getResponseHeader("X-Goog-Upload-URL")}catch{qA(!1)}return qA(v4(b)),b}const g=new Om(c,u,p,h);return g.urlParams=o,g.headers=d,g.body=f,g.errorHandler=M1(t),g}function O1e(e,t,r,n){const a={"X-Goog-Upload-Command":"query"};function s(u){const d=hP(u,["active","final"]);let f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{qA(!1)}f||qA(!1);const h=Number(f);return qA(!isNaN(h)),new J5(h,n.size(),d==="final")}const i="POST",o=e.maxUploadRetryTime,c=new Om(r,i,s,o);return c.headers=a,c.errorHandler=M1(t),c}const hQ=256*1024;function D1e(e,t,r,n,a,s,i,o){const c=new J5(0,0);if(i?(c.current=i.current,c.total=i.total):(c.current=0,c.total=n.size()),n.size()!==c.total)throw Gve();const u=c.total-c.current;let d=u;a>0&&(d=Math.min(d,a));const f=c.current,h=f+d;let p="";d===0?p="finalize":u===d?p="upload, finalize":p="upload";const g={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${c.current}`},x=n.slice(f,h);if(x===null)throw $Z();function b(B,k){const I=hP(B,["active","final"]),E=c.current+d,N=n.size();let j;return I==="final"?j=AP(t,s)(B,k):j=null,new J5(E,N,I==="final",j)}const y="POST",w=t.maxUploadRetryTime,_=new Om(r,y,b,w);return _.headers=g,_.body=x.uploadData(),_.progressCallback=o||null,_.errorHandler=M1(e),_}const $l={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Tj(e){switch(e){case"running":case"pausing":case"canceling":return $l.RUNNING;case"paused":return $l.PAUSED;case"success":return $l.SUCCESS;case"canceled":return $l.CANCELED;case"error":return $l.ERROR;default:return $l.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1e{constructor(t,r,n){if(e1e(t)||r!=null||n!=null)this.next=t,this.error=r??void 0,this.complete=n??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}class R1e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Hp.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Hp.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Hp.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,r,n,a,s){if(this.sent_)throw Kb("cannot .send() more than once");if(Bh(t)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,t,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Kb("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Kb("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Kb("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Kb("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class L1e extends R1e{initXhr(){this.xhr_.responseType="text"}}function Gf(){return new L1e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1e{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(t,r,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=r,this._metadata=n,this._mappings=dP(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(Va.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(qZ(a.status,[]))if(s)a=VZ();else{this.sleepTime=Math.max(this.sleepTime*2,Rve),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(Va.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,s)=>{this._resolve=a,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return r=>this._updateProgress(t+r)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,n])=>{switch(this._state){case"running":t(r,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,r)=>{const n=F1e(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,Gf,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((r,n)=>{const a=O1e(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(a,Gf,r,n);this._request=s,s.getPromise().then(i=>{i=i,this._request=void 0,this._updateProgress(i.current),this._needToFetchStatus=!1,i.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=hQ*this._chunkMultiplier,r=new J5(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((a,s)=>{let i;try{i=D1e(this._ref._location,this._ref.storage,n,this._blob,t,this._mappings,r,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const o=this._ref.storage._makeRequest(i,Gf,a,s,!1);this._request=o,o.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){hQ*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,r)=>{const n=k1e(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(n,Gf,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,r)=>{const n=ree(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,Gf,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const r=this._transferred;this._transferred=t,this._transferred!==r&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const r=this._state==="paused";this._state=t,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=zZ(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const t=Tj(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,r,n,a){const s=new P1e(r||void 0,n||void 0,a||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,r){return this._promise.then(t,r)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const r=this._observers.indexOf(t);r!==-1&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(Tj(this._state)){case $l.SUCCESS:vx(this._resolve.bind(null,this.snapshot))();break;case $l.CANCELED:case $l.ERROR:const r=this._reject;vx(r.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(Tj(this._state)){case $l.RUNNING:case $l.PAUSED:t.next&&vx(t.next.bind(t,this.snapshot))();break;case $l.SUCCESS:t.complete&&vx(t.complete.bind(t))();break;case $l.CANCELED:case $l.ERROR:t.error&&vx(t.error.bind(t,this._error))();break;default:t.error&&vx(t.error.bind(t,this._error))()}}resume(){const t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){const t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){const t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(t,r){this._service=t,r instanceof xl?this._location=r:this._location=xl.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new lg(t,r)}get root(){const t=new xl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return JZ(this._location.path)}get storage(){return this._service}get parent(){const t=g1e(this._location.path);if(t===null)return null;const r=new xl(this._location.bucket,t);return new lg(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw Wve(t)}}function U1e(e,t,r){e._throwIfRoot("uploadBytes");const n=ree(e.storage,e._location,dP(),new $f(t,!0),r);return e.storage.makeRequestWithTokens(n,Gf).then(a=>({metadata:a,ref:e}))}function Q1e(e,t,r){return e._throwIfRoot("uploadBytesResumable"),new M1e(e,new $f(t),r)}function H1e(e){const t={prefixes:[],items:[]};return nee(e,t).then(()=>t)}async function nee(e,t,r){const a=await V1e(e,{pageToken:r});t.prefixes.push(...a.prefixes),t.items.push(...a.items),a.nextPageToken!=null&&await nee(e,t,a.nextPageToken)}function V1e(e,t){t!=null&&typeof t.maxResults=="number"&&P6("options.maxResults",1,1e3,t.maxResults);const r=t||{},n=B1e(e.storage,e._location,"/",r.pageToken,r.maxResults);return e.storage.makeRequestWithTokens(n,Gf)}function z1e(e){e._throwIfRoot("getDownloadURL");const t=j1e(e.storage,e._location,dP());return e.storage.makeRequestWithTokens(t,Gf).then(r=>{if(r===null)throw Kve();return r})}function $1e(e){e._throwIfRoot("deleteObject");const t=T1e(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Gf)}function G1e(e,t){const r=x1e(e._location.path,t),n=new xl(e._location.bucket,r);return new lg(e.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1e(e){return/^[A-Za-z]+:\/\//.test(e)}function q1e(e,t){return new lg(e,t)}function aee(e,t){if(e instanceof mP){const r=e;if(r._bucket==null)throw $ve();const n=new lg(r,r._bucket);return t!=null?aee(n,t):n}else return t!==void 0?G1e(e,t):e}function W1e(e,t){if(t&&K1e(t)){if(e instanceof mP)return q1e(e,t);throw D6("To use ref(service, url), the first argument must be a Storage instance.")}else return aee(e,t)}function mQ(e,t){const r=t==null?void 0:t[HZ];return r==null?null:xl.makeFromBucketSpec(r,e)}function X1e(e,t,r,n={}){e.host=`${t}:${r}`;const a=Bh(t);a&&(HS(`https://${e.host}/b`),VS("Storage",!0)),e._isUsingEmulator=!0,e._protocol=a?"https":"http";const{mockUserToken:s}=n;s&&(e._overrideAuthToken=typeof s=="string"?s:vY(s,e.app.options.projectId))}class mP{constructor(t,r,n,a,s,i=!1){this.app=t,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=s,this._isUsingEmulator=i,this._bucket=null,this._host=QZ,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Dve,this._maxUploadRetryTime=Pve,this._requests=new Set,a!=null?this._bucket=xl.makeFromBucketSpec(a,this._host):this._bucket=mQ(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=xl.makeFromBucketSpec(this._url,t):this._bucket=mQ(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){P6("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){P6("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(Tc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new lg(this,t)}_makeRequest(t,r,n,a,s=!0){if(this._deleted)return new Xve(GZ());{const i=o1e(t,this._appId,n,a,r,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(t,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,n,a).getPromise()}}const pQ="@firebase/storage",gQ="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const see="storage";function iee(e,t,r){return e=Xn(e),U1e(e,t,r)}function Y1e(e,t,r){return e=Xn(e),Q1e(e,t,r)}function J1e(e){return e=Xn(e),H1e(e)}function pP(e){return e=Xn(e),z1e(e)}function Z1e(e){return e=Xn(e),$1e(e)}function b4(e,t){return e=Xn(e),W1e(e,t)}function gP(e=zS(),t){e=Xn(e);const n=E2(e,see).getImmediate({identifier:t}),a=fD("storage");return a&&ebe(n,...a),n}function ebe(e,t,r,n={}){X1e(e,t,r,n)}function tbe(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new mP(r,n,a,t,_g)}function rbe(){Am(new Ah(see,tbe,"PUBLIC").setMultipleInstances(!0)),Ru(pQ,gQ,""),Ru(pQ,gQ,"esm2020")}rbe();const nbe={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},xP=pD(nbe),O2=aJ(xP),xn=JD(xP),oee=gP(xP),lee=Object.freeze(Object.defineProperty({__proto__:null,auth:O2,db:xn,storage:oee},Symbol.toStringTag,{value:"Module"})),abe=async(e,t)=>{try{return(await hme(O2,e,t)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},Ij=async()=>{try{await gme(O2)}catch(e){throw console.error("Error en logoutUser helper:",e),e}},sbe=async e=>{try{await fme(O2,e)}catch(t){throw console.error("Error en resetPassword helper:",t),t}},cee=async e=>{try{const t=dr(xn,"usuarios",e),r=await R1(t);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontró perfil en Firestore para: ${e}`),null)}catch(t){throw console.error("Error en getUserProfile helper:",t),t}};var Wt=(e=>(e.SUBDIRECCION="SUBDIRECCION",e.PROFESORADO="PROFESORADO",e.COORDINACION_TP="COORDINACION_TP",e.ESTUDIANTE="ESTUDIANTE",e))(Wt||{}),dn=(e=>(e.EVALUACION="Evaluación",e.ACTO="Acto",e.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",e.SALIDA_PEDAGOGICA="Salida Pedagógica",e))(dn||{}),Cp=(e=>(e.PRUEBA_PARCIAL="Prueba parcial",e.GUIA_APRENDIZAJE="Guía de Aprendizaje",e.RUBRICA="Rúbrica",e.PAUTA_COTEJO="Pauta de Cotejo",e))(Cp||{});const ibe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),mi="w-6 h-6",y4="w-24 h-24",vP=()=>l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-32 h-32 object-contain"}),obe=()=>l.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M9 18h6"}),l.jsx("path",{d:"M10 22h4"}),l.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),lbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),cbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),ky=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),By=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),uee=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),ube=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:y4,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),dbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:y4,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),Abe=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:y4,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),fbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:y4,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),hbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),xQ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),yC=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Fj=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),wC=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Oj=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),vQ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),mbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),pbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),gbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),xbe=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),EC=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),vbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),Dj=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),bbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:mi,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),ybe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),bQ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:mi,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),wbe=[{id:Wt.SUBDIRECCION,label:"Subdirección Pedagógica",icon:l.jsx(ube,{})},{id:Wt.PROFESORADO,label:"Profesorado",icon:l.jsx(dbe,{})},{id:Wt.COORDINACION_TP,label:"Coordinación TP",icon:l.jsx(Abe,{})},{id:Wt.ESTUDIANTE,label:"Estudiantes",icon:l.jsx(fbe,{})}],Ebe={[Wt.SUBDIRECCION]:[{name:"Dashboard",icon:l.jsx(hbe,{})},{name:"Administración",icon:l.jsx(xbe,{})},{name:"Seguimiento Curricular",icon:l.jsx(ybe,{})},{name:"Acompañamiento docente",icon:l.jsx(gbe,{})},{name:"Análisis Taxonómico",icon:l.jsx(bQ,{})},{name:"Interdisciplinario",icon:l.jsx(Dj,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:l.jsx(xQ,{})},{name:"Crear horarios",icon:l.jsx(Fj,{})},{name:"Seguimiento de acciones pedagógicas",icon:l.jsx(wC,{})},{name:"Inclusión",icon:l.jsx(EC,{})},{name:"Calendario Académico",icon:l.jsx(yC,{})},{name:"Muro de Anuncios",icon:l.jsx(ky,{})},{name:"Mensajería Interna",icon:l.jsx(By,{})},{name:"Generador de Actas",icon:l.jsx(Oj,{})}],[Wt.PROFESORADO]:[{name:"Planificación",icon:l.jsx(vQ,{})},{name:"Mis Acompañamientos",icon:l.jsx(vbe,{})},{name:"Recursos de Aprendizaje",icon:l.jsx(mbe,{})},{name:"Análisis Taxonómico",icon:l.jsx(bQ,{})},{name:"Interdisciplinario",icon:l.jsx(Dj,{})},{name:"Inclusión",icon:l.jsx(EC,{})},{name:"Actividades Remotas",icon:l.jsx(pbe,{})},{name:"Evaluación de Aprendizajes",icon:l.jsx(Oj,{})},{name:"Evaluaciones Formativas",icon:l.jsx(wC,{})},{name:"Desarrollo Profesional",icon:l.jsx(EC,{})},{name:"Calendario Académico",icon:l.jsx(yC,{})},{name:"Muro de Anuncios",icon:l.jsx(ky,{})},{name:"Mensajería Interna",icon:l.jsx(By,{})},{name:"Generador de Actas",icon:l.jsx(xQ,{})}],[Wt.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:l.jsx(wC,{})},{name:"Asistencia Dual",icon:l.jsx(Fj,{})},{name:"Pañol",icon:l.jsx(bbe,{})},{name:"Gestión de Empresas",icon:l.jsx(ibe,{})},{name:"Calendario Académico",icon:l.jsx(yC,{})},{name:"Muro de Anuncios",icon:l.jsx(ky,{})},{name:"Mensajería Interna",icon:l.jsx(By,{})},{name:"Alternancia TP",icon:"🔄"},{name:"Desarrollo Profesional",icon:l.jsx(EC,{})},{name:"Generador de Actas",icon:l.jsx(Oj,{})}],[Wt.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:l.jsx(vQ,{})},{name:"Evaluación Formativa",icon:l.jsx(wC,{})},{name:"Tareas Interdisciplinarias",icon:l.jsx(Dj,{})},{name:"Asistencia a Empresa",icon:l.jsx(Fj,{})},{name:"Calendario Académico",icon:l.jsx(yC,{})},{name:"Muro de Anuncios",icon:l.jsx(ky,{})},{name:"Mensajería Interna",icon:l.jsx(By,{})}]},yQ=["1º Medio","2º Medio","3º Medio","4º Medio"],qi=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],Ks=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],R6=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],Z_=["Lunes","Martes","Miércoles","Jueves","Viernes"],L6=[{bloque:1,inicio:"08:00",fin:"08:40"},{bloque:2,inicio:"08:40",fin:"09:20"},{bloque:3,inicio:"09:35",fin:"10:15"},{bloque:4,inicio:"10:15",fin:"10:55"},{bloque:5,inicio:"11:10",fin:"11:50"},{bloque:6,inicio:"11:50",fin:"12:30"},{bloque:7,inicio:"12:30",fin:"13:10"},{bloque:8,inicio:"13:10",fin:"13:50"},{bloque:9,inicio:"14:30",fin:"15:10"},{bloque:10,inicio:"15:10",fin:"15:50"},{bloque:11,inicio:"16:00",fin:"16:40"},{bloque:12,inicio:"16:40",fin:"17:20"}],Cbe={"1º y 2º medio":{"Lengua y Literatura":6,Matemática:6,Inglés:3,"Historia y Geografía":4,"Educación Física":2,Ciencias:4,"Artes/Música":2,Tecnología:2,Orientación:1},"3º y 4º medio (Humanista-Científico)":{"Lengua y Literatura":4,Matemática:4,Inglés:2,"Historia y Geografía":3,"Educación Ciudadana":2,Filosofía:3,"Ciencias para la Ciudadanía":2,"Educación Física":2},"3º y 4º medio (Técnico-Profesional)":{"Lengua y Literatura":2,Matemática:2,Inglés:2,"Historia y Geografía":2,Filosofía:2,"Educación Física":2,"Módulo TP":18}},bv={[dn.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[dn.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[dn.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[dn.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},_be=Object.values(Cp),Pj=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],Rj=["Vinculado","Desvinculado","En proceso","Empresa"],Vp=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],Nbe=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],Z5=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],Jy=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],dee=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],CC=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],Sbe=["Mecánica Industrial","Mecánica Automotriz"],kbe=["INACAP","UNAB","DUOC","Universidad de Las Américas"],Bbe={"Mecánica Automotriz":["3ºA","3ºB","4ºA","4ºB"],"Mecánica Industrial":["3ºC","3ºD","4ºC","4ºD"]},jbe=["Pasantía","Visita","Certificación","Formación en empresa"],Tbe={"Mecánica Industrial":["Soldadura industrial","Mantenimiento de herramientas","Medición y verificación","Mecánica de banco","Torneado de piezas y conjuntos mecánicos","Fresado de piezas mecánicas","Taladrado de piezas mecánicas","Rectificado de piezas mecánicas","Fabricación asistida por computador (CNC)"],"Mecánica Automotriz":["Ajuste de motores","Lectura de planos y manuales técnicos","Manejo de residuos y desechos automotrices","Mantenimiento de sistemas de seguridad y confortabilidad","Mantenimiento de sistemas eléctricos y electrónicos","Mantenimiento de motores","Mantenimiento de sistemas hidráulicos y neumáticos","Mantenimiento de los sistemas de transmisión y frenos","Mantenimiento de sistemas de dirección y suspensión","Emprendimiento y empleabilidad"]},Ibe={"Mecánica Automotriz":{"Ajuste de motores":["Reparar y probar el funcionamiento de motores (gasolina, diésel, gas e híbridos), incluyendo sistemas de control de emisiones, lubricación y refrigeración, usando herramientas e instrumentos apropiados y siguiendo especificaciones del fabricante."],"Lectura de planos y manuales técnicos":["Leer e interpretar información técnica (manuales, planos, diagramas y normas de emisiones) para resolver diagnósticos y fallas."],"Manejo de residuos y desechos automotrices":["Aplicar procedimientos y normativas de seguridad, higiene y cuidado ambiental en la manipulación y disposición de residuos y desechos automotrices."],"Mantenimiento de sistemas de seguridad y confortabilidad":["Diagnosticar, reparar y mantener sistemas de seguridad (frenos ABS, airbags) y confortabilidad (climatización, cierre centralizado, asientos eléctricos) según especificaciones técnicas."],"Mantenimiento de sistemas eléctricos y electrónicos":["Reemplazar, ajustar y probar sistemas eléctricos y electrónicos automotrices, siguiendo procedimientos y normas internacionales."],"Mantenimiento de motores":["Realizar mantenimiento preventivo y correctivo de motores y sus sistemas asociados, verificando tolerancias y parámetros operativos según especificaciones."],"Mantenimiento de sistemas hidráulicos y neumáticos":["Inspeccionar, diagnosticar y reparar sistemas hidráulicos y neumáticos de vehículos automotrices."],"Mantenimiento de los sistemas de transmisión y frenos":["Verificar, ajustar o reemplazar componentes de transmisión y frenos, según manual del fabricante."],"Mantenimiento de sistemas de dirección y suspensión":["Diagnosticar, alinear y corregir sistemas de dirección y suspensión, cumpliendo normas de seguridad."],"Emprendimiento y empleabilidad":["Desarrollar un proyecto o plan de negocio relacionado con el sector automotriz, aplicando conceptos de gestión, marketing y normativa vigente."]},"Mecánica Industrial":{"Soldadura industrial":["Ejecutar procesos de corte y soldadura (oxiacetileno, arco manual, TIG, MIG) en distintas posiciones y materiales, aplicando normas de seguridad, higiene y cuidado ambiental."],"Mantenimiento de herramientas":["Mantener y reparar herramientas manuales y de máquinas, asegurando su operatividad y prolongando su vida útil."],"Medición y verificación":["Utilizar instrumentos de medición y verificación para controlar dimensiones y tolerancias según planos y especificaciones técnicas."],"Mecánica de banco":["Realizar operaciones manuales de mecanizado, ajuste, limado, roscado y ensamblaje, siguiendo planos y tolerancias indicadas."],"Torneado de piezas y conjuntos mecánicos":["Operar tornos convencionales para fabricar piezas y conjuntos mecánicos, cumpliendo con las especificaciones técnicas y de seguridad."],"Fresado de piezas mecánicas":["Operar fresadoras para fabricar piezas mecánicas, seleccionando herramientas de corte y parámetros de mecanizado adecuados."],"Taladrado de piezas mecánicas":["Ejecutar operaciones de taladrado, escariado y roscado en taladros de banco o columna, cumpliendo especificaciones técnicas y de seguridad."],"Rectificado de piezas mecánicas":["Utilizar rectificadoras para mejorar el acabado y precisión dimensional de piezas mecánicas, cumpliendo tolerancias indicadas."],"Fabricación asistida por computador (CNC)":["Programar y operar máquinas CNC para fabricar piezas mecánicas con precisión, optimizando procesos y aplicando normas de seguridad."]}},Kf={"Liderazgo Curricular":["Planificación y organización del currículo","Asegurar la cobertura y secuenciación de los contenidos","Monitoreo del cumplimiento de los planes de estudio"],"Prácticas Pedagógicas en el Aula":["Estrategias de enseñanza y metodologías activas","Evaluación de los aprendizajes para retroalimentar el proceso","Uso de recursos y tecnologías para apoyar la enseñanza"],"Acompañamiento y Desarrollo Profesional Docente":["Observación de clases y retroalimentación","Planes de formación continua y actualización pedagógica","Fomento de comunidades de aprendizaje docente"],"Monitoreo y Evaluación de los Aprendizajes":["Uso de datos e indicadores para tomar decisiones pedagógicas","Evaluaciones internas y externas","Ajuste de estrategias según resultados y metas de aprendizaje"]},wQ=["Pendiente","En Proceso","Cumplida"],EQ=["PROFESORADO","SUBDIRECCION","COORDINACION_TP"],Fbe=({onLoginAttempt:e,onForgotPasswordRequest:t,error:r})=>{const[n,a]=S.useState(""),[s,i]=S.useState(""),[o,c]=S.useState("login"),u=h=>{h.preventDefault(),e(n,s)},d=h=>{h.preventDefault(),t(n),c("forgot_sent")},f=()=>o==="forgot"?l.jsxs("form",{onSubmit:d,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),l.jsx("div",{className:"text-sm text-center",children:l.jsx("button",{type:"button",onClick:()=>c("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):o==="forgot_sent"?l.jsxs("div",{className:"text-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),l.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",l.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contraseña."]}),l.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),l.jsx("button",{type:"button",onClick:()=>{c("login"),a("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):l.jsxs("form",{onSubmit:u,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:h=>i(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&l.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:l.jsx("p",{children:r})}),l.jsx("div",{className:"text-sm text-center",children:l.jsx("button",{type:"button",onClick:()=>c("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),l.jsx("div",{children:l.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return l.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[l.jsxs("div",{className:"text-center mb-10",children:[l.jsx("div",{className:"mb-4 flex justify-center items-center",children:l.jsx(vP,{})}),l.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:o==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),l.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:f()}),l.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},_C=({trigger:e,children:t,onOpen:r})=>{const[n,a]=S.useState(!1),s=S.useRef(null),i=()=>{const c=!n;a(c),c&&r&&r()},o=c=>{s.current&&!s.current.contains(c.target)&&a(!1)};return S.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),l.jsxs("div",{className:"relative",ref:s,children:[l.jsx("div",{onClick:i,children:e}),n&&l.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>a(!1),children:t})]})},CQ="usuariosLiceo",Obe=({user:e,onClose:t,onSave:r})=>{const[n,a]=S.useState({nombreCompleto:e.nombreCompleto,email:e.email,fotoUrl:e.fotoUrl||""}),s=o=>{a({...n,[o.target.name]:o.target.value})},i=o=>{o.preventDefault();const c={...e,...n};try{const u=localStorage.getItem(CQ);let d=u?JSON.parse(u):[];const f=d.findIndex(h=>h.id===e.id);f>-1?d[f]=c:d.push(c),localStorage.setItem(CQ,JSON.stringify(d)),r(c),t()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:o=>o.stopPropagation(),children:l.jsxs("form",{onSubmit:i,children:[l.jsxs("div",{className:"p-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),l.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),l.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),l.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),l.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.profile})]})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},_Q="usuariosLiceo",Dbe=({user:e,onClose:t,onSave:r})=>{const[n,a]=S.useState(""),[s,i]=S.useState(""),[o,c]=S.useState(null),u=d=>{if(d.preventDefault(),c(null),!n){c("La contraseña no puede estar en blanco.");return}if(n!==s){c("Las contraseñas no coinciden.");return}const f={...e,password:n};try{const h=localStorage.getItem(_Q);let p=h?JSON.parse(h):[];const g=p.findIndex(x=>x.id===e.id);g>-1?p[g]=f:p.push(f),localStorage.setItem(_Q,JSON.stringify(p)),r(f),t()}catch(h){console.error("Failed to save new password:",h),c("No se pudo guardar la nueva contraseña.")}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:l.jsxs("form",{onSubmit:u,children:[l.jsxs("div",{className:"p-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),l.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.email})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:d=>a(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s,onChange:d=>i(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o&&l.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:l.jsx("p",{children:o})})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pbe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Rbe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),NQ=e=>{const t=Rbe(e);return t.charAt(0).toUpperCase()+t.slice(1)},Aee=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),Lbe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mbe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ube=S.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:i,...o},c)=>S.createElement("svg",{ref:c,...Mbe,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:Aee("lucide",a),...!s&&!Lbe(o)&&{"aria-hidden":"true"},...o},[...i.map(([u,d])=>S.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=(e,t)=>{const r=S.forwardRef(({className:n,...a},s)=>S.createElement(Ube,{ref:s,iconNode:t,className:Aee(`lucide-${Pbe(NQ(e))}`,`lucide-${e}`,n),...a}));return r.displayName=NQ(e),r};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qbe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Hbe=tr("activity",Qbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vbe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],NC=tr("arrow-left",Vbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zbe=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],$be=tr("bell-ring",zbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gbe=[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]],Kbe=tr("book-open-check",Gbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qbe=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ef=tr("book-open",qbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wbe=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],Xbe=tr("brain-circuit",Wbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ybe=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Tw=tr("brain",Ybe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jbe=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],fee=tr("briefcase",Jbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zbe=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],eN=tr("building-2",Zbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eye=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],tye=tr("building",eye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rye=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],nye=tr("calendar-check",rye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aye=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Id=tr("calendar",aye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sye=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Yf=tr("chart-column",sye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iye=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],oye=tr("chart-line",iye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lye=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],cye=tr("chart-no-axes-column",lye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uye=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],hee=tr("chart-pie",uye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dye=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Iw=tr("chevron-left",dye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aye=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],bP=tr("chevron-right",Aye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fye=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Fd=tr("circle-alert",fye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hye=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],yP=tr("circle-check-big",hye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mye=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],vo=tr("circle-check",mye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pye=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],SC=tr("circle-plus",pye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gye=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],xye=tr("clipboard-check",gye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vye=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],qv=tr("clipboard-list",vye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bye=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],V0=tr("clock",bye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yye=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],cg=tr("download",yye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wye=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Eye=tr("factory",wye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cye=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],_ye=tr("file-check",Cye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nye=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Sye=tr("file-spreadsheet",Nye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kye=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],WA=tr("file-text",kye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bye=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M2 10h20",key:"1ir3d8"}]],jye=tr("folder-closed",Bye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tye=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],SQ=tr("folder-open",Tye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iye=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],wP=tr("funnel",Iye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fye=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],tN=tr("gauge",Fye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oye=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],ug=tr("graduation-cap",Oye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dye=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Pye=tr("hash",Dye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rye=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],mee=tr("hourglass",Rye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lye=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Mye=tr("info",Lye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uye=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Qye=tr("layout-dashboard",Uye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hye=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],pee=tr("layers",Hye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vye=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],zye=tr("layout-grid",Vye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ye=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],Gye=tr("layout-list",$ye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kye=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],kQ=tr("link-2",Kye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qye=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Wye=tr("link",qye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xye=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],Zy=tr("list-checks",Xye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yye=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],z0=tr("loader-circle",Yye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jye=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Zye=tr("mail",Jye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ewe=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],rN=tr("map-pin",ewe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const twe=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],rwe=tr("megaphone",twe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nwe=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],awe=tr("menu",nwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const swe=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],gee=tr("message-square",swe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iwe=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],BQ=tr("notebook-pen",iwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const owe=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],lwe=tr("palette",owe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cwe=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],M6=tr("pen-line",cwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uwe=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],EP=tr("pencil",uwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dwe=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],Awe=tr("percent",dwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fwe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Lu=tr("plus",fwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hwe=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],mwe=tr("puzzle",hwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pwe=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],gwe=tr("refresh-ccw",pwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xwe=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],vwe=tr("route",xwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bwe=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],vm=tr("save",bwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ywe=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],Lj=tr("school",ywe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wwe=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],jQ=tr("scroll-text",wwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ewe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],w4=tr("search",Ewe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cwe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],_we=tr("shield-check",Cwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nwe=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],yv=tr("sparkles",Nwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Swe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],xee=tr("square-pen",Swe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kwe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],U6=tr("square-plus",kwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bwe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],jwe=tr("star",Bwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Twe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Wv=tr("target",Twe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iwe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],tl=tr("trash-2",Iwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fwe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],nN=tr("trending-up",Fwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Owe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],vee=tr("upload",Owe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dwe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Pwe=tr("user-minus",Dwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rwe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Lwe=tr("user-plus",Rwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mwe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Fw=tr("user",Mwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uwe=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],qb=tr("users-round",Uwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qwe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Zl=tr("users",Qwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hwe=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],_p=tr("video",Hwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vwe=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],zwe=tr("wand-sparkles",Vwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $we=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],e5=tr("wrench",$we);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gwe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],aN=tr("x",Gwe);async function Kwe(e){const t={...e,docenteEmailLower:e.docenteEmail?e.docenteEmail.toLowerCase():e.docenteEmailLower,leida:!1,createdAt:Ni()};return Object.keys(t).forEach(n=>t[n]===void 0&&delete t[n]),(await Tn(kt(xn,"notificaciones"),t)).id}function qwe(e,t){const r=[];let n=[],a=[];const s=()=>{const i=new Map;[...n,...a].forEach(c=>{c.id&&(i.has(c.id)||i.set(c.id,c))});const o=Array.from(i.values()).sort((c,u)=>{var h,p;const d=(h=c.createdAt)!=null&&h.toDate?c.createdAt.toDate().getTime():0;return((p=u.createdAt)!=null&&p.toDate?u.createdAt.toDate().getTime():0)-d});t(o)};if(e.email){const i=$t(kt(xn,"notificaciones"),Jr("docenteEmailLower","==",e.email.toLowerCase()),Sr("createdAt","desc"));r.push(pr(i,o=>{n=o.docs.map(c=>({id:c.id,...c.data()})),s()}))}if(e.nombreCompleto){const i=$t(kt(xn,"notificaciones"),Jr("docenteNombre","==",e.nombreCompleto),Sr("createdAt","desc"));r.push(pr(i,o=>{a=o.docs.map(c=>({id:c.id,...c.data()})),s()}))}return()=>r.forEach(i=>i())}async function Wwe(e){const t=dr(xn,"notificaciones",e);await Vu(t,{leida:!0})}async function Xwe(e){const t=dr(xn,"notificaciones",e);await za(t)}const TQ="anunciosMuro",IQ="mensajesInternos",FQ="lir-read-status",Ywe=({user:e})=>{if(e.fotoUrl)return l.jsx("img",{src:e.fotoUrl,alt:e.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const t=e.nombreCompleto||"",r=String(t).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return l.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},Jwe=({currentUser:e,onLogout:t,onNavigate:r,onUserUpdate:n,onChangeProfile:a,canChangeProfile:s,toggleSidebar:i,unreadMessagesCount:o,refreshUnreadCount:c})=>{const[u,d]=S.useState([]),[f,h]=S.useState([]),[p,g]=S.useState(!1),[x,b]=S.useState(!1),[y,w]=S.useState([]),_=S.useCallback(()=>{try{const j=localStorage.getItem(`${FQ}-${e.id}`);return j?JSON.parse(j):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[e.id]),B=S.useCallback(j=>{try{localStorage.setItem(`${FQ}-${e.id}`,JSON.stringify(j))}catch(R){console.error("Failed to set read status:",R)}},[e.id]);S.useEffect(()=>{const j=JSON.parse(localStorage.getItem(TQ)||"[]"),R=_();d(j.filter(O=>!R.announcements.includes(O.id)));const D=JSON.parse(localStorage.getItem(IQ)||"[]");h(D.filter(O=>O.para===e.email).sort((O,L)=>new Date(L.fecha).getTime()-new Date(O.fecha).getTime()).slice(0,5))},[e.id,_,o]),S.useEffect(()=>{if(!(e!=null&&e.email))return;const j=qwe({email:e.email,nombreCompleto:e.nombreCompleto},R=>{const D=R.filter(O=>O.tipo&&(O.tipo.toLowerCase()==="pie"||O.tipo==="nueva_intervencion"));w(D)});return()=>j()},[e==null?void 0:e.email,e==null?void 0:e.nombreCompleto]);const k=()=>{const j=_(),R=JSON.parse(localStorage.getItem(TQ)||"[]").map(D=>D.id);j.announcements=R,B(j),d([])},I=()=>{const j=_(),D=JSON.parse(localStorage.getItem(IQ)||"[]").filter(O=>O.para===e.email).map(O=>O.id);j.messages=[...new Set([...j.messages,...D])],B(j),c()},E=y.filter(j=>!j.leida).length,N=j=>{var R;try{const D=(R=j.createdAt)!=null&&R.toDate?j.createdAt.toDate():new Date(j.createdAt);return D?D.toLocaleString("es-CL"):""}catch{return""}};return l.jsxs(l.Fragment,{children:[l.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:l.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:i,children:l.jsx(lbe,{})}),l.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[l.jsxs("svg",{className:"w-8 h-8 text-slate-700 dark:text-slate-200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5"}),l.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5"})]}),l.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),l.jsx("div",{className:"flex-1 flex justify-center",children:l.jsx("button",{onClick:()=>r("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:l.jsx(cbe,{})})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"flex items-center gap-3",children:l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"h-10 w-10 object-contain"})}),l.jsx(_C,{onOpen:k,trigger:l.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Anuncios",children:[l.jsx(ky,{}),u.length>0&&l.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:u.length})]}),children:l.jsxs("div",{className:"p-2",children:[l.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),l.jsxs("ul",{className:"mt-1",children:[u.slice(0,3).map(j=>l.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[l.jsx("p",{className:"font-bold dark:text-slate-200",children:j.titulo}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:j.mensaje})]},j.id)),u.length===0&&l.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),l.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),l.jsx(_C,{trigger:l.jsxs("button",{className:"relative p-2 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-700 dark:bg-sky-900/30 dark:hover:bg-sky-900/40 dark:text-sky-300 transition-colors",title:"Notificaciones PIE",children:[l.jsx(mwe,{className:"w-5 h-5"}),E>0&&l.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:E})]}),children:l.jsxs("div",{className:"p-2 w-80",children:[l.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Notificaciones PIE"}),l.jsxs("ul",{className:"mt-1 max-h-80 overflow-y-auto divide-y dark:divide-slate-700",children:[y.length===0&&l.jsx("li",{className:"p-3 text-sm text-slate-500 dark:text-slate-400",children:"No hay notificaciones."}),y.map(j=>l.jsx("li",{className:"p-2 text-sm",children:l.jsxs("div",{className:"flex justify-between items-start gap-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:j.titulo}),l.jsx("div",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-line",children:j.mensaje}),j.estudianteNombre&&l.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Estudiante: ",l.jsx("b",{children:j.estudianteNombre})]}),l.jsx("div",{className:"text-[11px] text-slate-400 mt-1",children:N(j)})]}),l.jsxs("div",{className:"flex-shrink-0 flex flex-col gap-1",children:[!j.leida&&l.jsx("button",{onClick:()=>j.id&&Wwe(j.id),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded hover:bg-green-200",children:"Marcar leída"}),l.jsx("button",{onClick:()=>j.id&&Xwe(j.id),className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded hover:bg-red-200",children:"Eliminar"})]})]})},j.id))]})]})}),l.jsx(_C,{onOpen:I,trigger:l.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[l.jsx(By,{}),o>0&&l.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:o})]}),children:l.jsxs("div",{className:"p-2",children:[l.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),l.jsxs("ul",{className:"mt-1",children:[f.slice(0,3).map(j=>l.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[l.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",j.de]}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:j.asunto})]},j.id)),f.length===0&&l.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),l.jsx("button",{onClick:()=>r("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),l.jsx(_C,{trigger:l.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:l.jsx(Ywe,{user:e})}),children:l.jsxs("div",{className:"p-2",children:[l.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:e.nombreCompleto}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.profile})]}),l.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[l.jsx("li",{children:l.jsx("button",{onClick:()=>g(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),l.jsx("li",{children:l.jsx("button",{onClick:()=>b(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),s&&l.jsx("li",{children:l.jsx("button",{onClick:a,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"👑 Cambiar Vista"})}),l.jsx("li",{children:l.jsx("button",{onClick:t,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),p&&l.jsx(Obe,{user:e,onClose:()=>g(!1),onSave:n}),x&&l.jsx(Dbe,{user:e,onClose:()=>b(!1),onSave:n})]})},Zwe={apiKey:void 0,authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},CP=V7().length?V7()[0]:pD(Zwe),ht=JD(CP),Q6=aJ(CP),e2e=gP(CP),D2="reemplazos_docentes",t2e="usuarios",_P=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaActualizacion:((s=(a=t.fechaActualizacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaActualizacion}},r2e=e=>{const t=e.data();return{id:e.id,...t}},n2e=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:sr.fromDate(new Date),fechaActualizacion:sr.fromDate(new Date)};return(await Tn(kt(ht,D2),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},a2e=async(e,t)=>{try{const r=dr(ht,D2,e),n=await R1(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar este reemplazo");await za(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},s2e=(e,t,r=50)=>{try{const n=$t(kt(ht,D2),Jr("userId","==",e),Sr("diaAusencia","desc"),Td(r));return pr(n,a=>{const s=a.docs.map(_P);t(s)},a=>{console.error("Error en suscripción a reemplazos:",a),t([])})}catch(n){return console.error("Error al crear la suscripción de reemplazos:",n),()=>{}}},i2e=e=>{try{const t=$t(kt(ht,t2e),Jr("profile","==",Wt.PROFESORADO));return pr(t,n=>{const a=n.docs.map(r2e);e(a)},n=>{console.error("Error al obtener la lista de profesores:",n),e([])})}catch(t){return console.error("Error al crear la suscripción de profesores:",t),()=>{}}},o2e=async e=>{try{const t=$t(kt(ht,D2),Jr("userId","==",e)),n=(await ga(t)).docs.map(_P),a=n.length,s=n.filter(o=>o.resultado==="Hora realizada").length,i=n.filter(o=>o.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:a,horasRealizadas:s,horasCubiertas:i,porcentajeRealizadas:a>0?s/a*100:0}}catch(t){throw console.error("Error al obtener estadísticas:",t),new Error("No se pudieron obtener las estadísticas")}},l2e=async(e,t)=>{try{if(!t.trim())return[];const r=$t(kt(ht,D2),Jr("userId","==",e),Sr("diaAusencia","desc"),Td(100)),a=(await ga(r)).docs.map(_P),s=t.toLowerCase();return a.filter(i=>i.docenteAusente.toLowerCase().includes(s)||i.docenteReemplazante.toLowerCase().includes(s)||i.curso.toLowerCase().includes(s)||i.diaAusencia.includes(s)||i.asignaturaAusente.toLowerCase().includes(s)||i.asignaturaReemplazante.toLowerCase().includes(s))}catch(r){return console.error("Error en búsqueda de reemplazos:",r),[]}},c2e=Array.from({length:12},(e,t)=>t+1),OQ={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},u2e=e=>{const[t,r]=S.useState([]),[n,a]=S.useState(!0),[s,i]=S.useState(null);S.useEffect(()=>e?s2e(e,f=>{r(f),a(!1)}):void 0,[e]);const o=S.useCallback(async d=>{try{return i(null),await n2e(d,e)}catch(f){throw i(f instanceof Error?f.message:"Error al guardar"),f}},[e]),c=S.useCallback(async d=>{try{i(null),await a2e(d,e)}catch(f){throw i(f instanceof Error?f.message:"Error al eliminar"),f}},[e]),u=S.useCallback(async d=>{try{return i(null),d.trim()?await l2e(e,d):t}catch(f){return i(f instanceof Error?f.message:"Error en la búsqueda"),[]}},[e,t]);return{reemplazos:t,loading:n,error:s,save:o,remove:c,search:u}},d2e=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(!0);S.useEffect(()=>i2e(i=>{t(i),n(!1)}),[]);const a=S.useMemo(()=>e.map(s=>s.nombreCompleto).sort(),[e]);return{profesores:e,profesorNames:a,loading:r}},bx=({label:e,icon:t,children:r})=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:e}),l.jsxs("div",{className:"relative",children:[t&&l.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:t}),r]})]}),A2e="inline-flex items-center justify-center rounded-xl border text-sm px-3 py-2 transition-all",f2e="bg-emerald-50 border-emerald-200 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-200 dark:border-emerald-700",h2e="bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700 dark:hover:bg-slate-700",b0=({title:e,value:t,icon:r})=>l.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsx("div",{className:"grid place-items-center h-12 w-12 rounded-xl bg-gradient-to-br from-slate-100 to-slate-200 text-slate-700 dark:from-slate-700 dark:to-slate-600 dark:text-slate-200",children:r}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:e}),l.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:t})]})]}),m2e=({data:e})=>{const t=Math.max(1,...e.map(r=>r.value));return l.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Distribución (graficable)"}),l.jsx("div",{className:"grid gap-3",children:e.map(r=>l.jsxs("div",{children:[l.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:r.label}),l.jsx("span",{children:r.value})]}),l.jsx("div",{className:"h-2 w-full rounded bg-slate-200/60 dark:bg-slate-700",children:l.jsx("div",{className:"h-2 rounded bg-slate-900 dark:bg-amber-500",style:{width:`${r.value/t*100}%`}})})]},r.label))})]})},p2e=({data:e})=>{const t=Math.max(1,...e.map(n=>n.value)),r=["from-indigo-500 to-sky-500","from-emerald-500 to-lime-500","from-amber-500 to-orange-600","from-fuchsia-500 to-pink-500","from-cyan-500 to-teal-500","from-rose-500 to-red-500","from-violet-500 to-purple-500"];return l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[l.jsx(Yf,{className:"h-5 w-5 text-slate-400"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Reemplazos / Inasistencias por curso (mes actual)"})]}),e.length===0?l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No hay registros este mes."}):l.jsx("div",{className:"grid gap-3",children:e.map((n,a)=>l.jsxs("div",{className:"w-full",children:[l.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[l.jsx("span",{className:"font-medium",children:n.label}),l.jsx("span",{children:n.value})]}),l.jsx("div",{className:"h-3 w-full rounded-lg bg-slate-100 dark:bg-slate-700",children:l.jsx("div",{className:`h-3 rounded-lg bg-gradient-to-r ${r[a%r.length]}`,style:{width:`${n.value/t*100}%`}})})]},n.label))})]})},g2e=({userId:e,reemplazos:t})=>{const[r,n]=S.useState(null),[a,s]=S.useState(!1),i=S.useCallback(async()=>{try{s(!0);const b=await o2e(e);n(b)}finally{s(!1)}},[e]);S.useEffect(()=>{e&&i()},[e,i]);const o=new Date,c=o.getMonth(),u=o.getFullYear(),d=S.useMemo(()=>(t||[]).filter(b=>{const y=new Date(b.diaAusencia+"T00:00:00");return y.getMonth()===c&&y.getFullYear()===u}),[t,c,u]),f=new Set(d.map(b=>b.docenteAusente).filter(Boolean)),h=new Set(d.map(b=>b.docenteReemplazante).filter(Boolean)),p=new Set(d.map(b=>b.curso).filter(Boolean)),g=new Set(d.map(b=>b.asignaturaAusente).filter(Boolean)),x=[{label:"Prof. ausentes",value:f.size},{label:"Prof. que reemplazan",value:h.size},{label:"Cursos",value:p.size},{label:"Asignaturas ausentes",value:g.size}];return a||!r?l.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:l.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-500",children:[l.jsx(z0,{className:"h-5 w-5 animate-spin"}),"Cargando estadísticas…"]})}):l.jsxs("div",{className:"grid gap-4",children:[l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[l.jsx(b0,{title:"Total",value:r.totalReemplazos,icon:l.jsx($be,{className:"h-6 w-6"})}),l.jsx(b0,{title:"Realizadas",value:r.horasRealizadas,icon:l.jsx(vo,{className:"h-6 w-6"})}),l.jsx(b0,{title:"Cubiertas",value:r.horasCubiertas,icon:l.jsx(xye,{className:"h-6 w-6"})}),l.jsx(b0,{title:"Efectividad",value:`${r.porcentajeRealizadas.toFixed(1)}%`,icon:l.jsx(Awe,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[l.jsx(b0,{title:"Profesores ausentes",value:f.size,icon:l.jsx(Pwe,{className:"h-6 w-6"})}),l.jsx(b0,{title:"Profesores que reemplazan",value:h.size,icon:l.jsx(Lwe,{className:"h-6 w-6"})}),l.jsx(b0,{title:"Cursos (únicos)",value:p.size,icon:l.jsx(Zl,{className:"h-6 w-6"})}),l.jsx(b0,{title:"Asignaturas ausentes",value:g.size,icon:l.jsx(ef,{className:"h-6 w-6"})})]}),l.jsx(m2e,{data:x})]})},x2e=({currentUser:e})=>{const t=e.email||e.id||"",{reemplazos:r,save:n,remove:a,search:s,loading:i,error:o}=u2e(t),{profesorNames:c,loading:u}=d2e(),[d,f]=S.useState(OQ),[h,p]=S.useState(""),[g,x]=S.useState([]),[b,y]=S.useState(null),[w,_]=S.useState(!1),[B,k]=S.useState(!1);S.useEffect(()=>{(async()=>{if(!h.trim())return x(r);k(!0);try{const z=await s(h);x(z)}finally{k(!1)}})()},[r,h,s]);const I=S.useCallback(K=>{const{name:z,value:G}=K.target;f(Y=>({...Y,[z]:G}))},[]),E=S.useCallback(K=>{f(z=>{const Y=z.bloquesAfectados.includes(K)?z.bloquesAfectados.filter(ee=>ee!==K):[...z.bloquesAfectados,K].sort((ee,P)=>ee-P);return{...z,bloquesAfectados:Y}})},[]),N=S.useCallback(async K=>{K.preventDefault(),y(null),_(!0);const{docenteAusente:z,asignaturaAusente:G,curso:Y,diaAusencia:ee,bloquesAfectados:P,docenteReemplazante:Q,asignaturaReemplazante:X}=d;if(!z||!G||!Y||!ee||!Q||!X||P.length===0){y("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),_(!1);return}if(z===Q){y("El docente ausente y el reemplazante no pueden ser la misma persona."),_(!1);return}try{const te=G.trim().toLowerCase()===X.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",ae={...d,resultado:te};await n(ae),f(OQ);const se=document.createElement("div");se.className="fixed top-4 right-4 z-50 rounded-lg bg-emerald-600 px-4 py-2 text-white shadow-lg",se.textContent=te==="Hora realizada"?"✅ Reemplazo registrado — Hora realizada":"⚠️ Reemplazo registrado — Hora cubierta, no realizada",document.body.appendChild(se),setTimeout(()=>{document.body.contains(se)&&document.body.removeChild(se)},2500)}catch(te){console.error(te),y("Error al guardar el reemplazo. Intente nuevamente.")}finally{_(!1)}},[d,n]),j=S.useCallback(async K=>{if(window.confirm("¿Eliminar este registro?"))try{await a(K)}catch(z){console.error(z),alert("No se pudo eliminar. Intente nuevamente.")}},[a]),R="w-full rounded-lg border bg-white px-10 py-2.5 text-slate-700 placeholder-slate-400 shadow-sm outline-none transition focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100";if(!e||!e.email&&!e.id)return l.jsx("div",{className:"grid place-items-center rounded-xl border border-slate-200 bg-white p-8 text-center shadow-sm dark:border-slate-700 dark:bg-slate-800",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Error: Usuario no autenticado."})});const D=new Date,O=D.getMonth(),L=D.getFullYear(),M=S.useMemo(()=>(r||[]).filter(K=>{if(!K.diaAusencia)return!1;const z=new Date(K.diaAusencia+"T00:00:00");return z.getMonth()===O&&z.getFullYear()===L}),[r,O,L]),J=S.useMemo(()=>{const K={};for(const z of M){const G=z.curso||"Sin curso";K[G]=(K[G]||0)+1}return K},[M]),V=S.useMemo(()=>Object.entries(J).sort(([K],[z])=>K.localeCompare(z,"es")).map(([K,z])=>({label:K,value:z})),[J]);return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"mb-1 text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Estadísticas del Mes"}),l.jsx(g2e,{userId:t,reemplazos:r})]}),l.jsx(p2e,{data:V}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Registro de Inasistencias y Reemplazos"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Complete el formulario para registrar una nueva suplencia."})]}),u?l.jsxs("div",{className:"flex items-center justify-center gap-2 py-8 text-slate-500",children:[l.jsx(z0,{className:"h-5 w-5 animate-spin"})," Cargando profesores…"]}):l.jsxs("form",{onSubmit:N,className:"space-y-8",children:[l.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Zl,{className:"h-5 w-5 text-slate-400"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Ausente"})]}),l.jsx(bx,{label:"Nombre",icon:l.jsx(ug,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:I,className:R,required:!0,disabled:w,children:[l.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(K=>l.jsx("option",{value:K,children:K},K))]})}),l.jsx(bx,{label:"Asignatura",icon:l.jsx(ef,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:I,className:R,required:!0,disabled:w,children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),qi.map(K=>l.jsx("option",{value:K,children:K},K))]})}),l.jsx(bx,{label:"Curso",icon:l.jsx(Zl,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"curso",value:d.curso,onChange:I,className:R,required:!0,disabled:w,children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),Ks.map(K=>l.jsx("option",{value:K,children:K},K))]})}),l.jsx(bx,{label:"Día de ausencia",icon:l.jsx(Id,{className:"h-5 w-5"}),children:l.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:I,className:R,required:!0,disabled:w})}),l.jsxs("div",{children:[l.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[l.jsx(V0,{className:"h-5 w-5 text-slate-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Bloques afectados"})]}),l.jsx("div",{className:"grid grid-cols-4 gap-2 sm:grid-cols-6",children:c2e.map(K=>{const z=d.bloquesAfectados.includes(K);return l.jsx("button",{type:"button",onClick:()=>E(K),disabled:w,className:`${A2e} ${z?f2e:h2e}`,"aria-pressed":z,children:K},K)})})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Zl,{className:"h-5 w-5 text-slate-400"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Reemplazante"})]}),l.jsx(bx,{label:"Nombre",icon:l.jsx(ug,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:I,className:R,required:!0,disabled:w,children:[l.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(K=>l.jsx("option",{value:K,children:K},K))]})}),l.jsx(bx,{label:"Asignatura",icon:l.jsx(ef,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:I,className:R,required:!0,disabled:w,children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),qi.map(K=>l.jsx("option",{value:K,children:K},K))]})}),d.asignaturaAusente&&d.asignaturaReemplazante&&l.jsxs("div",{className:"mt-4 rounded-xl border-2 border-dashed border-slate-200 p-4 dark:border-slate-700",children:[l.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Vista previa del resultado"}),l.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[l.jsx(vo,{className:"h-4 w-4"}),d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Hora realizada":"Hora cubierta, no realizada"]}),l.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden.":"Las asignaturas no coinciden."})]})]})]}),(b||o)&&l.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 text-red-700 dark:border-red-800 dark:bg-red-900/20 dark:text-red-300",children:b||o}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{type:"submit",disabled:w||u,className:"inline-flex items-center gap-2 rounded-xl bg-slate-900 px-5 py-2.5 font-semibold text-white shadow hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:w?l.jsxs(l.Fragment,{children:[l.jsx(z0,{className:"h-4 w-4 animate-spin"})," Registrando…"]}):l.jsxs(l.Fragment,{children:[l.jsx(vm,{className:"h-4 w-4"})," Registrar Reemplazo"]})})})]})]}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsxs("div",{className:"mb-4 flex items-center justify-between gap-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Historial de Reemplazos"}),l.jsxs("div",{className:"relative w-full max-w-md",children:[l.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:B?l.jsx(z0,{className:"h-5 w-5 animate-spin"}):l.jsx(w4,{className:"h-5 w-5"})}),l.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)…",value:h,onChange:K=>p(K.target.value),className:R,disabled:B})]})]}),i?l.jsxs("div",{className:"flex items-center justify-center gap-2 py-10 text-slate-500",children:[l.jsx(z0,{className:"h-5 w-5 animate-spin"})," Cargando reemplazos…"]}):l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:l.jsx("tr",{children:["Fecha","Curso","Docente Ausente","Docente Reemplazante","Bloques","Resultado","Acciones"].map(K=>l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:K},K))})}),l.jsx("tbody",{className:"divide-y divide-slate-200 bg-white dark:divide-slate-700 dark:bg-slate-800",children:g.length>0?g.map(K=>l.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/40",children:[l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-200",children:new Date(K.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:K.curso}),l.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[K.docenteAusente,l.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:K.asignaturaAusente})]}),l.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[K.docenteReemplazante,l.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:K.asignaturaReemplazante})]}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:K.bloquesAfectados.join(", ")}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:l.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${K.resultado==="Hora realizada"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[l.jsx(vo,{className:"h-4 w-4"}),K.resultado]})}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:l.jsx("button",{onClick:()=>j(K.id),title:"Eliminar registro",className:"rounded-full p-2 text-red-600 hover:bg-red-50 hover:text-red-700 dark:text-red-300 dark:hover:bg-red-900/30",disabled:w,children:l.jsx(tl,{className:"h-4 w-4"})})})]},K.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:h?"No se encontraron resultados para tu búsqueda.":"Aún no hay registros."})})})]}),g.length>0&&!h&&l.jsxs("div",{className:"mt-4 text-center text-sm text-slate-500 dark:text-slate-400",children:["Mostrando los últimos ",g.length," registros"]})]})]})]})},v2e=e=>{console.log("🔄 Iniciando suscripción a todos los reemplazos...");try{const t=kt(xn,"reemplazos"),r=$t(t,Sr("fecha","desc"));return pr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Reemplazos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar reemplazos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a reemplazos:",t),t}},b2e=e=>{console.log("🔄 Iniciando suscripción a todos los acompañamientos...");try{const t=kt(xn,"acompanamientos"),r=$t(t,Sr("fecha","desc"));return pr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Acompañamientos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar acompañamientos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a acompañamientos:",t),t}},y2e=e=>{console.log("🔄 Iniciando suscripción a todos los eventos del calendario...");try{const t=kt(xn,"calendar_events"),r=$t(t,Sr("date","asc"));return pr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Eventos del calendario cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar eventos del calendario:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a eventos del calendario:",t),t}},EA=({title:e,value:t,description:r,isLoading:n=!1})=>l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),n?l.jsxs("div",{className:"flex items-center mt-2",children:[l.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:t}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),fp=({title:e,data:t,colorClass:r,valueFormatter:n=s=>String(s),isLoading:a=!1})=>{const s=S.useMemo(()=>t.map(o=>typeof o.value=="number"?o.value:parseFloat(String(o.value))||0),[t]),i=S.useMemo(()=>Math.max(...s,1),[s]);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),a?l.jsxs("div",{className:"flex justify-center items-center py-8",children:[l.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):l.jsx("div",{className:"space-y-4",children:t.length>0?t.sort((o,c)=>(typeof c.value=="number"?c.value:0)-(typeof o.value=="number"?o.value:0)).map((o,c)=>{const u=typeof o.value=="number"?o.value:parseFloat(String(o.value))||0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:o.label}),l.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(o.value)})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:l.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/i*100}%`}})})]},o.label+c)}):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},w2e=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,s]=S.useState([]),[i,o]=S.useState(!0),[c,u]=S.useState(null);return S.useEffect(()=>{console.log("🔄 Iniciando carga de datos del dashboard...");let d=0;const f=3,h=()=>{d++,d>=f&&(o(!1),console.log("✅ Todos los datos del dashboard cargados"))};try{const p=v2e(b=>{t(b),h()}),g=b2e(b=>{n(b),h()}),x=y2e(b=>{s(b),h()});return()=>{p(),g(),x()}}catch(p){console.error("❌ Error al configurar suscripciones del dashboard:",p),u(p instanceof Error?p.message:"Error al cargar datos del dashboard"),o(!1)}},[]),{registros:e,acompanamientos:r,calendarEvents:a,loading:i,error:c}},E2e=({currentUser:e})=>{var f,h;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log("🔍 Dashboard - currentUser completo:",e),console.log("🔍 Dashboard - currentUser.profile:",e==null?void 0:e.profile),console.log("🔍 Dashboard - Verificación de perfil:",(e==null?void 0:e.profile)==="SUBDIRECCION"),console.log("🔍 Dashboard - Typeof profile:",typeof(e==null?void 0:e.profile)),console.log("🔍 Dashboard - Profile length:",(f=e==null?void 0:e.profile)==null?void 0:f.length),console.log("🔍 Dashboard - Profile con comillas:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - Comparación con trim:",((h=e==null?void 0:e.profile)==null?void 0:h.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:t,acompanamientos:r,calendarEvents:n,loading:a,error:s}=w2e(),[i,o]=S.useState(Jy);if(console.log("🔍 Dashboard - Datos recibidos:",{registros:t.length,acompanamientos:r.length,calendarEvents:n.length,loading:a,error:s,currentUser:e==null?void 0:e.profile}),S.useEffect(()=>{try{const p=localStorage.getItem("acompanamientoDocenteCustomRubrica");o(p?JSON.parse(p):Jy)}catch(p){console.error("Error al leer rúbrica personalizada",p),o(Jy)}},[]),console.log("🔍 Dashboard - Verificando permisos..."),console.log("🔍 Dashboard - currentUser existe:",!!e),console.log("🔍 Dashboard - profile value:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - comparación exacta:",(e==null?void 0:e.profile)==="SUBDIRECCION"),!e)return console.log("❌ Dashboard - currentUser es null/undefined"),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(e.profile!=="SUBDIRECCION")return console.log("❌ Dashboard - Perfil no autorizado:",e.profile),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("span",{className:"text-6xl mb-4",children:"🚫"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard está disponible solo para usuarios con perfil de Subdirección."}),l.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[l.jsx("p",{children:l.jsx("strong",{children:"Debug Info:"})}),l.jsxs("p",{children:['Su perfil actual: "',e.profile,'"']}),l.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),l.jsxs("p",{children:["Usuario: ",e.email||e.nombreCompleto]})]})]});if(console.log("✅ Dashboard - Permisos verificados correctamente"),s)return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("span",{className:"text-6xl mb-4",children:"⚠️"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),l.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:s}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Página"})]});const c=S.useMemo(()=>{const p=t.length;if(p===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const g=t.filter(k=>k.resultado==="Hora realizada").length,x=p-g,b=`${(g/p*100).toFixed(1)}%`,y=(k,I)=>k.reduce((E,N)=>{const j=N[I];return typeof j=="string"&&(E[j]=(E[j]||0)+1),E},{}),w=y(t,"docenteAusente"),_=y(t,"docenteReemplazante"),B=y(t,"curso");return{totalInasistencias:p,horasRealizadas:g,horasCubiertas:x,tasaCobertura:b,inasistenciasPorDocente:Object.entries(w).map(([k,I])=>({label:k,value:I})),reemplazosPorDocente:Object.entries(_).map(([k,I])=>({label:k,value:I})),inasistenciasPorCurso:Object.entries(B).map(([k,I])=>({label:k,value:I})),distribucionResultados:[{label:"Hora Realizada",value:g},{label:"Hora Cubierta",value:x}]}},[t]),u=S.useMemo(()=>{const p=r.length;if(p===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const g=new Map;i.forEach(I=>{I.criteria.forEach(E=>{g.set(E.name,I.domain)})});let x=0,b=0;const y={},w={};r.forEach(I=>{y[I.docente]||(y[I.docente]={total:0,count:0}),Object.entries(I.rubricaResultados).forEach(([E,N])=>{x+=N,b++,y[I.docente].total+=N,y[I.docente].count++;const j=g.get(E);j&&(w[j]||(w[j]={total:0,count:0}),w[j].total+=N,w[j].count++)})});const _=b>0?(x/b).toFixed(2):"N/A",B=Object.entries(y).map(([I,E])=>({label:I,value:E.count>0?(E.total/E.count).toFixed(2):0})),k=Object.entries(w).map(([I,E])=>({label:I,value:E.count>0?(E.total/E.count).toFixed(2):0}));return{totalAcompanamientos:p,promedioGeneral:_,desempenoPorDocente:B,desempenoPorDominio:k}},[r,i]),d=S.useMemo(()=>{const p={[dn.EVALUACION]:0,[dn.ACTO]:0,[dn.ACTIVIDAD_FOCALIZADA]:0,[dn.SALIDA_PEDAGOGICA]:0};for(const x of n)p.hasOwnProperty(x.type)&&p[x.type]++;const g=Object.entries(p).map(([x,b])=>({label:bv[x].label,value:b}));return{totalEvaluaciones:p[dn.EVALUACION],totalActos:p[dn.ACTO],totalActividadesFocalizadas:p[dn.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:p[dn.SALIDA_PEDAGOGICA],distribucionEventos:g}},[n]);return a?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):c.totalInasistencias===0&&u.totalAcompanamientos===0&&n.length===0?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("span",{className:"text-6xl mb-4",children:"📊"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes."}),l.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[l.jsx("p",{children:"• Módulo de Inasistencias y Reemplazos"}),l.jsx("p",{children:"• Módulo de Acompañamiento Docente"}),l.jsx("p",{children:"• Calendario Académico"})]})]}):l.jsxs("div",{className:"space-y-12 animate-fade-in",children:[l.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[l.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdirección"}),l.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),l.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["Última actualización: ",new Date().toLocaleString("es-CL")]})]}),t.length>0&&l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📋 Dashboard de Inasistencias y Reemplazos"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(EA,{title:"Total Inasistencias",value:c.totalInasistencias,description:"Registros totales",isLoading:a}),l.jsx(EA,{title:"Horas Realizadas",value:c.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:a}),l.jsx(EA,{title:"Horas Cubiertas",value:c.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:a}),l.jsx(EA,{title:"Tasa de Cobertura Efectiva",value:c.tasaCobertura,description:"% de horas realizadas",isLoading:a})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsx(fp,{title:"Inasistencias por Docente",data:c.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:a}),l.jsx(fp,{title:"Reemplazos por Docente",data:c.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:a}),l.jsx(fp,{title:"Inasistencias por Curso",data:c.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:a}),l.jsx(fp,{title:"Distribución de Resultados",data:c.distribucionResultados,colorClass:"bg-green-400",isLoading:a})]})]}),r.length>0&&l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"👥 Dashboard de Acompañamiento Docente"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(EA,{title:"Total Acompañamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:a}),l.jsx(EA,{title:"Promedio General",value:u.promedioGeneral,description:"Calificación promedio (1-4)",isLoading:a})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsx(fp,{title:"Desempeño Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:p=>Number(p).toFixed(2),isLoading:a}),l.jsx(fp,{title:"Desempeño Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:p=>Number(p).toFixed(2),isLoading:a})]})]}),n.length>0&&l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📅 Resumen del Calendario Académico"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(EA,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:a}),l.jsx(EA,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:a}),l.jsx(EA,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:a}),l.jsx(EA,{title:"Salidas Pedagógicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:a})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsx(fp,{title:"Distribución de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:a}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Próximos Eventos"}),a?l.jsxs("div",{className:"flex justify-center items-center py-8",children:[l.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):l.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(p=>new Date(p.date)>=new Date).slice(0,5).map((p,g)=>{var x,b;return l.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:p.responsables||"Evento sin título"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(p.date).toLocaleDateString("es-CL")}),p.ubicacion&&l.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["📍 ",p.ubicacion]})]}),l.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((x=bv[p.type])==null?void 0:x.color)||"bg-gray-100 text-gray-800"}`,children:((b=bv[p.type])==null?void 0:b.label)||p.type})]})},p.id||g)}),n.filter(p=>new Date(p.date)>=new Date).length===0&&l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos próximos programados"})]})]})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"📈 Resumen Ejecutivo"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:t.length+r.length+n.length}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...t.map(p=>p.docenteAusente),...r.map(p=>p.docente)]).size}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(t.filter(p=>p.resultado==="Hora realizada").length/Math.max(t.length,1)*100),"%"]}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),l.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[l.jsx("p",{children:"Dashboard de Subdirección - Sistema de Gestión Pedagógica"}),l.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})};var DQ;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(DQ||(DQ={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var PQ;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(PQ||(PQ={}));var RQ;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(RQ||(RQ={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LQ=["user","model","function","system"];var MQ;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(MQ||(MQ={}));var UQ;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(UQ||(UQ={}));var QQ;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(QQ||(QQ={}));var HQ;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(HQ||(HQ={}));var ew;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(ew||(ew={}));var VQ;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(VQ||(VQ={}));var zQ;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(zQ||(zQ={}));var $Q;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})($Q||($Q={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class yx extends Yo{constructor(t,r){super(t),this.response=r}}class bee extends Yo{constructor(t,r,n,a){super(t),this.status=r,this.statusText=n,this.errorDetails=a}}class nm extends Yo{}class yee extends Yo{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2e="https://generativelanguage.googleapis.com",_2e="v1beta",N2e="0.24.1",S2e="genai-js";var dg;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(dg||(dg={}));class k2e{constructor(t,r,n,a,s){this.model=t,this.task=r,this.apiKey=n,this.stream=a,this.requestOptions=s}toString(){var t,r;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||_2e;let s=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||C2e}/${n}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function B2e(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${S2e}/${N2e}`),t.join(" ")}async function j2e(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",B2e(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(a){throw new nm(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${a.message}`)}for(const[a,s]of n.entries()){if(a==="x-goog-api-key")throw new nm(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new nm(`Header name ${a} can only be set using the apiClient field`);r.append(a,s)}}return r}async function T2e(e,t,r,n,a,s){const i=new k2e(e,t,r,n,s);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},D2e(s)),{method:"POST",headers:await j2e(i),body:a})}}async function P2(e,t,r,n,a,s={},i=fetch){const{url:o,fetchOptions:c}=await T2e(e,t,r,n,a,s);return I2e(o,c,i)}async function I2e(e,t,r=fetch){let n;try{n=await r(e,t)}catch(a){F2e(a,e)}return n.ok||await O2e(n,e),n}function F2e(e,t){let r=e;throw r.name==="AbortError"?(r=new yee(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof bee||e instanceof nm||(r=new Yo(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function O2e(e,t){let r="",n;try{const a=await e.json();r=a.error.message,a.error.details&&(r+=` ${JSON.stringify(a.error.details)}`,n=a.error.details)}catch{}throw new bee(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}function D2e(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),t5(e.candidates[0]))throw new yx(`${T0(e)}`,e);return P2e(e)}else if(e.promptFeedback)throw new yx(`Text not available. ${T0(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),t5(e.candidates[0]))throw new yx(`${T0(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),GQ(e)[0]}else if(e.promptFeedback)throw new yx(`Function call not available. ${T0(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),t5(e.candidates[0]))throw new yx(`${T0(e)}`,e);return GQ(e)}else if(e.promptFeedback)throw new yx(`Function call not available. ${T0(e)}`,e)},e}function P2e(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.text&&s.push(i.text),i.executableCode&&s.push("\n```"+i.executableCode.language+`
`+i.executableCode.code+"\n```\n"),i.codeExecutionResult&&s.push("\n```\n"+i.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function GQ(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.functionCall&&s.push(i.functionCall);if(s.length>0)return s}const R2e=[ew.RECITATION,ew.SAFETY,ew.LANGUAGE];function t5(e){return!!e.finishReason&&R2e.includes(e.finishReason)}function T0(e){var t,r,n;let a="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)a+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(a+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const s=e.candidates[0];t5(s)&&(a+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(a+=`: ${s.finishMessage}`))}return a}function Ow(e){return this instanceof Ow?(this.v=e,this):new Ow(e)}function L2e(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,s=[];return a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a;function i(h){n[h]&&(a[h]=function(p){return new Promise(function(g,x){s.push([h,p,g,x])>1||o(h,p)})})}function o(h,p){try{c(n[h](p))}catch(g){f(s[0][3],g)}}function c(h){h.value instanceof Ow?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){o("next",h)}function d(h){o("throw",h)}function f(h,p){h(p),s.shift(),s.length&&o(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KQ=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function M2e(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=H2e(t),[n,a]=r.tee();return{stream:Q2e(n),response:U2e(a)}}async function U2e(e){const t=[],r=e.getReader();for(;;){const{done:n,value:a}=await r.read();if(n)return NP(V2e(t));t.push(a)}}function Q2e(e){return L2e(this,arguments,function*(){const r=e.getReader();for(;;){const{value:n,done:a}=yield Ow(r.read());if(a)break;yield yield Ow(NP(n))}})}function H2e(e){const t=e.getReader();return new ReadableStream({start(n){let a="";return s();function s(){return t.read().then(({value:i,done:o})=>{if(o){if(a.trim()){n.error(new Yo("Failed to parse stream"));return}n.close();return}a+=i;let c=a.match(KQ),u;for(;c;){try{u=JSON.parse(c[1])}catch{n.error(new Yo(`Error parsing JSON response: "${c[1]}"`));return}n.enqueue(u),a=a.substring(c[0].length),c=a.match(KQ)}return s()}).catch(i=>{let o=i;throw o.stack=i.stack,o.name==="AbortError"?o=new yee("Request aborted when reading from the stream"):o=new Yo("Error reading from the stream"),o})}}})}function V2e(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let a=0;for(const s of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[a]||(r.candidates[a]={index:a}),r.candidates[a].citationMetadata=s.citationMetadata,r.candidates[a].groundingMetadata=s.groundingMetadata,r.candidates[a].finishReason=s.finishReason,r.candidates[a].finishMessage=s.finishMessage,r.candidates[a].safetyRatings=s.safetyRatings,s.content&&s.content.parts){r.candidates[a].content||(r.candidates[a].content={role:s.content.role||"user",parts:[]});const i={};for(const o of s.content.parts)o.text&&(i.text=o.text),o.functionCall&&(i.functionCall=o.functionCall),o.executableCode&&(i.executableCode=o.executableCode),o.codeExecutionResult&&(i.codeExecutionResult=o.codeExecutionResult),Object.keys(i).length===0&&(i.text=""),r.candidates[a].content.parts.push(i)}a++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wee(e,t,r,n){const a=await P2(t,dg.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n);return M2e(a)}async function Eee(e,t,r,n){const s=await(await P2(t,dg.GENERATE_CONTENT,e,!1,JSON.stringify(r),n)).json();return{response:NP(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cee(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function Dw(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return z2e(t)}function z2e(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,a=!1;for(const s of e)"functionResponse"in s?(r.parts.push(s),a=!0):(t.parts.push(s),n=!0);if(n&&a)throw new Yo("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!a)throw new Yo("No content is provided for sending chat message.");return n?t:r}function $2e(e,t){var r;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const a=e.generateContentRequest!=null;if(e.contents){if(a)throw new nm("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(a)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const s=Dw(e);n.contents=[s]}return{generateContentRequest:n}}function qQ(e){let t;return e.contents?t=e:t={contents:[Dw(e)]},e.systemInstruction&&(t.systemInstruction=Cee(e.systemInstruction)),t}function G2e(e){return typeof e=="string"||Array.isArray(e)?{content:Dw(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WQ=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],K2e={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function q2e(e){let t=!1;for(const r of e){const{role:n,parts:a}=r;if(!t&&n!=="user")throw new Yo(`First content should be with role 'user', got ${n}`);if(!LQ.includes(n))throw new Yo(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(LQ)}`);if(!Array.isArray(a))throw new Yo("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new Yo("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of a)for(const c of WQ)c in o&&(s[c]+=1);const i=K2e[n];for(const o of WQ)if(!i.includes(o)&&s[o]>0)throw new Yo(`Content with role '${n}' can't contain '${o}' part`);t=!0}}function XQ(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YQ="SILENT_ERROR";class W2e{constructor(t,r,n,a={}){this.model=r,this.params=n,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(q2e(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var n,a,s,i,o,c;await this._sendPromise;const u=Dw(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r);let h;return this._sendPromise=this._sendPromise.then(()=>Eee(this._apiKey,this.model,d,f)).then(p=>{var g;if(XQ(p.response)){this._history.push(u);const x=Object.assign({parts:[],role:"model"},(g=p.response.candidates)===null||g===void 0?void 0:g[0].content);this._history.push(x)}else{const x=T0(p.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}h=p}).catch(p=>{throw this._sendPromise=Promise.resolve(),p}),await this._sendPromise,h}async sendMessageStream(t,r={}){var n,a,s,i,o,c;await this._sendPromise;const u=Dw(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r),h=wee(this._apiKey,this.model,d,f);return this._sendPromise=this._sendPromise.then(()=>h).catch(p=>{throw new Error(YQ)}).then(p=>p.response).then(p=>{if(XQ(p)){this._history.push(u);const g=Object.assign({},p.candidates[0].content);g.role||(g.role="model"),this._history.push(g)}else{const g=T0(p);g&&console.warn(`sendMessageStream() was unsuccessful. ${g}. Inspect response object for details.`)}}).catch(p=>{p.message!==YQ&&console.error(p)}),h}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X2e(e,t,r,n){return(await P2(t,dg.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y2e(e,t,r,n){return(await P2(t,dg.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}async function J2e(e,t,r,n){const a=r.requests.map(i=>Object.assign(Object.assign({},i),{model:t}));return(await P2(t,dg.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:a}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JQ{constructor(t,r,n={}){this.apiKey=t,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=Cee(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var n;const a=qQ(t),s=Object.assign(Object.assign({},this._requestOptions),r);return Eee(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}async generateContentStream(t,r={}){var n;const a=qQ(t),s=Object.assign(Object.assign({},this._requestOptions),r);return wee(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}startChat(t){var r;return new W2e(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const n=$2e(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),r);return X2e(this.apiKey,this.model,n,a)}async embedContent(t,r={}){const n=G2e(t),a=Object.assign(Object.assign({},this._requestOptions),r);return Y2e(this.apiKey,this.model,n,a)}async batchEmbedContents(t,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return J2e(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new Yo("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new JQ(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,n){if(!t.name)throw new nm("Cached content must contain a `name` field.");if(!t.model)throw new nm("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const i of a)if(r!=null&&r[i]&&t[i]&&(r==null?void 0:r[i])!==t[i]){if(i==="model"){const o=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,c=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(o===c)continue}throw new nm(`Different value for "${i}" specified in modelParams (${r[i]}) and cachedContent (${t[i]})`)}const s=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new JQ(this.apiKey,s,n)}}const SP="horario_asignaciones",_ee="horarios_generados",Z2e="usuarios",Nee=e=>{const t=e.data();return{id:e.id,...t}},eEe=e=>{const t=$t(kt(ht,SP));return pr(t,n=>{const a=n.docs.map(s=>Nee(s));e(a)},n=>{console.error("Error al suscribirse a las asignaciones:",n),e([])})},tEe=async e=>{try{return(await Tn(kt(ht,SP),e)).id}catch(t){throw console.error("Error al agregar asignación:",t),new Error("No se pudo agregar la asignación.")}},rEe=async e=>{try{const t=dr(ht,SP,e);await za(t)}catch(t){throw console.error("Error al eliminar asignación:",t),new Error("No se pudo eliminar la asignación.")}},ZQ=async e=>{try{const t=dr(ht,_ee,"global");await Ji(t,{data:e})}catch(t){throw console.error("Error al guardar los horarios:",t),new Error("No se pudieron guardar los horarios generados.")}},nEe=e=>{const t=dr(ht,_ee,"global");return pr(t,n=>{n.exists()?e(n.data().data||{}):e({})},n=>{console.error("Error al suscribirse a los horarios:",n),e({})})},aEe=e=>{const t=$t(kt(ht,Z2e),Jr("profile","==",Wt.PROFESORADO));return pr(t,n=>{const a=n.docs.map(s=>Nee(s));e(a)},n=>{console.error("Error al suscribirse a los profesores:",n),e([])})},sEe=({horarios:e})=>Object.keys(e).length===0?l.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800 rounded-lg",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'Aún no se ha generado ningún horario. Utilice la pestaña de "Configuración" para generar uno.'})}):l.jsx("div",{className:"overflow-x-auto border border-slate-300 dark:border-slate-700 rounded-lg",children:l.jsxs("table",{className:"min-w-full border-collapse",children:[l.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 sticky top-0 z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-16",children:"BLOQUE"}),l.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-24",children:"HORARIO"}),Ks.map(t=>l.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs whitespace-nowrap min-w-[120px]",children:t},t))]})}),l.jsx("tbody",{children:Z_.map(t=>l.jsxs(at.Fragment,{children:[l.jsx("tr",{className:"bg-slate-200 dark:bg-slate-800",children:l.jsx("th",{colSpan:2+Ks.length,className:"text-center font-bold text-slate-700 dark:text-slate-200 p-2 border-b border-slate-300 dark:border-slate-600",children:t.toUpperCase()})}),L6.map(({bloque:r,inicio:n,fin:a})=>l.jsxs("tr",{className:"even:bg-white odd:bg-slate-50 dark:even:bg-slate-800/50 dark:odd:bg-slate-900/50",children:[l.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center font-bold text-slate-700 dark:text-slate-300 text-sm",children:r}),l.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center text-xs text-slate-500 dark:text-slate-400",children:`${n} - ${a}`}),Ks.map(s=>{var o,c;const i=(c=(o=e[s])==null?void 0:o[t])==null?void 0:c[r];return l.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center h-16",children:i!=null&&i.asignatura?l.jsxs("div",{className:"flex flex-col justify-center h-full",children:[l.jsx("p",{className:"font-semibold text-[11px] leading-tight text-slate-800 dark:text-slate-200 whitespace-normal",children:i.asignatura}),l.jsxs("p",{className:"text-[10px] leading-tight text-slate-500 dark:text-slate-400 whitespace-normal mt-0.5",children:["(",i.profesor,")"]})]}):l.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-xs",children:"Libre"})},`${s}-${t}-${r}`)})]},`${t}-${r}`))]},t))})]})}),iEe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState({curso:"",asignatura:"",profesor:""}),[a,s]=S.useState([]),[i,o]=S.useState({}),[c,u]=S.useState(Ks[0]),[d,f]=S.useState(!1),[h,p]=S.useState(!0),[g,x]=S.useState(null),[b,y]=S.useState(null),[w,_]=S.useState(null),[B,k]=S.useState({asignatura:"",profesor:""}),[I,E]=S.useState("edicion"),[N,j]=S.useState("");S.useEffect(()=>{p(!0);const z=eEe(t),G=nEe(o),Y=aEe(ee=>{const P=ee.map(Q=>Q.nombreCompleto).sort();s(P),p(!1)});return()=>{z(),G(),Y()}},[]);const R=async z=>{if(z.preventDefault(),x(null),!r.curso||!r.asignatura||!r.profesor){x("Todos los campos de la asignación son obligatorios.");return}try{await tEe({curso:r.curso,asignatura:r.asignatura,profesor:r.profesor}),n({curso:"",asignatura:"",profesor:""})}catch(G){x(G instanceof Error?G.message:"Error al guardar la asignación.")}},D=async z=>{try{await rEe(z)}catch(G){x(G instanceof Error?G.message:"Error al eliminar la asignación.")}},O=async()=>{if(e.length===0){x("Debe agregar al menos una asignación de profesor antes de generar el horario.");return}f(!0),x(null),y(null);try{const z="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",G=new us(z),Y=`
                Eres un asistente experto en planificación de horarios escolares para un liceo técnico en Chile. 
                Tu tarea es generar un horario semanal completo (Lunes a Viernes) para todos los cursos proporcionados, siguiendo un conjunto estricto de reglas.

                **Contexto:**
                - Días de la semana: ${Z_.join(", ")}
                - Bloques horarios por día: 10 bloques con los siguientes horarios: ${JSON.stringify(L6,null,2)}
                - Cursos del liceo: ${Ks.join(", ")}

                **Contexto Adicional de Especialidades (3º y 4º Medio):**
                - Los cursos que terminan en 'A' y 'B' pertenecen a la especialidad 'Mecánica Automotriz'.
                - Los cursos que terminan en 'C' y 'D' pertenecen a la especialidad 'Mecánica Industrial'.
                Utiliza este contexto para aplicar las reglas de "3°/4° Medio Automotriz" y "3°/4° Medio Industrial" correctamente.

                **Reglas de Asignación de Bloques por Asignatura:**
                Debes asignar la siguiente cantidad de bloques semanales para cada asignatura según el nivel del curso:
                ${JSON.stringify(Cbe,null,2)}
                Notas sobre las reglas:
                - '1º y 2º medio' aplica a cursos que empiezan con '1º' o '2º'.
                - '3º y 4º medio' aplica a cursos que empiezan con '3º' o '4º'.
                - Algunas reglas aplican a cursos específicos (ej. Mecánica).

                **Asignaciones de Profesores (Input):**
                Aquí está la lista de profesores asignados a cada curso y asignatura. Debes usar esta lista para poblar el horario.
                ${JSON.stringify(e,null,2)}

                **REGLA CRÍTICA INVIOLABLE:**
                La restricción más importante que NUNCA debe romperse es que un mismo profesor no puede ser asignado a dos cursos diferentes en el mismo día y mismo bloque horario. Es físicamente imposible para un profesor estar en dos lugares a la vez. Prioriza esta regla sobre todas las demás. No deben existir topes de horario para ningún profesor.

                **Instrucciones Adicionales del Usuario:**
                Considera las siguientes preferencias al organizar el horario: "${N||"No se proporcionaron instrucciones adicionales."}"

                **Objetivo Adicional:**
                Distribuye las asignaturas de la forma más balanceada posible durante la semana para cada curso. Evita agrupar todas las horas de una misma materia en un solo día si es posible, a menos que las instrucciones del usuario indiquen lo contrario.

                **Formato de Salida (Output):**
                Tu respuesta DEBE ser un único objeto JSON válido, sin texto adicional, explicaciones, ni el bloque \`\`\`json. La estructura del JSON debe ser la siguiente:
                {
                  "1ºA": {
                    "Lunes": { "1": { "asignatura": "Matemática", "profesor": "Nombre Profesor" }, "2": { "asignatura": "Matemática", "profesor": "Nombre Profesor" } },
                    "Martes": { ... },
                    ...
                  },
                  "1ºB": { ... }
                }
                Cada clave de primer nivel es un curso. Cada curso tiene claves para cada día de la semana. Cada día tiene claves para cada bloque del 1 al 10. Si un bloque está vacío, usa \`{ "asignatura": null, "profesor": null }\`.
            `,te=(await(await G.getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(Y)).response).text().replace(/^```json\s*|```\s*$/g,""),ae=JSON.parse(te);await ZQ(ae),y("¡Horario generado y guardado con éxito!")}catch(z){console.error("Error al generar horario con IA:",z),x("Ocurrió un error al contactar con la IA o al procesar la respuesta. Revisa la consola para más detalles.")}finally{f(!1)}},L=(z,G,Y)=>{_({dia:z,bloque:G}),k({asignatura:(Y==null?void 0:Y.asignatura)||"",profesor:(Y==null?void 0:Y.profesor)||""})},M=async()=>{if(!w)return;const{dia:z,bloque:G}=w,Y=JSON.parse(JSON.stringify(i));Y[c]||(Y[c]={}),Y[c][z]||(Y[c][z]={}),Y[c][z][G]={asignatura:B.asignatura||null,profesor:B.profesor||null};try{await ZQ(Y),_(null)}catch(ee){x(ee instanceof Error?ee.message:"Error al guardar la edición.")}},J="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",V=()=>{const z=i[c]||{};return l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-700",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700",children:[l.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:"Bloque"}),Z_.map(G=>l.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:G},G))]})}),l.jsx("tbody",{children:L6.map(({bloque:G,inicio:Y,fin:ee})=>l.jsxs("tr",{className:"text-center dark:bg-slate-800",children:[l.jsxs("td",{className:"border border-slate-300 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:G}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:`${Y} - ${ee}`})]}),Z_.map(P=>{var te;const Q=(w==null?void 0:w.dia)===P&&(w==null?void 0:w.bloque)===G,X=(te=z[P])==null?void 0:te[G];return l.jsx("td",{className:"border border-slate-300 dark:border-slate-700 p-1 h-24 relative hover:bg-amber-50 dark:hover:bg-slate-700 cursor-pointer",onClick:()=>!Q&&L(P,G,X),children:Q?l.jsxs("div",{className:"flex flex-col p-1 bg-white dark:bg-slate-800 h-full justify-center",children:[l.jsx("input",{type:"text",placeholder:"Asignatura",value:B.asignatura,onChange:ae=>k(se=>({...se,asignatura:ae.target.value})),className:J+" text-xs mb-1"}),l.jsx("input",{type:"text",placeholder:"Profesor",value:B.profesor,onChange:ae=>k(se=>({...se,profesor:ae.target.value})),className:J+" text-xs"}),l.jsxs("div",{className:"flex justify-end mt-1 space-x-1",children:[l.jsx("button",{onClick:()=>_(null),className:"text-xs bg-slate-200 dark:bg-slate-600 px-1 rounded",children:"Cancelar"}),l.jsx("button",{onClick:M,className:"text-xs bg-amber-500 text-white px-1 rounded",children:"Guardar"})]})]}):X!=null&&X.asignatura?l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-200",children:X.asignatura}),l.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",X.profesor,")"]})]}):l.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"Libre"})},`${P}-${G}`)})]},G))})]})})},K=()=>l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Crear Horarios"}),l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🔧 1. Configuración de Asignaciones"}),l.jsxs("form",{onSubmit:R,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsxs("select",{name:"curso",value:r.curso,onChange:z=>n(G=>({...G,curso:z.target.value})),className:J,children:[l.jsx("option",{value:"",children:"Seleccione"}),Ks.map(z=>l.jsx("option",{value:z,children:z},z))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{name:"asignatura",value:r.asignatura,onChange:z=>n(G=>({...G,asignatura:z.target.value})),className:J,children:[l.jsx("option",{value:"",children:"Seleccione"}),qi.map(z=>l.jsx("option",{value:z,children:z},z))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"profesor",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor"}),l.jsxs("select",{name:"profesor",value:r.profesor,onChange:z=>n(G=>({...G,profesor:z.target.value})),className:J,children:[l.jsx("option",{value:"",children:"Seleccione"}),a.map(z=>l.jsx("option",{value:z,children:z},z))]})]}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 h-10",children:"Agregar"})]}),l.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:l.jsx("ul",{className:"space-y-2",children:e.map(z=>l.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded-md",children:[l.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[z.curso," - ",z.asignatura," - ",l.jsx("strong",{children:z.profesor})]}),l.jsx("button",{onClick:()=>D(z.id),className:"text-red-500 hover:text-red-700 font-bold text-xl",children:"×"})]},z.id))})})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🧠 2. Generación Automática con IA"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"aiInstructions",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Instrucciones para la IA (Opcional)"}),l.jsx("textarea",{id:"aiInstructions",name:"aiInstructions",value:N,onChange:z=>j(z.target.value),rows:3,placeholder:"Ej: Dejar los módulos teóricos en la mañana y los prácticos en la tarde. Evitar poner 2 bloques de matemática seguidos.",className:J})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("button",{onClick:O,disabled:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:[d&&l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d?"Generando...":"Generar Horario Completo"]}),g&&l.jsx("p",{className:"text-red-600",children:g}),b&&l.jsx("p",{className:"text-green-600",children:b})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"📅 3. Visualización y Edición por Curso"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"selectCurso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione un curso para visualizar y editar:"}),l.jsx("select",{id:"selectCurso",value:c,onChange:z=>u(z.target.value),className:J+" md:w-1/3",children:Ks.map(z=>l.jsx("option",{value:z,children:z},z))})]}),Object.keys(i).length>0?V():l.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Aún no se ha generado ningún horario. Utilice el botón de generación con IA."})})]})]});return h?l.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>E("edicion"),className:`${I==="edicion"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Configuración y Edición por Curso"}),l.jsx("button",{onClick:()=>E("global"),className:`${I==="global"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Horario Global"})]})}),I==="edicion"?K():l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Horario Global de Cursos"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Vista consolidada de todos los horarios generados. La tabla es desplazable horizontalmente."}),l.jsx(sEe,{horarios:i})]})]})},E4="acciones_pedagogicas",oEe=(e,t)=>{var a,s,i,o;if(t.dimension||t.subdimension||t.indicadores||t.avance!==void 0)return{id:e,fechaRegistro:t.fechaRegistro??"",responsable:t.responsable??"",dimension:t.dimension??"",subdimension:t.subdimension??"",descripcion:t.descripcion??"",objetivos:t.objetivos??"",indicadores:Array.isArray(t.indicadores)?t.indicadores:t.indicadores?String(t.indicadores).split(",").map(c=>c.trim()).filter(Boolean):[],cobertura:t.cobertura??"",fechaInicio:t.fechaInicio??"",fechaCumplimiento:t.fechaCumplimiento??"",estado:t.estado??"Pendiente",avance:typeof t.avance=="number"?t.avance:0,enlaces:Array.isArray(t.enlaces)?t.enlaces:t.enlaces?[String(t.enlaces)]:[],creadoTs:typeof t.creadoTs=="number"?t.creadoTs:((s=(a=t.creadoTs)==null?void 0:a.toMillis)==null?void 0:s.call(a))??Date.now()};const r=t,n=r.enlaceDocumento?[String(r.enlaceDocumento)]:[];return{id:e,fechaRegistro:r.fechaRegistro??"",responsable:r.responsable??"",dimension:r.area??"",subdimension:"",descripcion:r.descripcion??"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:r.fechaCumplimiento??"",estado:r.estado??"Pendiente",avance:0,enlaces:n,creadoTs:typeof r.creadoTs=="number"?r.creadoTs:((o=(i=r.creadoTs)==null?void 0:i.toMillis)==null?void 0:o.call(i))??Date.now()}};async function lEe(){const e=[];try{const t=$t(kt(ht,E4),Sr("creadoTs","desc"));(await ga(t)).docs.forEach(n=>e.push(oEe(n.id,n.data())))}catch{}return e.sort((t,r)=>(r.creadoTs??0)-(t.creadoTs??0))}async function cEe(e){const t={fechaRegistro:e.fechaRegistro??new Date().toISOString().slice(0,10),responsable:e.responsable??"",dimension:e.dimension??e.area??"",subdimension:e.subdimension??"",descripcion:e.descripcion??"",objetivos:e.objetivos??"",indicadores:Array.isArray(e.indicadores)?e.indicadores:e.indicadores?String(e.indicadores).split(",").map(r=>r.trim()).filter(Boolean):[],cobertura:e.cobertura??"",fechaInicio:e.fechaInicio??"",fechaCumplimiento:e.fechaCumplimiento??"",estado:e.estado??"Pendiente",avance:typeof e.avance=="number"?e.avance:0,enlaces:Array.isArray(e.enlaces)?e.enlaces:e.enlaces?[String(e.enlaces)]:e.enlaceDocumento?[String(e.enlaceDocumento)]:[],creadoTs:sr.now()};await Tn(kt(ht,E4),t)}async function uEe(e,t){const r=dr(kt(ht,E4),e),n={...t};n.area&&!n.dimension&&(n.dimension=n.area,delete n.area),n.enlaceDocumento&&(n.enlaces=[String(n.enlaceDocumento)],delete n.enlaceDocumento),Array.isArray(n.indicadores)===!1&&typeof n.indicadores=="string"&&(n.indicadores=String(n.indicadores).split(",").map(a=>a.trim()).filter(Boolean)),await Vu(r,n)}async function dEe(e){const t=dr(kt(ht,E4),e);await za(t)}function See(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=See(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function gn(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=See(e))&&(n&&(n+=" "),n+=t);return n}var Mj={},Uj={},eH;function AEe(){return eH||(eH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(Uj)),Uj}var Qj={},tH;function kee(){return tH||(tH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(Qj)),Qj}var Hj={},rH;function Bee(){return rH||(rH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t}(Hj)),Hj}var Vj={},nH;function kP(){return nH||(nH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],a=r.length;if(a===0)return n;let s=0,i="",o="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),s++);s<a;){const u=r[s];o?u==="\\"&&s+1<a?(s++,i+=r[s]):u===o?o="":i+=u:c?u==='"'||u==="'"?o=u:u==="]"?(c=!1,n.push(i),i=""):i+=u:u==="["?(c=!0,i&&(n.push(i),i="")):u==="."?i&&(n.push(i),i=""):i+=u,s++}return i&&n.push(i),n}e.toPath=t}(Vj)),Vj}var aH;function BP(){return aH||(aH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AEe(),r=kee(),n=Bee(),a=kP();function s(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?r.isDeepKey(c)?s(o,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=o[c];return d===void 0?u:d}default:{if(Array.isArray(c))return i(o,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?u:d}}}function i(o,c,u){if(c.length===0)return u;let d=o;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=s}(Mj)),Mj}var zj,sH;function fEe(){return sH||(sH=1,zj=BP().get),zj}var hEe=fEe();const bm=Cl(hEe);var $j={exports:{}},ra={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iH;function mEe(){if(iH)return ra;iH=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,x=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function _(k){if(typeof k=="object"&&k!==null){var I=k.$$typeof;switch(I){case t:switch(k=k.type,k){case c:case u:case n:case s:case a:case f:return k;default:switch(k=k&&k.$$typeof,k){case o:case d:case g:case p:case i:return k;default:return I}}case r:return I}}}function B(k){return _(k)===u}return ra.AsyncMode=c,ra.ConcurrentMode=u,ra.ContextConsumer=o,ra.ContextProvider=i,ra.Element=t,ra.ForwardRef=d,ra.Fragment=n,ra.Lazy=g,ra.Memo=p,ra.Portal=r,ra.Profiler=s,ra.StrictMode=a,ra.Suspense=f,ra.isAsyncMode=function(k){return B(k)||_(k)===c},ra.isConcurrentMode=B,ra.isContextConsumer=function(k){return _(k)===o},ra.isContextProvider=function(k){return _(k)===i},ra.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===t},ra.isForwardRef=function(k){return _(k)===d},ra.isFragment=function(k){return _(k)===n},ra.isLazy=function(k){return _(k)===g},ra.isMemo=function(k){return _(k)===p},ra.isPortal=function(k){return _(k)===r},ra.isProfiler=function(k){return _(k)===s},ra.isStrictMode=function(k){return _(k)===a},ra.isSuspense=function(k){return _(k)===f},ra.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===n||k===u||k===s||k===a||k===f||k===h||typeof k=="object"&&k!==null&&(k.$$typeof===g||k.$$typeof===p||k.$$typeof===i||k.$$typeof===o||k.$$typeof===d||k.$$typeof===b||k.$$typeof===y||k.$$typeof===w||k.$$typeof===x)},ra.typeOf=_,ra}var oH;function pEe(){return oH||(oH=1,$j.exports=mEe()),$j.exports}var gEe=pEe(),Wi=e=>e===0?0:e>0?1:-1,Uc=e=>typeof e=="number"&&e!=+e,Tp=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ur=e=>(typeof e=="number"||e instanceof Number)&&!Uc(e),tf=e=>ur(e)||typeof e=="string",xEe=0,Pw=e=>{var t=++xEe;return"".concat(e||"").concat(t)},wl=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ur(t)&&typeof t!="string")return n;var s;if(Tp(t)){if(r==null)return n;var i=t.indexOf("%");s=r*parseFloat(t.slice(0,i))/100}else s=+t;return Uc(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},jee=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},nv=(e,t)=>ur(e)&&ur(t)?r=>e+r*(t-e):()=>t;function wx(e,t,r){return ur(e)&&ur(t)?e+r*(t-e):t}function vEe(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):bm(n,t))===r)}var ks=e=>e===null||typeof e>"u",R2=e=>ks(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),bEe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function jP(e){if(typeof e!="string")return!1;var t=bEe;return t.includes(e)}var yEe=["viewBox","children"],lH=["points","pathLength"],Gj={svg:yEe,polygon:lH,polyline:lH},TP=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(S.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{jP(a)&&(n[a]=s=>r[a](r,s))}),n},wEe=(e,t,r)=>n=>(e(t,r,n),null),Ig=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];jP(a)&&typeof s=="function"&&(n||(n={}),n[a]=wEe(s,t,r))}),n},EEe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function Tee(e){if(typeof e!="string")return!1;var t=EEe;return t.includes(e)}function il(e){var t=Object.entries(e).filter(r=>{var[n]=r;return Tee(n)});return Object.fromEntries(t)}var cH=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",uH=null,Kj=null,Iee=e=>{if(e===uH&&Array.isArray(Kj))return Kj;var t=[];return S.Children.forEach(e,r=>{ks(r)||(gEe.isFragment(r)?t=t.concat(Iee(r.props.children)):t.push(r))}),Kj=t,uH=e,t};function L2(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>cH(a)):n=[cH(t)],Iee(e).forEach(a=>{var s=bm(a,"type.displayName")||bm(a,"type.name");n.indexOf(s)!==-1&&r.push(a)}),r}var CEe=(e,t,r,n)=>{var a;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(a=n&&(Gj==null?void 0:Gj[n]))!==null&&a!==void 0?a:[],i=t.startsWith("data-"),o=typeof e!="function"&&(!!n&&s.includes(t)||Tee(t)),c=!!r&&jP(t);return i||o||c},Wn=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(S.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(s=>{var i;CEe((i=n)===null||i===void 0?void 0:i[s],s,t,r)&&(a[s]=n[s])}),a},_Ee=["children","width","height","viewBox","className","style","title","desc"];function H6(){return H6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},H6.apply(null,arguments)}function NEe(e,t){if(e==null)return{};var r,n,a=SEe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function SEe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var IP=S.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:s,className:i,style:o,title:c,desc:u}=e,d=NEe(e,_Ee),f=s||{width:n,height:a,x:0,y:0},h=gn("recharts-surface",i);return S.createElement("svg",H6({},Wn(d,!0,"svg"),{className:h,width:n,height:a,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),S.createElement("title",null,c),S.createElement("desc",null,u),r)}),kEe=["children","className"];function V6(){return V6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V6.apply(null,arguments)}function BEe(e,t){if(e==null)return{};var r,n,a=jEe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function jEe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ds=S.forwardRef((e,t)=>{var{children:r,className:n}=e,a=BEe(e,kEe),s=gn("recharts-layer",n);return S.createElement("g",V6({className:s},Wn(a,!0),{ref:t}),r)}),FP=AY(),Fee=S.createContext(null),TEe=()=>S.useContext(Fee);function Oa(e){return function(){return e}}const Oee=Math.cos,sN=Math.sin,Hd=Math.sqrt,iN=Math.PI,C4=2*iN,z6=Math.PI,$6=2*z6,vp=1e-6,IEe=$6-vp;function Dee(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function FEe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Dee;const r=10**t;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class OEe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Dee:FEe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,s,i){this._append`C${+t},${+r},${+n},${+a},${this._x1=+s},${this._y1=+i}`}arcTo(t,r,n,a,s){if(t=+t,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let i=this._x1,o=this._y1,c=n-t,u=a-r,d=i-t,f=o-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>vp)if(!(Math.abs(f*c-u*d)>vp)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-i,g=a-o,x=c*c+u*u,b=p*p+g*g,y=Math.sqrt(x),w=Math.sqrt(h),_=s*Math.tan((z6-Math.acos((x+h-b)/(2*y*w)))/2),B=_/w,k=_/y;Math.abs(B-1)>vp&&this._append`L${t+B*d},${r+B*f}`,this._append`A${s},${s},0,0,${+(f*p>d*g)},${this._x1=t+k*c},${this._y1=r+k*u}`}}arc(t,r,n,a,s,i){if(t=+t,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),c=n*Math.sin(a),u=t+o,d=r+c,f=1^i,h=i?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>vp||Math.abs(this._y1-d)>vp)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%$6+$6),h>IEe?this._append`A${n},${n},0,1,${f},${t-o},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>vp&&this._append`A${n},${n},0,${+(h>=z6)},${f},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function OP(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new OEe(t)}function DP(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Pee(e){this._context=e}Pee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function _4(e){return new Pee(e)}function Ree(e){return e[0]}function Lee(e){return e[1]}function Mee(e,t){var r=Oa(!0),n=null,a=_4,s=null,i=OP(o);e=typeof e=="function"?e:e===void 0?Ree:Oa(e),t=typeof t=="function"?t:t===void 0?Lee:Oa(t);function o(c){var u,d=(c=DP(c)).length,f,h=!1,p;for(n==null&&(s=a(p=i())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,u,c),+t(f,u,c));if(p)return s=null,p+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:Oa(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:Oa(+c),o):t},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Oa(!!c),o):r},o.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),o):a},o.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),o):n},o}function kC(e,t,r){var n=null,a=Oa(!0),s=null,i=_4,o=null,c=OP(u);e=typeof e=="function"?e:e===void 0?Ree:Oa(+e),t=typeof t=="function"?t:Oa(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?Lee:Oa(+r);function u(f){var h,p,g,x=(f=DP(f)).length,b,y=!1,w,_=new Array(x),B=new Array(x);for(s==null&&(o=i(w=c())),h=0;h<=x;++h){if(!(h<x&&a(b=f[h],h,f))===y)if(y=!y)p=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=h-1;g>=p;--g)o.point(_[g],B[g]);o.lineEnd(),o.areaEnd()}y&&(_[h]=+e(b,h,f),B[h]=+t(b,h,f),o.point(n?+n(b,h,f):_[h],r?+r(b,h,f):B[h]))}if(w)return o=null,w+""||null}function d(){return Mee().defined(a).curve(i).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Oa(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Oa(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Oa(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Oa(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Oa(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Oa(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Oa(!!f),u):a},u.curve=function(f){return arguments.length?(i=f,s!=null&&(o=i(s)),u):i},u.context=function(f){return arguments.length?(f==null?s=o=null:o=i(s=f),u):s},u}class Uee{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function DEe(e){return new Uee(e,!0)}function PEe(e){return new Uee(e,!1)}const PP={draw(e,t){const r=Hd(t/iN);e.moveTo(r,0),e.arc(0,0,r,0,C4)}},REe={draw(e,t){const r=Hd(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Qee=Hd(1/3),LEe=Qee*2,MEe={draw(e,t){const r=Hd(t/LEe),n=r*Qee;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},UEe={draw(e,t){const r=Hd(t),n=-r/2;e.rect(n,n,r,r)}},QEe=.8908130915292852,Hee=sN(iN/10)/sN(7*iN/10),HEe=sN(C4/10)*Hee,VEe=-Oee(C4/10)*Hee,zEe={draw(e,t){const r=Hd(t*QEe),n=HEe*r,a=VEe*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const i=C4*s/5,o=Oee(i),c=sN(i);e.lineTo(c*r,-o*r),e.lineTo(o*n-c*a,c*n+o*a)}e.closePath()}},qj=Hd(3),$Ee={draw(e,t){const r=-Hd(t/(qj*3));e.moveTo(0,r*2),e.lineTo(-qj*r,-r),e.lineTo(qj*r,-r),e.closePath()}},pu=-.5,gu=Hd(3)/2,G6=1/Hd(12),GEe=(G6/2+1)*3,KEe={draw(e,t){const r=Hd(t/GEe),n=r/2,a=r*G6,s=n,i=r*G6+r,o=-s,c=i;e.moveTo(n,a),e.lineTo(s,i),e.lineTo(o,c),e.lineTo(pu*n-gu*a,gu*n+pu*a),e.lineTo(pu*s-gu*i,gu*s+pu*i),e.lineTo(pu*o-gu*c,gu*o+pu*c),e.lineTo(pu*n+gu*a,pu*a-gu*n),e.lineTo(pu*s+gu*i,pu*i-gu*s),e.lineTo(pu*o+gu*c,pu*c-gu*o),e.closePath()}};function qEe(e,t){let r=null,n=OP(a);e=typeof e=="function"?e:Oa(e||PP),t=typeof t=="function"?t:Oa(t===void 0?64:+t);function a(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:Oa(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:Oa(+s),a):t},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function oN(){}function lN(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Vee(e){this._context=e}Vee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:lN(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:lN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function WEe(e){return new Vee(e)}function zee(e){this._context=e}zee.prototype={areaStart:oN,areaEnd:oN,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:lN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function XEe(e){return new zee(e)}function $ee(e){this._context=e}$ee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:lN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function YEe(e){return new $ee(e)}function Gee(e){this._context=e}Gee.prototype={areaStart:oN,areaEnd:oN,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function JEe(e){return new Gee(e)}function dH(e){return e<0?-1:1}function AH(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),i=(r-e._y1)/(a||n<0&&-0),o=(s*a+i*n)/(n+a);return(dH(s)+dH(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(o))||0}function fH(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Wj(e,t,r){var n=e._x0,a=e._y0,s=e._x1,i=e._y1,o=(s-n)/3;e._context.bezierCurveTo(n+o,a+o*t,s-o,i-o*r,s,i)}function cN(e){this._context=e}cN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Wj(this,this._t0,fH(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Wj(this,fH(this,r=AH(this,e,t)),r);break;default:Wj(this,this._t0,r=AH(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function Kee(e){this._context=new qee(e)}(Kee.prototype=Object.create(cN.prototype)).point=function(e,t){cN.prototype.point.call(this,t,e)};function qee(e){this._context=e}qee.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}};function ZEe(e){return new cN(e)}function eCe(e){return new Kee(e)}function Wee(e){this._context=e}Wee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=hH(e),a=hH(t),s=0,i=1;i<r;++s,++i)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[i],t[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function hH(e){var t,r=e.length-1,n,a=new Array(r),s=new Array(r),i=new Array(r);for(a[0]=0,s[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/s[t-1],s[t]-=n,i[t]-=n*i[t-1];for(a[r-1]=i[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(i[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function tCe(e){return new Wee(e)}function N4(e,t){this._context=e,this._t=t}N4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function rCe(e){return new N4(e,.5)}function nCe(e){return new N4(e,0)}function aCe(e){return new N4(e,1)}function Xv(e,t){if((i=e.length)>1)for(var r=1,n,a,s=e[t[0]],i,o=s.length;r<i;++r)for(a=s,s=e[t[r]],n=0;n<o;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function K6(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function sCe(e,t){return e[t]}function iCe(e){const t=[];return t.key=e,t}function oCe(){var e=Oa([]),t=K6,r=Xv,n=sCe;function a(s){var i=Array.from(e.apply(this,arguments),iCe),o,c=i.length,u=-1,d;for(const f of s)for(o=0,++u;o<c;++o)(i[o][u]=[0,+n(f,i[o].key,u,s)]).data=f;for(o=0,d=DP(t(i));o<c;++o)i[d[o]].index=o;return r(i,d),i}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Oa(Array.from(s)),a):e},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Oa(+s),a):n},a.order=function(s){return arguments.length?(t=s==null?K6:typeof s=="function"?s:Oa(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(r=s??Xv,a):r},a}function lCe(e,t){if((n=e.length)>0){for(var r,n,a=0,s=e[0].length,i;a<s;++a){for(i=r=0;r<n;++r)i+=e[r][a][1]||0;if(i)for(r=0;r<n;++r)e[r][a][1]/=i}Xv(e,t)}}function cCe(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,s=n.length;r<s;++r){for(var i=0,o=0;i<a;++i)o+=e[i][r][1]||0;n[r][1]+=n[r][0]=-o/2}Xv(e,t)}}function uCe(e,t){if(!(!((i=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,s,i;n<s;++n){for(var o=0,c=0,u=0;o<i;++o){for(var d=e[t[o]],f=d[n][1]||0,h=d[n-1][1]||0,p=(f-h)/2,g=0;g<o;++g){var x=e[t[g]],b=x[n][1]||0,y=x[n-1][1]||0;p+=b-y}c+=f,u+=p*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,Xv(e,t)}}var dCe=["type","size","sizeType"];function q6(){return q6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},q6.apply(null,arguments)}function mH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mH(Object(r),!0).forEach(function(n){ACe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ACe(e,t,r){return(t=fCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fCe(e){var t=hCe(e,"string");return typeof t=="symbol"?t:t+""}function hCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mCe(e,t){if(e==null)return{};var r,n,a=pCe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pCe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Xee={symbolCircle:PP,symbolCross:REe,symbolDiamond:MEe,symbolSquare:UEe,symbolStar:zEe,symbolTriangle:$Ee,symbolWye:KEe},gCe=Math.PI/180,xCe=e=>{var t="symbol".concat(R2(e));return Xee[t]||PP},vCe=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*gCe;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},bCe=(e,t)=>{Xee["symbol".concat(R2(e))]=t},RP=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=mCe(e,dCe),s=pH(pH({},a),{},{type:t,size:r,sizeType:n}),i=()=>{var f=xCe(t),h=qEe().type(f).size(vCe(r,n,t));return h()},{className:o,cx:c,cy:u}=s,d=Wn(s,!0);return c===+c&&u===+u&&r===+r?S.createElement("path",q6({},d,{className:gn("recharts-symbols",o),transform:"translate(".concat(c,", ").concat(u,")"),d:i()})):null};RP.registerSymbol=bCe;function W6(){return W6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W6.apply(null,arguments)}function gH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yCe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gH(Object(r),!0).forEach(function(n){LP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LP(e,t,r){return(t=wCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wCe(e){var t=ECe(e,"string");return typeof t=="symbol"?t:t+""}function ECe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xu=32;class MP extends S.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,a=xu/2,s=xu/6,i=xu/3,o=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return S.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:a,x2:xu,y2:a,className:"recharts-legend-icon"});if(c==="line")return S.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(a,"h").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*i,",").concat(a,`
            H`).concat(xu,"M").concat(2*i,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(i,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return S.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(xu/8,"h").concat(xu,"v").concat(xu*3/4,"h").concat(-xu,"z"),className:"recharts-legend-icon"});if(S.isValidElement(t.legendIcon)){var u=yCe({},t);return delete u.legendIcon,S.cloneElement(t.legendIcon,u)}return S.createElement(RP,{fill:o,cx:a,cy:a,size:xu,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:i}=this.props,o={x:0,y:0,width:xu,height:xu},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,f)=>{var h=d.formatter||a,p=gn({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var g=d.inactive?s:d.color,x=h?h(d.value,d,f):d.value;return S.createElement("li",W6({className:p,style:c,key:"legend-item-".concat(f)},Ig(this.props,d,f)),S.createElement(IP,{width:r,height:r,viewBox:o,style:u,"aria-label":"".concat(x," legend icon")},this.renderIcon(d,i)),S.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},x))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return S.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}LP(MP,"displayName","Legend");LP(MP,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Xj={},Yj={},xH;function CCe(){return xH||(xH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let s=0;s<r.length;s++){const i=r[s],o=n(i);a.has(o)||a.set(o,i)}return Array.from(a.values())}e.uniqBy=t}(Yj)),Yj}var Jj={},vH;function S4(){return vH||(vH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(Jj)),Jj}var Zj={},eT={},tT={},bH;function _Ce(){return bH||(bH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(tT)),tT}var yH;function UP(){return yH||(yH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_Ce();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r}(eT)),eT}var rT={},wH;function NCe(){return wH||(wH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(rT)),rT}var EH;function SCe(){return EH||(EH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UP(),r=NCe();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n}(Zj)),Zj}var nT={},aT={},CH;function kCe(){return CH||(CH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BP();function r(n){return function(a){return t.get(a,n)}}e.property=r}(aT)),aT}var sT={},iT={},oT={},lT={},_H;function Yee(){return _H||(_H=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(lT)),lT}var cT={},NH;function Jee(){return NH||(NH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(cT)),cT}var uT={},SH;function QP(){return SH||(SH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t}(uT)),uT}var kH;function BCe(){return kH||(kH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HP(),r=Yee(),n=Jee(),a=QP();function s(f,h,p){return typeof p!="function"?t.isMatch(f,h):i(f,h,function g(x,b,y,w,_,B){const k=p(x,b,y,w,_,B);return k!==void 0?!!k:i(x,b,g,B)},new Map)}function i(f,h,p,g){if(h===f)return!0;switch(typeof h){case"object":return o(f,h,p,g);case"function":return Object.keys(h).length>0?i(f,{...h},p,g):a.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:a.eq(f,h)}}function o(f,h,p,g){if(h==null)return!0;if(Array.isArray(h))return u(f,h,p,g);if(h instanceof Map)return c(f,h,p,g);if(h instanceof Set)return d(f,h,p,g);const x=Object.keys(h);if(f==null)return x.length===0;if(x.length===0)return!0;if(g&&g.has(h))return g.get(h)===f;g&&g.set(h,f);try{for(let b=0;b<x.length;b++){const y=x[b];if(!n.isPrimitive(f)&&!(y in f)||h[y]===void 0&&f[y]!==void 0||h[y]===null&&f[y]!==null||!p(f[y],h[y],y,f,h,g))return!1}return!0}finally{g&&g.delete(h)}}function c(f,h,p,g){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[x,b]of h.entries()){const y=f.get(x);if(p(y,b,x,f,h,g)===!1)return!1}return!0}function u(f,h,p,g){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const x=new Set;for(let b=0;b<h.length;b++){const y=h[b];let w=!1;for(let _=0;_<f.length;_++){if(x.has(_))continue;const B=f[_];let k=!1;if(p(B,y,b,f,h,g)&&(k=!0),k){x.add(_),w=!0;break}}if(!w)return!1}return!0}function d(f,h,p,g){return h.size===0?!0:f instanceof Set?u([...f],[...h],p,g):!1}e.isMatchWith=s,e.isSetMatch=d}(oT)),oT}var BH;function HP(){return BH||(BH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BCe();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r}(iT)),iT}var dT={},AT={},fT={},jH;function Zee(){return jH||(jH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t}(fT)),fT}var hT={},TH;function VP(){return TH||(TH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(hT)),hT}var mT={},IH;function zP(){return IH||(IH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",i="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",p="[object Object]",g="[object Error]",x="[object DataView]",b="[object Uint8Array]",y="[object Uint8ClampedArray]",w="[object Uint16Array]",_="[object Uint32Array]",B="[object BigUint64Array]",k="[object Int8Array]",I="[object Int16Array]",E="[object Int32Array]",N="[object BigInt64Array]",j="[object Float32Array]",R="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=N,e.bigUint64ArrayTag=B,e.booleanTag=a,e.dataViewTag=x,e.dateTag=o,e.errorTag=g,e.float32ArrayTag=j,e.float64ArrayTag=R,e.functionTag=f,e.int16ArrayTag=I,e.int32ArrayTag=E,e.int8ArrayTag=k,e.mapTag=c,e.numberTag=n,e.objectTag=p,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=i,e.uint16ArrayTag=w,e.uint32ArrayTag=_,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=y}(mT)),mT}var pT={},FH;function jCe(){return FH||(FH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(pT)),pT}var OH;function ete(){return OH||(OH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zee(),r=VP(),n=zP(),a=Jee(),s=jCe();function i(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,h,p=new Map,g=void 0){const x=g==null?void 0:g(d,f,h,p);if(x!=null)return x;if(a.isPrimitive(d))return d;if(p.has(d))return p.get(d);if(Array.isArray(d)){const b=new Array(d.length);p.set(d,b);for(let y=0;y<d.length;y++)b[y]=o(d[y],y,h,p,g);return Object.hasOwn(d,"index")&&(b.index=d.index),Object.hasOwn(d,"input")&&(b.input=d.input),b}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const b=new RegExp(d.source,d.flags);return b.lastIndex=d.lastIndex,b}if(d instanceof Map){const b=new Map;p.set(d,b);for(const[y,w]of d)b.set(y,o(w,y,h,p,g));return b}if(d instanceof Set){const b=new Set;p.set(d,b);for(const y of d)b.add(o(y,void 0,h,p,g));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const b=new(Object.getPrototypeOf(d)).constructor(d.length);p.set(d,b);for(let y=0;y<d.length;y++)b[y]=o(d[y],y,h,p,g);return b}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const b=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return p.set(d,b),c(b,d,h,p,g),b}if(typeof File<"u"&&d instanceof File){const b=new File([d],d.name,{type:d.type});return p.set(d,b),c(b,d,h,p,g),b}if(d instanceof Blob){const b=new Blob([d],{type:d.type});return p.set(d,b),c(b,d,h,p,g),b}if(d instanceof Error){const b=new d.constructor;return p.set(d,b),b.message=d.message,b.name=d.name,b.stack=d.stack,b.cause=d.cause,c(b,d,h,p,g),b}if(typeof d=="object"&&u(d)){const b=Object.create(Object.getPrototypeOf(d));return p.set(d,b),c(b,d,h,p,g),b}return d}function c(d,f,h=d,p,g){const x=[...Object.keys(f),...t.getSymbols(f)];for(let b=0;b<x.length;b++){const y=x[b],w=Object.getOwnPropertyDescriptor(d,y);(w==null||w.writable)&&(d[y]=o(f[y],y,h,p,g))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=i,e.cloneDeepWithImpl=o,e.copyProperties=c}(AT)),AT}var DH;function TCe(){return DH||(DH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ete();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r}(dT)),dT}var PH;function ICe(){return PH||(PH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HP(),r=TCe();function n(a){return a=r.cloneDeep(a),s=>t.isMatch(s,a)}e.matches=n}(sT)),sT}var gT={},xT={},vT={},RH;function FCe(){return RH||(RH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ete(),r=zP();function n(a,s){return t.cloneDeepWith(a,(i,o,c,u)=>{const d=s==null?void 0:s(i,o,c,u);if(d!=null)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n}(vT)),vT}var LH;function OCe(){return LH||(LH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FCe();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r}(xT)),xT}var bT={},yT={},MH;function tte(){return MH||(MH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r}(yT)),yT}var wT={},UH;function DCe(){return UH||(UH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VP();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r}(wT)),wT}var QH;function PCe(){return QH||(QH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kee(),r=tte(),n=DCe(),a=kP();function s(i,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&t.isDeepKey(o)&&(i==null?void 0:i[o])==null?c=a.toPath(o):c=[o],c.length===0)return!1;let u=i;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=s}(bT)),bT}var HH;function RCe(){return HH||(HH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HP(),r=Bee(),n=OCe(),a=BP(),s=PCe();function i(o,c){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,o);return d===void 0?s.has(u,o):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=i}(gT)),gT}var VH;function $P(){return VH||(VH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=S4(),r=kCe(),n=ICe(),a=RCe();function s(i){if(i==null)return t.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?a.matchesProperty(i[0],i[1]):n.matches(i);case"string":case"symbol":case"number":return r.property(i)}}e.iteratee=s}(nT)),nT}var zH;function LCe(){return zH||(zH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CCe(),r=S4(),n=SCe(),a=$P();function s(i,o=r.identity){return n.isArrayLikeObject(i)?t.uniqBy(Array.from(i),a.iteratee(o)):[]}e.uniqBy=s}(Xj)),Xj}var ET,$H;function MCe(){return $H||($H=1,ET=LCe().uniqBy),ET}var UCe=MCe();const GH=Cl(UCe);function rte(e,t,r){return t===!0?GH(e,r):typeof t=="function"?GH(e,t):e}var CT={exports:{}},_T={},NT={exports:{}},ST={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KH;function QCe(){if(KH)return ST;KH=1;var e=N1();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,s=e.useLayoutEffect,i=e.useDebugValue;function o(f,h){var p=h(),g=n({inst:{value:p,getSnapshot:h}}),x=g[0].inst,b=g[1];return s(function(){x.value=p,x.getSnapshot=h,c(x)&&b({inst:x})},[f,p,h]),a(function(){return c(x)&&b({inst:x}),f(function(){c(x)&&b({inst:x})})},[f]),i(p),p}function c(f){var h=f.getSnapshot;f=f.value;try{var p=h();return!r(f,p)}catch{return!0}}function u(f,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return ST.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,ST}var qH;function HCe(){return qH||(qH=1,NT.exports=QCe()),NT.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WH;function VCe(){if(WH)return _T;WH=1;var e=N1(),t=HCe();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,s=e.useRef,i=e.useEffect,o=e.useMemo,c=e.useDebugValue;return _T.useSyncExternalStoreWithSelector=function(u,d,f,h,p){var g=s(null);if(g.current===null){var x={hasValue:!1,value:null};g.current=x}else x=g.current;g=o(function(){function y(I){if(!w){if(w=!0,_=I,I=h(I),p!==void 0&&x.hasValue){var E=x.value;if(p(E,I))return B=E}return B=I}if(E=B,n(_,I))return E;var N=h(I);return p!==void 0&&p(E,N)?(_=I,E):(_=I,B=N)}var w=!1,_,B,k=f===void 0?null:f;return[function(){return y(d())},k===null?void 0:function(){return y(k())}]},[d,f,h,p]);var b=a(u,g[0],g[1]);return i(function(){x.hasValue=!0,x.value=b},[b]),c(b),b},_T}var XH;function zCe(){return XH||(XH=1,CT.exports=VCe()),CT.exports}var nte=zCe();const $Ce=Cl(nte);var GP=S.createContext(null),GCe=e=>e,$a=()=>{var e=S.useContext(GP);return e?e.store.dispatch:GCe},r5=()=>{},KCe=()=>r5,qCe=(e,t)=>e===t;function ir(e){var t=S.useContext(GP);return nte.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:KCe,t?t.store.getState:r5,t?t.store.getState:r5,t?e:r5,qCe)}function WCe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function XCe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function YCe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var YH=e=>Array.isArray(e)?e:[e];function JCe(e){const t=Array.isArray(e[0])?e[0]:e;return YCe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function ZCe(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var e_e=class{constructor(e){this.value=e}deref(){return this.value}},t_e=typeof WeakRef<"u"?WeakRef:e_e,r_e=0,JH=1;function BC(){return{s:r_e,v:void 0,o:null,p:null}}function ate(e,t={}){let r=BC();const{resultEqualityCheck:n}=t;let a,s=0;function i(){var f;let o=r;const{length:c}=arguments;for(let h=0,p=c;h<p;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let x=o.o;x===null&&(o.o=x=new WeakMap);const b=x.get(g);b===void 0?(o=BC(),x.set(g,o)):o=b}else{let x=o.p;x===null&&(o.p=x=new Map);const b=x.get(g);b===void 0?(o=BC(),x.set(g,o)):o=b}}const u=o;let d;if(o.s===JH)d=o.v;else if(d=e.apply(null,arguments),s++,n){const h=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;h!=null&&n(h,d)&&(d=h,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new t_e(d):d}return u.s=JH,u.v=d,d}return i.clearCache=()=>{r=BC(),i.resetResultsCount()},i.resultsCount=()=>s,i.resetResultsCount=()=>{s=0},i}function n_e(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let s=0,i=0,o,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),WCe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:p=ate,argsMemoizeOptions:g=[]}=d,x=YH(h),b=YH(g),y=JCe(a),w=f(function(){return s++,u.apply(null,arguments)},...x),_=p(function(){i++;const k=ZCe(y,arguments);return o=w.apply(null,k),o},...b);return Object.assign(_,{resultFunc:u,memoizedResultFunc:w,dependencies:y,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>o,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var ut=n_e(ate),a_e=Object.assign((e,t=ut)=>{XCe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((i,o,c)=>(i[r[c]]=o,i),{}))},{withTypes:()=>a_e}),kT={},BT={},jT={},ZH;function s_e(){return ZH||(ZH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const i=t(n),o=t(a);if(i===o&&i===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?o-i:i-o}return 0};e.compareValues=r}(jT)),jT}var TT={},IT={},eV;function ste(){return eV||(eV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(IT)),IT}var tV;function i_e(){return tV||(tV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ste(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,i){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||i!=null&&Object.hasOwn(i,s)}e.isKey=a}(TT)),TT}var rV;function o_e(){return rV||(rV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=s_e(),r=i_e(),n=kP();function a(s,i,o,c){if(s==null)return[];o=c?void 0:o,Array.isArray(s)||(s=Object.values(s)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(p=>String(p));const u=(p,g)=>{let x=p;for(let b=0;b<g.length&&x!=null;++b)x=x[g[b]];return x},d=(p,g)=>g==null||p==null?g:typeof p=="object"&&"key"in p?Object.hasOwn(g,p.key)?g[p.key]:u(g,p.path):typeof p=="function"?p(g):Array.isArray(p)?u(g,p):typeof g=="object"?g[p]:g,f=i.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||r.isKey(p)?p:{key:p,path:n.toPath(p)}));return s.map(p=>({original:p,criteria:f.map(g=>d(g,p))})).slice().sort((p,g)=>{for(let x=0;x<f.length;x++){const b=t.compareValues(p.criteria[x],g.criteria[x],o[x]);if(b!==0)return b}return 0}).map(p=>p.original)}e.orderBy=a}(BT)),BT}var FT={},nV;function l_e(){return nV||(nV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],s=Math.floor(n),i=(o,c)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&c<s?i(d,c+1):a.push(d)}};return i(r,0),a}e.flatten=t}(FT)),FT}var OT={},aV;function ite(){return aV||(aV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tte(),r=UP(),n=Yee(),a=QP();function s(i,o,c){return n.isObject(c)&&(typeof o=="number"&&r.isArrayLike(c)&&t.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?a.eq(c[o],i):!1}e.isIterateeCall=s}(OT)),OT}var sV;function c_e(){return sV||(sV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=o_e(),r=l_e(),n=ite();function a(s,...i){const o=i.length;return o>1&&n.isIterateeCall(s,i[0],i[1])?i=[]:o>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),t.orderBy(s,r.flatten(i),["asc"])}e.sortBy=a}(kT)),kT}var DT,iV;function u_e(){return iV||(iV=1,DT=c_e().sortBy),DT}var d_e=u_e();const k4=Cl(d_e);var ote=e=>e.legend.settings,A_e=e=>e.legend.size,f_e=e=>e.legend.payload,h_e=ut([f_e,ote],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?k4(n,r):n});function m_e(){return ir(h_e)}var jC=1;function lte(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=S.useState({height:0,left:0,top:0,width:0}),n=S.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),i={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(i.height-t.height)>jC||Math.abs(i.left-t.left)>jC||Math.abs(i.top-t.top)>jC||Math.abs(i.width-t.width)>jC)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Ao(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var p_e=typeof Symbol=="function"&&Symbol.observable||"@@observable",oV=p_e,PT=()=>Math.random().toString(36).substring(7).split("").join("."),g_e={INIT:`@@redux/INIT${PT()}`,REPLACE:`@@redux/REPLACE${PT()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${PT()}`},uN=g_e;function KP(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function cte(e,t,r){if(typeof e!="function")throw new Error(Ao(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ao(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ao(1));return r(cte)(e,t)}let n=e,a=t,s=new Map,i=s,o=0,c=!1;function u(){i===s&&(i=new Map,s.forEach((b,y)=>{i.set(y,b)}))}function d(){if(c)throw new Error(Ao(3));return a}function f(b){if(typeof b!="function")throw new Error(Ao(4));if(c)throw new Error(Ao(5));let y=!0;u();const w=o++;return i.set(w,b),function(){if(y){if(c)throw new Error(Ao(6));y=!1,u(),i.delete(w),s=null}}}function h(b){if(!KP(b))throw new Error(Ao(7));if(typeof b.type>"u")throw new Error(Ao(8));if(typeof b.type!="string")throw new Error(Ao(17));if(c)throw new Error(Ao(9));try{c=!0,a=n(a,b)}finally{c=!1}return(s=i).forEach(w=>{w()}),b}function p(b){if(typeof b!="function")throw new Error(Ao(10));n=b,h({type:uN.REPLACE})}function g(){const b=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Ao(11));function w(){const B=y;B.next&&B.next(d())}return w(),{unsubscribe:b(w)}},[oV](){return this}}}return h({type:uN.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:p,[oV]:g}}function x_e(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:uN.INIT})>"u")throw new Error(Ao(12));if(typeof r(void 0,{type:uN.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ao(13))})}function ute(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const i=t[s];typeof e[i]=="function"&&(r[i]=e[i])}const n=Object.keys(r);let a;try{x_e(r)}catch(s){a=s}return function(i={},o){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],p=i[f],g=h(p,o);if(typeof g>"u")throw o&&o.type,new Error(Ao(14));u[f]=g,c=c||g!==p}return c=c||n.length!==Object.keys(i).length,c?u:i}}function dN(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function v_e(...e){return t=>(r,n)=>{const a=t(r,n);let s=()=>{throw new Error(Ao(15))};const i={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},o=e.map(c=>c(i));return s=dN(...o)(a.dispatch),{...a,dispatch:s}}}function dte(e){return KP(e)&&"type"in e&&typeof e.type=="string"}var Ate=Symbol.for("immer-nothing"),lV=Symbol.for("immer-draftable"),Qc=Symbol.for("immer-state");function wd(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Yv=Object.getPrototypeOf;function Ag(e){return!!e&&!!e[Qc]}function gh(e){var t;return e?fte(e)||Array.isArray(e)||!!e[lV]||!!((t=e.constructor)!=null&&t[lV])||j4(e)||T4(e):!1}var b_e=Object.prototype.constructor.toString();function fte(e){if(!e||typeof e!="object")return!1;const t=Yv(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===b_e}function AN(e,t){B4(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function B4(e){const t=e[Qc];return t?t.type_:Array.isArray(e)?1:j4(e)?2:T4(e)?3:0}function X6(e,t){return B4(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function hte(e,t,r){const n=B4(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function y_e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function j4(e){return e instanceof Map}function T4(e){return e instanceof Set}function bp(e){return e.copy_||e.base_}function Y6(e,t){if(j4(e))return new Map(e);if(T4(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=fte(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Qc];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const i=a[s],o=n[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Yv(e),n)}else{const n=Yv(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function qP(e,t=!1){return I4(e)||Ag(e)||!gh(e)||(B4(e)>1&&(e.set=e.add=e.clear=e.delete=w_e),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>qP(n,!0))),e}function w_e(){wd(2)}function I4(e){return Object.isFrozen(e)}var E_e={};function fg(e){const t=E_e[e];return t||wd(0,e),t}var Rw;function mte(){return Rw}function C_e(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function cV(e,t){t&&(fg("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function J6(e){Z6(e),e.drafts_.forEach(__e),e.drafts_=null}function Z6(e){e===Rw&&(Rw=e.parent_)}function uV(e){return Rw=C_e(Rw,e)}function __e(e){const t=e[Qc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function dV(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Qc].modified_&&(J6(t),wd(4)),gh(e)&&(e=fN(t,e),t.parent_||hN(t,e)),t.patches_&&fg("Patches").generateReplacementPatches_(r[Qc].base_,e,t.patches_,t.inversePatches_)):e=fN(t,r,[]),J6(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ate?e:void 0}function fN(e,t,r){if(I4(t))return t;const n=t[Qc];if(!n)return AN(t,(a,s)=>AV(e,n,t,a,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return hN(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let s=a,i=!1;n.type_===3&&(s=new Set(a),a.clear(),i=!0),AN(s,(o,c)=>AV(e,n,a,o,c,r,i)),hN(e,a,!1),r&&e.patches_&&fg("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function AV(e,t,r,n,a,s,i){if(Ag(a)){const o=s&&t&&t.type_!==3&&!X6(t.assigned_,n)?s.concat(n):void 0,c=fN(e,a,o);if(hte(r,n,c),Ag(c))e.canAutoFreeze_=!1;else return}else i&&r.add(a);if(gh(a)&&!I4(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;fN(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&hN(e,a)}}function hN(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&qP(t,r)}function N_e(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:mte(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=WP;r&&(a=[n],s=Lw);const{revoke:i,proxy:o}=Proxy.revocable(a,s);return n.draft_=o,n.revoke_=i,o}var WP={get(e,t){if(t===Qc)return e;const r=bp(e);if(!X6(r,t))return S_e(e,r,t);const n=r[t];return e.finalized_||!gh(n)?n:n===RT(e.base_,t)?(LT(e),e.copy_[t]=tF(n,e)):n},has(e,t){return t in bp(e)},ownKeys(e){return Reflect.ownKeys(bp(e))},set(e,t,r){const n=pte(bp(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=RT(bp(e),t),s=a==null?void 0:a[Qc];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(y_e(r,a)&&(r!==void 0||X6(e.base_,t)))return!0;LT(e),eF(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return RT(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,LT(e),eF(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=bp(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){wd(11)},getPrototypeOf(e){return Yv(e.base_)},setPrototypeOf(){wd(12)}},Lw={};AN(WP,(e,t)=>{Lw[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Lw.deleteProperty=function(e,t){return Lw.set.call(this,e,t,void 0)};Lw.set=function(e,t,r){return WP.set.call(this,e[0],t,r,e[0])};function RT(e,t){const r=e[Qc];return(r?bp(r):e)[t]}function S_e(e,t,r){var a;const n=pte(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function pte(e,t){if(!(t in e))return;let r=Yv(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Yv(r)}}function eF(e){e.modified_||(e.modified_=!0,e.parent_&&eF(e.parent_))}function LT(e){e.copy_||(e.copy_=Y6(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var k_e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const i=this;return function(c=s,...u){return i.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&wd(6),n!==void 0&&typeof n!="function"&&wd(7);let a;if(gh(t)){const s=uV(this),i=tF(t,void 0);let o=!0;try{a=r(i),o=!1}finally{o?J6(s):Z6(s)}return cV(s,n),dV(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===Ate&&(a=void 0),this.autoFreeze_&&qP(a,!0),n){const s=[],i=[];fg("Patches").generateReplacementPatches_(t,a,s,i),n(s,i)}return a}else wd(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...o)=>this.produceWithPatches(i,c=>t(c,...o));let n,a;return[this.produce(t,r,(i,o)=>{n=i,a=o}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){gh(e)||wd(8),Ag(e)&&(e=sh(e));const t=uV(this),r=tF(e,void 0);return r[Qc].isManual_=!0,Z6(t),r}finishDraft(e,t){const r=e&&e[Qc];(!r||!r.isManual_)&&wd(9);const{scope_:n}=r;return cV(n,t),dV(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=fg("Patches").applyPatches_;return Ag(e)?n(e,t):this.produce(e,a=>n(a,t))}};function tF(e,t){const r=j4(e)?fg("MapSet").proxyMap_(e,t):T4(e)?fg("MapSet").proxySet_(e,t):N_e(e,t);return(t?t.scope_:mte()).drafts_.push(r),r}function sh(e){return Ag(e)||wd(10,e),gte(e)}function gte(e){if(!gh(e)||I4(e))return e;const t=e[Qc];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Y6(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Y6(e,!0);return AN(r,(n,a)=>{hte(r,n,gte(a))}),t&&(t.finalized_=!1),r}var Hc=new k_e,xte=Hc.produce;Hc.produceWithPatches.bind(Hc);Hc.setAutoFreeze.bind(Hc);Hc.setUseStrictShallowCopy.bind(Hc);Hc.applyPatches.bind(Hc);Hc.createDraft.bind(Hc);Hc.finishDraft.bind(Hc);function vte(e){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,e):a(s)}var B_e=vte(),j_e=vte,T_e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?dN:dN.apply(null,arguments)};function Uu(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(Lc(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>dte(n)&&n.type===e,r}var bte=class jy extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,jy.prototype)}static get[Symbol.species](){return jy}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new jy(...t[0].concat(this)):new jy(...t.concat(this))}};function fV(e){return gh(e)?xte(e,()=>{}):e}function TC(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function I_e(e){return typeof e=="boolean"}var F_e=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let i=new bte;return r&&(I_e(r)?i.push(B_e):i.push(j_e(r.extraArgument))),i},O_e="RTK_autoBatch",hV=e=>t=>{setTimeout(t,e)},D_e=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,s=!1,i=!1;const o=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:hV(10):e.type==="callback"?e.queueNotification:hV(e.timeout),u=()=>{i=!1,s&&(s=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),h=n.subscribe(f);return o.add(d),()=>{h(),o.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[O_e]),s=!a,s&&(i||(i=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},P_e=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new bte(e);return n&&a.push(D_e(typeof n=="object"?n:void 0)),a};function R_e(e){const t=F_e(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:i=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(KP(r))o=ute(r);else throw new Error(Lc(1));let c;typeof n=="function"?c=n(t):c=t();let u=dN;a&&(u=T_e({trace:!1,...typeof a=="object"&&a}));const d=v_e(...c),f=P_e(d);let h=typeof i=="function"?i(f):f();const p=u(...h);return cte(o,s,p)}function yte(e){const t={},r=[];let n;const a={addCase(s,i){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(Lc(28));if(o in t)throw new Error(Lc(29));return t[o]=i,a},addMatcher(s,i){return r.push({matcher:s,reducer:i}),a},addDefaultCase(s){return n=s,a}};return e(a),[t,r,n]}function L_e(e){return typeof e=="function"}function M_e(e,t){let[r,n,a]=yte(t),s;if(L_e(e))s=()=>fV(e());else{const o=fV(e);s=()=>o}function i(o=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(Ag(d)){const p=f(d,c);return p===void 0?d:p}else{if(gh(d))return xte(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},o)}return i.getInitialState=s,i}var U_e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Q_e=(e=21)=>{let t="",r=e;for(;r--;)t+=U_e[Math.random()*64|0];return t},H_e=Symbol.for("rtk-slice-createasyncthunk");function V_e(e,t){return`${e}/${t}`}function z_e({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[H_e];return function(a){const{name:s,reducerPath:i=s}=a;if(!s)throw new Error(Lc(11));const o=(typeof a.reducers=="function"?a.reducers(G_e()):a.reducers)||{},c=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(B,k){const I=typeof B=="string"?B:B.type;if(!I)throw new Error(Lc(12));if(I in u.sliceCaseReducersByType)throw new Error(Lc(13));return u.sliceCaseReducersByType[I]=k,d},addMatcher(B,k){return u.sliceMatchers.push({matcher:B,reducer:k}),d},exposeAction(B,k){return u.actionCreators[B]=k,d},exposeCaseReducer(B,k){return u.sliceCaseReducersByName[B]=k,d}};c.forEach(B=>{const k=o[B],I={reducerName:B,type:V_e(s,B),createNotation:typeof a.reducers=="function"};q_e(k)?X_e(I,k,d,t):K_e(I,k,d)});function f(){const[B={},k=[],I=void 0]=typeof a.extraReducers=="function"?yte(a.extraReducers):[a.extraReducers],E={...B,...u.sliceCaseReducersByType};return M_e(a.initialState,N=>{for(let j in E)N.addCase(j,E[j]);for(let j of u.sliceMatchers)N.addMatcher(j.matcher,j.reducer);for(let j of k)N.addMatcher(j.matcher,j.reducer);I&&N.addDefaultCase(I)})}const h=B=>B,p=new Map,g=new WeakMap;let x;function b(B,k){return x||(x=f()),x(B,k)}function y(){return x||(x=f()),x.getInitialState()}function w(B,k=!1){function I(N){let j=N[B];return typeof j>"u"&&k&&(j=TC(g,I,y)),j}function E(N=h){const j=TC(p,k,()=>new WeakMap);return TC(j,N,()=>{const R={};for(const[D,O]of Object.entries(a.selectors??{}))R[D]=$_e(O,N,()=>TC(g,N,y),k);return R})}return{reducerPath:B,getSelectors:E,get selectors(){return E(I)},selectSlice:I}}const _={name:s,reducer:b,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,...w(i),injectInto(B,{reducerPath:k,...I}={}){const E=k??i;return B.inject({reducerPath:E,reducer:b},I),{..._,...w(E,!0)}}};return _}}function $_e(e,t,r,n){function a(s,...i){let o=t(s);return typeof o>"u"&&n&&(o=r()),e(o,...i)}return a.unwrapped=e,a}var Gc=z_e();function G_e(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function K_e({type:e,reducerName:t,createNotation:r},n,a){let s,i;if("reducer"in n){if(r&&!W_e(n))throw new Error(Lc(17));s=n.reducer,i=n.prepare}else s=n;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,i?Uu(e,i):Uu(e))}function q_e(e){return e._reducerDefinitionType==="asyncThunk"}function W_e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function X_e({type:e,reducerName:t},r,n,a){if(!a)throw new Error(Lc(18));const{payloadCreator:s,fulfilled:i,pending:o,rejected:c,settled:u,options:d}=r,f=a(e,s,d);n.exposeAction(t,f),i&&n.addCase(f.fulfilled,i),o&&n.addCase(f.pending,o),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:i||IC,pending:o||IC,rejected:c||IC,settled:u||IC})}function IC(){}var Y_e="task",wte="listener",Ete="completed",XP="cancelled",J_e=`task-${XP}`,Z_e=`task-${Ete}`,rF=`${wte}-${XP}`,e5e=`${wte}-${Ete}`,F4=class{constructor(e){cj(this,"name","TaskAbortError");cj(this,"message");this.code=e,this.message=`${Y_e} ${XP} (reason: ${e})`}},YP=(e,t)=>{if(typeof e!="function")throw new TypeError(Lc(32))},mN=()=>{},Cte=(e,t=mN)=>(e.catch(t),e),_te=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),zp=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},$p=e=>{if(e.aborted){const{reason:t}=e;throw new F4(t)}};function Nte(e,t){let r=mN;return new Promise((n,a)=>{const s=()=>a(new F4(e.reason));if(e.aborted){s();return}r=_te(e,s),t.finally(()=>r()).then(n,a)}).finally(()=>{r=mN})}var t5e=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof F4?"cancelled":"rejected",error:r}}finally{t==null||t()}},pN=e=>t=>Cte(Nte(e,t).then(r=>($p(e),r))),Ste=e=>{const t=pN(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:wv}=Object,mV={},O4="listenerMiddleware",r5e=(e,t)=>{const r=n=>_te(e,()=>zp(n,e.reason));return(n,a)=>{YP(n);const s=new AbortController;r(s);const i=t5e(async()=>{$p(e),$p(s.signal);const o=await n({pause:pN(s.signal),delay:Ste(s.signal),signal:s.signal});return $p(s.signal),o},()=>zp(s,Z_e));return a!=null&&a.autoJoin&&t.push(i.catch(mN)),{result:pN(e)(i),cancel(){zp(s,J_e)}}}},n5e=(e,t)=>{const r=async(n,a)=>{$p(t);let s=()=>{};const o=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&o.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await Nte(t,Promise.race(o));return $p(t),c}finally{s()}};return(n,a)=>Cte(r(n,a))},kte=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=Uu(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Lc(21));return YP(s),{predicate:a,type:t,effect:s}},Bte=wv(e=>{const{type:t,predicate:r,effect:n}=kte(e);return{id:Q_e(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Lc(22))}}},{withTypes:()=>Bte}),pV=(e,t)=>{const{type:r,effect:n,predicate:a}=kte(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},nF=e=>{e.pending.forEach(t=>{zp(t,rF)})},a5e=e=>()=>{e.forEach(nF),e.clear()},gV=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},jte=wv(Uu(`${O4}/add`),{withTypes:()=>jte}),s5e=Uu(`${O4}/removeAll`),Tte=wv(Uu(`${O4}/remove`),{withTypes:()=>Tte}),i5e=(...e)=>{console.error(`${O4}/error`,...e)},M2=(e={})=>{const t=new Map,{extra:r,onError:n=i5e}=e;YP(n);const a=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&nF(d)}),s=d=>{const f=pV(t,d)??Bte(d);return a(f)};wv(s,{withTypes:()=>s});const i=d=>{const f=pV(t,d);return f&&(f.unsubscribe(),d.cancelActive&&nF(f)),!!f};wv(i,{withTypes:()=>i});const o=async(d,f,h,p)=>{const g=new AbortController,x=n5e(s,g.signal),b=[];try{d.pending.add(g),await Promise.resolve(d.effect(f,wv({},h,{getOriginalState:p,condition:(y,w)=>x(y,w).then(Boolean),take:x,delay:Ste(g.signal),pause:pN(g.signal),extra:r,signal:g.signal,fork:r5e(g.signal,b),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((y,w,_)=>{y!==g&&(zp(y,rF),_.delete(y))})},cancel:()=>{zp(g,rF),d.pending.delete(g)},throwIfCancelled:()=>{$p(g.signal)}})))}catch(y){y instanceof F4||gV(n,y,{raisedBy:"effect"})}finally{await Promise.all(b),zp(g,e5e),d.pending.delete(g)}},c=a5e(t);return{middleware:d=>f=>h=>{if(!dte(h))return f(h);if(jte.match(h))return s(h.payload);if(s5e.match(h)){c();return}if(Tte.match(h))return i(h.payload);let p=d.getState();const g=()=>{if(p===mV)throw new Error(Lc(23));return p};let x;try{if(x=f(h),t.size>0){const b=d.getState(),y=Array.from(t.values());for(const w of y){let _=!1;try{_=w.predicate(h,b,p)}catch(B){_=!1,gV(n,B,{raisedBy:"predicate"})}_&&o(w,h,d,g)}}}finally{p=mV}return x},startListening:s,stopListening:i,clearListeners:c}};function Lc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var o5e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Ite=Gc({name:"chartLayout",initialState:o5e,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:l5e,setLayout:c5e,setChartSize:u5e,setScale:d5e}=Ite.actions,A5e=Ite.reducer;function xV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xV(Object(r),!0).forEach(function(n){f5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f5e(e,t,r){return(t=h5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h5e(e){var t=m5e(e,"string");return typeof t=="symbol"?t:t+""}function m5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gN=Math.PI/180,p5e=e=>e*180/Math.PI,Zn=(e,t,r,n)=>({x:e+Math.cos(-gN*n)*r,y:t+Math.sin(-gN*n)*r}),Fte=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},g5e=(e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)},x5e=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,i=g5e({x:r,y:n},{x:a,y:s});if(i<=0)return{radius:i,angle:0};var o=(r-a)/i,c=Math.acos(o);return n>s&&(c=2*Math.PI-c),{radius:i,angle:p5e(c),angleInRadian:c}},v5e=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-s*360,endAngle:r-s*360}},b5e=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360),i=Math.min(a,s);return e+i*360},y5e=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:s}=x5e({x:r,y:n},t),{innerRadius:i,outerRadius:o}=t;if(a<i||a>o||a===0)return null;var{startAngle:c,endAngle:u}=v5e(t),d=s,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?vV(vV({},t),{},{radius:a,angle:b5e(d,t)}):null},Ote=e=>!S.isValidElement(e)&&typeof e!="function"&&typeof e!="boolean"&&e!=null?e.className:"";function Dte(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function bV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ku(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bV(Object(r),!0).forEach(function(n){w5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function w5e(e,t,r){return(t=E5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E5e(e){var t=C5e(e,"string");return typeof t=="symbol"?t:t+""}function C5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pa(e,t,r){return ks(e)||ks(t)?r:tf(t)?bm(e,t,r):typeof t=="function"?t(e):r}var _5e=(e,t,r,n,a)=>{var s,i=-1,o=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<o;c++){var u=c>0?r[c-1].coordinate:r[o-1].coordinate,d=r[c].coordinate,f=c>=o-1?r[0].coordinate:r[c+1].coordinate,h=void 0;if(Wi(d-u)!==Wi(f-d)){var p=[];if(Wi(f-d)===Wi(a[1]-a[0])){h=f;var g=d+a[1]-a[0];p[0]=Math.min(g,(g+u)/2),p[1]=Math.max(g,(g+u)/2)}else{h=u;var x=f+a[1]-a[0];p[0]=Math.min(d,(x+d)/2),p[1]=Math.max(d,(x+d)/2)}var b=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>b[0]&&e<=b[1]||e>=p[0]&&e<=p[1]){({index:i}=r[c]);break}}else{var y=Math.min(u,f),w=Math.max(u,f);if(e>(y+d)/2&&e<=(w+d)/2){({index:i}=r[c]);break}}}else if(t){for(var _=0;_<o;_++)if(_===0&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_>0&&_<o-1&&e>(t[_].coordinate+t[_-1].coordinate)/2&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_===o-1&&e>(t[_].coordinate+t[_-1].coordinate)/2){({index:i}=t[_]);break}}return i},N5e=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:i,layout:o}=t;if((o==="vertical"||o==="horizontal"&&i==="middle")&&s!=="center"&&ur(e[s]))return ku(ku({},e),{},{[s]:e[s]+(n||0)});if((o==="horizontal"||o==="vertical"&&s==="center")&&i!=="middle"&&ur(e[i]))return ku(ku({},e),{},{[i]:e[i]+(a||0)})}return e},Dm=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Pte=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var a,s,i=e.map(o=>(o.coordinate===t&&(a=!0),o.coordinate===r&&(s=!0),o.coordinate));return a||i.push(t),s||i.push(r),i},Rte=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:s,scale:i,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:p}=e;if(!i)return null;var g=o==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,x=a==="category"&&i.bandwidth?i.bandwidth()/g:0;if(x=p==="angleAxis"&&s&&s.length>=2?Wi(s[0]-s[1])*2*x:x,f||h){var b=(f||h||[]).map((y,w)=>{var _=n?n.indexOf(y):y;return{coordinate:i(_)+x,value:y,offset:x,index:w}});return b.filter(y=>!Uc(y.coordinate))}return c&&u?u.map((y,w)=>({coordinate:i(y)+x,value:y,index:w,offset:x})):i.ticks&&d!=null?i.ticks(d).map((y,w)=>({coordinate:i(y)+x,value:y,offset:x,index:w})):i.domain().map((y,w)=>({coordinate:i(y)+x,value:n?n[y]:y,index:w,offset:x}))},yV=1e-4,S5e=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-yV,s=Math.max(n[0],n[1])+yV,i=e(t[0]),o=e(t[r-1]);(i<a||i>s||o<a||o>s)&&e.domain([t[0],t[r-1]])}},k5e=(e,t)=>{if(!t||t.length!==2||!ur(t[0])||!ur(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!ur(e[0])||e[0]<r)&&(a[0]=r),(!ur(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},B5e=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0,i=0;i<t;++i){var o=Uc(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1]):(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1])}},j5e=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0;s<t;++s){var i=Uc(e[s][r][1])?e[s][r][0]:e[s][r][1];i>=0?(e[s][r][0]=a,e[s][r][1]=a+i,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},T5e={sign:B5e,expand:lCe,none:Xv,silhouette:cCe,wiggle:uCe,positive:j5e},I5e=(e,t,r)=>{var n=T5e[r],a=oCe().keys(t).value((s,i)=>+Pa(s,i,0)).order(K6).offset(n);return a(e)};function F5e(e){return e==null?void 0:String(e)}var wV=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:s,index:i}=e;if(t.type==="category")return r[i]?r[i].coordinate+n:null;var o=Pa(s,t.dataKey,t.scale.domain()[i]);return ks(o)?null:t.scale(o)-a/2+n},O5e=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},D5e=e=>{var t=e.flat(2).filter(ur);return[Math.min(...t),Math.max(...t)]},P5e=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],R5e=(e,t,r)=>{if(e!=null)return P5e(Object.keys(e).reduce((n,a)=>{var s=e[a],{stackedData:i}=s,o=i.reduce((c,u)=>{var d=Dte(u,t,r),f=D5e(d);return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},EV=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,CV=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Mw=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=k4(t,d=>d.coordinate),s=1/0,i=1,o=a.length;i<o;i++){var c=a[i],u=a[i-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function _V(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return ku(ku({},t),{},{dataKey:r,payload:n,value:a,name:s})}function U1(e,t){if(e)return String(e);if(typeof t=="string")return t}function L5e(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var s=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return s?{x:e,y:t}:null}return n?y5e({x:e,y:t},n):null}var M5e=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,{radius:i}=n;return ku(ku(ku({},n),Zn(n.cx,n.cy,i,s)),{},{angle:s,radius:i})}var o=a.coordinate,{angle:c}=n;return ku(ku(ku({},n),Zn(n.cx,n.cy,o,c)),{},{angle:c,radius:o})}return{x:0,y:0}},U5e=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Th=e=>e.layout.width,Ih=e=>e.layout.height,Q5e=e=>e.layout.scale,Lte=e=>e.layout.margin,JP=ut(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),ZP=ut(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Mte="data-recharts-item-index",Ute="data-recharts-item-data-key",D4=60;function NV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function y0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NV(Object(r),!0).forEach(function(n){H5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function H5e(e,t,r){return(t=V5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V5e(e){var t=z5e(e,"string");return typeof t=="symbol"?t:t+""}function z5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $5e=e=>e.brush.height,ki=ut([Th,Ih,Lte,$5e,JP,ZP,ote,A_e],(e,t,r,n,a,s,i,o)=>{var c=s.reduce((g,x)=>{var{orientation:b}=x;if(!x.mirror&&!x.hide){var y=typeof x.width=="number"?x.width:D4;return y0(y0({},g),{},{[b]:g[b]+y})}return g},{left:r.left||0,right:r.right||0}),u=a.reduce((g,x)=>{var{orientation:b}=x;return!x.mirror&&!x.hide?y0(y0({},g),{},{[b]:bm(g,"".concat(b))+x.height}):g},{top:r.top||0,bottom:r.bottom||0}),d=y0(y0({},u),c),f=d.bottom;d.bottom+=n,d=N5e(d,i,o);var h=e-d.left-d.right,p=t-d.top-d.bottom;return y0(y0({brushBottom:f},d),{},{width:Math.max(h,0),height:Math.max(p,0)})}),G5e=ut(ki,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Qte=ut(Th,Ih,(e,t)=>({x:0,y:0,width:e,height:t})),K5e=S.createContext(null),ac=()=>S.useContext(K5e)!=null,P4=e=>e.brush,R4=ut([P4,ki,Lte],(e,t,r)=>({height:e.height,x:ur(e.x)?e.x:t.left,y:ur(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:ur(e.width)?e.width:t.width})),eR=()=>{var e,t=ac(),r=ir(G5e),n=ir(R4),a=(e=ir(P4))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},q5e={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Hte=()=>{var e;return(e=ir(ki))!==null&&e!==void 0?e:q5e},tR=()=>ir(Th),rR=()=>ir(Ih),W5e={top:0,right:0,bottom:0,left:0},X5e=()=>{var e;return(e=ir(t=>t.layout.margin))!==null&&e!==void 0?e:W5e},In=e=>e.layout.layoutType,nR=()=>ir(In),Y5e={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Vte=Gc({name:"legend",initialState:Y5e,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=sh(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:SV,setLegendSettings:J5e,addLegendPayload:zte,removeLegendPayload:$te}=Vte.actions,Z5e=Vte.reducer,eNe=["contextPayload"];function aF(){return aF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aF.apply(null,arguments)}function kV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kV(Object(r),!0).forEach(function(n){aR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aR(e,t,r){return(t=tNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tNe(e){var t=rNe(e,"string");return typeof t=="symbol"?t:t+""}function rNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nNe(e,t){if(e==null)return{};var r,n,a=aNe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function aNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function sNe(e){return e.value}function iNe(e){var{contextPayload:t}=e,r=nNe(e,eNe),n=rte(t,e.payloadUniqBy,sNe),a=Jv(Jv({},r),{},{payload:n});return S.isValidElement(e.content)?S.cloneElement(e.content,a):typeof e.content=="function"?S.createElement(e.content,a):S.createElement(MP,a)}function oNe(e,t,r,n,a,s){var{layout:i,align:o,verticalAlign:c}=t,u,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(o==="center"&&i==="vertical"?u={left:((n||0)-s.width)/2}:u=o==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Jv(Jv({},u),d)}function lNe(e){var t=$a();return S.useEffect(()=>{t(J5e(e))},[t,e]),null}function cNe(e){var t=$a();return S.useEffect(()=>(t(SV(e)),()=>{t(SV({width:0,height:0}))}),[t,e]),null}function uNe(e){var t=m_e(),r=TEe(),n=X5e(),{width:a,height:s,wrapperStyle:i,portal:o}=e,[c,u]=lte([t]),d=tR(),f=rR(),h=d-(n.left||0)-(n.right||0),p=U2.getWidthOrHeight(e.layout,s,a,h),g=o?i:Jv(Jv({position:"absolute",width:(p==null?void 0:p.width)||a||"auto",height:(p==null?void 0:p.height)||s||"auto"},oNe(i,e,n,d,f,c)),i),x=o??r;if(x==null)return null;var b=S.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:u},S.createElement(lNe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),S.createElement(cNe,{width:c.width,height:c.height}),S.createElement(iNe,aF({},e,p,{margin:n,chartWidth:d,chartHeight:f,contextPayload:t})));return FP.createPortal(b,x)}class U2 extends S.PureComponent{static getWidthOrHeight(t,r,n,a){return t==="vertical"&&ur(r)?{height:r}:t==="horizontal"?{width:n||a}:null}render(){return S.createElement(uNe,this.props)}}aR(U2,"displayName","Legend");aR(U2,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function sF(){return sF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sF.apply(null,arguments)}function BV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function MT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BV(Object(r),!0).forEach(function(n){dNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dNe(e,t,r){return(t=ANe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ANe(e){var t=fNe(e,"string");return typeof t=="symbol"?t:t+""}function fNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hNe(e){return Array.isArray(e)&&tf(e[0])&&tf(e[1])?e.join(" ~ "):e}var mNe=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:i,itemSorter:o,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,p=()=>{if(s&&s.length){var k={padding:0,margin:0},I=(o?k4(s,o):s).map((E,N)=>{if(E.type==="none")return null;var j=E.formatter||i||hNe,{value:R,name:D}=E,O=R,L=D;if(j){var M=j(R,D,E,N,s);if(Array.isArray(M))[O,L]=M;else if(M!=null)O=M;else return null}var J=MT({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},n);return S.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(N),style:J},tf(L)?S.createElement("span",{className:"recharts-tooltip-item-name"},L):null,tf(L)?S.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,S.createElement("span",{className:"recharts-tooltip-item-value"},O),S.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return S.createElement("ul",{className:"recharts-tooltip-item-list",style:k},I)}return null},g=MT({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),x=MT({margin:0},a),b=!ks(d),y=b?d:"",w=gn("recharts-default-tooltip",c),_=gn("recharts-tooltip-label",u);b&&f&&s!==void 0&&s!==null&&(y=f(d,s));var B=h?{role:"status","aria-live":"assertive"}:{};return S.createElement("div",sF({className:w,style:g},B),S.createElement("p",{className:_,style:x},S.isValidElement(y)?y:"".concat(y)),p())},Wb="recharts-tooltip-wrapper",pNe={visibility:"hidden"};function gNe(e){var{coordinate:t,translateX:r,translateY:n}=e;return gn(Wb,{["".concat(Wb,"-right")]:ur(r)&&t&&ur(t.x)&&r>=t.x,["".concat(Wb,"-left")]:ur(r)&&t&&ur(t.x)&&r<t.x,["".concat(Wb,"-bottom")]:ur(n)&&t&&ur(t.y)&&n>=t.y,["".concat(Wb,"-top")]:ur(n)&&t&&ur(t.y)&&n<t.y})}function jV(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=e;if(s&&ur(s[n]))return s[n];var d=r[n]-o-(a>0?a:0),f=r[n]+a;if(t[n])return i[n]?d:f;var h=c[n];if(h==null)return 0;if(i[n]){var p=d,g=h;return p<g?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var x=f+o,b=h+u;return x>b?Math.max(d,h):Math.max(f,h)}function xNe(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function vNe(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:i,useTranslate3d:o,viewBox:c}=e,u,d,f;return i.height>0&&i.width>0&&r?(d=jV({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),f=jV({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),u=xNe({translateX:d,translateY:f,useTranslate3d:o})):u=pNe,{cssProperties:u,cssClasses:gNe({translateX:d,translateY:f,coordinate:r})}}function TV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function FC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TV(Object(r),!0).forEach(function(n){iF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iF(e,t,r){return(t=bNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bNe(e){var t=yNe(e,"string");return typeof t=="symbol"?t:t+""}function yNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class wNe extends S.PureComponent{constructor(){super(...arguments),iF(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),iF(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:i,hasPayload:o,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:p,wrapperStyle:g,lastBoundingBox:x,innerRef:b,hasPortalFromProps:y}=this.props,{cssClasses:w,cssProperties:_}=vNe({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:x.height,width:x.width},useTranslate3d:h,viewBox:p}),B=y?{}:FC(FC({transition:c&&t?"transform ".concat(n,"ms ").concat(a):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),k=FC(FC({},B),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},g);return S.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:k,ref:b},s)}}var ENe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Fg={isSsr:ENe()},Gte=()=>ir(e=>e.rootProps.accessibilityLayer);function Vc(e){return Number.isFinite(e)}function Zv(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function oF(){return oF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oF.apply(null,arguments)}function IV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function FV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IV(Object(r),!0).forEach(function(n){CNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CNe(e,t,r){return(t=_Ne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Ne(e){var t=NNe(e,"string");return typeof t=="symbol"?t:t+""}function NNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OV={curveBasisClosed:XEe,curveBasisOpen:YEe,curveBasis:WEe,curveBumpX:DEe,curveBumpY:PEe,curveLinearClosed:JEe,curveLinear:_4,curveMonotoneX:ZEe,curveMonotoneY:eCe,curveNatural:tCe,curveStep:rCe,curveStepAfter:aCe,curveStepBefore:nCe},OC=e=>Vc(e.x)&&Vc(e.y),Xb=e=>e.x,Yb=e=>e.y,SNe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(R2(e));return(r==="curveMonotone"||r==="curveBump")&&t?OV["".concat(r).concat(t==="vertical"?"Y":"X")]:OV[r]||_4},kNe=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=e,i=SNe(t,a),o=s?r.filter(OC):r,c;if(Array.isArray(n)){var u=s?n.filter(f=>OC(f)):n,d=o.map((f,h)=>FV(FV({},f),{},{base:u[h]}));return a==="vertical"?c=kC().y(Yb).x1(Xb).x0(f=>f.base.x):c=kC().x(Xb).y1(Yb).y0(f=>f.base.y),c.defined(OC).curve(i),c(d)}return a==="vertical"&&ur(n)?c=kC().y(Yb).x1(Xb).x0(n):ur(n)?c=kC().x(Xb).y1(Yb).y0(n):c=Mee().x(Xb).y(Yb),c.defined(OC).curve(i),c(o)},Kte=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var s=r&&r.length?kNe(e):n;return S.createElement("path",oF({},il(e),TP(e),{className:gn("recharts-curve",t),d:s===null?void 0:s,ref:a}))},BNe=["x","y","top","left","width","height","className"];function lF(){return lF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lF.apply(null,arguments)}function DV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jNe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DV(Object(r),!0).forEach(function(n){TNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TNe(e,t,r){return(t=INe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function INe(e){var t=FNe(e,"string");return typeof t=="symbol"?t:t+""}function FNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ONe(e,t){if(e==null)return{};var r,n,a=DNe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function DNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var PNe=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),RNe=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:s=0,height:i=0,className:o}=e,c=ONe(e,BNe),u=jNe({x:t,y:r,top:n,left:a,width:s,height:i},c);return!ur(t)||!ur(r)||!ur(s)||!ur(i)||!ur(n)||!ur(a)?null:S.createElement("path",lF({},Wn(u,!0),{className:gn("recharts-cross",o),d:PNe(t,r,s,i,n,a)}))};function LNe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function PV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function MNe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PV(Object(r),!0).forEach(function(n){UNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UNe(e,t,r){return(t=QNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QNe(e){var t=HNe(e,"string");return typeof t=="symbol"?t:t+""}function HNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zu(e,t){var r=MNe({},e),n=t,a=Object.keys(t),s=a.reduce((i,o)=>(i[o]===void 0&&n[o]!==void 0&&(i[o]=n[o]),i),r);return s}var UT={},QT={},HT={},RV;function VNe(){return RV||(RV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(HT)),HT}var LV;function zNe(){return LV||(LV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VNe(),r=Zee(),n=VP(),a=zP(),s=QP();function i(u,d,f){return o(u,d,void 0,void 0,void 0,void 0,f)}function o(u,d,f,h,p,g,x){const b=x(u,d,f,h,p,g);if(b!==void 0)return b;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return c(u,d,g,x)}return c(u,d,g,x)}function c(u,d,f,h){if(Object.is(u,d))return!0;let p=n.getTag(u),g=n.getTag(d);if(p===a.argumentsTag&&(p=a.objectTag),g===a.argumentsTag&&(g=a.objectTag),p!==g)return!1;switch(p){case a.stringTag:return u.toString()===d.toString();case a.numberTag:{const y=u.valueOf(),w=d.valueOf();return s.eq(y,w)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(u.valueOf(),d.valueOf());case a.regexpTag:return u.source===d.source&&u.flags===d.flags;case a.functionTag:return u===d}f=f??new Map;const x=f.get(u),b=f.get(d);if(x!=null&&b!=null)return x===d;f.set(u,d),f.set(d,u);try{switch(p){case a.mapTag:{if(u.size!==d.size)return!1;for(const[y,w]of u.entries())if(!d.has(y)||!o(w,d.get(y),y,u,d,f,h))return!1;return!0}case a.setTag:{if(u.size!==d.size)return!1;const y=Array.from(u.values()),w=Array.from(d.values());for(let _=0;_<y.length;_++){const B=y[_],k=w.findIndex(I=>o(B,I,void 0,u,d,f,h));if(k===-1)return!1;w.splice(k,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let y=0;y<u.length;y++)if(!o(u[y],d[y],y,u,d,f,h))return!1;return!0}case a.arrayBufferTag:return u.byteLength!==d.byteLength?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case a.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case a.errorTag:return u.name===d.name&&u.message===d.message;case a.objectTag:{if(!(c(u.constructor,d.constructor,f,h)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const w=[...Object.keys(u),...r.getSymbols(u)],_=[...Object.keys(d),...r.getSymbols(d)];if(w.length!==_.length)return!1;for(let B=0;B<w.length;B++){const k=w[B],I=u[k];if(!Object.hasOwn(d,k))return!1;const E=d[k];if(!o(I,E,k,u,d,f,h))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=i}(QT)),QT}var VT={},MV;function $Ne(){return MV||(MV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(VT)),VT}var UV;function GNe(){return UV||(UV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zNe(),r=$Ne();function n(a,s){return t.isEqualWith(a,s,r.noop)}e.isEqual=n}(UT)),UT}var zT,QV;function KNe(){return QV||(QV=1,zT=GNe().isEqual),zT}var qNe=KNe();const WNe=Cl(qNe);var xN=1e-4,qte=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Wte=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),HV=(e,t)=>r=>{var n=qte(e,t);return Wte(n,r)},XNe=(e,t)=>r=>{var n=qte(e,t),a=[...n.map((s,i)=>s*i).slice(1),0];return Wte(a,r)},VV=function(){for(var t,r,n,a,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];if(i.length===1)switch(i[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var c=i[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,a]=c[1].split(")")[0].split(",").map(g=>parseFloat(g)))}}else i.length===4&&([t,n,r,a]=i);var u=HV(t,r),d=HV(n,a),f=XNe(t,r),h=g=>g>1?1:g<0?0:g,p=g=>{for(var x=g>1?1:g,b=x,y=0;y<8;++y){var w=u(b)-x,_=f(b);if(Math.abs(w-x)<xN||_<xN)return d(b);b=h(b-w/_)}return d(b)};return p.isStepper=!1,p},YNe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,s=(i,o,c)=>{var u=-(i-o)*r,d=c*n,f=c+(u-d)*a/1e3,h=c*a/1e3+i;return Math.abs(h-o)<xN&&Math.abs(f)<xN?[o,0]:[h,f]};return s.isStepper=!0,s.dt=a,s},Xte=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return VV(e);case"spring":return YNe();default:if(e.split("(")[0]==="cubic-bezier")return VV(e)}return typeof e=="function"?e:null};function zV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $V(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zV(Object(r),!0).forEach(function(n){JNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JNe(e,t,r){return(t=ZNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZNe(e){var t=eSe(e,"string");return typeof t=="symbol"?t:t+""}function eSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tSe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),rSe=(e,t,r)=>e.map(n=>"".concat(tSe(n)," ").concat(t,"ms ").concat(r)).join(","),nSe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),Uw=(e,t)=>Object.keys(t).reduce((r,n)=>$V($V({},r),{},{[n]:e(n,t[n])}),{});function GV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function po(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GV(Object(r),!0).forEach(function(n){aSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aSe(e,t,r){return(t=sSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sSe(e){var t=iSe(e,"string");return typeof t=="symbol"?t:t+""}function iSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vN=(e,t,r)=>e+(t-e)*r,cF=e=>{var{from:t,to:r}=e;return t!==r},Yte=(e,t,r)=>{var n=Uw((a,s)=>{if(cF(s)){var[i,o]=e(s.from,s.to,s.velocity);return po(po({},s),{},{from:i,velocity:o})}return s},t);return r<1?Uw((a,s)=>cF(s)?po(po({},s),{},{velocity:vN(s.velocity,n[a].velocity,r),from:vN(s.from,n[a].from,r)}):s,t):Yte(e,n,r-1)};function oSe(e,t,r,n,a,s){var i,o=n.reduce((h,p)=>po(po({},h),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),c=()=>Uw((h,p)=>p.from,o),u=()=>!Object.values(o).filter(cF).length,d=null,f=h=>{i||(i=h);var p=h-i,g=p/r.dt;o=Yte(r,o,g),a(po(po(po({},e),t),c())),i=h,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{d()})}function lSe(e,t,r,n,a,s,i){var o=null,c=a.reduce((f,h)=>po(po({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/n,p=Uw((x,b)=>vN(...b,r(h)),c);if(s(po(po(po({},e),t),p)),h<1)o=i.setTimeout(d);else{var g=Uw((x,b)=>vN(...b,r(1)),c);s(po(po(po({},e),t),g))}};return()=>(o=i.setTimeout(d),()=>{o()})}const Jte=(e,t,r,n,a,s)=>{var i=nSe(e,t);return r.isStepper===!0?oSe(e,t,r,i,a,s):lSe(e,t,r,n,i,a,s)};function cSe(e){var t,r=()=>null,n=!1,a=null,s=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,[c,...u]=o;if(typeof c=="number"){a=e.setTimeout(s.bind(null,u),c);return}s(c),a=e.setTimeout(s.bind(null,u));return}typeof i=="string"&&(t=i,r(t)),typeof i=="object"&&(t=i,r(t)),typeof i=="function"&&i()}};return{stop:()=>{n=!0},start:i=>{n=!1,a&&(a(),a=null),s(i)},subscribe:i=>(r=i,()=>{r=()=>null}),getTimeoutController:()=>e}}class uSe{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=i=>{i-n>=r?t(i):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{cancelAnimationFrame(a)}}}function dSe(){return cSe(new uSe)}var ASe=S.createContext(dSe);function Zte(e,t){var r=S.useContext(ASe);return S.useMemo(()=>t??r(e),[e,t,r])}var fSe=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function uF(){return uF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uF.apply(null,arguments)}function hSe(e,t){if(e==null)return{};var r,n,a=mSe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function mSe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function KV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function w0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KV(Object(r),!0).forEach(function(n){Ip(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ip(e,t,r){return(t=pSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pSe(e){var t=gSe(e,"string");return typeof t=="symbol"?t:t+""}function gSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class sR extends S.PureComponent{constructor(t,r){super(t,r),Ip(this,"mounted",!1),Ip(this,"manager",void 0),Ip(this,"stopJSAnimation",null),Ip(this,"unSubscribe",null);var{isActive:n,attributeName:a,from:s,to:i,children:o,duration:c,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||c<=0){this.state={style:{}},typeof o=="function"&&(this.state={style:i});return}if(s){if(typeof o=="function"){this.state={style:s};return}this.state={style:a?{[a]:s}:s}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:a,shouldReAnimate:s,to:i,from:o}=this.props,{style:c}=this.state;if(n){if(!r){var u={style:a?{[a]:i}:i};this.state&&c&&(a&&c[a]!==i||!a&&c!==i)&&this.setState(u);return}if(!(WNe(t.to,i)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||s?o:t.to;if(this.state&&c){var h={style:a?{[a]:f}:f};(a&&c[a]!==f||!a&&c!==f)&&this.setState(h)}this.runAnimation(w0(w0({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:a,easing:s,begin:i,onAnimationEnd:o,onAnimationStart:c}=t,u=Jte(r,n,Xte(s),a,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([c,i,d,a,o])}runAnimation(t){var{begin:r,duration:n,attributeName:a,to:s,easing:i,onAnimationStart:o,onAnimationEnd:c,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof i=="function"||typeof u=="function"||i==="spring"){this.runJSAnimation(t);return}var d=a?{[a]:s}:s,f=rSe(Object.keys(d),n,i);this.manager.start([o,r,w0(w0({},d),{},{transition:f}),n,c])}render(){var t=this.props,{children:r,begin:n,duration:a,attributeName:s,easing:i,isActive:o,from:c,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:h,onAnimationReStart:p,animationManager:g}=t,x=hSe(t,fSe),b=S.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!o||b===0||a<=0)return r;var w=_=>{var{style:B={},className:k}=_.props,I=S.cloneElement(_,w0(w0({},x),{},{style:w0(w0({},B),y),className:k}));return I};return b===1?w(S.Children.only(r)):S.createElement("div",null,S.Children.map(r,_=>w(_)))}}Ip(sR,"displayName","Animate");Ip(sR,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function bN(e){var t,r=Zte((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return S.createElement(sR,uF({},e,{animationManager:r}))}function yN(){return yN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yN.apply(null,arguments)}var qV=(e,t,r,n,a)=>{var s=Math.min(Math.abs(r)/2,Math.abs(n)/2),i=n>=0?1:-1,o=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(s>0&&a instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=a[f]>s?s:a[f];u="M".concat(e,",").concat(t+i*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+o*d[0],",").concat(t)),u+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+i*d[1])),u+="L ".concat(e+r,",").concat(t+n-i*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-o*d[2],",").concat(t+n)),u+="L ".concat(e+o*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-i*d[3])),u+="Z"}else if(s>0&&a===+a&&a>0){var p=Math.min(s,a);u="M ".concat(e,",").concat(t+i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+o*p,",").concat(t,`
            L `).concat(e+r-o*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r,",").concat(t+i*p,`
            L `).concat(e+r,",").concat(t+n-i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r-o*p,",").concat(t+n,`
            L `).concat(e+o*p,",").concat(t+n,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e,",").concat(t+n-i*p," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},xSe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ere=e=>{var t=zu(e,xSe),r=S.useRef(null),[n,a]=S.useState(-1);S.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&a(y)}catch{}},[]);var{x:s,y:i,width:o,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isAnimationActive:g,isUpdateAnimationActive:x}=t;if(s!==+s||i!==+i||o!==+o||c!==+c||o===0||c===0)return null;var b=gn("recharts-rectangle",d);return x?S.createElement(bN,{canBegin:n>0,from:{width:o,height:c,x:s,y:i},to:{width:o,height:c,x:s,y:i},duration:h,animationEasing:f,isActive:x},y=>{var{width:w,height:_,x:B,y:k}=y;return S.createElement(bN,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,isActive:g,easing:f},S.createElement("path",yN({},Wn(t,!0),{className:b,d:qV(B,k,w,_,u),ref:r})))}):S.createElement("path",yN({},Wn(t,!0),{className:b,d:qV(s,i,o,c,u)}))};function tre(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e,i=Zn(t,r,n,a),o=Zn(t,r,n,s);return{points:[i,o],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function dF(){return dF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dF.apply(null,arguments)}var vSe=(e,t)=>{var r=Wi(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},DC=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:i,cornerRadius:o,cornerIsExternal:c}=e,u=o*(i?1:-1)+n,d=Math.asin(o/u)/gN,f=c?a:a+s*d,h=Zn(t,r,u,f),p=Zn(t,r,n,f),g=c?a-s*d:a,x=Zn(t,r,u*Math.cos(d*gN),g);return{center:h,circleTangency:p,lineTangency:x,theta:d}},rre=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:i}=e,o=vSe(s,i),c=s+o,u=Zn(t,r,a,s),d=Zn(t,r,a,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(s>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=Zn(t,r,n,s),p=Zn(t,r,n,c);f+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(s<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},bSe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:i,cornerIsExternal:o,startAngle:c,endAngle:u}=e,d=Wi(u-c),{circleTangency:f,lineTangency:h,theta:p}=DC({cx:t,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:o}),{circleTangency:g,lineTangency:x,theta:b}=DC({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:o}),y=o?Math.abs(c-u):Math.abs(c-u)-p-b;if(y<0)return i?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):rre({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var w="M ".concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
  `);if(n>0){var{circleTangency:_,lineTangency:B,theta:k}=DC({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:I,lineTangency:E,theta:N}=DC({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),j=o?Math.abs(c-u):Math.abs(c-u)-k-N;if(j<0&&s===0)return"".concat(w,"L").concat(t,",").concat(r,"Z");w+="L".concat(E.x,",").concat(E.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(j>180),",").concat(+(d>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(B.x,",").concat(B.y,"Z")}else w+="L".concat(t,",").concat(r,"Z");return w},ySe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},nre=e=>{var t=zu(e,ySe),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(s<a||u===d)return null;var h=gn("recharts-sector",f),p=s-a,g=wl(i,p,0,!0),x;return g>0&&Math.abs(u-d)<360?x=bSe({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(g,p/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d}):x=rre({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),S.createElement("path",dF({},Wn(t,!0),{className:h,d:x}))};function wSe(e,t,r){var n,a,s,i;if(e==="horizontal")n=t.x,s=n,a=r.top,i=r.top+r.height;else if(e==="vertical")a=t.y,i=a,n=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:o,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,h=Zn(o,c,u,f),p=Zn(o,c,d,f);n=h.x,a=h.y,s=p.x,i=p.y}else return tre(t);return[{x:n,y:a},{x:s,y:i}]}var $T={},GT={},KT={},WV;function ESe(){return WV||(WV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ste();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r}(KT)),KT}var XV;function CSe(){return XV||(XV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ESe();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r}(GT)),GT}var YV;function _Se(){return YV||(YV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ite(),r=CSe();function n(a,s,i){i&&typeof i!="number"&&t.isIterateeCall(a,s,i)&&(s=i=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),i=i===void 0?a<s?1:-1:r.toFinite(i);const o=Math.max(Math.ceil((s-a)/(i||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=a,a+=i;return c}e.range=n}($T)),$T}var qT,JV;function NSe(){return JV||(JV=1,qT=_Se().range),qT}var SSe=NSe();const are=Cl(SSe);function am(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function kSe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function iR(e){let t,r,n;e.length!==2?(t=am,r=(o,c)=>am(e(o),c),n=(o,c)=>e(o)-c):(t=e===am||e===kSe?e:BSe,r=e,n=e);function a(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function i(o,c,u=0,d=o.length){const f=a(o,c,u,d-1);return f>u&&n(o[f-1],c)>-n(o[f],c)?f-1:f}return{left:a,center:i,right:s}}function BSe(){return 0}function sre(e){return e===null?NaN:+e}function*jSe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const TSe=iR(am),Q2=TSe.right;iR(sre).center;class ZV extends Map{constructor(t,r=OSe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(ez(this,t))}has(t){return super.has(ez(this,t))}set(t,r){return super.set(ISe(this,t),r)}delete(t){return super.delete(FSe(this,t))}}function ez({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function ISe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function FSe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function OSe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function DSe(e=am){if(e===am)return ire;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function ire(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const PSe=Math.sqrt(50),RSe=Math.sqrt(10),LSe=Math.sqrt(2);function wN(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),i=s>=PSe?10:s>=RSe?5:s>=LSe?2:1;let o,c,u;return a<0?(u=Math.pow(10,-a)/i,o=Math.round(e*u),c=Math.round(t*u),o/u<e&&++o,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*i,o=Math.round(e/u),c=Math.round(t/u),o*u<e&&++o,c*u>t&&--c),c<o&&.5<=r&&r<2?wN(e,t,r*2):[o,c,u]}function AF(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,s,i]=n?wN(t,e,r):wN(e,t,r);if(!(s>=a))return[];const o=s-a+1,c=new Array(o);if(n)if(i<0)for(let u=0;u<o;++u)c[u]=(s-u)/-i;else for(let u=0;u<o;++u)c[u]=(s-u)*i;else if(i<0)for(let u=0;u<o;++u)c[u]=(a+u)/-i;else for(let u=0;u<o;++u)c[u]=(a+u)*i;return c}function fF(e,t,r){return t=+t,e=+e,r=+r,wN(e,t,r)[2]}function hF(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?fF(t,e,r):fF(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function tz(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function rz(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function ore(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?ire:DSe(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),p=Math.max(r,Math.floor(t-u*f/c+h)),g=Math.min(n,Math.floor(t+(c-u)*f/c+h));ore(e,t,p,g,a)}const s=e[t];let i=r,o=n;for(Jb(e,r,t),a(e[n],s)>0&&Jb(e,r,n);i<o;){for(Jb(e,i,o),++i,--o;a(e[i],s)<0;)++i;for(;a(e[o],s)>0;)--o}a(e[r],s)===0?Jb(e,r,o):(++o,Jb(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function Jb(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function MSe(e,t,r){if(e=Float64Array.from(jSe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return rz(e);if(t>=1)return tz(e);var n,a=(n-1)*t,s=Math.floor(a),i=tz(ore(e,s).subarray(0,s+1)),o=rz(e.subarray(s+1));return i+(o-i)*(a-s)}}function USe(e,t,r=sre){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),i=+r(e[s],s,e),o=+r(e[s+1],s+1,e);return i+(o-i)*(a-s)}}function QSe(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(a);++n<a;)s[n]=e+n*r;return s}function $u(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Fh(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const mF=Symbol("implicit");function L4(){var e=new ZV,t=[],r=[],n=mF;function a(s){let i=e.get(s);if(i===void 0){if(n!==mF)return n;e.set(s,i=t.push(s)-1)}return r[i%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new ZV;for(const i of s)e.has(i)||e.set(i,t.push(i)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return L4(t,r).unknown(n)},$u.apply(a,arguments),a}function oR(){var e=L4().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,s,i,o=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,p=a<n,g=p?a:n,x=p?n:a;s=(x-g)/Math.max(1,h-c+u*2),o&&(s=Math.floor(s)),g+=(x-g-s*(h-c))*d,i=s*(1-c),o&&(g=Math.round(g),i=Math.round(i));var b=QSe(h).map(function(y){return g+s*y});return r(p?b.reverse():b)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,o=!0,f()},e.bandwidth=function(){return i},e.step=function(){return s},e.round=function(h){return arguments.length?(o=!!h,f()):o},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return oR(t(),[n,a]).round(o).paddingInner(c).paddingOuter(u).align(d)},$u.apply(f(),arguments)}function lre(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return lre(t())},e}function HSe(){return lre(oR.apply(null,arguments).paddingInner(1))}function lR(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function cre(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function H2(){}var Qw=.7,EN=1/Qw,Ev="\\s*([+-]?\\d+)\\s*",Hw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",XA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",VSe=/^#([0-9a-f]{3,8})$/,zSe=new RegExp(`^rgb\\(${Ev},${Ev},${Ev}\\)$`),$Se=new RegExp(`^rgb\\(${XA},${XA},${XA}\\)$`),GSe=new RegExp(`^rgba\\(${Ev},${Ev},${Ev},${Hw}\\)$`),KSe=new RegExp(`^rgba\\(${XA},${XA},${XA},${Hw}\\)$`),qSe=new RegExp(`^hsl\\(${Hw},${XA},${XA}\\)$`),WSe=new RegExp(`^hsla\\(${Hw},${XA},${XA},${Hw}\\)$`),nz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};lR(H2,hg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:az,formatHex:az,formatHex8:XSe,formatHsl:YSe,formatRgb:sz,toString:sz});function az(){return this.rgb().formatHex()}function XSe(){return this.rgb().formatHex8()}function YSe(){return ure(this).formatHsl()}function sz(){return this.rgb().formatRgb()}function hg(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=VSe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?iz(t):r===3?new Xl(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?PC(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?PC(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=zSe.exec(e))?new Xl(t[1],t[2],t[3],1):(t=$Se.exec(e))?new Xl(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=GSe.exec(e))?PC(t[1],t[2],t[3],t[4]):(t=KSe.exec(e))?PC(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=qSe.exec(e))?cz(t[1],t[2]/100,t[3]/100,1):(t=WSe.exec(e))?cz(t[1],t[2]/100,t[3]/100,t[4]):nz.hasOwnProperty(e)?iz(nz[e]):e==="transparent"?new Xl(NaN,NaN,NaN,0):null}function iz(e){return new Xl(e>>16&255,e>>8&255,e&255,1)}function PC(e,t,r,n){return n<=0&&(e=t=r=NaN),new Xl(e,t,r,n)}function JSe(e){return e instanceof H2||(e=hg(e)),e?(e=e.rgb(),new Xl(e.r,e.g,e.b,e.opacity)):new Xl}function pF(e,t,r,n){return arguments.length===1?JSe(e):new Xl(e,t,r,n??1)}function Xl(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}lR(Xl,pF,cre(H2,{brighter(e){return e=e==null?EN:Math.pow(EN,e),new Xl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Qw:Math.pow(Qw,e),new Xl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Xl(Gp(this.r),Gp(this.g),Gp(this.b),CN(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oz,formatHex:oz,formatHex8:ZSe,formatRgb:lz,toString:lz}));function oz(){return`#${Fp(this.r)}${Fp(this.g)}${Fp(this.b)}`}function ZSe(){return`#${Fp(this.r)}${Fp(this.g)}${Fp(this.b)}${Fp((isNaN(this.opacity)?1:this.opacity)*255)}`}function lz(){const e=CN(this.opacity);return`${e===1?"rgb(":"rgba("}${Gp(this.r)}, ${Gp(this.g)}, ${Gp(this.b)}${e===1?")":`, ${e})`}`}function CN(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Gp(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Fp(e){return e=Gp(e),(e<16?"0":"")+e.toString(16)}function cz(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ed(e,t,r,n)}function ure(e){if(e instanceof Ed)return new Ed(e.h,e.s,e.l,e.opacity);if(e instanceof H2||(e=hg(e)),!e)return new Ed;if(e instanceof Ed)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),i=NaN,o=s-a,c=(s+a)/2;return o?(t===s?i=(r-n)/o+(r<n)*6:r===s?i=(n-t)/o+2:i=(t-r)/o+4,o/=c<.5?s+a:2-s-a,i*=60):o=c>0&&c<1?0:i,new Ed(i,o,c,e.opacity)}function e4e(e,t,r,n){return arguments.length===1?ure(e):new Ed(e,t,r,n??1)}function Ed(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}lR(Ed,e4e,cre(H2,{brighter(e){return e=e==null?EN:Math.pow(EN,e),new Ed(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Qw:Math.pow(Qw,e),new Ed(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Xl(WT(e>=240?e-240:e+120,a,n),WT(e,a,n),WT(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Ed(uz(this.h),RC(this.s),RC(this.l),CN(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=CN(this.opacity);return`${e===1?"hsl(":"hsla("}${uz(this.h)}, ${RC(this.s)*100}%, ${RC(this.l)*100}%${e===1?")":`, ${e})`}`}}));function uz(e){return e=(e||0)%360,e<0?e+360:e}function RC(e){return Math.max(0,Math.min(1,e||0))}function WT(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const cR=e=>()=>e;function t4e(e,t){return function(r){return e+r*t}}function r4e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function n4e(e){return(e=+e)==1?dre:function(t,r){return r-t?r4e(t,r,e):cR(isNaN(t)?r:t)}}function dre(e,t){var r=t-e;return r?t4e(e,r):cR(isNaN(e)?t:e)}const _N=function e(t){var r=n4e(t);function n(a,s){var i=r((a=pF(a)).r,(s=pF(s)).r),o=r(a.g,s.g),c=r(a.b,s.b),u=dre(a.opacity,s.opacity);return function(d){return a.r=i(d),a.g=o(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function a4e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=e[a]*(1-s)+t[a]*s;return n}}function s4e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function i4e(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),s=new Array(r),i;for(i=0;i<n;++i)a[i]=Q1(e[i],t[i]);for(;i<r;++i)s[i]=t[i];return function(o){for(i=0;i<n;++i)s[i]=a[i](o);return s}}function o4e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function yd(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function l4e(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Q1(e[a],t[a]):n[a]=t[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var gF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,XT=new RegExp(gF.source,"g");function c4e(e){return function(){return e}}function u4e(e){return function(t){return e(t)+""}}function Are(e,t){var r=gF.lastIndex=XT.lastIndex=0,n,a,s,i=-1,o=[],c=[];for(e=e+"",t=t+"";(n=gF.exec(e))&&(a=XT.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),o[i]?o[i]+=s:o[++i]=s),(n=n[0])===(a=a[0])?o[i]?o[i]+=a:o[++i]=a:(o[++i]=null,c.push({i,x:yd(n,a)})),r=XT.lastIndex;return r<t.length&&(s=t.slice(r),o[i]?o[i]+=s:o[++i]=s),o.length<2?c[0]?u4e(c[0].x):c4e(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)o[(f=c[d]).i]=f.x(u);return o.join("")})}function Q1(e,t){var r=typeof t,n;return t==null||r==="boolean"?cR(t):(r==="number"?yd:r==="string"?(n=hg(t))?(t=n,_N):Are:t instanceof hg?_N:t instanceof Date?o4e:s4e(t)?a4e:Array.isArray(t)?i4e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?l4e:yd)(e,t)}function uR(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var dz=180/Math.PI,xF={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fre(e,t,r,n,a,s){var i,o,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*r+t*n)&&(r-=e*c,n-=t*c),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,c/=o),e*n<t*r&&(e=-e,t=-t,c=-c,i=-i),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*dz,skewX:Math.atan(c)*dz,scaleX:i,scaleY:o}}var LC;function d4e(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?xF:fre(t.a,t.b,t.c,t.d,t.e,t.f)}function A4e(e){return e==null||(LC||(LC=document.createElementNS("http://www.w3.org/2000/svg","g")),LC.setAttribute("transform",e),!(e=LC.transform.baseVal.consolidate()))?xF:(e=e.matrix,fre(e.a,e.b,e.c,e.d,e.e,e.f))}function hre(e,t,r,n){function a(u){return u.length?u.pop()+" ":""}function s(u,d,f,h,p,g){if(u!==f||d!==h){var x=p.push("translate(",null,t,null,r);g.push({i:x-4,x:yd(u,f)},{i:x-2,x:yd(d,h)})}else(f||h)&&p.push("translate("+f+t+h+r)}function i(u,d,f,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:f.push(a(f)+"rotate(",null,n)-2,x:yd(u,d)})):d&&f.push(a(f)+"rotate("+d+n)}function o(u,d,f,h){u!==d?h.push({i:f.push(a(f)+"skewX(",null,n)-2,x:yd(u,d)}):d&&f.push(a(f)+"skewX("+d+n)}function c(u,d,f,h,p,g){if(u!==f||d!==h){var x=p.push(a(p)+"scale(",null,",",null,")");g.push({i:x-4,x:yd(u,f)},{i:x-2,x:yd(d,h)})}else(f!==1||h!==1)&&p.push(a(p)+"scale("+f+","+h+")")}return function(u,d){var f=[],h=[];return u=e(u),d=e(d),s(u.translateX,u.translateY,d.translateX,d.translateY,f,h),i(u.rotate,d.rotate,f,h),o(u.skewX,d.skewX,f,h),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,h),u=d=null,function(p){for(var g=-1,x=h.length,b;++g<x;)f[(b=h[g]).i]=b.x(p);return f.join("")}}}var f4e=hre(d4e,"px, ","px)","deg)"),h4e=hre(A4e,", ",")",")"),m4e=1e-12;function Az(e){return((e=Math.exp(e))+1/e)/2}function p4e(e){return((e=Math.exp(e))-1/e)/2}function g4e(e){return((e=Math.exp(2*e))-1)/(e+1)}const x4e=function e(t,r,n){function a(s,i){var o=s[0],c=s[1],u=s[2],d=i[0],f=i[1],h=i[2],p=d-o,g=f-c,x=p*p+g*g,b,y;if(x<m4e)y=Math.log(h/u)/t,b=function(E){return[o+E*p,c+E*g,u*Math.exp(t*E*y)]};else{var w=Math.sqrt(x),_=(h*h-u*u+n*x)/(2*u*r*w),B=(h*h-u*u-n*x)/(2*h*r*w),k=Math.log(Math.sqrt(_*_+1)-_),I=Math.log(Math.sqrt(B*B+1)-B);y=(I-k)/t,b=function(E){var N=E*y,j=Az(k),R=u/(r*w)*(j*g4e(t*N+k)-p4e(k));return[o+R*p,c+R*g,u*j/Az(t*N+k)]}}return b.duration=y*1e3*t/Math.SQRT2,b}return a.rho=function(s){var i=Math.max(.001,+s),o=i*i,c=o*o;return e(i,o,c)},a}(Math.SQRT2,2,4);function v4e(e,t){t===void 0&&(t=e,e=Q1);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(i){var o=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return s[o](i-o)}}function b4e(e){return function(){return e}}function NN(e){return+e}var fz=[0,1];function vl(e){return e}function vF(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:b4e(isNaN(t)?NaN:.5)}function y4e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function w4e(e,t,r){var n=e[0],a=e[1],s=t[0],i=t[1];return a<n?(n=vF(a,n),s=r(i,s)):(n=vF(n,a),s=r(s,i)),function(o){return s(n(o))}}function E4e(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)a[i]=vF(e[i],e[i+1]),s[i]=r(t[i],t[i+1]);return function(o){var c=Q2(e,o,1,n)-1;return s[c](a[c](o))}}function V2(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function M4(){var e=fz,t=fz,r=Q1,n,a,s,i=vl,o,c,u;function d(){var h=Math.min(e.length,t.length);return i!==vl&&(i=y4e(e[0],e[h-1])),o=h>2?E4e:w4e,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=o(e.map(n),t,r)))(n(i(h)))}return f.invert=function(h){return i(a((u||(u=o(t,e.map(n),yd)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,NN),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=uR,d()},f.clamp=function(h){return arguments.length?(i=h?!0:vl,d()):i!==vl},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,p){return n=h,a=p,d()}}function dR(){return M4()(vl,vl)}function C4e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function SN(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function e1(e){return e=SN(Math.abs(e)),e?e[1]:NaN}function _4e(e,t){return function(r,n){for(var a=r.length,s=[],i=0,o=e[0],c=0;a>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),s.push(r.substring(a-=o,a+o)),!((c+=o+1)>n));)o=e[i=(i+1)%e.length];return s.reverse().join(t)}}function N4e(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var S4e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vw(e){if(!(t=S4e.exec(e)))throw new Error("invalid format: "+e);var t;return new AR({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Vw.prototype=AR.prototype;function AR(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}AR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function k4e(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var mre;function B4e(e,t){var r=SN(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(mre=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=n.length;return s===i?n:s>i?n+new Array(s-i+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+SN(e,Math.max(0,t+s-1))[0]}function hz(e,t){var r=SN(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const mz={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:C4e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>hz(e*100,t),r:hz,s:B4e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function pz(e){return e}var gz=Array.prototype.map,xz=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function j4e(e){var t=e.grouping===void 0||e.thousands===void 0?pz:_4e(gz.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?pz:N4e(gz.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Vw(f);var h=f.fill,p=f.align,g=f.sign,x=f.symbol,b=f.zero,y=f.width,w=f.comma,_=f.precision,B=f.trim,k=f.type;k==="n"?(w=!0,k="g"):mz[k]||(_===void 0&&(_=12),B=!0,k="g"),(b||h==="0"&&p==="=")&&(b=!0,h="0",p="=");var I=x==="$"?r:x==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",E=x==="$"?n:/[%p]/.test(k)?i:"",N=mz[k],j=/[defgprs%]/.test(k);_=_===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function R(D){var O=I,L=E,M,J,V;if(k==="c")L=N(D)+L,D="";else{D=+D;var K=D<0||1/D<0;if(D=isNaN(D)?c:N(Math.abs(D),_),B&&(D=k4e(D)),K&&+D==0&&g!=="+"&&(K=!1),O=(K?g==="("?g:o:g==="-"||g==="("?"":g)+O,L=(k==="s"?xz[8+mre/3]:"")+L+(K&&g==="("?")":""),j){for(M=-1,J=D.length;++M<J;)if(V=D.charCodeAt(M),48>V||V>57){L=(V===46?a+D.slice(M+1):D.slice(M))+L,D=D.slice(0,M);break}}}w&&!b&&(D=t(D,1/0));var z=O.length+D.length+L.length,G=z<y?new Array(y-z+1).join(h):"";switch(w&&b&&(D=t(G+D,G.length?y-L.length:1/0),G=""),p){case"<":D=O+D+L+G;break;case"=":D=O+G+D+L;break;case"^":D=G.slice(0,z=G.length>>1)+O+D+L+G.slice(z);break;default:D=G+O+D+L;break}return s(D)}return R.toString=function(){return f+""},R}function d(f,h){var p=u((f=Vw(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(e1(h)/3)))*3,x=Math.pow(10,-g),b=xz[8+g/3];return function(y){return p(x*y)+b}}return{format:u,formatPrefix:d}}var MC,fR,pre;T4e({thousands:",",grouping:[3],currency:["$",""]});function T4e(e){return MC=j4e(e),fR=MC.format,pre=MC.formatPrefix,MC}function I4e(e){return Math.max(0,-e1(Math.abs(e)))}function F4e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(e1(t)/3)))*3-e1(Math.abs(e)))}function O4e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,e1(t)-e1(e))+1}function gre(e,t,r,n){var a=hF(e,t,r),s;switch(n=Vw(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=F4e(a,i))&&(n.precision=s),pre(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=O4e(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=I4e(a))&&(n.precision=s-(n.type==="%")*2);break}}return fR(n)}function Pm(e){var t=e.domain;return e.ticks=function(r){var n=t();return AF(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return gre(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,s=n.length-1,i=n[a],o=n[s],c,u,d=10;for(o<i&&(u=i,i=o,o=u,u=a,a=s,s=u);d-- >0;){if(u=fF(i,o,r),u===c)return n[a]=i,n[s]=o,t(n);if(u>0)i=Math.floor(i/u)*u,o=Math.ceil(o/u)*u;else if(u<0)i=Math.ceil(i*u)/u,o=Math.floor(o*u)/u;else break;c=u}return e},e}function xre(){var e=dR();return e.copy=function(){return V2(e,xre())},$u.apply(e,arguments),Pm(e)}function vre(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,NN),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return vre(e).unknown(t)},e=arguments.length?Array.from(e,NN):[0,1],Pm(r)}function bre(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],s=e[n],i;return s<a&&(i=r,r=n,n=i,i=a,a=s,s=i),e[r]=t.floor(a),e[n]=t.ceil(s),e}function vz(e){return Math.log(e)}function bz(e){return Math.exp(e)}function D4e(e){return-Math.log(-e)}function P4e(e){return-Math.exp(-e)}function R4e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function L4e(e){return e===10?R4e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function M4e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function yz(e){return(t,r)=>-e(-t,r)}function hR(e){const t=e(vz,bz),r=t.domain;let n=10,a,s;function i(){return a=M4e(n),s=L4e(n),r()[0]<0?(a=yz(a),s=yz(s),e(D4e,P4e)):e(vz,bz),t}return t.base=function(o){return arguments.length?(n=+o,i()):n},t.domain=function(o){return arguments.length?(r(o),i()):r()},t.ticks=o=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),p=a(d),g,x;const b=o==null?10:+o;let y=[];if(!(n%1)&&p-h<b){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(g=1;g<n;++g)if(x=h<0?g/s(-h):g*s(h),!(x<u)){if(x>d)break;y.push(x)}}else for(;h<=p;++h)for(g=n-1;g>=1;--g)if(x=h>0?g/s(-h):g*s(h),!(x<u)){if(x>d)break;y.push(x)}y.length*2<b&&(y=AF(u,d,b))}else y=AF(h,p,Math.min(p-h,b)).map(s);return f?y.reverse():y},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Vw(c)).precision==null&&(c.trim=!0),c=fR(c)),o===1/0)return c;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(bre(r(),{floor:o=>s(Math.floor(a(o))),ceil:o=>s(Math.ceil(a(o)))})),t}function yre(){const e=hR(M4()).domain([1,10]);return e.copy=()=>V2(e,yre()).base(e.base()),$u.apply(e,arguments),e}function wz(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Ez(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function mR(e){var t=1,r=e(wz(t),Ez(t));return r.constant=function(n){return arguments.length?e(wz(t=+n),Ez(t)):t},Pm(r)}function wre(){var e=mR(M4());return e.copy=function(){return V2(e,wre()).constant(e.constant())},$u.apply(e,arguments)}function Cz(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function U4e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Q4e(e){return e<0?-e*e:e*e}function pR(e){var t=e(vl,vl),r=1;function n(){return r===1?e(vl,vl):r===.5?e(U4e,Q4e):e(Cz(r),Cz(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Pm(t)}function gR(){var e=pR(M4());return e.copy=function(){return V2(e,gR()).exponent(e.exponent())},$u.apply(e,arguments),e}function H4e(){return gR.apply(null,arguments).exponent(.5)}function _z(e){return Math.sign(e)*e*e}function V4e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Ere(){var e=dR(),t=[0,1],r=!1,n;function a(s){var i=V4e(e(s));return isNaN(i)?n:r?Math.round(i):i}return a.invert=function(s){return e.invert(_z(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,NN)).map(_z)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Ere(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},$u.apply(a,arguments),Pm(a)}function Cre(){var e=[],t=[],r=[],n;function a(){var i=0,o=Math.max(1,t.length);for(r=new Array(o-1);++i<o;)r[i-1]=USe(e,i/o);return s}function s(i){return i==null||isNaN(i=+i)?n:t[Q2(r,i)]}return s.invertExtent=function(i){var o=t.indexOf(i);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},s.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let o of i)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(am),a()},s.range=function(i){return arguments.length?(t=Array.from(i),a()):t.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return Cre().domain(e).range(t).unknown(n)},$u.apply(s,arguments)}function _re(){var e=0,t=1,r=1,n=[.5],a=[0,1],s;function i(c){return c!=null&&c<=c?a[Q2(n,c,0,r)]:s}function o(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return i}return i.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},i.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,o()):a.slice()},i.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},i.unknown=function(c){return arguments.length&&(s=c),i},i.thresholds=function(){return n.slice()},i.copy=function(){return _re().domain([e,t]).range(a).unknown(s)},$u.apply(Pm(i),arguments)}function Nre(){var e=[.5],t=[0,1],r,n=1;function a(s){return s!=null&&s<=s?t[Q2(e,s,0,n)]:r}return a.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var i=t.indexOf(s);return[e[i-1],e[i]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return Nre().domain(e).range(t).unknown(r)},$u.apply(a,arguments)}const YT=new Date,JT=new Date;function Bi(e,t,r,n){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const i=a(s),o=a.ceil(s);return s-i<o-s?i:o},a.offset=(s,i)=>(t(s=new Date(+s),i==null?1:Math.floor(i)),s),a.range=(s,i,o)=>{const c=[];if(s=a.ceil(s),o=o==null?1:Math.floor(o),!(s<i)||!(o>0))return c;let u;do c.push(u=new Date(+s)),t(s,o),e(s);while(u<s&&s<i);return c},a.filter=s=>Bi(i=>{if(i>=i)for(;e(i),!s(i);)i.setTime(i-1)},(i,o)=>{if(i>=i)if(o<0)for(;++o<=0;)for(;t(i,-1),!s(i););else for(;--o>=0;)for(;t(i,1),!s(i););}),r&&(a.count=(s,i)=>(YT.setTime(+s),JT.setTime(+i),e(YT),e(JT),Math.floor(r(YT,JT))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?i=>n(i)%s===0:i=>a.count(0,i)%s===0):a)),a}const kN=Bi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);kN.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Bi(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):kN);kN.range;const Jf=1e3,Iu=Jf*60,Zf=Iu*60,xh=Zf*24,xR=xh*7,Nz=xh*30,ZT=xh*365,Op=Bi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Jf)},(e,t)=>(t-e)/Jf,e=>e.getUTCSeconds());Op.range;const vR=Bi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Jf)},(e,t)=>{e.setTime(+e+t*Iu)},(e,t)=>(t-e)/Iu,e=>e.getMinutes());vR.range;const bR=Bi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Iu)},(e,t)=>(t-e)/Iu,e=>e.getUTCMinutes());bR.range;const yR=Bi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Jf-e.getMinutes()*Iu)},(e,t)=>{e.setTime(+e+t*Zf)},(e,t)=>(t-e)/Zf,e=>e.getHours());yR.range;const wR=Bi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Zf)},(e,t)=>(t-e)/Zf,e=>e.getUTCHours());wR.range;const z2=Bi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Iu)/xh,e=>e.getDate()-1);z2.range;const U4=Bi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xh,e=>e.getUTCDate()-1);U4.range;const Sre=Bi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xh,e=>Math.floor(e/xh));Sre.range;function Og(e){return Bi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Iu)/xR)}const Q4=Og(0),BN=Og(1),z4e=Og(2),$4e=Og(3),t1=Og(4),G4e=Og(5),K4e=Og(6);Q4.range;BN.range;z4e.range;$4e.range;t1.range;G4e.range;K4e.range;function Dg(e){return Bi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/xR)}const H4=Dg(0),jN=Dg(1),q4e=Dg(2),W4e=Dg(3),r1=Dg(4),X4e=Dg(5),Y4e=Dg(6);H4.range;jN.range;q4e.range;W4e.range;r1.range;X4e.range;Y4e.range;const ER=Bi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());ER.range;const CR=Bi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());CR.range;const vh=Bi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());vh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Bi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});vh.range;const bh=Bi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());bh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Bi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});bh.range;function kre(e,t,r,n,a,s){const i=[[Op,1,Jf],[Op,5,5*Jf],[Op,15,15*Jf],[Op,30,30*Jf],[s,1,Iu],[s,5,5*Iu],[s,15,15*Iu],[s,30,30*Iu],[a,1,Zf],[a,3,3*Zf],[a,6,6*Zf],[a,12,12*Zf],[n,1,xh],[n,2,2*xh],[r,1,xR],[t,1,Nz],[t,3,3*Nz],[e,1,ZT]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:c(u,d,f),g=p?p.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,p=iR(([,,b])=>b).right(i,h);if(p===i.length)return e.every(hF(u/ZT,d/ZT,f));if(p===0)return kN.every(Math.max(hF(u,d,f),1));const[g,x]=i[h/i[p-1][2]<i[p][2]/h?p-1:p];return g.every(x)}return[o,c]}const[J4e,Z4e]=kre(bh,CR,H4,Sre,wR,bR),[eke,tke]=kre(vh,ER,Q4,z2,yR,vR);function e3(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function t3(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Zb(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function rke(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,i=e.shortDays,o=e.months,c=e.shortMonths,u=ey(a),d=ty(a),f=ey(s),h=ty(s),p=ey(i),g=ty(i),x=ey(o),b=ty(o),y=ey(c),w=ty(c),_={a:K,A:z,b:G,B:Y,c:null,d:Iz,e:Iz,f:_ke,g:Dke,G:Rke,H:wke,I:Eke,j:Cke,L:Bre,m:Nke,M:Ske,p:ee,q:P,Q:Dz,s:Pz,S:kke,u:Bke,U:jke,V:Tke,w:Ike,W:Fke,x:null,X:null,y:Oke,Y:Pke,Z:Lke,"%":Oz},B={a:Q,A:X,b:te,B:ae,c:null,d:Fz,e:Fz,f:Hke,g:Jke,G:eBe,H:Mke,I:Uke,j:Qke,L:Tre,m:Vke,M:zke,p:se,q:oe,Q:Dz,s:Pz,S:$ke,u:Gke,U:Kke,V:qke,w:Wke,W:Xke,x:null,X:null,y:Yke,Y:Zke,Z:tBe,"%":Oz},k={a:R,A:D,b:O,B:L,c:M,d:jz,e:jz,f:xke,g:Bz,G:kz,H:Tz,I:Tz,j:hke,L:gke,m:fke,M:mke,p:j,q:Ake,Q:bke,s:yke,S:pke,u:oke,U:lke,V:cke,w:ike,W:uke,x:J,X:V,y:Bz,Y:kz,Z:dke,"%":vke};_.x=I(r,_),_.X=I(n,_),_.c=I(t,_),B.x=I(r,B),B.X=I(n,B),B.c=I(t,B);function I(ce,me){return function(ke){var ne=[],_e=-1,De=0,Ne=ce.length,fe,Ie,Me;for(ke instanceof Date||(ke=new Date(+ke));++_e<Ne;)ce.charCodeAt(_e)===37&&(ne.push(ce.slice(De,_e)),(Ie=Sz[fe=ce.charAt(++_e)])!=null?fe=ce.charAt(++_e):Ie=fe==="e"?" ":"0",(Me=me[fe])&&(fe=Me(ke,Ie)),ne.push(fe),De=_e+1);return ne.push(ce.slice(De,_e)),ne.join("")}}function E(ce,me){return function(ke){var ne=Zb(1900,void 0,1),_e=N(ne,ce,ke+="",0),De,Ne;if(_e!=ke.length)return null;if("Q"in ne)return new Date(ne.Q);if("s"in ne)return new Date(ne.s*1e3+("L"in ne?ne.L:0));if(me&&!("Z"in ne)&&(ne.Z=0),"p"in ne&&(ne.H=ne.H%12+ne.p*12),ne.m===void 0&&(ne.m="q"in ne?ne.q:0),"V"in ne){if(ne.V<1||ne.V>53)return null;"w"in ne||(ne.w=1),"Z"in ne?(De=t3(Zb(ne.y,0,1)),Ne=De.getUTCDay(),De=Ne>4||Ne===0?jN.ceil(De):jN(De),De=U4.offset(De,(ne.V-1)*7),ne.y=De.getUTCFullYear(),ne.m=De.getUTCMonth(),ne.d=De.getUTCDate()+(ne.w+6)%7):(De=e3(Zb(ne.y,0,1)),Ne=De.getDay(),De=Ne>4||Ne===0?BN.ceil(De):BN(De),De=z2.offset(De,(ne.V-1)*7),ne.y=De.getFullYear(),ne.m=De.getMonth(),ne.d=De.getDate()+(ne.w+6)%7)}else("W"in ne||"U"in ne)&&("w"in ne||(ne.w="u"in ne?ne.u%7:"W"in ne?1:0),Ne="Z"in ne?t3(Zb(ne.y,0,1)).getUTCDay():e3(Zb(ne.y,0,1)).getDay(),ne.m=0,ne.d="W"in ne?(ne.w+6)%7+ne.W*7-(Ne+5)%7:ne.w+ne.U*7-(Ne+6)%7);return"Z"in ne?(ne.H+=ne.Z/100|0,ne.M+=ne.Z%100,t3(ne)):e3(ne)}}function N(ce,me,ke,ne){for(var _e=0,De=me.length,Ne=ke.length,fe,Ie;_e<De;){if(ne>=Ne)return-1;if(fe=me.charCodeAt(_e++),fe===37){if(fe=me.charAt(_e++),Ie=k[fe in Sz?me.charAt(_e++):fe],!Ie||(ne=Ie(ce,ke,ne))<0)return-1}else if(fe!=ke.charCodeAt(ne++))return-1}return ne}function j(ce,me,ke){var ne=u.exec(me.slice(ke));return ne?(ce.p=d.get(ne[0].toLowerCase()),ke+ne[0].length):-1}function R(ce,me,ke){var ne=p.exec(me.slice(ke));return ne?(ce.w=g.get(ne[0].toLowerCase()),ke+ne[0].length):-1}function D(ce,me,ke){var ne=f.exec(me.slice(ke));return ne?(ce.w=h.get(ne[0].toLowerCase()),ke+ne[0].length):-1}function O(ce,me,ke){var ne=y.exec(me.slice(ke));return ne?(ce.m=w.get(ne[0].toLowerCase()),ke+ne[0].length):-1}function L(ce,me,ke){var ne=x.exec(me.slice(ke));return ne?(ce.m=b.get(ne[0].toLowerCase()),ke+ne[0].length):-1}function M(ce,me,ke){return N(ce,t,me,ke)}function J(ce,me,ke){return N(ce,r,me,ke)}function V(ce,me,ke){return N(ce,n,me,ke)}function K(ce){return i[ce.getDay()]}function z(ce){return s[ce.getDay()]}function G(ce){return c[ce.getMonth()]}function Y(ce){return o[ce.getMonth()]}function ee(ce){return a[+(ce.getHours()>=12)]}function P(ce){return 1+~~(ce.getMonth()/3)}function Q(ce){return i[ce.getUTCDay()]}function X(ce){return s[ce.getUTCDay()]}function te(ce){return c[ce.getUTCMonth()]}function ae(ce){return o[ce.getUTCMonth()]}function se(ce){return a[+(ce.getUTCHours()>=12)]}function oe(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var me=I(ce+="",_);return me.toString=function(){return ce},me},parse:function(ce){var me=E(ce+="",!1);return me.toString=function(){return ce},me},utcFormat:function(ce){var me=I(ce+="",B);return me.toString=function(){return ce},me},utcParse:function(ce){var me=E(ce+="",!0);return me.toString=function(){return ce},me}}}var Sz={"-":"",_:" ",0:"0"},Zi=/^\s*\d+/,nke=/^%/,ake=/[\\^$*+?|[\]().{}]/g;function Yn(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function ske(e){return e.replace(ake,"\\$&")}function ey(e){return new RegExp("^(?:"+e.map(ske).join("|")+")","i")}function ty(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function ike(e,t,r){var n=Zi.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function oke(e,t,r){var n=Zi.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function lke(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function cke(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function uke(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function kz(e,t,r){var n=Zi.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function Bz(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function dke(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Ake(e,t,r){var n=Zi.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function fke(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function jz(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function hke(e,t,r){var n=Zi.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function Tz(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function mke(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function pke(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function gke(e,t,r){var n=Zi.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function xke(e,t,r){var n=Zi.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function vke(e,t,r){var n=nke.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function bke(e,t,r){var n=Zi.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function yke(e,t,r){var n=Zi.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function Iz(e,t){return Yn(e.getDate(),t,2)}function wke(e,t){return Yn(e.getHours(),t,2)}function Eke(e,t){return Yn(e.getHours()%12||12,t,2)}function Cke(e,t){return Yn(1+z2.count(vh(e),e),t,3)}function Bre(e,t){return Yn(e.getMilliseconds(),t,3)}function _ke(e,t){return Bre(e,t)+"000"}function Nke(e,t){return Yn(e.getMonth()+1,t,2)}function Ske(e,t){return Yn(e.getMinutes(),t,2)}function kke(e,t){return Yn(e.getSeconds(),t,2)}function Bke(e){var t=e.getDay();return t===0?7:t}function jke(e,t){return Yn(Q4.count(vh(e)-1,e),t,2)}function jre(e){var t=e.getDay();return t>=4||t===0?t1(e):t1.ceil(e)}function Tke(e,t){return e=jre(e),Yn(t1.count(vh(e),e)+(vh(e).getDay()===4),t,2)}function Ike(e){return e.getDay()}function Fke(e,t){return Yn(BN.count(vh(e)-1,e),t,2)}function Oke(e,t){return Yn(e.getFullYear()%100,t,2)}function Dke(e,t){return e=jre(e),Yn(e.getFullYear()%100,t,2)}function Pke(e,t){return Yn(e.getFullYear()%1e4,t,4)}function Rke(e,t){var r=e.getDay();return e=r>=4||r===0?t1(e):t1.ceil(e),Yn(e.getFullYear()%1e4,t,4)}function Lke(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Yn(t/60|0,"0",2)+Yn(t%60,"0",2)}function Fz(e,t){return Yn(e.getUTCDate(),t,2)}function Mke(e,t){return Yn(e.getUTCHours(),t,2)}function Uke(e,t){return Yn(e.getUTCHours()%12||12,t,2)}function Qke(e,t){return Yn(1+U4.count(bh(e),e),t,3)}function Tre(e,t){return Yn(e.getUTCMilliseconds(),t,3)}function Hke(e,t){return Tre(e,t)+"000"}function Vke(e,t){return Yn(e.getUTCMonth()+1,t,2)}function zke(e,t){return Yn(e.getUTCMinutes(),t,2)}function $ke(e,t){return Yn(e.getUTCSeconds(),t,2)}function Gke(e){var t=e.getUTCDay();return t===0?7:t}function Kke(e,t){return Yn(H4.count(bh(e)-1,e),t,2)}function Ire(e){var t=e.getUTCDay();return t>=4||t===0?r1(e):r1.ceil(e)}function qke(e,t){return e=Ire(e),Yn(r1.count(bh(e),e)+(bh(e).getUTCDay()===4),t,2)}function Wke(e){return e.getUTCDay()}function Xke(e,t){return Yn(jN.count(bh(e)-1,e),t,2)}function Yke(e,t){return Yn(e.getUTCFullYear()%100,t,2)}function Jke(e,t){return e=Ire(e),Yn(e.getUTCFullYear()%100,t,2)}function Zke(e,t){return Yn(e.getUTCFullYear()%1e4,t,4)}function eBe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?r1(e):r1.ceil(e),Yn(e.getUTCFullYear()%1e4,t,4)}function tBe(){return"+0000"}function Oz(){return"%"}function Dz(e){return+e}function Pz(e){return Math.floor(+e/1e3)}var Ex,Fre,Ore;rBe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function rBe(e){return Ex=rke(e),Fre=Ex.format,Ex.parse,Ore=Ex.utcFormat,Ex.utcParse,Ex}function nBe(e){return new Date(e)}function aBe(e){return e instanceof Date?+e:+new Date(+e)}function _R(e,t,r,n,a,s,i,o,c,u){var d=dR(),f=d.invert,h=d.domain,p=u(".%L"),g=u(":%S"),x=u("%I:%M"),b=u("%I %p"),y=u("%a %d"),w=u("%b %d"),_=u("%B"),B=u("%Y");function k(I){return(c(I)<I?p:o(I)<I?g:i(I)<I?x:s(I)<I?b:n(I)<I?a(I)<I?y:w:r(I)<I?_:B)(I)}return d.invert=function(I){return new Date(f(I))},d.domain=function(I){return arguments.length?h(Array.from(I,aBe)):h().map(nBe)},d.ticks=function(I){var E=h();return e(E[0],E[E.length-1],I??10)},d.tickFormat=function(I,E){return E==null?k:u(E)},d.nice=function(I){var E=h();return(!I||typeof I.range!="function")&&(I=t(E[0],E[E.length-1],I??10)),I?h(bre(E,I)):d},d.copy=function(){return V2(d,_R(e,t,r,n,a,s,i,o,c,u))},d}function sBe(){return $u.apply(_R(eke,tke,vh,ER,Q4,z2,yR,vR,Op,Fre).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function iBe(){return $u.apply(_R(J4e,Z4e,bh,CR,H4,U4,wR,bR,Op,Ore).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function V4(){var e=0,t=1,r,n,a,s,i=vl,o=!1,c;function u(f){return f==null||isNaN(f=+f)?c:i(a===0?.5:(f=(s(f)-r)*a,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=s(e=+e),n=s(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(i=f,u):i};function d(f){return function(h){var p,g;return arguments.length?([p,g]=h,i=f(p,g),u):[i(0),i(1)]}}return u.range=d(Q1),u.rangeRound=d(uR),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function Rm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Dre(){var e=Pm(V4()(vl));return e.copy=function(){return Rm(e,Dre())},Fh.apply(e,arguments)}function Pre(){var e=hR(V4()).domain([1,10]);return e.copy=function(){return Rm(e,Pre()).base(e.base())},Fh.apply(e,arguments)}function Rre(){var e=mR(V4());return e.copy=function(){return Rm(e,Rre()).constant(e.constant())},Fh.apply(e,arguments)}function NR(){var e=pR(V4());return e.copy=function(){return Rm(e,NR()).exponent(e.exponent())},Fh.apply(e,arguments)}function oBe(){return NR.apply(null,arguments).exponent(.5)}function Lre(){var e=[],t=vl;function r(n){if(n!=null&&!isNaN(n=+n))return t((Q2(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(am),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>MSe(e,s/n))},r.copy=function(){return Lre(t).domain(e)},Fh.apply(r,arguments)}function z4(){var e=0,t=.5,r=1,n=1,a,s,i,o,c,u=vl,d,f=!1,h;function p(x){return isNaN(x=+x)?h:(x=.5+((x=+d(x))-s)*(n*x<n*s?o:c),u(f?Math.max(0,Math.min(1,x)):x))}p.domain=function(x){return arguments.length?([e,t,r]=x,a=d(e=+e),s=d(t=+t),i=d(r=+r),o=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,p):[e,t,r]},p.clamp=function(x){return arguments.length?(f=!!x,p):f},p.interpolator=function(x){return arguments.length?(u=x,p):u};function g(x){return function(b){var y,w,_;return arguments.length?([y,w,_]=b,u=v4e(x,[y,w,_]),p):[u(0),u(.5),u(1)]}}return p.range=g(Q1),p.rangeRound=g(uR),p.unknown=function(x){return arguments.length?(h=x,p):h},function(x){return d=x,a=x(e),s=x(t),i=x(r),o=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,p}}function Mre(){var e=Pm(z4()(vl));return e.copy=function(){return Rm(e,Mre())},Fh.apply(e,arguments)}function Ure(){var e=hR(z4()).domain([.1,1,10]);return e.copy=function(){return Rm(e,Ure()).base(e.base())},Fh.apply(e,arguments)}function Qre(){var e=mR(z4());return e.copy=function(){return Rm(e,Qre()).constant(e.constant())},Fh.apply(e,arguments)}function SR(){var e=pR(z4());return e.copy=function(){return Rm(e,SR()).exponent(e.exponent())},Fh.apply(e,arguments)}function lBe(){return SR.apply(null,arguments).exponent(.5)}const Ty=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:oR,scaleDiverging:Mre,scaleDivergingLog:Ure,scaleDivergingPow:SR,scaleDivergingSqrt:lBe,scaleDivergingSymlog:Qre,scaleIdentity:vre,scaleImplicit:mF,scaleLinear:xre,scaleLog:yre,scaleOrdinal:L4,scalePoint:HSe,scalePow:gR,scaleQuantile:Cre,scaleQuantize:_re,scaleRadial:Ere,scaleSequential:Dre,scaleSequentialLog:Pre,scaleSequentialPow:NR,scaleSequentialQuantile:Lre,scaleSequentialSqrt:oBe,scaleSequentialSymlog:Rre,scaleSqrt:H4e,scaleSymlog:wre,scaleThreshold:Nre,scaleTime:sBe,scaleUtc:iBe,tickFormat:gre},Symbol.toStringTag,{value:"Module"}));var Lm=e=>e.chartData,$4=ut([Lm],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),kR=(e,t,r,n)=>n?$4(e):Lm(e);function n1(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Vc(t)&&Vc(r))return!0}return!1}function Rz(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function cBe(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,s;if(Vc(r))a=r;else if(typeof r=="function")return;if(Vc(n))s=n;else if(typeof n=="function")return;var i=[a,s];if(n1(i))return i}}function uBe(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(n1(n))return Rz(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,s]=e,i,o;if(a==="auto")t!=null&&(i=Math.min(...t));else if(ur(a))i=a;else if(typeof a=="function")try{t!=null&&(i=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&EV.test(a)){var c=EV.exec(a);if(c==null||t==null)i=void 0;else{var u=+c[1];i=t[0]-u}}else i=t==null?void 0:t[0];if(s==="auto")t!=null&&(o=Math.max(...t));else if(ur(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&CV.test(s)){var d=CV.exec(s);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t==null?void 0:t[1];var h=[i,o];if(n1(h))return t==null?h:Rz(h,t,r)}}}var H1=1e9,dBe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},jR,es=!0,Qu="[DecimalError] ",Kp=Qu+"Invalid argument: ",BR=Qu+"Exponent out of range: ",V1=Math.floor,yp=Math.pow,ABe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Fc,Vi=1e7,La=7,Hre=9007199254740991,TN=V1(Hre/La),Ar={};Ar.absoluteValue=Ar.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ar.comparedTo=Ar.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};Ar.decimalPlaces=Ar.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*La;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ar.dividedBy=Ar.div=function(e){return ih(this,new this.constructor(e))};Ar.dividedToIntegerBy=Ar.idiv=function(e){var t=this,r=t.constructor;return Sa(ih(t,new r(e),0,1),r.precision)};Ar.equals=Ar.eq=function(e){return!this.cmp(e)};Ar.exponent=function(){return hi(this)};Ar.greaterThan=Ar.gt=function(e){return this.cmp(e)>0};Ar.greaterThanOrEqualTo=Ar.gte=function(e){return this.cmp(e)>=0};Ar.isInteger=Ar.isint=function(){return this.e>this.d.length-2};Ar.isNegative=Ar.isneg=function(){return this.s<0};Ar.isPositive=Ar.ispos=function(){return this.s>0};Ar.isZero=function(){return this.s===0};Ar.lessThan=Ar.lt=function(e){return this.cmp(e)<0};Ar.lessThanOrEqualTo=Ar.lte=function(e){return this.cmp(e)<1};Ar.logarithm=Ar.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Fc))throw Error(Qu+"NaN");if(r.s<1)throw Error(Qu+(r.s?"NaN":"-Infinity"));return r.eq(Fc)?new n(0):(es=!1,t=ih(zw(r,s),zw(e,s),s),es=!0,Sa(t,a))};Ar.minus=Ar.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?$re(t,e):Vre(t,(e.s=-e.s,e))};Ar.modulo=Ar.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Qu+"NaN");return r.s?(es=!1,t=ih(r,e,0,1).times(e),es=!0,r.minus(t)):Sa(new n(r),a)};Ar.naturalExponential=Ar.exp=function(){return zre(this)};Ar.naturalLogarithm=Ar.ln=function(){return zw(this)};Ar.negated=Ar.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ar.plus=Ar.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Vre(t,e):$re(t,(e.s=-e.s,e))};Ar.precision=Ar.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Kp+e);if(t=hi(a)+1,n=a.d.length-1,r=n*La+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ar.squareRoot=Ar.sqrt=function(){var e,t,r,n,a,s,i,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Qu+"NaN")}for(e=hi(o),es=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=MA(o.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=V1((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=i=r+3;;)if(s=n,n=s.plus(ih(o,s,i+2)).times(.5),MA(s.d).slice(0,i)===(t=MA(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&t=="4999"){if(Sa(s,r+1,0),s.times(s).eq(o)){n=s;break}}else if(t!="9999")break;i+=4}return es=!0,Sa(n,r)};Ar.times=Ar.mul=function(e){var t,r,n,a,s,i,o,c,u,d=this,f=d.constructor,h=d.d,p=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=p.length,c<u&&(s=h,h=p,p=s,i=c,c=u,u=i),s=[],i=c+u,n=i;n--;)s.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)o=s[a]+p[n]*h[a-n-1]+t,s[a--]=o%Vi|0,t=o/Vi|0;s[a]=(s[a]+t)%Vi|0}for(;!s[--i];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,es?Sa(e,f.precision):e};Ar.toDecimalPlaces=Ar.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(rf(e,0,H1),t===void 0?t=n.rounding:rf(t,0,8),Sa(r,e+hi(r)+1,t))};Ar.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=mg(n,!0):(rf(e,0,H1),t===void 0?t=a.rounding:rf(t,0,8),n=Sa(new a(n),e+1,t),r=mg(n,!0,e+1)),r};Ar.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?mg(a):(rf(e,0,H1),t===void 0?t=s.rounding:rf(t,0,8),n=Sa(new s(a),e+hi(a)+1,t),r=mg(n.abs(),!1,e+hi(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Ar.toInteger=Ar.toint=function(){var e=this,t=e.constructor;return Sa(new t(e),hi(e)+1,t.rounding)};Ar.toNumber=function(){return+this};Ar.toPower=Ar.pow=function(e){var t,r,n,a,s,i,o=this,c=o.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Fc);if(o=new c(o),!o.s){if(e.s<1)throw Error(Qu+"Infinity");return o}if(o.eq(Fc))return o;if(n=c.precision,e.eq(Fc))return Sa(o,n);if(t=e.e,r=e.d.length-1,i=t>=r,s=o.s,i){if((r=d<0?-d:d)<=Hre){for(a=new c(Fc),t=Math.ceil(n/La+4),es=!1;r%2&&(a=a.times(o),Mz(a.d,t)),r=V1(r/2),r!==0;)o=o.times(o),Mz(o.d,t);return es=!0,e.s<0?new c(Fc).div(a):Sa(a,n)}}else if(s<0)throw Error(Qu+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,es=!1,a=e.times(zw(o,n+u)),es=!0,a=zre(a),a.s=s,a};Ar.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?(r=hi(a),n=mg(a,r<=s.toExpNeg||r>=s.toExpPos)):(rf(e,1,H1),t===void 0?t=s.rounding:rf(t,0,8),a=Sa(new s(a),e,t),r=hi(a),n=mg(a,e<=r||r<=s.toExpNeg,e)),n};Ar.toSignificantDigits=Ar.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(rf(e,1,H1),t===void 0?t=n.rounding:rf(t,0,8)),Sa(new n(r),e,t)};Ar.toString=Ar.valueOf=Ar.val=Ar.toJSON=Ar[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=hi(e),r=e.constructor;return mg(e,t<=r.toExpNeg||t>=r.toExpPos)};function Vre(e,t){var r,n,a,s,i,o,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),es?Sa(t,f):t;if(c=e.d,u=t.d,i=e.e,a=t.e,c=c.slice(),s=i-a,s){for(s<0?(n=c,s=-s,o=u.length):(n=u,a=i,o=c.length),i=Math.ceil(f/La),o=i>o?i+1:o+1,s>o&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(o=c.length,s=u.length,o-s<0&&(s=o,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/Vi|0,c[s]%=Vi;for(r&&(c.unshift(r),++a),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=a,es?Sa(t,f):t}function rf(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Kp+e)}function MA(e){var t,r,n,a=e.length-1,s="",i=e[0];if(a>0){for(s+=i,t=1;t<a;t++)n=e[t]+"",r=La-n.length,r&&(s+=I0(r)),s+=n;i=e[t],n=i+"",r=La-n.length,r&&(s+=I0(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return s+i}var ih=function(){function e(n,a){var s,i=0,o=n.length;for(n=n.slice();o--;)s=n[o]*a+i,n[o]=s%Vi|0,i=s/Vi|0;return i&&n.unshift(i),n}function t(n,a,s,i){var o,c;if(s!=i)c=s>i?1:-1;else for(o=c=0;o<s;o++)if(n[o]!=a[o]){c=n[o]>a[o]?1:-1;break}return c}function r(n,a,s){for(var i=0;s--;)n[s]-=i,i=n[s]<a[s]?1:0,n[s]=i*Vi+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,i){var o,c,u,d,f,h,p,g,x,b,y,w,_,B,k,I,E,N,j=n.constructor,R=n.s==a.s?1:-1,D=n.d,O=a.d;if(!n.s)return new j(n);if(!a.s)throw Error(Qu+"Division by zero");for(c=n.e-a.e,E=O.length,k=D.length,p=new j(R),g=p.d=[],u=0;O[u]==(D[u]||0);)++u;if(O[u]>(D[u]||0)&&--c,s==null?w=s=j.precision:i?w=s+(hi(n)-hi(a))+1:w=s,w<0)return new j(0);if(w=w/La+2|0,u=0,E==1)for(d=0,O=O[0],w++;(u<k||d)&&w--;u++)_=d*Vi+(D[u]||0),g[u]=_/O|0,d=_%O|0;else{for(d=Vi/(O[0]+1)|0,d>1&&(O=e(O,d),D=e(D,d),E=O.length,k=D.length),B=E,x=D.slice(0,E),b=x.length;b<E;)x[b++]=0;N=O.slice(),N.unshift(0),I=O[0],O[1]>=Vi/2&&++I;do d=0,o=t(O,x,E,b),o<0?(y=x[0],E!=b&&(y=y*Vi+(x[1]||0)),d=y/I|0,d>1?(d>=Vi&&(d=Vi-1),f=e(O,d),h=f.length,b=x.length,o=t(f,x,h,b),o==1&&(d--,r(f,E<h?N:O,h))):(d==0&&(o=d=1),f=O.slice()),h=f.length,h<b&&f.unshift(0),r(x,f,b),o==-1&&(b=x.length,o=t(O,x,E,b),o<1&&(d++,r(x,E<b?N:O,b))),b=x.length):o===0&&(d++,x=[0]),g[u++]=d,o&&x[0]?x[b++]=D[B]||0:(x=[D[B]],b=1);while((B++<k||x[0]!==void 0)&&w--)}return g[0]||g.shift(),p.e=c,Sa(p,i?s+hi(p)+1:s)}}();function zre(e,t){var r,n,a,s,i,o,c=0,u=0,d=e.constructor,f=d.precision;if(hi(e)>16)throw Error(BR+hi(e));if(!e.s)return new d(Fc);for(es=!1,o=f,i=new d(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(n=Math.log(yp(2,u))/Math.LN10*2+5|0,o+=n,r=a=s=new d(Fc),d.precision=o;;){if(a=Sa(a.times(e),o),r=r.times(++c),i=s.plus(ih(a,r,o)),MA(i.d).slice(0,o)===MA(s.d).slice(0,o)){for(;u--;)s=Sa(s.times(s),o);return d.precision=f,t==null?(es=!0,Sa(s,f)):s}s=i}}function hi(e){for(var t=e.e*La,r=e.d[0];r>=10;r/=10)t++;return t}function r3(e,t,r){if(t>e.LN10.sd())throw es=!0,r&&(e.precision=r),Error(Qu+"LN10 precision limit exceeded");return Sa(new e(e.LN10),t)}function I0(e){for(var t="";e--;)t+="0";return t}function zw(e,t){var r,n,a,s,i,o,c,u,d,f=1,h=10,p=e,g=p.d,x=p.constructor,b=x.precision;if(p.s<1)throw Error(Qu+(p.s?"NaN":"-Infinity"));if(p.eq(Fc))return new x(0);if(t==null?(es=!1,u=b):u=t,p.eq(10))return t==null&&(es=!0),r3(x,u);if(u+=h,x.precision=u,r=MA(g),n=r.charAt(0),s=hi(p),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=MA(p.d),n=r.charAt(0),f++;s=hi(p),n>1?(p=new x("0."+r),s++):p=new x(n+"."+r.slice(1))}else return c=r3(x,u+2,b).times(s+""),p=zw(new x(n+"."+r.slice(1)),u-h).plus(c),x.precision=b,t==null?(es=!0,Sa(p,b)):p;for(o=i=p=ih(p.minus(Fc),p.plus(Fc),u),d=Sa(p.times(p),u),a=3;;){if(i=Sa(i.times(d),u),c=o.plus(ih(i,new x(a),u)),MA(c.d).slice(0,u)===MA(o.d).slice(0,u))return o=o.times(2),s!==0&&(o=o.plus(r3(x,u+2,b).times(s+""))),o=ih(o,new x(f),u),x.precision=b,t==null?(es=!0,Sa(o,b)):o;o=c,a+=2}}function Lz(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=V1(r/La),e.d=[],n=(r+1)%La,r<0&&(n+=La),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=La;n<a;)e.d.push(+t.slice(n,n+=La));t=t.slice(n),n=La-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),es&&(e.e>TN||e.e<-TN))throw Error(BR+r)}else e.s=0,e.e=0,e.d=[0];return e}function Sa(e,t,r){var n,a,s,i,o,c,u,d,f=e.d;for(i=1,s=f[0];s>=10;s/=10)i++;if(n=t-i,n<0)n+=La,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/La),s=f.length,d>=s)return e;for(u=s=f[d],i=1;s>=10;s/=10)i++;n%=La,a=n-La+i}if(r!==void 0&&(s=yp(10,i-a-1),o=u/s%10|0,c=t<0||f[d+1]!==void 0||u%s,c=r<4?(o||c)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(n>0?a>0?u/yp(10,i-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(s=hi(e),f.length=1,t=t-s-1,f[0]=yp(10,(La-t%La)%La),e.e=V1(-t/La)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=yp(10,La-n),f[d]=a>0?(u/yp(10,i-a)%yp(10,a)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==Vi&&(f[0]=1,++e.e);break}else{if(f[d]+=s,f[d]!=Vi)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(es&&(e.e>TN||e.e<-TN))throw Error(BR+hi(e));return e}function $re(e,t){var r,n,a,s,i,o,c,u,d,f,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),es?Sa(t,p):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),i=u-n,i){for(d=i<0,d?(r=c,i=-i,o=f.length):(r=f,n=u,o=c.length),a=Math.max(Math.ceil(p/La),o)+2,i>a&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for(a=c.length,o=f.length,d=a<o,d&&(o=a),a=0;a<o;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}i=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),o=c.length,a=f.length-o;a>0;--a)c[o++]=0;for(a=f.length;a>i;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=Vi-1;--c[s],c[a]+=Vi}c[a]-=f[a]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,es?Sa(t,p):t):new h(0)}function mg(e,t,r){var n,a=hi(e),s=MA(e.d),i=s.length;return t?(r&&(n=r-i)>0?s=s.charAt(0)+"."+s.slice(1)+I0(n):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+I0(-a-1)+s,r&&(n=r-i)>0&&(s+=I0(n))):a>=i?(s+=I0(a+1-i),r&&(n=r-a-1)>0&&(s=s+"."+I0(n))):((n=a+1)<i&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(s+="."),s+=I0(n))),e.s<0?"-"+s:s}function Mz(e,t){if(e.length>t)return e.length=t,!0}function Gre(e){var t,r,n;function a(s){var i=this;if(!(i instanceof a))return new a(s);if(i.constructor=a,s instanceof a){i.s=s.s,i.e=s.e,i.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Kp+s);if(s>0)i.s=1;else if(s<0)s=-s,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(s===~~s&&s<1e7){i.e=0,i.d=[s];return}return Lz(i,s.toString())}else if(typeof s!="string")throw Error(Kp+s);if(s.charCodeAt(0)===45?(s=s.slice(1),i.s=-1):i.s=1,ABe.test(s))Lz(i,s);else throw Error(Kp+s)}if(a.prototype=Ar,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=Gre,a.config=a.set=fBe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function fBe(e){if(!e||typeof e!="object")throw Error(Qu+"Object expected");var t,r,n,a=["precision",1,H1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(V1(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Kp+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Kp+r+": "+n);return this}var jR=Gre(dBe);Fc=new jR(1);const ha=jR;var hBe=e=>e,Kre={},qre=e=>e===Kre,Uz=e=>function t(){return arguments.length===0||arguments.length===1&&qre(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Wre=(e,t)=>e===1?t:Uz(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(i=>i!==Kre).length;return s>=e?t(...n):Wre(e-s,Uz(function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];var u=n.map(d=>qre(d)?o.shift():d);return t(...u,...o)}))}),G4=e=>Wre(e.length,e),bF=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},mBe=G4((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),pBe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return hBe;var a=r.reverse(),s=a[0],i=a.slice(1);return function(){return i.reduce((o,c)=>c(o),s(...arguments))}},yF=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),Xre=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t&&a.every((i,o)=>{var c;return i===((c=t)===null||c===void 0?void 0:c[o])})||(t=a,r=e(...a)),r}};function Yre(e){var t;return e===0?t=1:t=Math.floor(new ha(e).abs().log(10).toNumber())+1,t}function Jre(e,t,r){for(var n=new ha(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}G4((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});G4((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});G4((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var Zre=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},ene=(e,t,r)=>{if(e.lte(0))return new ha(0);var n=Yre(e.toNumber()),a=new ha(10).pow(n),s=e.div(a),i=n!==1?.05:.1,o=new ha(Math.ceil(s.div(i).toNumber())).add(r).mul(i),c=o.mul(a);return t?new ha(c.toNumber()):new ha(Math.ceil(c.toNumber()))},gBe=(e,t,r)=>{var n=new ha(1),a=new ha(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new ha(10).pow(Yre(e)-1),a=new ha(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new ha(Math.floor(e)))}else e===0?a=new ha(Math.floor((t-1)/2)):r||(a=new ha(Math.floor(e)));var i=Math.floor((t-1)/2),o=pBe(mBe(c=>a.add(new ha(c-i).mul(n)).toNumber()),bF);return o(0,t)},tne=function(t,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ha(0),tickMin:new ha(0),tickMax:new ha(0)};var i=ene(new ha(r).sub(t).div(n-1),a,s),o;t<=0&&r>=0?o=new ha(0):(o=new ha(t).add(r).div(2),o=o.sub(new ha(o).mod(i)));var c=Math.ceil(o.sub(t).div(i).toNumber()),u=Math.ceil(new ha(r).sub(o).div(i).toNumber()),d=c+u+1;return d>n?tne(t,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:i,tickMin:o.sub(new ha(c).mul(i)),tickMax:o.add(new ha(u).mul(i))})};function xBe(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(n,2),[i,o]=Zre([t,r]);if(i===-1/0||o===1/0){var c=o===1/0?[i,...bF(0,n-1).map(()=>1/0)]:[...bF(0,n-1).map(()=>-1/0),o];return t>r?yF(c):c}if(i===o)return gBe(i,n,a);var{step:u,tickMin:d,tickMax:f}=tne(i,o,s,a,0),h=Jre(d,f.add(new ha(.1).mul(u)),u);return t>r?yF(h):h}function vBe(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,i]=Zre([r,n]);if(s===-1/0||i===1/0)return[r,n];if(s===i)return[s];var o=Math.max(t,2),c=ene(new ha(i).sub(s).div(o-1),a,0),u=[...Jre(new ha(s),new ha(i),c),i];return a===!1&&(u=u.map(d=>Math.round(d))),r>n?yF(u):u}var bBe=Xre(xBe),yBe=Xre(vBe),rne=e=>e.rootProps.maxBarSize,wBe=e=>e.rootProps.barGap,nne=e=>e.rootProps.barCategoryGap,EBe=e=>e.rootProps.barSize,$2=e=>e.rootProps.stackOffset,TR=e=>e.options.chartName,IR=e=>e.rootProps.syncId,ane=e=>e.rootProps.syncMethod,FR=e=>e.options.eventEmitter,DA={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},Gl={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},K4=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},CBe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:DA.angleAxisId,includeHidden:!1,name:void 0,reversed:DA.reversed,scale:DA.scale,tick:DA.tick,tickCount:void 0,ticks:void 0,type:DA.type,unit:void 0},_Be={allowDataOverflow:Gl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Gl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Gl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Gl.scale,tick:Gl.tick,tickCount:Gl.tickCount,ticks:void 0,type:Gl.type,unit:void 0},NBe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:DA.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:DA.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:DA.scale,tick:DA.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},SBe={allowDataOverflow:Gl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Gl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Gl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Gl.scale,tick:Gl.tick,tickCount:Gl.tickCount,ticks:void 0,type:"category",unit:void 0},z1=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?NBe:CBe,G2=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?SBe:_Be,q4=e=>e.polarOptions,OR=ut([Th,Ih,ki],Fte),sne=ut([q4,OR],(e,t)=>{if(e!=null)return wl(e.innerRadius,t,0)}),ine=ut([q4,OR],(e,t)=>{if(e!=null)return wl(e.outerRadius,t,t*.8)}),kBe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},one=ut([q4],kBe),BBe=ut([z1,one],K4),lne=ut([OR,sne,ine],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]}),jBe=ut([G2,lne],K4),$1=ut([In,q4,sne,ine,Th,Ih],(e,t,r,n,a,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:i,cy:o,startAngle:c,endAngle:u}=t;return{cx:wl(i,a,a/2),cy:wl(o,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),ka=(e,t)=>t,K2=(e,t,r)=>r;function DR(e){return e==null?void 0:e.id}var ji=e=>{var t=In(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},G1=e=>e.tooltip.settings.axisId,Ti=e=>{var t=ji(e),r=G1(e);return K1(e,t,r)};function cne(e,t,r){var{chartData:n=[]}=t,a=r==null?void 0:r.dataKey,s=new Map;return e.forEach(i=>{var o,c=(o=i.data)!==null&&o!==void 0?o:n;if(!(c==null||c.length===0)){var u=DR(i);c.forEach((d,f)=>{var h=a==null?f:String(Pa(d,a,null)),p=Pa(d,i.dataKey,0),g;s.has(h)?g=s.get(h):g={},Object.assign(g,{[u]:p}),s.set(h,g)})}}),Array.from(s.values())}function W4(e){return e.stackId!=null&&e.dataKey!=null}function Qz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function IN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qz(Object(r),!0).forEach(function(n){TBe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TBe(e,t,r){return(t=IBe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IBe(e){var t=FBe(e,"string");return typeof t=="symbol"?t:t+""}function FBe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wF=[0,"auto"],Sc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Oh=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Sc},kc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:wF,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:D4},Mm=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??kc},OBe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},PR=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??OBe},Xs=(e,t,r)=>{switch(t){case"xAxis":return Oh(e,r);case"yAxis":return Mm(e,r);case"zAxis":return PR(e,r);case"angleAxis":return z1(e,r);case"radiusAxis":return G2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},DBe=(e,t,r)=>{switch(t){case"xAxis":return Oh(e,r);case"yAxis":return Mm(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},K1=(e,t,r)=>{switch(t){case"xAxis":return Oh(e,r);case"yAxis":return Mm(e,r);case"angleAxis":return z1(e,r);case"radiusAxis":return G2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},une=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function RR(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var LR=e=>e.graphicalItems.cartesianItems,PBe=ut([ka,K2],RR),MR=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),q2=ut([LR,Xs,PBe],MR),dne=ut([q2],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(W4)),Ane=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),fne=ut([q2],Ane),UR=e=>e.map(t=>t.data).filter(Boolean).flat(1),RBe=ut([q2],UR),QR=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},HR=ut([RBe,kR],QR),VR=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Pa(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:Pa(a,n)}))):e.map(n=>({value:n})),X4=ut([HR,Xs,q2],VR);function hne(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Pg(e){return e.filter(t=>tf(t)||t instanceof Date).map(Number).filter(t=>Uc(t)===!1)}function LBe(e,t,r){return!r||typeof t!="number"||Uc(t)?[]:r.length?Pg(r.flatMap(n=>{var a=Pa(e,n.dataKey),s,i;if(Array.isArray(a)?[s,i]=a:s=i=a,!(!Vc(s)||!Vc(i)))return[t-s,t+i]})):[]}var MBe=ut([dne,kR,Ti],cne),mne=(e,t,r)=>{var n={},a=t.reduce((s,i)=>(i.stackId==null||(s[i.stackId]==null&&(s[i.stackId]=[]),s[i.stackId].push(i)),s),n);return Object.fromEntries(Object.entries(a).map(s=>{var[i,o]=s,c=o.map(DR);return[i,{stackedData:I5e(e,c,r),graphicalItems:o}]}))},EF=ut([MBe,dne,$2],mne),pne=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if(r!=="zAxis"){var s=R5e(e,n,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},UBe=ut([EF,Lm,ka],pne),gne=(e,t,r,n,a)=>r.length>0?e.flatMap(s=>r.flatMap(i=>{var o,c,u=(o=n[i.id])===null||o===void 0?void 0:o.filter(f=>hne(a,f)),d=Pa(s,(c=t.dataKey)!==null&&c!==void 0?c:i.dataKey);return{value:d,errorDomain:LBe(s,d,u)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Pa(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),Y4=e=>e.errorBars,xne=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>hne(r,n));ut([fne,Y4,ka],xne);var QBe=ut([HR,Xs,fne,Y4,ka],gne);function HBe(e){var{value:t}=e;if(tf(t)||t instanceof Date)return t}var Hz=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=Pg(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},VBe=(e,t,r)=>{var n=e.map(HBe).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&jee(n))?are(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},zR=e=>{var t;if(e==null||!("domain"in e))return wF;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Pg(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:wF},FN=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),i=Math.min(...s),o=Math.max(...s);return[i,o]}},vne=e=>e.referenceElements.dots,q1=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),zBe=ut([vne,ka,K2],q1),bne=e=>e.referenceElements.areas,$Be=ut([bne,ka,K2],q1),yne=e=>e.referenceElements.lines,GBe=ut([yne,ka,K2],q1),wne=(e,t)=>{var r=Pg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},KBe=ut(zBe,ka,wne),Ene=(e,t)=>{var r=Pg(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},qBe=ut([$Be,ka],Ene),Cne=(e,t)=>{var r=Pg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},WBe=ut(GBe,ka,Cne),XBe=ut(KBe,WBe,qBe,(e,t,r)=>FN(e,r,t)),_ne=ut([Xs],zR),$R=(e,t,r,n,a,s,i)=>{var o=cBe(t,e.allowDataOverflow);if(o!=null)return o;var c=s==="vertical"&&i==="xAxis"||s==="horizontal"&&i==="yAxis",u=c?FN(r,a,Hz(n)):FN(a,Hz(n));return uBe(t,u,e.allowDataOverflow)},YBe=ut([Xs,_ne,UBe,QBe,XBe,In,ka],$R),JBe=[0,1],GR=(e,t,r,n,a,s,i)=>{if(!((e==null||r==null||r.length===0)&&i===void 0)){var{dataKey:o,type:c}=e,u=Dm(t,s);return u&&o==null?are(0,r.length):c==="category"?VBe(n,e,u):a==="expand"?JBe:i}},KR=ut([Xs,In,HR,X4,$2,ka,YBe],GR),Nne=(e,t,r,n,a)=>{if(e!=null){var{scale:s,type:i}=e;if(s==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":i==="category"?"band":"linear";if(typeof s=="string"){var o="scale".concat(R2(s));return o in Ty?o:"point"}}},Um=ut([Xs,In,une,TR,ka],Nne);function ZBe(e){if(e!=null){if(e in Ty)return Ty[e]();var t="scale".concat(R2(e));if(t in Ty)return Ty[t]()}}function J4(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=ZBe(t);if(a!=null){var s=a.domain(r).range(n);return S5e(s),s}}}var qR=(e,t,r)=>{var n=zR(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&n1(e))return bBe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&n1(e))return yBe(e,t.tickCount,t.allowDecimals)}},WR=ut([KR,K1,Um],qR),XR=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&n1(t)&&Array.isArray(r)&&r.length>0){var a=t[0],s=r[0],i=t[1],o=r[r.length-1];return[Math.min(a,s),Math.max(i,o)]}return t},eje=ut([Xs,KR,WR,ka],XR),tje=ut(X4,Xs,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Pg(e.map(o=>o.value))).sort((o,c)=>o-c);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var s=0;s<n.length-1;s++){var i=n[s+1]-n[s];r=Math.min(r,i)}return r/a}}),Sne=ut(tje,In,nne,ki,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!Vc(e))return 0;var s=t==="vertical"?n.height:n.width;if(a==="gap")return e*s/2;if(a==="no-gap"){var i=wl(r,e*s),o=e*s/2;return o-i-(o-i)/s*i}return 0}),rje=(e,t)=>{var r=Oh(e,t);return r==null||typeof r.padding!="string"?0:Sne(e,"xAxis",t,r.padding)},nje=(e,t)=>{var r=Mm(e,t);return r==null||typeof r.padding!="string"?0:Sne(e,"yAxis",t,r.padding)},aje=ut(Oh,rje,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),sje=ut(Mm,nje,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),ije=ut([ki,aje,R4,P4,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),oje=ut([ki,In,sje,R4,P4,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:i}=a;return s?[n.height-i.bottom,i.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),W2=(e,t,r,n)=>{var a;switch(t){case"xAxis":return ije(e,r,n);case"yAxis":return oje(e,r,n);case"zAxis":return(a=PR(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return one(e);case"radiusAxis":return lne(e,r);default:return}},kne=ut([Xs,W2],K4),W1=ut([Xs,Um,eje,kne],J4);ut([q2,Y4,ka],xne);function Bne(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Z4=(e,t)=>t,ek=(e,t,r)=>r,lje=ut(JP,Z4,ek,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Bne)),cje=ut(ZP,Z4,ek,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Bne)),jne=(e,t)=>({width:e.width,height:t.height}),uje=(e,t)=>{var r=typeof t.width=="number"?t.width:D4;return{width:r,height:e.height}},Tne=ut(ki,Oh,jne),dje=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},Aje=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},fje=ut(Ih,ki,lje,Z4,ek,(e,t,r,n,a)=>{var s={},i;return r.forEach(o=>{var c=jne(t,o);i==null&&(i=dje(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;s[o.id]=i-Number(u)*c.height,i+=(u?-1:1)*c.height}),s}),hje=ut(Th,ki,cje,Z4,ek,(e,t,r,n,a)=>{var s={},i;return r.forEach(o=>{var c=uje(t,o);i==null&&(i=Aje(t,n,e));var u=n==="left"&&!a||n==="right"&&a;s[o.id]=i-Number(u)*c.width,i+=(u?-1:1)*c.width}),s}),mje=(e,t)=>{var r=ki(e),n=Oh(e,t);if(n!=null){var a=fje(e,n.orientation,n.mirror),s=a[t];return s==null?{x:r.left,y:0}:{x:r.left,y:s}}},pje=(e,t)=>{var r=ki(e),n=Mm(e,t);if(n!=null){var a=hje(e,n.orientation,n.mirror),s=a[t];return s==null?{x:0,y:r.top}:{x:s,y:r.top}}},Ine=ut(ki,Mm,(e,t)=>{var r=typeof t.width=="number"?t.width:D4;return{width:r,height:e.height}}),Vz=(e,t,r)=>{switch(t){case"xAxis":return Tne(e,r).width;case"yAxis":return Ine(e,r).height;default:return}},Fne=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:i}=r,o=Dm(e,n),c=t.map(u=>u.value);if(i&&o&&s==="category"&&a&&jee(c))return c}},X2=ut([In,X4,Xs,ka],Fne),YR=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,i=Dm(e,n);if(i&&(a==="number"||s!=="auto"))return t.map(o=>o.value)}},JR=ut([In,X4,K1,ka],YR),zz=ut([In,DBe,Um,W1,X2,JR,W2,WR,ka],(e,t,r,n,a,s,i,o,c)=>{if(t==null)return null;var u=Dm(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:o,range:i,realScaleType:r,scale:n}}),One=(e,t,r,n,a,s,i,o,c)=>{if(!(t==null||n==null)){var u=Dm(e,c),{type:d,ticks:f,tickCount:h}=t,p=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/p:0;g=c==="angleAxis"&&s!=null&&s.length>=2?Wi(s[0]-s[1])*2*g:g;var x=f||a;if(x){var b=x.map((y,w)=>{var _=i?i.indexOf(y):y;return{index:w,coordinate:n(_)+g,value:y,offset:g}});return b.filter(y=>!Uc(y.coordinate))}return u&&o?o.map((y,w)=>({coordinate:n(y)+g,value:y,index:w,offset:g})):n.ticks?n.ticks(h).map(y=>({coordinate:n(y)+g,value:y,offset:g})):n.domain().map((y,w)=>({coordinate:n(y)+g,value:i?i[y]:y,index:w,offset:g}))}},Dne=ut([In,K1,Um,W1,WR,W2,X2,JR,ka],One),Pne=(e,t,r,n,a,s,i)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=Dm(e,i),{tickCount:c}=t,u=0;return u=i==="angleAxis"&&(n==null?void 0:n.length)>=2?Wi(n[0]-n[1])*2*u:u,o&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},a1=ut([In,K1,W1,W2,X2,JR,ka],Pne),s1=ut(Xs,W1,(e,t)=>{if(!(e==null||t==null))return IN(IN({},e),{},{scale:t})}),gje=ut([Xs,Um,KR,kne],J4);ut((e,t,r)=>PR(e,r),gje,(e,t)=>{if(!(e==null||t==null))return IN(IN({},e),{},{scale:t})});var xje=ut([In,JP,ZP],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Rne=e=>e.options.defaultTooltipEventType,Lne=e=>e.options.validateTooltipEventTypes;function Mne(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function ZR(e,t){var r=Rne(e),n=Lne(e);return Mne(t,r,n)}function vje(e){return ir(t=>ZR(t,e))}var Une=(e,t)=>{var r,n=Number(t);if(!(Uc(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},bje=e=>e.tooltip.settings,M0={active:!1,index:null,dataKey:void 0,coordinate:void 0},yje={itemInteraction:{click:M0,hover:M0},axisInteraction:{click:M0,hover:M0},keyboardInteraction:M0,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Qne=Gc({name:"tooltip",initialState:yje,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=sh(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:wje,removeTooltipEntrySettings:Eje,setTooltipSettingsState:Cje,setActiveMouseOverItemIndex:Hne,mouseLeaveItem:_je,mouseLeaveChart:Vne,setActiveClickItemIndex:Nje,setMouseOverAxisIndex:zne,setMouseClickAxisIndex:Sje,setSyncInteraction:CF,setKeyboardInteraction:_F}=Qne.actions,kje=Qne.reducer;function $z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function UC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$z(Object(r),!0).forEach(function(n){Bje(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$z(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bje(e,t,r){return(t=jje(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jje(e){var t=Tje(e,"string");return typeof t=="symbol"?t:t+""}function Tje(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ije(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Fje(e){return e.index!=null}var $ne=(e,t,r,n)=>{if(t==null)return M0;var a=Ije(e,t,r);if(a==null)return M0;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(Fje(a)){if(s)return UC(UC({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return UC(UC({},M0),{},{coordinate:a.coordinate})},e8=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!Vc(n))return r;var a=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(a,Math.min(n,s)))},Gne=(e,t,r,n,a,s,i,o)=>{if(!(s==null||o==null)){var c=i[0],u=c==null?void 0:o(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},Kne=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var i;return((i=s.settings)===null||i===void 0?void 0:i.dataKey)===a})},Y2=e=>e.options.tooltipPayloadSearcher,X1=e=>e.tooltip;function Gz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Kz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gz(Object(r),!0).forEach(function(n){Oje(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Oje(e,t,r){return(t=Dje(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dje(e){var t=Pje(e,"string");return typeof t=="symbol"?t:t+""}function Pje(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rje(e,t){return e??t}var qne=(e,t,r,n,a,s,i)=>{if(!(t==null||s==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,p)=>{var g,{dataDefinedOnItem:x,settings:b}=p,y=Rje(x,o),w=Array.isArray(y)?Dte(y,u,d):y,_=(g=b==null?void 0:b.dataKey)!==null&&g!==void 0?g:n==null?void 0:n.dataKey,B=b==null?void 0:b.nameKey,k;if(n!=null&&n.dataKey&&Array.isArray(w)&&!Array.isArray(w[0])&&i==="axis"?k=vEe(w,n.dataKey,a):k=s(w,t,c,B),Array.isArray(k))k.forEach(E=>{var N=Kz(Kz({},b),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});h.push(_V({tooltipEntrySettings:N,dataKey:E.dataKey,payload:E.payload,value:Pa(E.payload,E.dataKey),name:E.name}))});else{var I;h.push(_V({tooltipEntrySettings:b,dataKey:_,payload:k,value:Pa(k,_),name:(I=Pa(k,B))!==null&&I!==void 0?I:b==null?void 0:b.name}))}return h},f)}},t8=ut([Ti,In,une,TR,ji],Nne),Lje=ut([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Mje=ut([ji,G1],RR),J2=ut([Lje,Ti,Mje],MR),Uje=ut([J2],e=>e.filter(W4)),Qje=ut([J2],UR),Y1=ut([Qje,Lm],QR),Hje=ut([Uje,Lm,Ti],cne),r8=ut([Y1,Ti,J2],VR),Vje=ut([Ti],zR),zje=ut([J2],e=>e.filter(W4)),$je=ut([Hje,zje,$2],mne),Gje=ut([$je,Lm,ji],pne),Kje=ut([J2],Ane),qje=ut([Y1,Ti,Kje,Y4,ji],gne),Wje=ut([vne,ji,G1],q1),Xje=ut([Wje,ji],wne),Yje=ut([bne,ji,G1],q1),Jje=ut([Yje,ji],Ene),Zje=ut([yne,ji,G1],q1),eTe=ut([Zje,ji],Cne),tTe=ut([Xje,eTe,Jje],FN),rTe=ut([Ti,Vje,Gje,qje,tTe,In,ji],$R),Wne=ut([Ti,In,Y1,r8,$2,ji,rTe],GR),nTe=ut([Wne,Ti,t8],qR),aTe=ut([Ti,Wne,nTe,ji],XR),Xne=e=>{var t=ji(e),r=G1(e),n=!1;return W2(e,t,r,n)},Yne=ut([Ti,Xne],K4),Jne=ut([Ti,t8,aTe,Yne],J4),sTe=ut([In,r8,Ti,ji],Fne),iTe=ut([In,r8,Ti,ji],YR),oTe=(e,t,r,n,a,s,i,o)=>{if(t){var{type:c}=t,u=Dm(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Wi(a[0]-a[1])*2*f:f,u&&i?i.map((h,p)=>({coordinate:n(h)+f,value:h,index:p,offset:f})):n.domain().map((h,p)=>({coordinate:n(h)+f,value:s?s[h]:h,index:p,offset:f}))}}},Dh=ut([In,Ti,t8,Jne,Xne,sTe,iTe,ji],oTe),n8=ut([Rne,Lne,bje],(e,t,r)=>Mne(r.shared,e,t)),Zne=e=>e.tooltip.settings.trigger,a8=e=>e.tooltip.settings.defaultIndex,tk=ut([X1,n8,Zne,a8],$ne),ym=ut([tk,Y1],e8),eae=ut([Dh,ym],Une),tae=ut([tk],e=>{if(e)return e.dataKey}),rae=ut([X1,n8,Zne,a8],Kne),lTe=ut([Th,Ih,In,ki,Dh,a8,rae,Y2],Gne),cTe=ut([tk,lTe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),uTe=ut([tk],e=>e.active),dTe=ut([rae,ym,Lm,Ti,eae,Y2,n8],qne),ATe=ut([dTe],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function qz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qz(Object(r),!0).forEach(function(n){fTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fTe(e,t,r){return(t=hTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hTe(e){var t=mTe(e,"string");return typeof t=="symbol"?t:t+""}function mTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pTe=()=>ir(Ti),gTe=()=>{var e=pTe(),t=ir(Dh),r=ir(Jne);return Mw(Wz(Wz({},e),{},{scale:r}),t)},xTe=()=>ir(TR),s8=(e,t)=>t,nae=(e,t,r)=>r,i8=(e,t,r,n)=>n,vTe=ut(Dh,e=>k4(e,t=>t.coordinate)),o8=ut([X1,s8,nae,i8],$ne),aae=ut([o8,Y1],e8),bTe=(e,t,r)=>{if(t!=null){var n=X1(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},sae=ut([X1,s8,nae,i8],Kne),ON=ut([Th,Ih,In,ki,Dh,i8,sae,Y2],Gne),yTe=ut([o8,ON],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),iae=ut(Dh,aae,Une),wTe=ut([sae,aae,Lm,Ti,iae,Y2,s8],qne),ETe=ut([o8],e=>({isActive:e.active,activeIndex:e.index})),CTe=(e,t,r,n,a,s,i,o)=>{if(!(!e||!t||!n||!a||!s)){var c=L5e(e.chartX,e.chartY,t,r,o);if(c){var u=U5e(c,t),d=_5e(u,i,s,n,a),f=M5e(t,s,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function NF(){return NF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},NF.apply(null,arguments)}function Xz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function QC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xz(Object(r),!0).forEach(function(n){_Te(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _Te(e,t,r){return(t=NTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NTe(e){var t=STe(e,"string");return typeof t=="symbol"?t:t+""}function STe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kTe(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:s,layout:i,cursor:o,tooltipEventType:c,chartName:u}=e,d=t,f=r,h=n;if(!o||!d||u!=="ScatterChart"&&c!=="axis")return null;var p,g;if(u==="ScatterChart")p=d,g=RNe;else if(u==="BarChart")p=LNe(i,d,a,s),g=ere;else if(i==="radial"){var{cx:x,cy:b,radius:y,startAngle:w,endAngle:_}=tre(d);p={cx:x,cy:b,startAngle:w,endAngle:_,innerRadius:y,outerRadius:y},g=nre}else p={points:wSe(i,d,a)},g=Kte;var B=typeof o=="object"&&"className"in o?o.className:void 0,k=QC(QC(QC(QC({stroke:"#ccc",pointerEvents:"none"},a),p),Wn(o,!1)),{},{payload:f,payloadIndex:h,className:gn("recharts-tooltip-cursor",B)});return S.isValidElement(o)?S.cloneElement(o,k):S.createElement(g,k)}function BTe(e){var t=gTe(),r=Hte(),n=nR(),a=xTe();return S.createElement(kTe,NF({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var oae=S.createContext(null),jTe=()=>S.useContext(oae),n3={exports:{}},Yz;function TTe(){return Yz||(Yz=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new a(d,f||c,h),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],p]:c._events[g].push(p):(c._events[g]=p,c._eventsCount++),c}function i(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,g=new Array(p);h<p;h++)g[h]=f[h].fn;return g},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,p,g){var x=r?r+u:u;if(!this._events[x])return!1;var b=this._events[x],y=arguments.length,w,_;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),y){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,f),!0;case 4:return b.fn.call(b.context,d,f,h),!0;case 5:return b.fn.call(b.context,d,f,h,p),!0;case 6:return b.fn.call(b.context,d,f,h,p,g),!0}for(_=1,w=new Array(y-1);_<y;_++)w[_-1]=arguments[_];b.fn.apply(b.context,w)}else{var B=b.length,k;for(_=0;_<B;_++)switch(b[_].once&&this.removeListener(u,b[_].fn,void 0,!0),y){case 1:b[_].fn.call(b[_].context);break;case 2:b[_].fn.call(b[_].context,d);break;case 3:b[_].fn.call(b[_].context,d,f);break;case 4:b[_].fn.call(b[_].context,d,f,h);break;default:if(!w)for(k=1,w=new Array(y-1);k<y;k++)w[k-1]=arguments[k];b[_].fn.apply(b[_].context,w)}}return!0},o.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return i(this,p),this;var g=this._events[p];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&i(this,p);else{for(var x=0,b=[],y=g.length;x<y;x++)(g[x].fn!==d||h&&!g[x].once||f&&g[x].context!==f)&&b.push(g[x]);b.length?this._events[p]=b.length===1?b[0]:b:i(this,p)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}(n3)),n3.exports}var ITe=TTe();const FTe=Cl(ITe);var $w=new FTe,SF="recharts.syncEvent.tooltip",Jz="recharts.syncEvent.brush";function l8(e,t){if(t){var r=Number.parseInt(t,10);if(!Uc(r))return e==null?void 0:e[r]}}var OTe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},lae=Gc({name:"options",initialState:OTe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),DTe=lae.reducer,{createEventEmitter:PTe}=lae.actions;function RTe(e){return e.tooltip.syncInteraction}var LTe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},cae=Gc({name:"chartData",initialState:LTe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:Zz,setDataStartEndIndexes:MTe,setComputedData:kht}=cae.actions,UTe=cae.reducer,uae=()=>{};function QTe(){var e=ir(IR),t=ir(FR),r=$a(),n=ir(ane),a=ir(Dh),s=nR(),i=eR(),o=ir(c=>c.rootProps.className);S.useEffect(()=>{if(e==null)return uae;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){r(d);return}if(a!=null){var h;if(typeof n=="function"){var p={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},g=n(a,p);h=a[g]}else n==="value"&&(h=a.find(I=>String(I.value)===d.payload.label));var{coordinate:x}=d.payload;if(h==null||d.payload.active===!1||x==null||i==null){r(CF({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:b,y}=x,w=Math.min(b,i.x+i.width),_=Math.min(y,i.y+i.height),B={x:s==="horizontal"?h.coordinate:w,y:s==="horizontal"?_:h.coordinate},k=CF({active:d.payload.active,coordinate:B,dataKey:d.payload.dataKey,index:String(h.index),label:d.payload.label});r(k)}}};return $w.on(SF,c),()=>{$w.off(SF,c)}},[o,r,t,e,n,a,s,i])}function HTe(){var e=ir(IR),t=ir(FR),r=$a();S.useEffect(()=>{if(e==null)return uae;var n=(a,s,i)=>{t!==i&&e===a&&r(MTe(s))};return $w.on(Jz,n),()=>{$w.off(Jz,n)}},[r,t,e])}function VTe(){var e=$a();S.useEffect(()=>{e(PTe())},[e]),QTe(),HTe()}function zTe(e,t,r,n,a,s){var i=ir(h=>bTe(h,e,t)),o=ir(FR),c=ir(IR),u=ir(ane),d=ir(RTe),f=d==null?void 0:d.active;S.useEffect(()=>{if(!f&&c!=null&&o!=null){var h=CF({active:s,coordinate:r,dataKey:i,index:a,label:typeof n=="number"?String(n):n});$w.emit(SF,c,h,o)}},[f,r,i,a,n,o,c,u,s])}function e$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function t$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e$(Object(r),!0).forEach(function(n){$Te(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $Te(e,t,r){return(t=GTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GTe(e){var t=KTe(e,"string");return typeof t=="symbol"?t:t+""}function KTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qTe(e){return e.dataKey}function WTe(e,t){return S.isValidElement(e)?S.cloneElement(e,t):typeof e=="function"?S.createElement(e,t):S.createElement(mNe,t)}var r$=[],XTe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Fg.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Dp(e){var t=zu(e,XTe),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:s,content:i,filterNull:o,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:p,wrapperStyle:g,cursor:x,shared:b,trigger:y,defaultIndex:w,portal:_,axisId:B}=t,k=$a(),I=typeof w=="number"?String(w):w;S.useEffect(()=>{k(Cje({shared:b,trigger:y,axisId:B,active:r,defaultIndex:I}))},[k,b,y,B,r,I]);var E=eR(),N=Gte(),j=vje(b),{activeIndex:R,isActive:D}=ir(te=>ETe(te,j,y,I)),O=ir(te=>wTe(te,j,y,I)),L=ir(te=>iae(te,j,y,I)),M=ir(te=>yTe(te,j,y,I)),J=O,V=jTe(),K=r??D,[z,G]=lte([J,K]),Y=j==="axis"?L:void 0;zTe(j,y,M,Y,R,K);var ee=_??V;if(ee==null)return null;var P=J??r$;K||(P=r$),o&&P.length&&(P=rte(J.filter(te=>te.value!=null&&(te.hide!==!0||t.includeHidden)),d,qTe));var Q=P.length>0,X=S.createElement(wNe,{allowEscapeViewBox:n,animationDuration:a,animationEasing:s,isAnimationActive:c,active:K,coordinate:M,hasPayload:Q,offset:u,position:f,reverseDirection:h,useTranslate3d:p,viewBox:E,wrapperStyle:g,lastBoundingBox:z,innerRef:G,hasPortalFromProps:!!_},WTe(i,t$(t$({},t),{},{payload:P,label:Y,active:K,coordinate:M,accessibilityLayer:N})));return S.createElement(S.Fragment,null,FP.createPortal(X,ee),K&&S.createElement(BTe,{cursor:x,tooltipEventType:j,coordinate:M,payload:J,index:R}))}var a3={},s3={},i3={},n$;function YTe(){return n$||(n$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:s}={}){let i,o=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{o!==null&&(r.apply(i,o),i=void 0,o=null)},f=()=>{u&&d(),x()};let h=null;const p=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},g=()=>{h!==null&&(clearTimeout(h),h=null)},x=()=>{g(),i=void 0,o=null},b=()=>{d()},y=function(...w){if(a!=null&&a.aborted)return;i=this,o=w;const _=h==null;p(),c&&_&&d()};return y.schedule=p,y.cancel=x,y.flush=b,a==null||a.addEventListener("abort",x,{once:!0}),y}e.debounce=t}(i3)),i3}var a$;function JTe(){return a$||(a$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YTe();function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:i=!1,trailing:o=!0,maxWait:c}=s,u=Array(2);i&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...x){d=n.apply(this,x),f=null},a,{edges:u}),p=function(...x){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,x),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,x),d)},g=()=>(h.flush(),d);return p.cancel=h.cancel,p.flush=g,p}e.debounce=r}(s3)),s3}var s$;function ZTe(){return s$||(s$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JTe();function r(n,a=0,s={}){const{leading:i=!0,trailing:o=!0}=s;return t.debounce(n,a,{leading:i,maxWait:a,trailing:o})}e.throttle=r}(a3)),a3}var o3,i$;function e3e(){return i$||(i$=1,o3=ZTe().throttle),o3}var t3e=e3e();const r3e=Cl(t3e);var tw=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s]};function o$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function l3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o$(Object(r),!0).forEach(function(n){n3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function n3e(e,t,r){return(t=a3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a3e(e){var t=s3e(e,"string");return typeof t=="symbol"?t:t+""}function s3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pp=S.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a="100%",height:s="100%",minWidth:i=0,minHeight:o,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:p,style:g={}}=e,x=S.useRef(null),b=S.useRef();b.current=p,S.useImperativeHandle(t,()=>x.current);var[y,w]=S.useState({containerWidth:n.width,containerHeight:n.height}),_=S.useCallback((k,I)=>{w(E=>{var N=Math.round(k),j=Math.round(I);return E.containerWidth===N&&E.containerHeight===j?E:{containerWidth:N,containerHeight:j}})},[]);S.useEffect(()=>{var k=j=>{var R,{width:D,height:O}=j[0].contentRect;_(D,O),(R=b.current)===null||R===void 0||R.call(b,D,O)};d>0&&(k=r3e(k,d,{trailing:!0,leading:!1}));var I=new ResizeObserver(k),{width:E,height:N}=x.current.getBoundingClientRect();return _(E,N),I.observe(x.current),()=>{I.disconnect()}},[_,d]);var B=S.useMemo(()=>{var{containerWidth:k,containerHeight:I}=y;if(k<0||I<0)return null;tw(Tp(a)||Tp(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,s),tw(!r||r>0,"The aspect(%s) must be greater than zero.",r);var E=Tp(a)?k:a,N=Tp(s)?I:s;return r&&r>0&&(E?N=E/r:N&&(E=N*r),c&&N>c&&(N=c)),tw(E>0||N>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,E,N,a,s,i,o,r),S.Children.map(u,j=>S.cloneElement(j,{width:E,height:N,style:l3({width:E,height:N},j.props.style)}))},[r,u,s,c,o,i,y,a]);return S.createElement("div",{id:f?"".concat(f):void 0,className:gn("recharts-responsive-container",h),style:l3(l3({},g),{},{width:a,height:s,minWidth:i,minHeight:o,maxHeight:c}),ref:x},S.createElement("div",{style:{width:0,height:0,overflow:"visible"}},B))}),pg=e=>null;pg.displayName="Cell";function i3e(e,t,r){return(t=o3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o3e(e){var t=l3e(e,"string");return typeof t=="symbol"?t:t+""}function l3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class c3e{constructor(t){i3e(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function l$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function u3e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l$(Object(r),!0).forEach(function(n){d3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function d3e(e,t,r){return(t=A3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A3e(e){var t=f3e(e,"string");return typeof t=="symbol"?t:t+""}function f3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var h3e={cacheSize:2e3,enableCache:!0},dae=u3e({},h3e),c$=new c3e(dae.cacheSize),m3e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},u$="recharts_measurement_span";function p3e(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",i=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(i,"|").concat(o)}var d$=(e,t)=>{try{var r=document.getElementById(u$);r||(r=document.createElement("span"),r.setAttribute("id",u$),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,m3e,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},rw=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Fg.isSsr)return{width:0,height:0};if(!dae.enableCache)return d$(t,r);var n=p3e(t,r),a=c$.get(n);if(a)return a;var s=d$(t,r);return c$.set(n,s),s},A$=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,f$=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,g3e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,x3e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Aae={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},v3e=Object.keys(Aae),av="NaN";function b3e(e,t){return e*Aae[t]}class Hl{static parse(t){var r,[,n,a]=(r=x3e.exec(t))!==null&&r!==void 0?r:[];return new Hl(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Uc(t)&&(this.unit=""),r!==""&&!g3e.test(r)&&(this.num=NaN,this.unit=""),v3e.includes(r)&&(this.num=b3e(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Hl(NaN,""):new Hl(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Hl(NaN,""):new Hl(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Hl(NaN,""):new Hl(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Hl(NaN,""):new Hl(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Uc(this.num)}}function fae(e){if(e.includes(av))return av;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=(r=A$.exec(t))!==null&&r!==void 0?r:[],i=Hl.parse(n??""),o=Hl.parse(s??""),c=a==="*"?i.multiply(o):i.divide(o);if(c.isNaN())return av;t=t.replace(A$,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=f$.exec(t))!==null&&u!==void 0?u:[],p=Hl.parse(d??""),g=Hl.parse(h??""),x=f==="+"?p.add(g):p.subtract(g);if(x.isNaN())return av;t=t.replace(f$,x.toString())}return t}var h$=/\(([^()]*)\)/;function y3e(e){for(var t=e,r;(r=h$.exec(t))!=null;){var[,n]=r;t=t.replace(h$,fae(n))}return t}function w3e(e){var t=e.replace(/\s+/g,"");return t=y3e(t),t=fae(t),t}function E3e(e){try{return w3e(e)}catch{return av}}function c3(e){var t=E3e(e.slice(5,-1));return t===av?"":t}var C3e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],_3e=["dx","dy","angle","className","breakAll"];function kF(){return kF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kF.apply(null,arguments)}function m$(e,t){if(e==null)return{};var r,n,a=N3e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function N3e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hae=/[ \f\n\r\t\v\u2028\u2029]+/,mae=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];ks(t)||(r?a=t.toString().split(""):a=t.toString().split(hae));var s=a.map(o=>({word:o,width:rw(o,n).width})),i=r?0:rw(" ",n).width;return{wordsWithComputedWidth:s,spaceWidth:i}}catch{return null}},S3e=(e,t,r,n,a)=>{var{maxLines:s,children:i,style:o,breakAll:c}=e,u=ur(s),d=i,f=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D.reduce((O,L)=>{var{word:M,width:J}=L,V=O[O.length-1];if(V&&(n==null||a||V.width+J+r<Number(n)))V.words.push(M),V.width+=J+r;else{var K={words:[M],width:J};O.push(K)}return O},[])},h=f(t),p=R=>R.reduce((D,O)=>D.width>O.width?D:O);if(!u||a)return h;var g=h.length>s||p(h).width>Number(n);if(!g)return h;for(var x="…",b=R=>{var D=d.slice(0,R),O=mae({breakAll:c,style:o,children:D+x}).wordsWithComputedWidth,L=f(O),M=L.length>s||p(L).width>Number(n);return[M,L]},y=0,w=d.length-1,_=0,B;y<=w&&_<=d.length-1;){var k=Math.floor((y+w)/2),I=k-1,[E,N]=b(I),[j]=b(k);if(!E&&!j&&(y=k+1),E&&j&&(w=k-1),!E&&j){B=N;break}_++}return B||h},p$=e=>{var t=ks(e)?[]:e.toString().split(hae);return[{words:t}]},k3e=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:i}=e;if((t||r)&&!Fg.isSsr){var o,c,u=mae({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,c=f}else return p$(n);return S3e({breakAll:s,children:n,maxLines:i,style:a},o,c,t,r)}return p$(n)},g$="#808080",J1=S.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:s="0.71em",scaleToFit:i=!1,textAnchor:o="start",verticalAnchor:c="end",fill:u=g$}=e,d=m$(e,C3e),f=S.useMemo(()=>k3e({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:i,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,i,d.style,d.width]),{dx:h,dy:p,angle:g,className:x,breakAll:b}=d,y=m$(d,_3e);if(!tf(r)||!tf(n))return null;var w=r+(ur(h)?h:0),_=n+(ur(p)?p:0),B;switch(c){case"start":B=c3("calc(".concat(s,")"));break;case"middle":B=c3("calc(".concat((f.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:B=c3("calc(".concat(f.length-1," * -").concat(a,")"));break}var k=[];if(i){var I=f[0].width,{width:E}=d;k.push("scale(".concat(ur(E)?E/I:1,")"))}return g&&k.push("rotate(".concat(g,", ").concat(w,", ").concat(_,")")),k.length&&(y.transform=k.join(" ")),S.createElement("text",kF({},Wn(y,!0),{ref:t,x:w,y:_,className:gn("recharts-text",x),textAnchor:o,fill:u.includes("url")?g$:u}),f.map((N,j)=>{var R=N.words.join(b?"":" ");return S.createElement("tspan",{x:w,dy:j===0?B:a,key:"".concat(R,"-").concat(j)},R)}))});J1.displayName="Text";var B3e=["offset"],j3e=["labelRef"];function x$(e,t){if(e==null)return{};var r,n,a=T3e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function T3e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function v$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ws(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v$(Object(r),!0).forEach(function(n){I3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I3e(e,t,r){return(t=F3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F3e(e){var t=O3e(e,"string");return typeof t=="symbol"?t:t+""}function O3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qf(){return qf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qf.apply(null,arguments)}var D3e=e=>{var{value:t,formatter:r}=e,n=ks(e.children)?t:e.children;return typeof r=="function"?r(n):n},c8=e=>e!=null&&typeof e=="function",P3e=(e,t)=>{var r=Wi(t-e),n=Math.min(Math.abs(t-e),360);return r*n},R3e=(e,t,r,n)=>{var{position:a,offset:s,className:i}=e,{cx:o,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:p}=n,g=(u+d)/2,x=P3e(f,h),b=x>=0?1:-1,y,w;a==="insideStart"?(y=f+b*s,w=p):a==="insideEnd"?(y=h-b*s,w=!p):a==="end"&&(y=h+b*s,w=p),w=x<=0?w:!w;var _=Zn(o,c,g,y),B=Zn(o,c,g,y+(w?1:-1)*359),k="M".concat(_.x,",").concat(_.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(w?0:1,`,
    `).concat(B.x,",").concat(B.y),I=ks(e.id)?Pw("recharts-radial-line-"):e.id;return S.createElement("text",qf({},r,{dominantBaseline:"central",className:gn("recharts-radial-bar-label",i)}),S.createElement("defs",null,S.createElement("path",{id:I,d:k})),S.createElement("textPath",{xlinkHref:"#".concat(I)},t))},L3e=(e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:o,endAngle:c}=e,u=(o+c)/2;if(r==="outside"){var{x:d,y:f}=Zn(n,a,i+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(s+i)/2,{x:p,y:g}=Zn(n,a,h,u);return{x:p,y:g,textAnchor:"middle",verticalAnchor:"middle"}},M3e=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,{x:s,y:i,width:o,height:c}=t,u=c>=0?1:-1,d=u*n,f=u>0?"end":"start",h=u>0?"start":"end",p=o>=0?1:-1,g=p*n,x=p>0?"end":"start",b=p>0?"start":"end";if(a==="top"){var y={x:s+o/2,y:i-u*n,textAnchor:"middle",verticalAnchor:f};return ws(ws({},y),r?{height:Math.max(i-r.y,0),width:o}:{})}if(a==="bottom"){var w={x:s+o/2,y:i+c+d,textAnchor:"middle",verticalAnchor:h};return ws(ws({},w),r?{height:Math.max(r.y+r.height-(i+c),0),width:o}:{})}if(a==="left"){var _={x:s-g,y:i+c/2,textAnchor:x,verticalAnchor:"middle"};return ws(ws({},_),r?{width:Math.max(_.x-r.x,0),height:c}:{})}if(a==="right"){var B={x:s+o+g,y:i+c/2,textAnchor:b,verticalAnchor:"middle"};return ws(ws({},B),r?{width:Math.max(r.x+r.width-B.x,0),height:c}:{})}var k=r?{width:o,height:c}:{};return a==="insideLeft"?ws({x:s+g,y:i+c/2,textAnchor:b,verticalAnchor:"middle"},k):a==="insideRight"?ws({x:s+o-g,y:i+c/2,textAnchor:x,verticalAnchor:"middle"},k):a==="insideTop"?ws({x:s+o/2,y:i+d,textAnchor:"middle",verticalAnchor:h},k):a==="insideBottom"?ws({x:s+o/2,y:i+c-d,textAnchor:"middle",verticalAnchor:f},k):a==="insideTopLeft"?ws({x:s+g,y:i+d,textAnchor:b,verticalAnchor:h},k):a==="insideTopRight"?ws({x:s+o-g,y:i+d,textAnchor:x,verticalAnchor:h},k):a==="insideBottomLeft"?ws({x:s+g,y:i+c-d,textAnchor:b,verticalAnchor:f},k):a==="insideBottomRight"?ws({x:s+o-g,y:i+c-d,textAnchor:x,verticalAnchor:f},k):a&&typeof a=="object"&&(ur(a.x)||Tp(a.x))&&(ur(a.y)||Tp(a.y))?ws({x:s+wl(a.x,o),y:i+wl(a.y,c),textAnchor:"end",verticalAnchor:"end"},k):ws({x:s+o/2,y:i+c/2,textAnchor:"middle",verticalAnchor:"middle"},k)},U3e=e=>"cx"in e&&ur(e.cx);function ql(e){var{offset:t=5}=e,r=x$(e,B3e),n=ws({offset:t},r),{viewBox:a,position:s,value:i,children:o,content:c,className:u="",textBreakAll:d,labelRef:f}=n,h=ir($1),p=eR(),g=s==="center"?p:h??p,x=a||g;if(!x||ks(i)&&ks(o)&&!S.isValidElement(c)&&typeof c!="function")return null;var b=ws(ws({},n),{},{viewBox:x});if(S.isValidElement(c)){var{labelRef:y}=b,w=x$(b,j3e);return S.cloneElement(c,w)}var _;if(typeof c=="function"){if(_=S.createElement(c,b),S.isValidElement(_))return _}else _=D3e(n);var B=U3e(x),k=Wn(n,!0);if(B&&(s==="insideStart"||s==="insideEnd"||s==="end"))return R3e(n,_,k,x);var I=B?L3e(x,n.offset,n.position):M3e(n,x);return S.createElement(J1,qf({ref:f,className:gn("recharts-label",u)},k,I,{breakAll:d}),_)}ql.displayName="Label";var pae=e=>{var{cx:t,cy:r,angle:n,startAngle:a,endAngle:s,r:i,radius:o,innerRadius:c,outerRadius:u,x:d,y:f,top:h,left:p,width:g,height:x,clockWise:b,labelViewBox:y}=e;if(y)return y;if(ur(g)&&ur(x)){if(ur(d)&&ur(f))return{x:d,y:f,width:g,height:x};if(ur(h)&&ur(p))return{x:h,y:p,width:g,height:x}}if(ur(d)&&ur(f))return{x:d,y:f,width:0,height:0};if(ur(t)&&ur(r))return{cx:t,cy:r,startAngle:a||n||0,endAngle:s||n||0,innerRadius:c||0,outerRadius:u||o||i||0,clockWise:b};if(e.viewBox)return e.viewBox},Q3e=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?S.createElement(ql,qf({key:"label-implicit"},n)):tf(e)?S.createElement(ql,qf({key:"label-implicit",value:e},n)):S.isValidElement(e)?e.type===ql?S.cloneElement(e,ws({key:"label-implicit"},n)):S.createElement(ql,qf({key:"label-implicit",content:e},n)):c8(e)?S.createElement(ql,qf({key:"label-implicit",content:e},n)):e&&typeof e=="object"?S.createElement(ql,qf({},e,{key:"label-implicit"},n)):null},H3e=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:a,labelRef:s}=t,i=pae(t),o=L2(a,ql).map((u,d)=>S.cloneElement(u,{viewBox:r||i,key:"label-".concat(d)}));if(!n)return o;var c=Q3e(t.label,r||i,s);return[c,...o]};ql.parseViewBox=pae;ql.renderCallByParent=H3e;var u3={},d3={},b$;function V3e(){return b$||(b$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(d3)),d3}var A3={},y$;function z3e(){return y$||(y$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(A3)),A3}var w$;function $3e(){return w$||(w$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=V3e(),r=z3e(),n=UP();function a(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=a}(u3)),u3}var f3,E$;function G3e(){return E$||(E$=1,f3=$3e().last),f3}var K3e=G3e();const gae=Cl(K3e);var q3e=["valueAccessor"],W3e=["data","dataKey","clockWise","id","textBreakAll"];function DN(){return DN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DN.apply(null,arguments)}function C$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C$(Object(r),!0).forEach(function(n){X3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function X3e(e,t,r){return(t=Y3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y3e(e){var t=J3e(e,"string");return typeof t=="symbol"?t:t+""}function J3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function N$(e,t){if(e==null)return{};var r,n,a=Z3e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Z3e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var eIe=e=>Array.isArray(e.value)?gae(e.value):e.value;function sm(e){var{valueAccessor:t=eIe}=e,r=N$(e,q3e),{data:n,dataKey:a,clockWise:s,id:i,textBreakAll:o}=r,c=N$(r,W3e);return!n||!n.length?null:S.createElement(ds,{className:"recharts-label-list"},n.map((u,d)=>{var f=ks(a)?t(u,d):Pa(u&&u.payload,a),h=ks(i)?{}:{id:"".concat(i,"-").concat(d)};return S.createElement(ql,DN({},Wn(u,!0),c,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:o,viewBox:ql.parseViewBox(ks(s)?u:_$(_$({},u),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}sm.displayName="LabelList";function tIe(e,t){return e?e===!0?S.createElement(sm,{key:"labelList-implicit",data:t}):S.isValidElement(e)||c8(e)?S.createElement(sm,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?S.createElement(sm,DN({data:t},e,{key:"labelList-implicit"})):null:null}function rIe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,a=L2(n,sm).map((i,o)=>S.cloneElement(i,{data:t,key:"labelList-".concat(o)}));if(!r)return a;var s=tIe(e.label,t);return[s,...a]}sm.renderCallByParent=rIe;var nIe=["points","className","baseLinePoints","connectNulls"];function sv(){return sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sv.apply(null,arguments)}function aIe(e,t){if(e==null)return{};var r,n,a=sIe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function sIe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var S$=e=>e&&e.x===+e.x&&e.y===+e.y,iIe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(n=>{S$(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),S$(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},nw=(e,t)=>{var r=iIe(e);t&&(r=[r.reduce((a,s)=>[...a,...s],[])]);var n=r.map(a=>a.reduce((s,i,o)=>"".concat(s).concat(o===0?"M":"L").concat(i.x,",").concat(i.y),"")).join("");return r.length===1?"".concat(n,"Z"):n},oIe=(e,t,r)=>{var n=nw(e,r);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(nw(t.reverse(),r).slice(1))},xae=e=>{var{points:t,className:r,baseLinePoints:n,connectNulls:a}=e,s=aIe(e,nIe);if(!t||!t.length)return null;var i=gn("recharts-polygon",r);if(n&&n.length){var o=s.stroke&&s.stroke!=="none",c=oIe(t,n,a);return S.createElement("g",{className:i},S.createElement("path",sv({},Wn(s,!0),{fill:c.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:c})),o?S.createElement("path",sv({},Wn(s,!0),{fill:"none",d:nw(t,a)})):null,o?S.createElement("path",sv({},Wn(s,!0),{fill:"none",d:nw(n,a)})):null)}var u=nw(t,a);return S.createElement("path",sv({},Wn(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",className:i,d:u}))};function BF(){return BF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BF.apply(null,arguments)}var u8=e=>{var{cx:t,cy:r,r:n,className:a}=e,s=gn("recharts-dot",a);return t===+t&&r===+r&&n===+n?S.createElement("circle",BF({},il(e),TP(e),{className:s,cx:t,cy:r,r:n})):null},d8=e=>e.graphicalItems.polarItems,lIe=ut([ka,K2],RR),A8=ut([d8,Xs,lIe],MR),cIe=ut([A8],UR),f8=ut([cIe,$4],QR),vae=ut([f8,Xs,A8],VR),uIe=ut([f8,Xs,A8],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var s,i=Pa(n,(s=t.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:i,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Pa(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]}))),k$=()=>{},dIe=ut([Xs,_ne,k$,uIe,k$,In,ka],$R),bae=ut([Xs,In,f8,vae,$2,ka,dIe],GR),yae=ut([bae,Xs,Um],qR),AIe=ut([Xs,bae,yae,ka],XR),h8=(e,t,r)=>{switch(t){case"angleAxis":return z1(e,r);case"radiusAxis":return G2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},m8=(e,t,r)=>{switch(t){case"angleAxis":return BBe(e,r);case"radiusAxis":return jBe(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Z1=ut([h8,Um,AIe,m8],J4),wae=ut([In,vae,K1,ka],YR),eb=ut([In,h8,Um,Z1,yae,m8,X2,wae,ka],One);ut([In,h8,Z1,m8,X2,wae,ka],Pne);var fIe=(e,t)=>eb(e,"angleAxis",t,!1),hIe=ut([fIe],e=>{if(e)return e.map(t=>t.coordinate)}),mIe=(e,t)=>eb(e,"radiusAxis",t,!1),pIe=ut([mIe],e=>{if(e)return e.map(t=>t.coordinate)}),gIe=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius"];function xIe(e,t){if(e==null)return{};var r,n,a=vIe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function vIe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function yh(){return yh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yh.apply(null,arguments)}function B$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function i1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B$(Object(r),!0).forEach(function(n){bIe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bIe(e,t,r){return(t=yIe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yIe(e){var t=wIe(e,"string");return typeof t=="symbol"?t:t+""}function wIe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EIe=(e,t,r,n)=>{var a="";return n.forEach((s,i)=>{var o=Zn(t,r,e,s);i?a+="L ".concat(o.x,",").concat(o.y):a+="M ".concat(o.x,",").concat(o.y)}),a+="Z",a},CIe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,polarAngles:s,radialLines:i}=e;if(!s||!s.length||!i)return null;var o=i1({stroke:"#ccc"},il(e));return S.createElement("g",{className:"recharts-polar-grid-angle"},s.map(c=>{var u=Zn(t,r,n,c),d=Zn(t,r,a,c);return S.createElement("line",yh({},o,{key:"line-".concat(c),x1:u.x,y1:u.y,x2:d.x,y2:d.y}))}))},_Ie=e=>{var{cx:t,cy:r,radius:n,index:a}=e,s=i1(i1({stroke:"#ccc"},il(e)),{},{fill:"none"});return S.createElement("circle",yh({},s,{className:gn("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(a),cx:t,cy:r,r:n}))},NIe=e=>{var{radius:t,index:r}=e,n=i1(i1({stroke:"#ccc"},il(e)),{},{fill:"none"});return S.createElement("path",yh({},n,{className:gn("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(r),d:EIe(t,e.cx,e.cy,e.polarAngles)}))},SIe=e=>{var{polarRadius:t,gridType:r}=e;return!t||!t.length?null:S.createElement("g",{className:"recharts-polar-grid-concentric"},t.map((n,a)=>{var s=a;return r==="circle"?S.createElement(_Ie,yh({key:s},e,{radius:n,index:a})):S.createElement(NIe,yh({key:s},e,{radius:n,index:a}))}))},Eae=e=>{var t,r,n,a,s,i,o,c,{gridType:u="polygon",radialLines:d=!0,angleAxisId:f=0,radiusAxisId:h=0,cx:p,cy:g,innerRadius:x,outerRadius:b}=e,y=xIe(e,gIe),w=ir($1),_=i1({cx:(t=(r=w==null?void 0:w.cx)!==null&&r!==void 0?r:p)!==null&&t!==void 0?t:0,cy:(n=(a=w==null?void 0:w.cy)!==null&&a!==void 0?a:g)!==null&&n!==void 0?n:0,innerRadius:(s=(i=w==null?void 0:w.innerRadius)!==null&&i!==void 0?i:x)!==null&&s!==void 0?s:0,outerRadius:(o=(c=w==null?void 0:w.outerRadius)!==null&&c!==void 0?c:b)!==null&&o!==void 0?o:0},y),{polarAngles:B,polarRadius:k,cx:I,cy:E,innerRadius:N,outerRadius:j}=_,R=ir(M=>hIe(M,f)),D=ir(M=>pIe(M,h)),O=Array.isArray(B)?B:R,L=Array.isArray(k)?k:D;return j<=0||O==null||L==null?null:S.createElement("g",{className:"recharts-polar-grid"},S.createElement(CIe,yh({cx:I,cy:E,innerRadius:N,outerRadius:j,gridType:u,radialLines:d},_,{polarAngles:O,polarRadius:L})),S.createElement(SIe,yh({cx:I,cy:E,innerRadius:N,outerRadius:j,gridType:u,radialLines:d},_,{polarAngles:O,polarRadius:L})))};Eae.displayName="PolarGrid";var h3={},m3={},j$;function kIe(){return j$||(j$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let i=1;i<r.length;i++){const o=r[i],c=n(o);c>s&&(s=c,a=o)}return a}e.maxBy=t}(m3)),m3}var T$;function BIe(){return T$||(T$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kIe(),r=S4(),n=$P();function a(s,i){if(s!=null)return t.maxBy(Array.from(s),n.iteratee(i??r.identity))}e.maxBy=a}(h3)),h3}var p3,I$;function jIe(){return I$||(I$=1,p3=BIe().maxBy),p3}var TIe=jIe();const IIe=Cl(TIe);var g3={},x3={},F$;function FIe(){return F$||(F$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let i=1;i<r.length;i++){const o=r[i],c=n(o);c<s&&(s=c,a=o)}return a}e.minBy=t}(x3)),x3}var O$;function OIe(){return O$||(O$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FIe(),r=S4(),n=$P();function a(s,i){if(s!=null)return t.minBy(Array.from(s),n.iteratee(i??r.identity))}e.minBy=a}(g3)),g3}var v3,D$;function DIe(){return D$||(D$=1,v3=OIe().minBy),v3}var PIe=DIe();const RIe=Cl(PIe);var LIe={radiusAxis:{},angleAxis:{}},Cae=Gc({name:"polarAxis",initialState:LIe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:MIe,removeRadiusAxis:UIe,addAngleAxis:QIe,removeAngleAxis:HIe}=Cae.actions,VIe=Cae.reducer,zIe=["cx","cy","angle","axisLine"],$Ie=["angle","tickFormatter","stroke","tick"];function Gw(){return Gw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gw.apply(null,arguments)}function P$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function UA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P$(Object(r),!0).forEach(function(n){rk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rk(e,t,r){return(t=GIe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GIe(e){var t=KIe(e,"string");return typeof t=="symbol"?t:t+""}function KIe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _ae(e,t){if(e==null)return{};var r,n,a=qIe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function qIe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Nae="radiusAxis";function WIe(e){var t=$a();return S.useEffect(()=>(t(MIe(e)),()=>{t(UIe(e))})),null}var XIe=(e,t,r,n)=>{var{coordinate:a}=e;return Zn(r,n,a,t)},YIe=e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle";break}return t},JIe=(e,t,r,n)=>{var a=IIe(n,i=>i.coordinate||0),s=RIe(n,i=>i.coordinate||0);return{cx:t,cy:r,startAngle:e,endAngle:e,innerRadius:s.coordinate||0,outerRadius:a.coordinate||0}},ZIe=(e,t)=>{var{cx:r,cy:n,angle:a,axisLine:s}=e,i=_ae(e,zIe),o=t.reduce((f,h)=>[Math.min(f[0],h.coordinate),Math.max(f[1],h.coordinate)],[1/0,-1/0]),c=Zn(r,n,o[0],a),u=Zn(r,n,o[1],a),d=UA(UA(UA({},il(i)),{},{fill:"none"},Wn(s,!1)),{},{x1:c.x,y1:c.y,x2:u.x,y2:u.y});return S.createElement("line",Gw({className:"recharts-polar-radius-axis-line"},d))},e6e=(e,t,r)=>{var n;return S.isValidElement(e)?n=S.cloneElement(e,t):typeof e=="function"?n=e(t):n=S.createElement(J1,Gw({},t,{className:"recharts-polar-radius-axis-tick-value"}),r),n},t6e=(e,t)=>{var{angle:r,tickFormatter:n,stroke:a,tick:s}=e,i=_ae(e,$Ie),o=YIe(e.orientation),c=il(i),u=Wn(s,!1),d=t.map((f,h)=>{var p=XIe(f,e.angle,e.cx,e.cy),g=UA(UA(UA(UA({textAnchor:o,transform:"rotate(".concat(90-r,", ").concat(p.x,", ").concat(p.y,")")},c),{},{stroke:"none",fill:a},u),{},{index:h},p),{},{payload:f});return S.createElement(ds,Gw({className:gn("recharts-polar-radius-axis-tick",Ote(s)),key:"tick-".concat(f.coordinate)},Ig(e,f,h)),e6e(s,g,n?n(f.value,h):f.value))});return S.createElement(ds,{className:"recharts-polar-radius-axis-ticks"},d)},r6e=e=>{var{radiusAxisId:t}=e,r=ir($1),n=ir(c=>Z1(c,"radiusAxis",t)),a=ir(c=>eb(c,"radiusAxis",t,!1));if(r==null||!a||!a.length)return null;var s=UA(UA(UA({},e),{},{scale:n},r),{},{radius:r.outerRadius}),{tick:i,axisLine:o}=s;return S.createElement(ds,{className:gn("recharts-polar-radius-axis",Nae,s.className)},o&&ZIe(s,a),i&&t6e(s,a),ql.renderCallByParent(s,JIe(s.angle,s.cx,s.cy,a)))};class nk extends S.PureComponent{render(){return S.createElement(S.Fragment,null,S.createElement(WIe,{domain:this.props.domain,id:this.props.radiusAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:this.props.allowDuplicatedCategory,allowDataOverflow:this.props.allowDataOverflow,reversed:this.props.reversed,includeHidden:this.props.includeHidden,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick}),S.createElement(r6e,this.props))}}rk(nk,"displayName","PolarRadiusAxis");rk(nk,"axisType",Nae);rk(nk,"defaultProps",Gl);var n6e=["children"];function wh(){return wh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wh.apply(null,arguments)}function R$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function PA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R$(Object(r),!0).forEach(function(n){ak(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ak(e,t,r){return(t=a6e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a6e(e){var t=s6e(e,"string");return typeof t=="symbol"?t:t+""}function s6e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function i6e(e,t){if(e==null)return{};var r,n,a=o6e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function o6e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var l6e=Math.PI/180,L$=1e-5,Sae="angleAxis";function c6e(e){var t=$a(),r=S.useMemo(()=>{var{children:s}=e,i=i6e(e,n6e);return i},[e]),n=ir(s=>z1(s,r.id)),a=r===n;return S.useEffect(()=>(t(QIe(r)),()=>{t(HIe(r))}),[t,r]),a?e.children:null}var u6e=(e,t)=>{var{cx:r,cy:n,radius:a,orientation:s,tickSize:i}=t,o=i||8,c=Zn(r,n,a,e.coordinate),u=Zn(r,n,a+(s==="inner"?-1:1)*o,e.coordinate);return{x1:c.x,y1:c.y,x2:u.x,y2:u.y}},d6e=(e,t)=>{var r=Math.cos(-e.coordinate*l6e);return r>L$?t==="outer"?"start":"end":r<-L$?t==="outer"?"end":"start":"middle"},A6e=e=>{var{cx:t,cy:r,radius:n,axisLineType:a,axisLine:s,ticks:i}=e;if(!s)return null;var o=PA(PA({},il(e)),{},{fill:"none"},Wn(s,!1));if(a==="circle")return S.createElement(u8,wh({className:"recharts-polar-angle-axis-line"},o,{cx:t,cy:r,r:n}));var c=i.map(u=>Zn(t,r,n,u.coordinate));return S.createElement(xae,wh({className:"recharts-polar-angle-axis-line"},o,{points:c}))},f6e=e=>{var{tick:t,tickProps:r,value:n}=e;return t?S.isValidElement(t)?S.cloneElement(t,r):typeof t=="function"?t(r):S.createElement(J1,wh({},r,{className:"recharts-polar-angle-axis-tick-value"}),n):null},h6e=e=>{var{tick:t,tickLine:r,tickFormatter:n,stroke:a,ticks:s}=e,i=il(e),o=Wn(t,!1),c=PA(PA({},i),{},{fill:"none"},Wn(r,!1)),u=s.map((d,f)=>{var h=u6e(d,e),p=d6e(d,e.orientation),g=PA(PA(PA({},i),{},{textAnchor:p,stroke:"none",fill:a},o),{},{index:f,payload:d,x:h.x2,y:h.y2});return S.createElement(ds,wh({className:gn("recharts-polar-angle-axis-tick",Ote(t)),key:"tick-".concat(d.coordinate)},Ig(e,d,f)),r&&S.createElement("line",wh({className:"recharts-polar-angle-axis-tick-line"},c,h)),S.createElement(f6e,{tick:t,tickProps:g,value:n?n(d.value,f):d.value}))});return S.createElement(ds,{className:"recharts-polar-angle-axis-ticks"},u)},m6e=e=>{var{angleAxisId:t}=e,r=ir($1),n=ir(o=>Z1(o,"angleAxis",t)),a=ac(),s=ir(o=>eb(o,"angleAxis",t,a));if(r==null||!s||!s.length)return null;var i=PA(PA(PA({},e),{},{scale:n},r),{},{radius:r.outerRadius});return S.createElement(ds,{className:gn("recharts-polar-angle-axis",Sae,i.className)},S.createElement(A6e,wh({},i,{ticks:s})),S.createElement(h6e,wh({},i,{ticks:s})))};class sk extends S.PureComponent{render(){return this.props.radius<=0?null:S.createElement(c6e,{id:this.props.angleAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:this.props.reversed,includeHidden:!1,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick,domain:this.props.domain},S.createElement(m6e,this.props))}}ak(sk,"displayName","PolarAngleAxis");ak(sk,"axisType",Sae);ak(sk,"defaultProps",DA);function M$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function U$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M$(Object(r),!0).forEach(function(n){p6e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function p6e(e,t,r){return(t=g6e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g6e(e){var t=x6e(e,"string");return typeof t=="symbol"?t:t+""}function x6e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var v6e=(e,t)=>t,p8=ut([d8,v6e],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),b6e=[],g8=(e,t,r)=>(r==null?void 0:r.length)===0?b6e:r,kae=ut([$4,p8,g8],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>U$(U$({},t.presentationProps),s.props))),a!=null)return a}}),y6e=ut([kae,p8,g8],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var s,i=Pa(n,t.nameKey,t.name),o;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?o=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?o=n.fill:o=t.fill,{value:U1(i,t.dataKey),color:o,payload:n,type:t.legendType}})}),w6e=ut([kae,p8,g8,ki],(e,t,r,n)=>{if(!(t==null||e==null))return mFe({offset:n,pieSettings:t,displayedData:e,cells:r})}),b3={},Q$;function E6e(){return Q$||(Q$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t}(b3)),b3}var y3,H$;function C6e(){return H$||(H$=1,y3=E6e().isPlainObject),y3}var _6e=C6e();const N6e=Cl(_6e);function PN(){return PN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},PN.apply(null,arguments)}var V$=(e,t,r,n,a)=>{var s=r-n,i;return i="M ".concat(e,",").concat(t),i+="L ".concat(e+r,",").concat(t),i+="L ".concat(e+r-s/2,",").concat(t+a),i+="L ".concat(e+r-s/2-n,",").concat(t+a),i+="L ".concat(e,",").concat(t," Z"),i},S6e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},k6e=e=>{var t=zu(e,S6e),r=S.useRef(),[n,a]=S.useState(-1);S.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&a(b)}catch{}},[]);var{x:s,y:i,upperWidth:o,lowerWidth:c,height:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isUpdateAnimationActive:g}=t;if(s!==+s||i!==+i||o!==+o||c!==+c||u!==+u||o===0&&c===0||u===0)return null;var x=gn("recharts-trapezoid",d);return g?S.createElement(bN,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:u,x:s,y:i},to:{upperWidth:o,lowerWidth:c,height:u,x:s,y:i},duration:h,animationEasing:f,isActive:g},b=>{var{upperWidth:y,lowerWidth:w,height:_,x:B,y:k}=b;return S.createElement(bN,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,easing:f},S.createElement("path",PN({},Wn(t,!0),{className:x,d:V$(B,k,y,w,_),ref:r})))}):S.createElement("g",null,S.createElement("path",PN({},Wn(t,!0),{className:x,d:V$(s,i,o,c,u)})))},B6e=["option","shapeType","propTransformer","activeClassName","isActive"];function j6e(e,t){if(e==null)return{};var r,n,a=T6e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function T6e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function z$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function RN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z$(Object(r),!0).forEach(function(n){I6e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I6e(e,t,r){return(t=F6e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F6e(e){var t=O6e(e,"string");return typeof t=="symbol"?t:t+""}function O6e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D6e(e,t){return RN(RN({},t),e)}function P6e(e,t){return e==="symbols"}function $$(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return S.createElement(ere,r);case"trapezoid":return S.createElement(k6e,r);case"sector":return S.createElement(nre,r);case"symbols":if(P6e(t))return S.createElement(RP,r);break;default:return null}}function R6e(e){return S.isValidElement(e)?e.props:e}function Bae(e){var{option:t,shapeType:r,propTransformer:n=D6e,activeClassName:a="recharts-active-shape",isActive:s}=e,i=j6e(e,B6e),o;if(S.isValidElement(t))o=S.cloneElement(t,RN(RN({},i),R6e(t)));else if(typeof t=="function")o=t(i);else if(N6e(t)&&typeof t!="boolean"){var c=n(t,i);o=S.createElement($$,{shapeType:r,elementProps:c})}else{var u=i;o=S.createElement($$,{shapeType:r,elementProps:u})}return s?S.createElement(ds,{className:a},o):o}var x8=(e,t)=>{var r=$a();return(n,a)=>s=>{e==null||e(n,a,s),r(Hne({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},v8=e=>{var t=$a();return(r,n)=>a=>{e==null||e(r,n,a),t(_je())}},b8=(e,t)=>{var r=$a();return(n,a)=>s=>{e==null||e(n,a,s),r(Nje({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function y8(e){var{fn:t,args:r}=e,n=$a(),a=ac();return S.useEffect(()=>{if(!a){var s=t(r);return n(wje(s)),()=>{n(Eje(s))}}},[t,r,n,a]),null}var jae=()=>{};function L6e(e){var{legendPayload:t}=e,r=$a(),n=ac();return S.useEffect(()=>n?jae:(r(zte(t)),()=>{r($te(t))}),[r,n,t]),null}function Tae(e){var{legendPayload:t}=e,r=$a(),n=ir(In);return S.useEffect(()=>n!=="centric"&&n!=="radial"?jae:(r(zte(t)),()=>{r($te(t))}),[r,n,t]),null}function w8(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=S.useRef(Pw(t)),n=S.useRef(e);return n.current!==e&&(r.current=Pw(t),n.current=e),r.current}var w3,M6e=()=>{var[e]=S.useState(()=>Pw("uid-"));return e},U6e=(w3=_fe.useId)!==null&&w3!==void 0?w3:M6e;function Q6e(e,t){var r=U6e();return t||(e?"".concat(e,"-").concat(r):r)}var H6e=S.createContext(void 0),E8=e=>{var{id:t,type:r,children:n}=e,a=Q6e("recharts-".concat(r),t);return S.createElement(H6e.Provider,{value:a},n(a))},V6e={cartesianItems:[],polarItems:[]},Iae=Gc({name:"graphicalItems",initialState:V6e,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=sh(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=sh(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=sh(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:z6e,replaceCartesianGraphicalItem:$6e,removeCartesianGraphicalItem:G6e,addPolarGraphicalItem:K6e,removePolarGraphicalItem:q6e}=Iae.actions,W6e=Iae.reducer;function X6e(e){var t=$a(),r=S.useRef(null);return S.useEffect(()=>{r.current===null?t(z6e(e)):r.current!==e&&t($6e({prev:r.current,next:e})),r.current=e},[t,e]),S.useEffect(()=>()=>{r.current&&(t(G6e(r.current)),r.current=null)},[t]),null}function Fae(e){var t=$a();return S.useEffect(()=>(t(K6e(e)),()=>{t(q6e(e))}),[t,e]),null}function Y6e(){}var J6e={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},G$={t:0},E3={t:1};function C8(e){var t=zu(e,J6e),{isActive:r,canBegin:n,duration:a,easing:s,begin:i,onAnimationEnd:o,onAnimationStart:c,children:u}=t,d=Zte("JavascriptAnimate",t.animationManager),[f,h]=S.useState(r?G$:E3),p=S.useRef(null);return S.useEffect(()=>{r||h(E3)},[r]),S.useEffect(()=>{if(!r||!n)return Y6e;var g=Jte(G$,E3,Xte(s),a,h,d.getTimeoutController()),x=()=>{p.current=g()};return d.start([c,i,x,a,o]),()=>{d.stop(),p.current&&p.current(),o()}},[r,n,a,s,i,c,o,d]),u(f.t)}var Z6e=["onMouseEnter","onClick","onMouseLeave"],eFe=["id"],tFe=["id"];function _8(e,t){if(e==null)return{};var r,n,a=rFe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function rFe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function K$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _s(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K$(Object(r),!0).forEach(function(n){nFe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nFe(e,t,r){return(t=aFe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aFe(e){var t=sFe(e,"string");return typeof t=="symbol"?t:t+""}function sFe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Eh(){return Eh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Eh.apply(null,arguments)}function iFe(e){var t=S.useMemo(()=>L2(e.children,pg),[e.children]),r=ir(n=>y6e(n,e.id,t));return r==null?null:S.createElement(Tae,{legendPayload:r})}function oFe(e){var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:i,name:o,hide:c,tooltipType:u}=e;return{dataDefinedOnItem:n==null?void 0:n.map(d=>d.tooltipPayload),positions:n==null?void 0:n.map(d=>d.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:i,dataKey:t,nameKey:r,name:U1(o,t),hide:c,type:u,color:i,unit:""}}}var lFe=(e,t)=>e>t?"start":e<t?"end":"middle",cFe=(e,t,r)=>typeof t=="function"?t(e):wl(t,r,r*.8),uFe=(e,t,r)=>{var{top:n,left:a,width:s,height:i}=t,o=Fte(s,i),c=a+wl(e.cx,s,s/2),u=n+wl(e.cy,i,i/2),d=wl(e.innerRadius,o,0),f=cFe(r,e.outerRadius,o),h=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:h}},dFe=(e,t)=>{var r=Wi(t-e),n=Math.min(Math.abs(t-e),360);return r*n},AFe=(e,t)=>{if(S.isValidElement(e))return S.cloneElement(e,t);if(typeof e=="function")return e(t);var r=gn("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return S.createElement(Kte,Eh({},t,{type:"linear",className:r}))},fFe=(e,t,r)=>{if(S.isValidElement(e))return S.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),S.isValidElement(n)))return n;var a=gn("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return S.createElement(J1,Eh({},t,{alignmentBaseline:"middle",className:a}),n)};function hFe(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:s,dataKey:i}=r;if(!n||!a||!t)return null;var o=il(r),c=Wn(a,!1),u=Wn(s,!1),d=typeof a=="object"&&"offsetRadius"in a&&a.offsetRadius||20,f=t.map((h,p)=>{var g=(h.startAngle+h.endAngle)/2,x=Zn(h.cx,h.cy,h.outerRadius+d,g),b=_s(_s(_s(_s({},o),h),{},{stroke:"none"},c),{},{index:p,textAnchor:lFe(x.x,h.cx)},x),y=_s(_s(_s(_s({},o),h),{},{fill:"none",stroke:h.fill},u),{},{index:p,points:[Zn(h.cx,h.cy,h.outerRadius,g),x],key:"line"});return S.createElement(ds,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(p)},s&&AFe(s,y),fFe(a,b,Pa(h,i)))});return S.createElement(ds,{className:"recharts-pie-labels"},f)}function Oae(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a,showLabels:s}=e,i=ir(ym),{onMouseEnter:o,onClick:c,onMouseLeave:u}=a,d=_8(a,Z6e),f=x8(o,a.dataKey),h=v8(u),p=b8(c,a.dataKey);return t==null?null:S.createElement(S.Fragment,null,t.map((g,x)=>{if((g==null?void 0:g.startAngle)===0&&(g==null?void 0:g.endAngle)===0&&t.length!==1)return null;var b=r&&String(x)===i,y=i?n:null,w=b?r:y,_=_s(_s({},g),{},{stroke:g.stroke,tabIndex:-1,[Mte]:x,[Ute]:a.dataKey});return S.createElement(ds,Eh({tabIndex:-1,className:"recharts-pie-sector"},Ig(d,g,x),{onMouseEnter:f(g,x),onMouseLeave:h(g,x),onClick:p(g,x),key:"sector-".concat(g==null?void 0:g.startAngle,"-").concat(g==null?void 0:g.endAngle,"-").concat(g.midAngle,"-").concat(x)}),S.createElement(Bae,Eh({option:w,isActive:b,shapeType:"sector"},_)))}),S.createElement(hFe,{sectors:t,props:a,showLabels:s}))}function mFe(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:s}=e,{cornerRadius:i,startAngle:o,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,h=Math.abs(r.minAngle),p=dFe(o,c),g=Math.abs(p),x=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,b=n.filter(I=>Pa(I,u,0)!==0).length,y=(g>=360?b:b-1)*x,w=g-b*h-y,_=n.reduce((I,E)=>{var N=Pa(E,u,0);return I+(ur(N)?N:0)},0),B;if(_>0){var k;B=n.map((I,E)=>{var N=Pa(I,u,0),j=Pa(I,d,E),R=uFe(r,s,I),D=(ur(N)?N:0)/_,O,L=_s(_s({},I),a&&a[E]&&a[E].props);E?O=k.endAngle+Wi(p)*x*(N!==0?1:0):O=o;var M=O+Wi(p)*((N!==0?h:0)+D*w),J=(O+M)/2,V=(R.innerRadius+R.outerRadius)/2,K=[{name:j,value:N,payload:L,dataKey:u,type:f}],z=Zn(R.cx,R.cy,V,J);return k=_s(_s(_s(_s({},r.presentationProps),{},{percent:D,cornerRadius:i,name:j,tooltipPayload:K,midAngle:J,middleRadius:V,tooltipPosition:z},L),R),{},{value:Pa(I,u),startAngle:O,endAngle:M,payload:L,paddingAngle:Wi(p)*x}),k})}return B}function pFe(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:o,activeShape:c,inactiveShape:u,onAnimationStart:d,onAnimationEnd:f}=t,h=w8(t,"recharts-pie-"),p=r.current,[g,x]=S.useState(!0),b=S.useCallback(()=>{typeof f=="function"&&f(),x(!1)},[f]),y=S.useCallback(()=>{typeof d=="function"&&d(),x(!0)},[d]);return S.createElement(C8,{begin:s,duration:i,isActive:a,easing:o,onAnimationStart:y,onAnimationEnd:b,key:h},w=>{var _=[],B=n&&n[0],k=B.startAngle;return n.forEach((I,E)=>{var N=p&&p[E],j=E>0?bm(I,"paddingAngle",0):0;if(N){var R=nv(N.endAngle-N.startAngle,I.endAngle-I.startAngle),D=_s(_s({},I),{},{startAngle:k+j,endAngle:k+R(w)+j});_.push(D),k=D.endAngle}else{var{endAngle:O,startAngle:L}=I,M=nv(0,O-L),J=M(w),V=_s(_s({},I),{},{startAngle:k+j,endAngle:k+J+j});_.push(V),k=V.endAngle}}),r.current=_,S.createElement(ds,null,S.createElement(Oae,{sectors:_,activeShape:c,inactiveShape:u,allOtherPieProps:t,showLabels:!g}))})}function gFe(e){var{sectors:t,isAnimationActive:r,activeShape:n,inactiveShape:a}=e,s=S.useRef(null),i=s.current;return r&&t&&t.length&&(!i||i!==t)?S.createElement(pFe,{props:e,previousSectorsRef:s}):S.createElement(Oae,{sectors:t,activeShape:n,inactiveShape:a,allOtherPieProps:e,showLabels:!0})}function xFe(e){var{hide:t,className:r,rootTabIndex:n}=e,a=gn("recharts-pie",r);return t?null:S.createElement(ds,{tabIndex:n,className:a},S.createElement(gFe,e))}var vFe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Fg.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function bFe(e){var{id:t}=e,r=_8(e,eFe),n=S.useMemo(()=>L2(e.children,pg),[e.children]),a=ir(s=>w6e(s,t,n));return S.createElement(S.Fragment,null,S.createElement(y8,{fn:oFe,args:_s(_s({},e),{},{sectors:a})}),S.createElement(xFe,Eh({},r,{sectors:a})))}function N8(e){var t=zu(e,vFe),{id:r}=t,n=_8(t,tFe),a=il(n);return S.createElement(E8,{id:r,type:"pie"},s=>S.createElement(S.Fragment,null,S.createElement(Fae,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a}),S.createElement(iFe,Eh({},n,{id:s})),S.createElement(bFe,Eh({},n,{id:s})),n.children))}N8.displayName="Pie";var yFe=ut([ki],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),wFe=ut([yFe,Th,Ih],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Dae=()=>ir(wFe),EFe=()=>ir(ATe);function q$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function W$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q$(Object(r),!0).forEach(function(n){CFe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CFe(e,t,r){return(t=_Fe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Fe(e){var t=NFe(e,"string");return typeof t=="symbol"?t:t+""}function NFe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SFe=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:s}=e;if(a===!1||t.x==null||t.y==null)return null;var i=W$(W$({index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Wn(a,!1)),TP(a)),o;return S.isValidElement(a)?o=S.cloneElement(a,i):typeof a=="function"?o=a(i):o=S.createElement(u8,i),S.createElement(ds,{className:"recharts-active-dot"},o)};function kFe(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,s=ir(ym),i=EFe();if(t==null||i==null)return null;var o=t.find(c=>i.includes(c.payload));return ks(o)?null:SFe({point:o,childIndex:Number(s),mainColor:r,dataKey:a,activeDot:n})}function X$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function LN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X$(Object(r),!0).forEach(function(n){BFe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BFe(e,t,r){return(t=jFe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jFe(e){var t=TFe(e,"string");return typeof t=="symbol"?t:t+""}function TFe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pae=(e,t)=>Z1(e,"radiusAxis",t),IFe=ut([Pae],e=>{if(e!=null)return{scale:e}}),FFe=ut([G2,Pae],(e,t)=>{if(!(e==null||t==null))return LN(LN({},e),{},{scale:t})}),OFe=(e,t,r,n)=>eb(e,"radiusAxis",t,n),Rae=(e,t,r)=>z1(e,r),Lae=(e,t,r)=>Z1(e,"angleAxis",r),DFe=ut([Rae,Lae],(e,t)=>{if(!(e==null||t==null))return LN(LN({},e),{},{scale:t})}),PFe=(e,t,r,n)=>eb(e,"angleAxis",r,n),RFe=ut([Rae,Lae,$1],(e,t,r)=>{if(!(r==null||t==null))return{scale:t,type:e.type,dataKey:e.dataKey,cx:r.cx,cy:r.cy}}),LFe=(e,t,r,n,a)=>a,MFe=ut([In,FFe,OFe,DFe,PFe],(e,t,r,n,a)=>Dm(e,"radiusAxis")?Mw(t,r,!1):Mw(n,a,!1)),UFe=ut([d8,LFe],(e,t)=>{if(e.some(r=>r.type==="radar"&&t===r.dataKey))return t}),QFe=ut([IFe,RFe,$4,UFe,MFe],(e,t,r,n,a)=>{var{chartData:s,dataStartIndex:i,dataEndIndex:o}=r;if(!(e==null||t==null||s==null||a==null||n==null)){var c=s.slice(i,o+1);return XFe({radiusAxis:e,angleAxis:t,displayedData:c,dataKey:n,bandSize:a})}}),HFe=["id"];function VFe(e,t){if(e==null)return{};var r,n,a=zFe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function zFe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Y$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y$(Object(r),!0).forEach(function(n){S8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S8(e,t,r){return(t=$Fe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Fe(e){var t=GFe(e,"string");return typeof t=="symbol"?t:t+""}function GFe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function o1(){return o1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o1.apply(null,arguments)}function k8(e,t){return e&&e!=="none"?e:t}var KFe=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:k8(n,a),value:U1(r,t),payload:e}]};function qFe(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,tooltipType:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,nameKey:void 0,dataKey:t,name:U1(s,t),hide:i,type:o,color:k8(r,a),unit:""}}}function WFe(e,t){var r;return S.isValidElement(e)?r=S.cloneElement(e,t):typeof e=="function"?r=e(t):r=S.createElement(u8,o1({},t,{className:gn("recharts-radar-dot",typeof e!="boolean"?e.className:"")})),r}function XFe(e){var{radiusAxis:t,angleAxis:r,displayedData:n,dataKey:a,bandSize:s}=e,{cx:i,cy:o}=r,c=!1,u=[],d=r.type!=="number"?s??0:0;n.forEach((h,p)=>{var g=Pa(h,r.dataKey,p),x=Pa(h,a),b=r.scale(g)+d,y=Array.isArray(x)?gae(x):x,w=ks(y)?void 0:t.scale(y);Array.isArray(x)&&x.length>=2&&(c=!0),u.push(bl(bl({},Zn(i,o,w,b)),{},{name:g,value:x,cx:i,cy:o,radius:w,angle:b,payload:h}))});var f=[];return c&&u.forEach(h=>{if(Array.isArray(h.value)){var p=h.value[0],g=ks(p)?void 0:t.scale(p);f.push(bl(bl({},h),{},{radius:g},Zn(i,o,g,h.angle)))}else f.push(h)}),{points:u,isRange:c,baseLinePoints:f}}function YFe(e){var{points:t,props:r}=e,{dot:n,dataKey:a}=r;if(!n)return null;var{id:s}=r,i=VFe(r,HFe),o=il(i),c=Wn(n,!0),u=t.map((d,f)=>{var h=bl(bl(bl({key:"dot-".concat(f),r:3},o),c),{},{dataKey:a,cx:d.x,cy:d.y,index:f,payload:d});return WFe(n,h)});return S.createElement(ds,{className:"recharts-radar-dots"},u)}function Mae(e){var{points:t,props:r,showLabels:n}=e;if(t==null)return null;var{shape:a,isRange:s,baseLinePoints:i,connectNulls:o}=r,c=f=>{var{onMouseEnter:h}=r;h&&h(r,f)},u=f=>{var{onMouseLeave:h}=r;h&&h(r,f)},d;return S.isValidElement(a)?d=S.cloneElement(a,bl(bl({},r),{},{points:t})):typeof a=="function"?d=a(bl(bl({},r),{},{points:t})):d=S.createElement(xae,o1({},Wn(r,!0),{onMouseEnter:c,onMouseLeave:u,points:t,baseLinePoints:s?i:null,connectNulls:o})),S.createElement(ds,{className:"recharts-radar-polygon"},d,S.createElement(YFe,{props:r,points:t}),n&&sm.renderCallByParent(r,t))}function JFe(e){var{props:t,previousPointsRef:r}=e,{points:n,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:o,onAnimationEnd:c,onAnimationStart:u}=t,d=r.current,f=w8(t,"recharts-radar-"),[h,p]=S.useState(!0),g=S.useCallback(()=>{typeof c=="function"&&c(),p(!1)},[c]),x=S.useCallback(()=>{typeof u=="function"&&u(),p(!0)},[u]);return S.createElement(C8,{begin:s,duration:i,isActive:a,easing:o,key:"radar-".concat(f),onAnimationEnd:g,onAnimationStart:x},b=>{var y=d&&d.length/n.length,w=b===1?n:n.map((_,B)=>{var k=d&&d[Math.floor(B*y)];if(k){var I=nv(k.x,_.x),E=nv(k.y,_.y);return bl(bl({},_),{},{x:I(b),y:E(b)})}var N=nv(_.cx,_.x),j=nv(_.cy,_.y);return bl(bl({},_),{},{x:N(b),y:j(b)})});return b>0&&(r.current=w),S.createElement(Mae,{points:w,props:t,showLabels:!h})})}function ZFe(e){var{points:t,isAnimationActive:r,isRange:n}=e,a=S.useRef(void 0),s=a.current;return r&&t&&t.length&&!n&&(!s||s!==t)?S.createElement(JFe,{props:e,previousPointsRef:a}):S.createElement(Mae,{points:t,props:e,showLabels:!0})}var eOe={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Fg.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"};class tOe extends S.PureComponent{render(){var{hide:t,className:r,points:n}=this.props;if(t)return null;var a=gn("recharts-radar",r);return S.createElement(S.Fragment,null,S.createElement(ds,{className:a},S.createElement(ZFe,this.props)),S.createElement(kFe,{points:n,mainColor:k8(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}function rOe(e){var t=ac(),r=ir(n=>QFe(n,e.radiusAxisId,e.angleAxisId,t,e.dataKey));return S.createElement(tOe,o1({},e,{points:r==null?void 0:r.points,baseLinePoints:r==null?void 0:r.baseLinePoints,isRange:r==null?void 0:r.isRange}))}class B8 extends S.PureComponent{render(){return S.createElement(E8,{id:this.props.id,type:"radar"},t=>S.createElement(S.Fragment,null,S.createElement(Fae,{type:"radar",id:t,data:void 0,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:this.props.angleAxisId,radiusAxisId:this.props.radiusAxisId}),S.createElement(Tae,{legendPayload:KFe(this.props)}),S.createElement(y8,{fn:qFe,args:this.props}),S.createElement(rOe,o1({},this.props,{id:t}))))}}S8(B8,"displayName","Radar");S8(B8,"defaultProps",eOe);var nOe="Invariant failed";function aOe(e,t){throw new Error(nOe)}var sOe=["x","y"];function jF(){return jF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jF.apply(null,arguments)}function J$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ry(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J$(Object(r),!0).forEach(function(n){iOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iOe(e,t,r){return(t=oOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oOe(e){var t=lOe(e,"string");return typeof t=="symbol"?t:t+""}function lOe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cOe(e,t){if(e==null)return{};var r,n,a=uOe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function uOe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function dOe(e,t){var{x:r,y:n}=e,a=cOe(e,sOe),s="".concat(r),i=parseInt(s,10),o="".concat(n),c=parseInt(o,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return ry(ry(ry(ry(ry({},t),a),i?{x:i}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function Uae(e){return S.createElement(Bae,jF({shapeType:"rectangle",propTransformer:dOe,activeClassName:"recharts-active-bar"},e))}var AOe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(ur(t))return t;var s=ur(n)||ks(n);return s?t(n,a):(s||aOe(),r)}},fOe={},Qae=Gc({name:"errorBars",initialState:fOe,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:Bht,removeErrorBar:jht}=Qae.actions,hOe=Qae.reducer,mOe=["children"];function pOe(e,t){if(e==null)return{};var r,n,a=gOe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function gOe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var xOe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},vOe=S.createContext(xOe);function bOe(e){var{children:t}=e,r=pOe(e,mOe);return S.createElement(vOe.Provider,{value:r},t)}function Hae(e,t){var r,n,a=ir(u=>Oh(u,e)),s=ir(u=>Mm(u,t)),i=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Sc.allowDataOverflow,o=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:kc.allowDataOverflow,c=i||o;return{needClip:c,needClipX:i,needClipY:o}}function yOe(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=Dae(),{needClipX:s,needClipY:i,needClip:o}=Hae(t,r);if(!o)return null;var{x:c,y:u,width:d,height:f}=a;return S.createElement("clipPath",{id:"clipPath-".concat(n)},S.createElement("rect",{x:s?c:c-d/2,y:i?u:u-f/2,width:s?d:d*2,height:i?f:f*2}))}var wOe=["onMouseEnter","onMouseLeave","onClick"],EOe=["value","background","tooltipPosition"],COe=["id"],_Oe=["onMouseEnter","onClick","onMouseLeave"];function l1(){return l1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l1.apply(null,arguments)}function Z$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z$(Object(r),!0).forEach(function(n){NOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NOe(e,t,r){return(t=SOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SOe(e){var t=kOe(e,"string");return typeof t=="symbol"?t:t+""}function kOe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MN(e,t){if(e==null)return{};var r,n,a=BOe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function BOe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var jOe=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:U1(r,t),payload:e}]};function TOe(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,unit:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:U1(s,t),hide:i,type:e.tooltipType,color:e.fill,unit:o}}}function IOe(e){var t=ir(ym),{data:r,dataKey:n,background:a,allOtherBarProps:s}=e,{onMouseEnter:i,onMouseLeave:o,onClick:c}=s,u=MN(s,wOe),d=x8(i,n),f=v8(o),h=b8(c,n);if(!a||r==null)return null;var p=Wn(a,!1);return S.createElement(S.Fragment,null,r.map((g,x)=>{var{value:b,background:y,tooltipPosition:w}=g,_=MN(g,EOe);if(!y)return null;var B=d(g,x),k=f(g,x),I=h(g,x),E=qo(qo(qo(qo(qo({option:a,isActive:String(x)===t},_),{},{fill:"#eee"},y),p),Ig(u,g,x)),{},{onMouseEnter:B,onMouseLeave:k,onClick:I,dataKey:n,index:x,className:"recharts-bar-background-rectangle"});return S.createElement(Uae,l1({key:"background-bar-".concat(x)},E))}))}function Vae(e){var{data:t,props:r,showLabels:n}=e,a=il(r),{id:s}=a,i=MN(a,COe),{shape:o,dataKey:c,activeBar:u}=r,d=ir(ym),f=ir(tae),{onMouseEnter:h,onClick:p,onMouseLeave:g}=r,x=MN(r,_Oe),b=x8(h,c),y=v8(g),w=b8(p,c);return t?S.createElement(S.Fragment,null,t.map((_,B)=>{var k=u&&String(B)===d&&(f==null||c===f),I=k?u:o,E=qo(qo(qo({},i),_),{},{isActive:k,option:I,index:B,dataKey:c});return S.createElement(ds,l1({className:"recharts-bar-rectangle"},Ig(x,_,B),{onMouseEnter:b(_,B),onMouseLeave:y(_,B),onClick:w(_,B),key:"rectangle-".concat(_==null?void 0:_.x,"-").concat(_==null?void 0:_.y,"-").concat(_==null?void 0:_.value,"-").concat(B)}),S.createElement(Uae,E))}),n&&sm.renderCallByParent(r,t)):null}function FOe(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,h=w8(t,"recharts-bar-"),[p,g]=S.useState(!1),x=S.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),b=S.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return S.createElement(C8,{begin:i,duration:o,isActive:s,easing:c,onAnimationEnd:x,onAnimationStart:b,key:h},y=>{var w=y===1?n:n==null?void 0:n.map((_,B)=>{var k=f&&f[B];if(k)return qo(qo({},_),{},{x:wx(k.x,_.x,y),y:wx(k.y,_.y,y),width:wx(k.width,_.width,y),height:wx(k.height,_.height,y)});if(a==="horizontal"){var I=wx(0,_.height,y);return qo(qo({},_),{},{y:_.y+_.height-I,height:I})}var E=wx(0,_.width,y);return qo(qo({},_),{},{width:E})});return y>0&&(r.current=w??null),w==null?null:S.createElement(ds,null,S.createElement(Vae,{props:t,data:w,showLabels:!p}))})}function OOe(e){var{data:t,isAnimationActive:r}=e,n=S.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?S.createElement(FOe,{previousRectanglesRef:n,props:e}):S.createElement(Vae,{props:e,data:t,showLabels:!0})}var zae=0,DOe=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Pa(e,t)}};class POe extends S.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:i,needClip:o,background:c,id:u}=this.props;if(t)return null;var d=gn("recharts-bar",a),f=u;return S.createElement(ds,{className:d,id:u},o&&S.createElement("defs",null,S.createElement(yOe,{clipPathId:f,xAxisId:s,yAxisId:i})),S.createElement(ds,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},S.createElement(IOe,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),S.createElement(OOe,this.props)),this.props.children)}}var ROe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Fg.isSsr,legendType:"rect",minPointSize:zae,xAxisId:0,yAxisId:0};function LOe(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=Hae(t,r),h=nR(),p=ac(),g=L2(e.children,pg),x=ir(w=>dDe(w,t,r,p,e.id,g));if(h!=="vertical"&&h!=="horizontal")return null;var b,y=x==null?void 0:x[0];return y==null||y.height==null||y.width==null?b=0:b=h==="vertical"?y.height/2:y.width/2,S.createElement(bOe,{xAxisId:t,yAxisId:r,data:x,dataPointFormatter:DOe,errorBarOffset:b},S.createElement(POe,l1({},e,{layout:h,needClip:f,data:x,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function MOe(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:i,yAxis:o,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:p}=e,g=t==="horizontal"?o:i,x=d?g.scale.domain():null,b=O5e({numericAxis:g});return f.map((y,w)=>{var _,B,k,I,E,N;d?_=k5e(d[w],x):(_=Pa(y,r),Array.isArray(_)||(_=[b,_]));var j=AOe(n,zae)(_[1],w);if(t==="horizontal"){var R,[D,O]=[o.scale(_[0]),o.scale(_[1])];B=wV({axis:i,ticks:c,bandSize:s,offset:a.offset,entry:y,index:w}),k=(R=O??D)!==null&&R!==void 0?R:void 0,I=a.size;var L=D-O;if(E=Uc(L)?0:L,N={x:B,y:h.top,width:I,height:h.height},Math.abs(j)>0&&Math.abs(E)<Math.abs(j)){var M=Wi(E||j)*(Math.abs(j)-Math.abs(E));k-=M,E+=M}}else{var[J,V]=[i.scale(_[0]),i.scale(_[1])];if(B=J,k=wV({axis:o,ticks:u,bandSize:s,offset:a.offset,entry:y,index:w}),I=V-J,E=a.size,N={x:h.left,y:k,width:h.width,height:E},Math.abs(j)>0&&Math.abs(I)<Math.abs(j)){var K=Wi(I||j)*(Math.abs(j)-Math.abs(I));I+=K}}if(B==null||k==null||I==null||E==null)return null;var z=qo(qo({},y),{},{x:B,y:k,width:I,height:E,value:d?_:_[1],payload:y,background:N,tooltipPosition:{x:B+I/2,y:k+E/2}},p&&p[w]&&p[w].props);return z}).filter(Boolean)}function Kw(e){var t=zu(e,ROe),r=ac();return S.createElement(E8,{id:t.id,type:"bar"},n=>S.createElement(S.Fragment,null,S.createElement(L6e,{legendPayload:jOe(t)}),S.createElement(y8,{fn:TOe,args:t}),S.createElement(X6e,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:F5e(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),S.createElement(LOe,l1({},t,{id:n}))))}Kw.displayName="Bar";function eG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function HC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eG(Object(r),!0).forEach(function(n){UOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UOe(e,t,r){return(t=QOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QOe(e){var t=HOe(e,"string");return typeof t=="symbol"?t:t+""}function HOe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VOe=(e,t)=>t,zOe=(e,t,r)=>r,$Oe=(e,t,r,n)=>n,GOe=(e,t,r,n,a)=>a,Z2=ut([LR,GOe],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),KOe=ut([Z2],e=>e==null?void 0:e.maxBarSize),qOe=(e,t,r,n,a,s)=>s,tG=(e,t,r)=>{var n=r??e;if(!ks(n))return wl(n,t,0)},WOe=ut([In,LR,VOe,zOe,$Oe],(e,t,r,n,a)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),XOe=(e,t,r,n)=>{var a=In(e);return a==="horizontal"?EF(e,"yAxis",r,n):EF(e,"xAxis",t,n)},YOe=(e,t,r)=>{var n=In(e);return n==="horizontal"?Vz(e,"xAxis",t):Vz(e,"yAxis",r)},JOe=(e,t,r)=>{var n={},a=e.filter(W4),s=e.filter(u=>u.stackId==null),i=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),o=Object.entries(i).map(u=>{var[d,f]=u,h=f.map(g=>g.dataKey),p=tG(t,r,f[0].barSize);return{stackId:d,dataKeys:h,barSize:p}}),c=s.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=tG(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...o,...c]},ZOe=ut([WOe,EBe,YOe],JOe),eDe=(e,t,r,n,a)=>{var s,i,o=Z2(e,t,r,n,a);if(o!=null){var c=In(e),u=rne(e),{maxBarSize:d}=o,f=ks(d)?u:d,h,p;return c==="horizontal"?(h=s1(e,"xAxis",t,n),p=a1(e,"xAxis",t,n)):(h=s1(e,"yAxis",r,n),p=a1(e,"yAxis",r,n)),(s=(i=Mw(h,p,!0))!==null&&i!==void 0?i:f)!==null&&s!==void 0?s:0}},$ae=(e,t,r,n)=>{var a=In(e),s,i;return a==="horizontal"?(s=s1(e,"xAxis",t,n),i=a1(e,"xAxis",t,n)):(s=s1(e,"yAxis",r,n),i=a1(e,"yAxis",r,n)),Mw(s,i)};function tDe(e,t,r,n,a){var s=n.length;if(!(s<1)){var i=wl(e,r,0,!0),o,c=[];if(Vc(n[0].barSize)){var u=!1,d=r/s,f=n.reduce((y,w)=>y+(w.barSize||0),0);f+=(s-1)*i,f>=r&&(f-=(s-1)*i,i=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var h=(r-f)/2>>0,p={offset:h-i,size:0};o=n.reduce((y,w)=>{var _,B={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:p.offset+p.size+i,size:u?d:(_=w.barSize)!==null&&_!==void 0?_:0}},k=[...y,B];return p=k[k.length-1].position,k},c)}else{var g=wl(t,r,0,!0);r-2*g-(s-1)*i<=0&&(i=0);var x=(r-2*g-(s-1)*i)/s;x>1&&(x>>=0);var b=Vc(a)?Math.min(x,a):x;o=n.reduce((y,w,_)=>[...y,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:g+(x+i)*_+(x-b)/2,size:b}}],c)}return o}}var rDe=(e,t,r,n,a,s,i)=>{var o=ks(i)?t:i,c=tDe(r,n,a!==s?a:s,e,o);return a!==s&&c!=null&&(c=c.map(u=>HC(HC({},u),{},{position:HC(HC({},u.position),{},{offset:u.position.offset-a/2})}))),c},nDe=ut([ZOe,rne,wBe,nne,eDe,$ae,KOe],rDe),aDe=(e,t,r,n)=>s1(e,"xAxis",t,n),sDe=(e,t,r,n)=>s1(e,"yAxis",r,n),iDe=(e,t,r,n)=>a1(e,"xAxis",t,n),oDe=(e,t,r,n)=>a1(e,"yAxis",r,n),lDe=ut([nDe,Z2],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),cDe=(e,t)=>{var r=DR(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:s}=a;if(s)return s.find(i=>i.key===r)}}}},uDe=ut([XOe,Z2],cDe),dDe=ut([ki,aDe,sDe,iDe,oDe,lDe,In,kR,$ae,uDe,Z2,qOe],(e,t,r,n,a,s,i,o,c,u,d,f)=>{var{chartData:h,dataStartIndex:p,dataEndIndex:g}=o;if(!(d==null||s==null||i!=="horizontal"&&i!=="vertical"||t==null||r==null||n==null||a==null||c==null)){var{data:x}=d,b;if(x!=null&&x.length>0?b=x:b=h==null?void 0:h.slice(p,g+1),b!=null)return MOe({layout:i,barSettings:d,pos:s,bandSize:c,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,stackedData:u,displayedData:b,offset:e,cells:f})}}),Gae=e=>{var{chartData:t}=e,r=$a(),n=ac();return S.useEffect(()=>n?()=>{}:(r(Zz(t)),()=>{r(Zz(void 0))}),[t,r,n]),null},rG={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Kae=Gc({name:"brush",initialState:rG,reducers:{setBrushSettings(e,t){return t.payload==null?rG:t.payload}}}),{setBrushSettings:Tht}=Kae.actions,ADe=Kae.reducer;function fDe(e,t,r){return(t=hDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hDe(e){var t=mDe(e,"string");return typeof t=="symbol"?t:t+""}function mDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class j8{static create(t){return new j8(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}fDe(j8,"EPS",1e-4);function pDe(e){return(e%180+180)%180}var gDe=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=pDe(a),i=s*Math.PI/180,o=Math.atan(n/r),c=i>o&&i<Math.PI-o?n/Math.sin(i):r/Math.cos(i);return Math.abs(c)},xDe={dots:[],areas:[],lines:[]},qae=Gc({name:"referenceElements",initialState:xDe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=sh(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=sh(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=sh(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Iht,removeDot:Fht,addArea:Oht,removeArea:Dht,addLine:Pht,removeLine:Rht}=qae.actions,vDe=qae.reducer,bDe=S.createContext(void 0),yDe=e=>{var{children:t}=e,[r]=S.useState("".concat(Pw("recharts"),"-clip")),n=Dae();if(n==null)return null;var{x:a,y:s,width:i,height:o}=n;return S.createElement(bDe.Provider,{value:r},S.createElement("defs",null,S.createElement("clipPath",{id:r},S.createElement("rect",{x:a,y:s,height:o,width:i}))),t)};function C3(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Wae(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function wDe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return gDe(n,r)}function EDe(e,t,r){var n=r==="width",{x:a,y:s,width:i,height:o}=e;return t===1?{start:n?a:s,end:n?a+i:s+o}:{start:n?a+i:s+o,end:n?a:s}}function UN(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function CDe(e,t){return Wae(e,t+1)}function _De(e,t,r,n,a){for(var s=(n||[]).slice(),{start:i,end:o}=t,c=0,u=1,d=i,f=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:Wae(n,u)};var x=c,b,y=()=>(b===void 0&&(b=r(g,x)),b),w=g.coordinate,_=c===0||UN(e,w,y,d,o);_||(c=0,d=i,u+=1),_&&(d=w+e*(y()/2+a),c+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function nG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ho(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nG(Object(r),!0).forEach(function(n){NDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NDe(e,t,r){return(t=SDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SDe(e){var t=kDe(e,"string");return typeof t=="symbol"?t:t+""}function kDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BDe(e,t,r,n,a){for(var s=(n||[]).slice(),i=s.length,{start:o}=t,{end:c}=t,u=function(h){var p=s[h],g,x=()=>(g===void 0&&(g=r(p,h)),g);if(h===i-1){var b=e*(p.coordinate+e*x()/2-c);s[h]=p=Ho(Ho({},p),{},{tickCoord:b>0?p.coordinate-b*e:p.coordinate})}else s[h]=p=Ho(Ho({},p),{},{tickCoord:p.coordinate});var y=UN(e,p.tickCoord,x,o,c);y&&(c=p.tickCoord-e*(x()/2+a),s[h]=Ho(Ho({},p),{},{isShow:!0}))},d=i-1;d>=0;d--)u(d);return s}function jDe(e,t,r,n,a,s){var i=(n||[]).slice(),o=i.length,{start:c,end:u}=t;if(s){var d=n[o-1],f=r(d,o-1),h=e*(d.coordinate+e*f/2-u);i[o-1]=d=Ho(Ho({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var p=UN(e,d.tickCoord,()=>f,c,u);p&&(u=d.tickCoord-e*(f/2+a),i[o-1]=Ho(Ho({},d),{},{isShow:!0}))}for(var g=s?o-1:o,x=function(w){var _=i[w],B,k=()=>(B===void 0&&(B=r(_,w)),B);if(w===0){var I=e*(_.coordinate-e*k()/2-c);i[w]=_=Ho(Ho({},_),{},{tickCoord:I<0?_.coordinate-I*e:_.coordinate})}else i[w]=_=Ho(Ho({},_),{},{tickCoord:_.coordinate});var E=UN(e,_.tickCoord,k,c,u);E&&(c=_.tickCoord+e*(k()/2+a),i[w]=Ho(Ho({},_),{},{isShow:!0}))},b=0;b<g;b++)x(b);return i}function T8(e,t,r){var{tick:n,ticks:a,viewBox:s,minTickGap:i,orientation:o,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!a||!a.length||!n)return[];if(ur(c)||Fg.isSsr){var h;return(h=CDe(a,ur(c)?c:0))!==null&&h!==void 0?h:[]}var p=[],g=o==="top"||o==="bottom"?"width":"height",x=d&&g==="width"?rw(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=(_,B)=>{var k=typeof u=="function"?u(_.value,B):_.value;return g==="width"?wDe(rw(k,{fontSize:t,letterSpacing:r}),x,f):rw(k,{fontSize:t,letterSpacing:r})[g]},y=a.length>=2?Wi(a[1].coordinate-a[0].coordinate):1,w=EDe(s,y,g);return c==="equidistantPreserveStart"?_De(y,w,b,a,i):(c==="preserveStart"||c==="preserveStartEnd"?p=jDe(y,w,b,a,i,c==="preserveStartEnd"):p=BDe(y,w,b,a,i),p.filter(_=>_.isShow))}var TDe=["viewBox"],IDe=["viewBox"];function iv(){return iv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iv.apply(null,arguments)}function aG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aG(Object(r),!0).forEach(function(n){I8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sG(e,t){if(e==null)return{};var r,n,a=FDe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function FDe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function I8(e,t,r){return(t=ODe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ODe(e){var t=DDe(e,"string");return typeof t=="symbol"?t:t+""}function DDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Qm extends S.Component{constructor(t){super(t),this.tickRefs=S.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,a=sG(t,TDe),s=this.props,{viewBox:i}=s,o=sG(s,IDe);return!C3(n,i)||!C3(a,o)||!C3(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:a,height:s,orientation:i,tickSize:o,mirror:c,tickMargin:u}=this.props,d,f,h,p,g,x,b=c?-1:1,y=t.tickSize||o,w=ur(t.tickCoord)?t.tickCoord:t.coordinate;switch(i){case"top":d=f=t.coordinate,p=n+ +!c*s,h=p-b*y,x=h-b*u,g=w;break;case"left":h=p=t.coordinate,f=r+ +!c*a,d=f-b*y,g=d-b*u,x=w;break;case"right":h=p=t.coordinate,f=r+ +c*a,d=f+b*y,g=d+b*u,x=w;break;default:d=f=t.coordinate,p=n+ +c*s,h=p+b*y,x=h+b*u,g=w;break}return{line:{x1:d,y1:h,x2:f,y2:p},tick:{x:g,y:x}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:a,orientation:s,mirror:i,axisLine:o}=this.props,c=wi(wi(wi({},Wn(this.props,!1)),Wn(o,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!i||s==="bottom"&&i);c=wi(wi({},c),{},{x1:t,y1:r+u*a,x2:t+n,y2:r+u*a})}else{var d=+(s==="left"&&!i||s==="right"&&i);c=wi(wi({},c),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+a})}return S.createElement("line",iv({},c,{className:gn("recharts-cartesian-axis-line",bm(o,"className"))}))}static renderTickItem(t,r,n){var a,s=gn(r.className,"recharts-cartesian-axis-tick-value");if(S.isValidElement(t))a=S.cloneElement(t,wi(wi({},r),{},{className:s}));else if(typeof t=="function")a=t(wi(wi({},r),{},{className:s}));else{var i="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(i=gn(i,t.className)),a=S.createElement(J1,iv({},r,{className:i}),n)}return a}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:s,tick:i,tickFormatter:o,unit:c,padding:u}=this.props,d=T8(wi(wi({},this.props),{},{ticks:n}),t,r),f=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),p=il(this.props),g=Wn(i,!1),x=wi(wi({},p),{},{fill:"none"},Wn(a,!1)),b=d.map((y,w)=>{var{line:_,tick:B}=this.getTickLineCoord(y),k=wi(wi(wi(wi({textAnchor:f,verticalAnchor:h},p),{},{stroke:"none",fill:s},g),B),{},{index:w,payload:y,visibleTicksCount:d.length,tickFormatter:o,padding:u});return S.createElement(ds,iv({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},Ig(this.props,y,w)),a&&S.createElement("line",iv({},x,_,{className:gn("recharts-cartesian-axis-tick-line",bm(a,"className"))})),i&&Qm.renderTickItem(i,k,"".concat(typeof o=="function"?o(y.value,w):y.value).concat(c||"")))});return b.length>0?S.createElement("g",{className:"recharts-cartesian-axis-ticks"},b):null}render(){var{axisLine:t,width:r,height:n,className:a,hide:s}=this.props;if(s)return null;var{ticks:i}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:S.createElement(ds,{className:gn("recharts-cartesian-axis",a),ref:o=>{if(o){var c=o.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var u=c[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,i),ql.renderCallByParent(this.props))}}I8(Qm,"displayName","CartesianAxis");I8(Qm,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var PDe=["x1","y1","x2","y2","key"],RDe=["offset"],LDe=["xAxisId","yAxisId"],MDe=["xAxisId","yAxisId"];function iG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iG(Object(r),!0).forEach(function(n){UDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UDe(e,t,r){return(t=QDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QDe(e){var t=HDe(e,"string");return typeof t=="symbol"?t:t+""}function HDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rp(){return Rp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rp.apply(null,arguments)}function QN(e,t){if(e==null)return{};var r,n,a=VDe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function VDe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var zDe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:s,height:i,ry:o}=e;return S.createElement("rect",{x:n,y:a,ry:o,width:s,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Xae(e,t){var r;if(S.isValidElement(e))r=S.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:s,y2:i,key:o}=t,c=QN(t,PDe),u=il(c),{offset:d}=u,f=QN(u,RDe);r=S.createElement("line",Rp({},f,{x1:n,y1:a,x2:s,y2:i,fill:"none",key:o}))}return r}function $De(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,o=QN(e,LDe),c=a.map((u,d)=>{var f=Wo(Wo({},o),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return Xae(n,f)});return S.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function GDe(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,o=QN(e,MDe),c=a.map((u,d)=>{var f=Wo(Wo({},o),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return Xae(n,f)});return S.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function KDe(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:s,height:i,horizontalPoints:o,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=o.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var p=!u[h+1],g=p?a+i-f:u[h+1]-f;if(g<=0)return null;var x=h%t.length;return S.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:g,width:s,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function qDe(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:s,width:i,height:o,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var p=!u[h+1],g=p?a+i-f:u[h+1]-f;if(g<=0)return null;var x=h%r.length;return S.createElement("rect",{key:"react-".concat(h),x:f,y:s,width:g,height:o,stroke:"none",fill:r[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var WDe=(e,t)=>{var{xAxis:r,width:n,height:a,offset:s}=e;return Pte(T8(Wo(Wo(Wo({},Qm.defaultProps),r),{},{ticks:Rte(r),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},XDe=(e,t)=>{var{yAxis:r,width:n,height:a,offset:s}=e;return Pte(T8(Wo(Wo(Wo({},Qm.defaultProps),r),{},{ticks:Rte(r),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},YDe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function qw(e){var t=tR(),r=rR(),n=Hte(),a=Wo(Wo({},zu(e,YDe)),{},{x:ur(e.x)?e.x:n.left,y:ur(e.y)?e.y:n.top,width:ur(e.width)?e.width:n.width,height:ur(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:i,x:o,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:p}=a,g=ac(),x=ir(j=>zz(j,"xAxis",s,g)),b=ir(j=>zz(j,"yAxis",i,g));if(!ur(u)||u<=0||!ur(d)||d<=0||!ur(o)||o!==+o||!ur(c)||c!==+c)return null;var y=a.verticalCoordinatesGenerator||WDe,w=a.horizontalCoordinatesGenerator||XDe,{horizontalPoints:_,verticalPoints:B}=a;if((!_||!_.length)&&typeof w=="function"){var k=h&&h.length,I=w({yAxis:b?Wo(Wo({},b),{},{ticks:k?h:b.ticks}):void 0,width:t,height:r,offset:n},k?!0:f);tw(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(_=I)}if((!B||!B.length)&&typeof y=="function"){var E=p&&p.length,N=y({xAxis:x?Wo(Wo({},x),{},{ticks:E?p:x.ticks}):void 0,width:t,height:r,offset:n},E?!0:f);tw(Array.isArray(N),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(B=N)}return S.createElement("g",{className:"recharts-cartesian-grid"},S.createElement(zDe,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),S.createElement(KDe,Rp({},a,{horizontalPoints:_})),S.createElement(qDe,Rp({},a,{verticalPoints:B})),S.createElement($De,Rp({},a,{offset:n,horizontalPoints:_,xAxis:x,yAxis:b})),S.createElement(GDe,Rp({},a,{offset:n,verticalPoints:B,xAxis:x,yAxis:b})))}qw.displayName="CartesianGrid";function oG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oG(Object(r),!0).forEach(function(n){JDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JDe(e,t,r){return(t=ZDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZDe(e){var t=ePe(e,"string");return typeof t=="symbol"?t:t+""}function ePe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tPe={xAxis:{},yAxis:{},zAxis:{}},Yae=Gc({name:"cartesianAxis",initialState:tPe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=lG(lG({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:rPe,removeXAxis:nPe,addYAxis:aPe,removeYAxis:sPe,addZAxis:Lht,removeZAxis:Mht,updateYAxisWidth:iPe}=Yae.actions,oPe=Yae.reducer,lPe=["children"],cPe=["dangerouslySetInnerHTML","ticks"];function Jae(e,t,r){return(t=uPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uPe(e){var t=dPe(e,"string");return typeof t=="symbol"?t:t+""}function dPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TF(){return TF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},TF.apply(null,arguments)}function Zae(e,t){if(e==null)return{};var r,n,a=APe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function APe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fPe(e){var t=$a(),r=S.useMemo(()=>{var{children:s}=e,i=Zae(e,lPe);return i},[e]),n=ir(s=>Oh(s,r.id)),a=r===n;return S.useEffect(()=>(t(rPe(r)),()=>{t(nPe(r))}),[r,t]),a?e.children:null}var hPe=e=>{var{xAxisId:t,className:r}=e,n=ir(Qte),a=ac(),s="xAxis",i=ir(p=>W1(p,s,t,a)),o=ir(p=>Dne(p,s,t,a)),c=ir(p=>Tne(p,t)),u=ir(p=>mje(p,t));if(c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f}=e,h=Zae(e,cPe);return S.createElement(Qm,TF({},h,{scale:i,x:u.x,y:u.y,width:c.width,height:c.height,className:gn("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:o}))},mPe=e=>{var t,r,n,a,s;return S.createElement(fPe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},S.createElement(hPe,e))};class c1 extends S.Component{render(){return S.createElement(mPe,this.props)}}Jae(c1,"displayName","XAxis");Jae(c1,"defaultProps",{allowDataOverflow:Sc.allowDataOverflow,allowDecimals:Sc.allowDecimals,allowDuplicatedCategory:Sc.allowDuplicatedCategory,height:Sc.height,hide:!1,mirror:Sc.mirror,orientation:Sc.orientation,padding:Sc.padding,reversed:Sc.reversed,scale:Sc.scale,tickCount:Sc.tickCount,type:Sc.type,xAxisId:0});var pPe=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=e,i=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>i&&(i=f.width)}});var o=r?r.getBoundingClientRect().width:0,c=a+s,u=i+c+o+(r?n:0);return Math.round(u)}return 0},gPe=["dangerouslySetInnerHTML","ticks"];function ese(e,t,r){return(t=xPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xPe(e){var t=vPe(e,"string");return typeof t=="symbol"?t:t+""}function vPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IF(){return IF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},IF.apply(null,arguments)}function bPe(e,t){if(e==null)return{};var r,n,a=yPe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function yPe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function wPe(e){var t=$a();return S.useEffect(()=>(t(aPe(e)),()=>{t(sPe(e))}),[e,t]),null}var EPe=e=>{var t,{yAxisId:r,className:n,width:a,label:s}=e,i=S.useRef(null),o=S.useRef(null),c=ir(Qte),u=ac(),d=$a(),f="yAxis",h=ir(_=>W1(_,f,r,u)),p=ir(_=>Ine(_,r)),g=ir(_=>pje(_,r)),x=ir(_=>Dne(_,f,r,u));if(S.useLayoutEffect(()=>{var _;if(!(a!=="auto"||!p||c8(s)||S.isValidElement(s))){var B=i.current,k=B==null||(_=B.tickRefs)===null||_===void 0?void 0:_.current,{tickSize:I,tickMargin:E}=B.props,N=pPe({ticks:k,label:o.current,labelGapWithTick:5,tickSize:I,tickMargin:E});Math.round(p.width)!==Math.round(N)&&d(iPe({id:r,width:N}))}},[i,i==null||(t=i.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,p==null?void 0:p.width,p,d,s,r,a]),p==null||g==null)return null;var{dangerouslySetInnerHTML:b,ticks:y}=e,w=bPe(e,gPe);return S.createElement(Qm,IF({},w,{ref:i,labelRef:o,scale:h,x:g.x,y:g.y,width:p.width,height:p.height,className:gn("recharts-".concat(f," ").concat(f),n),viewBox:c,ticks:x}))},CPe=e=>{var t,r,n,a,s;return S.createElement(S.Fragment,null,S.createElement(wPe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),S.createElement(EPe,e))},_Pe={allowDataOverflow:kc.allowDataOverflow,allowDecimals:kc.allowDecimals,allowDuplicatedCategory:kc.allowDuplicatedCategory,hide:!1,mirror:kc.mirror,orientation:kc.orientation,padding:kc.padding,reversed:kc.reversed,scale:kc.scale,tickCount:kc.tickCount,type:kc.type,width:kc.width,yAxisId:0};class u1 extends S.Component{render(){return S.createElement(CPe,this.props)}}ese(u1,"displayName","YAxis");ese(u1,"defaultProps",_Pe);var _3={exports:{}},N3={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cG;function NPe(){if(cG)return N3;cG=1;var e=N1();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,s=e.useEffect,i=e.useMemo,o=e.useDebugValue;return N3.useSyncExternalStoreWithSelector=function(c,u,d,f,h){var p=a(null);if(p.current===null){var g={hasValue:!1,value:null};p.current=g}else g=p.current;p=i(function(){function b(k){if(!y){if(y=!0,w=k,k=f(k),h!==void 0&&g.hasValue){var I=g.value;if(h(I,k))return _=I}return _=k}if(I=_,r(w,k))return I;var E=f(k);return h!==void 0&&h(I,E)?(w=k,I):(w=k,_=E)}var y=!1,w,_,B=d===void 0?null:d;return[function(){return b(u())},B===null?void 0:function(){return b(B())}]},[u,d,f,h]);var x=n(c,p[0],p[1]);return s(function(){g.hasValue=!0,g.value=x},[x]),o(x),x},N3}var uG;function SPe(){return uG||(uG=1,_3.exports=NPe()),_3.exports}SPe();function kPe(e){e()}function BPe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){kPe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var dG={notify(){},get:()=>[]};function jPe(e,t){let r,n=dG,a=0,s=!1;function i(x){d();const b=n.subscribe(x);let y=!1;return()=>{y||(y=!0,b(),f())}}function o(){n.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return s}function d(){a++,r||(r=e.subscribe(c),n=BPe())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=dG)}function h(){s||(s=!0,d())}function p(){s&&(s=!1,f())}const g={addNestedSub:i,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>n};return g}var TPe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IPe=TPe(),FPe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",OPe=FPe(),DPe=()=>IPe||OPe?S.useLayoutEffect:S.useEffect,PPe=DPe(),S3=Symbol.for("react-redux-context"),k3=typeof globalThis<"u"?globalThis:{};function RPe(){if(!S.createContext)return{};const e=k3[S3]??(k3[S3]=new Map);let t=e.get(S.createContext);return t||(t=S.createContext(null),e.set(S.createContext,t)),t}var LPe=RPe();function MPe(e){const{children:t,context:r,serverState:n,store:a}=e,s=S.useMemo(()=>{const c=jPe(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),i=S.useMemo(()=>a.getState(),[a]);PPe(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),i!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,i]);const o=r||LPe;return S.createElement(o.Provider,{value:s},t)}var UPe=MPe,QPe=(e,t)=>t,F8=ut([QPe,In,$1,ji,Yne,Dh,vTe,ki],CTe),O8=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},tse=Uu("mouseClick"),rse=M2();rse.startListening({actionCreator:tse,effect:(e,t)=>{var r=e.payload,n=F8(t.getState(),O8(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(Sje({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var FF=Uu("mouseMove"),nse=M2();nse.startListening({actionCreator:FF,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=ZR(n,n.tooltip.settings.shared),s=F8(n,O8(r));a==="axis"&&((s==null?void 0:s.activeIndex)!=null?t.dispatch(zne({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(Vne()))}});function HPe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var AG={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},ase=Gc({name:"rootProps",initialState:AG,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:AG.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),VPe=ase.reducer,{updateOptions:zPe}=ase.actions,sse=Gc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:$Pe}=sse.actions,GPe=sse.reducer,ise=Uu("keyDown"),ose=Uu("focus"),D8=M2();D8.startListening({actionCreator:ise,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var i=Number(e8(a,Y1(r))),o=Dh(r);if(s==="Enter"){var c=ON(r,"axis","hover",String(a.index));t.dispatch(_F({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:c}));return}var u=xje(r),d=u==="left-to-right"?1:-1,f=s==="ArrowRight"?1:-1,h=i+f*d;if(!(o==null||h>=o.length||h<0)){var p=ON(r,"axis","hover",String(h));t.dispatch(_F({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}});D8.startListening({actionCreator:ose,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",i=ON(r,"axis","hover",String(s));t.dispatch(_F({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:i}))}}}});var yu=Uu("externalEvent"),lse=M2();lse.startListening({actionCreator:yu,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:cTe(r),activeDataKey:tae(r),activeIndex:ym(r),activeLabel:eae(r),activeTooltipIndex:ym(r),isTooltipActive:uTe(r)};e.payload.handler(n,e.payload.reactEvent)}}});var KPe=ut([X1],e=>e.tooltipItemPayloads),qPe=ut([KPe,Y2,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(o=>o.settings.dataKey===n);if(a!=null){var{positions:s}=a;if(s!=null){var i=t(s,r);return i}}}),cse=Uu("touchMove"),use=M2();use.startListening({actionCreator:cse,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=ZR(n,n.tooltip.settings.shared);if(a==="axis"){var s=F8(n,O8({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(zne({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(a==="item"){var i,o=r.touches[0],c=document.elementFromPoint(o.clientX,o.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(Mte),d=(i=c.getAttribute(Ute))!==null&&i!==void 0?i:void 0,f=qPe(t.getState(),u,d);t.dispatch(Hne({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var WPe=ute({brush:ADe,cartesianAxis:oPe,chartData:UTe,errorBars:hOe,graphicalItems:W6e,layout:A5e,legend:Z5e,options:DTe,polarAxis:VIe,polarOptions:GPe,referenceElements:vDe,rootProps:VPe,tooltip:kje}),XPe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return R_e({reducer:WPe,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([rse.middleware,nse.middleware,D8.middleware,lse.middleware,use.middleware]),devTools:{serialize:{replacer:HPe},name:"recharts-".concat(r)}})};function dse(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=ac(),s=S.useRef(null);if(a)return r;s.current==null&&(s.current=XPe(t,n));var i=GP;return S.createElement(UPe,{context:i,store:s.current},r)}function Ase(e){var{layout:t,width:r,height:n,margin:a}=e,s=$a(),i=ac();return S.useEffect(()=>{i||(s(c5e(t)),s(u5e({width:r,height:n})),s(l5e(a)))},[s,i,t,r,n,a]),null}function fse(e){var t=$a();return S.useEffect(()=>{t(zPe(e))},[t,e]),null}var YPe=["children"];function JPe(e,t){if(e==null)return{};var r,n,a=ZPe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ZPe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function HN(){return HN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},HN.apply(null,arguments)}var eRe={width:"100%",height:"100%"},tRe=S.forwardRef((e,t)=>{var r=tR(),n=rR(),a=Gte();if(!Zv(r)||!Zv(n))return null;var{children:s,otherAttributes:i,title:o,desc:c}=e,u,d;return typeof i.tabIndex=="number"?u=i.tabIndex:u=a?0:void 0,typeof i.role=="string"?d=i.role:d=a?"application":void 0,S.createElement(IP,HN({},i,{title:o,desc:c,role:d,tabIndex:u,width:r,height:n,style:eRe,ref:t}),s)}),rRe=e=>{var{children:t}=e,r=ir(R4);if(!r)return null;var{width:n,height:a,y:s,x:i}=r;return S.createElement(IP,{width:n,height:a,x:i,y:s},t)},fG=S.forwardRef((e,t)=>{var{children:r}=e,n=JPe(e,YPe),a=ac();return a?S.createElement(rRe,null,r):S.createElement(tRe,HN({ref:t},n),r)});function nRe(){var e=$a(),[t,r]=S.useState(null),n=ir(Q5e);return S.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),s=a.width/t.offsetWidth;Vc(s)&&s!==n&&e(d5e(s))}},[t,e,n]),r}function hG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function aRe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hG(Object(r),!0).forEach(function(n){sRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sRe(e,t,r){return(t=iRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iRe(e){var t=oRe(e,"string");return typeof t=="symbol"?t:t+""}function oRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lRe=S.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:i,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:p,onTouchMove:g,onTouchStart:x,style:b,width:y}=e,w=$a(),[_,B]=S.useState(null),[k,I]=S.useState(null);VTe();var E=nRe(),N=S.useCallback(P=>{E(P),typeof t=="function"&&t(P),B(P),I(P)},[E,t,B,I]),j=S.useCallback(P=>{w(tse(P)),w(yu({handler:s,reactEvent:P}))},[w,s]),R=S.useCallback(P=>{w(FF(P)),w(yu({handler:u,reactEvent:P}))},[w,u]),D=S.useCallback(P=>{w(Vne()),w(yu({handler:d,reactEvent:P}))},[w,d]),O=S.useCallback(P=>{w(FF(P)),w(yu({handler:f,reactEvent:P}))},[w,f]),L=S.useCallback(()=>{w(ose())},[w]),M=S.useCallback(P=>{w(ise(P.key))},[w]),J=S.useCallback(P=>{w(yu({handler:i,reactEvent:P}))},[w,i]),V=S.useCallback(P=>{w(yu({handler:o,reactEvent:P}))},[w,o]),K=S.useCallback(P=>{w(yu({handler:c,reactEvent:P}))},[w,c]),z=S.useCallback(P=>{w(yu({handler:h,reactEvent:P}))},[w,h]),G=S.useCallback(P=>{w(yu({handler:x,reactEvent:P}))},[w,x]),Y=S.useCallback(P=>{w(cse(P)),w(yu({handler:g,reactEvent:P}))},[w,g]),ee=S.useCallback(P=>{w(yu({handler:p,reactEvent:P}))},[w,p]);return S.createElement(oae.Provider,{value:_},S.createElement(Fee.Provider,{value:k},S.createElement("div",{className:gn("recharts-wrapper",n),style:aRe({position:"relative",cursor:"default",width:y,height:a},b),onClick:j,onContextMenu:J,onDoubleClick:V,onFocus:L,onKeyDown:M,onMouseDown:K,onMouseEnter:R,onMouseLeave:D,onMouseMove:O,onMouseUp:z,onTouchEnd:ee,onTouchMove:Y,onTouchStart:G,ref:N},r)))}),cRe=["children","className","width","height","style","compact","title","desc"];function uRe(e,t){if(e==null)return{};var r,n,a=dRe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function dRe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hse=S.forwardRef((e,t)=>{var{children:r,className:n,width:a,height:s,style:i,compact:o,title:c,desc:u}=e,d=uRe(e,cRe),f=il(d);return o?S.createElement(fG,{otherAttributes:f,title:c,desc:u},r):S.createElement(lRe,{className:n,style:i,width:a,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},S.createElement(fG,{otherAttributes:f,title:c,desc:u,ref:t},S.createElement(yDe,null,r)))}),ARe=["width","height"];function OF(){return OF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},OF.apply(null,arguments)}function fRe(e,t){if(e==null)return{};var r,n,a=hRe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function hRe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var mRe={top:5,right:5,bottom:5,left:5},pRe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:mRe,reverseStackOrder:!1,syncMethod:"index"},gRe=S.forwardRef(function(t,r){var n,a=zu(t.categoricalChartProps,pRe),{width:s,height:i}=a,o=fRe(a,ARe);if(!Zv(s)||!Zv(i))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,p={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return S.createElement(dse,{preloadedState:{options:p},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:c},S.createElement(Gae,{chartData:h.data}),S.createElement(Ase,{width:s,height:i,layout:a.layout,margin:a.margin}),S.createElement(fse,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),S.createElement(hse,OF({},o,{width:s,height:i,ref:r})))}),xRe=["axis","item"],VN=S.forwardRef((e,t)=>S.createElement(gRe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:xRe,tooltipPayloadSearcher:l8,categoricalChartProps:e,ref:t}));function vRe(e){var t=$a();return S.useEffect(()=>{t($Pe(e))},[t,e]),null}var bRe=["width","height","layout"];function DF(){return DF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DF.apply(null,arguments)}function yRe(e,t){if(e==null)return{};var r,n,a=wRe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wRe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ERe={top:5,right:5,bottom:5,left:5},CRe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:ERe,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},mse=S.forwardRef(function(t,r){var n,a=zu(t.categoricalChartProps,CRe),{width:s,height:i,layout:o}=a,c=yRe(a,bRe);if(!Zv(s)||!Zv(i))return null;var{chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h}=t,p={chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h,eventEmitter:void 0};return S.createElement(dse,{preloadedState:{options:p},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:u},S.createElement(Gae,{chartData:a.data}),S.createElement(Ase,{width:s,height:i,layout:o,margin:a.margin}),S.createElement(fse,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),S.createElement(vRe,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),S.createElement(hse,DF({width:s,height:i},c,{ref:r})))}),_Re=["item"],NRe={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},pse=S.forwardRef((e,t)=>{var r=zu(e,NRe);return S.createElement(mse,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:_Re,tooltipPayloadSearcher:l8,categoricalChartProps:r,ref:t})}),SRe=["axis"],kRe={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},BRe=S.forwardRef((e,t)=>{var r=zu(e,kRe);return S.createElement(mse,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:SRe,tooltipPayloadSearcher:l8,categoricalChartProps:r,ref:t})});const E0=["#0ea5e9","#22c55e","#f59e0b","#ef4444","#8b5cf6","#14b8a6","#a3e635","#f472b6"],mG={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",dimension:"",subdimension:"",descripcion:"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:"",estado:"Pendiente",avance:0,enlaces:[]},ny="rounded-2xl border border-slate-100 dark:border-slate-800 bg-white/80 dark:bg-slate-900/60 shadow-sm backdrop-blur",co="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-fuchsia-500/70 focus:border-fuchsia-500/70 transition",Ec="block text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-400 mb-2",B3="inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition",j3="bg-gradient-to-r from-fuchsia-600 to-rose-500 text-white shadow-sm",T3="bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200 hover:bg-slate-200/80 dark:hover:bg-slate-700",VC="rounded-2xl p-5 text-white shadow-md bg-gradient-to-br",jRe="from-sky-500 to-indigo-500",TRe="from-emerald-500 to-lime-500",IRe="from-amber-500 to-rose-500",FRe="from-fuchsia-500 to-purple-600",I3={Pendiente:{badge:"bg-rose-50 text-rose-700 ring-1 ring-rose-200 dark:bg-rose-900/30 dark:text-rose-200 dark:ring-rose-800",icon:Fd,dot:"bg-rose-500"},"En Proceso":{badge:"bg-amber-50 text-amber-700 ring-1 ring-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:ring-amber-800",icon:mee,dot:"bg-amber-500"},Cumplida:{badge:"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-200 dark:ring-emerald-800",icon:vo,dot:"bg-emerald-500"}},ORe=e=>{const t=I3[e].icon;return l.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold ${I3[e].badge}`,children:[l.jsx("span",{className:`h-2 w-2 rounded-full ${I3[e].dot}`}),l.jsx(t,{className:"h-4 w-4"})," ",e]})},DRe=()=>{var G,Y;const[e,t]=S.useState("registro"),[r,n]=S.useState([]),[a,s]=S.useState(mG),[i,o]=S.useState(null),[c,u]=S.useState(null),[d,f]=S.useState(!1),[h,p]=S.useState(""),[g,x]=S.useState(""),[b,y]=S.useState(""),[w,_]=S.useState(""),B=S.useMemo(()=>Kf[a.dimension]??[],[a.dimension]),k=S.useCallback(async()=>{f(!0);try{const ee=await lEe();n(ee)}catch(ee){console.error(ee),u("No se pudieron cargar las acciones.")}finally{f(!1)}},[]);S.useEffect(()=>{k()},[k]);const I=ee=>{const{name:P,value:Q}=ee.target;s(X=>({...X,[P]:Q}))},E=ee=>{const P=ee.split(",").map(Q=>Q.trim()).filter(Boolean);s(Q=>({...Q,indicadores:P}))},N=ee=>{const P=ee.split(",").map(Q=>Q.trim()).filter(Boolean);s(Q=>({...Q,enlaces:P}))},j=()=>{s(mG),o(null),u(null)},R=async ee=>{if(ee.preventDefault(),!a.responsable||!a.dimension||!a.subdimension||!a.descripcion||!a.fechaCumplimiento){u("Responsable, dimensión, subdimensión, descripción y fecha de cumplimiento son obligatorios.");return}try{i?await uEe(i,a):await cEe(a),await k(),j(),t("seguimiento")}catch(P){console.error(P),u("Error al guardar la acción.")}},D=ee=>{o(ee.id),s({...ee,enlaces:ee.enlaces??[],indicadores:ee.indicadores??[]}),window.scrollTo({top:0,behavior:"smooth"}),t("registro")},O=async ee=>{confirm("¿Eliminar esta acción?")&&(await dEe(ee),await k())},L=S.useMemo(()=>r.filter(ee=>{const P=!h||ee.responsable.toLowerCase().includes(h.toLowerCase())||ee.descripcion.toLowerCase().includes(h.toLowerCase())||ee.subdimension.toLowerCase().includes(h.toLowerCase()),Q=!g||ee.dimension===g,X=!b||ee.subdimension===b,te=!w||ee.estado===w;return P&&Q&&X&&te}),[r,h,g,b,w]),M=S.useMemo(()=>{const ee=new Map;return r.forEach(P=>ee.set(P.dimension,(ee.get(P.dimension)??0)+1)),Array.from(ee.entries()).map(([P,Q])=>({name:P,value:Q}))},[r]),J=S.useMemo(()=>{const ee=new Map;return r.forEach(P=>ee.set(P.estado,(ee.get(P.estado)??0)+1)),Array.from(ee.entries()).map(([P,Q])=>({name:P,value:Q}))},[r]),V=S.useMemo(()=>{const ee=r.map(P=>P.avance??0);return ee.length?Math.round(ee.reduce((P,Q)=>P+Q,0)/ee.length):0},[r]),K=S.useMemo(()=>{const ee=new Map;return r.forEach(P=>ee.set(P.subdimension,(ee.get(P.subdimension)??0)+1)),Array.from(ee.entries()).map(([P,Q])=>({name:P,value:Q})).sort((P,Q)=>Q.value-P.value).slice(0,6)},[r]),z=()=>{const ee=["id","fechaRegistro","responsable","dimension","subdimension","descripcion","objetivos","indicadores","cobertura","fechaInicio","fechaCumplimiento","estado","avance","enlaces"],P=r.map(se=>[se.id,se.fechaRegistro,se.responsable,se.dimension,se.subdimension,se.descripcion.replace(/\n/g," "),se.objetivos??"",(se.indicadores??[]).join("|"),se.cobertura??"",se.fechaInicio??"",se.fechaCumplimiento,se.estado,se.avance??0,(se.enlaces??[]).join("|")]),Q=[ee.join(","),...P.map(se=>se.map(oe=>`"${String(oe).replace(/"/g,'""')}"`).join(","))].join(`
`),X=new Blob([Q],{type:"text/csv;charset=utf-8"}),te=URL.createObjectURL(X),ae=document.createElement("a");ae.href=te,ae.download=`pme_acciones_${new Date().toISOString().slice(0,10)}.csv`,ae.click(),URL.revokeObjectURL(te)};return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-fuchsia-200/60 dark:border-fuchsia-700/30",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-fuchsia-500/20 via-rose-500/20 to-amber-400/20 blur-3xl"}),l.jsxs("div",{className:"relative p-6 md:p-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 bg-white/60 dark:bg-slate-900/40 backdrop-blur",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl md:text-3xl font-black bg-gradient-to-r from-fuchsia-600 via-rose-600 to-amber-600 bg-clip-text text-transparent flex items-center gap-3",children:[l.jsx(yv,{className:"h-6 w-6 text-fuchsia-600"})," Seguimiento de Acciones (PME)"]}),l.jsxs("p",{className:"text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[l.jsx(lwe,{className:"h-4 w-4"})," Registro, seguimiento y dashboard por Dimensión/Subdimensión."]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:k,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white/70 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:bg-white",children:[l.jsx(gwe,{className:"h-4 w-4"})," Refrescar"]}),l.jsxs("button",{onClick:z,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 to-rose-500 hover:opacity-90",children:[l.jsx(cg,{className:"h-4 w-4"})," CSV"]})]})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsxs("button",{onClick:()=>t("registro"),className:`${B3} ${e==="registro"?j3:T3}`,children:[l.jsx(qv,{className:"h-4 w-4"})," Registro"]}),l.jsxs("button",{onClick:()=>t("seguimiento"),className:`${B3} ${e==="seguimiento"?j3:T3}`,children:[l.jsx(Zy,{className:"h-4 w-4"})," Seguimiento"]}),l.jsxs("button",{onClick:()=>t("dashboard"),className:`${B3} ${e==="dashboard"?j3:T3}`,children:[l.jsx(oye,{className:"h-4 w-4"})," Dashboard"]})]}),e==="registro"&&l.jsx("div",{className:ny,children:l.jsxs("form",{onSubmit:R,className:"p-6 md:p-8 space-y-6",children:[c&&l.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-rose-200 bg-rose-50 p-3 text-rose-700 dark:bg-rose-900/30 dark:text-rose-200 dark:border-rose-800",children:[l.jsx(Fd,{className:"h-5 w-5"}),l.jsx("span",{children:c})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:Ec,children:"Fecha de Registro"}),l.jsxs("div",{className:"relative",children:[l.jsx(Id,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-500"}),l.jsx("input",{type:"date",name:"fechaRegistro",value:a.fechaRegistro,onChange:I,className:co+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:Ec,children:"Responsable"}),l.jsxs("div",{className:"relative",children:[l.jsx(Fw,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-rose-500"}),l.jsx("input",{type:"text",name:"responsable",placeholder:"Nombre",value:a.responsable,onChange:I,className:co+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:Ec,children:"Cobertura (niveles/cursos)"}),l.jsxs("div",{className:"relative",children:[l.jsx(Wv,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-amber-500"}),l.jsx("input",{type:"text",name:"cobertura",placeholder:"2°A, 2°B, 3°Mecánica...",value:a.cobertura??"",onChange:I,className:co+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:Ec,children:"Dimensión PME"}),l.jsxs("div",{className:"relative",children:[l.jsx(zye,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),l.jsxs("select",{name:"dimension",value:a.dimension,onChange:I,className:co+" pl-10",children:[l.jsx("option",{value:"",children:"Selecciona una dimensión"}),Object.keys(Kf).map(ee=>l.jsx("option",{value:ee,children:ee},ee))]})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:Ec,children:"Subdimensión"}),l.jsxs("div",{className:"relative",children:[l.jsx(wP,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-sky-500"}),l.jsxs("select",{name:"subdimension",value:a.subdimension,onChange:I,className:co+" pl-10",disabled:!a.dimension,children:[l.jsx("option",{value:"",children:a.dimension?"Selecciona una subdimensión":"Primero elige una dimensión"}),B.map(ee=>l.jsx("option",{value:ee,children:ee},ee))]})]})]}),l.jsxs("div",{className:"md:col-span-3",children:[l.jsx("label",{className:Ec,children:"Descripción de la Acción"}),l.jsxs("div",{className:"relative",children:[l.jsx(WA,{className:"absolute left-3 top-3 h-4 w-4 text-fuchsia-500"}),l.jsx("textarea",{name:"descripcion",value:a.descripcion,onChange:I,rows:3,placeholder:"¿Qué se hará? ¿Dónde y con quién?",className:co+" pl-10"})]})]}),l.jsxs("div",{className:"md:col-span-3",children:[l.jsx("label",{className:Ec,children:"Objetivos (opcional)"}),l.jsx("textarea",{name:"objetivos",value:a.objetivos??"",onChange:I,rows:2,placeholder:"Propósitos pedagógicos",className:co})]}),l.jsxs("div",{children:[l.jsx("label",{className:Ec,children:"Indicadores (separados por coma)"}),l.jsx("input",{type:"text",value:(a.indicadores??[]).join(", "),onChange:ee=>E(ee.target.value),placeholder:"Cobertura OA, asistencia, resultados...",className:co})]}),l.jsxs("div",{children:[l.jsx("label",{className:Ec,children:"Fecha de Inicio"}),l.jsxs("div",{className:"relative",children:[l.jsx(Id,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-violet-500"}),l.jsx("input",{type:"date",name:"fechaInicio",value:a.fechaInicio??"",onChange:I,className:co+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:Ec,children:"Fecha de Cumplimiento"}),l.jsxs("div",{className:"relative",children:[l.jsx(Id,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),l.jsx("input",{type:"date",name:"fechaCumplimiento",value:a.fechaCumplimiento,onChange:I,className:co+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:Ec,children:"Estado"}),l.jsx("select",{name:"estado",value:a.estado,onChange:I,className:co,children:wQ.map(ee=>l.jsx("option",{value:ee,children:ee},ee))})]}),l.jsxs("div",{children:[l.jsx("label",{className:Ec,children:"Avance (%)"}),l.jsxs("div",{className:"relative",children:[l.jsx(tN,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),l.jsx("input",{type:"number",min:0,max:100,name:"avance",value:a.avance??0,onChange:I,className:co+" pl-10"})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:Ec,children:"Enlaces de evidencia (separados por coma)"}),l.jsxs("div",{className:"relative",children:[l.jsx(kQ,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),l.jsx("input",{type:"text",value:(a.enlaces??[]).join(", "),onChange:ee=>N(ee.target.value),placeholder:"https://..., https://...",className:co+" pl-10"})]})]})]}),l.jsxs("div",{className:"flex items-center justify-end gap-3",children:[i&&l.jsx("button",{type:"button",onClick:j,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white border border-slate-200 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700",children:"Cancelar"}),l.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 via-rose-500 to-amber-500 hover:opacity-90",children:[i?l.jsx(vm,{className:"h-4 w-4"}):l.jsx(Lu,{className:"h-4 w-4"}),i?"Guardar cambios":"Registrar acción"]})]})]})}),e==="seguimiento"&&l.jsx("div",{className:ny,children:l.jsxs("div",{className:"p-4 md:p-6 space-y-5",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[l.jsxs("div",{className:"relative md:col-span-2",children:[l.jsx(w4,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-600"}),l.jsx("input",{className:co+" pl-10",placeholder:"Buscar por responsable, descripción o subdimensión...",value:h,onChange:ee=>p(ee.target.value)})]}),l.jsxs("select",{value:g,onChange:ee=>{x(ee.target.value),y("")},className:co,children:[l.jsx("option",{value:"",children:"Todas las dimensiones"}),Object.keys(Kf).map(ee=>l.jsx("option",{value:ee,children:ee},ee))]}),l.jsxs("select",{value:b,onChange:ee=>y(ee.target.value),className:co,children:[l.jsx("option",{value:"",children:"Todas las subdimensiones"}),(Kf[g]??Object.values(Kf).flat()).map(ee=>l.jsx("option",{value:ee,children:ee},ee))]}),l.jsxs("select",{value:w,onChange:ee=>_(ee.target.value),className:co,children:[l.jsx("option",{value:"",children:"Todos los estados"}),wQ.map(ee=>l.jsx("option",{value:ee,children:ee},ee))]})]}),l.jsx("div",{className:"overflow-x-auto rounded-xl border border-slate-100 dark:border-slate-800",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[l.jsx("thead",{className:"bg-gradient-to-r from-fuchsia-50 to-rose-50 dark:from-slate-800 dark:to-slate-800",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-fuchsia-700 dark:text-fuchsia-300",children:"Responsable"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-rose-700 dark:text-rose-300",children:"Dimensión / Subdimensión"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-indigo-700 dark:text-indigo-300",children:"Descripción"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-amber-700 dark:text-amber-300",children:"Fechas"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-emerald-700 dark:text-emerald-300",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-sky-700 dark:text-sky-300",children:"Avance"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Acciones"})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800 bg-white dark:bg-slate-900/40",children:[L.map(ee=>{var P,Q;return l.jsxs("tr",{className:"hover:bg-fuchsia-50/50 dark:hover:bg-slate-800/60 transition",children:[l.jsx("td",{className:"px-4 py-4 align-top text-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-fuchsia-500 to-rose-500 text-white flex items-center justify-center font-bold shadow-sm",children:((Q=(P=ee.responsable)==null?void 0:P.slice(0,1))==null?void 0:Q.toUpperCase())||"?"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:ee.responsable}),l.jsx("div",{className:"text-xs text-slate-500",children:ee.cobertura})]})]})}),l.jsxs("td",{className:"px-4 py-4 align-top text-sm",children:[l.jsx("div",{className:"font-semibold text-indigo-700 dark:text-indigo-300",children:ee.dimension}),l.jsx("div",{className:"text-xs text-slate-500",children:ee.subdimension})]}),l.jsxs("td",{className:"px-4 py-4 align-top text-sm max-w-md",children:[l.jsx("div",{className:"text-slate-700 dark:text-slate-200",children:ee.descripcion}),ee.enlaces&&ee.enlaces.length>0&&l.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:ee.enlaces.map((X,te)=>l.jsxs("a",{href:X,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-fuchsia-700 hover:text-fuchsia-900 dark:text-fuchsia-300",children:[l.jsx(kQ,{className:"h-3.5 w-3.5"})," Evidencia ",te+1]},te))})]}),l.jsxs("td",{className:"px-4 py-4 align-top text-sm whitespace-nowrap",children:[l.jsxs("div",{className:"text-xs text-slate-500",children:["Reg: ",ee.fechaRegistro||"-"]}),l.jsxs("div",{className:"text-xs text-slate-500",children:["Ini: ",ee.fechaInicio||"-"]}),l.jsxs("div",{className:"text-xs font-semibold text-emerald-700 dark:text-emerald-300",children:["Fin: ",ee.fechaCumplimiento]})]}),l.jsx("td",{className:"px-4 py-4 align-top text-center",children:ORe(ee.estado)}),l.jsxs("td",{className:"px-4 py-4 align-top",children:[l.jsx("div",{className:"w-28 h-2.5 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-fuchsia-500 via-rose-500 to-amber-500",style:{width:`${Math.min(Math.max(ee.avance??0,0),100)}%`}})}),l.jsxs("div",{className:"text-xs text-center mt-1",children:[ee.avance??0,"%"]})]}),l.jsx("td",{className:"px-4 py-4 align-top text-center",children:l.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[l.jsx("button",{onClick:()=>D(ee),className:"p-2 rounded-lg hover:bg-amber-50 dark:hover:bg-slate-800",title:"Editar",children:l.jsx(EP,{className:"h-5 w-5 text-amber-600"})}),l.jsx("button",{onClick:()=>O(ee.id),className:"p-2 rounded-lg hover:bg-rose-50 dark:hover:bg-slate-800",title:"Eliminar",children:l.jsx(tl,{className:"h-5 w-5 text-rose-600"})})]})})]},ee.id)}),L.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"px-4 py-12 text-center text-slate-500",children:"Sin registros"})})]})]})})]})}),e==="dashboard"&&l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"xl:col-span-3 grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsx("div",{className:`${VC} ${jRe}`,children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Yf,{className:"h-10 w-10 opacity-90"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs uppercase/relaxed",children:"Acciones totales"}),l.jsx("div",{className:"text-2xl font-black",children:r.length})]})]})}),l.jsx("div",{className:`${VC} ${TRe}`,children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(vo,{className:"h-10 w-10 opacity-90"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs uppercase/relaxed",children:"Cumplidas"}),l.jsx("div",{className:"text-2xl font-black",children:((G=J.find(ee=>ee.name==="Cumplida"))==null?void 0:G.value)??0})]})]})}),l.jsx("div",{className:`${VC} ${IRe}`,children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(mee,{className:"h-10 w-10 opacity-90"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs uppercase/relaxed",children:"En proceso"}),l.jsx("div",{className:"text-2xl font-black",children:((Y=J.find(ee=>ee.name==="En Proceso"))==null?void 0:Y.value)??0})]})]})}),l.jsx("div",{className:`${VC} ${FRe}`,children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(tN,{className:"h-10 w-10 opacity-90"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs uppercase/relaxed",children:"Avance promedio"}),l.jsxs("div",{className:"text-2xl font-black",children:[V,"%"]})]})]})})]}),l.jsxs("div",{className:ny+" p-5",children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-100",children:"Acciones por dimensión"})}),l.jsx("div",{className:"h-64",children:l.jsx(Pp,{width:"100%",height:"100%",children:l.jsxs(VN,{data:M,children:[l.jsx(qw,{strokeDasharray:"3 3"}),l.jsx(c1,{dataKey:"name",hide:!0}),l.jsx(u1,{allowDecimals:!1}),l.jsx(Dp,{}),l.jsx(Kw,{dataKey:"value",children:M.map((ee,P)=>l.jsx(pg,{fill:E0[P%E0.length]},P))})]})})}),l.jsx("div",{className:"mt-2 grid grid-cols-1 gap-1",children:M.map((ee,P)=>l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx("span",{className:"inline-block h-3 w-3 rounded-sm",style:{background:E0[P%E0.length]}}),l.jsx("span",{className:"flex-1",children:ee.name}),l.jsx("span",{className:"font-semibold",children:ee.value})]},P))})]}),l.jsxs("div",{className:ny+" p-5",children:[l.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Distribución por estado"}),l.jsx("div",{className:"h-64",children:l.jsx(Pp,{width:"100%",height:"100%",children:l.jsxs(pse,{children:[l.jsx(N8,{data:J,dataKey:"value",nameKey:"name",outerRadius:90,label:!0,children:J.map((ee,P)=>l.jsx(pg,{fill:E0[P%E0.length]},P))}),l.jsx(U2,{}),l.jsx(Dp,{})]})})})]}),l.jsxs("div",{className:ny+" p-5",children:[l.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Subdimensiones más trabajadas"}),l.jsxs("ul",{className:"space-y-2",children:[K.map((ee,P)=>l.jsxs("li",{className:"flex items-center justify-between text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{background:E0[P%E0.length]}}),ee.name]}),l.jsx("span",{className:"font-semibold",children:ee.value})]},P)),K.length===0&&l.jsx("li",{className:"text-slate-500",children:"Sin datos"})]})]})]})]})},ik="planificaciones",gse="actividades_calendario",xse=e=>{var r,n,a;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:a.toISOString())||t.fechaCreacion}},PRe=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:sr.fromDate(new Date),fechaActualizacion:sr.fromDate(new Date)};return(await Tn(kt(ht,ik),r)).id}catch(r){throw console.error("Error al guardar planificación:",r),new Error("No se pudo guardar la planificación")}},RRe=async(e,t,r)=>{try{const n=dr(ht,ik,e),a=await R1(n);if(!a.exists()||a.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificación");await Vu(n,{...t,fechaActualizacion:sr.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificación:",n),new Error("No se pudo actualizar la planificación")}},LRe=async(e,t)=>{try{const r=dr(ht,ik,e),n=await R1(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar esta planificación");await za(r)}catch(r){throw console.error("Error al eliminar planificación:",r),new Error("No se pudo eliminar la planificación")}},MRe=(e,t)=>{const r=$t(kt(ht,ik),Jr("userId","==",e),Sr("fechaCreacion","desc"));return pr(r,n=>{const a=n.docs.map(xse);t(a)},n=>{console.error("Error en suscripción a planificaciones:",n)})},URe=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:sr.fromDate(new Date),fechaActualizacion:sr.fromDate(new Date)};return(await Tn(kt(ht,gse),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},QRe=(e,t)=>{const r=$t(kt(ht,gse),Jr("userId","==",e),Sr("fecha","desc"));return pr(r,n=>{const a=n.docs.map(xse);t(a)},n=>{console.error("Error en suscripción a actividades:",n)})},HRe=e=>{const[t,r]=S.useState([]),[n,a]=S.useState(!0),[s,i]=S.useState(null);return S.useEffect(()=>e?(a(!0),MRe(e,f=>{r(f),a(!1)})):void 0,[e]),{planificaciones:t,loading:n,error:s,save:async d=>{try{return i(null),await PRe(d,e)}catch(f){throw i(f.message||"Error al guardar planificación"),f}},update:async(d,f)=>{try{i(null),await RRe(d,f,e)}catch(h){throw i(h.message||"Error al actualizar planificación"),h}},remove:async d=>{try{i(null),await LRe(d,e)}catch(f){throw i(f.message||"Error al eliminar planificación"),f}}}},PF=e=>{const t=new Date().toISOString();console.log(`[${t}] API Call: ${e}`)},VRe=e=>{const[t,r]=S.useState([]),[n,a]=S.useState(!0),[s,i]=S.useState(null);S.useEffect(()=>e?QRe(e,u=>{r(u),a(!1)}):void 0,[e]);const o=S.useCallback(async c=>{try{return i(null),await URe(c,e)}catch(u){throw i(u instanceof Error?u.message:"Error al guardar actividad"),u}},[e]);return{actividades:t,loading:n,error:s,save:o}},zRe=({lesson:e,onClose:t,onSave:r,isLoading:n=!1})=>{const[a,s]=S.useState(e),i=c=>{s({...a,[c.target.name]:c.target.value})},o=async()=>{try{await r(a),t()}catch(c){console.error("Error al guardar lección:",c)}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),l.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(a).map(([c,u])=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:c.replace(/([A-Z])/g," $1")}),l.jsx("textarea",{name:c,value:u,onChange:i,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},c))}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[l.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),l.jsxs("button",{onClick:o,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},$Re=({plan:e,onEditLesson:t,onUseLesson:r,isLoading:n=!1,onUpdatePlan:a})=>{const[s,i]=S.useState(e.progreso??0),[o,c]=S.useState(!1),u=async d=>{const f=parseInt(d.target.value,10);i(f),c(!0);try{e.id&&a&&(await a(e.id,{progreso:f}),console.log("✅ Progreso actualizado exitosamente"))}catch(h){console.error("❌ Error completo:",h),alert(`Error al guardar el avance: ${h.message}`),i(e.progreso??0)}finally{c(!1)}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("input",{type:"range",min:0,max:100,value:s,onChange:u,disabled:o||n}),l.jsxs("span",{className:"font-bold w-12",children:[s,"%"]}),o&&l.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),l.jsx("div",{className:"space-y-4",children:e.detallesLeccion.map((d,f)=>l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",f+1,": ",d.actividades]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo:"})," ",d.objetivosAprendizaje]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Contenidos:"})," ",d.contenidosConceptuales]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Habilidad (Bloom):"})," ",d.habilidadesBloom]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Perfil de Egreso:"})," ",d.perfilEgreso]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Interdisciplinariedad:"})," ",d.asignaturasInterdisciplinariedad]})]}),l.jsxs("div",{className:"flex gap-2 mt-4",children:[l.jsx("button",{onClick:()=>t(f,d),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),l.jsx("button",{onClick:()=>r(d,e),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},f))})]})},GRe=({plan:e,onBack:t,onSave:r,onDelete:n,isLoading:a=!1})=>{const[s,i]=S.useState(e),[o,c]=S.useState(!1),u=f=>{const{name:h,value:p}=f.target,[g,x]=h.split(".");i(g==="momentosClase"?b=>({...b,momentosClase:{...b.momentosClase,[x]:p}}):b=>({...b,[h]:p}))},d=async()=>{c(!0);try{await r(s)}catch(f){console.error("Error al guardar plan de clase:",f)}finally{c(!1)}};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreClase}),l.jsx("button",{onClick:t,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:a||o,children:"← Volver"})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),l.jsx("textarea",{name:"momentosClase.inicio",value:s.momentosClase.inicio,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]}),l.jsxs("div",{children:[l.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),l.jsx("textarea",{name:"momentosClase.desarrollo",value:s.momentosClase.desarrollo,onChange:u,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]}),l.jsxs("div",{children:[l.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),l.jsx("textarea",{name:"momentosClase.cierre",value:s.momentosClase.cierre,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]})]}),l.jsx("div",{className:"text-right mt-6",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("button",{onClick:()=>n(e.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:a||o,children:"🗑️ Eliminar Plan"}),l.jsxs("button",{onClick:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:a||o,children:[o&&l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},KRe=({userId:e})=>{const{actividades:t,save:r}=VRe(e),[n,a]=S.useState("list"),[s,i]=S.useState(null),[o,c]=S.useState(!1),[u,d]=S.useState(!1),f={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[h,p]=S.useState(f);S.useEffect(()=>{n==="summary"&&s&&g()},[n,s,e]);const g=async()=>{if(s)try{d(!1)}catch(I){console.error("Error al verificar evento en calendario:",I)}},x=I=>{const{name:E,value:N}=I.target;p(j=>({...j,[E]:N}))},b=(I,E,N)=>{p(j=>({...j,tareas:j.tareas.map(R=>R.id===I?{...R,[E]:N}:R)}))},y=()=>{p(I=>({...I,tareas:[...I.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},w=I=>{p(E=>({...E,tareas:E.tareas.filter(N=>N.id!==I)}))},_=async I=>{I.preventDefault(),c(!0);const E=`Basado en la siguiente información de una actividad, genera un objetivo claro y conciso para esta.
    - Nombre: ${h.nombre}
    - Descripción: ${h.descripcion}
    - Tareas: ${h.tareas.map(N=>N.descripcion).join(", ")}
    El objetivo debe ser breve, empezar con un verbo en infinitivo y enfocarse en el propósito principal de la actividad.`;try{PF("Planificación - Actividad Calendario");const N="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",L=(await(await new us(N).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(E)).response).text(),M={...h,objetivo:L.replace(/(\*\*|\*)/g,"")},J=await r(M),V={...M,id:J};i(V),a("summary")}catch(N){console.error("Error al generar objetivo con IA:",N),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él.");try{const j={...h,objetivo:"No generado"},R=await r(j),D={...j,id:R};i(D),a("summary")}catch(j){console.error("Error al guardar actividad:",j),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{c(!1)}},B=async I=>{if(I)try{d(!0),alert("Actividad marcada como añadida al calendario (funcionalidad en desarrollo).")}catch(E){console.error("Error adding to calendar:",E),alert("Hubo un error al agregar la actividad al calendario.")}},k="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white";return n==="form"?l.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:l.jsxs("form",{onSubmit:_,className:"space-y-8",children:[l.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[l.jsx("h3",{className:"text-lg font-bold mb-4",children:"Información General"}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("input",{name:"nombre",value:h.nombre,onChange:x,placeholder:"Nombre de la Actividad",className:k,required:!0,disabled:o}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("input",{name:"fecha",type:"date",value:h.fecha,onChange:x,className:k,required:!0,disabled:o}),l.jsx("input",{name:"hora",type:"time",value:h.hora,onChange:x,className:k,required:!0,disabled:o})]}),l.jsx("textarea",{name:"descripcion",value:h.descripcion,onChange:x,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:k,required:!0,disabled:o}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("input",{name:"ubicacion",value:h.ubicacion,onChange:x,placeholder:"Ubicación",className:k,required:!0,disabled:o}),l.jsx("input",{name:"participantes",value:h.participantes,onChange:x,placeholder:"Participantes",className:k,required:!0,disabled:o})]}),l.jsx("textarea",{name:"recursosGenerales",value:h.recursosGenerales,onChange:x,placeholder:"Recursos Generales Necesarios",rows:2,className:k,disabled:o})]})]}),l.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),l.jsx("button",{type:"button",onClick:y,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:o,children:"+ Agregar Tarea"})]}),l.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:h.tareas.map((I,E)=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[l.jsx("button",{type:"button",onClick:()=>w(I.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:o,children:"×"}),l.jsx("textarea",{value:I.descripcion,onChange:N=>b(I.id,"descripcion",N.target.value),placeholder:`Descripción de la Tarea ${E+1}`,rows:2,className:k,required:!0,disabled:o}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[l.jsx("input",{value:I.responsable,onChange:N=>b(I.id,"responsable",N.target.value),placeholder:"Responsable",className:k,required:!0,disabled:o}),l.jsx("input",{value:I.recursos,onChange:N=>b(I.id,"recursos",N.target.value),placeholder:"Recursos Necesarios",className:k,disabled:o})]})]},I.id))})]}),l.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[l.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),l.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{type:"button",onClick:()=>a("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:o,children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:o?l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&s?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[l.jsx("span",{className:"text-2xl",children:"✓"}),l.jsxs("div",{children:[l.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),l.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),l.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),l.jsxs("div",{className:"space-y-4 text-sm",children:[l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),l.jsx("span",{children:s.nombre})]}),l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),l.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),l.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),l.jsx("p",{children:s.descripcion})]}),l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Ubicación:"}),l.jsx("span",{children:s.ubicacion})]}),l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),l.jsx("span",{children:s.participantes})]}),l.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),l.jsx("p",{children:s.recursosGenerales})]}),l.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),l.jsx("p",{children:s.objetivo})]})]}),l.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[l.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),l.jsx("button",{onClick:()=>B(s),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),l.jsx("button",{onClick:()=>{a("list"),i(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),l.jsx("button",{onClick:()=>{a("form"),p(f)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),l.jsx("div",{className:"space-y-3",children:t.length>0?t.map(I=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:I.nombre}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(I.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",I.ubicacion]})]},I.id)):l.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},qRe=({currentUser:e})=>{const t=e.uid||e.email||e.id||"",{planificaciones:r,save:n,update:a,remove:s,loading:i}=HRe(t),o={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[c,u]=S.useState(o),[d,f]=S.useState(null),[h,p]=S.useState(!1),[g,x]=S.useState(null),[b,y]=S.useState("unidad"),[w,_]=S.useState(null),[B,k]=S.useState(null),I=S.useMemo(()=>e.asignaturas||[],[e.asignaturas]),E=S.useMemo(()=>{const Y=e.cursos||[],ee=new Set;return Y.forEach(P=>{P.startsWith("1º")?ee.add("1º Medio"):P.startsWith("2º")?ee.add("2º Medio"):P.startsWith("3º")?ee.add("3º Medio"):P.startsWith("4º")&&ee.add("4º Medio")}),Array.from(ee)},[e.cursos]);S.useEffect(()=>{u(Y=>({...Y,asignatura:I[0]||"",nivel:E[0]||""})),console.log("🔍 Debug datos usuario y planificaciones:",{currentUser:{uid:e.uid,email:e.email,id:e.id,nombreCompleto:e.nombreCompleto},userId:t,planificacionesCount:r.length,planificacionesAutores:r.map(Y=>({id:Y.id,autor:Y.autor,tipo:Y.tipo,coincideConUserId:Y.autor===t}))})},[I,E,e,t,r]);const N=Y=>{const{name:ee,value:P}=Y.target;u(Q=>({...Q,[ee]:ee==="cantidadClases"?parseInt(P,10):P}))},j=()=>{const{asignatura:Y,nivel:ee,nombreUnidad:P,contenidos:Q,cantidadClases:X,observaciones:te,ideasParaUnidad:ae}=c;return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica completa en formato JSON estructurado, basándote en la información proporcionada.

    **Información Base:**
    - Asignatura: ${Y}
    - Nivel: ${ee}
    - Nombre de la Unidad: "${P}"
    - Contenidos clave a trabajar (insumo principal): "${Q}"
    - Cantidad de clases para la unidad: ${X}
    - Ideas y perspectiva del docente para la unidad: "${ae||"Ninguna. Sé creativo."}"
    - Observaciones y énfasis del docente: "${te||"Ninguna"}"

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${X} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
        - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el número de clase entre paréntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.

    Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},R=async Y=>{if(Y.preventDefault(),p(!0),x(null),!c.contenidos||!c.nombreUnidad){x("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),p(!1);return}try{PF("Planificación - Unidad");const ee="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Q=new us(ee).getGenerativeModel({model:"gemini-1.5-flash-latest"}),X=j(),te={type:"object",properties:{objetivosAprendizaje:{type:"string"},indicadoresEvaluacion:{type:"string"},detallesLeccion:{type:"array",items:{type:"object",properties:{objetivosAprendizaje:{type:"string"},contenidosConceptuales:{type:"string"},habilidadesBloom:{type:"string"},perfilEgreso:{type:"string"},actividades:{type:"string"},asignaturasInterdisciplinariedad:{type:"string"}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]},oe=(await(await Q.generateContent({contents:[{parts:[{text:X}]}],generationConfig:{responseMimeType:"application/json",responseSchema:te}})).response).text(),ce=JSON.parse(oe),me={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Unidad",asignatura:c.asignatura,nivel:c.nivel,nombreUnidad:c.nombreUnidad,contenidos:c.contenidos,cantidadClases:c.cantidadClases,observaciones:c.observaciones,ideasParaUnidad:c.ideasParaUnidad,objetivosAprendizaje:ce.objetivosAprendizaje,indicadoresEvaluacion:ce.indicadoresEvaluacion,detallesLeccion:ce.detallesLeccion};if(d)await a(d.id,me),f({...me,id:d.id});else{const ke=await n(me);f({...me,id:ke})}}catch(ee){console.error("Error al generar planificación con IA",ee),x("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{p(!1)}},D=async(Y,ee)=>{p(!0),x(null);const P=`A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${ee.asignatura}
    - Nivel: ${ee.nivel}
    - Objetivo de la clase: ${Y.objetivosAprendizaje}
    - Contenidos: ${Y.contenidosConceptuales}
    - Actividades sugeridas: ${Y.actividades}
    
    Responde SÓLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{PF("Planificación - Utilizar Clase");const Q="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",te=new us(Q).getGenerativeModel({model:"gemini-1.5-flash-latest"}),ae={type:"object",properties:{inicio:{type:"string"},desarrollo:{type:"string"},cierre:{type:"string"}},required:["inicio","desarrollo","cierre"]},ce=(await(await te.generateContent({contents:[{parts:[{text:P}]}],generationConfig:{responseMimeType:"application/json",responseSchema:ae}})).response).text(),me=JSON.parse(ce),ke={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Clase",asignatura:ee.asignatura,nivel:ee.nivel,contenidos:Y.contenidosConceptuales,observaciones:"",nombreClase:Y.actividades,duracionClase:80,momentosClase:me,detalleLeccionOrigen:Y};await n(ke),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),y("clase")}catch(Q){console.error("Error al generar plan de clase con IA",Q),x("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{p(!1)}},O=Y=>{Y.tipo==="Unidad"&&(u({asignatura:Y.asignatura,nivel:Y.nivel,nombreUnidad:Y.nombreUnidad,contenidos:Y.contenidos,cantidadClases:Y.cantidadClases,observaciones:Y.observaciones,ideasParaUnidad:Y.ideasParaUnidad||""}),f(Y),window.scrollTo({top:0,behavior:"smooth"}))},L=async Y=>{if(window.confirm("¿Está seguro de que desea eliminar esta planificación?"))try{await s(Y),(d==null?void 0:d.id)===Y&&(f(null),u(o))}catch(ee){console.error("Error al eliminar planificación:",ee),alert("Error al eliminar la planificación. Por favor, intente nuevamente.")}},M=async Y=>{if(window.confirm("¿Está seguro de que desea eliminar este plan de clase?"))try{await s(Y),(w==null?void 0:w.id)===Y&&_(null),console.log("✅ Plan de clase eliminado exitosamente")}catch(ee){console.error("Error al eliminar plan de clase:",ee),alert("Error al eliminar el plan de clase. Por favor, intente nuevamente.")}},J=(Y,ee)=>{d&&k({planId:d.id,lessonIndex:Y,lessonData:ee})},V=async Y=>{if(B)try{const{planId:ee,lessonIndex:P}=B,Q=r.find(ae=>ae.id===ee&&ae.tipo==="Unidad");if(!Q)return;const X=[...Q.detallesLeccion];X[P]=Y;const te={...Q,detallesLeccion:X};await a(ee,te),f(te),k(null)}catch(ee){console.error("Error al actualizar lección:",ee),alert("Error al actualizar la lección. Por favor, intente nuevamente.")}},K="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",z=()=>l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."}),i?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):l.jsxs("form",{onSubmit:R,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsx("select",{name:"asignatura",value:c.asignatura,onChange:N,className:K,disabled:h,children:I.length>0?I.map(Y=>l.jsx("option",{value:Y,children:Y},Y)):l.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),l.jsx("select",{name:"nivel",value:c.nivel,onChange:N,className:K,disabled:h,children:E.length>0?E.map(Y=>l.jsx("option",{value:Y,children:Y},Y)):l.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",name:"nombreUnidad",value:c.nombreUnidad,onChange:N,className:K,placeholder:"Ej: La Célula y sus procesos",disabled:h})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[l.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{name:"contenidos",value:c.contenidos,onChange:N,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificación debe abordar.",className:K,disabled:h})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[l.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),l.jsx("textarea",{name:"ideasParaUnidad",value:c.ideasParaUnidad,onChange:N,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:K,disabled:h})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),l.jsx("input",{type:"number",name:"cantidadClases",value:c.cantidadClases,onChange:N,className:K,min:"1",max:"20",disabled:h})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),l.jsx("textarea",{name:"observaciones",value:c.observaciones,onChange:N,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:K,disabled:h})]})]}),l.jsx("div",{className:"pt-4 text-right",children:l.jsx("button",{type:"submit",disabled:h||i,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[150px] dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:h?l.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d?"Regenerar":"Generar Plan"})}),g&&l.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:g})]})]}),d&&l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),l.jsx($Re,{plan:d,onEditLesson:J,onUseLesson:D,onUpdatePlan:a,isLoading:h})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),i?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):l.jsx("div",{className:"space-y-4",children:r.filter(Y=>Y.tipo==="Unidad").length>0?r.filter(Y=>Y.tipo==="Unidad").map(Y=>l.jsx("div",{className:`p-4 border rounded-lg ${(d==null?void 0:d.id)===Y.id?"bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700"}`,children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:Y.nombreUnidad}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(Y.fechaCreacion).toLocaleString("es-CL")]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",Y.contenidos]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>O(Y),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm disabled:opacity-50",disabled:h,children:"Ver y Editar"}),l.jsx("button",{onClick:()=>L(Y.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 disabled:opacity-50",disabled:h,children:"🗑️"})]})]})},Y.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),G=()=>{const Y=r.filter(ee=>ee.tipo==="Clase").sort((ee,P)=>new Date(P.fechaCreacion).getTime()-new Date(ee.fechaCreacion).getTime());return w?l.jsx(GRe,{plan:w,onBack:()=>_(null),onDelete:M,onSave:async ee=>{try{await a(ee.id,ee),_(ee)}catch(P){console.error("Error al actualizar plan de clase:",P),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:h}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Planes de Clase Guardados"}),i?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):l.jsx("div",{className:"space-y-4",children:Y.length>0?Y.map(ee=>l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ee.nombreClase}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(ee.fechaCreacion).toLocaleString("es-CL")]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",ee.contenidos]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("button",{onClick:()=>_(ee),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},ee.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})};return!e||!e.email&&!e.id?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),l.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(e)]})]})}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>y("unidad"),className:`${b==="unidad"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Unidad"}),l.jsx("button",{onClick:()=>y("clase"),className:`${b==="clase"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Clase"}),l.jsx("button",{onClick:()=>y("calendario"),className:`${b==="calendario"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Actividades Calendario"})]})}),b==="unidad"&&z(),b==="clase"&&G(),b==="calendario"&&l.jsx(KRe,{userId:t}),B&&l.jsx(zRe,{lesson:B.lessonData,onClose:()=>k(null),onSave:V,isLoading:h})]})},ok="events",WRe=async()=>{try{const e=$t(kt(xn,ok),Sr("date","asc"));return(await ga(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener eventos:",e),new Error("No se pudieron cargar los eventos del calendario")}},XRe=async e=>{try{return{id:(await Tn(kt(xn,ok),{...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear evento:",t),new Error("No se pudo crear el evento del calendario")}},YRe=async(e,t)=>{try{const r=dr(xn,ok,e);await Vu(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",e),new Error("No se pudo actualizar el evento del calendario")}},JRe=async e=>{try{const t=dr(xn,ok,e);await za(t)}catch(t){throw console.error("Error al eliminar evento:",t,"ID:",e),new Error("No se pudo eliminar el evento del calendario")}},ZRe=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],pG={[dn.EVALUACION]:l.jsx(ef,{className:"h-4 w-4"}),[dn.ACTO]:l.jsx(rwe,{className:"h-4 w-4"}),[dn.ACTIVIDAD_FOCALIZADA]:l.jsx(Wv,{className:"h-4 w-4"}),[dn.SALIDA_PEDAGOGICA]:l.jsx(vwe,{className:"h-4 w-4"})},e8e=e=>{switch(e.type){case dn.EVALUACION:return`${e.subtype} - ${e.asignatura}`;case dn.ACTO:return`Acto: ${e.ubicacion}`;case dn.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case dn.SALIDA_PEDAGOGICA:return`Salida: ${e.ubicacion}`;default:return"Evento"}},t8e=({isOpen:e,onClose:t,onSave:r,onDelete:n,event:a,date:s,isLoading:i})=>{const[o,c]=S.useState({});S.useEffect(()=>{c(a||{type:dn.EVALUACION,subtype:Cp.PRUEBA_PARCIAL,asignatura:qi[0],curso:Ks[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[a,e]);const u="w-full rounded-md border border-white/30 bg-white/10 dark:bg-white/5 text-slate-800 dark:text-slate-100 placeholder-slate-400 backdrop-blur-md shadow-sm focus:outline-none focus:ring-4 focus:ring-yellow-400/30 focus:border-blue-300 dark:border-white/10 dark:focus:border-blue-400",d=x=>{const{name:b,value:y}=x.target;c(w=>({...w,[b]:y}))},f=x=>{c(b=>{if(b.type===dn.SALIDA_PEDAGOGICA){const y=b.cursos||[],w=y.includes(x)?y.filter(_=>_!==x):[...y,x];return{...b,cursos:w.sort()}}return b})},h=x=>{var y;x.preventDefault();let b;switch(o.type){case dn.EVALUACION:{const w={date:s,type:dn.EVALUACION,subtype:o.subtype,asignatura:o.asignatura,curso:o.curso,contenidos:o.contenidos};(o.subtype===Cp.RUBRICA||o.subtype===Cp.PAUTA_COTEJO)&&((y=o.enlace)!=null&&y.trim())&&(w.enlace=o.enlace.trim()),b=w;break}case dn.ACTO:b={date:s,type:dn.ACTO,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case dn.ACTIVIDAD_FOCALIZADA:b={date:s,type:dn.ACTIVIDAD_FOCALIZADA,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case dn.SALIDA_PEDAGOGICA:b={date:s,type:dn.SALIDA_PEDAGOGICA,responsable:o.responsable,ubicacion:o.ubicacion,cursos:o.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(b)};if(!e)return null;const p=new Date(`${s}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),g=()=>{switch(o.type){case dn.EVALUACION:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Subtipo"}),l.jsx("select",{id:"subtype",name:"subtype",value:o.subtype,onChange:d,required:!0,className:u,children:_be.map(x=>l.jsx("option",{value:x,children:x},x))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsx("select",{id:"asignatura",name:"asignatura",value:o.asignatura,onChange:d,required:!0,className:u,children:qi.map(x=>l.jsx("option",{value:x,children:x},x))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Curso"}),l.jsx("select",{id:"curso",name:"curso",value:o.curso,onChange:d,required:!0,className:u,children:Ks.map(x=>l.jsx("option",{value:x,children:x},x))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contenidos"}),l.jsx("textarea",{id:"contenidos",name:"contenidos",value:o.contenidos||"",onChange:d,required:!0,rows:3,className:u})]}),(o.subtype===Cp.RUBRICA||o.subtype===Cp.PAUTA_COTEJO)&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),l.jsx("input",{id:"enlace",name:"enlace",type:"url",value:o.enlace||"",onChange:d,placeholder:"https://...",className:u})]})]});case dn.ACTO:case dn.ACTIVIDAD_FOCALIZADA:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsables"}),l.jsx("input",{id:"responsables",name:"responsables",type:"text",value:o.responsables||"",onChange:d,required:!0,className:u})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación"}),l.jsxs("div",{className:"relative",children:[l.jsx(rN,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),l.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Horario"}),l.jsxs("div",{className:"relative",children:[l.jsx(V0,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),l.jsx("input",{id:"horario",name:"horario",type:"text",value:o.horario||"",onChange:d,required:!0,className:`${u} pl-9`})]})]})]});case dn.SALIDA_PEDAGOGICA:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsable"}),l.jsx("input",{id:"responsable",name:"responsable",type:"text",value:o.responsable||"",onChange:d,required:!0,className:u})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),l.jsxs("div",{className:"relative",children:[l.jsx(rN,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),l.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),l.jsxs("fieldset",{children:[l.jsx("legend",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),l.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border border-white/30 dark:border-white/10 p-2 rounded-md text-slate-700 dark:text-slate-300 bg-white/5 backdrop-blur-md",children:Ks.map(x=>l.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[l.jsx("input",{type:"checkbox",checked:(o.cursos||[]).includes(x),onChange:()=>f(x),className:"h-4 w-4 rounded text-yellow-500 focus:ring-yellow-400"}),l.jsx("span",{children:x})]},x))})]})]});default:return null}};return l.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center p-4",onClick:t,style:{background:"rgba(2, 6, 23, 0.55)"},children:l.jsx("div",{className:"relative w-full max-w-lg overflow-hidden rounded-2xl border border-white/20 bg-gradient-to-br from-blue-50/70 via-white/50 to-yellow-50/70 dark:from-slate-900/70 dark:via-slate-900/60 dark:to-slate-900/70 backdrop-blur-2xl shadow-2xl",onClick:x=>x.stopPropagation(),children:l.jsxs("form",{onSubmit:h,children:[l.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:a?"Editar Evento":"Agregar Evento"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-300/90 font-semibold",children:p})]}),l.jsx("button",{type:"button",onClick:t,className:"rounded-full p-2 hover:bg-white/20 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:l.jsx(aN,{className:"h-5 w-5"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),l.jsx("select",{id:"type",name:"type",value:o.type,onChange:d,className:u,children:Object.values(dn).map(x=>l.jsx("option",{value:x,children:x},x))})]}),g()]})]}),l.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-t border-white/20 flex justify-between items-center",children:[l.jsx("div",{children:a&&n&&l.jsxs("button",{type:"button",onClick:n,disabled:i,className:"inline-flex items-center gap-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:[l.jsx(tl,{className:"h-4 w-4"}),i?"Eliminando...":"Eliminar"]})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{type:"button",onClick:t,disabled:i,className:"inline-flex items-center gap-2 rounded-lg bg-white/20 px-4 py-2 font-semibold text-slate-800 hover:bg-white/30 backdrop-blur-md dark:bg-white/10 dark:text-slate-100 dark:hover:bg-white/20 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:[l.jsx(aN,{className:"h-4 w-4"}),"Cancelar"]}),l.jsxs("button",{type:"submit",disabled:i,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-yellow-500 px-4 py-2 font-bold text-white hover:opacity-95 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-300/40",children:[l.jsx(vm,{className:"h-4 w-4"}),i?"Guardando...":"Guardar"]})]})]})]})})})},r8e=({profile:e})=>{const[t,r]=S.useState(new Date),[n,a]=S.useState([]),[s,i]=S.useState(!1),[o,c]=S.useState(null),[u,d]=S.useState(!1),[f,h]=S.useState(Object.values(dn)),[p,g]=S.useState(!1),[x,b]=S.useState(null),[y,w]=S.useState(null),_=S.useCallback(async()=>{i(!0);try{const D=await WRe();a(D),c(null)}catch(D){console.error("Error al cargar eventos desde Firestore",D),c("No se pudieron cargar los eventos desde la nube.")}finally{i(!1)}},[]);S.useEffect(()=>{_()},[_]);const B=S.useMemo(()=>{const D=t.getFullYear(),O=t.getMonth(),L=new Date(D,O,1).getDay(),M=new Date(D,O+1,0).getDate(),J=[];let V=1;for(let K=0;K<6;K++){const z=[];for(let G=0;G<7;G++)K===0&&G<L||V>M?z.push(null):(z.push(new Date(D,O,V)),V++);if(J.push(z),V>M)break}return J},[t]),k=D=>{h(O=>O.includes(D)?O.filter(L=>L!==D):[...O,D])},I=()=>{f.length===Object.values(dn).length?h([]):h(Object.values(dn))},E=D=>{e!==Wt.ESTUDIANTE&&(b(D.toISOString().split("T")[0]),w(null),g(!0))},N=(D,O)=>{O.stopPropagation(),e!==Wt.ESTUDIANTE&&(b(D.date),w(D),g(!0))},j=async D=>{d(!0);try{y?await YRe(y.id,D):await XRe(D),await _(),g(!1)}catch(O){console.error("Error al guardar evento:",O);const L=O instanceof Error?O.message:"Error desconocido";c(`Error al guardar el evento: ${L}`)}finally{d(!1)}},R=async()=>{if(y){d(!0);try{await JRe(y.id),await _(),g(!1)}catch(D){console.error("Error al eliminar evento:",D);const O=D instanceof Error?D.message:"Error desconocido";c(`No se pudo eliminar el evento: ${O}`)}finally{d(!1)}}};return l.jsxs("div",{className:`relative overflow-hidden rounded-xl p-6 md:p-8 shadow-md space-y-6 animate-fade-in
                    bg-gradient-to-br from-blue-50 via-white to-yellow-50 dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[l.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[l.jsx("div",{className:"absolute -top-20 -left-16 h-64 w-64 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-yellow-300 to-yellow-200 dark:from-yellow-500/15 dark:to-yellow-400/10"}),l.jsx("div",{className:"absolute bottom-0 right-0 h-72 w-72 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-sky-300 to-blue-300 dark:from-sky-500/15 dark:to-blue-500/15"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 drop-shadow-sm",children:"Calendario Académico"}),l.jsx("div",{className:"text-slate-600 dark:text-slate-300 text-sm",children:s&&l.jsx("span",{className:"px-2 py-1 rounded bg-white/30 dark:bg-white/10 backdrop-blur-md",children:"Cargando…"})})]}),o&&l.jsx("div",{className:"text-red-700 dark:text-red-400 bg-red-100/70 dark:bg-red-900/30 border border-red-300/50 dark:border-red-800/40 p-3 rounded-lg",children:o}),!s&&n.length===0&&l.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-yellow-400/40 bg-yellow-50/70 p-4 text-yellow-900 dark:bg-yellow-900/20 dark:text-yellow-300 backdrop-blur-md",children:[l.jsx(Mye,{className:"h-5 w-5 mt-0.5"}),l.jsx("p",{children:"No hay eventos registrados en la nube."})]}),l.jsxs("div",{className:"mb-2 rounded-xl border border-white/30 bg-white/30 dark:bg-white/10 backdrop-blur-xl p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-200 mb-2",children:[l.jsx(wP,{className:"h-4 w-4"}),l.jsx("h2",{className:"text-lg font-semibold",children:"Filtrar por tipo de evento:"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[l.jsx("button",{onClick:I,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-600 to-yellow-500 text-white hover:opacity-95 transition-colors",children:f.length===Object.values(dn).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(dn).map(D=>l.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2
                ${f.includes(D)?`shadow-sm ${bv[D].color}`:"bg-white/40 text-slate-700 hover:bg-white/60 dark:bg-white/10 dark:text-slate-300 dark:hover:bg-white/20"}`,children:[l.jsx("input",{type:"checkbox",checked:f.includes(D),onChange:()=>k(D),className:"hidden"}),l.jsx("span",{className:"shrink-0",children:pG[D]}),l.jsx("span",{children:bv[D].label})]},D))]})]}),l.jsxs("div",{className:"rounded-xl overflow-hidden border border-white/30 dark:border-white/10 backdrop-blur-xl bg-white/30 dark:bg-white/5",children:[l.jsxs("header",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-b border-white/20",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()-1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:l.jsx(Iw,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()+1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:l.jsx(bP,{className:"h-5 w-5"})})]}),l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 capitalize",children:t.toLocaleString("es-CL",{month:"long",year:"numeric"})}),l.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-gradient-to-r from-blue-600 to-yellow-500 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:opacity-95",children:"Hoy"})]}),l.jsx("div",{className:"grid grid-cols-7 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:ZRe.map(D=>l.jsx("div",{className:`text-center font-semibold text-slate-600 dark:text-slate-300 text-sm py-3
                         bg-white/40 dark:bg-white/10
                         border-b border-r border-slate-200/80 dark:border-slate-700/70`,children:D},D))}),l.jsx("div",{className:"grid grid-cols-7 grid-rows-6 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:B.flat().map((D,O)=>{const L=D&&D.toDateString()===new Date().toDateString(),M=D==null?void 0:D.toISOString().split("T")[0],J=M?n.filter(V=>V.date===M&&f.includes(V.type)):[];return l.jsx("div",{onClick:()=>D&&E(D),className:`border-b border-r border-slate-200/80 dark:border-slate-700/70
                            p-2 h-36 flex flex-col overflow-hidden relative group 
                            ${D?e!==Wt.ESTUDIANTE?"cursor-pointer hover:bg-white/40 dark:hover:bg-white/10":"":"bg-white/30 dark:bg-white/5"}`,children:D&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:`self-end text-sm font-semibold ${L?"bg-gradient-to-r from-blue-600 to-yellow-500 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-700 dark:text-slate-300"}`,children:D.getDate()}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:J.map(V=>l.jsxs("div",{onClick:K=>N(V,K),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${bv[V.type].color}`,children:[l.jsx("span",{className:"shrink-0",children:pG[V.type]}),l.jsx("span",{className:"truncate",children:e8e(V)})]},V.id))}),e!==Wt.ESTUDIANTE&&l.jsx("button",{className:`absolute bottom-1 right-1 rounded-full h-7 w-7 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity 
                                   bg-gradient-to-r from-blue-600 to-yellow-500 text-white shadow`,"aria-label":"Agregar evento",children:l.jsx(Lu,{className:"h-4 w-4"})})]})},O)})})]}),p&&l.jsx(t8e,{isOpen:p,onClose:()=>g(!1),onSave:j,onDelete:R,event:y,date:x,isLoading:u})]})},lk="anuncios",n8e=async()=>{try{const e=$t(kt(xn,lk),Sr("fechaPublicacion","desc"));return(await ga(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener anuncios:",e),new Error("No se pudieron cargar los anuncios")}},a8e=async e=>{try{return{id:(await Tn(kt(xn,lk),{...e,fechaPublicacion:e.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear anuncio:",t),new Error("No se pudo crear el anuncio")}},s8e=async(e,t)=>{try{const r=dr(xn,lk,e);await Vu(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",e),new Error("No se pudo actualizar el anuncio")}},i8e=async e=>{try{const t=dr(xn,lk,e);await za(t)}catch(t){throw console.error("Error al eliminar anuncio:",t,"ID:",e),new Error("No se pudo eliminar el anuncio")}},gG=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],o8e=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState(!1),[s,i]=S.useState(null),[o,c]=S.useState({titulo:"",mensaje:"",adjunto:""}),[u,d]=S.useState({tipo:"Todos",cursos:[]}),f=S.useCallback(async()=>{a(!0);try{const E=await n8e();r(E),i(null)}catch(E){console.error("Error al cargar anuncios desde Firestore",E),i("No se pudieron cargar los anuncios desde la nube.")}finally{a(!1)}},[]);S.useEffect(()=>{f()},[f]);const h=E=>{const{name:N,value:j}=E.target;c(R=>({...R,[N]:j}))},p=E=>{d({tipo:E,cursos:E==="Cursos"?[]:void 0})},g=E=>{d(N=>{var R;if(N.tipo!=="Cursos")return N;const j=(R=N.cursos)!=null&&R.includes(E)?N.cursos.filter(D=>D!==E):[...N.cursos||[],E];return{...N,cursos:j}})},x=async E=>{if(E.preventDefault(),!o.titulo||!o.mensaje){alert("Título y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const N={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:e.nombreCompleto,profileCreador:e.profile,destinatarios:u,...o};await a8e(N),await f(),c({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(N){console.error("Error al crear anuncio:",N),i("Error al publicar el anuncio en la nube.")}},b=async E=>{if(window.confirm("¿Está seguro de que desea eliminar este anuncio?"))try{await i8e(E),await f()}catch(N){console.error("Error al eliminar anuncio:",N),i("No se pudo eliminar el anuncio en la nube.")}},y=async E=>{try{const N=t.find(j=>j.id===E);N&&(await s8e(E,{destacado:!N.destacado}),await f())}catch(N){console.error("Error al actualizar anuncio:",N),i("No se pudo actualizar el estado del anuncio en la nube.")}},w=S.useMemo(()=>[...t].sort((E,N)=>E.destacado&&!N.destacado?-1:!E.destacado&&N.destacado?1:new Date(N.fechaPublicacion).getTime()-new Date(E.fechaPublicacion).getTime()),[t]),_=S.useMemo(()=>{const E=e.profile,N=e.curso;return w.filter(j=>{if(E===Wt.SUBDIRECCION)return!0;if(!j.destinatarios)return E!==Wt.ESTUDIANTE;const{tipo:R,cursos:D}=j.destinatarios;return R==="Todos"||R==="Profesores"&&E===Wt.PROFESORADO||R==="Coordinación TP"&&E===Wt.COORDINACION_TP?!0:R==="Cursos"?E===Wt.ESTUDIANTE?D==null?void 0:D.includes(N||""):!0:!1})},[w,e]),B=E=>e.profile===Wt.ESTUDIANTE?!1:e.profile===Wt.SUBDIRECCION||e.profile===E.profileCreador,k=()=>e.profile===Wt.SUBDIRECCION||e.profile===Wt.PROFESORADO,I="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),n&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),s&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),e.profile!==Wt.ESTUDIANTE?l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),l.jsxs("form",{onSubmit:x,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),l.jsx("input",{type:"text",name:"titulo",value:o.titulo,onChange:h,required:!0,className:I})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),l.jsx("textarea",{name:"mensaje",value:o.mensaje,onChange:h,required:!0,rows:4,className:I})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),l.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(E=>l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"destinatarioTipo",value:E,checked:u.tipo===E,onChange:()=>p(E),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),l.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:E.replace("Coordinación TP","Coord. TP")})]},E))})]}),u.tipo==="Cursos"&&l.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:Ks.map(E=>{var N;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(N=u.cursos)==null?void 0:N.includes(E),onChange:()=>g(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:E})]},E)})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),l.jsx("input",{type:"url",name:"adjunto",value:o.adjunto,onChange:h,placeholder:"https://ejemplo.com/documento.pdf",className:I})]}),l.jsx("div",{className:"pt-2 text-right",children:l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),!n&&_.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!n&&_.length>0&&_.map((E,N)=>{const j=gG[N%gG.length];return l.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${j.bg} ${j.rotate}`,children:[E.destacado&&l.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:l.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),l.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:E.titulo}),l.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:E.mensaje}),E.adjunto&&l.jsx("div",{className:"font-sans text-sm mb-4",children:l.jsxs("a",{href:E.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),l.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold",children:E.autor}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(E.fechaPublicacion).toLocaleString("es-CL")})]}),l.jsxs("div",{className:"flex items-center",children:[k()&&l.jsx("button",{onClick:()=>y(E.id),title:E.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:l.jsx("span",{className:`text-xl transition-opacity ${E.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),B(E)&&l.jsx("button",{onClick:()=>b(E.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},E.id)})})]})},vse="api_logs",l8e=async(e,t)=>{try{const r={module:e,userId:t.id,userEmail:t.email,userName:t.nombreCompleto,timestamp:sr.fromDate(new Date)};await Tn(kt(ht,vse),r)}catch(r){console.error("Error al registrar la llamada a la API en Firestore:",r)}},c8e=e=>{const t=$t(kt(ht,vse),Sr("timestamp","desc"));return pr(t,n=>{const a=n.docs.map(s=>{var o,c;const i=s.data();return{id:s.id,...i,timestamp:((c=(o=i.timestamp)==null?void 0:o.toDate)==null?void 0:c.call(o).toISOString())||i.timestamp}});e(a)},n=>{console.error("Error al suscribirse a los logs de API:",n),e([])})},d1=(e,t)=>{if(!t||!t.id||!t.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es inválido o no está en sesión.");return}l8e(e,t)},P8="actas_de_reunion",u8e=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},d8e=e=>{const t=$t(kt(ht,P8),Sr("fechaCreacion","desc"));return pr(t,n=>{const a=n.docs.map(s=>u8e(s));e(a)},n=>{console.error("Error al suscribirse a las actas:",n),e([])})},A8e=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:sr.fromDate(new Date(e.fechaCreacion))};return(await Tn(kt(ht,P8),r)).id}catch(r){throw console.error("Error al crear el acta:",r),new Error("No se pudo crear el acta.")}},f8e=async e=>{try{const t=dr(ht,P8,e);await za(t)}catch(t){throw console.error("Error al eliminar el acta:",t),new Error("No se pudo eliminar el acta.")}},bse=window.SpeechRecognition||window.webkitSpeechRecognition,xG=!!bse,h8e=({isListening:e})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),m8e=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState(null),[s,i]=S.useState({tipoReunion:Pj[0],asistentes:"",textoReunion:""}),[o,c]=S.useState(!1),[u,d]=S.useState(!1),[f,h]=S.useState(!0),[p,g]=S.useState(null),x=S.useRef(null);S.useEffect(()=>{h(!0);const E=d8e(N=>{r(N),!n&&N.length>0&&a(N[0]),h(!1)});return()=>E()},[n]);const b=E=>{const{name:N,value:j}=E.target;i(R=>({...R,[N]:j}))},y=S.useCallback(()=>{var E;if(!xG){g("El reconocimiento de voz no es compatible con este navegador.");return}o?(E=x.current)==null||E.stop():(x.current=new bse,x.current.lang="es-CL",x.current.continuous=!0,x.current.interimResults=!0,x.current.onresult=N=>{let j="";for(let R=N.resultIndex;R<N.results.length;++R)N.results[R].isFinal&&(j+=N.results[R][0].transcript+". ");i(R=>({...R,textoReunion:R.textoReunion+j}))},x.current.onstart=()=>c(!0),x.current.onend=()=>c(!1),x.current.onerror=N=>{console.error("Speech recognition error",N.error),g(`Error de reconocimiento: ${N.error}`),c(!1)},x.current.start())},[o]),w=async E=>{E.preventDefault();const{tipoReunion:N,asistentes:j,textoReunion:R}=s;if(!N||!j.trim()||!R.trim()){g("Todos los campos son obligatorios.");return}d(!0),g(null);try{d1("Generador de Actas");const D="",L=new globalThis.GoogleGenerativeAI(D).getGenerativeModel({model:"gemini-pro"}),M=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${R}"
                
                Asistentes a la reunión para referencia de nombres: ${j}
            `,z=(await(await L.generateContent(M)).response).text().replace(/^```json\s*|```\s*$/g,""),G=JSON.parse(z),Y={fechaCreacion:new Date().toISOString(),...s,...G},ee=await A8e(Y,e);i({tipoReunion:Pj[0],asistentes:"",textoReunion:""})}catch(D){console.error("Error al analizar acta con IA:",D),g("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{d(!1)}},_=async E=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?"))try{await f8e(E),(n==null?void 0:n.id)===E&&a(t.length>1?t[1]:null)}catch(N){console.error("Error deleting acta:",N),alert("No se pudo eliminar el acta.")}},B=E=>{a(E)},k=E=>E.temas||E.acuerdos||E.plazos||E.responsables?l.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),E.temas&&E.temas.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.temas.map((j,R)=>l.jsx("li",{children:j},R))})]}),E.acuerdos&&E.acuerdos.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.acuerdos.map((j,R)=>l.jsx("li",{children:j},R))})]}),E.plazos&&E.plazos.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.plazos.map((j,R)=>l.jsx("li",{children:j},R))})]}),E.responsables&&E.responsables.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.responsables.map((j,R)=>l.jsx("li",{children:j},R))})]})]}):null,I="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return f?l.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[l.jsxs("div",{className:"md:col-span-1 space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),l.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),l.jsx("div",{className:"ml-3",children:l.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",l.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),l.jsx("select",{name:"tipoReunion",value:s.tipoReunion,onChange:b,required:!0,className:I,children:Pj.map(E=>l.jsx("option",{value:E,children:E},E))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),l.jsx("textarea",{name:"asistentes",value:s.asistentes,onChange:b,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:I})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{name:"textoReunion",value:s.textoReunion,onChange:b,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:I}),xG&&l.jsx("button",{type:"button",onClick:y,title:o?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${o?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:l.jsx(h8e,{isListening:o})})]})]}),p&&l.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:p}),l.jsx("div",{className:"pt-2 text-right",children:l.jsx("button",{type:"submit",disabled:u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:u?l.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),l.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:t.length>0?t.map(E=>l.jsxs("button",{onClick:()=>B(E),className:`w-full text-left p-3 rounded-lg border transition-colors ${(n==null?void 0:n.id)===E.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.tipoReunion}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(E.fechaCreacion).toLocaleDateString("es-CL")})]},E.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),l.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:n?l.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${n.tipoReunion}`}),l.jsx("button",{onClick:()=>_(n.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[l.jsx("strong",{children:"Fecha:"})," ",new Date(n.fechaCreacion).toLocaleString("es-CL")]}),l.jsx("h2",{children:"Asistentes"}),l.jsx("ul",{className:"list-disc pl-5",children:String(n.asistentes||"").split(",").map((E,N)=>E.trim()&&l.jsx("li",{children:E.trim()},N))}),k(n),l.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:l.jsx("p",{children:n.textoReunion})})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[l.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),l.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})},p8e="modulepreload",g8e=function(e){return"/"+e},vG={},A1=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let i=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=i(r.map(u=>{if(u=g8e(u),u in vG)return;vG[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":p8e,d||(h.as="script"),h.crossOrigin="",h.href=u,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((p,g)=>{h.addEventListener("load",p),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return a.then(i=>{for(const o of i||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})};function ma(e){"@babel/helpers - typeof";return ma=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ma(e)}var Jo=Uint8Array,Rc=Uint16Array,R8=Int32Array,ck=new Jo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),uk=new Jo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),RF=new Jo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),yse=function(e,t){for(var r=new Rc(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new R8(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},wse=yse(ck,2),Ese=wse.b,LF=wse.r;Ese[28]=258,LF[258]=28;var Cse=yse(uk,0),x8e=Cse.b,bG=Cse.r,MF=new Rc(32768);for(var Ua=0;Ua<32768;++Ua){var C0=(Ua&43690)>>1|(Ua&21845)<<1;C0=(C0&52428)>>2|(C0&13107)<<2,C0=(C0&61680)>>4|(C0&3855)<<4,MF[Ua]=((C0&65280)>>8|(C0&255)<<8)>>1}var YA=function(e,t,r){for(var n=e.length,a=0,s=new Rc(t);a<n;++a)e[a]&&++s[e[a]-1];var i=new Rc(t);for(a=1;a<t;++a)i[a]=i[a-1]+s[a-1]<<1;var o;if(r){o=new Rc(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],f=i[e[a]-1]++<<d,h=f|(1<<d)-1;f<=h;++f)o[MF[f]>>c]=u}else for(o=new Rc(n),a=0;a<n;++a)e[a]&&(o[a]=MF[i[e[a]-1]++]>>15-e[a]);return o},wm=new Jo(288);for(var Ua=0;Ua<144;++Ua)wm[Ua]=8;for(var Ua=144;Ua<256;++Ua)wm[Ua]=9;for(var Ua=256;Ua<280;++Ua)wm[Ua]=7;for(var Ua=280;Ua<288;++Ua)wm[Ua]=8;var Ww=new Jo(32);for(var Ua=0;Ua<32;++Ua)Ww[Ua]=5;var v8e=YA(wm,9,0),b8e=YA(wm,9,1),y8e=YA(Ww,5,0),w8e=YA(Ww,5,1),F3=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},pd=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},O3=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},L8=function(e){return(e+7)/8|0},_se=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Jo(e.subarray(t,r))},E8e=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],bd=function(e,t,r){var n=new Error(t||E8e[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,bd),!r)throw n;return n},C8e=function(e,t,r,n){var a=e.length,s=0;if(!a||t.f&&!t.l)return r||new Jo(0);var i=!r,o=i||t.i!=2,c=t.i;i&&(r=new Jo(a*3));var u=function(ke){var ne=r.length;if(ke>ne){var _e=new Jo(Math.max(ne*2,ke));_e.set(r),r=_e}},d=t.f||0,f=t.p||0,h=t.b||0,p=t.l,g=t.d,x=t.m,b=t.n,y=a*8;do{if(!p){d=pd(e,f,1);var w=pd(e,f+1,3);if(f+=3,w)if(w==1)p=b8e,g=w8e,x=9,b=5;else if(w==2){var I=pd(e,f,31)+257,E=pd(e,f+10,15)+4,N=I+pd(e,f+5,31)+1;f+=14;for(var j=new Jo(N),R=new Jo(19),D=0;D<E;++D)R[RF[D]]=pd(e,f+D*3,7);f+=E*3;for(var O=F3(R),L=(1<<O)-1,M=YA(R,O,1),D=0;D<N;){var J=M[pd(e,f,L)];f+=J&15;var _=J>>4;if(_<16)j[D++]=_;else{var V=0,K=0;for(_==16?(K=3+pd(e,f,3),f+=2,V=j[D-1]):_==17?(K=3+pd(e,f,7),f+=3):_==18&&(K=11+pd(e,f,127),f+=7);K--;)j[D++]=V}}var z=j.subarray(0,I),G=j.subarray(I);x=F3(z),b=F3(G),p=YA(z,x,1),g=YA(G,b,1)}else bd(1);else{var _=L8(f)+4,B=e[_-4]|e[_-3]<<8,k=_+B;if(k>a){c&&bd(0);break}o&&u(h+B),r.set(e.subarray(_,k),h),t.b=h+=B,t.p=f=k*8,t.f=d;continue}if(f>y){c&&bd(0);break}}o&&u(h+131072);for(var Y=(1<<x)-1,ee=(1<<b)-1,P=f;;P=f){var V=p[O3(e,f)&Y],Q=V>>4;if(f+=V&15,f>y){c&&bd(0);break}if(V||bd(2),Q<256)r[h++]=Q;else if(Q==256){P=f,p=null;break}else{var X=Q-254;if(Q>264){var D=Q-257,te=ck[D];X=pd(e,f,(1<<te)-1)+Ese[D],f+=te}var ae=g[O3(e,f)&ee],se=ae>>4;ae||bd(3),f+=ae&15;var G=x8e[se];if(se>3){var te=uk[se];G+=O3(e,f)&(1<<te)-1,f+=te}if(f>y){c&&bd(0);break}o&&u(h+131072);var oe=h+X;if(h<G){var ce=s-G,me=Math.min(G,oe);for(ce+h<0&&bd(3);h<me;++h)r[h]=n[ce+h]}for(;h<oe;++h)r[h]=r[h-G]}}t.l=p,t.p=P,t.b=h,t.f=d,p&&(d=1,t.m=x,t.d=g,t.n=b)}while(!d);return h!=r.length&&i?_se(r,0,h):r.subarray(0,h)},Mf=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},ay=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},D3=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,s=r.slice();if(!a)return{t:Sse,l:0};if(a==1){var i=new Jo(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(k,I){return k.f-I.f}),r.push({s:-1,f:25001});var o=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:o.f+c.f,l:o,r:c};d!=a-1;)o=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:o.f+c.f,l:o,r:c};for(var h=s[0].s,n=1;n<a;++n)s[n].s>h&&(h=s[n].s);var p=new Rc(h+1),g=UF(r[d-1],p,0);if(g>t){var n=0,x=0,b=g-t,y=1<<b;for(s.sort(function(I,E){return p[E.s]-p[I.s]||I.f-E.f});n<a;++n){var w=s[n].s;if(p[w]>t)x+=y-(1<<g-p[w]),p[w]=t;else break}for(x>>=b;x>0;){var _=s[n].s;p[_]<t?x-=1<<t-p[_]++-1:++n}for(;n>=0&&x;--n){var B=s[n].s;p[B]==t&&(--p[B],++x)}g=t}return{t:new Jo(p),l:g}},UF=function(e,t,r){return e.s==-1?Math.max(UF(e.l,t,r+1),UF(e.r,t,r+1)):t[e.s]=r},yG=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Rc(++t),n=0,a=e[0],s=1,i=function(c){r[n++]=c},o=1;o<=t;++o)if(e[o]==a&&o!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=e[o]}return{c:r.subarray(0,n),n:t}},sy=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},Nse=function(e,t,r){var n=r.length,a=L8(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<n;++s)e[a+s+4]=r[s];return(a+4+n)*8},wG=function(e,t,r,n,a,s,i,o,c,u,d){Mf(t,d++,r),++a[256];for(var f=D3(a,15),h=f.t,p=f.l,g=D3(s,15),x=g.t,b=g.l,y=yG(h),w=y.c,_=y.n,B=yG(x),k=B.c,I=B.n,E=new Rc(19),N=0;N<w.length;++N)++E[w[N]&31];for(var N=0;N<k.length;++N)++E[k[N]&31];for(var j=D3(E,7),R=j.t,D=j.l,O=19;O>4&&!R[RF[O-1]];--O);var L=u+5<<3,M=sy(a,wm)+sy(s,Ww)+i,J=sy(a,h)+sy(s,x)+i+14+3*O+sy(E,R)+2*E[16]+3*E[17]+7*E[18];if(c>=0&&L<=M&&L<=J)return Nse(t,d,e.subarray(c,c+u));var V,K,z,G;if(Mf(t,d,1+(J<M)),d+=2,J<M){V=YA(h,p,0),K=h,z=YA(x,b,0),G=x;var Y=YA(R,D,0);Mf(t,d,_-257),Mf(t,d+5,I-1),Mf(t,d+10,O-4),d+=14;for(var N=0;N<O;++N)Mf(t,d+3*N,R[RF[N]]);d+=3*O;for(var ee=[w,k],P=0;P<2;++P)for(var Q=ee[P],N=0;N<Q.length;++N){var X=Q[N]&31;Mf(t,d,Y[X]),d+=R[X],X>15&&(Mf(t,d,Q[N]>>5&127),d+=Q[N]>>12)}}else V=v8e,K=wm,z=y8e,G=Ww;for(var N=0;N<o;++N){var te=n[N];if(te>255){var X=te>>18&31;ay(t,d,V[X+257]),d+=K[X+257],X>7&&(Mf(t,d,te>>23&31),d+=ck[X]);var ae=te&31;ay(t,d,z[ae]),d+=G[ae],ae>3&&(ay(t,d,te>>5&8191),d+=uk[ae])}else ay(t,d,V[te]),d+=K[te]}return ay(t,d,V[256]),d+K[256]},_8e=new R8([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Sse=new Jo(0),N8e=function(e,t,r,n,a,s){var i=s.z||e.length,o=new Jo(n+i+5*(1+Math.ceil(i/7e3))+a),c=o.subarray(n,o.length-a),u=s.l,d=(s.r||0)&7;if(t){d&&(c[0]=s.r>>3);for(var f=_8e[t-1],h=f>>13,p=f&8191,g=(1<<r)-1,x=s.p||new Rc(32768),b=s.h||new Rc(g+1),y=Math.ceil(r/3),w=2*y,_=function(De){return(e[De]^e[De+1]<<y^e[De+2]<<w)&g},B=new R8(25e3),k=new Rc(288),I=new Rc(32),E=0,N=0,j=s.i||0,R=0,D=s.w||0,O=0;j+2<i;++j){var L=_(j),M=j&32767,J=b[L];if(x[M]=J,b[L]=M,D<=j){var V=i-j;if((E>7e3||R>24576)&&(V>423||!u)){d=wG(e,c,0,B,k,I,N,R,O,j-O,d),R=E=N=0,O=j;for(var K=0;K<286;++K)k[K]=0;for(var K=0;K<30;++K)I[K]=0}var z=2,G=0,Y=p,ee=M-J&32767;if(V>2&&L==_(j-ee))for(var P=Math.min(h,V)-1,Q=Math.min(32767,j),X=Math.min(258,V);ee<=Q&&--Y&&M!=J;){if(e[j+z]==e[j+z-ee]){for(var te=0;te<X&&e[j+te]==e[j+te-ee];++te);if(te>z){if(z=te,G=ee,te>P)break;for(var ae=Math.min(ee,te-2),se=0,K=0;K<ae;++K){var oe=j-ee+K&32767,ce=x[oe],me=oe-ce&32767;me>se&&(se=me,J=oe)}}}M=J,J=x[M],ee+=M-J&32767}if(G){B[R++]=268435456|LF[z]<<18|bG[G];var ke=LF[z]&31,ne=bG[G]&31;N+=ck[ke]+uk[ne],++k[257+ke],++I[ne],D=j+z,++E}else B[R++]=e[j],++k[e[j]]}}for(j=Math.max(j,D);j<i;++j)B[R++]=e[j],++k[e[j]];d=wG(e,c,u,B,k,I,N,R,O,j-O,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=b,s.p=x,s.i=j,s.w=D)}else{for(var j=s.w||0;j<i+u;j+=65535){var _e=j+65535;_e>=i&&(c[d/8|0]=u,_e=i),d=Nse(c,d+1,e.subarray(j,_e))}s.i=i}return _se(o,0,n+L8(d)+a)},kse=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,s=r.length|0,i=0;i!=s;){for(var o=Math.min(i+2655,s);i<o;++i)a+=n+=r[i];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},S8e=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),i=new Jo(s.length+e.length);i.set(s),i.set(e,s.length),e=i,a.w=s.length}return N8e(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},Bse=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},k8e=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=kse();a.p(t.dictionary),Bse(e,2,a.d())}},B8e=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&bd(6,"invalid zlib data"),(e[1]>>5&1)==1&&bd(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function QF(e,t){t||(t={});var r=kse();r.p(e);var n=S8e(e,t,t.dictionary?6:2,4);return k8e(n,t),Bse(n,n.length-4,r.d()),n}function j8e(e,t){return C8e(e.subarray(B8e(e),-4),{i:2},t,t)}var T8e=typeof TextDecoder<"u"&&new TextDecoder,I8e=0;try{T8e.decode(Sse,{stream:!0}),I8e=1}catch{}var Qr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function P3(){Qr.console&&typeof Qr.console.log=="function"&&Qr.console.log.apply(Qr.console,arguments)}var _a={log:P3,warn:function(e){Qr.console&&(typeof Qr.console.warn=="function"?Qr.console.warn.apply(Qr.console,arguments):P3.call(null,arguments))},error:function(e){Qr.console&&(typeof Qr.console.error=="function"?Qr.console.error.apply(Qr.console,arguments):P3(e))}};function R3(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){wp(n.response,t,r)},n.onerror=function(){_a.error("could not download file")},n.send()}function EG(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function zC(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var aw,HF,wp=Qr.saveAs||((typeof window>"u"?"undefined":ma(window))!=="object"||window!==Qr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Qr.URL||Qr.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?EG(a.href)?R3(e,t,r):zC(a,a.target="_blank"):zC(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){zC(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(EG(e))R3(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){zC(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:ma(s)!=="object"&&(_a.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return R3(e,t,r);var a=e.type==="application/octet-stream",s=/constructor/i.test(Qr.HTMLElement)||Qr.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&(typeof FileReader>"u"?"undefined":ma(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(e)}else{var c=Qr.URL||Qr.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function jse(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,i=a.exec(e);i&&(t=s(i),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+o+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function L3(e,t){var r=e[0],n=e[1],a=e[2],s=e[3];r=Po(r,n,a,s,t[0],7,-680876936),s=Po(s,r,n,a,t[1],12,-389564586),a=Po(a,s,r,n,t[2],17,606105819),n=Po(n,a,s,r,t[3],22,-1044525330),r=Po(r,n,a,s,t[4],7,-176418897),s=Po(s,r,n,a,t[5],12,1200080426),a=Po(a,s,r,n,t[6],17,-1473231341),n=Po(n,a,s,r,t[7],22,-45705983),r=Po(r,n,a,s,t[8],7,1770035416),s=Po(s,r,n,a,t[9],12,-1958414417),a=Po(a,s,r,n,t[10],17,-42063),n=Po(n,a,s,r,t[11],22,-1990404162),r=Po(r,n,a,s,t[12],7,1804603682),s=Po(s,r,n,a,t[13],12,-40341101),a=Po(a,s,r,n,t[14],17,-1502002290),r=Ro(r,n=Po(n,a,s,r,t[15],22,1236535329),a,s,t[1],5,-165796510),s=Ro(s,r,n,a,t[6],9,-1069501632),a=Ro(a,s,r,n,t[11],14,643717713),n=Ro(n,a,s,r,t[0],20,-373897302),r=Ro(r,n,a,s,t[5],5,-701558691),s=Ro(s,r,n,a,t[10],9,38016083),a=Ro(a,s,r,n,t[15],14,-660478335),n=Ro(n,a,s,r,t[4],20,-405537848),r=Ro(r,n,a,s,t[9],5,568446438),s=Ro(s,r,n,a,t[14],9,-1019803690),a=Ro(a,s,r,n,t[3],14,-187363961),n=Ro(n,a,s,r,t[8],20,1163531501),r=Ro(r,n,a,s,t[13],5,-1444681467),s=Ro(s,r,n,a,t[2],9,-51403784),a=Ro(a,s,r,n,t[7],14,1735328473),r=Lo(r,n=Ro(n,a,s,r,t[12],20,-1926607734),a,s,t[5],4,-378558),s=Lo(s,r,n,a,t[8],11,-2022574463),a=Lo(a,s,r,n,t[11],16,1839030562),n=Lo(n,a,s,r,t[14],23,-35309556),r=Lo(r,n,a,s,t[1],4,-1530992060),s=Lo(s,r,n,a,t[4],11,1272893353),a=Lo(a,s,r,n,t[7],16,-155497632),n=Lo(n,a,s,r,t[10],23,-1094730640),r=Lo(r,n,a,s,t[13],4,681279174),s=Lo(s,r,n,a,t[0],11,-358537222),a=Lo(a,s,r,n,t[3],16,-722521979),n=Lo(n,a,s,r,t[6],23,76029189),r=Lo(r,n,a,s,t[9],4,-640364487),s=Lo(s,r,n,a,t[12],11,-421815835),a=Lo(a,s,r,n,t[15],16,530742520),r=Mo(r,n=Lo(n,a,s,r,t[2],23,-995338651),a,s,t[0],6,-198630844),s=Mo(s,r,n,a,t[7],10,1126891415),a=Mo(a,s,r,n,t[14],15,-1416354905),n=Mo(n,a,s,r,t[5],21,-57434055),r=Mo(r,n,a,s,t[12],6,1700485571),s=Mo(s,r,n,a,t[3],10,-1894986606),a=Mo(a,s,r,n,t[10],15,-1051523),n=Mo(n,a,s,r,t[1],21,-2054922799),r=Mo(r,n,a,s,t[8],6,1873313359),s=Mo(s,r,n,a,t[15],10,-30611744),a=Mo(a,s,r,n,t[6],15,-1560198380),n=Mo(n,a,s,r,t[13],21,1309151649),r=Mo(r,n,a,s,t[4],6,-145523070),s=Mo(s,r,n,a,t[11],10,-1120210379),a=Mo(a,s,r,n,t[2],15,718787259),n=Mo(n,a,s,r,t[9],21,-343485551),e[0]=$0(r,e[0]),e[1]=$0(n,e[1]),e[2]=$0(a,e[2]),e[3]=$0(s,e[3])}function dk(e,t,r,n,a,s){return t=$0($0(t,e),$0(n,s)),$0(t<<a|t>>>32-a,r)}function Po(e,t,r,n,a,s,i){return dk(t&r|~t&n,e,t,a,s,i)}function Ro(e,t,r,n,a,s,i){return dk(t&n|r&~n,e,t,a,s,i)}function Lo(e,t,r,n,a,s,i){return dk(t^r^n,e,t,a,s,i)}function Mo(e,t,r,n,a,s,i){return dk(r^(t|~n),e,t,a,s,i)}function Tse(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)L3(n,F8e(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(L3(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,L3(n,a),n}function F8e(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}aw=Qr.atob.bind(Qr),HF=Qr.btoa.bind(Qr);var CG="0123456789abcdef".split("");function O8e(e){for(var t="",r=0;r<4;r++)t+=CG[e>>8*r+4&15]+CG[e>>8*r&15];return t}function D8e(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function VF(e){return Tse(e).map(D8e).join("")}var P8e=function(e){for(var t=0;t<e.length;t++)e[t]=O8e(e[t]);return e.join("")}(Tse("hello"))!="5d41402abc4b2a76b9719d911017c592";function $0(e,t){if(P8e){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function zF(e,t){var r,n,a,s;if(e!==r){for(var i=(a=e,s=1+(256/e.length>>0),new Array(s+1).join(a)),o=[],c=0;c<256;c++)o[c]=c;var u=0;for(c=0;c<256;c++){var d=o[c];u=(u+d+i.charCodeAt(c))%256,o[c]=o[u],o[u]=d}r=e,n=o}else o=n;var f=t.length,h=0,p=0,g="";for(c=0;c<f;c++)p=(p+(d=o[h=(h+1)%256]))%256,o[h]=o[p],o[p]=d,i=o[(o[h]+o[p])%256],g+=String.fromCharCode(t.charCodeAt(c)^i);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var _G={print:4,modify:8,copy:16,"annot-forms":32};function Xx(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(o){if(_G.perm!==void 0)throw new Error("Invalid permission: "+o);a+=_G[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(t+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=VF(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=zF(this.encryptionKey,this.padding)}function Yx(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function NG(e){if(ma(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[r]){var i=t[r][s];try{i[0].apply(e,n)}catch(o){Qr.console&&_a.error("jsPDF PubSub Error",o.message,o)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function zN(e){if(!(this instanceof zN))return new zN(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function Ise(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Np(e,t,r,n,a){if(!(this instanceof Np))return new Np(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,Ise.call(this,n,a)}function ov(e,t,r,n,a){if(!(this instanceof ov))return new ov(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,Ise.call(this,n,a)}function vr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],i=[],o=1,c=16,u="S",d=null;ma(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,s=e.compress||e.compressPdf||s,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),i=e.filters||(s===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,h={},p={internal:{},__private__:{}};p.__private__.PubSub=NG;var g="1.3",x=p.__private__.getPdfVersion=function(){return g};p.__private__.setPdfVersion=function(W){g=W};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return b};var y=p.__private__.getPageFormat=function(W){return b[W]};a=a||"a4";var w={COMPAT:"compat",ADVANCED:"advanced"},_=w.COMPAT;function B(){this.saveGraphicsState(),fe(new yt(gt,0,0,-gt,0,Di()*gt).toString()+" cm"),this.setFontSize(this.getFontSize()/gt),u="n",_=w.ADVANCED}function k(){this.restoreGraphicsState(),u="S",_=w.COMPAT}var I=p.__private__.combineFontStyleAndFontWeight=function(W,Ae){if(W=="bold"&&Ae=="normal"||W=="bold"&&Ae==400||W=="normal"&&Ae=="italic"||W=="bold"&&Ae=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ae&&(W=Ae==400||Ae==="normal"?W==="italic"?"italic":"normal":Ae!=700&&Ae!=="bold"||W!=="normal"?(Ae==700?"bold":Ae)+""+W:"bold"),W};p.advancedAPI=function(W){var Ae=_===w.COMPAT;return Ae&&B.call(this),typeof W!="function"||(W(this),Ae&&k.call(this)),this},p.compatAPI=function(W){var Ae=_===w.ADVANCED;return Ae&&k.call(this),typeof W!="function"||(W(this),Ae&&B.call(this)),this},p.isAdvancedAPI=function(){return _===w.ADVANCED};var E,N=function(W){if(_!==w.ADVANCED)throw new Error(W+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},j=p.roundToPrecision=p.__private__.roundToPrecision=function(W,Ae){var Oe=t||Ae;if(isNaN(W)||isNaN(Oe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return W.toFixed(Oe).replace(/0+$/,"")};E=p.hpf=p.__private__.hpf=typeof c=="number"?function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.hpf");return j(W,c)}:c==="smart"?function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.hpf");return j(W,W>-1&&W<1?16:5)}:function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.hpf");return j(W,16)};var R=p.f2=p.__private__.f2=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.f2");return j(W,2)},D=p.__private__.f3=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.f3");return j(W,3)},O=p.scale=p.__private__.scale=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.scale");return _===w.COMPAT?W*gt:_===w.ADVANCED?W:void 0},L=function(W){return _===w.COMPAT?Di()-W:_===w.ADVANCED?W:void 0},M=function(W){return O(L(W))};p.__private__.setPrecision=p.setPrecision=function(W){typeof parseInt(W,10)=="number"&&(t=parseInt(W,10))};var J,V="00000000000000000000000000000000",K=p.__private__.getFileId=function(){return V},z=p.__private__.setFileId=function(W){return V=W!==void 0&&/^[a-fA-F0-9]{32}$/.test(W)?W.toUpperCase():V.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(la=new Xx(d.userPermissions,d.userPassword,d.ownerPassword,V)),V};p.setFileId=function(W){return z(W),this},p.getFileId=function(){return K()};var G=p.__private__.convertDateToPDFDate=function(W){var Ae=W.getTimezoneOffset(),Oe=Ae<0?"+":"-",Le=Math.floor(Math.abs(Ae/60)),qe=Math.abs(Ae%60),bt=[Oe,X(Le),"'",X(qe),"'"].join("");return["D:",W.getFullYear(),X(W.getMonth()+1),X(W.getDate()),X(W.getHours()),X(W.getMinutes()),X(W.getSeconds()),bt].join("")},Y=p.__private__.convertPDFDateToDate=function(W){var Ae=parseInt(W.substr(2,4),10),Oe=parseInt(W.substr(6,2),10)-1,Le=parseInt(W.substr(8,2),10),qe=parseInt(W.substr(10,2),10),bt=parseInt(W.substr(12,2),10),Ut=parseInt(W.substr(14,2),10);return new Date(Ae,Oe,Le,qe,bt,Ut,0)},ee=p.__private__.setCreationDate=function(W){var Ae;if(W===void 0&&(W=new Date),W instanceof Date)Ae=G(W);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(W))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ae=W}return J=Ae},P=p.__private__.getCreationDate=function(W){var Ae=J;return W==="jsDate"&&(Ae=Y(J)),Ae};p.setCreationDate=function(W){return ee(W),this},p.getCreationDate=function(W){return P(W)};var Q,X=p.__private__.padd2=function(W){return("0"+parseInt(W)).slice(-2)},te=p.__private__.padd2Hex=function(W){return("00"+(W=W.toString())).substr(W.length)},ae=0,se=[],oe=[],ce=0,me=[],ke=[],ne=!1,_e=oe,De=function(){ae=0,ce=0,oe=[],se=[],me=[],Ce=Kr(),we=Kr()};p.__private__.setCustomOutputDestination=function(W){ne=!0,_e=W};var Ne=function(W){ne||(_e=W)};p.__private__.resetCustomOutputDestination=function(){ne=!1,_e=oe};var fe=p.__private__.out=function(W){return W=W.toString(),ce+=W.length+1,_e.push(W),_e},Ie=p.__private__.write=function(W){return fe(arguments.length===1?W.toString():Array.prototype.join.call(arguments," "))},Me=p.__private__.getArrayBuffer=function(W){for(var Ae=W.length,Oe=new ArrayBuffer(Ae),Le=new Uint8Array(Oe);Ae--;)Le[Ae]=W.charCodeAt(Ae);return Oe},Xe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Xe};var ye=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(W){return ye=_===w.ADVANCED?W/gt:W,this};var Fe,Re=p.__private__.getFontSize=p.getFontSize=function(){return _===w.COMPAT?ye:ye*gt},Ge=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(W){return Ge=W,this},p.__private__.getR2L=p.getR2L=function(){return Ge};var Ke,Ze=p.__private__.setZoomMode=function(W){var Ae=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(W))Fe=W;else if(isNaN(W)){if(Ae.indexOf(W)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+W+'" is not recognized.');Fe=W}else Fe=parseInt(W,10)};p.__private__.getZoomMode=function(){return Fe};var ft,Nt=p.__private__.setPageMode=function(W){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(W)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+W+'" is not recognized.');Ke=W};p.__private__.getPageMode=function(){return Ke};var Tt=p.__private__.setLayoutMode=function(W){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(W)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+W+'" is not recognized.');ft=W};p.__private__.getLayoutMode=function(){return ft},p.__private__.setDisplayMode=p.setDisplayMode=function(W,Ae,Oe){return Ze(W),Tt(Ae),Nt(Oe),this};var St={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(W){if(Object.keys(St).indexOf(W)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return St[W]},p.__private__.getDocumentProperties=function(){return St},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(W){for(var Ae in St)St.hasOwnProperty(Ae)&&W[Ae]&&(St[Ae]=W[Ae]);return this},p.__private__.setDocumentProperty=function(W,Ae){if(Object.keys(St).indexOf(W)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return St[W]=Ae};var Dt,gt,fr,zt,Mr,wr={},Dr={},vn=[],Tr={},Ga={},nn={},oa={},Ba=null,rn=0,gr=[],tt=new NG(p),xt=e.hotfixes||[],et={},vt={},wt=[],yt=function W(Ae,Oe,Le,qe,bt,Ut){if(!(this instanceof W))return new W(Ae,Oe,Le,qe,bt,Ut);isNaN(Ae)&&(Ae=1),isNaN(Oe)&&(Oe=0),isNaN(Le)&&(Le=0),isNaN(qe)&&(qe=1),isNaN(bt)&&(bt=0),isNaN(Ut)&&(Ut=0),this._matrix=[Ae,Oe,Le,qe,bt,Ut]};Object.defineProperty(yt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(W){this._matrix[0]=W}}),Object.defineProperty(yt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(W){this._matrix[1]=W}}),Object.defineProperty(yt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(W){this._matrix[2]=W}}),Object.defineProperty(yt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(W){this._matrix[3]=W}}),Object.defineProperty(yt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(W){this._matrix[4]=W}}),Object.defineProperty(yt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(W){this._matrix[5]=W}}),Object.defineProperty(yt.prototype,"a",{get:function(){return this._matrix[0]},set:function(W){this._matrix[0]=W}}),Object.defineProperty(yt.prototype,"b",{get:function(){return this._matrix[1]},set:function(W){this._matrix[1]=W}}),Object.defineProperty(yt.prototype,"c",{get:function(){return this._matrix[2]},set:function(W){this._matrix[2]=W}}),Object.defineProperty(yt.prototype,"d",{get:function(){return this._matrix[3]},set:function(W){this._matrix[3]=W}}),Object.defineProperty(yt.prototype,"e",{get:function(){return this._matrix[4]},set:function(W){this._matrix[4]=W}}),Object.defineProperty(yt.prototype,"f",{get:function(){return this._matrix[5]},set:function(W){this._matrix[5]=W}}),Object.defineProperty(yt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(yt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(yt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(yt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),yt.prototype.join=function(W){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(W)},yt.prototype.multiply=function(W){var Ae=W.sx*this.sx+W.shy*this.shx,Oe=W.sx*this.shy+W.shy*this.sy,Le=W.shx*this.sx+W.sy*this.shx,qe=W.shx*this.shy+W.sy*this.sy,bt=W.tx*this.sx+W.ty*this.shx+this.tx,Ut=W.tx*this.shy+W.ty*this.sy+this.ty;return new yt(Ae,Oe,Le,qe,bt,Ut)},yt.prototype.decompose=function(){var W=this.sx,Ae=this.shy,Oe=this.shx,Le=this.sy,qe=this.tx,bt=this.ty,Ut=Math.sqrt(W*W+Ae*Ae),Zt=(W/=Ut)*Oe+(Ae/=Ut)*Le;Oe-=W*Zt,Le-=Ae*Zt;var F=Math.sqrt(Oe*Oe+Le*Le);return Zt/=F,W*(Le/=F)<Ae*(Oe/=F)&&(W=-W,Ae=-Ae,Zt=-Zt,Ut=-Ut),{scale:new yt(Ut,0,0,F,0,0),translate:new yt(1,0,0,1,qe,bt),rotate:new yt(W,Ae,-Ae,W,0,0),skew:new yt(1,0,Zt,1,0,0)}},yt.prototype.toString=function(W){return this.join(" ")},yt.prototype.inversed=function(){var W=this.sx,Ae=this.shy,Oe=this.shx,Le=this.sy,qe=this.tx,bt=this.ty,Ut=1/(W*Le-Ae*Oe),Zt=Le*Ut,F=-Ae*Ut,re=-Oe*Ut,le=W*Ut;return new yt(Zt,F,re,le,-Zt*qe-re*bt,-F*qe-le*bt)},yt.prototype.applyToPoint=function(W){var Ae=W.x*this.sx+W.y*this.shx+this.tx,Oe=W.x*this.shy+W.y*this.sy+this.ty;return new Yu(Ae,Oe)},yt.prototype.applyToRectangle=function(W){var Ae=this.applyToPoint(W),Oe=this.applyToPoint(new Yu(W.x+W.w,W.y+W.h));return new Jd(Ae.x,Ae.y,Oe.x-Ae.x,Oe.y-Ae.y)},yt.prototype.clone=function(){var W=this.sx,Ae=this.shy,Oe=this.shx,Le=this.sy,qe=this.tx,bt=this.ty;return new yt(W,Ae,Oe,Le,qe,bt)},p.Matrix=yt;var nr=p.matrixMult=function(W,Ae){return Ae.multiply(W)},xr=new yt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=xr;var qr=function(W,Ae){if(!Ga[W]){var Oe=(Ae instanceof Np?"Sh":"P")+(Object.keys(Tr).length+1).toString(10);Ae.id=Oe,Ga[W]=Oe,Tr[Oe]=Ae,tt.publish("addPattern",Ae)}};p.ShadingPattern=Np,p.TilingPattern=ov,p.addShadingPattern=function(W,Ae){return N("addShadingPattern()"),qr(W,Ae),this},p.beginTilingPattern=function(W){N("beginTilingPattern()"),ru(W.boundingBox[0],W.boundingBox[1],W.boundingBox[2]-W.boundingBox[0],W.boundingBox[3]-W.boundingBox[1],W.matrix)},p.endTilingPattern=function(W,Ae){N("endTilingPattern()"),Ae.stream=ke[Q].join(`
`),qr(W,Ae),tt.publish("endTilingPattern",Ae),wt.pop().restore()};var Zr=p.__private__.newObject=function(){var W=Kr();return he(W,!0),W},Kr=p.__private__.newObjectDeferred=function(){return ae++,se[ae]=function(){return ce},ae},he=function(W,Ae){return Ae=typeof Ae=="boolean"&&Ae,se[W]=ce,Ae&&fe(W+" 0 obj"),W},je=p.__private__.newAdditionalObject=function(){var W={objId:Kr(),content:""};return me.push(W),W},Ce=Kr(),we=Kr(),Se=p.__private__.decodeColorString=function(W){var Ae=W.split(" ");if(Ae.length!==2||Ae[1]!=="g"&&Ae[1]!=="G")Ae.length===5&&(Ae[4]==="k"||Ae[4]==="K")&&(Ae=[(1-Ae[0])*(1-Ae[3]),(1-Ae[1])*(1-Ae[3]),(1-Ae[2])*(1-Ae[3]),"r"]);else{var Oe=parseFloat(Ae[0]);Ae=[Oe,Oe,Oe,"r"]}for(var Le="#",qe=0;qe<3;qe++)Le+=("0"+Math.floor(255*parseFloat(Ae[qe])).toString(16)).slice(-2);return Le},Te=p.__private__.encodeColorString=function(W){var Ae;typeof W=="string"&&(W={ch1:W});var Oe=W.ch1,Le=W.ch2,qe=W.ch3,bt=W.ch4,Ut=W.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Oe=="string"&&Oe.charAt(0)!=="#"){var Zt=new jse(Oe);if(Zt.ok)Oe=Zt.toHex();else if(!/^\d*\.?\d*$/.test(Oe))throw new Error('Invalid color "'+Oe+'" passed to jsPDF.encodeColorString.')}if(typeof Oe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Oe)&&(Oe="#"+Oe[1]+Oe[1]+Oe[2]+Oe[2]+Oe[3]+Oe[3]),typeof Oe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Oe)){var F=parseInt(Oe.substr(1),16);Oe=F>>16&255,Le=F>>8&255,qe=255&F}if(Le===void 0||bt===void 0&&Oe===Le&&Le===qe)if(typeof Oe=="string")Ae=Oe+" "+Ut[0];else switch(W.precision){case 2:Ae=R(Oe/255)+" "+Ut[0];break;case 3:default:Ae=D(Oe/255)+" "+Ut[0]}else if(bt===void 0||ma(bt)==="object"){if(bt&&!isNaN(bt.a)&&bt.a===0)return Ae=["1.","1.","1.",Ut[1]].join(" ");if(typeof Oe=="string")Ae=[Oe,Le,qe,Ut[1]].join(" ");else switch(W.precision){case 2:Ae=[R(Oe/255),R(Le/255),R(qe/255),Ut[1]].join(" ");break;default:case 3:Ae=[D(Oe/255),D(Le/255),D(qe/255),Ut[1]].join(" ")}}else if(typeof Oe=="string")Ae=[Oe,Le,qe,bt,Ut[2]].join(" ");else switch(W.precision){case 2:Ae=[R(Oe),R(Le),R(qe),R(bt),Ut[2]].join(" ");break;case 3:default:Ae=[D(Oe),D(Le),D(qe),D(bt),Ut[2]].join(" ")}return Ae},Je=p.__private__.getFilters=function(){return i},dt=p.__private__.putStream=function(W){var Ae=(W=W||{}).data||"",Oe=W.filters||Je(),Le=W.alreadyAppliedFilters||[],qe=W.addLength1||!1,bt=Ae.length,Ut=W.objectId,Zt=function(Fr){return Fr};if(d!==null&&Ut===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Zt=la.encryptor(Ut,0));var F={};Oe===!0&&(Oe=["FlateEncode"]);var re=W.additionalKeyValues||[],le=(F=vr.API.processDataByFilters!==void 0?vr.API.processDataByFilters(Ae,Oe):{data:Ae,reverseChain:[]}).reverseChain+(Array.isArray(Le)?Le.join(" "):Le.toString());if(F.data.length!==0&&(re.push({key:"Length",value:F.data.length}),qe===!0&&re.push({key:"Length1",value:bt})),le.length!=0)if(le.split("/").length-1==1)re.push({key:"Filter",value:le});else{re.push({key:"Filter",value:"["+le+"]"});for(var ve=0;ve<re.length;ve+=1)if(re[ve].key==="DecodeParms"){for(var ze=[],lt=0;lt<F.reverseChain.split("/").length-1;lt+=1)ze.push("null");ze.push(re[ve].value),re[ve].value="["+ze.join(" ")+"]"}}fe("<<");for(var Qt=0;Qt<re.length;Qt++)fe("/"+re[Qt].key+" "+re[Qt].value);fe(">>"),F.data.length!==0&&(fe("stream"),fe(Zt(F.data)),fe("endstream"))},$e=p.__private__.putPage=function(W){var Ae=W.number,Oe=W.data,Le=W.objId,qe=W.contentsObjId;he(Le,!0),fe("<</Type /Page"),fe("/Parent "+W.rootDictionaryObjId+" 0 R"),fe("/Resources "+W.resourceDictionaryObjId+" 0 R"),fe("/MediaBox ["+parseFloat(E(W.mediaBox.bottomLeftX))+" "+parseFloat(E(W.mediaBox.bottomLeftY))+" "+E(W.mediaBox.topRightX)+" "+E(W.mediaBox.topRightY)+"]"),W.cropBox!==null&&fe("/CropBox ["+E(W.cropBox.bottomLeftX)+" "+E(W.cropBox.bottomLeftY)+" "+E(W.cropBox.topRightX)+" "+E(W.cropBox.topRightY)+"]"),W.bleedBox!==null&&fe("/BleedBox ["+E(W.bleedBox.bottomLeftX)+" "+E(W.bleedBox.bottomLeftY)+" "+E(W.bleedBox.topRightX)+" "+E(W.bleedBox.topRightY)+"]"),W.trimBox!==null&&fe("/TrimBox ["+E(W.trimBox.bottomLeftX)+" "+E(W.trimBox.bottomLeftY)+" "+E(W.trimBox.topRightX)+" "+E(W.trimBox.topRightY)+"]"),W.artBox!==null&&fe("/ArtBox ["+E(W.artBox.bottomLeftX)+" "+E(W.artBox.bottomLeftY)+" "+E(W.artBox.topRightX)+" "+E(W.artBox.topRightY)+"]"),typeof W.userUnit=="number"&&W.userUnit!==1&&fe("/UserUnit "+W.userUnit),tt.publish("putPage",{objId:Le,pageContext:gr[Ae],pageNumber:Ae,page:Oe}),fe("/Contents "+qe+" 0 R"),fe(">>"),fe("endobj");var bt=Oe.join(`
`);return _===w.ADVANCED&&(bt+=`
Q`),he(qe,!0),dt({data:bt,filters:Je(),objectId:qe}),fe("endobj"),Le},nt=p.__private__.putPages=function(){var W,Ae,Oe=[];for(W=1;W<=rn;W++)gr[W].objId=Kr(),gr[W].contentsObjId=Kr();for(W=1;W<=rn;W++)Oe.push($e({number:W,data:ke[W],objId:gr[W].objId,contentsObjId:gr[W].contentsObjId,mediaBox:gr[W].mediaBox,cropBox:gr[W].cropBox,bleedBox:gr[W].bleedBox,trimBox:gr[W].trimBox,artBox:gr[W].artBox,userUnit:gr[W].userUnit,rootDictionaryObjId:Ce,resourceDictionaryObjId:we}));he(Ce,!0),fe("<</Type /Pages");var Le="/Kids [";for(Ae=0;Ae<rn;Ae++)Le+=Oe[Ae]+" 0 R ";fe(Le+"]"),fe("/Count "+rn),fe(">>"),fe("endobj"),tt.publish("postPutPages")},ot=function(W){tt.publish("putFont",{font:W,out:fe,newObject:Zr,putStream:dt}),W.isAlreadyPutted!==!0&&(W.objectNumber=Zr(),fe("<<"),fe("/Type /Font"),fe("/BaseFont /"+Yx(W.postScriptName)),fe("/Subtype /Type1"),typeof W.encoding=="string"&&fe("/Encoding /"+W.encoding),fe("/FirstChar 32"),fe("/LastChar 255"),fe(">>"),fe("endobj"))},Pt=function(){for(var W in wr)wr.hasOwnProperty(W)&&(f===!1||f===!0&&h.hasOwnProperty(W))&&ot(wr[W])},Vt=function(W){W.objectNumber=Zr();var Ae=[];Ae.push({key:"Type",value:"/XObject"}),Ae.push({key:"Subtype",value:"/Form"}),Ae.push({key:"BBox",value:"["+[E(W.x),E(W.y),E(W.x+W.width),E(W.y+W.height)].join(" ")+"]"}),Ae.push({key:"Matrix",value:"["+W.matrix.toString()+"]"});var Oe=W.pages[1].join(`
`);dt({data:Oe,additionalKeyValues:Ae,objectId:W.objectNumber}),fe("endobj")},Jt=function(){for(var W in et)et.hasOwnProperty(W)&&Vt(et[W])},Ht=function(W,Ae){var Oe,Le=[],qe=1/(Ae-1);for(Oe=0;Oe<1;Oe+=qe)Le.push(Oe);if(Le.push(1),W[0].offset!=0){var bt={offset:0,color:W[0].color};W.unshift(bt)}if(W[W.length-1].offset!=1){var Ut={offset:1,color:W[W.length-1].color};W.push(Ut)}for(var Zt="",F=0,re=0;re<Le.length;re++){for(Oe=Le[re];Oe>W[F+1].offset;)F++;var le=W[F].offset,ve=(Oe-le)/(W[F+1].offset-le),ze=W[F].color,lt=W[F+1].color;Zt+=te(Math.round((1-ve)*ze[0]+ve*lt[0]).toString(16))+te(Math.round((1-ve)*ze[1]+ve*lt[1]).toString(16))+te(Math.round((1-ve)*ze[2]+ve*lt[2]).toString(16))}return Zt.trim()},Gt=function(W,Ae){Ae||(Ae=21);var Oe=Zr(),Le=Ht(W.colors,Ae),qe=[];qe.push({key:"FunctionType",value:"0"}),qe.push({key:"Domain",value:"[0.0 1.0]"}),qe.push({key:"Size",value:"["+Ae+"]"}),qe.push({key:"BitsPerSample",value:"8"}),qe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),qe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),dt({data:Le,additionalKeyValues:qe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Oe}),fe("endobj"),W.objectNumber=Zr(),fe("<< /ShadingType "+W.type),fe("/ColorSpace /DeviceRGB");var bt="/Coords ["+E(parseFloat(W.coords[0]))+" "+E(parseFloat(W.coords[1]))+" ";W.type===2?bt+=E(parseFloat(W.coords[2]))+" "+E(parseFloat(W.coords[3])):bt+=E(parseFloat(W.coords[2]))+" "+E(parseFloat(W.coords[3]))+" "+E(parseFloat(W.coords[4]))+" "+E(parseFloat(W.coords[5])),fe(bt+="]"),W.matrix&&fe("/Matrix ["+W.matrix.toString()+"]"),fe("/Function "+Oe+" 0 R"),fe("/Extend [true true]"),fe(">>"),fe("endobj")},kr=function(W,Ae){var Oe=Kr(),Le=Zr();Ae.push({resourcesOid:Oe,objectOid:Le}),W.objectNumber=Le;var qe=[];qe.push({key:"Type",value:"/Pattern"}),qe.push({key:"PatternType",value:"1"}),qe.push({key:"PaintType",value:"1"}),qe.push({key:"TilingType",value:"1"}),qe.push({key:"BBox",value:"["+W.boundingBox.map(E).join(" ")+"]"}),qe.push({key:"XStep",value:E(W.xStep)}),qe.push({key:"YStep",value:E(W.yStep)}),qe.push({key:"Resources",value:Oe+" 0 R"}),W.matrix&&qe.push({key:"Matrix",value:"["+W.matrix.toString()+"]"}),dt({data:W.stream,additionalKeyValues:qe,objectId:W.objectNumber}),fe("endobj")},sn=function(W){var Ae;for(Ae in Tr)Tr.hasOwnProperty(Ae)&&(Tr[Ae]instanceof Np?Gt(Tr[Ae]):Tr[Ae]instanceof ov&&kr(Tr[Ae],W))},on=function(W){for(var Ae in W.objectNumber=Zr(),fe("<<"),W)switch(Ae){case"opacity":fe("/ca "+R(W[Ae]));break;case"stroke-opacity":fe("/CA "+R(W[Ae]))}fe(">>"),fe("endobj")},An=function(){var W;for(W in nn)nn.hasOwnProperty(W)&&on(nn[W])},hs=function(){for(var W in fe("/XObject <<"),et)et.hasOwnProperty(W)&&et[W].objectNumber>=0&&fe("/"+W+" "+et[W].objectNumber+" 0 R");tt.publish("putXobjectDict"),fe(">>")},Eo=function(){la.oid=Zr(),fe("<<"),fe("/Filter /Standard"),fe("/V "+la.v),fe("/R "+la.r),fe("/U <"+la.toHexString(la.U)+">"),fe("/O <"+la.toHexString(la.O)+">"),fe("/P "+la.P),fe(">>"),fe("endobj")},ms=function(){for(var W in fe("/Font <<"),wr)wr.hasOwnProperty(W)&&(f===!1||f===!0&&h.hasOwnProperty(W))&&fe("/"+W+" "+wr[W].objectNumber+" 0 R");fe(">>")},Js=function(){if(Object.keys(Tr).length>0){for(var W in fe("/Shading <<"),Tr)Tr.hasOwnProperty(W)&&Tr[W]instanceof Np&&Tr[W].objectNumber>=0&&fe("/"+W+" "+Tr[W].objectNumber+" 0 R");tt.publish("putShadingPatternDict"),fe(">>")}},Ts=function(W){if(Object.keys(Tr).length>0){for(var Ae in fe("/Pattern <<"),Tr)Tr.hasOwnProperty(Ae)&&Tr[Ae]instanceof p.TilingPattern&&Tr[Ae].objectNumber>=0&&Tr[Ae].objectNumber<W&&fe("/"+Ae+" "+Tr[Ae].objectNumber+" 0 R");tt.publish("putTilingPatternDict"),fe(">>")}},pi=function(){if(Object.keys(nn).length>0){var W;for(W in fe("/ExtGState <<"),nn)nn.hasOwnProperty(W)&&nn[W].objectNumber>=0&&fe("/"+W+" "+nn[W].objectNumber+" 0 R");tt.publish("putGStateDict"),fe(">>")}},xa=function(W){he(W.resourcesOid,!0),fe("<<"),fe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ms(),Js(),Ts(W.objectOid),pi(),hs(),fe(">>"),fe("endobj")},Zs=function(){var W=[];Pt(),An(),Jt(),sn(W),tt.publish("putResources"),W.forEach(xa),xa({resourcesOid:we,objectOid:Number.MAX_SAFE_INTEGER}),tt.publish("postPutResources")},Kd=function(){tt.publish("putAdditionalObjects");for(var W=0;W<me.length;W++){var Ae=me[W];he(Ae.objId,!0),fe(Ae.content),fe("endobj")}tt.publish("postPutAdditionalObjects")},Mh=function(W){Dr[W.fontName]=Dr[W.fontName]||{},Dr[W.fontName][W.fontStyle]=W.id},Kc=function(W,Ae,Oe,Le,qe){var bt={id:"F"+(Object.keys(wr).length+1).toString(10),postScriptName:W,fontName:Ae,fontStyle:Oe,encoding:Le,isStandardFont:qe||!1,metadata:{}};return tt.publish("addFont",{font:bt,instance:this}),wr[bt.id]=bt,Mh(bt),bt.id},uf=function(W){for(var Ae=0,Oe=Xe.length;Ae<Oe;Ae++){var Le=Kc.call(this,W[Ae][0],W[Ae][1],W[Ae][2],Xe[Ae][3],!0);f===!1&&(h[Le]=!0);var qe=W[Ae][0].split("-");Mh({id:Le,fontName:qe[0],fontStyle:qe[1]||""})}tt.publish("addFonts",{fonts:wr,dictionary:Dr})},gi=function(W){return W.foo=function(){try{return W.apply(this,arguments)}catch(Le){var Ae=Le.stack||"";~Ae.indexOf(" at ")&&(Ae=Ae.split(" at ")[1]);var Oe="Error in function "+Ae.split(`
`)[0].split("<")[0]+": "+Le.message;if(!Qr.console)throw new Error(Oe);Qr.console.error(Oe,Le),Qr.alert&&alert(Oe)}},W.foo.bar=W,W.foo},qd=function(W,Ae){var Oe,Le,qe,bt,Ut,Zt,F,re,le;if(qe=(Ae=Ae||{}).sourceEncoding||"Unicode",Ut=Ae.outputEncoding,(Ae.autoencode||Ut)&&wr[Dt].metadata&&wr[Dt].metadata[qe]&&wr[Dt].metadata[qe].encoding&&(bt=wr[Dt].metadata[qe].encoding,!Ut&&wr[Dt].encoding&&(Ut=wr[Dt].encoding),!Ut&&bt.codePages&&(Ut=bt.codePages[0]),typeof Ut=="string"&&(Ut=bt[Ut]),Ut)){for(F=!1,Zt=[],Oe=0,Le=W.length;Oe<Le;Oe++)(re=Ut[W.charCodeAt(Oe)])?Zt.push(String.fromCharCode(re)):Zt.push(W[Oe]),Zt[Oe].charCodeAt(0)>>8&&(F=!0);W=Zt.join("")}for(Oe=W.length;F===void 0&&Oe!==0;)W.charCodeAt(Oe-1)>>8&&(F=!0),Oe--;if(!F)return W;for(Zt=Ae.noBOM?[]:[254,255],Oe=0,Le=W.length;Oe<Le;Oe++){if((le=(re=W.charCodeAt(Oe))>>8)>>8)throw new Error("Character at position "+Oe+" of string '"+W+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Zt.push(le),Zt.push(re-(le<<8))}return String.fromCharCode.apply(void 0,Zt)},Fn=p.__private__.pdfEscape=p.pdfEscape=function(W,Ae){return qd(W,Ae).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xi=p.__private__.beginPage=function(W){ke[++rn]=[],gr[rn]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(W[0]),topRightY:Number(W[1])}},Nl(rn),Ne(ke[Q])},qc=function(W,Ae){var Oe,Le,qe;switch(r=Ae||r,typeof W=="string"&&(Oe=y(W.toLowerCase()),Array.isArray(Oe)&&(Le=Oe[0],qe=Oe[1])),Array.isArray(W)&&(Le=W[0]*gt,qe=W[1]*gt),isNaN(Le)&&(Le=a[0],qe=a[1]),(Le>14400||qe>14400)&&(_a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Le=Math.min(14400,Le),qe=Math.min(14400,qe)),a=[Le,qe],r.substr(0,1)){case"l":qe>Le&&(a=[qe,Le]);break;case"p":Le>qe&&(a=[qe,Le])}xi(a),hf(Jc),fe(vi),mf!==0&&fe(mf+" J"),Xu!==0&&fe(Xu+" j"),tt.publish("addPage",{pageNumber:rn})},Wc=function(W){W>0&&W<=rn&&(ke.splice(W,1),gr.splice(W,1),rn--,Q>rn&&(Q=rn),this.setPage(Q))},Nl=function(W){W>0&&W<=rn&&(Q=W)},Hn=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return ke.length-1},Xc=function(W,Ae,Oe){var Le,qe=void 0;return Oe=Oe||{},W=W!==void 0?W:wr[Dt].fontName,Ae=Ae!==void 0?Ae:wr[Dt].fontStyle,Le=W.toLowerCase(),Dr[Le]!==void 0&&Dr[Le][Ae]!==void 0?qe=Dr[Le][Ae]:Dr[W]!==void 0&&Dr[W][Ae]!==void 0?qe=Dr[W][Ae]:Oe.disableWarning===!1&&_a.warn("Unable to look up font label for font '"+W+"', '"+Ae+"'. Refer to getFontList() for available fonts."),qe||Oe.noFallback||(qe=Dr.times[Ae])==null&&(qe=Dr.times.normal),qe},Co=p.__private__.putInfo=function(){var W=Zr(),Ae=function(Le){return Le};for(var Oe in d!==null&&(Ae=la.encryptor(W,0)),fe("<<"),fe("/Producer ("+Fn(Ae("jsPDF "+vr.version))+")"),St)St.hasOwnProperty(Oe)&&St[Oe]&&fe("/"+Oe.substr(0,1).toUpperCase()+Oe.substr(1)+" ("+Fn(Ae(St[Oe]))+")");fe("/CreationDate ("+Fn(Ae(J))+")"),fe(">>"),fe("endobj")},ic=p.__private__.putCatalog=function(W){var Ae=(W=W||{}).rootDictionaryObjId||Ce;switch(Zr(),fe("<<"),fe("/Type /Catalog"),fe("/Pages "+Ae+" 0 R"),Fe||(Fe="fullwidth"),Fe){case"fullwidth":fe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":fe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":fe("/OpenAction [3 0 R /Fit]");break;case"original":fe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Oe=""+Fe;Oe.substr(Oe.length-1)==="%"&&(Fe=parseInt(Fe)/100),typeof Fe=="number"&&fe("/OpenAction [3 0 R /XYZ null null "+R(Fe)+"]")}switch(ft||(ft="continuous"),ft){case"continuous":fe("/PageLayout /OneColumn");break;case"single":fe("/PageLayout /SinglePage");break;case"two":case"twoleft":fe("/PageLayout /TwoColumnLeft");break;case"tworight":fe("/PageLayout /TwoColumnRight")}Ke&&fe("/PageMode /"+Ke),tt.publish("putCatalog"),fe(">>"),fe("endobj")},Uh=p.__private__.putTrailer=function(){fe("trailer"),fe("<<"),fe("/Size "+(ae+1)),fe("/Root "+ae+" 0 R"),fe("/Info "+(ae-1)+" 0 R"),d!==null&&fe("/Encrypt "+la.oid+" 0 R"),fe("/ID [ <"+V+"> <"+V+"> ]"),fe(">>")},df=p.__private__.putHeader=function(){fe("%PDF-"+g),fe("%ºß¬à")},Af=p.__private__.putXRef=function(){var W="0000000000";fe("xref"),fe("0 "+(ae+1)),fe("0000000000 65535 f ");for(var Ae=1;Ae<=ae;Ae++)typeof se[Ae]=="function"?fe((W+se[Ae]()).slice(-10)+" 00000 n "):se[Ae]!==void 0?fe((W+se[Ae]).slice(-10)+" 00000 n "):fe("0000000000 00000 n ")},oc=p.__private__.buildDocument=function(){De(),Ne(oe),tt.publish("buildDocument"),df(),nt(),Kd(),Zs(),d!==null&&Eo(),Co(),ic();var W=ce;return Af(),Uh(),fe("startxref"),fe(""+W),fe("%%EOF"),Ne(ke[Q]),oe.join(`
`)},Wd=p.__private__.getBlob=function(W){return new Blob([Me(W)],{type:"application/pdf"})},lc=p.output=p.__private__.output=gi(function(W,Ae){switch(typeof(Ae=Ae||{})=="string"?Ae={filename:Ae}:Ae.filename=Ae.filename||"generated.pdf",W){case void 0:return oc();case"save":p.save(Ae.filename);break;case"arraybuffer":return Me(oc());case"blob":return Wd(oc());case"bloburi":case"bloburl":if(Qr.URL!==void 0&&typeof Qr.URL.createObjectURL=="function")return Qr.URL&&Qr.URL.createObjectURL(Wd(oc()))||void 0;_a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Oe="",Le=oc();try{Oe=HF(Le)}catch{Oe=HF(unescape(encodeURIComponent(Le)))}return"data:application/pdf;filename="+Ae.filename+";base64,"+Oe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Qr)==="[object Window]"){var qe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",bt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ae.pdfObjectUrl&&(qe=Ae.pdfObjectUrl,bt="");var Ut='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+qe+'"'+bt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ae)+");<\/script></body></html>",Zt=Qr.open();return Zt!==null&&Zt.document.write(Ut),Zt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Qr)==="[object Window]"){var F='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ae.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ae.filename+'" width="500px" height="400px" /></body></html>',re=Qr.open();if(re!==null){re.document.write(F);var le=this;re.document.documentElement.querySelector("#pdfViewer").onload=function(){re.document.title=Ae.filename,re.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(le.output("bloburl"))}}return re}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Qr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ve='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ae)+'"></iframe></body></html>',ze=Qr.open();if(ze!==null&&(ze.document.write(ve),ze.document.title=Ae.filename),ze||typeof safari>"u")return ze;break;case"datauri":case"dataurl":return Qr.document.location.href=this.output("datauristring",Ae);default:return null}}),Sl=function(W){return Array.isArray(xt)===!0&&xt.indexOf(W)>-1};switch(n){case"pt":gt=1;break;case"mm":gt=72/25.4;break;case"cm":gt=72/2.54;break;case"in":gt=72;break;case"px":gt=Sl("px_scaling")==1?.75:96/72;break;case"pc":case"em":gt=12;break;case"ex":gt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);gt=n}var la=null;ee(),z();var cc=function(W){return d!==null?la.encryptor(W,0):function(Ae){return Ae}},kl=p.__private__.getPageInfo=p.getPageInfo=function(W){if(isNaN(W)||W%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:gr[W].objId,pageNumber:W,pageContext:gr[W]}},Ir=p.__private__.getPageInfoByObjId=function(W){if(isNaN(W)||W%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ae in gr)if(gr[Ae].objId===W)break;return kl(Ae)},Bl=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:gr[Q].objId,pageNumber:Q,pageContext:gr[Q]}};p.addPage=function(){return qc.apply(this,arguments),this},p.setPage=function(){return Nl.apply(this,arguments),Ne.call(this,ke[Q]),this},p.insertPage=function(W){return this.addPage(),this.movePage(Q,W),this},p.movePage=function(W,Ae){var Oe,Le;if(W>Ae){Oe=ke[W],Le=gr[W];for(var qe=W;qe>Ae;qe--)ke[qe]=ke[qe-1],gr[qe]=gr[qe-1];ke[Ae]=Oe,gr[Ae]=Le,this.setPage(Ae)}else if(W<Ae){Oe=ke[W],Le=gr[W];for(var bt=W;bt<Ae;bt++)ke[bt]=ke[bt+1],gr[bt]=gr[bt+1];ke[Ae]=Oe,gr[Ae]=Le,this.setPage(Ae)}return this},p.deletePage=function(){return Wc.apply(this,arguments),this},p.__private__.text=p.text=function(W,Ae,Oe,Le,qe){var bt,Ut,Zt,F,re,le,ve,ze,lt,Qt=(Le=Le||{}).scope||this;if(typeof W=="number"&&typeof Ae=="number"&&(typeof Oe=="string"||Array.isArray(Oe))){var Fr=Oe;Oe=Ae,Ae=W,W=Fr}if(arguments[3]instanceof yt?(N("The transform parameter of text() with a Matrix value"),lt=qe):(Zt=arguments[4],F=arguments[5],ma(ve=arguments[3])==="object"&&ve!==null||(typeof Zt=="string"&&(F=Zt,Zt=null),typeof ve=="string"&&(F=ve,ve=null),typeof ve=="number"&&(Zt=ve,ve=null),Le={flags:ve,angle:Zt,align:F})),isNaN(Ae)||isNaN(Oe)||W==null)throw new Error("Invalid arguments passed to jsPDF.text");if(W.length===0)return Qt;var yn="",Wr=!1,Vn=typeof Le.lineHeightFactor=="number"?Le.lineHeightFactor:bn,ea=Qt.internal.scaleFactor;function Fl(hn){return hn=hn.split("	").join(Array(Le.TabLen||9).join(" ")),Fn(hn,ve)}function ts(hn){for(var mn,va=hn.concat(),rs=[],Dl=va.length;Dl--;)typeof(mn=va.shift())=="string"?rs.push(mn):Array.isArray(hn)&&(mn.length===1||mn[1]===void 0&&mn[2]===void 0)?rs.push(mn[0]):rs.push([mn[0],mn[1],mn[2]]);return rs}function ko(hn,mn){var va;if(typeof hn=="string")va=mn(hn)[0];else if(Array.isArray(hn)){for(var rs,Dl,cA=hn.concat(),uA=[],rd=cA.length;rd--;)typeof(rs=cA.shift())=="string"?uA.push(mn(rs)[0]):Array.isArray(rs)&&typeof rs[0]=="string"&&(Dl=mn(rs[0],rs[1],rs[2]),uA.push([Dl[0],Dl[1],Dl[2]]));va=uA}return va}var au=!1,eA=!0;if(typeof W=="string")au=!0;else if(Array.isArray(W)){var zh=W.concat();Ut=[];for(var pf,Is=zh.length;Is--;)(typeof(pf=zh.shift())!="string"||Array.isArray(pf)&&typeof pf[0]!="string")&&(eA=!1);au=eA}if(au===!1)throw new Error('Type of text must be string or Array. "'+W+'" is not recognized.');typeof W=="string"&&(W=W.match(/[\r?\n]/)?W.split(/\r\n|\r|\n/g):[W]);var tA=ye/Qt.internal.scaleFactor,gf=tA*(Vn-1);switch(Le.baseline){case"bottom":Oe-=gf;break;case"top":Oe+=tA-gf;break;case"hanging":Oe+=tA-2*gf;break;case"middle":Oe+=tA/2-gf}if((le=Le.maxWidth||0)>0&&(typeof W=="string"?W=Qt.splitTextToSize(W,le):Object.prototype.toString.call(W)==="[object Array]"&&(W=W.reduce(function(hn,mn){return hn.concat(Qt.splitTextToSize(mn,le))},[]))),bt={text:W,x:Ae,y:Oe,options:Le,mutex:{pdfEscape:Fn,activeFontKey:Dt,fonts:wr,activeFontSize:ye}},tt.publish("preProcessText",bt),W=bt.text,Zt=(Le=bt.options).angle,!(lt instanceof yt)&&Zt&&typeof Zt=="number"){Zt*=Math.PI/180,Le.rotationDirection===0&&(Zt=-Zt),_===w.ADVANCED&&(Zt=-Zt);var xf=Math.cos(Zt),$h=Math.sin(Zt);lt=new yt(xf,$h,-$h,xf,0,0)}else Zt&&Zt instanceof yt&&(lt=Zt);_!==w.ADVANCED||lt||(lt=xr),(re=Le.charSpace||Wu)!==void 0&&(yn+=E(O(re))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ze=Le.horizontalScale)!==void 0&&(yn+=E(100*ze)+` Tz
`),Le.lang;var Bo=-1,ob=Le.renderingMode!==void 0?Le.renderingMode:Le.stroke,$m=Qt.internal.getCurrentPageInfo().pageContext;switch(ob){case 0:case!1:case"fill":Bo=0;break;case 1:case!0:case"stroke":Bo=1;break;case 2:case"fillThenStroke":Bo=2;break;case 3:case"invisible":Bo=3;break;case 4:case"fillAndAddForClipping":Bo=4;break;case 5:case"strokeAndAddPathForClipping":Bo=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Bo=6;break;case 7:case"addToPathForClipping":Bo=7}var zg=$m.usedRenderingMode!==void 0?$m.usedRenderingMode:-1;Bo!==-1?yn+=Bo+` Tr
`:zg!==-1&&(yn+=`0 Tr
`),Bo!==-1&&($m.usedRenderingMode=Bo),F=Le.align||"left";var Ol,ei=ye*Vn,rA=Qt.internal.pageSize.getWidth(),Gm=wr[Dt];re=Le.charSpace||Wu,le=Le.maxWidth||0,ve=Object.assign({autoencode:!0,noBOM:!0},Le.flags);var ed=[],nA=function(hn){return Qt.getStringUnitWidth(hn,{font:Gm,charSpace:re,fontSize:ye,doKerning:!1})*ye/ea};if(Object.prototype.toString.call(W)==="[object Array]"){var no;Ut=ts(W),F!=="left"&&(Ol=Ut.map(nA));var bi,aA=0;if(F==="right"){Ae-=Ol[0],W=[],Is=Ut.length;for(var jo=0;jo<Is;jo++)jo===0?(bi=Oi(Ae),no=gs(Oe)):(bi=O(aA-Ol[jo]),no=-ei),W.push([Ut[jo],bi,no]),aA=Ol[jo]}else if(F==="center"){Ae-=Ol[0]/2,W=[],Is=Ut.length;for(var fc=0;fc<Is;fc++)fc===0?(bi=Oi(Ae),no=gs(Oe)):(bi=O((aA-Ol[fc])/2),no=-ei),W.push([Ut[fc],bi,no]),aA=Ol[fc]}else if(F==="left"){W=[],Is=Ut.length;for(var su=0;su<Is;su++)W.push(Ut[su])}else if(F==="justify"&&Gm.encoding==="Identity-H"){W=[],Is=Ut.length,le=le!==0?le:rA;for(var hc=0,Ka=0;Ka<Is;Ka++)if(no=Ka===0?gs(Oe):-ei,bi=Ka===0?Oi(Ae):hc,Ka<Is-1){var mc=O((le-Ol[Ka])/(Ut[Ka].split(" ").length-1)),xs=Ut[Ka].split(" ");W.push([xs[0]+" ",bi,no]),hc=0;for(var To=1;To<xs.length;To++){var vf=(nA(xs[To-1]+" "+xs[To])-nA(xs[To]))*ea+mc;To==xs.length-1?W.push([xs[To],vf,0]):W.push([xs[To]+" ",vf,0]),hc-=vf}}else W.push([Ut[Ka],bi,no]);W.push(["",hc,0])}else{if(F!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(W=[],Is=Ut.length,le=le!==0?le:rA,Ka=0;Ka<Is;Ka++)no=Ka===0?gs(Oe):-ei,bi=Ka===0?Oi(Ae):0,Ka<Is-1?ed.push(E(O((le-Ol[Ka])/(Ut[Ka].split(" ").length-1)))):ed.push(0),W.push([Ut[Ka],bi,no])}}var iu=typeof Le.R2L=="boolean"?Le.R2L:Ge;iu===!0&&(W=ko(W,function(hn,mn,va){return[hn.split("").reverse().join(""),mn,va]})),bt={text:W,x:Ae,y:Oe,options:Le,mutex:{pdfEscape:Fn,activeFontKey:Dt,fonts:wr,activeFontSize:ye}},tt.publish("postProcessText",bt),W=bt.text,Wr=bt.mutex.isHex||!1;var Gh=wr[Dt].encoding;Gh!=="WinAnsiEncoding"&&Gh!=="StandardEncoding"||(W=ko(W,function(hn,mn,va){return[Fl(hn),mn,va]})),Ut=ts(W),W=[];for(var sA,iA,oA,bf=0,Kh=1,lA=Array.isArray(Ut[0])?Kh:bf,td="",yf=function(hn,mn,va){var rs="";return va instanceof yt?(va=typeof Le.angle=="number"?nr(va,new yt(1,0,0,1,hn,mn)):nr(new yt(1,0,0,1,hn,mn),va),_===w.ADVANCED&&(va=nr(new yt(1,0,0,-1,0,0),va)),rs=va.join(" ")+` Tm
`):rs=E(hn)+" "+E(mn)+` Td
`,rs},qa=0;qa<Ut.length;qa++){switch(td="",lA){case Kh:oA=(Wr?"<":"(")+Ut[qa][0]+(Wr?">":")"),sA=parseFloat(Ut[qa][1]),iA=parseFloat(Ut[qa][2]);break;case bf:oA=(Wr?"<":"(")+Ut[qa]+(Wr?">":")"),sA=Oi(Ae),iA=gs(Oe)}ed!==void 0&&ed[qa]!==void 0&&(td=ed[qa]+` Tw
`),qa===0?W.push(td+yf(sA,iA,lt)+oA):lA===bf?W.push(td+oA):lA===Kh&&W.push(td+yf(sA,iA,lt)+oA)}W=lA===bf?W.join(` Tj
T* `):W.join(` Tj
`),W+=` Tj
`;var cl=`BT
/`;return cl+=Dt+" "+ye+` Tf
`,cl+=E(ye*Vn)+` TL
`,cl+=dc+`
`,cl+=yn,cl+=W,fe(cl+="ET"),h[Dt]=!0,Qt};var Qh=p.__private__.clip=p.clip=function(W){return fe(W==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Qh("evenodd")},p.__private__.discardPath=p.discardPath=function(){return fe("n"),this};var Ii=p.__private__.isValidStyle=function(W){var Ae=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(W)!==-1&&(Ae=!0),Ae};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(W){return Ii(W)&&(u=W),this};var _o=p.__private__.getStyle=p.getStyle=function(W){var Ae=u;switch(W){case"D":case"S":Ae="S";break;case"F":Ae="f";break;case"FD":case"DF":Ae="B";break;case"f":case"f*":case"B":case"B*":Ae=W}return Ae},ro=p.close=function(){return fe("h"),this};p.stroke=function(){return fe("S"),this},p.fill=function(W){return jl("f",W),this},p.fillEvenOdd=function(W){return jl("f*",W),this},p.fillStroke=function(W){return jl("B",W),this},p.fillStrokeEvenOdd=function(W){return jl("B*",W),this};var jl=function(W,Ae){ma(Ae)==="object"?uc(Ae,W):fe(W)},No=function(W){W===null||_===w.ADVANCED&&W===void 0||(W=_o(W),fe(W))};function Yc(W,Ae,Oe,Le,qe){var bt=new ov(Ae||this.boundingBox,Oe||this.xStep,Le||this.yStep,this.gState,qe||this.matrix);bt.stream=this.stream;var Ut=W+"$$"+this.cloneIndex+++"$$";return qr(Ut,bt),bt}var uc=function(W,Ae){var Oe=Ga[W.key],Le=Tr[Oe];if(Le instanceof Np)fe("q"),fe(ff(Ae)),Le.gState&&p.setGState(Le.gState),fe(W.matrix.toString()+" cm"),fe("/"+Oe+" sh"),fe("Q");else if(Le instanceof ov){var qe=new yt(1,0,0,-1,0,Di());W.matrix&&(qe=qe.multiply(W.matrix||xr),Oe=Yc.call(Le,W.key,W.boundingBox,W.xStep,W.yStep,qe).id),fe("q"),fe("/Pattern cs"),fe("/"+Oe+" scn"),Le.gState&&p.setGState(Le.gState),fe(Ae),fe("Q")}},ff=function(W){switch(W){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},So=p.moveTo=function(W,Ae){return fe(E(O(W))+" "+E(M(Ae))+" m"),this},Fi=p.lineTo=function(W,Ae){return fe(E(O(W))+" "+E(M(Ae))+" l"),this},Tl=p.curveTo=function(W,Ae,Oe,Le,qe,bt){return fe([E(O(W)),E(M(Ae)),E(O(Oe)),E(M(Le)),E(O(qe)),E(M(bt)),"c"].join(" ")),this};p.__private__.line=p.line=function(W,Ae,Oe,Le,qe){if(isNaN(W)||isNaN(Ae)||isNaN(Oe)||isNaN(Le)||!Ii(qe))throw new Error("Invalid arguments passed to jsPDF.line");return _===w.COMPAT?this.lines([[Oe-W,Le-Ae]],W,Ae,[1,1],qe||"S"):this.lines([[Oe-W,Le-Ae]],W,Ae,[1,1]).stroke()},p.__private__.lines=p.lines=function(W,Ae,Oe,Le,qe,bt){var Ut,Zt,F,re,le,ve,ze,lt,Qt,Fr,yn,Wr;if(typeof W=="number"&&(Wr=Oe,Oe=Ae,Ae=W,W=Wr),Le=Le||[1,1],bt=bt||!1,isNaN(Ae)||isNaN(Oe)||!Array.isArray(W)||!Array.isArray(Le)||!Ii(qe)||typeof bt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(So(Ae,Oe),Ut=Le[0],Zt=Le[1],re=W.length,Fr=Ae,yn=Oe,F=0;F<re;F++)(le=W[F]).length===2?(Fr=le[0]*Ut+Fr,yn=le[1]*Zt+yn,Fi(Fr,yn)):(ve=le[0]*Ut+Fr,ze=le[1]*Zt+yn,lt=le[2]*Ut+Fr,Qt=le[3]*Zt+yn,Fr=le[4]*Ut+Fr,yn=le[5]*Zt+yn,Tl(ve,ze,lt,Qt,Fr,yn));return bt&&ro(),No(qe),this},p.path=function(W){for(var Ae=0;Ae<W.length;Ae++){var Oe=W[Ae],Le=Oe.c;switch(Oe.op){case"m":So(Le[0],Le[1]);break;case"l":Fi(Le[0],Le[1]);break;case"c":Tl.apply(this,Le);break;case"h":ro()}}return this},p.__private__.rect=p.rect=function(W,Ae,Oe,Le,qe){if(isNaN(W)||isNaN(Ae)||isNaN(Oe)||isNaN(Le)||!Ii(qe))throw new Error("Invalid arguments passed to jsPDF.rect");return _===w.COMPAT&&(Le=-Le),fe([E(O(W)),E(M(Ae)),E(O(Oe)),E(O(Le)),"re"].join(" ")),No(qe),this},p.__private__.triangle=p.triangle=function(W,Ae,Oe,Le,qe,bt,Ut){if(isNaN(W)||isNaN(Ae)||isNaN(Oe)||isNaN(Le)||isNaN(qe)||isNaN(bt)||!Ii(Ut))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Oe-W,Le-Ae],[qe-Oe,bt-Le],[W-qe,Ae-bt]],W,Ae,[1,1],Ut,!0),this},p.__private__.roundedRect=p.roundedRect=function(W,Ae,Oe,Le,qe,bt,Ut){if(isNaN(W)||isNaN(Ae)||isNaN(Oe)||isNaN(Le)||isNaN(qe)||isNaN(bt)||!Ii(Ut))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Zt=4/3*(Math.SQRT2-1);return qe=Math.min(qe,.5*Oe),bt=Math.min(bt,.5*Le),this.lines([[Oe-2*qe,0],[qe*Zt,0,qe,bt-bt*Zt,qe,bt],[0,Le-2*bt],[0,bt*Zt,-qe*Zt,bt,-qe,bt],[2*qe-Oe,0],[-qe*Zt,0,-qe,-bt*Zt,-qe,-bt],[0,2*bt-Le],[0,-bt*Zt,qe*Zt,-bt,qe,-bt]],W+qe,Ae,[1,1],Ut,!0),this},p.__private__.ellipse=p.ellipse=function(W,Ae,Oe,Le,qe){if(isNaN(W)||isNaN(Ae)||isNaN(Oe)||isNaN(Le)||!Ii(qe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var bt=4/3*(Math.SQRT2-1)*Oe,Ut=4/3*(Math.SQRT2-1)*Le;return So(W+Oe,Ae),Tl(W+Oe,Ae-Ut,W+bt,Ae-Le,W,Ae-Le),Tl(W-bt,Ae-Le,W-Oe,Ae-Ut,W-Oe,Ae),Tl(W-Oe,Ae+Ut,W-bt,Ae+Le,W,Ae+Le),Tl(W+bt,Ae+Le,W+Oe,Ae+Ut,W+Oe,Ae),No(qe),this},p.__private__.circle=p.circle=function(W,Ae,Oe,Le){if(isNaN(W)||isNaN(Ae)||isNaN(Oe)||!Ii(Le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(W,Ae,Oe,Oe,Le)},p.setFont=function(W,Ae,Oe){return Oe&&(Ae=I(Ae,Oe)),Dt=Xc(W,Ae,{disableWarning:!1}),this};var ps=p.__private__.getFont=p.getFont=function(){return wr[Xc.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var W,Ae,Oe={};for(W in Dr)if(Dr.hasOwnProperty(W))for(Ae in Oe[W]=[],Dr[W])Dr[W].hasOwnProperty(Ae)&&Oe[W].push(Ae);return Oe},p.addFont=function(W,Ae,Oe,Le,qe){var bt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&bt.indexOf(arguments[3])!==-1?qe=arguments[3]:arguments[3]&&bt.indexOf(arguments[3])==-1&&(Oe=I(Oe,Le)),qe=qe||"Identity-H",Kc.call(this,W,Ae,Oe,qe)};var bn,Jc=e.lineWidth||.200025,Il=p.__private__.getLineWidth=p.getLineWidth=function(){return Jc},hf=p.__private__.setLineWidth=p.setLineWidth=function(W){return Jc=W,fe(E(O(W))+" w"),this};p.__private__.setLineDash=vr.API.setLineDash=vr.API.setLineDashPattern=function(W,Ae){if(W=W||[],Ae=Ae||0,isNaN(Ae)||!Array.isArray(W))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return W=W.map(function(Oe){return E(O(Oe))}).join(" "),Ae=E(O(Ae)),fe("["+W+"] "+Ae+" d"),this};var Ku=p.__private__.getLineHeight=p.getLineHeight=function(){return ye*bn};p.__private__.getLineHeight=p.getLineHeight=function(){return ye*bn};var qu=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(W){return typeof(W=W||1.15)=="number"&&(bn=W),this},ll=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return bn};qu(e.lineHeight);var Oi=p.__private__.getHorizontalCoordinate=function(W){return O(W)},gs=p.__private__.getVerticalCoordinate=function(W){return _===w.ADVANCED?W:gr[Q].mediaBox.topRightY-gr[Q].mediaBox.bottomLeftY-O(W)},Hh=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(W){return E(Oi(W))},Zc=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(W){return E(gs(W))},vi=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Se(vi)},p.__private__.setStrokeColor=p.setDrawColor=function(W,Ae,Oe,Le){return vi=Te({ch1:W,ch2:Ae,ch3:Oe,ch4:Le,pdfColorType:"draw",precision:2}),fe(vi),this};var eu=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Se(eu)},p.__private__.setFillColor=p.setFillColor=function(W,Ae,Oe,Le){return eu=Te({ch1:W,ch2:Ae,ch3:Oe,ch4:Le,pdfColorType:"fill",precision:2}),fe(eu),this};var dc=e.textColor||"0 g",Xd=p.__private__.getTextColor=p.getTextColor=function(){return Se(dc)};p.__private__.setTextColor=p.setTextColor=function(W,Ae,Oe,Le){return dc=Te({ch1:W,ch2:Ae,ch3:Oe,ch4:Le,pdfColorType:"text",precision:3}),this};var Wu=e.charSpace,Yd=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Wu||0)};p.__private__.setCharSpace=p.setCharSpace=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Wu=W,this};var mf=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(W){var Ae=p.CapJoinStyles[W];if(Ae===void 0)throw new Error("Line cap style of '"+W+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return mf=Ae,fe(Ae+" J"),this};var Xu=0;p.__private__.setLineJoin=p.setLineJoin=function(W){var Ae=p.CapJoinStyles[W];if(Ae===void 0)throw new Error("Line join style of '"+W+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Xu=Ae,fe(Ae+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(W){if(W=W||0,isNaN(W))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return fe(E(O(W))+" M"),this},p.GState=zN,p.setGState=function(W){(W=typeof W=="string"?nn[oa[W]]:tu(null,W)).equals(Ba)||(fe("/"+W.id+" gs"),Ba=W)};var tu=function(W,Ae){if(!W||!oa[W]){var Oe=!1;for(var Le in nn)if(nn.hasOwnProperty(Le)&&nn[Le].equals(Ae)){Oe=!0;break}if(Oe)Ae=nn[Le];else{var qe="GS"+(Object.keys(nn).length+1).toString(10);nn[qe]=Ae,Ae.id=qe}return W&&(oa[W]=Ae.id),tt.publish("addGState",Ae),Ae}};p.addGState=function(W,Ae){return tu(W,Ae),this},p.saveGraphicsState=function(){return fe("q"),vn.push({key:Dt,size:ye,color:dc}),this},p.restoreGraphicsState=function(){fe("Q");var W=vn.pop();return Dt=W.key,ye=W.size,dc=W.color,Ba=null,this},p.setCurrentTransformationMatrix=function(W){return fe(W.toString()+" cm"),this},p.comment=function(W){return fe("#"+W),this};var Yu=function(W,Ae){var Oe=W||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Oe},set:function(bt){isNaN(bt)||(Oe=parseFloat(bt))}});var Le=Ae||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Le},set:function(bt){isNaN(bt)||(Le=parseFloat(bt))}});var qe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return qe},set:function(bt){qe=bt.toString()}}),this},Jd=function(W,Ae,Oe,Le){Yu.call(this,W,Ae),this.type="rect";var qe=Oe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return qe},set:function(Ut){isNaN(Ut)||(qe=parseFloat(Ut))}});var bt=Le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return bt},set:function(Ut){isNaN(Ut)||(bt=parseFloat(Ut))}}),this},Ju=function(){this.page=rn,this.currentPage=Q,this.pages=ke.slice(0),this.pagesContext=gr.slice(0),this.x=fr,this.y=zt,this.matrix=Mr,this.width=nu(Q),this.height=Di(Q),this.outputDestination=_e,this.id="",this.objectNumber=-1};Ju.prototype.restore=function(){rn=this.page,Q=this.currentPage,gr=this.pagesContext,ke=this.pages,fr=this.x,zt=this.y,Mr=this.matrix,Zu(Q,this.width),Zd(Q,this.height),_e=this.outputDestination};var ru=function(W,Ae,Oe,Le,qe){wt.push(new Ju),rn=Q=0,ke=[],fr=W,zt=Ae,Mr=qe,xi([Oe,Le])},Vh=function(W){if(vt[W])wt.pop().restore();else{var Ae=new Ju,Oe="Xo"+(Object.keys(et).length+1).toString(10);Ae.id=Oe,vt[W]=Oe,et[Oe]=Ae,tt.publish("addFormObject",Ae),wt.pop().restore()}};for(var Ac in p.beginFormObject=function(W,Ae,Oe,Le,qe){return ru(W,Ae,Oe,Le,qe),this},p.endFormObject=function(W){return Vh(W),this},p.doFormObject=function(W,Ae){var Oe=et[vt[W]];return fe("q"),fe(Ae.toString()+" cm"),fe("/"+Oe.id+" Do"),fe("Q"),this},p.getFormObject=function(W){var Ae=et[vt[W]];return{x:Ae.x,y:Ae.y,width:Ae.width,height:Ae.height,matrix:Ae.matrix}},p.save=function(W,Ae){return W=W||"generated.pdf",(Ae=Ae||{}).returnPromise=Ae.returnPromise||!1,Ae.returnPromise===!1?(wp(Wd(oc()),W),typeof wp.unload=="function"&&Qr.setTimeout&&setTimeout(wp.unload,911),this):new Promise(function(Oe,Le){try{var qe=wp(Wd(oc()),W);typeof wp.unload=="function"&&Qr.setTimeout&&setTimeout(wp.unload,911),Oe(qe)}catch(bt){Le(bt.message)}})},vr.API)vr.API.hasOwnProperty(Ac)&&(Ac==="events"&&vr.API.events.length?function(W,Ae){var Oe,Le,qe;for(qe=Ae.length-1;qe!==-1;qe--)Oe=Ae[qe][0],Le=Ae[qe][1],W.subscribe.apply(W,[Oe].concat(typeof Le=="function"?[Le]:Le))}(tt,vr.API.events):p[Ac]=vr.API[Ac]);var nu=p.getPageWidth=function(W){return(gr[W=W||Q].mediaBox.topRightX-gr[W].mediaBox.bottomLeftX)/gt},Zu=p.setPageWidth=function(W,Ae){gr[W].mediaBox.topRightX=Ae*gt+gr[W].mediaBox.bottomLeftX},Di=p.getPageHeight=function(W){return(gr[W=W||Q].mediaBox.topRightY-gr[W].mediaBox.bottomLeftY)/gt},Zd=p.setPageHeight=function(W,Ae){gr[W].mediaBox.topRightY=Ae*gt+gr[W].mediaBox.bottomLeftY};return p.internal={pdfEscape:Fn,getStyle:_o,getFont:ps,getFontSize:Re,getCharSpace:Yd,getTextColor:Xd,getLineHeight:Ku,getLineHeightFactor:ll,getLineWidth:Il,write:Ie,getHorizontalCoordinate:Oi,getVerticalCoordinate:gs,getCoordinateString:Hh,getVerticalCoordinateString:Zc,collections:{},newObject:Zr,newAdditionalObject:je,newObjectDeferred:Kr,newObjectDeferredBegin:he,getFilters:Je,putStream:dt,events:tt,scaleFactor:gt,pageSize:{getWidth:function(){return nu(Q)},setWidth:function(W){Zu(Q,W)},getHeight:function(){return Di(Q)},setHeight:function(W){Zd(Q,W)}},encryptionOptions:d,encryption:la,getEncryptor:cc,output:lc,getNumberOfPages:Hn,pages:ke,out:fe,f2:R,f3:D,getPageInfo:kl,getPageInfoByObjId:Ir,getCurrentPageInfo:Bl,getPDFVersion:x,Point:Yu,Rectangle:Jd,Matrix:yt,hasHotfix:Sl},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return nu(Q)},set:function(W){Zu(Q,W)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Di(Q)},set:function(W){Zd(Q,W)},enumerable:!0,configurable:!0}),uf.call(p,Xe),Dt="F1",qc(a,r),tt.publish("initialized"),p}Xx.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Xx.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Xx.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Xx.prototype.processOwnerPassword=function(e,t){return zF(VF(t).substr(0,5),e)},Xx.prototype.encryptor=function(e,t){var r=VF(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return zF(r,n)}},zN.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||ma(e)!==ma(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},vr.API={events:[]},vr.version="2.5.2";var Cs=vr.API,M8=1,Rg=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Cx=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},en=function(e){return e.toFixed(2)},_0=function(e){return e.toFixed(5)};Cs.__acroform__={};var sc=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},SG=function(e){return e*M8},SA=function(e){var t=new Ose,r=mr.internal.getHeight(e)||0,n=mr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(en(n)),Number(en(r))],t},R8e=Cs.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},L8e=Cs.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},M8e=Cs.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},zs=Cs.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return M8e(e,t-1)},$s=Cs.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return R8e(e,t-1)},Gs=Cs.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return L8e(e,t-1)},U8e=Cs.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],s=e[1],i=e[2],o=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+o)||0,c.upperRight_X=r(a+i)||0,c.upperRight_Y=n(s)||0,[Number(en(c.lowerLeft_X)),Number(en(c.lowerLeft_Y)),Number(en(c.upperRight_X)),Number(en(c.upperRight_Y))]},Q8e=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=$F(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+en(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=SA(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},$F=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(D){return D.split(`
`)}):a.map(function(D){return[D]});var s=r,i=mr.internal.getHeight(e)||0;i=i<0?-i:i;var o=mr.internal.getWidth(e)||0;o=o<0?-o:o;var c=function(D,O,L){if(D+1<a.length){var M=O+" "+a[D+1][0];return $C(M,e,L).width<=o-4}return!1};s++;e:for(;s>0;){t="",s--;var u,d,f=$C("3",e,s).height,h=e.multiline?i-s:(i-f)/2,p=h+=2,g=0,x=0,b=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+$C(t,e,s=12).width+", FieldWidth:"+o+`
`;break}for(var y="",w=0,_=0;_<a.length;_++)if(a.hasOwnProperty(_)){var B=!1;if(a[_].length!==1&&b!==a[_].length-1){if((f+2)*(w+2)+2>i)continue e;y+=a[_][b],B=!0,x=_,_--}else{y=(y+=a[_][b]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var k=parseInt(_),I=c(k,y,s),E=_>=a.length-1;if(I&&!E){y+=" ",b=0;continue}if(I||E){if(E)x=k;else if(e.multiline&&(f+2)*(w+2)+2>i)continue e}else{if(!e.multiline||(f+2)*(w+2)+2>i)continue e;x=k}}for(var N="",j=g;j<=x;j++){var R=a[j];if(e.multiline){if(j===x){N+=R[b]+" ",b=(b+1)%R.length;continue}if(j===g){N+=R[R.length-1]+" ";continue}}N+=R[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,d=$C(N,e,s).width,e.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;case"left":default:u=2}t+=en(u)+" "+en(p)+` Td
`,t+="("+Rg(N)+`) Tj
`,t+=-en(u)+` 0 Td
`,p=-(s+2),d=0,g=B?x:x+1,w++,y=""}break}return n.text=t,n.fontSize=s,n},$C=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},H8e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},V8e=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},z8e=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),ma(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},$8e=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Vd.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(H8e)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");M8=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Dse,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&V8e(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var i in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var o=n[i],c=[],u=o.Rect;if(o.Rect&&(o.Rect=U8e(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=mr.createDefaultAppearanceStream(o),ma(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=Q8e(o);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var f="";for(var h in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(h)){var p=o.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var i in p)if(p.hasOwnProperty(i)){var g=p[i];typeof g=="function"&&(g=g.call(a,o)),f+="/"+i+" "+g+" ",a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g)}}else typeof(g=p)=="function"&&(g=g.call(a,o)),f+="/"+i+" "+g,a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:o.objId}),a.internal.out("endobj")}s&&z8e(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},Fse=Cs.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(i){return i};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(s!==0&&(a+=" "),ma(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+Rg(n(e[s].toString()))+")"):a+=e[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},M3=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Rg(n(e))+")"},QA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};QA.prototype.toString=function(){return this.objId+" 0 R"},QA.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},QA.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:Fse(a,this.objId,this.scope)}):a instanceof QA?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var Ose=function(){QA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};sc(Ose,QA);var Dse=function(){QA.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Rg(r(e))+")"}},set:function(r){e=r}})};sc(Dse,QA);var Vd=function e(){QA.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!zs(t,3)},set:function(y){y?this.F=$s(t,3):this.F=Gs(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof $N)return;s="FieldObject"+e.FieldNum++}var y=function(w){return w};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+Rg(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(y){i=y}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/M8:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof $N||this instanceof qp))return M3(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof $i?h:M3(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=this instanceof $i?y:y.substr(0,1)==="("?Cx(y.substr(1,y.length-2)):Cx(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof $i?Cx(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof $i?"/"+y:y}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof $i?p:M3(p,this.objId,this.scope)},set:function(y){y=y.toString(),p=this instanceof $i?y:y.substr(0,1)==="("?Cx(y.substr(1,y.length-2)):Cx(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof $i?Cx(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof $i?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(y){y=!!y,x=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,1)},set:function(y){y?this.Ff=$s(this.Ff,1):this.Ff=Gs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,2)},set:function(y){y?this.Ff=$s(this.Ff,2):this.Ff=Gs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,3)},set:function(y){y?this.Ff=$s(this.Ff,3):this.Ff=Gs(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');b=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(b){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};sc(Vd,QA);var Cv=function(){Vd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Fse(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,i,o){o||(o=1);for(var c,u=[];c=i.exec(s);)u.push(c[o]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,18)},set:function(r){r?this.Ff=$s(this.Ff,18):this.Ff=Gs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=$s(this.Ff,19):this.Ff=Gs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,20)},set:function(r){r?(this.Ff=$s(this.Ff,20),t.sort()):this.Ff=Gs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,22)},set:function(r){r?this.Ff=$s(this.Ff,22):this.Ff=Gs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,23)},set:function(r){r?this.Ff=$s(this.Ff,23):this.Ff=Gs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,27)},set:function(r){r?this.Ff=$s(this.Ff,27):this.Ff=Gs(this.Ff,27)}}),this.hasAppearanceStream=!1};sc(Cv,Vd);var _v=function(){Cv.call(this),this.fontName="helvetica",this.combo=!1};sc(_v,Cv);var Nv=function(){_v.call(this),this.combo=!0};sc(Nv,_v);var n5=function(){Nv.call(this),this.edit=!0};sc(n5,Nv);var $i=function(){Vd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,15)},set:function(r){r?this.Ff=$s(this.Ff,15):this.Ff=Gs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,16)},set:function(r){r?this.Ff=$s(this.Ff,16):this.Ff=Gs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,17)},set:function(r){r?this.Ff=$s(this.Ff,17):this.Ff=Gs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,26)},set:function(r){r?this.Ff=$s(this.Ff,26):this.Ff=Gs(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+Rg(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){ma(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};sc($i,Vd);var a5=function(){$i.call(this),this.pushButton=!0};sc(a5,$i);var Sv=function(){$i.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};sc(Sv,$i);var $N=function(){var e,t;Vd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),n)i.push("/"+s+" ("+Rg(a(n[s]))+")");return i.push(">>"),i.join(`
`)},set:function(a){ma(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=mr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};sc($N,Vd),Sv.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Sv.prototype.createOption=function(e){var t=new $N;return t.Parent=this,t.optionName=e,this.Kids.push(t),G8e.call(this.scope,t),t};var s5=function(){$i.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=mr.CheckBox.createAppearanceStream()};sc(s5,$i);var qp=function(){Vd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,13)},set:function(t){t?this.Ff=$s(this.Ff,13):this.Ff=Gs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,21)},set:function(t){t?this.Ff=$s(this.Ff,21):this.Ff=Gs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,23)},set:function(t){t?this.Ff=$s(this.Ff,23):this.Ff=Gs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,24)},set:function(t){t?this.Ff=$s(this.Ff,24):this.Ff=Gs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,25)},set:function(t){t?this.Ff=$s(this.Ff,25):this.Ff=Gs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,26)},set:function(t){t?this.Ff=$s(this.Ff,26):this.Ff=Gs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};sc(qp,Vd);var i5=function(){qp.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,14)},set:function(e){e?this.Ff=$s(this.Ff,14):this.Ff=Gs(this.Ff,14)}}),this.password=!0};sc(i5,qp);var mr={CheckBox:{createAppearanceStream:function(){return{N:{On:mr.CheckBox.YesNormal},D:{On:mr.CheckBox.YesPushDown,Off:mr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=SA(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=$F(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+en(mr.internal.getWidth(e))+" "+en(mr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+en(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=SA(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],s=mr.internal.getHeight(e),i=mr.internal.getWidth(e),o=$F(e,e.caption);return a.push("1 g"),a.push("0 0 "+en(i)+" "+en(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+en(i-1)+" "+en(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+en(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=SA(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+en(mr.internal.getWidth(e))+" "+en(mr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:mr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=mr.RadioButton.Circle.YesNormal,t.D[e]=mr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=SA(e);t.scope=e.scope;var r=[],n=mr.internal.getWidth(e)<=mr.internal.getHeight(e)?mr.internal.getWidth(e)/4:mr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=mr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+_0(mr.internal.getWidth(e)/2)+" "+_0(mr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=SA(e);t.scope=e.scope;var r=[],n=mr.internal.getWidth(e)<=mr.internal.getHeight(e)?mr.internal.getWidth(e)/4:mr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*mr.internal.Bezier_C).toFixed(5)),i=Number((n*mr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+_0(mr.internal.getWidth(e)/2)+" "+_0(mr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+_0(mr.internal.getWidth(e)/2)+" "+_0(mr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=SA(e);t.scope=e.scope;var r=[],n=mr.internal.getWidth(e)<=mr.internal.getHeight(e)?mr.internal.getWidth(e)/4:mr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*mr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+_0(mr.internal.getWidth(e)/2)+" "+_0(mr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:mr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=mr.RadioButton.Cross.YesNormal,t.D[e]=mr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=SA(e);t.scope=e.scope;var r=[],n=mr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+en(mr.internal.getWidth(e)-2)+" "+en(mr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(en(n.x1.x)+" "+en(n.x1.y)+" m"),r.push(en(n.x2.x)+" "+en(n.x2.y)+" l"),r.push(en(n.x4.x)+" "+en(n.x4.y)+" m"),r.push(en(n.x3.x)+" "+en(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=SA(e);t.scope=e.scope;var r=mr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+en(mr.internal.getWidth(e))+" "+en(mr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+en(mr.internal.getWidth(e)-2)+" "+en(mr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(en(r.x1.x)+" "+en(r.x1.y)+" m"),n.push(en(r.x2.x)+" "+en(r.x2.y)+" l"),n.push(en(r.x4.x)+" "+en(r.x4.y)+" m"),n.push(en(r.x3.x)+" "+en(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=SA(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+en(mr.internal.getWidth(e))+" "+en(mr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};mr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=mr.internal.getWidth(e),r=mr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},mr.internal.getWidth=function(e){var t=0;return ma(e)==="object"&&(t=SG(e.Rect[2])),t},mr.internal.getHeight=function(e){var t=0;return ma(e)==="object"&&(t=SG(e.Rect[3])),t};var G8e=Cs.addField=function(e){if($8e(this,e),!(e instanceof Vd))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Cs.AcroFormChoiceField=Cv,Cs.AcroFormListBox=_v,Cs.AcroFormComboBox=Nv,Cs.AcroFormEditBox=n5,Cs.AcroFormButton=$i,Cs.AcroFormPushButton=a5,Cs.AcroFormRadioButton=Sv,Cs.AcroFormCheckBox=s5,Cs.AcroFormTextField=qp,Cs.AcroFormPasswordField=i5,Cs.AcroFormAppearance=mr,Cs.AcroForm={ChoiceField:Cv,ListBox:_v,ComboBox:Nv,EditBox:n5,Button:$i,PushButton:a5,RadioButton:Sv,CheckBox:s5,TextField:qp,PasswordField:i5,Appearance:mr},vr.AcroForm={ChoiceField:Cv,ListBox:_v,ComboBox:Nv,EditBox:n5,Button:$i,PushButton:a5,RadioButton:Sv,CheckBox:s5,TextField:qp,PasswordField:i5,Appearance:mr};vr.AcroForm;function Pse(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(D,O){var L,M,J,V,K,z=t;if((O=O||t)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(I(D))for(K in r)for(J=r[K],L=0;L<J.length;L+=1){for(V=!0,M=0;M<J[L].length;M+=1)if(J[L][M]!==void 0&&J[L][M]!==D[M]){V=!1;break}if(V===!0){z=K;break}}else for(K in r)for(J=r[K],L=0;L<J.length;L+=1){for(V=!0,M=0;M<J[L].length;M+=1)if(J[L][M]!==void 0&&J[L][M]!==D.charCodeAt(M)){V=!1;break}if(V===!0){z=K;break}}return z===t&&O!==t&&(z=O),z},a=function D(O){for(var L=this.internal.write,M=this.internal.putStream,J=(0,this.internal.getFilters)();J.indexOf("FlateEncode")!==-1;)J.splice(J.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var V=[];if(V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Image"}),V.push({key:"Width",value:O.width}),V.push({key:"Height",value:O.height}),O.colorSpace===b.INDEXED?V.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(V.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===b.DEVICE_CMYK&&V.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),V.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&V.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)){for(var K="",z=0,G=O.transparency.length;z<G;z++)K+=O.transparency[z]+" "+O.transparency[z]+" ";V.push({key:"Mask",value:"["+K+"]"})}O.sMask!==void 0&&V.push({key:"SMask",value:O.objectId+1+" 0 R"});var Y=O.filter!==void 0?["/"+O.filter]:void 0;if(M({data:O.data,additionalKeyValues:V,alreadyAppliedFilters:Y,objectId:O.objectId}),L("endobj"),"sMask"in O&&O.sMask!==void 0){var ee="/Predictor "+O.predictor+" /Colors 1 /BitsPerComponent "+O.bitsPerComponent+" /Columns "+O.width,P={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:O.bitsPerComponent,decodeParameters:ee,data:O.sMask};"filter"in O&&(P.filter=O.filter),D.call(this,P)}if(O.colorSpace===b.INDEXED){var Q=this.internal.newObject();M({data:N(new Uint8Array(O.palette)),objectId:Q}),L("endobj")}},s=function(){var D=this.internal.collections.addImage_images;for(var O in D)a.call(this,D[O])},i=function(){var D,O=this.internal.collections.addImage_images,L=this.internal.write;for(var M in O)L("/I"+(D=O[M]).index,D.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",i))},c=function(){var D=this.internal.collections.addImage_images;return o.call(this),D},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(D){return typeof e["process"+D.toUpperCase()]=="function"},f=function(D){return ma(D)==="object"&&D.nodeType===1},h=function(D,O){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var L=""+D.getAttribute("src");if(L.indexOf("data:image/")===0)return aw(unescape(L).split("base64,").pop());var M=e.loadFile(L,!0);if(M!==void 0)return M}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var J;switch(O){case"PNG":J="image/png";break;case"WEBP":J="image/webp";break;case"JPEG":case"JPG":default:J="image/jpeg"}return aw(D.toDataURL(J,1).split("base64,").pop())}},p=function(D){var O=this.internal.collections.addImage_images;if(O){for(var L in O)if(D===O[L].alias)return O[L]}},g=function(D,O,L){return D||O||(D=-96,O=-96),D<0&&(D=-1*L.width*72/D/this.internal.scaleFactor),O<0&&(O=-1*L.height*72/O/this.internal.scaleFactor),D===0&&(D=O*L.width/L.height),O===0&&(O=D*L.height/L.width),[D,O]},x=function(D,O,L,M,J,V){var K=g.call(this,L,M,J),z=this.internal.getCoordinateString,G=this.internal.getVerticalCoordinateString,Y=c.call(this);if(L=K[0],M=K[1],Y[J.index]=J,V){V*=Math.PI/180;var ee=Math.cos(V),P=Math.sin(V),Q=function(te){return te.toFixed(4)},X=[Q(ee),Q(P),Q(-1*P),Q(ee),0,0,"cm"]}this.internal.write("q"),V?(this.internal.write([1,"0","0",1,z(D),G(O+M),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([z(L),"0","0",z(M),"0","0","cm"].join(" "))):this.internal.write([z(L),"0","0",z(M),z(D),G(O+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+J.index+" Do"),this.internal.write("Q")},b=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(D){var O,L,M=0;if(typeof D=="string")for(L=D.length,O=0;O<L;O++)M=(M<<5)-M+D.charCodeAt(O),M|=0;else if(I(D))for(L=D.byteLength/2,O=0;O<L;O++)M=(M<<5)-M+D[O],M|=0;return M},_=e.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var O=!0;return D.length===0&&(O=!1),D.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(O=!1),O},B=e.__addimage__.extractImageFromDataUrl=function(D){var O=(D=D||"").split("base64,"),L=null;if(O.length===2){var M=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(O[0]);Array.isArray(M)&&(L={mimeType:M[1],charset:M[2],data:O[1]})}return L},k=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(D){return k()&&D instanceof ArrayBuffer};var I=e.__addimage__.isArrayBufferView=function(D){return k()&&typeof Uint32Array<"u"&&(D instanceof Int8Array||D instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array)},E=e.__addimage__.binaryStringToUint8Array=function(D){for(var O=D.length,L=new Uint8Array(O),M=0;M<O;M++)L[M]=D.charCodeAt(M);return L},N=e.__addimage__.arrayBufferToBinaryString=function(D){for(var O="",L=I(D)?D:new Uint8Array(D),M=0;M<L.length;M+=8192)O+=String.fromCharCode.apply(null,L.subarray(M,M+8192));return O};e.addImage=function(){var D,O,L,M,J,V,K,z,G;if(typeof arguments[1]=="number"?(O=t,L=arguments[1],M=arguments[2],J=arguments[3],V=arguments[4],K=arguments[5],z=arguments[6],G=arguments[7]):(O=arguments[1],L=arguments[2],M=arguments[3],J=arguments[4],V=arguments[5],K=arguments[6],z=arguments[7],G=arguments[8]),ma(D=arguments[0])==="object"&&!f(D)&&"imageData"in D){var Y=D;D=Y.imageData,O=Y.format||O||t,L=Y.x||L||0,M=Y.y||M||0,J=Y.w||Y.width||J,V=Y.h||Y.height||V,K=Y.alias||K,z=Y.compression||z,G=Y.rotation||Y.angle||G}var ee=this.internal.getFilters();if(z===void 0&&ee.indexOf("FlateEncode")!==-1&&(z="SLOW"),isNaN(L)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var P=j.call(this,D,O,K,z);return x.call(this,L,M,J,V,P,G),this};var j=function(D,O,L,M){var J,V,K;if(typeof D=="string"&&n(D)===t){D=unescape(D);var z=R(D,!1);(z!==""||(z=e.loadFile(D,!0))!==void 0)&&(D=z)}if(f(D)&&(D=h(D,O)),O=n(D,O),!d(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((K=L)==null||K.length===0)&&(L=function(G){return typeof G=="string"||I(G)?w(G):I(G.data)?w(G.data):null}(D)),(J=p.call(this,L))||(k()&&(D instanceof Uint8Array||O==="RGBA"||(V=D,D=E(D))),J=this["process"+O.toUpperCase()](D,u.call(this),L,function(G){return G&&typeof G=="string"&&(G=G.toUpperCase()),G in e.image_compression?G:y.NONE}(M),V)),!J)throw new Error("An unknown error occurred whilst processing the image.");return J},R=e.__addimage__.convertBase64ToBinaryString=function(D,O){var L;O=typeof O!="boolean"||O;var M,J="";if(typeof D=="string"){M=(L=B(D))!==null?L.data:D;try{J=aw(M)}catch(V){if(O)throw _(M)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+V.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return J};e.getImageProperties=function(D){var O,L,M="";if(f(D)&&(D=h(D)),typeof D=="string"&&n(D)===t&&((M=R(D,!1))===""&&(M=e.loadFile(D)||""),D=M),L=n(D),!d(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(!k()||D instanceof Uint8Array||(D=E(D)),!(O=this["process"+L.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=L,O}})(vr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};vr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,s,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var p=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(x.objId),w=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+p(y(n.contents))+")",s+=" /Popup "+b.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+p(y(w))+") >>",x.content=s;var _=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+i(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+_,n.open&&(s+=" /Open true"),s+=" >>",b.content=s,this.internal.write(x.objId,"0 R",b.objId,"0 R");break;case"freetext":a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var B=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+p(g(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+B+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var k=this.annotations._nameMap[n.options.name];n.options.pageNumber=k.page,n.options.top=k.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+p(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var I=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+I+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,s,i){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:i,type:"link"})},e.textWithLink=function(r,n,a,s){var i,o,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var d=this.splitTextToSize(r,o).length;i=Math.ceil(u*d)}else o=c,i=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,o,i,s),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(vr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(x){return t[x.charCodeAt(0)]!==void 0},i=e.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},o=e.__arabicParser__.isArabicEndLetter=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(x){return i(x)&&a.indexOf(x.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(x){var b=0,y=r,w="",_=0;for(b=0;b<x.length;b+=1)y[x.charCodeAt(b)]!==void 0?(_++,typeof(y=y[x.charCodeAt(b)])=="number"&&(w+=String.fromCharCode(y),y=r,_=0),b===x.length-1&&(y=r,w+=x.charAt(b-(_-1)),b-=_-1,_=0)):(y=r,w+=x.charAt(b-_),b-=_,_=0);return w};e.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&n[x.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(x,b,y){return i(x)?s(x)===!1?-1:!u(x)||!i(b)&&!i(y)||!i(y)&&o(b)||o(x)&&!i(b)||o(x)&&c(b)||o(x)&&o(b)?0:d(x)&&i(b)&&!o(b)&&i(y)&&u(y)?3:o(x)||!i(y)?1:2:-1},p=function(x){var b=0,y=0,w=0,_="",B="",k="",I=(x=x||"").split("\\s+"),E=[];for(b=0;b<I.length;b+=1){for(E.push(""),y=0;y<I[b].length;y+=1)_=I[b][y],B=I[b][y-1],k=I[b][y+1],i(_)?(w=h(_,B,k),E[b]+=w!==-1?String.fromCharCode(t[_.charCodeAt(0)][w]):_):E[b]+=_;E[b]=f(E[b])}return E.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var x,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(b)){var w=0;for(y=[],w=0;w<b.length;w+=1)Array.isArray(b[w])?y.push([p(b[w][0]),b[w][1],b[w][2]]):y.push([p(b[w])]);x=y}else x=p(b);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};e.events.push(["preProcessText",g])}(vr.API),vr.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(vr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(x){p=x}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(x){g=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,p=0,g=0,x=0,b=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=u.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(_,B){return _.concat(b.splitTextToSize(B,y))},[])):c=Array.isArray(c)?c:[c];for(var w=0;w<c.length;w++)p<(x=this.getStringUnitWidth(c[w],{font:f})*d)&&(p=x);return p!==0&&(g=c.length),{w:p/=h,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,p&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,f,h){if(n.call(this),!d)throw new Error("No data for PDF table.");var p,g,x,b,y=[],w=[],_=[],B={},k={},I=[],E=[],N=(h=h||{}).autoSize||!1,j=h.printHeaders!==!1,R=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,D=h.margins||Object.assign({width:this.getPageWidth()},t),O=typeof h.padding=="number"?h.padding:3,L=h.headerBackgroundColor||"#c8c8c8",M=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=j,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=L,this.internal.__cell__.headerTextColor=M,this.setFontSize(R),f==null)w=y=Object.keys(d[0]),_=y.map(function(){return"left"});else if(Array.isArray(f)&&ma(f[0])==="object")for(y=f.map(function(Y){return Y.name}),w=f.map(function(Y){return Y.prompt||Y.name||""}),_=f.map(function(Y){return Y.align||"left"}),p=0;p<f.length;p+=1)k[f[p].name]=f[p].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(w=y=f,_=y.map(function(){return"left"}));if(N||Array.isArray(f)&&typeof f[0]=="string")for(p=0;p<y.length;p+=1){for(B[b=y[p]]=d.map(function(Y){return Y[b]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(w[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=B[b],this.setFont(void 0,"normal"),x=0;x<g.length;x+=1)I.push(this.getTextDimensions(g[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);k[b]=Math.max.apply(null,I)+O+O,I=[]}if(j){var J={};for(p=0;p<y.length;p+=1)J[y[p]]={},J[y[p]].text=w[p],J[y[p]].align=_[p];var V=o.call(this,J,k);E=y.map(function(Y){return new s(c,u,k[Y],V,J[Y].text,void 0,J[Y].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var K=f.reduce(function(Y,ee){return Y[ee.name]=ee.align,Y},{});for(p=0;p<d.length;p+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:p,data:d[p]},this);var z=o.call(this,d[p],k);for(x=0;x<y.length;x+=1){var G=d[p][y[x]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:p,col:x,data:G},this),i.call(this,new s(c,u,k[y[x]],z,G,p+2,K[y[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var o=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(p){var g=c[p];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[p]-d-d)},this).map(function(p){return this.getLineHeightFactor()*p.length*f/h+d+d},this).reduce(function(p,g){return Math.max(p,g)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){d=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=c;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(g)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(vr.API);var Rse={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Lse=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],GF=Pse(Lse),Mse=[100,200,300,400,500,600,700,800,900],K8e=Pse(Mse);function KF(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return Rse[s=s||"normal"]?s:"normal"}(e.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(s){return typeof GF[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function kG(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var q8e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},BG={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function jG(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function W8e(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},q8e,r.genericFontFamilies||{}),s=null,i=null,o=0;o<t.length;++o)if(a[(s=KF(t[o])).family]&&(s.family=a[s.family]),e.hasOwnProperty(s.family)){i=e[s.family];break}if(!(i=i||e[n]))throw new Error("Could not find a font-family for the rule '"+jG(s)+"' and default family '"+n+"'.");if(i=function(c,u){if(u[c])return u[c];var d=GF[c],f=d<=GF.normal?-1:1,h=kG(u,Lse,d,f);if(!h)throw new Error("Could not find a matching font-stretch value for "+c);return h}(s.stretch,i),i=function(c,u){if(u[c])return u[c];for(var d=Rse[c],f=0;f<d.length;++f)if(u[d[f]])return u[d[f]];throw new Error("Could not find a matching font-style for "+c)}(s.style,i),!(i=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var d=K8e[c],f=kG(u,Mse,d,c<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+c);return f}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+jG(s)+"'.");return i}function TG(e){return e.trimLeft()}function X8e(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function Y8e(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var GC,IG,FG,U3=["times"];(function(e){var t,r,n,a,s,i,o,c,u,d=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new c,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new i,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new i,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Q=P;Object.defineProperty(this,"pdf",{get:function(){return Q}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(Ne){X=!!Ne}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(Ne){te=!!Ne}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(Ne){isNaN(Ne)||(ae=Ne)}});var se=0;Object.defineProperty(this,"posY",{get:function(){return se},set:function(Ne){isNaN(Ne)||(se=Ne)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Ne){var fe;typeof Ne=="number"?fe=[Ne,Ne,Ne,Ne]:((fe=new Array(4))[0]=Ne[0],fe[1]=Ne.length>=2?Ne[1]:fe[0],fe[2]=Ne.length>=3?Ne[2]:fe[0],fe[3]=Ne.length>=4?Ne[3]:fe[1]),u.margin=fe}});var oe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return oe},set:function(Ne){oe=Ne}});var ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return ce},set:function(Ne){ce=Ne}});var me=[];Object.defineProperty(this,"pageBreaks",{get:function(){return me},set:function(Ne){me=Ne}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Ne){Ne instanceof d&&(u=Ne)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Ne){u.path=Ne}});var ke=[];Object.defineProperty(this,"ctxStack",{get:function(){return ke},set:function(Ne){ke=Ne}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ne){var fe;fe=h(Ne),this.ctx.fillStyle=fe.style,this.ctx.isFillTransparent=fe.a===0,this.ctx.fillOpacity=fe.a,this.pdf.setFillColor(fe.r,fe.g,fe.b,{a:fe.a}),this.pdf.setTextColor(fe.r,fe.g,fe.b,{a:fe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ne){var fe=h(Ne);this.ctx.strokeStyle=fe.style,this.ctx.isStrokeTransparent=fe.a===0,this.ctx.strokeOpacity=fe.a,fe.a===0?this.pdf.setDrawColor(255,255,255):(fe.a,this.pdf.setDrawColor(fe.r,fe.g,fe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ne){["butt","round","square"].indexOf(Ne)!==-1&&(this.ctx.lineCap=Ne,this.pdf.setLineCap(Ne))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ne){isNaN(Ne)||(this.ctx.lineWidth=Ne,this.pdf.setLineWidth(Ne))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ne){["bevel","round","miter"].indexOf(Ne)!==-1&&(this.ctx.lineJoin=Ne,this.pdf.setLineJoin(Ne))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ne){isNaN(Ne)||(this.ctx.miterLimit=Ne,this.pdf.setMiterLimit(Ne))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ne){this.ctx.textBaseline=Ne}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ne){["right","end","center","left","start"].indexOf(Ne)!==-1&&(this.ctx.textAlign=Ne)}});var ne=null;function _e(Ne,fe){if(ne===null){var Ie=function(Me){var Xe=[];return Object.keys(Me).forEach(function(ye){Me[ye].forEach(function(Fe){var Re=null;switch(Fe){case"bold":Re={family:ye,weight:"bold"};break;case"italic":Re={family:ye,style:"italic"};break;case"bolditalic":Re={family:ye,weight:"bold",style:"italic"};break;case"":case"normal":Re={family:ye}}Re!==null&&(Re.ref={name:ye,style:Fe},Xe.push(Re))})}),Xe}(Ne.getFontList());ne=function(Me){for(var Xe={},ye=0;ye<Me.length;++ye){var Fe=KF(Me[ye]),Re=Fe.family,Ge=Fe.stretch,Ke=Fe.style,Ze=Fe.weight;Xe[Re]=Xe[Re]||{},Xe[Re][Ge]=Xe[Re][Ge]||{},Xe[Re][Ge][Ke]=Xe[Re][Ge][Ke]||{},Xe[Re][Ge][Ke][Ze]=Fe}return Xe}(Ie.concat(fe))}return ne}var De=null;Object.defineProperty(this,"fontFaces",{get:function(){return De},set:function(Ne){ne=null,De=Ne}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ne){var fe;if(this.ctx.font=Ne,(fe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ne))!==null){var Ie=fe[1],Me=(fe[2],fe[3]),Xe=fe[4],ye=(fe[5],fe[6]),Fe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Xe)[2];Xe=Math.floor(Fe==="px"?parseFloat(Xe)*this.pdf.internal.scaleFactor:Fe==="em"?parseFloat(Xe)*this.pdf.getFontSize():parseFloat(Xe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Xe);var Re=function(St){var Dt,gt,fr=[],zt=St.trim();if(zt==="")return U3;if(zt in BG)return[BG[zt]];for(;zt!=="";){switch(gt=null,Dt=(zt=TG(zt)).charAt(0)){case'"':case"'":gt=X8e(zt.substring(1),Dt);break;default:gt=Y8e(zt)}if(gt===null||(fr.push(gt[0]),(zt=TG(gt[1]))!==""&&zt.charAt(0)!==","))return U3;zt=zt.replace(/^,/,"")}return fr}(ye);if(this.fontFaces){var Ge=W8e(_e(this.pdf,this.fontFaces),Re.map(function(St){return{family:St,stretch:"normal",weight:Me,style:Ie}}));this.pdf.setFont(Ge.ref.name,Ge.ref.style)}else{var Ke="";(Me==="bold"||parseInt(Me,10)>=700||Ie==="bold")&&(Ke="bold"),Ie==="italic"&&(Ke+="italic"),Ke.length===0&&(Ke="normal");for(var Ze="",ft={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Nt=0;Nt<Re.length;Nt++){if(this.pdf.internal.getFont(Re[Nt],Ke,{noFallback:!0,disableWarning:!0})!==void 0){Ze=Re[Nt];break}if(Ke==="bolditalic"&&this.pdf.internal.getFont(Re[Nt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ze=Re[Nt],Ke="bold";else if(this.pdf.internal.getFont(Re[Nt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ze=Re[Nt],Ke="normal";break}}if(Ze===""){for(var Tt=0;Tt<Re.length;Tt++)if(ft[Re[Tt]]){Ze=ft[Re[Tt]];break}}Ze=Ze===""?"Times":Ze,this.pdf.setFont(Ze,Ke)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ne){this.ctx.globalCompositeOperation=Ne}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ne){this.ctx.globalAlpha=Ne}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ne){this.ctx.lineDashOffset=Ne,ee.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ne){this.ctx.lineDash=Ne,ee.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ne){this.ctx.ignoreClearRect=!!Ne}})};f.prototype.setLineDash=function(P){this.lineDash=P},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){B.call(this,"fill",!1)},f.prototype.stroke=function(){B.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(P,Q){if(isNaN(P)||isNaN(Q))throw _a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new i(P,Q));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new i(P,Q)},f.prototype.closePath=function(){var P=new i(0,0),Q=0;for(Q=this.path.length-1;Q!==-1;Q--)if(this.path[Q].type==="begin"&&ma(this.path[Q+1])==="object"&&typeof this.path[Q+1].x=="number"){P=new i(this.path[Q+1].x,this.path[Q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(P.x,P.y)},f.prototype.lineTo=function(P,Q){if(isNaN(P)||isNaN(Q))throw _a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new i(P,Q));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new i(X.x,X.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),B.call(this,null,!0)},f.prototype.quadraticCurveTo=function(P,Q,X,te){if(isNaN(X)||isNaN(te)||isNaN(P)||isNaN(Q))throw _a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new i(X,te)),se=this.ctx.transform.applyToPoint(new i(P,Q));this.path.push({type:"qct",x1:se.x,y1:se.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new i(ae.x,ae.y)},f.prototype.bezierCurveTo=function(P,Q,X,te,ae,se){if(isNaN(ae)||isNaN(se)||isNaN(P)||isNaN(Q)||isNaN(X)||isNaN(te))throw _a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var oe=this.ctx.transform.applyToPoint(new i(ae,se)),ce=this.ctx.transform.applyToPoint(new i(P,Q)),me=this.ctx.transform.applyToPoint(new i(X,te));this.path.push({type:"bct",x1:ce.x,y1:ce.y,x2:me.x,y2:me.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new i(oe.x,oe.y)},f.prototype.arc=function(P,Q,X,te,ae,se){if(isNaN(P)||isNaN(Q)||isNaN(X)||isNaN(te)||isNaN(ae))throw _a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(se=!!se,!this.ctx.transform.isIdentity){var oe=this.ctx.transform.applyToPoint(new i(P,Q));P=oe.x,Q=oe.y;var ce=this.ctx.transform.applyToPoint(new i(0,X)),me=this.ctx.transform.applyToPoint(new i(0,0));X=Math.sqrt(Math.pow(ce.x-me.x,2)+Math.pow(ce.y-me.y,2))}Math.abs(ae-te)>=2*Math.PI&&(te=0,ae=2*Math.PI),this.path.push({type:"arc",x:P,y:Q,radius:X,startAngle:te,endAngle:ae,counterclockwise:se})},f.prototype.arcTo=function(P,Q,X,te,ae){throw new Error("arcTo not implemented.")},f.prototype.rect=function(P,Q,X,te){if(isNaN(P)||isNaN(Q)||isNaN(X)||isNaN(te))throw _a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,Q),this.lineTo(P+X,Q),this.lineTo(P+X,Q+te),this.lineTo(P,Q+te),this.lineTo(P,Q),this.lineTo(P+X,Q),this.lineTo(P,Q)},f.prototype.fillRect=function(P,Q,X,te){if(isNaN(P)||isNaN(Q)||isNaN(X)||isNaN(te))throw _a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,Q,X,te),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},f.prototype.strokeRect=function(P,Q,X,te){if(isNaN(P)||isNaN(Q)||isNaN(X)||isNaN(te))throw _a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(P,Q,X,te),this.stroke())},f.prototype.clearRect=function(P,Q,X,te){if(isNaN(P)||isNaN(Q)||isNaN(X)||isNaN(te))throw _a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,Q,X,te))},f.prototype.save=function(P){P=typeof P!="boolean"||P;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(Q),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},f.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(Q),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(P){var Q,X,te,ae;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))Q=0,X=0,te=0,ae=0;else{var se=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(se!==null)Q=parseInt(se[1]),X=parseInt(se[2]),te=parseInt(se[3]),ae=1;else if((se=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)Q=parseInt(se[1]),X=parseInt(se[2]),te=parseInt(se[3]),ae=parseFloat(se[4]);else{if(ae=1,typeof P=="string"&&P.charAt(0)!=="#"){var oe=new jse(P);P=oe.ok?oe.toHex():"#000000"}P.length===4?(Q=P.substring(1,2),Q+=Q,X=P.substring(2,3),X+=X,te=P.substring(3,4),te+=te):(Q=P.substring(1,3),X=P.substring(3,5),te=P.substring(5,7)),Q=parseInt(Q,16),X=parseInt(X,16),te=parseInt(te,16)}}return{r:Q,g:X,b:te,a:ae,style:P}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(P,Q,X,te){if(isNaN(Q)||isNaN(X)||typeof P!="string")throw _a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!p.call(this)){var ae=z(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;O.call(this,{text:P,x:Q,y:X,scale:se,angle:ae,align:this.textAlign,maxWidth:te})}},f.prototype.strokeText=function(P,Q,X,te){if(isNaN(Q)||isNaN(X)||typeof P!="string")throw _a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){te=isNaN(te)?void 0:te;var ae=z(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;O.call(this,{text:P,x:Q,y:X,scale:se,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:te})}},f.prototype.measureText=function(P){if(typeof P!="string")throw _a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Q=this.pdf,X=this.pdf.internal.scaleFactor,te=Q.internal.getFontSize(),ae=Q.getStringUnitWidth(P)*te/Q.internal.scaleFactor,se=function(oe){var ce=(oe=oe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ce}}),this};return new se({width:ae*=Math.round(96*X/72*1e4)/1e4})},f.prototype.scale=function(P,Q){if(isNaN(P)||isNaN(Q))throw _a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new c(P,0,0,Q,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},f.prototype.rotate=function(P){if(isNaN(P))throw _a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Q=new c(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},f.prototype.translate=function(P,Q){if(isNaN(P)||isNaN(Q))throw _a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new c(1,0,0,1,P,Q);this.ctx.transform=this.ctx.transform.multiply(X)},f.prototype.transform=function(P,Q,X,te,ae,se){if(isNaN(P)||isNaN(Q)||isNaN(X)||isNaN(te)||isNaN(ae)||isNaN(se))throw _a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var oe=new c(P,Q,X,te,ae,se);this.ctx.transform=this.ctx.transform.multiply(oe)},f.prototype.setTransform=function(P,Q,X,te,ae,se){P=isNaN(P)?1:P,Q=isNaN(Q)?0:Q,X=isNaN(X)?0:X,te=isNaN(te)?1:te,ae=isNaN(ae)?0:ae,se=isNaN(se)?0:se,this.ctx.transform=new c(P,Q,X,te,ae,se)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(P,Q,X,te,ae,se,oe,ce,me){var ke=this.pdf.getImageProperties(P),ne=1,_e=1,De=1,Ne=1;te!==void 0&&ce!==void 0&&(De=ce/te,Ne=me/ae,ne=ke.width/te*ce/te,_e=ke.height/ae*me/ae),se===void 0&&(se=Q,oe=X,Q=0,X=0),te!==void 0&&ce===void 0&&(ce=te,me=ae),te===void 0&&ce===void 0&&(ce=ke.width,me=ke.height);for(var fe,Ie=this.ctx.transform.decompose(),Me=z(Ie.rotate.shx),Xe=new c,ye=(Xe=(Xe=(Xe=Xe.multiply(Ie.translate)).multiply(Ie.skew)).multiply(Ie.scale)).applyToRectangle(new o(se-Q*De,oe-X*Ne,te*ne,ae*_e)),Fe=b.call(this,ye),Re=[],Ge=0;Ge<Fe.length;Ge+=1)Re.indexOf(Fe[Ge])===-1&&Re.push(Fe[Ge]);if(_(Re),this.autoPaging)for(var Ke=Re[0],Ze=Re[Re.length-1],ft=Ke;ft<Ze+1;ft++){this.pdf.setPage(ft);var Nt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Tt=ft===1?this.posY+this.margin[0]:this.margin[0],St=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Dt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],gt=ft===1?0:St+(ft-2)*Dt;if(this.ctx.clip_path.length!==0){var fr=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(fe,this.posX+this.margin[3],-gt+Tt+this.ctx.prevPageLastElemOffset),k.call(this,"fill",!0),this.path=fr}var zt=JSON.parse(JSON.stringify(ye));zt=w([zt],this.posX+this.margin[3],-gt+Tt+this.ctx.prevPageLastElemOffset)[0];var Mr=(ft>Ke||ft<Ze)&&x.call(this);Mr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Nt,Dt,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",zt.x,zt.y,zt.w,zt.h,null,null,Me),Mr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",ye.x,ye.y,ye.w,ye.h,null,null,Me)};var b=function(P,Q,X){var te=[];Q=Q||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":te.push(Math.floor((P.y+ae)/X)+1);break;case"arc":te.push(Math.floor((P.y+ae-P.radius)/X)+1),te.push(Math.floor((P.y+ae+P.radius)/X)+1);break;case"qct":var se=G(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);te.push(Math.floor((se.y+ae)/X)+1),te.push(Math.floor((se.y+se.h+ae)/X)+1);break;case"bct":var oe=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);te.push(Math.floor((oe.y+ae)/X)+1),te.push(Math.floor((oe.y+oe.h+ae)/X)+1);break;case"rect":te.push(Math.floor((P.y+ae)/X)+1),te.push(Math.floor((P.y+P.h+ae)/X)+1)}for(var ce=0;ce<te.length;ce+=1)for(;this.pdf.internal.getNumberOfPages()<te[ce];)y.call(this);return te},y=function(){var P=this.fillStyle,Q=this.strokeStyle,X=this.font,te=this.lineCap,ae=this.lineWidth,se=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=Q,this.font=X,this.lineCap=te,this.lineWidth=ae,this.lineJoin=se},w=function(P,Q,X){for(var te=0;te<P.length;te++)switch(P[te].type){case"bct":P[te].x2+=Q,P[te].y2+=X;case"qct":P[te].x1+=Q,P[te].y1+=X;case"mt":case"lt":case"arc":default:P[te].x+=Q,P[te].y+=X}return P},_=function(P){return P.sort(function(Q,X){return Q-X})},B=function(P,Q){for(var X,te,ae=this.fillStyle,se=this.strokeStyle,oe=this.lineCap,ce=this.lineWidth,me=Math.abs(ce*this.ctx.transform.scaleX),ke=this.lineJoin,ne=JSON.parse(JSON.stringify(this.path)),_e=JSON.parse(JSON.stringify(this.path)),De=[],Ne=0;Ne<_e.length;Ne++)if(_e[Ne].x!==void 0)for(var fe=b.call(this,_e[Ne]),Ie=0;Ie<fe.length;Ie+=1)De.indexOf(fe[Ie])===-1&&De.push(fe[Ie]);for(var Me=0;Me<De.length;Me++)for(;this.pdf.internal.getNumberOfPages()<De[Me];)y.call(this);if(_(De),this.autoPaging)for(var Xe=De[0],ye=De[De.length-1],Fe=Xe;Fe<ye+1;Fe++){this.pdf.setPage(Fe),this.fillStyle=ae,this.strokeStyle=se,this.lineCap=oe,this.lineWidth=me,this.lineJoin=ke;var Re=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ge=Fe===1?this.posY+this.margin[0]:this.margin[0],Ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ze=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ft=Fe===1?0:Ke+(Fe-2)*Ze;if(this.ctx.clip_path.length!==0){var Nt=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(X,this.posX+this.margin[3],-ft+Ge+this.ctx.prevPageLastElemOffset),k.call(this,P,!0),this.path=Nt}if(te=JSON.parse(JSON.stringify(ne)),this.path=w(te,this.posX+this.margin[3],-ft+Ge+this.ctx.prevPageLastElemOffset),Q===!1||Fe===0){var Tt=(Fe>Xe||Fe<ye)&&x.call(this);Tt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Re,Ze,null).clip().discardPath()),k.call(this,P,Q),Tt&&this.pdf.restoreGraphicsState()}this.lineWidth=ce}else this.lineWidth=me,k.call(this,P,Q),this.lineWidth=ce;this.path=ne},k=function(P,Q){if((P!=="stroke"||Q||!g.call(this))&&(P==="stroke"||Q||!p.call(this))){for(var X,te,ae=[],se=this.path,oe=0;oe<se.length;oe++){var ce=se[oe];switch(ce.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:ce,deltas:[],abs:[]});break;case"lt":var me=ae.length;if(se[oe-1]&&!isNaN(se[oe-1].x)&&(X=[ce.x-se[oe-1].x,ce.y-se[oe-1].y],me>0)){for(;me>=0;me--)if(ae[me-1].close!==!0&&ae[me-1].begin!==!0){ae[me-1].deltas.push(X),ae[me-1].abs.push(ce);break}}break;case"bct":X=[ce.x1-se[oe-1].x,ce.y1-se[oe-1].y,ce.x2-se[oe-1].x,ce.y2-se[oe-1].y,ce.x-se[oe-1].x,ce.y-se[oe-1].y],ae[ae.length-1].deltas.push(X);break;case"qct":var ke=se[oe-1].x+2/3*(ce.x1-se[oe-1].x),ne=se[oe-1].y+2/3*(ce.y1-se[oe-1].y),_e=ce.x+2/3*(ce.x1-ce.x),De=ce.y+2/3*(ce.y1-ce.y),Ne=ce.x,fe=ce.y;X=[ke-se[oe-1].x,ne-se[oe-1].y,_e-se[oe-1].x,De-se[oe-1].y,Ne-se[oe-1].x,fe-se[oe-1].y],ae[ae.length-1].deltas.push(X);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(ce)}}te=Q?null:P==="stroke"?"stroke":"fill";for(var Ie=!1,Me=0;Me<ae.length;Me++)if(ae[Me].arc)for(var Xe=ae[Me].abs,ye=0;ye<Xe.length;ye++){var Fe=Xe[ye];Fe.type==="arc"?N.call(this,Fe.x,Fe.y,Fe.radius,Fe.startAngle,Fe.endAngle,Fe.counterclockwise,void 0,Q,!Ie):L.call(this,Fe.x,Fe.y),Ie=!0}else if(ae[Me].close===!0)this.pdf.internal.out("h"),Ie=!1;else if(ae[Me].begin!==!0){var Re=ae[Me].start.x,Ge=ae[Me].start.y;M.call(this,ae[Me].deltas,Re,Ge),Ie=!0}te&&j.call(this,te),Q&&R.call(this)}},I=function(P){var Q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=Q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-X;case"top":return P+Q-X;case"hanging":return P+Q-2*X;case"middle":return P+Q/2-X;case"ideographic":return P;case"alphabetic":default:return P}},E=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(Q,X){this.colorStops.push([Q,X])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(P,Q,X,te,ae,se,oe,ce,me){for(var ke=V.call(this,X,te,ae,se),ne=0;ne<ke.length;ne++){var _e=ke[ne];ne===0&&(me?D.call(this,_e.x1+P,_e.y1+Q):L.call(this,_e.x1+P,_e.y1+Q)),J.call(this,P,Q,_e.x2,_e.y2,_e.x3,_e.y3,_e.x4,_e.y4)}ce?R.call(this):j.call(this,oe)},j=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(P,Q){this.pdf.internal.out(r(P)+" "+n(Q)+" m")},O=function(P){var Q;switch(P.align){case"right":case"end":Q="right";break;case"center":Q="center";break;case"left":case"start":default:Q="left"}var X=this.pdf.getTextDimensions(P.text),te=I.call(this,P.y),ae=E.call(this,te)-X.h,se=this.ctx.transform.applyToPoint(new i(P.x,te)),oe=this.ctx.transform.decompose(),ce=new c;ce=(ce=(ce=ce.multiply(oe.translate)).multiply(oe.skew)).multiply(oe.scale);for(var me,ke,ne,_e=this.ctx.transform.applyToRectangle(new o(P.x,te,X.w,X.h)),De=ce.applyToRectangle(new o(P.x,ae,X.w,X.h)),Ne=b.call(this,De),fe=[],Ie=0;Ie<Ne.length;Ie+=1)fe.indexOf(Ne[Ie])===-1&&fe.push(Ne[Ie]);if(_(fe),this.autoPaging)for(var Me=fe[0],Xe=fe[fe.length-1],ye=Me;ye<Xe+1;ye++){this.pdf.setPage(ye);var Fe=ye===1?this.posY+this.margin[0]:this.margin[0],Re=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ge=this.pdf.internal.pageSize.height-this.margin[2],Ke=Ge-this.margin[0],Ze=this.pdf.internal.pageSize.width-this.margin[1],ft=Ze-this.margin[3],Nt=ye===1?0:Re+(ye-2)*Ke;if(this.ctx.clip_path.length!==0){var Tt=this.path;me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(me,this.posX+this.margin[3],-1*Nt+Fe),k.call(this,"fill",!0),this.path=Tt}var St=w([JSON.parse(JSON.stringify(De))],this.posX+this.margin[3],-Nt+Fe+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(ke=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ke*P.scale),ne=this.lineWidth,this.lineWidth=ne*P.scale);var Dt=this.autoPaging!=="text";if(Dt||St.y+St.h<=Ge){if(Dt||St.y>=Fe&&St.x<=Ze){var gt=Dt?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||Ze-St.x)[0],fr=w([JSON.parse(JSON.stringify(_e))],this.posX+this.margin[3],-Nt+Fe+this.ctx.prevPageLastElemOffset)[0],zt=Dt&&(ye>Me||ye<Xe)&&x.call(this);zt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ft,Ke,null).clip().discardPath()),this.pdf.text(gt,fr.x,fr.y,{angle:P.angle,align:Q,renderingMode:P.renderingMode}),zt&&this.pdf.restoreGraphicsState()}}else St.y<Ge&&(this.ctx.prevPageLastElemOffset+=Ge-St.y);P.scale>=.01&&(this.pdf.setFontSize(ke),this.lineWidth=ne)}else P.scale>=.01&&(ke=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ke*P.scale),ne=this.lineWidth,this.lineWidth=ne*P.scale),this.pdf.text(P.text,se.x+this.posX,se.y+this.posY,{angle:P.angle,align:Q,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(ke),this.lineWidth=ne)},L=function(P,Q,X,te){X=X||0,te=te||0,this.pdf.internal.out(r(P+X)+" "+n(Q+te)+" l")},M=function(P,Q,X){return this.pdf.lines(P,Q,X,null,null)},J=function(P,Q,X,te,ae,se,oe,ce){this.pdf.internal.out([t(a(X+P)),t(s(te+Q)),t(a(ae+P)),t(s(se+Q)),t(a(oe+P)),t(s(ce+Q)),"c"].join(" "))},V=function(P,Q,X,te){for(var ae=2*Math.PI,se=Math.PI/2;Q>X;)Q-=ae;var oe=Math.abs(X-Q);oe<ae&&te&&(oe=ae-oe);for(var ce=[],me=te?-1:1,ke=Q;oe>1e-5;){var ne=ke+me*Math.min(oe,se);ce.push(K.call(this,P,ke,ne)),oe-=Math.abs(ne-ke),ke=ne}return ce},K=function(P,Q,X){var te=(X-Q)/2,ae=P*Math.cos(te),se=P*Math.sin(te),oe=ae,ce=-se,me=oe*oe+ce*ce,ke=me+oe*ae+ce*se,ne=4/3*(Math.sqrt(2*me*ke)-ke)/(oe*se-ce*ae),_e=oe-ne*ce,De=ce+ne*oe,Ne=_e,fe=-De,Ie=te+Q,Me=Math.cos(Ie),Xe=Math.sin(Ie);return{x1:P*Math.cos(Q),y1:P*Math.sin(Q),x2:_e*Me-De*Xe,y2:_e*Xe+De*Me,x3:Ne*Me-fe*Xe,y3:Ne*Xe+fe*Me,x4:P*Math.cos(X),y4:P*Math.sin(X)}},z=function(P){return 180*P/Math.PI},G=function(P,Q,X,te,ae,se){var oe=P+.5*(X-P),ce=Q+.5*(te-Q),me=ae+.5*(X-ae),ke=se+.5*(te-se),ne=Math.min(P,ae,oe,me),_e=Math.max(P,ae,oe,me),De=Math.min(Q,se,ce,ke),Ne=Math.max(Q,se,ce,ke);return new o(ne,De,_e-ne,Ne-De)},Y=function(P,Q,X,te,ae,se,oe,ce){var me,ke,ne,_e,De,Ne,fe,Ie,Me,Xe,ye,Fe,Re,Ge,Ke=X-P,Ze=te-Q,ft=ae-X,Nt=se-te,Tt=oe-ae,St=ce-se;for(ke=0;ke<41;ke++)Me=(fe=(ne=P+(me=ke/40)*Ke)+me*((De=X+me*ft)-ne))+me*(De+me*(ae+me*Tt-De)-fe),Xe=(Ie=(_e=Q+me*Ze)+me*((Ne=te+me*Nt)-_e))+me*(Ne+me*(se+me*St-Ne)-Ie),ke==0?(ye=Me,Fe=Xe,Re=Me,Ge=Xe):(ye=Math.min(ye,Me),Fe=Math.min(Fe,Xe),Re=Math.max(Re,Me),Ge=Math.max(Ge,Xe));return new o(Math.round(ye),Math.round(Fe),Math.round(Re-ye),Math.round(Ge-Fe))},ee=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,Q,X=(P=this.ctx.lineDash,Q=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:Q}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(vr.API),function(e){var t=function(s){var i,o,c,u,d,f,h,p,g,x;for(o=[],c=0,u=(s+=i="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(d=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(f=(d=((d=((d=((d=(d-(x=d%85))/85)-(g=d%85))/85)-(p=d%85))/85)-(h=d%85))/85)%85,o.push(f+33,h+33,p+33,g+33,x+33)):o.push(122);return function(b,y){for(var w=y;w>0;w--)b.pop()}(o,i.length),String.fromCharCode.apply(String,o)+"~>"},r=function(s){var i,o,c,u,d,f=String,h="length",p=255,g="charCodeAt",x="slice",b="replace";for(s[x](-2),s=s[x](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),c=[],u=0,d=(s+=i="uuuuu"[x](s[h]%5||5))[h];d>u;u+=5)o=52200625*(s[g](u)-33)+614125*(s[g](u+1)-33)+7225*(s[g](u+2)-33)+85*(s[g](u+3)-33)+(s[g](u+4)-33),c.push(p&o>>24,p&o>>16,p&o>>8,p&o);return function(y,w){for(var _=w;_>0;_--)y.pop()}(c,i[h]),f.fromCharCode.apply(f,c)},n=function(s){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),i.test(s)===!1)return"";for(var o="",c=0;c<s.length;c+=2)o+=String.fromCharCode("0x"+(s[c]+s[c+1]));return o},a=function(s){for(var i=new Uint8Array(s.length),o=s.length;o--;)i[o]=s.charCodeAt(o);return s=(i=QF(i)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};e.processDataByFilters=function(s,i){var o=0,c=s||"",u=[];for(typeof(i=i||[])=="string"&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(vr.API),function(e){e.loadFile=function(t,r,n){return function(a,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(c,u,d){var f=new XMLHttpRequest,h=0,p=function(g){var x=g.length,b=[],y=String.fromCharCode;for(h=0;h<x;h+=1)b.push(y(255&g.charCodeAt(h)));return b.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(p(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return p(f.responseText)}(a,s,i)}catch{}return o}(t,r,n)},e.loadImageFile=e.loadFile}(vr.API),function(e){function t(){return(Qr.html2canvas?Promise.resolve(Qr.html2canvas):A1(()=>Promise.resolve().then(()=>hft),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function r(){return(Qr.DOMPurify?Promise.resolve(Qr.DOMPurify):A1(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var n=function(i){var o=ma(i);return o==="undefined"?"undefined":o==="string"||i instanceof String?"string":o==="number"||i instanceof Number?"number":o==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":o==="object"?"object":"unknown"},a=function(i,o){var c=document.createElement(i);for(var u in o.className&&(c.className=o.className),o.innerHTML&&o.dompurify&&(c.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)c.style[u]=o.style[u];return c},s=function i(o){var c=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),u=i.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,i,1,[i])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(i,o){return i.__proto__=o||s.prototype,i},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(i,o){return this.then(function(){switch(o=o||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:i,dompurify:c})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},s.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function c(u,d){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),h=u.firstChild;h;h=h.nextSibling)d!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||f.appendChild(c(h,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(o){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,o(this.prop.container,c)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(o){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var p=u[h],g=p.src.find(function(x){return x.format==="truetype"});g&&c.addFont(g.url,p.ref.name,p.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,c.context2d.save(!0),o(this.prop.container,f)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(i,o,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(i,o):this.outputPdf(i,o)},s.prototype.outputPdf=function(i,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,o)})},s.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},s.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(i){if(n(i)!=="object")return this;var o=Object.keys(i||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=i[c]};switch(c){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[c]=i[c]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(i,o){return this.then(function(){var c=i in s.template.prop?this.prop[i]:this.opt[i];return o?o(c):c})},s.prototype.setMargin=function(i){return this.then(function(){switch(n(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},s.prototype.setPageSize=function(i){function o(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(i=i||vr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:o(i.inner.width,i.k),height:o(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},s.prototype.setProgress=function(i,o,c,u){return i!=null&&(this.progress.val=i),o!=null&&(this.progress.state=o),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(i,o,c,u){return this.setProgress(i?this.progress.val+i:null,o||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(i,o){var c=this;return this.thenCore(i,o,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return c.updateProgress(null,u),f}).then(u,d).then(function(f){return c.updateProgress(1),f})})},s.prototype.thenCore=function(i,o,c){c=c||Promise.prototype.then,i&&(i=i.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=c.call(u,i,o);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(i,o){return Promise.prototype.then.call(this,i,o)},s.prototype.thenList=function(i){var o=this;return i.forEach(function(c){o=o.thenCore(c)}),o},s.prototype.catch=function(i){i&&(i=i.bind(this));var o=Promise.prototype.catch.call(this,i);return s.convert(o,this)},s.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},s.prototype.error=function(i){return this.then(function(){throw new Error(i)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,vr.getPageSize=function(i,o,c){if(ma(i)==="object"){var u=i;i=u.orientation,o=u.unit||o,c=u.format||c}o=o||"mm",c=c||"a4",i=(""+(i||"P")).toLowerCase();var d,f=(""+c).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var p,g=0,x=0;if(h.hasOwnProperty(f))g=h[f][1]/d,x=h[f][0]/d;else try{g=c[1],x=c[0]}catch{throw new Error("Invalid format: "+c)}if(i==="p"||i==="portrait")i="p",x>g&&(p=x,x=g,g=p);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",g>x&&(p=x,x=g,g=p)}return{width:x,height:g,unit:o,k:d,orientation:i}},e.html=function(i,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(KF):null;var c=new s(o);return o.worker?c:c.from(i).doCallback()}}(vr.API),vr.API.addJS=function(e){return FG=e,this.internal.events.subscribe("postPutResources",function(){GC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(GC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),IG=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+FG+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){GC!==void 0&&IG!==void 0&&this.internal.out("/Names <</JavaScript "+GC+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var i=a[s],o=n.exec(i);if(o!=null){var c=o[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var h=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var i={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var i=n.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var c=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(vr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,s,i,o){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(f){for(var h,p=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,x={width:0,height:0,numcomponents:1},b=4;b<g;b+=2){if(b+=p,t.indexOf(f.charCodeAt(b+1))!==-1){h=256*f.charCodeAt(b+5)+f.charCodeAt(b+6),x={width:256*f.charCodeAt(b+7)+f.charCodeAt(b+8),height:h,numcomponents:f.charCodeAt(b+9)};break}p=256*f.charCodeAt(b+2)+f.charCodeAt(b+3)}return x}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(vr.API);var _x,KC,OG,DG,PG,J8e=function(){var e,t,r;function n(s){var i,o,c,u,d,f,h,p,g,x,b,y,w,_;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(i=this.readUInt32(),g=(function(){var B,k;for(k=[],B=0;B<4;++B)k.push(String.fromCharCode(this.data[this.pos++]));return k}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*d/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,i-=4),s=(f!=null?f.data:void 0)||this.imgData,y=0;0<=i?y<i:y>i;0<=i?++y:--y)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((x=c-this.transparency.indexed.length)>0)for(w=0;0<=x?w<x:w>x;0<=x?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":h=(b=this.read(i)).indexOf(0),p=String.fromCharCode.apply(String,b.slice(0,h)),this.text[p]=String.fromCharCode.apply(String,b.slice(h+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(_=this.colorType)===4||_===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var i,o;for(o=[],i=0;0<=s?i<s:i>s;0<=s?++i:--i)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var i=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*i),c=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(f,h,p,g){var x,b,y,w,_,B,k,I,E,N,j,R,D,O,L,M,J,V,K,z,G,Y=Math.ceil((u.width-f)/p),ee=Math.ceil((u.height-h)/g),P=u.width==Y&&u.height==ee;for(O=i*Y,R=P?o:new Uint8Array(O*ee),B=s.length,D=0,b=0;D<ee&&c<B;){switch(s[c++]){case 0:for(w=J=0;J<O;w=J+=1)R[b++]=s[c++];break;case 1:for(w=V=0;V<O;w=V+=1)x=s[c++],_=w<i?0:R[b-i],R[b++]=(x+_)%256;break;case 2:for(w=K=0;K<O;w=K+=1)x=s[c++],y=(w-w%i)/i,L=D&&R[(D-1)*O+y*i+w%i],R[b++]=(L+x)%256;break;case 3:for(w=z=0;z<O;w=z+=1)x=s[c++],y=(w-w%i)/i,_=w<i?0:R[b-i],L=D&&R[(D-1)*O+y*i+w%i],R[b++]=(x+Math.floor((_+L)/2))%256;break;case 4:for(w=G=0;G<O;w=G+=1)x=s[c++],y=(w-w%i)/i,_=w<i?0:R[b-i],D===0?L=M=0:(L=R[(D-1)*O+y*i+w%i],M=y&&R[(D-1)*O+(y-1)*i+w%i]),k=_+L-M,I=Math.abs(k-_),N=Math.abs(k-L),j=Math.abs(k-M),E=I<=N&&I<=j?_:N<=j?L:M,R[b++]=(x+E)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!P){var Q=((h+D*g)*u.width+f)*i,X=D*O;for(w=0;w<Y;w+=1){for(var te=0;te<i;te+=1)o[Q++]=R[X++];Q+=(p-1)*i}}D++}}return s=j8e(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},n.prototype.decodePalette=function(){var s,i,o,c,u,d,f,h,p;for(o=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+o.length),c=0,s=0,i=f=0,h=o.length;f<h;i=f+=3)u[c++]=o[i],u[c++]=o[i+1],u[c++]=o[i+2],u[c++]=(p=d[s++])!=null?p:255;return u},n.prototype.copyToImageData=function(s,i){var o,c,u,d,f,h,p,g,x,b,y;if(c=this.colors,x=null,o=this.hasAlphaChannel,this.palette.length&&(x=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),c=4,o=!0),g=(u=s.data||s).length,f=x||i,d=h=0,c===1)for(;d<g;)p=x?4*i[d/4]:h,b=f[p++],u[d++]=b,u[d++]=b,u[d++]=b,u[d++]=o?f[p++]:255,h=p;else for(;d<g;)p=x?4*i[d/4]:h,u[d++]=f[p++],u[d++]=f[p++],u[d++]=f[p++],u[d++]=o?f[p++]:255,h=p},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call(Qr)==="[object Window]"){try{t=Qr.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(s){var i;if(a()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(i=new Image).src=t.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var i,o,c,u,d,f,h,p;if(this.animation){for(p=[],o=d=0,f=(h=this.animation.frames).length;d<f;o=++d)i=h[o],c=s.createImageData(i.width,i.height),u=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(c,u),i.imageData=c,p.push(i.image=e(c));return p}},n.prototype.renderFrame=function(s,i){var o,c,u;return o=(c=this.animation.frames)[i],u=c[i-1],i===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(s){var i,o,c,u,d,f,h=this;return o=0,f=this.animation,u=f.numFrames,c=f.frames,d=f.numPlays,(i=function(){var p,g;if(p=o++%u,g=c[p],h.renderFrame(s,p),u>1&&o/u<d)return h.animation._timeout=setTimeout(i,g.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var i,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,i=s.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(o=i.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),i.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Z8e(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,i=1<<(7&a)+1;e[t++],e[t++];var o=null,c=null;s&&(o=t,c=i,t+=3*i);var u=!0,d=[],f=0,h=null,p=0,g=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var x=e[t++];f=e[t++]|e[t++]<<8,h=e[t++],(1&x)==0&&(h=null),p=x>>2&7,t++;break;case 254:for(;;){if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var b=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,B=e[t++],k=B>>6&1,I=1<<(7&B)+1,E=o,N=c,j=!1;B>>7&&(j=!0,E=t,N=I,t+=3*I);var R=t;for(t++;;){var D;if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}d.push({x:b,y,width:w,height:_,has_local_palette:j,palette_offset:E,palette_size:N,data_offset:R,data_length:t-R,transparent_index:h,interlaced:!!k,delay:f,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(O){if(O<0||O>=d.length)throw new Error("Frame index out of range.");return d[O]},this.decodeAndBlitFrameBGRA=function(O,L){var M=this.frameInfo(O),J=M.width*M.height,V=new Uint8Array(J);RG(e,M.data_offset,V,J);var K=M.palette_offset,z=M.transparent_index;z===null&&(z=256);var G=M.width,Y=r-G,ee=G,P=4*(M.y*r+M.x),Q=4*((M.y+M.height)*r+M.x),X=P,te=4*Y;M.interlaced===!0&&(te+=4*r*7);for(var ae=8,se=0,oe=V.length;se<oe;++se){var ce=V[se];if(ee===0&&(ee=G,(X+=te)>=Q&&(te=4*Y+4*r*(ae-1),X=P+(G+Y)*(ae<<1),ae>>=1)),ce===z)X+=4;else{var me=e[K+3*ce],ke=e[K+3*ce+1],ne=e[K+3*ce+2];L[X++]=ne,L[X++]=ke,L[X++]=me,L[X++]=255}--ee}},this.decodeAndBlitFrameRGBA=function(O,L){var M=this.frameInfo(O),J=M.width*M.height,V=new Uint8Array(J);RG(e,M.data_offset,V,J);var K=M.palette_offset,z=M.transparent_index;z===null&&(z=256);var G=M.width,Y=r-G,ee=G,P=4*(M.y*r+M.x),Q=4*((M.y+M.height)*r+M.x),X=P,te=4*Y;M.interlaced===!0&&(te+=4*r*7);for(var ae=8,se=0,oe=V.length;se<oe;++se){var ce=V[se];if(ee===0&&(ee=G,(X+=te)>=Q&&(te=4*Y+4*r*(ae-1),X=P+(G+Y)*(ae<<1),ae>>=1)),ce===z)X+=4;else{var me=e[K+3*ce],ke=e[K+3*ce+1],ne=e[K+3*ce+2];L[X++]=me,L[X++]=ke,L[X++]=ne,L[X++]=255}--ee}}}function RG(e,t,r,n){for(var a=e[t++],s=1<<a,i=s+1,o=i+1,c=a+1,u=(1<<c)-1,d=0,f=0,h=0,p=e[t++],g=new Int32Array(4096),x=null;;){for(;d<16&&p!==0;)f|=e[t++]<<d,d+=8,p===1?p=e[t++]:--p;if(d<c)break;var b=f&u;if(f>>=c,d-=c,b!==s){if(b===i)break;for(var y=b<o?b:x,w=0,_=y;_>s;)_=g[_]>>8,++w;var B=_;if(h+w+(y!==b?1:0)>n)return void _a.log("Warning, gif stream longer than expected.");r[h++]=B;var k=h+=w;for(y!==b&&(r[h++]=B),_=y;w--;)_=g[_],r[--k]=255&_,_>>=8;x!==null&&o<4096&&(g[o++]=x<<8|B,o>=u+1&&c<12&&(++c,u=u<<1|1)),x=b}else o=i+1,u=(1<<(c=a+1))-1,x=null}return h!==n&&_a.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Q3(e){var t,r,n,a,s,i=Math.floor,o=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),h=new Array(65535),p=new Array(64),g=new Array(64),x=[],b=0,y=7,w=new Array(64),_=new Array(64),B=new Array(64),k=new Array(256),I=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],J=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function V(P,Q){for(var X=0,te=0,ae=new Array,se=1;se<=16;se++){for(var oe=1;oe<=P[se];oe++)ae[Q[te]]=[],ae[Q[te]][0]=X,ae[Q[te]][1]=se,te++,X++;X*=2}return ae}function K(P){for(var Q=P[0],X=P[1]-1;X>=0;)Q&1<<X&&(b|=1<<y),X--,--y<0&&(b==255?(z(255),z(0)):z(b),y=7,b=0)}function z(P){x.push(P)}function G(P){z(P>>8&255),z(255&P)}function Y(P,Q,X,te,ae){for(var se,oe=ae[0],ce=ae[240],me=function(Xe,ye){var Fe,Re,Ge,Ke,Ze,ft,Nt,Tt,St,Dt,gt=0;for(St=0;St<8;++St){Fe=Xe[gt],Re=Xe[gt+1],Ge=Xe[gt+2],Ke=Xe[gt+3],Ze=Xe[gt+4],ft=Xe[gt+5],Nt=Xe[gt+6];var fr=Fe+(Tt=Xe[gt+7]),zt=Fe-Tt,Mr=Re+Nt,wr=Re-Nt,Dr=Ge+ft,vn=Ge-ft,Tr=Ke+Ze,Ga=Ke-Ze,nn=fr+Tr,oa=fr-Tr,Ba=Mr+Dr,rn=Mr-Dr;Xe[gt]=nn+Ba,Xe[gt+4]=nn-Ba;var gr=.707106781*(rn+oa);Xe[gt+2]=oa+gr,Xe[gt+6]=oa-gr;var tt=.382683433*((nn=Ga+vn)-(rn=wr+zt)),xt=.5411961*nn+tt,et=1.306562965*rn+tt,vt=.707106781*(Ba=vn+wr),wt=zt+vt,yt=zt-vt;Xe[gt+5]=yt+xt,Xe[gt+3]=yt-xt,Xe[gt+1]=wt+et,Xe[gt+7]=wt-et,gt+=8}for(gt=0,St=0;St<8;++St){Fe=Xe[gt],Re=Xe[gt+8],Ge=Xe[gt+16],Ke=Xe[gt+24],Ze=Xe[gt+32],ft=Xe[gt+40],Nt=Xe[gt+48];var nr=Fe+(Tt=Xe[gt+56]),xr=Fe-Tt,qr=Re+Nt,Zr=Re-Nt,Kr=Ge+ft,he=Ge-ft,je=Ke+Ze,Ce=Ke-Ze,we=nr+je,Se=nr-je,Te=qr+Kr,Je=qr-Kr;Xe[gt]=we+Te,Xe[gt+32]=we-Te;var dt=.707106781*(Je+Se);Xe[gt+16]=Se+dt,Xe[gt+48]=Se-dt;var $e=.382683433*((we=Ce+he)-(Je=Zr+xr)),nt=.5411961*we+$e,ot=1.306562965*Je+$e,Pt=.707106781*(Te=he+Zr),Vt=xr+Pt,Jt=xr-Pt;Xe[gt+40]=Jt+nt,Xe[gt+24]=Jt-nt,Xe[gt+8]=Vt+ot,Xe[gt+56]=Vt-ot,gt++}for(St=0;St<64;++St)Dt=Xe[St]*ye[St],p[St]=Dt>0?Dt+.5|0:Dt-.5|0;return p}(P,Q),ke=0;ke<64;++ke)g[E[ke]]=me[ke];var ne=g[0]-X;X=g[0],ne==0?K(te[0]):(K(te[h[se=32767+ne]]),K(f[se]));for(var _e=63;_e>0&&g[_e]==0;)_e--;if(_e==0)return K(oe),X;for(var De,Ne=1;Ne<=_e;){for(var fe=Ne;g[Ne]==0&&Ne<=_e;)++Ne;var Ie=Ne-fe;if(Ie>=16){De=Ie>>4;for(var Me=1;Me<=De;++Me)K(ce);Ie&=15}se=32767+g[Ne],K(ae[(Ie<<4)+h[se]]),K(f[se]),Ne++}return _e!=63&&K(oe),X}function ee(P){P=Math.min(Math.max(P,1),100),s!=P&&(function(Q){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var ae=i((X[te]*Q+50)/100);ae=Math.min(Math.max(ae,1),255),o[E[te]]=ae}for(var se=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],oe=0;oe<64;oe++){var ce=i((se[oe]*Q+50)/100);ce=Math.min(Math.max(ce,1),255),c[E[oe]]=ce}for(var me=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ke=0,ne=0;ne<8;ne++)for(var _e=0;_e<8;_e++)u[ke]=1/(o[E[ke]]*me[ne]*me[_e]*8),d[ke]=1/(c[E[ke]]*me[ne]*me[_e]*8),ke++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),s=P)}this.encode=function(P,Q){Q&&ee(Q),x=new Array,b=0,y=7,G(65496),G(65504),G(16),z(74),z(70),z(73),z(70),z(0),z(1),z(1),z(0),G(1),G(1),z(0),z(0),function(){G(65499),G(132),z(0);for(var Re=0;Re<64;Re++)z(o[Re]);z(1);for(var Ge=0;Ge<64;Ge++)z(c[Ge])}(),function(Re,Ge){G(65472),G(17),z(8),G(Ge),G(Re),z(3),z(1),z(17),z(0),z(2),z(17),z(1),z(3),z(17),z(1)}(P.width,P.height),function(){G(65476),G(418),z(0);for(var Re=0;Re<16;Re++)z(N[Re+1]);for(var Ge=0;Ge<=11;Ge++)z(j[Ge]);z(16);for(var Ke=0;Ke<16;Ke++)z(R[Ke+1]);for(var Ze=0;Ze<=161;Ze++)z(D[Ze]);z(1);for(var ft=0;ft<16;ft++)z(O[ft+1]);for(var Nt=0;Nt<=11;Nt++)z(L[Nt]);z(17);for(var Tt=0;Tt<16;Tt++)z(M[Tt+1]);for(var St=0;St<=161;St++)z(J[St])}(),G(65498),G(12),z(3),z(1),z(0),z(2),z(17),z(3),z(17),z(0),z(63),z(0);var X=0,te=0,ae=0;b=0,y=7,this.encode.displayName="_encode_";for(var se,oe,ce,me,ke,ne,_e,De,Ne,fe=P.data,Ie=P.width,Me=P.height,Xe=4*Ie,ye=0;ye<Me;){for(se=0;se<Xe;){for(ke=Xe*ye+se,_e=-1,De=0,Ne=0;Ne<64;Ne++)ne=ke+(De=Ne>>3)*Xe+(_e=4*(7&Ne)),ye+De>=Me&&(ne-=Xe*(ye+1+De-Me)),se+_e>=Xe&&(ne-=se+_e-Xe+4),oe=fe[ne++],ce=fe[ne++],me=fe[ne++],w[Ne]=(I[oe]+I[ce+256>>0]+I[me+512>>0]>>16)-128,_[Ne]=(I[oe+768>>0]+I[ce+1024>>0]+I[me+1280>>0]>>16)-128,B[Ne]=(I[oe+1280>>0]+I[ce+1536>>0]+I[me+1792>>0]>>16)-128;X=Y(w,u,X,t,n),te=Y(_,d,te,r,a),ae=Y(B,d,ae,r,a),se+=32}ye+=8}if(y>=0){var Fe=[];Fe[1]=y+1,Fe[0]=(1<<y+1)-1,K(Fe)}return G(65497),new Uint8Array(x)},e=e||50,function(){for(var P=String.fromCharCode,Q=0;Q<256;Q++)k[Q]=P(Q)}(),t=V(N,j),r=V(O,L),n=V(R,D),a=V(M,J),function(){for(var P=1,Q=2,X=1;X<=15;X++){for(var te=P;te<Q;te++)h[32767+te]=X,f[32767+te]=[],f[32767+te][1]=X,f[32767+te][0]=te;for(var ae=-(Q-1);ae<=-P;ae++)h[32767+ae]=X,f[32767+ae]=[],f[32767+ae][1]=X,f[32767+ae][0]=Q-1+ae;P<<=1,Q<<=1}}(),function(){for(var P=0;P<256;P++)I[P]=19595*P,I[P+256>>0]=38470*P,I[P+512>>0]=7471*P+32768,I[P+768>>0]=-11059*P,I[P+1024>>0]=-21709*P,I[P+1280>>0]=32768*P+8421375,I[P+1536>>0]=-27439*P,I[P+1792>>0]=-5329*P}(),ee(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function gd(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function LG(e){function t(N){if(!N)throw Error("assert :P")}function r(N,j,R){for(var D=0;4>D;D++)if(N[j+D]!=R.charCodeAt(D))return!0;return!1}function n(N,j,R,D,O){for(var L=0;L<O;L++)N[j+L]=R[D+L]}function a(N,j,R,D){for(var O=0;O<D;O++)N[j+O]=R}function s(N){return new Int32Array(N)}function i(N,j){for(var R=[],D=0;D<N;D++)R.push(new j);return R}function o(N,j){var R=[];return function D(O,L,M){for(var J=M[L],V=0;V<J&&(O.push(M.length>L+1?[]:new j),!(M.length<L+1));V++)D(O[V],L+1,M)}(R,0,N),R}var c=function(){var N=this;function j(T,H){for(var Z=1<<H-1>>>0;T&Z;)Z>>>=1;return Z?(T&Z-1)+Z:T}function R(T,H,Z,ie,de){t(!(ie%Z));do T[H+(ie-=Z)]=de;while(0<ie)}function D(T,H,Z,ie,de){if(t(2328>=de),512>=de)var pe=s(512);else if((pe=s(de))==null)return 0;return function(ge,xe,Ee,Be,Ue,it){var rt,We,Ft=xe,pt=1<<Ee,Qe=s(16),Ve=s(16);for(t(Ue!=0),t(Be!=null),t(ge!=null),t(0<Ee),We=0;We<Ue;++We){if(15<Be[We])return 0;++Qe[Be[We]]}if(Qe[0]==Ue)return 0;for(Ve[1]=0,rt=1;15>rt;++rt){if(Qe[rt]>1<<rt)return 0;Ve[rt+1]=Ve[rt]+Qe[rt]}for(We=0;We<Ue;++We)rt=Be[We],0<Be[We]&&(it[Ve[rt]++]=We);if(Ve[15]==1)return(Be=new O).g=0,Be.value=it[0],R(ge,Ft,1,pt,Be),pt;var _t,Ot=-1,jt=pt-1,rr=0,Yt=1,br=1,er=1<<Ee;for(We=0,rt=1,Ue=2;rt<=Ee;++rt,Ue<<=1){if(Yt+=br<<=1,0>(br-=Qe[rt]))return 0;for(;0<Qe[rt];--Qe[rt])(Be=new O).g=rt,Be.value=it[We++],R(ge,Ft+rr,Ue,er,Be),rr=j(rr,rt)}for(rt=Ee+1,Ue=2;15>=rt;++rt,Ue<<=1){if(Yt+=br<<=1,0>(br-=Qe[rt]))return 0;for(;0<Qe[rt];--Qe[rt]){if(Be=new O,(rr&jt)!=Ot){for(Ft+=er,_t=1<<(Ot=rt)-Ee;15>Ot&&!(0>=(_t-=Qe[Ot]));)++Ot,_t<<=1;pt+=er=1<<(_t=Ot-Ee),ge[xe+(Ot=rr&jt)].g=_t+Ee,ge[xe+Ot].value=Ft-xe-Ot}Be.g=rt-Ee,Be.value=it[We++],R(ge,Ft+(rr>>Ee),Ue,er,Be),rr=j(rr,rt)}}return Yt!=2*Ve[15]-1?0:pt}(T,H,Z,ie,de,pe)}function O(){this.value=this.g=0}function L(){this.value=this.g=0}function M(){this.G=i(5,O),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Is,L)}function J(T,H,Z,ie){t(T!=null),t(H!=null),t(2147483648>ie),T.Ca=254,T.I=0,T.b=-8,T.Ka=0,T.oa=H,T.pa=Z,T.Jd=H,T.Yc=Z+ie,T.Zc=4<=ie?Z+ie-4+1:Z,se(T)}function V(T,H){for(var Z=0;0<H--;)Z|=ce(T,128)<<H;return Z}function K(T,H){var Z=V(T,H);return oe(T)?-Z:Z}function z(T,H,Z,ie){var de,pe=0;for(t(T!=null),t(H!=null),t(4294967288>ie),T.Sb=ie,T.Ra=0,T.u=0,T.h=0,4<ie&&(ie=4),de=0;de<ie;++de)pe+=H[Z+de]<<8*de;T.Ra=pe,T.bb=ie,T.oa=H,T.pa=Z}function G(T){for(;8<=T.u&&T.bb<T.Sb;)T.Ra>>>=8,T.Ra+=T.oa[T.pa+T.bb]<<xf-8>>>0,++T.bb,T.u-=8;X(T)&&(T.h=1,T.u=0)}function Y(T,H){if(t(0<=H),!T.h&&H<=gf){var Z=Q(T)&tA[H];return T.u+=H,G(T),Z}return T.h=1,T.u=0}function ee(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Q(T){return T.Ra>>>(T.u&xf-1)>>>0}function X(T){return t(T.bb<=T.Sb),T.h||T.bb==T.Sb&&T.u>xf}function te(T,H){T.u=H,T.h=X(T)}function ae(T){T.u>=$h&&(t(T.u>=$h),G(T))}function se(T){t(T!=null&&T.oa!=null),T.pa<T.Zc?(T.I=(T.oa[T.pa++]|T.I<<8)>>>0,T.b+=8):(t(T!=null&&T.oa!=null),T.pa<T.Yc?(T.b+=8,T.I=T.oa[T.pa++]|T.I<<8):T.Ka?T.b=0:(T.I<<=8,T.b+=8,T.Ka=1))}function oe(T){return V(T,1)}function ce(T,H){var Z=T.Ca;0>T.b&&se(T);var ie=T.b,de=Z*H>>>8,pe=(T.I>>>ie>de)+0;for(pe?(Z-=de,T.I-=de+1<<ie>>>0):Z=de+1,ie=Z,de=0;256<=ie;)de+=8,ie>>=8;return ie=7^de+Bo[ie],T.b-=ie,T.Ca=(Z<<ie)-1,pe}function me(T,H,Z){T[H+0]=Z>>24&255,T[H+1]=Z>>16&255,T[H+2]=Z>>8&255,T[H+3]=Z>>0&255}function ke(T,H){return T[H+0]<<0|T[H+1]<<8}function ne(T,H){return ke(T,H)|T[H+2]<<16}function _e(T,H){return ke(T,H)|ke(T,H+2)<<16}function De(T,H){var Z=1<<H;return t(T!=null),t(0<H),T.X=s(Z),T.X==null?0:(T.Mb=32-H,T.Xa=H,1)}function Ne(T,H){t(T!=null),t(H!=null),t(T.Xa==H.Xa),n(H.X,0,T.X,0,1<<H.Xa)}function fe(){this.X=[],this.Xa=this.Mb=0}function Ie(T,H,Z,ie){t(Z!=null),t(ie!=null);var de=Z[0],pe=ie[0];return de==0&&(de=(T*pe+H/2)/H),pe==0&&(pe=(H*de+T/2)/T),0>=de||0>=pe?0:(Z[0]=de,ie[0]=pe,1)}function Me(T,H){return T+(1<<H)-1>>>H}function Xe(T,H){return((4278255360&T)+(4278255360&H)>>>0&4278255360)+((16711935&T)+(16711935&H)>>>0&16711935)>>>0}function ye(T,H){N[H]=function(Z,ie,de,pe,ge,xe,Ee){var Be;for(Be=0;Be<ge;++Be){var Ue=N[T](xe[Ee+Be-1],de,pe+Be);xe[Ee+Be]=Xe(Z[ie+Be],Ue)}}}function Fe(){this.ud=this.hd=this.jd=0}function Re(T,H){return((4278124286&(T^H))>>>1)+(T&H)>>>0}function Ge(T){return 0<=T&&256>T?T:0>T?0:255<T?255:void 0}function Ke(T,H){return Ge(T+(T-H+.5>>1))}function Ze(T,H,Z){return Math.abs(H-Z)-Math.abs(T-Z)}function ft(T,H,Z,ie,de,pe,ge){for(ie=pe[ge-1],Z=0;Z<de;++Z)pe[ge+Z]=ie=Xe(T[H+Z],ie)}function Nt(T,H,Z,ie,de){var pe;for(pe=0;pe<Z;++pe){var ge=T[H+pe],xe=ge>>8&255,Ee=16711935&(Ee=(Ee=16711935&ge)+((xe<<16)+xe));ie[de+pe]=(4278255360&ge)+Ee>>>0}}function Tt(T,H){H.jd=T>>0&255,H.hd=T>>8&255,H.ud=T>>16&255}function St(T,H,Z,ie,de,pe){var ge;for(ge=0;ge<ie;++ge){var xe=H[Z+ge],Ee=xe>>>8,Be=xe,Ue=255&(Ue=(Ue=xe>>>16)+((T.jd<<24>>24)*(Ee<<24>>24)>>>5));Be=255&(Be=(Be=Be+((T.hd<<24>>24)*(Ee<<24>>24)>>>5))+((T.ud<<24>>24)*(Ue<<24>>24)>>>5)),de[pe+ge]=(4278255360&xe)+(Ue<<16)+Be}}function Dt(T,H,Z,ie,de){N[H]=function(pe,ge,xe,Ee,Be,Ue,it,rt,We){for(Ee=it;Ee<rt;++Ee)for(it=0;it<We;++it)Be[Ue++]=de(xe[ie(pe[ge++])])},N[T]=function(pe,ge,xe,Ee,Be,Ue,it){var rt=8>>pe.b,We=pe.Ea,Ft=pe.K[0],pt=pe.w;if(8>rt)for(pe=(1<<pe.b)-1,pt=(1<<rt)-1;ge<xe;++ge){var Qe,Ve=0;for(Qe=0;Qe<We;++Qe)Qe&pe||(Ve=ie(Ee[Be++])),Ue[it++]=de(Ft[Ve&pt]),Ve>>=rt}else N["VP8LMapColor"+Z](Ee,Be,Ft,pt,Ue,it,ge,xe,We)}}function gt(T,H,Z,ie,de){for(Z=H+Z;H<Z;){var pe=T[H++];ie[de++]=pe>>16&255,ie[de++]=pe>>8&255,ie[de++]=pe>>0&255}}function fr(T,H,Z,ie,de){for(Z=H+Z;H<Z;){var pe=T[H++];ie[de++]=pe>>16&255,ie[de++]=pe>>8&255,ie[de++]=pe>>0&255,ie[de++]=pe>>24&255}}function zt(T,H,Z,ie,de){for(Z=H+Z;H<Z;){var pe=(ge=T[H++])>>16&240|ge>>12&15,ge=ge>>0&240|ge>>28&15;ie[de++]=pe,ie[de++]=ge}}function Mr(T,H,Z,ie,de){for(Z=H+Z;H<Z;){var pe=(ge=T[H++])>>16&248|ge>>13&7,ge=ge>>5&224|ge>>3&31;ie[de++]=pe,ie[de++]=ge}}function wr(T,H,Z,ie,de){for(Z=H+Z;H<Z;){var pe=T[H++];ie[de++]=pe>>0&255,ie[de++]=pe>>8&255,ie[de++]=pe>>16&255}}function Dr(T,H,Z,ie,de,pe){if(pe==0)for(Z=H+Z;H<Z;)me(ie,((pe=T[H++])[0]>>24|pe[1]>>8&65280|pe[2]<<8&16711680|pe[3]<<24)>>>0),de+=32;else n(ie,de,T,H,Z)}function vn(T,H){N[H][0]=N[T+"0"],N[H][1]=N[T+"1"],N[H][2]=N[T+"2"],N[H][3]=N[T+"3"],N[H][4]=N[T+"4"],N[H][5]=N[T+"5"],N[H][6]=N[T+"6"],N[H][7]=N[T+"7"],N[H][8]=N[T+"8"],N[H][9]=N[T+"9"],N[H][10]=N[T+"10"],N[H][11]=N[T+"11"],N[H][12]=N[T+"12"],N[H][13]=N[T+"13"],N[H][14]=N[T+"0"],N[H][15]=N[T+"0"]}function Tr(T){return T==qm||T==dA||T==ad||T==Wh}function Ga(){this.eb=[],this.size=this.A=this.fb=0}function nn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function oa(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ga,this.f.kb=new nn,this.sd=null}function Ba(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function rn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function gr(T){return alert("todo:WebPSamplerProcessPlane"),T.T}function tt(T,H){var Z=T.T,ie=H.ba.f.RGBA,de=ie.eb,pe=ie.fb+T.ka*ie.A,ge=ri[H.ba.S],xe=T.y,Ee=T.O,Be=T.f,Ue=T.N,it=T.ea,rt=T.W,We=H.cc,Ft=H.dc,pt=H.Mc,Qe=H.Nc,Ve=T.ka,_t=T.ka+T.T,Ot=T.U,jt=Ot+1>>1;for(Ve==0?ge(xe,Ee,null,null,Be,Ue,it,rt,Be,Ue,it,rt,de,pe,null,null,Ot):(ge(H.ec,H.fc,xe,Ee,We,Ft,pt,Qe,Be,Ue,it,rt,de,pe-ie.A,de,pe,Ot),++Z);Ve+2<_t;Ve+=2)We=Be,Ft=Ue,pt=it,Qe=rt,Ue+=T.Rc,rt+=T.Rc,pe+=2*ie.A,ge(xe,(Ee+=2*T.fa)-T.fa,xe,Ee,We,Ft,pt,Qe,Be,Ue,it,rt,de,pe-ie.A,de,pe,Ot);return Ee+=T.fa,T.j+_t<T.o?(n(H.ec,H.fc,xe,Ee,Ot),n(H.cc,H.dc,Be,Ue,jt),n(H.Mc,H.Nc,it,rt,jt),Z--):1&_t||ge(xe,Ee,null,null,Be,Ue,it,rt,Be,Ue,it,rt,de,pe+ie.A,null,null,Ot),Z}function xt(T,H,Z){var ie=T.F,de=[T.J];if(ie!=null){var pe=T.U,ge=H.ba.S,xe=ge==Ef||ge==ad;H=H.ba.f.RGBA;var Ee=[0],Be=T.ka;Ee[0]=T.T,T.Kb&&(Be==0?--Ee[0]:(--Be,de[0]-=T.width),T.j+T.ka+T.T==T.o&&(Ee[0]=T.o-T.j-Be));var Ue=H.eb;Be=H.fb+Be*H.A,T=mn(ie,de[0],T.width,pe,Ee,Ue,Be+(xe?0:3),H.A),t(Z==Ee),T&&Tr(ge)&&cl(Ue,Be,xe,pe,Ee,H.A)}return 0}function et(T){var H=T.ma,Z=H.ba.S,ie=11>Z,de=Z==qh||Z==Km||Z==Ef||Z==nd||Z==12||Tr(Z);if(H.memory=null,H.Ib=null,H.Jb=null,H.Nd=null,!eA(H.Oa,T,de?11:12))return 0;if(de&&Tr(Z)&&Ut(),T.da)alert("todo:use_scaling");else{if(ie){if(H.Ib=gr,T.Kb){if(Z=T.U+1>>1,H.memory=s(T.U+2*Z),H.memory==null)return 0;H.ec=H.memory,H.fc=0,H.cc=H.ec,H.dc=H.fc+T.U,H.Mc=H.cc,H.Nc=H.dc+Z,H.Ib=tt,Ut()}}else alert("todo:EmitYUV");de&&(H.Jb=xt,ie&&qe())}if(ie&&!vE){for(T=0;256>T;++T)sB[T]=89858*(T-128)+Os>>du,Ym[T]=-22014*(T-128)+Os,cb[T]=-45773*(T-128),Ds[T]=113618*(T-128)+Os>>du;for(T=hA;T<Yg;++T)H=76283*(T-16)+Os>>du,Jm[T-hA]=Vn(H,255),ub[T-hA]=Vn(H+8>>4,15);vE=1}return 1}function vt(T){var H=T.ma,Z=T.U,ie=T.T;return t(!(1&T.ka)),0>=Z||0>=ie?0:(Z=H.Ib(T,H),H.Jb!=null&&H.Jb(T,H,Z),H.Dc+=Z,1)}function wt(T){T.ma.memory=null}function yt(T,H,Z,ie){return Y(T,8)!=47?0:(H[0]=Y(T,14)+1,Z[0]=Y(T,14)+1,ie[0]=Y(T,1),Y(T,3)!=0?0:!T.h)}function nr(T,H){if(4>T)return T+1;var Z=T-2>>1;return(2+(1&T)<<Z)+Y(H,Z)+1}function xr(T,H){return 120<H?H-120:1<=(Z=((Z=id[H-1])>>4)*T+(8-(15&Z)))?Z:1;var Z}function qr(T,H,Z){var ie=Q(Z),de=T[H+=255&ie].g-8;return 0<de&&(te(Z,Z.u+8),ie=Q(Z),H+=T[H].value,H+=ie&(1<<de)-1),te(Z,Z.u+T[H].g),T[H].value}function Zr(T,H,Z){return Z.g+=T.g,Z.value+=T.value<<H>>>0,t(8>=Z.g),T.g}function Kr(T,H,Z){var ie=T.xc;return t((H=ie==0?0:T.vc[T.md*(Z>>ie)+(H>>ie)])<T.Wb),T.Ya[H]}function he(T,H,Z,ie){var de=T.ab,pe=T.c*H,ge=T.C;H=ge+H;var xe=Z,Ee=ie;for(ie=T.Ta,Z=T.Ua;0<de--;){var Be=T.gc[de],Ue=ge,it=H,rt=xe,We=Ee,Ft=(Ee=ie,xe=Z,Be.Ea);switch(t(Ue<it),t(it<=Be.nc),Be.hc){case 2:zg(rt,We,(it-Ue)*Ft,Ee,xe);break;case 0:var pt=Ue,Qe=it,Ve=Ee,_t=xe,Ot=(er=Be).Ea;pt==0&&(ob(rt,We,null,null,1,Ve,_t),ft(rt,We+1,0,0,Ot-1,Ve,_t+1),We+=Ot,_t+=Ot,++pt);for(var jt=1<<er.b,rr=jt-1,Yt=Me(Ot,er.b),br=er.K,er=er.w+(pt>>er.b)*Yt;pt<Qe;){var Dn=br,zn=er,fn=1;for($m(rt,We,Ve,_t-Ot,1,Ve,_t);fn<Ot;){var ln=(fn&~rr)+jt;ln>Ot&&(ln=Ot),(0,ed[Dn[zn++]>>8&15])(rt,We+ +fn,Ve,_t+fn-Ot,ln-fn,Ve,_t+fn),fn=ln}We+=Ot,_t+=Ot,++pt&rr||(er+=Yt)}it!=Be.nc&&n(Ee,xe-Ft,Ee,xe+(it-Ue-1)*Ft,Ft);break;case 1:for(Ft=rt,Qe=We,Ot=(rt=Be.Ea)-(_t=rt&~(Ve=(We=1<<Be.b)-1)),pt=Me(rt,Be.b),jt=Be.K,Be=Be.w+(Ue>>Be.b)*pt;Ue<it;){for(rr=jt,Yt=Be,br=new Fe,er=Qe+_t,Dn=Qe+rt;Qe<er;)Tt(rr[Yt++],br),nA(br,Ft,Qe,We,Ee,xe),Qe+=We,xe+=We;Qe<Dn&&(Tt(rr[Yt++],br),nA(br,Ft,Qe,Ot,Ee,xe),Qe+=Ot,xe+=Ot),++Ue&Ve||(Be+=pt)}break;case 3:if(rt==Ee&&We==xe&&0<Be.b){for(Qe=Ee,rt=Ft=xe+(it-Ue)*Ft-(_t=(it-Ue)*Me(Be.Ea,Be.b)),We=Ee,Ve=xe,pt=[],_t=(Ot=_t)-1;0<=_t;--_t)pt[_t]=We[Ve+_t];for(_t=Ot-1;0<=_t;--_t)Qe[rt+_t]=pt[_t];Ol(Be,Ue,it,Ee,Ft,Ee,xe)}else Ol(Be,Ue,it,rt,We,Ee,xe)}xe=ie,Ee=Z}Ee!=Z&&n(ie,Z,xe,Ee,pe)}function je(T,H){var Z=T.V,ie=T.Ba+T.c*T.C,de=H-T.C;if(t(H<=T.l.o),t(16>=de),0<de){var pe=T.l,ge=T.Ta,xe=T.Ua,Ee=pe.width;if(he(T,de,Z,ie),de=xe=[xe],t((Z=T.C)<(ie=H)),t(pe.v<pe.va),ie>pe.o&&(ie=pe.o),Z<pe.j){var Be=pe.j-Z;Z=pe.j,de[0]+=Be*Ee}if(Z>=ie?Z=0:(de[0]+=4*pe.v,pe.ka=Z-pe.j,pe.U=pe.va-pe.v,pe.T=ie-Z,Z=1),Z){if(xe=xe[0],11>(Z=T.ca).S){var Ue=Z.f.RGBA,it=(ie=Z.S,de=pe.U,pe=pe.T,Be=Ue.eb,Ue.A),rt=pe;for(Ue=Ue.fb+T.Ma*Ue.A;0<rt--;){var We=ge,Ft=xe,pt=de,Qe=Be,Ve=Ue;switch(ie){case Pi:no(We,Ft,pt,Qe,Ve);break;case qh:bi(We,Ft,pt,Qe,Ve);break;case qm:bi(We,Ft,pt,Qe,Ve),cl(Qe,Ve,0,pt,1,0);break;case ou:fc(We,Ft,pt,Qe,Ve);break;case Km:Dr(We,Ft,pt,Qe,Ve,1);break;case dA:Dr(We,Ft,pt,Qe,Ve,1),cl(Qe,Ve,0,pt,1,0);break;case Ef:Dr(We,Ft,pt,Qe,Ve,0);break;case ad:Dr(We,Ft,pt,Qe,Ve,0),cl(Qe,Ve,1,pt,1,0);break;case nd:aA(We,Ft,pt,Qe,Ve);break;case Wh:aA(We,Ft,pt,Qe,Ve),hn(Qe,Ve,pt,1,0);break;case Gg:jo(We,Ft,pt,Qe,Ve);break;default:t(0)}xe+=Ee,Ue+=it}T.Ma+=pe}else alert("todo:EmitRescaledRowsYUVA");t(T.Ma<=Z.height)}}T.C=H,t(T.C<=T.i)}function Ce(T){var H;if(0<T.ua)return 0;for(H=0;H<T.Wb;++H){var Z=T.Ya[H].G,ie=T.Ya[H].H;if(0<Z[1][ie[1]+0].g||0<Z[2][ie[2]+0].g||0<Z[3][ie[3]+0].g)return 0}return 1}function we(T,H,Z,ie,de,pe){if(T.Z!=0){var ge=T.qd,xe=T.rd;for(t(cu[T.Z]!=null);H<Z;++H)cu[T.Z](ge,xe,ie,de,ie,de,pe),ge=ie,xe=de,de+=pe;T.qd=ge,T.rd=xe}}function Se(T,H){var Z=T.l.ma,ie=Z.Z==0||Z.Z==1?T.l.j:T.C;if(ie=T.C<ie?ie:T.C,t(H<=T.l.o),H>ie){var de=T.l.width,pe=Z.ca,ge=Z.tb+de*ie,xe=T.V,Ee=T.Ba+T.c*ie,Be=T.gc;t(T.ab==1),t(Be[0].hc==3),rA(Be[0],ie,H,xe,Ee,pe,ge),we(Z,ie,H,pe,ge,de)}T.C=T.Ma=H}function Te(T,H,Z,ie,de,pe,ge){var xe=T.$/ie,Ee=T.$%ie,Be=T.m,Ue=T.s,it=Z+T.$,rt=it;de=Z+ie*de;var We=Z+ie*pe,Ft=280+Ue.ua,pt=T.Pb?xe:16777216,Qe=0<Ue.ua?Ue.Wa:null,Ve=Ue.wc,_t=it<We?Kr(Ue,Ee,xe):null;t(T.C<pe),t(We<=de);var Ot=!1;e:for(;;){for(;Ot||it<We;){var jt=0;if(xe>=pt){var rr=it-Z;t((pt=T).Pb),pt.wd=pt.m,pt.xd=rr,0<pt.s.ua&&Ne(pt.s.Wa,pt.s.vb),pt=xe+pE}if(Ee&Ve||(_t=Kr(Ue,Ee,xe)),t(_t!=null),_t.Qb&&(H[it]=_t.qb,Ot=!0),!Ot)if(ae(Be),_t.jc){jt=Be,rr=H;var Yt=it,br=_t.pd[Q(jt)&Is-1];t(_t.jc),256>br.g?(te(jt,jt.u+br.g),rr[Yt]=br.value,jt=0):(te(jt,jt.u+br.g-256),t(256<=br.value),jt=br.value),jt==0&&(Ot=!0)}else jt=qr(_t.G[0],_t.H[0],Be);if(Be.h)break;if(Ot||256>jt){if(!Ot)if(_t.nd)H[it]=(_t.qb|jt<<8)>>>0;else{if(ae(Be),Ot=qr(_t.G[1],_t.H[1],Be),ae(Be),rr=qr(_t.G[2],_t.H[2],Be),Yt=qr(_t.G[3],_t.H[3],Be),Be.h)break;H[it]=(Yt<<24|Ot<<16|jt<<8|rr)>>>0}if(Ot=!1,++it,++Ee>=ie&&(Ee=0,++xe,ge!=null&&xe<=pe&&!(xe%16)&&ge(T,xe),Qe!=null))for(;rt<it;)jt=H[rt++],Qe.X[(506832829*jt&4294967295)>>>Qe.Mb]=jt}else if(280>jt){if(jt=nr(jt-256,Be),rr=qr(_t.G[4],_t.H[4],Be),ae(Be),rr=xr(ie,rr=nr(rr,Be)),Be.h)break;if(it-Z<rr||de-it<jt)break e;for(Yt=0;Yt<jt;++Yt)H[it+Yt]=H[it+Yt-rr];for(it+=jt,Ee+=jt;Ee>=ie;)Ee-=ie,++xe,ge!=null&&xe<=pe&&!(xe%16)&&ge(T,xe);if(t(it<=de),Ee&Ve&&(_t=Kr(Ue,Ee,xe)),Qe!=null)for(;rt<it;)jt=H[rt++],Qe.X[(506832829*jt&4294967295)>>>Qe.Mb]=jt}else{if(!(jt<Ft))break e;for(Ot=jt-280,t(Qe!=null);rt<it;)jt=H[rt++],Qe.X[(506832829*jt&4294967295)>>>Qe.Mb]=jt;jt=it,t(!(Ot>>>(rr=Qe).Xa)),H[jt]=rr.X[Ot],Ot=!0}Ot||t(Be.h==X(Be))}if(T.Pb&&Be.h&&it<de)t(T.m.h),T.a=5,T.m=T.wd,T.$=T.xd,0<T.s.ua&&Ne(T.s.vb,T.s.Wa);else{if(Be.h)break e;ge!=null&&ge(T,xe>pe?pe:xe),T.a=0,T.$=it-Z}return 1}return T.a=3,0}function Je(T){t(T!=null),T.vc=null,T.yc=null,T.Ya=null;var H=T.Wa;H!=null&&(H.X=null),T.vb=null,t(T!=null)}function dt(){var T=new Vh;return T==null?null:(T.a=0,T.xb=Xh,vn("Predictor","VP8LPredictors"),vn("Predictor","VP8LPredictors_C"),vn("PredictorAdd","VP8LPredictorsAdd"),vn("PredictorAdd","VP8LPredictorsAdd_C"),zg=Nt,nA=St,no=gt,bi=fr,aA=zt,jo=Mr,fc=wr,N.VP8LMapColor32b=ei,N.VP8LMapColor8b=Gm,T)}function $e(T,H,Z,ie,de){var pe=1,ge=[T],xe=[H],Ee=ie.m,Be=ie.s,Ue=null,it=0;e:for(;;){if(Z)for(;pe&&Y(Ee,1);){var rt=ge,We=xe,Ft=ie,pt=1,Qe=Ft.m,Ve=Ft.gc[Ft.ab],_t=Y(Qe,2);if(Ft.Oc&1<<_t)pe=0;else{switch(Ft.Oc|=1<<_t,Ve.hc=_t,Ve.Ea=rt[0],Ve.nc=We[0],Ve.K=[null],++Ft.ab,t(4>=Ft.ab),_t){case 0:case 1:Ve.b=Y(Qe,3)+2,pt=$e(Me(Ve.Ea,Ve.b),Me(Ve.nc,Ve.b),0,Ft,Ve.K),Ve.K=Ve.K[0];break;case 3:var Ot,jt=Y(Qe,8)+1,rr=16<jt?0:4<jt?1:2<jt?2:3;if(rt[0]=Me(Ve.Ea,rr),Ve.b=rr,Ot=pt=$e(jt,1,0,Ft,Ve.K)){var Yt,br=jt,er=Ve,Dn=1<<(8>>er.b),zn=s(Dn);if(zn==null)Ot=0;else{var fn=er.K[0],ln=er.w;for(zn[0]=er.K[0][0],Yt=1;Yt<1*br;++Yt)zn[Yt]=Xe(fn[ln+Yt],zn[Yt-1]);for(;Yt<4*Dn;++Yt)zn[Yt]=0;er.K[0]=null,er.K[0]=zn,Ot=1}}pt=Ot;break;case 2:break;default:t(0)}pe=pt}}if(ge=ge[0],xe=xe[0],pe&&Y(Ee,1)&&!(pe=1<=(it=Y(Ee,4))&&11>=it)){ie.a=3;break e}var ta;if(ta=pe)t:{var $n,Xr,ca,Br=ie,Ur=ge,On=xe,Pn=it,ni=Z,Ps=Br.m,ns=Br.s,as=[null],vs=1,Ll=0,Gn=_f[Pn];r:for(;;){if(ni&&Y(Ps,1)){var bs=Y(Ps,3)+2,pc=Me(Ur,bs),mA=Me(On,bs),kf=pc*mA;if(!$e(pc,mA,0,Br,as))break r;for(as=as[0],ns.xc=bs,$n=0;$n<kf;++$n){var pA=as[$n]>>8&65535;as[$n]=pA,pA>=vs&&(vs=pA+1)}}if(Ps.h)break r;for(Xr=0;5>Xr;++Xr){var ja=ul[Xr];!Xr&&0<Pn&&(ja+=1<<Pn),Ll<ja&&(Ll=ja)}var Zm=i(vs*Gn,O),Jg=vs,so=i(Jg,M);if(so==null)var Ra=null;else t(65536>=Jg),Ra=so;var Bf=s(Ll);if(Ra==null||Bf==null||Zm==null){Br.a=1;break r}var gA=Zm;for($n=ca=0;$n<vs;++$n){var Io=Ra[$n],xA=Io.G,Fo=Io.H,ep=0,Jh=1,Zg=0;for(Xr=0;5>Xr;++Xr){ja=ul[Xr],xA[Xr]=gA,Fo[Xr]=ca,!Xr&&0<Pn&&(ja+=1<<Pn);a:{var tp,ex=ja,rp=Br,Zh=Bf,wE=gA,EE=ca,np=0,ud=rp.m,oB=Y(ud,1);if(a(Zh,0,0,ex),oB){var CE=Y(ud,1)+1,_E=Y(ud,1),db=Y(ud,_E==0?1:8);Zh[db]=1,CE==2&&(Zh[db=Y(ud,8)]=1);var e0=1}else{var Ab=s(19),fb=Y(ud,4)+4;if(19<fb){rp.a=3;var ap=0;break a}for(tp=0;tp<fb;++tp)Ab[sd[tp]]=Y(ud,3);var tx=void 0,t0=void 0,NE=rp,SE=Ab,dd=ex,sp=Zh,rx=0,gc=NE.m,r0=8,hb=i(128,O);n:for(;D(hb,0,7,SE,19);){if(Y(gc,1)){var kE=2+2*Y(gc,3);if((tx=2+Y(gc,kE))>dd)break n}else tx=dd;for(t0=0;t0<dd&&tx--;){ae(gc);var mb=hb[0+(127&Q(gc))];te(gc,gc.u+mb.g);var jf=mb.value;if(16>jf)sp[t0++]=jf,jf!=0&&(r0=jf);else{var BE=jf==16,pb=jf-16,gb=Rl[pb],xb=Y(gc,Kg[pb])+gb;if(t0+xb>dd)break n;for(var jE=BE?r0:0;0<xb--;)sp[t0++]=jE}}rx=1;break n}rx||(NE.a=3),e0=rx}(e0=e0&&!ud.h)&&(np=D(wE,EE,8,Zh,ex)),e0&&np!=0?ap=np:(rp.a=3,ap=0)}if(ap==0)break r;if(Jh&&Cf[Xr]==1&&(Jh=gA[ca].g==0),ep+=gA[ca].g,ca+=ap,3>=Xr){var Tf,nx=Bf[0];for(Tf=1;Tf<ja;++Tf)Bf[Tf]>nx&&(nx=Bf[Tf]);Zg+=nx}}if(Io.nd=Jh,Io.Qb=0,Jh&&(Io.qb=(xA[3][Fo[3]+0].value<<24|xA[1][Fo[1]+0].value<<16|xA[2][Fo[2]+0].value)>>>0,ep==0&&256>xA[0][Fo[0]+0].value&&(Io.Qb=1,Io.qb+=xA[0][Fo[0]+0].value<<8)),Io.jc=!Io.Qb&&6>Zg,Io.jc){var ip,Ad=Io;for(ip=0;ip<Is;++ip){var Au=ip,fd=Ad.pd[Au],op=Ad.G[0][Ad.H[0]+Au];256<=op.value?(fd.g=op.g+256,fd.value=op.value):(fd.g=0,fd.value=0,Au>>=Zr(op,8,fd),Au>>=Zr(Ad.G[1][Ad.H[1]+Au],16,fd),Au>>=Zr(Ad.G[2][Ad.H[2]+Au],0,fd),Zr(Ad.G[3][Ad.H[3]+Au],24,fd))}}}ns.vc=as,ns.Wb=vs,ns.Ya=Ra,ns.yc=Zm,ta=1;break t}ta=0}if(!(pe=ta)){ie.a=3;break e}if(0<it){if(Be.ua=1<<it,!De(Be.Wa,it)){ie.a=1,pe=0;break e}}else Be.ua=0;var lp=ie,vb=ge,TE=xe,bb=lp.s,yb=bb.xc;if(lp.c=vb,lp.i=TE,bb.md=Me(vb,yb),bb.wc=yb==0?-1:(1<<yb)-1,Z){ie.xb=xE;break e}if((Ue=s(ge*xe))==null){ie.a=1,pe=0;break e}pe=(pe=Te(ie,Ue,0,ge,xe,xe,null))&&!Ee.h;break e}return pe?(de!=null?de[0]=Ue:(t(Ue==null),t(Z)),ie.$=0,Z||Je(Be)):Je(Be),pe}function nt(T,H){var Z=T.c*T.i,ie=Z+H+16*H;return t(T.c<=H),T.V=s(ie),T.V==null?(T.Ta=null,T.Ua=0,T.a=1,0):(T.Ta=T.V,T.Ua=T.Ba+Z+H,1)}function ot(T,H){var Z=T.C,ie=H-Z,de=T.V,pe=T.Ba+T.c*Z;for(t(H<=T.l.o);0<ie;){var ge=16<ie?16:ie,xe=T.l.ma,Ee=T.l.width,Be=Ee*ge,Ue=xe.ca,it=xe.tb+Ee*Z,rt=T.Ta,We=T.Ua;he(T,ge,de,pe),va(rt,We,Ue,it,Be),we(xe,Z,Z+ge,Ue,it,Ee),ie-=ge,de+=ge*T.c,Z+=ge}t(Z==H),T.C=T.Ma=H}function Pt(){this.ub=this.yd=this.td=this.Rb=0}function Vt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Jt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ht(){this.Yb=function(){var T=[];return function H(Z,ie,de){for(var pe=de[ie],ge=0;ge<pe&&(Z.push(de.length>ie+1?[]:0),!(de.length<ie+1));ge++)H(Z[ge],ie+1,de)}(T,0,[3,11]),T}()}function Gt(){this.jb=s(3),this.Wc=o([4,8],Ht),this.Xc=o([4,17],Ht)}function kr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function sn(){this.ld=this.La=this.dd=this.tc=0}function on(){this.Na=this.la=0}function An(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function hs(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Eo(){this.uc=this.M=this.Nb=0,this.wa=Array(new sn),this.Y=0,this.ya=Array(new hs),this.aa=0,this.l=new Ts}function ms(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Js(){this.cb=this.a=0,this.sc="",this.m=new ee,this.Od=new Pt,this.Kc=new Vt,this.ed=new kr,this.Qa=new Jt,this.Ic=this.$c=this.Aa=0,this.D=new Eo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,ee),this.ia=0,this.pb=i(4,An),this.Pa=new Gt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ms),this.Hd=0,this.rb=Array(new on),this.sb=0,this.wa=Array(new sn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new hs),this.L=this.aa=0,this.gd=o([4,2],sn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ts(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function pi(){var T=new Js;return T!=null&&(T.a=0,T.sc="OK",T.cb=0,T.Xb=0,Fs||(Fs=Mh)),T}function xa(T,H,Z){return T.a==0&&(T.a=H,T.sc=Z,T.cb=0),0}function Zs(T,H,Z){return 3<=Z&&T[H+0]==157&&T[H+1]==1&&T[H+2]==42}function Kd(T,H){if(T==null)return 0;if(T.a=0,T.sc="OK",H==null)return xa(T,2,"null VP8Io passed to VP8GetHeaders()");var Z=H.data,ie=H.w,de=H.ha;if(4>de)return xa(T,7,"Truncated header.");var pe=Z[ie+0]|Z[ie+1]<<8|Z[ie+2]<<16,ge=T.Od;if(ge.Rb=!(1&pe),ge.td=pe>>1&7,ge.yd=pe>>4&1,ge.ub=pe>>5,3<ge.td)return xa(T,3,"Incorrect keyframe parameters.");if(!ge.yd)return xa(T,4,"Frame not displayable.");ie+=3,de-=3;var xe=T.Kc;if(ge.Rb){if(7>de)return xa(T,7,"cannot parse picture header");if(!Zs(Z,ie,de))return xa(T,3,"Bad code word");xe.c=16383&(Z[ie+4]<<8|Z[ie+3]),xe.Td=Z[ie+4]>>6,xe.i=16383&(Z[ie+6]<<8|Z[ie+5]),xe.Ud=Z[ie+6]>>6,ie+=7,de-=7,T.za=xe.c+15>>4,T.Ub=xe.i+15>>4,H.width=xe.c,H.height=xe.i,H.Da=0,H.j=0,H.v=0,H.va=H.width,H.o=H.height,H.da=0,H.ib=H.width,H.hb=H.height,H.U=H.width,H.T=H.height,a((pe=T.Pa).jb,0,255,pe.jb.length),t((pe=T.Qa)!=null),pe.Cb=0,pe.Bb=0,pe.Fb=1,a(pe.Zb,0,0,pe.Zb.length),a(pe.Lb,0,0,pe.Lb)}if(ge.ub>de)return xa(T,7,"bad partition length");J(pe=T.m,Z,ie,ge.ub),ie+=ge.ub,de-=ge.ub,ge.Rb&&(xe.Ld=oe(pe),xe.Kd=oe(pe)),xe=T.Qa;var Ee,Be=T.Pa;if(t(pe!=null),t(xe!=null),xe.Cb=oe(pe),xe.Cb){if(xe.Bb=oe(pe),oe(pe)){for(xe.Fb=oe(pe),Ee=0;4>Ee;++Ee)xe.Zb[Ee]=oe(pe)?K(pe,7):0;for(Ee=0;4>Ee;++Ee)xe.Lb[Ee]=oe(pe)?K(pe,6):0}if(xe.Bb)for(Ee=0;3>Ee;++Ee)Be.jb[Ee]=oe(pe)?V(pe,8):255}else xe.Bb=0;if(pe.Ka)return xa(T,3,"cannot parse segment header");if((xe=T.ed).zd=oe(pe),xe.Tb=V(pe,6),xe.wb=V(pe,3),xe.Pc=oe(pe),xe.Pc&&oe(pe)){for(Be=0;4>Be;++Be)oe(pe)&&(xe.vd[Be]=K(pe,6));for(Be=0;4>Be;++Be)oe(pe)&&(xe.od[Be]=K(pe,6))}if(T.L=xe.Tb==0?0:xe.zd?1:2,pe.Ka)return xa(T,3,"cannot parse filter header");var Ue=de;if(de=Ee=ie,ie=Ee+Ue,xe=Ue,T.Xb=(1<<V(T.m,2))-1,Ue<3*(Be=T.Xb))Z=7;else{for(Ee+=3*Be,xe-=3*Be,Ue=0;Ue<Be;++Ue){var it=Z[de+0]|Z[de+1]<<8|Z[de+2]<<16;it>xe&&(it=xe),J(T.Jc[+Ue],Z,Ee,it),Ee+=it,xe-=it,de+=3}J(T.Jc[+Be],Z,Ee,xe),Z=Ee<ie?0:5}if(Z!=0)return xa(T,Z,"cannot parse partitions");for(Z=V(Ee=T.m,7),de=oe(Ee)?K(Ee,4):0,ie=oe(Ee)?K(Ee,4):0,xe=oe(Ee)?K(Ee,4):0,Be=oe(Ee)?K(Ee,4):0,Ee=oe(Ee)?K(Ee,4):0,Ue=T.Qa,it=0;4>it;++it){if(Ue.Cb){var rt=Ue.Zb[it];Ue.Fb||(rt+=Z)}else{if(0<it){T.pb[it]=T.pb[0];continue}rt=Z}var We=T.pb[it];We.Sc[0]=Wm[Vn(rt+de,127)],We.Sc[1]=Xm[Vn(rt+0,127)],We.Eb[0]=2*Wm[Vn(rt+ie,127)],We.Eb[1]=101581*Xm[Vn(rt+xe,127)]>>16,8>We.Eb[1]&&(We.Eb[1]=8),We.Qc[0]=Wm[Vn(rt+Be,117)],We.Qc[1]=Xm[Vn(rt+Ee,127)],We.lc=rt+Ee}if(!ge.Rb)return xa(T,4,"Not a key frame.");for(oe(pe),ge=T.Pa,Z=0;4>Z;++Z){for(de=0;8>de;++de)for(ie=0;3>ie;++ie)for(xe=0;11>xe;++xe)Be=ce(pe,Nf[Z][de][ie][xe])?V(pe,8):lu[Z][de][ie][xe],ge.Wc[Z][de].Yb[ie][xe]=Be;for(de=0;17>de;++de)ge.Xc[Z][de]=ge.Wc[Z][gE[de]]}return T.kc=oe(pe),T.kc&&(T.Bd=V(pe,8)),T.cb=1}function Mh(T,H,Z,ie,de,pe,ge){var xe=H[de].Yb[Z];for(Z=0;16>de;++de){if(!ce(T,xe[Z+0]))return de;for(;!ce(T,xe[Z+1]);)if(xe=H[++de].Yb[0],Z=0,de==16)return 16;var Ee=H[de+1].Yb;if(ce(T,xe[Z+2])){var Be=T,Ue=0;if(ce(Be,(rt=xe)[(it=Z)+3]))if(ce(Be,rt[it+6])){for(xe=0,it=2*(Ue=ce(Be,rt[it+8]))+(rt=ce(Be,rt[it+9+Ue])),Ue=0,rt=Wa[it];rt[xe];++xe)Ue+=Ue+ce(Be,rt[xe]);Ue+=3+(8<<it)}else ce(Be,rt[it+7])?(Ue=7+2*ce(Be,165),Ue+=ce(Be,145)):Ue=5+ce(Be,159);else Ue=ce(Be,rt[it+4])?3+ce(Be,rt[it+5]):2;xe=Ee[2]}else Ue=1,xe=Ee[1];Ee=ge+Mn[de],0>(Be=T).b&&se(Be);var it,rt=Be.b,We=(it=Be.Ca>>1)-(Be.I>>rt)>>31;--Be.b,Be.Ca+=We,Be.Ca|=1,Be.I-=(it+1&We)<<rt,pe[Ee]=((Ue^We)-We)*ie[(0<de)+0]}return 16}function Kc(T){var H=T.rb[T.sb-1];H.la=0,H.Na=0,a(T.zc,0,0,T.zc.length),T.ja=0}function uf(T,H){if(T==null)return 0;if(H==null)return xa(T,2,"NULL VP8Io parameter in VP8Decode().");if(!T.cb&&!Kd(T,H))return 0;if(t(T.cb),H.ac==null||H.ac(H)){H.ob&&(T.L=0);var Z=cd[T.L];if(T.L==2?(T.yb=0,T.zb=0):(T.yb=H.v-Z>>4,T.zb=H.j-Z>>4,0>T.yb&&(T.yb=0),0>T.zb&&(T.zb=0)),T.Va=H.o+15+Z>>4,T.Hb=H.va+15+Z>>4,T.Hb>T.za&&(T.Hb=T.za),T.Va>T.Ub&&(T.Va=T.Ub),0<T.L){var ie=T.ed;for(Z=0;4>Z;++Z){var de;if(T.Qa.Cb){var pe=T.Qa.Lb[Z];T.Qa.Fb||(pe+=ie.Tb)}else pe=ie.Tb;for(de=0;1>=de;++de){var ge=T.gd[Z][de],xe=pe;if(ie.Pc&&(xe+=ie.vd[0],de&&(xe+=ie.od[0])),0<(xe=0>xe?0:63<xe?63:xe)){var Ee=xe;0<ie.wb&&(Ee=4<ie.wb?Ee>>2:Ee>>1)>9-ie.wb&&(Ee=9-ie.wb),1>Ee&&(Ee=1),ge.dd=Ee,ge.tc=2*xe+Ee,ge.ld=40<=xe?2:15<=xe?1:0}else ge.tc=0;ge.La=de}}}Z=0}else xa(T,6,"Frame setup failed"),Z=T.a;if(Z=Z==0){if(Z){T.$c=0,0<T.Aa||(T.Ic=bE);e:{Z=T.Ic,ie=4*(Ee=T.za);var Be=32*Ee,Ue=Ee+1,it=0<T.L?Ee*(0<T.Aa?2:1):0,rt=(T.Aa==2?2:1)*Ee;if((ge=ie+832+(de=3*(16*Z+cd[T.L])/2*Be)+(pe=T.Fa!=null&&0<T.Fa.length?T.Kc.c*T.Kc.i:0))!=ge)Z=0;else{if(ge>T.Vb){if(T.Vb=0,T.Ec=s(ge),T.Fc=0,T.Ec==null){Z=xa(T,1,"no memory during frame initialization.");break e}T.Vb=ge}ge=T.Ec,xe=T.Fc,T.Ac=ge,T.Bc=xe,xe+=ie,T.Gd=i(Be,ms),T.Hd=0,T.rb=i(Ue+1,on),T.sb=1,T.wa=it?i(it,sn):null,T.Y=0,T.D.Nb=0,T.D.wa=T.wa,T.D.Y=T.Y,0<T.Aa&&(T.D.Y+=Ee),t(!0),T.oc=ge,T.pc=xe,xe+=832,T.ya=i(rt,hs),T.aa=0,T.D.ya=T.ya,T.D.aa=T.aa,T.Aa==2&&(T.D.aa+=Ee),T.R=16*Ee,T.B=8*Ee,Ee=(Be=cd[T.L])*T.R,Be=Be/2*T.B,T.sa=ge,T.ta=xe+Ee,T.qa=T.sa,T.ra=T.ta+16*Z*T.R+Be,T.Ha=T.qa,T.Ia=T.ra+8*Z*T.B+Be,T.$c=0,xe+=de,T.mb=pe?ge:null,T.nb=pe?xe:null,t(xe+pe<=T.Fc+T.Vb),Kc(T),a(T.Ac,T.Bc,0,ie),Z=1}}if(Z){if(H.ka=0,H.y=T.sa,H.O=T.ta,H.f=T.qa,H.N=T.ra,H.ea=T.Ha,H.Vd=T.Ia,H.fa=T.R,H.Rc=T.B,H.F=null,H.J=0,!rd){for(Z=-255;255>=Z;++Z)rs[255+Z]=0>Z?-Z:Z;for(Z=-1020;1020>=Z;++Z)Dl[1020+Z]=-128>Z?-128:127<Z?127:Z;for(Z=-112;112>=Z;++Z)cA[112+Z]=-16>Z?-16:15<Z?15:Z;for(Z=-255;510>=Z;++Z)uA[255+Z]=0>Z?0:255<Z?255:Z;rd=1}su=Co,hc=Wc,mc=Nl,xs=Hn,To=Xc,Ka=qc,vf=eu,iu=dc,Gh=Yd,sA=mf,iA=Xd,oA=Wu,bf=Xu,Kh=tu,lA=ll,td=Oi,yf=gs,qa=Hh,ao[0]=Ii,ao[1]=Uh,ao[2]=Bl,ao[3]=Qh,ao[4]=_o,ao[5]=jl,ao[6]=ro,ao[7]=No,ao[8]=uc,ao[9]=Yc,od[0]=Sl,od[1]=Af,od[2]=oc,od[3]=Wd,od[4]=la,od[5]=cc,od[6]=kl,dl[0]=Tl,dl[1]=df,dl[2]=ff,dl[3]=So,dl[4]=bn,dl[5]=ps,dl[6]=Jc,Z=1}else Z=0}Z&&(Z=function(We,Ft){for(We.M=0;We.M<We.Va;++We.M){var pt,Qe=We.Jc[We.M&We.Xb],Ve=We.m,_t=We;for(pt=0;pt<_t.za;++pt){var Ot=Ve,jt=_t,rr=jt.Ac,Yt=jt.Bc+4*pt,br=jt.zc,er=jt.ya[jt.aa+pt];if(jt.Qa.Bb?er.$b=ce(Ot,jt.Pa.jb[0])?2+ce(Ot,jt.Pa.jb[2]):ce(Ot,jt.Pa.jb[1]):er.$b=0,jt.kc&&(er.Ad=ce(Ot,jt.Bd)),er.Za=!ce(Ot,145)+0,er.Za){var Dn=er.Ob,zn=0;for(jt=0;4>jt;++jt){var fn,ln=br[0+jt];for(fn=0;4>fn;++fn){ln=lb[rr[Yt+fn]][ln];for(var ta=AA[ce(Ot,ln[0])];0<ta;)ta=AA[2*ta+ce(Ot,ln[ta])];ln=-ta,rr[Yt+fn]=ln}n(Dn,zn,rr,Yt,4),zn+=4,br[0+jt]=ln}}else ln=ce(Ot,156)?ce(Ot,128)?1:3:ce(Ot,163)?2:0,er.Ob[0]=ln,a(rr,Yt,ln,4),a(br,0,ln,4);er.Dd=ce(Ot,142)?ce(Ot,114)?ce(Ot,183)?1:3:2:0}if(_t.m.Ka)return xa(We,7,"Premature end-of-partition0 encountered.");for(;We.ja<We.za;++We.ja){if(_t=Qe,Ot=(Ve=We).rb[Ve.sb-1],rr=Ve.rb[Ve.sb+Ve.ja],pt=Ve.ya[Ve.aa+Ve.ja],Yt=Ve.kc?pt.Ad:0)Ot.la=rr.la=0,pt.Za||(Ot.Na=rr.Na=0),pt.Hc=0,pt.Gc=0,pt.ia=0;else{var $n,Xr;if(Ot=rr,rr=_t,Yt=Ve.Pa.Xc,br=Ve.ya[Ve.aa+Ve.ja],er=Ve.pb[br.$b],jt=br.ad,Dn=0,zn=Ve.rb[Ve.sb-1],ln=fn=0,a(jt,Dn,0,384),br.Za)var ca=0,Br=Yt[3];else{ta=s(16);var Ur=Ot.Na+zn.Na;if(Ur=Fs(rr,Yt[1],Ur,er.Eb,0,ta,0),Ot.Na=zn.Na=(0<Ur)+0,1<Ur)su(ta,0,jt,Dn);else{var On=ta[0]+3>>3;for(ta=0;256>ta;ta+=16)jt[Dn+ta]=On}ca=1,Br=Yt[0]}var Pn=15&Ot.la,ni=15&zn.la;for(ta=0;4>ta;++ta){var Ps=1&ni;for(On=Xr=0;4>On;++On)Pn=Pn>>1|(Ps=(Ur=Fs(rr,Br,Ur=Ps+(1&Pn),er.Sc,ca,jt,Dn))>ca)<<7,Xr=Xr<<2|(3<Ur?3:1<Ur?2:jt[Dn+0]!=0),Dn+=16;Pn>>=4,ni=ni>>1|Ps<<7,fn=(fn<<8|Xr)>>>0}for(Br=Pn,ca=ni>>4,$n=0;4>$n;$n+=2){for(Xr=0,Pn=Ot.la>>4+$n,ni=zn.la>>4+$n,ta=0;2>ta;++ta){for(Ps=1&ni,On=0;2>On;++On)Ur=Ps+(1&Pn),Pn=Pn>>1|(Ps=0<(Ur=Fs(rr,Yt[2],Ur,er.Qc,0,jt,Dn)))<<3,Xr=Xr<<2|(3<Ur?3:1<Ur?2:jt[Dn+0]!=0),Dn+=16;Pn>>=2,ni=ni>>1|Ps<<5}ln|=Xr<<4*$n,Br|=Pn<<4<<$n,ca|=(240&ni)<<$n}Ot.la=Br,zn.la=ca,br.Hc=fn,br.Gc=ln,br.ia=43690&ln?0:er.ia,Yt=!(fn|ln)}if(0<Ve.L&&(Ve.wa[Ve.Y+Ve.ja]=Ve.gd[pt.$b][pt.Za],Ve.wa[Ve.Y+Ve.ja].La|=!Yt),_t.Ka)return xa(We,7,"Premature end-of-file encountered.")}if(Kc(We),Ve=Ft,_t=1,pt=(Qe=We).D,Ot=0<Qe.L&&Qe.M>=Qe.zb&&Qe.M<=Qe.Va,Qe.Aa==0)e:{if(pt.M=Qe.M,pt.uc=Ot,ko(Qe,pt),_t=1,pt=(Xr=Qe.D).Nb,Ot=(ln=cd[Qe.L])*Qe.R,rr=ln/2*Qe.B,ta=16*pt*Qe.R,On=8*pt*Qe.B,Yt=Qe.sa,br=Qe.ta-Ot+ta,er=Qe.qa,jt=Qe.ra-rr+On,Dn=Qe.Ha,zn=Qe.Ia-rr+On,ni=(Pn=Xr.M)==0,fn=Pn>=Qe.Va-1,Qe.Aa==2&&ko(Qe,Xr),Xr.uc)for(Ps=(Ur=Qe).D.M,t(Ur.D.uc),Xr=Ur.yb;Xr<Ur.Hb;++Xr){ca=Xr,Br=Ps;var ns=(as=(ja=Ur).D).Nb;$n=ja.R;var as=as.wa[as.Y+ca],vs=ja.sa,Ll=ja.ta+16*ns*$n+16*ca,Gn=as.dd,bs=as.tc;if(bs!=0)if(t(3<=bs),ja.L==1)0<ca&&td(vs,Ll,$n,bs+4),as.La&&qa(vs,Ll,$n,bs),0<Br&&lA(vs,Ll,$n,bs+4),as.La&&yf(vs,Ll,$n,bs);else{var pc=ja.B,mA=ja.qa,kf=ja.ra+8*ns*pc+8*ca,pA=ja.Ha,ja=ja.Ia+8*ns*pc+8*ca;ns=as.ld,0<ca&&(iu(vs,Ll,$n,bs+4,Gn,ns),sA(mA,kf,pA,ja,pc,bs+4,Gn,ns)),as.La&&(oA(vs,Ll,$n,bs,Gn,ns),Kh(mA,kf,pA,ja,pc,bs,Gn,ns)),0<Br&&(vf(vs,Ll,$n,bs+4,Gn,ns),Gh(mA,kf,pA,ja,pc,bs+4,Gn,ns)),as.La&&(iA(vs,Ll,$n,bs,Gn,ns),bf(mA,kf,pA,ja,pc,bs,Gn,ns))}}if(Qe.ia&&alert("todo:DitherRow"),Ve.put!=null){if(Xr=16*Pn,Pn=16*(Pn+1),ni?(Ve.y=Qe.sa,Ve.O=Qe.ta+ta,Ve.f=Qe.qa,Ve.N=Qe.ra+On,Ve.ea=Qe.Ha,Ve.W=Qe.Ia+On):(Xr-=ln,Ve.y=Yt,Ve.O=br,Ve.f=er,Ve.N=jt,Ve.ea=Dn,Ve.W=zn),fn||(Pn-=ln),Pn>Ve.o&&(Pn=Ve.o),Ve.F=null,Ve.J=null,Qe.Fa!=null&&0<Qe.Fa.length&&Xr<Pn&&(Ve.J=Zd(Qe,Ve,Xr,Pn-Xr),Ve.F=Qe.mb,Ve.F==null&&Ve.F.length==0)){_t=xa(Qe,3,"Could not decode alpha data.");break e}Xr<Ve.j&&(ln=Ve.j-Xr,Xr=Ve.j,t(!(1&ln)),Ve.O+=Qe.R*ln,Ve.N+=Qe.B*(ln>>1),Ve.W+=Qe.B*(ln>>1),Ve.F!=null&&(Ve.J+=Ve.width*ln)),Xr<Pn&&(Ve.O+=Ve.v,Ve.N+=Ve.v>>1,Ve.W+=Ve.v>>1,Ve.F!=null&&(Ve.J+=Ve.v),Ve.ka=Xr-Ve.j,Ve.U=Ve.va-Ve.v,Ve.T=Pn-Xr,_t=Ve.put(Ve))}pt+1!=Qe.Ic||fn||(n(Qe.sa,Qe.ta-Ot,Yt,br+16*Qe.R,Ot),n(Qe.qa,Qe.ra-rr,er,jt+8*Qe.B,rr),n(Qe.Ha,Qe.Ia-rr,Dn,zn+8*Qe.B,rr))}if(!_t)return xa(We,6,"Output aborted.")}return 1}(T,H)),H.bc!=null&&H.bc(H),Z&=1}return Z?(T.cb=0,Z):0}function gi(T,H,Z,ie,de){de=T[H+Z+32*ie]+(de>>3),T[H+Z+32*ie]=-256&de?0>de?0:255:de}function qd(T,H,Z,ie,de,pe){gi(T,H,0,Z,ie+de),gi(T,H,1,Z,ie+pe),gi(T,H,2,Z,ie-pe),gi(T,H,3,Z,ie-de)}function Fn(T){return(20091*T>>16)+T}function xi(T,H,Z,ie){var de,pe=0,ge=s(16);for(de=0;4>de;++de){var xe=T[H+0]+T[H+8],Ee=T[H+0]-T[H+8],Be=(35468*T[H+4]>>16)-Fn(T[H+12]),Ue=Fn(T[H+4])+(35468*T[H+12]>>16);ge[pe+0]=xe+Ue,ge[pe+1]=Ee+Be,ge[pe+2]=Ee-Be,ge[pe+3]=xe-Ue,pe+=4,H++}for(de=pe=0;4>de;++de)xe=(T=ge[pe+0]+4)+ge[pe+8],Ee=T-ge[pe+8],Be=(35468*ge[pe+4]>>16)-Fn(ge[pe+12]),gi(Z,ie,0,0,xe+(Ue=Fn(ge[pe+4])+(35468*ge[pe+12]>>16))),gi(Z,ie,1,0,Ee+Be),gi(Z,ie,2,0,Ee-Be),gi(Z,ie,3,0,xe-Ue),pe++,ie+=32}function qc(T,H,Z,ie){var de=T[H+0]+4,pe=35468*T[H+4]>>16,ge=Fn(T[H+4]),xe=35468*T[H+1]>>16;qd(Z,ie,0,de+ge,T=Fn(T[H+1]),xe),qd(Z,ie,1,de+pe,T,xe),qd(Z,ie,2,de-pe,T,xe),qd(Z,ie,3,de-ge,T,xe)}function Wc(T,H,Z,ie,de){xi(T,H,Z,ie),de&&xi(T,H+16,Z,ie+4)}function Nl(T,H,Z,ie){hc(T,H+0,Z,ie,1),hc(T,H+32,Z,ie+128,1)}function Hn(T,H,Z,ie){var de;for(T=T[H+0]+4,de=0;4>de;++de)for(H=0;4>H;++H)gi(Z,ie,H,de,T)}function Xc(T,H,Z,ie){T[H+0]&&xs(T,H+0,Z,ie),T[H+16]&&xs(T,H+16,Z,ie+4),T[H+32]&&xs(T,H+32,Z,ie+128),T[H+48]&&xs(T,H+48,Z,ie+128+4)}function Co(T,H,Z,ie){var de,pe=s(16);for(de=0;4>de;++de){var ge=T[H+0+de]+T[H+12+de],xe=T[H+4+de]+T[H+8+de],Ee=T[H+4+de]-T[H+8+de],Be=T[H+0+de]-T[H+12+de];pe[0+de]=ge+xe,pe[8+de]=ge-xe,pe[4+de]=Be+Ee,pe[12+de]=Be-Ee}for(de=0;4>de;++de)ge=(T=pe[0+4*de]+3)+pe[3+4*de],xe=pe[1+4*de]+pe[2+4*de],Ee=pe[1+4*de]-pe[2+4*de],Be=T-pe[3+4*de],Z[ie+0]=ge+xe>>3,Z[ie+16]=Be+Ee>>3,Z[ie+32]=ge-xe>>3,Z[ie+48]=Be-Ee>>3,ie+=64}function ic(T,H,Z){var ie,de=H-32,pe=ti,ge=255-T[de-1];for(ie=0;ie<Z;++ie){var xe,Ee=pe,Be=ge+T[H-1];for(xe=0;xe<Z;++xe)T[H+xe]=Ee[Be+T[de+xe]];H+=32}}function Uh(T,H){ic(T,H,4)}function df(T,H){ic(T,H,8)}function Af(T,H){ic(T,H,16)}function oc(T,H){var Z;for(Z=0;16>Z;++Z)n(T,H+32*Z,T,H-32,16)}function Wd(T,H){var Z;for(Z=16;0<Z;--Z)a(T,H,T[H-1],16),H+=32}function lc(T,H,Z){var ie;for(ie=0;16>ie;++ie)a(H,Z+32*ie,T,16)}function Sl(T,H){var Z,ie=16;for(Z=0;16>Z;++Z)ie+=T[H-1+32*Z]+T[H+Z-32];lc(ie>>5,T,H)}function la(T,H){var Z,ie=8;for(Z=0;16>Z;++Z)ie+=T[H-1+32*Z];lc(ie>>4,T,H)}function cc(T,H){var Z,ie=8;for(Z=0;16>Z;++Z)ie+=T[H+Z-32];lc(ie>>4,T,H)}function kl(T,H){lc(128,T,H)}function Ir(T,H,Z){return T+2*H+Z+2>>2}function Bl(T,H){var Z,ie=H-32;for(ie=new Uint8Array([Ir(T[ie-1],T[ie+0],T[ie+1]),Ir(T[ie+0],T[ie+1],T[ie+2]),Ir(T[ie+1],T[ie+2],T[ie+3]),Ir(T[ie+2],T[ie+3],T[ie+4])]),Z=0;4>Z;++Z)n(T,H+32*Z,ie,0,ie.length)}function Qh(T,H){var Z=T[H-1],ie=T[H-1+32],de=T[H-1+64],pe=T[H-1+96];me(T,H+0,16843009*Ir(T[H-1-32],Z,ie)),me(T,H+32,16843009*Ir(Z,ie,de)),me(T,H+64,16843009*Ir(ie,de,pe)),me(T,H+96,16843009*Ir(de,pe,pe))}function Ii(T,H){var Z,ie=4;for(Z=0;4>Z;++Z)ie+=T[H+Z-32]+T[H-1+32*Z];for(ie>>=3,Z=0;4>Z;++Z)a(T,H+32*Z,ie,4)}function _o(T,H){var Z=T[H-1+0],ie=T[H-1+32],de=T[H-1+64],pe=T[H-1-32],ge=T[H+0-32],xe=T[H+1-32],Ee=T[H+2-32],Be=T[H+3-32];T[H+0+96]=Ir(ie,de,T[H-1+96]),T[H+1+96]=T[H+0+64]=Ir(Z,ie,de),T[H+2+96]=T[H+1+64]=T[H+0+32]=Ir(pe,Z,ie),T[H+3+96]=T[H+2+64]=T[H+1+32]=T[H+0+0]=Ir(ge,pe,Z),T[H+3+64]=T[H+2+32]=T[H+1+0]=Ir(xe,ge,pe),T[H+3+32]=T[H+2+0]=Ir(Ee,xe,ge),T[H+3+0]=Ir(Be,Ee,xe)}function ro(T,H){var Z=T[H+1-32],ie=T[H+2-32],de=T[H+3-32],pe=T[H+4-32],ge=T[H+5-32],xe=T[H+6-32],Ee=T[H+7-32];T[H+0+0]=Ir(T[H+0-32],Z,ie),T[H+1+0]=T[H+0+32]=Ir(Z,ie,de),T[H+2+0]=T[H+1+32]=T[H+0+64]=Ir(ie,de,pe),T[H+3+0]=T[H+2+32]=T[H+1+64]=T[H+0+96]=Ir(de,pe,ge),T[H+3+32]=T[H+2+64]=T[H+1+96]=Ir(pe,ge,xe),T[H+3+64]=T[H+2+96]=Ir(ge,xe,Ee),T[H+3+96]=Ir(xe,Ee,Ee)}function jl(T,H){var Z=T[H-1+0],ie=T[H-1+32],de=T[H-1+64],pe=T[H-1-32],ge=T[H+0-32],xe=T[H+1-32],Ee=T[H+2-32],Be=T[H+3-32];T[H+0+0]=T[H+1+64]=pe+ge+1>>1,T[H+1+0]=T[H+2+64]=ge+xe+1>>1,T[H+2+0]=T[H+3+64]=xe+Ee+1>>1,T[H+3+0]=Ee+Be+1>>1,T[H+0+96]=Ir(de,ie,Z),T[H+0+64]=Ir(ie,Z,pe),T[H+0+32]=T[H+1+96]=Ir(Z,pe,ge),T[H+1+32]=T[H+2+96]=Ir(pe,ge,xe),T[H+2+32]=T[H+3+96]=Ir(ge,xe,Ee),T[H+3+32]=Ir(xe,Ee,Be)}function No(T,H){var Z=T[H+0-32],ie=T[H+1-32],de=T[H+2-32],pe=T[H+3-32],ge=T[H+4-32],xe=T[H+5-32],Ee=T[H+6-32],Be=T[H+7-32];T[H+0+0]=Z+ie+1>>1,T[H+1+0]=T[H+0+64]=ie+de+1>>1,T[H+2+0]=T[H+1+64]=de+pe+1>>1,T[H+3+0]=T[H+2+64]=pe+ge+1>>1,T[H+0+32]=Ir(Z,ie,de),T[H+1+32]=T[H+0+96]=Ir(ie,de,pe),T[H+2+32]=T[H+1+96]=Ir(de,pe,ge),T[H+3+32]=T[H+2+96]=Ir(pe,ge,xe),T[H+3+64]=Ir(ge,xe,Ee),T[H+3+96]=Ir(xe,Ee,Be)}function Yc(T,H){var Z=T[H-1+0],ie=T[H-1+32],de=T[H-1+64],pe=T[H-1+96];T[H+0+0]=Z+ie+1>>1,T[H+2+0]=T[H+0+32]=ie+de+1>>1,T[H+2+32]=T[H+0+64]=de+pe+1>>1,T[H+1+0]=Ir(Z,ie,de),T[H+3+0]=T[H+1+32]=Ir(ie,de,pe),T[H+3+32]=T[H+1+64]=Ir(de,pe,pe),T[H+3+64]=T[H+2+64]=T[H+0+96]=T[H+1+96]=T[H+2+96]=T[H+3+96]=pe}function uc(T,H){var Z=T[H-1+0],ie=T[H-1+32],de=T[H-1+64],pe=T[H-1+96],ge=T[H-1-32],xe=T[H+0-32],Ee=T[H+1-32],Be=T[H+2-32];T[H+0+0]=T[H+2+32]=Z+ge+1>>1,T[H+0+32]=T[H+2+64]=ie+Z+1>>1,T[H+0+64]=T[H+2+96]=de+ie+1>>1,T[H+0+96]=pe+de+1>>1,T[H+3+0]=Ir(xe,Ee,Be),T[H+2+0]=Ir(ge,xe,Ee),T[H+1+0]=T[H+3+32]=Ir(Z,ge,xe),T[H+1+32]=T[H+3+64]=Ir(ie,Z,ge),T[H+1+64]=T[H+3+96]=Ir(de,ie,Z),T[H+1+96]=Ir(pe,de,ie)}function ff(T,H){var Z;for(Z=0;8>Z;++Z)n(T,H+32*Z,T,H-32,8)}function So(T,H){var Z;for(Z=0;8>Z;++Z)a(T,H,T[H-1],8),H+=32}function Fi(T,H,Z){var ie;for(ie=0;8>ie;++ie)a(H,Z+32*ie,T,8)}function Tl(T,H){var Z,ie=8;for(Z=0;8>Z;++Z)ie+=T[H+Z-32]+T[H-1+32*Z];Fi(ie>>4,T,H)}function ps(T,H){var Z,ie=4;for(Z=0;8>Z;++Z)ie+=T[H+Z-32];Fi(ie>>3,T,H)}function bn(T,H){var Z,ie=4;for(Z=0;8>Z;++Z)ie+=T[H-1+32*Z];Fi(ie>>3,T,H)}function Jc(T,H){Fi(128,T,H)}function Il(T,H,Z){var ie=T[H-Z],de=T[H+0],pe=3*(de-ie)+$g[1020+T[H-2*Z]-T[H+Z]],ge=wf[112+(pe+4>>3)];T[H-Z]=ti[255+ie+wf[112+(pe+3>>3)]],T[H+0]=ti[255+de-ge]}function hf(T,H,Z,ie){var de=T[H+0],pe=T[H+Z];return Pl[255+T[H-2*Z]-T[H-Z]]>ie||Pl[255+pe-de]>ie}function Ku(T,H,Z,ie){return 4*Pl[255+T[H-Z]-T[H+0]]+Pl[255+T[H-2*Z]-T[H+Z]]<=ie}function qu(T,H,Z,ie,de){var pe=T[H-3*Z],ge=T[H-2*Z],xe=T[H-Z],Ee=T[H+0],Be=T[H+Z],Ue=T[H+2*Z],it=T[H+3*Z];return 4*Pl[255+xe-Ee]+Pl[255+ge-Be]>ie?0:Pl[255+T[H-4*Z]-pe]<=de&&Pl[255+pe-ge]<=de&&Pl[255+ge-xe]<=de&&Pl[255+it-Ue]<=de&&Pl[255+Ue-Be]<=de&&Pl[255+Be-Ee]<=de}function ll(T,H,Z,ie){var de=2*ie+1;for(ie=0;16>ie;++ie)Ku(T,H+ie,Z,de)&&Il(T,H+ie,Z)}function Oi(T,H,Z,ie){var de=2*ie+1;for(ie=0;16>ie;++ie)Ku(T,H+ie*Z,1,de)&&Il(T,H+ie*Z,1)}function gs(T,H,Z,ie){var de;for(de=3;0<de;--de)ll(T,H+=4*Z,Z,ie)}function Hh(T,H,Z,ie){var de;for(de=3;0<de;--de)Oi(T,H+=4,Z,ie)}function Zc(T,H,Z,ie,de,pe,ge,xe){for(pe=2*pe+1;0<de--;){if(qu(T,H,Z,pe,ge))if(hf(T,H,Z,xe))Il(T,H,Z);else{var Ee=T,Be=H,Ue=Z,it=Ee[Be-2*Ue],rt=Ee[Be-Ue],We=Ee[Be+0],Ft=Ee[Be+Ue],pt=Ee[Be+2*Ue],Qe=27*(_t=$g[1020+3*(We-rt)+$g[1020+it-Ft]])+63>>7,Ve=18*_t+63>>7,_t=9*_t+63>>7;Ee[Be-3*Ue]=ti[255+Ee[Be-3*Ue]+_t],Ee[Be-2*Ue]=ti[255+it+Ve],Ee[Be-Ue]=ti[255+rt+Qe],Ee[Be+0]=ti[255+We-Qe],Ee[Be+Ue]=ti[255+Ft-Ve],Ee[Be+2*Ue]=ti[255+pt-_t]}H+=ie}}function vi(T,H,Z,ie,de,pe,ge,xe){for(pe=2*pe+1;0<de--;){if(qu(T,H,Z,pe,ge))if(hf(T,H,Z,xe))Il(T,H,Z);else{var Ee=T,Be=H,Ue=Z,it=Ee[Be-Ue],rt=Ee[Be+0],We=Ee[Be+Ue],Ft=wf[112+((pt=3*(rt-it))+4>>3)],pt=wf[112+(pt+3>>3)],Qe=Ft+1>>1;Ee[Be-2*Ue]=ti[255+Ee[Be-2*Ue]+Qe],Ee[Be-Ue]=ti[255+it+pt],Ee[Be+0]=ti[255+rt-Ft],Ee[Be+Ue]=ti[255+We-Qe]}H+=ie}}function eu(T,H,Z,ie,de,pe){Zc(T,H,Z,1,16,ie,de,pe)}function dc(T,H,Z,ie,de,pe){Zc(T,H,1,Z,16,ie,de,pe)}function Xd(T,H,Z,ie,de,pe){var ge;for(ge=3;0<ge;--ge)vi(T,H+=4*Z,Z,1,16,ie,de,pe)}function Wu(T,H,Z,ie,de,pe){var ge;for(ge=3;0<ge;--ge)vi(T,H+=4,1,Z,16,ie,de,pe)}function Yd(T,H,Z,ie,de,pe,ge,xe){Zc(T,H,de,1,8,pe,ge,xe),Zc(Z,ie,de,1,8,pe,ge,xe)}function mf(T,H,Z,ie,de,pe,ge,xe){Zc(T,H,1,de,8,pe,ge,xe),Zc(Z,ie,1,de,8,pe,ge,xe)}function Xu(T,H,Z,ie,de,pe,ge,xe){vi(T,H+4*de,de,1,8,pe,ge,xe),vi(Z,ie+4*de,de,1,8,pe,ge,xe)}function tu(T,H,Z,ie,de,pe,ge,xe){vi(T,H+4,1,de,8,pe,ge,xe),vi(Z,ie+4,1,de,8,pe,ge,xe)}function Yu(){this.ba=new oa,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new rn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Jd(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ju(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ru(){this.ua=0,this.Wa=new fe,this.vb=new fe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new M,this.yc=new O}function Vh(){this.xb=this.a=0,this.l=new Ts,this.ca=new oa,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ru,this.ab=0,this.gc=i(4,Ju),this.Oc=0}function Ac(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ts,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function nu(T,H,Z,ie,de,pe,ge){for(T=T==null?0:T[H+0],H=0;H<ge;++H)de[pe+H]=T+Z[ie+H]&255,T=de[pe+H]}function Zu(T,H,Z,ie,de,pe,ge){var xe;if(T==null)nu(null,null,Z,ie,de,pe,ge);else for(xe=0;xe<ge;++xe)de[pe+xe]=T[H+xe]+Z[ie+xe]&255}function Di(T,H,Z,ie,de,pe,ge){if(T==null)nu(null,null,Z,ie,de,pe,ge);else{var xe,Ee=T[H+0],Be=Ee,Ue=Ee;for(xe=0;xe<ge;++xe)Be=Ue+(Ee=T[H+xe])-Be,Ue=Z[ie+xe]+(-256&Be?0>Be?0:255:Be)&255,Be=Ee,de[pe+xe]=Ue}}function Zd(T,H,Z,ie){var de=H.width,pe=H.o;if(t(T!=null&&H!=null),0>Z||0>=ie||Z+ie>pe)return null;if(!T.Cc){if(T.ga==null){var ge;if(T.ga=new Ac,(ge=T.ga==null)||(ge=H.width*H.o,t(T.Gb.length==0),T.Gb=s(ge),T.Uc=0,T.Gb==null?ge=0:(T.mb=T.Gb,T.nb=T.Uc,T.rc=null,ge=1),ge=!ge),!ge){ge=T.ga;var xe=T.Fa,Ee=T.P,Be=T.qc,Ue=T.mb,it=T.nb,rt=Ee+1,We=Be-1,Ft=ge.l;if(t(xe!=null&&Ue!=null&&H!=null),cu[0]=null,cu[1]=nu,cu[2]=Zu,cu[3]=Di,ge.ca=Ue,ge.tb=it,ge.c=H.width,ge.i=H.height,t(0<ge.c&&0<ge.i),1>=Be)H=0;else if(ge.$a=xe[Ee+0]>>0&3,ge.Z=xe[Ee+0]>>2&3,ge.Lc=xe[Ee+0]>>4&3,Ee=xe[Ee+0]>>6&3,0>ge.$a||1<ge.$a||4<=ge.Z||1<ge.Lc||Ee)H=0;else if(Ft.put=vt,Ft.ac=et,Ft.bc=wt,Ft.ma=ge,Ft.width=H.width,Ft.height=H.height,Ft.Da=H.Da,Ft.v=H.v,Ft.va=H.va,Ft.j=H.j,Ft.o=H.o,ge.$a)e:{t(ge.$a==1),H=dt();t:for(;;){if(H==null){H=0;break e}if(t(ge!=null),ge.mc=H,H.c=ge.c,H.i=ge.i,H.l=ge.l,H.l.ma=ge,H.l.width=ge.c,H.l.height=ge.i,H.a=0,z(H.m,xe,rt,We),!$e(ge.c,ge.i,1,H,null)||(H.ab==1&&H.gc[0].hc==3&&Ce(H.s)?(ge.ic=1,xe=H.c*H.i,H.Ta=null,H.Ua=0,H.V=s(xe),H.Ba=0,H.V==null?(H.a=1,H=0):H=1):(ge.ic=0,H=nt(H,ge.c)),!H))break t;H=1;break e}ge.mc=null,H=0}else H=We>=ge.c*ge.i;ge=!H}if(ge)return null;T.ga.Lc!=1?T.Ga=0:ie=pe-Z}t(T.ga!=null),t(Z+ie<=pe);e:{if(H=(xe=T.ga).c,pe=xe.l.o,xe.$a==0){if(rt=T.rc,We=T.Vc,Ft=T.Fa,Ee=T.P+1+Z*H,Be=T.mb,Ue=T.nb+Z*H,t(Ee<=T.P+T.qc),xe.Z!=0)for(t(cu[xe.Z]!=null),ge=0;ge<ie;++ge)cu[xe.Z](rt,We,Ft,Ee,Be,Ue,H),rt=Be,We=Ue,Ue+=H,Ee+=H;else for(ge=0;ge<ie;++ge)n(Be,Ue,Ft,Ee,H),rt=Be,We=Ue,Ue+=H,Ee+=H;T.rc=rt,T.Vc=We}else{if(t(xe.mc!=null),H=Z+ie,t((ge=xe.mc)!=null),t(H<=ge.i),ge.C>=H)H=1;else if(xe.ic||qe(),xe.ic){xe=ge.V,rt=ge.Ba,We=ge.c;var pt=ge.i,Qe=(Ft=1,Ee=ge.$/We,Be=ge.$%We,Ue=ge.m,it=ge.s,ge.$),Ve=We*pt,_t=We*H,Ot=it.wc,jt=Qe<_t?Kr(it,Be,Ee):null;t(Qe<=Ve),t(H<=pt),t(Ce(it));t:for(;;){for(;!Ue.h&&Qe<_t;){if(Be&Ot||(jt=Kr(it,Be,Ee)),t(jt!=null),ae(Ue),256>(pt=qr(jt.G[0],jt.H[0],Ue)))xe[rt+Qe]=pt,++Qe,++Be>=We&&(Be=0,++Ee<=H&&!(Ee%16)&&Se(ge,Ee));else{if(!(280>pt)){Ft=0;break t}pt=nr(pt-256,Ue);var rr,Yt=qr(jt.G[4],jt.H[4],Ue);if(ae(Ue),!(Qe>=(Yt=xr(We,Yt=nr(Yt,Ue)))&&Ve-Qe>=pt)){Ft=0;break t}for(rr=0;rr<pt;++rr)xe[rt+Qe+rr]=xe[rt+Qe+rr-Yt];for(Qe+=pt,Be+=pt;Be>=We;)Be-=We,++Ee<=H&&!(Ee%16)&&Se(ge,Ee);Qe<_t&&Be&Ot&&(jt=Kr(it,Be,Ee))}t(Ue.h==X(Ue))}Se(ge,Ee>H?H:Ee);break t}!Ft||Ue.h&&Qe<Ve?(Ft=0,ge.a=Ue.h?5:3):ge.$=Qe,H=Ft}else H=Te(ge,ge.V,ge.Ba,ge.c,ge.i,H,ot);if(!H){ie=0;break e}}Z+ie>=pe&&(T.Cc=1),ie=1}if(!ie)return null;if(T.Cc&&((ie=T.ga)!=null&&(ie.mc=null),T.ga=null,0<T.Ga))return alert("todo:WebPDequantizeLevels"),null}return T.nb+Z*de}function W(T,H,Z,ie,de,pe){for(;0<de--;){var ge,xe=T,Ee=H+(Z?1:0),Be=T,Ue=H+(Z?0:3);for(ge=0;ge<ie;++ge){var it=Be[Ue+4*ge];it!=255&&(it*=32897,xe[Ee+4*ge+0]=xe[Ee+4*ge+0]*it>>23,xe[Ee+4*ge+1]=xe[Ee+4*ge+1]*it>>23,xe[Ee+4*ge+2]=xe[Ee+4*ge+2]*it>>23)}H+=pe}}function Ae(T,H,Z,ie,de){for(;0<ie--;){var pe;for(pe=0;pe<Z;++pe){var ge=T[H+2*pe+0],xe=15&(Be=T[H+2*pe+1]),Ee=4369*xe,Be=(240&Be|Be>>4)*Ee>>16;T[H+2*pe+0]=(240&ge|ge>>4)*Ee>>16&240|(15&ge|ge<<4)*Ee>>16>>4&15,T[H+2*pe+1]=240&Be|xe}H+=de}}function Oe(T,H,Z,ie,de,pe,ge,xe){var Ee,Be,Ue=255;for(Be=0;Be<de;++Be){for(Ee=0;Ee<ie;++Ee){var it=T[H+Ee];pe[ge+4*Ee]=it,Ue&=it}H+=Z,ge+=xe}return Ue!=255}function Le(T,H,Z,ie,de){var pe;for(pe=0;pe<de;++pe)Z[ie+pe]=T[H+pe]>>8}function qe(){cl=W,hn=Ae,mn=Oe,va=Le}function bt(T,H,Z){N[T]=function(ie,de,pe,ge,xe,Ee,Be,Ue,it,rt,We,Ft,pt,Qe,Ve,_t,Ot){var jt,rr=Ot-1>>1,Yt=xe[Ee+0]|Be[Ue+0]<<16,br=it[rt+0]|We[Ft+0]<<16;t(ie!=null);var er=3*Yt+br+131074>>2;for(H(ie[de+0],255&er,er>>16,pt,Qe),pe!=null&&(er=3*br+Yt+131074>>2,H(pe[ge+0],255&er,er>>16,Ve,_t)),jt=1;jt<=rr;++jt){var Dn=xe[Ee+jt]|Be[Ue+jt]<<16,zn=it[rt+jt]|We[Ft+jt]<<16,fn=Yt+Dn+br+zn+524296,ln=fn+2*(Dn+br)>>3;er=ln+Yt>>1,Yt=(fn=fn+2*(Yt+zn)>>3)+Dn>>1,H(ie[de+2*jt-1],255&er,er>>16,pt,Qe+(2*jt-1)*Z),H(ie[de+2*jt-0],255&Yt,Yt>>16,pt,Qe+(2*jt-0)*Z),pe!=null&&(er=fn+br>>1,Yt=ln+zn>>1,H(pe[ge+2*jt-1],255&er,er>>16,Ve,_t+(2*jt-1)*Z),H(pe[ge+2*jt+0],255&Yt,Yt>>16,Ve,_t+(2*jt+0)*Z)),Yt=Dn,br=zn}1&Ot||(er=3*Yt+br+131074>>2,H(ie[de+Ot-1],255&er,er>>16,pt,Qe+(Ot-1)*Z),pe!=null&&(er=3*br+Yt+131074>>2,H(pe[ge+Ot-1],255&er,er>>16,Ve,_t+(Ot-1)*Z)))}}function Ut(){ri[Pi]=ld,ri[qh]=uu,ri[ou]=fA,ri[Km]=qg,ri[Ef]=Wg,ri[nd]=Yh,ri[Gg]=Xg,ri[qm]=uu,ri[dA]=qg,ri[ad]=Wg,ri[Wh]=Yh}function Zt(T){return T&-16384?0>T?0:255:T>>aB}function F(T,H){return Zt((19077*T>>8)+(26149*H>>8)-14234)}function re(T,H,Z){return Zt((19077*T>>8)-(6419*H>>8)-(13320*Z>>8)+8708)}function le(T,H){return Zt((19077*T>>8)+(33050*H>>8)-17685)}function ve(T,H,Z,ie,de){ie[de+0]=F(T,Z),ie[de+1]=re(T,H,Z),ie[de+2]=le(T,H)}function ze(T,H,Z,ie,de){ie[de+0]=le(T,H),ie[de+1]=re(T,H,Z),ie[de+2]=F(T,Z)}function lt(T,H,Z,ie,de){var pe=re(T,H,Z);H=pe<<3&224|le(T,H)>>3,ie[de+0]=248&F(T,Z)|pe>>5,ie[de+1]=H}function Qt(T,H,Z,ie,de){var pe=240&le(T,H)|15;ie[de+0]=240&F(T,Z)|re(T,H,Z)>>4,ie[de+1]=pe}function Fr(T,H,Z,ie,de){ie[de+0]=255,ve(T,H,Z,ie,de+1)}function yn(T,H,Z,ie,de){ze(T,H,Z,ie,de),ie[de+3]=255}function Wr(T,H,Z,ie,de){ve(T,H,Z,ie,de),ie[de+3]=255}function Vn(T,H){return 0>T?0:T>H?H:T}function ea(T,H,Z){N[T]=function(ie,de,pe,ge,xe,Ee,Be,Ue,it){for(var rt=Ue+(-2&it)*Z;Ue!=rt;)H(ie[de+0],pe[ge+0],xe[Ee+0],Be,Ue),H(ie[de+1],pe[ge+0],xe[Ee+0],Be,Ue+Z),de+=2,++ge,++Ee,Ue+=2*Z;1&it&&H(ie[de+0],pe[ge+0],xe[Ee+0],Be,Ue)}}function Fl(T,H,Z){return Z==0?T==0?H==0?6:5:H==0?4:0:Z}function ts(T,H,Z,ie,de){switch(T>>>30){case 3:hc(H,Z,ie,de,0);break;case 2:Ka(H,Z,ie,de);break;case 1:xs(H,Z,ie,de)}}function ko(T,H){var Z,ie,de=H.M,pe=H.Nb,ge=T.oc,xe=T.pc+40,Ee=T.oc,Be=T.pc+584,Ue=T.oc,it=T.pc+600;for(Z=0;16>Z;++Z)ge[xe+32*Z-1]=129;for(Z=0;8>Z;++Z)Ee[Be+32*Z-1]=129,Ue[it+32*Z-1]=129;for(0<de?ge[xe-1-32]=Ee[Be-1-32]=Ue[it-1-32]=129:(a(ge,xe-32-1,127,21),a(Ee,Be-32-1,127,9),a(Ue,it-32-1,127,9)),ie=0;ie<T.za;++ie){var rt=H.ya[H.aa+ie];if(0<ie){for(Z=-1;16>Z;++Z)n(ge,xe+32*Z-4,ge,xe+32*Z+12,4);for(Z=-1;8>Z;++Z)n(Ee,Be+32*Z-4,Ee,Be+32*Z+4,4),n(Ue,it+32*Z-4,Ue,it+32*Z+4,4)}var We=T.Gd,Ft=T.Hd+ie,pt=rt.ad,Qe=rt.Hc;if(0<de&&(n(ge,xe-32,We[Ft].y,0,16),n(Ee,Be-32,We[Ft].f,0,8),n(Ue,it-32,We[Ft].ea,0,8)),rt.Za){var Ve=ge,_t=xe-32+16;for(0<de&&(ie>=T.za-1?a(Ve,_t,We[Ft].y[15],4):n(Ve,_t,We[Ft+1].y,0,4)),Z=0;4>Z;Z++)Ve[_t+128+Z]=Ve[_t+256+Z]=Ve[_t+384+Z]=Ve[_t+0+Z];for(Z=0;16>Z;++Z,Qe<<=2)Ve=ge,_t=xe+Sf[Z],ao[rt.Ob[Z]](Ve,_t),ts(Qe,pt,16*+Z,Ve,_t)}else if(Ve=Fl(ie,de,rt.Ob[0]),od[Ve](ge,xe),Qe!=0)for(Z=0;16>Z;++Z,Qe<<=2)ts(Qe,pt,16*+Z,ge,xe+Sf[Z]);for(Z=rt.Gc,Ve=Fl(ie,de,rt.Dd),dl[Ve](Ee,Be),dl[Ve](Ue,it),Qe=pt,Ve=Ee,_t=Be,255&(rt=Z>>0)&&(170&rt?mc(Qe,256,Ve,_t):To(Qe,256,Ve,_t)),rt=Ue,Qe=it,255&(Z>>=8)&&(170&Z?mc(pt,320,rt,Qe):To(pt,320,rt,Qe)),de<T.Ub-1&&(n(We[Ft].y,0,ge,xe+480,16),n(We[Ft].f,0,Ee,Be+224,8),n(We[Ft].ea,0,Ue,it+224,8)),Z=8*pe*T.B,We=T.sa,Ft=T.ta+16*ie+16*pe*T.R,pt=T.qa,rt=T.ra+8*ie+Z,Qe=T.Ha,Ve=T.Ia+8*ie+Z,Z=0;16>Z;++Z)n(We,Ft+Z*T.R,ge,xe+32*Z,16);for(Z=0;8>Z;++Z)n(pt,rt+Z*T.B,Ee,Be+32*Z,8),n(Qe,Ve+Z*T.B,Ue,it+32*Z,8)}}function au(T,H,Z,ie,de,pe,ge,xe,Ee){var Be=[0],Ue=[0],it=0,rt=Ee!=null?Ee.kd:0,We=Ee??new Jd;if(T==null||12>Z)return 7;We.data=T,We.w=H,We.ha=Z,H=[H],Z=[Z],We.gb=[We.gb];e:{var Ft=H,pt=Z,Qe=We.gb;if(t(T!=null),t(pt!=null),t(Qe!=null),Qe[0]=0,12<=pt[0]&&!r(T,Ft[0],"RIFF")){if(r(T,Ft[0]+8,"WEBP")){Qe=3;break e}var Ve=_e(T,Ft[0]+4);if(12>Ve||4294967286<Ve){Qe=3;break e}if(rt&&Ve>pt[0]-8){Qe=7;break e}Qe[0]=Ve,Ft[0]+=12,pt[0]-=12}Qe=0}if(Qe!=0)return Qe;for(Ve=0<We.gb[0],Z=Z[0];;){e:{var _t=T;pt=H,Qe=Z;var Ot=Be,jt=Ue,rr=Ft=[0];if((er=it=[it])[0]=0,8>Qe[0])Qe=7;else{if(!r(_t,pt[0],"VP8X")){if(_e(_t,pt[0]+4)!=10){Qe=3;break e}if(18>Qe[0]){Qe=7;break e}var Yt=_e(_t,pt[0]+8),br=1+ne(_t,pt[0]+12);if(2147483648<=br*(_t=1+ne(_t,pt[0]+15))){Qe=3;break e}rr!=null&&(rr[0]=Yt),Ot!=null&&(Ot[0]=br),jt!=null&&(jt[0]=_t),pt[0]+=18,Qe[0]-=18,er[0]=1}Qe=0}}if(it=it[0],Ft=Ft[0],Qe!=0)return Qe;if(pt=!!(2&Ft),!Ve&&it)return 3;if(pe!=null&&(pe[0]=!!(16&Ft)),ge!=null&&(ge[0]=pt),xe!=null&&(xe[0]=0),ge=Be[0],Ft=Ue[0],it&&pt&&Ee==null){Qe=0;break}if(4>Z){Qe=7;break}if(Ve&&it||!Ve&&!it&&!r(T,H[0],"ALPH")){Z=[Z],We.na=[We.na],We.P=[We.P],We.Sa=[We.Sa];e:{Yt=T,Qe=H,Ve=Z;var er=We.gb;Ot=We.na,jt=We.P,rr=We.Sa,br=22,t(Yt!=null),t(Ve!=null),_t=Qe[0];var Dn=Ve[0];for(t(Ot!=null),t(rr!=null),Ot[0]=null,jt[0]=null,rr[0]=0;;){if(Qe[0]=_t,Ve[0]=Dn,8>Dn){Qe=7;break e}var zn=_e(Yt,_t+4);if(4294967286<zn){Qe=3;break e}var fn=8+zn+1&-2;if(br+=fn,0<er&&br>er){Qe=3;break e}if(!r(Yt,_t,"VP8 ")||!r(Yt,_t,"VP8L")){Qe=0;break e}if(Dn[0]<fn){Qe=7;break e}r(Yt,_t,"ALPH")||(Ot[0]=Yt,jt[0]=_t+8,rr[0]=zn),_t+=fn,Dn-=fn}}if(Z=Z[0],We.na=We.na[0],We.P=We.P[0],We.Sa=We.Sa[0],Qe!=0)break}Z=[Z],We.Ja=[We.Ja],We.xa=[We.xa];e:if(er=T,Qe=H,Ve=Z,Ot=We.gb[0],jt=We.Ja,rr=We.xa,Yt=Qe[0],_t=!r(er,Yt,"VP8 "),br=!r(er,Yt,"VP8L"),t(er!=null),t(Ve!=null),t(jt!=null),t(rr!=null),8>Ve[0])Qe=7;else{if(_t||br){if(er=_e(er,Yt+4),12<=Ot&&er>Ot-12){Qe=3;break e}if(rt&&er>Ve[0]-8){Qe=7;break e}jt[0]=er,Qe[0]+=8,Ve[0]-=8,rr[0]=br}else rr[0]=5<=Ve[0]&&er[Yt+0]==47&&!(er[Yt+4]>>5),jt[0]=Ve[0];Qe=0}if(Z=Z[0],We.Ja=We.Ja[0],We.xa=We.xa[0],H=H[0],Qe!=0)break;if(4294967286<We.Ja)return 3;if(xe==null||pt||(xe[0]=We.xa?2:1),ge=[ge],Ft=[Ft],We.xa){if(5>Z){Qe=7;break}xe=ge,rt=Ft,pt=pe,T==null||5>Z?T=0:5<=Z&&T[H+0]==47&&!(T[H+4]>>5)?(Ve=[0],er=[0],Ot=[0],z(jt=new P,T,H,Z),yt(jt,Ve,er,Ot)?(xe!=null&&(xe[0]=Ve[0]),rt!=null&&(rt[0]=er[0]),pt!=null&&(pt[0]=Ot[0]),T=1):T=0):T=0}else{if(10>Z){Qe=7;break}xe=Ft,T==null||10>Z||!Zs(T,H+3,Z-3)?T=0:(rt=T[H+0]|T[H+1]<<8|T[H+2]<<16,pt=16383&(T[H+7]<<8|T[H+6]),T=16383&(T[H+9]<<8|T[H+8]),1&rt||3<(rt>>1&7)||!(rt>>4&1)||rt>>5>=We.Ja||!pt||!T?T=0:(ge&&(ge[0]=pt),xe&&(xe[0]=T),T=1))}if(!T||(ge=ge[0],Ft=Ft[0],it&&(Be[0]!=ge||Ue[0]!=Ft)))return 3;Ee!=null&&(Ee[0]=We,Ee.offset=H-Ee.w,t(4294967286>H-Ee.w),t(Ee.offset==Ee.ha-Z));break}return Qe==0||Qe==7&&it&&Ee==null?(pe!=null&&(pe[0]|=We.na!=null&&0<We.na.length),ie!=null&&(ie[0]=ge),de!=null&&(de[0]=Ft),0):Qe}function eA(T,H,Z){var ie=H.width,de=H.height,pe=0,ge=0,xe=ie,Ee=de;if(H.Da=T!=null&&0<T.Da,H.Da&&(xe=T.cd,Ee=T.bd,pe=T.v,ge=T.j,11>Z||(pe&=-2,ge&=-2),0>pe||0>ge||0>=xe||0>=Ee||pe+xe>ie||ge+Ee>de))return 0;if(H.v=pe,H.j=ge,H.va=pe+xe,H.o=ge+Ee,H.U=xe,H.T=Ee,H.da=T!=null&&0<T.da,H.da){if(!Ie(xe,Ee,Z=[T.ib],pe=[T.hb]))return 0;H.ib=Z[0],H.hb=pe[0]}return H.ob=T!=null&&T.ob,H.Kb=T==null||!T.Sd,H.da&&(H.ob=H.ib<3*ie/4&&H.hb<3*de/4,H.Kb=0),1}function zh(T){if(T==null)return 2;if(11>T.S){var H=T.f.RGBA;H.fb+=(T.height-1)*H.A,H.A=-H.A}else H=T.f.kb,T=T.height,H.O+=(T-1)*H.fa,H.fa=-H.fa,H.N+=(T-1>>1)*H.Ab,H.Ab=-H.Ab,H.W+=(T-1>>1)*H.Db,H.Db=-H.Db,H.F!=null&&(H.J+=(T-1)*H.lb,H.lb=-H.lb);return 0}function pf(T,H,Z,ie){if(ie==null||0>=T||0>=H)return 2;if(Z!=null){if(Z.Da){var de=Z.cd,pe=Z.bd,ge=-2&Z.v,xe=-2&Z.j;if(0>ge||0>xe||0>=de||0>=pe||ge+de>T||xe+pe>H)return 2;T=de,H=pe}if(Z.da){if(!Ie(T,H,de=[Z.ib],pe=[Z.hb]))return 2;T=de[0],H=pe[0]}}ie.width=T,ie.height=H;e:{var Ee=ie.width,Be=ie.height;if(T=ie.S,0>=Ee||0>=Be||!(T>=Pi&&13>T))T=2;else{if(0>=ie.Rd&&ie.sd==null){ge=pe=de=H=0;var Ue=(xe=Ee*yE[T])*Be;if(11>T||(pe=(Be+1)/2*(H=(Ee+1)/2),T==12&&(ge=(de=Ee)*Be)),(Be=s(Ue+2*pe+ge))==null){T=1;break e}ie.sd=Be,11>T?((Ee=ie.f.RGBA).eb=Be,Ee.fb=0,Ee.A=xe,Ee.size=Ue):((Ee=ie.f.kb).y=Be,Ee.O=0,Ee.fa=xe,Ee.Fd=Ue,Ee.f=Be,Ee.N=0+Ue,Ee.Ab=H,Ee.Cd=pe,Ee.ea=Be,Ee.W=0+Ue+pe,Ee.Db=H,Ee.Ed=pe,T==12&&(Ee.F=Be,Ee.J=0+Ue+2*pe),Ee.Tc=ge,Ee.lb=de)}if(H=1,de=ie.S,pe=ie.width,ge=ie.height,de>=Pi&&13>de)if(11>de)T=ie.f.RGBA,H&=(xe=Math.abs(T.A))*(ge-1)+pe<=T.size,H&=xe>=pe*yE[de],H&=T.eb!=null;else{T=ie.f.kb,xe=(pe+1)/2,Ue=(ge+1)/2,Ee=Math.abs(T.fa),Be=Math.abs(T.Ab);var it=Math.abs(T.Db),rt=Math.abs(T.lb),We=rt*(ge-1)+pe;H&=Ee*(ge-1)+pe<=T.Fd,H&=Be*(Ue-1)+xe<=T.Cd,H=(H&=it*(Ue-1)+xe<=T.Ed)&Ee>=pe&Be>=xe&it>=xe,H&=T.y!=null,H&=T.f!=null,H&=T.ea!=null,de==12&&(H&=rt>=pe,H&=We<=T.Tc,H&=T.F!=null)}else H=0;T=H?0:2}}return T!=0||Z!=null&&Z.fd&&(T=zh(ie)),T}var Is=64,tA=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],gf=24,xf=32,$h=8,Bo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ye("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(T){return T},N.Predictor2=function(T,H,Z){return H[Z+0]},N.Predictor3=function(T,H,Z){return H[Z+1]},N.Predictor4=function(T,H,Z){return H[Z-1]},N.Predictor5=function(T,H,Z){return Re(Re(T,H[Z+1]),H[Z+0])},N.Predictor6=function(T,H,Z){return Re(T,H[Z-1])},N.Predictor7=function(T,H,Z){return Re(T,H[Z+0])},N.Predictor8=function(T,H,Z){return Re(H[Z-1],H[Z+0])},N.Predictor9=function(T,H,Z){return Re(H[Z+0],H[Z+1])},N.Predictor10=function(T,H,Z){return Re(Re(T,H[Z-1]),Re(H[Z+0],H[Z+1]))},N.Predictor11=function(T,H,Z){var ie=H[Z+0];return 0>=Ze(ie>>24&255,T>>24&255,(H=H[Z-1])>>24&255)+Ze(ie>>16&255,T>>16&255,H>>16&255)+Ze(ie>>8&255,T>>8&255,H>>8&255)+Ze(255&ie,255&T,255&H)?ie:T},N.Predictor12=function(T,H,Z){var ie=H[Z+0];return(Ge((T>>24&255)+(ie>>24&255)-((H=H[Z-1])>>24&255))<<24|Ge((T>>16&255)+(ie>>16&255)-(H>>16&255))<<16|Ge((T>>8&255)+(ie>>8&255)-(H>>8&255))<<8|Ge((255&T)+(255&ie)-(255&H)))>>>0},N.Predictor13=function(T,H,Z){var ie=H[Z-1];return(Ke((T=Re(T,H[Z+0]))>>24&255,ie>>24&255)<<24|Ke(T>>16&255,ie>>16&255)<<16|Ke(T>>8&255,ie>>8&255)<<8|Ke(T>>0&255,ie>>0&255))>>>0};var ob=N.PredictorAdd0;N.PredictorAdd1=ft,ye("Predictor2","PredictorAdd2"),ye("Predictor3","PredictorAdd3"),ye("Predictor4","PredictorAdd4"),ye("Predictor5","PredictorAdd5"),ye("Predictor6","PredictorAdd6"),ye("Predictor7","PredictorAdd7"),ye("Predictor8","PredictorAdd8"),ye("Predictor9","PredictorAdd9"),ye("Predictor10","PredictorAdd10"),ye("Predictor11","PredictorAdd11"),ye("Predictor12","PredictorAdd12"),ye("Predictor13","PredictorAdd13");var $m=N.PredictorAdd2;Dt("ColorIndexInverseTransform","MapARGB","32b",function(T){return T>>8&255},function(T){return T}),Dt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(T){return T},function(T){return T>>8&255});var zg,Ol=N.ColorIndexInverseTransform,ei=N.MapARGB,rA=N.VP8LColorIndexInverseTransformAlpha,Gm=N.MapAlpha,ed=N.VP8LPredictorsAdd=[];ed.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var nA,no,bi,aA,jo,fc,su,hc,Ka,mc,xs,To,vf,iu,Gh,sA,iA,oA,bf,Kh,lA,td,yf,qa,cl,hn,mn,va,rs=s(511),Dl=s(2041),cA=s(225),uA=s(767),rd=0,$g=Dl,wf=cA,ti=uA,Pl=rs,Pi=0,qh=1,ou=2,Km=3,Ef=4,nd=5,Gg=6,qm=7,dA=8,ad=9,Wh=10,Kg=[2,3,7],Rl=[3,3,11],ul=[280,256,256,256,40],Cf=[0,1,1,1,0],sd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],id=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],_f=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],pE=8,Wm=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Xm=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Fs=null,Wa=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Mn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],AA=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],lu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],lb=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Nf=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],gE=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],od=[],ao=[],dl=[],xE=1,Xh=2,cu=[],ri=[];bt("UpsampleRgbLinePair",ve,3),bt("UpsampleBgrLinePair",ze,3),bt("UpsampleRgbaLinePair",Wr,4),bt("UpsampleBgraLinePair",yn,4),bt("UpsampleArgbLinePair",Fr,4),bt("UpsampleRgba4444LinePair",Qt,2),bt("UpsampleRgb565LinePair",lt,2);var ld=N.UpsampleRgbLinePair,fA=N.UpsampleBgrLinePair,uu=N.UpsampleRgbaLinePair,qg=N.UpsampleBgraLinePair,Wg=N.UpsampleArgbLinePair,Yh=N.UpsampleRgba4444LinePair,Xg=N.UpsampleRgb565LinePair,du=16,Os=1<<du-1,hA=-227,Yg=482,aB=6,vE=0,sB=s(256),Ds=s(256),cb=s(256),Ym=s(256),Jm=s(Yg-hA),ub=s(Yg-hA);ea("YuvToRgbRow",ve,3),ea("YuvToBgrRow",ze,3),ea("YuvToRgbaRow",Wr,4),ea("YuvToBgraRow",yn,4),ea("YuvToArgbRow",Fr,4),ea("YuvToRgba4444Row",Qt,2),ea("YuvToRgb565Row",lt,2);var Sf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],cd=[0,2,8],iB=[8,7,6,4,4,2,2,2,1,1,1,1],bE=1;this.WebPDecodeRGBA=function(T,H,Z,ie,de){var pe=qh,ge=new Yu,xe=new oa;ge.ba=xe,xe.S=pe,xe.width=[xe.width],xe.height=[xe.height];var Ee=xe.width,Be=xe.height,Ue=new Ba;if(Ue==null||T==null)var it=2;else t(Ue!=null),it=au(T,H,Z,Ue.width,Ue.height,Ue.Pd,Ue.Qd,Ue.format,null);if(it!=0?Ee=0:(Ee!=null&&(Ee[0]=Ue.width[0]),Be!=null&&(Be[0]=Ue.height[0]),Ee=1),Ee){xe.width=xe.width[0],xe.height=xe.height[0],ie!=null&&(ie[0]=xe.width),de!=null&&(de[0]=xe.height);e:{if(ie=new Ts,(de=new Jd).data=T,de.w=H,de.ha=Z,de.kd=1,H=[0],t(de!=null),((T=au(de.data,de.w,de.ha,null,null,null,H,null,de))==0||T==7)&&H[0]&&(T=4),(H=T)==0){if(t(ge!=null),ie.data=de.data,ie.w=de.w+de.offset,ie.ha=de.ha-de.offset,ie.put=vt,ie.ac=et,ie.bc=wt,ie.ma=ge,de.xa){if((T=dt())==null){ge=1;break e}if(function(rt,We){var Ft=[0],pt=[0],Qe=[0];t:for(;;){if(rt==null)return 0;if(We==null)return rt.a=2,0;if(rt.l=We,rt.a=0,z(rt.m,We.data,We.w,We.ha),!yt(rt.m,Ft,pt,Qe)){rt.a=3;break t}if(rt.xb=Xh,We.width=Ft[0],We.height=pt[0],!$e(Ft[0],pt[0],1,rt,null))break t;return 1}return t(rt.a!=0),0}(T,ie)){if(ie=(H=pf(ie.width,ie.height,ge.Oa,ge.ba))==0){t:{ie=T;r:for(;;){if(ie==null){ie=0;break t}if(t(ie.s.yc!=null),t(ie.s.Ya!=null),t(0<ie.s.Wb),t((Z=ie.l)!=null),t((de=Z.ma)!=null),ie.xb!=0){if(ie.ca=de.ba,ie.tb=de.tb,t(ie.ca!=null),!eA(de.Oa,Z,Km)){ie.a=2;break r}if(!nt(ie,Z.width)||Z.da)break r;if((Z.da||Tr(ie.ca.S))&&qe(),11>ie.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ie.ca.f.kb.F!=null&&qe()),ie.Pb&&0<ie.s.ua&&ie.s.vb.X==null&&!De(ie.s.vb,ie.s.Wa.Xa)){ie.a=1;break r}ie.xb=0}if(!Te(ie,ie.V,ie.Ba,ie.c,ie.i,Z.o,je))break r;de.Dc=ie.Ma,ie=1;break t}t(ie.a!=0),ie=0}ie=!ie}ie&&(H=T.a)}else H=T.a}else{if((T=new pi)==null){ge=1;break e}if(T.Fa=de.na,T.P=de.P,T.qc=de.Sa,Kd(T,ie)){if((H=pf(ie.width,ie.height,ge.Oa,ge.ba))==0){if(T.Aa=0,Z=ge.Oa,t((de=T)!=null),Z!=null){if(0<(Ee=0>(Ee=Z.Md)?0:100<Ee?255:255*Ee/100)){for(Be=Ue=0;4>Be;++Be)12>(it=de.pb[Be]).lc&&(it.ia=Ee*iB[0>it.lc?0:it.lc]>>3),Ue|=it.ia;Ue&&(alert("todo:VP8InitRandom"),de.ia=1)}de.Ga=Z.Id,100<de.Ga?de.Ga=100:0>de.Ga&&(de.Ga=0)}uf(T,ie)||(H=T.a)}}else H=T.a}H==0&&ge.Oa!=null&&ge.Oa.fd&&(H=zh(ge.ba))}ge=H}pe=ge!=0?null:11>pe?xe.f.RGBA.eb:xe.f.kb.y}else pe=null;return pe};var yE=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(N,j){for(var R="",D=0;D<4;D++)R+=String.fromCharCode(N[j++]);return R}function d(N,j){return(N[j+0]<<0|N[j+1]<<8|N[j+2]<<16)>>>0}function f(N,j){return(N[j+0]<<0|N[j+1]<<8|N[j+2]<<16|N[j+3]<<24)>>>0}new c;var h=[0],p=[0],g=[],x=new c,b=e,y=function(N,j){var R={},D=0,O=!1,L=0,M=0;if(R.frames=[],!function(Q,X,te,ae){for(var se=0;se<ae;se++)if(Q[X+se]!=te.charCodeAt(se))return!0;return!1}(N,j,"RIFF",4)){var J,V;for(f(N,j+=4),j+=8;j<N.length;){var K=u(N,j),z=f(N,j+=4);j+=4;var G=z+(1&z);switch(K){case"VP8 ":case"VP8L":R.frames[D]===void 0&&(R.frames[D]={}),(P=R.frames[D]).src_off=O?M:j-8,P.src_size=L+z+8,D++,O&&(O=!1,L=0,M=0);break;case"VP8X":(P=R.header={}).feature_flags=N[j];var Y=j+4;P.canvas_width=1+d(N,Y),Y+=3,P.canvas_height=1+d(N,Y),Y+=3;break;case"ALPH":O=!0,L=G+8,M=j-8;break;case"ANIM":(P=R.header).bgcolor=f(N,j),Y=j+4,P.loop_count=(J=N)[(V=Y)+0]<<0|J[V+1]<<8,Y+=2;break;case"ANMF":var ee,P;(P=R.frames[D]={}).offset_x=2*d(N,j),j+=3,P.offset_y=2*d(N,j),j+=3,P.width=1+d(N,j),j+=3,P.height=1+d(N,j),j+=3,P.duration=d(N,j),j+=3,ee=N[j++],P.dispose=1&ee,P.blend=ee>>1&1}K!="ANMF"&&(j+=G)}return R}}(b,0);y.response=b,y.rgbaoutput=!0,y.dataurl=!1;var w=y.header?y.header:null,_=y.frames?y.frames:null;if(w){w.loop_counter=w.loop_count,h=[w.canvas_height],p=[w.canvas_width];for(var B=0;B<_.length&&_[B].blend!=0;B++);}var k=_[0],I=x.WebPDecodeRGBA(b,k.src_off,k.src_size,p,h);k.rgba=I,k.imgwidth=p[0],k.imgheight=h[0];for(var E=0;E<p[0]*h[0]*4;E++)g[E]=I[E];return this.width=p,this.height=h,this.data=g,this}(function(e){var t=function(){return typeof QF=="function"},r=function(h,p,g,x){var b=4,y=i;switch(x){case e.image_compression.FAST:b=1,y=s;break;case e.image_compression.MEDIUM:b=6,y=o;break;case e.image_compression.SLOW:b=9,y=c}h=n(h,p,g,y);var w=QF(h,{level:b});return e.__addimage__.arrayBufferToBinaryString(w)},n=function(h,p,g,x){for(var b,y,w,_=h.length/p,B=new Uint8Array(h.length+_),k=d(),I=0;I<_;I+=1){if(w=I*p,b=h.subarray(w,w+p),x)B.set(x(b,g,y),w+I);else{for(var E,N=k.length,j=[];E<N;E+=1)j[E]=k[E](b,g,y);var R=f(j.concat());B.set(j[R],w+I)}y=b}return B},a=function(h){var p=Array.apply([],h);return p.unshift(0),p},s=function(h,p){var g,x=[],b=h.length;x[0]=1;for(var y=0;y<b;y+=1)g=h[y-p]||0,x[y+1]=h[y]-g+256&255;return x},i=function(h,p,g){var x,b=[],y=h.length;b[0]=2;for(var w=0;w<y;w+=1)x=g&&g[w]||0,b[w+1]=h[w]-x+256&255;return b},o=function(h,p,g){var x,b,y=[],w=h.length;y[0]=3;for(var _=0;_<w;_+=1)x=h[_-p]||0,b=g&&g[_]||0,y[_+1]=h[_]+256-(x+b>>>1)&255;return y},c=function(h,p,g){var x,b,y,w,_=[],B=h.length;_[0]=4;for(var k=0;k<B;k+=1)x=h[k-p]||0,b=g&&g[k]||0,y=g&&g[k-p]||0,w=u(x,b,y),_[k+1]=h[k]-w+256&255;return _},u=function(h,p,g){if(h===p&&p===g)return h;var x=Math.abs(p-g),b=Math.abs(h-g),y=Math.abs(h+p-g-g);return x<=b&&x<=y?h:b<=y?p:g},d=function(){return[a,s,i,o,c]},f=function(h){var p=h.map(function(g){return g.reduce(function(x,b){return x+Math.abs(b)},0)});return p.indexOf(Math.min.apply(null,p))};e.processPNG=function(h,p,g,x){var b,y,w,_,B,k,I,E,N,j,R,D,O,L,M,J=this.decode.FLATE_DECODE,V="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(w=new J8e(h)).imgData,y=w.bits,b=w.colorSpace,B=w.colors,[4,6].indexOf(w.colorType)!==-1){if(w.bits===8){N=(E=w.pixelBitlength==32?new Uint32Array(w.decodePixels().buffer):w.pixelBitlength==16?new Uint16Array(w.decodePixels().buffer):new Uint8Array(w.decodePixels().buffer)).length,R=new Uint8Array(N*w.colors),j=new Uint8Array(N);var K,z=w.pixelBitlength-w.bits;for(L=0,M=0;L<N;L++){for(O=E[L],K=0;K<z;)R[M++]=O>>>K&255,K+=w.bits;j[L]=O>>>K&255}}if(w.bits===16){N=(E=new Uint32Array(w.decodePixels().buffer)).length,R=new Uint8Array(N*(32/w.pixelBitlength)*w.colors),j=new Uint8Array(N*(32/w.pixelBitlength)),D=w.colors>1,L=0,M=0;for(var G=0;L<N;)O=E[L++],R[M++]=O>>>0&255,D&&(R[M++]=O>>>16&255,O=E[L++],R[M++]=O>>>0&255),j[G++]=O>>>16&255;y=8}x!==e.image_compression.NONE&&t()?(h=r(R,w.width*w.colors,w.colors,x),I=r(j,w.width,1,x)):(h=R,I=j,J=void 0)}if(w.colorType===3&&(b=this.color_spaces.INDEXED,k=w.palette,w.transparency.indexed)){var Y=w.transparency.indexed,ee=0;for(L=0,N=Y.length;L<N;++L)ee+=Y[L];if((ee/=255)===N-1&&Y.indexOf(0)!==-1)_=[Y.indexOf(0)];else if(ee!==N){for(E=w.decodePixels(),j=new Uint8Array(E.length),L=0,N=E.length;L<N;L++)j[L]=Y[E[L]];I=r(j,w.width,1)}}var P=function(Q){var X;switch(Q){case e.image_compression.FAST:X=11;break;case e.image_compression.MEDIUM:X=13;break;case e.image_compression.SLOW:X=14;break;default:X=12}return X}(x);return J===this.decode.FLATE_DECODE&&(V="/Predictor "+P+" "),V+="/Colors "+B+" /BitsPerComponent "+y+" /Columns "+w.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(I&&this.__addimage__.isArrayBuffer(I)||this.__addimage__.isArrayBufferView(I))&&(I=this.__addimage__.arrayBufferToBinaryString(I)),{alias:g,data:h,index:p,filter:J,decodeParameters:V,transparency:_,palette:k,sMask:I,predictor:P,width:w.width,height:w.height,bitsPerComponent:y,colorSpace:b}}}})(vr.API),function(e){e.processGIF89A=function(t,r,n,a){var s=new Z8e(t),i=s.width,o=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:i,height:o},d=new Q3(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(vr.API),gd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},gd.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){_a.log("bit decode error:"+r)}},gd.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var c=this.palette[s>>7-o&1];this.data[i+4*o]=c.blue,this.data[i+4*o+1]=c.green,this.data[i+4*o+2]=c.red,this.data[i+4*o+3]=255}r!==0&&(this.pos+=4-r)}},gd.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,o=s>>4,c=15&s,u=this.palette[o];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}t!==0&&(this.pos+=4-t)}},gd.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},gd.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=u}this.pos+=e}},gd.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,c=(i>>5&r)/r*255|0,u=(i>>11)/t*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},gd.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*r;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},gd.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=i}},gd.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var s=new gd(t,!1),i=s.width,o=s.height,c={data:s.getData(),width:i,height:o},u=new Q3(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(vr.API),LG.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var s=new LG(t),i=s.width,o=s.height,c={data:s.getData(),width:i,height:o},u=new Q3(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(vr.API),vr.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),o=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],h=n[u+2],p=n[u+3];s[o++]=d,s[o++]=f,s[o++]=h,i[c++]=p}var g=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},vr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},_x=vr.API,KC=_x.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),i=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,c=o.fof?o.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,h=0,p=e.length,g=0,x=o[0]||c,b=[];for(r=0;r<p;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?b.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+i*(1e3/s)||0)/1e3):(h=f&&ma(u[n])==="object"&&!isNaN(parseInt(u[n][g],10))?u[n][g]/d:0,b.push((o[n]||x)/c+h)),g=n;return b},OG=_x.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return _x.processArabic&&(e=_x.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:KC.apply(this,arguments).reduce(function(s,i){return s+i},0)},DG=function(e,t,r,n){for(var a=[],s=0,i=e.length,o=0;s!==i&&o+t[s]<r;)o+=t[s],s++;a.push(e.slice(0,s));var c=s;for(o=0;s!==i;)o+t[s]>n&&(a.push(e.slice(c,s)),o=0,c=s),o+=t[s],s++;return c!==s&&a.push(e.slice(c,s)),a},PG=function(e,t,r){r||(r={});var n,a,s,i,o,c,u,d=[],f=[d],h=r.textIndent||0,p=0,g=0,x=e.split(" "),b=KC.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?x[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),w=[];x.map(function(B){(B=B.split(/\s*\n/)).length>1?w=w.concat(B.map(function(k,I){return(I&&k.length?`
`:"")+k})):w.push(B[0])}),x=w,c=OG.apply(this,[y,r])}for(s=0,i=x.length;s<i;s++){var _=0;if(n=x[s],c&&n[0]==`
`&&(n=n.substr(1),_=1),h+p+(g=(a=KC.apply(this,[n,r])).reduce(function(B,k){return B+k},0))>t||_){if(g>t){for(o=DG.apply(this,[n,a,t-(h+p),t]),d.push(o.shift()),d=[o.pop()];o.length;)f.push([o.shift()]);g=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(B,k){return B+k},0)}else d=[n];f.push(d),h=g+c,p=b}else d.push(n),h+=p+g,p=b}return u=c?function(B,k){return(k?y:"")+B.join(" ")}:function(B){return B.join(" ")},f.map(u)},_x.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var i=1*this.internal.scaleFactor*t/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var o,c,u=[];for(o=0,c=n.length;o<c;o++)u=u.concat(PG.apply(this,[n[o],i,s]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var s=function(f){return"0x"+parseInt(f,10).toString(16)},i=e.__fontmetrics__.compress=function(f){var h,p,g,x,b=["{"];for(var y in f){if(h=f[y],isNaN(parseInt(y,10))?p="'"+y+"'":(y=parseInt(y,10),p=(p=s(y).slice(2)).slice(0,-1)+n[p.slice(-1)]),typeof h=="number")h<0?(g=s(h).slice(3),x="-"):(g=s(h).slice(2),x=""),g=x+g.slice(0,-1)+n[g.slice(-1)];else{if(ma(h)!=="object")throw new Error("Don't know what to do with value type "+ma(h)+".");g=i(h)}b.push(p+g)}return b.push("}"),b.join("")},o=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,p,g,x,b={},y=1,w=b,_=[],B="",k="",I=f.length-1,E=1;E<I;E+=1)(x=f[E])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(x):x=="{"?(_.push([w,g]),w={},g=void 0):x=="}"?((p=_.pop())[0][p[1]]=w,g=void 0,w=p[0]):x=="-"?y=-1:g===void 0?r.hasOwnProperty(x)?(B+=r[x],g=parseInt(B,16)*y,y=1,B=""):B+=x:r.hasOwnProperty(x)?(k+=r[x],w[g]=parseInt(k,16)*y,y=1,g=void 0,k=""):k+=x;return b},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var h=f.font,p=d.Unicode[h.postScriptName];p&&(h.metadata.Unicode={},h.metadata.Unicode.widths=p.widths,h.metadata.Unicode.kerning=p.kerning);var g=u.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(vr.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(aw(o)),i.metadata=e.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(a,n)}}])}(vr),function(e){function t(){return(Qr.canvg?Promise.resolve(Qr.canvg):A1(()=>import("./index.es-CYyU2jjm.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}vr.API.addSvgAsImage=function(r,n,a,s,i,o,c,u){if(isNaN(n)||isNaN(a))throw _a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw _a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=i;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then(function(g){return g.fromString(f,r,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(h)}).then(function(){p.addImage(d.toDataURL("image/jpeg",1),n,a,s,i,c,u)})}}(),vr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},vr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),c=[],u=0,d=0,f=0;function h(g,x){var b,y=!1;for(b=0;b<g.length;b+=1)g[b]===x&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=o.length;for(f=0;f<p;f+=1)r[o[f]].value=r[o[f]].defaultValue,r[o[f]].explicitSet=!1}if(ma(e)==="object"){for(a in e)if(s=e[a],h(o,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&h(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,x=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?x.push("/"+g+" /"+r[g].value):x.push("/"+g+" "+r[g].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+i.length+o.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+i+o+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(vr.API),function(e){var t=e.API,r=t.pdfEscape16=function(s,i){for(var o,c=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,h=s.length;f<h;++f){if(o=i.metadata.characterToGlyph(s.charCodeAt(f)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=s.charCodeAt(f),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},n=function(s){var i,o,c,u,d,f,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,h=(o=Object.keys(s).sort(function(p,g){return p-g})).length;f<h;f++)i=o[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(u=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),c.push("<"+i+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(i){var o=i.font,c=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,h=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",g=0;g<h.length;g++)p+=String.fromCharCode(h[g]);var x=u();d({data:p,addLength1:!0,objectId:x}),c("endobj");var b=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:b}),c("endobj");var y=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Yx(o.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var w=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Yx(o.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+b+" 0 R"),c("/BaseFont /"+Yx(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+w+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(i){var o=i.font,c=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,h="",p=0;p<f.length;p++)h+=String.fromCharCode(f[p]);var g=u();d({data:h,addLength1:!0,objectId:g}),c("endobj");var x=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var b=u();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+g+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+Yx(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=u();for(var y=0;y<o.metadata.hmtx.widths.length;y++)o.metadata.hmtx.widths[y]=parseInt(o.metadata.hmtx.widths[y]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+Yx(o.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]);var a=function(s){var i,o=s.text||"",c=s.x,u=s.y,d=s.options||{},f=s.mutex||{},h=f.pdfEscape,p=f.activeFontKey,g=f.fonts,x=p,b="",y=0,w="",_=g[x].encoding;if(g[x].encoding!=="Identity-H")return{text:o,x:c,y:u,options:d,mutex:f};for(w=o,x=p,Array.isArray(o)&&(w=o[0]),y=0;y<w.length;y+=1)g[x].metadata.hasOwnProperty("cmap")&&(i=g[x].metadata.cmap.unicode.codeMap[w[y].charCodeAt(0)]),i||w[y].charCodeAt(0)<256&&g[x].metadata.hasOwnProperty("Unicode")?b+=w[y]:b+="";var B="";return parseInt(x.slice(1))<14||_==="WinAnsiEncoding"?B=h(b,x).split("").map(function(k){return k.charCodeAt(0).toString(16)}).join(""):_==="Identity-H"&&(B=r(b,g[x])),f.isHex=!0,{text:B,x:c,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(s){var i=s.text||"",o=[],c={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?o.push([a(Object.assign({},c,{text:i[u][0]})).text,i[u][1],i[u][2]]):o.push(a(Object.assign({},c,{text:i[u]})).text);s.text=o}else s.text=a(Object.assign({},c,{text:i})).text}])}(vr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(vr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,s,i,o,c,u,d,f=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,_=0;this.__bidiEngine__={};var B=function(D){var O=D.charCodeAt(),L=O>>8,M=x[L];return M!==void 0?f[256*M+(255&O)]:L===252||L===253?"AL":y.test(L)?"L":L===8?"R":"N"},k=function(D){for(var O,L=0;L<D.length;L++){if((O=B(D.charAt(L)))==="L")return!1;if(O==="R")return!0}return!1},I=function(D,O,L,M){var J,V,K,z,G=O[M];switch(G){case"L":case"R":w=!1;break;case"N":case"AN":break;case"EN":w&&(G="AN");break;case"AL":w=!0,G="R";break;case"WS":G="N";break;case"CS":M<1||M+1>=O.length||(J=L[M-1])!=="EN"&&J!=="AN"||(V=O[M+1])!=="EN"&&V!=="AN"?G="N":w&&(V="AN"),G=V===J?V:"N";break;case"ES":G=(J=M>0?L[M-1]:"B")==="EN"&&M+1<O.length&&O[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&L[M-1]==="EN"){G="EN";break}if(w){G="N";break}for(K=M+1,z=O.length;K<z&&O[K]==="ET";)K++;G=K<z&&O[K]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(z=O.length,K=M+1;K<z&&O[K]==="NSM";)K++;if(K<z){var Y=D[M],ee=Y>=1425&&Y<=2303||Y===64286;if(J=O[K],ee&&(J==="R"||J==="AL")){G="R";break}}}G=M<1||(J=O[M-1])==="B"?"N":L[M-1];break;case"B":w=!1,a=!0,G=_;break;case"S":s=!0,G="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"BN":G="N"}return G},E=function(D,O,L){var M=D.split("");return L&&N(M,L,{hiLevel:_}),M.reverse(),O&&O.reverse(),M.join("")},N=function(D,O,L){var M,J,V,K,z,G=-1,Y=D.length,ee=0,P=[],Q=_?p:h,X=[];for(w=!1,a=!1,s=!1,J=0;J<Y;J++)X[J]=B(D[J]);for(V=0;V<Y;V++){if(z=ee,P[V]=I(D,X,P,V),M=240&(ee=Q[z][g[P[V]]]),ee&=15,O[V]=K=Q[ee][5],M>0)if(M===16){for(J=G;J<V;J++)O[J]=1;G=-1}else G=-1;if(Q[ee][6])G===-1&&(G=V);else if(G>-1){for(J=G;J<V;J++)O[J]=K;G=-1}X[V]==="B"&&(O[V]=0),L.hiLevel|=K}s&&function(te,ae,se){for(var oe=0;oe<se;oe++)if(te[oe]==="S"){ae[oe]=_;for(var ce=oe-1;ce>=0&&te[ce]==="WS";ce--)ae[ce]=_}}(X,O,Y)},j=function(D,O,L,M,J){if(!(J.hiLevel<D)){if(D===1&&_===1&&!a)return O.reverse(),void(L&&L.reverse());for(var V,K,z,G,Y=O.length,ee=0;ee<Y;){if(M[ee]>=D){for(z=ee+1;z<Y&&M[z]>=D;)z++;for(G=ee,K=z-1;G<K;G++,K--)V=O[G],O[G]=O[K],O[K]=V,L&&(V=L[G],L[G]=L[K],L[K]=V);ee=z}ee++}}},R=function(D,O,L){var M=D.split(""),J={hiLevel:_};return L||(L=[]),N(M,L,J),function(V,K,z){if(z.hiLevel!==0&&d)for(var G,Y=0;Y<V.length;Y++)K[Y]===1&&(G=b.indexOf(V[Y]))>=0&&(V[Y]=b[G+1])}(M,L,J),j(2,M,O,L,J),j(1,M,O,L,J),M.join("")};return this.__bidiEngine__.doBidiReorder=function(D,O,L){if(function(J,V){if(V)for(var K=0;K<J.length;K++)V[K]=K;o===void 0&&(o=k(J)),u===void 0&&(u=k(J))}(D,O),i||!c||u)if(i&&c&&o^u)_=o?1:0,D=E(D,O,L);else if(!i&&c&&u)_=o?1:0,D=R(D,O,L),D=E(D,O);else if(!i||o||c||u){if(i&&!c&&o^u)D=E(D,O),o?(_=0,D=R(D,O,L)):(_=1,D=R(D,O,L),D=E(D,O));else if(i&&o&&!c&&u)_=1,D=R(D,O,L),D=E(D,O);else if(!i&&!c&&o^u){var M=d;o?(_=1,D=R(D,O,L),_=0,d=!1,D=R(D,O,L),d=M):(_=0,D=R(D,O,L),D=E(D,O),_=1,d=!1,D=R(D,O,L),d=M,D=E(D,O))}}else _=0,D=R(D,O,L);else _=o?1:0,D=R(D,O,L);return D},this.__bidiEngine__.setOptions=function(D){D&&(i=D.isInputVisual,c=D.isOutputVisual,o=D.isInputRtl,u=D.isOutputRtl,d=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text,s=(n.x,n.y,n.options||{}),i=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(i=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?i.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):i.push([r.doBidiReorder(a[o])]);n.text=i}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(vr),vr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Em(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new hLe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new eLe(this.contents),this.head=new rLe(this),this.name=new oLe(this),this.cmap=new Use(this),this.toUnicode={},this.hhea=new nLe(this),this.maxp=new lLe(this),this.hmtx=new cLe(this),this.post=new sLe(this),this.os2=new aLe(this),this.loca=new fLe(this),this.glyf=new uLe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,c,u;for(u=[],i=0,o=(c=this.bbox).length;i<o;i++)t=c[i],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,s,i,o;for(i=0,s=0,o=(t=""+t).length;0<=o?s<o:s>o;s=0<=o?++s:--s)a=t.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return i*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var zd,Em=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,s,i,o,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^i)+256*(255^o)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*i+256*o+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,s;for(s=[],n=0,a=t.length;n<a;n++)r=t[n],s.push(this.writeByte(r));return s},e}(),eLe=function(){var e;function t(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,s,i,o,c,u,d,f,h,p,g,x;for(x in p=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(p)/c),i=Math.floor(f/c),d=16*p-f,(a=new Em).writeInt(this.scalarType),a.writeShort(p),a.writeShort(f),a.writeShort(i),a.writeShort(d),s=16*p,u=a.pos+s,o=null,g=[],r)for(h=r[x],a.writeString(x),a.writeInt(e(h)),a.writeInt(u),a.writeInt(h.length),g=g.concat(h),x==="head"&&(o=u),u+=h.length;u%4;)g.push(0),u++;return a.write(g),n=2981146554-e(a.data),a.pos=o+8,a.writeUInt32(n),a.data},e=function(r){var n,a,s,i;for(r=Qse.call(r);r.length%4;)r.push(0);for(s=new Em(r),a=0,n=0,i=r.length;n<i;n=n+=4)a+=s.readUInt32();return 4294967295&a},t}(),tLe={}.hasOwnProperty,nf=function(e,t){for(var r in t)tLe.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};zd=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var rLe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,zd),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new Em).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),MG=function(){function e(t,r){var n,a,s,i,o,c,u,d,f,h,p,g,x,b,y,w,_;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(p=t.readUInt16(),h=p/2,t.pos+=6,s=function(){var B,k;for(k=[],c=B=0;0<=h?B<h:B>h;c=0<=h?++B:--B)k.push(t.readUInt16());return k}(),t.pos+=2,x=function(){var B,k;for(k=[],c=B=0;0<=h?B<h:B>h;c=0<=h?++B:--B)k.push(t.readUInt16());return k}(),u=function(){var B,k;for(k=[],c=B=0;0<=h?B<h:B>h;c=0<=h?++B:--B)k.push(t.readUInt16());return k}(),d=function(){var B,k;for(k=[],c=B=0;0<=h?B<h:B>h;c=0<=h?++B:--B)k.push(t.readUInt16());return k}(),a=(this.length-t.pos+this.offset)/2,o=function(){var B,k;for(k=[],c=B=0;0<=a?B<a:B>a;c=0<=a?++B:--B)k.push(t.readUInt16());return k}(),c=y=0,_=s.length;y<_;c=++y)for(b=s[c],n=w=g=x[c];g<=b?w<=b:w>=b;n=g<=b?++w:--w)d[c]===0?i=n+u[c]:(i=o[d[c]/2+(n-g)-(h-c)]||0)!==0&&(i+=u[c]),this.codeMap[n]=65535&i}t.pos=f}return e.encode=function(t,r){var n,a,s,i,o,c,u,d,f,h,p,g,x,b,y,w,_,B,k,I,E,N,j,R,D,O,L,M,J,V,K,z,G,Y,ee,P,Q,X,te,ae,se,oe,ce,me,ke,ne;switch(M=new Em,i=Object.keys(t).sort(function(_e,De){return _e-De}),r){case"macroman":for(x=0,b=function(){var _e=[];for(g=0;g<256;++g)_e.push(0);return _e}(),w={0:0},s={},J=0,G=i.length;J<G;J++)w[ce=t[a=i[J]]]==null&&(w[ce]=++x),s[a]={old:t[a],new:w[t[a]]},b[a]=w[t[a]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(b),{charMap:s,subtable:M.data,maxGlyphID:x+1};case"unicode":for(O=[],f=[],_=0,w={},n={},y=u=null,V=0,Y=i.length;V<Y;V++)w[k=t[a=i[V]]]==null&&(w[k]=++_),n[a]={old:k,new:w[k]},o=w[k]-a,y!=null&&o===u||(y&&f.push(y),O.push(a),u=o),y=a;for(y&&f.push(y),f.push(65535),O.push(65535),R=2*(j=O.length),N=2*Math.pow(Math.log(j)/Math.LN2,2),h=Math.log(N/2)/Math.LN2,E=2*j-N,c=[],I=[],p=[],g=K=0,ee=O.length;K<ee;g=++K){if(D=O[g],d=f[g],D===65535){c.push(0),I.push(0);break}if(D-(L=n[D].new)>=32768)for(c.push(0),I.push(2*(p.length+j-g)),a=z=D;D<=d?z<=d:z>=d;a=D<=d?++z:--z)p.push(n[a].new);else c.push(L-D),I.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*j+2*p.length),M.writeUInt16(0),M.writeUInt16(R),M.writeUInt16(N),M.writeUInt16(h),M.writeUInt16(E),se=0,P=f.length;se<P;se++)a=f[se],M.writeUInt16(a);for(M.writeUInt16(0),oe=0,Q=O.length;oe<Q;oe++)a=O[oe],M.writeUInt16(a);for(me=0,X=c.length;me<X;me++)o=c[me],M.writeUInt16(o);for(ke=0,te=I.length;ke<te;ke++)B=I[ke],M.writeUInt16(B);for(ne=0,ae=p.length;ne<ae;ne++)x=p[ne],M.writeUInt16(x);return{charMap:n,subtable:M.data,maxGlyphID:_+1}}},e}(),Use=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,zd),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)n=new MG(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,s;return n==null&&(n="macroman"),a=MG.encode(r,n),(s=new Em).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},t}(),nLe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,zd),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),aLe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,zd),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),sLe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,zd),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var i;for(a=r.readUInt16(),this.glyphNameIndex=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)n=r.readByte(),s.push(this.names.push(r.readString(n)));return s;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var o,c,u;for(u=[],i=o=0,c=this.file.maxp.numGlyphs;0<=c?o<c:o>c;i=0<=c?++o:--o)u.push(r.readUInt32());return u}).call(this)}},t}(),iLe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},oLe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,zd),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,s,i,o,c,u,d,f,h,p;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),a=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(u={},i=f=0,h=a.length;f<h;i=++f)s=a[i],r.pos=s.offset,d=r.readString(s.length),o=new iLe(d,s),u[p=s.nameID]==null&&(u[p]=[]),u[s.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),lLe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,zd),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),cLe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,zd),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,s,i,o,c,u;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],n=d=0;0<=s?d<s:d>s;n=0<=s?++d:--d)f.push(r.readInt16());return f}(),this.widths=(function(){var d,f,h,p;for(p=[],d=0,f=(h=this.metrics).length;d<f;d++)i=h[d],p.push(i.advance);return p}).call(this),a=this.widths[this.widths.length-1],u=[],n=o=0;0<=s?o<s:o>s;n=0<=s?++o:--o)u.push(this.widths.push(a));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),Qse=[].slice,uLe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,zd),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,s,i,o,c,u,d,f,h;return r in this.cache?this.cache[r]:(i=this.file.loca,n=this.file.contents,a=i.indexOf(r),(s=i.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,o=(c=new Em(n.read(s))).readShort(),d=c.readShort(),h=c.readShort(),u=c.readShort(),f=c.readShort(),this.cache[r]=o===-1?new ALe(c,d,h,u,f):new dLe(c,o,d,h,u,f),this.cache[r]))},t.prototype.encode=function(r,n,a){var s,i,o,c,u;for(o=[],i=[],c=0,u=n.length;c<u;c++)s=r[n[c]],i.push(o.length),s&&(o=o.concat(s.encode(a)));return i.push(o.length),{table:o,offsets:i}},t}(),dLe=function(){function e(t,r,n,a,s,i){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),ALe=function(){function e(t,r,n,a,s){var i,o;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Em(Qse.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),fLe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,zd),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=2)i.push(2*r.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=4)i.push(r.readUInt32());return i}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),s=0,i=0,o=0;o<a.length;++o)if(a[o]=s,i<n.length&&n[i]==o){++i,a[o]=s;var c=this.offsets[o],u=this.offsets[o+1]-c;u>0&&(s+=u)}for(var d=new Array(4*a.length),f=0;f<a.length;++f)d[4*f+3]=255&a[f],d[4*f+2]=(65280&a[f])>>8,d[4*f+1]=(16711680&a[f])>>16,d[4*f]=(4278190080&a[f])>>24;return d},t}(),hLe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,s,i,o,c;for(a={},i=0,o=t.length;i<o;i++)a[s=t[i]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},e.prototype.encode=function(t,r){var n,a,s,i,o,c,u,d,f,h,p,g,x,b,y;for(a in n=Use.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(t),p={0:0},y=n.charMap)p[(c=y[a]).old]=c.new;for(g in h=n.maxGlyphID,i)g in p||(p[g]=h++);return d=function(w){var _,B;for(_ in B={},w)B[w[_]]=_;return B}(p),f=Object.keys(d).sort(function(w,_){return w-_}),x=function(){var w,_,B;for(B=[],w=0,_=f.length;w<_;w++)o=f[w],B.push(d[o]);return B}(),s=this.font.glyf.encode(i,x,p),u=this.font.loca.encode(s.offsets,x),b={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},e}();vr.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,s,i;if(Array.isArray(r))return"["+function(){var o,c,u;for(u=[],o=0,c=r.length;o<c;o++)n=r[o],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)i=r[a],s.push("/"+a+" "+t.convert(i));return s.push(">>"),s.join(`
`)}return""+r},t}();function Hse(e,t,r,n,a){n=n||{};var s=1.15,i=a.internal.scaleFactor,o=a.internal.getFontSize()/i,c=a.getLineHeightFactor?a.getLineHeightFactor():s,u=o*c,d=/\r\n|\r|\n/g,f="",h=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,h=f.length||1),r+=o*(2-s),n.valign==="middle"?r-=h/2*u:n.valign==="bottom"&&(r-=h*u),n.halign==="center"||n.halign==="right"){var p=o;if(n.halign==="center"&&(p*=.5),f&&h>=1){for(var g=0;g<f.length;g++)a.text(f[g],t-a.getStringUnitWidth(f[g])*p,r),r+=u;return a}t-=a.getStringUnitWidth(e)*p}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var UG={},kv=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:UG=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,s;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,c=i.fontName;if(t.font&&(c=t.font),t.fontStyle){o=t.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(c,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,s){return this.jsPDFDocument.rect(t,r,n,a,s)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return UG||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),qF=function(e,t){return qF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},qF(e,t)};function Vse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");qF(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var zse=function(e){Vse(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function mLe(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function pLe(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function GN(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,i){return Math.max(s,i)},0);return a}function $se(e,t,r,n){var a=t.settings.tableLineWidth,s=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:s});var i=Gse(a,!1);i&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,i)}function Gse(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function Ak(e,t){var r,n,a,s;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(s=e.bottom)!==null&&s!==void 0?s:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function Kse(e,t){var r=Ak(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function gLe(e,t,r,n,a){var s={},i=1.3333333333333333,o=H3(t,function(_){return a.getComputedStyle(_).backgroundColor});o!=null&&(s.fillColor=o);var c=H3(t,function(_){return a.getComputedStyle(_).color});c!=null&&(s.textColor=c);var u=vLe(n,r);u&&(s.cellPadding=u);var d="borderTopColor",f=i*r,h=n.borderTopWidth;if(n.borderBottomWidth===h&&n.borderRightWidth===h&&n.borderLeftWidth===h){var p=(parseFloat(h)||0)/f;p&&(s.lineWidth=p)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var g=H3(t,function(_){return a.getComputedStyle(_)[d]});g!=null&&(s.lineColor=g);var x=["left","right","center","justify"];x.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),x=["middle","bottom","top"],x.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var b=parseInt(n.fontSize||"");isNaN(b)||(s.fontSize=b/i);var y=xLe(n);y&&(s.fontStyle=y);var w=(n.fontFamily||"").toLowerCase();return e.indexOf(w)!==-1&&(s.font=w),s}function xLe(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function H3(e,t){var r=qse(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function qse(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:qse(e.parentElement,t):r}function vLe(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,s=r.map(function(o){return parseInt(o||"0")/n}),i=Ak(s,0);return a>i.top&&(i.top=a),a>i.bottom&&(i.bottom=a),i}function Wse(e,t,r,n,a){var s,i;n===void 0&&(n=!1),a===void 0&&(a=!1);var o;typeof t=="string"?o=r.document.querySelector(t):o=t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],h=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:h};for(var p=0;p<o.rows.length;p++){var g=o.rows[p],x=(i=(s=g==null?void 0:g.parentElement)===null||s===void 0?void 0:s.tagName)===null||i===void 0?void 0:i.toLowerCase(),b=bLe(c,u,r,g,n,a);b&&(x==="thead"?d.push(b):x==="tfoot"?h.push(b):f.push(b))}return{head:d,body:f,foot:h}}function bLe(e,t,r,n,a,s){for(var i=new zse(n),o=0;o<n.cells.length;o++){var c=n.cells[o],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;s&&(d=gLe(e,c,t,u,r)),i.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:yLe(c)})}}var f=r.getComputedStyle(n);if(i.length>0&&(a||f.display!=="none"))return i}function yLe(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function wLe(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function eh(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(s[c]=o[c])}return s}function Xse(e,t){var r=new kv(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();wLe(a,n,t);var s=eh({},a,n,t),i;typeof window<"u"&&(i=window);var o=ELe(a,n,t),c=CLe(a,n,t),u=_Le(r,s),d=SLe(r,s,i);return{id:t.tableId,content:d,hooks:c,styles:o,settings:u}}function ELe(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=e[c],d=t[c],f=r[c];n.columnStyles=eh({},u,d,f)}else{var h=[e,t,r],p=h.map(function(g){return g[c]||{}});n[c]=eh({},p[0],p[1],p[2])}},s=0,i=Object.keys(n);s<i.length;s++){var o=i[s];a(o)}return n}function CLe(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,i=n;s<i.length;s++){var o=i[s];o.didParseCell&&a.didParseCell.push(o.didParseCell),o.willDrawCell&&a.willDrawCell.push(o.willDrawCell),o.didDrawCell&&a.didDrawCell.push(o.didDrawCell),o.willDrawPage&&a.willDrawPage.push(o.willDrawPage),o.didDrawPage&&a.didDrawPage.push(o.didDrawPage)}return a}function _Le(e,t){var r,n,a,s,i,o,c,u,d,f,h,p,g=Ak(t.margin,40/e.scaleFactor()),x=(r=NLe(e,t.startY))!==null&&r!==void 0?r:g.top,b;t.showFoot===!0?b="everyPage":t.showFoot===!1?b="never":b=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var w=(s=t.useCss)!==null&&s!==void 0?s:!1,_=t.theme||(w?"plain":"striped"),B=!!t.horizontalPageBreak,k=(i=t.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(o=t.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:w,theme:_,startY:x,margin:g,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:b,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(h=t.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:B,horizontalPageBreakRepeat:k,horizontalPageBreakBehaviour:(p=t.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function NLe(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),s=!1;if(r&&r.startPageNumber){var i=r.startPageNumber+r.pageNumber-1;s=i===a}return typeof t=="number"?t:(t==null||t===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function SLe(e,t,r){var n=t.head||[],a=t.body||[],s=t.foot||[];if(t.html){var i=t.includeHiddenHtml;if(r){var o=Wse(e,t.html,r,i,t.useCss)||{};n=o.head||n,a=o.body||n,s=o.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||kLe(n,a,s);return{columns:c,head:n,body:a,foot:s}}function kLe(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var i=1,o;Array.isArray(n)?o=n[parseInt(s)]:o=n[s],typeof o=="object"&&!Array.isArray(o)&&(i=(o==null?void 0:o.colSpan)||1);for(var c=0;c<i;c++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var WF=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),BLe=function(e){Vse(t,e);function t(r,n,a,s,i,o){var c=e.call(this,r,n,o)||this;return c.cell=a,c.row=s,c.column=i,c.section=s.section,c}return t}(WF),jLe=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,s,i){for(var o=0,c=r;o<c.length;o++){var u=c[o],d=new BLe(t,this,n,a,s,i),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new WF(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new WF(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),Yse=function(){function e(t,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=t,t instanceof zse&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,s){var i=n.cells[s.index];if(!i)return 0;var o=r.getLineHeight(i.styles.fontSize),c=i.padding("vertical"),u=c+o;return u>a?u:a},0)},e}(),Jse=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var s=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,s=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var i=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=i.split(o)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=Ak(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),TLe=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var s=a[n],i=s.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(r=Math.max(r,i.styles.cellWidth))}return r},e}();function ILe(e,t){FLe(e,t);var r=[],n=0;t.columns.forEach(function(s){var i=s.getMaxCustomCellWidth(t);i?s.width=i:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=XF(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=XF(r,a,function(s){return s.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),DLe(t),PLe(t,e),OLe(t)}function FLe(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=Kse(e,t);t.allRows().forEach(function(s){for(var i=0,o=t.columns;i<o.length;i++){var c=o[i],u=s.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,s,c,null);var f=u.padding("horizontal");u.contentWidth=GN(u.text,u.styles,e)+f;var h=GN(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=h+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var p=10/r;u.minWidth=u.styles.minCellWidth||p,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(s){for(var i=0,o=t.columns;i<o.length;i++){var c=o[i],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function XF(e,t,r){for(var n=t,a=e.reduce(function(p,g){return p+g.wrappedWidth},0),s=0;s<e.length;s++){var i=e[s],o=i.wrappedWidth/a,c=n*o,u=i.width+c,d=r(i),f=u<d?d:u;t-=f-i.width,i.width=f}if(t=Math.round(t*1e10)/1e10,t){var h=e.filter(function(p){return t<0?p.width>r(p):!0});h.length&&(t=XF(h,t,r))}return t}function OLe(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var s=n[a],i=0,o=e.columns;i<o.length;i++){var c=o[i],u=t[c.index];if(r>1)r--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete t[c.index];else{var d=s.cells[c.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var f=n.length-a,h=d.rowSpan>f?f:d.rowSpan;t[c.index]={cell:d,left:h,row:s}}}}}function DLe(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,s=0,i=0,o=0;o<e.columns.length;o++){var c=e.columns[o];if(i-=1,i>1&&e.columns[o+1])s+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+s}else{var u=n.cells[c.index];if(!u)continue;if(i=u.colSpan,s=0,u.colSpan>1){a=u,s+=c.width;continue}u.width=c.width+s}}}function PLe(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var s=a[n],i=0,o=e.columns;i<o.length;i++){var c=o[i],u=s.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=QG(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=QG(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<h*u.rowSpan?r={height:h,count:u.rowSpan}:r&&r.count>0&&r.height>h&&(h=r.height),h>s.height&&(s.height=h)}}r.count--}}function QG(e,t,r,n,a){return e.map(function(s){return RLe(s,t,r,n,a)})}function RLe(e,t,r,n,a){var s=1e4*n.scaleFactor();if(t=Math.ceil(t*s)/s,t>=GN(e,r,n))return e;for(;t<GN(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function Zse(e,t){var r=new kv(e),n=LLe(t,r.scaleFactor()),a=new jLe(t,n);return ILe(r,a),r.applyStyles(r.userStyles),a}function LLe(e,t){var r=e.content,n=ULe(r.columns);if(r.head.length===0){var a=HG(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=HG(n,"foot");a&&r.foot.push(a)}var s=e.settings.theme,i=e.styles;return{columns:n,head:V3("head",r.head,n,i,s,t),body:V3("body",r.body,n,i,s,t),foot:V3("foot",r.foot,n,i,s,t)}}function V3(e,t,r,n,a,s){var i={},o=t.map(function(c,u){for(var d=0,f={},h=0,p=0,g=0,x=r;g<x.length;g++){var b=x[g];if(i[b.index]==null||i[b.index].left===0)if(p===0){var y=void 0;Array.isArray(c)?y=c[b.index-h-d]:y=c[b.dataKey];var w={};typeof y=="object"&&!Array.isArray(y)&&(w=(y==null?void 0:y.styles)||{});var _=QLe(e,b,u,a,n,s,w),B=new Jse(y,_,e);f[b.dataKey]=B,f[b.index]=B,p=B.colSpan-1,i[b.index]={left:B.rowSpan-1,times:p}}else p--,h++;else i[b.index].left--,p=i[b.index].times,d++}return new Yse(c,u,e,f)});return o}function HG(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=MLe(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function MLe(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function ULe(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new TLe(a,t,r)})}function QLe(e,t,r,n,a,s,i){var o=pLe(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var u=eh({},o.table,o[e],a.styles,c),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=e==="body"?d:{},h=e==="body"&&r%2===0?eh({},o.alternateRow,a.alternateRowStyles):{},p=mLe(s),g=eh({},p,u,h,f);return eh(g,i)}function HLe(e,t,r){var n;r===void 0&&(r={});var a=Kse(e,t),s=new Map,i=[],o=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(h){var p=t.columns.find(function(g){return g.dataKey===h||g.index===h});p&&!s.has(p.index)&&(s.set(p.index,!0),i.push(p.index),o.push(t.columns[p.index]),a-=p.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(s.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||a>=f)u=!1,i.push(d),o.push(t.columns[d]),a-=f;else break;d++}return{colIndexes:i,columns:o,lastIndex:d-1}}function VLe(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=HLe(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function eie(e,t){var r=t.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},i=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=n+a.bottom+i;if(r.pageBreak==="avoid"){var c=t.body,u=c.reduce(function(h,p){return h+p.height},0);o+=u}var d=new kv(e);(r.pageBreak==="always"||r.startY!=null&&o>d.pageSize().height)&&(rie(d),s.y=a.top),t.callWillDrawPageHooks(d,s);var f=eh({},s);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?zLe(d,t,f,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(h){return Ch(d,t,h,s,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(h,p){var g=p===t.body.length-1;KN(d,t,h,g,f,s,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(h){return Ch(d,t,h,s,t.columns)})),$se(d,t,f,s),t.callEndPageHooks(d,s),t.finalY=s.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function zLe(e,t,r,n){var a=VLe(e,t),s=t.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?sw(e,t,r,n,u.columns,!0):VG(e,t,n,u.columns),$Le(e,t,r,n,u.columns),z3(e,t,n,u.columns)});else for(var i=-1,o=a[0],c=function(){var u=i;if(o){e.applyStyles(e.userStyles);var d=o.columns;i>=0?sw(e,t,r,n,d,!0):VG(e,t,n,d),u=zG(e,t,i+1,n,d),z3(e,t,n,d)}var f=u-i;a.slice(1).forEach(function(h){e.applyStyles(e.userStyles),sw(e,t,r,n,h.columns,!0),zG(e,t,i+1,n,h.columns,f),z3(e,t,n,h.columns)}),i=u};i<t.body.length-1;)c()}function VG(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(s){return Ch(e,t,s,r,n)})}function $Le(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(s,i){var o=i===t.body.length-1;KN(e,t,s,o,r,n,a)})}function zG(e,t,r,n,a,s){e.applyStyles(e.userStyles),s=s??t.body.length;var i=Math.min(r+s,t.body.length),o=-1;return t.body.slice(r,i).forEach(function(c,u){var d=r+u===t.body.length-1,f=tie(e,t,d,n);c.canEntireRowFit(f,a)&&(Ch(e,t,c,n,a),o=r+u)}),o}function z3(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(s){return Ch(e,t,s,r,n)})}function GLe(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),s=Math.floor((t-a)/n);return Math.max(0,s)}function KLe(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var s=0,i=0,o=r.columns;i<o.length;i++){var c=o[i],u=e.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new Jse(u.raw,u.styles,u.section);d=eh(d,u),d.text=[];var f=GLe(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var h=n.scaleFactor(),p=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(h,p),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(h,p),d.contentHeight>s&&(s=d.contentHeight),a[c.index]=d}}var g=new Yse(e.raw,-1,e.section,a,!0);g.height=s;for(var x=0,b=r.columns;x<b.length;x++){var c=b[x],d=g.cells[c.index];d&&(d.height=g.height);var u=e.cells[c.index];u&&(u.height=e.height)}return g}function qLe(e,t,r,n){var a=e.pageSize().height,s=n.settings.margin,i=s.top+s.bottom,o=a-i;t.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),u=c<r;if(c>o)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>o;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function KN(e,t,r,n,a,s,i){var o=tie(e,t,n,s);if(r.canEntireRowFit(o,i))Ch(e,t,r,s,i);else if(qLe(e,r,o,t)){var c=KLe(r,o,t,e);Ch(e,t,r,s,i),sw(e,t,a,s,i),KN(e,t,c,n,a,s,i)}else sw(e,t,a,s,i),KN(e,t,r,n,a,s,i)}function Ch(e,t,r,n,a){n.x=t.settings.margin.left;for(var s=0,i=a;s<i.length;s++){var o=i[s],c=r.cells[o.index];if(!c){n.x+=o.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,c,r,o,n);if(u===!1){n.x+=o.width;continue}WLe(e,c,n);var d=c.getTextPos();Hse(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,o,n),n.x+=o.width}n.y+=r.height}function WLe(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=Gse(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),XLe(e,t,r,n.lineWidth))}function XLe(e,t,r,n){var a,s,i,o;n.top&&(a=r.x,s=r.y,i=r.x+t.width,o=r.y,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,s,i,o)),n.bottom&&(a=r.x,s=r.y+t.height,i=r.x+t.width,o=r.y+t.height,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,s,i,o)),n.left&&(a=r.x,s=r.y,i=r.x,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.left,a,s,i,o)),n.right&&(a=r.x+t.width,s=r.y,i=r.x+t.width,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.right,a,s,i,o));function c(u,d,f,h,p){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,h,p,"S")}}function tie(e,t,r,n){var a=t.settings.margin.bottom,s=t.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function sw(e,t,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!s&&t.foot.forEach(function(o){return Ch(e,t,o,n,a)}),t.callEndPageHooks(e,n);var i=t.settings.margin;$se(e,t,r,n),rie(e),t.pageNumber++,n.x=i.left,n.y=i.top,r.y=i.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(o){return Ch(e,t,o,n,a)}),e.applyStyles(e.userStyles))}function rie(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function YLe(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=Xse(this,n),s=Zse(this,a);return eie(this,s),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){Hse(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return kv.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){kv.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new kv(this),s=Wse(a,t,window,r,!1),i=s.head,o=s.body,c=((n=i[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:o,data:o}}}var $3;function bo(e,t){var r=Xse(e,t),n=Zse(e,r);eie(e,n)}try{if(typeof window<"u"&&window){var $G=window,GG=$G.jsPDF||(($3=$G.jspdf)===null||$3===void 0?void 0:$3.jsPDF);GG&&YLe(GG)}}catch(e){console.error("Could not apply autoTable plugin",e)}const U8="evaluaciones_pruebas",Q8="evaluaciones_rubricas_estaticas",H8="evaluaciones_rubricas_interactivas",JLe="usuarios",fk=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},ZLe=e=>{const t=$t(kt(ht,U8),Sr("fechaCreacion","desc"));return pr(t,n=>{e(n.docs.map(a=>fk(a)))},n=>{console.error("Error al suscribirse a las pruebas:",n),e([])})},eMe=async e=>{try{const{id:t,...r}=e,n=dr(ht,U8,t);await Ji(n,{...r,fechaCreacion:sr.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la prueba:",t),new Error("No se pudo guardar la prueba.")}},tMe=async e=>{try{await za(dr(ht,U8,e))}catch(t){throw console.error("Error al eliminar la prueba:",t),new Error("No se pudo eliminar la prueba.")}},rMe=e=>{const t=$t(kt(ht,Q8),Sr("fechaCreacion","desc"));return pr(t,n=>{e(n.docs.map(a=>fk(a)))},n=>{console.error("Error al suscribirse a las rúbricas estáticas:",n),e([])})},nMe=async e=>{try{const{id:t,...r}=e,n=dr(ht,Q8,t);await Ji(n,{...r,fechaCreacion:sr.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la rúbrica estática:",t),new Error("No se pudo guardar la rúbrica.")}},aMe=async e=>{try{await za(dr(ht,Q8,e))}catch(t){throw console.error("Error al eliminar la rúbrica estática:",t),new Error("No se pudo eliminar la rúbrica.")}},sMe=e=>{const t=$t(kt(ht,H8));return pr(t,n=>{e(n.docs.map(a=>fk(a)))},n=>{console.error("Error al suscribirse a las rúbricas interactivas:",n),e([])})},iMe=async e=>{try{const{id:t,...r}=e,n=dr(ht,H8,t);await Ji(n,r)}catch(t){throw console.error("Error al guardar la rúbrica interactiva:",t),new Error("No se pudo guardar la rúbrica interactiva.")}},oMe=async e=>{try{return(await Tn(kt(ht,H8),e)).id}catch(t){throw console.error("Error al crear la rúbrica interactiva:",t),new Error("No se pudo crear la rúbrica interactiva.")}},lMe=e=>{const t=$t(kt(ht,JLe));return pr(t,n=>{e(n.docs.map(a=>fk(a)))},n=>{console.error("Error al suscribirse a los usuarios:",n),e([])})},cMe=["Selección múltiple","Verdadero o Falso","Desarrollo","Términos pareados","Comprensión de lectura"],KG={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de lectura":[1,2,3]},o5=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},uMe=({open:e})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):l.jsxs(l.Fragment,{children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),dMe=({item:e,index:t,showAnswers:r})=>{const n=S.useMemo(()=>e.tipo==="Términos pareados"?[...e.pares.map(a=>a.definicion)].sort(()=>Math.random()-.5):[],[e]);return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[t+1,". ",e.pregunta," (",e.puntaje," pts)"]}),e.habilidadBloom&&l.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:e.habilidadBloom})]}),e.tipo==="Selección múltiple"&&l.jsx("div",{className:"ml-4 mt-2 space-y-2",children:e.opciones.map((a,s)=>{const i=r&&s===e.respuestaCorrecta;return l.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[l.jsx("div",{className:"w-5 h-5 border rounded-full"}),l.jsxs("span",{children:[String.fromCharCode(65+s),") ",a]})]},s)})}),e.tipo==="Desarrollo"&&l.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),e.tipo==="Verdadero o Falso"&&l.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[l.jsx("span",{children:"V ___ F ___"}),r&&l.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",e.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),e.tipo==="Términos pareados"&&l.jsxs("div",{className:"mt-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),l.jsx("div",{className:"space-y-2",children:e.pares.map((a,s)=>l.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[s+1,". ",a.concepto]},s))})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definición"}),l.jsx("div",{className:"space-y-2",children:n.map((a,s)=>l.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:a},s))})]})]}),r&&l.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[l.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),l.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:e.pares.map((a,s)=>l.jsxs("li",{children:[l.jsx("strong",{children:a.concepto})," → ",a.definicion]},s))})]})]}),e.tipo==="Comprensión de lectura"&&l.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[l.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:e.texto}),e.preguntas.map((a,s)=>{if(a.tipo==="Selección múltiple"){const i=a;return l.jsxs("div",{className:"pt-2",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&l.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),l.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((o,c)=>{const u=r&&c===i.respuestaCorrecta;return l.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/50":""}`,children:[l.jsx("div",{className:"w-5 h-5 border rounded-full"}),l.jsxs("span",{children:[String.fromCharCode(65+c),") ",o]})]},c)})})]},a.id)}if(a.tipo==="Desarrollo"){const i=a;return l.jsxs("div",{className:"pt-2",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&l.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),l.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},a.id)}return null})]})]},e.id)},AMe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(null),[a,s]=S.useState(!1),[i,o]=S.useState(!1),[c,u]=S.useState(null),[d,f]=S.useState(!1),h={nombre:"",asignatura:qi[0],nivel:yQ[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[p,g]=S.useState(h);S.useEffect(()=>{const E=ZLe(t);return()=>E()},[]);const x=E=>{const{name:N,value:j}=E.target;g(R=>({...R,[N]:j}))},b=E=>{g(N=>{const j={...N.tiposActividad};return j[E]?delete j[E]:j[E]=KG[E][0],{...N,tiposActividad:j}})},y=(E,N)=>{g(j=>({...j,tiposActividad:{...j.tiposActividad,[E]:N}}))},w=E=>{g(N=>{const j=N.selectedNee.includes(E)?N.selectedNee.filter(R=>R!==E):[...N.selectedNee,E];return{...N,selectedNee:j}})},_=async E=>{if(E.preventDefault(),!p.nombre.trim()||!p.contenido.trim()||Object.keys(p.tiposActividad).length===0){u("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}s(!0),u(null);const N=Object.entries(p.tiposActividad).map(([D,O])=>`- ${O} ítem(s) de tipo '${D}'`).join(`
`),j=p.isNee&&p.selectedNee.length>0?`
            **Adaptación CRÍTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes características: ${p.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negación o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes más pequeñas si es posible.
            - Para 'Comprensión de Lectura', usa textos más cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Selección Múltiple', asegúrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",R=`
            Eres un experto en evaluación educativa para la educación media en Chile.
            Genera una prueba o guía de trabajo completa en formato JSON estructurado.
            
            Información base:
            - Nombre de la prueba: ${p.nombre}
            - Asignatura: ${p.asignatura}
            - Nivel: ${p.nivel}
            - Contenido a evaluar: "${p.contenido}"
            - Tipos y cantidad de ítems solicitados:
              ${N}
            - Nivel de Dificultad General: ${p.dificultad}. 'Fácil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicación y análisis simple. 'Avanzado' requiere síntesis, evaluación y resolución de problemas complejos.
            
            ${j}

            Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json. El objeto debe contener:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluación.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de ítem solicitado. Cada actividad debe tener:
               - 'id': Un UUID generado por ti.
               - 'titulo': Un título descriptivo (ej: "Actividad 1: Selección Múltiple").
               - 'instrucciones': Instrucciones para esa actividad específica.
               - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                   - 'id': Un UUID generado por ti.
                   - 'tipo': El tipo de ítem.
                   - 'pregunta': El enunciado de la pregunta.
                   - 'puntaje': Un puntaje numérico.
                   - 'habilidadBloom': La habilidad principal de la Taxonomía de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                   - Campos adicionales según el tipo:
                       - Para 'Selección múltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (índice numérico de la respuesta correcta, de 0 a 3).
                       - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                       - Para 'Términos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                       - Para 'Comprensión de lectura': 'texto' (un string que DEBE contener un texto original y coherente de 150 a 250 palabras, generado por ti, sobre el contenido a evaluar) y 'preguntas' (un array de sub-preguntas basadas en el texto que acabas de generar, las cuales pueden ser 'Selección múltiple' o 'Desarrollo', y cada una debe tener su propia 'id', 'pregunta', 'puntaje', 'habilidadBloom', etc.).
                       - Para 'Desarrollo': no necesita campos adicionales.
        `;try{d1("Evaluación - Pruebas");const D="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",K=(await(await new us(D).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(R)).response).text().replace(/^```json\s*|```\s*$/g,""),z=JSON.parse(K);let G=0;z.actividades.forEach(ee=>{ee.items.forEach(P=>{G+=P.puntaje||0,P.tipo==="Comprensión de lectura"&&P.preguntas&&P.preguntas.forEach(Q=>{G+=Q.puntaje||0})})});const Y={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:p.nombre,asignatura:p.asignatura,nivel:p.nivel,contenidoOriginal:p.contenido,tiposActividadOriginal:p.tiposActividad,objetivo:z.objetivo,instruccionesGenerales:z.instruccionesGenerales,puntajeIdeal:G,actividades:z.actividades,dificultad:p.dificultad,...p.isNee&&{adaptacionNEE:p.selectedNee}};n(Y),f(!1)}catch(D){console.error(D),u("Error al generar la prueba con IA. Revisa la consola para más detalles.")}finally{s(!1)}},B=async()=>{if(r)try{await eMe(r),alert("Prueba guardada con éxito.")}catch(E){console.error(E),alert("No se pudo guardar la prueba.")}},k=async E=>{if(window.confirm("¿Eliminar esta prueba?"))try{await tMe(E),(r==null?void 0:r.id)===E&&n(null)}catch(N){console.error(N),alert("No se pudo eliminar la prueba.")}},I=async E=>{o(!0);const N=new vr("p","mm","a4"),j=20,R=N.internal.pageSize.getHeight(),D=N.internal.pageSize.getWidth(),O=D-j*2;let L=j;const M=K=>{K.setFillColor(230,230,230),K.rect(0,0,D,25,"F"),K.setFontSize(9),K.setTextColor(0,0,0),K.text("LICEO INDUSTRIAL DE RECOLETA",j,15,{align:"left"}),K.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",D-j,15,{align:"right"})};M(N),L=30,N.setTextColor(0,0,0),N.setFont("helvetica","bold"),N.setFontSize(16),N.text(E.nombre,D/2,L,{align:"center"}),L+=10,bo(N,{startY:L,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},E.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},E.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},E.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:E.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:E.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:K=>{M(N)}}),L=N.lastAutoTable.finalY+10;const J=K=>{L+K>R-j&&(N.addPage(),M(N),L=j+15,N.setTextColor(0,0,0))},V=(K,z)=>{N.setFont("helvetica",z.isBold?"bold":"normal"),N.setFontSize(z.fontSize);const G=Array.isArray(K)?K.join(`
`):K;return N.getTextDimensions(G,{maxWidth:z.width}).h};for(const K of E.actividades){let z=V(K.titulo,{fontSize:12,width:O,isBold:!0})+V(K.instrucciones,{fontSize:10,width:O})+12;J(z),N.setFont("helvetica","bold"),N.setFontSize(12),N.setTextColor(0,0,0),N.text(K.titulo,j,L),L+=8,N.setFont("helvetica","normal"),N.setFontSize(10);const G=N.splitTextToSize(K.instrucciones,O);N.text(G,j,L),L+=G.length*(10*.35*1.15)+4;for(const[Y,ee]of K.items.entries()){let P=0;const Q=`${Y+1}. ${ee.pregunta} (${ee.puntaje} pts)`;switch(P+=V(Q,{fontSize:10,width:O,isBold:!0}),ee.tipo){case"Selección múltiple":ee.opciones.forEach(ae=>{P+=V(ae,{fontSize:10,width:O-5})+3}),P+=7;break;case"Verdadero o Falso":P+=10;break;case"Desarrollo":P+=30;break;case"Términos pareados":P+=ee.pares.length*12+20;break;case"Comprensión de lectura":const te=ee;P+=V(te.texto,{fontSize:10,width:O-10})+10,te.preguntas.forEach(ae=>{const se=`${ae.pregunta} (${ae.puntaje} pts)`;P+=V(se,{fontSize:10,width:O-5,isBold:!0}),ae.tipo==="Selección múltiple"?(ae.opciones.forEach(oe=>{P+=V(oe,{fontSize:10,width:O-10})+3}),P+=7):ae.tipo==="Desarrollo"&&(P+=30),P+=5}),P+=15;break}J(P),N.setFont("helvetica","bold"),N.setFontSize(10),N.setTextColor(0,0,0);const X=N.splitTextToSize(Q,O);if(N.text(X,j,L),L+=X.length*5+4,N.setFont("helvetica","normal"),ee.tipo==="Selección múltiple")ee.opciones.forEach((te,ae)=>{N.text(`${String.fromCharCode(65+ae)}) ${te}`,j+5,L),L+=7});else if(ee.tipo==="Verdadero o Falso")N.text("V ______    F ______",j+5,L),L+=10;else if(ee.tipo==="Desarrollo")N.setDrawColor(200,200,200),N.setFillColor(245,245,245),N.rect(j,L,O,25,"FD"),L+=30;else if(ee.tipo==="Términos pareados"){const te=[...ee.pares.map(se=>se.definicion)].sort(()=>Math.random()-.5),ae=ee.pares.map((se,oe)=>[`${oe+1}. ${se.concepto}`,`(   ) ${te[oe]}`]);bo(N,{startY:L,head:[["Columna A: Concepto","Columna B: Definición"]],body:ae,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:se=>M(N)}),L=N.lastAutoTable.finalY+10}else if(ee.tipo==="Comprensión de lectura"){const te=ee;N.setFillColor(240,240,240),N.setDrawColor(200,200,200);const ae=N.splitTextToSize(te.texto,O-10),se=ae.length*(10*.35*1.15)+8;N.rect(j,L,O,se,"FD"),L+=4,N.setFont("helvetica","normal"),N.setFontSize(10),N.setTextColor(0,0,0),N.text(ae,j+5,L),L+=se;for(const[oe,ce]of te.preguntas.entries()){const me=`${oe+1}. ${ce.pregunta} (${ce.puntaje} pts)`;N.setFont("helvetica","bold");const ke=N.splitTextToSize(me,O-5);N.text(ke,j+5,L),L+=ke.length*5+4,N.setFont("helvetica","normal"),ce.tipo==="Selección múltiple"?ce.opciones.forEach((ne,_e)=>{N.text(`${String.fromCharCode(65+_e)}) ${ne}`,j+10,L),L+=7}):ce.tipo==="Desarrollo"&&(N.setDrawColor(200,200,200),N.setFillColor(245,245,245),N.rect(j+5,L,O-5,25,"FD"),L+=30)}}L+=5}}N.save(`${E.nombre.replace(/\s/g,"_")}.pdf`),o(!1)};return r?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("button",{onClick:()=>n(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>f(!d),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[l.jsx(uMe,{open:!d})," ",l.jsxs("span",{children:[d?"Ocultar":"Mostrar"," Respuestas"]})]}),l.jsx("button",{onClick:B,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),l.jsxs("button",{onClick:()=>I(r),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":l.jsx(uee,{})," PDF"]})]})]}),l.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[l.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[l.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),l.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),l.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:r.nombre}),l.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Asignatura:"})," ",r.asignatura]}),l.jsxs("p",{className:"text-right",children:[l.jsx("strong",{children:"Puntaje Ideal:"})," ",r.puntajeIdeal]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Nivel:"})," ",r.nivel]})]}),l.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[l.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",r.dificultad||"Intermedio"]}),r.adaptacionNEE&&r.adaptacionNEE.length>0&&l.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",r.adaptacionNEE.join(", ")]})]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",r.objetivo]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Instrucciones Generales:"})," ",r.instruccionesGenerales]})]}),r.actividades.map(E=>l.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[l.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:E.titulo}),l.jsx("p",{className:"italic text-sm mb-4",children:E.instrucciones}),l.jsx("div",{className:"space-y-6",children:E.items.map((N,j)=>l.jsx(dMe,{item:N,index:j,showAnswers:d},N.id))})]},E.id))]})]}):l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),l.jsxs("form",{onSubmit:_,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",name:"nombre",value:p.nombre,onChange:x,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),l.jsx("div",{}),l.jsx("select",{name:"asignatura",value:p.asignatura,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:qi.map(E=>l.jsx("option",{children:E},E))}),l.jsx("select",{name:"nivel",value:p.nivel,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:yQ.map(E=>l.jsx("option",{children:E},E))})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),l.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((E,N)=>l.jsx("button",{type:"button",onClick:()=>g(j=>({...j,dificultad:E})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${N===0?"rounded-l-lg":""} ${N===2?"rounded-r-lg":""}
                                            ${p.dificultad===E?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:E},E))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:p.isNee,onChange:E=>g(N=>({...N,isNee:E.target.checked,selectedNee:E.target.checked?N.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),p.isNee&&l.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:Z5.map(E=>l.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:p.selectedNee.includes(E),onChange:()=>w(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:E})]},E))})]})]})]}),l.jsx("textarea",{name:"contenido",value:p.contenido,onChange:x,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("div",{className:"space-y-3",children:cMe.map(E=>l.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:!!p.tiposActividad[E],onChange:()=>b(E),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:E})]}),p.tiposActividad[E]&&l.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[l.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),KG[E].map(N=>l.jsx("button",{type:"button",onClick:()=>y(E,N),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${p.tiposActividad[E]===N?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:N},N))]})]},E))}),c&&l.jsx("p",{className:"text-red-500 text-sm",children:c}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",disabled:a,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:a?"Generando...":"Generar Prueba"})})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),l.jsx("div",{className:"space-y-2",children:e.length>0?e.map(E=>l.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.nombre}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[E.asignatura," - ",E.nivel," (",new Date(E.fechaCreacion).toLocaleDateString(),")"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>n(E),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),l.jsx("button",{onClick:()=>k(E.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},E.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},fMe=({rubricas:e,onSave:t,onDelete:r,onCreate:n})=>{const[a,s]=S.useState(null),[i,o]=S.useState("list"),[c,u]=S.useState(!1),[d,f]=S.useState(""),h=async(k,I)=>{if(!k.trim()||!I.trim()){alert("El título y la descripción son obligatorios.");return}u(!0);const E=`Crea una rúbrica de evaluación detallada sobre "${k}" con el propósito de "${I}". Genera entre 3 y 5 dimensiones de evaluación. Para cada dimensión, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,N={type:"ARRAY",items:{type:"OBJECT",properties:{dimension:{type:"STRING"},insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{d1("Evaluación - Rúbricas");const j="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",M=(await(await new us(j).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:N}})).response).text(),J=JSON.parse(M),V={id:crypto.randomUUID(),titulo:k,descripcion:I,fechaCreacion:new Date().toISOString(),dimensiones:J.map(K=>({id:crypto.randomUUID(),nombre:K.dimension,niveles:{insuficiente:K.insuficiente,suficiente:K.suficiente,competente:K.competente,avanzado:K.avanzado}}))};s(V)}catch(j){console.error(j),alert("Error al generar la rúbrica con IA.")}finally{u(!1)}},p=async()=>{if(!d.trim()||!a)return;const k=crypto.randomUUID(),I={id:k,nombre:d,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};s(j=>j?{...j,dimensiones:[...j.dimensiones,I]}:null),f("");const E=`Para una rúbrica sobre "${a.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensión: "${d}". Considera las dimensiones existentes como contexto: ${a.dimensiones.map(j=>j.nombre).join(", ")}. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,N={type:"OBJECT",properties:{insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["insuficiente","suficiente","competente","avanzado"]};try{d1("Evaluación - Rúbricas (Añadir Dimensión)");const j="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",M=(await(await new us(j).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:N}})).response).text(),J=JSON.parse(M);s(V=>V?{...V,dimensiones:V.dimensiones.map(K=>K.id===k?{...K,niveles:J,isLoading:!1}:K)}:null)}catch(j){console.error("Error generating dimension descriptors:",j),alert("No se pudieron generar los descriptores."),s(R=>R?{...R,dimensiones:R.dimensiones.filter(D=>D.id!==k)}:null)}},g=()=>{if(!a)return;e.some(I=>I.id===a.id)?t(a):n(a),o("list"),s(null)},x=k=>{s(k),o("form")},b=()=>{s({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),o("form")},y=(k,I,E)=>{a&&s(N=>N?{...N,dimensiones:N.dimensiones.map(j=>j.id!==k?j:I==="nombre"?{...j,nombre:E}:{...j,niveles:{...j.niveles,[I]:E}})}:null)},w=(k,I)=>{s(E=>E?{...E,[k]:I}:null)},_=k=>{a&&s(I=>I?{...I,dimensiones:I.dimensiones.filter(E=>E.id!==k)}:null)},B=()=>{if(!a)return null;const k="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",I=`${k} resize-none text-sm`;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),l.jsx("button",{onClick:()=>o("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),l.jsx("input",{value:a.titulo,onChange:E=>w("titulo",E.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${k} mt-1`})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),l.jsx("textarea",{value:a.descripcion,onChange:E=>w("descripcion",E.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${k} mt-1`})]})]}),a.dimensiones.length===0&&l.jsx("div",{className:"text-center py-4",children:l.jsx("button",{onClick:()=>h(a.titulo,a.descripcion),disabled:c||!a.titulo||!a.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:c?"Generando...":"✨ Generar Rúbrica con IA"})}),a.dimensiones.length>0&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),l.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:l.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(E=>l.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:E},E))})}),l.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.dimensiones.map(E=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-2 w-1/5",children:l.jsx("textarea",{value:E.nombre,onChange:N=>y(E.id,"nombre",N.target.value),rows:4,className:I})}),Object.keys(E.niveles).map(N=>l.jsx("td",{className:"p-2 w-1/5",children:E.isLoading?l.jsx("div",{className:"flex justify-center items-center h-full",children:l.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):l.jsx("textarea",{value:E.niveles[N],onChange:j=>y(E.id,N,j.target.value),rows:4,className:I})},N)),l.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:l.jsx("button",{onClick:()=>_(E.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},E.id))})]})}),l.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),l.jsx("input",{value:d,onChange:E=>f(E.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${k} mt-1`})]}),l.jsx("button",{onClick:p,disabled:!d.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),l.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:l.jsx("button",{onClick:g,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rúbrica"})})]})};return i==="list"?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),l.jsx("button",{onClick:b,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),e.length>0?e.map(k=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:k.titulo}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:k.descripcion})]}),l.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[l.jsx("button",{onClick:()=>x(k),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),l.jsx("button",{onClick:()=>r(k.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},k.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):B()},hMe=({allUsers:e,rubricasEstaticas:t})=>{const[r,n]=S.useState([]),[a,s]=S.useState(null),[i,o]=S.useState(null),[c,u]=S.useState({rubricaEstaticaId:"",curso:""}),[d,f]=S.useState(null);S.useEffect(()=>{const w=sMe(n);return()=>w()},[]);const h=async w=>{w.preventDefault();const _=t.find(k=>k.id===c.rubricaEstaticaId);if(!_||!c.curso){alert("Debe seleccionar una rúbrica y un curso.");return}const B={nombre:_.titulo,curso:c.curso,asignatura:"N/A",rubricaEstaticaId:_.id,resultados:{}};try{await oMe(B),u({rubricaEstaticaId:"",curso:""})}catch(k){console.error(k),alert("No se pudo crear la evaluación con rúbrica.")}},p=w=>{s(w),o(JSON.parse(JSON.stringify(w)))},g=(w,_,B)=>{i&&o(k=>{if(!k)return null;const I=JSON.parse(JSON.stringify(k));return I.resultados[w]||(I.resultados[w]={puntajes:{},feedback:""}),I.resultados[w].puntajes[_]=B,I})},x=async()=>{if(i)try{await iMe(i),s(i),alert("Cambios guardados.")}catch(w){console.error(w),alert("No se pudieron guardar los cambios.")}},b=S.useCallback(w=>{const _=i,B=t.find(R=>R.id===(_==null?void 0:_.rubricaEstaticaId));if(!_||!B)return{score:0,maxScore:0,grade:"N/A"};const k=B.dimensiones.length*4,I=_.resultados[w];if(!I)return{score:0,maxScore:k,grade:"1.0"};const E=Object.values(I.puntajes).reduce((R,D)=>R+D,0),N=1+6*(E/k),j=k>0?N.toFixed(1):"1.0";return{score:E,maxScore:k,grade:j}},[i,t]),y=async w=>{if(!i)return;const _=t.find(E=>E.id===i.rubricaEstaticaId),B=i.resultados[w];if(!_||!B||Object.keys(B.puntajes).length===0){alert("El estudiante no tiene puntajes para generar feedback.");return}f(w);const I=`Genera una retroalimentación constructiva para un estudiante basada en estos puntajes de rúbrica (de 1 a 4): ${_.dimensiones.map(E=>`${E.nombre}: ${B.puntajes[E.id]||"N/A"}/4`).join("; ")}. El nombre de la evaluación es "${_.titulo}". Destaca fortalezas y sugiere 1-2 áreas de mejora concretas. Sé breve y motivador.`;try{d1("Evaluación - Rúbricas Interactivas (Feedback)");const E="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",O=(await(await new us(E).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(I)).response).text();o(L=>{if(!L)return null;const M=JSON.parse(JSON.stringify(L));return M.resultados[w].feedback=O.replace(/(\*\*|\*)/g,""),M})}catch(E){console.error(E),alert("Error al generar feedback.")}finally{f(null)}};if(a&&i){const w=t.find(B=>B.id===a.rubricaEstaticaId),_=e.filter(B=>B.profile===Wt.ESTUDIANTE&&o5(B.curso||"")===a.curso).map(B=>B.nombreCompleto).sort();return w?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:a.nombre}),l.jsx("p",{className:"text-slate-500",children:a.curso})]}),l.jsx("button",{onClick:()=>s(null),className:"font-semibold text-slate-600",children:"← Volver"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border-collapse",children:[l.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),w.dimensiones.map(B=>l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:B.nombre},B.id)),l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentación"})]})}),l.jsx("tbody",{children:_.map(B=>{var N;const{score:k,maxScore:I,grade:E}=b(B);return l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:B}),w.dimensiones.map(j=>l.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:l.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(R=>{var D;return l.jsx("button",{onClick:()=>g(B,j.id,R),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((D=i.resultados[B])==null?void 0:D.puntajes[j.id])===R?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:R},R)})})},j.id)),l.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[k,"/",I]}),l.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:E}),l.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:l.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[l.jsx("p",{className:"text-xs w-full",children:((N=i.resultados[B])==null?void 0:N.feedback)||"Sin generar"}),l.jsx("button",{onClick:()=>y(B),disabled:d===B,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:d===B?"...":"Generar IA"})]})})]},B)})})]})}),l.jsx("div",{className:"mt-6 flex justify-end",children:l.jsx("button",{onClick:x,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):l.jsxs("div",{children:["Error: Rúbrica base no encontrada. ",l.jsx("button",{onClick:()=>s(null),children:"Volver"})]})}return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluación con Rúbrica"}),l.jsxs("form",{onSubmit:h,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[l.jsxs("select",{value:c.rubricaEstaticaId,onChange:w=>u({...c,rubricaEstaticaId:w.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione una Rúbrica Guardada"}),t.map(w=>l.jsx("option",{value:w.id,children:w.titulo},w.id))]}),l.jsxs("select",{value:c.curso,onChange:w=>u({...c,curso:w.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un Curso"}),Ks.map(w=>l.jsx("option",{value:w,children:w},w))]}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluación"})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),l.jsx("div",{className:"space-y-2",children:r.map(w=>l.jsxs("button",{onClick:()=>p(w),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[l.jsx("p",{className:"font-semibold",children:w.nombre}),l.jsx("p",{className:"text-sm text-slate-500",children:w.curso})]},w.id))})]})]})},mMe=({allUsers:e})=>{const[t,r]=S.useState(""),n=S.useMemo(()=>Array.from(new Set(e.filter(s=>s.profile===Wt.ESTUDIANTE&&s.curso).map(s=>o5(s.curso)))).sort(),[e]),a=S.useMemo(()=>{const s=e.filter(i=>i.profile===Wt.ESTUDIANTE);return t?s.filter(i=>o5(i.curso||"")===t).sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto)):s.sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto))},[e,t]);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nóminas de Cursos"}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nóminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el módulo de ",l.jsx("strong",{className:"font-semibold",children:"Administración"}),"."]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),l.jsxs("select",{id:"curso-filter",value:t,onChange:s=>r(s.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),n.map(s=>l.jsx("option",{value:s,children:s},s))]})]}),l.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:a.length>0?a.map(s=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:s.nombreCompleto}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:o5(s.curso||"")}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:s.email})]},s.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},pMe=()=>{const[e,t]=S.useState("pruebas"),[r,n]=S.useState([]),[a,s]=S.useState([]),[i,o]=S.useState(!0);S.useEffect(()=>{o(!0);const f=lMe(n),h=rMe(p=>{s(p),o(!1)});return()=>{f(),h()}},[]);const c=async f=>{try{await nMe(f)}catch(h){console.error(h),alert("No se pudo guardar la rúbrica.")}},u=async f=>{try{await aMe(f)}catch(h){console.error(h),alert("No se pudo eliminar la rúbrica.")}},d=({tabName:f,label:h})=>l.jsx("button",{onClick:()=>t(f),className:`${e===f?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:h});return i?l.jsx("div",{className:"text-center py-10",children:"Cargando módulo de evaluaciones..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación de Aprendizajes"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx(d,{tabName:"pruebas",label:"Pruebas y Guías"}),l.jsx(d,{tabName:"rubricas",label:"Generador de Rúbricas"}),l.jsx(d,{tabName:"rubricasInteractivas",label:"Rúbricas Interactivas"}),l.jsx(d,{tabName:"nominas",label:"Gestión de Nóminas"})]})}),l.jsxs("div",{className:"mt-6",children:[e==="pruebas"&&l.jsx(AMe,{}),e==="rubricas"&&l.jsx(fMe,{rubricas:a,onSave:c,onDelete:u,onCreate:c}),e==="rubricasInteractivas"&&l.jsx(hMe,{allUsers:r,rubricasEstaticas:a}),e==="nominas"&&l.jsx(mMe,{allUsers:r})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var qN={};qN.version="0.18.5";var nie=1252,gMe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],V8={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},z8=function(e){gMe.indexOf(e)!=-1&&(nie=V8[0]=e)};function xMe(){z8(1252)}var Nd=function(e){z8(e)};function $8(){Nd(1200),xMe()}function qG(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function vMe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function aie(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Iy=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?vMe(e.slice(2)):t==254&&r==255?aie(e.slice(2)):t==65279?e.slice(1):e},qC=function(t){return String.fromCharCode(t)},WG=function(t){return String.fromCharCode(t)},Xw,G0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Yw(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),s=r>>2,n=e.charCodeAt(u++),i=(r&3)<<4|n>>4,a=e.charCodeAt(u++),o=(n&15)<<2|a>>6,c=a&63,isNaN(n)?o=c=64:isNaN(a)&&(c=64),t+=G0.charAt(s)+G0.charAt(i)+G0.charAt(o)+G0.charAt(c);return t}function zc(e){var t="",r=0,n=0,a=0,s=0,i=0,o=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)s=G0.indexOf(e.charAt(u++)),i=G0.indexOf(e.charAt(u++)),r=s<<2|i>>4,t+=String.fromCharCode(r),o=G0.indexOf(e.charAt(u++)),n=(i&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),c=G0.indexOf(e.charAt(u++)),a=(o&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var pn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Ph=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Cm(e){return pn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function XG(e){return pn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Oc=function(t){return pn?Ph(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function hk(e){if(typeof ArrayBuffer>"u")return Oc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function Hm(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function bMe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function G8(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return G8(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Ki=pn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Ph(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function yMe(e){for(var t=[],r=0,n=e.length+250,a=Cm(e.length+255),s=0;s<e.length;++s){var i=e.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=e.charCodeAt(++s)&1023;a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|o>>6&15|(i&3)<<4,a[r++]=128|o&63}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|i&63;r>n&&(t.push(a.slice(0,r)),r=0,a=Cm(65535),n=65530)}return t.push(a.slice(0,r)),Ki(t)}var El=/\u0000/g,Fy=/[\u0001-\u0006]/g;function Bv(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Sd(e,t){var r=""+e;return r.length>=t?r:Ns("0",t-r.length)+r}function K8(e,t){var r=""+e;return r.length>=t?r:Ns(" ",t-r.length)+r}function WN(e,t){var r=""+e;return r.length>=t?r:r+Ns(" ",t-r.length)}function wMe(e,t){var r=""+Math.round(e);return r.length>=t?r:Ns("0",t-r.length)+r}function EMe(e,t){var r=""+e;return r.length>=t?r:Ns("0",t-r.length)+r}var YG=Math.pow(2,32);function Nx(e,t){if(e>YG||e<-YG)return wMe(e,t);var r=Math.round(e);return EMe(r,t)}function XN(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var JG=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],G3=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function CMe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e}var Lr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},ZG={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},_Me={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function YN(e,t,r){for(var n=e<0?-1:1,a=e*n,s=0,i=1,o=0,c=1,u=0,d=0,f=Math.floor(a);u<t&&(f=Math.floor(a),o=f*i+s,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),s=i,i=o,c=u,u=d;if(d>t&&(u>t?(d=c,o=s):(d=u,o=i)),!r)return[0,n*o,d];var h=Math.floor(n*o/d);return[h,n*o-h*d,d]}function Lp(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),s=0,i=[],o={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),i=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=TMe(c,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=s,o}var sie=new Date(1899,11,31,0,0,0),NMe=sie.getTime(),SMe=new Date(1900,2,1,0,0,0);function iie(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=SMe&&(r+=1440*60*1e3),(r-(NMe+(e.getTimezoneOffset()-sie.getTimezoneOffset())*6e4))/(1440*60*1e3)}function q8(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function kMe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function BMe(e){var t=e<0?12:11,r=q8(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function jMe(e){var t=q8(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Jw(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=BMe(e):t===10?r=e.toFixed(10).substr(0,12):r=jMe(e),q8(kMe(r.toUpperCase()))}function gg(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Jw(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Hu(14,iie(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function TMe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function IMe(e,t,r,n){var a="",s=0,i=0,o=r.y,c,u=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:c=o%100,u=2;break;default:c=o%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return G3[r.m-1][1];case 5:return G3[r.m-1][0];default:return G3[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return JG[r.q][0];default:return JG[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Sd(r.S,t.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,s=Math.round(i*(r.S+r.u)),s>=60*i&&(s=0),t==="s"?s===0?"0":""+s/i:(a=Sd(s,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=o,u=1;break}var d=u>0?Sd(c,u):"";return d}function K0(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var oie=/%/g;function FMe(e,t,r){var n=t.replace(oie,""),a=t.length-n.length;return oh(e,n,r*Math.pow(10,2*a))+Ns("%",a)}function OMe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return oh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function lie(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+lie(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var i=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var cie=/# (\?+)( ?)\/( ?)(\d+)/;function DMe(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),s=Math.floor(a/n),i=a-s*n,o=n;return r+(s===0?"":""+s)+" "+(i===0?Ns(" ",e[1].length+1+e[4].length):K8(i,e[1].length)+e[2]+"/"+e[3]+Sd(o,e[4].length))}function PMe(e,t,r){return r+(t===0?"":""+t)+Ns(" ",e[1].length+2+e[4].length)}var uie=/^#*0*\.([0#]+)/,die=/\).*[0#]/,Aie=/\(###\) ###\\?-####/;function ml(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function eK(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function tK(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function RMe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function LMe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function wu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(die)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?wu("n",n,r):"("+wu("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return OMe(e,t,r);if(t.indexOf("%")!==-1)return FMe(e,t,r);if(t.indexOf("E")!==-1)return lie(t,r);if(t.charCodeAt(0)===36)return"$"+wu(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Nx(c,t.length);if(t.match(/^[#?]+$/))return a=Nx(r,0),a==="0"&&(a=""),a.length>t.length?a:ml(t.substr(0,t.length-a.length))+a;if(s=t.match(cie))return DMe(s,c,u);if(t.match(/^#+0+$/))return u+Nx(c,t.length-t.indexOf("0"));if(s=t.match(uie))return a=eK(r,s[1].length).replace(/^([^\.]+)$/,"$1."+ml(s[1])).replace(/\.$/,"."+ml(s[1])).replace(/\.(\d*)$/,function(g,x){return"."+x+Ns("0",ml(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+eK(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+K0(Nx(c,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+wu(e,t,-r):K0(""+(Math.floor(r)+RMe(r,s[1].length)))+"."+Sd(tK(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return wu(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Bv(wu(e,t.replace(/[\\-]/g,""),r)),i=0,Bv(Bv(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return i<a.length?a.charAt(i++):g==="0"?"0":""}));if(t.match(Aie))return a=wu(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=YN(c,Math.pow(10,i)-1,!1),a=""+u,d=oh("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=WN(o[2],i),d.length<s[4].length&&(d=ml(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=YN(c,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?K8(o[1],i)+s[2]+"/"+s[3]+WN(o[2],i):Ns(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=Nx(r,0),t.length<=a.length?a:ml(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=t.indexOf(".")-i,h=t.length-a.length-f;return ml(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return i=tK(r,s[1].length),r<0?"-"+wu(e,t,-r):K0(LMe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Sd(0,3-g.length):"")+g})+"."+Sd(i,s[1].length);switch(t){case"###,##0.00":return wu(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=K0(Nx(c,0));return p!=="0"?u+p:"";case"###,###.00":return wu(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return wu(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function MMe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return oh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function UMe(e,t,r){var n=t.replace(oie,""),a=t.length-n.length;return oh(e,n,r*Math.pow(10,2*a))+Ns("%",a)}function fie(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+fie(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function kA(e,t,r){if(e.charCodeAt(0)===40&&!t.match(die)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?kA("n",n,r):"("+kA("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return MMe(e,t,r);if(t.indexOf("%")!==-1)return UMe(e,t,r);if(t.indexOf("E")!==-1)return fie(t,r);if(t.charCodeAt(0)===36)return"$"+kA(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Sd(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:ml(t.substr(0,t.length-a.length))+a;if(s=t.match(cie))return PMe(s,c,u);if(t.match(/^#+0+$/))return u+Sd(c,t.length-t.indexOf("0"));if(s=t.match(uie))return a=(""+r).replace(/^([^\.]+)$/,"$1."+ml(s[1])).replace(/\.$/,"."+ml(s[1])),a=a.replace(/\.(\d*)$/,function(g,x){return"."+x+Ns("0",ml(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+K0(""+c);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+kA(e,t,-r):K0(""+r)+"."+Ns("0",s[1].length);if(s=t.match(/^#,#*,#0/))return kA(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Bv(kA(e,t.replace(/[\\-]/g,""),r)),i=0,Bv(Bv(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return i<a.length?a.charAt(i++):g==="0"?"0":""}));if(t.match(Aie))return a=kA(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=YN(c,Math.pow(10,i)-1,!1),a=""+u,d=oh("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=WN(o[2],i),d.length<s[4].length&&(d=ml(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=YN(c,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?K8(o[1],i)+s[2]+"/"+s[3]+WN(o[2],i):Ns(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:ml(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=t.indexOf(".")-i,h=t.length-a.length-f;return ml(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+kA(e,t,-r):K0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Sd(0,3-g.length):"")+g})+"."+Sd(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=K0(""+c);return p!=="0"?u+p:"";default:if(t.match(/\.[0#?]*$/))return kA(e,t.slice(0,t.lastIndexOf(".")),r)+ml(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function oh(e,t,r){return(r|0)===r?kA(e,t,r):wu(e,t,r)}function QMe(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var hie=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function tb(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":XN(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(hie))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function HMe(e,t,r,n){for(var a=[],s="",i=0,o="",c="t",u,d,f,h="H";i<e.length;)switch(o=e.charAt(i)){case"G":if(!XN(e,i))throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"G",v:"General"},i+=7;break;case'"':for(s="";(f=e.charCodeAt(++i))!==34&&i<e.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++i;break;case"\\":var p=e.charAt(++i),g=p==="("||p===")"?p:"t";a[a.length]={t:g,v:p},++i;break;case"_":a[a.length]={t:"t",v:" "},i+=2;break;case"@":a[a.length]={t:"T",v:t},++i;break;case"B":case"b":if(e.charAt(i+1)==="1"||e.charAt(i+1)==="2"){if(u==null&&(u=Lp(t,r,e.charAt(i+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(i,2)},c=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=Lp(t,r),u==null))return"";for(s=o;++i<e.length&&e.charAt(i).toLowerCase()===o;)s+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),a[a.length]={t:o,v:s},c=o;break;case"A":case"a":case"上":var x={t:o,v:o};if(u==null&&(u=Lp(t,r)),e.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(x.v=u.H>=12?"P":"A"),x.t="T",h="h",i+=3):e.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(x.v=u.H>=12?"PM":"AM"),x.t="T",i+=5,h="h"):e.substr(i,5).toUpperCase()==="上午/下午"?(u!=null&&(x.v=u.H>=12?"下午":"上午"),x.t="T",i+=5,h="h"):(x.t="t",++i),u==null&&x.t==="T")return"";a[a.length]=x,c=o;break;case"[":for(s=o;e.charAt(i++)!=="]"&&i<e.length;)s+=e.charAt(i);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(hie)){if(u==null&&(u=Lp(t,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",tb(e)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++i<e.length&&(o=e.charAt(i))==="0";)s+=o;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++i<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(i))>-1;)s+=o;a[a.length]={t:"n",v:s};break;case"?":for(s=o;e.charAt(++i)===o;)s+=o;a[a.length]={t:o,v:s},c=o;break;case"*":++i,(e.charAt(i)==" "||e.charAt(i)=="*")&&++i;break;case"(":case")":a[a.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;i<e.length&&"0123456789".indexOf(e.charAt(++i))>-1;)s+=e.charAt(i);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:o,v:o},++i;break;case"$":a[a.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"t",v:o},++i;break}var b=0,y=0,w;for(i=a.length-1,c="t";i>=0;--i)switch(a[i].t){case"h":case"H":a[i].t=h,c="h",b<1&&(b=1);break;case"s":(w=a[i].v.match(/\.0+$/))&&(y=Math.max(y,w[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":c=a[i].t;break;case"m":c==="s"&&(a[i].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&a[i].v.match(/[Hh]/)&&(b=1),b<2&&a[i].v.match(/[Mm]/)&&(b=2),b<3&&a[i].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var _="",B;for(i=0;i<a.length;++i)switch(a[i].t){case"t":case"T":case" ":case"D":break;case"X":a[i].v="",a[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[i].v=IMe(a[i].t.charCodeAt(0),a[i].v,u,y),a[i].t="t";break;case"n":case"?":for(B=i+1;a[B]!=null&&((o=a[B].t)==="?"||o==="D"||(o===" "||o==="t")&&a[B+1]!=null&&(a[B+1].t==="?"||a[B+1].t==="t"&&a[B+1].v==="/")||a[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[B].v==="/"||a[B].v===" "&&a[B+1]!=null&&a[B+1].t=="?"));)a[i].v+=a[B].v,a[B]={v:"",t:";"},++B;_+=a[i].v,i=B-1;break;case"G":a[i].t="t",a[i].v=gg(t,r);break}var k="",I,E;if(_.length>0){_.charCodeAt(0)==40?(I=t<0&&_.charCodeAt(0)===45?-t:t,E=oh("n",_,I)):(I=t<0&&n>1?-t:t,E=oh("n",_,I),I<0&&a[0]&&a[0].t=="t"&&(E=E.substr(1),a[0].v="-"+a[0].v)),B=E.length-1;var N=a.length;for(i=0;i<a.length;++i)if(a[i]!=null&&a[i].t!="t"&&a[i].v.indexOf(".")>-1){N=i;break}var j=a.length;if(N===a.length&&E.indexOf("E")===-1){for(i=a.length-1;i>=0;--i)a[i]==null||"n?".indexOf(a[i].t)===-1||(B>=a[i].v.length-1?(B-=a[i].v.length,a[i].v=E.substr(B+1,a[i].v.length)):B<0?a[i].v="":(a[i].v=E.substr(0,B+1),B=-1),a[i].t="t",j=i);B>=0&&j<a.length&&(a[j].v=E.substr(0,B+1)+a[j].v)}else if(N!==a.length&&E.indexOf("E")===-1){for(B=E.indexOf(".")-1,i=N;i>=0;--i)if(!(a[i]==null||"n?".indexOf(a[i].t)===-1)){for(d=a[i].v.indexOf(".")>-1&&i===N?a[i].v.indexOf(".")-1:a[i].v.length-1,k=a[i].v.substr(d+1);d>=0;--d)B>=0&&(a[i].v.charAt(d)==="0"||a[i].v.charAt(d)==="#")&&(k=E.charAt(B--)+k);a[i].v=k,a[i].t="t",j=i}for(B>=0&&j<a.length&&(a[j].v=E.substr(0,B+1)+a[j].v),B=E.indexOf(".")+1,i=N;i<a.length;++i)if(!(a[i]==null||"n?(".indexOf(a[i].t)===-1&&i!==N)){for(d=a[i].v.indexOf(".")>-1&&i===N?a[i].v.indexOf(".")+1:0,k=a[i].v.substr(0,d);d<a[i].v.length;++d)B<E.length&&(k+=E.charAt(B++));a[i].v=k,a[i].t="t",j=i}}}for(i=0;i<a.length;++i)a[i]!=null&&"n?".indexOf(a[i].t)>-1&&(I=n>1&&t<0&&i>0&&a[i-1].v==="-"?-t:t,a[i].v=oh(a[i].t,a[i].v,I),a[i].t="t");var R="";for(i=0;i!==a.length;++i)a[i]!=null&&(R+=a[i].v);return R}var rK=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function nK(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function VMe(e,t){var r=QMe(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(rK),o=r[1].match(rK);return nK(t,i)?[n,r[0]]:nK(t,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,s]}function Hu(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Lr)[e],n==null&&(n=r.table&&r.table[ZG[e]]||Lr[ZG[e]]),n==null&&(n=_Me[e]||"General");break}if(XN(n,0))return gg(t,r);t instanceof Date&&(t=iie(t,r.date1904));var a=VMe(n,t);if(XN(a[1]))return gg(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return HMe(a[1],t,r,a[0])}function lh(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Lr[r]==null){t<0&&(t=r);continue}if(Lr[r]==e){t=r;break}}t<0&&(t=391)}return Lr[t]=e,t}function mk(e){for(var t=0;t!=392;++t)e[t]!==void 0&&lh(e[t],t)}function rb(){Lr=CMe()}var zMe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},mie=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function $Me(e){var t=typeof e=="number"?Lr[e]:e;return t=t.replace(mie,"(\\d+)"),new RegExp("^"+t+"$")}function GMe(e,t,r){var n=-1,a=-1,s=-1,i=-1,o=-1,c=-1;(t.match(mie)||[]).forEach(function(f,h){var p=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=p;break;case"d":s=p;break;case"h":i=p;break;case"s":c=p;break;case"m":i>=0?o=p:a=p;break}}),c>=0&&o==-1&&a>=0&&(o=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return i==-1&&o==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var KMe=function(){var e={};e.version="1.2.0";function t(){for(var E=0,N=new Array(256),j=0;j!=256;++j)E=j,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,N[j]=E;return typeof Int32Array<"u"?new Int32Array(N):N}var r=t();function n(E){var N=0,j=0,R=0,D=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(R=0;R!=256;++R)D[R]=E[R];for(R=0;R!=256;++R)for(j=E[R],N=256+R;N<4096;N+=256)j=D[N]=j>>>8^E[j&255];var O=[];for(R=1;R!=16;++R)O[R-1]=typeof Int32Array<"u"?D.subarray(R*256,R*256+256):D.slice(R*256,R*256+256);return O}var a=n(r),s=a[0],i=a[1],o=a[2],c=a[3],u=a[4],d=a[5],f=a[6],h=a[7],p=a[8],g=a[9],x=a[10],b=a[11],y=a[12],w=a[13],_=a[14];function B(E,N){for(var j=N^-1,R=0,D=E.length;R<D;)j=j>>>8^r[(j^E.charCodeAt(R++))&255];return~j}function k(E,N){for(var j=N^-1,R=E.length-15,D=0;D<R;)j=_[E[D++]^j&255]^w[E[D++]^j>>8&255]^y[E[D++]^j>>16&255]^b[E[D++]^j>>>24]^x[E[D++]]^g[E[D++]]^p[E[D++]]^h[E[D++]]^f[E[D++]]^d[E[D++]]^u[E[D++]]^c[E[D++]]^o[E[D++]]^i[E[D++]]^s[E[D++]]^r[E[D++]];for(R+=15;D<R;)j=j>>>8^r[(j^E[D++])&255];return~j}function I(E,N){for(var j=N^-1,R=0,D=E.length,O=0,L=0;R<D;)O=E.charCodeAt(R++),O<128?j=j>>>8^r[(j^O)&255]:O<2048?(j=j>>>8^r[(j^(192|O>>6&31))&255],j=j>>>8^r[(j^(128|O&63))&255]):O>=55296&&O<57344?(O=(O&1023)+64,L=E.charCodeAt(R++)&1023,j=j>>>8^r[(j^(240|O>>8&7))&255],j=j>>>8^r[(j^(128|O>>2&63))&255],j=j>>>8^r[(j^(128|L>>6&15|(O&3)<<4))&255],j=j>>>8^r[(j^(128|L&63))&255]):(j=j>>>8^r[(j^(224|O>>12&15))&255],j=j>>>8^r[(j^(128|O>>6&63))&255],j=j>>>8^r[(j^(128|O&63))&255]);return~j}return e.table=r,e.bstr=B,e.buf=k,e.str=I,e}(),Nr=function(){var t={};t.version="1.2.1";function r(he,je){for(var Ce=he.split("/"),we=je.split("/"),Se=0,Te=0,Je=Math.min(Ce.length,we.length);Se<Je;++Se){if(Te=Ce[Se].length-we[Se].length)return Te;if(Ce[Se]!=we[Se])return Ce[Se]<we[Se]?-1:1}return Ce.length-we.length}function n(he){if(he.charAt(he.length-1)=="/")return he.slice(0,-1).indexOf("/")===-1?he:n(he.slice(0,-1));var je=he.lastIndexOf("/");return je===-1?he:he.slice(0,je+1)}function a(he){if(he.charAt(he.length-1)=="/")return a(he.slice(0,-1));var je=he.lastIndexOf("/");return je===-1?he:he.slice(je+1)}function s(he,je){typeof je=="string"&&(je=new Date(je));var Ce=je.getHours();Ce=Ce<<6|je.getMinutes(),Ce=Ce<<5|je.getSeconds()>>>1,he.write_shift(2,Ce);var we=je.getFullYear()-1980;we=we<<4|je.getMonth()+1,we=we<<5|je.getDate(),he.write_shift(2,we)}function i(he){var je=he.read_shift(2)&65535,Ce=he.read_shift(2)&65535,we=new Date,Se=Ce&31;Ce>>>=5;var Te=Ce&15;Ce>>>=4,we.setMilliseconds(0),we.setFullYear(Ce+1980),we.setMonth(Te-1),we.setDate(Se);var Je=je&31;je>>>=5;var dt=je&63;return je>>>=6,we.setHours(je),we.setMinutes(dt),we.setSeconds(Je<<1),we}function o(he){go(he,0);for(var je={},Ce=0;he.l<=he.length-4;){var we=he.read_shift(2),Se=he.read_shift(2),Te=he.l+Se,Je={};switch(we){case 21589:Ce=he.read_shift(1),Ce&1&&(Je.mtime=he.read_shift(4)),Se>5&&(Ce&2&&(Je.atime=he.read_shift(4)),Ce&4&&(Je.ctime=he.read_shift(4))),Je.mtime&&(Je.mt=new Date(Je.mtime*1e3));break}he.l=Te,je[we]=Je}return je}var c;function u(){return c||(c={})}function d(he,je){if(he[0]==80&&he[1]==75)return nn(he,je);if((he[0]|32)==109&&(he[1]|32)==105)return wt(he,je);if(he.length<512)throw new Error("CFB file size "+he.length+" < 512");var Ce=3,we=512,Se=0,Te=0,Je=0,dt=0,$e=0,nt=[],ot=he.slice(0,512);go(ot,0);var Pt=f(ot);switch(Ce=Pt[0],Ce){case 3:we=512;break;case 4:we=4096;break;case 0:if(Pt[1]==0)return nn(he,je);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ce)}we!==512&&(ot=he.slice(0,we),go(ot,28));var Vt=he.slice(0,we);h(ot,Ce);var Jt=ot.read_shift(4,"i");if(Ce===3&&Jt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Jt);ot.l+=4,Je=ot.read_shift(4,"i"),ot.l+=4,ot.chk("00100000","Mini Stream Cutoff Size: "),dt=ot.read_shift(4,"i"),Se=ot.read_shift(4,"i"),$e=ot.read_shift(4,"i"),Te=ot.read_shift(4,"i");for(var Ht=-1,Gt=0;Gt<109&&(Ht=ot.read_shift(4,"i"),!(Ht<0));++Gt)nt[Gt]=Ht;var kr=p(he,we);b($e,Te,kr,we,nt);var sn=w(kr,Je,nt,we);sn[Je].name="!Directory",Se>0&&dt!==L&&(sn[dt].name="!MiniFAT"),sn[nt[0]].name="!FAT",sn.fat_addrs=nt,sn.ssz=we;var on={},An=[],hs=[],Eo=[];_(Je,sn,kr,An,Se,on,hs,dt),g(hs,Eo,An),An.shift();var ms={FileIndex:hs,FullPaths:Eo};return je&&je.raw&&(ms.raw={header:Vt,sectors:kr}),ms}function f(he){if(he[he.l]==80&&he[he.l+1]==75)return[0,0];he.chk(M,"Header Signature: "),he.l+=16;var je=he.read_shift(2,"u");return[he.read_shift(2,"u"),je]}function h(he,je){var Ce=9;switch(he.l+=2,Ce=he.read_shift(2)){case 9:if(je!=3)throw new Error("Sector Shift: Expected 9 saw "+Ce);break;case 12:if(je!=4)throw new Error("Sector Shift: Expected 12 saw "+Ce);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ce)}he.chk("0600","Mini Sector Shift: "),he.chk("000000000000","Reserved: ")}function p(he,je){for(var Ce=Math.ceil(he.length/je)-1,we=[],Se=1;Se<Ce;++Se)we[Se-1]=he.slice(Se*je,(Se+1)*je);return we[Ce-1]=he.slice(Ce*je),we}function g(he,je,Ce){for(var we=0,Se=0,Te=0,Je=0,dt=0,$e=Ce.length,nt=[],ot=[];we<$e;++we)nt[we]=ot[we]=we,je[we]=Ce[we];for(;dt<ot.length;++dt)we=ot[dt],Se=he[we].L,Te=he[we].R,Je=he[we].C,nt[we]===we&&(Se!==-1&&nt[Se]!==Se&&(nt[we]=nt[Se]),Te!==-1&&nt[Te]!==Te&&(nt[we]=nt[Te])),Je!==-1&&(nt[Je]=we),Se!==-1&&we!=nt[we]&&(nt[Se]=nt[we],ot.lastIndexOf(Se)<dt&&ot.push(Se)),Te!==-1&&we!=nt[we]&&(nt[Te]=nt[we],ot.lastIndexOf(Te)<dt&&ot.push(Te));for(we=1;we<$e;++we)nt[we]===we&&(Te!==-1&&nt[Te]!==Te?nt[we]=nt[Te]:Se!==-1&&nt[Se]!==Se&&(nt[we]=nt[Se]));for(we=1;we<$e;++we)if(he[we].type!==0){if(dt=we,dt!=nt[dt])do dt=nt[dt],je[we]=je[dt]+"/"+je[we];while(dt!==0&&nt[dt]!==-1&&dt!=nt[dt]);nt[we]=-1}for(je[0]+="/",we=1;we<$e;++we)he[we].type!==2&&(je[we]+="/")}function x(he,je,Ce){for(var we=he.start,Se=he.size,Te=[],Je=we;Ce&&Se>0&&Je>=0;)Te.push(je.slice(Je*O,Je*O+O)),Se-=O,Je=Sp(Ce,Je*4);return Te.length===0?Et(0):Ki(Te).slice(0,he.size)}function b(he,je,Ce,we,Se){var Te=L;if(he===L){if(je!==0)throw new Error("DIFAT chain shorter than expected")}else if(he!==-1){var Je=Ce[he],dt=(we>>>2)-1;if(!Je)return;for(var $e=0;$e<dt&&(Te=Sp(Je,$e*4))!==L;++$e)Se.push(Te);b(Sp(Je,we-4),je-1,Ce,we,Se)}}function y(he,je,Ce,we,Se){var Te=[],Je=[];Se||(Se=[]);var dt=we-1,$e=0,nt=0;for($e=je;$e>=0;){Se[$e]=!0,Te[Te.length]=$e,Je.push(he[$e]);var ot=Ce[Math.floor($e*4/we)];if(nt=$e*4&dt,we<4+nt)throw new Error("FAT boundary crossed: "+$e+" 4 "+we);if(!he[ot])break;$e=Sp(he[ot],nt)}return{nodes:Te,data:mK([Je])}}function w(he,je,Ce,we){var Se=he.length,Te=[],Je=[],dt=[],$e=[],nt=we-1,ot=0,Pt=0,Vt=0,Jt=0;for(ot=0;ot<Se;++ot)if(dt=[],Vt=ot+je,Vt>=Se&&(Vt-=Se),!Je[Vt]){$e=[];var Ht=[];for(Pt=Vt;Pt>=0;){Ht[Pt]=!0,Je[Pt]=!0,dt[dt.length]=Pt,$e.push(he[Pt]);var Gt=Ce[Math.floor(Pt*4/we)];if(Jt=Pt*4&nt,we<4+Jt)throw new Error("FAT boundary crossed: "+Pt+" 4 "+we);if(!he[Gt]||(Pt=Sp(he[Gt],Jt),Ht[Pt]))break}Te[Vt]={nodes:dt,data:mK([$e])}}return Te}function _(he,je,Ce,we,Se,Te,Je,dt){for(var $e=0,nt=we.length?2:0,ot=je[he].data,Pt=0,Vt=0,Jt;Pt<ot.length;Pt+=128){var Ht=ot.slice(Pt,Pt+128);go(Ht,64),Vt=Ht.read_shift(2),Jt=tL(Ht,0,Vt-nt),we.push(Jt);var Gt={name:Jt,type:Ht.read_shift(1),color:Ht.read_shift(1),L:Ht.read_shift(4,"i"),R:Ht.read_shift(4,"i"),C:Ht.read_shift(4,"i"),clsid:Ht.read_shift(16),state:Ht.read_shift(4,"i"),start:0,size:0},kr=Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2);kr!==0&&(Gt.ct=B(Ht,Ht.l-8));var sn=Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2);sn!==0&&(Gt.mt=B(Ht,Ht.l-8)),Gt.start=Ht.read_shift(4,"i"),Gt.size=Ht.read_shift(4,"i"),Gt.size<0&&Gt.start<0&&(Gt.size=Gt.type=0,Gt.start=L,Gt.name=""),Gt.type===5?($e=Gt.start,Se>0&&$e!==L&&(je[$e].name="!StreamData")):Gt.size>=4096?(Gt.storage="fat",je[Gt.start]===void 0&&(je[Gt.start]=y(Ce,Gt.start,je.fat_addrs,je.ssz)),je[Gt.start].name=Gt.name,Gt.content=je[Gt.start].data.slice(0,Gt.size)):(Gt.storage="minifat",Gt.size<0?Gt.size=0:$e!==L&&Gt.start!==L&&je[$e]&&(Gt.content=x(Gt,je[$e].data,(je[dt]||{}).data))),Gt.content&&go(Gt.content,0),Te[Jt]=Gt,Je.push(Gt)}}function B(he,je){return new Date((jc(he,je+4)/1e7*Math.pow(2,32)+jc(he,je)/1e7-11644473600)*1e3)}function k(he,je){return u(),d(c.readFileSync(he),je)}function I(he,je){var Ce=je&&je.type;switch(Ce||pn&&Buffer.isBuffer(he)&&(Ce="buffer"),Ce||"base64"){case"file":return k(he,je);case"base64":return d(Oc(zc(he)),je);case"binary":return d(Oc(he),je)}return d(he,je)}function E(he,je){var Ce=je||{},we=Ce.root||"Root Entry";if(he.FullPaths||(he.FullPaths=[]),he.FileIndex||(he.FileIndex=[]),he.FullPaths.length!==he.FileIndex.length)throw new Error("inconsistent CFB structure");he.FullPaths.length===0&&(he.FullPaths[0]=we+"/",he.FileIndex[0]={name:we,type:5}),Ce.CLSID&&(he.FileIndex[0].clsid=Ce.CLSID),N(he)}function N(he){var je="Sh33tJ5";if(!Nr.find(he,"/"+je)){var Ce=Et(4);Ce[0]=55,Ce[1]=Ce[3]=50,Ce[2]=54,he.FileIndex.push({name:je,type:2,content:Ce,size:4,L:69,R:69,C:69}),he.FullPaths.push(he.FullPaths[0]+je),j(he)}}function j(he,je){E(he);for(var Ce=!1,we=!1,Se=he.FullPaths.length-1;Se>=0;--Se){var Te=he.FileIndex[Se];switch(Te.type){case 0:we?Ce=!0:(he.FileIndex.pop(),he.FullPaths.pop());break;case 1:case 2:case 5:we=!0,isNaN(Te.R*Te.L*Te.C)&&(Ce=!0),Te.R>-1&&Te.L>-1&&Te.R==Te.L&&(Ce=!0);break;default:Ce=!0;break}}if(!(!Ce&&!je)){var Je=new Date(1987,1,19),dt=0,$e=Object.create?Object.create(null):{},nt=[];for(Se=0;Se<he.FullPaths.length;++Se)$e[he.FullPaths[Se]]=!0,he.FileIndex[Se].type!==0&&nt.push([he.FullPaths[Se],he.FileIndex[Se]]);for(Se=0;Se<nt.length;++Se){var ot=n(nt[Se][0]);we=$e[ot],we||(nt.push([ot,{name:a(ot).replace("/",""),type:1,clsid:V,ct:Je,mt:Je,content:null}]),$e[ot]=!0)}for(nt.sort(function(Jt,Ht){return r(Jt[0],Ht[0])}),he.FullPaths=[],he.FileIndex=[],Se=0;Se<nt.length;++Se)he.FullPaths[Se]=nt[Se][0],he.FileIndex[Se]=nt[Se][1];for(Se=0;Se<nt.length;++Se){var Pt=he.FileIndex[Se],Vt=he.FullPaths[Se];if(Pt.name=a(Vt).replace("/",""),Pt.L=Pt.R=Pt.C=-(Pt.color=1),Pt.size=Pt.content?Pt.content.length:0,Pt.start=0,Pt.clsid=Pt.clsid||V,Se===0)Pt.C=nt.length>1?1:-1,Pt.size=0,Pt.type=5;else if(Vt.slice(-1)=="/"){for(dt=Se+1;dt<nt.length&&n(he.FullPaths[dt])!=Vt;++dt);for(Pt.C=dt>=nt.length?-1:dt,dt=Se+1;dt<nt.length&&n(he.FullPaths[dt])!=n(Vt);++dt);Pt.R=dt>=nt.length?-1:dt,Pt.type=1}else n(he.FullPaths[Se+1]||"")==n(Vt)&&(Pt.R=Se+1),Pt.type=2}}}function R(he,je){var Ce=je||{};if(Ce.fileType=="mad")return yt(he,Ce);switch(j(he),Ce.fileType){case"zip":return Ba(he,Ce)}var we=function(Jt){for(var Ht=0,Gt=0,kr=0;kr<Jt.FileIndex.length;++kr){var sn=Jt.FileIndex[kr];if(sn.content){var on=sn.content.length;on>0&&(on<4096?Ht+=on+63>>6:Gt+=on+511>>9)}}for(var An=Jt.FullPaths.length+3>>2,hs=Ht+7>>3,Eo=Ht+127>>7,ms=hs+Gt+An+Eo,Js=ms+127>>7,Ts=Js<=109?0:Math.ceil((Js-109)/127);ms+Js+Ts+127>>7>Js;)Ts=++Js<=109?0:Math.ceil((Js-109)/127);var pi=[1,Ts,Js,Eo,An,Gt,Ht,0];return Jt.FileIndex[0].size=Ht<<6,pi[7]=(Jt.FileIndex[0].start=pi[0]+pi[1]+pi[2]+pi[3]+pi[4]+pi[5])+(pi[6]+7>>3),pi}(he),Se=Et(we[7]<<9),Te=0,Je=0;{for(Te=0;Te<8;++Te)Se.write_shift(1,J[Te]);for(Te=0;Te<8;++Te)Se.write_shift(2,0);for(Se.write_shift(2,62),Se.write_shift(2,3),Se.write_shift(2,65534),Se.write_shift(2,9),Se.write_shift(2,6),Te=0;Te<3;++Te)Se.write_shift(2,0);for(Se.write_shift(4,0),Se.write_shift(4,we[2]),Se.write_shift(4,we[0]+we[1]+we[2]+we[3]-1),Se.write_shift(4,0),Se.write_shift(4,4096),Se.write_shift(4,we[3]?we[0]+we[1]+we[2]-1:L),Se.write_shift(4,we[3]),Se.write_shift(-4,we[1]?we[0]-1:L),Se.write_shift(4,we[1]),Te=0;Te<109;++Te)Se.write_shift(-4,Te<we[2]?we[1]+Te:-1)}if(we[1])for(Je=0;Je<we[1];++Je){for(;Te<236+Je*127;++Te)Se.write_shift(-4,Te<we[2]?we[1]+Te:-1);Se.write_shift(-4,Je===we[1]-1?L:Je+1)}var dt=function(Jt){for(Je+=Jt;Te<Je-1;++Te)Se.write_shift(-4,Te+1);Jt&&(++Te,Se.write_shift(-4,L))};for(Je=Te=0,Je+=we[1];Te<Je;++Te)Se.write_shift(-4,K.DIFSECT);for(Je+=we[2];Te<Je;++Te)Se.write_shift(-4,K.FATSECT);dt(we[3]),dt(we[4]);for(var $e=0,nt=0,ot=he.FileIndex[0];$e<he.FileIndex.length;++$e)ot=he.FileIndex[$e],ot.content&&(nt=ot.content.length,!(nt<4096)&&(ot.start=Je,dt(nt+511>>9)));for(dt(we[6]+7>>3);Se.l&511;)Se.write_shift(-4,K.ENDOFCHAIN);for(Je=Te=0,$e=0;$e<he.FileIndex.length;++$e)ot=he.FileIndex[$e],ot.content&&(nt=ot.content.length,!(!nt||nt>=4096)&&(ot.start=Je,dt(nt+63>>6)));for(;Se.l&511;)Se.write_shift(-4,K.ENDOFCHAIN);for(Te=0;Te<we[4]<<2;++Te){var Pt=he.FullPaths[Te];if(!Pt||Pt.length===0){for($e=0;$e<17;++$e)Se.write_shift(4,0);for($e=0;$e<3;++$e)Se.write_shift(4,-1);for($e=0;$e<12;++$e)Se.write_shift(4,0);continue}ot=he.FileIndex[Te],Te===0&&(ot.start=ot.size?ot.start-1:L);var Vt=Te===0&&Ce.root||ot.name;if(nt=2*(Vt.length+1),Se.write_shift(64,Vt,"utf16le"),Se.write_shift(2,nt),Se.write_shift(1,ot.type),Se.write_shift(1,ot.color),Se.write_shift(-4,ot.L),Se.write_shift(-4,ot.R),Se.write_shift(-4,ot.C),ot.clsid)Se.write_shift(16,ot.clsid,"hex");else for($e=0;$e<4;++$e)Se.write_shift(4,0);Se.write_shift(4,ot.state||0),Se.write_shift(4,0),Se.write_shift(4,0),Se.write_shift(4,0),Se.write_shift(4,0),Se.write_shift(4,ot.start),Se.write_shift(4,ot.size),Se.write_shift(4,0)}for(Te=1;Te<he.FileIndex.length;++Te)if(ot=he.FileIndex[Te],ot.size>=4096)if(Se.l=ot.start+1<<9,pn&&Buffer.isBuffer(ot.content))ot.content.copy(Se,Se.l,0,ot.size),Se.l+=ot.size+511&-512;else{for($e=0;$e<ot.size;++$e)Se.write_shift(1,ot.content[$e]);for(;$e&511;++$e)Se.write_shift(1,0)}for(Te=1;Te<he.FileIndex.length;++Te)if(ot=he.FileIndex[Te],ot.size>0&&ot.size<4096)if(pn&&Buffer.isBuffer(ot.content))ot.content.copy(Se,Se.l,0,ot.size),Se.l+=ot.size+63&-64;else{for($e=0;$e<ot.size;++$e)Se.write_shift(1,ot.content[$e]);for(;$e&63;++$e)Se.write_shift(1,0)}if(pn)Se.l=Se.length;else for(;Se.l<Se.length;)Se.write_shift(1,0);return Se}function D(he,je){var Ce=he.FullPaths.map(function($e){return $e.toUpperCase()}),we=Ce.map(function($e){var nt=$e.split("/");return nt[nt.length-($e.slice(-1)=="/"?2:1)]}),Se=!1;je.charCodeAt(0)===47?(Se=!0,je=Ce[0].slice(0,-1)+je):Se=je.indexOf("/")!==-1;var Te=je.toUpperCase(),Je=Se===!0?Ce.indexOf(Te):we.indexOf(Te);if(Je!==-1)return he.FileIndex[Je];var dt=!Te.match(Fy);for(Te=Te.replace(El,""),dt&&(Te=Te.replace(Fy,"!")),Je=0;Je<Ce.length;++Je)if((dt?Ce[Je].replace(Fy,"!"):Ce[Je]).replace(El,"")==Te||(dt?we[Je].replace(Fy,"!"):we[Je]).replace(El,"")==Te)return he.FileIndex[Je];return null}var O=64,L=-2,M="d0cf11e0a1b11ae1",J=[208,207,17,224,161,177,26,225],V="00000000000000000000000000000000",K={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:L,FREESECT:-1,HEADER_SIGNATURE:M,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:V,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function z(he,je,Ce){u();var we=R(he,Ce);c.writeFileSync(je,we)}function G(he){for(var je=new Array(he.length),Ce=0;Ce<he.length;++Ce)je[Ce]=String.fromCharCode(he[Ce]);return je.join("")}function Y(he,je){var Ce=R(he,je);switch(je&&je.type||"buffer"){case"file":return u(),c.writeFileSync(je.filename,Ce),Ce;case"binary":return typeof Ce=="string"?Ce:G(Ce);case"base64":return Yw(typeof Ce=="string"?Ce:G(Ce));case"buffer":if(pn)return Buffer.isBuffer(Ce)?Ce:Ph(Ce);case"array":return typeof Ce=="string"?Oc(Ce):Ce}return Ce}var ee;function P(he){try{var je=he.InflateRaw,Ce=new je;if(Ce._processChunk(new Uint8Array([3,0]),Ce._finishFlushFlag),Ce.bytesRead)ee=he;else throw new Error("zlib does not expose bytesRead")}catch(we){console.error("cannot use native zlib: "+(we.message||we))}}function Q(he,je){if(!ee)return Tr(he,je);var Ce=ee.InflateRaw,we=new Ce,Se=we._processChunk(he.slice(he.l),we._finishFlushFlag);return he.l+=we.bytesRead,Se}function X(he){return ee?ee.deflateRawSync(he):Dt(he)}var te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ae=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],se=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function oe(he){var je=(he<<1|he<<11)&139536|(he<<5|he<<15)&558144;return(je>>16|je>>8|je)&255}for(var ce=typeof Uint8Array<"u",me=ce?new Uint8Array(256):[],ke=0;ke<256;++ke)me[ke]=oe(ke);function ne(he,je){var Ce=me[he&255];return je<=8?Ce>>>8-je:(Ce=Ce<<8|me[he>>8&255],je<=16?Ce>>>16-je:(Ce=Ce<<8|me[he>>16&255],Ce>>>24-je))}function _e(he,je){var Ce=je&7,we=je>>>3;return(he[we]|(Ce<=6?0:he[we+1]<<8))>>>Ce&3}function De(he,je){var Ce=je&7,we=je>>>3;return(he[we]|(Ce<=5?0:he[we+1]<<8))>>>Ce&7}function Ne(he,je){var Ce=je&7,we=je>>>3;return(he[we]|(Ce<=4?0:he[we+1]<<8))>>>Ce&15}function fe(he,je){var Ce=je&7,we=je>>>3;return(he[we]|(Ce<=3?0:he[we+1]<<8))>>>Ce&31}function Ie(he,je){var Ce=je&7,we=je>>>3;return(he[we]|(Ce<=1?0:he[we+1]<<8))>>>Ce&127}function Me(he,je,Ce){var we=je&7,Se=je>>>3,Te=(1<<Ce)-1,Je=he[Se]>>>we;return Ce<8-we||(Je|=he[Se+1]<<8-we,Ce<16-we)||(Je|=he[Se+2]<<16-we,Ce<24-we)||(Je|=he[Se+3]<<24-we),Je&Te}function Xe(he,je,Ce){var we=je&7,Se=je>>>3;return we<=5?he[Se]|=(Ce&7)<<we:(he[Se]|=Ce<<we&255,he[Se+1]=(Ce&7)>>8-we),je+3}function ye(he,je,Ce){var we=je&7,Se=je>>>3;return Ce=(Ce&1)<<we,he[Se]|=Ce,je+1}function Fe(he,je,Ce){var we=je&7,Se=je>>>3;return Ce<<=we,he[Se]|=Ce&255,Ce>>>=8,he[Se+1]=Ce,je+8}function Re(he,je,Ce){var we=je&7,Se=je>>>3;return Ce<<=we,he[Se]|=Ce&255,Ce>>>=8,he[Se+1]=Ce&255,he[Se+2]=Ce>>>8,je+16}function Ge(he,je){var Ce=he.length,we=2*Ce>je?2*Ce:je+5,Se=0;if(Ce>=je)return he;if(pn){var Te=XG(we);if(he.copy)he.copy(Te);else for(;Se<he.length;++Se)Te[Se]=he[Se];return Te}else if(ce){var Je=new Uint8Array(we);if(Je.set)Je.set(he);else for(;Se<Ce;++Se)Je[Se]=he[Se];return Je}return he.length=we,he}function Ke(he){for(var je=new Array(he),Ce=0;Ce<he;++Ce)je[Ce]=0;return je}function Ze(he,je,Ce){var we=1,Se=0,Te=0,Je=0,dt=0,$e=he.length,nt=ce?new Uint16Array(32):Ke(32);for(Te=0;Te<32;++Te)nt[Te]=0;for(Te=$e;Te<Ce;++Te)he[Te]=0;$e=he.length;var ot=ce?new Uint16Array($e):Ke($e);for(Te=0;Te<$e;++Te)nt[Se=he[Te]]++,we<Se&&(we=Se),ot[Te]=0;for(nt[0]=0,Te=1;Te<=we;++Te)nt[Te+16]=dt=dt+nt[Te-1]<<1;for(Te=0;Te<$e;++Te)dt=he[Te],dt!=0&&(ot[Te]=nt[dt+16]++);var Pt=0;for(Te=0;Te<$e;++Te)if(Pt=he[Te],Pt!=0)for(dt=ne(ot[Te],we)>>we-Pt,Je=(1<<we+4-Pt)-1;Je>=0;--Je)je[dt|Je<<Pt]=Pt&15|Te<<4;return we}var ft=ce?new Uint16Array(512):Ke(512),Nt=ce?new Uint16Array(32):Ke(32);if(!ce){for(var Tt=0;Tt<512;++Tt)ft[Tt]=0;for(Tt=0;Tt<32;++Tt)Nt[Tt]=0}(function(){for(var he=[],je=0;je<32;je++)he.push(5);Ze(he,Nt,32);var Ce=[];for(je=0;je<=143;je++)Ce.push(8);for(;je<=255;je++)Ce.push(9);for(;je<=279;je++)Ce.push(7);for(;je<=287;je++)Ce.push(8);Ze(Ce,ft,288)})();var St=function(){for(var je=ce?new Uint8Array(32768):[],Ce=0,we=0;Ce<se.length-1;++Ce)for(;we<se[Ce+1];++we)je[we]=Ce;for(;we<32768;++we)je[we]=29;var Se=ce?new Uint8Array(259):[];for(Ce=0,we=0;Ce<ae.length-1;++Ce)for(;we<ae[Ce+1];++we)Se[we]=Ce;function Te(dt,$e){for(var nt=0;nt<dt.length;){var ot=Math.min(65535,dt.length-nt),Pt=nt+ot==dt.length;for($e.write_shift(1,+Pt),$e.write_shift(2,ot),$e.write_shift(2,~ot&65535);ot-- >0;)$e[$e.l++]=dt[nt++]}return $e.l}function Je(dt,$e){for(var nt=0,ot=0,Pt=ce?new Uint16Array(32768):[];ot<dt.length;){var Vt=Math.min(65535,dt.length-ot);if(Vt<10){for(nt=Xe($e,nt,+(ot+Vt==dt.length)),nt&7&&(nt+=8-(nt&7)),$e.l=nt/8|0,$e.write_shift(2,Vt),$e.write_shift(2,~Vt&65535);Vt-- >0;)$e[$e.l++]=dt[ot++];nt=$e.l*8;continue}nt=Xe($e,nt,+(ot+Vt==dt.length)+2);for(var Jt=0;Vt-- >0;){var Ht=dt[ot];Jt=(Jt<<5^Ht)&32767;var Gt=-1,kr=0;if((Gt=Pt[Jt])&&(Gt|=ot&-32768,Gt>ot&&(Gt-=32768),Gt<ot))for(;dt[Gt+kr]==dt[ot+kr]&&kr<250;)++kr;if(kr>2){Ht=Se[kr],Ht<=22?nt=Fe($e,nt,me[Ht+1]>>1)-1:(Fe($e,nt,3),nt+=5,Fe($e,nt,me[Ht-23]>>5),nt+=3);var sn=Ht<8?0:Ht-4>>2;sn>0&&(Re($e,nt,kr-ae[Ht]),nt+=sn),Ht=je[ot-Gt],nt=Fe($e,nt,me[Ht]>>3),nt-=3;var on=Ht<4?0:Ht-2>>1;on>0&&(Re($e,nt,ot-Gt-se[Ht]),nt+=on);for(var An=0;An<kr;++An)Pt[Jt]=ot&32767,Jt=(Jt<<5^dt[ot])&32767,++ot;Vt-=kr-1}else Ht<=143?Ht=Ht+48:nt=ye($e,nt,1),nt=Fe($e,nt,me[Ht]),Pt[Jt]=ot&32767,++ot}nt=Fe($e,nt,0)-1}return $e.l=(nt+7)/8|0,$e.l}return function($e,nt){return $e.length<8?Te($e,nt):Je($e,nt)}}();function Dt(he){var je=Et(50+Math.floor(he.length*1.1)),Ce=St(he,je);return je.slice(0,Ce)}var gt=ce?new Uint16Array(32768):Ke(32768),fr=ce?new Uint16Array(32768):Ke(32768),zt=ce?new Uint16Array(128):Ke(128),Mr=1,wr=1;function Dr(he,je){var Ce=fe(he,je)+257;je+=5;var we=fe(he,je)+1;je+=5;var Se=Ne(he,je)+4;je+=4;for(var Te=0,Je=ce?new Uint8Array(19):Ke(19),dt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],$e=1,nt=ce?new Uint8Array(8):Ke(8),ot=ce?new Uint8Array(8):Ke(8),Pt=Je.length,Vt=0;Vt<Se;++Vt)Je[te[Vt]]=Te=De(he,je),$e<Te&&($e=Te),nt[Te]++,je+=3;var Jt=0;for(nt[0]=0,Vt=1;Vt<=$e;++Vt)ot[Vt]=Jt=Jt+nt[Vt-1]<<1;for(Vt=0;Vt<Pt;++Vt)(Jt=Je[Vt])!=0&&(dt[Vt]=ot[Jt]++);var Ht=0;for(Vt=0;Vt<Pt;++Vt)if(Ht=Je[Vt],Ht!=0){Jt=me[dt[Vt]]>>8-Ht;for(var Gt=(1<<7-Ht)-1;Gt>=0;--Gt)zt[Jt|Gt<<Ht]=Ht&7|Vt<<3}var kr=[];for($e=1;kr.length<Ce+we;)switch(Jt=zt[Ie(he,je)],je+=Jt&7,Jt>>>=3){case 16:for(Te=3+_e(he,je),je+=2,Jt=kr[kr.length-1];Te-- >0;)kr.push(Jt);break;case 17:for(Te=3+De(he,je),je+=3;Te-- >0;)kr.push(0);break;case 18:for(Te=11+Ie(he,je),je+=7;Te-- >0;)kr.push(0);break;default:kr.push(Jt),$e<Jt&&($e=Jt);break}var sn=kr.slice(0,Ce),on=kr.slice(Ce);for(Vt=Ce;Vt<286;++Vt)sn[Vt]=0;for(Vt=we;Vt<30;++Vt)on[Vt]=0;return Mr=Ze(sn,gt,286),wr=Ze(on,fr,30),je}function vn(he,je){if(he[0]==3&&!(he[1]&3))return[Cm(je),2];for(var Ce=0,we=0,Se=XG(je||1<<18),Te=0,Je=Se.length>>>0,dt=0,$e=0;(we&1)==0;){if(we=De(he,Ce),Ce+=3,we>>>1)we>>1==1?(dt=9,$e=5):(Ce=Dr(he,Ce),dt=Mr,$e=wr);else{Ce&7&&(Ce+=8-(Ce&7));var nt=he[Ce>>>3]|he[(Ce>>>3)+1]<<8;if(Ce+=32,nt>0)for(!je&&Je<Te+nt&&(Se=Ge(Se,Te+nt),Je=Se.length);nt-- >0;)Se[Te++]=he[Ce>>>3],Ce+=8;continue}for(;;){!je&&Je<Te+32767&&(Se=Ge(Se,Te+32767),Je=Se.length);var ot=Me(he,Ce,dt),Pt=we>>>1==1?ft[ot]:gt[ot];if(Ce+=Pt&15,Pt>>>=4,(Pt>>>8&255)===0)Se[Te++]=Pt;else{if(Pt==256)break;Pt-=257;var Vt=Pt<8?0:Pt-4>>2;Vt>5&&(Vt=0);var Jt=Te+ae[Pt];Vt>0&&(Jt+=Me(he,Ce,Vt),Ce+=Vt),ot=Me(he,Ce,$e),Pt=we>>>1==1?Nt[ot]:fr[ot],Ce+=Pt&15,Pt>>>=4;var Ht=Pt<4?0:Pt-2>>1,Gt=se[Pt];for(Ht>0&&(Gt+=Me(he,Ce,Ht),Ce+=Ht),!je&&Je<Jt&&(Se=Ge(Se,Jt+100),Je=Se.length);Te<Jt;)Se[Te]=Se[Te-Gt],++Te}}}return je?[Se,Ce+7>>>3]:[Se.slice(0,Te),Ce+7>>>3]}function Tr(he,je){var Ce=he.slice(he.l||0),we=vn(Ce,je);return he.l+=we[1],we[0]}function Ga(he,je){if(he)typeof console<"u"&&console.error(je);else throw new Error(je)}function nn(he,je){var Ce=he;go(Ce,0);var we=[],Se=[],Te={FileIndex:we,FullPaths:Se};E(Te,{root:je.root});for(var Je=Ce.length-4;(Ce[Je]!=80||Ce[Je+1]!=75||Ce[Je+2]!=5||Ce[Je+3]!=6)&&Je>=0;)--Je;Ce.l=Je+4,Ce.l+=4;var dt=Ce.read_shift(2);Ce.l+=6;var $e=Ce.read_shift(4);for(Ce.l=$e,Je=0;Je<dt;++Je){Ce.l+=20;var nt=Ce.read_shift(4),ot=Ce.read_shift(4),Pt=Ce.read_shift(2),Vt=Ce.read_shift(2),Jt=Ce.read_shift(2);Ce.l+=8;var Ht=Ce.read_shift(4),Gt=o(Ce.slice(Ce.l+Pt,Ce.l+Pt+Vt));Ce.l+=Pt+Vt+Jt;var kr=Ce.l;Ce.l=Ht+4,oa(Ce,nt,ot,Te,Gt),Ce.l=kr}return Te}function oa(he,je,Ce,we,Se){he.l+=2;var Te=he.read_shift(2),Je=he.read_shift(2),dt=i(he);if(Te&8257)throw new Error("Unsupported ZIP encryption");for(var $e=he.read_shift(4),nt=he.read_shift(4),ot=he.read_shift(4),Pt=he.read_shift(2),Vt=he.read_shift(2),Jt="",Ht=0;Ht<Pt;++Ht)Jt+=String.fromCharCode(he[he.l++]);if(Vt){var Gt=o(he.slice(he.l,he.l+Vt));(Gt[21589]||{}).mt&&(dt=Gt[21589].mt),((Se||{})[21589]||{}).mt&&(dt=Se[21589].mt)}he.l+=Vt;var kr=he.slice(he.l,he.l+nt);switch(Je){case 8:kr=Q(he,ot);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Je)}var sn=!1;Te&8&&($e=he.read_shift(4),$e==134695760&&($e=he.read_shift(4),sn=!0),nt=he.read_shift(4),ot=he.read_shift(4)),nt!=je&&Ga(sn,"Bad compressed size: "+je+" != "+nt),ot!=Ce&&Ga(sn,"Bad uncompressed size: "+Ce+" != "+ot),xr(we,Jt,kr,{unsafe:!0,mt:dt})}function Ba(he,je){var Ce=je||{},we=[],Se=[],Te=Et(1),Je=Ce.compression?8:0,dt=0,$e=0,nt=0,ot=0,Pt=0,Vt=he.FullPaths[0],Jt=Vt,Ht=he.FileIndex[0],Gt=[],kr=0;for($e=1;$e<he.FullPaths.length;++$e)if(Jt=he.FullPaths[$e].slice(Vt.length),Ht=he.FileIndex[$e],!(!Ht.size||!Ht.content||Jt=="Sh33tJ5")){var sn=ot,on=Et(Jt.length);for(nt=0;nt<Jt.length;++nt)on.write_shift(1,Jt.charCodeAt(nt)&127);on=on.slice(0,on.l),Gt[Pt]=KMe.buf(Ht.content,0);var An=Ht.content;Je==8&&(An=X(An)),Te=Et(30),Te.write_shift(4,67324752),Te.write_shift(2,20),Te.write_shift(2,dt),Te.write_shift(2,Je),Ht.mt?s(Te,Ht.mt):Te.write_shift(4,0),Te.write_shift(-4,Gt[Pt]),Te.write_shift(4,An.length),Te.write_shift(4,Ht.content.length),Te.write_shift(2,on.length),Te.write_shift(2,0),ot+=Te.length,we.push(Te),ot+=on.length,we.push(on),ot+=An.length,we.push(An),Te=Et(46),Te.write_shift(4,33639248),Te.write_shift(2,0),Te.write_shift(2,20),Te.write_shift(2,dt),Te.write_shift(2,Je),Te.write_shift(4,0),Te.write_shift(-4,Gt[Pt]),Te.write_shift(4,An.length),Te.write_shift(4,Ht.content.length),Te.write_shift(2,on.length),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(4,0),Te.write_shift(4,sn),kr+=Te.l,Se.push(Te),kr+=on.length,Se.push(on),++Pt}return Te=Et(22),Te.write_shift(4,101010256),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(2,Pt),Te.write_shift(2,Pt),Te.write_shift(4,kr),Te.write_shift(4,ot),Te.write_shift(2,0),Ki([Ki(we),Ki(Se),Te])}var rn={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function gr(he,je){if(he.ctype)return he.ctype;var Ce=he.name||"",we=Ce.match(/\.([^\.]+)$/);return we&&rn[we[1]]||je&&(we=(Ce=je).match(/[\.\\]([^\.\\])+$/),we&&rn[we[1]])?rn[we[1]]:"application/octet-stream"}function tt(he){for(var je=Yw(he),Ce=[],we=0;we<je.length;we+=76)Ce.push(je.slice(we,we+76));return Ce.join(`\r
`)+`\r
`}function xt(he){var je=he.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(nt){var ot=nt.charCodeAt(0).toString(16).toUpperCase();return"="+(ot.length==1?"0"+ot:ot)});je=je.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),je.charAt(0)==`
`&&(je="=0D"+je.slice(1)),je=je.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ce=[],we=je.split(`\r
`),Se=0;Se<we.length;++Se){var Te=we[Se];if(Te.length==0){Ce.push("");continue}for(var Je=0;Je<Te.length;){var dt=76,$e=Te.slice(Je,Je+dt);$e.charAt(dt-1)=="="?dt--:$e.charAt(dt-2)=="="?dt-=2:$e.charAt(dt-3)=="="&&(dt-=3),$e=Te.slice(Je,Je+dt),Je+=dt,Je<Te.length&&($e+="="),Ce.push($e)}}return Ce.join(`\r
`)}function et(he){for(var je=[],Ce=0;Ce<he.length;++Ce){for(var we=he[Ce];Ce<=he.length&&we.charAt(we.length-1)=="=";)we=we.slice(0,we.length-1)+he[++Ce];je.push(we)}for(var Se=0;Se<je.length;++Se)je[Se]=je[Se].replace(/[=][0-9A-Fa-f]{2}/g,function(Te){return String.fromCharCode(parseInt(Te.slice(1),16))});return Oc(je.join(`\r
`))}function vt(he,je,Ce){for(var we="",Se="",Te="",Je,dt=0;dt<10;++dt){var $e=je[dt];if(!$e||$e.match(/^\s*$/))break;var nt=$e.match(/^(.*?):\s*([^\s].*)$/);if(nt)switch(nt[1].toLowerCase()){case"content-location":we=nt[2].trim();break;case"content-type":Te=nt[2].trim();break;case"content-transfer-encoding":Se=nt[2].trim();break}}switch(++dt,Se.toLowerCase()){case"base64":Je=Oc(zc(je.slice(dt).join("")));break;case"quoted-printable":Je=et(je.slice(dt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Se)}var ot=xr(he,we.slice(Ce.length),Je,{unsafe:!0});Te&&(ot.ctype=Te)}function wt(he,je){if(G(he.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ce=je&&je.root||"",we=(pn&&Buffer.isBuffer(he)?he.toString("binary"):G(he)).split(`\r
`),Se=0,Te="";for(Se=0;Se<we.length;++Se)if(Te=we[Se],!!/^Content-Location:/i.test(Te)&&(Te=Te.slice(Te.indexOf("file")),Ce||(Ce=Te.slice(0,Te.lastIndexOf("/")+1)),Te.slice(0,Ce.length)!=Ce))for(;Ce.length>0&&(Ce=Ce.slice(0,Ce.length-1),Ce=Ce.slice(0,Ce.lastIndexOf("/")+1),Te.slice(0,Ce.length)!=Ce););var Je=(we[1]||"").match(/boundary="(.*?)"/);if(!Je)throw new Error("MAD cannot find boundary");var dt="--"+(Je[1]||""),$e=[],nt=[],ot={FileIndex:$e,FullPaths:nt};E(ot);var Pt,Vt=0;for(Se=0;Se<we.length;++Se){var Jt=we[Se];Jt!==dt&&Jt!==dt+"--"||(Vt++&&vt(ot,we.slice(Pt,Se),Ce),Pt=Se)}return ot}function yt(he,je){var Ce=je||{},we=Ce.boundary||"SheetJS";we="------="+we;for(var Se=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+we.slice(2)+'"',"","",""],Te=he.FullPaths[0],Je=Te,dt=he.FileIndex[0],$e=1;$e<he.FullPaths.length;++$e)if(Je=he.FullPaths[$e].slice(Te.length),dt=he.FileIndex[$e],!(!dt.size||!dt.content||Je=="Sh33tJ5")){Je=Je.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(kr){return"_x"+kr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(kr){return"_u"+kr.charCodeAt(0).toString(16)+"_"});for(var nt=dt.content,ot=pn&&Buffer.isBuffer(nt)?nt.toString("binary"):G(nt),Pt=0,Vt=Math.min(1024,ot.length),Jt=0,Ht=0;Ht<=Vt;++Ht)(Jt=ot.charCodeAt(Ht))>=32&&Jt<128&&++Pt;var Gt=Pt>=Vt*4/5;Se.push(we),Se.push("Content-Location: "+(Ce.root||"file:///C:/SheetJS/")+Je),Se.push("Content-Transfer-Encoding: "+(Gt?"quoted-printable":"base64")),Se.push("Content-Type: "+gr(dt,Je)),Se.push(""),Se.push(Gt?xt(ot):tt(ot))}return Se.push(we+`--\r
`),Se.join(`\r
`)}function nr(he){var je={};return E(je,he),je}function xr(he,je,Ce,we){var Se=we&&we.unsafe;Se||E(he);var Te=!Se&&Nr.find(he,je);if(!Te){var Je=he.FullPaths[0];je.slice(0,Je.length)==Je?Je=je:(Je.slice(-1)!="/"&&(Je+="/"),Je=(Je+je).replace("//","/")),Te={name:a(je),type:2},he.FileIndex.push(Te),he.FullPaths.push(Je),Se||Nr.utils.cfb_gc(he)}return Te.content=Ce,Te.size=Ce?Ce.length:0,we&&(we.CLSID&&(Te.clsid=we.CLSID),we.mt&&(Te.mt=we.mt),we.ct&&(Te.ct=we.ct)),Te}function qr(he,je){E(he);var Ce=Nr.find(he,je);if(Ce){for(var we=0;we<he.FileIndex.length;++we)if(he.FileIndex[we]==Ce)return he.FileIndex.splice(we,1),he.FullPaths.splice(we,1),!0}return!1}function Zr(he,je,Ce){E(he);var we=Nr.find(he,je);if(we){for(var Se=0;Se<he.FileIndex.length;++Se)if(he.FileIndex[Se]==we)return he.FileIndex[Se].name=a(Ce),he.FullPaths[Se]=Ce,!0}return!1}function Kr(he){j(he,!0)}return t.find=D,t.read=I,t.parse=d,t.write=Y,t.writeFile=z,t.utils={cfb_new:nr,cfb_add:xr,cfb_del:qr,cfb_mov:Zr,cfb_gc:Kr,ReadShift:iw,CheckField:Rie,prep_blob:go,bconcat:Ki,use_zlib:P,_deflateRaw:Dt,_inflateRaw:Tr,consts:K},t}();function qMe(e){return typeof e=="string"?hk(e):Array.isArray(e)?bMe(e):e}function eE(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=hk(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?HA(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([qMe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=e,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=Hm(t)),o.write(t),o.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function WMe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function js(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function aK(e,t){for(var r=[],n=js(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function pk(e){for(var t=[],r=js(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function gk(e){for(var t=[],r=js(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function XMe(e){for(var t=[],r=js(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var JN=new Date(1899,11,30,0,0,0);function Si(e,t){var r=e.getTime(),n=JN.getTime()+(e.getTimezoneOffset()-JN.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var pie=new Date,YMe=JN.getTime()+(pie.getTimezoneOffset()-JN.getTimezoneOffset())*6e4,sK=pie.getTimezoneOffset();function xk(e){var t=new Date;return t.setTime(e*24*60*60*1e3+YMe),t.getTimezoneOffset()!==sK&&t.setTime(t.getTime()+(t.getTimezoneOffset()-sK)*6e4),t}function JMe(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[s],10)}return t}var iK=new Date("2017-02-19T19:06:09.000Z"),gie=isNaN(iK.getFullYear())?new Date("2/19/17"):iK,ZMe=gie.getFullYear()==2017;function Qa(e,t){var r=new Date(e);if(ZMe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(gie.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function xg(e,t){if(pn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return HA(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return HA(aie(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return HA(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return HA(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function Ha(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Ha(e[r]));return t}function Ns(e,t){for(var r="";r.length<t;)r+=e;return r}function Od(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(t=Number(n)))?t/r:t}var eUe=["january","february","march","april","may","june","july","august","september","october","november","december"];function f1(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&eUe.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var tUe=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var s=r.split(n),i=[s[0]],o=1;o<s.length;++o)i.push(a),i.push(s[o]);return i}}();function xie(e){return e?e.content&&e.type?xg(e.content,!0):e.data?Iy(e.data):e.asNodeBuffer&&pn?Iy(e.asNodeBuffer().toString("binary")):e.asBinary?Iy(e.asBinary()):e._data&&e._data.getContent?Iy(xg(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function vie(e){if(!e)return null;if(e.data)return qG(e.data);if(e.asNodeBuffer&&pn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?qG(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function rUe(e){return e&&e.name.slice(-4)===".bin"?vie(e):xie(e)}function _u(e,t){for(var r=e.FullPaths||js(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var i=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||a==i)return e.files?e.files[r[s]]:e.FileIndex[s]}return null}function W8(e,t){var r=_u(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function oi(e,t,r){if(!r)return rUe(W8(e,t));if(!t)return null;try{return oi(e,t)}catch{return null}}function Dc(e,t,r){if(!r)return xie(W8(e,t));if(!t)return null;try{return Dc(e,t)}catch{return null}}function nUe(e,t,r){return vie(W8(e,t))}function oK(e){for(var t=e.FullPaths||js(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function un(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return pn?n=Ph(r):n=yMe(r),Nr.utils.cfb_add(e,t,n)}Nr.utils.cfb_add(e,t,r)}else e.file(t,r)}function X8(){return Nr.utils.cfb_new()}function bie(e,t){switch(t.type){case"base64":return Nr.read(e,{type:"base64"});case"binary":return Nr.read(e,{type:"binary"});case"buffer":case"array":return Nr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Oy(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var Ys=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,aUe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,lK=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,sUe=/<[^>]*>/g,ol=Ys.match(lK)?lK:sUe,iUe=/<\w*:/,oUe=/<(\/?)\w+:/;function Gr(e,t,r){for(var n={},a=0,s=0;a!==e.length&&!((s=e.charCodeAt(a))===32||s===10||s===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var i=e.match(aUe),o=0,c="",u=0,d="",f="",h=1;if(i)for(u=0;u!=i.length;++u){for(f=i[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(h=(a=f.charCodeAt(s+1))==34||a==39?1:0,c=f.slice(s+1+h,f.length-h),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var p=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[p]&&d.slice(o-3,o)=="ext")continue;n[p]=c,n[p.toLowerCase()]=c}}return n}function af(e){return e.replace(oUe,"<$1")}var yie={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Y8=pk(yie),Un=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(e,function(o,c){return yie[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,c){return String.fromCharCode(parseInt(c,16))});var i=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,i)+r(a.slice(i+3))}}(),J8=/[&<>'"]/g,lUe=/[\u0000-\u0008\u000b-\u001f]/g;function pa(e){var t=e+"";return t.replace(J8,function(r){return Y8[r]}).replace(lUe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function cK(e){return pa(e).replace(/ /g,"_x0020_")}var wie=/[\u0000-\u001f]/g;function Z8(e){var t=e+"";return t.replace(J8,function(r){return Y8[r]}).replace(/\n/g,"<br/>").replace(wie,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function cUe(e){var t=e+"";return t.replace(J8,function(r){return Y8[r]}).replace(wie,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var uK=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function uUe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Ma(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function K3(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=a&63,t+=String.fromCharCode(i);continue}if(s=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}i=e.charCodeAt(r++),o=((n&7)<<18|(a&63)<<12|(s&63)<<6|i&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function dK(e){var t=Cm(2*e.length),r,n,a=1,s=0,i=0,o;for(n=0;n<e.length;n+=a)a=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),a=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(t[s++]=i&255,t[s++]=i>>>8,i=0),t[s++]=r%256,t[s++]=r>>>8;return t.slice(0,s).toString("ucs2")}function AK(e){return Ph(e,"binary").toString("utf8")}var WC="foo bar bazâð£",Ea=pn&&(AK(WC)==K3(WC)&&AK||dK(WC)==K3(WC)&&dK)||K3,HA=pn?function(e){return Ph(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},Zw=function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),Eie=function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),dUe=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),AUe=/<\/?(?:vt:)?variant>/g,fUe=/<(?:vt:)([^>]*)>([\s\S]*)</;function fK(e,t){var r=Gr(e),n=e.match(dUe(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var i=s.replace(AUe,"").match(fUe);i&&a.push({v:Ea(i[2]),t:i[1]})}),a}var Cie=/(^\s|\s$|\n)/;function xo(e,t){return"<"+e+(t.match(Cie)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function e2(e){return js(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Kt(e,t,r){return"<"+e+(r!=null?e2(r):"")+(t!=null?(t.match(Cie)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function YF(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function hUe(e,t){switch(typeof e){case"string":var r=Kt("vt:lpwstr",pa(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Kt((e|0)==e?"vt:i4":"vt:r8",pa(String(e)));case"boolean":return Kt("vt:bool",e?"true":"false")}if(e instanceof Date)return Kt("vt:filetime",YF(e));throw new Error("Unable to serialize "+e)}function eL(e){if(pn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Ea(Hm(G8(e)));throw new Error("Bad input format: expected Buffer or string")}var t2=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Ci={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Lg=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Bc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function mUe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,s=5;s>=0;--s)a=a*256+e[t+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function pUe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,i=n?-t:t;isFinite(i)?i==0?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var o=0;o<=5;++o,s/=256)e[r+o]=s&255;e[r+6]=(a&15)<<4|s&15,e[r+7]=a>>4|n}var hK=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,s=e[0][n].length;a<s;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},mK=pn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Ph(t)})):hK(e)}:hK,pK=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(th(e,a)));return n.join("").replace(El,"")},tL=pn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(El,""):pK(e,t,r)}:pK,gK=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},_ie=pn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):gK(e,t,r)}:gK,xK=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(Jx(e,a)));return n.join("")},tE=pn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):xK(t,r,n)}:xK,Nie=function(e,t){var r=jc(e,t);return r>0?tE(e,t+4,t+4+r-1):""},Sie=Nie,kie=function(e,t){var r=jc(e,t);return r>0?tE(e,t+4,t+4+r-1):""},Bie=kie,jie=function(e,t){var r=2*jc(e,t);return r>0?tE(e,t+4,t+4+r-1):""},Tie=jie,Iie=function(t,r){var n=jc(t,r);return n>0?tL(t,r+4,r+4+n):""},Fie=Iie,Oie=function(e,t){var r=jc(e,t);return r>0?tE(e,t+4,t+4+r):""},Die=Oie,Pie=function(e,t){return mUe(e,t)},ZN=Pie,rL=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};pn&&(Sie=function(t,r){if(!Buffer.isBuffer(t))return Nie(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},Bie=function(t,r){if(!Buffer.isBuffer(t))return kie(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},Tie=function(t,r){if(!Buffer.isBuffer(t))return jie(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},Fie=function(t,r){if(!Buffer.isBuffer(t))return Iie(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},Die=function(t,r){if(!Buffer.isBuffer(t))return Oie(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},ZN=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):Pie(t,r)},rL=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Jx=function(e,t){return e[t]},th=function(e,t){return e[t+1]*256+e[t]},gUe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},jc=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Sp=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},xUe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function iw(e,t){var r="",n,a,s=[],i,o,c,u;switch(t){case"dbcs":if(u=this.l,pn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(th(this,u)),u+=2;e*=2;break;case"utf8":r=tE(this,this.l,this.l+e);break;case"utf16le":e*=2,r=tL(this,this.l,this.l+e);break;case"wstr":return iw.call(this,e,"dbcs");case"lpstr-ansi":r=Sie(this,this.l),e=4+jc(this,this.l);break;case"lpstr-cp":r=Bie(this,this.l),e=4+jc(this,this.l);break;case"lpwstr":r=Tie(this,this.l),e=4+2*jc(this,this.l);break;case"lpp4":e=4+jc(this,this.l),r=Fie(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+jc(this,this.l),r=Die(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(i=Jx(this,this.l+e++))!==0;)s.push(qC(i));r=s.join("");break;case"_wstr":for(e=0,r="";(i=th(this,this.l+e))!==0;)s.push(qC(i)),e+=2;e+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=Jx(this,u),this.l=u+1,o=iw.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(qC(th(this,u))),u+=2}r=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=Jx(this,u),this.l=u+1,o=iw.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(qC(Jx(this,u))),u+=1}r=s.join("");break;default:switch(e){case 1:return n=Jx(this,this.l),this.l++,n;case 2:return n=(t==="i"?gUe:th)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?Sp:xUe)(this,this.l),this.l+=4,n):(a=jc(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=ZN(this,this.l):a=ZN([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=_ie(this,this.l,e);break}}return this.l+=e,r}var vUe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},bUe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},yUe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function wUe(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)yUe(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var i=t.charCodeAt(a);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,vUe(this,t,this.l);break;case 8:if(n=8,r==="f"){pUe(this,t,this.l);break}case 16:break;case-4:n=4,bUe(this,t,this.l);break}return this.l+=n,this}function Rie(e,t){var r=_ie(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function go(e,t){e.l=t,e.read_shift=iw,e.chk=Rie,e.write_shift=wUe}function al(e,t){e.l+=t}function Et(e){var t=Cm(e);return go(t,0),t}function Rh(e,t,r){if(e){var n,a,s;go(e,e.l||0);for(var i=e.length,o=0,c=0;e.l<i;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var u=o2[o]||o2[65535];for(n=e.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=e.read_shift(1))&127)<<7*a;c=e.l+s;var d=u.f&&u.f(e,s,r);if(e.l=c,t(d,u,o))return}}}function ec(){var e=[],t=pn?256:2048,r=function(u){var d=Et(u);return go(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},i=function(){return a(),Ki(e)},o=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(t)};return{next:s,push:o,end:i,_bufs:e}}function Mt(e,t,r,n){var a=+t,s;if(!isNaN(a)){n||(n=o2[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var i=e.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,(a&127)+128),i.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&rL(r)&&e.push(r)}}function ow(e,t,r){var n=Ha(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function vK(e,t,r){var n=Ha(e);return n.s=ow(n.s,t.s,r),n.e=ow(n.e,t.s,r),n}function lw(e,t){if(e.cRel&&e.c<0)for(e=Ha(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Ha(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Hr(e);return!e.cRel&&e.cRel!=null&&(r=_Ue(r)),!e.rRel&&e.rRel!=null&&(r=EUe(r)),r}function q3(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+os(e.s.c)+":"+(e.e.cRel?"":"$")+os(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+qs(e.s.r)+":"+(e.e.rRel?"":"$")+qs(e.e.r):lw(e.s,t.biff)+":"+lw(e.e,t.biff)}function nL(e){return parseInt(CUe(e),10)-1}function qs(e){return""+(e+1)}function EUe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function CUe(e){return e.replace(/\$(\d+)$/,"$1")}function aL(e){for(var t=NUe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function os(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function _Ue(e){return e.replace(/^([A-Z])/,"$$$1")}function NUe(e){return e.replace(/^\$([A-Z])/,"$1")}function SUe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ls(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function Hr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function rc(e){var t=e.indexOf(":");return t==-1?{s:ls(e),e:ls(e)}:{s:ls(e.slice(0,t)),e:ls(e.slice(t+1))}}function an(e,t){return typeof t>"u"||typeof t=="number"?an(e.s,e.e):(typeof e!="string"&&(e=Hr(e)),typeof t!="string"&&(t=Hr(t)),e==t?e:e+":"+t)}function Qn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=e.length;for(r=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===s||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function bK(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Hu(e.z,r?Si(t):t)}catch{}try{return e.w=Hu((e.XF||{}).numFmtId||(r?14:0),r?Si(t):t)}catch{return""+t}}function _h(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Lh[e.v]||e.v:t==null?bK(e,e.v):bK(e,t))}function Vm(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function Lie(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,s=e||(a?[]:{}),i=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?ls(n.origin):n.origin;i=c.r,o=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Qn(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var p={v:t[f][h]},g=i+f,x=o+h;if(u.s.r>g&&(u.s.r=g),u.s.c>x&&(u.s.c=x),u.e.r<g&&(u.e.r=g),u.e.c<x&&(u.e.c=x),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))p=t[f][h];else if(Array.isArray(p.v)&&(p.f=t[f][h][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||Lr[14],n.cellDates?(p.t="d",p.w=Hu(p.z,Si(p.v))):(p.t="n",p.v=Si(p.v),p.w=Hu(p.z,p.v))):p.t="s";if(a)s[g]||(s[g]=[]),s[g][x]&&s[g][x].z&&(p.z=s[g][x].z),s[g][x]=p;else{var b=Hr({c:x,r:g});s[b]&&s[b].z&&(p.z=s[b].z),s[b]=p}}}return u.s.c<1e7&&(s["!ref"]=an(u)),s}function nb(e,t){return Lie(null,e,t)}function kUe(e){return e.read_shift(4,"i")}function Dd(e,t){return t||(t=Et(4)),t.write_shift(4,e),t}function rl(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Xi(e,t){var r=!1;return t==null&&(r=!0,t=Et(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function BUe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function jUe(e,t){return t||(t=Et(4)),t.write_shift(2,0),t.write_shift(2,0),t}function sL(e,t){var r=e.l,n=e.read_shift(1),a=rl(e),s=[],i={t:a,h:a};if((n&1)!==0){for(var o=e.read_shift(4),c=0;c!=o;++c)s.push(BUe(e));i.r=s}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}function TUe(e,t){var r=!1;return t==null&&(r=!0,t=Et(15+4*e.t.length)),t.write_shift(1,0),Xi(e.t,t),r?t.slice(0,t.l):t}var IUe=sL;function FUe(e,t){var r=!1;return t==null&&(r=!0,t=Et(23+4*e.t.length)),t.write_shift(1,1),Xi(e.t,t),t.write_shift(4,1),jUe({},t),r?t.slice(0,t.l):t}function Gu(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Mg(e,t){return t==null&&(t=Et(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Ug(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Qg(e,t){return t==null&&(t=Et(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var OUe=rl,Mie=Xi;function iL(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function eS(e,t){var r=!1;return t==null&&(r=!0,t=Et(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var DUe=rl,JF=iL,oL=eS;function lL(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?ZN([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Sp(t,0)>>2;return r?a/100:a}function Uie(e,t){t==null&&(t=Et(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function Qie(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function PUe(e,t){return t||(t=Et(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Hg=Qie,ab=PUe;function Zo(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function vg(e,t){return(t||Et(8)).write_shift(8,e,"f")}function RUe(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),s=e.read_shift(2,"i"),i=e.read_shift(1),o=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=Wp[a];u&&(t.rgb=n2(u));break;case 2:t.rgb=n2([i,o,c]);break;case 3:t.theme=a;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function tS(e,t){if(t||(t=Et(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function LUe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function MUe(e,t){t||(t=Et(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function Hie(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function UUe(e){return Hie(e,1)}function QUe(e){return Hie(e,2)}var cL=2,Vl=3,XC=11,yK=12,rS=19,YC=64,HUe=65,VUe=71,zUe=4108,$Ue=4126,zi=80,Vie=81,GUe=[zi,Vie],ZF={1:{n:"CodePage",t:cL},2:{n:"Category",t:zi},3:{n:"PresentationFormat",t:zi},4:{n:"ByteCount",t:Vl},5:{n:"LineCount",t:Vl},6:{n:"ParagraphCount",t:Vl},7:{n:"SlideCount",t:Vl},8:{n:"NoteCount",t:Vl},9:{n:"HiddenCount",t:Vl},10:{n:"MultimediaClipCount",t:Vl},11:{n:"ScaleCrop",t:XC},12:{n:"HeadingPairs",t:zUe},13:{n:"TitlesOfParts",t:$Ue},14:{n:"Manager",t:zi},15:{n:"Company",t:zi},16:{n:"LinksUpToDate",t:XC},17:{n:"CharacterCount",t:Vl},19:{n:"SharedDoc",t:XC},22:{n:"HyperlinksChanged",t:XC},23:{n:"AppVersion",t:Vl,p:"version"},24:{n:"DigSig",t:HUe},26:{n:"ContentType",t:zi},27:{n:"ContentStatus",t:zi},28:{n:"Language",t:zi},29:{n:"Version",t:zi},255:{},2147483648:{n:"Locale",t:rS},2147483651:{n:"Behavior",t:rS},1919054434:{}},eO={1:{n:"CodePage",t:cL},2:{n:"Title",t:zi},3:{n:"Subject",t:zi},4:{n:"Author",t:zi},5:{n:"Keywords",t:zi},6:{n:"Comments",t:zi},7:{n:"Template",t:zi},8:{n:"LastAuthor",t:zi},9:{n:"RevNumber",t:zi},10:{n:"EditTime",t:YC},11:{n:"LastPrinted",t:YC},12:{n:"CreatedDate",t:YC},13:{n:"ModifiedDate",t:YC},14:{n:"PageCount",t:Vl},15:{n:"WordCount",t:Vl},16:{n:"CharCount",t:Vl},17:{n:"Thumbnail",t:VUe},18:{n:"Application",t:zi},19:{n:"DocSecurity",t:Vl},255:{},2147483648:{n:"Locale",t:rS},2147483651:{n:"Behavior",t:rS},1919054434:{}},wK={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},KUe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function qUe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var WUe=qUe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Wp=Ha(WUe),Lh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},zie={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},tO={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},JC={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function uL(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function XUe(e){var t=uL();if(!e||!e.match)return t;var r={};if((e.match(ol)||[]).forEach(function(n){var a=Gr(n);switch(a[0].replace(iUe,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[tO[a.ContentType]]!==void 0&&t[tO[a.ContentType]].push(a.PartName);break}}),t.xmlns!==Ci.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function $ie(e,t){var r=XMe(tO),n=[],a;n[n.length]=Ys,n[n.length]=Kt("Types",null,{xmlns:Ci.CT,"xmlns:xsd":Ci.xsd,"xmlns:xsi":Ci.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Kt("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){e[c]&&e[c].length>0&&(a=e[c][0],n[n.length]=Kt("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:JC[c][t.bookType]||JC[c].xlsx}))},i=function(c){(e[c]||[]).forEach(function(u){n[n.length]=Kt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:JC[c][t.bookType]||JC[c].xlsx})})},o=function(c){(e[c]||[]).forEach(function(u){n[n.length]=Kt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Cn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function r2(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function cw(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(ol)||[]).forEach(function(a){var s=Gr(a);if(s[0]==="<Relationship"){var i={};i.Type=s.Type,i.Target=s.Target,i.Id=s.Id,s.TargetMode&&(i.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:Oy(s.Target,t);r[o]=i,n[s.Id]=i}}),r["!id"]=n,r}function jv(e){var t=[Ys,Kt("Relationships",null,{xmlns:Ci.RELS})];return js(e["!id"]).forEach(function(r){t[t.length]=Kt("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function fa(e,t,r,n,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[Cn.HLINK,Cn.XPATH,Cn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var YUe="application/vnd.oasis.opendocument.spreadsheet";function JUe(e,t){for(var r=eL(e),n,a;n=t2.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=Gr(n[0],!1),a.path=="/"&&a.type!==YUe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function ZUe(e){var t=[Ys];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function EK(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function e7e(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function t7e(e){var t=[Ys];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(EK(e[r][0],e[r][1])),t.push(e7e("",e[r][0]));return t.push(EK("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function Gie(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+qN.version+"</meta:generator></office:meta></office:document-meta>"}var Mu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],r7e=function(){for(var e=new Array(Mu.length),t=0;t<Mu.length;++t){var r=Mu[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function Kie(e){var t={};e=Ea(e);for(var r=0;r<Mu.length;++r){var n=Mu[r],a=e.match(r7e[r]);a!=null&&a.length>0&&(t[n[1]]=Un(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Qa(t[n[1]]))}return t}function W3(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=pa(t),n[n.length]=r?Kt(e,t,r):xo(e,t))}function qie(e,t){var r=t||{},n=[Ys,Kt("cp:coreProperties",null,{"xmlns:cp":Ci.CORE_PROPS,"xmlns:dc":Ci.dc,"xmlns:dcterms":Ci.dcterms,"xmlns:dcmitype":Ci.dcmitype,"xmlns:xsi":Ci.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&W3("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:YF(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&W3("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:YF(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=Mu.length;++s){var i=Mu[s],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:e?e[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&W3(i[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Xp=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Wie=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Xie(e,t,r,n){var a=[];if(typeof e=="string")a=fK(e,n);else for(var s=0;s<e.length;++s)a=a.concat(e[s].map(function(d){return{v:d}}));var i=typeof t=="string"?fK(t,n).map(function(d){return d.v}):t,o=0,c=0;if(i.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=i.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=c,r.DefinedNames=i.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=i.slice(o,o+c);break}o+=c}}function n7e(e,t,r){var n={};return t||(t={}),e=Ea(e),Xp.forEach(function(a){var s=(e.match(Zw(a[0]))||[])[1];switch(a[2]){case"string":s&&(t[a[1]]=Un(s));break;case"bool":t[a[1]]=s==="true";break;case"raw":var i=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));i&&i.length>0&&(n[a[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&Xie(n.HeadingPairs,n.TitlesOfParts,t,r),t}function Yie(e){var t=[],r=Kt;return e||(e={}),e.Application="SheetJS",t[t.length]=Ys,t[t.length]=Kt("Properties",null,{xmlns:Ci.EXT_PROPS,"xmlns:vt":Ci.vt}),Xp.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=pa(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+pa(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var a7e=/<[^>]+>[^<]*/g;function s7e(e,t){var r={},n="",a=e.match(a7e);if(a)for(var s=0;s!=a.length;++s){var i=a[s],o=Gr(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Un(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var c=i.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Un(d);break;case"bool":r[n]=Ma(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Qa(d);break;case"cy":case"error":r[n]=Un(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,c)}}else if(i.slice(0,2)!=="</"){if(t.WTF)throw new Error(i)}}}return r}function Jie(e){var t=[Ys,Kt("Properties",null,{xmlns:Ci.CUST_PROPS,"xmlns:vt":Ci.vt})];if(!e)return t.join("");var r=1;return js(e).forEach(function(a){++r,t[t.length]=Kt("property",hUe(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:pa(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var rO={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},X3;function i7e(e,t,r){X3||(X3=pk(rO)),t=X3[t]||t,e[t]=r}function o7e(e,t){var r=[];return js(rO).map(function(n){for(var a=0;a<Mu.length;++a)if(Mu[a][1]==n)return Mu[a];for(a=0;a<Xp.length;++a)if(Xp[a][1]==n)return Xp[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(xo(rO[n[1]]||n[1],a))}}),Kt("DocumentProperties",r.join(""),{xmlns:Bc.o})}function l7e(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&js(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)){for(var i=0;i<Mu.length;++i)if(s==Mu[i][1])return;for(i=0;i<Xp.length;++i)if(s==Xp[i][1])return;for(i=0;i<r.length;++i)if(s==r[i])return;var o=e[s],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),a.push(Kt(cK(s),o,{"dt:dt":c}))}}),t&&js(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)&&!(e&&Object.prototype.hasOwnProperty.call(e,s))){var i=t[s],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),a.push(Kt(cK(s),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+Bc.o+'">'+a.join("")+"</"+n+">"}function dL(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function c7e(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var i=Et(8);return i.write_shift(4,n),i.write_shift(4,a),i}function Zie(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function eoe(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function toe(e,t,r){return t===31?eoe(e):Zie(e,t,r)}function nO(e,t,r){return toe(e,t,r===!1?0:4)}function u7e(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return toe(e,t,0)}function d7e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(El,""),e.l-a&2&&(e.l+=2)}return r}function A7e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(El,"");return r}function f7e(e){var t=e.l,r=nS(e,Vie);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=nS(e,Vl);return[r,n]}function h7e(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(f7e(e));return r}function CK(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var s=e.read_shift(4),i=e.read_shift(4);n[s]=e.read_shift(i,t===1200?"utf16le":"utf8").replace(El,"").replace(Fy,"!"),t===1200&&i%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function roe(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function m7e(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function nS(e,t,r){var n=e.read_shift(2),a,s=r||{};if(e.l+=2,t!==yK&&n!==t&&GUe.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===yK?n:t){case 2:return a=e.read_shift(2,"i"),s.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return Zie(e,n,4).replace(El,"");case 31:return eoe(e);case 64:return dL(e);case 65:return roe(e);case 71:return m7e(e);case 80:return nO(e,n,!s.raw).replace(El,"");case 81:return u7e(e,n).replace(El,"");case 4108:return h7e(e);case 4126:case 4127:return n==4127?d7e(e):A7e(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function _K(e,t){var r=Et(4),n=Et(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Et(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=c7e(t);break;case 31:case 80:for(n=Et(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Ki([r,n])}function NK(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0,o=0,c=-1,u={};for(i=0;i!=a;++i){var d=e.read_shift(4),f=e.read_shift(4);s[i]=[d,f+r]}s.sort(function(w,_){return w[1]-_[1]});var h={};for(i=0;i!=a;++i){if(e.l!==s[i][1]){var p=!0;if(i>0&&t)switch(t[s[i-1][0]].t){case 2:e.l+2===s[i][1]&&(e.l+=2,p=!1);break;case 80:e.l<=s[i][1]&&(e.l=s[i][1],p=!1);break;case 4108:e.l<=s[i][1]&&(e.l=s[i][1],p=!1);break}if((!t||i==0)&&e.l<=s[i][1]&&(p=!1,e.l=s[i][1]),p)throw new Error("Read Error: Expected address "+s[i][1]+" at "+e.l+" :"+i)}if(t){var g=t[s[i][0]];if(h[g.n]=nS(e,g.t,{raw:!0}),g.p==="version"&&(h[g.n]=String(h[g.n]>>16)+"."+("0000"+String(h[g.n]&65535)).slice(-4)),g.n=="CodePage")switch(h[g.n]){case 0:h[g.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Nd(o=h[g.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[g.n])}}else if(s[i][0]===1){if(o=h.CodePage=nS(e,cL),Nd(o),c!==-1){var x=e.l;e.l=s[c][1],u=CK(e,o),e.l=x}}else if(s[i][0]===0){if(o===0){c=i,e.l=s[i+1][1];continue}u=CK(e,o)}else{var b=u[s[i][0]],y;switch(e[e.l]){case 65:e.l+=4,y=roe(e);break;case 30:e.l+=4,y=nO(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=nO(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=Ms(e,4);break;case 64:e.l+=4,y=Qa(dL(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[b]=y}}return e.l=r+n,h}var noe=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function p7e(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function SK(e,t,r){var n=Et(8),a=[],s=[],i=8,o=0,c=Et(8),u=Et(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),i+=8+c.length,!t){u=Et(8),u.write_shift(4,0),a.unshift(u);var d=[Et(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(c=Et(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Ki(d),s.unshift(c),i+=8+c.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(noe.indexOf(e[o][0])>-1||Wie.indexOf(e[o][0])>-1)&&e[o][1]!=null){var h=e[o][1],p=0;if(t){p=+t[e[o][0]];var g=r[p];if(g.p=="version"&&typeof h=="string"){var x=h.split(".");h=(+x[0]<<16)+(+x[1]||0)}c=_K(g.t,h)}else{var b=p7e(h);b==-1&&(b=31,h=String(h)),c=_K(b,h)}s.push(c),u=Et(8),u.write_shift(4,t?p:2+o),a.push(u),i+=8+c.length}var y=8*(s.length+1);for(o=0;o<s.length;++o)a[o].write_shift(4,y),y+=s[o].length;return n.write_shift(4,i),n.write_shift(4,s.length),Ki([n].concat(a).concat(s))}function kK(e,t,r){var n=e.content;if(!n)return{};go(n,0);var a,s,i,o,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==Nr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),o=n.read_shift(4),a===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);a===2&&(i=n.read_shift(16),c=n.read_shift(4));var f=NK(n,t),h={SystemIdentifier:u};for(var p in f)h[p]=f[p];if(h.FMTID=s,a===1)return h;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var g;try{g=NK(n,null)}catch{}for(p in g)h[p]=g[p];return h.FMTID=[s,i],h}function BK(e,t,r,n,a,s){var i=Et(a?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,Nr.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,a?68:48);var c=SK(e,r,n);if(o.push(c),a){var u=SK(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+c.length),o.push(u)}return Ki(o)}function N0(e,t){return e.read_shift(t),null}function g7e(e,t){t||(t=Et(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function x7e(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function Ms(e,t){return e.read_shift(t)===1}function pl(e,t){return t||(t=Et(2)),t.write_shift(2,+!!e),t}function li(e){return e.read_shift(2,"u")}function Su(e,t){return t||(t=Et(2)),t.write_shift(2,e),t}function aoe(e,t){return x7e(e,t,li)}function v7e(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function soe(e,t,r){return r||(r=Et(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function rE(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=e.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?e.read_shift(n,a):"";return i}function b7e(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,s=1+(r&1),i=0,o,c={};a&&(i=e.read_shift(2)),n&&(o=e.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return a&&(e.l+=4*i),n&&(e.l+=o),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function y7e(e){var t=e.t||"",r=Et(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Et(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return Ki(a)}function bg(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function nE(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):bg(e,n,r)}function Vg(e,t,r){if(r.biff>5)return nE(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function ioe(e,t,r){return r||(r=Et(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function w7e(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function E7e(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(El,"");return n&&(e.l+=24),a}function C7e(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=e.read_shift(s>>1,"utf16le").replace(El,"");return r+i}function _7e(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return E7e(e);case"0303000000000000c000000000000046":return C7e(e);default:throw new Error("Unsupported Moniker "+r)}}function ZC(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(El,""):"";return r}function jK(e,t){t||(t=Et(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function N7e(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var s,i,o,c,u="",d,f;a&16&&(s=ZC(e,r-e.l)),a&128&&(i=ZC(e,r-e.l)),(a&257)===257&&(o=ZC(e,r-e.l)),(a&257)===1&&(c=_7e(e,r-e.l)),a&8&&(u=ZC(e,r-e.l)),a&32&&(d=e.read_shift(16)),a&64&&(f=dL(e)),e.l=r;var h=i||o||c||"";h&&u&&(h+="#"+u),h||(h="#"+u),a&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var p={Target:h};return d&&(p.guid=d),f&&(p.time=f),s&&(p.Tooltip=s),p}function S7e(e){var t=Et(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}t.write_shift(4,2),t.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)t.write_shift(4,i[r]);if(s==28)n=n.slice(1),jK(n,t);else if(s&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));var o=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),s&8&&jK(a>-1?n.slice(a+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function ooe(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function loe(e,t){var r=ooe(e);return r[3]=0,r}function sf(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function yg(e,t,r,n){return n||(n=Et(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function k7e(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function B7e(e,t,r){return t===0?"":Vg(e,t,r)}function j7e(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),s=e.read_shift(n,"i"),i=e.read_shift(n,"i");return[a,s,i]}function coe(e){var t=e.read_shift(2),r=lL(e);return[t,r]}function T7e(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=rE(e,t,r),s=e.read_shift(2);if(n-=e.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return e.l+=s,a}function vk(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function uoe(e,t){return t||(t=Et(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function doe(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var I7e=doe;function Aoe(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function F7e(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function O7e(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Uo(e){e.l+=2,e.l+=e.read_shift(2)}var D7e={0:Uo,4:Uo,5:Uo,6:Uo,7:O7e,8:Uo,9:Uo,10:Uo,11:Uo,12:Uo,13:F7e,14:Uo,15:Uo,16:Uo,17:Uo,18:Uo,19:Uo,20:Uo,21:Aoe};function P7e(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(D7e[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function e_(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function AL(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Et(a);return s.write_shift(2,n),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function R7e(e,t){return t===0||e.read_shift(2),1200}function L7e(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=Vg(e,0,r);return e.read_shift(t+n-e.l),a}function M7e(e,t){var r=!t||t.biff==8,n=Et(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function U7e(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function Q7e(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var i=rE(e,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:a,dt:s,name:i}}function H7e(e,t){var r=!t||t.biff>=8?2:1,n=Et(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function V7e(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0;i!=a&&e.l<r;++i)s.push(b7e(e));return s.Count=n,s.Unique=a,s}function z7e(e,t){var r=Et(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=y7e(e[a]);var s=Ki([r].concat(n));return s.parts=[r.length].concat(n.map(function(i){return i.length})),s}function $7e(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function G7e(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function K7e(e){var t=k7e(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function q7e(e){return e.read_shift(2),e.read_shift(4)}function TK(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function W7e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:s,CurTab:i,FirstTab:o,Selected:c,TabRatio:u}}function X7e(){var e=Et(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function Y7e(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function J7e(e){var t=Et(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function Z7e(){}function e9e(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=rE(e,0,r),n}function t9e(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,s=Et(a);return s.write_shift(2,e.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function r9e(e){var t=sf(e);return t.isst=e.read_shift(4),t}function n9e(e,t,r,n){var a=Et(10);return yg(e,t,n,a),a.write_shift(4,r),a}function a9e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=sf(e);r.biff==2&&e.l++;var s=nE(e,n-e.l,r);return a.val=s,a}function s9e(e,t,r,n,a){var s=!a||a.biff==8,i=Et(8+ +s+(1+s)*r.length);return yg(e,t,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}function i9e(e,t,r){var n=e.read_shift(2),a=Vg(e,0,r);return[n,a]}function o9e(e,t,r,n){var a=r&&r.biff==5;n||(n=Et(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var l9e=Vg;function IK(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,s=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:s,c:o},e:{r:i,c}}}function c9e(e,t){var r=t.biff==8||!t.biff?4:2,n=Et(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function u9e(e){var t=e.read_shift(2),r=e.read_shift(2),n=coe(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function d9e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(coe(e));if(e.l!==r)throw new Error("MulRK read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:i,rkrec:s}}function A9e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:i,ixfe:s}}function f9e(e,t,r,n){var a={},s=e.read_shift(4),i=e.read_shift(4),o=e.read_shift(4),c=e.read_shift(2);return a.patternType=KUe[o>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=i&15,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=o&127,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function h9e(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=f9e(e,t,n.fStyle,r),n}function FK(e,t,r,n){var a=r&&r.biff==5;n||(n=Et(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function m9e(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function p9e(e){var t=Et(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function OK(e,t,r){var n=sf(e);(r.biff==2||t==9)&&++e.l;var a=v7e(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function g9e(e,t,r,n,a,s){var i=Et(8);return yg(e,t,n,i),soe(r,s,i),i}function x9e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=sf(e),a=Zo(e);return n.val=a,n}function v9e(e,t,r,n){var a=Et(14);return yg(e,t,n,a),vg(r,a),a}var DK=B7e;function b9e(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=bg(e,s),o=[];n>e.l;)o.push(nE(e));return[s,a,i,o]}function PK(e,t,r){var n=e.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=T7e(e,t-2,r)),s.body=a||e.read_shift(t-2),typeof a=="string"&&(s.Name=a),s}var y9e=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function RK(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=bg(e,i,r);a&32&&(u=y9e[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||o===0||!(d>0)?[]:Pze(e,d,r,o);return{chKey:s,Name:u,itab:c,rgce:f}}function foe(e,t,r){if(r.biff<8)return w9e(e,t,r);for(var n=[],a=e.l+t,s=e.read_shift(r.biff>8?4:2);s--!==0;)n.push(j7e(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function w9e(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=rE(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function E9e(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),s=bg(e,n,r),i=bg(e,a,r);return[s,i]}function C9e(e,t,r){var n=doe(e);e.l++;var a=e.read_shift(1);return t-=8,[Rze(e,t,r),a,n]}function LK(e,t,r){var n=I7e(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,Oze(e,t,r)]}function _9e(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function N9e(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=Vg(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},o,i,s]}}function S9e(e,t,r){return N9e(e,t,r)}function k9e(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(vk(e));return r}function B9e(e){var t=Et(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)uoe(e[r],t);return t}function j9e(e,t,r){if(r&&r.biff<8)return I9e(e,t,r);var n=Aoe(e),a=P7e(e,t-22,n[1]);return{cmo:n,ft:a}}var T9e={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function I9e(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((T9e[n]||al)(e,t,r)),{cmo:[a,n,s],ft:i}}function F9e(e,t,r){var n=e.l,a="";try{e.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:i=w7e(e,6,r);var o=e.read_shift(2);e.read_shift(2),li(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=bg(e,e.lens[u+1]-e.lens[u]-1);if(a+=f,a.length>=(d?o:2*o))break}if(a.length!==o&&a.length!==o*2)throw new Error("cchText: "+o+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function O9e(e,t){var r=vk(e);e.l+=16;var n=N7e(e,t-24);return[r,n]}function D9e(e){var t=Et(24),r=ls(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return Ki([t,S7e(e[1])])}function P9e(e,t){e.read_shift(2);var r=vk(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(El,""),[r,n]}function R9e(e){var t=e[1].Tooltip,r=Et(10+2*(t.length+1));r.write_shift(2,2048);var n=ls(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function L9e(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=wK[r]||r,r=e.read_shift(2),t[1]=wK[r]||r,t}function M9e(e){return e||(e=Et(4)),e.write_shift(2,1),e.write_shift(2,1),e}function U9e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(loe(e));return r}function Q9e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(loe(e));return r}function H9e(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function hoe(e,t,r){if(!r.cellStyles)return al(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:s,w:i,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function V9e(e,t){var r=Et(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function z9e(e,t){var r={};return t<32||(e.l+=16,r.header=Zo(e),r.footer=Zo(e),e.l+=2),r}function $9e(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function G9e(e){for(var t=Et(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var K9e=sf,q9e=aoe,W9e=nE;function X9e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function Y9e(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=sf(e);++e.l;var a=Vg(e,t-7,r);return n.t="str",n.val=a,n}function J9e(e){var t=sf(e);++e.l;var r=Zo(e);return t.t="n",t.val=r,t}function Z9e(e,t,r){var n=Et(15);return oE(n,e,t),n.write_shift(8,r,"f"),n}function eQe(e){var t=sf(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function tQe(e,t,r){var n=Et(9);return oE(n,e,t),n.write_shift(2,r),n}function rQe(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function nQe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function aQe(e,t,r){var n=e.l+t,a=sf(e),s=e.read_shift(2),i=bg(e,s,r);return e.l=n,a.t="str",a.val=i,a}var sQe=[2,3,48,49,131,139,140,245],aO=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=pk({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var u=[],d=Cm(1);switch(c.type){case"base64":d=Oc(zc(o));break;case"binary":d=Oc(o);break;case"buffer":case"array":d=o;break}go(d,0);var f=d.read_shift(1),h=!!(f&136),p=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,h=!0;break;case 49:p=!0,h=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var x=0,b=521;f==2&&(x=d.read_shift(2)),d.l+=3,f!=2&&(x=d.read_shift(4)),x>1048576&&(x=1e6),f!=2&&(b=d.read_shift(2));var y=d.read_shift(2),w=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(w=e[d[d.l]]),d.l+=1,d.l+=2),g&&(d.l+=36);for(var _=[],B={},k=Math.min(d.length,f==2?521:b-10-(p?264:0)),I=g?32:11;d.l<k&&d[d.l]!=13;)switch(B={},B.name=Xw.utils.decode(w,d.slice(d.l,d.l+I)).replace(/[\u0000\r\n].*$/g,""),d.l+=I,B.type=String.fromCharCode(d.read_shift(1)),f!=2&&!g&&(B.offset=d.read_shift(4)),B.len=d.read_shift(1),f==2&&(B.offset=d.read_shift(2)),B.dec=d.read_shift(1),B.name.length&&_.push(B),f!=2&&(d.l+=g?13:14),B.type){case"B":(!p||B.len!=8)&&c.WTF&&console.log("Skipping "+B.name+":"+B.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+B.name+":"+B.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+B.type)}if(d[d.l]!==13&&(d.l=b-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=b;var E=0,N=0;for(u[0]=[],N=0;N!=_.length;++N)u[0][N]=_[N].name;for(;x-- >0;){if(d[d.l]===42){d.l+=y;continue}for(++d.l,u[++E]=[],N=0,N=0;N!=_.length;++N){var j=d.slice(d.l,d.l+_[N].len);d.l+=_[N].len,go(j,0);var R=Xw.utils.decode(w,j);switch(_[N].type){case"C":R.trim().length&&(u[E][N]=R.replace(/\s+$/,""));break;case"D":R.length===8?u[E][N]=new Date(+R.slice(0,4),+R.slice(4,6)-1,+R.slice(6,8)):u[E][N]=R;break;case"F":u[E][N]=parseFloat(R.trim());break;case"+":case"I":u[E][N]=g?j.read_shift(-4,"i")^2147483648:j.read_shift(4,"i");break;case"L":switch(R.trim().toUpperCase()){case"Y":case"T":u[E][N]=!0;break;case"N":case"F":u[E][N]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+R+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[E][N]="##MEMO##"+(g?parseInt(R.trim(),10):j.read_shift(4));break;case"N":R=R.replace(/\u0000/g,"").trim(),R&&R!="."&&(u[E][N]=+R||0);break;case"@":u[E][N]=new Date(j.read_shift(-8,"f")-621356832e5);break;case"T":u[E][N]=new Date((j.read_shift(4)-2440588)*864e5+j.read_shift(4));break;case"Y":u[E][N]=j.read_shift(4,"i")/1e4+j.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[E][N]=-j.read_shift(-8,"f");break;case"B":if(p&&_[N].len==8){u[E][N]=j.read_shift(8,"f");break}case"G":case"P":j.l+=_[N].len;break;case"0":if(_[N].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+_[N].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=_,u}function n(o,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=nb(r(o,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(o,c){try{return Vm(n(o,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,c){var u=c||{};if(+u.codepage>=0&&Nd(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=ec(),f=iS(o,{header:1,raw:!0,cellDates:!0}),h=f[0],p=f.slice(1),g=o["!cols"]||[],x=0,b=0,y=0,w=1;for(x=0;x<h.length;++x){if(((g[x]||{}).DBF||{}).name){h[x]=g[x].DBF.name,++y;continue}if(h[x]!=null){if(++y,typeof h[x]=="number"&&(h[x]=h[x].toString(10)),typeof h[x]!="string")throw new Error("DBF Invalid column name "+h[x]+" |"+typeof h[x]+"|");if(h.indexOf(h[x])!==x){for(b=0;b<1024;++b)if(h.indexOf(h[x]+"_"+b)==-1){h[x]+="_"+b;break}}}}var _=Qn(o["!ref"]),B=[],k=[],I=[];for(x=0;x<=_.e.c-_.s.c;++x){var E="",N="",j=0,R=[];for(b=0;b<p.length;++b)p[b][x]!=null&&R.push(p[b][x]);if(R.length==0||h[x]==null){B[x]="?";continue}for(b=0;b<R.length;++b){switch(typeof R[b]){case"number":N="B";break;case"string":N="C";break;case"boolean":N="L";break;case"object":N=R[b]instanceof Date?"D":"C";break;default:N="C"}j=Math.max(j,String(R[b]).length),E=E&&E!=N?"C":N}j>250&&(j=250),N=((g[x]||{}).DBF||{}).type,N=="C"&&g[x].DBF.len>j&&(j=g[x].DBF.len),E=="B"&&N=="N"&&(E="N",I[x]=g[x].DBF.dec,j=g[x].DBF.len),k[x]=E=="C"||N=="N"?j:s[E]||0,w+=k[x],B[x]=E}var D=d.next(32);for(D.write_shift(4,318902576),D.write_shift(4,p.length),D.write_shift(2,296+32*y),D.write_shift(2,w),x=0;x<4;++x)D.write_shift(4,0);for(D.write_shift(4,0|(+t[nie]||3)<<8),x=0,b=0;x<h.length;++x)if(h[x]!=null){var O=d.next(32),L=(h[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);O.write_shift(1,L,"sbcs"),O.write_shift(1,B[x]=="?"?"C":B[x],"sbcs"),O.write_shift(4,b),O.write_shift(1,k[x]||s[B[x]]||0),O.write_shift(1,I[x]||0),O.write_shift(1,2),O.write_shift(4,0),O.write_shift(1,0),O.write_shift(4,0),O.write_shift(4,0),b+=k[x]||s[B[x]]||0}var M=d.next(264);for(M.write_shift(4,13),x=0;x<65;++x)M.write_shift(4,0);for(x=0;x<p.length;++x){var J=d.next(w);for(J.write_shift(1,0),b=0;b<h.length;++b)if(h[b]!=null)switch(B[b]){case"L":J.write_shift(1,p[x][b]==null?63:p[x][b]?84:70);break;case"B":J.write_shift(8,p[x][b]||0,"f");break;case"N":var V="0";for(typeof p[x][b]=="number"&&(V=p[x][b].toFixed(I[b]||0)),y=0;y<k[b]-V.length;++y)J.write_shift(1,32);J.write_shift(1,V,"sbcs");break;case"D":p[x][b]?(J.write_shift(4,("0000"+p[x][b].getFullYear()).slice(-4),"sbcs"),J.write_shift(2,("00"+(p[x][b].getMonth()+1)).slice(-2),"sbcs"),J.write_shift(2,("00"+p[x][b].getDate()).slice(-2),"sbcs")):J.write_shift(8,"00000000","sbcs");break;case"C":var K=String(p[x][b]!=null?p[x][b]:"").slice(0,k[b]);for(J.write_shift(1,K,"sbcs"),y=0;y<k[b]-K.length;++y)J.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:i}}(),moe=function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+js(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,p){var g=e[p];return typeof g=="number"?WG(g):g},n=function(h,p,g){var x=p.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return x==59?h:WG(x)};e["|"]=254;function a(h,p){switch(p.type){case"base64":return s(zc(h),p);case"binary":return s(h,p);case"buffer":return s(pn&&Buffer.isBuffer(h)?h.toString("binary"):Hm(h),p);case"array":return s(xg(h),p)}throw new Error("Unrecognized type "+p.type)}function s(h,p){var g=h.split(/[\n\r]+/),x=-1,b=-1,y=0,w=0,_=[],B=[],k=null,I={},E=[],N=[],j=[],R=0,D;for(+p.codepage>=0&&Nd(+p.codepage);y!==g.length;++y){R=0;var O=g[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),L=O.replace(/;;/g,"\0").split(";").map(function(te){return te.replace(/\u0000/g,";")}),M=L[0],J;if(O.length>0)switch(M){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":L[1].charAt(0)=="P"&&B.push(O.slice(3).replace(/;;/g,";"));break;case"C":var V=!1,K=!1,z=!1,G=!1,Y=-1,ee=-1;for(w=1;w<L.length;++w)switch(L[w].charAt(0)){case"A":break;case"X":b=parseInt(L[w].slice(1))-1,K=!0;break;case"Y":for(x=parseInt(L[w].slice(1))-1,K||(b=0),D=_.length;D<=x;++D)_[D]=[];break;case"K":J=L[w].slice(1),J.charAt(0)==='"'?J=J.slice(1,J.length-1):J==="TRUE"?J=!0:J==="FALSE"?J=!1:isNaN(Od(J))?isNaN(f1(J).getDate())||(J=Qa(J)):(J=Od(J),k!==null&&tb(k)&&(J=xk(J))),V=!0;break;case"E":G=!0;var P=Tv(L[w].slice(1),{r:x,c:b});_[x][b]=[_[x][b],P];break;case"S":z=!0,_[x][b]=[_[x][b],"S5S"];break;case"G":break;case"R":Y=parseInt(L[w].slice(1))-1;break;case"C":ee=parseInt(L[w].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+O)}if(V&&(_[x][b]&&_[x][b].length==2?_[x][b][0]=J:_[x][b]=J,k=null),z){if(G)throw new Error("SYLK shared formula cannot have own formula");var Q=Y>-1&&_[Y][ee];if(!Q||!Q[1])throw new Error("SYLK shared formula cannot find base");_[x][b][1]=Foe(Q[1],{r:x-Y,c:b-ee})}break;case"F":var X=0;for(w=1;w<L.length;++w)switch(L[w].charAt(0)){case"X":b=parseInt(L[w].slice(1))-1,++X;break;case"Y":for(x=parseInt(L[w].slice(1))-1,D=_.length;D<=x;++D)_[D]=[];break;case"M":R=parseInt(L[w].slice(1))/20;break;case"F":break;case"G":break;case"P":k=B[parseInt(L[w].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(j=L[w].slice(1).split(" "),D=parseInt(j[0],10);D<=parseInt(j[1],10);++D)R=parseInt(j[2],10),N[D-1]=R===0?{hidden:!0}:{wch:R},_m(N[D-1]);break;case"C":b=parseInt(L[w].slice(1))-1,N[b]||(N[b]={});break;case"R":x=parseInt(L[w].slice(1))-1,E[x]||(E[x]={}),R>0?(E[x].hpt=R,E[x].hpx=m1(R)):R===0&&(E[x].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+O)}X<1&&(k=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+O)}}return E.length>0&&(I["!rows"]=E),N.length>0&&(I["!cols"]=N),p&&p.sheetRows&&(_=_.slice(0,p.sheetRows)),[_,I]}function i(h,p){var g=a(h,p),x=g[0],b=g[1],y=nb(x,p);return js(b).forEach(function(w){y[w]=b[w]}),y}function o(h,p){return Vm(i(h,p),p)}function c(h,p,g,x){var b="C;Y"+(g+1)+";X"+(x+1)+";K";switch(h.t){case"n":b+=h.v||0,h.f&&!h.F&&(b+=";E"+xL(h.f,{r:g,c:x}));break;case"b":b+=h.v?"TRUE":"FALSE";break;case"e":b+=h.w||h.v;break;case"d":b+='"'+(h.w||h.v)+'"';break;case"s":b+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function u(h,p){p.forEach(function(g,x){var b="F;W"+(x+1)+" "+(x+1)+" ";g.hidden?b+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=a2(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=s2(g.wpx)),typeof g.wch=="number"&&(b+=Math.round(g.wch))),b.charAt(b.length-1)!=" "&&h.push(b)})}function d(h,p){p.forEach(function(g,x){var b="F;";g.hidden?b+="M0;":g.hpt?b+="M"+20*g.hpt+";":g.hpx&&(b+="M"+20*i2(g.hpx)+";"),b.length>2&&h.push(b+"R"+(x+1))})}function f(h,p){var g=["ID;PWXL;N;E"],x=[],b=Qn(h["!ref"]),y,w=Array.isArray(h),_=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),h["!cols"]&&u(g,h["!cols"]),h["!rows"]&&d(g,h["!rows"]),g.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var B=b.s.r;B<=b.e.r;++B)for(var k=b.s.c;k<=b.e.c;++k){var I=Hr({r:B,c:k});y=w?(h[B]||[])[k]:h[I],!(!y||y.v==null&&(!y.f||y.F))&&x.push(c(y,h,B,k))}return g.join(_)+_+x.join(_)+_+"E"+_}return{to_workbook:o,to_sheet:i,from_sheet:f}}(),poe=function(){function e(s,i){switch(i.type){case"base64":return t(zc(s),i);case"binary":return t(s,i);case"buffer":return t(pn&&Buffer.isBuffer(s)?s.toString("binary"):Hm(s),i);case"array":return t(xg(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){for(var o=s.split(`
`),c=-1,u=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var h=o[d].trim().split(","),p=h[0],g=h[1];++d;for(var x=o[d]||"";(x.match(/["]/g)||[]).length&1&&d<o.length-1;)x+=`
`+o[++d];switch(x=x.trim(),+p){case-1:if(x==="BOT"){f[++c]=[],u=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?f[c][u]=!0:x==="FALSE"?f[c][u]=!1:isNaN(Od(g))?isNaN(f1(g).getDate())?f[c][u]=g:f[c][u]=Qa(g):f[c][u]=Od(g),++u;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),f[c][u++]=x!==""?x:null;break}if(x==="EOD")break}}return i&&i.sheetRows&&(f=f.slice(0,i.sheetRows)),f}function r(s,i){return nb(e(s,i),i)}function n(s,i){return Vm(r(s,i),i)}var a=function(){var s=function(c,u,d,f,h){c.push(u),c.push(d+","+f),c.push('"'+h.replace(/"/g,'""')+'"')},i=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=Qn(c["!ref"]),f,h=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var p=d.s.r;p<=d.e.r;++p){i(u,-1,0,"BOT");for(var g=d.s.c;g<=d.e.c;++g){var x=Hr({r:p,c:g});if(f=h?(c[p]||[])[g]:c[x],!f){i(u,1,0,"");continue}switch(f.t){case"n":var b=f.w;!b&&f.v!=null&&(b=f.v),b==null?f.f&&!f.F?i(u,1,0,"="+f.f):i(u,1,0,""):i(u,0,b,"V");break;case"b":i(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Hu(f.z||Lr[14],Si(Qa(f.v)))),i(u,0,f.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var y=`\r
`,w=u.join(y);return w}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),goe=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var p=f.split(`
`),g=-1,x=-1,b=0,y=[];b!==p.length;++b){var w=p[b].trim().split(":");if(w[0]==="cell"){var _=ls(w[1]);if(y.length<=_.r)for(g=y.length;g<=_.r;++g)y[g]||(y[g]=[]);switch(g=_.r,x=_.c,w[2]){case"t":y[g][x]=e(w[3]);break;case"v":y[g][x]=+w[3];break;case"vtf":var B=w[w.length-1];case"vtc":switch(w[3]){case"nl":y[g][x]=!!+w[4];break;default:y[g][x]=+w[4];break}w[2]=="vtf"&&(y[g][x]=[y[g][x],B])}}}return h&&h.sheetRows&&(y=y.slice(0,h.sheetRows)),y}function n(f,h){return nb(r(f,h),h)}function a(f,h){return Vm(n(f,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],p=[],g,x="",b=rc(f["!ref"]),y=Array.isArray(f),w=b.s.r;w<=b.e.r;++w)for(var _=b.s.c;_<=b.e.c;++_)if(x=Hr({r:w,c:_}),g=y?(f[w]||[])[_]:f[x],!(!g||g.v==null||g.t==="z")){switch(p=["cell",x,"t"],g.t){case"s":case"str":p.push(t(g.v));break;case"n":g.f?(p[2]="vtf",p[3]="n",p[4]=g.v,p[5]=t(g.f)):(p[2]="v",p[3]=g.v);break;case"b":p[2]="vt"+(g.f?"f":"c"),p[3]="nl",p[4]=g.v?"1":"0",p[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var B=Si(Qa(g.v));p[2]="vtc",p[3]="nd",p[4]=""+B,p[5]=g.w||Hu(g.z||Lr[14],B);break;case"e":continue}h.push(p.join(":"))}return h.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[s,i,o,i,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),h1=function(){function e(d,f,h,p,g){g.raw?f[h][p]=d:d===""||(d==="TRUE"?f[h][p]=!0:d==="FALSE"?f[h][p]=!1:isNaN(Od(d))?isNaN(f1(d).getDate())?f[h][p]=d:f[h][p]=Qa(d):f[h][p]=Od(d))}function t(d,f){var h=f||{},p=[];if(!d||d.length===0)return p;for(var g=d.split(/[\r\n]/),x=g.length-1;x>=0&&g[x].length===0;)--x;for(var b=10,y=0,w=0;w<=x;++w)y=g[w].indexOf(" "),y==-1?y=g[w].length:y++,b=Math.max(b,y);for(w=0;w<=x;++w){p[w]=[];var _=0;for(e(g[w].slice(0,b).trim(),p,w,_,h),_=1;_<=(g[w].length-b)/10+1;++_)e(g[w].slice(b+(_-1)*10,b+_*10).trim(),p,w,_,h)}return h.sheetRows&&(p=p.slice(0,h.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},h=!1,p=0,g=0;p<d.length;++p)(g=d.charCodeAt(p))==34?h=!h:!h&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p]);if(!g.length){f=n;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p])}return g.sort(function(x,b){return x[0]-b[0]||n[x[1]]-n[b[1]]}),r[g.pop()[1]]||44}function s(d,f){var h=f||{},p="",g=h.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(p=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(p=d.charAt(4),d=d.slice(6)):p=a(d.slice(0,1024)):h&&h.FS?p=h.FS:p=a(d.slice(0,1024));var b=0,y=0,w=0,_=0,B=0,k=p.charCodeAt(0),I=!1,E=0,N=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var j=h.dateNF!=null?$Me(h.dateNF):null;function R(){var D=d.slice(_,B),O={};if(D.charAt(0)=='"'&&D.charAt(D.length-1)=='"'&&(D=D.slice(1,-1).replace(/""/g,'"')),D.length===0)O.t="z";else if(h.raw)O.t="s",O.v=D;else if(D.trim().length===0)O.t="s",O.v=D;else if(D.charCodeAt(0)==61)D.charCodeAt(1)==34&&D.charCodeAt(D.length-1)==34?(O.t="s",O.v=D.slice(2,-1).replace(/""/g,'"')):bVe(D)?(O.t="n",O.f=D.slice(1)):(O.t="s",O.v=D);else if(D=="TRUE")O.t="b",O.v=!0;else if(D=="FALSE")O.t="b",O.v=!1;else if(!isNaN(w=Od(D)))O.t="n",h.cellText!==!1&&(O.w=D),O.v=w;else if(!isNaN(f1(D).getDate())||j&&D.match(j)){O.z=h.dateNF||Lr[14];var L=0;j&&D.match(j)&&(D=GMe(D,h.dateNF,D.match(j)||[]),L=1),h.cellDates?(O.t="d",O.v=Qa(D,L)):(O.t="n",O.v=Si(Qa(D,L))),h.cellText!==!1&&(O.w=Hu(O.z,O.v instanceof Date?Si(O.v):O.v)),h.cellNF||delete O.z}else O.t="s",O.v=D;if(O.t=="z"||(h.dense?(g[b]||(g[b]=[]),g[b][y]=O):g[Hr({c:y,r:b})]=O),_=B+1,N=d.charCodeAt(_),x.e.c<y&&(x.e.c=y),x.e.r<b&&(x.e.r=b),E==k)++y;else if(y=0,++b,h.sheetRows&&h.sheetRows<=b)return!0}e:for(;B<d.length;++B)switch(E=d.charCodeAt(B)){case 34:N===34&&(I=!I);break;case k:case 10:case 13:if(!I&&R())break e;break}return B-_>0&&R(),g["!ref"]=an(x),g}function i(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):nb(t(d,f),f)}function o(d,f){var h="",p=f.type=="string"?[0,0,0,0]:NL(d,f);switch(f.type){case"base64":h=zc(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof Xw<"u"||(h=pn&&Buffer.isBuffer(d)?d.toString("binary"):Hm(d));break;case"array":h=xg(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?h=Ea(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=Ea(h):f.type=="binary"&&typeof Xw<"u",h.slice(0,19)=="socialcalc:version:"?goe.to_sheet(f.type=="string"?h:Ea(h),f):i(h,f)}function c(d,f){return Vm(o(d,f),f)}function u(d){for(var f=[],h=Qn(d["!ref"]),p,g=Array.isArray(d),x=h.s.r;x<=h.e.r;++x){for(var b=[],y=h.s.c;y<=h.e.c;++y){var w=Hr({r:x,c:y});if(p=g?(d[x]||[])[y]:d[w],!p||p.v==null){b.push("          ");continue}for(var _=(p.w||(_h(p),p.w)||"").slice(0,10);_.length<10;)_+=" ";b.push(_+(y===0?" ":""))}f.push(b.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:u}}();function iQe(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=moe.to_workbook(e,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return h1.to_workbook(e,t)}}var Yp=function(){function e(P,Q,X){if(P){go(P,P.l||0);for(var te=X.Enum||Y;P.l<P.length;){var ae=P.read_shift(2),se=te[ae]||te[65535],oe=P.read_shift(2),ce=P.l+oe,me=se.f&&se.f(P,oe,X);if(P.l=ce,Q(me,se,ae))return}}}function t(P,Q){switch(Q.type){case"base64":return r(Oc(zc(P)),Q);case"binary":return r(Oc(P),Q);case"buffer":case"array":return r(P,Q)}throw"Unsupported type "+Q.type}function r(P,Q){if(!P)return P;var X=Q||{},te=X.dense?[]:{},ae="Sheet1",se="",oe=0,ce={},me=[],ke=[],ne={s:{r:0,c:0},e:{r:0,c:0}},_e=X.sheetRows||0;if(P[2]==0&&(P[3]==8||P[3]==9)&&P.length>=16&&P[14]==5&&P[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(P[2]==2)X.Enum=Y,e(P,function(Ie,Me,Xe){switch(Xe){case 0:X.vers=Ie,Ie>=4096&&(X.qpro=!0);break;case 6:ne=Ie;break;case 204:Ie&&(se=Ie);break;case 222:se=Ie;break;case 15:case 51:X.qpro||(Ie[1].v=Ie[1].v.slice(1));case 13:case 14:case 16:Xe==14&&(Ie[2]&112)==112&&(Ie[2]&15)>1&&(Ie[2]&15)<15&&(Ie[1].z=X.dateNF||Lr[14],X.cellDates&&(Ie[1].t="d",Ie[1].v=xk(Ie[1].v))),X.qpro&&Ie[3]>oe&&(te["!ref"]=an(ne),ce[ae]=te,me.push(ae),te=X.dense?[]:{},ne={s:{r:0,c:0},e:{r:0,c:0}},oe=Ie[3],ae=se||"Sheet"+(oe+1),se="");var ye=X.dense?(te[Ie[0].r]||[])[Ie[0].c]:te[Hr(Ie[0])];if(ye){ye.t=Ie[1].t,ye.v=Ie[1].v,Ie[1].z!=null&&(ye.z=Ie[1].z),Ie[1].f!=null&&(ye.f=Ie[1].f);break}X.dense?(te[Ie[0].r]||(te[Ie[0].r]=[]),te[Ie[0].r][Ie[0].c]=Ie[1]):te[Hr(Ie[0])]=Ie[1];break}},X);else if(P[2]==26||P[2]==14)X.Enum=ee,P[2]==14&&(X.qpro=!0,P.l=0),e(P,function(Ie,Me,Xe){switch(Xe){case 204:ae=Ie;break;case 22:Ie[1].v=Ie[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ie[3]>oe&&(te["!ref"]=an(ne),ce[ae]=te,me.push(ae),te=X.dense?[]:{},ne={s:{r:0,c:0},e:{r:0,c:0}},oe=Ie[3],ae="Sheet"+(oe+1)),_e>0&&Ie[0].r>=_e)break;X.dense?(te[Ie[0].r]||(te[Ie[0].r]=[]),te[Ie[0].r][Ie[0].c]=Ie[1]):te[Hr(Ie[0])]=Ie[1],ne.e.c<Ie[0].c&&(ne.e.c=Ie[0].c),ne.e.r<Ie[0].r&&(ne.e.r=Ie[0].r);break;case 27:Ie[14e3]&&(ke[Ie[14e3][0]]=Ie[14e3][1]);break;case 1537:ke[Ie[0]]=Ie[1],Ie[0]==oe&&(ae=Ie[1]);break}},X);else throw new Error("Unrecognized LOTUS BOF "+P[2]);if(te["!ref"]=an(ne),ce[se||ae]=te,me.push(se||ae),!ke.length)return{SheetNames:me,Sheets:ce};for(var De={},Ne=[],fe=0;fe<ke.length;++fe)ce[me[fe]]?(Ne.push(ke[fe]||me[fe]),De[ke[fe]]=ce[ke[fe]]||ce[me[fe]]):(Ne.push(ke[fe]),De[ke[fe]]={"!ref":"A1"});return{SheetNames:Ne,Sheets:De}}function n(P,Q){var X=Q||{};if(+X.codepage>=0&&Nd(+X.codepage),X.type=="string")throw new Error("Cannot write WK1 to JS string");var te=ec(),ae=Qn(P["!ref"]),se=Array.isArray(P),oe=[];qt(te,0,s(1030)),qt(te,6,c(ae));for(var ce=Math.min(ae.e.r,8191),me=ae.s.r;me<=ce;++me)for(var ke=qs(me),ne=ae.s.c;ne<=ae.e.c;++ne){me===ae.s.r&&(oe[ne]=os(ne));var _e=oe[ne]+ke,De=se?(P[me]||[])[ne]:P[_e];if(!(!De||De.t=="z"))if(De.t=="n")(De.v|0)==De.v&&De.v>=-32768&&De.v<=32767?qt(te,13,p(me,ne,De.v)):qt(te,14,x(me,ne,De.v));else{var Ne=_h(De);qt(te,15,f(me,ne,Ne.slice(0,239)))}}return qt(te,1),te.end()}function a(P,Q){var X=Q||{};if(+X.codepage>=0&&Nd(+X.codepage),X.type=="string")throw new Error("Cannot write WK3 to JS string");var te=ec();qt(te,0,i(P));for(var ae=0,se=0;ae<P.SheetNames.length;++ae)(P.Sheets[P.SheetNames[ae]]||{})["!ref"]&&qt(te,27,G(P.SheetNames[ae],se++));var oe=0;for(ae=0;ae<P.SheetNames.length;++ae){var ce=P.Sheets[P.SheetNames[ae]];if(!(!ce||!ce["!ref"])){for(var me=Qn(ce["!ref"]),ke=Array.isArray(ce),ne=[],_e=Math.min(me.e.r,8191),De=me.s.r;De<=_e;++De)for(var Ne=qs(De),fe=me.s.c;fe<=me.e.c;++fe){De===me.s.r&&(ne[fe]=os(fe));var Ie=ne[fe]+Ne,Me=ke?(ce[De]||[])[fe]:ce[Ie];if(!(!Me||Me.t=="z"))if(Me.t=="n")qt(te,23,R(De,fe,oe,Me.v));else{var Xe=_h(Me);qt(te,22,E(De,fe,oe,Xe.slice(0,239)))}}++oe}}return qt(te,1),te.end()}function s(P){var Q=Et(2);return Q.write_shift(2,P),Q}function i(P){var Q=Et(26);Q.write_shift(2,4096),Q.write_shift(2,4),Q.write_shift(4,0);for(var X=0,te=0,ae=0,se=0;se<P.SheetNames.length;++se){var oe=P.SheetNames[se],ce=P.Sheets[oe];if(!(!ce||!ce["!ref"])){++ae;var me=rc(ce["!ref"]);X<me.e.r&&(X=me.e.r),te<me.e.c&&(te=me.e.c)}}return X>8191&&(X=8191),Q.write_shift(2,X),Q.write_shift(1,ae),Q.write_shift(1,te),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(1,1),Q.write_shift(1,2),Q.write_shift(4,0),Q.write_shift(4,0),Q}function o(P,Q,X){var te={s:{c:0,r:0},e:{c:0,r:0}};return Q==8&&X.qpro?(te.s.c=P.read_shift(1),P.l++,te.s.r=P.read_shift(2),te.e.c=P.read_shift(1),P.l++,te.e.r=P.read_shift(2),te):(te.s.c=P.read_shift(2),te.s.r=P.read_shift(2),Q==12&&X.qpro&&(P.l+=2),te.e.c=P.read_shift(2),te.e.r=P.read_shift(2),Q==12&&X.qpro&&(P.l+=2),te.s.c==65535&&(te.s.c=te.e.c=te.s.r=te.e.r=0),te)}function c(P){var Q=Et(8);return Q.write_shift(2,P.s.c),Q.write_shift(2,P.s.r),Q.write_shift(2,P.e.c),Q.write_shift(2,P.e.r),Q}function u(P,Q,X){var te=[{c:0,r:0},{t:"n",v:0},0,0];return X.qpro&&X.vers!=20768?(te[0].c=P.read_shift(1),te[3]=P.read_shift(1),te[0].r=P.read_shift(2),P.l+=2):(te[2]=P.read_shift(1),te[0].c=P.read_shift(2),te[0].r=P.read_shift(2)),te}function d(P,Q,X){var te=P.l+Q,ae=u(P,Q,X);if(ae[1].t="s",X.vers==20768){P.l++;var se=P.read_shift(1);return ae[1].v=P.read_shift(se,"utf8"),ae}return X.qpro&&P.l++,ae[1].v=P.read_shift(te-P.l,"cstr"),ae}function f(P,Q,X){var te=Et(7+X.length);te.write_shift(1,255),te.write_shift(2,Q),te.write_shift(2,P),te.write_shift(1,39);for(var ae=0;ae<te.length;++ae){var se=X.charCodeAt(ae);te.write_shift(1,se>=128?95:se)}return te.write_shift(1,0),te}function h(P,Q,X){var te=u(P,Q,X);return te[1].v=P.read_shift(2,"i"),te}function p(P,Q,X){var te=Et(7);return te.write_shift(1,255),te.write_shift(2,Q),te.write_shift(2,P),te.write_shift(2,X,"i"),te}function g(P,Q,X){var te=u(P,Q,X);return te[1].v=P.read_shift(8,"f"),te}function x(P,Q,X){var te=Et(13);return te.write_shift(1,255),te.write_shift(2,Q),te.write_shift(2,P),te.write_shift(8,X,"f"),te}function b(P,Q,X){var te=P.l+Q,ae=u(P,Q,X);if(ae[1].v=P.read_shift(8,"f"),X.qpro)P.l=te;else{var se=P.read_shift(2);B(P.slice(P.l,P.l+se),ae),P.l+=se}return ae}function y(P,Q,X){var te=Q&32768;return Q&=-32769,Q=(te?P:0)+(Q>=8192?Q-16384:Q),(te?"":"$")+(X?os(Q):qs(Q))}var w={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},_=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function B(P,Q){go(P,0);for(var X=[],te=0,ae="",se="",oe="",ce="";P.l<P.length;){var me=P[P.l++];switch(me){case 0:X.push(P.read_shift(8,"f"));break;case 1:se=y(Q[0].c,P.read_shift(2),!0),ae=y(Q[0].r,P.read_shift(2),!1),X.push(se+ae);break;case 2:{var ke=y(Q[0].c,P.read_shift(2),!0),ne=y(Q[0].r,P.read_shift(2),!1);se=y(Q[0].c,P.read_shift(2),!0),ae=y(Q[0].r,P.read_shift(2),!1),X.push(ke+ne+":"+se+ae)}break;case 3:if(P.l<P.length){console.error("WK1 premature formula end");return}break;case 4:X.push("("+X.pop()+")");break;case 5:X.push(P.read_shift(2));break;case 6:{for(var _e="";me=P[P.l++];)_e+=String.fromCharCode(me);X.push('"'+_e.replace(/"/g,'""')+'"')}break;case 8:X.push("-"+X.pop());break;case 23:X.push("+"+X.pop());break;case 22:X.push("NOT("+X.pop()+")");break;case 20:case 21:ce=X.pop(),oe=X.pop(),X.push(["AND","OR"][me-20]+"("+oe+","+ce+")");break;default:if(me<32&&_[me])ce=X.pop(),oe=X.pop(),X.push(oe+_[me]+ce);else if(w[me]){if(te=w[me][1],te==69&&(te=P[P.l++]),te>X.length){console.error("WK1 bad formula parse 0x"+me.toString(16)+":|"+X.join("|")+"|");return}var De=X.slice(-te);X.length-=te,X.push(w[me][0]+"("+De.join(",")+")")}else return me<=7?console.error("WK1 invalid opcode "+me.toString(16)):me<=24?console.error("WK1 unsupported op "+me.toString(16)):me<=30?console.error("WK1 invalid opcode "+me.toString(16)):me<=115?console.error("WK1 unsupported function opcode "+me.toString(16)):console.error("WK1 unrecognized opcode "+me.toString(16))}}X.length==1?Q[1].f=""+X[0]:console.error("WK1 bad formula parse |"+X.join("|")+"|")}function k(P){var Q=[{c:0,r:0},{t:"n",v:0},0];return Q[0].r=P.read_shift(2),Q[3]=P[P.l++],Q[0].c=P[P.l++],Q}function I(P,Q){var X=k(P);return X[1].t="s",X[1].v=P.read_shift(Q-4,"cstr"),X}function E(P,Q,X,te){var ae=Et(6+te.length);ae.write_shift(2,P),ae.write_shift(1,X),ae.write_shift(1,Q),ae.write_shift(1,39);for(var se=0;se<te.length;++se){var oe=te.charCodeAt(se);ae.write_shift(1,oe>=128?95:oe)}return ae.write_shift(1,0),ae}function N(P,Q){var X=k(P);X[1].v=P.read_shift(2);var te=X[1].v>>1;if(X[1].v&1)switch(te&7){case 0:te=(te>>3)*5e3;break;case 1:te=(te>>3)*500;break;case 2:te=(te>>3)/20;break;case 3:te=(te>>3)/200;break;case 4:te=(te>>3)/2e3;break;case 5:te=(te>>3)/2e4;break;case 6:te=(te>>3)/16;break;case 7:te=(te>>3)/64;break}return X[1].v=te,X}function j(P,Q){var X=k(P),te=P.read_shift(4),ae=P.read_shift(4),se=P.read_shift(2);if(se==65535)return te===0&&ae===3221225472?(X[1].t="e",X[1].v=15):te===0&&ae===3489660928?(X[1].t="e",X[1].v=42):X[1].v=0,X;var oe=se&32768;return se=(se&32767)-16446,X[1].v=(1-oe*2)*(ae*Math.pow(2,se+32)+te*Math.pow(2,se)),X}function R(P,Q,X,te){var ae=Et(14);if(ae.write_shift(2,P),ae.write_shift(1,X),ae.write_shift(1,Q),te==0)return ae.write_shift(4,0),ae.write_shift(4,0),ae.write_shift(2,65535),ae;var se=0,oe=0,ce=0,me=0;return te<0&&(se=1,te=-te),oe=Math.log2(te)|0,te/=Math.pow(2,oe-31),me=te>>>0,(me&2147483648)==0&&(te/=2,++oe,me=te>>>0),te-=me,me|=2147483648,me>>>=0,te*=Math.pow(2,32),ce=te>>>0,ae.write_shift(4,ce),ae.write_shift(4,me),oe+=16383+(se?32768:0),ae.write_shift(2,oe),ae}function D(P,Q){var X=j(P);return P.l+=Q-14,X}function O(P,Q){var X=k(P),te=P.read_shift(4);return X[1].v=te>>6,X}function L(P,Q){var X=k(P),te=P.read_shift(8,"f");return X[1].v=te,X}function M(P,Q){var X=L(P);return P.l+=Q-10,X}function J(P,Q){return P[P.l+Q-1]==0?P.read_shift(Q,"cstr"):""}function V(P,Q){var X=P[P.l++];X>Q-1&&(X=Q-1);for(var te="";te.length<X;)te+=String.fromCharCode(P[P.l++]);return te}function K(P,Q,X){if(!(!X.qpro||Q<21)){var te=P.read_shift(1);P.l+=17,P.l+=1,P.l+=2;var ae=P.read_shift(Q-21,"cstr");return[te,ae]}}function z(P,Q){for(var X={},te=P.l+Q;P.l<te;){var ae=P.read_shift(2);if(ae==14e3){for(X[ae]=[0,""],X[ae][0]=P.read_shift(2);P[P.l];)X[ae][1]+=String.fromCharCode(P[P.l]),P.l++;P.l++}}return X}function G(P,Q){var X=Et(5+P.length);X.write_shift(2,14e3),X.write_shift(2,Q);for(var te=0;te<P.length;++te){var ae=P.charCodeAt(te);X[X.l++]=ae>127?95:ae}return X[X.l++]=0,X}var Y={0:{n:"BOF",f:li},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:J},222:{n:"SHEETNAMELP",f:V},65535:{n:""}},ee={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:I},23:{n:"NUMBER17",f:j},24:{n:"NUMBER18",f:N},25:{n:"FORMULA19",f:D},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:z},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:O},38:{n:"??"},39:{n:"NUMBER27",f:L},40:{n:"FORMULA28",f:M},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:J},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:K},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}();function oQe(e){var t={},r=e.match(ol),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=Gr(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=V8[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return t}var lQe=function(){var e=Zw("t"),t=Zw("rPr");function r(s){var i=s.match(e);if(!i)return{t:"s",v:""};var o={t:"s",v:Un(i[1])},c=s.match(t);return c&&(o.s=oQe(c[1])),o}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(a).map(r).filter(function(o){return o.v})}}(),cQe=function(){var t=/(\r\n|\n)/g;function r(a,s,i){var o=[];a.u&&o.push("text-decoration: underline;"),a.uval&&o.push("text-underline-style:"+a.uval+";"),a.sz&&o.push("font-size:"+a.sz+"pt;"),a.outline&&o.push("text-effect: outline;"),a.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),a.b&&(s.push("<b>"),i.push("</b>")),a.i&&(s.push("<i>"),i.push("</i>")),a.strike&&(s.push("<s>"),i.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),i.push("</"+c+">")),i.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),uQe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,dQe=/<(?:\w+:)?r>/,AQe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function fL(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Un(Ea(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Ea(e),r&&(n.h=Z8(n.t))):e.match(dQe)&&(n.r=Ea(e),n.t=Un(Ea((e.replace(AQe,"").match(uQe)||[]).join("").replace(ol,""))),r&&(n.h=cQe(lQe(n.r)))),n):{t:""}}var fQe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,hQe=/<(?:\w+:)?(?:si|sstItem)>/g,mQe=/<\/(?:\w+:)?(?:si|sstItem)>/;function pQe(e,t){var r=[],n="";if(!e)return r;var a=e.match(fQe);if(a){n=a[2].replace(hQe,"").split(mQe);for(var s=0;s!=n.length;++s){var i=fL(n[s].trim(),t);i!=null&&(r[r.length]=i)}a=Gr(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var gQe=/^\s|\s$|[\t\n\r]/;function xoe(e,t){if(!t.bookSST)return"";var r=[Ys];r[r.length]=Kt("sst",null,{xmlns:Lg[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(gQe)&&(s+=' xml:space="preserve"'),s+=">"+pa(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function xQe(e){return[e.read_shift(4),e.read_shift(4)]}function vQe(e,t){var r=[],n=!1;return Rh(e,function(s,i,o){switch(o){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function bQe(e,t){return t||(t=Et(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var yQe=TUe;function wQe(e){var t=ec();Mt(t,159,bQe(e));for(var r=0;r<e.length;++r)Mt(t,19,yQe(e[r]));return Mt(t,160),t.end()}function voe(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function ch(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function EQe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=ch(e,4),t.U=ch(e,4),t.W=ch(e,4),t}function CQe(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),s=[];a-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=s,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function _Qe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(CQe(e));return t}function NQe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function SQe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=ch(e,4),t.U=ch(e,4),t.W=ch(e,4),t}function kQe(e){var t=SQe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function boe(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function yoe(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function BQe(e){var t=ch(e);switch(t.Minor){case 2:return[t.Minor,jQe(e)];case 3:return[t.Minor,TQe()];case 4:return[t.Minor,IQe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function jQe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=boe(e,r),a=yoe(e,e.length-e.l);return{t:"Std",h:n,v:a}}function TQe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function IQe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(ol,function(s){var i=Gr(s);switch(af(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function FQe(e,t){var r={},n=r.EncryptionVersionInfo=ch(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=boe(e,a),t-=a,r.EncryptionVerifier=yoe(e,t),r}function OQe(e){var t={},r=t.EncryptionVersionInfo=ch(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function hL(e){var t=0,r,n=voe(e),a=n.length+1,s,i,o,c,u;for(r=Cm(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)i=r[s],o=(t&16384)===0?0:1,c=t<<1&32767,u=o|c,t=u^i;return t^52811}var woe=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},a=function(i,o){return n(i^o)},s=function(i){for(var o=t[i.length-1],c=104,u=i.length-1;u>=0;--u)for(var d=i[u],f=0;f!=7;++f)d&64&&(o^=r[c]),d*=2,--c;return o};return function(i){for(var o=voe(i),c=s(o),u=o.length,d=Cm(16),f=0;f!=16;++f)d[f]=0;var h,p,g;for((u&1)===1&&(h=c>>8,d[u]=a(e[0],h),--u,h=c&255,p=o[o.length-1],d[u]=a(p,h));u>0;)--u,h=c>>8,d[u]=a(o[u],h),--u,h=c&255,d[u]=a(o[u],h);for(u=15,g=15-o.length;g>0;)h=c>>8,d[u]=a(e[g],h),--u,--g,h=c&255,d[u]=a(o[u],h),--u,--g;return d}}(),DQe=function(e,t,r,n,a){a||(a=t),n||(n=woe(e));var s,i;for(s=0;s!=t.length;++s)i=t[s],i^=n[r],i=(i>>5|i<<3)&255,a[s]=i,++r;return[a,r,n]},PQe=function(e){var t=0,r=woe(e);return function(n){var a=DQe("",n,t,r);return t=a[1],a[0]}};function RQe(e,t,r,n){var a={key:li(e),verificationBytes:li(e)};return r.password&&(a.verifier=hL(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=PQe(r.password)),a}function LQe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=OQe(e):n.Data=FQe(e,t),n}function MQe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?LQe(e,t-2,n):RQe(e,r.biff>=8?t:t-2,r,n),n}var Eoe=function(){function e(a,s){switch(s.type){case"base64":return t(zc(a),s);case"binary":return t(a,s);case"buffer":return t(pn&&Buffer.isBuffer(a)?a.toString("binary"):Hm(a),s);case"array":return t(xg(a),s)}throw new Error("Unrecognized type "+s.type)}function t(a,s){var i=s||{},o=i.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var h=/\\\w+\b/g,p=0,g,x=-1;g=h.exec(d);){switch(g[0]){case"\\cell":var b=d.slice(p,h.lastIndex-g[0].length);if(b[0]==" "&&(b=b.slice(1)),++x,b.length){var y={v:b,t:"s"};Array.isArray(o)?o[f][x]=y:o[Hr({r:f,c:x})]=y}break}p=h.lastIndex}x>u.e.c&&(u.e.c=x)}),o["!ref"]=an(u),o}function r(a,s){return Vm(e(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],i=Qn(a["!ref"]),o,c=Array.isArray(a),u=i.s.r;u<=i.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var f=Hr({r:u,c:d});o=c?(a[u]||[])[d]:a[f],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(_h(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function UQe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function n2(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function QQe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),s=Math.min(t,r,n),i=a-s;if(i===0)return[0,0,t];var o=0,c=0,u=a+s;switch(c=i/(u>1?2-u:u),a){case t:o=((r-n)/i+6)%6;break;case r:o=(n-t)/i+2;break;case n:o=(t-r)/i+4;break}return[o/6,c,u/2]}function HQe(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),s=n-a/2,i=[s,s,s],o=6*t,c;if(r!==0)switch(o|0){case 0:case 6:c=a*o,i[0]+=a,i[1]+=c;break;case 1:c=a*(2-o),i[0]+=c,i[1]+=a;break;case 2:c=a*(o-2),i[1]+=a,i[2]+=c;break;case 3:c=a*(4-o),i[1]+=c,i[2]+=a;break;case 4:c=a*(o-4),i[2]+=a,i[0]+=c;break;case 5:c=a*(6-o),i[2]+=c,i[0]+=a;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function aS(e,t){if(t===0)return e;var r=QQe(UQe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),n2(HQe(r))}var Coe=6,VQe=15,zQe=1,Xo=Coe;function a2(e){return Math.floor((e+Math.round(128/Xo)/256)*Xo)}function s2(e){return Math.floor((e-5)/Xo*100+.5)/100}function sS(e){return Math.round((e*Xo+5)/Xo*256)/256}function Y3(e){return sS(s2(a2(e)))}function mL(e){var t=Math.abs(e-Y3(e)),r=Xo;if(t>.005)for(Xo=zQe;Xo<VQe;++Xo)Math.abs(e-Y3(e))<=t&&(t=Math.abs(e-Y3(e)),r=Xo);Xo=r}function _m(e){e.width?(e.wpx=a2(e.width),e.wch=s2(e.wpx),e.MDW=Xo):e.wpx?(e.wch=s2(e.wpx),e.width=sS(e.wch),e.MDW=Xo):typeof e.wch=="number"&&(e.width=sS(e.wch),e.wpx=a2(e.width),e.MDW=Xo),e.customWidth&&delete e.customWidth}var $Qe=96,_oe=$Qe;function i2(e){return e*96/_oe}function m1(e){return e*_oe/96}var GQe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function KQe(e,t,r,n){t.Borders=[];var a={},s=!1;(e[0].match(ol)||[]).forEach(function(i){var o=Gr(i);switch(af(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},o.diagonalUp&&(a.diagonalUp=Ma(o.diagonalUp)),o.diagonalDown&&(a.diagonalDown=Ma(o.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function qQe(e,t,r,n){t.Fills=[];var a={},s=!1;(e[0].match(ol)||[]).forEach(function(i){var o=Gr(i);switch(af(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":o.patternType&&(a.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),o.indexed&&(a.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(a.bgColor.theme=parseInt(o.theme,10)),o.tint&&(a.bgColor.tint=parseFloat(o.tint)),o.rgb&&(a.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),o.theme&&(a.fgColor.theme=parseInt(o.theme,10)),o.tint&&(a.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(a.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function WQe(e,t,r,n){t.Fonts=[];var a={},s=!1;(e[0].match(ol)||[]).forEach(function(i){var o=Gr(i);switch(af(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":o.val&&(a.name=Ea(o.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=o.val?Ma(o.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=o.val?Ma(o.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(o.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=o.val?Ma(o.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=o.val?Ma(o.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=o.val?Ma(o.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=o.val?Ma(o.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=o.val?Ma(o.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":o.val&&(a.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(a.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(a.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(a.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=V8[parseInt(o.val,10)];break;case"<color":if(a.color||(a.color={}),o.auto&&(a.color.auto=Ma(o.auto)),o.rgb)a.color.rgb=o.rgb.slice(-6);else if(o.indexed){a.color.index=parseInt(o.indexed,10);var c=Wp[a.color.index];a.color.index==81&&(c=Wp[1]),c||(c=Wp[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(a.color.theme=parseInt(o.theme,10),o.tint&&(a.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=aS(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function XQe(e,t,r){t.NumberFmt=[];for(var n=js(Lr),a=0;a<n.length;++a)t.NumberFmt[n[a]]=Lr[n[a]];var s=e[0].match(ol);if(s)for(a=0;a<s.length;++a){var i=Gr(s[a]);switch(af(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Un(Ea(i.formatCode)),c=parseInt(i.numFmtId,10);if(t.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=o}lh(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function YQe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Kt("numFmt",null,{numFmtId:n,formatCode:pa(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Kt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var t_=["numFmtId","fillId","fontId","borderId","xfId"],r_=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function JQe(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(ol)||[]).forEach(function(s){var i=Gr(s),o=0;switch(af(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<t_.length;++o)n[t_[o]]&&(n[t_[o]]=parseInt(n[t_[o]],10));for(o=0;o<r_.length;++o)n[r_[o]]&&(n[r_[o]]=Ma(n[r_[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};i.vertical&&(c.vertical=i.vertical),i.horizontal&&(c.horizontal=i.horizontal),i.textRotation!=null&&(c.textRotation=i.textRotation),i.indent&&(c.indent=i.indent),i.wrapText&&(c.wrapText=Ma(i.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function ZQe(e){var t=[];return t[t.length]=Kt("cellXfs",null),e.forEach(function(r){t[t.length]=Kt("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Kt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var eHe=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(t))&&XQe(f,d,u),(f=o.match(a))&&WQe(f,d,c,u),(f=o.match(n))&&qQe(f,d,c,u),(f=o.match(s))&&KQe(f,d,c,u),(f=o.match(r))&&JQe(f,d,u),d}}();function Noe(e,t){var r=[Ys,Kt("styleSheet",null,{xmlns:Lg[0],"xmlns:vt":Ci.vt})],n;return e.SSF&&(n=YQe(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=ZQe(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function tHe(e,t){var r=e.read_shift(2),n=rl(e);return[r,n]}function rHe(e,t,r){r||(r=Et(6+4*t.length)),r.write_shift(2,e),Xi(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function nHe(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=LUe(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=e.read_shift(2);switch(s===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=e.read_shift(1);i!=0&&(n.underline=i);var o=e.read_shift(1);o>0&&(n.family=o);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=RUe(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=rl(e),n}function aHe(e,t){t||(t=Et(153)),t.write_shift(2,e.sz*20),MUe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),tS(e.color,t);var n=0;return n=2,t.write_shift(1,n),Xi(e.name,t),t.length>t.l?t.slice(0,t.l):t}var sHe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],J3,iHe=al;function MK(e,t){t||(t=Et(84)),J3||(J3=pk(sHe));var r=J3[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(tS({auto:1},t),tS({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function oHe(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function Soe(e,t,r){r||(r=Et(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function iy(e,t){return t||(t=Et(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var lHe=al;function cHe(e,t){return t||(t=Et(51)),t.write_shift(1,0),iy(null,t),iy(null,t),iy(null,t),iy(null,t),iy(null,t),t.length>t.l?t.slice(0,t.l):t}function uHe(e,t){return t||(t=Et(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),eS(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function dHe(e,t,r){var n=Et(2052);return n.write_shift(4,e),eS(t,n),eS(r,n),n.length>n.l?n.slice(0,n.l):n}function AHe(e,t,r){var n={};n.NumberFmt=[];for(var a in Lr)n.NumberFmt[a]=Lr[a];n.CellXf=[],n.Fonts=[];var s=[],i=!1;return Rh(e,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],lh(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=aS(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(d),i=!0;break;case 38:s.pop(),i=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!i||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function fHe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(Mt(e,615,Dd(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Mt(e,44,rHe(a,t[a]))}),Mt(e,616))}}function hHe(e){var t=1;Mt(e,611,Dd(t)),Mt(e,43,aHe({sz:12,color:{theme:1},name:"Calibri",family:2})),Mt(e,612)}function mHe(e){var t=2;Mt(e,603,Dd(t)),Mt(e,45,MK({patternType:"none"})),Mt(e,45,MK({patternType:"gray125"})),Mt(e,604)}function pHe(e){var t=1;Mt(e,613,Dd(t)),Mt(e,46,cHe()),Mt(e,614)}function gHe(e){var t=1;Mt(e,626,Dd(t)),Mt(e,47,Soe({numFmtId:0},65535)),Mt(e,627)}function xHe(e,t){Mt(e,617,Dd(t.length)),t.forEach(function(r){Mt(e,47,Soe(r,0))}),Mt(e,618)}function vHe(e){var t=1;Mt(e,619,Dd(t)),Mt(e,48,uHe({xfId:0,name:"Normal"})),Mt(e,620)}function bHe(e){var t=0;Mt(e,505,Dd(t)),Mt(e,506)}function yHe(e){var t=0;Mt(e,508,dHe(t,"TableStyleMedium9","PivotStyleMedium4")),Mt(e,509)}function wHe(e,t){var r=ec();return Mt(r,278),fHe(r,e.SSF),hHe(r),mHe(r),pHe(r),gHe(r),xHe(r,t.cellXfs),vHe(r),bHe(r),yHe(r),Mt(r,279),r.end()}var EHe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function CHe(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(ol)||[]).forEach(function(a){var s=Gr(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[EHe.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function _He(){}function NHe(){}var SHe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,kHe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,BHe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function jHe(e,t,r){t.themeElements={};var n;[["clrScheme",SHe,CHe],["fontScheme",kHe,_He],["fmtScheme",BHe,NHe]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var THe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function koe(e,t){(!e||e.length===0)&&(e=pL());var r,n={};if(!(r=e.match(THe)))throw new Error("themeElements not found in theme");return jHe(r[0],n,t),n.raw=e,n}function pL(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Ys];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function IHe(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var s=e.slice(e.l);e.l=n;var i;try{i=bie(s,{type:"array"})}catch{return}var o=Dc(i,"theme/theme/theme1.xml",!0);if(o)return koe(o,r)}}function FHe(e){return e.read_shift(4)}function OHe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=DHe(e,4);break;case 2:t.xclrValue=ooe(e);break;case 3:t.xclrValue=FHe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function DHe(e,t){return al(e,t)}function PHe(e,t){return al(e,t)}function RHe(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=OHe(e);break;case 6:n[1]=PHe(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function LHe(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),s=[];a-- >0;)s.push(RHe(e,r-e.l));return{ixfe:n,ext:s}}function MHe(e,t){t.forEach(function(r){r[0]})}function UHe(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:rl(e)}}function QHe(e){var t=Et(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Xi(e.name,t),t.slice(0,t.l)}function HHe(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function VHe(e){var t=Et(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function zHe(e,t){var r=Et(8+2*t.length);return r.write_shift(4,e),Xi(t,r),r.slice(0,r.l)}function $He(e){return e.l+=4,e.read_shift(4)!=0}function GHe(e,t){var r=Et(8);return r.write_shift(4,e),r.write_shift(4,1),r}function KHe(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],i=!1,o=2;return Rh(e,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:s.push(d),i=!0;break;case 36:s.pop(),i=!1;break;default:if(!u.T){if(!i||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function qHe(){var e=ec();return Mt(e,332),Mt(e,334,Dd(1)),Mt(e,335,QHe({name:"XLDAPR",version:12e4,flags:3496657072})),Mt(e,336),Mt(e,339,zHe(1,"XLDAPR")),Mt(e,52),Mt(e,35,Dd(514)),Mt(e,4096,Dd(0)),Mt(e,4097,Su(1)),Mt(e,36),Mt(e,53),Mt(e,340),Mt(e,337,GHe(1)),Mt(e,51,VHe([[1,0]])),Mt(e,338),Mt(e,333),e.end()}function WHe(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,s=2,i;return e.replace(ol,function(o){var c=Gr(o);switch(af(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),n}function Boe(){var e=[Ys];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function XHe(e){var t=[];if(!e)return t;var r=1;return(e.match(ol)||[]).forEach(function(n){var a=Gr(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function YHe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Hr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function JHe(e,t,r){var n=[];return Rh(e,function(s,i,o){switch(o){case 63:n.push(s);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function ZHe(e,t,r,n){if(!e)return e;var a=n||{},s=!1;Rh(e,function(o,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function eVe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var lv=1024;function joe(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Kt("xml",null,{"xmlns:v":Bc.v,"xmlns:o":Bc.o,"xmlns:x":Bc.x,"xmlns:mv":Bc.mv}).replace(/\/>/,">"),Kt("o:shapelayout",Kt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Kt("v:shapetype",[Kt("v:stroke",null,{joinstyle:"miter"}),Kt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];lv<e*1e3;)lv+=1e3;return t.forEach(function(s){var i=ls(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?Kt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Kt("v:fill",c,o),d={on:"t",obscured:"t"};++lv,a=a.concat(["<v:shape"+e2({id:"_x0000_s"+lv,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Kt("v:shadow",null,d),Kt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",xo("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),xo("x:AutoFill","False"),xo("x:Row",String(i.r)),xo("x:Column",String(i.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function UK(e,t,r,n){var a=Array.isArray(e),s;t.forEach(function(i){var o=ls(i.ref);if(a?(e[o.r]||(e[o.r]=[]),s=e[o.r][o.c]):s=e[i.ref],!s){s={t:"z"},a?e[o.r][o.c]=s:e[i.ref]=s;var c=Qn(e["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var u=an(c);u!==e["!ref"]&&(e["!ref"]=u)}s.c||(s.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function tVe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=Gr(o[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=ls(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&fL(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function Toe(e){var t=[Ys,Kt("comments",null,{xmlns:Lg[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var s=pa(a.a);r.indexOf(s)==-1&&(r.push(s),t.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(pa(c.a))),s.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)t.push(xo("t",pa(s[0]||"")));else{for(var i=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)i+=`Reply:
    `+s[o]+`
`;t.push(xo("t",pa(i)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function rVe(e,t){var r=[],n=!1,a={},s=0;return e.replace(ol,function(o,c){var u=Gr(o);switch(af(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+o.length;break;case"</text>":a.t=e.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function nVe(e,t,r){var n=[Ys,Kt("ThreadedComments",null,{xmlns:Ci.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var s="";(a[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&t.indexOf(i.a)==-1&&t.push(i.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=c.id:c.parentId=s,i.ID=c.id,i.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(i.a)).slice(-12)+"}"),n.push(Kt("threadedComment",xo("text",i.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function aVe(e,t){var r=[],n=!1;return e.replace(ol,function(s){var i=Gr(s);switch(af(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return s}),r}function sVe(e){var t=[Ys,Kt("personList",null,{xmlns:Ci.TCMNT,"xmlns:x":Lg[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Kt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function iVe(e){var t={};t.iauthor=e.read_shift(4);var r=Hg(e);return t.rfx=r.s,t.ref=Hr(r.s),e.l+=16,t}function oVe(e,t){return t==null&&(t=Et(36)),t.write_shift(4,e[1].iauthor),ab(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var lVe=rl;function cVe(e){return Xi(e.slice(0,54))}function uVe(e,t){var r=[],n=[],a={},s=!1;return Rh(e,function(o,c,u){switch(u){case 632:n.push(o);break;case 635:a=o;break;case 637:a.t=o.t,a.h=o.h,a.r=o.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function dVe(e){var t=ec(),r=[];return Mt(t,628),Mt(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Mt(t,632,cVe(a.a)))})}),Mt(t,631),Mt(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:ls(n[0]),e:ls(n[0])};Mt(t,635,oVe([s,a])),a.t&&a.t.length>0&&Mt(t,637,FUe(a)),Mt(t,636),delete a.iauthor})}),Mt(t,634),Mt(t,629),t.end()}var AVe="application/vnd.ms-office.vbaProject";function fVe(e){var t=Nr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Nr.utils.cfb_add(t,a,e.FileIndex[n].content)}}),Nr.write(t)}function hVe(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Nr.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var Ioe=["xlsb","xlsm","xlam","biff8","xla"];function mVe(){return{"!type":"dialog"}}function pVe(){return{"!type":"dialog"}}function gVe(){return{"!type":"macro"}}function xVe(){return{"!type":"macro"}}var Tv=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,s,i){var o=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=t.c:--d,c?u+=t.r:--u,a+(o?"":"$")+os(d)+(c?"":"$")+qs(u)}return function(a,s){return t=s,a.replace(e,r)}}(),gL=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,xL=function(){return function(t,r){return t.replace(gL,function(n,a,s,i,o,c){var u=aL(i)-(s?0:r.c),d=nL(c)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",h=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+h})}}();function Foe(e,t){return e.replace(gL,function(r,n,a,s,i,o){return n+(a=="$"?a+s:os(aL(s)+t.c))+(i=="$"?i+o:qs(nL(o)+t.r))})}function vVe(e,t,r){var n=rc(t),a=n.s,s=ls(r),i={r:s.r-a.r,c:s.c-a.c};return Foe(e,i)}function bVe(e){return e.length!=1}function QK(e){return e.replace(/_xlfn\./g,"")}function ai(e){e.l+=1}function Nm(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Ooe(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Doe(e);r.biff==12&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),i=Nm(e),o=Nm(e);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function Doe(e){var t=Nm(e),r=Nm(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function yVe(e,t,r){if(r.biff<8)return Doe(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),s=Nm(e),i=Nm(e);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}function Poe(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return wVe(e);var n=e.read_shift(r&&r.biff==12?4:2),a=Nm(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function wVe(e){var t=Nm(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function EVe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function CVe(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return _Ve(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),i=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;a>524287;)a-=1048576;if(i==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:i,rRel:o}}function _Ve(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function NVe(e,t,r){var n=(e[e.l++]&96)>>5,a=Ooe(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function SVe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var i=Ooe(e,s,r);return[n,a,i]}function kVe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function BVe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[n,a]}function jVe(e,t,r){var n=(e[e.l++]&96)>>5,a=yVe(e,t-1,r);return[n,a]}function TVe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function HK(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function IVe(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function FVe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function OVe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function DVe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function PVe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function Roe(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function RVe(e){return e.read_shift(2),Roe(e)}function LVe(e){return e.read_shift(2),Roe(e)}function MVe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=Poe(e,0,r);return[n,a]}function UVe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=CVe(e,0,r);return[n,a]}function QVe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var s=Poe(e,0,r);return[n,a,s]}function HVe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[$ze[a],Uoe[a],n]}function VVe(e,t,r){var n=e[e.l++],a=e.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:zVe(e);return[a,(s[0]===0?Uoe:zze)[s[1]]]}function zVe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function $Ve(e,t,r){e.l+=r&&r.biff==2?3:4}function GVe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function KVe(e){return e.l++,Lh[e.read_shift(1)]}function qVe(e){return e.l++,e.read_shift(2)}function WVe(e){return e.l++,e.read_shift(1)!==0}function XVe(e){return e.l++,Zo(e)}function YVe(e,t,r){return e.l++,rE(e,t-1,r)}function JVe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Ms(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Lh[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Zo(e);break;case 2:r[1]=Vg(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function ZVe(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?Hg:vk)(e));return a}function eze(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var o=0;o!=a;++o)i[s][o]=JVe(e,r.biff);return i}function tze(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,s]}function rze(e,t,r){if(r.biff==5)return nze(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),s=e.read_shift(4);return[n,a,s]}function nze(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function aze(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function sze(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function ize(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function oze(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[n,a]}var lze=al,cze=al,uze=al;function aE(e,t,r){return e.l+=2,[EVe(e)]}function vL(e){return e.l+=6,[]}var dze=aE,Aze=vL,fze=vL,hze=aE;function Loe(e){return e.l+=2,[li(e),e.read_shift(2)&1]}var mze=aE,pze=Loe,gze=vL,xze=aE,vze=aE,bze=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function yze(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2),i=bze[r>>2&31];return{ixti:t,coltype:r&3,rt:i,idx:n,c:a,C:s}}function wze(e){return e.l+=2,[e.read_shift(4)]}function Eze(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function Cze(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function _ze(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Nze(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Sze(e){return e.l+=4,[0,0]}var VK={1:{n:"PtgExp",f:GVe},2:{n:"PtgTbl",f:uze},3:{n:"PtgAdd",f:ai},4:{n:"PtgSub",f:ai},5:{n:"PtgMul",f:ai},6:{n:"PtgDiv",f:ai},7:{n:"PtgPower",f:ai},8:{n:"PtgConcat",f:ai},9:{n:"PtgLt",f:ai},10:{n:"PtgLe",f:ai},11:{n:"PtgEq",f:ai},12:{n:"PtgGe",f:ai},13:{n:"PtgGt",f:ai},14:{n:"PtgNe",f:ai},15:{n:"PtgIsect",f:ai},16:{n:"PtgUnion",f:ai},17:{n:"PtgRange",f:ai},18:{n:"PtgUplus",f:ai},19:{n:"PtgUminus",f:ai},20:{n:"PtgPercent",f:ai},21:{n:"PtgParen",f:ai},22:{n:"PtgMissArg",f:ai},23:{n:"PtgStr",f:YVe},26:{n:"PtgSheet",f:Eze},27:{n:"PtgEndSheet",f:Cze},28:{n:"PtgErr",f:KVe},29:{n:"PtgBool",f:WVe},30:{n:"PtgInt",f:qVe},31:{n:"PtgNum",f:XVe},32:{n:"PtgArray",f:TVe},33:{n:"PtgFunc",f:HVe},34:{n:"PtgFuncVar",f:VVe},35:{n:"PtgName",f:tze},36:{n:"PtgRef",f:MVe},37:{n:"PtgArea",f:NVe},38:{n:"PtgMemArea",f:aze},39:{n:"PtgMemErr",f:lze},40:{n:"PtgMemNoMem",f:cze},41:{n:"PtgMemFunc",f:sze},42:{n:"PtgRefErr",f:ize},43:{n:"PtgAreaErr",f:kVe},44:{n:"PtgRefN",f:UVe},45:{n:"PtgAreaN",f:jVe},46:{n:"PtgMemAreaN",f:_ze},47:{n:"PtgMemNoMemN",f:Nze},57:{n:"PtgNameX",f:rze},58:{n:"PtgRef3d",f:QVe},59:{n:"PtgArea3d",f:SVe},60:{n:"PtgRefErr3d",f:oze},61:{n:"PtgAreaErr3d",f:BVe},255:{}},kze={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Bze={1:{n:"PtgElfLel",f:Loe},2:{n:"PtgElfRw",f:xze},3:{n:"PtgElfCol",f:dze},6:{n:"PtgElfRwV",f:vze},7:{n:"PtgElfColV",f:hze},10:{n:"PtgElfRadical",f:mze},11:{n:"PtgElfRadicalS",f:gze},13:{n:"PtgElfColS",f:Aze},15:{n:"PtgElfColSV",f:fze},16:{n:"PtgElfRadicalLel",f:pze},25:{n:"PtgList",f:yze},29:{n:"PtgSxName",f:wze},255:{}},jze={0:{n:"PtgAttrNoop",f:Sze},1:{n:"PtgAttrSemi",f:PVe},2:{n:"PtgAttrIf",f:OVe},4:{n:"PtgAttrChoose",f:IVe},8:{n:"PtgAttrGoto",f:FVe},16:{n:"PtgAttrSum",f:$Ve},32:{n:"PtgAttrBaxcel",f:HK},33:{n:"PtgAttrBaxcel",f:HK},64:{n:"PtgAttrSpace",f:RVe},65:{n:"PtgAttrSpaceSemi",f:LVe},128:{n:"PtgAttrIfError",f:DVe},255:{}};function sE(e,t,r,n){if(n.biff<8)return al(e,t);for(var a=e.l+t,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=eze(e,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=ZVe(e,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=e.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return t=a-e.l,t!==0&&s.push(al(e,t)),s}function iE(e,t,r){for(var n=e.l+t,a,s,i=[];n!=e.l;)t=n-e.l,s=e[e.l],a=VK[s]||VK[kze[s]],(s===24||s===25)&&(a=(s===24?Bze:jze)[e[e.l+1]]),!a||!a.f?al(e,t):i.push([a.n,a.f(e,t,r)]);return i}function Tze(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)switch(i[0]){case 2:a.push('"'+i[1].replace(/"/g,'""')+'"');break;default:a.push(i[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var Ize={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Fze(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function Moe(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function zK(e,t,r){var n=Moe(e,t,r);return n=="#REF"?n:Fze(n,r)}function $o(e,t,r,n,a){var s=a&&a.biff||8,i={s:{c:0,r:0}},o=[],c,u,d,f=0,h=0,p,g="";if(!e[0]||!e[0][0])return"";for(var x=-1,b="",y=0,w=e[0].length;y<w;++y){var _=e[0][y];switch(_[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),u=o.pop(),x>=0){switch(e[0][x][1][0]){case 0:b=Ns(" ",e[0][x][1][1]);break;case 1:b=Ns("\r",e[0][x][1][1]);break;default:if(b="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}u=u+b,x=-1}o.push(u+Ize[_[0]]+c);break;case"PtgIsect":c=o.pop(),u=o.pop(),o.push(u+" "+c);break;case"PtgUnion":c=o.pop(),u=o.pop(),o.push(u+","+c);break;case"PtgRange":c=o.pop(),u=o.pop(),o.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=ow(_[1][1],i,a),o.push(lw(d,s));break;case"PtgRefN":d=r?ow(_[1][1],r,a):_[1][1],o.push(lw(d,s));break;case"PtgRef3d":f=_[1][1],d=ow(_[1][2],i,a),g=zK(n,f,a),o.push(g+"!"+lw(d,s));break;case"PtgFunc":case"PtgFuncVar":var B=_[1][0],k=_[1][1];B||(B=0),B&=127;var I=B==0?[]:o.slice(-B);o.length-=B,k==="User"&&(k=I.shift()),o.push(k+"("+I.join(",")+")");break;case"PtgBool":o.push(_[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(_[1]);break;case"PtgNum":o.push(String(_[1]));break;case"PtgStr":o.push('"'+_[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(_[1]);break;case"PtgAreaN":p=vK(_[1][1],r?{s:r}:i,a),o.push(q3(p,a));break;case"PtgArea":p=vK(_[1][1],i,a),o.push(q3(p,a));break;case"PtgArea3d":f=_[1][1],p=_[1][2],g=zK(n,f,a),o.push(g+"!"+q3(p,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=_[1][2];var E=(n.names||[])[h-1]||(n[0]||[])[h],N=E?E.Name:"SH33TJSNAME"+String(h);N&&N.slice(0,6)=="_xlfn."&&!a.xlfn&&(N=N.slice(6)),o.push(N);break;case"PtgNameX":var j=_[1][1];h=_[1][2];var R;if(a.biff<=5)j<0&&(j=-j),n[j]&&(R=n[j][h]);else{var D="";if(((n[j]||[])[0]||[])[0]==14849||(((n[j]||[])[0]||[])[0]==1025?n[j][h]&&n[j][h].itab>0&&(D=n.SheetNames[n[j][h].itab-1]+"!"):D=n.SheetNames[h-1]+"!"),n[j]&&n[j][h])D+=n[j][h].Name;else if(n[0]&&n[0][h])D+=n[0][h].Name;else{var O=(Moe(n,j,a)||"").split(";;");O[h-1]?D=O[h-1]:D+="SH33TJSERRX"}o.push(D);break}R||(R={Name:"SH33TJSERRY"}),o.push(R.Name);break;case"PtgParen":var L="(",M=")";if(x>=0){switch(b="",e[0][x][1][0]){case 2:L=Ns(" ",e[0][x][1][1])+L;break;case 3:L=Ns("\r",e[0][x][1][1])+L;break;case 4:M=Ns(" ",e[0][x][1][1])+M;break;case 5:M=Ns("\r",e[0][x][1][1])+M;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}x=-1}o.push(L+o.pop()+M);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:_[1][1],r:_[1][0]};var J={c:r.c,r:r.r};if(n.sharedf[Hr(d)]){var V=n.sharedf[Hr(d)];o.push($o(V,i,J,n,a))}else{var K=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push($o(u[1],i,J,n,a)),K=!0;break}K||o.push(_[1])}break;case"PtgArray":o.push("{"+Tze(_[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+_[1].idx+"[#"+_[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(_));default:throw new Error("Unrecognized Formula Token: "+String(_))}var z=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&x>=0&&z.indexOf(e[0][y][0])==-1){_=e[0][x];var G=!0;switch(_[1][0]){case 4:G=!1;case 0:b=Ns(" ",_[1][1]);break;case 5:G=!1;case 1:b=Ns("\r",_[1][1]);break;default:if(b="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+_[1][0])}o.push((G?b:"")+o.pop()+(G?"":b)),x=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]}function Oze(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],al(e,t-2)];var o=iE(e,i,r);return t!==i+a&&(s=sE(e,t-i-a,o,r)),e.l=n,[o,s]}function Dze(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],al(e,t-2)];var o=iE(e,i,r);return t!==i+a&&(s=sE(e,t-i-a,o,r)),e.l=n,[o,s]}function Pze(e,t,r,n){var a=e.l+t,s=iE(e,n,r),i;return a!==e.l&&(i=sE(e,a-e.l,s,r)),[s,i]}function Rze(e,t,r){var n=e.l+t,a,s=e.read_shift(2),i=iE(e,s,r);return s==65535?[[],al(e,t-2)]:(t!==s+2&&(a=sE(e,n-s-2,i,r)),[i,a])}function Lze(e){var t;if(th(e,e.l+6)!==65535)return[Zo(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function Mze(e){if(e==null){var t=Et(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return vg(e);return vg(0)}function Z3(e,t,r){var n=e.l+t,a=sf(e);r.biff==2&&++e.l;var s=Lze(e),i=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=Dze(e,n-e.l,r);return{cell:a,val:s[0],formula:o,shared:i>>3&1,tt:s[1]}}function Uze(e,t,r,n,a){var s=yg(t,r,a),i=Mze(e.v),o=Et(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var u=Et(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=Ki([s,i,o,u]);return f}function bk(e,t,r){var n=e.read_shift(4),a=iE(e,n,r),s=e.read_shift(4),i=s>0?sE(e,s,a,r):null;return[a,i]}var Qze=bk,yk=bk,Hze=bk,Vze=bk,zze={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Uoe={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},$ze={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function $K(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function Gze(e){var t="of:="+e.replace(gL,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function eI(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function Kze(e){return e.replace(/\./,"!")}var uw={},Iv={},dw=typeof Map<"u";function bL(e,t,r){var n=0,a=e.length;if(r){if(dw?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var s=dw?r.get(t):r[t];n<s.length;++n)if(e[s[n]].t===t)return e.Count++,s[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(dw?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function wk(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(Xo=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=s2(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=sS(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Jp(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function zm(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,s=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){lh(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=s;++a)if(e[a].numFmtId===n)return a;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Qoe(e,t,r,n,a,s){try{n.cellNF&&(e.z=Lr[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Qa(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Lr[t]==null&&lh(zMe[t]||"General",t),e.t==="e")e.w=e.w||Lh[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Jw(e.v);else if(e.t==="d"){var i=Si(e.v);(i|0)===i?e.w=i.toString(10):e.w=Jw(i)}else{if(e.v===void 0)return"";e.w=gg(e.v,Iv)}else e.t==="d"?e.w=Hu(t,Si(e.v),Iv):e.w=Hu(t,e.v,Iv)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=s.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=aS(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=aS(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&s.Fills)throw o}}}function qze(e,t,r){if(e&&e["!ref"]){var n=Qn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function Wze(e,t){var r=Qn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=an(r))}var Xze=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Yze=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Jze=/<(?:\w:)?hyperlink [^>]*>/mg,Zze=/"(\w*:\w*)"/,e$e=/<(?:\w:)?col\b[^>]*[\/]?>/g,t$e=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,r$e=/<(?:\w:)?pageMargins[^>]*\/>/g,Hoe=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,n$e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,a$e=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function s$e(e,t,r,n,a,s,i){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(Yze);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var h=u.match(Hoe);h?yL(h[0],o,a,r):(h=u.match(n$e))&&o$e(h[0],h[1]||"",o,a,r);var p=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var g=u.slice(p,p+50).match(Zze);g&&Wze(o,g[1])}var x=u.match(a$e);x&&x[1]&&b$e(x[1],a);var b=[];if(t.cellStyles){var y=u.match(e$e);y&&m$e(b,y)}f&&E$e(f[1],o,t,c,s,i);var w=d.match(t$e);w&&(o["!autofilter"]=g$e(w[0]));var _=[],B=d.match(Xze);if(B)for(p=0;p!=B.length;++p)_[p]=Qn(B[p].slice(B[p].indexOf('"')+1));var k=d.match(Jze);k&&A$e(o,k,n);var I=d.match(r$e);if(I&&(o["!margins"]=f$e(Gr(I[0]))),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=an(c)),t.sheetRows>0&&o["!ref"]){var E=Qn(o["!ref"]);t.sheetRows<=+E.e.r&&(E.e.r=t.sheetRows-1,E.e.r>c.e.r&&(E.e.r=c.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>c.e.c&&(E.e.c=c.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),o["!fullref"]=o["!ref"],o["!ref"]=an(E))}return b.length>0&&(o["!cols"]=b),_.length>0&&(o["!merges"]=_),o}function i$e(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+an(e[r])+'"/>';return t+"</mergeCells>"}function yL(e,t,r,n){var a=Gr(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Un(Ea(a.codeName)))}function o$e(e,t,r,n,a){yL(e.slice(0,e.indexOf(">")),r,n,a)}function l$e(e,t,r,n,a){var s=!1,i={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,i.codeName=HA(pa(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),o=(o||"")+Kt("outlinePr",null,u)}!s&&!o||(a[a.length]=Kt("sheetPr",o,i))}var c$e=["objects","scenarios","selectLockedCells","selectUnlockedCells"],u$e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function d$e(e){var t={sheet:1};return c$e.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),u$e.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=hL(e.password).toString(16).toUpperCase()),Kt("sheetProtection",null,t)}function A$e(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var s=Gr(Ea(t[a]),!0);if(!s.ref)return;var i=((r||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+Un(s.location))):(s.Target="#"+Un(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=Qn(s.ref),c=o.s.r;c<=o.e.r;++c)for(var u=o.s.c;u<=o.e.c;++u){var d=Hr({c:u,r:c});n?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}function f$e(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function h$e(e){return Jp(e),Kt("pageMargins",null,e)}function m$e(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=Gr(t[n],!0);a.hidden&&(a.hidden=Ma(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,mL(a.width)),_m(a);s<=i;)e[s++]=Ha(a)}}function p$e(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=Kt("col",null,wk(a,n)));return r[r.length]="</cols>",r.join("")}function g$e(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function x$e(e,t,r,n){var a=typeof e.ref=="string"?e.ref:an(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=rc(a);i.s.r==i.e.r&&(i.e.r=rc(t["!ref"]).e.r,a=an(i));for(var o=0;o<s.length;++o){var c=s[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Kt("autoFilter",null,{ref:a})}var v$e=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function b$e(e,t){t.Views||(t.Views=[{}]),(e.match(v$e)||[]).forEach(function(r,n){var a=Gr(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),Ma(a.rightToLeft)&&(t.Views[n].RTL=!0)})}function y$e(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Kt("sheetViews",Kt("sheetView",null,a),{})}function w$e(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",s=e.t,i=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=Lh[e.v];break;case"d":n&&n.cellDates?a=Qa(e.v,-1).toISOString():(e=Ha(e),e.t="n",a=""+(e.v=Si(Qa(e.v)))),typeof e.z>"u"&&(e.z=Lr[14]);break;default:a=e.v;break}var o=xo("v",pa(a)),c={r:t},u=zm(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=xo("v",""+bL(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=s&&(e.t=s,e.v=i),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=Kt("f",pa(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),Kt("c",o,c)}var E$e=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=Zw("v"),i=Zw("f");return function(c,u,d,f,h,p){for(var g=0,x="",b=[],y=[],w=0,_=0,B=0,k="",I,E,N=0,j=0,R,D,O=0,L=0,M=Array.isArray(p.CellXf),J,V=[],K=[],z=Array.isArray(u),G=[],Y={},ee=!1,P=!!d.sheetStubs,Q=c.split(t),X=0,te=Q.length;X!=te;++X){x=Q[X].trim();var ae=x.length;if(ae!==0){var se=0;e:for(g=0;g<ae;++g)switch(x[g]){case">":if(x[g-1]!="/"){++g;break e}if(d&&d.cellStyles){if(E=Gr(x.slice(se,g),!0),N=E.r!=null?parseInt(E.r,10):N+1,j=-1,d.sheetRows&&d.sheetRows<N)continue;Y={},ee=!1,E.ht&&(ee=!0,Y.hpt=parseFloat(E.ht),Y.hpx=m1(Y.hpt)),E.hidden=="1"&&(ee=!0,Y.hidden=!0),E.outlineLevel!=null&&(ee=!0,Y.level=+E.outlineLevel),ee&&(G[N-1]=Y)}break;case"<":se=g;break}if(se>=g)break;if(E=Gr(x.slice(se,g),!0),N=E.r!=null?parseInt(E.r,10):N+1,j=-1,!(d.sheetRows&&d.sheetRows<N)){f.s.r>N-1&&(f.s.r=N-1),f.e.r<N-1&&(f.e.r=N-1),d&&d.cellStyles&&(Y={},ee=!1,E.ht&&(ee=!0,Y.hpt=parseFloat(E.ht),Y.hpx=m1(Y.hpt)),E.hidden=="1"&&(ee=!0,Y.hidden=!0),E.outlineLevel!=null&&(ee=!0,Y.level=+E.outlineLevel),ee&&(G[N-1]=Y)),b=x.slice(g).split(e);for(var oe=0;oe!=b.length&&b[oe].trim().charAt(0)=="<";++oe);for(b=b.slice(oe),g=0;g!=b.length;++g)if(x=b[g].trim(),x.length!==0){if(y=x.match(r),w=g,_=0,B=0,x="<c "+(x.slice(0,1)=="<"?">":"")+x,y!=null&&y.length===2){for(w=0,k=y[1],_=0;_!=k.length&&!((B=k.charCodeAt(_)-64)<1||B>26);++_)w=26*w+B;--w,j=w}else++j;for(_=0;_!=x.length&&x.charCodeAt(_)!==62;++_);if(++_,E=Gr(x.slice(0,_),!0),E.r||(E.r=Hr({r:N-1,c:j})),k=x.slice(_),I={t:""},(y=k.match(s))!=null&&y[1]!==""&&(I.v=Un(y[1])),d.cellFormula){if((y=k.match(i))!=null&&y[1]!==""){if(I.f=Un(Ea(y[1])).replace(/\r\n/g,`
`),d.xlfn||(I.f=QK(I.f)),y[0].indexOf('t="array"')>-1)I.F=(k.match(a)||[])[1],I.F.indexOf(":")>-1&&V.push([Qn(I.F),I.F]);else if(y[0].indexOf('t="shared"')>-1){D=Gr(y[0]);var ce=Un(Ea(y[1]));d.xlfn||(ce=QK(ce)),K[parseInt(D.si,10)]=[D,ce,E.r]}}else(y=k.match(/<f[^>]*\/>/))&&(D=Gr(y[0]),K[D.si]&&(I.f=vVe(K[D.si][1],K[D.si][2],E.r)));var me=ls(E.r);for(_=0;_<V.length;++_)me.r>=V[_][0].s.r&&me.r<=V[_][0].e.r&&me.c>=V[_][0].s.c&&me.c<=V[_][0].e.c&&(I.F=V[_][1])}if(E.t==null&&I.v===void 0)if(I.f||I.F)I.v=0,I.t="n";else if(P)I.t="z";else continue;else I.t=E.t||"n";switch(f.s.c>j&&(f.s.c=j),f.e.c<j&&(f.e.c=j),I.t){case"n":if(I.v==""||I.v==null){if(!P)continue;I.t="z"}else I.v=parseFloat(I.v);break;case"s":if(typeof I.v>"u"){if(!P)continue;I.t="z"}else R=uw[parseInt(I.v,10)],I.v=R.t,I.r=R.r,d.cellHTML&&(I.h=R.h);break;case"str":I.t="s",I.v=I.v!=null?Ea(I.v):"",d.cellHTML&&(I.h=Z8(I.v));break;case"inlineStr":y=k.match(n),I.t="s",y!=null&&(R=fL(y[1]))?(I.v=R.t,d.cellHTML&&(I.h=R.h)):I.v="";break;case"b":I.v=Ma(I.v);break;case"d":d.cellDates?I.v=Qa(I.v,1):(I.v=Si(Qa(I.v,1)),I.t="n");break;case"e":(!d||d.cellText!==!1)&&(I.w=I.v),I.v=zie[I.v];break}if(O=L=0,J=null,M&&E.s!==void 0&&(J=p.CellXf[E.s],J!=null&&(J.numFmtId!=null&&(O=J.numFmtId),d.cellStyles&&J.fillId!=null&&(L=J.fillId))),Qoe(I,O,L,d,h,p),d.cellDates&&M&&I.t=="n"&&tb(Lr[O])&&(I.t="d",I.v=xk(I.v)),E.cm&&d.xlmeta){var ke=(d.xlmeta.Cell||[])[+E.cm-1];ke&&ke.type=="XLDAPR"&&(I.D=!0)}if(z){var ne=ls(E.r);u[ne.r]||(u[ne.r]=[]),u[ne.r][ne.c]=I}else u[E.r]=I}}}}G.length>0&&(u["!rows"]=G)}}();function C$e(e,t,r,n){var a=[],s=[],i=Qn(e["!ref"]),o="",c,u="",d=[],f=0,h=0,p=e["!rows"],g=Array.isArray(e),x={r:u},b,y=-1;for(h=i.s.c;h<=i.e.c;++h)d[h]=os(h);for(f=i.s.r;f<=i.e.r;++f){for(s=[],u=qs(f),h=i.s.c;h<=i.e.c;++h){c=d[h]+u;var w=g?(e[f]||[])[h]:e[c];w!==void 0&&(o=w$e(w,c,e,t))!=null&&s.push(o)}(s.length>0||p&&p[f])&&(x={r:u},p&&p[f]&&(b=p[f],b.hidden&&(x.hidden=1),y=-1,b.hpx?y=i2(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(x.ht=y,x.customHeight=1),b.level&&(x.outlineLevel=b.level)),a[a.length]=Kt("row",s.join(""),x))}if(p)for(;f<p.length;++f)p&&p[f]&&(x={r:f+1},b=p[f],b.hidden&&(x.hidden=1),y=-1,b.hpx?y=i2(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(x.ht=y,x.customHeight=1),b.level&&(x.outlineLevel=b.level),a[a.length]=Kt("row","",x));return a.join("")}function Voe(e,t,r,n){var a=[Ys,Kt("worksheet",null,{xmlns:Lg[0],"xmlns:r":Ci.r})],s=r.SheetNames[e],i=0,o="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=Qn(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=an(d)}n||(n={}),c["!comments"]=[];var f=[];l$e(c,r,e,t,a),a[a.length]=Kt("dimension",null,{ref:u}),a[a.length]=y$e(c,t,e,r),t.sheetFormat&&(a[a.length]=Kt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=p$e(c,c["!cols"])),a[i=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=C$e(c,t),o.length>0&&(a[a.length]=o)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),c["!protect"]&&(a[a.length]=d$e(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=x$e(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=i$e(c["!merges"]));var h=-1,p,g=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(x){x[1].Target&&(p={ref:x[0]},x[1].Target.charAt(0)!="#"&&(g=fa(n,-1,pa(x[1].Target).replace(/#.*$/,""),Cn.HLINK),p["r:id"]="rId"+g),(h=x[1].Target.indexOf("#"))>-1&&(p.location=pa(x[1].Target.slice(h+1))),x[1].Tooltip&&(p.tooltip=pa(x[1].Tooltip)),a[a.length]=Kt("hyperlink",null,p))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=h$e(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=xo("ignoredErrors",Kt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(g=fa(n,-1,"../drawings/drawing"+(e+1)+".xml",Cn.DRAW),a[a.length]=Kt("drawing",null,{"r:id":"rId"+g}),c["!drawing"]=f),c["!comments"].length>0&&(g=fa(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Cn.VML),a[a.length]=Kt("legacyDrawing",null,{"r:id":"rId"+g}),c["!legacy"]=g),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function _$e(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function N$e(e,t,r){var n=Et(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;a.hpx?s=i2(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,p=d<<10;p<d+1<<10;++p){u.c=p;var g=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Hr(u)];g&&(f<0&&(f=p),h=p)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,h))}var x=n.l;return n.l=c,n.write_shift(4,o),n.l=x,n.length>n.l?n.slice(0,n.l):n}function S$e(e,t,r,n){var a=N$e(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&Mt(e,0,a)}var k$e=Hg,B$e=ab;function j$e(){}function T$e(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=OUe(e),r}function I$e(e,t,r){r==null&&(r=Et(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return tS({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Mie(e,r),r.slice(0,r.l)}function F$e(e){var t=Gu(e);return[t]}function O$e(e,t,r){return r==null&&(r=Et(8)),Mg(t,r)}function D$e(e){var t=Ug(e);return[t]}function P$e(e,t,r){return r==null&&(r=Et(4)),Qg(t,r)}function R$e(e){var t=Gu(e),r=e.read_shift(1);return[t,r,"b"]}function L$e(e,t,r){return r==null&&(r=Et(9)),Mg(t,r),r.write_shift(1,e.v?1:0),r}function M$e(e){var t=Ug(e),r=e.read_shift(1);return[t,r,"b"]}function U$e(e,t,r){return r==null&&(r=Et(5)),Qg(t,r),r.write_shift(1,e.v?1:0),r}function Q$e(e){var t=Gu(e),r=e.read_shift(1);return[t,r,"e"]}function H$e(e,t,r){return r==null&&(r=Et(9)),Mg(t,r),r.write_shift(1,e.v),r}function V$e(e){var t=Ug(e),r=e.read_shift(1);return[t,r,"e"]}function z$e(e,t,r){return r==null&&(r=Et(8)),Qg(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function $$e(e){var t=Gu(e),r=e.read_shift(4);return[t,r,"s"]}function G$e(e,t,r){return r==null&&(r=Et(12)),Mg(t,r),r.write_shift(4,t.v),r}function K$e(e){var t=Ug(e),r=e.read_shift(4);return[t,r,"s"]}function q$e(e,t,r){return r==null&&(r=Et(8)),Qg(t,r),r.write_shift(4,t.v),r}function W$e(e){var t=Gu(e),r=Zo(e);return[t,r,"n"]}function X$e(e,t,r){return r==null&&(r=Et(16)),Mg(t,r),vg(e.v,r),r}function zoe(e){var t=Ug(e),r=Zo(e);return[t,r,"n"]}function Y$e(e,t,r){return r==null&&(r=Et(12)),Qg(t,r),vg(e.v,r),r}function J$e(e){var t=Gu(e),r=lL(e);return[t,r,"n"]}function Z$e(e,t,r){return r==null&&(r=Et(12)),Mg(t,r),Uie(e.v,r),r}function eGe(e){var t=Ug(e),r=lL(e);return[t,r,"n"]}function tGe(e,t,r){return r==null&&(r=Et(8)),Qg(t,r),Uie(e.v,r),r}function rGe(e){var t=Gu(e),r=sL(e);return[t,r,"is"]}function nGe(e){var t=Gu(e),r=rl(e);return[t,r,"str"]}function aGe(e,t,r){return r==null&&(r=Et(12+4*e.v.length)),Mg(t,r),Xi(e.v,r),r.length>r.l?r.slice(0,r.l):r}function sGe(e){var t=Ug(e),r=rl(e);return[t,r,"str"]}function iGe(e,t,r){return r==null&&(r=Et(8+4*e.v.length)),Qg(t,r),Xi(e.v,r),r.length>r.l?r.slice(0,r.l):r}function oGe(e,t,r){var n=e.l+t,a=Gu(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"b"];if(r.cellFormula){e.l+=2;var o=yk(e,n-e.l,r);i[3]=$o(o,null,a,r.supbooks,r)}else e.l=n;return i}function lGe(e,t,r){var n=e.l+t,a=Gu(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"e"];if(r.cellFormula){e.l+=2;var o=yk(e,n-e.l,r);i[3]=$o(o,null,a,r.supbooks,r)}else e.l=n;return i}function cGe(e,t,r){var n=e.l+t,a=Gu(e);a.r=r["!row"];var s=Zo(e),i=[a,s,"n"];if(r.cellFormula){e.l+=2;var o=yk(e,n-e.l,r);i[3]=$o(o,null,a,r.supbooks,r)}else e.l=n;return i}function uGe(e,t,r){var n=e.l+t,a=Gu(e);a.r=r["!row"];var s=rl(e),i=[a,s,"str"];if(r.cellFormula){e.l+=2;var o=yk(e,n-e.l,r);i[3]=$o(o,null,a,r.supbooks,r)}else e.l=n;return i}var dGe=Hg,AGe=ab;function fGe(e,t){return t==null&&(t=Et(4)),t.write_shift(4,e),t}function hGe(e,t){var r=e.l+t,n=Hg(e),a=iL(e),s=rl(e),i=rl(e),o=rl(e);e.l=r;var c={rfx:n,relId:a,loc:s,display:o};return i&&(c.Tooltip=i),c}function mGe(e,t){var r=Et(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));ab({s:ls(e[0]),e:ls(e[0])},r),oL("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return Xi(a||"",r),Xi(e[1].Tooltip||"",r),Xi("",r),r.slice(0,r.l)}function pGe(){}function gGe(e,t,r){var n=e.l+t,a=Qie(e),s=e.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var o=Qze(e,n-e.l,r);i[1]=o}else e.l=n;return i}function xGe(e,t,r){var n=e.l+t,a=Hg(e),s=[a];if(r.cellFormula){var i=Vze(e,n-e.l,r);s[1]=i,e.l=n}else e.l=n;return s}function vGe(e,t,r){r==null&&(r=Et(18));var n=wk(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var $oe=["left","right","top","bottom","header","footer"];function bGe(e){var t={};return $oe.forEach(function(r){t[r]=Zo(e)}),t}function yGe(e,t){return t==null&&(t=Et(48)),Jp(e),$oe.forEach(function(r){vg(e[r],t)}),t}function wGe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function EGe(e,t,r){r==null&&(r=Et(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function CGe(e){var t=Et(24);return t.write_shift(4,4),t.write_shift(4,1),ab(e,t),t}function _Ge(e,t){return t==null&&(t=Et(66)),t.write_shift(2,e.password?hL(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function NGe(){}function SGe(){}function kGe(e,t,r,n,a,s,i){if(!e)return e;var o=t||{};n||(n={"!id":{}});var c=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,p,g,x,b,y,w,_,B,k,I=[];o.biff=12,o["!row"]=0;var E=0,N=!1,j=[],R={},D=o.supbooks||a.supbooks||[[]];if(D.sharedf=R,D.arrayf=j,D.SheetNames=a.SheetNames||a.Sheets.map(function(z){return z.name}),!o.supbooks&&(o.supbooks=D,a.Names))for(var O=0;O<a.Names.length;++O)D[0][O+1]=a.Names[O];var L=[],M=[],J=!1;o2[16]={n:"BrtShortReal",f:zoe};var V;if(Rh(e,function(G,Y,ee){if(!h)switch(ee){case 148:u=G;break;case 0:p=G,o.sheetRows&&o.sheetRows<=p.r&&(h=!0),B=qs(b=p.r),o["!row"]=p.r,(G.hidden||G.hpt||G.level!=null)&&(G.hpt&&(G.hpx=m1(G.hpt)),M[G.r]=G);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(g={t:G[2]},G[2]){case"n":g.v=G[1];break;case"s":_=uw[G[1]],g.v=_.t,g.r=_.r;break;case"b":g.v=!!G[1];break;case"e":g.v=G[1],o.cellText!==!1&&(g.w=Lh[g.v]);break;case"str":g.t="s",g.v=G[1];break;case"is":g.t="s",g.v=G[1].t;break}if((x=i.CellXf[G[0].iStyleRef])&&Qoe(g,x.numFmtId,null,o,s,i),y=G[0].c==-1?y+1:G[0].c,o.dense?(c[b]||(c[b]=[]),c[b][y]=g):c[os(y)+B]=g,o.cellFormula){for(N=!1,E=0;E<j.length;++E){var P=j[E];p.r>=P[0].s.r&&p.r<=P[0].e.r&&y>=P[0].s.c&&y<=P[0].e.c&&(g.F=an(P[0]),N=!0)}!N&&G.length>3&&(g.f=G[3])}if(d.s.r>p.r&&(d.s.r=p.r),d.s.c>y&&(d.s.c=y),d.e.r<p.r&&(d.e.r=p.r),d.e.c<y&&(d.e.c=y),o.cellDates&&x&&g.t=="n"&&tb(Lr[x.numFmtId])){var Q=Lp(g.v);Q&&(g.t="d",g.v=new Date(Q.y,Q.m-1,Q.d,Q.H,Q.M,Q.S,Q.u))}V&&(V.type=="XLDAPR"&&(g.D=!0),V=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;g={t:"z",v:void 0},y=G[0].c==-1?y+1:G[0].c,o.dense?(c[b]||(c[b]=[]),c[b][y]=g):c[os(y)+B]=g,d.s.r>p.r&&(d.s.r=p.r),d.s.c>y&&(d.s.c=y),d.e.r<p.r&&(d.e.r=p.r),d.e.c<y&&(d.e.c=y),V&&(V.type=="XLDAPR"&&(g.D=!0),V=void 0);break;case 176:I.push(G);break;case 49:V=((o.xlmeta||{}).Cell||[])[G-1];break;case 494:var X=n["!id"][G.relId];for(X?(G.Target=X.Target,G.loc&&(G.Target+="#"+G.loc),G.Rel=X):G.relId==""&&(G.Target="#"+G.loc),b=G.rfx.s.r;b<=G.rfx.e.r;++b)for(y=G.rfx.s.c;y<=G.rfx.e.c;++y)o.dense?(c[b]||(c[b]=[]),c[b][y]||(c[b][y]={t:"z",v:void 0}),c[b][y].l=G):(w=Hr({c:y,r:b}),c[w]||(c[w]={t:"z",v:void 0}),c[w].l=G);break;case 426:if(!o.cellFormula)break;j.push(G),k=o.dense?c[b][y]:c[os(y)+B],k.f=$o(G[1],d,{r:p.r,c:y},D,o),k.F=an(G[0]);break;case 427:if(!o.cellFormula)break;R[Hr(G[0].s)]=G[1],k=o.dense?c[b][y]:c[os(y)+B],k.f=$o(G[1],d,{r:p.r,c:y},D,o);break;case 60:if(!o.cellStyles)break;for(;G.e>=G.s;)L[G.e--]={width:G.w/256,hidden:!!(G.flags&1),level:G.level},J||(J=!0,mL(G.w/256)),_m(L[G.e+1]);break;case 161:c["!autofilter"]={ref:an(G)};break;case 476:c["!margins"]=G;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),G.name&&(a.Sheets[r].CodeName=G.name),(G.above||G.left)&&(c["!outline"]={above:G.above,left:G.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),G.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!Y.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+ee.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=an(u||d)),o.sheetRows&&c["!ref"]){var K=Qn(c["!ref"]);o.sheetRows<=+K.e.r&&(K.e.r=o.sheetRows-1,K.e.r>d.e.r&&(K.e.r=d.e.r),K.e.r<K.s.r&&(K.s.r=K.e.r),K.e.c>d.e.c&&(K.e.c=d.e.c),K.e.c<K.s.c&&(K.s.c=K.e.c),c["!fullref"]=c["!ref"],c["!ref"]=an(K))}return I.length>0&&(c["!merges"]=I),L.length>0&&(c["!cols"]=L),M.length>0&&(c["!rows"]=M),c}function BGe(e,t,r,n,a,s,i){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=Ha(t),t.z=t.z||Lr[14],t.v=Si(Qa(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var c={r,c:n};switch(c.s=zm(a.cellXfs,t,a),t.l&&s["!links"].push([Hr(c),t.l]),t.c&&s["!comments"].push([Hr(c),t.c]),t.t){case"s":case"str":return a.bookSST?(o=bL(a.Strings,t.v,a.revStrings),c.t="s",c.v=o,i?Mt(e,18,q$e(t,c)):Mt(e,7,G$e(t,c))):(c.t="str",i?Mt(e,17,iGe(t,c)):Mt(e,6,aGe(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?i?Mt(e,13,tGe(t,c)):Mt(e,2,Z$e(t,c)):i?Mt(e,16,Y$e(t,c)):Mt(e,5,X$e(t,c)),!0;case"b":return c.t="b",i?Mt(e,15,U$e(t,c)):Mt(e,4,L$e(t,c)),!0;case"e":return c.t="e",i?Mt(e,14,z$e(t,c)):Mt(e,3,H$e(t,c)),!0}return i?Mt(e,12,P$e(t,c)):Mt(e,1,O$e(t,c)),!0}function jGe(e,t,r,n){var a=Qn(t["!ref"]||"A1"),s,i="",o=[];Mt(e,145);var c=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){i=qs(d),S$e(e,t,a,d);var f=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(o[h]=os(h)),s=o[h]+i;var p=c?(t[d]||[])[h]:t[s];if(!p){f=!1;continue}f=BGe(e,p,d,h,n,t,f)}}Mt(e,146)}function TGe(e,t){!t||!t["!merges"]||(Mt(e,177,fGe(t["!merges"].length)),t["!merges"].forEach(function(r){Mt(e,176,AGe(r))}),Mt(e,178))}function IGe(e,t){!t||!t["!cols"]||(Mt(e,390),t["!cols"].forEach(function(r,n){r&&Mt(e,60,vGe(n,r))}),Mt(e,391))}function FGe(e,t){!t||!t["!ref"]||(Mt(e,648),Mt(e,649,CGe(Qn(t["!ref"]))),Mt(e,650))}function OGe(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=fa(r,-1,n[1].Target.replace(/#.*$/,""),Cn.HLINK);Mt(e,494,mGe(n,a))}}),delete t["!links"]}function DGe(e,t,r,n){if(t["!comments"].length>0){var a=fa(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Cn.VML);Mt(e,551,oL("rId"+a)),t["!legacy"]=a}}function PGe(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],s=typeof a.ref=="string"?a.ref:an(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=rc(s);o.s.r==o.e.r&&(o.e.r=rc(t["!ref"]).e.r,s=an(o));for(var c=0;c<i.length;++c){var u=i[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Mt(e,161,ab(Qn(s))),Mt(e,162)}}function RGe(e,t,r){Mt(e,133),Mt(e,137,EGe(t,r)),Mt(e,138),Mt(e,134)}function LGe(e,t){t["!protect"]&&Mt(e,535,_Ge(t["!protect"]))}function MGe(e,t,r,n){var a=ec(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var c=Qn(i["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Mt(a,129),(r.vbaraw||i["!outline"])&&Mt(a,147,I$e(o,i["!outline"])),Mt(a,148,B$e(c)),RGe(a,i,r.Workbook),IGe(a,i),jGe(a,i,e,t),LGe(a,i),PGe(a,i,r,e),TGe(a,i),OGe(a,i,n),i["!margins"]&&Mt(a,476,yGe(i["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&FGe(a,i),DGe(a,i,e,n),Mt(a,130),a.end()}function UGe(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var i=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(t[+i[1]]=r?+i[2]:i[2])});var a=Un((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[t,a,n]}function QGe(e,t,r,n,a,s){var i=s||{"!type":"chart"};if(!e)return s;var o=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=UGe(f);d.s.r=d.s.c=0,d.e.c=o,u=os(o),h[0].forEach(function(p,g){i[u+qs(g)]={t:"n",v:p,z:h[1]},c=g}),d.e.r<c&&(d.e.r=c),++o}),o>0&&(i["!ref"]=an(d)),i}function HGe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i,o=e.match(Hoe);return o&&yL(o[0],s,a,r),(i=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=i[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function VGe(e,t){e.l+=10;var r=rl(e);return{name:r}}function zGe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=!1;return Rh(e,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var wL=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],$Ge=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],GGe=[],KGe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function GK(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var s=t[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=Ma(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function KK(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Ma(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function Goe(e){KK(e.WBProps,wL),KK(e.CalcPr,KGe),GK(e.WBView,$Ge),GK(e.Sheets,GGe),Iv.date1904=Ma(e.WBProps.date1904)}function qGe(e){return!e.Workbook||!e.Workbook.WBProps?"false":Ma(e.Workbook.WBProps.date1904)?"true":"false"}var WGe="][*?/\\".split("");function Koe(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return WGe.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function XGe(e,t,r){e.forEach(function(n,a){Koe(n);for(var s=0;s<a;++s)if(n==e[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=t&&t[a]&&t[a].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function YGe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];XGe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)qze(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var JGe=/<\w+:workbook/;function ZGe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},i=0;if(e.replace(ol,function(c,u){var d=Gr(c);switch(af(d[0])){case"<?xml":break;case"<workbook":c.match(JGe)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":wL.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Ma(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=Ea(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Un(Ea(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Ea(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),Ma(d.hidden||"0")&&(s.Hidden=!0),i=u+c.length;break;case"</definedName>":s.Ref=Un(Ea(e.slice(i,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),Lg.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return Goe(r),r}function qoe(e){var t=[Ys];t[t.length]=Kt("workbook",null,{xmlns:Lg[0],"xmlns:r":Ci.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(wL.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Kt("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var i={name:pa(e.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}t[t.length]=Kt("sheet",null,i)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(t[t.length]=Kt("definedName",pa(o.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function eKe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=JF(e),r.name=rl(e),r}function tKe(e,t){return t||(t=Et(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),oL(e.strRelID,t),Xi(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function rKe(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?rl(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function nKe(e,t){t||(t=Et(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),Mie(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function aKe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function sKe(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=DUe(e),i=Hze(e,0,r),o=iL(e);e.l=n;var c={Name:s,Ptg:i};return a<268435455&&(c.Sheet=a),o&&(c.Comment=o),c}function iKe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],o2[16]={n:"BrtFRTArchID$",f:aKe},Rh(e,function(c,u,d){switch(d){case 156:i.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=$o(c.Ptg,null,null,i,t),delete t.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,c]):i[0]=[d,c],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(c),i.XTI=i.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),Goe(r),r.Names=s,r.supbooks=i,r}function oKe(e,t){Mt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Mt(e,156,tKe(a))}Mt(e,144)}function lKe(e,t){t||(t=Et(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Xi("SheetJS",t),Xi(qN.version,t),Xi(qN.version,t),Xi("7262",t),t.length>t.l?t.slice(0,t.l):t}function cKe(e,t){t||(t=Et(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function uKe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(Mt(e,135),Mt(e,158,cKe(a)),Mt(e,136))}}function dKe(e,t){var r=ec();return Mt(r,131),Mt(r,128,lKe()),Mt(r,153,nKe(e.Workbook&&e.Workbook.WBProps||null)),uKe(r,e),oKe(r,e),Mt(r,132),r.end()}function AKe(e,t,r){return t.slice(-4)===".bin"?iKe(e,r):ZGe(e,r)}function fKe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?kGe(e,n,r,a,s,i,o):s$e(e,n,r,a,s,i,o)}function hKe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?zGe(e,n,r,a,s):HGe(e,n,r,a,s)}function mKe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?gVe():xVe()}function pKe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?mVe():pVe()}function gKe(e,t,r,n){return t.slice(-4)===".bin"?AHe(e,r,n):eHe(e,r,n)}function xKe(e,t,r){return koe(e,r)}function vKe(e,t,r){return t.slice(-4)===".bin"?vQe(e,r):pQe(e,r)}function bKe(e,t,r){return t.slice(-4)===".bin"?uVe(e,r):tVe(e,r)}function yKe(e,t,r){return t.slice(-4)===".bin"?JHe(e):XHe(e)}function wKe(e,t,r,n){return r.slice(-4)===".bin"?ZHe(e,t,r,n):void 0}function EKe(e,t,r){return t.slice(-4)===".bin"?KHe(e,t,r):WHe(e,t,r)}function CKe(e,t,r){return(t.slice(-4)===".bin"?dKe:qoe)(e)}function _Ke(e,t,r,n,a){return(t.slice(-4)===".bin"?MGe:Voe)(e,r,n,a)}function NKe(e,t,r){return(t.slice(-4)===".bin"?wHe:Noe)(e,r)}function SKe(e,t,r){return(t.slice(-4)===".bin"?wQe:xoe)(e,r)}function kKe(e,t,r){return(t.slice(-4)===".bin"?dVe:Toe)(e)}function BKe(e){return(e.slice(-4)===".bin"?qHe:Boe)()}var Woe=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,Xoe=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function xd(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match(Woe),s,i,o,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(Xoe),(i=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),n[o]=s[2].slice(1,s[2].length-1));return n}function jKe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(Woe),a,s,i,o;if(n)for(o=0;o!=n.length;++o)a=n[o].match(Xoe),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?i="xmlns"+a[1].slice(6):i=a[1].slice(s+1),r[i]=a[2].slice(1,a[2].length-1));return r}var Aw;function TKe(e,t){var r=Aw[e]||Un(e);return r==="General"?gg(t):Hu(r,t)}function IKe(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Ma(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=Qa(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Un(t)]=a}function FKe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Lh[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Jw(e.v):e.w=gg(e.v):e.w=TKe(t||"General",e.v)}catch(s){if(r.WTF)throw s}try{var n=Aw[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&tb(n)){var a=Lp(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function OKe(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=GQe[n.Pattern]||n.Pattern)}e[t.ID]=t}function DKe(e,t,r,n,a,s,i,o,c,u){var d="General",f=n.StyleID,h={};u=u||{};var p=[],g=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&i&&(f=i.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&p.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ma(e);break;case"String":n.t="s",n.r=uK(Un(e)),n.v=e.indexOf("<")>-1?Un(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Qa(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Un(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=zie[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=uK(t||e));break}if(FKe(n,d,u),u.cellFormula!==!1)if(n.Formula){var x=Un(n.Formula);x.charCodeAt(0)==61&&(x=x.slice(1)),n.f=Tv(x,a),delete n.Formula,n.ArrayRange=="RC"?n.F=Tv("RC:RC",a):n.ArrayRange&&(n.F=Tv(n.ArrayRange,a),c.push([Qn(n.F),n.F]))}else for(g=0;g<c.length;++g)a.r>=c[g][0].s.r&&a.r<=c[g][0].e.r&&a.c>=c[g][0].s.c&&a.c<=c[g][0].e.c&&(n.F=c[g][1]);u.cellStyles&&(p.forEach(function(b){!h.patternType&&b.patternType&&(h.patternType=b.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function PKe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function tI(e,t){var r=t||{};rb();var n=Iy(eL(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Ea(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var i=Ha(r);return i.type="string",h1.to_workbook(n,i)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Me){a.indexOf("<"+Me)>=0&&(s=!0)}),s)return yqe(n,r);Aw={"General Number":"General","General Date":Lr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Lr[15],"Short Date":Lr[14],"Long Time":Lr[19],"Medium Time":Lr[18],"Short Time":Lr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Lr[2],Standard:Lr[4],Percent:Lr[10],Scientific:Lr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],u,d={},f=[],h=r.dense?[]:{},p="",g={},x={},b=xd('<Data ss:Type="String">'),y=0,w=0,_=0,B={s:{r:2e6,c:2e6},e:{r:0,c:0}},k={},I={},E="",N=0,j=[],R={},D={},O=0,L=[],M=[],J={},V=[],K,z=!1,G=[],Y=[],ee={},P=0,Q=0,X={Sheets:[],WBProps:{date1904:!1}},te={};t2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ae="";o=t2.exec(n);)switch(o[3]=(ae=o[3]).toLowerCase()){case"data":if(ae=="data"){if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?DKe(n.slice(y,o.index),E,b,c[c.length-1][0]=="comment"?J:g,{c:w,r:_},k,V[w],x,G,r):(E="",b=xd(o[0]),y=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(M.length>0&&(g.c=M),(!r.sheetRows||r.sheetRows>_)&&g.v!==void 0&&(r.dense?(h[_]||(h[_]=[]),h[_][w]=g):h[os(w)+qs(_)]=g),g.HRef&&(g.l={Target:Un(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(P=w+(parseInt(g.MergeAcross,10)|0),Q=_+(parseInt(g.MergeDown,10)|0),j.push({s:{c:w,r:_},e:{c:P,r:Q}})),!r.sheetStubs)g.MergeAcross?w=P+1:++w;else if(g.MergeAcross||g.MergeDown){for(var se=w;se<=P;++se)for(var oe=_;oe<=Q;++oe)(se>w||oe>_)&&(r.dense?(h[oe]||(h[oe]=[]),h[oe][se]={t:"z"}):h[os(se)+qs(oe)]={t:"z"});w=P+1}else++w;else g=jKe(o[0]),g.Index&&(w=+g.Index-1),w<B.s.c&&(B.s.c=w),w>B.e.c&&(B.e.c=w),o[0].slice(-2)==="/>"&&++w,M=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(_<B.s.r&&(B.s.r=_),_>B.e.r&&(B.e.r=_),o[0].slice(-2)==="/>"&&(x=xd(o[0]),x.Index&&(_=+x.Index-1)),w=0,++_):(x=xd(o[0]),x.Index&&(_=+x.Index-1),ee={},(x.AutoFitHeight=="0"||x.Height)&&(ee.hpx=parseInt(x.Height,10),ee.hpt=i2(ee.hpx),Y[_]=ee),x.Hidden=="1"&&(ee.hidden=!0,Y[_]=ee));break;case"worksheet":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));f.push(p),B.s.r<=B.e.r&&B.s.c<=B.e.c&&(h["!ref"]=an(B),r.sheetRows&&r.sheetRows<=B.e.r&&(h["!fullref"]=h["!ref"],B.e.r=r.sheetRows-1,h["!ref"]=an(B))),j.length&&(h["!merges"]=j),V.length>0&&(h["!cols"]=V),Y.length>0&&(h["!rows"]=Y),d[p]=h}else B={s:{r:2e6,c:2e6},e:{r:0,c:0}},_=w=0,c.push([o[3],!1]),u=xd(o[0]),p=Un(u.Name),h=r.dense?[]:{},j=[],G=[],Y=[],te={name:p,Hidden:0},X.Sheets.push(te);break;case"table":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),V=[],z=!1}break;case"style":o[1]==="/"?OKe(k,I,r):I=xd(o[0]);break;case"numberformat":I.nf=Un(xd(o[0]).Format||"General"),Aw[I.nf]&&(I.nf=Aw[I.nf]);for(var ce=0;ce!=392&&Lr[ce]!=I.nf;++ce);if(ce==392){for(ce=57;ce!=392;++ce)if(Lr[ce]==null){lh(I.nf,ce);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(K=xd(o[0]),K.Hidden&&(K.hidden=!0,delete K.Hidden),K.Width&&(K.wpx=parseInt(K.Width,10)),!z&&K.wpx>10){z=!0,Xo=Coe;for(var me=0;me<V.length;++me)V[me]&&_m(V[me])}z&&_m(K),V[K.Index-1||V.length]=K;for(var ke=0;ke<+K.Span;++ke)V[V.length]=Ha(K);break;case"namedrange":if(o[1]==="/")break;X.Names||(X.Names=[]);var ne=Gr(o[0]),_e={Name:ne.Name,Ref:Tv(ne.RefersTo.slice(1),{r:0,c:0})};X.Sheets.length>0&&(_e.Sheet=X.Sheets.length-1),X.Names.push(_e);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?E+=n.slice(N,o.index):N=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;I.Interior=xd(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?i7e(R,ae,n.slice(O,o.index)):O=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));PKe(J),M.push(J)}else c.push([o[3],!1]),u=xd(o[0]),J={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var De=xd(o[0]);h["!autofilter"]={ref:Tv(De.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return JK(n,r);var Ne=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Ne=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Ne=!1}break;case"excelworkbook":switch(o[3]){case"date1904":X.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Ne=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Ne=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(O,o.index)){case"SheetHidden":te.Hidden=1;break;case"SheetVeryHidden":te.Hidden=2;break}else O=o.index+o[0].length;break;case"header":h["!margins"]||Jp(h["!margins"]={},"xlml"),isNaN(+Gr(o[0]).Margin)||(h["!margins"].header=+Gr(o[0]).Margin);break;case"footer":h["!margins"]||Jp(h["!margins"]={},"xlml"),isNaN(+Gr(o[0]).Margin)||(h["!margins"].footer=+Gr(o[0]).Margin);break;case"pagemargins":var fe=Gr(o[0]);h["!margins"]||Jp(h["!margins"]={},"xlml"),isNaN(+fe.Top)||(h["!margins"].top=+fe.Top),isNaN(+fe.Left)||(h["!margins"].left=+fe.Left),isNaN(+fe.Right)||(h["!margins"].right=+fe.Right),isNaN(+fe.Bottom)||(h["!margins"].bottom=+fe.Bottom);break;case"displayrighttoleft":X.Views||(X.Views=[]),X.Views[0]||(X.Views[0]={}),X.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Ne=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Ne=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Ne=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Ne=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Ne=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Ne=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Ne=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Ne=!1}break;case"smarttags":break;default:Ne=!1;break}if(Ne||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?IKe(D,ae,L,n.slice(O,o.index)):(L=o,O=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var Ie={};return!r.bookSheets&&!r.bookProps&&(Ie.Sheets=d),Ie.SheetNames=f,Ie.Workbook=X,Ie.SSF=Ha(Lr),Ie.Props=R,Ie.Custprops=D,Ie}function sO(e,t){switch(CL(t=t||{}),t.type||"base64"){case"base64":return tI(zc(e),t);case"binary":case"buffer":case"file":return tI(e,t);case"array":return tI(Hm(e),t)}}function RKe(e,t){var r=[];return e.Props&&r.push(o7e(e.Props,t)),e.Custprops&&r.push(l7e(e.Props,e.Custprops)),r.join("")}function LKe(){return""}function MKe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var s=[];s.push(Kt("NumberFormat",null,{"ss:Format":pa(Lr[n.numFmtId])}));var i={"ss:ID":"s"+(21+a)};r.push(Kt("Style",s.join(""),i))}),Kt("Styles",r.join(""))}function Yoe(e){return Kt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+xL(e.Ref,{r:0,c:0})})}function UKe(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(Yoe(a)))}return Kt("Names",r.join(""))}function QKe(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var o=a[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(Yoe(o)))}return s.join("")}function HKe(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(Kt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(Kt("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(Kt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Kt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(xo("ProtectContents","True")),e["!protect"].objects&&a.push(xo("ProtectObjects","True")),e["!protect"].scenarios&&a.push(xo("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(xo("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(xo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){e["!protect"][i[0]]&&a.push("<"+i[1]+"/>")})),a.length==0?"":Kt("WorksheetOptions",a.join(""),{xmlns:Bc.x})}function VKe(e){return e.map(function(t){var r=uUe(t.t||""),n=Kt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Kt("Comment",n,{"ss:Author":t.a})}).join("")}function zKe(e,t,r,n,a,s,i){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+pa(xL(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var c=ls(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==i.r?"":"["+(c.r-i.r)+"]")+"C"+(c.c==i.c?"":"["+(c.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=pa(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=pa(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=Lh[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Lr[14]);break;case"s":f="String",h=cUe(e.v||"");break}var p=zm(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=i.c+1;var g=e.v!=null?h:"",x=e.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(e.c||[]).length>0&&(x+=VKe(e.c)),Kt("Cell",x,o)}function $Ke(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=m1(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function GKe(e,t,r,n){if(!e["!ref"])return"";var a=Qn(e["!ref"]),s=e["!merges"]||[],i=0,o=[];e["!cols"]&&e["!cols"].forEach(function(b,y){_m(b);var w=!!b.width,_=wk(y,b),B={"ss:Index":y+1};w&&(B["ss:Width"]=a2(_.width)),b.hidden&&(B["ss:Hidden"]="1"),o.push(Kt("Column",null,B))});for(var c=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[$Ke(u,(e["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var h=!1;for(i=0;i!=s.length;++i)if(!(s[i].s.c>f)&&!(s[i].s.r>u)&&!(s[i].e.c<f)&&!(s[i].e.r<u)){(s[i].s.c!=f||s[i].s.r!=u)&&(h=!0);break}if(!h){var p={r:u,c:f},g=Hr(p),x=c?(e[u]||[])[f]:e[g];d.push(zKe(x,g,e,t,r,n,p))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function KKe(e,t,r){var n=[],a=r.SheetNames[e],s=r.Sheets[a],i=s?QKe(s,t,e,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?GKe(s,t,e,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(HKe(s,t,e,r)),n.join("")}function qKe(e,t){t||(t={}),e.SSF||(e.SSF=Ha(Lr)),e.SSF&&(rb(),mk(e.SSF),t.revssf=gk(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],zm(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(RKe(e,t)),r.push(LKe()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Kt("Worksheet",KKe(n,t,e),{"ss:Name":pa(e.SheetNames[n])}));return r[2]=MKe(e,t),r[3]=UKe(e),Ys+Kt("Workbook",r.join(""),{xmlns:Bc.ss,"xmlns:o":Bc.o,"xmlns:x":Bc.x,"xmlns:ss":Bc.ss,"xmlns:dt":Bc.dt,"xmlns:html":Bc.html})}function WKe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=UUe(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=QUe(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var XKe=[60,1084,2066,2165,2175];function YKe(e,t,r,n,a){var s=n,i=[],o=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(o)}i.push(o),r.l+=s;for(var c=th(r,r.l),u=iO[c],d=0;u!=null&&XKe.indexOf(c)>-1;)s=th(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),o=r.slice(d,r.l+4+s),i.push(o),r.l+=4+s,u=iO[c=th(r,r.l)];var f=Ki(i);go(f,0);var h=0;f.lens=[];for(var p=0;p<i.length;++p)f.lens.push(h),h+=i[p].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,a)}function CA(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Lr[n])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Lh[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Jw(e.v):e.w=gg(e.v):e.w=Hu(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&n&&e.t=="n"&&tb(Lr[n]||String(n))){var a=Lp(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function n_(e,t,r){return{v:e,ixfe:t,t:r}}function JKe(e,t){var r={opts:{}},n={},a=t.dense?[]:{},s={},i={},o=null,c=[],u="",d={},f,h="",p,g,x,b,y={},w=[],_,B,k=[],I=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},N={},j=function(Dt){return Dt<8?Wp[Dt]:Dt<64&&I[Dt-8]||Wp[Dt]},R=function(Dt,gt,fr){var zt=gt.XF.data;if(!(!zt||!zt.patternType||!fr||!fr.cellStyles)){gt.s={},gt.s.patternType=zt.patternType;var Mr;(Mr=n2(j(zt.icvFore)))&&(gt.s.fgColor={rgb:Mr}),(Mr=n2(j(zt.icvBack)))&&(gt.s.bgColor={rgb:Mr})}},D=function(Dt,gt,fr){if(!(ee>1)&&!(fr.sheetRows&&Dt.r>=fr.sheetRows)){if(fr.cellStyles&&gt.XF&&gt.XF.data&&R(Dt,gt,fr),delete gt.ixfe,delete gt.XF,f=Dt,h=Hr(Dt),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),Dt.r<i.s.r&&(i.s.r=Dt.r),Dt.c<i.s.c&&(i.s.c=Dt.c),Dt.r+1>i.e.r&&(i.e.r=Dt.r+1),Dt.c+1>i.e.c&&(i.e.c=Dt.c+1),fr.cellFormula&&gt.f){for(var zt=0;zt<w.length;++zt)if(!(w[zt][0].s.c>Dt.c||w[zt][0].s.r>Dt.r)&&!(w[zt][0].e.c<Dt.c||w[zt][0].e.r<Dt.r)){gt.F=an(w[zt][0]),(w[zt][0].s.c!=Dt.c||w[zt][0].s.r!=Dt.r)&&delete gt.f,gt.f&&(gt.f=""+$o(w[zt][1],i,Dt,G,O));break}}fr.dense?(a[Dt.r]||(a[Dt.r]=[]),a[Dt.r][Dt.c]=gt):a[h]=gt}},O={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:w,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(O.password=t.password);var L,M=[],J=[],V=[],K=[],z=!1,G=[];G.SheetNames=O.snames,G.sharedf=O.sharedf,G.arrayf=O.arrayf,G.names=[],G.XTI=[];var Y=0,ee=0,P=0,Q=[],X=[],te;O.codepage=1200,Nd(1200);for(var ae=!1;e.l<e.length-1;){var se=e.l,oe=e.read_shift(2);if(oe===0&&Y===10)break;var ce=e.l===e.length?0:e.read_shift(2),me=iO[oe];if(me&&me.f){if(t.bookSheets&&Y===133&&oe!==133)break;if(Y=oe,me.r===2||me.r==12){var ke=e.read_shift(2);if(ce-=2,!O.enc&&ke!==oe&&((ke&255)<<8|ke>>8)!==oe)throw new Error("rt mismatch: "+ke+"!="+oe);me.r==12&&(e.l+=10,ce-=10)}var ne={};if(oe===10?ne=me.f(e,ce,O):ne=YKe(oe,me,e,ce,O),ee==0&&[9,521,1033,2057].indexOf(Y)===-1)continue;switch(oe){case 34:r.opts.Date1904=E.WBProps.date1904=ne;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(O.enc||(e.l=0),O.enc=ne,!t.password)throw new Error("File is password-protected");if(ne.valid==null)throw new Error("Encryption scheme unsupported");if(!ne.valid)throw new Error("Password is incorrect");break;case 92:O.lastuser=ne;break;case 66:var _e=Number(ne);switch(_e){case 21010:_e=1200;break;case 32768:_e=1e4;break;case 32769:_e=1252;break}Nd(O.codepage=_e),ae=!0;break;case 317:O.rrtabid=ne;break;case 25:O.winlocked=ne;break;case 439:r.opts.RefreshAll=ne;break;case 12:r.opts.CalcCount=ne;break;case 16:r.opts.CalcDelta=ne;break;case 17:r.opts.CalcIter=ne;break;case 13:r.opts.CalcMode=ne;break;case 14:r.opts.CalcPrecision=ne;break;case 95:r.opts.CalcSaveRecalc=ne;break;case 15:O.CalcRefMode=ne;break;case 2211:r.opts.FullCalc=ne;break;case 129:ne.fDialog&&(a["!type"]="dialog"),ne.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),ne.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:k.push(ne);break;case 430:G.push([ne]),G[G.length-1].XTI=[];break;case 35:case 547:G[G.length-1].push(ne);break;case 24:case 536:te={Name:ne.Name,Ref:$o(ne.rgce,i,null,G,O)},ne.itab>0&&(te.Sheet=ne.itab-1),G.names.push(te),G[0]||(G[0]=[],G[0].XTI=[]),G[G.length-1].push(ne),ne.Name=="_xlnm._FilterDatabase"&&ne.itab>0&&ne.rgce&&ne.rgce[0]&&ne.rgce[0][0]&&ne.rgce[0][0][0]=="PtgArea3d"&&(X[ne.itab-1]={ref:an(ne.rgce[0][0][1][2])});break;case 22:O.ExternCount=ne;break;case 23:G.length==0&&(G[0]=[],G[0].XTI=[]),G[G.length-1].XTI=G[G.length-1].XTI.concat(ne),G.XTI=G.XTI.concat(ne);break;case 2196:if(O.biff<8)break;te!=null&&(te.Comment=ne[1]);break;case 18:a["!protect"]=ne;break;case 19:ne!==0&&O.WTF&&console.error("Password verifier: "+ne);break;case 133:s[ne.pos]=ne,O.snames.push(ne.name);break;case 10:{if(--ee)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,a["!ref"]=an(i),t.sheetRows&&t.sheetRows<=i.e.r){var De=i.e.r;i.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=an(i),i.e.r=De}i.e.r++,i.e.c++}M.length>0&&(a["!merges"]=M),J.length>0&&(a["!objects"]=J),V.length>0&&(a["!cols"]=V),K.length>0&&(a["!rows"]=K),E.Sheets.push(N)}u===""?d=a:n[u]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(O.biff===8&&(O.biff={9:2,521:3,1033:4}[oe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ne.BIFFVer]||8),O.biffguess=ne.BIFFVer==0,ne.BIFFVer==0&&ne.dt==4096&&(O.biff=5,ae=!0,Nd(O.codepage=28591)),O.biff==8&&ne.BIFFVer==0&&ne.dt==16&&(O.biff=2),ee++)break;if(a=t.dense?[]:{},O.biff<8&&!ae&&(ae=!0,Nd(O.codepage=t.codepage||1252)),O.biff<5||ne.BIFFVer==0&&ne.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var Ne={pos:e.l-ce,name:u};s[Ne.pos]=Ne,O.snames.push(u)}else u=(s[se]||{name:""}).name;ne.dt==32&&(a["!type"]="chart"),ne.dt==64&&(a["!type"]="macro"),M=[],J=[],O.arrayf=w=[],V=[],K=[],z=!1,N={Hidden:(s[se]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[ne.r]||[])[ne.c]:a[Hr({c:ne.c,r:ne.r})])&&++ne.c,_={ixfe:ne.ixfe,XF:k[ne.ixfe]||{},v:ne.val,t:"n"},P>0&&(_.z=Q[_.ixfe>>8&63]),CA(_,t,r.opts.Date1904),D({c:ne.c,r:ne.r},_,t);break;case 5:case 517:_={ixfe:ne.ixfe,XF:k[ne.ixfe],v:ne.val,t:ne.t},P>0&&(_.z=Q[_.ixfe>>8&63]),CA(_,t,r.opts.Date1904),D({c:ne.c,r:ne.r},_,t);break;case 638:_={ixfe:ne.ixfe,XF:k[ne.ixfe],v:ne.rknum,t:"n"},P>0&&(_.z=Q[_.ixfe>>8&63]),CA(_,t,r.opts.Date1904),D({c:ne.c,r:ne.r},_,t);break;case 189:for(var fe=ne.c;fe<=ne.C;++fe){var Ie=ne.rkrec[fe-ne.c][0];_={ixfe:Ie,XF:k[Ie],v:ne.rkrec[fe-ne.c][1],t:"n"},P>0&&(_.z=Q[_.ixfe>>8&63]),CA(_,t,r.opts.Date1904),D({c:fe,r:ne.r},_,t)}break;case 6:case 518:case 1030:{if(ne.val=="String"){o=ne;break}if(_=n_(ne.val,ne.cell.ixfe,ne.tt),_.XF=k[_.ixfe],t.cellFormula){var Me=ne.formula;if(Me&&Me[0]&&Me[0][0]&&Me[0][0][0]=="PtgExp"){var Xe=Me[0][0][1][0],ye=Me[0][0][1][1],Fe=Hr({r:Xe,c:ye});y[Fe]?_.f=""+$o(ne.formula,i,ne.cell,G,O):_.F=((t.dense?(a[Xe]||[])[ye]:a[Fe])||{}).F}else _.f=""+$o(ne.formula,i,ne.cell,G,O)}P>0&&(_.z=Q[_.ixfe>>8&63]),CA(_,t,r.opts.Date1904),D(ne.cell,_,t),o=ne}break;case 7:case 519:if(o)o.val=ne,_=n_(ne,o.cell.ixfe,"s"),_.XF=k[_.ixfe],t.cellFormula&&(_.f=""+$o(o.formula,i,o.cell,G,O)),P>0&&(_.z=Q[_.ixfe>>8&63]),CA(_,t,r.opts.Date1904),D(o.cell,_,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{w.push(ne);var Re=Hr(ne[0].s);if(p=t.dense?(a[ne[0].s.r]||[])[ne[0].s.c]:a[Re],t.cellFormula&&p){if(!o||!Re||!p)break;p.f=""+$o(ne[1],i,ne[0],G,O),p.F=an(ne[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!o)break;y[Hr(o.cell)]=ne[0],p=t.dense?(a[o.cell.r]||[])[o.cell.c]:a[Hr(o.cell)],(p||{}).f=""+$o(ne[0],i,f,G,O)}}break;case 253:_=n_(c[ne.isst].t,ne.ixfe,"s"),c[ne.isst].h&&(_.h=c[ne.isst].h),_.XF=k[_.ixfe],P>0&&(_.z=Q[_.ixfe>>8&63]),CA(_,t,r.opts.Date1904),D({c:ne.c,r:ne.r},_,t);break;case 513:t.sheetStubs&&(_={ixfe:ne.ixfe,XF:k[ne.ixfe],t:"z"},P>0&&(_.z=Q[_.ixfe>>8&63]),CA(_,t,r.opts.Date1904),D({c:ne.c,r:ne.r},_,t));break;case 190:if(t.sheetStubs)for(var Ge=ne.c;Ge<=ne.C;++Ge){var Ke=ne.ixfe[Ge-ne.c];_={ixfe:Ke,XF:k[Ke],t:"z"},P>0&&(_.z=Q[_.ixfe>>8&63]),CA(_,t,r.opts.Date1904),D({c:Ge,r:ne.r},_,t)}break;case 214:case 516:case 4:_=n_(ne.val,ne.ixfe,"s"),_.XF=k[_.ixfe],P>0&&(_.z=Q[_.ixfe>>8&63]),CA(_,t,r.opts.Date1904),D({c:ne.c,r:ne.r},_,t);break;case 0:case 512:ee===1&&(i=ne);break;case 252:c=ne;break;case 1054:if(O.biff==4){Q[P++]=ne[1];for(var Ze=0;Ze<P+163&&Lr[Ze]!=ne[1];++Ze);Ze>=163&&lh(ne[1],P+163)}else lh(ne[1],ne[0]);break;case 30:{Q[P++]=ne;for(var ft=0;ft<P+163&&Lr[ft]!=ne;++ft);ft>=163&&lh(ne,P+163)}break;case 229:M=M.concat(ne);break;case 93:J[ne.cmo[0]]=O.lastobj=ne;break;case 438:O.lastobj.TxO=ne;break;case 127:O.lastobj.ImData=ne;break;case 440:for(b=ne[0].s.r;b<=ne[0].e.r;++b)for(x=ne[0].s.c;x<=ne[0].e.c;++x)p=t.dense?(a[b]||[])[x]:a[Hr({c:x,r:b})],p&&(p.l=ne[1]);break;case 2048:for(b=ne[0].s.r;b<=ne[0].e.r;++b)for(x=ne[0].s.c;x<=ne[0].e.c;++x)p=t.dense?(a[b]||[])[x]:a[Hr({c:x,r:b})],p&&p.l&&(p.l.Tooltip=ne[1]);break;case 28:{if(O.biff<=5&&O.biff>=2)break;p=t.dense?(a[ne[0].r]||[])[ne[0].c]:a[Hr(ne[0])];var Nt=J[ne[2]];p||(t.dense?(a[ne[0].r]||(a[ne[0].r]=[]),p=a[ne[0].r][ne[0].c]={t:"z"}):p=a[Hr(ne[0])]={t:"z"},i.e.r=Math.max(i.e.r,ne[0].r),i.s.r=Math.min(i.s.r,ne[0].r),i.e.c=Math.max(i.e.c,ne[0].c),i.s.c=Math.min(i.s.c,ne[0].c)),p.c||(p.c=[]),g={a:ne[1],t:Nt.TxO.t},p.c.push(g)}break;case 2173:MHe(k[ne.ixfe],ne.ext);break;case 125:{if(!O.cellStyles)break;for(;ne.e>=ne.s;)V[ne.e--]={width:ne.w/256,level:ne.level||0,hidden:!!(ne.flags&1)},z||(z=!0,mL(ne.w/256)),_m(V[ne.e+1])}break;case 520:{var Tt={};ne.level!=null&&(K[ne.r]=Tt,Tt.level=ne.level),ne.hidden&&(K[ne.r]=Tt,Tt.hidden=!0),ne.hpt&&(K[ne.r]=Tt,Tt.hpt=ne.hpt,Tt.hpx=m1(ne.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||Jp(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[oe]]=ne;break;case 161:a["!margins"]||Jp(a["!margins"]={}),a["!margins"].header=ne.header,a["!margins"].footer=ne.footer;break;case 574:ne.RTL&&(E.Views[0].RTL=!0);break;case 146:I=ne;break;case 2198:L=ne;break;case 140:B=ne;break;case 442:u?N.CodeName=ne||N.name:E.WBProps.CodeName=ne||"ThisWorkbook";break}}else me||console.error("Missing Info for XLS Record 0x"+oe.toString(16)),e.l+=ce}return r.SheetNames=js(s).sort(function(St,Dt){return Number(St)-Number(Dt)}).map(function(St){return s[St].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&X.forEach(function(St,Dt){r.Sheets[r.SheetNames[Dt]]["!autofilter"]=St}),r.Strings=c,r.SSF=Ha(Lr),O.enc&&(r.Encryption=O.enc),L&&(r.Themes=L),r.Metadata={},B!==void 0&&(r.Metadata.Country=B),G.names.length>0&&(E.Names=G.names),r.Workbook=E,r}var fw={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function ZKe(e,t,r){var n=Nr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=kK(n,ZF,fw.DSI);for(var s in a)t[s]=a[s]}catch(u){if(r.WTF)throw u}var i=Nr.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var o=kK(i,eO,fw.SI);for(var c in o)t[c]==null&&(t[c]=o[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(Xie(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function eqe(e,t){var r=[],n=[],a=[],s=0,i,o=aK(ZF,"n"),c=aK(eO,"n");if(e.Props)for(i=js(e.Props),s=0;s<i.length;++s)(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],e.Props[i[s]]]);if(e.Custprops)for(i=js(e.Custprops),s=0;s<i.length;++s)Object.prototype.hasOwnProperty.call(e.Props||{},i[s])||(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],e.Custprops[i[s]]]);var u=[];for(s=0;s<a.length;++s)noe.indexOf(a[s][0])>-1||Wie.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&Nr.utils.cfb_add(t,"/SummaryInformation",BK(n,fw.SI,c,eO)),(r.length||u.length)&&Nr.utils.cfb_add(t,"/DocumentSummaryInformation",BK(r,fw.DSI,o,ZF,u.length?u:null,fw.UDI))}function Joe(e,t){t||(t={}),CL(t),$8(),t.codepage&&z8(t.codepage);var r,n;if(e.FullPaths){if(Nr.find(e,"/encryption"))throw new Error("File is password-protected");r=Nr.find(e,"!CompObj"),n=Nr.find(e,"/Workbook")||Nr.find(e,"/Book")}else{switch(t.type){case"base64":e=Oc(zc(e));break;case"binary":e=Oc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}go(e,0),n={content:e}}var a,s;if(r&&WKe(r),t.bookProps&&!t.bookSheets)a={};else{var i=pn?"buffer":"array";if(n&&n.content)a=JKe(n.content,t);else if((s=Nr.find(e,"PerfectOffice_MAIN"))&&s.content)a=Yp.to_workbook(s.content,(t.type=i,t));else if((s=Nr.find(e,"NativeContent_MAIN"))&&s.content)a=Yp.to_workbook(s.content,(t.type=i,t));else throw(s=Nr.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Nr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=fVe(e))}var o={};return e.FullPaths&&ZKe(e,o,t),a.Props=a.Custprops=o,t.bookFiles&&(a.cfb=e),a}function tqe(e,t){var r=t||{},n=Nr.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Nr.utils.cfb_add(n,a,Zoe(e,r)),r.biff==8&&(e.Props||e.Custprops)&&eqe(e,n),r.biff==8&&e.vbaraw&&hVe(n,Nr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var o2={0:{f:_$e},1:{f:F$e},2:{f:J$e},3:{f:Q$e},4:{f:R$e},5:{f:W$e},6:{f:nGe},7:{f:$$e},8:{f:uGe},9:{f:cGe},10:{f:oGe},11:{f:lGe},12:{f:D$e},13:{f:eGe},14:{f:V$e},15:{f:M$e},16:{f:zoe},17:{f:sGe},18:{f:K$e},19:{f:sL},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:sKe},40:{},42:{},43:{f:nHe},44:{f:tHe},45:{f:iHe},46:{f:lHe},47:{f:oHe},48:{},49:{f:kUe},50:{},51:{f:HHe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:hoe},62:{f:rGe},63:{f:YHe},64:{f:NGe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:al,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:wGe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:T$e},148:{f:k$e,p:16},151:{f:pGe},152:{},153:{f:rKe},154:{},155:{},156:{f:eKe},157:{},158:{},159:{T:1,f:xQe},160:{T:-1},161:{T:1,f:Hg},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:dGe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:UHe},336:{T:-1},337:{f:$He,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:JF},357:{},358:{},359:{},360:{T:1},361:{},362:{f:foe},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:gGe},427:{f:xGe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:bGe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:j$e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:hGe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:JF},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:lVe},633:{T:1},634:{T:-1},635:{T:1,f:iVe},636:{T:-1},637:{f:IUe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:VGe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:SGe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},iO={6:{f:Z3},10:{f:N0},12:{f:li},13:{f:li},14:{f:Ms},15:{f:Ms},16:{f:Zo},17:{f:Ms},18:{f:Ms},19:{f:li},20:{f:DK},21:{f:DK},23:{f:foe},24:{f:RK},25:{f:Ms},26:{},27:{},28:{f:S9e},29:{},34:{f:Ms},35:{f:PK},38:{f:Zo},39:{f:Zo},40:{f:Zo},41:{f:Zo},42:{f:Ms},43:{f:Ms},47:{f:MQe},49:{f:e9e},51:{f:li},60:{},61:{f:W7e},64:{f:Ms},65:{f:Z7e},66:{f:li},77:{},80:{},81:{},82:{},85:{f:li},89:{},90:{},91:{},92:{f:L7e},93:{f:j9e},94:{},95:{f:Ms},96:{},97:{},99:{f:Ms},125:{f:hoe},128:{f:m9e},129:{f:U7e},130:{f:li},131:{f:Ms},132:{f:Ms},133:{f:Q7e},134:{},140:{f:L9e},141:{f:li},144:{},146:{f:Q9e},151:{},152:{},153:{},154:{},155:{},156:{f:li},157:{},158:{},160:{f:q9e},161:{f:z9e},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:d9e},190:{f:A9e},193:{f:N0},197:{},198:{},199:{},200:{},201:{},202:{f:Ms},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:li},220:{},221:{f:Ms},222:{},224:{f:h9e},225:{f:R7e},226:{f:N0},227:{},229:{f:k9e},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:V7e},253:{f:r9e},255:{f:$7e},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:aoe},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Ms},353:{f:N0},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:b9e},431:{f:Ms},432:{},433:{},434:{},437:{},438:{f:F9e},439:{f:Ms},440:{f:O9e},441:{},442:{f:nE},443:{},444:{f:li},445:{},446:{},448:{f:N0},449:{f:q7e,r:2},450:{f:N0},512:{f:IK},513:{f:K9e},515:{f:x9e},516:{f:a9e},517:{f:OK},519:{f:W9e},520:{f:G7e},523:{},545:{f:LK},549:{f:TK},566:{},574:{f:Y7e},638:{f:u9e},659:{},1048:{},1054:{f:i9e},1084:{},1212:{f:C9e},2048:{f:P9e},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:e_},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:N0},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:H9e,r:12},2173:{f:LHe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Ms,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:E9e,r:12},2197:{},2198:{f:IHe,r:12},2199:{},2200:{},2201:{},2202:{f:_9e,r:12},2203:{f:N0},2204:{},2205:{},2206:{},2207:{},2211:{f:K7e},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:li},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:$9e},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:U9e},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:IK},1:{},2:{f:eQe},3:{f:J9e},4:{f:Y9e},5:{f:OK},7:{f:rQe},8:{},9:{f:e_},11:{},22:{f:li},30:{f:l9e},31:{},32:{},33:{f:LK},36:{},37:{f:TK},50:{f:nQe},62:{},52:{},67:{},68:{f:li},69:{},86:{},126:{},127:{f:X9e},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:aQe},223:{},234:{},354:{},421:{},518:{f:Z3},521:{f:e_},536:{f:RK},547:{f:PK},561:{},579:{},1030:{f:Z3},1033:{f:e_},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function qt(e,t,r,n){var a=t;if(!isNaN(a)){var s=n||(r||[]).length||0,i=e.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&rL(r)&&e.push(r)}}function rqe(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return qt(e,t,r,a);var s=t;if(!isNaN(s)){for(var i=r.parts||[],o=0,c=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,s),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function oE(e,t,r){return e||(e=Et(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function nqe(e,t,r,n){var a=Et(9);return oE(a,e,t),soe(r,n||"b",a),a}function aqe(e,t,r){var n=Et(8+2*r.length);return oE(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function sqe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?Si(Qa(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?qt(e,2,tQe(r,n,a)):qt(e,3,Z9e(r,n,a));return;case"b":case"e":qt(e,5,nqe(r,n,t.v,t.t));return;case"s":case"str":qt(e,4,aqe(r,n,(t.v||"").slice(0,255)));return}qt(e,1,oE(null,r,n))}function iqe(e,t,r,n){var a=Array.isArray(t),s=Qn(t["!ref"]||"A1"),i,o="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),i=an(s)}for(var u=s.s.r;u<=s.e.r;++u){o=qs(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=os(d)),i=c[d]+o;var f=a?(t[u]||[])[d]:t[i];f&&sqe(e,f,u,d)}}}function oqe(e,t){for(var r=t||{},n=ec(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return qt(n,r.biff==4?1033:r.biff==3?521:9,AL(e,16,r)),iqe(n,e.Sheets[e.SheetNames[a]],a,r),qt(n,10),n.end()}function lqe(e,t,r){qt(e,49,t9e({sz:12,name:"Arial"},r))}function cqe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&qt(e,1054,o9e(a,t[a],r))})}function uqe(e,t){var r=Et(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),qt(e,2151,r),r=Et(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),uoe(Qn(t["!ref"]||"A1"),r),r.write_shift(4,4),qt(e,2152,r)}function dqe(e,t){for(var r=0;r<16;++r)qt(e,224,FK({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){qt(e,224,FK(n,0,t))})}function Aqe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];qt(e,440,D9e(n)),n[1].Tooltip&&qt(e,2048,R9e(n))}delete t["!links"]}function fqe(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&qt(e,125,V9e(wk(a,n),a))})}}function hqe(e,t,r,n,a){var s=16+zm(a.cellXfs,t,a);if(t.v==null&&!t.bf){qt(e,513,yg(r,n,s));return}if(t.bf)qt(e,6,Uze(t,r,n,a,s));else switch(t.t){case"d":case"n":var i=t.t=="d"?Si(Qa(t.v)):t.v;qt(e,515,v9e(r,n,i,s));break;case"b":case"e":qt(e,517,g9e(r,n,t.v,s,a,t.t));break;case"s":case"str":if(a.bookSST){var o=bL(a.Strings,t.v,a.revStrings);qt(e,253,n9e(r,n,o,s))}else qt(e,516,s9e(r,n,(t.v||"").slice(0,255),s,a));break;default:qt(e,513,yg(r,n,s))}}function mqe(e,t,r){var n=ec(),a=r.SheetNames[e],s=r.Sheets[a]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[e]||{},c=Array.isArray(s),u=t.biff==8,d,f="",h=[],p=Qn(s["!ref"]||"A1"),g=u?65536:16384;if(p.e.c>255||p.e.r>=g){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,g-1)}qt(n,2057,AL(r,16,t)),qt(n,13,Su(1)),qt(n,12,Su(100)),qt(n,15,pl(!0)),qt(n,17,pl(!1)),qt(n,16,vg(.001)),qt(n,95,pl(!0)),qt(n,42,pl(!1)),qt(n,43,pl(!1)),qt(n,130,Su(1)),qt(n,128,p9e()),qt(n,131,pl(!1)),qt(n,132,pl(!1)),u&&fqe(n,s["!cols"]),qt(n,512,c9e(p,t)),u&&(s["!links"]=[]);for(var x=p.s.r;x<=p.e.r;++x){f=qs(x);for(var b=p.s.c;b<=p.e.c;++b){x===p.s.r&&(h[b]=os(b)),d=h[b]+f;var y=c?(s[x]||[])[b]:s[d];y&&(hqe(n,y,x,b,t),u&&y.l&&s["!links"].push([d,y.l]))}}var w=o.CodeName||o.name||a;return u&&qt(n,574,J7e((i.Views||[])[0])),u&&(s["!merges"]||[]).length&&qt(n,229,B9e(s["!merges"])),u&&Aqe(n,s),qt(n,442,ioe(w)),u&&uqe(n,s),qt(n,10),n.end()}function pqe(e,t,r){var n=ec(),a=(e||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},o=r.biff==8,c=r.biff==5;if(qt(n,2057,AL(e,5,r)),r.bookType=="xla"&&qt(n,135),qt(n,225,o?Su(1200):null),qt(n,193,g7e(2)),c&&qt(n,191),c&&qt(n,192),qt(n,226),qt(n,92,M7e("SheetJS",r)),qt(n,66,Su(o?1200:1252)),o&&qt(n,353,Su(0)),o&&qt(n,448),qt(n,317,G9e(e.SheetNames.length)),o&&e.vbaraw&&qt(n,211),o&&e.vbaraw){var u=i.CodeName||"ThisWorkbook";qt(n,442,ioe(u))}qt(n,156,Su(17)),qt(n,25,pl(!1)),qt(n,18,pl(!1)),qt(n,19,Su(0)),o&&qt(n,431,pl(!1)),o&&qt(n,444,Su(0)),qt(n,61,X7e()),qt(n,64,pl(!1)),qt(n,141,Su(0)),qt(n,34,pl(qGe(e)=="true")),qt(n,14,pl(!0)),o&&qt(n,439,pl(!1)),qt(n,218,Su(0)),lqe(n,e,r),cqe(n,e.SSF,r),dqe(n,r),o&&qt(n,352,pl(!1));var d=n.end(),f=ec();o&&qt(f,140,M9e()),o&&r.Strings&&rqe(f,252,z7e(r.Strings)),qt(f,10);var h=f.end(),p=ec(),g=0,x=0;for(x=0;x<e.SheetNames.length;++x)g+=(o?12:11)+(o?2:1)*e.SheetNames[x].length;var b=d.length+g+h.length;for(x=0;x<e.SheetNames.length;++x){var y=s[x]||{};qt(p,133,H7e({pos:b,hs:y.Hidden||0,dt:0,name:e.SheetNames[x]},r)),b+=t[x].length}var w=p.end();if(g!=w.length)throw new Error("BS8 "+g+" != "+w.length);var _=[];return d.length&&_.push(d),w.length&&_.push(w),h.length&&_.push(h),Ki(_)}function gqe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Ha(Lr)),e&&e.SSF&&(rb(),mk(e.SSF),r.revssf=gk(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,_L(r),r.cellXfs=[],zm(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=mqe(a,r,e);return n.unshift(pqe(e,n,r)),Ki(n)}function Zoe(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=rc(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=t||{};switch(s.biff||2){case 8:case 5:return gqe(e,t);case 4:case 3:case 2:return oqe(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function qK(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),i=a.index,o=s&&s.index||e.length,c=tUe(e.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(i=0;i<c.length;++i){var x=c[i].trim(),b=x.slice(0,3).toLowerCase();if(b=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(b!="<td"&&b!="<th")){var y=x.split(/<\/t[dh]>/i);for(o=0;o<y.length;++o){var w=y[o].trim();if(w.match(/<t[dh]/i)){for(var _=w,B=0;_.charAt(0)=="<"&&(B=_.indexOf(">"))>-1;)_=_.slice(B+1);for(var k=0;k<g.length;++k){var I=g[k];I.s.c==d&&I.s.r<u&&u<=I.e.r&&(d=I.e.c+1,k=-1)}var E=Gr(w.slice(0,w.indexOf(">")));h=E.colspan?+E.colspan:1,((f=+E.rowspan)>1||h>1)&&g.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var N=E.t||E["data-t"]||"";if(!_.length){d+=h;continue}if(_=Eie(_),p.s.r>u&&(p.s.r=u),p.e.r<u&&(p.e.r=u),p.s.c>d&&(p.s.c=d),p.e.c<d&&(p.e.c=d),!_.length){d+=h;continue}var j={t:"s",v:_};r.raw||!_.trim().length||N=="s"||(_==="TRUE"?j={t:"b",v:!0}:_==="FALSE"?j={t:"b",v:!1}:isNaN(Od(_))?isNaN(f1(_).getDate())||(j={t:"d",v:Qa(_)},r.cellDates||(j={t:"n",v:Si(j.v)}),j.z=r.dateNF||Lr[14]):j={t:"n",v:Od(_)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=j):n[Hr({r:u,c:d})]=j,d+=h}}}}return n["!ref"]=an(p),g.length&&(n["!merges"]=g),n}function xqe(e,t,r,n){for(var a=e["!merges"]||[],s=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>i)&&!(a[u].e.r<r||a[u].e.c<i)){if(a[u].s.r<r||a[u].s.c<i){o=-1;break}o=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(o<0)){var d=Hr({r,c:i}),f=n.dense?(e[r]||[])[i]:e[d],h=f&&f.v!=null&&(f.h||Z8(f.w||(_h(f),f.w)||""))||"",p={};o>1&&(p.rowspan=o),c>1&&(p.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(p["data-t"]=f&&f.t||"z",f.v!=null&&(p["data-v"]=f.v),f.z!=null&&(p["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),p.id=(n.id||"sjs")+"-"+d,s.push(Kt("td",h,p))}}var g="<tr>";return g+s.join("")+"</tr>"}var vqe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',bqe="</body></html>";function yqe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Vm(qK(r[0],t),t);var n=BL();return r.forEach(function(a,s){jL(n,qK(a,t),"Sheet"+(s+1))}),n}function wqe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function ele(e,t){var r=t||{},n=r.header!=null?r.header:vqe,a=r.footer!=null?r.footer:bqe,s=[n],i=rc(e["!ref"]);r.dense=Array.isArray(e),s.push(wqe(e,i,r));for(var o=i.s.r;o<=i.e.r;++o)s.push(xqe(e,i,o,r));return s.push("</table>"+a),s.join("")}function tle(e,t,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var i=typeof n.origin=="string"?ls(n.origin):n.origin;a=i.r,s=i.c}var o=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var d=rc(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],h=0,p=e["!rows"]||(e["!rows"]=[]),g=0,x=0,b=0,y=0,w=0,_=0;for(e["!cols"]||(e["!cols"]=[]);g<o.length&&x<c;++g){var B=o[g];if(WK(B)){if(n.display)continue;p[x]={hidden:!0}}var k=B.children;for(b=y=0;b<k.length;++b){var I=k[b];if(!(n.display&&WK(I))){var E=I.hasAttribute("data-v")?I.getAttribute("data-v"):I.hasAttribute("v")?I.getAttribute("v"):Eie(I.innerHTML),N=I.getAttribute("data-z")||I.getAttribute("z");for(h=0;h<f.length;++h){var j=f[h];j.s.c==y+s&&j.s.r<x+a&&x+a<=j.e.r&&(y=j.e.c+1-s,h=-1)}_=+I.getAttribute("colspan")||1,((w=+I.getAttribute("rowspan")||1)>1||_>1)&&f.push({s:{r:x+a,c:y+s},e:{r:x+a+(w||1)-1,c:y+s+(_||1)-1}});var R={t:"s",v:E},D=I.getAttribute("data-t")||I.getAttribute("t")||"";E!=null&&(E.length==0?R.t=D||"z":n.raw||E.trim().length==0||D=="s"||(E==="TRUE"?R={t:"b",v:!0}:E==="FALSE"?R={t:"b",v:!1}:isNaN(Od(E))?isNaN(f1(E).getDate())||(R={t:"d",v:Qa(E)},n.cellDates||(R={t:"n",v:Si(R.v)}),R.z=n.dateNF||Lr[14]):R={t:"n",v:Od(E)})),R.z===void 0&&N!=null&&(R.z=N);var O="",L=I.getElementsByTagName("A");if(L&&L.length)for(var M=0;M<L.length&&!(L[M].hasAttribute("href")&&(O=L[M].getAttribute("href"),O.charAt(0)!="#"));++M);O&&O.charAt(0)!="#"&&(R.l={Target:O}),n.dense?(e[x+a]||(e[x+a]=[]),e[x+a][y+s]=R):e[Hr({c:y+s,r:x+a})]=R,u.e.c<y+s&&(u.e.c=y+s),y+=_}}++x}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,x-1+a),e["!ref"]=an(u),x>=c&&(e["!fullref"]=an((u.e.r=o.length-g+x-1+a,u))),e}function rle(e,t){var r=t||{},n=r.dense?[]:{};return tle(n,e,t)}function Eqe(e,t){return Vm(rle(e,t),t)}function WK(e){var t="",r=Cqe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Cqe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function _qe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Un(t.replace(/<[^>]*>/g,""));return[r]}var XK={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function nle(e,t){var r=t||{},n=eL(e),a=[],s,i,o={name:""},c="",u=0,d,f,h={},p=[],g=r.dense?[]:{},x,b,y={value:""},w="",_=0,B=[],k=-1,I=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},N=0,j={},R=[],D={},O=0,L=0,M=[],J=1,V=1,K=[],z={Names:[]},G={},Y=["",""],ee=[],P={},Q="",X=0,te=!1,ae=!1,se=0;for(t2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");x=t2.exec(n);)switch(x[3]=x[3].replace(/_.*$/,"")){case"table":case"工作表":x[1]==="/"?(E.e.c>=E.s.c&&E.e.r>=E.s.r?g["!ref"]=an(E):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=E.e.r&&(g["!fullref"]=g["!ref"],E.e.r=r.sheetRows-1,g["!ref"]=an(E)),R.length&&(g["!merges"]=R),M.length&&(g["!rows"]=M),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),p.push(d.name),h[d.name]=g,ae=!1):x[0].charAt(x[0].length-2)!=="/"&&(d=Gr(x[0],!1),k=I=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,g=r.dense?[]:{},R=[],M=[],ae=!0);break;case"table-row-group":x[1]==="/"?--N:++N;break;case"table-row":case"行":if(x[1]==="/"){k+=J,J=1;break}if(f=Gr(x[0],!1),f.行号?k=f.行号-1:k==-1&&(k=0),J=+f["number-rows-repeated"]||1,J<10)for(se=0;se<J;++se)N>0&&(M[k+se]={level:N});I=-1;break;case"covered-table-cell":x[1]!=="/"&&++I,r.sheetStubs&&(r.dense?(g[k]||(g[k]=[]),g[k][I]={t:"z"}):g[Hr({r:k,c:I})]={t:"z"}),w="",B=[];break;case"table-cell":case"数据":if(x[0].charAt(x[0].length-2)==="/")++I,y=Gr(x[0],!1),V=parseInt(y["number-columns-repeated"]||"1",10),b={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(b.f=$K(Un(y.formula))),(y.数据类型||y["value-type"])=="string"&&(b.t="s",b.v=Un(y["string-value"]||""),r.dense?(g[k]||(g[k]=[]),g[k][I]=b):g[Hr({r:k,c:I})]=b),I+=V-1;else if(x[1]!=="/"){++I,w="",_=0,B=[],V=1;var oe=J?k+J-1:k;if(I>E.e.c&&(E.e.c=I),I<E.s.c&&(E.s.c=I),k<E.s.r&&(E.s.r=k),oe>E.e.r&&(E.e.r=oe),y=Gr(x[0],!1),ee=[],P={},b={t:y.数据类型||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Un(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(O=parseInt(y["number-matrix-rows-spanned"],10)||0,L=parseInt(y["number-matrix-columns-spanned"],10)||0,D={s:{r:k,c:I},e:{r:k+O-1,c:I+L-1}},b.F=an(D),K.push([D,b.F])),y.formula)b.f=$K(y.formula);else for(se=0;se<K.length;++se)k>=K[se][0].s.r&&k<=K[se][0].e.r&&I>=K[se][0].s.c&&I<=K[se][0].e.c&&(b.F=K[se][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(O=parseInt(y["number-rows-spanned"],10)||0,L=parseInt(y["number-columns-spanned"],10)||0,D={s:{r:k,c:I},e:{r:k+O-1,c:I+L-1}},R.push(D)),y["number-columns-repeated"]&&(V=parseInt(y["number-columns-repeated"],10)),b.t){case"boolean":b.t="b",b.v=Ma(y["boolean-value"]);break;case"float":b.t="n",b.v=parseFloat(y.value);break;case"percentage":b.t="n",b.v=parseFloat(y.value);break;case"currency":b.t="n",b.v=parseFloat(y.value);break;case"date":b.t="d",b.v=Qa(y["date-value"]),r.cellDates||(b.t="n",b.v=Si(b.v)),b.z="m/d/yy";break;case"time":b.t="n",b.v=JMe(y["time-value"])/86400,r.cellDates&&(b.t="d",b.v=xk(b.v)),b.z="HH:MM:SS";break;case"number":b.t="n",b.v=parseFloat(y.数据数值);break;default:if(b.t==="string"||b.t==="text"||!b.t)b.t="s",y["string-value"]!=null&&(w=Un(y["string-value"]),B=[]);else throw new Error("Unsupported value type "+b.t)}}else{if(te=!1,b.t==="s"&&(b.v=w||"",B.length&&(b.R=B),te=_==0),G.Target&&(b.l=G),ee.length>0&&(b.c=ee,ee=[]),w&&r.cellText!==!1&&(b.w=w),te&&(b.t="z",delete b.v),(!te||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=k))for(var ce=0;ce<J;++ce){if(V=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(g[k+ce]||(g[k+ce]=[]),g[k+ce][I]=ce==0?b:Ha(b);--V>0;)g[k+ce][I+V]=Ha(b);else for(g[Hr({r:k+ce,c:I})]=b;--V>0;)g[Hr({r:k+ce,c:I+V})]=Ha(b);E.e.c<=I&&(E.e.c=I)}V=parseInt(y["number-columns-repeated"]||"1",10),I+=V-1,V=0,b={},w="",B=[]}G={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!0]);break;case"annotation":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s;P.t=w,B.length&&(P.R=B),P.a=Q,ee.push(P)}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);Q="",X=0,w="",_=0,B=[];break;case"creator":x[1]==="/"?Q=n.slice(X,x.index):X=x.index+x[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);w="",_=0,B=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(x[1]==="/"){if(j[o.name]=c,(s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&(c="",o=Gr(x[0],!1),a.push([x[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Gr(x[0],!1),c+=XK[x[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Gr(x[0],!1),c+=XK[x[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(x[0].slice(-2)==="/>")break;if(x[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,x.index);break}else u=x.index+x[0].length;break;case"named-range":i=Gr(x[0],!1),Y=eI(i["cell-range-address"]);var me={Name:i.name,Ref:Y[0]+"!"+Y[1]};ae&&(me.Sheet=p.length),z.Names.push(me);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(x[1]==="/"&&(!y||!y["string-value"])){var ke=_qe(n.slice(_,x.index));w=(w.length>0?w+`
`:"")+ke[0]}else Gr(x[0],!1),_=x.index+x[0].length;break;case"s":break;case"database-range":if(x[1]==="/")break;try{Y=eI(Gr(x[0])["target-range-address"]),h[Y[0]]["!autofilter"]={ref:Y[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(x[1]!=="/"){if(G=Gr(x[0],!1),!G.href)break;G.Target=Un(G.href),delete G.href,G.Target.charAt(0)=="#"&&G.Target.indexOf(".")>-1?(Y=eI(G.Target.slice(1)),G.Target="#"+Y[0]+"!"+Y[1]):G.Target.match(/^\.\.[\\\/]/)&&(G.Target=G.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(x[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(x)}}var ne={Sheets:h,SheetNames:p,Workbook:z};return r.bookSheets&&delete ne.Sheets,ne}function YK(e,t){t=t||{},_u(e,"META-INF/manifest.xml")&&JUe(oi(e,"META-INF/manifest.xml"),t);var r=Dc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=nle(Ea(r),t);return _u(e,"meta.xml")&&(n.Props=Kie(oi(e,"meta.xml"))),n}function JK(e,t){return nle(e,t)}var Nqe=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+e2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Ys+t}}(),ZK=function(){var e=function(s){return pa(s).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,i,o){var c=[];c.push('      <table:table table:name="'+pa(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,f=rc(s["!ref"]||"A1"),h=s["!merges"]||[],p=0,g=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var x="",b=s["!rows"]||[];for(u=0;u<f.s.r;++u)x=b[u]?' table:style-name="ro'+b[u].ods+'"':"",c.push("        <table:table-row"+x+`></table:table-row>
`);for(;u<=f.e.r;++u){for(x=b[u]?' table:style-name="ro'+b[u].ods+'"':"",c.push("        <table:table-row"+x+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var y=!1,w={},_="";for(p=0;p!=h.length;++p)if(!(h[p].s.c>d)&&!(h[p].s.r>u)&&!(h[p].e.c<d)&&!(h[p].e.r<u)){(h[p].s.c!=d||h[p].s.r!=u)&&(y=!0),w["table:number-columns-spanned"]=h[p].e.c-h[p].s.c+1,w["table:number-rows-spanned"]=h[p].e.r-h[p].s.r+1;break}if(y){c.push(r);continue}var B=Hr({r:u,c:d}),k=g?(s[u]||[])[d]:s[B];if(k&&k.f&&(w["table:formula"]=pa(Gze(k.f)),k.F&&k.F.slice(0,B.length)==B)){var I=rc(k.F);w["table:number-matrix-columns-spanned"]=I.e.c-I.s.c+1,w["table:number-matrix-rows-spanned"]=I.e.r-I.s.r+1}if(!k){c.push(t);continue}switch(k.t){case"b":_=k.v?"TRUE":"FALSE",w["office:value-type"]="boolean",w["office:boolean-value"]=k.v?"true":"false";break;case"n":_=k.w||String(k.v||0),w["office:value-type"]="float",w["office:value"]=k.v||0;break;case"s":case"str":_=k.v==null?"":k.v,w["office:value-type"]="string";break;case"d":_=k.w||Qa(k.v).toISOString(),w["office:value-type"]="date",w["office:date-value"]=Qa(k.v).toISOString(),w["table:style-name"]="ce1";break;default:c.push(t);continue}var E=e(_);if(k.l&&k.l.Target){var N=k.l.Target;N=N.charAt(0)=="#"?"#"+Kze(N.slice(1)):N,N.charAt(0)!="#"&&!N.match(/^\w+:/)&&(N="../"+N),E=Kt("text:a",E,{"xlink:href":N.replace(/&/g,"&amp;")})}c.push("          "+Kt("table:table-cell",Kt("text:p",E,{}),w)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,i){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;_m(f),f.ods=o;var h=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),s.push(`  </style:style>
`),++o}}});var c=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(i,o){var c=[Ys],u=e2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=e2({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(Gie().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,i),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=i.SheetNames.length;++f)c.push(n(i.Sheets[i.SheetNames[f]],i,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function ale(e,t){if(t.bookType=="fods")return ZK(e,t);var r=X8(),n="",a=[],s=[];return n="mimetype",un(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",un(r,n,ZK(e,t)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",un(r,n,Nqe(e,t)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",un(r,n,Ys+Gie()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",un(r,n,t7e(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",un(r,n,ZUe(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function wg(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function oO(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Ea(Hm(e))}function Sqe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Oc(HA(e))}function kqe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function Sm(e){var t=e.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function eq(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function Bqe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function jqe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=a&255;e[t+15]|=r>=0?0:128}function l2(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function Aa(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Bs(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function qn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=l2(e,r),s=a&7;a=Math.floor(a/8);var i=0,o;if(a==0)break;switch(s){case 0:{for(var c=r[0];e[r[0]++]>=128;);o=e.slice(c,r[0])}break;case 5:i=4,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=l2(e,r),o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:o,type:s};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function uo(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(Aa(n*8+a.type)),a.type==2&&t.push(Aa(a.data.length)),t.push(a.data))})}),Sm(t)}function EL(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function Eu(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=l2(e,n),s=qn(e.slice(n[0],n[0]+a));n[0]+=a;var i={id:Bs(s[1][0].data),messages:[]};s[2].forEach(function(o){var c=qn(o.data),u=Bs(c[3][0].data);i.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=s[3])!=null&&t[0]&&(i.merge=Bs(s[3][0].data)>>>0>0),r.push(i)}return r}function Sx(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:Aa(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Aa(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(i){a.push(i.data),i.meta[3]=[{type:0,data:Aa(i.data.length)}],n[2].push({data:uo(i.meta),type:2})});var s=uo(n);t.push(Aa(s.length)),t.push(s),a.forEach(function(i){return t.push(i)})}),Sm(t)}function Tqe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=l2(t,r),a=[];r[0]<t.length;){var s=t[r[0]]&3;if(s==0){var i=t[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=t[r[0]],o>1&&(i|=t[r[0]+1]<<8),o>2&&(i|=t[r[0]+2]<<16),o>3&&(i|=t[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}a.push(t.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var c=0,u=0;if(s==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,s==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[Sm(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=Sm(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Cu(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(Tqe(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Sm(t)}function kx(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var s=Aa(n),i=s.length;t.push(s),n<=60?(i++,t.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),i+=n,a[0]=0,a[1]=i&255,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return Sm(t)}function Iqe(e,t,r,n){var a=wg(e),s=a.getUint32(4,!0),i=(n>1?12:8)+eq(s&(n>1?3470:398))*4,o=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(o=a.getUint32(i,!0),i+=4),i+=eq(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(i,!0),i+=4),s&32&&(u=a.getFloat64(i,!0),i+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function Fqe(e,t,r){var n=wg(e),a=n.getUint32(8,!0),s=12,i=-1,o=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=Bqe(e,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(o=n.getUint32(s,!0),s+=4),a&16&&(i=n.getUint32(s,!0),s+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[o]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return f}function rI(e,t){var r=new Uint8Array(32),n=wg(r),a=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,jqe(r,a,e.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),r.slice(0,a)}function nI(e,t){var r=new Uint8Array(32),n=wg(r),a=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),r.slice(0,a)}function Oqe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return Iqe(e,t,r,e[0]);case 5:return Fqe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function zo(e){var t=qn(e);return l2(t[1][0].data)}function tq(e,t){var r=qn(t.data),n=Bs(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(i){var o=qn(i.data),c=Bs(o[1][0].data)>>>0;switch(n){case 1:s[c]=oO(o[3][0].data);break;case 8:{var u=e[zo(o[9][0].data)][0],d=qn(u.data),f=e[zo(d[1][0].data)][0],h=Bs(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var p=qn(f.data);s[c]=p[3].map(function(g){return oO(g.data)}).join("")}break}}),s}function Dqe(e,t){var r,n,a,s,i,o,c,u,d,f,h,p,g,x,b=qn(e),y=Bs(b[1][0].data)>>>0,w=Bs(b[2][0].data)>>>0,_=((n=(r=b[8])==null?void 0:r[0])==null?void 0:n.data)&&Bs(b[8][0].data)>0||!1,B,k;if((s=(a=b[7])==null?void 0:a[0])!=null&&s.data&&t!=0)B=(o=(i=b[7])==null?void 0:i[0])==null?void 0:o.data,k=(u=(c=b[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=b[4])==null?void 0:d[0])!=null&&f.data&&t!=1)B=(p=(h=b[4])==null?void 0:h[0])==null?void 0:p.data,k=(x=(g=b[3])==null?void 0:g[0])==null?void 0:x.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var I=_?4:1,E=wg(B),N=[],j=0;j<B.length/2;++j){var R=E.getUint16(j*2,!0);R<65535&&N.push([j,R])}if(N.length!=w)throw"Expected ".concat(w," cells, found ").concat(N.length);var D=[];for(j=0;j<N.length-1;++j)D[N[j][0]]=k.subarray(N[j][1]*I,N[j+1][1]*I);return N.length>=1&&(D[N[N.length-1][0]]=k.subarray(N[N.length-1][1]*I)),{R:y,cells:D}}function Pqe(e,t){var r,n=qn(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Bs(n[7][0].data)>>>0>0?1:0:-1,s=EL(n[5],function(i){return Dqe(i,a)});return{nrows:Bs(n[4][0].data)>>>0,data:s.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(c,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=c}),i},[])}}function Rqe(e,t,r){var n,a=qn(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Bs(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Bs(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=an(s);var i=qn(a[4][0].data),o=tq(e,e[zo(i[4][0].data)][0]),c=(n=i[17])!=null&&n[0]?tq(e,e[zo(i[17][0].data)][0]):[],u=qn(i[3][0].data),d=0;u[1].forEach(function(f){var h=qn(f.data),p=e[zo(h[2][0].data)][0],g=Bs(p.meta[1][0].data);if(g!=6002)throw new Error("6001 unexpected reference to ".concat(g));var x=Pqe(e,p);x.data.forEach(function(b,y){b.forEach(function(w,_){var B=Hr({r:d+y,c:_}),k=Oqe(w,o,c);k&&(r[B]=k)})}),d+=x.nrows})}function Lqe(e,t){var r=qn(t.data),n={"!ref":"A1"},a=e[zo(r[2][0].data)],s=Bs(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return Rqe(e,a[0],n),n}function Mqe(e,t){var r,n=qn(t.data),a={name:(r=n[1])!=null&&r[0]?oO(n[1][0].data):"",sheets:[]},s=EL(n[2],zo);return s.forEach(function(i){e[i].forEach(function(o){var c=Bs(o.meta[1][0].data);c==6e3&&a.sheets.push(Lqe(e,o))})}),a}function Uqe(e,t){var r=BL(),n=qn(t.data),a=EL(n[1],zo);if(a.forEach(function(s){e[s].forEach(function(i){var o=Bs(i.meta[1][0].data);if(o==2){var c=Mqe(e,i);c.sheets.forEach(function(u,d){jL(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function aI(e){var t,r,n,a,s={},i=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=Cu(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=Eu(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,i.push(f.id)})}}),!i.length)throw new Error("File has no messages");var o=((a=(n=(r=(t=s==null?void 0:s[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Bs(s[1][0].meta[1][0].data)==1&&s[1][0];if(o||i.forEach(function(c){s[c].forEach(function(u){var d=Bs(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return Uqe(s,o)}function Qqe(e,t,r){var n,a,s,i;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(s=e[8])==null?void 0:s[0])==null?void 0:i.data)&&Bs(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,u=wg(e[7][0].data),d=0,f=[],h=wg(e[4][0].data),p=0,g=[],x=0;x<t.length;++x){if(t[x]==null){u.setUint16(x*2,65535,!0),h.setUint16(x*2,65535);continue}u.setUint16(x*2,d,!0),h.setUint16(x*2,p,!0);var b,y;switch(typeof t[x]){case"string":b=rI({t:"s",v:t[x]},r),y=nI({t:"s",v:t[x]},r);break;case"number":b=rI({t:"n",v:t[x]},r),y=nI({t:"n",v:t[x]},r);break;case"boolean":b=rI({t:"b",v:t[x]},r),y=nI({t:"b",v:t[x]},r);break;default:throw new Error("Unsupported value "+t[x])}f.push(b),d+=b.length,g.push(y),p+=y.length,++c}for(e[2][0].data=Aa(c);x<e[7][0].data.length/2;++x)u.setUint16(x*2,65535,!0),h.setUint16(x*2,65535,!0);return e[6][0].data=Sm(f),e[3][0].data=Sm(g),c}function Hqe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=rc(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(an(n)));var s=iS(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach(function(Q){return Q.forEach(function(X){typeof X=="string"&&i.push(X)})});var o={},c=[],u=Nr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(Q,X){return[Q,u.FullPaths[X]]}).forEach(function(Q){var X=Q[0],te=Q[1];if(X.type==2&&X.name.match(/\.iwa/)){var ae=X.content,se=Cu(ae),oe=Eu(se);oe.forEach(function(ce){c.push(ce.id),o[ce.id]={deps:[],location:te,type:Bs(ce.messages[0].meta[1][0].data)}})}}),c.sort(function(Q,X){return Q-X});var d=c.filter(function(Q){return Q>1}).map(function(Q){return[Q,Aa(Q)]});u.FileIndex.map(function(Q,X){return[Q,u.FullPaths[X]]}).forEach(function(Q){var X=Q[0];if(Q[1],!!X.name.match(/\.iwa/)){var te=Eu(Cu(X.content));te.forEach(function(ae){ae.messages.forEach(function(se){d.forEach(function(oe){ae.messages.some(function(ce){return Bs(ce.meta[1][0].data)!=11006&&kqe(ce.data,oe[1])})&&o[oe[0]].deps.push(ae.id)})})})}});for(var f=Nr.find(u,o[1].location),h=Eu(Cu(f.content)),p,g=0;g<h.length;++g){var x=h[g];x.id==1&&(p=x)}var b=zo(qn(p.messages[0].data)[1][0].data);for(f=Nr.find(u,o[b].location),h=Eu(Cu(f.content)),g=0;g<h.length;++g)x=h[g],x.id==b&&(p=x);for(b=zo(qn(p.messages[0].data)[2][0].data),f=Nr.find(u,o[b].location),h=Eu(Cu(f.content)),g=0;g<h.length;++g)x=h[g],x.id==b&&(p=x);for(b=zo(qn(p.messages[0].data)[2][0].data),f=Nr.find(u,o[b].location),h=Eu(Cu(f.content)),g=0;g<h.length;++g)x=h[g],x.id==b&&(p=x);var y=qn(p.messages[0].data);{y[6][0].data=Aa(n.e.r+1),y[7][0].data=Aa(n.e.c+1);var w=zo(y[46][0].data),_=Nr.find(u,o[w].location),B=Eu(Cu(_.content));{for(var k=0;k<B.length&&B[k].id!=w;++k);if(B[k].id!=w)throw"Bad ColumnRowUIDMapArchive";var I=qn(B[k].messages[0].data);I[1]=[],I[2]=[],I[3]=[];for(var E=0;E<=n.e.c;++E){var N=[];N[1]=N[2]=[{type:0,data:Aa(E+420690)}],I[1].push({type:2,data:uo(N)}),I[2].push({type:0,data:Aa(E)}),I[3].push({type:0,data:Aa(E)})}I[4]=[],I[5]=[],I[6]=[];for(var j=0;j<=n.e.r;++j)N=[],N[1]=N[2]=[{type:0,data:Aa(j+726270)}],I[4].push({type:2,data:uo(N)}),I[5].push({type:0,data:Aa(j)}),I[6].push({type:0,data:Aa(j)});B[k].messages[0].data=uo(I)}_.content=kx(Sx(B)),_.size=_.content.length,delete y[46];var R=qn(y[4][0].data);{R[7][0].data=Aa(n.e.r+1);var D=qn(R[1][0].data),O=zo(D[2][0].data);_=Nr.find(u,o[O].location),B=Eu(Cu(_.content));{if(B[0].id!=O)throw"Bad HeaderStorageBucket";var L=qn(B[0].messages[0].data);for(j=0;j<s.length;++j){var M=qn(L[2][0].data);M[1][0].data=Aa(j),M[4][0].data=Aa(s[j].length),L[2][j]={type:L[2][0].type,data:uo(M)}}B[0].messages[0].data=uo(L)}_.content=kx(Sx(B)),_.size=_.content.length;var J=zo(R[2][0].data);_=Nr.find(u,o[J].location),B=Eu(Cu(_.content));{if(B[0].id!=J)throw"Bad HeaderStorageBucket";for(L=qn(B[0].messages[0].data),E=0;E<=n.e.c;++E)M=qn(L[2][0].data),M[1][0].data=Aa(E),M[4][0].data=Aa(n.e.r+1),L[2][E]={type:L[2][0].type,data:uo(M)};B[0].messages[0].data=uo(L)}_.content=kx(Sx(B)),_.size=_.content.length;var V=zo(R[4][0].data);(function(){for(var Q=Nr.find(u,o[V].location),X=Eu(Cu(Q.content)),te,ae=0;ae<X.length;++ae){var se=X[ae];se.id==V&&(te=se)}var oe=qn(te.messages[0].data);{oe[3]=[];var ce=[];i.forEach(function(ne,_e){ce[1]=[{type:0,data:Aa(_e)}],ce[2]=[{type:0,data:Aa(1)}],ce[3]=[{type:2,data:Sqe(ne)}],oe[3].push({type:2,data:uo(ce)})})}te.messages[0].data=uo(oe);var me=Sx(X),ke=kx(me);Q.content=ke,Q.size=Q.content.length})();var K=qn(R[3][0].data);{var z=K[1][0];delete K[2];var G=qn(z.data);{var Y=zo(G[2][0].data);(function(){for(var Q=Nr.find(u,o[Y].location),X=Eu(Cu(Q.content)),te,ae=0;ae<X.length;++ae){var se=X[ae];se.id==Y&&(te=se)}var oe=qn(te.messages[0].data);{delete oe[6],delete K[7];var ce=new Uint8Array(oe[5][0].data);oe[5]=[];for(var me=0,ke=0;ke<=n.e.r;++ke){var ne=qn(ce);me+=Qqe(ne,s[ke],i),ne[1][0].data=Aa(ke),oe[5].push({data:uo(ne),type:2})}oe[1]=[{type:0,data:Aa(n.e.c+1)}],oe[2]=[{type:0,data:Aa(n.e.r+1)}],oe[3]=[{type:0,data:Aa(me)}],oe[4]=[{type:0,data:Aa(n.e.r+1)}]}te.messages[0].data=uo(oe);var _e=Sx(X),De=kx(_e);Q.content=De,Q.size=Q.content.length})()}z.data=uo(G)}R[3][0].data=uo(K)}y[4][0].data=uo(R)}p.messages[0].data=uo(y);var ee=Sx(h),P=kx(ee);return f.content=P,f.size=f.content.length,u}function sle(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function CL(e){sle([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function _L(e){sle([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function Vqe(e){return Cn.WS.indexOf(e)>-1?"sheet":e==Cn.CS?"chart":e==Cn.DS?"dialog":e==Cn.MS?"macro":e&&e.length?e:"sheet"}function zqe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,Vqe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function $qe(e,t,r,n,a,s,i,o,c,u,d,f){try{s[n]=cw(Dc(e,r,!0),t);var h=oi(e,t),p;switch(o){case"sheet":p=fKe(h,t,a,c,s[n],u,d,f);break;case"chart":if(p=hKe(h,t,a,c,s[n],u,d,f),!p||!p["!drawel"])break;var g=Oy(p["!drawel"].Target,t),x=r2(g),b=eVe(Dc(e,g,!0),cw(Dc(e,x,!0),g)),y=Oy(b,g),w=r2(y);p=QGe(Dc(e,y,!0),y,c,cw(Dc(e,w,!0),y),u,p);break;case"macro":p=mKe(h,t,a,c,s[n],u,d,f);break;case"dialog":p=pKe(h,t,a,c,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=p;var _=[];s&&s[n]&&js(s[n]).forEach(function(B){var k="";if(s[n][B].Type==Cn.CMNT){k=Oy(s[n][B].Target,t);var I=bKe(oi(e,k,!0),k,c);if(!I||!I.length)return;UK(p,I,!1)}s[n][B].Type==Cn.TCMNT&&(k=Oy(s[n][B].Target,t),_=_.concat(rVe(oi(e,k,!0),c)))}),_&&_.length&&UK(p,_,!0,c.people||[])}catch(B){if(c.WTF)throw B}}function vu(e){return e.charAt(0)=="/"?e.slice(1):e}function Gqe(e,t){if(rb(),t=t||{},CL(t),_u(e,"META-INF/manifest.xml")||_u(e,"objectdata.xml"))return YK(e,t);if(_u(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof aI<"u"){if(e.FileIndex)return aI(e);var r=Nr.utils.cfb_new();return oK(e).forEach(function(M){un(r,M,nUe(e,M))}),aI(r)}throw new Error("Unsupported NUMBERS file")}if(!_u(e,"[Content_Types].xml"))throw _u(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):_u(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=oK(e),a=XUe(Dc(e,"[Content_Types].xml")),s=!1,i,o;if(a.workbooks.length===0&&(o="xl/workbook.xml",oi(e,o,!0)&&a.workbooks.push(o)),a.workbooks.length===0){if(o="xl/workbook.bin",!oi(e,o,!0))throw new Error("Could not find workbook");a.workbooks.push(o),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(uw=[],a.sst)try{uw=vKe(oi(e,vu(a.sst)),a.sst,t)}catch(M){if(t.WTF)throw M}t.cellStyles&&a.themes.length&&(c=xKe(Dc(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(u=gKe(oi(e,vu(a.style)),a.style,c,t))}a.links.map(function(M){try{var J=cw(Dc(e,r2(vu(M))),M);return wKe(oi(e,vu(M)),J,M,t)}catch{}});var d=AKe(oi(e,vu(a.workbooks[0])),a.workbooks[0],t),f={},h="";a.coreprops.length&&(h=oi(e,vu(a.coreprops[0]),!0),h&&(f=Kie(h)),a.extprops.length!==0&&(h=oi(e,vu(a.extprops[0]),!0),h&&n7e(h,f,t)));var p={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(h=Dc(e,vu(a.custprops[0]),!0),h&&(p=s7e(h,t)));var g={};if((t.bookSheets||t.bookProps)&&(d.Sheets?i=d.Sheets.map(function(J){return J.name}):f.Worksheets&&f.SheetNames.length>0&&(i=f.SheetNames),t.bookProps&&(g.Props=f,g.Custprops=p),t.bookSheets&&typeof i<"u"&&(g.SheetNames=i),t.bookSheets?g.SheetNames:t.bookProps))return g;i={};var x={};t.bookDeps&&a.calcchain&&(x=yKe(oi(e,vu(a.calcchain)),a.calcchain));var b=0,y={},w,_;{var B=d.Sheets;f.Worksheets=B.length,f.SheetNames=[];for(var k=0;k!=B.length;++k)f.SheetNames[k]=B[k].name}var I=s?"bin":"xml",E=a.workbooks[0].lastIndexOf("/"),N=(a.workbooks[0].slice(0,E+1)+"_rels/"+a.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");_u(e,N)||(N="xl/_rels/workbook."+I+".rels");var j=cw(Dc(e,N,!0),N.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=EKe(oi(e,vu(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=aVe(oi(e,vu(a.people[0])),t)),j&&(j=zqe(j,d.Sheets));var R=oi(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=f.Worksheets;++b){var D="sheet";if(j&&j[b]?(w="xl/"+j[b][1].replace(/[\/]?xl\//,""),_u(e,w)||(w=j[b][1]),_u(e,w)||(w=N.replace(/_rels\/.*$/,"")+j[b][1]),D=j[b][2]):(w="xl/worksheets/sheet"+(b+1-R)+"."+I,w=w.replace(/sheet0\./,"sheet.")),_=w.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(b!=t.sheets)continue e;break;case"string":if(f.SheetNames[b].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var O=!1,L=0;L!=t.sheets.length;++L)typeof t.sheets[L]=="number"&&t.sheets[L]==b&&(O=1),typeof t.sheets[L]=="string"&&t.sheets[L].toLowerCase()==f.SheetNames[b].toLowerCase()&&(O=1);if(!O)continue e}}$qe(e,w,_,f.SheetNames[b],b,y,i,D,t,d,c,u)}return g={Directory:a,Workbook:d,Props:f,Custprops:p,Deps:x,Sheets:i,SheetNames:f.SheetNames,Strings:uw,Styles:u,Themes:c,SSF:Ha(Lr)},t&&t.bookFiles&&(e.files?(g.keys=n,g.files=e.files):(g.keys=[],g.files={},e.FullPaths.forEach(function(M,J){M=M.replace(/^Root Entry[\/]/,""),g.keys.push(M),g.files[M]=e.FileIndex[J]}))),t&&t.bookVBA&&(a.vba.length>0?g.vbaraw=oi(e,vu(a.vba[0]),!0):a.defaults&&a.defaults.bin===AVe&&(g.vbaraw=oi(e,"xl/vbaProject.bin",!0))),g}function Kqe(e,t){var r=t||{},n="Workbook",a=Nr.find(e,n);try{if(n="/!DataSpaces/Version",a=Nr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(EQe(a.content),n="/!DataSpaces/DataSpaceMap",a=Nr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=_Qe(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=Nr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=NQe(a.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=Nr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);kQe(a.content)}catch{}if(n="/EncryptionInfo",a=Nr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=BQe(a.content);if(n="/EncryptedPackage",a=Nr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],a.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function qqe(e,t){return t.bookType=="ods"?ale(e,t):t.bookType=="numbers"?Hqe(e,t):t.bookType=="xlsb"?Wqe(e,t):Xqe(e,t)}function Wqe(e,t){lv=1024,e&&!e.SSF&&(e.SSF=Ha(Lr)),e&&e.SSF&&(rb(),mk(e.SSF),t.revssf=gk(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,dw?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=Ioe.indexOf(t.bookType)>-1,a=uL();_L(t=t||{});var s=X8(),i="",o=0;if(t.cellXfs=[],zm(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",un(s,i,qie(e.Props,t)),a.coreprops.push(i),fa(t.rels,2,i,Cn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,un(s,i,Yie(e.Props)),a.extprops.push(i),fa(t.rels,3,i,Cn.EXT_PROPS),e.Custprops!==e.Props&&js(e.Custprops||{}).length>0&&(i="docProps/custom.xml",un(s,i,Jie(e.Custprops)),a.custprops.push(i),fa(t.rels,4,i,Cn.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,un(s,i,_Ke(o-1,i,t,e,d)),a.sheets.push(i),fa(t.wbrels,-1,"worksheets/sheet"+o+"."+r,Cn.WS[0])}if(f){var p=f["!comments"],g=!1,x="";p&&p.length>0&&(x="xl/comments"+o+"."+r,un(s,x,kKe(p,x)),a.comments.push(x),fa(d,-1,"../comments"+o+"."+r,Cn.CMNT),g=!0),f["!legacy"]&&g&&un(s,"xl/drawings/vmlDrawing"+o+".vml",joe(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&un(s,r2(i),jv(d))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,un(s,i,SKe(t.Strings,i,t)),a.strs.push(i),fa(t.wbrels,-1,"sharedStrings."+r,Cn.SST)),i="xl/workbook."+r,un(s,i,CKe(e,i)),a.workbooks.push(i),fa(t.rels,1,i,Cn.WB),i="xl/theme/theme1.xml",un(s,i,pL(e.Themes,t)),a.themes.push(i),fa(t.wbrels,-1,"theme/theme1.xml",Cn.THEME),i="xl/styles."+r,un(s,i,NKe(e,i,t)),a.styles.push(i),fa(t.wbrels,-1,"styles."+r,Cn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",un(s,i,e.vbaraw),a.vba.push(i),fa(t.wbrels,-1,"vbaProject.bin",Cn.VBA)),i="xl/metadata."+r,un(s,i,BKe(i)),a.metadata.push(i),fa(t.wbrels,-1,"metadata."+r,Cn.XLMETA),un(s,"[Content_Types].xml",$ie(a,t)),un(s,"_rels/.rels",jv(t.rels)),un(s,"xl/_rels/workbook."+r+".rels",jv(t.wbrels)),delete t.revssf,delete t.ssf,s}function Xqe(e,t){lv=1024,e&&!e.SSF&&(e.SSF=Ha(Lr)),e&&e.SSF&&(rb(),mk(e.SSF),t.revssf=gk(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,dw?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=Ioe.indexOf(t.bookType)>-1,a=uL();_L(t=t||{});var s=X8(),i="",o=0;if(t.cellXfs=[],zm(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",un(s,i,qie(e.Props,t)),a.coreprops.push(i),fa(t.rels,2,i,Cn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,un(s,i,Yie(e.Props)),a.extprops.push(i),fa(t.rels,3,i,Cn.EXT_PROPS),e.Custprops!==e.Props&&js(e.Custprops||{}).length>0&&(i="docProps/custom.xml",un(s,i,Jie(e.Custprops)),a.custprops.push(i),fa(t.rels,4,i,Cn.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},h=e.Sheets[e.SheetNames[o-1]],p=(h||{})["!type"]||"sheet";switch(p){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,un(s,i,Voe(o-1,t,e,f)),a.sheets.push(i),fa(t.wbrels,-1,"worksheets/sheet"+o+"."+r,Cn.WS[0])}if(h){var g=h["!comments"],x=!1,b="";if(g&&g.length>0){var y=!1;g.forEach(function(w){w[1].forEach(function(_){_.T==!0&&(y=!0)})}),y&&(b="xl/threadedComments/threadedComment"+o+"."+r,un(s,b,nVe(g,d,t)),a.threadedcomments.push(b),fa(f,-1,"../threadedComments/threadedComment"+o+"."+r,Cn.TCMNT)),b="xl/comments"+o+"."+r,un(s,b,Toe(g)),a.comments.push(b),fa(f,-1,"../comments"+o+"."+r,Cn.CMNT),x=!0}h["!legacy"]&&x&&un(s,"xl/drawings/vmlDrawing"+o+".vml",joe(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&un(s,r2(i),jv(f))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,un(s,i,xoe(t.Strings,t)),a.strs.push(i),fa(t.wbrels,-1,"sharedStrings."+r,Cn.SST)),i="xl/workbook."+r,un(s,i,qoe(e)),a.workbooks.push(i),fa(t.rels,1,i,Cn.WB),i="xl/theme/theme1.xml",un(s,i,pL(e.Themes,t)),a.themes.push(i),fa(t.wbrels,-1,"theme/theme1.xml",Cn.THEME),i="xl/styles."+r,un(s,i,Noe(e,t)),a.styles.push(i),fa(t.wbrels,-1,"styles."+r,Cn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",un(s,i,e.vbaraw),a.vba.push(i),fa(t.wbrels,-1,"vbaProject.bin",Cn.VBA)),i="xl/metadata."+r,un(s,i,Boe()),a.metadata.push(i),fa(t.wbrels,-1,"metadata."+r,Cn.XLMETA),d.length>1&&(i="xl/persons/person.xml",un(s,i,sVe(d)),a.people.push(i),fa(t.wbrels,-1,"persons/person.xml",Cn.PEOPLE)),un(s,"[Content_Types].xml",$ie(a,t)),un(s,"_rels/.rels",jv(t.rels)),un(s,"xl/_rels/workbook."+r+".rels",jv(t.wbrels)),delete t.revssf,delete t.ssf,s}function NL(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=zc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Yqe(e,t){return Nr.find(e,"EncryptedPackage")?Kqe(e,t):Joe(e,t)}function Jqe(e,t){var r,n=e,a=t||{};return a.type||(a.type=pn&&Buffer.isBuffer(e)?"buffer":"base64"),r=bie(n,a),Gqe(r,a)}function ile(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return sO(e.slice(r),t);default:break e}return h1.to_workbook(e,t)}function Zqe(e,t){var r="",n=NL(e,t);switch(t.type){case"base64":r=zc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=xg(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Ea(r)),t.type="binary",ile(r,t)}function eWe(e,t){var r=e;return t.type=="base64"&&(r=zc(r)),r=Xw.utils.decode(1200,r.slice(2),"str"),t.type="binary",ile(r,t)}function tWe(e){return e.match(/[^\x00-\x7F]/)?HA(e):e}function sI(e,t,r,n){return n?(r.type="string",h1.to_workbook(e,r)):h1.to_workbook(t,r)}function c2(e,t){$8();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return c2(new Uint8Array(e),(r=Ha(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Iv={},r.dateNF&&(Iv.dateNF=r.dateNF),r.type||(r.type=pn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=pn?"buffer":"binary",n=WMe(e),typeof Uint8Array<"u"&&!pn&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=tWe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=Ha(r),r.type="array",c2(G8(n),r)}switch((a=NL(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return Yqe(Nr.read(n,r),r);break;case 9:if(a[1]<=8)return Joe(n,r);break;case 60:return sO(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return iQe(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return poe.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?Jqe(n,r):sI(e,n,r,s);case 239:return a[3]===60?sO(n,r):sI(e,n,r,s);case 255:if(a[1]===254)return eWe(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return Yp.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return Yp.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return aO.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return Eoe.to_workbook(n,r);break;case 10:case 13:case 32:return Zqe(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return sQe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?aO.to_workbook(n,r):sI(e,n,r,s)}function ole(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return eE(t.file,Nr.write(e,{type:pn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Nr.write(e,t)}function rWe(e,t){var r=Ha(t||{}),n=qqe(e,r);return nWe(n,r)}function nWe(e,t){var r={},n=pn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?Nr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(hk(a))}return t.password&&typeof encrypt_agile<"u"?ole(encrypt_agile(a,t.password),t):t.type==="file"?eE(t.file,a):t.type=="string"?Ea(a):a}function aWe(e,t){var r=t||{},n=tqe(e,r);return ole(n,r)}function BA(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return Yw(HA(n));case"binary":return HA(n);case"string":return e;case"file":return eE(t.file,n,"utf8");case"buffer":return pn?Ph(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):BA(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function sWe(e,t){switch(t.type){case"base64":return Yw(e);case"binary":return e;case"string":return e;case"file":return eE(t.file,e,"binary");case"buffer":return pn?Ph(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function a_(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?Yw(r):t.type=="string"?Ea(r):r;case"file":return eE(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function lle(e,t){$8(),YGe(e);var r=Ha(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=lle(e,r);return r.type="array",hk(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return BA(qKe(e,r),r);case"slk":case"sylk":return BA(moe.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return BA(ele(e.Sheets[e.SheetNames[a]],r),r);case"txt":return sWe(cle(e.Sheets[e.SheetNames[a]],r),r);case"csv":return BA(kL(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return BA(poe.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return a_(aO.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return BA(h1.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return BA(Eoe.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return BA(goe.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return BA(ale(e,r),r);case"wk1":return a_(Yp.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return a_(Yp.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),a_(Zoe(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),aWe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return rWe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function iWe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function SL(e,t,r){var n={};return n.type="file",n.file=t,iWe(n),lle(e,n)}function oWe(e,t,r,n,a,s,i,o){var c=qs(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!i||e[r])for(var p=t.s.c;p<=t.e.c;++p){var g=i?e[r][p]:e[n[p]+c];if(g===void 0||g.t===void 0){if(u===void 0)continue;s[p]!=null&&(h[s[p]]=u);continue}var x=g.v;switch(g.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(s[p]!=null){if(x==null)if(g.t=="e"&&x===null)h[s[p]]=null;else if(u!==void 0)h[s[p]]=u;else if(d&&x===null)h[s[p]]=null;else continue;else h[s[p]]=d&&(g.t!=="n"||g.t==="n"&&o.rawNumbers!==!1)?x:_h(g,x,o);x!=null&&(f=!1)}}return{row:h,isempty:f}}function iS(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=Qn(d);break;case"number":c=Qn(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=qs(c.s.r),h=[],p=[],g=0,x=0,b=Array.isArray(e),y=c.s.r,w=0,_={};b&&!e[y]&&(e[y]=[]);var B=u.skipHidden&&e["!cols"]||[],k=u.skipHidden&&e["!rows"]||[];for(w=c.s.c;w<=c.e.c;++w)if(!(B[w]||{}).hidden)switch(h[w]=os(w),r=b?e[y][w]:e[h[w]+f],n){case 1:s[w]=w-c.s.c;break;case 2:s[w]=h[w];break;case 3:s[w]=u.header[w-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=_h(r,null,u),x=_[i]||0,!x)_[i]=1;else{do o=i+"_"+x++;while(_[o]);_[i]=x,_[o]=1}s[w]=o}for(y=c.s.r+a;y<=c.e.r;++y)if(!(k[y]||{}).hidden){var I=oWe(e,c,y,h,n,s,b,u);(I.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(p[g++]=I.row)}return p.length=g,p}var rq=/"/g;function lWe(e,t,r,n,a,s,i,o){for(var c=!0,u=[],d="",f=qs(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var p=o.dense?(e[r]||[])[h]:e[n[h]+f];if(p==null)d="";else if(p.v!=null){c=!1,d=""+(o.rawNumbers&&p.t=="n"?p.v:_h(p,null,o));for(var g=0,x=0;g!==d.length;++g)if((x=d.charCodeAt(g))===a||x===s||x===34||o.forceQuotes){d='"'+d.replace(rq,'""')+'"';break}d=="ID"&&(d='"ID"')}else p.f!=null&&!p.F?(c=!1,d="="+p.f,d.indexOf(",")>=0&&(d='"'+d.replace(rq,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&c?null:u.join(i)}function kL(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=Qn(e["!ref"]),s=n.FS!==void 0?n.FS:",",i=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,c=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],p=n.skipHidden&&e["!rows"]||[],g=a.s.c;g<=a.e.c;++g)(h[g]||{}).hidden||(f[g]=os(g));for(var x=0,b=a.s.r;b<=a.e.r;++b)(p[b]||{}).hidden||(d=lWe(e,a,b,f,i,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((x++?o:"")+d)));return delete n.dense,r.join("")}function cle(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=kL(e,t);return r}function cWe(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=Qn(e["!ref"]),s="",i=[],o,c=[],u=Array.isArray(e);for(o=a.s.c;o<=a.e.c;++o)i[o]=os(o);for(var d=a.s.r;d<=a.e.r;++d)for(s=qs(d),o=a.s.c;o<=a.e.c;++o)if(t=i[o]+s,r=u?(e[d]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function ule(e,t,r){var n=r||{},a=+!n.skipHeader,s=e||{},i=0,o=0;if(s&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?ls(n.origin):n.origin;i=c.r,o=c.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+t.length-1+a}};if(s["!ref"]){var f=Qn(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),i==-1&&(i=f.e.r+1,d.e.r=i+t.length-1+a)}else i==-1&&(i=0,d.e.r=t.length-1+a);var h=n.header||[],p=0;t.forEach(function(x,b){js(x).forEach(function(y){(p=h.indexOf(y))==-1&&(h[p=h.length]=y);var w=x[y],_="z",B="",k=Hr({c:o+p,r:i+b+a});u=u2(s,k),w&&typeof w=="object"&&!(w instanceof Date)?s[k]=w:(typeof w=="number"?_="n":typeof w=="boolean"?_="b":typeof w=="string"?_="s":w instanceof Date?(_="d",n.cellDates||(_="n",w=Si(w)),B=n.dateNF||Lr[14]):w===null&&n.nullError&&(_="e",w=0),u?(u.t=_,u.v=w,delete u.w,delete u.R,B&&(u.z=B)):s[k]=u={t:_,v:w},B&&(u.z=B))})}),d.e.c=Math.max(d.e.c,o+h.length-1);var g=qs(i);if(a)for(p=0;p<h.length;++p)s[os(p+o)+g]={t:"s",v:h[p]};return s["!ref"]=an(d),s}function uWe(e,t){return ule(null,e,t)}function u2(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=ls(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?u2(e,Hr(t)):u2(e,Hr({r:t,c:r||0}))}function dWe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function BL(){return{SheetNames:[],Sheets:{}}}function jL(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=i+a)!=-1;++a);}if(Koe(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function AWe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=dWe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function fWe(e,t){return e.z=t,e}function dle(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function hWe(e,t,r){return dle(e,"#"+t,r)}function mWe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function pWe(e,t,r,n){for(var a=typeof t!="string"?t:Qn(t),s=typeof t=="string"?t:an(t),i=a.s.r;i<=a.e.r;++i)for(var o=a.s.c;o<=a.e.c;++o){var c=u2(e,i,o);c.t="n",c.F=s,delete c.v,i==a.s.r&&o==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var Fu={encode_col:os,encode_row:qs,encode_cell:Hr,encode_range:an,decode_col:aL,decode_row:nL,split_cell:SUe,decode_cell:ls,decode_range:rc,format_cell:_h,sheet_add_aoa:Lie,sheet_add_json:ule,sheet_add_dom:tle,aoa_to_sheet:nb,json_to_sheet:uWe,table_to_sheet:rle,table_to_book:Eqe,sheet_to_csv:kL,sheet_to_txt:cle,sheet_to_json:iS,sheet_to_html:ele,sheet_to_formulae:cWe,sheet_to_row_object_array:iS,sheet_get_cell:u2,book_new:BL,book_append_sheet:jL,book_set_sheet_visibility:AWe,cell_set_number_format:fWe,cell_set_hyperlink:dle,cell_set_internal_link:hWe,cell_add_comment:mWe,sheet_set_array_formula:pWe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const gWe=async()=>{try{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,a=0;const s=[];for(const c of r)try{const u=kt(xn,c),d=await ga(u),f=d.size;n+=f,s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:f});let h=0;d.docs.forEach(p=>{const g=p.data();g.createdAt&&new Date(g.createdAt)>=t&&h++}),a+=h}catch(u){console.warn(`Error accediendo a colección ${c}:`,u),s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:0})}const i=[];try{const c=kt(xn,"apiLogs"),u=new Date(e.getTime()-10080*60*1e3),d=$t(c,Jr("timestamp",">=",u.toISOString()),Sr("timestamp","desc")),f=await ga(d),h={};f.docs.forEach(p=>{const g=p.data(),x=new Date(g.timestamp).toLocaleDateString("es-CL");h[x]=(h[x]||0)+1}),Object.entries(h).sort(([p],[g])=>new Date(p).getTime()-new Date(g).getTime()).forEach(([p,g])=>{i.push({label:p,value:g})})}catch(c){console.warn("Error calculando actividad diaria:",c)}const o=Math.floor(a*2.5);return{documentsCreatedToday:a,readsToday:o,writesToday:a,totalDocuments:n,collectionsActivity:s.sort((c,u)=>u.value-c.value),dailyActivity:i}}catch(e){return console.error("Error al obtener estadísticas de Firestore:",e),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},nq=500,Bx=({title:e,value:t,description:r,alert:n})=>l.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),l.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:t}),r&&l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),iI=({title:e,data:t,colorClass:r})=>{const n=S.useMemo(()=>Math.max(...t.map(a=>a.value),1),[t]);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),l.jsx("div",{className:"space-y-4",children:t.length>0?t.map(a=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:a.label}),l.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a.value})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:l.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${a.value/n*100}%`}})})]},a.label)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},xWe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(!0),[a,s]=S.useState(null),[i,o]=S.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});S.useEffect(()=>{n(!0);const f=c8e(g=>{t(g),n(!1)}),h=async()=>{try{const g=await gWe();o(g)}catch(g){console.error("Error al cargar estadísticas de Firestore:",g)}};h();const p=setInterval(h,300*1e3);return()=>{f(),clearInterval(p)}},[]);const{stats:c,userStats:u,moduleStats:d}=S.useMemo(()=>{const f=new Date,h=new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),p=h-f.getDay()*24*60*60*1e3,g=new Date(f.getFullYear(),f.getMonth(),1).getTime(),x={today:0,week:0,month:0},b={},y={};e.forEach(B=>{const k=new Date(B.timestamp).getTime();k>=h&&x.today++,k>=p&&x.week++,k>=g&&x.month++;const I=B.userEmail||"Desconocido";b[I]||(b[I]={email:I,today:0,month:0,total:0}),b[I].total++,k>=h&&b[I].today++,k>=g&&b[I].month++,y[B.module]=(y[B.module]||0)+1});const w=Object.values(b).sort((B,k)=>k.total-B.total),_=Object.entries(y).map(([B,k])=>({label:B,value:k})).sort((B,k)=>k.value-B.value);return{stats:x,userStats:w,moduleStats:_}},[e]);return l.jsxs("div",{className:"space-y-8",children:[a&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),r&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadísticas..."}),!r&&e.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsx(Bx,{title:"Llamadas Hoy",value:r?"--":c.today,description:`Límite recomendado: ${nq}`,alert:c.today>nq}),l.jsx(Bx,{title:"Llamadas esta Semana",value:r?"--":c.week}),l.jsx(Bx,{title:"Llamadas este Mes",value:r?"--":c.month})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[l.jsx(iI,{title:"Uso por Módulo",data:d,colorClass:"bg-sky-500"}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),l.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),l.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),l.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&u.length>0?u.map(f=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:f.email}),l.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.today}),l.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.month}),l.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:f.total})]},f.email)):l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadísticas de uso de Firestore (simuladas)."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsx(Bx,{title:"Documentos Creados (Hoy)",value:i.documentsCreatedToday,description:"Nuevos documentos"}),l.jsx(Bx,{title:"Lecturas de Firestore (Hoy)",value:i.readsToday,description:"Operaciones de lectura"}),l.jsx(Bx,{title:"Total de Documentos",value:i.totalDocuments,description:"En todas las colecciones"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[l.jsx(iI,{title:"Actividad por Colección",data:i.collectionsActivity,colorClass:"bg-green-500"}),l.jsx(iI,{title:"Actividad Diaria (Últimos 7 días)",data:i.dailyActivity,colorClass:"bg-purple-500"})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vWe="type.googleapis.com/google.protobuf.Int64Value",bWe="type.googleapis.com/google.protobuf.UInt64Value";function Ale(e,t){const r={};for(const n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}function oS(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>oS(t));if(typeof e=="function"||typeof e=="object")return Ale(e,t=>oS(t));throw new Error("Data cannot be encoded in JSON: "+e)}function p1(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case vWe:case bWe:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>p1(t)):typeof e=="function"||typeof e=="object"?Ale(e,t=>p1(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aq={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Yl extends Ud{constructor(t,r,n){super(`${TL}/${t}`,r||""),this.details=n,Object.setPrototypeOf(this,Yl.prototype)}}function yWe(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function lS(e,t){let r=yWe(e),n=r,a;try{const s=t&&t.error;if(s){const i=s.status;if(typeof i=="string"){if(!aq[i])return new Yl("internal","internal");r=aq[i],n=i}const o=s.message;typeof o=="string"&&(n=o),a=s.details,a!==void 0&&(a=p1(a))}}catch{}return r==="ok"?null:new Yl(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wWe{constructor(t,r,n,a){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Tc(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||a==null||a.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(t);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO="us-central1",EWe=/^data: (.*?)(?:\n|$)/;function CWe(e){let t=null;return{promise:new Promise((r,n)=>{t=setTimeout(()=>{n(new Yl("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class _We{constructor(t,r,n,a,s=lO,i=(...o)=>fetch(...o)){this.app=t,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new wWe(t,r,n,a),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(s);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=lO}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function NWe(e,t,r){const n=Bh(t);e.emulatorOrigin=`http${n?"s":""}://${t}:${r}`,n&&(HS(e.emulatorOrigin),VS("Functions",!0))}function SWe(e,t,r){const n=a=>BWe(e,t,a,{});return n.stream=(a,s)=>TWe(e,t,a,s),n}async function kWe(e,t,r,n){r["Content-Type"]="application/json";let a;try{a=await n(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function fle(e,t){const r={},n=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function BWe(e,t,r,n){const a=e._url(t);return jWe(e,a,r,n)}async function jWe(e,t,r,n){r=oS(r);const a={data:r},s=await fle(e,n),i=n.timeout||7e4,o=CWe(i),c=await Promise.race([kWe(t,a,s,e.fetchImpl),o.promise,e.cancelAllRequests]);if(o.cancel(),!c)throw new Yl("cancelled","Firebase Functions instance was deleted.");const u=lS(c.status,c.json);if(u)throw u;if(!c.json)throw new Yl("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new Yl("internal","Response is missing data field.");return{data:p1(d)}}function TWe(e,t,r,n){const a=e._url(t);return IWe(e,a,r,n||{})}async function IWe(e,t,r,n){var h;r=oS(r);const a={data:r},s=await fle(e,n);s["Content-Type"]="application/json",s.Accept="text/event-stream";let i;try{i=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(a),headers:s,signal:n==null?void 0:n.signal})}catch(p){if(p instanceof Error&&p.name==="AbortError"){const x=new Yl("cancelled","Request was cancelled.");return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}const g=lS(0,null);return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}let o,c;const u=new Promise((p,g)=>{o=p,c=g});(h=n==null?void 0:n.signal)==null||h.addEventListener("abort",()=>{const p=new Yl("cancelled","Request was cancelled.");c(p)});const d=i.body.getReader(),f=FWe(d,o,c,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const p=f.getReader();return{async next(){const{value:g,done:x}=await p.read();return{value:g,done:x}},async return(){return await p.cancel(),{done:!0,value:void 0}}}}},data:u}}function FWe(e,t,r,n){const a=(i,o)=>{const c=i.match(EWe);if(!c)return;const u=c[1];try{const d=JSON.parse(u);if("result"in d){t(p1(d.result));return}if("message"in d){o.enqueue(p1(d.message));return}if("error"in d){const f=lS(0,d);o.error(f),r(f);return}}catch(d){if(d instanceof Yl){o.error(d),r(d);return}}},s=new TextDecoder;return new ReadableStream({start(i){let o="";return c();async function c(){if(n!=null&&n.aborted){const u=new Yl("cancelled","Request was cancelled");return i.error(u),r(u),Promise.resolve()}try{const{value:u,done:d}=await e.read();if(d){o.trim()&&a(o.trim(),i),i.close();return}if(n!=null&&n.aborted){const h=new Yl("cancelled","Request was cancelled");i.error(h),r(h),await e.cancel();return}o+=s.decode(u,{stream:!0});const f=o.split(`
`);o=f.pop()||"";for(const h of f)h.trim()&&a(h.trim(),i);return c()}catch(u){const d=u instanceof Yl?u:lS(0,null);i.error(d),r(d)}}},cancel(){return e.cancel()}})}const sq="@firebase/functions",iq="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OWe="auth-internal",DWe="app-check-internal",PWe="messaging-internal";function RWe(e){const t=(r,{instanceIdentifier:n})=>{const a=r.getProvider("app").getImmediate(),s=r.getProvider(OWe),i=r.getProvider(PWe),o=r.getProvider(DWe);return new _We(a,s,i,o,n)};Am(new Ah(TL,t,"PUBLIC").setMultipleInstances(!0)),Ru(sq,iq,e),Ru(sq,iq,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(e=zS(),t=lO){const n=E2(Xn(e),TL).getImmediate({identifier:t}),a=fD("functions");return a&&LWe(n,...a),n}function LWe(e,t,r){NWe(Xn(e),t,r)}function jx(e,t,r){return SWe(Xn(e),t)}RWe();const oq=kt(xn,"usuarios");async function hle(){try{console.log("🔍 [DEBUG] Obteniendo usuarios de Firestore..."),console.log("🔍 [DEBUG] Collection ref:",oq);const e=await ga(oq);if(console.log(`📊 [DEBUG] Encontrados ${e.docs.length} documentos en la colección usuarios`),e.empty)return console.log("⚠️  [DEBUG] La colección usuarios está vacía"),[];const t=e.docs.map(r=>{const n=r.data();return console.log("👤 [DEBUG] Usuario encontrado:",{id:r.id,...n}),{id:r.id,...n}});return console.log("✅ [DEBUG] Usuarios procesados correctamente:",t.length),console.log("✅ [DEBUG] Lista completa de usuarios:",t),t}catch(e){throw console.error("❌ [DEBUG] Error al obtener usuarios:",e),console.error("❌ [DEBUG] Error details:",{code:e.code,message:e.message,stack:e.stack}),e}}const lq=Object.values(Wt),oI=e=>e?e.trim().toLowerCase().replace(/°/g,"º").replace(/\s+(medio|básico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º").replace(/^(\d)(?![º])/,"$1º").replace(/\s+/g,"").toUpperCase():"",MWe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(!1),[a,s]=S.useState("Usuarios"),[i,o]=S.useState({nombreCompleto:"",email:"",rut:"",profile:Wt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[c,u]=S.useState(null),[d,f]=S.useState(""),[h,p]=S.useState(""),[g,x]=S.useState(""),[b,y]=S.useState(null),[w,_]=S.useState(null),[B,k]=S.useState(null),I=S.useCallback(async()=>{n(!0);try{const z=await hle();t(z)}catch(z){console.error("Error al cargar usuarios",z),y("No se pudieron cargar los usuarios.")}finally{n(!1)}},[]);S.useEffect(()=>{I()},[I]);const E=S.useCallback(z=>{const{name:G,value:Y}=z.target;o(ee=>({...ee,[G]:Y,curso:G==="profile"&&Y!==Wt.ESTUDIANTE?"":ee.curso,cursos:G==="profile"&&Y!==Wt.PROFESORADO?[]:ee.cursos,asignaturas:G==="profile"&&Y!==Wt.PROFESORADO?[]:ee.asignaturas}))},[]),N=S.useCallback((z,G)=>{o(Y=>{const ee=Y[z]||[],P=ee.includes(G)?ee.filter(Q=>Q!==G):[...ee,G];return{...Y,[z]:P}})},[]),j=S.useCallback(()=>{o({nombreCompleto:"",email:"",rut:"",profile:Wt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),u(null),y(null)},[]),R=S.useCallback(async z=>{z.preventDefault(),y(null);const{nombreCompleto:G,email:Y,profile:ee,curso:P,password:Q}=i;if(!G.trim()||!Y.trim()){y("Nombre Completo y Email son obligatorios.");return}if(ee===Wt.ESTUDIANTE&&!P){y('El campo "Curso" es obligatorio para Estudiantes.');return}if(!c&&!(Q!=null&&Q.trim())){y("La contraseña es obligatoria al crear un nuevo usuario.");return}const X=oy();try{if(c){const te=jx(X,"updateUser"),ae={...i,password:(Q==null?void 0:Q.trim())||void 0,curso:ee===Wt.ESTUDIANTE?oI(P||""):void 0};await te(ae)}else{const te=jx(X,"createUser"),ae={...i,curso:ee===Wt.ESTUDIANTE?oI(P||""):void 0};await te(ae)}await I(),j()}catch(te){console.error("Error al guardar usuario:",te),y(te.message||"Error al guardar el usuario.")}},[i,c,I,j]),D=S.useCallback(z=>{u(z.email),o({nombreCompleto:z.nombreCompleto,email:z.email,rut:z.rut||"",profile:z.profile,password:"",curso:z.curso||"",cursos:z.cursos||[],asignaturas:z.asignaturas||[]}),setTimeout(()=>{const G=document.querySelector("form");G&&G.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),O=S.useCallback(async z=>{if(window.confirm(`¿Está seguro de que desea eliminar al usuario ${z}? Esta acción es irreversible.`))try{const G=oy();await jx(G,"deleteUser")({email:z}),await I()}catch(G){console.error("Error al eliminar usuario:",G),y(G.message||"No se pudo borrar el usuario.")}},[I]),L=async z=>{var Q;const G=(Q=z.target.files)==null?void 0:Q[0];if(!G)return;_({message:"Procesando archivo...",isError:!1});const Y=oy(),ee=jx(Y,"createUser"),P=new FileReader;P.onload=async X=>{var te;try{const ae=new Uint8Array((te=X.target)==null?void 0:te.result),se=c2(ae,{type:"array"}),oe=se.Sheets[se.SheetNames[0]],ce=Fu.sheet_to_json(oe);if(ce.length===0){_({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const me=ce.map(Ne=>{const fe=Ne.Nombre||Ne.nombre,Ie=Ne.Correo||Ne.correo||Ne.Email||Ne.email,Me=Ne.Curso||Ne.curso,Xe=Ne.RUT||Ne.rut;return!fe||!Ie||!Me?Promise.resolve({email:Ie||"Sin email",error:"Datos incompletos"}):ee({nombreCompleto:String(fe).trim(),email:String(Ie).trim(),profile:Wt.ESTUDIANTE,curso:oI(String(Me).trim()),rut:Xe?String(Xe).trim():"",password:"recoleta"}).catch(ye=>({email:Ie,error:ye.message}))}),ke=await Promise.all(me),ne=ke.filter(Ne=>!Ne.error).length,_e=ke.filter(Ne=>Ne.error);let De=`Carga completada. ${ne} estudiantes agregados.`;_e.length>0&&(De+=` ${_e.length} fallaron.`,console.error("Errores en carga masiva:",_e)),_({message:De,isError:_e.length>0}),await I()}catch(ae){_({message:`Error: ${ae.message}`,isError:!0})}},P.readAsArrayBuffer(G),z.target.value=""},M=async z=>{var Q;const G=(Q=z.target.files)==null?void 0:Q[0];if(!G)return;k({message:"Procesando archivo...",isError:!1});const Y=oy(),ee=jx(Y,"createUser"),P=new FileReader;P.onload=async X=>{var te;try{const ae=new Uint8Array((te=X.target)==null?void 0:te.result),se=c2(ae,{type:"array"}),oe=se.Sheets[se.SheetNames[0]],ce=Fu.sheet_to_json(oe);if(ce.length===0){k({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const me=ce.map(Ne=>{const fe=Ne.Nombre||Ne.nombre,Ie=Ne.Correo||Ne.correo||Ne.Email||Ne.email,Me=Ne.Perfil||Ne.perfil||Ne.Profile||Ne.profile,Xe=Ne.RUT||Ne.rut;return!fe||!Ie||!Me?Promise.resolve({email:Ie||"Sin email",error:"Datos incompletos"}):ee({nombreCompleto:String(fe).trim(),email:String(Ie).trim(),profile:Me,rut:Xe?String(Xe).trim():"",password:"recoleta"}).catch(ye=>({email:Ie,error:ye.message}))}),ke=await Promise.all(me),ne=ke.filter(Ne=>!Ne.error).length,_e=ke.filter(Ne=>Ne.error);let De=`Carga completada. ${ne} usuarios agregados.`;_e.length>0&&(De+=` ${_e.length} fallaron.`,console.error("Errores en carga masiva:",_e)),k({message:De,isError:_e.length>0}),await I()}catch(ae){k({message:`Error: ${ae.message}`,isError:!0})}},P.readAsArrayBuffer(G),z.target.value=""},J="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",V=S.useMemo(()=>Array.from(new Set(e.filter(z=>z.profile===Wt.ESTUDIANTE&&z.curso).map(z=>z.curso))).sort(),[e]),K=S.useMemo(()=>e.filter(z=>(d===""||z.nombreCompleto.toLowerCase().includes(d.toLowerCase())||z.email.toLowerCase().includes(d.toLowerCase()))&&(h===""||z.profile===h)&&(g===""||z.curso===g)),[e,d,h,g]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>s("Usuarios"),className:`${a==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),l.jsx("button",{onClick:()=>s("Monitor de Uso"),className:`${a==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),a==="Usuarios"&&l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),l.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:L,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),w&&l.jsx("p",{className:`text-sm mt-2 ${w.isError?"text-red-600":"text-green-600"}`,children:w.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),l.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:M,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),B&&l.jsx("p",{className:`text-sm mt-2 ${B.isError?"text-red-600":"text-green-600"}`,children:B.message})]})]})]}),l.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:c?"Editando usuario":"Agregar nuevo usuario"}),l.jsxs("form",{onSubmit:R,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),l.jsx("input",{type:"text",name:"nombreCompleto",value:i.nombreCompleto,onChange:E,className:J,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),l.jsx("input",{type:"email",name:"email",value:i.email,onChange:E,className:J,required:!0,readOnly:!!c})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),l.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:E,placeholder:c?"Dejar en blanco para no cambiar":"Contraseña temporal",className:J})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),l.jsx("input",{type:"text",name:"rut",value:i.rut||"",onChange:E,placeholder:"12.345.678-9",className:J})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),l.jsx("select",{name:"profile",value:i.profile,onChange:E,className:J,required:!0,children:lq.map(z=>l.jsx("option",{value:z,children:z},z))})]}),i.profile===Wt.ESTUDIANTE&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsxs("select",{name:"curso",value:i.curso,onChange:E,className:J,required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),Ks.map(z=>l.jsx("option",{value:z,children:z},z))]})]})]}),i.profile===Wt.PROFESORADO&&l.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[l.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[l.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📚"}),"Asignación de Cursos"]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Ks.map(z=>{var G;return l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[l.jsx("input",{type:"checkbox",checked:((G=i.cursos)==null?void 0:G.includes(z))||!1,onChange:()=>N("cursos",z),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:z})]},z)})})]}),i.profile===Wt.PROFESORADO&&l.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[l.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[l.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📖"}),"Asignación de Asignaturas"]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:qi.map(z=>{var G;return l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[l.jsx("input",{type:"checkbox",checked:((G=i.asignaturas)==null?void 0:G.includes(z))||!1,onChange:()=>N("asignaturas",z),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:z})]},z)})})]}),b&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:b}),l.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[c&&l.jsx("button",{type:"button",onClick:j,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"button",onClick:async()=>{try{console.log("🔧 Agregando custom claim...");const z=oy(),Y=await jx(z,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log("✅ Custom claim agregado:",Y),y("✅ Custom claim agregado exitosamente")}catch(z){console.error("❌ Error al agregar custom claim:",z),y(`Error: ${z.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:"🔧 Claim"}),l.jsx("button",{type:"button",onClick:async()=>{var z,G,Y,ee,P;try{const{auth:Q}=await A1(async()=>{const{auth:ae}=await Promise.resolve().then(()=>lee);return{auth:ae}},void 0);console.log("🔍 Usuario actual:",(z=Q.currentUser)==null?void 0:z.email);const X=await((G=Q.currentUser)==null?void 0:G.getIdToken(!0));console.log("🔑 Token refreshed:",!!X);const te=await((Y=Q.currentUser)==null?void 0:Y.getIdTokenResult());console.log("📋 Claims completos:",te==null?void 0:te.claims),console.log("👤 Profile claim:",(ee=te==null?void 0:te.claims)==null?void 0:ee.profile),((P=te==null?void 0:te.claims)==null?void 0:P.profile)==="SUBDIRECCION"?y("✅ Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):y(`❌ Custom claim faltante. Claims: ${JSON.stringify(te==null?void 0:te.claims)}`)}catch(Q){console.error("❌ Error verificando token:",Q),y(`Error verificando token: ${Q.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:"🔍 Token"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:c?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[l.jsx("div",{children:l.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:z=>f(z.target.value),className:J})}),l.jsx("div",{children:l.jsxs("select",{value:h,onChange:z=>p(z.target.value),className:J,children:[l.jsx("option",{value:"",children:"Todos los perfiles"}),lq.map(z=>l.jsx("option",{value:z,children:z},z))]})}),l.jsx("div",{children:l.jsxs("select",{value:g,onChange:z=>x(z.target.value),className:J,children:[l.jsx("option",{value:"",children:"Todos los cursos"}),V.map(z=>l.jsx("option",{value:z,children:z},z))]})})]}),r?l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:K.map(z=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:z.nombreCompleto}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:z.email}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:l.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${z.profile===Wt.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":z.profile===Wt.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:z.profile})}),l.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[z.profile===Wt.ESTUDIANTE&&l.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:z.curso||"Sin curso"}),z.profile===Wt.PROFESORADO&&l.jsxs("div",{className:"space-y-1",children:[z.cursos&&z.cursos.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),l.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[z.cursos.slice(0,3).map(G=>l.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:G},G)),z.cursos.length>3&&l.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",z.cursos.length-3]})]})]}),z.asignaturas&&z.asignaturas.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),l.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[z.asignaturas.slice(0,2).map(G=>l.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:G},G)),z.asignaturas.length>2&&l.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",z.asignaturas.length-2]})]})]}),(!z.cursos||z.cursos.length===0)&&(!z.asignaturas||z.asignaturas.length===0)&&l.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),z.profile!==Wt.ESTUDIANTE&&z.profile!==Wt.PROFESORADO&&l.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[l.jsx("button",{onClick:()=>D(z),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),l.jsx("button",{onClick:()=>O(z.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},z.email))})]}),K.length===0&&l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:e.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),a==="Monitor de Uso"&&l.jsx(xWe,{})]})},g1="seguimiento_dual_records",UWe=e=>{const t=e.data(),r=n=>n&&typeof n.toDate=="function"?n.toDate().toISOString().split("T")[0]:n;return{id:e.id,...t,fechaDesvinculacion:r(t.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(t.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(t.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(t.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(t.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(t.fechaSupervisionExcepcional)}},QWe=e=>{const t=$t(kt(ht,g1),Sr("nombreEstudiante","asc"));return pr(t,n=>{const a=n.docs.map(s=>UWe(s));e(a)},n=>{console.error("Error al suscribirse a los registros de seguimiento:",n),e([])})},cS=e=>{const t={...e};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(n=>{t[n]&&typeof t[n]=="string"&&(t[n]=sr.fromDate(new Date(t[n]+"T00:00:00")))}),t},HWe=async e=>{try{const t=cS(e);return(await Tn(kt(ht,g1),t)).id}catch(t){throw console.error("Error al crear el registro:",t),new Error("No se pudo crear el registro de seguimiento.")}},cq=async(e,t)=>{try{const r=dr(ht,g1,e),n=cS(t);await Ji(r,n,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},VWe=async e=>{try{const t=dr(ht,g1,e);await za(t)}catch(t){throw console.error("Error al eliminar el registro:",t),new Error("No se pudo eliminar el registro.")}},zWe=async e=>{const t=jg(ht),r=kt(ht,g1);let n=0,a=0;for(const s of e){const i=$t(r,Jr("rutEstudiante","==",s.rutEstudiante)),o=await ga(i);if(o.empty){const c=dr(r);t.set(c,cS(s)),a++}else{const c=o.docs[0].id,u=dr(ht,g1,c);t.set(u,cS(s),{merge:!0}),n++}}return await t.commit(),{updated:n,created:a}},$We={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},GWe=e=>{if(!e||e===""||e==="N/A"||e==="Pendiente")return null;try{if(typeof e=="number"){const t=new Date(1900,0,1),r=new Date(t.getTime()+(e-2)*24*60*60*1e3);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}if(e instanceof Date)return isNaN(e.getTime())?null:e.toISOString().split("T")[0];if(typeof e=="string"){const t=e.trim();if(t==="")return null;const r=new Date(t);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}return null}catch(t){return console.warn("Error parsing date:",e,t),null}},KWe=e=>{if(typeof e=="boolean")return e;if(typeof e=="string"){const t=e.toLowerCase().trim();return["true","verdadero","sí","si","yes","1","x"].includes(t)}return typeof e=="number"?e===1:!1},qWe=({record:e,onSave:t,onClose:r})=>{const[n,a]=S.useState(e),s="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=c=>{const{name:u,value:d,type:f,checked:h}=c.target;a(p=>({...p,[u]:f==="checkbox"?h:d}))},o=()=>{t(n)};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:e.nombreEstudiante})]})]}),l.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f1s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),l.jsx("input",{id:`f1s1-${e.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f2s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),l.jsx("input",{id:`f2s1-${e.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f1s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),l.jsx("input",{id:`f1s2-${e.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f2s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),l.jsx("input",{id:`f2s2-${e.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`fex-${e.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),l.jsx("input",{id:`fex-${e.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:`mg-nombre-${e.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),l.jsx("input",{id:`mg-nombre-${e.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:i,className:s+" mt-1"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:`mg-contacto-${e.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),l.jsx("input",{id:`mg-contacto-${e.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:i,className:s+" mt-1"})]})]})]})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),l.jsx("button",{type:"button",onClick:o,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},WWe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(!0),a=S.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:Vp[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:Rj[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[s,i]=S.useState(a),[o,c]=S.useState(null),[u,d]=S.useState(""),[f,h]=S.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[p,g]=S.useState(null),[x,b]=S.useState(null),[y,w]=S.useState(!1),[_,B]=S.useState(null);S.useEffect(()=>{n(!0);const z=QWe(G=>{t(G),n(!1)});return()=>z()},[]);const k=S.useCallback(z=>{const{name:G,value:Y}=z.target;i(ee=>({...ee,[G]:Y}))},[]),I=S.useCallback(z=>{const{name:G,value:Y}=z.target;h(ee=>({...ee,[G]:Y}))},[]),E=S.useCallback(()=>{i(a),c(null),g(null)},[a]),N=async z=>{z.preventDefault(),g(null);const Y=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(ee=>{var P;return!((P=s[ee])!=null&&P.trim())});if(Y){g(`El campo '${Y}' es obligatorio.`);return}try{o?await cq(o,s):await HWe(s),E()}catch(ee){console.error(ee),g("No se pudo guardar el registro.")}},j=S.useCallback(z=>{window.scrollTo({top:0,behavior:"smooth"}),c(z.id),i(z)},[]),R=async z=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await VWe(z)}catch(G){console.error(G),g("No se pudo eliminar el registro.")}},D=z=>{B(z),w(!0)},O=()=>{B(null),w(!1)},L=async z=>{try{await cq(z.id,z),O()}catch(G){console.error(G),alert("No se pudieron guardar los cambios de supervisión.")}},M=()=>{const z=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],G=Fu.aoa_to_sheet([z]),Y=Fu.book_new();Fu.book_append_sheet(Y,G,"Plantilla"),SL(Y,"Plantilla_Seguimiento_Dual.xlsx")},J=z=>{var ee;const G=(ee=z.target.files)==null?void 0:ee[0];if(!G)return;b({message:"Procesando archivo...",isError:!1});const Y=new FileReader;Y.onload=async P=>{var Q;try{const X=new Uint8Array((Q=P.target)==null?void 0:Q.result),te=c2(X,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),ae=te.SheetNames[0],se=te.Sheets[ae],oe=Fu.sheet_to_json(se,{raw:!1,dateNF:"yyyy-mm-dd"});if(oe.length===0)throw new Error("El archivo está vacío.");const ce={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},me=Object.keys(oe[0]).map(De=>De.trim().toLowerCase()),ne=["nombre","rut","curso 2025","empresa","estado"].find(De=>!me.includes(De));if(ne)throw new Error(`Falta la columna requerida: '${ne}'`);const _e=oe.map((De,Ne)=>{try{const fe={};for(const Ie in De){const Me=ce[Ie.trim().toLowerCase()];if(Me){let Xe=De[Ie];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(Me)?(Xe=GWe(Xe),Xe&&(fe[Me]=Xe)):Me.includes("realizada")?fe[Me]=KWe(Xe):Xe!=null&&Xe!==""&&(fe[Me]=String(Xe).trim())}}return!fe.nombreEstudiante||!fe.rutEstudiante?(console.warn(`Fila ${Ne+2}: Faltan campos requeridos`),null):fe}catch(fe){return console.error(`Error procesando fila ${Ne+2}:`,fe),null}}).filter(De=>De!==null);if(console.log("Registros procesados:",_e),_e.length>0){const{updated:De,created:Ne}=await zWe(_e);b({message:`Carga exitosa. ${Ne} registros creados, ${De} actualizados.`,isError:!1})}else b({message:"No se encontraron registros válidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(X){console.error("Error completo:",X),b({message:`Error al procesar el archivo: ${X.message}. Verifique que las fechas estén en formato correcto.`,isError:!0})}},Y.readAsArrayBuffer(G)},V="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",K=S.useMemo(()=>e.filter(z=>(u===""||z.nombreEstudiante.toLowerCase().includes(u.toLowerCase())||z.nombreEmpresa.toLowerCase().includes(u.toLowerCase())||z.rutEstudiante.includes(u))&&(f.curso===""||z.curso===f.curso)&&(f.empresa===""||z.nombreEmpresa===f.empresa)&&(f.estado===""||z.estado===f.estado)&&(f.comuna===""||z.comuna===f.comuna)&&(f.profesor===""||z.profesorTutorEmpresa===f.profesor)).sort((z,G)=>z.nombreEstudiante.localeCompare(G.nombreEstudiante)),[e,u,f]);return S.useMemo(()=>{const z=new Set,G=new Set;return e.forEach(Y=>{Y.nombreEmpresa&&z.add(Y.nombreEmpresa),Y.comuna&&G.add(Y.comuna)}),{empresas:Array.from(z).sort(),comunas:Array.from(G).sort()}},[e]),r?l.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-12 h-12 object-contain"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Práctica Dual"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:o?"Editando registro existente.":"Registre un nuevo estudiante en práctica."})]})]}),l.jsxs("form",{onSubmit:N,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),l.jsx("input",{type:"text",name:"nombreEstudiante",value:s.nombreEstudiante,onChange:k,className:V,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),l.jsx("input",{type:"text",name:"rutEstudiante",value:s.rutEstudiante,onChange:k,className:V,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsx("select",{name:"curso",value:s.curso,onChange:k,className:V,required:!0,children:Vp.map(z=>l.jsx("option",{value:z,children:z},z))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),l.jsxs("select",{name:"profesorTutorEmpresa",value:s.profesorTutorEmpresa,onChange:k,className:V,children:[l.jsx("option",{value:"",children:"Seleccione un profesor"}),R6.map(z=>l.jsx("option",{value:z,children:z},z))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),l.jsx("input",{type:"text",name:"nombreEmpresa",value:s.nombreEmpresa,onChange:k,className:V,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),l.jsx("input",{type:"text",name:"rutEmpresa",value:s.rutEmpresa,onChange:k,className:V})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),l.jsx("input",{type:"text",name:"direccionEmpresa",value:s.direccionEmpresa,onChange:k,className:V})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),l.jsx("input",{type:"text",name:"comuna",value:s.comuna,onChange:k,className:V})]}),l.jsxs("div",{className:"lg:col-span-4",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),l.jsx("select",{name:"estado",value:s.estado,onChange:k,className:V,children:Rj.map(z=>l.jsx("option",{value:z,children:z},z))})]})]}),s.estado==="Desvinculado"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),l.jsx("input",{type:"date",name:"fechaDesvinculacion",value:s.fechaDesvinculacion||"",onChange:k,className:`${V} border-red-300`})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),l.jsx("input",{type:"text",name:"motivoDesvinculacion",value:s.motivoDesvinculacion||"",onChange:k,className:`${V} border-red-300`})]})]}),p&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:p}),l.jsxs("div",{className:"flex justify-end items-center gap-4",children:[o&&l.jsx("button",{type:"button",onClick:E,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:o?"Actualizar":"Agregar"})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[l.jsx("button",{onClick:M,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),l.jsx("input",{type:"file",onChange:J,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),x&&l.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${x.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:x.message})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[l.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:u,onChange:z=>d(z.target.value),className:`${V} md:col-span-2 lg:col-span-1`}),l.jsxs("select",{name:"curso",value:f.curso,onChange:I,className:V,children:[l.jsx("option",{value:"",children:"Todos los Cursos"}),Vp.map(z=>l.jsx("option",{children:z},z))]}),l.jsxs("select",{name:"estado",value:f.estado,onChange:I,className:V,children:[l.jsx("option",{value:"",children:"Todos los Estados"}),Rj.map(z=>l.jsx("option",{children:z},z))]}),l.jsxs("select",{name:"profesor",value:f.profesor,onChange:I,className:V,children:[l.jsx("option",{value:"",children:"Todos los Profesores"}),R6.map(z=>l.jsx("option",{children:z},z))]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:K.map(z=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[l.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:z.nombreEstudiante}),l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:z.curso})]}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:z.nombreEmpresa}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:z.profesorTutorEmpresa}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${$We[z.estado]}`,children:z.estado})}),l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[l.jsx("button",{onClick:()=>D(z),className:"text-blue-600 hover:underline",children:"Supervisión"}),l.jsx("button",{onClick:()=>j(z),className:"text-yellow-600 hover:underline",children:"Editar"}),l.jsx("button",{onClick:()=>R(z.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},z.id))})]})})]}),y&&_&&l.jsx(qWe,{record:_,onClose:O,onSave:L})]})},mle="actividades_remotas",ple="respuestas_actividades",gle="pruebas_estandarizadas",XWe="usuarios",xle=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(typeof e=="object"){if(typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if("seconds"in e&&"nanoseconds"in e){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}}return null},IL=e=>{const t=xle(e);return t?t.toISOString():void 0},uS=e=>{const t=xle(e);return t?t.toISOString().split("T")[0]:void 0},vle=e=>{if(!e)return null;const t=new Date(`${e}T00:00:00`);return isNaN(t.getTime())?null:sr.fromDate(t)},ble=e=>sr.fromDate(new Date(e||new Date().toISOString())),YWe=e=>!!e&&/^data:/.test(e),d2=e=>{if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(d2);const t={};return Object.entries(e).forEach(([r,n])=>{n!==void 0&&(t[r]=d2(n))}),t},JWe=e=>{const t=e.match(/^data:(.*?);base64,(.*)$/);if(!t)throw new Error("Data URL inválida");const r=t[1]||"application/octet-stream",n=t[2];let a="";if(typeof atob=="function")a=atob(n);else{const o=typeof Buffer<"u"?Buffer:null;if(o)a=o.from(n,"base64").toString("binary");else throw new Error("No hay decodificador base64 disponible")}const s=a.length,i=new Uint8Array(s);for(let o=0;o<s;o++)i[o]=a.charCodeAt(o);return{bytes:i,contentType:r}},ZWe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:IL(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:uS(t.plazoEntrega)||uS(new Date)}},eXe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCompletado:IL(t.fechaCompletado)||new Date().toISOString()}},tXe=e=>{const t=e.data()||{};return{id:e.id,...t}},rXe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:IL(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:uS(t.plazoEntrega)||uS(new Date)}},nXe=e=>{const t=$t(kt(ht,mle),Sr("fechaCreacion","desc"));return pr(t,r=>e(r.docs.map(ZWe)),r=>{console.error("subscribeToActividades error:",r),e([])})},aXe=(e,t)=>{const r=kt(ht,ple),n=$t(r,Sr("fechaCompletado","desc"));return pr(n,a=>e(a.docs.map(eXe)),a=>{console.error("subscribeToRespuestas error:",a),e([])})},sXe=e=>{const t=$t(kt(ht,XWe),Sr("nombreCompleto","asc"));return pr(t,r=>e(r.docs.map(tXe)),r=>{console.error("subscribeToAllUsers error:",r),e([])})},iXe=e=>{const t=$t(kt(ht,gle),Sr("fechaCreacion","desc"));return pr(t,r=>e(r.docs.map(rXe)),r=>{console.error("subscribeToPruebasEstandarizadas error:",r),e([])})},oXe=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=d2({...a,fechaCreacion:ble(r),plazoEntrega:vle(n)});return(await Tn(kt(ht,mle),s)).id},lXe=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=d2({...a,fechaCreacion:ble(r),plazoEntrega:vle(n)});return(await Tn(kt(ht,gle),s)).id},cXe=async(e,t)=>{const r=d2(t);await Vu(dr(ht,ple,e),r)},uXe=(e,t)=>{if(!t||t<=0)return"1.0";const n=t*.6;let a;return e>=n?a=4+3*(e-n)/(t-n+1e-9):a=1+3*e/(n+1e-9),a=Math.max(1,Math.min(7,a)),a.toFixed(1)},dXe=async(e,t,r)=>{const{bytes:n,contentType:a}=JWe(e),s=Date.now(),i=t.replace(/\s+/g,"_"),c=`recursos/${r!=="—"?r:"general"}/${s}/${i}`,u=b4(e2e,c);await iee(u,n,{contentType:a});const d=await pP(u);return{nombre:t,url:d}},AXe=async e=>{var s;const t=e.nivel||"general",r=((s=e.recursos)==null?void 0:s.archivos)||[],n=await Promise.all(r.map(async(i,o)=>{if(YWe(i==null?void 0:i.url)){const c=(i==null?void 0:i.nombre)||`archivo_${o}.bin`;return dXe(i.url,c,t)}return{nombre:(i==null?void 0:i.nombre)||`archivo_${o}`,url:i==null?void 0:i.url}})),a={...e,recursos:{...e.recursos||{},archivos:n}};return oXe(a)},ly=e=>e?new Date(e).toLocaleDateString("es-CL"):"",fXe=e=>e?new Date(e).toLocaleString("es-CL"):"",hXe=e=>new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(String(n.result)),n.onerror=a=>r(a)}),yle=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>n.includes("punto")||n.includes("Punto")||n.includes("Factor")||n.includes("factor")||n.includes("Criterio")||n.includes("criterio")||n.includes("Aspecto")||n.includes("aspecto"))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},ii=(e,t)=>{if(t&&yle(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>ii(a,`${t}-array-item`)).join(", ");if(Object.keys(e).some(a=>a.includes("punto")||a.includes("Punto")||a.includes("Factor")||a.includes("factor")||a.includes("Criterio")||a.includes("criterio")))return"[Rúbrica de evaluación]";const n=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of n)if(e[a]&&typeof e[a]=="string")return e[a];try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},Ql=(e,t,...r)=>{if(yle(e,`extractTextSafely-${t}`),!e)return"";for(const n of r)if(e[n]){const a=ii(e[n],`${t}-${n}`);if(a&&a!=="[Objeto complejo]"&&a!=="[Objeto no serializable]")return a}return typeof e=="string"?e:"[Sin contenido disponible]"},Ia=({content:e,context:t="unknown"})=>{try{const r=ii(e,`UltraSafeRenderer-${t}`);return l.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),l.jsx("span",{children:"[Error al mostrar contenido]"})}},lI={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3,4,5]},cI=["Localizar información","Interpretar y relacionar","Reflexionar","Extraer información explícita","Realizar inferencias","Interpretar el sentido global del texto","Evaluar contenido y forma"],mXe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,s]=S.useState([]),[i,o]=S.useState([]),[c,u]=S.useState(null),[d,f]=S.useState(null),[h,p]=S.useState(!1),[g,x]=S.useState(!1),[b,y]=S.useState(!1),[w,_]=S.useState(!1),[B,k]=S.useState(!1),[I,E]=S.useState(!0),[N,j]=S.useState(null),[R,D]=S.useState(""),[O,L]=S.useState(null),[M,J]=S.useState(null),[V,K]=S.useState([]),[z,G]=S.useState("carpetas"),[Y,ee]=S.useState(null),[P,Q]=S.useState(null),[X,te]=S.useState([]),[ae,se]=S.useState(""),oe={asignatura:qi[0],nivel:"—",contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[ce,me]=S.useState(oe),ke={asignatura:qi[0],nivel:"—",contenido:"",objetivosAprendizaje:"",plazoEntrega:new Date().toISOString().split("T")[0],cursosDestino:[],estudiantesDestino:[],duracionMinutos:90},[ne,_e]=S.useState(ke);S.useEffect(()=>{E(!0);const tt=nXe(t),xt=iXe(n),et=aXe(s),vt=sXe(wt=>{o(wt),E(!1)});return()=>{tt(),xt(),et(),vt()}},[]);const De=tt=>{me(xt=>({...xt,[tt.target.name]:tt.target.value}))},Ne=tt=>{_e(xt=>({...xt,[tt.target.name]:tt.target.value}))},fe=tt=>{me(xt=>({...xt,recursos:{...xt.recursos,[tt.target.name]:tt.target.value}}))},Ie=tt=>{tt.target.files&&K(Array.from(tt.target.files))},Me=tt=>{me(xt=>{const et=xt.tipos.includes(tt)?xt.tipos.filter(wt=>wt!==tt):[...xt.tipos,tt],vt={...xt.cantidadPreguntas};return et.includes(tt)?vt[tt]||(vt[tt]=lI[tt][0]):delete vt[tt],{...xt,tipos:et,cantidadPreguntas:vt}})},Xe=(tt,xt)=>{me(et=>({...et,cantidadPreguntas:{...et.cantidadPreguntas,[tt]:xt}}))},ye=(tt,xt=!1)=>{(xt?_e:me)(vt=>{const wt=vt.estudiantesDestino||[],yt=wt.includes(tt)?wt.filter(nr=>nr!==tt):[...wt,tt];return{...vt,estudiantesDestino:yt}})},Fe=()=>{const{tipos:tt,contenido:xt,asignatura:et,nivel:vt,cantidadPreguntas:wt}=ce;let yt=`Eres un experto diseñador de actividades pedagógicas. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${xt}"
Asignatura: ${et}
Nivel: ${vt}

Genera los siguientes elementos:
- introduccion: breve y motivadora
- actividades: objeto con propiedades por tipo:
`;return tt.forEach(nr=>{const xr=wt[nr]||lI[nr][0];switch(nr){case"Quiz":yt+=`- "Quiz": Array de ${xr} objetos { pregunta, opciones[4], respuestaCorrecta, puntaje(1) }
`;break;case"Comprensión de Lectura":yt+=`- "Comprensión de Lectura": Objeto { texto(150-200 palabras), preguntas: Array de ${xr} { pregunta, opciones[4], respuestaCorrecta, puntaje } }
`;break;case"Términos Pareados":yt+=`- "Términos Pareados": Array de ${xr} { concepto, definicion }
`;break;case"Desarrollo":yt+=`- "Desarrollo": Array de ${xr} { pregunta, rubrica }
`;break}}),yt},Re=()=>{const{contenido:tt,objetivosAprendizaje:xt,asignatura:et,nivel:vt}=ne;return`Eres experto en evaluación educativa y diseño de pruebas SIMCE.
Responde SOLO con JSON válido.

INFORMACIÓN:
- Asignatura: ${et}
- Nivel: ${vt}
- Contenido: ${tt}
- Objetivos: ${xt}

{
  "titulo": "Título",
  "instrucciones": "Instrucciones",
  "textos": [
    {
      "id": 1,
      "titulo": "Título del texto",
      "contenido": "200-300 palabras",
      "tipo": "narrativo",
      "palabras": 250
    }
  ],
  "preguntas": [
    {
      "numero": 1,
      "pregunta": "Enunciado",
      "opciones": ["Opción A", "Opción B", "Opción C", "Opción D"],
      "respuestaCorrecta": "A",
      "habilidad": "Localizar información",
      "justificacion": "Breve explicación",
      "textoId": 1
    }
  ]
}

Reglas:
- ${et==="Lenguaje y Comunicación"||et==="Lengua y Literatura"?"3-4 textos de distintos tipos":"2-3 textos informativos"}
- Exactamente 30 preguntas numeradas 1..30
- 4 opciones por pregunta (A-D)
- Habilidades válidas: ${cI.join(", ")}
- Para preguntas basadas en textos: incluir "textoId"
- Sin comentarios fuera del JSON`};function Ge(tt,xt){if(tt==="Desarrollo"&&Array.isArray(xt))return xt.map((et,vt)=>{if(typeof et=="string"){const wt=et.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return wt?{pregunta:Ql(wt[1],`desarrollo-pregunta-${vt}`),rubrica:Ql(wt[2],`desarrollo-rubrica-${vt}`)}:{pregunta:Ql(et,`desarrollo-pregunta-simple-${vt}`),rubrica:""}}if(et&&typeof et=="object"){const wt=Ql(et,`desarrollo-obj-pregunta-${vt}`,"pregunta","Pregunta","texto");let yt="";if(et.rubrica||et.Rubrica||et.rúbrica||et.Rúbrica){const nr=et.rubrica||et.Rubrica||et.rúbrica||et.Rúbrica;yt=ii(nr,`desarrollo-rubrica-${vt}`)}return{pregunta:wt,rubrica:yt}}return{pregunta:ii(et,`desarrollo-fallback-${vt}`),rubrica:""}});if(tt==="Términos Pareados"&&Array.isArray(xt))return xt.map((et,vt)=>{if(typeof et=="string"){const wt=et.match(/^(.+?)[\s:-–]+(.+)$/);return wt?{id:vt,concepto:Ql(wt[1],`pareados-concepto-${vt}`),definicion:Ql(wt[2],`pareados-definicion-${vt}`)}:{id:vt,concepto:Ql(et,`pareados-concepto-simple-${vt}`),definicion:""}}return et&&typeof et=="object"?{id:vt,concepto:Ql(et,`pareados-obj-concepto-${vt}`,"concepto","termino"),definicion:Ql(et,`pareados-obj-definicion-${vt}`,"definicion","significado")}:{id:vt,concepto:ii(et,`pareados-fallback-${vt}`),definicion:""}});if(tt==="Comprensión de Lectura"){if(xt&&typeof xt=="object"&&!Array.isArray(xt)&&Array.isArray(xt.preguntas))return{texto:Ql(xt,"comprension-texto","texto"),preguntas:xt.preguntas.map((et,vt)=>({pregunta:Ql(et,`comprension-pregunta-${vt}`,"pregunta"),opciones:Array.isArray(et.opciones)?et.opciones.map(wt=>ii(wt,`comprension-opcion-${vt}`)):[],respuestaCorrecta:ii(et.respuestaCorrecta,`comprension-respuesta-${vt}`),puntaje:typeof et.puntaje=="number"?et.puntaje:1}))};if(Array.isArray(xt)){const et=xt.map((wt,yt)=>Ql(wt,`comprension-bloque-${yt}`,"texto")).join(`

---

`),vt=xt.flatMap(wt=>Array.isArray(wt.preguntas)?wt.preguntas:[]);return{texto:et,preguntas:vt.map((wt,yt)=>({pregunta:Ql(wt,`comprension-combined-pregunta-${yt}`,"pregunta"),opciones:Array.isArray(wt.opciones)?wt.opciones.map(nr=>ii(nr,`comprension-combined-opcion-${yt}`)):[],respuestaCorrecta:ii(wt.respuestaCorrecta,`comprension-combined-respuesta-${yt}`),puntaje:typeof wt.puntaje=="number"?wt.puntaje:1}))}}}return tt==="Quiz"&&Array.isArray(xt)?xt.map((et,vt)=>({pregunta:Ql(et,`quiz-pregunta-${vt}`,"pregunta"),opciones:Array.isArray(et.opciones)?et.opciones.map(wt=>ii(wt,`quiz-opcion-${vt}`)):[],respuestaCorrecta:ii(et.respuestaCorrecta,`quiz-respuesta-${vt}`),puntaje:typeof et.puntaje=="number"?et.puntaje:1})):xt}const Ke=async tt=>{var xt;if(tt.preventDefault(),!ce.contenido.trim()||ce.tipos.length===0){j("Contenido y al menos un tipo de actividad son obligatorios.");return}y(!0),j(null);try{const et=await Promise.all(V.map(async we=>({nombre:we.name,url:await hXe(we)}))),vt="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",yt=new us(vt).getGenerativeModel({model:"gemini-1.5-flash-latest"}),nr=Fe();let Zr=await(await(await yt.generateContent(nr)).response).text();Zr=Zr.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const Kr=Zr.match(/\{[\s\S]*\}/);if(!Kr)throw new Error("La IA no devolvió JSON válido.");const he=JSON.parse(Kr[0]),je={};for(const we of ce.tipos){const Se=(xt=he.actividades)==null?void 0:xt[we];je[we]=Ge(we,Se)}const Ce={id:"",fechaCreacion:new Date().toISOString(),...ce,recursos:{...ce.recursos,archivos:et},introduccion:ii(he.introduccion,"introduccion")||"Actividad generada para reforzar el aprendizaje.",generatedContent:je};L(Ce)}catch(et){j(`Error al generar la actividad: ${(et==null?void 0:et.message)||et}`)}finally{y(!1)}},Ze=async tt=>{if(tt.preventDefault(),!ne.contenido.trim()||!ne.objetivosAprendizaje.trim()){j("Contenido y objetivos de aprendizaje son obligatorios.");return}y(!0),j(null);try{const xt="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",vt=new us(xt).getGenerativeModel({model:"gemini-1.5-flash-latest"}),wt=Re();let xr=await(await(await vt.generateContent(wt)).response).text();xr=xr.replace(/```json\s*/gi,"").replace(/```\s*$/g,"").replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").trim();const qr=xr.match(/\{[\s\S]*\}/);if(!qr)throw new Error("No se encontró JSON válido en la respuesta.");const Zr=qr[0].replace(/,(\s*[}\]])/g,"$1"),Kr=JSON.parse(Zr);if(!Kr.preguntas||!Array.isArray(Kr.preguntas))throw new Error("La respuesta de la IA no contiene un array de preguntas válido");const he=(Kr.textos||[]).map((we,Se)=>({id:we.id||Se+1,titulo:ii(we.titulo,`texto-titulo-${Se}`)||`Texto ${Se+1}`,contenido:ii(we.contenido,`texto-contenido-${Se}`)||"Contenido no disponible",tipo:["narrativo","informativo","argumentativo","poetico"].includes(we.tipo)?we.tipo:"informativo",palabras:we.palabras||(we.contenido?String(we.contenido).split(" ").length:0)})),je=Kr.preguntas.slice(0,30).map((we,Se)=>({numero:we.numero||Se+1,pregunta:ii(we.pregunta,`pregunta-${Se}`)||`Pregunta ${Se+1}`,opciones:Array.isArray(we.opciones)&&we.opciones.length>=4?we.opciones.slice(0,4).map((Te,Je)=>ii(Te,`pregunta-opcion-${Se}-${Je}`)):["A","B","C","D"],respuestaCorrecta:["A","B","C","D"].includes(we.respuestaCorrecta)?we.respuestaCorrecta:"A",habilidad:cI.includes(we.habilidad)?we.habilidad:cI[0],justificacion:ii(we.justificacion,`justificacion-${Se}`)||"Justificación no disponible",...we.textoId&&typeof we.textoId=="number"?{textoId:we.textoId}:{}})),Ce={id:"",fechaCreacion:new Date().toISOString(),...ne,titulo:ii(Kr.titulo,"prueba-titulo")||`Prueba ${ne.asignatura}`,instrucciones:ii(Kr.instrucciones,"prueba-instrucciones")||"Lee y responde.",textos:he,preguntas:je};J(Ce)}catch(xt){j(`Error al generar la prueba: ${(xt==null?void 0:xt.message)||xt}`)}finally{y(!1)}},ft=async()=>{if(O)try{_(!0),await AXe(O),me(oe),K([]),p(!1),L(null)}catch(tt){console.error("Error al guardar la actividad con archivos:",tt),j("No se pudo guardar la actividad. Revisa los archivos adjuntos.")}finally{_(!1)}},Nt=async()=>{if(M)try{_(!0);const tt={...M,cursosDestino:M.cursosDestino||[],estudiantesDestino:M.estudiantesDestino||[],textos:M.textos||[],preguntas:M.preguntas.map(xt=>({...xt,textoId:xt.textoId||null}))};await lXe(tt),_e(ke),x(!1),J(null)}catch(tt){console.error("Error al guardar la prueba:",tt),j("No se pudo guardar la prueba.")}finally{_(!1)}},Tt=S.useMemo(()=>{var et,vt,wt;const tt=c||d;if(!tt||!i.length)return[];const xt=new Map;return!((et=tt.cursosDestino)!=null&&et.length)&&!((vt=tt.estudiantesDestino)!=null&&vt.length)?[]:((wt=tt.estudiantesDestino)!=null&&wt.length&&i.filter(yt=>yt.profile===Wt.ESTUDIANTE&&tt.estudiantesDestino.includes(yt.nombreCompleto)).forEach(yt=>xt.set(yt.id,yt)),Array.from(xt.values()).sort((yt,nr)=>yt.nombreCompleto.localeCompare(nr.nombreCompleto)))},[c,d,i]),St=S.useMemo(()=>{const tt=(c==null?void 0:c.id)||(d==null?void 0:d.id);return a.filter(xt=>xt.actividadId===tt)},[a,c,d]),Dt=S.useMemo(()=>i.filter(tt=>tt.profile===Wt.ESTUDIANTE).sort((tt,xt)=>tt.nombreCompleto.localeCompare(xt.nombreCompleto)),[i]),gt=S.useMemo(()=>R.trim()?Dt.filter(tt=>tt.nombreCompleto.toLowerCase().includes(R.toLowerCase())):Dt,[Dt,R]),fr=S.useMemo(()=>{const tt=new Set;return e.forEach(xt=>{(xt.estudiantesDestino||[]).forEach(et=>{const vt=i.find(wt=>wt.profile===Wt.ESTUDIANTE&&wt.nombreCompleto===et);vt&&tt.add(vt.id)})}),r.forEach(xt=>{(xt.estudiantesDestino||[]).forEach(et=>{const vt=i.find(wt=>wt.profile===Wt.ESTUDIANTE&&wt.nombreCompleto===et);vt&&tt.add(vt.id)})}),a.forEach(xt=>tt.add(xt.estudianteId)),i.filter(xt=>xt.profile===Wt.ESTUDIANTE&&tt.has(xt.id)).sort((xt,et)=>xt.nombreCompleto.localeCompare(et.nombreCompleto))},[e,r,a,i]),zt=S.useMemo(()=>i.find(tt=>tt.id===Y)||null,[i,Y]),Mr=S.useMemo(()=>{if(!zt)return{asignadas:[],respuestas:[]};const tt=[...e.filter(et=>(et.estudiantesDestino||[]).includes(zt.nombreCompleto)).map(et=>({tipo:"Actividad",item:et})),...r.filter(et=>(et.estudiantesDestino||[]).includes(zt.nombreCompleto)).map(et=>({tipo:"Prueba",item:et}))],xt=a.filter(et=>et.estudianteId===zt.id);return{asignadas:tt,respuestas:xt}},[zt,e,r,a]),wr=()=>l.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[["carpetas","actividades","pruebas"].map(tt=>l.jsxs("button",{onClick:()=>{G(tt),u(null),f(null),ee(null)},className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition
            ${z===tt?"bg-amber-500 text-white shadow":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:[tt==="carpetas"&&l.jsx(SQ,{size:18}),tt==="actividades"&&l.jsx(WA,{size:18}),tt==="pruebas"&&l.jsx(cye,{size:18}),tt==="carpetas"?"Carpetas de Estudiantes":tt==="actividades"?"Actividades Remotas":"Pruebas Estandarizadas"]},tt)),l.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[l.jsxs("div",{className:"relative",children:[l.jsx(w4,{className:"absolute left-3 top-1/2 -translate-y-1/2 opacity-60",size:18}),l.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:R,onChange:tt=>D(tt.target.value),className:"pl-10 pr-3 py-2 rounded-xl bg-white border border-slate-200 focus:outline-none focus:ring-2 focus:ring-amber-400"})]}),z==="actividades"&&!O&&!c&&l.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[l.jsx(SC,{size:18})," Nueva"]}),z==="pruebas"&&!M&&!d&&l.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[l.jsx(SC,{size:18})," Nueva"]})]})]}),Dr=()=>{const tt=R?gt:fr;return tt.length?l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4",children:tt.map(xt=>{const et=a.filter(yt=>yt.estudianteId===xt.id),vt=et.length,wt=e.filter(yt=>(yt.estudiantesDestino||[]).includes(xt.nombreCompleto)).length+r.filter(yt=>(yt.estudiantesDestino||[]).includes(xt.nombreCompleto)).length;return l.jsxs("button",{onClick:()=>ee(xt.id),className:"group text-left rounded-2xl border border-slate-200 bg-white hover:shadow-md transition overflow-hidden",children:[l.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gradient-to-br from-amber-50 to-white",children:[l.jsx("div",{className:"rounded-xl p-3 bg-amber-100 text-amber-700",children:l.jsx(SQ,{})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"font-semibold text-slate-800 truncate",children:xt.nombreCompleto}),l.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[l.jsx(Fw,{size:14})," ",xt.curso||"—"]})]})]}),l.jsxs("div",{className:"p-4 grid grid-cols-3 text-center text-sm text-slate-600",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:wt}),l.jsx("p",{className:"text-xs",children:"Asignadas"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:vt}),l.jsx("p",{className:"text-xs",children:"Entregas"})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(V0,{size:16,className:"opacity-70"}),l.jsx("span",{className:"text-xs mt-1",children:et.length?ly(et.sort((yt,nr)=>(yt.fechaCompletado||"").localeCompare(nr.fechaCompletado||"")).slice(-1)[0].fechaCompletado):"—"})]})]})]},xt.id)})}):l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow text-center text-slate-500",children:"No hay estudiantes asignados aún."})},vn=()=>{if(!zt)return null;const{asignadas:tt,respuestas:xt}=Mr;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsxs("button",{onClick:()=>ee(null),className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900",children:[l.jsx(NC,{size:18})," Volver"]}),l.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Historial — ",zt.nombreCompleto]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Tipo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Título / Asignatura"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Plazo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:tt.map(({tipo:et,item:vt})=>{var xr;const wt=xt.find(qr=>qr.actividadId===vt.id),yt=et==="Actividad"?`${vt.asignatura} — ${(xr=vt.tipos)==null?void 0:xr.join(", ")}`:vt.titulo,nr=vt.plazoEntrega?ly(vt.plazoEntrega):"—";return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"px-4 py-3 text-sm",children:et}),l.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:l.jsx(Ia,{content:yt,context:"hist-titulo"})}),l.jsx("td",{className:"px-4 py-3 text-sm",children:nr}),l.jsx("td",{className:"px-4 py-3 text-sm",children:wt?l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[l.jsx(vo,{size:14})," Completado"]}):l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:[l.jsx(V0,{size:14})," Pendiente"]})}),l.jsx("td",{className:"px-4 py-3 text-sm",children:wt?`${wt.puntaje}/${wt.puntajeMaximo}`:"—"}),l.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:wt?wt.nota:"—"})]},vt.id)})})]})})]})},Tr=()=>{var tt,xt,et;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c?l.jsxs(l.Fragment,{children:[l.jsx(Ia,{content:c.asignatura,context:"actividad-asignatura"})," - ",c.tipos.join(", ")]}):l.jsx(Ia,{content:(d==null?void 0:d.titulo)||"Prueba Estandarizada",context:"prueba-titulo"})}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Plazo:"," ",ly((c==null?void 0:c.plazoEntrega)||(d==null?void 0:d.plazoEntrega)),d&&` | Duración: ${d.duracionMinutos} min`]})]}),l.jsxs("button",{onClick:()=>{u(null),f(null)},className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[l.jsx(NC,{size:18})," Volver al listado"]})]}),l.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"}),((tt=c==null?void 0:c.tipos)==null?void 0:tt.includes("Desarrollo"))&&l.jsx("th",{className:"px-4 py-3"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Tt.map(vt=>{var yt;const wt=St.find(nr=>nr.estudianteId===vt.id);return l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:vt.nombreCompleto}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:wt?l.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):l.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:wt?`${wt.puntaje}/${wt.puntajeMaximo}`:"-"}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-bold",children:wt?l.jsx("span",{className:parseFloat(wt.nota)>=4?"text-green-600":"text-red-600",children:wt.nota}):"-"}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:wt?fXe(wt.fechaCompletado):"-"}),((yt=c==null?void 0:c.tipos)==null?void 0:yt.includes("Desarrollo"))&&l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:wt?l.jsx("button",{onClick:()=>{var xr,qr,Zr;Q(wt);const nr=Array.from({length:((qr=(xr=c.generatedContent)==null?void 0:xr.Desarrollo)==null?void 0:qr.length)||0},(Kr,he)=>({index:he,puntaje:0,observacion:""}));te(nr),se(((Zr=wt==null?void 0:wt.revisionDocente)==null?void 0:Zr.observacionesGenerales)||"")},className:"text-blue-600 hover:text-blue-800 font-semibold",children:"Revisar Desarrollo"}):l.jsx("span",{className:"text-slate-400",children:"-"})})]},vt.id)})})]})})]}),P&&((xt=c==null?void 0:c.tipos)==null?void 0:xt.includes("Desarrollo"))&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 shadow-xl",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Revisión de Desarrollo — ",(P==null?void 0:P.estudianteNombre)||""]}),l.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto",children:(((et=c.generatedContent)==null?void 0:et.Desarrollo)||[]).map((vt,wt)=>{var yt,nr;return l.jsxs("div",{className:"p-3 border rounded-lg",children:[l.jsxs("p",{className:"font-semibold",children:[wt+1,". ",l.jsx(Ia,{content:vt.pregunta,context:`revision-pregunta-${wt}`})]}),vt.rubrica&&l.jsxs("p",{className:"text-xs text-slate-600 mt-2 bg-slate-50 p-2 rounded",children:[l.jsx("strong",{children:"Rúbrica:"})," ",l.jsx(Ia,{content:vt.rubrica,context:`revision-rubrica-${wt}`})]}),l.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[l.jsx("label",{className:"text-sm text-slate-700",children:"Puntaje:"}),l.jsx("input",{type:"number",min:0,step:.5,value:((yt=X[wt])==null?void 0:yt.puntaje)??0,onChange:xr=>{const qr=Number(xr.target.value)||0;te(Zr=>{const Kr=[...Zr];return Kr[wt]={...Kr[wt]||{index:wt,puntaje:0},puntaje:qr},Kr})},className:"w-24 border-slate-300 rounded-md"}),l.jsx("input",{type:"text",placeholder:"Observación (opcional)",value:((nr=X[wt])==null?void 0:nr.observacion)||"",onChange:xr=>{const qr=xr.target.value;te(Zr=>{const Kr=[...Zr];return Kr[wt]={...Kr[wt]||{index:wt,puntaje:0},observacion:qr},Kr})},className:"flex-1 border-slate-300 rounded-md"})]})]},wt)})}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Observaciones Generales"}),l.jsx("textarea",{rows:3,value:ae,onChange:vt=>se(vt.target.value),className:"w-full border-slate-300 rounded-md"})]}),l.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>{Q(null),te([]),se("")},className:"px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),l.jsx("button",{onClick:async()=>{if(P)try{k(!0);const vt=Number(P.puntaje)||0,wt=Number(P.puntajeMaximo)||0,yt=(X||[]).reduce((qr,Zr)=>qr+(Number(Zr.puntaje)||0),0),nr=vt+yt,xr=uXe(nr,wt);await cXe(P.id,{puntaje:nr,puntajeMaximo:wt,nota:xr,revisionDocente:{completada:!0,observacionesGenerales:ae||"",detalle:X||[],puntajeDocente:yt}}),Q(null),te([]),se("")}catch(vt){console.error("Error guardando revisión:",vt),j("No se pudo guardar la revisión del docente.")}finally{k(!1)}},disabled:B,className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400",children:B?"Guardando...":"Guardar Revisión"})]})]})})]})},Ga=()=>{var tt,xt;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),l.jsxs("button",{onClick:()=>p(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[l.jsx(NC,{size:18})," Volver"]})]}),l.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad."}),l.jsxs("form",{onSubmit:Ke,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),l.jsx("select",{name:"asignatura",value:ce.asignatura,onChange:De,className:"w-full border-slate-300 rounded-md shadow-sm",children:qi.map(et=>l.jsx("option",{value:et,children:et},et))})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos (Opcional)"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones"}),l.jsx("textarea",{name:"instrucciones",value:(tt=ce.recursos)==null?void 0:tt.instrucciones,onChange:fe,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Ej: Lee y luego responde..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces"}),l.jsx("textarea",{name:"enlaces",value:(xt=ce.recursos)==null?void 0:xt.enlaces,onChange:fe,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Pega un enlace por línea..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos"}),l.jsx("input",{type:"file",multiple:!0,onChange:Ie,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Sólo estudiantes)"}),l.jsxs("div",{children:[l.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:R,onChange:et=>D(et.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(R?gt:Dt).map(et=>{var vt;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(vt=ce.estudiantesDestino)==null?void 0:vt.includes(et.nombreCompleto),onChange:()=>ye(et.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:et.nombreCompleto,children:et.nombreCompleto})]},et.id)})})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{name:"contenido",value:ce.contenido,onChange:De,required:!0,rows:4,placeholder:"Temas, conceptos clave o texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),l.jsx("input",{type:"date",name:"plazoEntrega",value:ce.plazoEntrega,onChange:De,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),l.jsx("div",{className:"space-y-3",children:Nbe.map(et=>l.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:ce.tipos.includes(et),onChange:()=>Me(et),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:et})]}),ce.tipos.includes(et)&&l.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),lI[et].map(vt=>l.jsx("button",{type:"button",onClick:()=>Xe(et,vt),className:`px-3 py-1 rounded-full font-semibold text-xs ${ce.cantidadPreguntas[et]===vt?"bg-amber-500 text-white":"bg-slate-200"}`,children:vt},vt))]})]},et))})]})]}),N&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-2",children:N}),l.jsx("div",{className:"pt-2 text-right",children:l.jsxs("button",{type:"submit",disabled:b,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center justify-center gap-2",children:[b?l.jsx(V0,{className:"animate-spin",size:18}):null,b?"Generando...":"Generar y Previsualizar"]})})]})]})},nn=()=>{var tt;return l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),l.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar."}),l.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[l.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:l.jsx(Ia,{content:O==null?void 0:O.introduccion,context:"preview-introduccion"})})]}),(O==null?void 0:O.recursos)&&(O.recursos.instrucciones||O.recursos.enlaces||((tt=O.recursos.archivos)==null?void 0:tt.length))&&l.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),l.jsxs("div",{className:"space-y-3",children:[O.recursos.instrucciones&&l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:l.jsx(Ia,{content:O.recursos.instrucciones,context:"preview-instrucciones"})}),O.recursos.enlaces&&l.jsx("div",{children:O.recursos.enlaces.split(`
`).map((xt,et)=>xt.trim()&&l.jsx("a",{href:xt,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:xt},et))}),O.recursos.archivos&&O.recursos.archivos.length>0&&l.jsx("ul",{className:"list-disc list-inside",children:O.recursos.archivos.map(xt=>l.jsx("li",{className:"text-slate-700",children:xt.nombre},xt.nombre))})]})]}),O==null?void 0:O.tipos.map(xt=>{const et=O.generatedContent[xt];return et?l.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:xt}),l.jsxs("div",{className:"space-y-4 text-sm",children:[xt==="Quiz"&&Array.isArray(et)&&et.map((vt,wt)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[wt+1,". ",l.jsx(Ia,{content:vt.pregunta,context:`preview-quiz-pregunta-${wt}`})]}),l.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:vt.opciones.map((yt,nr)=>l.jsxs("li",{children:[l.jsxs("strong",{children:[String.fromCharCode(65+nr),"."]})," ",l.jsx(Ia,{content:yt,context:`preview-quiz-opcion-${wt}-${nr}`})]},nr))}),l.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",l.jsx(Ia,{content:vt.respuestaCorrecta,context:`preview-quiz-respuesta-${wt}`})]})]},wt)),xt==="Comprensión de Lectura"&&et&&typeof et=="object"&&"preguntas"in et&&Array.isArray(et.preguntas)&&l.jsxs("div",{children:[l.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:l.jsx(Ia,{content:et.texto,context:"preview-lectura-texto"})}),et.preguntas.map((vt,wt)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[wt+1,". ",l.jsx(Ia,{content:vt.pregunta,context:`preview-lectura-pregunta-${wt}`})]}),l.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:vt.opciones.map((yt,nr)=>l.jsxs("li",{children:[l.jsxs("strong",{children:[String.fromCharCode(65+nr),"."]})," ",l.jsx(Ia,{content:yt,context:`preview-lectura-opcion-${wt}-${nr}`})]},nr))}),l.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",l.jsx(Ia,{content:vt.respuestaCorrecta,context:`preview-lectura-respuesta-${wt}`})]})]},wt))]}),xt==="Términos Pareados"&&Array.isArray(et)&&l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border border-slate-200",children:[l.jsx("thead",{className:"bg-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),l.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definición"})]})}),l.jsx("tbody",{children:et.map((vt,wt)=>l.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[l.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:l.jsx(Ia,{content:vt.concepto,context:`preview-pareado-concepto-${wt}`})}),l.jsx("td",{className:"p-2 align-top text-slate-700",children:l.jsx(Ia,{content:vt.definicion,context:`preview-pareado-definicion-${wt}`})})]},vt.id))})]})}),xt==="Desarrollo"&&Array.isArray(et)&&et.map((vt,wt)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[wt+1,". ",l.jsx(Ia,{content:vt.pregunta,context:`preview-desarrollo-pregunta-${wt}`})]}),l.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[l.jsx("strong",{className:"font-semibold",children:"Rúbrica:"})," ",l.jsx(Ia,{content:vt.rubrica,context:`preview-desarrollo-rubrica-${wt}`})]})]},wt))]})]},xt):null})]}),l.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>L(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),l.jsx("button",{onClick:ft,disabled:w,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:w?"Guardando...":"Confirmar y Asignar"})]})]})},oa=()=>l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify_between items-start",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Prueba Estandarizada"}),l.jsxs("button",{onClick:()=>x(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[l.jsx(NC,{size:18})," Volver"]})]}),l.jsxs("form",{onSubmit:Ze,className:"space-y-6 mt-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),l.jsx("select",{name:"asignatura",value:ne.asignatura,onChange:Ne,className:"w-full border-slate-300 rounded-md shadow-sm",children:qi.map(tt=>l.jsx("option",{value:tt,children:tt},tt))})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Objetivos de Aprendizaje"}),l.jsx("textarea",{name:"objetivosAprendizaje",value:ne.objetivosAprendizaje,onChange:Ne,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Describe OA o contenidos evaluados..."})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Contenido Base"}),l.jsx("textarea",{name:"contenido",value:ne.contenido,onChange:Ne,rows:4,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),l.jsx("input",{type:"date",name:"plazoEntrega",value:ne.plazoEntrega,onChange:Ne,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Sólo estudiantes)"}),l.jsxs("div",{children:[l.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:R,onChange:tt=>D(tt.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(R?gt:Dt).map(tt=>{var xt;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(xt=ne.estudiantesDestino)==null?void 0:xt.includes(tt.nombreCompleto),onChange:()=>ye(tt.nombreCompleto,!0),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:tt.nombreCompleto,children:tt.nombreCompleto})]},tt.id)})})]})]})]}),N&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:N}),l.jsx("div",{className:"text-right",children:l.jsxs("button",{type:"submit",disabled:b,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center gap-2",children:[b?l.jsx(V0,{className:"animate-spin",size:18}):null,b?"Generando...":"Generar y Previsualizar"]})})]})]}),Ba=()=>{var tt,xt;return l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización Prueba"}),l.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa y confirma."}),l.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[l.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:l.jsx(Ia,{content:M==null?void 0:M.titulo,context:"preview-prueba-titulo"})}),l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:l.jsx(Ia,{content:M==null?void 0:M.instrucciones,context:"preview-prueba-instrucciones"})})]}),(tt=M==null?void 0:M.textos)!=null&&tt.length?l.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Textos"}),l.jsx("ol",{className:"space-y-2 list-decimal list-inside",children:M.textos.map((et,vt)=>l.jsxs("li",{children:[l.jsxs("p",{className:"font-semibold",children:[l.jsx(Ia,{content:et.titulo,context:`preview-texto-titulo-${vt}`}),l.jsxs("span",{className:"text-xs text-slate-500",children:["(",et.tipo,")"]})]}),l.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap mt-1",children:l.jsx(Ia,{content:et.contenido,context:`preview-texto-contenido-${vt}`})})]},et.id))})]}):null,(xt=M==null?void 0:M.preguntas)!=null&&xt.length?l.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Preguntas (muestra)"}),M.preguntas.slice(0,10).map((et,vt)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[et.numero,". ",l.jsx(Ia,{content:et.pregunta,context:`preview-pregunta-texto-${vt}`})]}),l.jsx("ul",{className:"list-disc pl-6 text-sm mt-1",children:et.opciones.map((wt,yt)=>l.jsx("li",{children:l.jsx(Ia,{content:wt,context:`preview-pregunta-opcion-${vt}-${yt}`})},yt))}),l.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-1",children:["Correcta: ",et.respuestaCorrecta]})]},et.numero))]}):null]}),l.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>J(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),l.jsx("button",{onClick:Nt,disabled:w,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:w?"Guardando...":"Confirmar y Asignar"})]})]})},rn=()=>l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),l.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[l.jsx(SC,{size:18})," Crear Nueva"]})]}),l.jsx("div",{className:"space-y-4",children:e.length>0?e.map(tt=>{var vt;const xt=[];(vt=tt.estudiantesDestino)!=null&&vt.length&&xt.push(`Estudiantes: ${tt.estudiantesDestino.length}`);const et=xt.length?xt.join(" | "):"Estudiantes seleccionados";return l.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800",children:[l.jsx(Ia,{content:tt.asignatura,context:`lista-asignatura-${tt.id}`})," — ",tt.tipos.join(", ")]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",et," | Creado: ",ly(tt.fechaCreacion)]})]}),l.jsx("button",{onClick:()=>u(tt),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},tt.id)}):l.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Use "Crear Nueva".'})})]}),gr=()=>l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Pruebas Estandarizadas"}),l.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[l.jsx(SC,{size:18})," Crear Nueva"]})]}),l.jsx("div",{className:"space-y-4",children:r.length>0?r.map(tt=>l.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800",children:l.jsx(Ia,{content:tt.titulo,context:`lista-prueba-titulo-${tt.id}`})}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Creado: ",ly(tt.fechaCreacion)]})]}),l.jsx("button",{onClick:()=>f(tt),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},tt.id)):l.jsx("p",{className:"text-slate-500 text-center py-6",children:"No hay pruebas creadas."})})]});return I?l.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):l.jsxs("div",{className:"animate-fade-in",children:[wr(),Y?vn():M?Ba():O?nn():c||d?Tr():z==="pruebas"?g?oa():gr():z==="actividades"?h?Ga():rn():Dr()]})},pXe="actividades_remotas",FL="respuestas_actividades",wle=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(e&&typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if(e&&typeof e.seconds=="number"&&typeof e.nanoseconds=="number"){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}return null},uq=e=>{const t=wle(e);return t?t.toISOString():void 0},gXe=e=>{const t=wle(e);return t?t.toISOString().split("T")[0]:void 0},OL=e=>{const t=e.data();return{id:e.id,...t,fechaCreacion:uq(t.fechaCreacion)||t.fechaCreacion,plazoEntrega:gXe(t.plazoEntrega)||t.plazoEntrega,fechaCompletado:uq(t.fechaCompletado)||t.fechaCompletado}},x1=(e,t)=>{var n,a;console.error(`❌ Error en ${t}:`,e);const r={name:"FirestoreError",message:e.message||"Error desconocido",code:e.code};return e.code==="failed-precondition"&&((n=e.message)!=null&&n.includes("requires an index"))?(r.message="Se requiere configurar un índice en la base de datos. Contacta al administrador.",console.log("🔗 Enlace para crear índice:",(a=e.message.match(/https:\/\/[^\s]+/))==null?void 0:a[0])):e.code==="permission-denied"?r.message="No tienes permisos para acceder a estos datos.":e.code==="unavailable"&&(r.message="Servicio temporalmente no disponible. Intenta nuevamente."),r},xXe=e=>new Promise(t=>setTimeout(t,e)),vXe=async(e,t=3,r="operación")=>{for(let n=1;n<=t;n++)try{return await e()}catch(a){if(console.log(`⚠️ Intento ${n} falló en ${r}:`,a.code||a.message),n===t)throw a;if(["unavailable","deadline-exceeded","internal"].includes(a.code)){const s=Math.pow(2,n)*1e3;console.log(`⏱️ Reintentando en ${s}ms...`),await xXe(s)}else throw a}throw new Error("Max retries exceeded")},bXe=(e,t,r)=>{console.log("🔔 Suscribiéndose a actividades disponibles para:",e.nombreCompleto);const n=$t(kt(ht,pXe),Sr("fechaCreacion","desc"));return pr(n,{next:s=>{try{console.log("📋 Actividades recibidas desde Firestore:",s.docs.length);const o=s.docs.map(c=>OL(c)).filter(c=>{var u,d,f,h,p;if(!((u=c.cursosDestino)!=null&&u.length)&&!((d=c.estudiantesDestino)!=null&&d.length)){const g=c.nivel.charAt(0);return(f=e.curso)==null?void 0:f.startsWith(g)}return!!((h=c.cursosDestino)!=null&&h.includes(e.curso||"")||(p=c.estudiantesDestino)!=null&&p.includes(e.nombreCompleto))});console.log("✅ Actividades filtradas para el estudiante:",o.length),t(o)}catch(i){console.error("❌ Error procesando datos de actividades:",i);const o=x1(i,"procesamiento de actividades");r==null||r(o)}},error:s=>{const i=x1(s,"suscripción a actividades");r==null||r(i)}})},yXe=(e,t,r)=>{console.log("🔔 Suscribiéndose a respuestas del estudiante:",e);const n=$t(kt(ht,FL),Jr("estudianteId","==",e),Sr("fechaCompletado","desc"));return pr(n,{next:s=>{try{console.log("📝 Respuestas recibidas desde Firestore:",s.docs.length);const i=s.docs.map(o=>{var u;const c=OL(o);return console.log(`📄 Respuesta ${o.id}:`,{actividadId:c.actividadId,puntaje:c.puntaje,nota:c.nota,requiereRevision:c.requiereRevisionDocente,revisionCompletada:(u=c.revisionDocente)==null?void 0:u.completada,fechaCompletado:c.fechaCompletado}),c});console.log("✅ Enviando respuestas procesadas al componente:",i.length),t(i)}catch(i){console.error("❌ Error procesando respuestas:",i);const o=x1(i,"procesamiento de respuestas");r==null||r(o)}},error:s=>{var o;const i=x1(s,"suscripción a respuestas");if(s.code==="failed-precondition"&&((o=s.message)!=null&&o.includes("requires an index")))return console.log("⚠️ Error de índice detectado, intentando consulta alternativa..."),wXe(e,t,r);r==null||r(i)}})},wXe=(e,t,r)=>{console.log("🔄 Usando consulta alternativa sin ordenamiento...");const n=$t(kt(ht,FL),Jr("estudianteId","==",e));return pr(n,{next:s=>{try{console.log("📝 Respuestas recibidas (consulta alternativa):",s.docs.length);const i=s.docs.map(o=>OL(o)).sort((o,c)=>new Date(c.fechaCompletado).getTime()-new Date(o.fechaCompletado).getTime());console.log("✅ Respuestas ordenadas manualmente:",i.length),t(i)}catch(i){console.error("❌ Error procesando respuestas (alternativa):",i);const o=x1(i,"procesamiento de respuestas alternativo");r==null||r(o)}},error:s=>{const i=x1(s,"suscripción alternativa a respuestas");r==null||r(i)}})},EXe=async e=>vXe(async()=>{console.log("💾 Guardando respuesta de actividad:",{actividadId:e.actividadId,estudianteId:e.estudianteId,puntaje:e.puntaje,nota:e.nota});const t={...e,fechaCompletado:sr.fromDate(new Date(e.fechaCompletado))},r=await Tn(kt(ht,FL),t);return console.log("✅ Respuesta guardada exitosamente con ID:",r.id),r.id},3,"guardado de respuesta"),CXe=.6,_Xe=(e,t,r=CXe,n=2)=>{if(!t||t<=0)return n.toFixed(1);const a=t*r;let s;return e>=a?s=4+3*(e-a)/(t-a+1e-9):s=1+3*e/(a+1e-9),s=Math.max(n,Math.min(7,s)),s.toFixed(1)},cO=({className:e="w-5 h-5"})=>l.jsxs("svg",{className:`animate-spin ${e}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),NXe=async(e,t,r=3)=>{var i;const n="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",s=new us(n).getGenerativeModel({model:"gemini-1.5-flash-latest"});for(let o=1;o<=r;o++)try{console.log(`🤖 Intento ${o} de generar feedback con IA`);const c=kXe(e,t);let f=(await(await s.generateContent(c)).response).text().trim();f=f.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const h=f.match(/\{[\s\S]*\}$/);try{const p=JSON.parse(h?h[0]:f);return console.log(`✅ Feedback generado exitosamente en intento ${o}`),p}catch(p){throw console.warn(`⚠️ Error al parsear JSON en intento ${o}:`,p),new Error("JSON parsing failed")}}catch(c){if(console.log(`❌ Error en intento ${o}:`,c.message),(i=c.message)!=null&&i.includes("503")&&o<r){const u=Math.pow(2,o)*1e3;console.log(`⏱️ Esperando ${u}ms antes del siguiente intento...`),await new Promise(d=>setTimeout(d,u));continue}if(o===r)return console.log("🚫 Todos los intentos fallaron. Procediendo sin IA."),null}return null},SXe=async(e,t,r)=>{console.log("💾 Iniciando guardado de respuesta...");try{const n=await EXe(e);console.log("✅ Respuesta base guardada con ID:",n);const a={id:n,...e};try{const s=await NXe(t,r);if(s){const{updateDoc:i,doc:o}=await A1(async()=>{const{updateDoc:u,doc:d}=await Promise.resolve().then(()=>Ove);return{updateDoc:u,doc:d}},void 0),{db:c}=await A1(async()=>{const{db:u}=await Promise.resolve().then(()=>lee);return{db:u}},void 0);return await i(o(c,"respuestas_actividades",n),{retroalimentacionAI:s}),console.log("🤖 Feedback de IA agregado exitosamente"),{...a,retroalimentacionAI:s}}return a}catch(s){return console.warn("⚠️ No se pudo generar feedback de IA, pero la respuesta fue guardada:",s),a}}catch(n){throw console.error("❌ Error crítico al guardar respuesta:",n),n}},yo=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>["comprension","analisis","argumentacion","creatividad","claridad","precision","organizacion"].includes(n))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},Vs=(e,t)=>{if(t&&yo(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>Vs(a,`${t}-array-item`)).join(", ");const r=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of r)if(e[a]&&typeof e[a]=="string")return e[a];if(Object.keys(e).some(a=>["comprension","analisis","argumentacion","creatividad","claridad","precision"].includes(a)))return"[Criterios de evaluación]";try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},kd=(e,t,...r)=>{if(yo(e,`extractTextSafely-${t}`),!e)return"";for(const a of r)if(e[a]){const s=Vs(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}const n=["texto","pregunta","enunciado","contenido","descripcion","value","label"];for(const a of n)if(e[a]){const s=Vs(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}return typeof e=="string"?e:"[Sin contenido disponible]"},ci=({content:e,context:t="unknown"})=>{try{const r=Vs(e,`UltraSafeRenderer-${t}`);return l.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),l.jsx("span",{children:"[Error al mostrar contenido]"})}};function dq(e){if(console.log("🔍 Normalizando lectura:",e),yo(e,"normalizeLectura-input"),!e)return{texto:"",preguntas:[]};const t=(r,n)=>{yo(r,`normalizeQuestion-${n}`);const a=Array.isArray(r==null?void 0:r.opciones)?r.opciones.map((s,i)=>Vs(s,`opcion-${n}-${i}`)).filter(Boolean):[];return{pregunta:kd(r,`pregunta-${n}`,"pregunta","texto"),opciones:a,respuestaCorrecta:Vs(r==null?void 0:r.respuestaCorrecta,`respuestaCorrecta-${n}`),puntaje:typeof(r==null?void 0:r.puntaje)=="number"?r.puntaje:1}};if(!Array.isArray(e)&&Array.isArray(e.preguntas)){const r=e;return{texto:kd(r,"lectura-texto","texto"),preguntas:(r.preguntas||[]).map(t)}}if(Array.isArray(e)){const r=e.map((a,s)=>kd(a,`lectura-bloque-${s}`,"texto")).filter(Boolean).join(`

---

`),n=e.flatMap((a,s)=>(yo(a,`lectura-bloque-preguntas-${s}`),Array.isArray(a==null?void 0:a.preguntas)?a.preguntas:[])).map(t);return{texto:r,preguntas:n}}return{texto:"",preguntas:[]}}function Aq(e){return console.log("🔍 Normalizando pareados:",e),yo(e,"normalizePareados-input"),e?!Array.isArray(e)&&Array.isArray(e.pares)?e.pares.map((t,r)=>(yo(t,`pareado-${r}`),{izquierda:kd(t,`pareado-izq-${r}`,"izquierda","concepto"),derecha:kd(t,`pareado-der-${r}`,"derecha","definicion"),puntaje:typeof(t==null?void 0:t.puntaje)=="number"?t.puntaje:1})):Array.isArray(e)?e.map((t,r)=>(yo(t,`pareado-array-${r}`),{izquierda:kd(t,`pareado-concepto-${r}`,"concepto","izquierda"),derecha:kd(t,`pareado-definicion-${r}`,"definicion","derecha"),puntaje:1})):[]:[]}function fq(e){return console.log("🔍 Normalizando desarrollo:",e),yo(e,"normalizeDesarrollo-input"),e?!Array.isArray(e)&&Array.isArray(e.preguntas)?e.preguntas.map((t,r)=>(yo(t,`desarrollo-pregunta-${r}`),{enunciado:kd(t,`desarrollo-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):Array.isArray(e)?e.map((t,r)=>(yo(t,`desarrollo-array-${r}`),t!=null&&t.rubrica&&typeof t.rubrica=="object"&&console.warn(`🚨 Rubrica detectada como objeto en item ${r}, ignorando`,t.rubrica),{enunciado:kd(t,`desarrollo-array-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):[]:[]}const kXe=(e,t)=>{const r=t.items.filter(i=>i.esCorrecta===!1),n=t.items.filter(i=>i.tipo==="Desarrollo"),a=r.map(i=>`- Pregunta: "${Vs(i.pregunta,"feedback-prompt-pregunta")}"
  - Respuesta del estudiante: "${Vs(i.respuestaUsuario,"feedback-prompt-respuesta")}"
  - Respuesta correcta: "${Vs(i.respuestaCorrecta,"feedback-prompt-correcta")}"`).join(`
`),s=n.map(i=>`- Pregunta abierta: "${Vs(i.pregunta,"feedback-prompt-desarrollo-pregunta")}"
  - Respuesta del estudiante: """${Vs(i.respuestaUsuario,"feedback-prompt-desarrollo-respuesta")}"""`).join(`
`);return`
Eres tutor pedagógico. Actividad de "${Vs(e.asignatura,"feedback-prompt-asignatura")}" sobre "${Vs(e.contenido,"feedback-prompt-contenido")}".
Devuelve SOLO un JSON con esta forma:

{
  "logros": "1 párrafo motivador, reconociendo aciertos",
  "desafios": [
    { "pregunta": "...", "explicacionDelError": "≤50 palabras, por qué la correcta es adecuada" }
  ],
  "comentariosDesarrollo": [
    { "pregunta": "...", "retroalimentacionBreve": "≤60 palabras, concreta y constructiva. No asignes nota." }
  ]
}

ERRORES (alternativa / lectura / pareados):
${a||"- Sin errores de alternativa."}

RESPUESTAS DE DESARROLLO:
${s||"- Sin preguntas de desarrollo."}
`.trim()},BXe=({actividad:e,onComplete:t,currentUser:r})=>{const[n,a]=S.useState({}),[s,i]=S.useState(!1),o=(u,d)=>{const f={...n,[u]:d};a(f)},c=async()=>{i(!0);let u=0,d=0;const f={items:[]};e.tipos.forEach(p=>{const g=e.generatedContent[p],x=n[p];if(console.log(`🔍 Procesando tipo: ${p}`,g),yo(g,`handleSubmit-${p}`),!!g){if((p==="Quiz"||p==="Comprensión de Lectura")&&(p==="Quiz"?Array.isArray(g)?g.map((y,w)=>(yo(y,`quiz-question-${w}`),{pregunta:kd(y,`quiz-pregunta-${w}`,"pregunta"),opciones:Array.isArray(y==null?void 0:y.opciones)?y.opciones.map((_,B)=>Vs(_,`quiz-opcion-${w}-${B}`)):[],respuestaCorrecta:Vs(y==null?void 0:y.respuestaCorrecta,`quiz-respuesta-${w}`),puntaje:typeof(y==null?void 0:y.puntaje)=="number"?y.puntaje:1})):[]:dq(g).preguntas).forEach((y,w)=>{const _=x==null?void 0:x[w],B=_===y.respuestaCorrecta,k=y.puntaje??1;B&&(u+=k),d+=k,f.items.push({pregunta:y.pregunta,respuestaUsuario:Vs(_,`feedback-respuesta-${w}`)||"No respondida",respuestaCorrecta:y.respuestaCorrecta,esCorrecta:B,puntajeObtenido:B?k:0,tipo:p})}),p==="Términos Pareados"){const b=Aq(g),y=x||{};b.forEach((w,_)=>{const B=y[_],k=B===w.derecha,I=w.puntaje??1;k&&(u+=I),d+=I,f.items.push({pregunta:`${w.izquierda} → ¿?`,respuestaUsuario:Vs(B,`pareado-feedback-${_}`)||"No respondida",respuestaCorrecta:w.derecha,esCorrecta:k,puntajeObtenido:k?I:0,tipo:p})})}if(p==="Desarrollo"){const b=fq(g),y=x||{};b.forEach((w,_)=>{const B=Vs(y[_],`desarrollo-feedback-${_}`).trim();f.items.push({pregunta:w.enunciado,respuestaUsuario:B||"No respondida",respuestaCorrecta:"Revisión docente",esCorrecta:null,puntajeObtenido:0,tipo:p})})}}});const h={puntaje:u,puntajeMaximo:d,respuestas:n,nota:_Xe(u,d),requiereRevisionDocente:e.tipos.includes("Desarrollo")};t(h,f)};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[l.jsx("h2",{className:"text-2xl font-bold text-sky-800 mb-2",children:l.jsx(ci,{content:e.asignatura,context:"actividad-asignatura"})}),l.jsx("div",{className:"text-slate-700 whitespace-pre-wrap",children:l.jsx(ci,{content:e.introduccion,context:"actividad-introduccion"})})]}),e.tipos.map(u=>{const d=e.generatedContent[u];if(console.log(`🔍 Renderizando tipo: ${u}`,d),yo(d,`render-${u}`),!d)return null;switch(u){case"Quiz":{const f=Array.isArray(d)?d.map((h,p)=>(yo(h,`render-quiz-question-${p}`),{pregunta:kd(h,`render-quiz-pregunta-${p}`,"pregunta"),opciones:Array.isArray(h==null?void 0:h.opciones)?h.opciones.map((g,x)=>Vs(g,`render-quiz-opcion-${p}-${x}`)):[],respuestaCorrecta:Vs(h==null?void 0:h.respuestaCorrecta,`render-quiz-respuesta-${p}`),puntaje:typeof(h==null?void 0:h.puntaje)=="number"?h.puntaje:1})):[];return l.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Quiz"}),l.jsx("div",{className:"space-y-6",children:f.map((h,p)=>l.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[l.jsxs("p",{className:"font-semibold text-slate-800",children:[p+1,". ",l.jsx(ci,{content:h.pregunta,context:`quiz-pregunta-${p}`})]}),l.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,x)=>{var b;return l.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[l.jsx("input",{type:"radio",name:`q-${u}-${p}`,value:g,checked:((b=n[u])==null?void 0:b[p])===g,onChange:()=>o(u,{...n[u]||{},[p]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),l.jsx("span",{children:l.jsx(ci,{content:g,context:`quiz-opcion-${p}-${x}`})})]},x)})})]},p))})]},u)}case"Comprensión de Lectura":{const f=dq(d);return l.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Comprensión de Lectura"}),l.jsx("div",{className:"mb-6 p-4 rounded bg-slate-50 border whitespace-pre-wrap",children:l.jsx(ci,{content:f.texto,context:"lectura-texto"})}),l.jsx("div",{className:"space-y-6",children:f.preguntas.map((h,p)=>l.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[l.jsxs("p",{className:"font-semibold text-slate-800",children:[p+1,". ",l.jsx(ci,{content:h.pregunta,context:`lectura-pregunta-${p}`})]}),l.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,x)=>{var b;return l.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[l.jsx("input",{type:"radio",name:`q-${u}-${p}`,value:g,checked:((b=n[u])==null?void 0:b[p])===g,onChange:()=>o(u,{...n[u]||{},[p]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),l.jsx("span",{children:l.jsx(ci,{content:g,context:`lectura-opcion-${p}-${x}`})})]},x)})})]},p))})]},u)}case"Términos Pareados":{const f=Aq(d),h=n[u]||{},p=[...new Set(f.map(g=>g.derecha))];for(let g=p.length-1;g>0;g--){const x=Math.floor(Math.random()*(g+1));[p[g],p[x]]=[p[x],p[g]]}return l.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Términos Pareados"}),l.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:f.map((g,x)=>l.jsxs("div",{className:"p-3 rounded border bg-slate-50",children:[l.jsxs("p",{className:"font-semibold text-slate-800 mb-2",children:[x+1,". ",l.jsx(ci,{content:g.izquierda,context:`pareado-izq-${x}`})]}),l.jsxs("select",{className:"w-full border rounded p-2 bg-white",value:h[x]??"",onChange:b=>o(u,{...h,[x]:b.target.value}),children:[l.jsx("option",{value:"",children:"— Selecciona la pareja —"}),p.map((b,y)=>l.jsx("option",{value:b,children:Vs(b,`pareado-opcion-${x}-${y}`)},y))]})]},`${g.izquierda}-${x}`))})]},u)}case"Desarrollo":{const f=fq(d),h=n[u]||{};return l.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Preguntas de Desarrollo"}),l.jsx("div",{className:"space-y-6",children:f.map((p,g)=>l.jsxs("div",{className:"space-y-2",children:[l.jsxs("p",{className:"font-semibold text-slate-800",children:[g+1,". ",l.jsx(ci,{content:p.enunciado,context:`desarrollo-enunciado-${g}`})]}),l.jsx("textarea",{className:"w-full min-h-[120px] border rounded p-3",placeholder:"Escribe tu respuesta…",value:h[g]??"",onChange:x=>o(u,{...h,[g]:x.target.value})})]},g))}),l.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Este apartado será revisado y calificado por tu profesor/a."})]},u)}default:return null}}),l.jsx("div",{className:"text-right mt-8 flex justify-end gap-4",children:l.jsxs("button",{onClick:c,disabled:s,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:[s?l.jsx(cO,{className:"w-5 h-5 mr-2"}):null,s?"Evaluando...":"Entregar Actividad"]})})]})},jXe=({currentUser:e})=>{var j,R,D;const[t,r]=S.useState(!0),[n,a]=S.useState("list"),[s,i]=S.useState(!1),[o,c]=S.useState([]),[u,d]=S.useState([]),[f,h]=S.useState(null),[p,g]=S.useState(null),[x,b]=S.useState(null),[y,w]=S.useState("connecting");S.useEffect(()=>{console.log("🚀 Iniciando carga de datos para usuario:",e.nombreCompleto);let O=!1,L=!1,M=!1,J=!1;const V=()=>{(O||M)&&(L||J)&&(M&&J?(w("error"),b("Error al cargar datos. Verifica tu conexión e intenta nuevamente.")):w("connected"),r(!1),console.log("✅ Carga completada - Actividades:",O,"Respuestas:",L))},K=bXe(e,G=>{console.log("📋 Actividades recibidas:",G.length),G.forEach((Y,ee)=>{console.log(`  ${ee+1}. ${Y.asignatura} (ID: ${Y.id})`),yo(Y,`actividad-${ee}`)}),c(G),O=!0,V()},G=>{console.error("❌ Error en suscripción de actividades:",G),M=!0,V()}),z=yXe(e.id,G=>{console.log("📝 Respuestas del estudiante recibidas:",G.length),G.forEach((Y,ee)=>{var P;console.log(`  ${ee+1}. Actividad ${Y.actividadId} - Nota: ${Y.nota} - Fecha: ${Y.fechaCompletado}`),(P=Y.revisionDocente)!=null&&P.completada&&console.log("    ✅ Con revisión docente completada"),yo(Y,`respuesta-${ee}`)}),d(G),L=!0,V()},G=>{var Y;console.error("❌ Error en suscripción de respuestas:",G),(Y=G.message)!=null&&Y.includes("requires an index")&&(console.log("⚠️ Detectado error de índice, intentando consulta alternativa..."),b("Se detectó un problema de configuración. Las actividades completadas pueden no mostrarse correctamente hasta que se resuelva.")),J=!0,V()});return()=>{console.log("🧹 Limpiando subscripciones"),K==null||K(),z==null||z()}},[e]),S.useEffect(()=>{t||console.log("🔄 ESTADO ACTUALIZADO:",{actividades:o.length,respuestas:u.length,vista:n,conexion:y})},[o.length,u.length,n,y,t]);const _=O=>{console.log("🔍 Iniciando actividad:",O.asignatura),h(O),a("activity"),b(null)},B=O=>{console.log("🔍 Viendo resultado:",O.actividadId);const L=o.find(M=>M.id===O.actividadId);L?(h(L),g(O),a("result"),b(null)):b("No se pudieron cargar los detalles de esta actividad completada.")},k=S.useCallback(async(O,L)=>{if(!f)return;console.log("🚀 COMPLETANDO ACTIVIDAD:",{actividadId:f.id,estudianteId:e.id,puntaje:O.puntaje,nota:O.nota}),a("result"),i(!0),b(null);const M={actividadId:f.id,estudianteId:e.id,fechaCompletado:new Date().toISOString(),...O,retroalimentacionDetallada:L};console.log("💾 Guardando respuesta...");try{const J=await SXe(M,f,L);console.log("✅ Respuesta completada con ID:",J.id),g(J),setTimeout(()=>{console.log("🔄 Datos sincronizados")},1500)}catch(J){console.error("❌ Error crítico al completar actividad:",J),b("Ocurrió un error al guardar tu actividad. Por favor, intenta nuevamente. Si el problema persiste, contacta a tu profesor."),g({id:"error-temp",...M,retroalimentacionAI:{logros:"Tu actividad fue completada pero hubo un problema técnico al generar el resumen.",desafios:[],comentariosDesarrollo:[]}})}finally{i(!1)}},[f,e.id]),I=S.useMemo(()=>{if(u.length===0)return new Set;const O=new Set(u.map(L=>L.actividadId));return console.log("🎯 IDs completados calculados:",O.size),O},[u]),E=S.useMemo(()=>{if(o.length===0)return[];const O=o.filter(L=>!I.has(L.id));return console.log("⏳ Actividades pendientes:",O.length),O},[o,I]),N=S.useMemo(()=>{if(u.length===0)return[];const O=u.map(L=>{const M=o.find(J=>J.id===L.actividadId);return{...L,asignatura:(M==null?void 0:M.asignatura)||"Actividad no disponible",tipos:(M==null?void 0:M.tipos)||[]}}).sort((L,M)=>new Date(M.fechaCompletado).getTime()-new Date(L.fechaCompletado).getTime());return console.log("📖 Historial preparado:",O.length),O},[u,o]);return t?l.jsxs("div",{className:"flex flex-col justify-center items-center h-64 space-y-4",children:[l.jsx(cO,{className:"w-8 h-8 text-slate-500"}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-slate-500",children:"Cargando actividades..."}),l.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Estado: ",y==="connecting"?"Conectando...":y==="connected"?"Conectado":"Error de conexión"]})]})]}):y==="error"&&o.length===0&&u.length===0?l.jsxs("div",{className:"text-center py-12 border-2 border-red-200 rounded-lg bg-red-50",children:[l.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),l.jsx("h3",{className:"text-xl font-semibold text-red-700 mb-2",children:"Error de Conexión"}),l.jsx("p",{className:"text-red-600 mb-4",children:"No se pudieron cargar las actividades."}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700",children:"Reintentar"})]}):n==="activity"&&f?l.jsx(BXe,{actividad:f,onComplete:k,currentUser:e}):n==="result"&&p?(console.log("🔍 Renderizando resultado:",p),l.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Resultados de la Actividad"}),l.jsxs("div",{className:"flex items-baseline gap-4 mb-6 p-4 bg-slate-50 rounded-lg border",children:[l.jsxs("p",{className:"text-lg text-slate-600",children:["Puntaje: ",l.jsxs("span",{className:"font-bold text-2xl text-slate-800",children:[p.puntaje," / ",p.puntajeMaximo]})]}),l.jsxs("p",{className:"text-lg text-slate-600",children:["Nota: ",l.jsx("span",{className:`font-bold text-2xl ${parseFloat(p.nota)>=4?"text-green-600":"text-red-600"}`,children:p.nota})]})]}),x&&l.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:l.jsxs("p",{className:"text-red-700 font-medium",children:["⚠️ ",x]})}),s&&l.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-blue-50 border border-blue-200 rounded-lg text-center mb-6",children:[l.jsx(cO,{className:"w-8 h-8 text-blue-500"}),l.jsx("p",{className:"mt-3 font-semibold text-blue-700",children:"Generando resumen personalizado..."}),l.jsx("p",{className:"mt-1 text-sm text-blue-600",children:"Esto puede tomar unos segundos"})]}),p.retroalimentacionAI&&!s&&l.jsxs("div",{className:"p-6 bg-blue-50 border border-blue-200 rounded-lg space-y-4 mb-6",children:[l.jsx("h2",{className:"text-2xl font-semibold text-blue-800",children:"Resumen de tu Desempeño 💡"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-green-700",children:"✅ Principales Logros"}),l.jsx("p",{className:"text-slate-700 mt-1",children:l.jsx(ci,{content:p.retroalimentacionAI.logros,context:"feedback-logros"})})]}),((j=p.retroalimentacionAI.desafios)==null?void 0:j.length)>0&&l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-amber-700",children:"🎯 Áreas de Mejora"}),l.jsx("div",{className:"space-y-3 mt-2",children:p.retroalimentacionAI.desafios.map((O,L)=>l.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[l.jsx("p",{className:"font-semibold text-slate-800",children:l.jsx(ci,{content:O.pregunta,context:`feedback-desafio-pregunta-${L}`})}),l.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:l.jsx(ci,{content:O.explicacionDelError,context:`feedback-desafio-explicacion-${L}`})})]},L))})]}),((D=(R=p.retroalimentacionAI)==null?void 0:R.comentariosDesarrollo)==null?void 0:D.length)>0&&l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-sky-700",children:"📝 Retroalimentación de Desarrollo"}),l.jsx("div",{className:"space-y-3 mt-2",children:p.retroalimentacionAI.comentariosDesarrollo.map((O,L)=>l.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[l.jsx("p",{className:"font-semibold text-slate-800",children:l.jsx(ci,{content:O.pregunta,context:`feedback-desarrollo-pregunta-${L}`})}),l.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:l.jsx(ci,{content:O.retroalimentacionBreve,context:`feedback-desarrollo-retro-${L}`})})]},L))})]})]}),p.retroalimentacionDetallada&&l.jsxs("div",{className:"space-y-4 mb-6",children:[l.jsx("h2",{className:"text-2xl font-semibold text-slate-700",children:"Revisión Detallada"}),p.retroalimentacionDetallada.items.map((O,L)=>{const M=O.esCorrecta===null,J=M?"border-slate-400 bg-slate-50":O.esCorrecta?"border-green-500 bg-green-50":"border-red-500 bg-red-50",V=M?"🕓":O.esCorrecta?"✅":"❌";return l.jsxs("div",{className:`p-4 border-l-4 rounded-r-lg ${J}`,children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold text-slate-800 flex-1 pr-4",children:[L+1,". ",l.jsx(ci,{content:O.pregunta,context:`feedback-item-pregunta-${L}`})]}),l.jsx("span",{className:"font-bold text-lg",children:V})]}),l.jsxs("div",{className:"mt-2 text-sm pl-4",children:[l.jsxs("p",{className:"text-slate-700",children:["Tu respuesta: ",l.jsx("span",{className:"font-medium",children:l.jsx(ci,{content:O.respuestaUsuario,context:`feedback-item-respuesta-${L}`})})]}),!M&&!O.esCorrecta&&l.jsxs("p",{className:"text-slate-700",children:["Respuesta correcta: ",l.jsx("span",{className:"font-medium text-green-700",children:l.jsx(ci,{content:O.respuestaCorrecta,context:`feedback-item-correcta-${L}`})})]}),M&&l.jsx("p",{className:"text-slate-600 italic",children:"Pendiente de revisión docente."})]})]},L)})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>{a("list"),h(null),g(null),b(null)},className:"flex-1 bg-slate-800 text-white font-bold py-3 rounded-lg hover:bg-slate-700 transition-colors",children:"Volver a Actividades"}),f&&l.jsx("button",{onClick:()=>{a("activity"),g(null),b(null)},className:"flex-1 bg-amber-600 text-white font-bold py-3 rounded-lg hover:bg-amber-700 transition-colors",children:"Repetir Actividad"})]})]})):l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md space-y-10",children:[x&&l.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:l.jsxs("p",{className:"text-amber-800",children:["⚠️ ",x]})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Actividades Pendientes"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"Completa las actividades asignadas por tus profesores."}),l.jsx("div",{className:"space-y-4",children:E.length>0?E.map(O=>l.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 flex flex-col sm:flex-row justify-between sm:items-center gap-4 hover:bg-slate-100 transition-colors",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800",children:[l.jsx(ci,{content:O.asignatura,context:`actividad-asignatura-${O.id}`})," - ",O.tipos.join(", ")]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",l.jsx(ci,{content:typeof O.plazoEntrega=="string"?O.plazoEntrega:"",context:`actividad-plazo-${O.id}`})]})]}),l.jsx("button",{onClick:()=>_(O),className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 w-full sm:w-auto transition-colors",children:"Comenzar"})]},O.id)):l.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[l.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),l.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"¡Todo al día!"}),l.jsx("p",{className:"text-slate-500 mt-1",children:"No tienes actividades pendientes."})]})})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Historial de Actividades"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"Revisa tus resultados y la retroalimentación de las actividades completadas."}),l.jsx("div",{className:"space-y-4",children:N.length>0?N.map(O=>l.jsxs("div",{className:"p-4 border rounded-lg bg-white flex flex-col sm:flex-row justify-between sm:items-center gap-4 shadow-sm hover:shadow-md transition-shadow",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800",children:[l.jsx(ci,{content:O.asignatura,context:`completada-asignatura-${O.id}`})," - ",O.tipos.join(", ")]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Completado: ",new Date(O.fechaCompletado).toLocaleDateString("es-CL")]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("p",{className:"text-sm font-semibold",children:["Nota: ",l.jsx("span",{className:`font-bold text-lg ${parseFloat(O.nota)>=4?"text-green-600":"text-red-600"}`,children:O.nota})]}),l.jsx("button",{onClick:()=>B(O),className:"bg-sky-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-sky-700 w-full sm:w-auto transition-colors",children:"Ver Resultados"})]})]},O.id)):l.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[l.jsx("div",{className:"text-6xl mb-4",children:"📚"}),l.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Aún no hay historial"}),l.jsx("p",{className:"text-slate-500 mt-1",children:"Tus actividades completadas aparecerán aquí."})]})})]})]})},Ek="estudiantes_inclusion",TXe="usuarios",Ele=e=>{const t=e.data();return{id:e.id,...t}},IXe=e=>{const t=$t(kt(ht,Ek));return pr(t,n=>{const a=n.docs.map(s=>Ele(s));e(a)},n=>{console.error("Error al suscribirse a estudiantes de inclusión:",n),e([])})},FXe=e=>{const t=$t(kt(ht,TXe));return pr(t,n=>{const a=n.docs.map(s=>Ele(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},OXe=async e=>{try{return(await Tn(kt(ht,Ek),e)).id}catch(t){throw console.error("Error al agregar estudiante a inclusión:",t),new Error("No se pudo agregar al estudiante.")}},DXe=async(e,t)=>{try{const{id:r,...n}=t,a=dr(ht,Ek,e);await Ji(a,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusión:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},PXe=async e=>{try{const t=dr(ht,Ek,e);await za(t)}catch(t){throw console.error("Error al eliminar estudiante de inclusión:",t),new Error("No se pudo eliminar al estudiante.")}},RXe=({estudiantes:e})=>{const t=S.useMemo(()=>{const o=e.reduce((c,u)=>(c[u.curso]=(c[u.curso]||0)+1,c),{});return Object.entries(o).map(([c,u])=>({curso:c,cantidad:u})).sort((c,u)=>c.curso.localeCompare(u.curso))},[e]),r=S.useMemo(()=>{const o=e.reduce((c,u)=>{var f;const d=((f=u.curso.match(/\d+/))==null?void 0:f[0])||"Sin nivel";return c[d]=(c[d]||0)+1,c},{});return Object.entries(o).map(([c,u])=>({nivel:c,cantidad:u})).sort((c,u)=>c.nivel==="Sin nivel"?1:u.nivel==="Sin nivel"?-1:parseInt(c.nivel)-parseInt(u.nivel))},[e]),n=S.useMemo(()=>{const o=e.reduce((c,u)=>(c[u.dificultad]=(c[u.dificultad]||0)+1,c),{});return Object.entries(o).map(([c,u])=>({diagnostico:c,cantidad:u})).sort((c,u)=>u.cantidad-c.cantidad)},[e]),a=S.useMemo(()=>{const o=e.reduce((u,d)=>{var f;return u+(((f=d.intervenciones)==null?void 0:f.length)||0)},0),c=e.length>0?(o/e.length).toFixed(1):"0";return{total:o,promedio:c}},[e]),s=S.useMemo(()=>e.reduce((o,c)=>o+(c.alertas||[]).filter(u=>!u.resuelta).length,0),[e]),i=Math.max(0,...t.map(o=>o.cantidad),...r.map(o=>o.cantidad),...n.map(o=>o.cantidad));return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Dashboard PIE"}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.length}),l.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Total Estudiantes"})]}),l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:a.total}),l.jsx("div",{className:"text-sm text-green-800 dark:text-green-300",children:"Intervenciones"})]}),l.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:s}),l.jsx("div",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:"Alertas Pendientes"})]}),l.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:a.promedio}),l.jsx("div",{className:"text-sm text-purple-800 dark:text-purple-300",children:"Promedio Intervenciones"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Curso"}),l.jsx("div",{className:"space-y-2",children:t.map(({curso:o,cantidad:c})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:o}),l.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:l.jsx("div",{className:"bg-blue-500 h-full transition-all duration-500",style:{width:`${i?c/i*100:0}%`}})}),l.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},o))})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Nivel"}),l.jsx("div",{className:"space-y-2",children:r.map(({nivel:o,cantidad:c})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:[o,"°"]}),l.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:l.jsx("div",{className:"bg-green-500 h-full transition-all duration-500",style:{width:`${i?c/i*100:0}%`}})}),l.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},o))})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Diagnóstico"}),l.jsx("div",{className:"space-y-2",children:n.map(({diagnostico:o,cantidad:c})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-16 text-right truncate",title:o,children:o}),l.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:l.jsx("div",{className:"bg-purple-500 h-full transition-all duration-500",style:{width:`${i?c/i*100:0}%`}})}),l.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},o))})]})]})]})},hq=({estudiantesDisponibles:e,onSelect:t})=>{const[r,n]=S.useState(""),[a,s]=S.useState(""),[i,o]=S.useState(!1),c=S.useMemo(()=>e.filter(f=>{const h=f.nombreCompleto.toLowerCase().includes(r.toLowerCase()),p=a===""||f.curso===a;return h&&p}).sort((f,h)=>f.nombreCompleto.localeCompare(h.nombreCompleto)),[e,r,a]),u=S.useMemo(()=>[...new Set(e.map(h=>h.curso).filter(Boolean))].sort(),[e]),d=f=>{t(f),n(""),s(""),o(!1)};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante al PIE"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Buscar por nombre"}),l.jsx("input",{type:"text",placeholder:"Escriba el nombre del estudiante...",value:r,onChange:f=>{n(f.target.value),o(f.target.value.length>0||a!=="")},onFocus:()=>o(r.length>0||a!==""),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filtrar por curso"}),l.jsxs("select",{value:a,onChange:f=>{s(f.target.value),o(r.length>0||f.target.value!=="")},className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todos los cursos"}),u.map(f=>l.jsx("option",{value:f,children:f},f))]})]})]}),l.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[l.jsxs("span",{children:["Estudiantes disponibles: ",e.length]}),l.jsxs("span",{children:["Resultados filtrados: ",c.length]})]}),l.jsx("button",{onClick:()=>o(!i),className:"w-full bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200 py-2 px-4 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:i?"Ocultar resultados":`Ver ${c.length} estudiantes disponibles`}),i&&l.jsx("div",{className:"border dark:border-slate-600 rounded-lg max-h-80 overflow-y-auto",children:c.length===0?l.jsx("div",{className:"p-4 text-center text-slate-500 dark:text-slate-400",children:r||a?"No se encontraron estudiantes con los criterios de búsqueda.":"No hay estudiantes disponibles."}):l.jsx("div",{className:"divide-y dark:divide-slate-600",children:c.map(f=>l.jsx("div",{className:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>d(f),children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:f.nombreCompleto}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:f.curso})]}),l.jsx("button",{className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 text-xl",children:"➕"})]})},f.id))})}),r&&c.length===1&&l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[l.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-2",children:"💡 ¡Solo hay un resultado! Haga clic para agregarlo directamente:"}),l.jsxs("button",{onClick:()=>d(c[0]),className:"text-sm bg-blue-500 text-white px-3 py-1.5 rounded-md hover:bg-blue-600 transition-colors",children:["Agregar a ",c[0].nombreCompleto]})]})]})]})},LXe=({student:e,onClose:t,onConfirm:r})=>{const[n,a]=S.useState(Z5[0]),s=()=>r(e,n);return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",e.nombreCompleto," al PIE"]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),l.jsx("select",{id:"dificultad",value:n,onChange:i=>a(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:Z5.map(i=>l.jsx("option",{value:i,children:i},i))})]}),l.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),l.jsx("button",{type:"button",onClick:s,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Confirmar e Ingresar"})]})]})})},MXe=({student:e,onClose:t,onSave:r,profesores:n,getDocenteEmail:a})=>{const[s,i]=S.useState("intervenciones"),[o,c]=S.useState(e);S.useEffect(()=>c(e),[e]);const[u,d]=S.useState(null),f={responsable:"",accion:"",observaciones:""},[h,p]=S.useState(f),[g,x]=S.useState({trimestre:"T1",meta:""}),[b,y]=S.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[w,_]=S.useState(null),[B,k]=S.useState(!1),I={motivo:"",acuerdos:"",asistentes:""},[E,N]=S.useState(I),j=()=>{r(o),t()},R=async()=>{var Ne;if(!h.responsable||!h.accion){alert("Responsable y Acción son campos obligatorios.");return}let ne,_e=!1;u?ne=(o.intervenciones||[]).map(fe=>fe.id===u.id?{...fe,...h}:fe):(_e=!0,ne=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...o.intervenciones||[]]);const De=ne.sort((fe,Ie)=>new Date(Ie.fecha).getTime()-new Date(fe.fecha).getTime());if(c(fe=>({...fe,intervenciones:De})),_e)try{await Kwe({docenteNombre:h.responsable,docenteEmail:a?a(h.responsable):void 0,docenteEmailLower:(Ne=a?a(h.responsable):void 0)==null?void 0:Ne.toLowerCase(),tipo:"nueva_intervencion",titulo:"📋 Nueva Intervención Asignada",mensaje:`Se te ha asignado una nueva intervención para el estudiante ${o.nombre}. Acción: ${h.accion}`,estudianteNombre:o.nombre,estudianteId:o.id,accionRequerida:h.accion}),alert(`✅ Intervención registrada y notificación enviada a ${h.responsable}`)}catch(fe){console.error("Error al crear notificación:",fe),alert("⚠️ Intervención guardada, pero no se pudo enviar la notificación al docente.")}p(f),d(null)},D=ne=>{d(ne),p({responsable:ne.responsable,accion:ne.accion,observaciones:ne.observaciones})},O=ne=>{window.confirm("¿Eliminar esta intervención?")&&c(_e=>({..._e,intervenciones:(_e.intervenciones||[]).filter(De=>De.id!==ne)}))},L=ne=>{const{name:_e,value:De}=ne.target;c(Ne=>({...Ne,[_e]:De,fechaActualizacionApoyos:new Date().toISOString()}))},M=()=>{if(!g.meta.trim())return;const ne={...g,id:crypto.randomUUID(),cumplida:!1};c(_e=>({..._e,metasProgreso:[..._e.metasProgreso||[],ne]})),x({trimestre:"T1",meta:""})},J=ne=>{c(_e=>({..._e,metasProgreso:(_e.metasProgreso||[]).map(De=>De.id===ne?{...De,cumplida:!De.cumplida}:De)}))},V=ne=>{c(_e=>({..._e,metasProgreso:(_e.metasProgreso||[]).filter(De=>De.id!==ne)}))},K=S.useMemo(()=>{const ne=o.metasProgreso||[];if(ne.length===0)return{percent:0,color:"bg-slate-300"};const _e=ne.filter(fe=>fe.cumplida).length,De=Math.round(_e/ne.length*100),Ne=De<40?"bg-red-500":De<75?"bg-yellow-500":"bg-green-500";return{percent:De,color:Ne}},[o.metasProgreso]),z=S.useMemo(()=>{if(!o.fechaActualizacionApoyos)return!0;const ne=new Date(o.fechaActualizacionApoyos),_e=new Date;return _e.setMonth(_e.getMonth()-3),ne<_e},[o.fechaActualizacionApoyos]),G=()=>{if(!b.titulo.trim()||!b.fecha)return;const ne={...b,id:crypto.randomUUID(),resuelta:!1};c(_e=>({..._e,alertas:[..._e.alertas||[],ne].sort((De,Ne)=>new Date(De.fecha).getTime()-new Date(Ne.fecha).getTime())})),y({titulo:"",fecha:new Date().toISOString()})},Y=ne=>{c(_e=>({..._e,alertas:(_e.alertas||[]).map(De=>De.id===ne?{...De,resuelta:!De.resuelta}:De)}))},ee=ne=>{c(_e=>({..._e,alertas:(_e.alertas||[]).filter(De=>De.id!==ne)}))},P=ne=>{ne.target.files&&ne.target.files[0]&&_(ne.target.files[0])},Q=()=>{if(!w)return;k(!0);const ne=new FileReader;ne.readAsDataURL(w),ne.onloadend=()=>{const _e={id:crypto.randomUUID(),nombre:w.name,url:ne.result,fechaSubida:new Date().toISOString()};c(De=>({...De,archivos:[_e,...De.archivos||[]]})),_(null),k(!1)},ne.onerror=()=>{alert("Error al leer el archivo."),k(!1)}},X=ne=>{window.confirm("¿Eliminar este archivo?")&&c(_e=>({..._e,archivos:(_e.archivos||[]).filter(De=>De.id!==ne)}))},te=()=>{if(!E.motivo.trim()||!E.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const ne={...E,id:crypto.randomUUID(),fecha:new Date().toISOString()};c(_e=>({..._e,reuniones:[ne,..._e.reuniones||[]].sort((De,Ne)=>new Date(Ne.fecha).getTime()-new Date(De.fecha).getTime())})),N(I)},ae=ne=>{window.confirm("¿Eliminar este registro de reunión?")&&c(_e=>({..._e,reuniones:(_e.reuniones||[]).filter(De=>De.id!==ne)}))},se=()=>{var ye,Fe,Re;const ne=new vr("p","mm","a4"),_e=20,De=ne.internal.pageSize.getWidth(),Ne=ne.internal.pageSize.getHeight();let fe=_e;const Ie=Ge=>{Ge.setFontSize(10),Ge.setTextColor(100),Ge.text("Ficha de Seguimiento - Módulo Inclusión",_e,15)};Ie(ne),ne.setFontSize(18),ne.setFont("helvetica","bold"),ne.setTextColor(40),ne.text(o.nombre,_e,fe+10),fe+=15,ne.setFontSize(11),ne.setFont("helvetica","normal"),ne.setTextColor(80),ne.text(`Curso: ${o.curso}`,_e,fe),ne.text(`Dificultad: ${o.dificultad}`,_e,fe+6),fe+=15;const Me=Ge=>{fe+Ge>Ne-_e&&(ne.addPage(),Ie(ne),fe=_e)},Xe=Ge=>{Me(15),ne.setFontSize(14),ne.setFont("helvetica","bold"),ne.text(Ge,_e,fe),fe+=10};if((ye=o.intervenciones)!=null&&ye.length&&(Xe("Historial de Intervenciones"),bo(ne,{startY:fe,head:[["Fecha","Responsable","Acción","Observaciones"]],body:o.intervenciones.map(Ge=>[new Date(Ge.fecha).toLocaleDateString("es-CL"),Ge.responsable,Ge.accion,Ge.observaciones||""]),theme:"grid",didDrawPage:()=>Ie(ne)}),fe=ne.lastAutoTable.finalY+10),o.adaptacionesCurriculares||o.apoyosRecibidos){Me(30),Xe("Seguimiento y Apoyos"),ne.setFontSize(11),ne.setFont("helvetica","normal");const Ge=`Adaptaciones: ${o.adaptacionesCurriculares||"No registradas."}
Apoyos: ${o.apoyosRecibidos||"No registrados."}`,Ke=ne.splitTextToSize(Ge,De-_e*2);ne.text(Ke,_e,fe),fe+=Ke.length*5+10}(Fe=o.metasProgreso)!=null&&Fe.length&&(Me(30),Xe("Metas de Progreso"),bo(ne,{startY:fe,head:[["Trimestre","Meta","Estado"]],body:o.metasProgreso.map(Ge=>[Ge.trimestre,Ge.meta,Ge.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:()=>Ie(ne)}),fe=ne.lastAutoTable.finalY+10),(Re=o.reuniones)!=null&&Re.length&&(Xe("Reuniones con Apoderados"),bo(ne,{startY:fe,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:o.reuniones.map(Ge=>[new Date(Ge.fecha).toLocaleDateString("es-CL"),Ge.motivo,Ge.acuerdos||"",Ge.asistentes]),theme:"grid",didDrawPage:()=>Ie(ne)})),ne.save(`Ficha_Inclusion_${o.nombre.replace(/\s/g,"_")}.pdf`)},oe=()=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:u?"Editando Intervención":"Registrar Nueva Intervención"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Responsable ",!u&&"(Se enviará notificación automática)"]}),l.jsxs("select",{value:h.responsable,onChange:ne=>p(_e=>({..._e,responsable:ne.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(ne=>l.jsx("option",{value:ne,children:ne},ne))]}),h.responsable&&!u&&l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-sm text-blue-800 dark:text-blue-200",children:["🔔 Se enviará una notificación a ",h.responsable," cuando se guarde la intervención"]})]}),l.jsx("textarea",{value:h.accion,onChange:ne=>p(_e=>({..._e,accion:ne.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("textarea",{value:h.observaciones,onChange:ne=>p(_e=>({..._e,observaciones:ne.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsxs("div",{className:"flex justify-end gap-2",children:[u&&l.jsx("button",{onClick:()=>{d(null),p(f)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar Edición"}),l.jsx("button",{onClick:R,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!h.responsable||!h.accion,children:u?"Actualizar":"Guardar y Notificar"})]})]}),l.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(o.intervenciones||[]).map(ne=>l.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ne.accion}),ne.observaciones&&l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:ne.observaciones}),l.jsxs("div",{className:"flex items-center justify-between mt-2",children:[l.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[new Date(ne.fecha).toLocaleString("es-CL")," - ",ne.responsable]}),l.jsx("span",{className:"text-xs bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300 px-2 py-1 rounded-full",children:"✓ Notificado"})]})]}),l.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[l.jsx("button",{onClick:()=>D(ne),className:"text-blue-500 hover:text-blue-700 p-1 rounded transition-colors",title:"Editar intervención",children:"✏️"}),l.jsx("button",{onClick:()=>O(ne.id),className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar intervención",children:"🗑️"})]})]})},ne.id)),(!o.intervenciones||o.intervenciones.length===0)&&l.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-4xl mb-2",children:"📋"}),l.jsx("p",{children:"No hay intervenciones registradas"}),l.jsx("p",{className:"text-sm",children:"Registra la primera intervención arriba"})]})]})]}),ce=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),z&&l.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl cursor-help",children:"⚠️"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),l.jsx("textarea",{name:"adaptacionesCurriculares",value:o.adaptacionesCurriculares||"",onChange:L,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe las adaptaciones curriculares implementadas..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),l.jsx("textarea",{name:"apoyosRecibidos",value:o.apoyosRecibidos||"",onChange:L,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe los apoyos que recibe el estudiante..."})]})]}),l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",K.percent,"%"]}),l.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:l.jsx("div",{className:`${K.color} h-4 rounded-full transition-all duration-500`,style:{width:`${K.percent}%`}})})]}),l.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[l.jsxs("select",{value:g.trimestre,onChange:ne=>x(_e=>({..._e,trimestre:ne.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"T1",children:"T1"}),l.jsx("option",{value:"T2",children:"T2"}),l.jsx("option",{value:"T3",children:"T3"})]}),l.jsx("input",{value:g.meta,onChange:ne=>x(_e=>({..._e,meta:ne.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:M,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",disabled:!g.meta.trim(),children:"Agregar"})]}),l.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[(o.metasProgreso||[]).map(ne=>l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[l.jsx("input",{type:"checkbox",checked:ne.cumplida,onChange:()=>J(ne.id),className:"h-5 w-5 rounded text-amber-500"}),l.jsxs("span",{className:`flex-grow text-sm ${ne.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[l.jsxs("strong",{children:[ne.trimestre,":"]})," ",ne.meta]}),l.jsx("button",{onClick:()=>V(ne.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar meta",children:"🗑️"})]},ne.id)),(!o.metasProgreso||o.metasProgreso.length===0)&&l.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-3xl mb-2",children:"🎯"}),l.jsx("p",{children:"No hay metas definidas"}),l.jsx("p",{className:"text-sm",children:"Agrega la primera meta trimestral"})]})]})]})]}),me=()=>l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),l.jsx("input",{type:"text",value:b.titulo,onChange:ne=>y(_e=>({..._e,titulo:ne.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),l.jsx("input",{type:"date",value:new Date(b.fecha).toISOString().slice(0,10),onChange:ne=>y(_e=>({..._e,fecha:ne.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),l.jsx("button",{onClick:G,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md hover:bg-amber-600 transition-colors",disabled:!b.titulo.trim()||!b.fecha,children:"Agendar"})]}),l.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(o.alertas||[]).map(ne=>l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[l.jsx("input",{type:"checkbox",checked:ne.resuelta,onChange:()=>Y(ne.id),className:"h-5 w-5 rounded text-amber-500"}),l.jsxs("span",{className:`flex-grow text-sm ${ne.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[ne.titulo," (",new Date(ne.fecha+"T12:00:00").toLocaleDateString("es-CL"),")"]}),l.jsx("button",{onClick:()=>ee(ne.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar alerta",children:"🗑️"})]},ne.id)),(!o.alertas||o.alertas.length===0)&&l.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-3xl mb-2",children:"🔔"}),l.jsx("p",{children:"No hay alertas programadas"})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),l.jsx("input",{type:"file",onChange:P,className:"w-full text-sm",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt"}),l.jsx("button",{onClick:Q,disabled:!w||B,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400 hover:bg-blue-600 transition-colors",children:B?"Subiendo...":"Subir"}),w&&l.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Archivo seleccionado: ",w.name]})]}),l.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(o.archivos||[]).map(ne=>l.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[l.jsxs("a",{href:ne.url,download:ne.nombre,className:"text-sm text-blue-600 hover:underline truncate flex-grow",title:ne.nombre,children:["📎 ",ne.nombre]}),l.jsx("button",{onClick:()=>X(ne.id),className:"text-red-500 text-sm ml-2 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar archivo",children:"🗑️"})]},ne.id)),(!o.archivos||o.archivos.length===0)&&l.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-3xl mb-2",children:"📁"}),l.jsx("p",{children:"No hay archivos adjuntos"})]})]})]})]}),ke=()=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),l.jsx("input",{value:E.motivo,onChange:ne=>N(_e=>({..._e,motivo:ne.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("textarea",{value:E.acuerdos,onChange:ne=>N(_e=>({..._e,acuerdos:ne.target.value})),placeholder:"Acuerdos tomados en la reunión...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("input",{value:E.asistentes,onChange:ne=>N(_e=>({..._e,asistentes:ne.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("div",{className:"text-right",children:l.jsx("button",{onClick:te,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!E.motivo.trim()||!E.asistentes.trim(),children:"Guardar Reunión"})})]}),l.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(o.reuniones||[]).map(ne=>l.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ne.motivo}),ne.acuerdos&&l.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:[l.jsx("strong",{children:"Acuerdos:"})," ",ne.acuerdos]}),l.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(ne.fecha).toLocaleString("es-CL")," - Asistentes: ",ne.asistentes]})]}),l.jsx("button",{onClick:()=>ae(ne.id),className:"text-red-500 flex-shrink-0 ml-4 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar reunión",children:"🗑️"})]})},ne.id)),(!o.reuniones||o.reuniones.length===0)&&l.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-4xl mb-2",children:"👥"}),l.jsx("p",{children:"No hay reuniones registradas"}),l.jsx("p",{className:"text-sm",children:"Registra la primera reunión con apoderados"})]})]})]});return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:ne=>ne.stopPropagation(),children:[l.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",e.nombre]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.curso," - ",e.dificultad]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:se,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200 transition-colors",children:"📄 Exportar PDF"}),l.jsx("button",{onClick:t,className:"text-2xl text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 transition-colors",children:"×"})]})]}),l.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:l.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(ne=>l.jsx("button",{onClick:()=>i(ne),className:`${s===ne?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize transition-colors`,children:ne==="alertas"?"Alertas y Archivos":ne==="seguimiento"?"Seguimiento y Metas":ne},ne))})}),l.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&oe(),s==="seguimiento"&&ce(),s==="reuniones"&&ke(),s==="alertas"&&me()]}),l.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[l.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors",children:"Cerrar"}),l.jsx("button",{onClick:j,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Guardar Cambios y Cerrar"})]})]})})},mq=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState([]),[s,i]=S.useState(!0),[o,c]=S.useState(null),[u,d]=S.useState(null),[f,h]=S.useState(""),[p,g]=S.useState(""),[x,b]=S.useState(""),[y,w]=S.useState("dashboard");S.useEffect(()=>{i(!0);const R=IXe(O=>{r(O),i(!1)}),D=FXe(O=>a(O));return()=>{R(),D()}},[]);const _=async(R,D)=>{if(t.some(L=>L.nombre===R.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const O={nombre:R.nombreCompleto,curso:R.curso||"",dificultad:D,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await OXe(O),alert(`✅ ${R.nombreCompleto} ha sido agregado exitosamente al programa PIE`)}catch(L){console.error("Error al agregar estudiante:",L),alert("Hubo un error al agregar al estudiante al programa.")}},B=async R=>{try{await DXe(R.id,R)}catch(D){console.error("Error al actualizar la ficha:",D),alert("Hubo un error al guardar los cambios en la ficha.")}},k=async R=>{if(window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión? Esta acción es irreversible."))try{await PXe(R),(o==null?void 0:o.id)===R&&c(null),alert("✅ Estudiante eliminado del programa PIE")}catch(D){console.error("Error al eliminar estudiante:",D),alert("Hubo un error al eliminar al estudiante.")}},I=R=>{const D=N;if(D.length===0){alert("No hay datos para exportar.");return}const O=D.map(L=>{var M;return{Nombre:L.nombre,Curso:L.curso,Dificultad:L.dificultad,"N° Intervenciones":((M=L.intervenciones)==null?void 0:M.length)||0,"Alertas Pendientes":(L.alertas||[]).filter(J=>!J.resuelta).length,"Metas Cumplidas":(L.metasProgreso||[]).filter(J=>J.cumplida).length,"Total Metas":(L.metasProgreso||[]).length,"Última Actualización":L.fechaActualizacionApoyos?new Date(L.fechaActualizacionApoyos).toLocaleDateString("es-CL"):"No registrada"}});if(R==="xlsx"){const L=Fu.json_to_sheet(O),M=Fu.book_new();Fu.book_append_sheet(M,L,"Estudiantes_Inclusion"),SL(M,"Estudiantes_Inclusion.xlsx"),alert("✅ Archivo Excel exportado exitosamente")}else{const L=new vr;L.text("Listado de Estudiantes - Programa de Inclusión",14,15),bo(L,{startY:20,head:[Object.keys(O[0])],body:O.map(Object.values)}),L.save("Estudiantes_Inclusion.pdf"),alert("✅ Archivo PDF exportado exitosamente")}},E=S.useMemo(()=>n.filter(R=>{var D;return R.profile===Wt.ESTUDIANTE&&(((D=e.cursos)==null?void 0:D.includes(R.curso||""))||e.profile===Wt.SUBDIRECCION)}).filter(R=>!t.some(D=>D.nombre===R.nombreCompleto)),[n,t,e]),N=S.useMemo(()=>t.filter(R=>R.nombre.toLowerCase().includes(f.toLowerCase())&&(p===""||R.curso===p)&&(x===""||R.dificultad===x)).sort((R,D)=>R.nombre.localeCompare(D.nombre)),[t,f,p,x]),j=S.useMemo(()=>n.filter(R=>R.profile===Wt.PROFESORADO).map(R=>R.nombreCompleto).sort(),[n]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>w("dashboard"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="dashboard"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📊 Dashboard"}),l.jsx("button",{onClick:()=>w("lista"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="lista"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📋 Lista de Estudiantes"})]})]}),s?l.jsxs("div",{className:"text-center py-10",children:[l.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"}),l.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando datos del programa..."})]}):l.jsxs(l.Fragment,{children:[y==="dashboard"&&l.jsxs("div",{className:"space-y-8",children:[l.jsx(RXe,{estudiantes:t}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes Recientes (",Math.min(5,t.length),")"]}),l.jsx("button",{onClick:()=>w("lista"),className:"text-sm text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Ver todos →"})]}),l.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(R=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center hover:shadow-sm transition-shadow",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:R.nombre}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[R.curso," - ",R.dificultad]})]}),l.jsx("button",{onClick:()=>c(R),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm transition-colors",children:"Ver Ficha"})]},R.id)),t.length===0&&l.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-6xl mb-4",children:"📚"}),l.jsx("p",{className:"text-lg font-medium mb-2",children:"No hay estudiantes en el programa PIE"}),l.jsx("p",{className:"text-sm",children:"Comienza agregando estudiantes desde la nómina"})]})]})]}),l.jsx(hq,{estudiantesDisponibles:E,onSelect:R=>d(R)})]})]}),y==="lista"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",N.length,")"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>I("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg hover:bg-green-200 transition-colors",children:"📊 Excel"}),l.jsx("button",{onClick:()=>I("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg hover:bg-red-200 transition-colors",children:"📄 PDF"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Buscar estudiante"}),l.jsx("input",{type:"text",placeholder:"Nombre del estudiante...",value:f,onChange:R=>h(R.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por curso"}),l.jsxs("select",{value:p,onChange:R=>g(R.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todos los Cursos"}),Ks.map(R=>l.jsx("option",{value:R,children:R},R))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por diagnóstico"}),l.jsxs("select",{value:x,onChange:R=>b(R.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todas las Dificultades"}),Z5.map(R=>l.jsx("option",{value:R,children:R},R))]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 text-xs",children:[l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-center",children:[l.jsx("div",{className:"font-bold text-blue-600",children:N.length}),l.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:"Mostrando"})]}),l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded text-center",children:[l.jsx("div",{className:"font-bold text-green-600",children:t.length}),l.jsx("div",{className:"text-green-800 dark:text-green-300",children:"Total"})]}),l.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded text-center",children:[l.jsx("div",{className:"font-bold text-yellow-600",children:t.reduce((R,D)=>R+(D.alertas||[]).filter(O=>!O.resuelta).length,0)}),l.jsx("div",{className:"text-yellow-800 dark:text-yellow-300",children:"Alertas"})]}),l.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-2 rounded text-center",children:[l.jsx("div",{className:"font-bold text-purple-600",children:new Set(t.map(R=>R.curso)).size}),l.jsx("div",{className:"text-purple-800 dark:text-purple-300",children:"Cursos"})]})]}),l.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:[N.map(R=>{var D;return l.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 hover:shadow-md transition-shadow",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:R.nombre}),(R.alertas||[]).filter(O=>!O.resuelta).length>0&&l.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:[(R.alertas||[]).filter(O=>!O.resuelta).length," alertas"]})]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:[R.curso," - ",R.dificultad]}),l.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-600 dark:text-slate-300",children:[l.jsxs("span",{children:[((D=R.intervenciones)==null?void 0:D.length)||0," intervenciones"]}),l.jsxs("span",{children:[(R.metasProgreso||[]).filter(O=>O.cumplida).length," metas cumplidas"]}),R.fechaActualizacionApoyos&&l.jsxs("span",{children:["Últ. actualización: ",new Date(R.fechaActualizacionApoyos).toLocaleDateString("es-CL")]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l.jsx("button",{onClick:()=>c(R),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm px-3 py-1 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:"Ver Ficha"}),l.jsx("button",{onClick:()=>k(R.id),title:"Eliminar del programa",className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:"🗑️"})]})]})},R.id)}),N.length===0&&l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),l.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400 mb-2",children:f||p||x?"No se encontraron estudiantes con esos criterios":"No hay estudiantes en el programa PIE"}),(f||p||x)&&l.jsx("button",{onClick:()=>{h(""),g(""),b("")},className:"text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Limpiar filtros"})]})]})]}),l.jsx(hq,{estudiantesDisponibles:E,onSelect:R=>d(R)})]})]}),u&&l.jsx(LXe,{student:u,onClose:()=>d(null),onConfirm:(R,D)=>{_(R,D),d(null)}}),o&&l.jsx(MXe,{student:o,onClose:()=>c(null),onSave:B,profesores:j})]})},Cle="asistencia_dual",UXe=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaHora:((n=(r=t.fechaHora)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaHora}},QXe=(e,t)=>{const r=$t(kt(ht,Cle),Jr("emailEstudiante","==",e),Sr("fechaHora","desc"));return pr(r,a=>{const s=a.docs.map(i=>UXe(i));t(s)},a=>{console.error("Error subscribing to personal attendance:",a),t([])})},HXe=async e=>{try{const t={...e,fechaHora:sr.fromDate(new Date(e.fechaHora))};await Tn(kt(ht,Cle),t)}catch(t){throw console.error("Error adding attendance record:",t),new Error("Could not save the attendance record.")}},VXe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),zXe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),$Xe=({currentUser:e})=>{const[t,r]=S.useState(e.curso||""),[n,a]=S.useState([]),[s,i]=S.useState(!1),[o,c]=S.useState(!0),[u,d]=S.useState(null);S.useEffect(()=>{if(!e.email){c(!1);return}c(!0);const h=QXe(e.email,p=>{a(p),c(!1)});return()=>h()},[e.email]);const f=h=>{if(!t){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),d(null),navigator.geolocation.getCurrentPosition(async p=>{const g={nombreEstudiante:e.nombreCompleto,emailEstudiante:e.email,curso:t,tipo:h,fechaHora:new Date().toISOString(),ubicacion:{latitud:p.coords.latitude,longitud:p.coords.longitude}};try{await HXe(g),d({text:`¡Marca de ${h} registrada con éxito!`,type:"success"})}catch(x){console.error("Error saving record to Firestore:",x),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{i(!1)}},p=>{console.error("Geolocation error:",p);let g="No se pudo obtener la ubicación.";switch(p.code){case p.PERMISSION_DENIED:g="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.";break;case p.POSITION_UNAVAILABLE:g="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case p.TIMEOUT:g="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:g=`Ocurrió un error desconocido al obtener la ubicación (código: ${p.code}).`;break}d({text:g,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),l.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),l.jsxs("select",{id:"curso",value:t,onChange:h=>r(h.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"-- Mi curso --"}),Vp.map(h=>l.jsx("option",{value:h,children:h},h))]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[l.jsx("button",{onClick:()=>f("Entrada"),disabled:s||!t,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),l.jsx("button",{onClick:()=>f("Salida"),disabled:s||!t,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),s&&l.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[l.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l.jsx("span",{children:"Obteniendo ubicación..."})]}),u&&l.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o?l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):n.length>0?n.map(h=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(h.fechaHora).toLocaleString("es-CL")}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:l.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${h.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[h.tipo==="Entrada"?l.jsx(VXe,{}):l.jsx(zXe,{}),h.tipo]})}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:h.curso})]},h.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},GXe=async()=>{try{console.log("🔍 Debugging users collection...");const e=kt(xn,"users"),t=$t(e,Td(10)),r=await ga(t),n={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},a=new Set;return r.forEach((s,i)=>{const o=s.data(),c={id:s.id,data:o,fields:Object.keys(o)};n.sampleDocs.push(c),Object.keys(o).forEach(u=>a.add(u))}),n.fieldAnalysis={allFields:Array.from(a),commonFields:Array.from(a).filter(s=>n.sampleDocs.filter(o=>s in o.data).length>n.sampleDocs.length*.5)},console.log("Users collection debug result:",n),n}catch(e){return console.error("Error debugging users collection:",e),{exists:!1,error:e instanceof Error?e.message:"Unknown error"}}},KXe=async(e,t)=>{var c,u,d;const r=new Date(e,t,1),n=new Date(e,t+1,0,23,59,59,999),a=sr.fromDate(r),s=sr.fromDate(n),i=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],o={};for(const f of i)try{const h=kt(xn,f);try{const p=$t(h,Jr("fechaHora",">=",a),Jr("fechaHora","<=",s)),g=await ga(p);o[f]={exists:!0,hasDateField:!0,count:g.size,sampleDoc:((c=g.docs[0])==null?void 0:c.data())||null}}catch{const g=["fecha","timestamp","createdAt"];let x=!1;for(const b of g)try{const y=$t(h,Jr(b,">=",a),Jr(b,"<=",s)),w=await ga(y);o[f]={exists:!0,hasDateField:b,count:w.size,sampleDoc:((u=w.docs[0])==null?void 0:u.data())||null},x=!0;break}catch{continue}if(!x){const b=$t(h,Sr("__name__"),Td(5)),y=await ga(b);o[f]={exists:!0,hasDateField:!1,count:y.size,sampleDoc:((d=y.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(h){o[f]={exists:!1,error:h instanceof Error?h.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",o),o},qXe=(e,t,r,n)=>{try{const a=new Date(e,t,1);a.setHours(0,0,0,0);const s=new Date(e,t+1,0);s.setHours(23,59,59,999),console.log(`🔍 Buscando registros entre: ${a.toISOString()} y ${s.toISOString()}`),console.log(`📅 Mes actual: ${e}-${(t+1).toString().padStart(2,"0")}`);const i=sr.fromDate(a),o=sr.fromDate(s),c=[],u=new Map,d=()=>{const h=Array.from(u.values());console.log(`📊 Total registros encontrados: ${h.length}`),h.length>0&&console.log("📅 Registros por día:",h.reduce((p,g)=>{let x;g.fechaHora instanceof Date?x=g.fechaHora:typeof g.fechaHora=="string"?x=new Date(g.fechaHora):x=new Date;const b=x.getDate();return p[b]=(p[b]||0)+1,p},{})),r(h)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(h=>{try{console.log(`🔍 Configurando suscripción para: ${h}`);const p=kt(xn,h),g=$t(p,Jr("fechaHora",">=",i),Jr("fechaHora","<=",o),Sr("fechaHora","desc")),x=pr(g,b=>{console.log(`📋 ${h}: ${b.size} documentos encontrados con filtro`),b.size>0?(console.log(`✅ Registros encontrados en ${h}:`),Array.from(u.keys()).filter(w=>w.startsWith(`${h}_`)).forEach(w=>u.delete(w)),b.docs.forEach((w,_)=>{var B;if(_<5){const k=w.data();let I;(B=k.fechaHora)!=null&&B.toDate?I=k.fechaHora.toDate():typeof k.fechaHora=="string"?I=new Date(k.fechaHora):I=new Date,console.log(`   ${_+1}. ${k.emailEstudiante} - ${I.toLocaleString()} - ${k.tipo}`),console.log(`      📅 Fecha original: ${k.fechaHora} (tipo: ${typeof k.fechaHora})`)}}),b.forEach(w=>{var E;const _=w.data();let B;(E=_.fechaHora)!=null&&E.toDate?B=_.fechaHora.toDate():typeof _.fechaHora=="string"?B=new Date(_.fechaHora):_.fechaHora instanceof Date?B=_.fechaHora:_.fechaHora?B=new Date(_.fechaHora):B=new Date;const k={id:w.id,emailEstudiante:_.emailEstudiante||_.email||"",nombreEstudiante:_.nombreEstudiante||_.nombre||"",curso:_.curso||"",fechaHora:B,tipo:_.tipo,ubicacion:_.ubicacion||null,observaciones:_.observaciones||"",..._},I=`${h}_${w.id}`;u.set(I,k)}),d()):console.log(`⚪ ${h}: vacía, manteniendo datos existentes`)},b=>{console.warn(`⚠️ Error con filtro en ${h}:`,b),console.log(`🔄 Intentando estrategia alternativa en ${h}...`);const y=$t(p,Td(200)),w=pr(y,B=>{if(console.log(`📋 ${h} (sin filtro): ${B.size} documentos`),B.size>0){const I=B.docs[0].data();console.log(`📄 Estructura en ${h}:`,Object.keys(I)),console.log("📄 Primer documento:",I)}const k=B.docs.filter(I=>{var j;const E=I.data();if(!E.fechaHora)return!1;let N;return(j=E.fechaHora)!=null&&j.toDate?N=E.fechaHora.toDate():typeof E.fechaHora=="string"?N=new Date(E.fechaHora):E.fechaHora instanceof Date?N=E.fechaHora:N=new Date(E.fechaHora),N>=a&&N<=s});console.log(`📅 ${h}: ${k.length} registros después de filtro manual`),k.length>0&&(Array.from(u.keys()).filter(E=>E.startsWith(`${h}_`)).forEach(E=>u.delete(E)),k.forEach(E=>{var O;const N=E.data();let j;(O=N.fechaHora)!=null&&O.toDate?j=N.fechaHora.toDate():typeof N.fechaHora=="string"?j=new Date(N.fechaHora):N.fechaHora instanceof Date?j=N.fechaHora:j=new Date(N.fechaHora);const R={id:E.id,emailEstudiante:N.emailEstudiante||N.email||"",nombreEstudiante:N.nombreEstudiante||N.nombre||"",curso:N.curso||"",fechaHora:j,tipo:N.tipo,ubicacion:N.ubicacion||null,observaciones:N.observaciones||"",...N},D=`${h}_${E.id}`;u.set(D,R)}),d())}),_=c.findIndex(B=>B===x);_>=0?c[_]=w:c.push(w)});c.push(x)}catch(p){console.warn(`❌ Error configurando ${h}:`,p)}}),()=>{c.forEach(h=>{try{h()}catch(p){console.warn("Error unsubscribing:",p)}})}}catch(a){return console.error("Error setting up subscribeToAsistenciaByMonth:",a),n&&n(new Error(`Error al configurar suscripción: ${a instanceof Error?a.message:"Error desconocido"}`)),()=>{}}},WXe=(e,t)=>{try{console.log("🔍 Buscando usuarios en múltiples colecciones...");const r=["usuarios","users"],n=[],a=new Map,s=()=>{const o=Array.from(a.values());console.log(`📊 Total usuarios encontrados: ${o.length}`);const c=o.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("👥 Usuarios por perfil:",c);const u=o.filter(d=>d.profile===Wt.ESTUDIANTE);console.log(`🎓 Estudiantes encontrados: ${u.length}`),u.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),e(o)};let i=!1;return r.forEach(o=>{try{const c=kt(xn,o),u=$t(c),d=pr(u,f=>{f.size>0?(console.log(`✅ Encontrados ${f.size} usuarios en colección: ${o}`),i=!0,Array.from(a.keys()).filter(p=>p.startsWith(`${o}_`)).forEach(p=>a.delete(p)),f.forEach(p=>{var g,x,b,y;try{const w=p.data(),_=w.email||w.userEmail||w.mail||w.correo||"",B=w.nombreCompleto||w.displayName||w.name||w.nombre||w.fullName||"",k=w.curso||w.course||w.class||w.grade||"";let I=w.profile||w.role||w.tipo||w.userType||Wt.ESTUDIANTE;if(typeof I=="string"){const j=I.toLowerCase();j.includes("estudiante")||j.includes("student")||j.includes("alumno")?I=Wt.ESTUDIANTE:j.includes("coordinador")||j.includes("coordinator")?I=Wt.COORDINADOR_TP:j.includes("profesor")||j.includes("teacher")||j.includes("docente")?I=Wt.PROFESOR:(j.includes("subdireccion")||j.includes("subdir"))&&(I=Wt.COORDINADOR_TP)}const E={id:p.id,email:_,nombreCompleto:B,curso:k,profile:I,activo:w.activo!==!1,fechaCreacion:((x=(g=w.fechaCreacion)==null?void 0:g.toDate)==null?void 0:x.call(g))||new Date(w.fechaCreacion)||new Date,ultimaActividad:((y=(b=w.ultimaActividad)==null?void 0:b.toDate)==null?void 0:y.call(b))||new Date(w.ultimaActividad)||new Date,...w},N=`${o}_${p.id}`;a.set(N,E)}catch(w){console.warn(`Error procesando documento ${p.id} en ${o}:`,w)}}),s()):console.log(`⚪ Colección ${o}: vacía`)},f=>{console.warn(`⚠️ Error en colección ${o}:`,f)});n.push(d)}catch(c){console.warn(`❌ Error configurando ${o}:`,c)}}),setTimeout(()=>{i||(console.error("❌ No se encontraron usuarios en ninguna colección"),t&&t(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{n.forEach(o=>{try{o()}catch(c){console.warn("Error unsubscribing:",c)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),t&&t(new Error(`Error al configurar suscripción multi-colección: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},XXe=(e,t)=>{try{console.log("Setting up users subscription...");const r=kt(xn,"users"),n=$t(r);return pr(n,s=>{console.log(`Raw users snapshot size: ${s.size}`);const i=[];s.forEach(d=>{var f,h,p,g;try{const x=d.data();console.log(`Processing user doc ${d.id}:`,x);const b=x.email||x.userEmail||x.mail||"",y=x.nombreCompleto||x.displayName||x.name||x.nombre||"",w=x.curso||x.course||x.class||"";let _=x.profile||x.role||x.tipo||Wt.ESTUDIANTE;if(typeof _=="string"){const k=_.toLowerCase();k.includes("estudiante")||k.includes("student")||k.includes("alumno")?_=Wt.ESTUDIANTE:k.includes("coordinador")||k.includes("coordinator")?_=Wt.COORDINADOR_TP:k.includes("profesor")||k.includes("teacher")||k.includes("docente")?_=Wt.PROFESOR:(k.includes("subdireccion")||k.includes("subdir"))&&(_=Wt.COORDINADOR_TP)}const B={id:d.id,email:b,nombreCompleto:y,curso:w,profile:_,activo:x.activo!==!1,fechaCreacion:((h=(f=x.fechaCreacion)==null?void 0:f.toDate)==null?void 0:h.call(f))||new Date(x.fechaCreacion)||new Date,ultimaActividad:((g=(p=x.ultimaActividad)==null?void 0:p.toDate)==null?void 0:g.call(p))||new Date(x.ultimaActividad)||new Date,...x};i.push(B)}catch(x){console.warn(`Error processing user document ${d.id}:`,x)}}),i.sort((d,f)=>d.nombreCompleto.localeCompare(f.nombreCompleto)),console.log(`Processed ${i.length} users successfully`);const o=i.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("Users by profile:",o);const c=i.filter(d=>d.profile===Wt.ESTUDIANTE);console.log(`Estudiantes: ${c.length}`);const u=c.filter(d=>d.curso);console.log(`Estudiantes con curso: ${u.length}`),e(i)},s=>{console.error("Error in subscribeToAllUsers:",s),t&&t(new Error(`Error al cargar usuarios: ${s.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),t&&t(new Error(`Error al configurar suscripción de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},s_=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},YXe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),JXe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),ZXe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,s]=S.useState(!0),[i,o]=S.useState(null),[c,u]=S.useState(new Date),[d,f]=S.useState("todos"),[h,p]=S.useState("");S.useEffect(()=>{s(!0),o(null);const I=c.getFullYear(),E=c.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Año:",I,"Mes:",E);let N=!1,j=!1;const R=()=>{N&&j&&(console.log("=== CARGA COMPLETA ==="),s(!1))};(async()=>{console.log("🧪 INICIANDO PRUEBA DIRECTA SIMPLE...");try{const O=kt(xn,"asistencia_dual"),L=$t(O,Td(5)),M=await ga(L);if(console.log(`✅ asistencia_dual - Documentos encontrados: ${M.size}`),M.size>0)M.docs.forEach((J,V)=>{const K=J.data();console.log(`   ${V+1}. ${J.id.slice(0,8)} - ${K.emailEstudiante} - ${K.tipo}`),console.log("      Fecha original:",K.fechaHora),console.log("      Todos los campos:",Object.keys(K))});else{console.log("❌ No se encontraron documentos en asistencia_dual");const J=["asistenciaEmpresa","asistencia_empresa"];for(const V of J)try{const K=kt(xn,V),z=$t(K,Td(3)),G=await ga(z);if(console.log(`📋 ${V}: ${G.size} documentos`),G.size>0){const Y=G.docs[0].data();console.log("   Estructura:",Object.keys(Y)),console.log("   Email:",Y.emailEstudiante||Y.email),console.log("   Fecha:",Y.fechaHora||Y.fecha)}}catch(K){console.log(`❌ ${V}: ${K instanceof Error?K.message:"Error"}`)}}}catch(O){console.error("❌ Error en prueba directa:",O),O.code==="permission-denied"?(console.log("🔒 PROBLEMA: Permisos de Firestore denegados"),console.log("💡 Ve a Firebase Console → Firestore → Rules y verifica los permisos")):O.code==="failed-precondition"&&(console.log("📊 PROBLEMA: Faltan índices en Firestore"),console.log("💡 Ve a Firebase Console → Firestore → Indexes"))}})(),KXe(I,E).then(O=>{console.log("🔍 Debug info for collections:",O),Object.entries(O).forEach(([L,M])=>{if(M.exists&&M.totalDocs>0){if(console.log(`
📋 COLECCIÓN ${L.toUpperCase()}:`),console.log(`   📊 Total documentos: ${M.totalDocs}`),console.log(`   📅 Documentos del período: ${M.count}`),console.log(`   🔑 Campo de fecha: ${M.hasDateField}`),M.sampleDoc){console.log("   📄 Documento ejemplo:",M.sampleDoc);const J=M.sampleDoc,V=J.emailEstudiante||J.email||J.userEmail||J.correo||"NO ENCONTRADO",K=J.tipo||J.type||J.action||J.tipoRegistro||"NO ENCONTRADO",z=J.fechaHora||J.fecha||J.timestamp||J.createdAt||"NO ENCONTRADO";console.log(`   📧 Email estudiante: ${V}`),console.log(`   📝 Tipo registro: ${K}`),console.log(`   📅 Fecha: ${z}`),console.log("   🗂️ Todos los campos:",Object.keys(J))}M.filteredDocs&&M.filteredDocs.length>0&&(console.log("   📋 Registros del período encontrados:",M.filteredDocs.length),M.filteredDocs.forEach((J,V)=>{V<3&&console.log(`      ${V+1}. ID: ${J.id}`,J.data)}))}else M.exists?console.log(`⚪ Colección ${L}: vacía`):console.log(`❌ Colección ${L}: no existe`)})}).catch(O=>{console.error("Debug error:",O)}),GXe().then(O=>{console.log("🔍 Debug info for users:",O),(!O.exists||O.totalDocs===0)&&(console.log('⚠️ Colección "users" vacía o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async M=>{var J;try{const V=kt(xn,M),K=$t(V,Td(5)),z=await ga(K);z.size>0?(console.log(`✅ Encontrada colección alternativa: ${M} con ${z.size} documentos`),console.log("Documento muestra:",(J=z.docs[0])==null?void 0:J.data())):console.log(`❌ Colección ${M}: vacía`)}catch{console.log(`❌ Colección ${M}: no existe`)}}))}).catch(O=>{console.error("Users debug error:",O)});try{console.log("Configurando suscripción a asistencia...");const O=qXe(I,E,M=>{if(console.log("✅ Received registros:",M.length),M.length>0){console.log("📋 ANÁLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",M[0]);const J=[...new Set(M.map(ee=>ee.emailEstudiante).filter(Boolean))];console.log("📧 Emails de estudiantes en registros:",J);const V=[...new Set(M.map(ee=>ee.tipo).filter(Boolean))];console.log("📝 Tipos de registro encontrados:",V);const K=M.reduce((ee,P)=>{const Q=new Date(P.fechaHora).getDate();return ee[Q]||(ee[Q]=[]),ee[Q].push(P),ee},{});console.log("📅 Registros por día del mes:",Object.keys(K).map(ee=>({dia:parseInt(ee),cantidad:K[parseInt(ee)].length})));const z=r.map(ee=>ee.email).filter(Boolean);console.log("👥 Emails de estudiantes cargados:",z);const G=J.filter(ee=>z.includes(ee)),Y=J.filter(ee=>!z.includes(ee));console.log("✅ Emails que coinciden:",G),console.log("❌ Emails que NO coinciden:",Y)}else console.log("⚠️ No se encontraron registros de asistencia para el período");t(M),N=!0,R()},M=>{console.error("❌ Error fetching asistencia:",M),o("Error al cargar datos de asistencia: "+M.message),N=!0,R()});console.log("Configurando suscripción a usuarios...");const L=WXe(M=>{if(console.log("✅ Received users (multi-collection):",M.length),M.length>0){console.log("Sample user:",M[0]);const J=M.filter(V=>V.profile===Wt.ESTUDIANTE&&V.curso);console.log("Dual students found:",J.length),J.forEach(V=>{console.log(`- ${V.nombreCompleto} (${V.curso}) - ${V.email}`)})}n(M),j=!0,R()},M=>{console.error("❌ Error fetching users (multi-collection):",M),console.log("🔄 Intentando con función original de usuarios...");const J=XXe(V=>{console.log("✅ Received users (fallback):",V.length),n(V),j=!0,R()},V=>{console.error("❌ Error en fallback también:",V),o("Error al cargar estudiantes: "+M.message),j=!0,R()})});return()=>{console.log("Limpiando suscripciones..."),O&&O(),L&&L()}}catch(O){console.error("❌ Error setting up subscriptions:",O),o("Error al inicializar conexiones: "+(O instanceof Error?O.message:"Error desconocido")),s(!1)}},[c]);const{monthDays:g,monthName:x,year:b}=S.useMemo(()=>{const I=c.getFullYear(),E=c.getMonth();return{monthDays:new Date(I,E+1,0).getDate(),monthName:c.toLocaleString("es-CL",{month:"long"}),year:I}},[c]),y=S.useMemo(()=>{let I=r.filter(E=>E.profile===Wt.ESTUDIANTE&&E.curso&&Vp.includes(s_(E.curso)));if(d!=="todos"&&(I=I.filter(E=>s_(E.curso||"")===d)),h&&(I=I.filter(E=>E.nombreCompleto.toLowerCase().includes(h.toLowerCase()))),e.length>0){const E=[...new Set(e.map(R=>R.emailEstudiante).filter(Boolean))],N=I.map(R=>R.email),j=E.filter(R=>!N.includes(R));if(j.length>0){console.log("📝 Agregando estudiantes faltantes con registros:",j);const D=j.map(O=>{const L=e.find(M=>M.emailEstudiante===O);return{id:O,email:O,nombreCompleto:(L==null?void 0:L.nombreEstudiante)||O.split("@")[0],curso:(L==null?void 0:L.curso)||"3ºC",profile:Wt.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(O=>{const L=d==="todos"||s_(O.curso)===d,M=!h||O.nombreCompleto.toLowerCase().includes(h.toLowerCase());return L&&M&&Vp.includes(s_(O.curso))});I=[...I,...D]}}return console.log(`👥 Estudiantes filtrados para mostrar: ${I.length}`),I.forEach(E=>{console.log(`   - ${E.nombreCompleto} (${E.curso}) - ${E.email}`)}),I.sort((E,N)=>E.nombreCompleto.localeCompare(N.nombreCompleto))},[r,d,h,e]),w=S.useMemo(()=>{console.log("🔄 Procesando datos de asistencia para la tabla..."),console.log(`📊 Total registros a procesar: ${e.length}`),console.log(`👥 Estudiantes disponibles: ${y.length}`);const I=new Map;return e.length===0?(console.log("⚠️ No hay registros para procesar aún"),I):(e.forEach((E,N)=>{const j=E.emailEstudiante;if(!j)return;let R;if(E.fechaHora instanceof Date)R=E.fechaHora;else if(E.fechaHora&&typeof E.fechaHora=="object"&&"toDate"in E.fechaHora)R=E.fechaHora.toDate();else if(typeof E.fechaHora=="string")R=new Date(E.fechaHora);else{console.warn("Fecha no válida en registro:",E);return}const D=R.getDate(),O=R.getMonth(),L=R.getFullYear();N<3&&console.log(`📅 Registro ${N+1}:`,{email:j,tipo:E.tipo,fechaOriginal:E.fechaHora,fechaProcesada:R.toLocaleString(),año:L,mes:O,día:D}),I.has(j)||I.set(j,new Map);const M=I.get(j);M.has(D)||M.set(D,{});const J=M.get(D);E.tipo==="Entrada"?(!J.entrada||R<new Date(J.entrada.fechaHora))&&(J.entrada=E):E.tipo==="Salida"&&(!J.salida||R>new Date(J.salida.fechaHora))&&(J.salida=E)}),console.log("📋 Datos de asistencia procesados:",{estudiantesConRegistros:I.size,estudiantes:Array.from(I.keys()),registrosPorEstudiante:Array.from(I.entries()).map(([E,N])=>({email:E,dias:Array.from(N.keys()),totalRegistros:Array.from(N.values()).reduce((j,R)=>j+(R.entrada?1:0)+(R.salida?1:0),0)}))}),I)},[e]),_=I=>{u(E=>{const N=new Date(E);return N.setMonth(N.getMonth()+I),N})},B=I=>{I!=null&&I.latitud&&(I!=null&&I.longitud)&&window.open(`https://www.google.com/maps?q=${I.latitud},${I.longitud}`,"_blank")},k=["D","L","M","M","J","V","S"];return i?l.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:l.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:i})}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[l.jsx("button",{onClick:()=>_(-1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:"←"}),l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${x} ${b}`}),l.jsx("button",{onClick:()=>_(1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:"→"})]}),l.jsxs("select",{value:d,onChange:I=>f(I.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"todos",children:"Todos los Cursos"}),Vp.map(I=>l.jsx("option",{value:I,children:I},I))]}),l.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:h,onChange:I=>p(I.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a?l.jsxs("div",{className:"text-center text-amber-600 py-10",children:[l.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),l.jsx("div",{children:"Cargando datos de asistencia..."})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:g},(I,E)=>{const j=new Date(b,c.getMonth(),E+1).getDay(),R=j===0||j===6;return l.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${R?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[l.jsx("div",{className:"font-semibold",children:k[j]}),l.jsx("div",{children:E+1})]},E)})]})}),l.jsx("tbody",{children:y.length>0?y.map(I=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[l.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:I.nombreCompleto}),Array.from({length:g},(E,N)=>{var L;const j=N+1,R=(L=w.get(I.email))==null?void 0:L.get(j),D=new Date(b,c.getMonth(),N+1),O=D.getDay()===0||D.getDay()===6;return I.email==="alexis.robles@industrialderecoleta.cl"&&j===2&&console.log("🔍 Verificando día 2 para Alexis:",{email:I.email,day:j,hasDataForStudent:w.has(I.email),studentDayRecords:R,allAttendanceKeys:Array.from(w.keys()),daysForStudent:w.get(I.email)?Array.from(w.get(I.email).keys()):[]}),l.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${O?"bg-slate-100 dark:bg-slate-700/50":""}`,children:l.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(R==null?void 0:R.entrada)&&l.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var M;return B((M=R.entrada)==null?void 0:M.ubicacion)},children:[l.jsx(YXe,{}),l.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(R.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(R==null?void 0:R.salida)&&l.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var M;return B((M=R.salida)==null?void 0:M.ubicacion)},children:[l.jsx(JXe,{}),l.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(R.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},j)})]},I.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:g+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},Ck="evaluaciones_formativas",_k="calificaciones_formativas",DL="trabajos_grupales_formativos",eYe="usuarios",PL=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},tYe=(e,t,r)=>{const n=$t(kt(ht,Ck),Jr("curso","==",e),Jr("asignatura","==",t),Sr("fecha","asc"));return pr(n,a=>{r(a.docs.map(s=>PL(s)))},a=>{console.error("Error al suscribirse a evaluaciones:",a),r([])})},rYe=async(e,t)=>{const r=jg(ht),n=dr(kt(ht,Ck));r.set(n,{...e,fecha:sr.fromDate(new Date(e.fecha+"T00:00:00"))});const a=dr(ht,_k,n.id);return r.set(a,t),await r.commit(),n.id},nYe=async(e,t)=>{const r=dr(ht,Ck,e);await Ji(r,t,{merge:!0})},aYe=async e=>{const t=jg(ht);t.delete(dr(ht,Ck,e)),t.delete(dr(ht,_k,e)),await t.commit()},sYe=(e,t)=>{if(e.length===0)return t({}),()=>{};const r=e.map(n=>{const a=dr(ht,_k,n);return pr(a,s=>{s.exists()&&t({[n]:s.data()})})});return()=>r.forEach(n=>n())},iYe=async(e,t)=>{const r=dr(ht,_k,e);await Ji(r,t,{merge:!0})},oYe=(e,t,r)=>{const n=$t(kt(ht,DL),Jr("curso","==",e),Jr("asignatura","==",t),Sr("fechaPresentacion","desc"));return pr(n,a=>{r(a.docs.map(s=>PL(s)))},a=>{console.error("Error al suscribirse a trabajos grupales:",a),r([])})},lYe=async e=>{const t={...e,fechaPresentacion:sr.fromDate(new Date(e.fechaPresentacion+"T00:00:00"))};await Tn(kt(ht,DL),t)},cYe=async(e,t)=>{const r=dr(ht,DL,e);await Ji(r,t,{merge:!0})},uYe=e=>{const t=$t(kt(ht,eYe));return pr(t,r=>{e(r.docs.map(n=>PL(n)))},r=>{console.error("Error al suscribirse a usuarios:",r),e([])})},_le=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},cv={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},Nle=e=>e.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:e.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:e.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:e.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},dYe=({cursos:e,onSelect:t})=>l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),e.length>0?l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:e.map(r=>{const n=Nle(r);return l.jsxs("div",{className:"space-y-2 text-center",children:[l.jsxs("button",{onClick:()=>t(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[l.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),l.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[l.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),l.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),l.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):l.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[l.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),l.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),AYe=({curso:e,asignaturas:t,onSelect:r,onBack:n})=>{const a=Nle(e);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[l.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),l.jsxs("div",{className:`p-2 rounded-md ${a.bg} ${a.text} font-bold`,children:["Libro de Clases: ",e]})]}),l.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),t.length>0?l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:t.map(s=>l.jsxs("button",{onClick:()=>r(s),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[l.jsx("span",{className:"text-2xl",children:cv[s]||cv.Default}),l.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:s})]},s))}):l.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[l.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),l.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},fYe=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=S.useState([]),[i,o]=S.useState({}),[c,u]=S.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,f]=S.useState(null),[h,p]=S.useState(null),[g,x]=S.useState(!0),b=S.useMemo(()=>r.filter(N=>N.profile===Wt.ESTUDIANTE&&_le(N.curso||"")===e).map(N=>N.nombreCompleto).sort((N,j)=>N.localeCompare(j)),[r,e]);S.useEffect(()=>{x(!0);const N=tYe(e,t,j=>{s(j);const R=j.map(O=>O.id),D=sYe(R,O=>{o(L=>({...L,...O}))});return x(!1),()=>D()});return()=>N()},[e,t]);const y=N=>{const{name:j,value:R}=N.target;d?f(D=>D?{...D,[j]:R}:null):u(D=>({...D,[j]:R}))},w=async N=>{if(N.preventDefault(),p(null),!c.nombreActividad.trim()){p("El nombre de la actividad es obligatorio.");return}const j={asignatura:t,curso:e,...c},R=b.reduce((D,O)=>(D[O]="trabajado",D),{});try{await rYe(j,R),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(D){console.error(D),p("No se pudo crear la evaluación.")}},_=(N,j)=>{var L;const R=((L=i[N])==null?void 0:L[j])||"trabajado";let D;R==="trabajado"?D="no trabajado":R==="no trabajado"?D="ausente":D="trabajado";const O={...i,[N]:{...i[N]||{},[j]:D}};o(O),iYe(N,{[j]:D}).catch(M=>{console.error("Error updating grade:",M)})},B=N=>f(N),k=async()=>{if(d)try{await nYe(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),f(null)}catch(N){console.error(N),p("No se pudo guardar la edición.")}},I=async N=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?"))try{await aYe(N)}catch(j){console.error(j),p("No se pudo eliminar la evaluación.")}},E=S.useCallback(N=>{if(a.length===0)return"-";let j=0,R=0;return a.forEach(D=>{var L;const O=(L=i[D.id])==null?void 0:L[N];O==="trabajado"?(j+=7,R++):O==="no trabajado"&&(j+=2,R++)}),R===0?"-":(j/R).toFixed(1)},[i,a]);return g?l.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),l.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),l.jsxs("form",{onSubmit:w,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),l.jsxs("div",{className:"w-full",children:[l.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),l.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:c.nombreActividad,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{className:"w-full",children:[l.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),l.jsx("input",{id:"fecha",type:"date",name:"fecha",value:c.fecha,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("div",{className:"w-full",children:l.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),h&&l.jsx("p",{className:"text-red-500 text-sm col-span-full",children:h})]}),l.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),a.map(N=>l.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===N.id?l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),l.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),l.jsx("button",{onClick:k,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"font-semibold",children:N.nombreActividad}),l.jsx("span",{className:"font-normal text-slate-500",children:N.fecha}),l.jsxs("div",{className:"flex gap-2 mt-1",children:[l.jsx("button",{onClick:()=>B(N),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),l.jsx("button",{onClick:()=>I(N.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},N.id)),l.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:b.map(N=>l.jsxs("tr",{children:[l.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:N}),a.map(j=>{var O;const R=(O=i[j.id])==null?void 0:O[N];let D;return R==="trabajado"?D=cv[t]||cv.Default:R==="no trabajado"?D="❌":R==="ausente"?D="A":D=cv[t]||cv.Default,l.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:l.jsx("button",{onClick:()=>_(j.id,N),className:`text-3xl transition-opacity duration-200 ${R==="trabajado"?"opacity-100":R==="no trabajado"?"opacity-40":R==="ausente"?"opacity-100 text-red-500 font-bold":"opacity-100"}`,children:D})},j.id)}),l.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:E(N)})]},N))})]})})]})},hYe=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=S.useState([]),[i,o]=S.useState(null),[c,u]=S.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,f]=S.useState({}),[h,p]=S.useState(2),g=S.useMemo(()=>r.filter(B=>B.profile===Wt.ESTUDIANTE&&_le(B.curso||"")===e).sort((B,k)=>B.nombreCompleto.localeCompare(k.nombreCompleto)),[r,e]);S.useEffect(()=>{const B=oYe(e,t,s);return()=>B()},[e,t]),S.useEffect(()=>{if(i){const B={};i.grupos.forEach(k=>{k.integrantes.forEach(I=>{B[I.nombre]={groupNumber:String(k.numero),role:I.rol||""}})}),f(B)}else f({})},[i]);const x=async B=>{if(B.preventDefault(),!c.nombre.trim())return;const k={curso:e,asignatura:t,nombreActividad:c.nombre,fechaPresentacion:c.fecha,grupos:[]};try{await lYe(k),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(I){console.error(I),alert("No se pudo crear la actividad grupal.")}},b=async()=>{if(!i)return;const B=new Map;for(const I of g){const E=d[I.nombreCompleto];if(E&&E.groupNumber){const N=parseInt(E.groupNumber,10);isNaN(N)||(B.has(N)||B.set(N,[]),B.get(N).push({nombre:I.nombreCompleto,rol:E.role||""}))}}const k=Array.from(B.entries()).map(([I,E])=>({numero:I,integrantes:E})).sort((I,E)=>I.numero-E.numero);try{await cYe(i.id,{grupos:k}),alert("Grupos guardados con éxito.")}catch(I){console.error(I),alert("No se pudieron guardar los grupos.")}},y=()=>{if(h<2){alert("Debe haber al menos 2 grupos.");return}const B=[...g].sort(()=>Math.random()-.5),k={};B.forEach((I,E)=>{var N;k[I.nombreCompleto]={groupNumber:String(E%h+1),role:((N=d[I.nombreCompleto])==null?void 0:N.role)||""}}),f(k)},w=(B,k,I)=>{f(E=>({...E,[B]:{...E[B]||{groupNumber:"",role:""},[k]:I}}))},_=S.useMemo(()=>{const B=new Map;return Object.entries(d).forEach(([k,I])=>{I.groupNumber&&(B.has(I.groupNumber)||B.set(I.groupNumber,[]),B.get(I.groupNumber).push({nombre:k,rol:I.role}))}),Array.from(B.entries()).sort((k,I)=>parseInt(k[0])-parseInt(I[0]))},[d]);return i?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("button",{onClick:()=>o(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),l.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),l.jsx("button",{onClick:b,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"md:col-span-1 space-y-4",children:[l.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"number",value:h,onChange:B=>p(parseInt(B.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),l.jsx("button",{onClick:y,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),l.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),l.jsx("table",{className:"w-full text-sm",children:l.jsx("tbody",{children:g.map(B=>{var k;return l.jsxs("tr",{children:[l.jsx("td",{className:"py-1 pr-2",children:B.nombreCompleto}),l.jsx("td",{className:"py-1",children:l.jsx("input",{type:"number",value:((k=d[B.nombreCompleto])==null?void 0:k.groupNumber)||"",onChange:I=>w(B.nombreCompleto,"groupNumber",I.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},B.id)})})})]})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:_.map(([B,k])=>l.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[l.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",B]}),l.jsx("ul",{className:"space-y-2",children:k.map(I=>l.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[l.jsx("span",{className:"flex-1 truncate",children:I.nombre}),l.jsxs("select",{value:I.rol||"",onChange:E=>w(I.nombre,"role",E.target.value),className:"p-1 border rounded text-xs w-32",children:[l.jsx("option",{value:"",children:"-- Asignar Rol --"}),dee.map(E=>l.jsx("option",{value:E,children:E},E))]})]},I.nombre))})]},B))})]})]})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),l.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),l.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[l.jsx("input",{value:c.nombre,onChange:B=>u({...c,nombre:B.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),l.jsx("input",{type:"date",value:c.fecha,onChange:B=>u({...c,fecha:B.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),a.map(B=>l.jsxs("button",{onClick:()=>o(B),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[l.jsx("p",{className:"font-bold",children:B.nombreActividad}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",B.fechaPresentacion]})]},B.id))]})]})},mYe=({currentUser:e})=>{const[t,r]=S.useState("calificaciones"),[n,a]=S.useState(null),[s,i]=S.useState(null),[o,c]=S.useState([]),[u,d]=S.useState(!0);S.useEffect(()=>{d(!0);const x=uYe(b=>{c(b),d(!1)});return()=>x()},[]);const f=S.useMemo(()=>e.cursos||[],[e.cursos]),h=S.useMemo(()=>e.asignaturas||[],[e.asignaturas]),p=({tab:x,label:b})=>l.jsx("button",{onClick:()=>r(x),className:`${t===x?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:b}),g=()=>{if(u)return l.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!n)return l.jsx(dYe,{cursos:f,onSelect:a});if(!s)return l.jsx(AYe,{curso:n,asignaturas:h,onSelect:i,onBack:()=>a(null)});if(t==="calificaciones")return l.jsx(fYe,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)});if(t==="grupos")return l.jsx(hYe,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)})};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx(p,{tab:"calificaciones",label:"Calificaciones"}),l.jsx(p,{tab:"grupos",label:"Trabajos Grupales"})]})}),l.jsx("div",{className:"mt-6",children:g()})]})};function pYe(e){return e.map(t=>{const[r,n]=t.minuto.split("-").map(Number),a=t.accionesEstudiantes.length>0?t.accionesEstudiantes.split(" ").length/(n-r):0;return{minuto:r,participacion:Math.min(100,a*10)}})}function gYe(e){const t=new Map,r={preguntas_abiertas:/(?:pregunt[aó]|cu[áa]l|qu[ée]|c[óo]mo|por qu[ée]|explica)/gi,interrogacion_sucesiva:/(?:entonces|y luego|qu[ée] m[áa]s|profundiza|explica mejor)/gi,ejemplos_contextualizados:/(?:ejemplo|caso|situaci[óo]n|contexto real|en la vida)/gi,feedback_inmediato:/(?:bien|correcto|exacto|muy bien|as[íi] es|mejorar[íi]a)/gi};for(const[n,a]of Object.entries(r)){const s=e.match(a);t.set(n,s?s.length:0)}return t}async function xYe(e,t){var i;const r={stats:{docenteId:e.docenteInfo||"",curso:e.cursoInfo||"",asignatura:e.asignaturaInfo||"",conteo_observaciones:1,uso_preguntas_abiertas_pct:0,uso_interrogacion_sucesiva_pct:0,uso_ejemplos_contextualizados_pct:0,feedback_inmediato_pct:0,min_interaccion:0,min_explicacion:0,participacion_promedio:0},charts:{participacion_por_minuto:[],estrategias_frecuencia:[],indicadores_cumplimiento:[],nube_palabras:[]},summary:{fortalezas:[],mejoras:[],recomendaciones:[]},alerts:[],traza:{modelo:"gemini-2.5-flash-lite",version_prompt:"v1"}};if(e.detallesObservacion){r.charts.participacion_por_minuto=pYe(e.detallesObservacion);let o=0,c=0;e.detallesObservacion.forEach(u=>{const[d,f]=u.minuto.split("-").map(Number),h=f-d;u.accionesEstudiantes.length>u.accionesDocente.length?o+=h:c+=h}),r.stats.min_interaccion=o,r.stats.min_explicacion=c}const n=new Map;let a=0;(i=e.detallesObservacion)==null||i.forEach(o=>{gYe(o.accionesDocente).forEach((u,d)=>{n.set(d,(n.get(d)||0)+u)}),a+=o.accionesDocente.length}),n.forEach((o,c)=>{const u=a>0?o/a*100:0;switch(r.charts.estrategias_frecuencia.push({estrategia:c,porcentaje:Math.round(u*100)/100,conteo:o}),c){case"preguntas_abiertas":r.stats.uso_preguntas_abiertas_pct=u;break;case"interrogacion_sucesiva":r.stats.uso_interrogacion_sucesiva_pct=u;break;case"ejemplos_contextualizados":r.stats.uso_ejemplos_contextualizados_pct=u;break;case"feedback_inmediato":r.stats.feedback_inmediato_pct=u;break}}),r.charts.participacion_por_minuto.length>0&&(r.stats.participacion_promedio=r.charts.participacion_por_minuto.reduce((o,c)=>o+c.participacion,0)/r.charts.participacion_por_minuto.length);const s=[...n.entries()].sort(([,o],[,c])=>c-o);return r.summary.fortalezas=s.slice(0,3).map(([o])=>{switch(o){case"preguntas_abiertas":return"Uso efectivo de preguntas abiertas para promover el pensamiento crítico";case"interrogacion_sucesiva":return"Buena secuencia de preguntas para profundizar la comprensión";case"ejemplos_contextualizados":return"Excelente uso de ejemplos contextualizados";case"feedback_inmediato":return"Retroalimentación inmediata y efectiva";default:return`Buen uso de ${o.replace(/_/g," ")}`}}),r.summary.mejoras=s.slice(-3).map(([o])=>{switch(o){case"preguntas_abiertas":return"Aumentar el uso de preguntas abiertas";case"interrogacion_sucesiva":return"Desarrollar más secuencias de preguntas";case"ejemplos_contextualizados":return"Incorporar más ejemplos contextualizados";case"feedback_inmediato":return"Proporcionar más retroalimentación inmediata";default:return`Incrementar el uso de ${o.replace(/_/g," ")}`}}),r.summary.recomendaciones=r.summary.mejoras.map(o=>o.includes("preguntas abiertas")?"Preparar 2-3 preguntas desafiantes por segmento de clase":o.includes("secuencias de preguntas")?'Implementar la técnica de "¿Por qué?" en cascada':o.includes("ejemplos contextualizados")?"Vincular cada concepto con situaciones de la vida real":"Establecer puntos de verificación cada 10-15 minutos"),r.stats.participacion_promedio<30&&r.alerts.push("Baja participación estudiantil detectada"),r.stats.min_explicacion>r.stats.min_interaccion*2&&r.alerts.push("Alto tiempo de explicación vs. interacción"),r}const vYe=({acompanamientos:e,ciclosOPR:t,standaloneCiclos:r})=>{const[n,a]=S.useState(null),[s,i]=S.useState(null),[o,c]=S.useState(!1),u=e.length,d=Object.values(t).reduce((y,w)=>y+w.length,0)+r.length,f=[...Object.values(t).flat(),...r],h=new Set([...e.map(y=>y.docente),...f.map(y=>y.docenteInfo)]).size,p=f.reduce((y,w)=>{const _=new Date(w.fecha).toLocaleDateString("es-ES",{month:"long"});return y[_]=(y[_]||0)+1,y},{}),g=f.reduce((y,w)=>(w.asignaturaInfo&&(y[w.asignaturaInfo]=(y[w.asignaturaInfo]||0)+1),y),{}),x=Object.entries(g).sort(([,y],[,w])=>w-y).slice(0,5);f.reduce((y,w)=>{if(!w.horaInicio||!w.horaTermino)return y;const _=new Date("2000/01/01 "+w.horaInicio),k=(new Date("2000/01/01 "+w.horaTermino).getTime()-_.getTime())/(1e3*60);return y+k},0)/f.length;const b=f.filter(y=>{var w,_,B;return((w=y.retroalimentacion)==null?void 0:w.exito)&&((_=y.retroalimentacion)==null?void 0:_.modelo)&&((B=y.retroalimentacion)==null?void 0:B.foco)}).length;return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg",children:l.jsx(WA,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Acompañamientos"}),l.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u})]})]})}),l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/50 rounded-lg",children:l.jsx(_p,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Ciclos OPR"}),l.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:d})]})]})}),l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:l.jsx(Zl,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docentes Observados"}),l.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:h})]})]})}),l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:l.jsx(vo,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Retroalimentación Completa"}),l.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:b})]})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[l.jsx(Id,{className:"w-5 h-5 text-indigo-600"}),"Ciclos por Mes"]}),l.jsx("div",{className:"space-y-2",children:Object.entries(p).map(([y,w])=>l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 capitalize",children:y}),l.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:w})]}),l.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-2 bg-indigo-600 dark:bg-indigo-500 rounded-full",style:{width:`${w/d*100}%`}})})]})},y))})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[l.jsx(Tw,{className:"w-5 h-5 text-purple-600"}),"Análisis Inteligente"]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Seleccionar Ciclo OPR para Análisis"}),l.jsxs("select",{className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",value:(s==null?void 0:s.id)||"",onChange:y=>{const w=f.find(_=>_.id===y.target.value);i(w||null)},children:[l.jsx("option",{value:"",children:"Seleccione un ciclo..."}),f.map(y=>l.jsxs("option",{value:y.id,children:[y.docenteInfo," - ",new Date(y.fecha).toLocaleDateString()]},y.id))]})]}),s&&!n&&l.jsx("button",{onClick:async()=>{c(!0);try{const y=f.filter(_=>_.docenteInfo===s.docenteInfo&&_.id!==s.id),w=await xYe(s,y);a(w)}catch(y){console.error("Error al analizar ciclo:",y)}finally{c(!1)}},className:"w-full py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",disabled:o,children:o?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Analizando..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Tw,{className:"w-4 h-4"}),"Analizar Ciclo"]})}),n&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[l.jsx("h4",{className:"text-sm font-medium text-purple-700 dark:text-purple-300 mb-2",children:"Participación"}),l.jsxs("div",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:[n.stats.participacion_promedio.toFixed(1),"%"]})]}),l.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[l.jsx("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2",children:"Interacción vs Explicación"}),l.jsxs("div",{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:[n.stats.min_interaccion,"min / ",n.stats.min_explicacion,"min"]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("h4",{className:"text-sm font-medium text-green-700 dark:text-green-300 mb-2 flex items-center gap-1",children:[l.jsx(vo,{className:"w-4 h-4"})," Fortalezas"]}),l.jsx("ul",{className:"space-y-2",children:n.summary.fortalezas.map((y,w)=>l.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),y]},w))})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-sm font-medium text-amber-700 dark:text-amber-300 mb-2 flex items-center gap-1",children:[l.jsx(Wv,{className:"w-4 h-4"})," Áreas de Mejora"]}),l.jsx("ul",{className:"space-y-2",children:n.summary.mejoras.map((y,w)=>l.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full"}),y]},w))})]})]}),n.alerts.length>0&&l.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[l.jsxs("h4",{className:"text-sm font-medium text-red-700 dark:text-red-300 mb-2 flex items-center gap-1",children:[l.jsx(Fd,{className:"w-4 h-4"})," Alertas"]}),l.jsx("ul",{className:"space-y-2",children:n.alerts.map((y,w)=>l.jsxs("li",{className:"text-sm text-red-600 dark:text-red-300 flex items-center gap-2",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"}),y]},w))})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2 flex items-center gap-1",children:[l.jsx(nN,{className:"w-4 h-4"})," Recomendaciones"]}),l.jsx("ul",{className:"space-y-2",children:n.summary.recomendaciones.map((y,w)=>l.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),y]},w))})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[l.jsx(ef,{className:"w-5 h-5 text-amber-600"}),"Asignaturas Más Observadas"]}),l.jsx("div",{className:"space-y-2",children:x.map(([y,w])=>l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:y}),l.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:w})]}),l.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-2 bg-amber-600 dark:bg-amber-500 rounded-full",style:{width:`${w/Math.max(...Object.values(g))*100}%`}})})]})},y))})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[l.jsx(nN,{className:"w-5 h-5 text-blue-600"}),"Últimos Ciclos OPR"]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docente"}),l.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Fecha"}),l.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Asignatura"}),l.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estado"})]})}),l.jsx("tbody",{children:f.sort((y,w)=>new Date(w.fecha).getTime()-new Date(y.fecha).getTime()).slice(0,5).map(y=>{var w;return l.jsxs("tr",{className:"border-t dark:border-slate-700",children:[l.jsx("td",{className:"py-2 px-3 text-sm text-slate-900 dark:text-slate-300",children:y.docenteInfo}),l.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:new Date(y.fecha).toLocaleDateString()}),l.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:y.asignaturaInfo}),l.jsx("td",{className:"py-2 px-3",children:(w=y.retroalimentacion)!=null&&w.exito?l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded",children:[l.jsx(vo,{className:"w-3 h-3"})," Completado"]}):l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded",children:[l.jsx(Wv,{className:"w-3 h-3"})," En proceso"]})})]},y.id)})})]})})]})]})},Sle=gP(),lE="acompanamientos",km="ciclos_opr",Bm=e=>{if(!e)return new Date().toISOString().split("T")[0];if(typeof e=="string")return e.includes("T")?e.split("T")[0]:e;if(typeof(e==null?void 0:e.toDate)=="function")return e.toDate().toISOString().split("T")[0];try{return new Date(e).toISOString().split("T")[0]}catch{return new Date().toISOString().split("T")[0]}},kle=e=>{const t=e.lastIndexOf("."),r=t>0?e.substring(0,t):e,n=t>0?e.substring(t):"";return r.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"").substring(0,50)+n.toLowerCase()},bYe=(e,t,r)=>{const n=(e||"general").replace(/[^a-zA-Z0-9-]/g,"_"),a=(t||"temp").replace(/[^a-zA-Z0-9-]/g,"_"),s=kle(r);return`videos_opr/${n}/${a}/${s}`},yYe=async(e,t,r)=>{try{if(!Q6.currentUser)throw new Error("Usuario no autenticado. Por favor, inicia sesión nuevamente.");if(!e)throw new Error("No se proporcionó un archivo válido.");const n=["video/mp4","video/quicktime","video/x-msvideo","video/x-m4v"],a=500*1024*1024;if(e.size>a)throw new Error(`El archivo es demasiado grande. Máximo permitido: ${(a/1024/1024).toFixed(0)}MB`);if(!n.includes(e.type))throw new Error("Tipo de archivo no permitido. Solo se aceptan MP4, MOV, AVI o M4V.");let s="";const i=(t||"").split("/");if(i.length>=4&&i[0]==="videos_opr"){const d=i[1],f=i[2],h=i.slice(3).join("/");s=bYe(d,f,h)}else{const d=Date.now(),f=kle(e.name);s=`videos_opr/general/${d}_${f}`}const o=b4(Sle,s),c={contentType:e.type,cacheControl:"public, max-age=31536000",customMetadata:{originalName:e.name,uploadedBy:Q6.currentUser.uid,uploadDate:new Date().toISOString(),fileSize:String(e.size)}},u=Y1e(o,e,c);return new Promise((d,f)=>{let h=-1;u.on("state_changed",p=>{const g=p.bytesTransferred/p.totalBytes*100,x=Math.floor(g);r&&x!==h&&(h=x,r(x))},p=>{let g="Error desconocido durante la subida.";switch(p==null?void 0:p.code){case"storage/unauthorized":g="No tienes permisos para subir archivos. Verifica las reglas de Firebase Storage.";break;case"storage/canceled":g="La subida fue cancelada por el usuario.";break;case"storage/quota-exceeded":g="Se agotó el espacio de almacenamiento disponible.";break;case"storage/retry-limit-exceeded":g="Se agotaron los reintentos. Verifica tu conexión a internet.";break;default:p!=null&&p.message&&(g=p.message);break}f(new Error(g))},async()=>{try{const p=await pP(u.snapshot.ref);d(p)}catch{f(new Error("El archivo se subió, pero no se pudo obtener la URL de descarga."))}})})}catch(n){const a=(n==null?void 0:n.message)||"Error inesperado al procesar el archivo.";throw new Error(a)}},RL=async e=>{try{const t=b4(Sle,e),{items:r,prefixes:n}=await J1e(t);await Promise.all(r.map(a=>Z1e(a))),await Promise.all(n.map(a=>RL(a.fullPath)))}catch{}},wYe=async()=>{try{const e=$t(kt(ht,lE),Sr("fecha","desc"));return(await ga(e)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:Bm(a==null?void 0:a.fecha)}}).sort((n,a)=>n.fecha<a.fecha?1:n.fecha>a.fecha?-1:0)}catch{throw new Error("No se pudieron cargar los acompañamientos")}},EYe=async e=>{try{const t={...e,fecha:sr.fromDate(new Date(e.fecha)),fechaCreacion:sr.now()},r=await Tn(kt(ht,lE),t);return{...e,id:r.id,fecha:Bm(e.fecha)}}catch{throw new Error("No se pudo crear el acompañamiento")}},CYe=async(e,t)=>{try{const r={...t,...t.fecha?{fecha:sr.fromDate(new Date(t.fecha))}:{},fechaModificacion:sr.now()};await Vu(dr(ht,lE,e),r)}catch{throw new Error("No se pudo actualizar el acompañamiento")}},_Ye=async e=>{try{const t=$t(kt(ht,km),Jr("acompanamientoId","==",e)),r=await ga(t),n=jg(ht);r.forEach(a=>n.delete(dr(ht,km,a.id))),await n.commit(),await RL(`videos_opr/${e}`),await za(dr(ht,lE,e))}catch{throw new Error("No se pudo eliminar el acompañamiento y sus datos asociados")}},pq=async e=>{var t;try{if(!(e!=null&&e.fecha))throw new Error("Falta fecha al crear ciclo OPR.");const r={...e,acompanamientoId:String(e.acompanamientoId||""),fecha:sr.fromDate(new Date(e.fecha)),fechaCreacion:sr.now()};(t=e==null?void 0:e.seguimiento)!=null&&t.fecha&&(r.seguimiento={...e.seguimiento,fecha:sr.fromDate(new Date(e.seguimiento.fecha))});const n=await Tn(kt(ht,km),r);return{...e,id:n.id,acompanamientoId:String(e.acompanamientoId||""),fecha:Bm(e.fecha)}}catch{throw new Error("No se pudo crear el ciclo OPR")}},NYe=async(e,t)=>{var r;try{const n={...t};t.fecha&&(n.fecha=sr.fromDate(new Date(t.fecha))),(r=t.seguimiento)!=null&&r.fecha&&(n.seguimiento={...t.seguimiento,fecha:sr.fromDate(new Date(t.seguimiento.fecha))}),n.fechaModificacion=sr.now(),await Vu(dr(ht,km,e),n)}catch{throw new Error("No se pudo actualizar el ciclo OPR")}},SYe=async e=>{try{const t=$t(kt(ht,km),Jr("acompanamientoId","==",e),Sr("fecha","desc"));return(await ga(t)).docs.map(a=>{var o;const s=a.data(),i={id:a.id,...s,fecha:Bm(s==null?void 0:s.fecha)};return(o=s==null?void 0:s.seguimiento)!=null&&o.fecha&&(i.seguimiento={...s.seguimiento,fecha:Bm(s.seguimiento.fecha)}),i})}catch{throw new Error("No se pudieron cargar los ciclos OPR. Revisa el índice compuesto (acompanamientoId + fecha).")}},kYe=async()=>{try{const e=$t(kt(ht,km),Jr("acompanamientoId","==",""),Sr("fecha","desc"));return(await ga(e)).docs.map(n=>{var i;const a=n.data(),s={id:n.id,...a,fecha:Bm(a==null?void 0:a.fecha)};return(i=a==null?void 0:a.seguimiento)!=null&&i.fecha&&(s.seguimiento={...a.seguimiento,fecha:Bm(a.seguimiento.fecha)}),s})}catch(e){throw console.error("Error fetching standalone OPR cycles:",e),new Error("No se pudieron cargar los ciclos OPR independientes.")}},gq=async e=>{try{const t=await R1(dr(ht,km,e));if(!t.exists())return;const r=t.data(),n=(r==null?void 0:r.acompanamientoId)||"general";await RL(`videos_opr/${n}/${e}`),await za(dr(ht,km,e))}catch{throw new Error("No se pudo eliminar el ciclo OPR")}},BYe=async e=>{try{const t=$t(kt(ht,lE),Jr("docente","==",e),Sr("fecha","desc"));return(await ga(t)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:Bm(a==null?void 0:a.fecha)}})}catch{throw new Error("No se pudieron cargar los acompañamientos del docente")}},jYe=async e=>{try{const t=$t(kt(ht,"rubricas_personalizadas"),Jr("docente","==",e)),r=await ga(t);if(r.empty)return null;const n=r.docs[0].data();return(n==null?void 0:n.rubrica)??null}catch{return null}},TYe=async()=>await hle(),IYe=({label:e,onFileChange:t,onLinkChange:r,uploadedUrl:n,onRemove:a,isUploading:s,accept:i="video/mp4,video/quicktime,video/avi,video/mov",error:o,progress:c=0,allowLink:u=!1})=>{const[d,f]=S.useState(!1),[h,p]=S.useState(!1),[g,x]=S.useState(""),b=`file-upload-${e.replace(/\s+/g,"-")}`,y=E=>{E.preventDefault(),E.stopPropagation(),E.type==="dragenter"||E.type==="dragover"?f(!0):E.type==="dragleave"&&f(!1)},w=E=>{if(E.preventDefault(),E.stopPropagation(),f(!1),E.dataTransfer.files&&E.dataTransfer.files[0]&&!s){const N=E.dataTransfer.files[0];B(N)}},_=E=>{if(E.target.files&&E.target.files[0]&&!s){const N=E.target.files[0];B(N)}},B=E=>{if(E.size>524288e3){alert(`El archivo es demasiado grande. Tamaño máximo: ${524288e3/1024/1024}MB`);return}if(!["video/mp4","video/quicktime","video/avi","video/mov"].includes(E.type)){alert("Solo se aceptan archivos de video (MP4, MOV, AVI, QuickTime)");return}t(E)},k=()=>o?"bg-red-500":c===100?"bg-green-500":"bg-blue-500",I=()=>{if(!(!g||!r)){if(!g.startsWith("http://")&&!g.startsWith("https://")){alert("Por favor ingresa una URL válida que comience con http:// o https://");return}r(g),p(!1),x("")}};return l.jsxs("div",{className:"w-full",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300",children:e}),u&&!n&&!s&&l.jsx("button",{type:"button",onClick:()=>p(!h),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400",children:h?"Cancelar":"Insertar enlace"})]}),h&&l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("input",{type:"url",value:g,onChange:E=>x(E.target.value),placeholder:"https://...",className:"flex-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{type:"button",onClick:I,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Guardar"})]}),n?l.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-md bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700",children:[l.jsx(vo,{className:"w-5 h-5 text-green-600"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-700 dark:text-green-300 hover:underline font-medium",children:n.startsWith("http")?"Ver video enlazado":"Ver video cargado"}),l.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:n.startsWith("http")?"Enlace guardado exitosamente":"Video subido exitosamente"})]}),l.jsx("button",{type:"button",onClick:a,className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar video",children:l.jsx(tl,{className:"w-4 h-4"})})]}):l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:`relative border-2 border-dashed rounded-lg transition-colors ${d?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":s?"border-amber-400 bg-amber-50 dark:bg-amber-900/20":o?"border-red-400 bg-red-50 dark:bg-red-900/20":"border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500"} ${s?"cursor-not-allowed":"cursor-pointer"}`,onDragEnter:y,onDragLeave:y,onDragOver:y,onDrop:w,onClick:()=>{var E;return!s&&((E=document.getElementById(b))==null?void 0:E.click())},children:[l.jsx("div",{className:"flex flex-col items-center justify-center p-6",children:s?l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:"Subiendo video..."}),l.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:[c.toFixed(1),"% completado"]})]}):o?l.jsxs("div",{className:"text-center",children:[l.jsx(Fd,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:"Error al subir"}),l.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Haz clic para intentar nuevamente"})]}):l.jsxs("div",{className:"text-center",children:[l.jsx(vee,{className:"h-8 w-8 text-slate-400 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:"Arrastra un video aquí"}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"o haz clic para seleccionar"}),l.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-2",children:"MP4, MOV, AVI (máx. 500MB)"})]})}),l.jsx("input",{id:b,type:"file",onChange:_,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:s,accept:i,style:{display:"none"}})]}),s&&l.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:l.jsx("div",{className:`${k()} h-2 rounded-full transition-all duration-300`,style:{width:`${c}%`}})}),o&&l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[l.jsx(Fd,{className:"w-4 h-4 text-red-500"}),l.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:o})]})]})]})},FYe=({acompanamiento:e,cicloToEdit:t,onSave:r,onCancel:n,profesores:a})=>{const[s,i]=S.useState(!1),[o,c]=S.useState({}),[u,d]=S.useState({}),[f,h]=S.useState({}),[p,g]=S.useState({docente:e.docente||"",curso:e.curso||"",asignatura:e.asignatura||""}),x=S.useMemo(()=>({registroN:1,nombreCiclo:"",fecha:new Date().toISOString().split("T")[0],horaInicio:"",horaTermino:"",videoObservacionUrl:"",detallesObservacion:[{id:`row_${Date.now()}`,minuto:"0-5",accionesDocente:"",accionesEstudiantes:"",actividades:""}],retroalimentacion:{exito:"",foco:"",elementosIdentificar:""},planificacion:{preparacion:"",objetivo:"",actividad:"",tiempo:""},seguimiento:{fecha:"",curso:p.curso||"",profesor:p.docente||"",firma:""},acompanamientoId:e.id&&!e.id.startsWith("temp-")?e.id:""}),[e,p]),[b,y]=S.useState(t||x);S.useEffect(()=>{t?(y(t),(t.acompanamientoId===""||!t.acompanamientoId)&&g({docente:t.docenteInfo||"",curso:t.cursoInfo||"",asignatura:t.asignaturaInfo||""})):y(x)},[t,x]);const w=L=>{const{name:M,value:J}=L.target,V=M.split(".");V.length>1?y(K=>{const z=JSON.parse(JSON.stringify(K));let G=z;for(let Y=0;Y<V.length-1;Y++)G=G[V[Y]];return G[V[V.length-1]]=J,z}):y(K=>({...K,[M]:J}))},_=(L,M,J)=>{y(V=>({...V,detallesObservacion:V.detallesObservacion.map(K=>K.id===L?{...K,[M]:J}:K)}))},B=()=>{const L=b.detallesObservacion[b.detallesObservacion.length-1],M=L&&parseInt(L.minuto.split("-")[1],10)||0,J=`${M+1}-${M+5}`;y(V=>({...V,detallesObservacion:[...V.detallesObservacion,{id:`row_${Date.now()}`,minuto:J,accionesDocente:"",accionesEstudiantes:"",actividades:""}]}))},k=L=>{y(M=>({...M,detallesObservacion:M.detallesObservacion.filter(J=>J.id!==L)}))},I=async(L,M)=>{h(J=>({...J,[L]:null})),c(J=>({...J,[L]:!0})),d(J=>({...J,[L]:0}));try{const J=Date.now(),V=M.name.toLowerCase().replace(/[^a-z0-9.]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),K=e.id&&!e.id.startsWith("temp-")?e.id.replace(/[^a-zA-Z0-9-]/g,"_"):"general",z=b.id?b.id.replace(/[^a-zA-Z0-9-]/g,"_"):"temp",G=`videos_opr/${K}/${z}/${J}_${V}`,Y=await yYe(M,G,ee=>{d(P=>({...P,[L]:ee}))});E(L,Y),d(ee=>({...ee,[L]:100}))}catch(J){const V=(J==null?void 0:J.message)||"Error desconocido al subir el archivo";h(K=>({...K,[L]:V})),alert(`Error al subir el video: ${V}`)}finally{c(J=>({...J,[L]:!1})),setTimeout(()=>{d(J=>({...J,[L]:0}))},2e3)}},E=(L,M)=>{const J=L.split(".");J.length>1?y(V=>{const K=JSON.parse(JSON.stringify(V));let z=K;for(let G=0;G<J.length-1;G++)z=z[J[G]];return z[J[J.length-1]]=M,K}):y(V=>({...V,[L]:M}))},N=L=>{const M=L.split(".");M.length>1?y(J=>{const V=JSON.parse(JSON.stringify(J));let K=V;for(let z=0;z<M.length-1;z++)K=K[M[z]];return K[M[M.length-1]]="",V}):y(J=>({...J,[L]:""})),h(J=>({...J,[L]:null})),d(J=>({...J,[L]:0}))},j=async(L,M,J)=>{if(!J||!J.trim())return J;const V=`Mejora la redacción del siguiente texto con un tono técnico-pedagógico propio de informes educativos. Mantén el sentido original y NO agregues información nueva ni ejemplos inventados. Devuélvelo como un texto breve, claro y directo. Texto (${M}):

"""${J}"""`;try{return(await L.generateContent(V)).response.text()}catch(K){return console.error(`Error improving text for ${M}:`,K),J}},R=async()=>{var L,M;i(!0);try{const J="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",K=new us(J).getGenerativeModel({model:"gemini-1.5-flash-latest"}),z=b.retroalimentacion,G=b.planificacion,Y=await Promise.all([j(K,"Éxito",z.exito),j(K,"Modelo",z.modelo),j(K,"Foco",z.foco),j(K,"Elementos a identificar",z.elementosIdentificar),j(K,"Brecha - Preguntas",((L=z.brecha)==null?void 0:L.preguntas)||""),j(K,"Brecha - Indicadores",((M=z.brecha)==null?void 0:M.indicadores)||""),j(K,"Planificación - Preparación",G.preparacion),j(K,"Planificación - Objetivo",G.objetivo),j(K,"Planificación - Actividad",G.actividad),j(K,"Planificación - Tiempo",G.tiempo)]);y(ee=>({...ee,retroalimentacion:{...ee.retroalimentacion,exito:Y[0],modelo:Y[1],foco:Y[2],elementosIdentificar:Y[3],brecha:{...ee.retroalimentacion.brecha,preguntas:Y[4],indicadores:Y[5]}},planificacion:{...ee.planificacion,preparacion:Y[6],objetivo:Y[7],actividad:Y[8],tiempo:Y[9]}})),alert("Textos mejorados exitosamente con IA")}catch(J){console.error(J),alert("No se pudo mejorar la redacción. Intenta nuevamente.")}finally{i(!1)}},D=()=>{const L=new vr,M=L.internal.pageSize.getWidth(),J=15,V=M-J*2;let K=20;const z=P=>{K>260&&(L.addPage(),K=20),L.setFontSize(14),L.setFont("helvetica","bold"),L.text(P,J,K),K+=10},G=(P,Q="")=>{if(!P)return;K>270&&(L.addPage(),K=20),L.setFontSize(10),L.setFont("helvetica","bold"),L.text(Q,J,K),L.setFont("helvetica","normal");const X=L.splitTextToSize(P,V-(Q?15:0));L.text(X,J+(Q?15:0),K),K+=X.length*5+4};L.setFontSize(18),L.setFont("helvetica","bold"),L.text("Informe de Ciclo OPR",M/2,K,{align:"center"}),K+=15,z("1. Datos Generales");const Y=[["Docente:",p.docente],["Curso:",p.curso],["Asignatura:",p.asignatura],["Fecha:",new Date(b.fecha).toLocaleDateString("es-CL")],["Hora:",`${b.horaInicio} - ${b.horaTermino}`],["Ciclo:",b.nombreCiclo]];bo(L,{body:Y,startY:K,theme:"plain",styles:{fontSize:10},columnStyles:{0:{fontStyle:"bold"}}}),K=L.lastAutoTable.finalY+10,z("2. Registro Detallado de Observación");const ee=b.detallesObservacion.map(P=>[P.minuto,P.accionesDocente,P.accionesEstudiantes,P.actividades]);bo(L,{head:[["Minuto","Acciones del Docente","Acciones de Estudiantes","Actividades"]],body:ee,startY:K,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255},styles:{fontSize:9,cellPadding:2},didDrawPage:P=>{var Q;K=((Q=P.cursor)==null?void 0:Q.y)||20}}),K=L.lastAutoTable.finalY+10,z("3. Retroalimentación Docente"),G(b.retroalimentacion.exito,"Éxito:"),G(b.retroalimentacion.modelo,"Modelo:"),G(b.retroalimentacion.foco,"Foco:"),G(b.retroalimentacion.elementosIdentificar,"Elementos a Identificar:"),K+=5,L.setFontSize(11),L.setFont("helvetica","bold"),L.text("Análisis de Brecha",J,K),K+=7,G(`${b.retroalimentacion.brecha.minutoInicial} a ${b.retroalimentacion.brecha.minutoFinal}`,"Minutos:"),G(b.retroalimentacion.brecha.preguntas,"Preguntas:"),G(b.retroalimentacion.brecha.indicadores,"Indicadores:"),z("4. Planificación de Práctica"),G(b.planificacion.preparacion,"Preparación:"),G(b.planificacion.objetivo,"Objetivo:"),G(b.planificacion.actividad,"Actividad:"),G(b.planificacion.tiempo,"Tiempo:"),z("5. Seguimiento"),G(new Date(b.seguimiento.fecha).toLocaleDateString("es-CL"),"Fecha:"),G(b.seguimiento.firma,"Firma (Registrado por):"),L.save(`Informe_OPR_${p.docente}_${b.fecha}.pdf`)},O=async L=>{if(L.preventDefault(),!p.docente||!p.curso||!p.asignatura){alert("Por favor, complete Docente, Curso y Asignatura");return}if(!b.nombreCiclo||!b.fecha){alert("Por favor, complete el nombre del ciclo y la fecha");return}const M={...b,docenteInfo:p.docente,cursoInfo:p.curso,asignaturaInfo:p.asignatura,seguimiento:{...b.seguimiento,profesor:p.docente,curso:p.curso}};try{await r(M)}catch(J){console.error("Error al guardar ciclo OPR:",J),alert("Error al guardar el ciclo OPR. Intenta nuevamente.")}};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg animate-fade-in",children:[(!e.id||e.id.startsWith("temp-"))&&l.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-slate-50 dark:bg-slate-900/30",children:[l.jsx("h4",{className:"text-lg font-semibold mb-3 text-slate-700 dark:text-slate-300",children:"Datos Básicos del Ciclo OPR"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),l.jsxs("select",{value:p.docente,onChange:L=>g(M=>({...M,docente:L.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),Ks.map(L=>l.jsx("option",{value:L,children:L},L))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{value:p.asignatura,onChange:L=>g(M=>({...M,asignatura:L.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),qi.map(L=>l.jsx("option",{value:L,children:L},L))]})]})]})]}),l.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-blue-50 dark:bg-blue-900/30",children:[l.jsx("h4",{className:"text-lg font-semibold mb-2 text-blue-700 dark:text-blue-300",children:"Asistente IA del Ciclo OPR"}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("button",{type:"button",onClick:R,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:s,children:[l.jsx(EP,{className:"w-4 h-4"}),s?"Mejorando redacción...":"Mejorar Redacción del Ciclo"]}),l.jsxs("button",{type:"button",onClick:D,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[l.jsx(cg,{className:"w-4 h-4"}),"Descargar Informe PDF"]})]}),l.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Usa la IA para mejorar la redacción de los textos ya escritos. Luego, descarga el informe completo en PDF."})]}),l.jsxs("form",{onSubmit:O,className:"space-y-8",children:[l.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:[t?"Editando":"Nuevo"," Ciclo OPR"]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[l.jsx(_p,{className:"w-5 h-5 text-amber-500"})," Datos Generales"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsx("input",{type:"text",name:"nombreCiclo",value:b.nombreCiclo,onChange:w,placeholder:"Nombre o N° del Ciclo",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),l.jsx("input",{type:"date",name:"fecha",value:b.fecha,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),l.jsx("input",{type:"number",name:"registroN",value:b.registroN,onChange:w,placeholder:"Registro de Observación N°",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",min:1}),l.jsx("input",{type:"time",name:"horaInicio",value:b.horaInicio,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("input",{type:"time",name:"horaTermino",value:b.horaTermino,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx(IYe,{label:"Video de observación de clase",onFileChange:L=>I("videoObservacionUrl",L),onLinkChange:L=>E("videoObservacionUrl",L),uploadedUrl:b.videoObservacionUrl,onRemove:()=>N("videoObservacionUrl"),isUploading:!!o.videoObservacionUrl,error:f.videoObservacionUrl,progress:u.videoObservacionUrl||0,allowLink:!0})]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[l.jsx(qv,{className:"w-5 h-5 text-blue-500"})," Registro Detallado de Observación"]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b dark:border-slate-600",children:[l.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Minuto"}),l.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones del Docente"}),l.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones de Estudiantes"}),l.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Actividades"}),l.jsx("th",{className:"p-2"})]})}),l.jsx("tbody",{children:b.detallesObservacion.map(L=>l.jsxs("tr",{className:"border-b dark:border-slate-700",children:[l.jsx("td",{className:"p-2",children:l.jsx("input",{type:"text",value:L.minuto,onChange:M=>_(L.id,"minuto",M.target.value),className:"w-24 border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"0-5"})}),l.jsx("td",{className:"p-2",children:l.jsx("textarea",{value:L.accionesDocente,onChange:M=>_(L.id,"accionesDocente",M.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones del docente..."})}),l.jsx("td",{className:"p-2",children:l.jsx("textarea",{value:L.accionesEstudiantes,onChange:M=>_(L.id,"accionesEstudiantes",M.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones de estudiantes..."})}),l.jsx("td",{className:"p-2",children:l.jsx("textarea",{value:L.actividades,onChange:M=>_(L.id,"actividades",M.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir actividades realizadas..."})}),l.jsx("td",{className:"p-2",children:b.detallesObservacion.length>1&&l.jsx("button",{type:"button",onClick:()=>k(L.id),className:"text-red-500 hover:text-red-700 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar fila",children:l.jsx(tl,{className:"w-4 h-4"})})})]},L.id))})]})}),l.jsxs("button",{type:"button",onClick:B,className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 flex items-center gap-1 transition-colors",children:[l.jsx(U6,{className:"w-4 h-4"})," Agregar Fila"]})]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[l.jsx(gee,{className:"w-5 h-5 text-green-600"})," Retroalimentación Docente"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Éxito"}),l.jsx("textarea",{name:"retroalimentacion.exito",value:b.retroalimentacion.exito,onChange:w,placeholder:"Describir los aspectos exitosos observados en la clase...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Modelo"}),l.jsx("textarea",{name:"retroalimentacion.modelo",value:b.retroalimentacion.modelo,onChange:w,placeholder:"Modelo pedagógico o metodología observada...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Foco"}),l.jsx("textarea",{name:"retroalimentacion.foco",value:b.retroalimentacion.foco,onChange:w,placeholder:"Foco principal de la observación y retroalimentación...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Elementos a Identificar"}),l.jsx("textarea",{name:"retroalimentacion.elementosIdentificar",value:b.retroalimentacion.elementosIdentificar,onChange:w,placeholder:"Elementos específicos que el docente debe identificar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[l.jsx(nye,{className:"w-5 h-5 text-purple-600"})," Planificación de Práctica y Seguimiento"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Preparación"}),l.jsx("textarea",{name:"planificacion.preparacion",value:b.planificacion.preparacion,onChange:w,placeholder:"Aspectos de preparación para la próxima práctica...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Objetivo"}),l.jsx("textarea",{name:"planificacion.objetivo",value:b.planificacion.objetivo,onChange:w,placeholder:"Objetivo específico para la siguiente observación...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Actividad"}),l.jsx("textarea",{name:"planificacion.actividad",value:b.planificacion.actividad,onChange:w,placeholder:"Actividades específicas a implementar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tiempo"}),l.jsx("input",{type:"text",name:"planificacion.tiempo",value:b.planificacion.tiempo,onChange:w,placeholder:"Tiempo estimado o cronograma...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{className:"p-4 border rounded-md dark:border-slate-600 bg-slate-50 dark:bg-slate-800/50 space-y-3",children:[l.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[l.jsx(Zl,{className:"w-4 h-4 text-purple-500"}),"Seguimiento"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de seguimiento"}),l.jsx("input",{type:"date",name:"seguimiento.fecha",value:b.seguimiento.fecha,onChange:w,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Registrado por"}),l.jsx("input",{type:"text",name:"seguimiento.firma",value:b.seguimiento.firma,onChange:w,placeholder:"Nombre de quien registra el seguimiento...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-4 mt-8 pt-6 border-t dark:border-slate-700",children:[l.jsx("button",{type:"button",onClick:n,className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),l.jsxs("button",{type:"submit",className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-amber-400 transition-colors flex items-center gap-2",disabled:Object.values(o).some(Boolean),children:[Object.values(o).some(Boolean)&&l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Guardar Ciclo OPR"]})]})]})]})},OYe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,s]=S.useState(!0),[i,o]=S.useState(!0),[c,u]=S.useState(null),[d,f]=S.useState("list"),[h,p]=S.useState(null),[g,x]=S.useState(null),[b,y]=S.useState("general"),[w,_]=S.useState(!1),[B,k]=S.useState({}),[I,E]=S.useState([]),N=Jy,j=S.useMemo(()=>({fecha:new Date().toISOString().split("T")[0],docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[R,D]=S.useState(j),O=S.useCallback(async()=>{s(!0),u(null);try{const ae=await wYe();t(ae)}catch(ae){u("No se pudieron cargar los registros de acompañamiento."),console.error("❌ Error al cargar acompañamientos:",ae)}finally{s(!1)}},[]),L=S.useCallback(async()=>{o(!0);try{const se=(await TYe()).filter(oe=>oe.profile==="PROFESORADO").map(oe=>oe.nombreCompleto).sort();n(se)}catch(ae){u("No se pudo cargar la lista de profesores."),console.error("❌ Error al cargar profesores:",ae)}finally{o(!1)}},[]),M=S.useCallback(async()=>{try{const ae={};for(const se of e)if(se.id)try{const oe=await SYe(se.id);oe.length>0&&(ae[se.id]=oe)}catch(oe){console.error(`Error loading OPR cycles for ${se.id}:`,oe)}try{const se=await kYe();E(se)}catch(se){console.error("Error loading standalone OPR cycles:",se),E([])}k(ae)}catch(ae){console.error("Error fetching OPR cycles:",ae)}},[e]);S.useEffect(()=>{O(),L()},[O,L]),S.useEffect(()=>{e.length>0&&M()},[e,M]);const J=(ae,se)=>{if(x(ae),se)D(se),p(se.id);else{const oe={id:"temp-"+Date.now(),fecha:ae.fecha,docente:ae.docenteInfo||"",curso:ae.cursoInfo||"",asignatura:ae.asignaturaInfo||"",rubricaResultados:{},planificacionFutura:"",createdAt:new Date().toISOString(),observacionesGenerales:"",retroalimentacionConsolidada:""};D(oe),p(null)}f("form"),y("opr"),u(null)},V=async()=>{if(!("docente"in R)||!R.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar la retroalimentación.');return}_(!0),u(null);try{const ae="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",oe=new us(ae).getGenerativeModel({model:"gemini-1.5-flash-latest"}),ce=Object.entries(R.rubricaResultados||{}).map(([_e,De])=>`- ${_e}: Nivel ${De}`).join(`
`),me=`
Eres un asesor pedagógico experto. Redacta una retroalimentación consolidada y constructiva para un docente.
Contexto de la observación:
- Docente: ${R.docente}
- Asignatura: ${R.asignatura}
- Curso: ${R.curso}
- Resultados de la pauta de observación (rúbrica):
${ce||"No se completó la pauta."}
- Observaciones adicionales del evaluador:
${R.observacionesGenerales||"Sin observaciones adicionales."}

Basado en esta información, tu texto debe:
1. Iniciar con un reconocimiento positivo.
2. Mencionar 1 o 2 fortalezas clave observadas.
3. Identificar 1 o 2 áreas de mejora concretas, con un tono de sugerencia.
4. Concluir con una frase motivadora.
La respuesta debe ser solo el texto de la retroalimentación.
      `,ne=(await oe.generateContent(me)).response.text();D(_e=>({..._e,retroalimentacionConsolidada:ne})),alert("Retroalimentación generada exitosamente con IA.")}catch(ae){console.error("❌ Error al generar retroalimentación:",ae);const se=ae.message||"No se pudo generar la retroalimentación automática.";u(se),alert(`Error: ${se}`)}finally{_(!1)}},K=async ae=>{if(ae.preventDefault(),!("docente"in R)||!R.docente||!R.curso||!R.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}u(null);try{if(h)await CYe(h,R),alert("¡Acompañamiento actualizado correctamente!");else{const se=await EYe(R);p(se.id),D(se),alert("¡Acompañamiento guardado correctamente! Ahora puedes agregar Ciclos OPR.")}await O()}catch(se){const oe=(se==null?void 0:se.message)??"Error al guardar el registro de acompañamiento.";u(oe),console.error("❌ Error al guardar:",se),alert(`Error: ${oe}`)}},z=()=>{D(j),p(null),x(null),f("form"),y("general"),u(null)},G=ae=>{D(ae),p(ae.id),x(null),f("form"),y("general"),u(null)},Y=async ae=>{if(window.confirm("¿Está seguro de que desea eliminar este registro? Esta acción no se puede deshacer."))try{await _Ye(ae),await O(),alert("Registro eliminado exitosamente.")}catch(se){const oe="No se pudo eliminar el registro.";u(oe),console.error("❌ Error al eliminar:",se),alert(`Error: ${oe}`)}},ee=(ae,se)=>{D(oe=>({...oe,rubricaResultados:{...oe.rubricaResultados||{},[ae]:se}}))},P=()=>{var ae;if(!("docente"in R)||!R.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar el PDF.');return}try{const se=new vr,oe=se.internal.pageSize.getWidth(),ce=15,me=oe-ce*2;let ke=20;se.setFontSize(18),se.setFont("helvetica","bold"),se.text("INFORME DE ACOMPAÑAMIENTO DOCENTE",oe/2,ke,{align:"center"}),ke+=5,se.setLineWidth(.5),se.line(ce,ke,oe-ce,ke),ke+=10;const ne=[["Docente:",R.docente],["Curso:",R.curso],["Asignatura:",R.asignatura],["Fecha:",new Date(R.fecha).toLocaleDateString("es-CL")],["Bloques horarios:",R.bloques||"No especificado"]];if(bo(se,{body:ne,startY:ke,theme:"plain",styles:{fontSize:10},columnStyles:{0:{fontStyle:"bold"}}}),ke=se.lastAutoTable.finalY+10,Object.keys(R.rubricaResultados||{}).length>0){se.setFontSize(12),se.setFont("helvetica","bold"),se.text("RESULTADOS DE EVALUACIÓN",ce,ke),ke+=8;const fe=Object.entries(R.rubricaResultados).map(([Ie,Me])=>[Ie,`Nivel ${Me}`,Me===1?"Débil":Me===2?"Incipiente":Me===3?"Satisfactorio":"Avanzado"]);bo(se,{startY:ke,head:[["Criterio","Nivel","Descripción"]],body:fe,theme:"grid",headStyles:{fillColor:[245,158,11],textColor:255},margin:{left:ce,right:ce},styles:{fontSize:9}}),ke=se.lastAutoTable.finalY+10}const _e=(fe,Ie)=>{if(!Ie||Ie.trim()==="")return;ke>250&&(se.addPage(),ke=20),se.setFontSize(12),se.setFont("helvetica","bold"),se.text(fe,ce,ke),ke+=8,se.setFontSize(10),se.setFont("helvetica","normal");const Me=se.splitTextToSize(Ie,me);se.text(Me,ce,ke),ke+=Me.length*5+10};_e("OBSERVACIONES GENERALES",R.observacionesGenerales),_e("RETROALIMENTACIÓN PEDAGÓGICA",R.retroalimentacionConsolidada);const De=se.getNumberOfPages();for(let fe=1;fe<=De;fe++)se.setPage(fe),se.setFontSize(8),se.setFont("helvetica","italic"),se.text(`Generado el ${new Date().toLocaleDateString("es-CL")} - Página ${fe} de ${De}`,oe/2,se.internal.pageSize.getHeight()-10,{align:"center"});const Ne=`Informe_Acompanamiento_${(ae=R.docente)==null?void 0:ae.replace(/\s+/g,"_")}_${R.curso}_${new Date().toISOString().split("T")[0]}.pdf`;se.save(Ne)}catch(se){console.error("❌ Error al generar PDF:",se),alert("Error al generar el PDF. Intenta nuevamente.")}},Q=ae=>{D(se=>({...se,[ae.target.name]:ae.target.value}))},X=()=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Módulo de Acompañamiento Docente"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>{z(),y("general")},className:"bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 flex items-center gap-2 transition-colors",children:[l.jsx(U6,{className:"w-5 h-5"})," Acompañamiento General"]}),l.jsxs("button",{onClick:()=>{D(j),p(null),x(null),f("form"),y("opr"),u(null)},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 flex items-center gap-2 transition-colors",children:[l.jsx(U6,{className:"w-5 h-5"})," Ciclo OPR Independiente"]})]})]}),c&&l.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Fd,{className:"w-5 h-5 text-red-500"}),l.jsx("p",{className:"text-red-700 dark:text-red-300",children:c})]})}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[l.jsx(Yf,{className:"w-6 h-6 text-amber-500"})," Acompañamientos Generales"]}),l.jsxs("div",{className:"space-y-3",children:[a&&l.jsxs("div",{className:"flex items-center justify-center p-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600"}),l.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando registros..."})]}),!a&&e.filter(ae=>ae.id).length>0?l.jsx("div",{className:"grid gap-3",children:e.filter(ae=>ae.id).map(ae=>l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(Zl,{className:"w-4 h-4 text-amber-500"}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ae.docente})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Curso:"})," ",ae.curso," •"," ",l.jsx("span",{className:"font-medium",children:"Asignatura:"})," ",ae.asignatura]}),l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(ae.fecha).toLocaleDateString("es-CL")]}),ae.bloques&&l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Bloques:"})," ",ae.bloques]}),ae.retroalimentacionConsolidada&&l.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[l.jsx(vo,{className:"w-3 h-3"}),"Con retroalimentación IA"]}),B[ae.id]&&B[ae.id].length>0&&l.jsxs("p",{className:"text-blue-600 dark:text-blue-400 flex items-center gap-1",children:[l.jsx(_p,{className:"w-3 h-3"}),B[ae.id].length," Ciclo",B[ae.id].length>1?"s":""," OPR"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx("button",{onClick:()=>{G(ae),y("general")},className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm px-3 py-1 rounded border border-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors",children:"Ver/Editar"}),l.jsx("button",{onClick:()=>{G(ae),y("opr")},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"+ Ciclo OPR"}),l.jsx("button",{onClick:()=>Y(ae.id),title:"Eliminar registro",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:l.jsx(tl,{className:"w-4 h-4"})})]})]}),B[ae.id]&&B[ae.id].length>0&&l.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-600",children:[l.jsxs("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2 flex items-center gap-1",children:[l.jsx(_p,{className:"w-4 h-4 text-blue-500"}),"Ciclos OPR Asociados"]}),l.jsx("div",{className:"space-y-2",children:B[ae.id].map(se=>l.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:se.nombreCiclo||`Registro N° ${se.registroN}`}),l.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[new Date(se.fecha).toLocaleDateString("es-CL"),se.horaInicio&&se.horaTermino&&l.jsxs("span",{children:[" • ",se.horaInicio," - ",se.horaTermino]})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:()=>{const oe=e.find(ce=>ce.id===ae.id);J(se,oe)},className:"text-blue-600 hover:text-blue-800 text-xs px-2 py-1 rounded border border-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:"Editar"}),l.jsx("button",{onClick:async()=>{if(window.confirm("¿Seguro que desea eliminar este Ciclo OPR?"))try{await gq(se.id),await M(),alert("Ciclo OPR eliminado exitosamente")}catch(oe){console.error("Error deleting OPR cycle:",oe),alert("Error al eliminar el ciclo OPR")}},className:"text-red-600 hover:text-red-800 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",title:"Eliminar ciclo OPR",children:l.jsx(tl,{className:"w-3 h-3"})})]})]},se.id))})]})]},ae.id))}):!a&&l.jsxs("div",{className:"text-center p-12 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[l.jsx(WA,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium",children:"No hay acompañamientos generales registrados"}),l.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-sm mt-2",children:"Crea tu primer acompañamiento usando el botón superior"})]})]})]}),I.length>0&&l.jsxs("div",{className:"mb-8",children:[l.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[l.jsx(_p,{className:"w-6 h-6 text-blue-500"})," Ciclos OPR Independientes"]}),l.jsx("div",{className:"space-y-3",children:I.map(ae=>l.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(_p,{className:"w-4 h-4 text-blue-500"}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ae.nombreCiclo||`Registro N° ${ae.registroN}`})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Docente:"})," ",ae.docenteInfo||"No especificado"," •"," ",l.jsx("span",{className:"font-medium",children:"Curso:"})," ",ae.cursoInfo||"No especificado"]}),l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(ae.fecha).toLocaleDateString("es-CL"),ae.horaInicio&&ae.horaTermino&&l.jsxs("span",{children:[" • ",ae.horaInicio," - ",ae.horaTermino]})]}),ae.videoObservacionUrl&&l.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[l.jsx(vo,{className:"w-3 h-3"}),"Con video de observación"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx("button",{onClick:()=>{J(ae)},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"Ver/Editar"}),l.jsx("button",{onClick:async()=>{if(window.confirm("¿Seguro que desea eliminar este Ciclo OPR?"))try{await gq(ae.id),await M(),alert("Ciclo OPR eliminado exitosamente")}catch(se){console.error("Error deleting standalone OPR cycle:",se),alert("Error al eliminar el ciclo OPR")}},title:"Eliminar ciclo OPR",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:l.jsx(tl,{className:"w-4 h-4"})})]})]})},ae.id))})]})]}),te=()=>{const ae=h?e.find(oe=>oe.id===h):null,se={id:"temp-"+Date.now(),fecha:new Date().toISOString(),docente:"docente"in R&&R.docente||"",curso:"curso"in R&&R.curso||"",asignatura:"asignatura"in R&&R.asignatura||"",planificacionFutura:"",createdAt:new Date().toISOString(),rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""};return l.jsxs("div",{className:"animate-fade-in",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:b==="general"?h?"Editando Acompañamiento General":"Nuevo Acompañamiento General":g?"Editando Ciclo OPR":"Nuevo Ciclo OPR"}),l.jsx("button",{type:"button",onClick:()=>{f("list"),x(null)},className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex items-center gap-2 px-4 py-2 rounded-lg border hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"← Volver al listado"})]}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:l.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>y("general"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${b==="general"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(WA,{className:"w-4 h-4"}),"Acompañamiento General"]})}),l.jsx("button",{onClick:()=>y("opr"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${b==="opr"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(_p,{className:"w-4 h-4"}),"Ciclos OPR"]})}),l.jsx("button",{onClick:()=>y("dashboard"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${b==="dashboard"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(Yf,{className:"w-4 h-4"}),"Dashboard"]})})]})}),c&&l.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Fd,{className:"w-5 h-5 text-red-500"}),l.jsx("p",{className:"text-red-700 dark:text-red-300",children:c})]})}),b==="dashboard"&&l.jsx("div",{className:"animate-fade-in",children:l.jsx(vYe,{acompanamientos:e,ciclosOPR:B,standaloneCiclos:I})}),b==="general"&&l.jsxs("form",{onSubmit:K,className:"space-y-8",children:[l.jsxs("div",{className:"p-4 border rounded-lg bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800",children:[l.jsxs("h4",{className:"text-lg font-semibold mb-3 text-green-700 dark:text-green-300 flex items-center gap-2",children:[l.jsx(e5,{className:"w-5 h-5"}),"Asistente IA - Informe General"]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("button",{type:"button",onClick:V,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:w,children:[l.jsx(EP,{className:"w-4 h-4"}),w?"Generando...":"Generar Retroalimentación con IA"]}),l.jsxs("button",{type:"button",onClick:P,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[l.jsx(cg,{className:"w-4 h-4"}),"Crear Informe PDF"]})]}),l.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Completa la observación y rúbrica, luego genera automáticamente la retroalimentación. Finalmente, crea el informe en PDF."}),"retroalimentacionConsolidada"in R&&R.retroalimentacionConsolidada&&l.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-slate-800 rounded-md shadow-sm border",children:[l.jsxs("h5",{className:"font-semibold text-sm mb-2 text-green-700 dark:text-green-300 flex items-center gap-2",children:[l.jsx(vo,{className:"w-4 h-4"}),"Retroalimentación Consolidada Generada:"]}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 rounded p-3",children:l.jsx("textarea",{readOnly:!0,rows:8,value:R.retroalimentacionConsolidada,className:"w-full text-sm text-slate-700 dark:text-slate-300 bg-transparent border-none p-0 resize-none focus:ring-0"})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-800/50 dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente *"}),l.jsxs("select",{name:"docente",value:"docente"in R?R.docente:"",onChange:Q,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:i,children:[l.jsx("option",{value:"",children:i?"Cargando profesores...":"Seleccione un docente"}),r.map(oe=>l.jsx("option",{value:oe,children:oe},oe))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso *"}),l.jsxs("select",{name:"curso",value:"curso"in R?R.curso:"",onChange:Q,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),Ks.map(oe=>l.jsx("option",{value:oe,children:oe},oe))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura *"}),l.jsxs("select",{name:"asignatura",value:"asignatura"in R?R.asignatura:"",onChange:Q,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),qi.map(oe=>l.jsx("option",{value:oe,children:oe},oe))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),l.jsx("input",{type:"text",name:"bloques",value:"bloques"in R?R.bloques:"",onChange:Q,placeholder:"Ej: 3-4, 1-2",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Observaciones Generales"}),l.jsx("textarea",{name:"observacionesGenerales",value:"observacionesGenerales"in R?R.observacionesGenerales:"",onChange:Q,rows:4,placeholder:"Ingrese sus observaciones sobre la clase, metodología utilizada, participación de estudiantes, recursos empleados, etc...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-lg font-semibold mb-4 text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[l.jsx(Yf,{className:"w-5 h-5 text-amber-500"}),"Pauta de Observación - Rúbrica de Evaluación"]}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Haga clic en el nivel correspondiente para cada criterio observado durante la clase."}),l.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:N.map(oe=>l.jsx(at.Fragment,{children:oe.criteria.map((ce,me)=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[me===0&&l.jsx("td",{rowSpan:oe.criteria.length,className:"px-4 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600 bg-slate-50 dark:bg-slate-800",children:oe.domain}),l.jsx("td",{className:"px-4 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:ce.name}),ce.levels.map((ke,ne)=>{const _e=ne+1,De="rubricaResultados"in R&&R.rubricaResultados[ce.name]===_e,Ne=De?"bg-amber-100 dark:bg-amber-900/30 border-amber-300 dark:border-amber-700":"hover:bg-amber-50 dark:hover:bg-slate-700";return l.jsx("td",{onClick:()=>ee(ce.name,_e),className:`px-4 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${Ne} ${De?"ring-1 ring-amber-400":""}`,title:`Seleccionar nivel ${_e} para ${ce.name}`,children:l.jsxs("div",{className:"text-xs leading-relaxed",children:[De&&l.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[l.jsx(vo,{className:"w-3 h-3 text-amber-600"}),l.jsx("span",{className:"font-semibold text-amber-700 dark:text-amber-400",children:"Seleccionado"})]}),ke]})},_e)})]},ce.name))},oe.domain))})]})}),Object.keys(R.rubricaResultados||{}).length>0&&l.jsxs("div",{className:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:[l.jsxs("h5",{className:"font-semibold text-amber-800 dark:text-amber-300 mb-2 flex items-center gap-2",children:[l.jsx(Yf,{className:"w-4 h-4"}),"Resumen de Evaluación (",Object.keys(R.rubricaResultados).length," criterios evaluados)"]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:Object.entries(R.rubricaResultados).map(([oe,ce])=>l.jsxs("div",{className:"flex justify-between items-center py-1",children:[l.jsxs("span",{className:"text-slate-700 dark:text-slate-300 truncate pr-2",children:[oe,":"]}),l.jsxs("span",{className:`font-semibold px-2 py-1 rounded text-xs ${ce===1?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":ce===2?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":ce===3?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:["Nivel ",ce]})]},oe))})]})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t dark:border-slate-700",children:[l.jsx("button",{type:"button",onClick:()=>f("list"),className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),l.jsxs("button",{type:"submit",className:"bg-amber-500 hover:bg-amber-600 disabled:bg-amber-400 text-white font-bold py-2 px-6 rounded-lg transition-colors flex items-center gap-2",disabled:w,children:[w&&l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),h?"Actualizar":"Guardar"," Acompañamiento"]})]})]}),b==="opr"&&l.jsx(FYe,{acompanamiento:ae||se,cicloToEdit:g,profesores:r,onSave:async oe=>{try{const ce=(ae==null?void 0:ae.id)||typeof oe.acompanamientoId=="string"&&oe.acompanamientoId||void 0;if(g&&g.id)await NYe(g.id,oe),alert("Ciclo OPR actualizado exitosamente");else{if(!ce||String(ce).startsWith("temp-")){const me={...oe,acompanamientoId:""};await pq(me)}else{const me={...oe,acompanamientoId:String(ce)};await pq(me)}alert("Ciclo OPR guardado exitosamente")}x(null),await O(),await M(),f("list")}catch(ce){console.error("❌ Error al guardar ciclo OPR:",ce);const me=ce.message||"Error desconocido al guardar el ciclo OPR";u(me),alert(`Error al guardar el ciclo OPR: ${me}`)}},onCancel:()=>{x(null),f("list")}})]})};return a||i?l.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mb-4"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Cargando módulo de acompañamiento..."}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-500 text-sm mt-2",children:[a&&"Cargando registros...",i&&" Cargando profesores..."]})]})})}):l.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d==="list"?X():te()})})},LL="mensajes_internos",DYe="usuarios",Ble="mensajes_read_status",jle=e=>{var r,n;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fecha}},PYe=(e,t)=>{const r=$t(kt(ht,LL),Jr("participants","array-contains",e),Sr("fecha","desc"));return pr(r,a=>{const s=a.docs.map(i=>jle(i));t(s)},a=>{console.error("Error al suscribirse a los mensajes:",a),t([])})},RYe=async e=>{try{const t={...e,participants:[e.de,e.para],fecha:sr.fromDate(new Date)};await Tn(kt(ht,LL),t)}catch(t){throw console.error("Error al enviar el mensaje:",t),new Error("No se pudo enviar el mensaje.")}},LYe=async e=>{try{const t=dr(ht,LL,e);await za(t)}catch(t){throw console.error("Error al eliminar el mensaje:",t),new Error("No se pudo eliminar el mensaje.")}},MYe=(e,t)=>{const r=dr(ht,Ble,e);return pr(r,a=>{a.exists()?t(a.data()):t({announcements:[],messages:[]})},a=>{console.error("Error al suscribirse al estado de lectura:",a),t({announcements:[],messages:[]})})},UYe=async(e,t)=>{try{const r=dr(ht,Ble,e);await Ji(r,{messages:UZ(t)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como leído:",r),new Error("No se pudo actualizar el estado de lectura.")}},QYe=e=>{const t=$t(kt(ht,DYe),Sr("nombreCompleto","asc"));return pr(t,n=>{const a=n.docs.map(s=>jle(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},HYe=({currentUser:e,refreshUnreadCount:t})=>{const[r,n]=S.useState("inbox"),[a,s]=S.useState([]),[i,o]=S.useState([]),[c,u]=S.useState(null),[d,f]=S.useState({announcements:[],messages:[]}),[h,p]=S.useState(!0),g={para:"",asunto:"",cuerpo:""},[x,b]=S.useState(g);S.useEffect(()=>{if(!e.id||!e.email){p(!1);return}p(!0);const E=PYe(e.email,R=>{s(R),p(!1)}),N=QYe(o),j=MYe(e.id,R=>{f(R),t()});return()=>{E(),N(),j()}},[e.id,e.email,t]);const y=E=>{u(E),r==="inbox"&&!d.messages.includes(E.id)&&UYe(e.id,E.id).catch(N=>{console.error("Failed to mark message as read:",N)})},w=async E=>{if(E.preventDefault(),!x.para||!x.asunto.trim()||!x.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const N={de:e.email,para:x.para,asunto:x.asunto,cuerpo:x.cuerpo};try{await RYe(N),b(g),n("sent")}catch(j){console.error("Error sending message:",j),alert("No se pudo enviar el mensaje. Inténtelo de nuevo.")}},_=async E=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje? Esta acción es irreversible."))try{await LYe(E),u(null)}catch(N){console.error("Error deleting message:",N),alert("No se pudo eliminar el mensaje.")}},B=E=>{b({para:E.de,asunto:`Re: ${E.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${E.de}
Fecha: ${new Date(E.fecha).toLocaleString("es-CL")}

${E.cuerpo}`}),n("compose")},k=S.useMemo(()=>a.filter(E=>E.para===e.email),[a,e.email]),I=S.useMemo(()=>a.filter(E=>E.de===e.email),[a,e.email]);return h?l.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajería..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[l.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[l.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:l.jsx("button",{onClick:()=>{n("compose"),u(null),b(g)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),l.jsxs("nav",{className:"p-2 space-y-1",children:[l.jsx("button",{onClick:()=>{n("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),l.jsx("button",{onClick:()=>{n("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&l.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?k:I).map(E=>{const N=r==="inbox"&&!d.messages.includes(E.id);return l.jsxs("div",{onClick:()=>y(E),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(c==null?void 0:c.id)===E.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("p",{className:`font-bold truncate ${N?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?E.de:`Para: ${E.para}`}),N&&l.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),l.jsx("p",{className:`truncate text-sm ${N?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:E.asunto}),l.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(E.fecha).toLocaleString("es-CL")})]},E.id)})}),l.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),l.jsxs("select",{id:"para",value:x.para,onChange:E=>b({...x,para:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(E=>E.email!==e.email).map(E=>l.jsxs("option",{value:E.email,children:[E.nombreCompleto," (",E.email,")"]},E.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),l.jsx("input",{type:"text",id:"asunto",value:x.asunto,onChange:E=>b({...x,asunto:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),l.jsx("textarea",{id:"cuerpo",value:x.cuerpo,onChange:E=>b({...x,cuerpo:E.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):c?l.jsxs("div",{children:[l.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c.asunto}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[l.jsx("strong",{children:"De:"})," ",c.de," ",l.jsx("br",{}),l.jsx("strong",{children:"Para:"})," ",c.para," ",l.jsx("br",{}),l.jsx("strong",{children:"Fecha:"})," ",new Date(c.fecha).toLocaleString("es-CL")]})]}),l.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:c.cuerpo}),l.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&l.jsx("button",{onClick:()=>B(c),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),l.jsx("button",{onClick:()=>_(c.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):l.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:l.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})},Nk="proyectos_interdisciplinarios",ML="entregas_interdisciplinarias",VYe="usuarios",UL=e=>{const t=e.data();return{id:e.id,...t}},zYe=e=>({...e,contenidosPorAsignatura:Array.isArray(e==null?void 0:e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e==null?void 0:e.actividades)?e.actividades:[],fechasClave:Array.isArray(e==null?void 0:e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e==null?void 0:e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e==null?void 0:e.docentesResponsables)?e.docentesResponsables:[e==null?void 0:e.docentesResponsables].filter(Boolean)}),$Ye=e=>{const t=$t(kt(ht,Nk),Sr("nombreProyecto","asc"));return pr(t,n=>{try{const a=n.docs.map(s=>zYe(UL(s)));e(a)}catch(a){console.error("Error parseando planificaciones:",a),e([])}},n=>{console.error("Error al suscribirse a las planificaciones:",n),e([])})},GYe=async e=>{const t={...e,contenidosPorAsignatura:Array.isArray(e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e.actividades)?e.actividades:[],fechasClave:Array.isArray(e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e.docentesResponsables)?e.docentesResponsables:[e.docentesResponsables].filter(Boolean),createdAt:sr.now(),updatedAt:sr.now()};return(await Tn(kt(ht,Nk),t)).id},xq=async(e,t)=>{const{id:r,...n}=t,a=dr(ht,Nk,e);await Ji(a,{...n,contenidosPorAsignatura:Array.isArray(n==null?void 0:n.contenidosPorAsignatura)?n.contenidosPorAsignatura:(n==null?void 0:n.contenidosPorAsignatura)===void 0?void 0:[],actividades:Array.isArray(n==null?void 0:n.actividades)?n.actividades:(n==null?void 0:n.actividades)===void 0?void 0:[],fechasClave:Array.isArray(n==null?void 0:n.fechasClave)?n.fechasClave:(n==null?void 0:n.fechasClave)===void 0?void 0:[],tareas:Array.isArray(n==null?void 0:n.tareas)?n.tareas:(n==null?void 0:n.tareas)===void 0?void 0:[],docentesResponsables:Array.isArray(n==null?void 0:n.docentesResponsables)?n.docentesResponsables:(n==null?void 0:n.docentesResponsables)===void 0?void 0:[n==null?void 0:n.docentesResponsables].filter(Boolean),updatedAt:sr.now()},{merge:!0})},KYe=async e=>{const t=dr(ht,Nk,e),r=$t(kt(ht,ML),Jr("planificacionId","==",e)),n=await ga(r),a=jg(ht);n.forEach(s=>a.delete(s.ref)),a.delete(t),await a.commit()},qYe=(e,t)=>{const r=$t(kt(ht,ML),Jr("planificacionId","==",e));return pr(r,a=>{const s=a.docs.map(i=>UL(i));t(s)},a=>{console.error("Error al suscribirse a las entregas:",a),t([])})},vq=async(e,t)=>{const r=dr(ht,ML,e);await Ji(r,{feedbackProfesor:t,fechaFeedback:sr.fromDate(new Date)},{merge:!0})},Tle=e=>{const t=$t(kt(ht,VYe));return pr(t,n=>{const a=n.docs.map(s=>UL(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},uO={Recordar:["Enumerar","Definir","Identificar","Nombrar","Reconocer","Reproducir"],Comprender:["Explicar","Interpretar","Resumir","Parafrasear","Ejemplificar","Clasificar"],Aplicar:["Ejecutar","Implementar","Usar","Demostrar","Operar","Programar"],Analizar:["Diferenciar","Organizar","Atribuir","Comparar","Deconstruir","Delinear"],Evaluar:["Comprobar","Criticar","Revisar","Formular hipótesis","Experimentar","Juzgar"],Crear:["Generar","Planificar","Producir","Diseñar","Construir","Idear"]},hw=({href:e})=>{if(!e)return l.jsx("span",{className:"text-slate-400",children:"—"});const t=e.startsWith("http")?e:`https://${e}`;return l.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[l.jsx(Wye,{className:"w-4 h-4"}),l.jsx("span",{className:"truncate max-w-[180px] md:max-w-[260px]",children:e})]})},hp=({icon:e,label:t,children:r,aiButton:n,className:a=""})=>l.jsxs("div",{className:`bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 ${a}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg",children:e}),l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:t})]}),n]}),r]}),WYe=({planificaciones:e,onActivityUpdate:t})=>{const[r,n]=S.useState(null),a=S.useMemo(()=>e.map(c=>{const u=[];return(c.actividades||[]).forEach(d=>u.push({...d,planId:c.id,type:"activity"})),(c.fechasClave||[]).forEach(d=>u.push({id:d.id,planId:c.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:c.docentesResponsables.join(", "),asignaturaPrincipal:"Milestone",recursoUrl:d.recursoUrl})),u.sort((d,f)=>new Date(d.fechaInicio).getTime()-new Date(f.fechaInicio).getTime()),{plan:c,items:u}}),[e]),s=S.useCallback(c=>{if(c.type==="keyDate")return{text:"Fecha Clave",color:"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${c.fechaInicio}T00:00:00`),f=new Date(`${c.fechaFin}T00:00:00`);return f<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&f>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300"}},[]),i=({name:c})=>{const u=(c||"").split(" ").map(d=>d[0]).join("").toUpperCase();return l.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 text-white flex items-center justify-center font-semibold text-sm ring-2 ring-white dark:ring-slate-800 shadow-sm",children:u.slice(0,2)})},o=({data:c,onClose:u,onSave:d})=>{const[f,h]=S.useState(c.activity),p=x=>h({...f,[x.target.name]:x.target.value}),g=()=>{d(c.planId,f),u()};return l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl p-8",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:l.jsx(xee,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),l.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Editar Actividad"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Nombre"}),l.jsx("input",{name:"nombre",value:f.nombre,onChange:p,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Responsables"}),l.jsx("input",{name:"responsables",value:f.responsables,onChange:p,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Inicio"}),l.jsx("input",{type:"date",name:"fechaInicio",value:f.fechaInicio,onChange:p,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Fin"}),l.jsx("input",{type:"date",name:"fechaFin",value:f.fechaFin,onChange:p,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Recurso (enlace)"}),l.jsx("input",{name:"recursoUrl",placeholder:"https://...",value:f.recursoUrl||"",onChange:p,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[l.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Guardar"})]})]})})};return!a.length||a.every(c=>c.items.length===0)?l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"text-center py-12",children:[l.jsx(Fd,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay actividades para mostrar"})]})}):l.jsxs("div",{className:"space-y-8",children:[a.map(({plan:c,items:u})=>l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"flex items-center justify-between mb-6",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/50 rounded-xl",children:l.jsx(V0,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-200",children:c.nombreProyecto}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cronograma del proyecto"})]})]})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b-2 border-slate-200 dark:border-slate-700",children:[l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Tarea"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Estado"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Inicio"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Fin"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Recurso"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Asignado"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:u.map(d=>{const f=s(d),h=d.type==="activity";return l.jsxs("tr",{className:`${h?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>h&&n({planId:d.planId,activity:d}),children:[l.jsx("td",{className:"px-6 py-4 font-semibold",children:d.nombre}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("span",{className:`px-3 py-1 inline-flex text-sm font-semibold rounded-full ${f.color}`,children:f.text})}),l.jsx("td",{className:"px-6 py-4",children:d.fechaInicio}),l.jsx("td",{className:"px-6 py-4",children:d.fechaFin}),l.jsx("td",{className:"px-6 py-4",children:l.jsx(hw,{href:d.recursoUrl})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx(i,{name:d.responsables||"Sin asignar"})})]},d.id)})})]})})]},c.id)),r&&l.jsx(o,{data:r,onClose:()=>n(null),onSave:t})]})},XYe=({planificaciones:e,onBack:t})=>{const r=S.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;(f=d.contenidosPorAsignatura)==null||f.forEach(h=>{var p;(p=h.habilidades)==null||p.forEach(g=>{c[g]=(c[g]||0)+1,Object.entries(uO).forEach(([x,b])=>{b.includes(g)&&(u[x]=(u[x]||0)+1)})})})}),{habilidadesCount:c,categoriaCount:u}},[e]),n=S.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;d.asignaturas.forEach(h=>{u[h]=(u[h]||0)+1}),(f=d.contenidosPorAsignatura)==null||f.forEach(h=>{h.contenidos&&h.contenidos.toLowerCase().split(/[\s,.-]+/).filter(g=>g.length>3).filter(g=>!["para","con","por","las","los","una","del","que","este","esta","son","como","más","desde","hasta","entre"].includes(g)).forEach(g=>{c[g]=(c[g]||0)+1})})}),{palabrasCount:c,asignaturasCount:u}},[e]),a=S.useMemo(()=>{const c=e.length,u=e.reduce((h,p)=>{var g;return h+(((g=p.actividades)==null?void 0:g.length)||0)},0),d=e.reduce((h,p)=>{var g;return h+(((g=p.tareas)==null?void 0:g.length)||0)},0),f=new Set(e.flatMap(h=>h.asignaturas)).size;return{totalProyectos:c,totalActividades:u,totalTareas:d,asignaturasUnicas:f}},[e]),s=({data:c,title:u})=>{const d=Object.entries(c);if(!d.length)return null;const f=d.sort((p,g)=>g[1]-p[1]).slice(0,20),h=Math.max(...f.map(([,p])=>p));return h?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:u}),l.jsx("div",{className:"flex flex-wrap gap-2 justify-center min-h-[100px]",children:f.map(([p,g])=>{const x=Math.max(.8,g/h*2),b=Math.max(.6,g/h);return l.jsx("span",{className:"inline-block px-3 py-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full font-semibold transition-transform hover:scale-110",style:{fontSize:`${x}rem`,opacity:b},title:`${p}: ${g} veces`,children:p},p)})})]}):null},i=({data:c})=>{const u=Object.values(c),d=u.length?Math.max(...u):0,f={Recordar:"bg-red-500",Comprender:"bg-orange-500",Aplicar:"bg-yellow-500",Analizar:"bg-green-500",Evaluar:"bg-blue-500",Crear:"bg-purple-500"};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/50 rounded-lg",children:l.jsx(Tw,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Taxonomía de Bloom"})]}),l.jsx("div",{className:"space-y-4",children:Object.keys(uO).map(h=>{const p=c[h]||0,g=d>0?p/d*100:0,x=f[h]||"bg-slate-400";return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:h}),l.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[p," habilidades"]})]}),l.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:l.jsx("div",{className:`h-3 rounded-full ${x} transition-all duration-500`,style:{width:`${g}%`}})})]},h)})})]})},o=({icon:c,title:u,value:d,description:f,color:h})=>l.jsxs("div",{className:`bg-gradient-to-br ${h} p-6 rounded-2xl shadow-lg text-white`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:c}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:d}),l.jsx("div",{className:"text-white/80 text-sm",children:u})]})]}),l.jsx("p",{className:"text-white/90 text-sm",children:f})]});return l.jsxs("div",{className:"space-y-8",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-teal-600 rounded-xl",children:l.jsx(nN,{className:"w-8 h-8 text-white"})}),l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent",children:"Dashboard Analítico"})]}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Análisis de habilidades y contenidos desarrollados"})]}),l.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[l.jsx(Iw,{className:"w-4 h-4"})," Volver a Proyectos"]})]})}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(o,{icon:l.jsx(ug,{className:"w-8 h-8"}),title:"Proyectos",value:a.totalProyectos,description:"Proyectos interdisciplinarios creados",color:"from-blue-500 to-blue-600"}),l.jsx(o,{icon:l.jsx(Hbe,{className:"w-8 h-8"}),title:"Actividades",value:a.totalActividades,description:"Actividades planificadas en total",color:"from-green-500 to-green-600"}),l.jsx(o,{icon:l.jsx(WA,{className:"w-8 h-8"}),title:"Tareas",value:a.totalTareas,description:"Tareas asignadas a estudiantes",color:"from-purple-500 to-purple-600"}),l.jsx(o,{icon:l.jsx(ef,{className:"w-8 h-8"}),title:"Asignaturas",value:a.asignaturasUnicas,description:"Asignaturas involucradas",color:"from-orange-500 to-orange-600"})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[l.jsx(i,{data:r.categoriaCount}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:l.jsx(hee,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Distribución de Asignaturas"})]}),l.jsx("div",{className:"space-y-3",children:Object.entries(n.asignaturasCount).sort(([,c],[,u])=>u-c).map(([c,u])=>{const d=Math.max(...Object.values(n.asignaturasCount)),f=d>0?u/d*100:0;return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:c}),l.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[u," proyecto",u!==1?"s":""]})]}),l.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:l.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 transition-all duration-500",style:{width:`${f}%`}})})]},c)})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[l.jsx(s,{data:n.palabrasCount,title:"Contenidos Más Frecuentes"}),l.jsx(s,{data:r.habilidadesCount,title:"Habilidades Más Desarrolladas"})]})]})},YYe=({plan:e,onBack:t,availableTeachers:r})=>{var g,x;const[n,a]=S.useState([]),[s,i]=S.useState([]),[o,c]=S.useState(((g=e.tareas)==null?void 0:g[0])||null),[u,d]=S.useState(null);S.useEffect(()=>{const b=Tle(a),y=qYe(e.id,i);return()=>{b(),y()}},[e.id]);const f=S.useMemo(()=>n.filter(b=>b.profile===Wt.ESTUDIANTE&&e.cursos.includes(b.curso||"")).sort((b,y)=>(b.nombreCompleto||"").localeCompare(y.nombreCompleto||"")),[n,e.cursos]),h=async b=>{d(b.id);const y="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",w=`Eres un profesor asistente. Genera una retroalimentación breve (2-3 frases) para la entrega de un estudiante.
Instrucciones de la tarea: "${o==null?void 0:o.instrucciones}"
Comentario del estudiante: "${b.observacionesEstudiante||"Sin comentarios."}"`.trim();try{const E=(await(await new us(y).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(w)).response).text().replace(/(\*\*|\*)/g,"");await vq(b.id,E)}catch(_){console.error(_),alert("No se pudo generar la retroalimentación.")}finally{d(null)}},p=b=>b.map(y=>{var w;return((w=r.find(_=>_.id===y))==null?void 0:w.nombreCompleto)||y}).join(", ");return o?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Entregas de Tareas"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:e.nombreProyecto}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:["Profesores: ",p(e.docentesResponsables)]})]}),l.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[l.jsx(Iw,{className:"w-4 h-4"})," Volver a Proyectos"]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Seleccionar Tarea:"}),l.jsx("select",{value:o.id,onChange:b=>{var y;return c(((y=e.tareas)==null?void 0:y.find(w=>w.id===b.target.value))||null)},className:"w-full sm:w-auto p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:(x=e.tareas)==null?void 0:x.map(b=>l.jsxs("option",{value:b.id,children:["Tarea ",b.numero,": ",b.instrucciones]},b.id))})]}),l.jsx("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:f.map(b=>{const y=s.find(w=>w.tareaId===o.id&&w.estudianteId===b.id);return l.jsxs("div",{className:"p-6 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:(b.nombreCompleto||"NA").split(" ").map(w=>w[0]).join("").toUpperCase().slice(0,2)}),l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:b.nombreCompleto}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:b.curso})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:y!=null&&y.completada?l.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 rounded-full text-sm font-semibold",children:[l.jsx(yP,{className:"w-4 h-4"})," Entregado"]}):l.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-300 rounded-full text-sm font-semibold",children:[l.jsx(Fd,{className:"w-4 h-4"})," Pendiente"]})})]}),y?l.jsxs("div",{className:"space-y-4",children:[y.observacionesEstudiante&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Comentario del estudiante:"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 bg-white dark:bg-slate-800 p-3 rounded-md border border-slate-200 dark:border-slate-600",children:y.observacionesEstudiante})]}),y.enlaceUrl&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Enlace entregado:"}),l.jsx(hw,{href:y.enlaceUrl})]}),y.archivoAdjunto&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Archivo adjunto:"}),l.jsxs("a",{href:y.archivoAdjunto.url,download:y.archivoAdjunto.nombre,className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium",children:[l.jsx(cg,{className:"w-4 h-4"})," ",y.archivoAdjunto.nombre]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Retroalimentación del profesor:"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:y.feedbackProfesor||"",onBlur:w=>vq(y.id,w.target.value),rows:3,className:"flex-1 p-3 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm resize-none"},y.id),l.jsx("button",{onClick:()=>h(y),disabled:u===y.id,className:"p-3 rounded-md bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar Feedback con IA",children:u===y.id?l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):l.jsx(yv,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})]})]})]}):l.jsxs("div",{className:"text-center py-6",children:[l.jsx(Fd,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"El estudiante aún no ha realizado la entrega"})]})]},b.id)})})]}):l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Fd,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Este proyecto no tiene tareas asignadas"}),l.jsxs("button",{onClick:t,className:"mt-4 inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold",children:[l.jsx(Iw,{className:"w-4 h-4"})," Volver a Proyectos"]})]})})},JYe=({descripcion:e,asignaturas:t,docentes:r,onObjetivos:n,onIndicadores:a,onEstructura:s,availableTeachers:i})=>{const[o,c]=S.useState(null),u="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",d=h=>h.map(p=>{var g;return((g=i.find(x=>x.id===p))==null?void 0:g.nombreCompleto)||p}).join(", "),f=async h=>{var p,g,x;if(!e.trim()){alert("Ingrese una descripción del proyecto.");return}c(h);try{const y=new us(u).getGenerativeModel({model:"gemini-1.5-flash-latest"});if(h==="obj"){const w=`Genera 3 a 5 objetivos de aprendizaje claros y medibles.
Descripción: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,_=await y.generateContent(w);n(_.response.text().replace(/(\*\*|\*)/g,""))}else if(h==="ind"){const w=`Genera 5 a 7 indicadores de logro observables.
Descripción: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,_=await y.generateContent(w);a(_.response.text().replace(/(\*\*|\*)/g,""))}else{const w=`Devuelve SOLO un JSON válido (sin backticks) con claves: actividades, fechasClave y tareas para un proyecto escolar.
Descripción: "${e}"
Docentes responsables: "${d(r)}"
Asignaturas: "${t.join(", ")}"
Estructura:
- actividades: 3 a 5 objetos { "nombre", "fechaInicio" (YYYY-MM-DD), "fechaFin" (YYYY-MM-DD), "responsables", "recursoUrl" }
- fechasClave: 2 a 3 objetos { "nombre", "fecha" (YYYY-MM-DD), "recursoUrl" }
- tareas: 2 a 3 objetos { "instrucciones", "fechaEntrega" (YYYY-MM-DD), "recursoUrl" }`,B=(await y.generateContent(w)).response.text().replace(/^```json\s*|```\s*$/g,""),k=JSON.parse(B);s({actividades:(p=k.actividades)==null?void 0:p.map(I=>({...I,id:crypto.randomUUID()})),fechasClave:(g=k.fechasClave)==null?void 0:g.map(I=>({id:crypto.randomUUID(),nombre:I.nombre,fecha:I.fecha,recursoUrl:I.recursoUrl})),tareas:(x=k.tareas)==null?void 0:x.map((I,E)=>({...I,id:crypto.randomUUID(),numero:E+1}))})}}catch(b){console.error(b),alert("No se pudo completar la generación con IA.")}finally{c(null)}};return l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>f("obj"),disabled:o!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar objetivos con IA",children:o==="obj"?l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):l.jsx(yv,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),l.jsx("button",{type:"button",onClick:()=>f("ind"),disabled:o!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar indicadores con IA",children:o==="ind"?l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):l.jsx(yv,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),l.jsx("button",{type:"button",onClick:()=>f("est"),disabled:o!==null,className:"inline-flex items-center gap-2 bg-gradient-to-r from-sky-500 to-blue-600 text-white font-semibold py-2 px-3 rounded-lg disabled:from-slate-400 disabled:to-slate-500 disabled:cursor-not-allowed hover:from-sky-600 hover:to-blue-700 transition-all duration-200 shadow-lg",children:o==="est"?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})," ",l.jsx("span",{children:"Generando..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(yv,{className:"w-4 h-4"})," ",l.jsx("span",{children:"Estructura IA"})]})})]})},ZYe=({initialPlan:e,onSave:t,onCancel:r,availableTeachers:n})=>{const[a,s]=S.useState(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[i,o]=S.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""}),[c,u]=S.useState({nombre:"",fecha:"",recursoUrl:""}),[d,f]=S.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""});S.useEffect(()=>{s(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[e]);const h=w=>s(_=>({..._,[w.target.name]:w.target.value})),p=(w,_,B)=>s(k=>({...k,contenidosPorAsignatura:k.contenidosPorAsignatura.map(I=>I.asignatura===w?{...I,[_]:B}:I)})),g=(w,_)=>s(B=>({...B,contenidosPorAsignatura:B.contenidosPorAsignatura.map(k=>k.asignatura===w?{...k,habilidades:k.habilidades.includes(_)?k.habilidades.filter(I=>I!==_):[...k.habilidades,_]}:k)})),x=()=>{if(!i.nombre||!i.fechaInicio||!i.fechaFin){alert("Nombre y fechas son obligatorios.");return}s(w=>({...w,actividades:[...w.actividades||[],{...i,id:crypto.randomUUID()}]})),o({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""})},b=()=>{!c.nombre||!c.fecha||(s(w=>({...w,fechasClave:[...w.fechasClave||[],{...c,id:crypto.randomUUID()}]})),u({nombre:"",fecha:"",recursoUrl:""}))},y=()=>{var _;if(!d.instrucciones||!d.fechaEntrega){alert("Instrucciones y fecha son obligatorios.");return}const w={id:crypto.randomUUID(),numero:(((_=a.tareas)==null?void 0:_.length)||0)+1,...d};s(B=>({...B,tareas:[...B.tareas||[],w]})),f({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return l.jsxs("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 space-y-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[l.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl",children:l.jsx(ug,{className:"w-10 h-10 text-white"})}),l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:e?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})]}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Diseñe experiencias de aprendizaje colaborativo e innovador"})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsx(hp,{icon:l.jsx(WA,{className:"w-6 h-6 text-slate-600"}),label:"Información del Proyecto",aiButton:l.jsx(JYe,{descripcion:a.descripcionProyecto,asignaturas:a.asignaturas,docentes:a.docentesResponsables,availableTeachers:[],onObjetivos:w=>s(_=>({..._,objetivos:w})),onIndicadores:w=>s(_=>({..._,indicadoresLogro:w})),onEstructura:w=>s(_=>{var B,k,I;return{..._,actividades:(B=w.actividades)!=null&&B.length?w.actividades:_.actividades,fechasClave:(k=w.fechasClave)!=null&&k.length?w.fechasClave:_.fechasClave,tareas:(I=w.tareas)!=null&&I.length?w.tareas:_.tareas}})}),children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Nombre del Proyecto"}),l.jsx("input",{name:"nombreProyecto",value:a.nombreProyecto,onChange:h,placeholder:"Ingrese el nombre del proyecto...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-lg font-semibold"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Descripción del Proyecto"}),l.jsx("textarea",{name:"descripcionProyecto",value:a.descripcionProyecto,onChange:h,placeholder:"Detalle metodología, producto final y propósito...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})]})]})}),l.jsx(hp,{icon:l.jsx(Zl,{className:"w-6 h-6 text-slate-600"}),label:"Profesores Responsables",children:l.jsx("div",{className:"space-y-3",children:l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-60 overflow-y-auto",children:n.map(w=>l.jsx("button",{type:"button",onClick:()=>{s(_=>({..._,docentesResponsables:_.docentesResponsables.includes(w.id)?_.docentesResponsables.filter(B=>B!==w.id):[..._.docentesResponsables,w.id]}))},className:`p-3 rounded-lg text-left transition-all duration-200 ${a.docentesResponsables.includes(w.id)?"bg-blue-100 border-2 border-blue-500 text-blue-800 dark:bg-blue-900/50 dark:border-blue-400 dark:text-blue-300":"bg-slate-50 border-2 border-slate-200 hover:border-slate-300 dark:bg-slate-700 dark:border-slate-600 dark:hover:border-slate-500"}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm ${a.docentesResponsables.includes(w.id)?"bg-blue-500 text-white":"bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-300"}`,children:l.jsx(Fw,{className:"w-5 h-5"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-sm",children:w.nombreCompleto}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:w.email})]})]})},w.id))})})}),l.jsx(hp,{icon:l.jsx(eN,{className:"w-6 h-6 text-slate-600"}),label:"Cursos Participantes",children:l.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3",children:Ks.map(w=>l.jsx("button",{type:"button",onClick:()=>{s(_=>({..._,cursos:_.cursos.includes(w)?_.cursos.filter(B=>B!==w):[..._.cursos,w]}))},className:`p-3 rounded-lg text-center text-sm font-semibold transition-all duration-200 ${a.cursos.includes(w)?"bg-amber-500 text-white shadow-lg scale-105":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:w},w))})})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsx(hp,{icon:l.jsx(ef,{className:"w-6 h-6 text-slate-600"}),label:"Asignaturas y Contenidos",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Seleccionar Asignaturas:"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:qi.map(w=>l.jsx("button",{type:"button",onClick:()=>{s(_=>{const B=_.asignaturas,k=B.includes(w)?B.filter(E=>E!==w):[...B,w];let I=_.contenidosPorAsignatura;return k.includes(w)&&!B.includes(w)&&(I=[...I,{asignatura:w,contenidos:"",habilidades:[]}]),!k.includes(w)&&B.includes(w)&&(I=I.filter(E=>E.asignatura!==w)),{..._,asignaturas:k,contenidosPorAsignatura:I}})},className:`p-2 rounded-lg text-left text-sm font-medium transition-all duration-200 ${a.asignaturas.includes(w)?"bg-green-500 text-white shadow-md":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:w},w))})]}),a.contenidosPorAsignatura.length>0&&l.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[l.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Contenidos y Habilidades por Asignatura:"}),a.contenidosPorAsignatura.map(w=>l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsxs("h5",{className:"font-bold text-slate-800 dark:text-slate-200 mb-3 flex items-center gap-2",children:[l.jsx(ef,{className:"w-4 h-4"})," ",w.asignatura]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Contenidos a trabajar:"}),l.jsx("textarea",{value:w.contenidos,onChange:_=>p(w.asignatura,"contenidos",_.target.value),placeholder:`Detalle los contenidos específicos de ${w.asignatura}...`,className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm min-h-[80px] resize-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Habilidades según Taxonomía de Bloom:"}),l.jsx("div",{className:"space-y-2",children:Object.entries(uO).map(([_,B])=>l.jsxs("div",{className:"border border-slate-200 dark:border-slate-600 rounded-md p-2",children:[l.jsxs("h6",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 mb-1",children:[_,":"]}),l.jsx("div",{className:"flex flex-wrap gap-1",children:B.map(k=>l.jsx("button",{type:"button",onClick:()=>g(w.asignatura,k),className:`px-2 py-1 rounded-md text-xs font-medium transition-colors ${w.habilidades.includes(k)?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-500"}`,children:k},k))})]},_))}),w.habilidades.length>0&&l.jsxs("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:[l.jsx("p",{className:"text-xs font-semibold text-blue-800 dark:text-blue-300 mb-1",children:"Habilidades seleccionadas:"}),l.jsx("div",{className:"flex flex-wrap gap-1",children:w.habilidades.map(_=>l.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded text-xs",children:_},_))})]})]})]})]},w.asignatura))]})]})}),l.jsx(hp,{icon:l.jsx(Wv,{className:"w-6 h-6 text-slate-600"}),label:"Objetivos de Aprendizaje",children:l.jsx("textarea",{name:"objetivos",value:a.objetivos,onChange:h,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),l.jsx(hp,{icon:l.jsx(Yf,{className:"w-6 h-6 text-slate-600"}),label:"Indicadores de Éxito",children:l.jsx("textarea",{name:"indicadoresLogro",value:a.indicadoresLogro,onChange:h,placeholder:"Liste los indicadores de logro...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),l.jsxs(hp,{icon:l.jsx(Id,{className:"w-6 h-6 text-slate-600"}),label:"Planificación y Cronograma",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(V0,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),l.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Proyecto"})]}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre"}),l.jsx("input",{value:i.nombre,onChange:w=>o({...i,nombre:w.target.value}),placeholder:"Nombre de la actividad",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"lg:col-span-2",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Inicio"}),l.jsx("input",{type:"date",value:i.fechaInicio,onChange:w=>o({...i,fechaInicio:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"lg:col-span-2",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fin"}),l.jsx("input",{type:"date",value:i.fechaFin,onChange:w=>o({...i,fechaFin:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),l.jsx("input",{value:i.recursoUrl||"",onChange:w=>o({...i,recursoUrl:w.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsx("div",{className:"lg:col-span-2",children:l.jsxs("button",{type:"button",onClick:x,className:"w-full bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[l.jsx(Lu,{className:"w-4 h-4"})," Agregar"]})})]}),!!a.actividades.length&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Actividades Agregadas:"}),l.jsx("div",{className:"space-y-2",children:a.actividades.map(w=>l.jsx("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm",children:l.jsxs("div",{className:"flex justify-between items-center gap-2",children:[l.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:w.nombre}),l.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:[w.fechaInicio," - ",w.fechaFin]}),l.jsx(hw,{href:w.recursoUrl})]})},w.id))})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(yP,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),l.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Fechas Clave (Hitos)"})]}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-3 items-end",children:[l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre del Hito"}),l.jsx("input",{value:c.nombre,onChange:w=>u({...c,nombre:w.target.value}),placeholder:"Nombre del hito",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha"}),l.jsx("input",{type:"date",value:c.fecha,onChange:w=>u({...c,fecha:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"sm:col-span-1",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),l.jsx("input",{value:c.recursoUrl||"",onChange:w=>u({...c,recursoUrl:w.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("button",{type:"button",onClick:b,className:"bg-green-600 hover:bg-green-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[l.jsx(Lu,{className:"w-4 h-4"})," Agregar"]})]}),!!a.fechasClave.length&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Fechas Clave Agregadas:"}),l.jsx("div",{className:"space-y-2",children:a.fechasClave.map(w=>l.jsx("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm",children:l.jsxs("div",{className:"flex justify-between items-center gap-2",children:[l.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:w.nombre}),l.jsx("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:w.fecha}),l.jsx(hw,{href:w.recursoUrl})]})},w.id))})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(Tw,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),l.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Tareas para Estudiantes"})]}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[l.jsxs("div",{className:"lg:col-span-5",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Instrucciones de la Tarea"}),l.jsx("input",{value:d.instrucciones,onChange:w=>f({...d,instrucciones:w.target.value}),placeholder:"Descripción detallada de la tarea",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de Entrega"}),l.jsx("input",{type:"date",value:d.fechaEntrega,onChange:w=>f({...d,fechaEntrega:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),l.jsx("input",{value:d.recursoUrl||"",onChange:w=>f({...d,recursoUrl:w.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsx("div",{className:"lg:col-span-1",children:l.jsxs("button",{type:"button",onClick:y,className:"w-full bg-purple-600 hover:bg-purple-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[l.jsx(Lu,{className:"w-4 h-4"})," Agregar"]})})]}),!!a.tareas.length&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Tareas Agregadas:"}),l.jsx("div",{className:"space-y-2",children:a.tareas.map(w=>l.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600",children:l.jsxs("div",{className:"flex justify-between items-start gap-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("span",{className:"inline-block bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-300 text-xs font-bold px-2 py-1 rounded mb-1",children:["Tarea #",w.numero]}),l.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:w.instrucciones})]}),l.jsxs("div",{className:"text-right space-y-1",children:[l.jsx("span",{className:"block text-slate-500 dark:text-slate-400 text-xs",children:w.fechaEntrega}),"recursoUrl"in w?l.jsx(hw,{href:w.recursoUrl}):l.jsx("span",{className:"text-slate-400 text-xs",children:"—"})]})]})},w.id))})]})]})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-8 border-t border-slate-200 dark:border-slate-700",children:[l.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors order-2 sm:order-1",children:"Cancelar"}),l.jsx("button",{onClick:()=>t(a),className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg order-1 sm:order-2",children:e?"Guardar Cambios":"Crear Proyecto"})]})]})]})]})]})},bq=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,s]=S.useState(!0),[i,o]=S.useState("list"),[c,u]=S.useState(null),[d,f]=S.useState(null),[h,p]=S.useState(null),[g,x]=S.useState("all"),b=S.useMemo(()=>g==="all"?e:e.filter(N=>N.id===g),[e,g]);S.useEffect(()=>{s(!0);const N=Tle(R=>{const D=R.filter(O=>O.profile===Wt.PROFESORADO);n(D)}),j=$Ye(R=>{const D=R.map(O=>({...O,docentesResponsables:Array.isArray(O.docentesResponsables)?O.docentesResponsables:[O.docentesResponsables].filter(Boolean),contenidosPorAsignatura:O.contenidosPorAsignatura||[],actividades:O.actividades||[],fechasClave:O.fechasClave||[]}));t(D),s(!1)});return()=>{N(),j()}},[]);const y=S.useCallback(async(N,j)=>{const R=e.find(O=>O.id===N);if(!R)return;const D={...R,actividades:(R.actividades||[]).map(O=>O.id===j.id?j:O)};await xq(N,D)},[e]),w=async N=>{try{const j=N.id&&String(N.id).length>0,R={...N};if(j){const{id:D,...O}=R;await xq(N.id,O)}else delete R.id,await GYe(R);o("list"),u(null)}catch(j){console.error("Error al guardar la planificación:",j),alert("No se pudo guardar la planificación.")}},_=N=>{u(N),o("form")},B=async N=>{if(!N){alert("Error: ID inválido.");return}if(window.confirm("¿Está seguro de eliminar esta planificación?"))try{await KYe(N)}catch(j){console.error(j),alert("No se pudo eliminar la planificación.")}},k=()=>{u(null),o("form")},I=async N=>{f(N.id);const j=new vr("p","mm","a4"),R=15,O=j.internal.pageSize.getWidth()-R*2;let L=R+20;j.setFont("helvetica","bold"),j.setFontSize(22),j.setTextColor(0);const M=j.splitTextToSize(N.nombreProyecto,O);j.text(M,R,L),L+=M.length*8+10,bo(j,{startY:L,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},(K=>K.map(z=>{var G;return((G=r.find(Y=>Y.id===z))==null?void 0:G.nombreCompleto)||z}).join(", "))(N.docentesResponsables)],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},N.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},N.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:11,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),L=j.lastAutoTable.finalY+15;const V=(K,z)=>{if(!z||Array.isArray(z)&&!z.length||typeof z=="string"&&!z.trim())return;const G=Array.isArray(z)?z.join(", "):String(z),Y=j.splitTextToSize(G,O);j.setFont("helvetica","bold"),j.setFontSize(14),j.setTextColor(40),j.text(K,R,L),L+=8,j.setFont("helvetica","normal"),j.setFontSize(11),j.setTextColor(80),j.text(Y,R,L),L+=Y.length*5+10};if(V("Descripción del Proyecto",N.descripcionProyecto),V("Objetivos de Aprendizaje",N.objetivos),V("Indicadores de Logro",N.indicadoresLogro),N.contenidosPorAsignatura&&N.contenidosPorAsignatura.length>0&&(j.setFont("helvetica","bold"),j.setFontSize(14),j.text("Contenidos por Asignatura",R,L),L+=10,N.contenidosPorAsignatura.forEach(K=>{var z;if(j.setFont("helvetica","bold"),j.setFontSize(11),j.text(`${K.asignatura}:`,R,L),L+=6,j.setFont("helvetica","normal"),j.setFontSize(11),K.contenidos){const G=j.splitTextToSize(`Contenidos: ${K.contenidos}`,O-10);j.text(G,R+5,L),L+=G.length*5+3}if((z=K.habilidades)!=null&&z.length){const G=`Habilidades: ${K.habilidades.join(", ")}`,Y=j.splitTextToSize(G,O-10);j.text(Y,R+5,L),L+=Y.length*5+8}}),L+=10),N.actividades&&N.actividades.length>0&&(j.setFont("helvetica","bold"),j.setFontSize(14),j.text("Actividades",R,L),L+=10,bo(j,{startY:L,head:[["Actividad","Inicio","Fin","Recurso"]],body:N.actividades.map(K=>[K.nombre,K.fechaInicio,K.fechaFin,K.recursoUrl||"—"]),theme:"striped"}),L=j.lastAutoTable.finalY+10),N.fechasClave&&N.fechasClave.length>0&&(j.setFont("helvetica","bold"),j.setFontSize(14),j.text("Fechas Clave",R,L),L+=10,bo(j,{startY:L,head:[["Hito","Fecha","Recurso"]],body:N.fechasClave.map(K=>[K.nombre,K.fecha,K.recursoUrl||"—"]),theme:"striped"}),L=j.lastAutoTable.finalY+10),N.tareas&&N.tareas.length>0){const K=N.tareas.map(z=>[String(z.numero||""),z.instrucciones,z.fechaEntrega,z.recursoUrl||"—"]);j.setFont("helvetica","bold"),j.setFontSize(14),j.text("Tareas para Estudiantes",R,L),L+=10,bo(j,{startY:L,head:[["#","Instrucciones","Entrega","Recurso"]],body:K,theme:"striped",headStyles:{fillColor:[52,73,94]}})}j.save(`Proyecto_${N.nombreProyecto.replace(/\s/g,"_")}.pdf`),f(null)},E=N=>N.map(j=>{var R;return((R=r.find(D=>D.id===j))==null?void 0:R.nombreCompleto)||j}).join(", ");return a?l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Cargando proyectos..."})]})}):h?l.jsx(YYe,{plan:h,onBack:()=>p(null),availableTeachers:r}):i==="dashboard"?l.jsxs("div",{className:"space-y-8",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>o("list"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),l.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-green-600 to-teal-600 text-white shadow",children:"Dashboard"})]})}),l.jsx(XYe,{planificaciones:e,onBack:()=>o("list")})]}):i==="form"?l.jsxs("div",{className:"space-y-8",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>{o("list"),u(null)},className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),l.jsx("button",{type:"button",onClick:()=>o("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),l.jsx(ZYe,{initialPlan:c,onSave:w,onCancel:()=>{o("list"),u(null)},availableTeachers:r})]}):l.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow",children:"Proyectos"}),l.jsx("button",{type:"button",onClick:()=>o("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:l.jsx(ug,{className:"w-8 h-8 text-white"})}),l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Proyectos Interdisciplinarios"})]}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Gestione experiencias de aprendizaje colaborativo e innovador"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{type:"button",onClick:()=>o("dashboard"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-green-600 to-teal-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-200 shadow-lg",children:[l.jsx(nN,{className:"w-5 h-5"})," Ver Dashboard"]}),l.jsxs("button",{type:"button",onClick:k,className:"inline-flex items-center gap-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg",children:[l.jsx(Lu,{className:"w-5 h-5"})," Crear Nuevo Proyecto"]})]})]}),e.length===0?l.jsxs("div",{className:"text-center py-16",children:[l.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:l.jsx(ug,{className:"w-12 h-12 text-slate-400"})}),l.jsx("h3",{className:"text-xl font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"No hay proyectos creados"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-500 mb-6",children:"Comience creando su primer proyecto interdisciplinario"}),l.jsxs("button",{type:"button",onClick:k,className:"inline-flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:[l.jsx(Lu,{className:"w-4 h-4"})," Crear Primer Proyecto"]})]}):l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:e.map(N=>l.jsxs("div",{className:"group bg-slate-50 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 hover:border-blue-300 dark:hover:border-blue-600",children:[l.jsx("div",{className:"flex justify-between items-start mb-4",children:l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-slate-200 mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:N.nombreProyecto}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsx(eN,{className:"w-4 h-4"}),l.jsxs("span",{children:["Cursos: ",N.cursos.join(", ")]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsx(Zl,{className:"w-4 h-4"}),l.jsxs("span",{children:["Profesores: ",E(N.docentesResponsables)]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsx(ef,{className:"w-4 h-4"}),l.jsxs("span",{children:["Asignaturas: ",N.asignaturas.length]})]})]})]})}),!!N.descripcionProyecto&&l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4 line-clamp-3",children:N.descripcionProyecto}),l.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{type:"button",onClick:()=>p(N),className:"inline-flex items-center gap-1 text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm transition-colors",title:"Ver entregas de estudiantes",children:[l.jsx(yP,{className:"w-4 h-4"})," Entregas"]}),l.jsxs("button",{type:"button",onClick:()=>I(N),disabled:d===N.id,className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm transition-colors disabled:opacity-50",title:"Exportar a PDF",children:[d===N.id?l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):l.jsx(cg,{className:"w-4 h-4"}),"PDF"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:()=>_(N),className:"p-2 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-lg transition-colors",title:"Editar proyecto",children:l.jsx(xee,{className:"w-4 h-4"})}),l.jsx("button",{type:"button",onClick:()=>B(N.id),className:"p-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-lg transition-colors",title:"Eliminar proyecto",children:l.jsx(tl,{className:"w-4 h-4"})})]})]})]},N.id))})]}),e.length>0&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Gye,{className:"w-5 h-5 text-slate-600"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Cronograma (Gantt)"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm text-slate-600",children:"Proyecto:"}),l.jsxs("select",{value:g,onChange:N=>x(N.target.value),className:"p-2 border border-slate-300 rounded-lg bg-white dark:bg-slate-700 text-sm",children:[l.jsx("option",{value:"all",children:"Todos"}),e.map(N=>l.jsx("option",{value:N.id,children:N.nombreProyecto},N.id))]})]})]}),l.jsx("div",{id:"gantt-container-vertical",children:l.jsx(WYe,{planificaciones:b,onActivityUpdate:y})})]})]})},v1="panol_maquinas",cE="panol_registros",eJe=e=>{const t=$t(kt(ht,v1),Sr("nombre","asc"));return pr(t,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));e(n)})},tJe=e=>{const t=$t(kt(ht,cE),Sr("fecha","desc"));return pr(t,r=>{const n=r.docs.map(a=>{const s=a.data();return{id:a.id,fecha:s.fecha,curso:s.curso,profesorResponsable:s.profesorResponsable,maquinaId:s.maquinaId,totalHoras:s.totalHoras,observaciones:s.observaciones||""}});e(n)})},rJe=async e=>(await Tn(kt(ht,v1),{...e,createdAt:Ni(),updatedAt:Ni()})).id,nJe=async(e,t)=>{await Vu(dr(ht,v1,e),{...t,updatedAt:Ni()})},aJe=async e=>{const t=$t(kt(ht,cE),Jr("maquinaId","==",e));if(!(await ga(t)).empty)throw new Error("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");await za(dr(ht,v1,e))},sJe=async e=>(await Tn(kt(ht,cE),{...e,createdAt:Ni(),updatedAt:Ni()})).id,iJe=async(e,t)=>{await Vu(dr(ht,cE,e),{...t,updatedAt:Ni()})},oJe=async e=>{await za(dr(ht,cE,e))},lJe=async()=>{if(!(await ga(kt(ht,v1))).empty)return;const t=jg(ht);[{nombre:"Torno",especialidad:"Industrial"},{nombre:"Fresadora",especialidad:"Industrial"},{nombre:"Rectificadora",especialidad:"Industrial"},{nombre:"Soldadora MIG",especialidad:"Industrial"},{nombre:"Soldadora TIG",especialidad:"Industrial"},{nombre:"Torno CNC",especialidad:"Industrial"},{nombre:"Elevador",especialidad:"Automotriz"},{nombre:"Compresor",especialidad:"Automotriz"},{nombre:"Rectificadora",especialidad:"Automotriz"},{nombre:"Maqueta de motor",especialidad:"Automotriz"},{nombre:"Maqueta hidráulica",especialidad:"Automotriz"}].forEach(n=>{const a=dr(kt(ht,v1));t.set(a,{...n,createdAt:Ni(),updatedAt:Ni()})}),await t.commit()},cJe=()=>{var J;const[e,t]=S.useState([]),[r,n]=S.useState([]),a={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[s,i]=S.useState(a),[o,c]=S.useState(null),u={nombre:"",especialidad:"Industrial"},[d,f]=S.useState(u),[h,p]=S.useState(null),[g,x]=S.useState({maquinaId:"",curso:"",profesor:"",fecha:""});S.useEffect(()=>{lJe().catch(console.error);const V=eJe(t),K=tJe(n);return()=>{V&&V(),K&&K()}},[]);const b=async V=>{if(V.preventDefault(),!!d.nombre.trim())try{h?await nJe(h.id,{...d}):await rJe({...d}),f(u),p(null)}catch(K){alert(K.message||"Error al guardar máquina")}},y=S.useCallback(async V=>{try{await aJe(V)}catch(K){alert(K.message||"Error al eliminar máquina")}},[]),w=async V=>{V.preventDefault();const K=o||s;if(!K.curso||!K.profesorResponsable.trim()||!K.maquinaId||Number(K.totalHoras)<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}try{if(o){const{id:z,...G}=o;await iJe(z,G)}else await sJe({...s});i(a),c(null)}catch(z){alert(z.message||"Error al guardar registro")}},_=S.useCallback(async V=>{try{await oJe(V)}catch(K){alert(K.message||"Error al eliminar registro")}},[]),B=S.useMemo(()=>r.filter(V=>(g.maquinaId===""||V.maquinaId===g.maquinaId)&&(g.curso===""||V.curso===g.curso)&&(g.profesor===""||V.profesorResponsable.toLowerCase().includes(g.profesor.toLowerCase()))&&(g.fecha===""||V.fecha===g.fecha)).sort((V,K)=>new Date(K.fecha).getTime()-new Date(V.fecha).getTime()),[r,g]),k=S.useMemo(()=>new Map(e.map(V=>[V.id,V])),[e]),I=S.useMemo(()=>B.reduce((V,K)=>V+(Number(K.totalHoras)||0),0),[B]),E=S.useMemo(()=>{const V=new Map;B.forEach(z=>{var Y;const G=((Y=k.get(z.maquinaId))==null?void 0:Y.nombre)||"N/A";V.set(G,(V.get(G)||0)+(Number(z.totalHoras)||0))});const K=Array.from(V.entries()).map(([z,G])=>({maquina:z,horas:Number(G.toFixed(2))}));return K.sort((z,G)=>G.horas-z.horas),K},[B,k]),N=()=>{const V=B.map(G=>{var Y,ee;return{Fecha:G.fecha,Curso:G.curso,Profesor:G.profesorResponsable,Máquina:((Y=k.get(G.maquinaId))==null?void 0:Y.nombre)||"N/A",Especialidad:((ee=k.get(G.maquinaId))==null?void 0:ee.especialidad)||"N/A","Total Horas":G.totalHoras,Observaciones:G.observaciones}}),K=Fu.json_to_sheet(V),z=Fu.book_new();Fu.book_append_sheet(z,K,"RegistrosPañol"),SL(z,"Registros_Pañol.xlsx")},j=()=>{const V=new vr;bo(V,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:B.map(K=>{var z,G;return[K.fecha,K.curso,K.profesorResponsable,((z=k.get(K.maquinaId))==null?void 0:z.nombre)||"N/A",((G=k.get(K.maquinaId))==null?void 0:G.especialidad)||"N/A",K.totalHoras,K.observaciones]}),margin:{top:24,right:10,bottom:20,left:10},didDrawPage:K=>{V.setFontSize(12),V.setFont("helvetica","bold"),V.text("LICEO INDUSTRIAL DE RECOLETA",K.settings.margin.left,14),V.setFontSize(10),V.setFont("helvetica","normal"),V.text("Informe de Registros de Pañol",K.settings.margin.left,20)}}),V.save("Registros_Pañol.pdf")},R="w-full border border-slate-300 rounded-xl px-3 py-2 shadow-sm focus:ring-2 focus:ring-indigo-500/30 focus:border-indigo-400 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-400",D=(V,K)=>l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${K}`,children:V}),O=({icon:V,label:K,value:z,accent:G="from-indigo-500 to-sky-500"})=>l.jsxs("div",{className:"relative rounded-2xl p-4 shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[l.jsx("div",{className:`absolute inset-0 bg-gradient-to-tr ${G} opacity-10`}),l.jsxs("div",{className:"relative flex items-center gap-3 bg-white/70 dark:bg-slate-800/60 rounded-xl p-3",children:[l.jsx("div",{className:"p-2 rounded-xl bg-white dark:bg-slate-700 shadow",children:V}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:K}),l.jsx("div",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:z})]})]})]}),L=({title:V,icon:K,children:z,right:G,accent:Y="from-indigo-600/10 via-sky-500/10 to-emerald-500/10"})=>l.jsxs("section",{className:"rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 relative overflow-hidden",children:[l.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${Y}`}),l.jsxs("div",{className:"relative",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h2",{className:"flex items-center gap-2 text-lg font-bold text-slate-800 dark:text-slate-100",children:[K," ",l.jsx("span",{children:V})]}),G]}),z]})]}),M=()=>{const V=o||s,K=o?c:i;return l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4 items-end",children:[l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(Id,{size:16})," Fecha"]}),l.jsx("input",{name:"fecha",type:"date",value:V.fecha,onChange:z=>K({...V,fecha:z.target.value}),className:R,required:!0})]}),l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(Zl,{size:16})," Curso"]}),l.jsxs("select",{name:"curso",value:V.curso,onChange:z=>K({...V,curso:z.target.value}),className:R,required:!0,children:[l.jsx("option",{value:"",children:"Curso"}),Ks.map(z=>l.jsx("option",{children:z},z))]})]}),l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(ef,{size:16})," Profesor"]}),l.jsxs("select",{name:"profesorResponsable",value:V.profesorResponsable,onChange:z=>K({...V,profesorResponsable:z.target.value}),className:R,required:!0,children:[l.jsx("option",{value:"",children:"Profesor Responsable"}),R6.map(z=>l.jsx("option",{value:z,children:z},z))]})]}),l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(e5,{size:16})," Máquina"]}),l.jsxs("select",{name:"maquinaId",value:V.maquinaId,onChange:z=>K({...V,maquinaId:z.target.value}),className:R,required:!0,children:[l.jsx("option",{value:"",children:"Máquina"}),e.map(z=>l.jsx("option",{value:z.id,children:z.nombre},z.id))]})]}),l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(tN,{size:16})," Total de Horas"]}),l.jsx("input",{name:"totalHoras",type:"number",value:V.totalHoras,onChange:z=>K({...V,totalHoras:Number(z.target.value)}),className:R,required:!0,min:.5,step:.5})]}),l.jsxs("div",{className:"lg:col-span-6",children:[l.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),l.jsx("textarea",{name:"observaciones",value:V.observaciones,onChange:z=>K({...V,observaciones:z.target.value}),placeholder:"Observaciones...",className:R+" min-h-[40px]",rows:2})]})]}),l.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o&&l.jsxs("button",{type:"button",onClick:()=>c(null),className:"inline-flex items-center gap-2 bg-white text-slate-700 border border-slate-200 dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700 font-medium py-2 px-4 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[l.jsx(aN,{size:16})," Cancelar"]}),l.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-4 rounded-xl hover:bg-indigo-500 transition",children:[o?l.jsx(vm,{size:16}):l.jsx(Lu,{size:16}),o?"Actualizar":"Registrar"]})]})]})};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("header",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 via-sky-500 to-emerald-500",children:"Pañol: Registro de Uso de Máquinas"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Administra máquinas, registra usos y exporta informes (Firestore)."})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:N,className:"inline-flex items-center gap-2 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100 border border-slate-200 dark:border-slate-800 px-3 py-2 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",title:"Exportar a Excel",children:[l.jsx(Sye,{size:18})," Excel"]}),l.jsxs("button",{onClick:j,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-2 rounded-xl hover:bg-emerald-500 transition",title:"Exportar a PDF",children:[l.jsx(WA,{size:18})," PDF"]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsx(O,{icon:l.jsx(e5,{className:"w-5 h-5 text-indigo-600"}),label:"Máquinas registradas",value:e.length,accent:"from-indigo-500 to-sky-500"}),l.jsx(O,{icon:l.jsx(WA,{className:"w-5 h-5 text-sky-600"}),label:"Registros",value:B.length,accent:"from-sky-500 to-cyan-500"}),l.jsx(O,{icon:l.jsx(tN,{className:"w-5 h-5 text-emerald-600"}),label:"Horas totales (filtradas)",value:I.toFixed(1),accent:"from-emerald-500 to-lime-500"}),l.jsx(O,{icon:l.jsx(Id,{className:"w-5 h-5 text-amber-600"}),label:"Última actualización",value:(J=r[0])!=null&&J.fecha?new Date(r[0].fecha).toLocaleDateString():"—",accent:"from-amber-500 to-rose-400"})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[l.jsx("div",{className:"xl:col-span-3",children:l.jsx(L,{title:o?`Editando registro #${o.id.slice(0,4)}`:"Nuevo registro de uso",icon:l.jsx(Eye,{size:18}),children:l.jsx(M,{})})}),l.jsx("div",{className:"xl:col-span-2 order-1 xl:order-none",children:l.jsx(L,{title:"Uso por máquina (horas)",icon:l.jsx(Yf,{size:18}),accent:"from-indigo-600/10 via-sky-500/10 to-amber-500/10",right:l.jsx("div",{className:"flex gap-2 items-center",children:D(`${E.length} máquinas`,"bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200")}),children:l.jsx("div",{className:"h-[320px] w-full",children:l.jsx(Pp,{width:"100%",height:"100%",children:l.jsxs(VN,{data:E,margin:{top:8,right:16,bottom:8,left:0},children:[l.jsx(qw,{strokeDasharray:"3 3"}),l.jsx(c1,{dataKey:"maquina",tick:{fontSize:12},interval:0,angle:0,height:50}),l.jsx(u1,{}),l.jsx(Dp,{}),l.jsx(U2,{}),l.jsx(Kw,{dataKey:"horas",name:"Horas",fill:"#6366F1",radius:[6,6,0,0]})]})})})})}),l.jsx("div",{className:"xl:col-span-1 order-2 xl:order-none",children:l.jsxs(L,{title:"Administrar máquinas",icon:l.jsx(e5,{size:18}),accent:"from-emerald-600/10 via-sky-500/10 to-indigo-600/10",children:[l.jsxs("form",{onSubmit:b,className:"grid grid-cols-1 md:grid-cols-5 gap-2 mb-4",children:[l.jsx("input",{value:d.nombre,onChange:V=>f({...d,nombre:V.target.value}),placeholder:"Nombre máquina",className:R+" md:col-span-2"}),l.jsxs("select",{value:d.especialidad,onChange:V=>f({...d,especialidad:V.target.value}),className:R+" md:col-span-2",children:[l.jsx("option",{value:"Industrial",children:"Industrial"}),l.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),l.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-3 rounded-xl hover:bg-indigo-500 transition md:col-span-1",children:[h?l.jsx(vm,{size:16}):l.jsx(Lu,{size:16}),h?"Guardar":"Agregar"]})]}),l.jsx("ul",{className:"space-y-2 max-h-72 overflow-y-auto pr-1",children:e.map(V=>l.jsxs("li",{className:"flex justify-between items-center bg-gradient-to-r from-slate-50 to-white dark:from-slate-800/60 dark:to-slate-800/30 border border-slate-200 dark:border-slate-700 p-3 rounded-xl",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-100",children:V.nombre}),l.jsx("div",{className:"text-xs",children:V.especialidad==="Industrial"?D("Industrial","bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200"):D("Automotriz","bg-emerald-50 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200")})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>{p(V),f(V)},className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Editar",children:l.jsx(M6,{size:16,className:"text-blue-600"})}),l.jsx("button",{onClick:()=>y(V.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Eliminar",children:l.jsx(tl,{size:16,className:"text-red-600"})})]})]},V.id))})]})}),l.jsx("div",{className:"xl:col-span-2 order-3",children:l.jsxs(L,{title:"Historial de uso",icon:l.jsx(WA,{size:18}),accent:"from-rose-500/10 via-amber-400/10 to-indigo-500/10",right:l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(wP,{size:16,className:"text-slate-600"})}),children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[l.jsx("input",{type:"date",value:g.fecha,onChange:V=>x({...g,fecha:V.target.value}),className:R,placeholder:"Fecha"}),l.jsxs("select",{value:g.curso,onChange:V=>x({...g,curso:V.target.value}),className:R,children:[l.jsx("option",{value:"",children:"Todos los Cursos"}),Ks.map(V=>l.jsx("option",{children:V},V))]}),l.jsxs("select",{value:g.maquinaId,onChange:V=>x({...g,maquinaId:V.target.value}),className:R,children:[l.jsx("option",{value:"",children:"Todas las Máquinas"}),e.map(V=>l.jsx("option",{value:V.id,children:V.nombre},V.id))]}),l.jsxs("div",{className:"relative",children:[l.jsx(w4,{size:16,className:"absolute left-3 top-2.5 text-slate-400"}),l.jsx("input",{value:g.profesor,onChange:V=>x({...g,profesor:V.target.value}),placeholder:"Buscar profesor...",className:R+" pl-9"})]})]}),l.jsx("div",{className:"max-h-[420px] overflow-y-auto border border-slate-200 dark:border-slate-800 rounded-xl",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 sticky top-0 z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Fecha"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Máquina"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Profesor / Curso"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Total Horas"}),l.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-600 uppercase",children:"Acciones"})]})}),l.jsxs("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-800",children:[B.map(V=>{var K;return l.jsxs("tr",{className:"hover:bg-slate-50/60 dark:hover:bg-slate-800/50 transition",children:[l.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:V.fecha}),l.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((K=k.get(V.maquinaId))==null?void 0:K.nombre)||"N/A"}),l.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[V.profesorResponsable," ",l.jsxs("span",{className:"text-slate-400",children:["(",V.curso,")"]})]}),l.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:V.totalHoras}),l.jsxs("td",{className:"px-3 py-2 text-center",children:[l.jsx("button",{onClick:()=>c(V),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Editar",children:l.jsx(M6,{size:16,className:"text-blue-600"})}),l.jsx("button",{onClick:()=>_(V.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Eliminar",children:l.jsx(tl,{size:16,className:"text-red-600"})})]})]},V.id)}),B.length===0&&l.jsx("tr",{children:l.jsx("td",{className:"px-3 py-6 text-center text-sm text-slate-500",colSpan:5,children:"No hay registros que coincidan con los filtros."})})]})]})})]})})]})]})};function _l(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=_l(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}const uJe={},yq=e=>{let t;const r=new Set,n=(d,f)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const p=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(g=>g(t,p))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(uJe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,a,c);return c},dJe=e=>e?yq(e):yq,{useDebugValue:AJe}=at,{useSyncExternalStoreWithSelector:fJe}=$Ce,hJe=e=>e;function Ile(e,t=hJe,r){const n=fJe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return AJe(n),n}const wq=(e,t)=>{const r=dJe(e),n=(a,s=t)=>Ile(r,a,s);return Object.assign(n,r),n},mJe=(e,t)=>e?wq(e,t):wq;function sl(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var pJe={value:()=>{}};function Sk(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new l5(r)}function l5(e){this._=e}function gJe(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}l5.prototype=Sk.prototype={constructor:l5,on:function(e,t){var r=this._,n=gJe(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=xJe(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=Eq(r[a],e.name,t);else if(t==null)for(a in r)r[a]=Eq(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new l5(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function xJe(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function Eq(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=pJe,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var dO="http://www.w3.org/1999/xhtml";const Cq={svg:"http://www.w3.org/2000/svg",xhtml:dO,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function kk(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Cq.hasOwnProperty(t)?{space:Cq[t],local:e}:e}function vJe(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===dO&&t.documentElement.namespaceURI===dO?t.createElement(e):t.createElementNS(r,e)}}function bJe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Fle(e){var t=kk(e);return(t.local?bJe:vJe)(t)}function yJe(){}function QL(e){return e==null?yJe:function(){return this.querySelector(e)}}function wJe(e){typeof e!="function"&&(e=QL(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=new Array(i),c,u,d=0;d<i;++d)(c=s[d])&&(u=e.call(c,c.__data__,d,s))&&("__data__"in c&&(u.__data__=c.__data__),o[d]=u);return new $c(n,this._parents)}function EJe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function CJe(){return[]}function Ole(e){return e==null?CJe:function(){return this.querySelectorAll(e)}}function _Je(e){return function(){return EJe(e.apply(this,arguments))}}function NJe(e){typeof e=="function"?e=_Je(e):e=Ole(e);for(var t=this._groups,r=t.length,n=[],a=[],s=0;s<r;++s)for(var i=t[s],o=i.length,c,u=0;u<o;++u)(c=i[u])&&(n.push(e.call(c,c.__data__,u,i)),a.push(c));return new $c(n,a)}function Dle(e){return function(){return this.matches(e)}}function Ple(e){return function(t){return t.matches(e)}}var SJe=Array.prototype.find;function kJe(e){return function(){return SJe.call(this.children,e)}}function BJe(){return this.firstElementChild}function jJe(e){return this.select(e==null?BJe:kJe(typeof e=="function"?e:Ple(e)))}var TJe=Array.prototype.filter;function IJe(){return Array.from(this.children)}function FJe(e){return function(){return TJe.call(this.children,e)}}function OJe(e){return this.selectAll(e==null?IJe:FJe(typeof e=="function"?e:Ple(e)))}function DJe(e){typeof e!="function"&&(e=Dle(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&o.push(c);return new $c(n,this._parents)}function Rle(e){return new Array(e.length)}function PJe(){return new $c(this._enter||this._groups.map(Rle),this._parents)}function dS(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}dS.prototype={constructor:dS,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function RJe(e){return function(){return e}}function LJe(e,t,r,n,a,s){for(var i=0,o,c=t.length,u=s.length;i<u;++i)(o=t[i])?(o.__data__=s[i],n[i]=o):r[i]=new dS(e,s[i]);for(;i<c;++i)(o=t[i])&&(a[i]=o)}function MJe(e,t,r,n,a,s,i){var o,c,u=new Map,d=t.length,f=s.length,h=new Array(d),p;for(o=0;o<d;++o)(c=t[o])&&(h[o]=p=i.call(c,c.__data__,o,t)+"",u.has(p)?a[o]=c:u.set(p,c));for(o=0;o<f;++o)p=i.call(e,s[o],o,s)+"",(c=u.get(p))?(n[o]=c,c.__data__=s[o],u.delete(p)):r[o]=new dS(e,s[o]);for(o=0;o<d;++o)(c=t[o])&&u.get(h[o])===c&&(a[o]=c)}function UJe(e){return e.__data__}function QJe(e,t){if(!arguments.length)return Array.from(this,UJe);var r=t?MJe:LJe,n=this._parents,a=this._groups;typeof e!="function"&&(e=RJe(e));for(var s=a.length,i=new Array(s),o=new Array(s),c=new Array(s),u=0;u<s;++u){var d=n[u],f=a[u],h=f.length,p=HJe(e.call(d,d&&d.__data__,u,n)),g=p.length,x=o[u]=new Array(g),b=i[u]=new Array(g),y=c[u]=new Array(h);r(d,f,x,b,y,p,t);for(var w=0,_=0,B,k;w<g;++w)if(B=x[w]){for(w>=_&&(_=w+1);!(k=b[_])&&++_<g;);B._next=k||null}}return i=new $c(i,n),i._enter=o,i._exit=c,i}function HJe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function VJe(){return new $c(this._exit||this._groups.map(Rle),this._parents)}function zJe(e,t,r){var n=this.enter(),a=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?s.remove():r(s),n&&a?n.merge(a).order():a}function $Je(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,a=r.length,s=n.length,i=Math.min(a,s),o=new Array(a),c=0;c<i;++c)for(var u=r[c],d=n[c],f=u.length,h=o[c]=new Array(f),p,g=0;g<f;++g)(p=u[g]||d[g])&&(h[g]=p);for(;c<a;++c)o[c]=r[c];return new $c(o,this._parents)}function GJe(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],a=n.length-1,s=n[a],i;--a>=0;)(i=n[a])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function KJe(e){e||(e=qJe);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var r=this._groups,n=r.length,a=new Array(n),s=0;s<n;++s){for(var i=r[s],o=i.length,c=a[s]=new Array(o),u,d=0;d<o;++d)(u=i[d])&&(c[d]=u);c.sort(t)}return new $c(a,this._parents).order()}function qJe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function WJe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function XJe(){return Array.from(this)}function YJe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length;a<s;++a){var i=n[a];if(i)return i}return null}function JJe(){let e=0;for(const t of this)++e;return e}function ZJe(){return!this.node()}function eZe(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],s=0,i=a.length,o;s<i;++s)(o=a[s])&&e.call(o,o.__data__,s,a);return this}function tZe(e){return function(){this.removeAttribute(e)}}function rZe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function nZe(e,t){return function(){this.setAttribute(e,t)}}function aZe(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function sZe(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function iZe(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function oZe(e,t){var r=kk(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?rZe:tZe:typeof t=="function"?r.local?iZe:sZe:r.local?aZe:nZe)(r,t))}function Lle(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function lZe(e){return function(){this.style.removeProperty(e)}}function cZe(e,t,r){return function(){this.style.setProperty(e,t,r)}}function uZe(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function dZe(e,t,r){return arguments.length>1?this.each((t==null?lZe:typeof t=="function"?uZe:cZe)(e,t,r??"")):b1(this.node(),e)}function b1(e,t){return e.style.getPropertyValue(t)||Lle(e).getComputedStyle(e,null).getPropertyValue(t)}function AZe(e){return function(){delete this[e]}}function fZe(e,t){return function(){this[e]=t}}function hZe(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function mZe(e,t){return arguments.length>1?this.each((t==null?AZe:typeof t=="function"?hZe:fZe)(e,t)):this.node()[e]}function Mle(e){return e.trim().split(/^|\s+/)}function HL(e){return e.classList||new Ule(e)}function Ule(e){this._node=e,this._names=Mle(e.getAttribute("class")||"")}Ule.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Qle(e,t){for(var r=HL(e),n=-1,a=t.length;++n<a;)r.add(t[n])}function Hle(e,t){for(var r=HL(e),n=-1,a=t.length;++n<a;)r.remove(t[n])}function pZe(e){return function(){Qle(this,e)}}function gZe(e){return function(){Hle(this,e)}}function xZe(e,t){return function(){(t.apply(this,arguments)?Qle:Hle)(this,e)}}function vZe(e,t){var r=Mle(e+"");if(arguments.length<2){for(var n=HL(this.node()),a=-1,s=r.length;++a<s;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?xZe:t?pZe:gZe)(r,t))}function bZe(){this.textContent=""}function yZe(e){return function(){this.textContent=e}}function wZe(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function EZe(e){return arguments.length?this.each(e==null?bZe:(typeof e=="function"?wZe:yZe)(e)):this.node().textContent}function CZe(){this.innerHTML=""}function _Ze(e){return function(){this.innerHTML=e}}function NZe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function SZe(e){return arguments.length?this.each(e==null?CZe:(typeof e=="function"?NZe:_Ze)(e)):this.node().innerHTML}function kZe(){this.nextSibling&&this.parentNode.appendChild(this)}function BZe(){return this.each(kZe)}function jZe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function TZe(){return this.each(jZe)}function IZe(e){var t=typeof e=="function"?e:Fle(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function FZe(){return null}function OZe(e,t){var r=typeof e=="function"?e:Fle(e),n=t==null?FZe:typeof t=="function"?t:QL(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function DZe(){var e=this.parentNode;e&&e.removeChild(this)}function PZe(){return this.each(DZe)}function RZe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function LZe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function MZe(e){return this.select(e?LZe:RZe)}function UZe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function QZe(e){return function(t){e.call(this,t,this.__data__)}}function HZe(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function VZe(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,a=t.length,s;r<a;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function zZe(e,t,r){return function(){var n=this.__on,a,s=QZe(t);if(n){for(var i=0,o=n.length;i<o;++i)if((a=n[i]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=r),a.value=t;return}}this.addEventListener(e.type,s,r),a={type:e.type,name:e.name,value:t,listener:s,options:r},n?n.push(a):this.__on=[a]}}function $Ze(e,t,r){var n=HZe(e+""),a,s=n.length,i;if(arguments.length<2){var o=this.node().__on;if(o){for(var c=0,u=o.length,d;c<u;++c)for(a=0,d=o[c];a<s;++a)if((i=n[a]).type===d.type&&i.name===d.name)return d.value}return}for(o=t?zZe:VZe,a=0;a<s;++a)this.each(o(n[a],t,r));return this}function Vle(e,t,r){var n=Lle(e),a=n.CustomEvent;typeof a=="function"?a=new a(t,r):(a=n.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function GZe(e,t){return function(){return Vle(this,e,t)}}function KZe(e,t){return function(){return Vle(this,e,t.apply(this,arguments))}}function qZe(e,t){return this.each((typeof t=="function"?KZe:GZe)(e,t))}function*WZe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length,i;a<s;++a)(i=n[a])&&(yield i)}var zle=[null];function $c(e,t){this._groups=e,this._parents=t}function uE(){return new $c([[document.documentElement]],zle)}function XZe(){return this}$c.prototype=uE.prototype={constructor:$c,select:wJe,selectAll:NJe,selectChild:jJe,selectChildren:OJe,filter:DJe,data:QJe,enter:PJe,exit:VJe,join:zJe,merge:$Je,selection:XZe,order:GJe,sort:KJe,call:WJe,nodes:XJe,node:YJe,size:JJe,empty:ZJe,each:eZe,attr:oZe,style:dZe,property:mZe,classed:vZe,text:EZe,html:SZe,raise:BZe,lower:TZe,append:IZe,insert:OZe,remove:PZe,clone:MZe,datum:UZe,on:$Ze,dispatch:qZe,[Symbol.iterator]:WZe};function ju(e){return typeof e=="string"?new $c([[document.querySelector(e)]],[document.documentElement]):new $c([[e]],zle)}function YZe(e){let t;for(;t=e.sourceEvent;)e=t;return e}function TA(e,t){if(e=YZe(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const JZe={passive:!1},A2={capture:!0,passive:!1};function uI(e){e.stopImmediatePropagation()}function Fv(e){e.preventDefault(),e.stopImmediatePropagation()}function $le(e){var t=e.document.documentElement,r=ju(e).on("dragstart.drag",Fv,A2);"onselectstart"in t?r.on("selectstart.drag",Fv,A2):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Gle(e,t){var r=e.document.documentElement,n=ju(e).on("dragstart.drag",null);t&&(n.on("click.drag",Fv,A2),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const i_=e=>()=>e;function AO(e,{sourceEvent:t,subject:r,target:n,identifier:a,active:s,x:i,y:o,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}AO.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function ZZe(e){return!e.ctrlKey&&!e.button}function eet(){return this.parentNode}function tet(e,t){return t??{x:e.x,y:e.y}}function ret(){return navigator.maxTouchPoints||"ontouchstart"in this}function net(){var e=ZZe,t=eet,r=tet,n=ret,a={},s=Sk("start","drag","end"),i=0,o,c,u,d,f=0;function h(B){B.on("mousedown.drag",p).filter(n).on("touchstart.drag",b).on("touchmove.drag",y,JZe).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(B,k){if(!(d||!e.call(this,B,k))){var I=_(this,t.call(this,B,k),B,k,"mouse");I&&(ju(B.view).on("mousemove.drag",g,A2).on("mouseup.drag",x,A2),$le(B.view),uI(B),u=!1,o=B.clientX,c=B.clientY,I("start",B))}}function g(B){if(Fv(B),!u){var k=B.clientX-o,I=B.clientY-c;u=k*k+I*I>f}a.mouse("drag",B)}function x(B){ju(B.view).on("mousemove.drag mouseup.drag",null),Gle(B.view,u),Fv(B),a.mouse("end",B)}function b(B,k){if(e.call(this,B,k)){var I=B.changedTouches,E=t.call(this,B,k),N=I.length,j,R;for(j=0;j<N;++j)(R=_(this,E,B,k,I[j].identifier,I[j]))&&(uI(B),R("start",B,I[j]))}}function y(B){var k=B.changedTouches,I=k.length,E,N;for(E=0;E<I;++E)(N=a[k[E].identifier])&&(Fv(B),N("drag",B,k[E]))}function w(B){var k=B.changedTouches,I=k.length,E,N;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),E=0;E<I;++E)(N=a[k[E].identifier])&&(uI(B),N("end",B,k[E]))}function _(B,k,I,E,N,j){var R=s.copy(),D=TA(j||I,k),O,L,M;if((M=r.call(B,new AO("beforestart",{sourceEvent:I,target:h,identifier:N,active:i,x:D[0],y:D[1],dx:0,dy:0,dispatch:R}),E))!=null)return O=M.x-D[0]||0,L=M.y-D[1]||0,function J(V,K,z){var G=D,Y;switch(V){case"start":a[N]=J,Y=i++;break;case"end":delete a[N],--i;case"drag":D=TA(z||K,k),Y=i;break}R.call(V,B,new AO(V,{sourceEvent:K,subject:M,target:h,identifier:N,active:Y,x:D[0]+O,y:D[1]+L,dx:D[0]-G[0],dy:D[1]-G[1],dispatch:R}),E)}}return h.filter=function(B){return arguments.length?(e=typeof B=="function"?B:i_(!!B),h):e},h.container=function(B){return arguments.length?(t=typeof B=="function"?B:i_(B),h):t},h.subject=function(B){return arguments.length?(r=typeof B=="function"?B:i_(B),h):r},h.touchable=function(B){return arguments.length?(n=typeof B=="function"?B:i_(!!B),h):n},h.on=function(){var B=s.on.apply(s,arguments);return B===s?h:B},h.clickDistance=function(B){return arguments.length?(f=(B=+B)*B,h):Math.sqrt(f)},h}var y1=0,Dy=0,cy=0,Kle=1e3,AS,Py,fS=0,Eg=0,Bk=0,f2=typeof performance=="object"&&performance.now?performance:Date,qle=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function VL(){return Eg||(qle(aet),Eg=f2.now()+Bk)}function aet(){Eg=0}function hS(){this._call=this._time=this._next=null}hS.prototype=Wle.prototype={constructor:hS,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?VL():+r)+(t==null?0:+t),!this._next&&Py!==this&&(Py?Py._next=this:AS=this,Py=this),this._call=e,this._time=r,fO()},stop:function(){this._call&&(this._call=null,this._time=1/0,fO())}};function Wle(e,t,r){var n=new hS;return n.restart(e,t,r),n}function set(){VL(),++y1;for(var e=AS,t;e;)(t=Eg-e._time)>=0&&e._call.call(void 0,t),e=e._next;--y1}function _q(){Eg=(fS=f2.now())+Bk,y1=Dy=0;try{set()}finally{y1=0,oet(),Eg=0}}function iet(){var e=f2.now(),t=e-fS;t>Kle&&(Bk-=t,fS=e)}function oet(){for(var e,t=AS,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:AS=r);Py=e,fO(n)}function fO(e){if(!y1){Dy&&(Dy=clearTimeout(Dy));var t=e-Eg;t>24?(e<1/0&&(Dy=setTimeout(_q,e-f2.now()-Bk)),cy&&(cy=clearInterval(cy))):(cy||(fS=f2.now(),cy=setInterval(iet,Kle)),y1=1,qle(_q))}}function Nq(e,t,r){var n=new hS;return t=t==null?0:+t,n.restart(a=>{n.stop(),e(a+t)},t,r),n}var cet=Sk("start","end","cancel","interrupt"),uet=[],Xle=0,Sq=1,hO=2,c5=3,kq=4,mO=5,u5=6;function jk(e,t,r,n,a,s){var i=e.__transition;if(!i)e.__transition={};else if(r in i)return;det(e,r,{name:t,index:n,group:a,on:cet,tween:uet,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Xle})}function zL(e,t){var r=$d(e,t);if(r.state>Xle)throw new Error("too late; already scheduled");return r}function of(e,t){var r=$d(e,t);if(r.state>c5)throw new Error("too late; already running");return r}function $d(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function det(e,t,r){var n=e.__transition,a;n[t]=r,r.timer=Wle(s,0,r.time);function s(u){r.state=Sq,r.timer.restart(i,r.delay,r.time),r.delay<=u&&i(u-r.delay)}function i(u){var d,f,h,p;if(r.state!==Sq)return c();for(d in n)if(p=n[d],p.name===r.name){if(p.state===c5)return Nq(i);p.state===kq?(p.state=u5,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete n[d]):+d<t&&(p.state=u5,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete n[d])}if(Nq(function(){r.state===c5&&(r.state=kq,r.timer.restart(o,r.delay,r.time),o(u))}),r.state=hO,r.on.call("start",e,e.__data__,r.index,r.group),r.state===hO){for(r.state=c5,a=new Array(h=r.tween.length),d=0,f=-1;d<h;++d)(p=r.tween[d].value.call(e,e.__data__,r.index,r.group))&&(a[++f]=p);a.length=f+1}}function o(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=mO,1),f=-1,h=a.length;++f<h;)a[f].call(e,d);r.state===mO&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=u5,r.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function d5(e,t){var r=e.__transition,n,a,s=!0,i;if(r){t=t==null?null:t+"";for(i in r){if((n=r[i]).name!==t){s=!1;continue}a=n.state>hO&&n.state<mO,n.state=u5,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[i]}s&&delete e.__transition}}function Aet(e){return this.each(function(){d5(this,e)})}function fet(e,t){var r,n;return function(){var a=of(this,e),s=a.tween;if(s!==r){n=r=s;for(var i=0,o=n.length;i<o;++i)if(n[i].name===t){n=n.slice(),n.splice(i,1);break}}a.tween=n}}function het(e,t,r){var n,a;if(typeof r!="function")throw new Error;return function(){var s=of(this,e),i=s.tween;if(i!==n){a=(n=i).slice();for(var o={name:t,value:r},c=0,u=a.length;c<u;++c)if(a[c].name===t){a[c]=o;break}c===u&&a.push(o)}s.tween=a}}function met(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=$d(this.node(),r).tween,a=0,s=n.length,i;a<s;++a)if((i=n[a]).name===e)return i.value;return null}return this.each((t==null?fet:het)(r,e,t))}function $L(e,t,r){var n=e._id;return e.each(function(){var a=of(this,n);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return $d(a,n).value[t]}}function Yle(e,t){var r;return(typeof t=="number"?yd:t instanceof hg?_N:(r=hg(t))?(t=r,_N):Are)(e,t)}function pet(e){return function(){this.removeAttribute(e)}}function get(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xet(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttribute(e);return i===a?null:i===n?s:s=t(n=i,r)}}function vet(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===n?s:s=t(n=i,r)}}function bet(e,t,r){var n,a,s;return function(){var i,o=r(this),c;return o==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=o+"",i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,o)))}}function yet(e,t,r){var n,a,s;return function(){var i,o=r(this),c;return o==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=o+"",i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,o)))}}function wet(e,t){var r=kk(e),n=r==="transform"?h4e:Yle;return this.attrTween(e,typeof t=="function"?(r.local?yet:bet)(r,n,$L(this,"attr."+e,t)):t==null?(r.local?get:pet)(r):(r.local?vet:xet)(r,n,t))}function Eet(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function Cet(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function _et(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&Cet(e,s)),r}return a._value=t,a}function Net(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&Eet(e,s)),r}return a._value=t,a}function ket(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=kk(e);return this.tween(r,(n.local?_et:Net)(n,t))}function Bet(e,t){return function(){zL(this,e).delay=+t.apply(this,arguments)}}function jet(e,t){return t=+t,function(){zL(this,e).delay=t}}function Tet(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Bet:jet)(t,e)):$d(this.node(),t).delay}function Iet(e,t){return function(){of(this,e).duration=+t.apply(this,arguments)}}function Fet(e,t){return t=+t,function(){of(this,e).duration=t}}function Oet(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Iet:Fet)(t,e)):$d(this.node(),t).duration}function Det(e,t){if(typeof t!="function")throw new Error;return function(){of(this,e).ease=t}}function Pet(e){var t=this._id;return arguments.length?this.each(Det(t,e)):$d(this.node(),t).ease}function Ret(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;of(this,e).ease=r}}function Let(e){if(typeof e!="function")throw new Error;return this.each(Ret(this._id,e))}function Met(e){typeof e!="function"&&(e=Dle(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&o.push(c);return new Nh(n,this._parents,this._name,this._id)}function Uet(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,a=r.length,s=Math.min(n,a),i=new Array(n),o=0;o<s;++o)for(var c=t[o],u=r[o],d=c.length,f=i[o]=new Array(d),h,p=0;p<d;++p)(h=c[p]||u[p])&&(f[p]=h);for(;o<n;++o)i[o]=t[o];return new Nh(i,this._parents,this._name,this._id)}function Qet(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function Het(e,t,r){var n,a,s=Qet(t)?zL:of;return function(){var i=s(this,e),o=i.on;o!==n&&(a=(n=o).copy()).on(t,r),i.on=a}}function Vet(e,t){var r=this._id;return arguments.length<2?$d(this.node(),r).on.on(e):this.each(Het(r,e,t))}function zet(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function $et(){return this.on("end.remove",zet(this._id))}function Get(e){var t=this._name,r=this._id;typeof e!="function"&&(e=QL(e));for(var n=this._groups,a=n.length,s=new Array(a),i=0;i<a;++i)for(var o=n[i],c=o.length,u=s[i]=new Array(c),d,f,h=0;h<c;++h)(d=o[h])&&(f=e.call(d,d.__data__,h,o))&&("__data__"in d&&(f.__data__=d.__data__),u[h]=f,jk(u[h],t,r,h,u,$d(d,r)));return new Nh(s,this._parents,t,r)}function Ket(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Ole(e));for(var n=this._groups,a=n.length,s=[],i=[],o=0;o<a;++o)for(var c=n[o],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var h=e.call(d,d.__data__,f,c),p,g=$d(d,r),x=0,b=h.length;x<b;++x)(p=h[x])&&jk(p,t,r,x,h,g);s.push(h),i.push(d)}return new Nh(s,i,t,r)}var qet=uE.prototype.constructor;function Wet(){return new qet(this._groups,this._parents)}function Xet(e,t){var r,n,a;return function(){var s=b1(this,e),i=(this.style.removeProperty(e),b1(this,e));return s===i?null:s===r&&i===n?a:a=t(r=s,n=i)}}function Jle(e){return function(){this.style.removeProperty(e)}}function Yet(e,t,r){var n,a=r+"",s;return function(){var i=b1(this,e);return i===a?null:i===n?s:s=t(n=i,r)}}function Jet(e,t,r){var n,a,s;return function(){var i=b1(this,e),o=r(this),c=o+"";return o==null&&(c=o=(this.style.removeProperty(e),b1(this,e))),i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,o))}}function Zet(e,t){var r,n,a,s="style."+t,i="end."+s,o;return function(){var c=of(this,e),u=c.on,d=c.value[s]==null?o||(o=Jle(t)):void 0;(u!==r||a!==d)&&(n=(r=u).copy()).on(i,a=d),c.on=n}}function ett(e,t,r){var n=(e+="")=="transform"?f4e:Yle;return t==null?this.styleTween(e,Xet(e,n)).on("end.style."+e,Jle(e)):typeof t=="function"?this.styleTween(e,Jet(e,n,$L(this,"style."+e,t))).each(Zet(this._id,e)):this.styleTween(e,Yet(e,n,t),r).on("end.style."+e,null)}function ttt(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function rtt(e,t,r){var n,a;function s(){var i=t.apply(this,arguments);return i!==a&&(n=(a=i)&&ttt(e,i,r)),n}return s._value=t,s}function ntt(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,rtt(e,t,r??""))}function att(e){return function(){this.textContent=e}}function stt(e){return function(){var t=e(this);this.textContent=t??""}}function itt(e){return this.tween("text",typeof e=="function"?stt($L(this,"text",e)):att(e==null?"":e+""))}function ott(e){return function(t){this.textContent=e.call(this,t)}}function ltt(e){var t,r;function n(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&ott(a)),t}return n._value=e,n}function ctt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,ltt(e))}function utt(){for(var e=this._name,t=this._id,r=Zle(),n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,c,u=0;u<o;++u)if(c=i[u]){var d=$d(c,t);jk(c,e,r,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Nh(n,this._parents,e,r)}function dtt(){var e,t,r=this,n=r._id,a=r.size();return new Promise(function(s,i){var o={value:i},c={value:function(){--a===0&&s()}};r.each(function(){var u=of(this,n),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(c)),u.on=t}),a===0&&s()})}var Att=0;function Nh(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function Zle(){return++Att}var Uf=uE.prototype;Nh.prototype={constructor:Nh,select:Get,selectAll:Ket,selectChild:Uf.selectChild,selectChildren:Uf.selectChildren,filter:Met,merge:Uet,selection:Wet,transition:utt,call:Uf.call,nodes:Uf.nodes,node:Uf.node,size:Uf.size,empty:Uf.empty,each:Uf.each,on:Vet,attr:wet,attrTween:ket,style:ett,styleTween:ntt,text:itt,textTween:ctt,remove:$et,tween:met,delay:Tet,duration:Oet,ease:Pet,easeVarying:Let,end:dtt,[Symbol.iterator]:Uf[Symbol.iterator]};function ftt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var htt={time:null,delay:0,duration:250,ease:ftt};function mtt(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function ptt(e){var t,r;e instanceof Nh?(t=e._id,e=e._name):(t=Zle(),(r=htt).time=VL(),e=e==null?null:e+"");for(var n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,c,u=0;u<o;++u)(c=i[u])&&jk(c,e,t,u,i,r||mtt(c,t));return new Nh(n,this._parents,e,t)}uE.prototype.interrupt=Aet;uE.prototype.transition=ptt;const o_=e=>()=>e;function gtt(e,{sourceEvent:t,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function rh(e,t,r){this.k=e,this.x=t,this.y=r}rh.prototype={constructor:rh,scale:function(e){return e===1?this:new rh(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new rh(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var im=new rh(1,0,0);rh.prototype;function dI(e){e.stopImmediatePropagation()}function uy(e){e.preventDefault(),e.stopImmediatePropagation()}function xtt(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function vtt(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Bq(){return this.__zoom||im}function btt(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ytt(){return navigator.maxTouchPoints||"ontouchstart"in this}function wtt(e,t,r){var n=e.invertX(t[0][0])-r[0][0],a=e.invertX(t[1][0])-r[1][0],s=e.invertY(t[0][1])-r[0][1],i=e.invertY(t[1][1])-r[1][1];return e.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function Ett(){var e=xtt,t=vtt,r=wtt,n=btt,a=ytt,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],o=250,c=x4e,u=Sk("start","zoom","end"),d,f,h,p=500,g=150,x=0,b=10;function y(M){M.property("__zoom",Bq).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",j).on("dblclick.zoom",R).filter(a).on("touchstart.zoom",D).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(M,J,V,K){var z=M.selection?M.selection():M;z.property("__zoom",Bq),M!==z?k(M,J,V,K):z.interrupt().each(function(){I(this,arguments).event(K).start().zoom(null,typeof J=="function"?J.apply(this,arguments):J).end()})},y.scaleBy=function(M,J,V,K){y.scaleTo(M,function(){var z=this.__zoom.k,G=typeof J=="function"?J.apply(this,arguments):J;return z*G},V,K)},y.scaleTo=function(M,J,V,K){y.transform(M,function(){var z=t.apply(this,arguments),G=this.__zoom,Y=V==null?B(z):typeof V=="function"?V.apply(this,arguments):V,ee=G.invert(Y),P=typeof J=="function"?J.apply(this,arguments):J;return r(_(w(G,P),Y,ee),z,i)},V,K)},y.translateBy=function(M,J,V,K){y.transform(M,function(){return r(this.__zoom.translate(typeof J=="function"?J.apply(this,arguments):J,typeof V=="function"?V.apply(this,arguments):V),t.apply(this,arguments),i)},null,K)},y.translateTo=function(M,J,V,K,z){y.transform(M,function(){var G=t.apply(this,arguments),Y=this.__zoom,ee=K==null?B(G):typeof K=="function"?K.apply(this,arguments):K;return r(im.translate(ee[0],ee[1]).scale(Y.k).translate(typeof J=="function"?-J.apply(this,arguments):-J,typeof V=="function"?-V.apply(this,arguments):-V),G,i)},K,z)};function w(M,J){return J=Math.max(s[0],Math.min(s[1],J)),J===M.k?M:new rh(J,M.x,M.y)}function _(M,J,V){var K=J[0]-V[0]*M.k,z=J[1]-V[1]*M.k;return K===M.x&&z===M.y?M:new rh(M.k,K,z)}function B(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function k(M,J,V,K){M.on("start.zoom",function(){I(this,arguments).event(K).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(K).end()}).tween("zoom",function(){var z=this,G=arguments,Y=I(z,G).event(K),ee=t.apply(z,G),P=V==null?B(ee):typeof V=="function"?V.apply(z,G):V,Q=Math.max(ee[1][0]-ee[0][0],ee[1][1]-ee[0][1]),X=z.__zoom,te=typeof J=="function"?J.apply(z,G):J,ae=c(X.invert(P).concat(Q/X.k),te.invert(P).concat(Q/te.k));return function(se){if(se===1)se=te;else{var oe=ae(se),ce=Q/oe[2];se=new rh(ce,P[0]-oe[0]*ce,P[1]-oe[1]*ce)}Y.zoom(null,se)}})}function I(M,J,V){return!V&&M.__zooming||new E(M,J)}function E(M,J){this.that=M,this.args=J,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,J),this.taps=0}E.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,J){return this.mouse&&M!=="mouse"&&(this.mouse[1]=J.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=J.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=J.invert(this.touch1[0])),this.that.__zoom=J,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var J=ju(this.that).datum();u.call(M,this.that,new gtt(M,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),J)}};function N(M,...J){if(!e.apply(this,arguments))return;var V=I(this,J).event(M),K=this.__zoom,z=Math.max(s[0],Math.min(s[1],K.k*Math.pow(2,n.apply(this,arguments)))),G=TA(M);if(V.wheel)(V.mouse[0][0]!==G[0]||V.mouse[0][1]!==G[1])&&(V.mouse[1]=K.invert(V.mouse[0]=G)),clearTimeout(V.wheel);else{if(K.k===z)return;V.mouse=[G,K.invert(G)],d5(this),V.start()}uy(M),V.wheel=setTimeout(Y,g),V.zoom("mouse",r(_(w(K,z),V.mouse[0],V.mouse[1]),V.extent,i));function Y(){V.wheel=null,V.end()}}function j(M,...J){if(h||!e.apply(this,arguments))return;var V=M.currentTarget,K=I(this,J,!0).event(M),z=ju(M.view).on("mousemove.zoom",P,!0).on("mouseup.zoom",Q,!0),G=TA(M,V),Y=M.clientX,ee=M.clientY;$le(M.view),dI(M),K.mouse=[G,this.__zoom.invert(G)],d5(this),K.start();function P(X){if(uy(X),!K.moved){var te=X.clientX-Y,ae=X.clientY-ee;K.moved=te*te+ae*ae>x}K.event(X).zoom("mouse",r(_(K.that.__zoom,K.mouse[0]=TA(X,V),K.mouse[1]),K.extent,i))}function Q(X){z.on("mousemove.zoom mouseup.zoom",null),Gle(X.view,K.moved),uy(X),K.event(X).end()}}function R(M,...J){if(e.apply(this,arguments)){var V=this.__zoom,K=TA(M.changedTouches?M.changedTouches[0]:M,this),z=V.invert(K),G=V.k*(M.shiftKey?.5:2),Y=r(_(w(V,G),K,z),t.apply(this,J),i);uy(M),o>0?ju(this).transition().duration(o).call(k,Y,K,M):ju(this).call(y.transform,Y,K,M)}}function D(M,...J){if(e.apply(this,arguments)){var V=M.touches,K=V.length,z=I(this,J,M.changedTouches.length===K).event(M),G,Y,ee,P;for(dI(M),Y=0;Y<K;++Y)ee=V[Y],P=TA(ee,this),P=[P,this.__zoom.invert(P),ee.identifier],z.touch0?!z.touch1&&z.touch0[2]!==P[2]&&(z.touch1=P,z.taps=0):(z.touch0=P,G=!0,z.taps=1+!!d);d&&(d=clearTimeout(d)),G&&(z.taps<2&&(f=P[0],d=setTimeout(function(){d=null},p)),d5(this),z.start())}}function O(M,...J){if(this.__zooming){var V=I(this,J).event(M),K=M.changedTouches,z=K.length,G,Y,ee,P;for(uy(M),G=0;G<z;++G)Y=K[G],ee=TA(Y,this),V.touch0&&V.touch0[2]===Y.identifier?V.touch0[0]=ee:V.touch1&&V.touch1[2]===Y.identifier&&(V.touch1[0]=ee);if(Y=V.that.__zoom,V.touch1){var Q=V.touch0[0],X=V.touch0[1],te=V.touch1[0],ae=V.touch1[1],se=(se=te[0]-Q[0])*se+(se=te[1]-Q[1])*se,oe=(oe=ae[0]-X[0])*oe+(oe=ae[1]-X[1])*oe;Y=w(Y,Math.sqrt(se/oe)),ee=[(Q[0]+te[0])/2,(Q[1]+te[1])/2],P=[(X[0]+ae[0])/2,(X[1]+ae[1])/2]}else if(V.touch0)ee=V.touch0[0],P=V.touch0[1];else return;V.zoom("touch",r(_(Y,ee,P),V.extent,i))}}function L(M,...J){if(this.__zooming){var V=I(this,J).event(M),K=M.changedTouches,z=K.length,G,Y;for(dI(M),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),G=0;G<z;++G)Y=K[G],V.touch0&&V.touch0[2]===Y.identifier?delete V.touch0:V.touch1&&V.touch1[2]===Y.identifier&&delete V.touch1;if(V.touch1&&!V.touch0&&(V.touch0=V.touch1,delete V.touch1),V.touch0)V.touch0[1]=this.__zoom.invert(V.touch0[0]);else if(V.end(),V.taps===2&&(Y=TA(Y,this),Math.hypot(f[0]-Y[0],f[1]-Y[1])<b)){var ee=ju(this).on("dblclick.zoom");ee&&ee.apply(this,arguments)}}}return y.wheelDelta=function(M){return arguments.length?(n=typeof M=="function"?M:o_(+M),y):n},y.filter=function(M){return arguments.length?(e=typeof M=="function"?M:o_(!!M),y):e},y.touchable=function(M){return arguments.length?(a=typeof M=="function"?M:o_(!!M),y):a},y.extent=function(M){return arguments.length?(t=typeof M=="function"?M:o_([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),y):t},y.scaleExtent=function(M){return arguments.length?(s[0]=+M[0],s[1]=+M[1],y):[s[0],s[1]]},y.translateExtent=function(M){return arguments.length?(i[0][0]=+M[0][0],i[1][0]=+M[1][0],i[0][1]=+M[0][1],i[1][1]=+M[1][1],y):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},y.constrain=function(M){return arguments.length?(r=M,y):r},y.duration=function(M){return arguments.length?(o=+M,y):o},y.interpolate=function(M){return arguments.length?(c=M,y):c},y.on=function(){var M=u.on.apply(u,arguments);return M===u?y:M},y.clickDistance=function(M){return arguments.length?(x=(M=+M)*M,y):Math.sqrt(x)},y.tapDistance=function(M){return arguments.length?(b=+M,y):b},y}const Tk=S.createContext(null),Ctt=Tk.Provider,Sh={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},ece=Sh.error001();function As(e,t){const r=S.useContext(Tk);if(r===null)throw new Error(ece);return Ile(r,e,t)}const eo=()=>{const e=S.useContext(Tk);if(e===null)throw new Error(ece);return S.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},_tt=e=>e.userSelectionActive?"none":"all";function tce({position:e,children:t,className:r,style:n,...a}){const s=As(_tt),i=`${e}`.split("-");return at.createElement("div",{className:_l(["react-flow__panel",r,...i]),style:{...n,pointerEvents:s},...a},t)}function Ntt({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:at.createElement(tce,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},at.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Stt=({x:e,y:t,label:r,labelStyle:n={},labelShowBg:a=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:o=2,children:c,className:u,...d})=>{const f=S.useRef(null),[h,p]=S.useState({x:0,y:0,width:0,height:0}),g=_l(["react-flow__edge-textwrapper",u]);return S.useEffect(()=>{if(f.current){const x=f.current.getBBox();p({x:x.x,y:x.y,width:x.width,height:x.height})}},[r]),typeof r>"u"||!r?null:at.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:g,visibility:h.width?"visible":"hidden",...d},a&&at.createElement("rect",{width:h.width+2*i[0],x:-i[0],y:-i[1],height:h.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:o,ry:o}),at.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:f,style:n},r),c)};var ktt=S.memo(Stt);const GL=e=>({width:e.offsetWidth,height:e.offsetHeight}),w1=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),KL=(e={x:0,y:0},t)=>({x:w1(e.x,t[0][0],t[1][0]),y:w1(e.y,t[0][1],t[1][1])}),jq=(e,t,r)=>e<t?w1(Math.abs(e-t),1,50)/50:e>r?-w1(Math.abs(e-r),1,50)/50:0,rce=(e,t)=>{const r=jq(e.x,35,t.width-35)*20,n=jq(e.y,35,t.height-35)*20;return[r,n]},nce=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Btt=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),qL=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),jtt=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),Tq=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),pO=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},Ttt=e=>Ou(e.width)&&Ou(e.height)&&Ou(e.x)&&Ou(e.y),Ou=e=>!isNaN(e)&&isFinite(e),Ss=Symbol.for("internals"),ace=["Enter"," ","Escape"],Itt=(e,t)=>{},Ftt=e=>"nativeEvent"in e;function gO(e){var a,s;const t=Ftt(e)?e.nativeEvent:e,r=((s=(a=t.composedPath)==null?void 0:a.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const sce=e=>"clientX"in e,om=(e,t)=>{var s,i;const r=sce(e),n=r?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,a=r?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:n-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},mS=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},dE=({id:e,path:t,labelX:r,labelY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p=20})=>at.createElement(at.Fragment,null,at.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:h}),p&&at.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),a&&Ou(r)&&Ou(n)?at.createElement(ktt,{x:r,y:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u}):null);dE.displayName="BaseEdge";function dy(e,t,r){return r===void 0?r:n=>{const a=t().edges.find(s=>s.id===e);a&&r(n,{...a})}}function ice({sourceX:e,sourceY:t,targetX:r,targetY:n}){const a=Math.abs(r-e)/2,s=r<e?r+a:r-a,i=Math.abs(n-t)/2,o=n<t?n+i:n-i;return[s,o,a,i]}function oce({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:a,sourceControlY:s,targetControlX:i,targetControlY:o}){const c=e*.125+a*.375+i*.375+r*.125,u=t*.125+s*.375+o*.375+n*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var Cg;(function(e){e.Strict="strict",e.Loose="loose"})(Cg||(Cg={}));var Mp;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Mp||(Mp={}));var h2;(function(e){e.Partial="partial",e.Full="full"})(h2||(h2={}));var U0;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(U0||(U0={}));var pS;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(pS||(pS={}));var _r;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(_r||(_r={}));function Iq({pos:e,x1:t,y1:r,x2:n,y2:a}){return e===_r.Left||e===_r.Right?[.5*(t+n),r]:[t,.5*(r+a)]}function lce({sourceX:e,sourceY:t,sourcePosition:r=_r.Bottom,targetX:n,targetY:a,targetPosition:s=_r.Top}){const[i,o]=Iq({pos:r,x1:e,y1:t,x2:n,y2:a}),[c,u]=Iq({pos:s,x1:n,y1:a,x2:e,y2:t}),[d,f,h,p]=oce({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:i,sourceControlY:o,targetControlX:c,targetControlY:u});return[`M${e},${t} C${i},${o} ${c},${u} ${n},${a}`,d,f,h,p]}const WL=S.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=_r.Bottom,targetPosition:s=_r.Top,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:x})=>{const[b,y,w]=lce({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s});return at.createElement(dE,{path:b,labelX:y,labelY:w,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:x})});WL.displayName="SimpleBezierEdge";const Fq={[_r.Left]:{x:-1,y:0},[_r.Right]:{x:1,y:0},[_r.Top]:{x:0,y:-1},[_r.Bottom]:{x:0,y:1}},Ott=({source:e,sourcePosition:t=_r.Bottom,target:r})=>t===_r.Left||t===_r.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},Oq=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Dtt({source:e,sourcePosition:t=_r.Bottom,target:r,targetPosition:n=_r.Top,center:a,offset:s}){const i=Fq[t],o=Fq[n],c={x:e.x+i.x*s,y:e.y+i.y*s},u={x:r.x+o.x*s,y:r.y+o.y*s},d=Ott({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",h=d[f];let p=[],g,x;const b={x:0,y:0},y={x:0,y:0},[w,_,B,k]=ice({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(i[f]*o[f]===-1){g=a.x??w,x=a.y??_;const E=[{x:g,y:c.y},{x:g,y:u.y}],N=[{x:c.x,y:x},{x:u.x,y:x}];i[f]===h?p=f==="x"?E:N:p=f==="x"?N:E}else{const E=[{x:c.x,y:u.y}],N=[{x:u.x,y:c.y}];if(f==="x"?p=i.x===h?N:E:p=i.y===h?E:N,t===n){const L=Math.abs(e[f]-r[f]);if(L<=s){const M=Math.min(s-1,s-L);i[f]===h?b[f]=(c[f]>e[f]?-1:1)*M:y[f]=(u[f]>r[f]?-1:1)*M}}if(t!==n){const L=f==="x"?"y":"x",M=i[f]===o[L],J=c[L]>u[L],V=c[L]<u[L];(i[f]===1&&(!M&&J||M&&V)||i[f]!==1&&(!M&&V||M&&J))&&(p=f==="x"?E:N)}const j={x:c.x+b.x,y:c.y+b.y},R={x:u.x+y.x,y:u.y+y.y},D=Math.max(Math.abs(j.x-p[0].x),Math.abs(R.x-p[0].x)),O=Math.max(Math.abs(j.y-p[0].y),Math.abs(R.y-p[0].y));D>=O?(g=(j.x+R.x)/2,x=p[0].y):(g=p[0].x,x=(j.y+R.y)/2)}return[[e,{x:c.x+b.x,y:c.y+b.y},...p,{x:u.x+y.x,y:u.y+y.y},r],g,x,B,k]}function Ptt(e,t,r,n){const a=Math.min(Oq(e,t)/2,Oq(t,r)/2,n),{x:s,y:i}=t;if(e.x===s&&s===r.x||e.y===i&&i===r.y)return`L${s} ${i}`;if(e.y===i){const u=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${s+a*u},${i}Q ${s},${i} ${s},${i+a*d}`}const o=e.x<r.x?1:-1,c=e.y<r.y?-1:1;return`L ${s},${i+a*c}Q ${s},${i} ${s+a*o},${i}`}function xO({sourceX:e,sourceY:t,sourcePosition:r=_r.Bottom,targetX:n,targetY:a,targetPosition:s=_r.Top,borderRadius:i=5,centerX:o,centerY:c,offset:u=20}){const[d,f,h,p,g]=Dtt({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:a},targetPosition:s,center:{x:o,y:c},offset:u});return[d.reduce((b,y,w)=>{let _="";return w>0&&w<d.length-1?_=Ptt(d[w-1],y,d[w+1],i):_=`${w===0?"M":"L"}${y.x} ${y.y}`,b+=_,b},""),f,h,p,g]}const Ik=S.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=_r.Bottom,targetPosition:h=_r.Top,markerEnd:p,markerStart:g,pathOptions:x,interactionWidth:b})=>{const[y,w,_]=xO({sourceX:e,sourceY:t,sourcePosition:f,targetX:r,targetY:n,targetPosition:h,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset});return at.createElement(dE,{path:y,labelX:w,labelY:_,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:p,markerStart:g,interactionWidth:b})});Ik.displayName="SmoothStepEdge";const XL=S.memo(e=>{var t;return at.createElement(Ik,{...e,pathOptions:S.useMemo(()=>{var r;return{borderRadius:0,offset:(r=e.pathOptions)==null?void 0:r.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});XL.displayName="StepEdge";function Rtt({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[a,s,i,o]=ice({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,a,s,i,o]}const YL=S.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p})=>{const[g,x,b]=Rtt({sourceX:e,sourceY:t,targetX:r,targetY:n});return at.createElement(dE,{path:g,labelX:x,labelY:b,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p})});YL.displayName="StraightEdge";function l_(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Dq({pos:e,x1:t,y1:r,x2:n,y2:a,c:s}){switch(e){case _r.Left:return[t-l_(t-n,s),r];case _r.Right:return[t+l_(n-t,s),r];case _r.Top:return[t,r-l_(r-a,s)];case _r.Bottom:return[t,r+l_(a-r,s)]}}function cce({sourceX:e,sourceY:t,sourcePosition:r=_r.Bottom,targetX:n,targetY:a,targetPosition:s=_r.Top,curvature:i=.25}){const[o,c]=Dq({pos:r,x1:e,y1:t,x2:n,y2:a,c:i}),[u,d]=Dq({pos:s,x1:n,y1:a,x2:e,y2:t,c:i}),[f,h,p,g]=oce({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:o,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${o},${c} ${u},${d} ${n},${a}`,f,h,p,g]}const gS=S.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=_r.Bottom,targetPosition:s=_r.Top,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,pathOptions:x,interactionWidth:b})=>{const[y,w,_]=cce({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s,curvature:x==null?void 0:x.curvature});return at.createElement(dE,{path:y,labelX:w,labelY:_,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:b})});gS.displayName="BezierEdge";const JL=S.createContext(null),Ltt=JL.Provider;JL.Consumer;const Mtt=()=>S.useContext(JL),Utt=e=>"id"in e&&"source"in e&&"target"in e,Qtt=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`reactflow__edge-${e}${t||""}-${r}${n||""}`,vO=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`,Htt=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),Vtt=(e,t)=>{if(!e.source||!e.target)return t;let r;return Utt(e)?r={...e}:r={...e,id:Qtt(e)},Htt(r,t)?t:t.concat(r)},bO=({x:e,y:t},[r,n,a],s,[i,o])=>{const c={x:(e-r)/a,y:(t-n)/a};return s?{x:i*Math.round(c.x/i),y:o*Math.round(c.y/o)}:c},uce=({x:e,y:t},[r,n,a])=>({x:e*a+r,y:t*a+n}),Ov=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*t[0],n=(e.height??0)*t[1],a={x:e.position.x-r,y:e.position.y-n};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-n}:a}},ZL=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,a)=>{const{x:s,y:i}=Ov(a,t).positionAbsolute;return Btt(n,qL({x:s,y:i,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return jtt(r)},dce=(e,t,[r,n,a]=[0,0,1],s=!1,i=!1,o=[0,0])=>{const c={x:(t.x-r)/a,y:(t.y-n)/a,width:t.width/a,height:t.height/a},u=[];return e.forEach(d=>{const{width:f,height:h,selectable:p=!0,hidden:g=!1}=d;if(i&&!p||g)return!1;const{positionAbsolute:x}=Ov(d,o),b={x:x.x,y:x.y,width:f||0,height:h||0},y=pO(c,b),w=typeof f>"u"||typeof h>"u"||f===null||h===null,_=s&&y>0,B=(f||0)*(h||0);(w||_||y>=B||d.dragging)&&u.push(d)}),u},Ace=(e,t)=>{const r=e.map(n=>n.id);return t.filter(n=>r.includes(n.source)||r.includes(n.target))},fce=(e,t,r,n,a,s=.1)=>{const i=t/(e.width*(1+s)),o=r/(e.height*(1+s)),c=Math.min(i,o),u=w1(c,n,a),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*u,p=r/2-f*u;return{x:h,y:p,zoom:u}},Ep=(e,t=0)=>e.transition().duration(t);function Pq(e,t,r,n){return(t[r]||[]).reduce((a,s)=>{var i,o;return`${e.id}-${s.id}-${r}`!==n&&a.push({id:s.id||null,type:r,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((o=e.positionAbsolute)==null?void 0:o.y)??0)+s.y+s.height/2}),a},[])}function ztt(e,t,r,n,a,s){const{x:i,y:o}=om(e),u=t.elementsFromPoint(i,o).find(g=>g.classList.contains("react-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const x=eM(void 0,u),b=u.getAttribute("data-handleid"),y=s({nodeId:g,id:b,type:x});if(y){const w=a.find(_=>_.nodeId===g&&_.type===x&&_.id===b);return{handle:{id:b,type:x,nodeId:g,x:(w==null?void 0:w.x)||r.x,y:(w==null?void 0:w.y)||r.y},validHandleResult:y}}}}let d=[],f=1/0;if(a.forEach(g=>{const x=Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);if(x<=n){const b=s(g);x<=f&&(x<f?d=[{handle:g,validHandleResult:b}]:x===f&&d.push({handle:g,validHandleResult:b}),f=x)}}),!d.length)return{handle:null,validHandleResult:hce()};if(d.length===1)return d[0];const h=d.some(({validHandleResult:g})=>g.isValid),p=d.some(({handle:g})=>g.type==="target");return d.find(({handle:g,validHandleResult:x})=>p?g.type==="target":h?x.isValid:!0)||d[0]}const $tt={source:null,target:null,sourceHandle:null,targetHandle:null},hce=()=>({handleDomNode:null,isValid:!1,connection:$tt,endHandle:null});function mce(e,t,r,n,a,s,i){const o=a==="target",c=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...hce(),handleDomNode:c};if(c){const d=eM(void 0,c),f=c.getAttribute("data-nodeid"),h=c.getAttribute("data-handleid"),p=c.classList.contains("connectable"),g=c.classList.contains("connectableend"),x={source:o?f:r,sourceHandle:o?h:n,target:o?r:f,targetHandle:o?n:h};u.connection=x,p&&g&&(t===Cg.Strict?o&&d==="source"||!o&&d==="target":f!==r||h!==n)&&(u.endHandle={nodeId:f,handleId:h,type:d},u.isValid=s(x))}return u}function Gtt({nodes:e,nodeId:t,handleId:r,handleType:n}){return e.reduce((a,s)=>{if(s[Ss]){const{handleBounds:i}=s[Ss];let o=[],c=[];i&&(o=Pq(s,i,"source",`${t}-${r}-${n}`),c=Pq(s,i,"target",`${t}-${r}-${n}`)),a.push(...o,...c)}return a},[])}function eM(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function AI(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Ktt(e,t){let r=null;return t?r="valid":e&&!t&&(r="invalid"),r}function pce({event:e,handleId:t,nodeId:r,onConnect:n,isTarget:a,getState:s,setState:i,isValidConnection:o,edgeUpdaterType:c,onReconnectEnd:u}){const d=nce(e.target),{connectionMode:f,domNode:h,autoPanOnConnect:p,connectionRadius:g,onConnectStart:x,panBy:b,getNodes:y,cancelConnection:w}=s();let _=0,B;const{x:k,y:I}=om(e),E=d==null?void 0:d.elementFromPoint(k,I),N=eM(c,E),j=h==null?void 0:h.getBoundingClientRect();if(!j||!N)return;let R,D=om(e,j),O=!1,L=null,M=!1,J=null;const V=Gtt({nodes:y(),nodeId:r,handleId:t,handleType:N}),K=()=>{if(!p)return;const[Y,ee]=rce(D,j);b({x:Y,y:ee}),_=requestAnimationFrame(K)};i({connectionPosition:D,connectionStatus:null,connectionNodeId:r,connectionHandleId:t,connectionHandleType:N,connectionStartHandle:{nodeId:r,handleId:t,type:N},connectionEndHandle:null}),x==null||x(e,{nodeId:r,handleId:t,handleType:N});function z(Y){const{transform:ee}=s();D=om(Y,j);const{handle:P,validHandleResult:Q}=ztt(Y,d,bO(D,ee,!1,[1,1]),g,V,X=>mce(X,f,r,t,a?"target":"source",o,d));if(B=P,O||(K(),O=!0),J=Q.handleDomNode,L=Q.connection,M=Q.isValid,i({connectionPosition:B&&M?uce({x:B.x,y:B.y},ee):D,connectionStatus:Ktt(!!B,M),connectionEndHandle:Q.endHandle}),!B&&!M&&!J)return AI(R);L.source!==L.target&&J&&(AI(R),R=J,J.classList.add("connecting","react-flow__handle-connecting"),J.classList.toggle("valid",M),J.classList.toggle("react-flow__handle-valid",M))}function G(Y){var ee,P;(B||J)&&L&&M&&(n==null||n(L)),(P=(ee=s()).onConnectEnd)==null||P.call(ee,Y),c&&(u==null||u(Y)),AI(R),w(),cancelAnimationFrame(_),O=!1,M=!1,L=null,J=null,d.removeEventListener("mousemove",z),d.removeEventListener("mouseup",G),d.removeEventListener("touchmove",z),d.removeEventListener("touchend",G)}d.addEventListener("mousemove",z),d.addEventListener("mouseup",G),d.addEventListener("touchmove",z),d.addEventListener("touchend",G)}const Rq=()=>!0,qtt=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Wtt=(e,t,r)=>n=>{const{connectionStartHandle:a,connectionEndHandle:s,connectionClickStartHandle:i}=n;return{connecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===r||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===r,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===r}},gce=S.forwardRef(({type:e="source",position:t=_r.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:i,onConnect:o,children:c,className:u,onMouseDown:d,onTouchStart:f,...h},p)=>{var j,R;const g=i||null,x=e==="target",b=eo(),y=Mtt(),{connectOnClick:w,noPanClassName:_}=As(qtt,sl),{connecting:B,clickConnecting:k}=As(Wtt(y,g,e),sl);y||(R=(j=b.getState()).onError)==null||R.call(j,"010",Sh.error010());const I=D=>{const{defaultEdgeOptions:O,onConnect:L,hasDefaultEdges:M}=b.getState(),J={...O,...D};if(M){const{edges:V,setEdges:K}=b.getState();K(Vtt(J,V))}L==null||L(J),o==null||o(J)},E=D=>{if(!y)return;const O=sce(D);a&&(O&&D.button===0||!O)&&pce({event:D,handleId:g,nodeId:y,onConnect:I,isTarget:x,getState:b.getState,setState:b.setState,isValidConnection:r||b.getState().isValidConnection||Rq}),O?d==null||d(D):f==null||f(D)},N=D=>{const{onClickConnectStart:O,onClickConnectEnd:L,connectionClickStartHandle:M,connectionMode:J,isValidConnection:V}=b.getState();if(!y||!M&&!a)return;if(!M){O==null||O(D,{nodeId:y,handleId:g,handleType:e}),b.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:g}});return}const K=nce(D.target),z=r||V||Rq,{connection:G,isValid:Y}=mce({nodeId:y,id:g,type:e},J,M.nodeId,M.handleId||null,M.type,z,K);Y&&I(G),L==null||L(D),b.setState({connectionClickStartHandle:null})};return at.createElement("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":t,"data-id":`${y}-${g}-${e}`,className:_l(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",_,u,{source:!x,target:x,connectable:n,connectablestart:a,connectableend:s,connecting:k,connectionindicator:n&&(a&&!B||s&&B)}]),onMouseDown:E,onTouchStart:E,onClick:w?N:void 0,ref:p,...h},c)});gce.displayName="Handle";var E1=S.memo(gce);const xce=({data:e,isConnectable:t,targetPosition:r=_r.Top,sourcePosition:n=_r.Bottom})=>at.createElement(at.Fragment,null,at.createElement(E1,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,at.createElement(E1,{type:"source",position:n,isConnectable:t}));xce.displayName="DefaultNode";var yO=S.memo(xce);const vce=({data:e,isConnectable:t,sourcePosition:r=_r.Bottom})=>at.createElement(at.Fragment,null,e==null?void 0:e.label,at.createElement(E1,{type:"source",position:r,isConnectable:t}));vce.displayName="InputNode";var bce=S.memo(vce);const yce=({data:e,isConnectable:t,targetPosition:r=_r.Top})=>at.createElement(at.Fragment,null,at.createElement(E1,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label);yce.displayName="OutputNode";var wce=S.memo(yce);const tM=()=>null;tM.displayName="GroupNode";const Xtt=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),c_=e=>e.id;function Ytt(e,t){return sl(e.selectedNodes.map(c_),t.selectedNodes.map(c_))&&sl(e.selectedEdges.map(c_),t.selectedEdges.map(c_))}const Ece=S.memo(({onSelectionChange:e})=>{const t=eo(),{selectedNodes:r,selectedEdges:n}=As(Xtt,Ytt);return S.useEffect(()=>{const a={nodes:r,edges:n};e==null||e(a),t.getState().onSelectionChange.forEach(s=>s(a))},[r,n,e]),null});Ece.displayName="SelectionListener";const Jtt=e=>!!e.onSelectionChange;function Ztt({onSelectionChange:e}){const t=As(Jtt);return e||t?at.createElement(Ece,{onSelectionChange:e}):null}const ert=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Tx(e,t){S.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function En(e,t,r){S.useEffect(()=>{typeof t<"u"&&r({[e]:t})},[t])}const trt=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:a,onConnectStart:s,onConnectEnd:i,onClickConnectStart:o,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:h,edgesUpdatable:p,elevateNodesOnSelect:g,minZoom:x,maxZoom:b,nodeExtent:y,onNodesChange:w,onEdgesChange:_,elementsSelectable:B,connectionMode:k,snapGrid:I,snapToGrid:E,translateExtent:N,connectOnClick:j,defaultEdgeOptions:R,fitView:D,fitViewOptions:O,onNodesDelete:L,onEdgesDelete:M,onNodeDrag:J,onNodeDragStart:V,onNodeDragStop:K,onSelectionDrag:z,onSelectionDragStart:G,onSelectionDragStop:Y,noPanClassName:ee,nodeOrigin:P,rfId:Q,autoPanOnConnect:X,autoPanOnNodeDrag:te,onError:ae,connectionRadius:se,isValidConnection:oe,nodeDragThreshold:ce})=>{const{setNodes:me,setEdges:ke,setDefaultNodesAndEdges:ne,setMinZoom:_e,setMaxZoom:De,setTranslateExtent:Ne,setNodeExtent:fe,reset:Ie}=As(ert,sl),Me=eo();return S.useEffect(()=>{const Xe=n==null?void 0:n.map(ye=>({...ye,...R}));return ne(r,Xe),()=>{Ie()}},[]),En("defaultEdgeOptions",R,Me.setState),En("connectionMode",k,Me.setState),En("onConnect",a,Me.setState),En("onConnectStart",s,Me.setState),En("onConnectEnd",i,Me.setState),En("onClickConnectStart",o,Me.setState),En("onClickConnectEnd",c,Me.setState),En("nodesDraggable",u,Me.setState),En("nodesConnectable",d,Me.setState),En("nodesFocusable",f,Me.setState),En("edgesFocusable",h,Me.setState),En("edgesUpdatable",p,Me.setState),En("elementsSelectable",B,Me.setState),En("elevateNodesOnSelect",g,Me.setState),En("snapToGrid",E,Me.setState),En("snapGrid",I,Me.setState),En("onNodesChange",w,Me.setState),En("onEdgesChange",_,Me.setState),En("connectOnClick",j,Me.setState),En("fitViewOnInit",D,Me.setState),En("fitViewOnInitOptions",O,Me.setState),En("onNodesDelete",L,Me.setState),En("onEdgesDelete",M,Me.setState),En("onNodeDrag",J,Me.setState),En("onNodeDragStart",V,Me.setState),En("onNodeDragStop",K,Me.setState),En("onSelectionDrag",z,Me.setState),En("onSelectionDragStart",G,Me.setState),En("onSelectionDragStop",Y,Me.setState),En("noPanClassName",ee,Me.setState),En("nodeOrigin",P,Me.setState),En("rfId",Q,Me.setState),En("autoPanOnConnect",X,Me.setState),En("autoPanOnNodeDrag",te,Me.setState),En("onError",ae,Me.setState),En("connectionRadius",se,Me.setState),En("isValidConnection",oe,Me.setState),En("nodeDragThreshold",ce,Me.setState),Tx(e,me),Tx(t,ke),Tx(x,_e),Tx(b,De),Tx(N,Ne),Tx(y,fe),null},Lq={display:"none"},rrt={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Cce="react-flow__node-desc",_ce="react-flow__edge-desc",nrt="react-flow__aria-live",art=e=>e.ariaLiveMessage;function srt({rfId:e}){const t=As(art);return at.createElement("div",{id:`${nrt}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:rrt},t)}function irt({rfId:e,disableKeyboardA11y:t}){return at.createElement(at.Fragment,null,at.createElement("div",{id:`${Cce}-${e}`,style:Lq},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),at.createElement("div",{id:`${_ce}-${e}`,style:Lq},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&at.createElement(srt,{rfId:e}))}var m2=(e=null,t={actInsideInputWithModifier:!0})=>{const[r,n]=S.useState(!1),a=S.useRef(!1),s=S.useRef(new Set([])),[i,o]=S.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,h)=>f.concat(...h),[]);return[u,d]}return[[],[]]},[e]);return S.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=p=>{if(a.current=p.ctrlKey||p.metaKey||p.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&gO(p))return!1;const x=Uq(p.code,o);s.current.add(p[x]),Mq(i,s.current,!1)&&(p.preventDefault(),n(!0))},f=p=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&gO(p))return!1;const x=Uq(p.code,o);Mq(i,s.current,!0)?(n(!1),s.current.clear()):s.current.delete(p[x]),p.key==="Meta"&&s.current.clear(),a.current=!1},h=()=>{s.current.clear(),n(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",h),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",h)}}},[e,n]),r};function Mq(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(a=>t.has(a)))}function Uq(e,t){return t.includes(e)?"code":"key"}function Nce(e,t,r,n){var o,c;const a=e.parentNode||e.parentId;if(!a)return r;const s=t.get(a),i=Ov(s,n);return Nce(s,t,{x:(r.x??0)+i.x,y:(r.y??0)+i.y,z:(((o=s[Ss])==null?void 0:o.z)??0)>(r.z??0)?((c=s[Ss])==null?void 0:c.z)??0:r.z??0},n)}function Sce(e,t,r){e.forEach(n=>{var s;const a=n.parentNode||n.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||r!=null&&r[n.id]){const{x:i,y:o,z:c}=Nce(n,e,{...n.position,z:((s=n[Ss])==null?void 0:s.z)??0},t);n.positionAbsolute={x:i,y:o},n[Ss].z=c,r!=null&&r[n.id]&&(n[Ss].isParent=!0)}})}function fI(e,t,r,n){const a=new Map,s={},i=n?1e3:0;return e.forEach(o=>{var p;const c=(Ou(o.zIndex)?o.zIndex:0)+(o.selected?i:0),u=t.get(o.id),d={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},f=o.parentNode||o.parentId;f&&(s[f]=!0);const h=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==o.type;Object.defineProperty(d,Ss,{enumerable:!1,value:{handleBounds:h||(p=u==null?void 0:u[Ss])==null?void 0:p.handleBounds,z:c}}),a.set(o.id,d)}),Sce(a,r,s),a}function kce(e,t={}){const{getNodes:r,width:n,height:a,minZoom:s,maxZoom:i,d3Zoom:o,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),h=t.initial&&!u&&d;if(o&&c&&(h||!t.initial)){const g=r().filter(b=>{var w;const y=t.includeHiddenNodes?b.width&&b.height:!b.hidden;return(w=t.nodes)!=null&&w.length?y&&t.nodes.some(_=>_.id===b.id):y}),x=g.every(b=>b.width&&b.height);if(g.length>0&&x){const b=ZL(g,f),{x:y,y:w,zoom:_}=fce(b,n,a,t.minZoom??s,t.maxZoom??i,t.padding??.1),B=im.translate(y,w).scale(_);return typeof t.duration=="number"&&t.duration>0?o.transform(Ep(c,t.duration),B):o.transform(c,B),!0}}return!1}function ort(e,t){return e.forEach(r=>{const n=t.get(r.id);n&&t.set(n.id,{...n,[Ss]:n[Ss],selected:r.selected})}),new Map(t)}function lrt(e,t){return t.map(r=>{const n=e.find(a=>a.id===r.id);return n&&(r.selected=n.selected),r})}function u_({changedNodes:e,changedEdges:t,get:r,set:n}){const{nodeInternals:a,edges:s,onNodesChange:i,onEdgesChange:o,hasDefaultNodes:c,hasDefaultEdges:u}=r();e!=null&&e.length&&(c&&n({nodeInternals:ort(e,a)}),i==null||i(e)),t!=null&&t.length&&(u&&n({edges:lrt(t,s)}),o==null||o(t))}const Ix=()=>{},crt={zoomIn:Ix,zoomOut:Ix,zoomTo:Ix,getZoom:()=>1,setViewport:Ix,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Ix,fitBounds:Ix,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},urt=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),drt=()=>{const e=eo(),{d3Zoom:t,d3Selection:r}=As(urt,sl);return S.useMemo(()=>r&&t?{zoomIn:a=>t.scaleBy(Ep(r,a==null?void 0:a.duration),1.2),zoomOut:a=>t.scaleBy(Ep(r,a==null?void 0:a.duration),1/1.2),zoomTo:(a,s)=>t.scaleTo(Ep(r,s==null?void 0:s.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,s)=>{const[i,o,c]=e.getState().transform,u=im.translate(a.x??i,a.y??o).scale(a.zoom??c);t.transform(Ep(r,s==null?void 0:s.duration),u)},getViewport:()=>{const[a,s,i]=e.getState().transform;return{x:a,y:s,zoom:i}},fitView:a=>kce(e.getState,a),setCenter:(a,s,i)=>{const{width:o,height:c,maxZoom:u}=e.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,f=o/2-a*d,h=c/2-s*d,p=im.translate(f,h).scale(d);t.transform(Ep(r,i==null?void 0:i.duration),p)},fitBounds:(a,s)=>{const{width:i,height:o,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:h}=fce(a,i,o,c,u,(s==null?void 0:s.padding)??.1),p=im.translate(d,f).scale(h);t.transform(Ep(r,s==null?void 0:s.duration),p)},project:a=>{const{transform:s,snapToGrid:i,snapGrid:o}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),bO(a,s,i,o)},screenToFlowPosition:a=>{const{transform:s,snapToGrid:i,snapGrid:o,domNode:c}=e.getState();if(!c)return a;const{x:u,y:d}=c.getBoundingClientRect(),f={x:a.x-u,y:a.y-d};return bO(f,s,i,o)},flowToScreenPosition:a=>{const{transform:s,domNode:i}=e.getState();if(!i)return a;const{x:o,y:c}=i.getBoundingClientRect(),u=uce(a,s);return{x:u.x+o,y:u.y+c}},viewportInitialized:!0}:crt,[t,r])};function Fk(){const e=drt(),t=eo(),r=S.useCallback(()=>t.getState().getNodes().map(x=>({...x})),[]),n=S.useCallback(x=>t.getState().nodeInternals.get(x),[]),a=S.useCallback(()=>{const{edges:x=[]}=t.getState();return x.map(b=>({...b}))},[]),s=S.useCallback(x=>{const{edges:b=[]}=t.getState();return b.find(y=>y.id===x)},[]),i=S.useCallback(x=>{const{getNodes:b,setNodes:y,hasDefaultNodes:w,onNodesChange:_}=t.getState(),B=b(),k=typeof x=="function"?x(B):x;if(w)y(k);else if(_){const I=k.length===0?B.map(E=>({type:"remove",id:E.id})):k.map(E=>({item:E,type:"reset"}));_(I)}},[]),o=S.useCallback(x=>{const{edges:b=[],setEdges:y,hasDefaultEdges:w,onEdgesChange:_}=t.getState(),B=typeof x=="function"?x(b):x;if(w)y(B);else if(_){const k=B.length===0?b.map(I=>({type:"remove",id:I.id})):B.map(I=>({item:I,type:"reset"}));_(k)}},[]),c=S.useCallback(x=>{const b=Array.isArray(x)?x:[x],{getNodes:y,setNodes:w,hasDefaultNodes:_,onNodesChange:B}=t.getState();if(_){const I=[...y(),...b];w(I)}else if(B){const k=b.map(I=>({item:I,type:"add"}));B(k)}},[]),u=S.useCallback(x=>{const b=Array.isArray(x)?x:[x],{edges:y=[],setEdges:w,hasDefaultEdges:_,onEdgesChange:B}=t.getState();if(_)w([...y,...b]);else if(B){const k=b.map(I=>({item:I,type:"add"}));B(k)}},[]),d=S.useCallback(()=>{const{getNodes:x,edges:b=[],transform:y}=t.getState(),[w,_,B]=y;return{nodes:x().map(k=>({...k})),edges:b.map(k=>({...k})),viewport:{x:w,y:_,zoom:B}}},[]),f=S.useCallback(({nodes:x,edges:b})=>{const{nodeInternals:y,getNodes:w,edges:_,hasDefaultNodes:B,hasDefaultEdges:k,onNodesDelete:I,onEdgesDelete:E,onNodesChange:N,onEdgesChange:j}=t.getState(),R=(x||[]).map(J=>J.id),D=(b||[]).map(J=>J.id),O=w().reduce((J,V)=>{const K=V.parentNode||V.parentId,z=!R.includes(V.id)&&K&&J.find(Y=>Y.id===K);return(typeof V.deletable=="boolean"?V.deletable:!0)&&(R.includes(V.id)||z)&&J.push(V),J},[]),L=_.filter(J=>typeof J.deletable=="boolean"?J.deletable:!0),M=L.filter(J=>D.includes(J.id));if(O||M){const J=Ace(O,L),V=[...M,...J],K=V.reduce((z,G)=>(z.includes(G.id)||z.push(G.id),z),[]);if((k||B)&&(k&&t.setState({edges:_.filter(z=>!K.includes(z.id))}),B&&(O.forEach(z=>{y.delete(z.id)}),t.setState({nodeInternals:new Map(y)}))),K.length>0&&(E==null||E(V),j&&j(K.map(z=>({id:z,type:"remove"})))),O.length>0&&(I==null||I(O),N)){const z=O.map(G=>({id:G.id,type:"remove"}));N(z)}}},[]),h=S.useCallback(x=>{const b=Ttt(x),y=b?null:t.getState().nodeInternals.get(x.id);return!b&&!y?[null,null,b]:[b?x:Tq(y),y,b]},[]),p=S.useCallback((x,b=!0,y)=>{const[w,_,B]=h(x);return w?(y||t.getState().getNodes()).filter(k=>{if(!B&&(k.id===_.id||!k.positionAbsolute))return!1;const I=Tq(k),E=pO(I,w);return b&&E>0||E>=w.width*w.height}):[]},[]),g=S.useCallback((x,b,y=!0)=>{const[w]=h(x);if(!w)return!1;const _=pO(w,b);return y&&_>0||_>=w.width*w.height},[]);return S.useMemo(()=>({...e,getNodes:r,getNode:n,getEdges:a,getEdge:s,setNodes:i,setEdges:o,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:p,isNodeIntersecting:g}),[e,r,n,a,s,i,o,c,u,d,f,p,g])}const Art={actInsideInputWithModifier:!1};var frt=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const r=eo(),{deleteElements:n}=Fk(),a=m2(e,Art),s=m2(t);S.useEffect(()=>{if(a){const{edges:i,getNodes:o}=r.getState(),c=o().filter(d=>d.selected),u=i.filter(d=>d.selected);n({nodes:c,edges:u}),r.setState({nodesSelectionActive:!1})}},[a]),S.useEffect(()=>{r.setState({multiSelectionActive:s})},[s])};function hrt(e){const t=eo();S.useEffect(()=>{let r;const n=()=>{var s,i;if(!e.current)return;const a=GL(e.current);(a.height===0||a.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",Sh.error004())),t.setState({width:a.width||500,height:a.height||500})};return n(),window.addEventListener("resize",n),e.current&&(r=new ResizeObserver(()=>n()),r.observe(e.current)),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}},[])}const rM={position:"absolute",width:"100%",height:"100%",top:0,left:0},mrt=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,d_=e=>({x:e.x,y:e.y,zoom:e.k}),Fx=(e,t)=>e.target.closest(`.${t}`),Qq=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Hq=e=>{const t=e.ctrlKey&&mS()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},prt=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),grt=({onMove:e,onMoveStart:t,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:c=Mp.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:h,translateExtent:p,minZoom:g,maxZoom:x,zoomActivationKeyCode:b,preventScrolling:y=!0,children:w,noWheelClassName:_,noPanClassName:B})=>{const k=S.useRef(),I=eo(),E=S.useRef(!1),N=S.useRef(!1),j=S.useRef(null),R=S.useRef({x:0,y:0,zoom:0}),{d3Zoom:D,d3Selection:O,d3ZoomHandler:L,userSelectionActive:M}=As(prt,sl),J=m2(b),V=S.useRef(0),K=S.useRef(!1),z=S.useRef();return hrt(j),S.useEffect(()=>{if(j.current){const G=j.current.getBoundingClientRect(),Y=Ett().scaleExtent([g,x]).translateExtent(p),ee=ju(j.current).call(Y),P=im.translate(h.x,h.y).scale(w1(h.zoom,g,x)),Q=[[0,0],[G.width,G.height]],X=Y.constrain()(P,Q,p);Y.transform(ee,X),Y.wheelDelta(Hq),I.setState({d3Zoom:Y,d3Selection:ee,d3ZoomHandler:ee.on("wheel.zoom"),transform:[X.x,X.y,X.k],domNode:j.current.closest(".react-flow")})}},[]),S.useEffect(()=>{O&&D&&(i&&!J&&!M?O.on("wheel.zoom",G=>{if(Fx(G,_))return!1;G.preventDefault(),G.stopImmediatePropagation();const Y=O.property("__zoom").k||1;if(G.ctrlKey&&s){const oe=TA(G),ce=Hq(G),me=Y*Math.pow(2,ce);D.scaleTo(O,me,oe,G);return}const ee=G.deltaMode===1?20:1;let P=c===Mp.Vertical?0:G.deltaX*ee,Q=c===Mp.Horizontal?0:G.deltaY*ee;!mS()&&G.shiftKey&&c!==Mp.Vertical&&(P=G.deltaY*ee,Q=0),D.translateBy(O,-(P/Y)*o,-(Q/Y)*o,{internal:!0});const X=d_(O.property("__zoom")),{onViewportChangeStart:te,onViewportChange:ae,onViewportChangeEnd:se}=I.getState();clearTimeout(z.current),K.current||(K.current=!0,t==null||t(G,X),te==null||te(X)),K.current&&(e==null||e(G,X),ae==null||ae(X),z.current=setTimeout(()=>{r==null||r(G,X),se==null||se(X),K.current=!1},150))},{passive:!1}):typeof L<"u"&&O.on("wheel.zoom",function(G,Y){if(!y&&G.type==="wheel"&&!G.ctrlKey||Fx(G,_))return null;G.preventDefault(),L.call(this,G,Y)},{passive:!1}))},[M,i,c,O,D,L,J,s,y,_,t,e,r]),S.useEffect(()=>{D&&D.on("start",G=>{var P,Q;if(!G.sourceEvent||G.sourceEvent.internal)return null;V.current=(P=G.sourceEvent)==null?void 0:P.button;const{onViewportChangeStart:Y}=I.getState(),ee=d_(G.transform);E.current=!0,R.current=ee,((Q=G.sourceEvent)==null?void 0:Q.type)==="mousedown"&&I.setState({paneDragging:!0}),Y==null||Y(ee),t==null||t(G.sourceEvent,ee)})},[D,t]),S.useEffect(()=>{D&&(M&&!E.current?D.on("zoom",null):M||D.on("zoom",G=>{var ee;const{onViewportChange:Y}=I.getState();if(I.setState({transform:[G.transform.x,G.transform.y,G.transform.k]}),N.current=!!(n&&Qq(f,V.current??0)),(e||Y)&&!((ee=G.sourceEvent)!=null&&ee.internal)){const P=d_(G.transform);Y==null||Y(P),e==null||e(G.sourceEvent,P)}}))},[M,D,e,f,n]),S.useEffect(()=>{D&&D.on("end",G=>{if(!G.sourceEvent||G.sourceEvent.internal)return null;const{onViewportChangeEnd:Y}=I.getState();if(E.current=!1,I.setState({paneDragging:!1}),n&&Qq(f,V.current??0)&&!N.current&&n(G.sourceEvent),N.current=!1,(r||Y)&&mrt(R.current,G.transform)){const ee=d_(G.transform);R.current=ee,clearTimeout(k.current),k.current=setTimeout(()=>{Y==null||Y(ee),r==null||r(G.sourceEvent,ee)},i?150:0)}})},[D,i,f,r,n]),S.useEffect(()=>{D&&D.filter(G=>{const Y=J||a,ee=s&&G.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&G.button===1&&G.type==="mousedown"&&(Fx(G,"react-flow__node")||Fx(G,"react-flow__edge")))return!0;if(!f&&!Y&&!i&&!u&&!s||M||!u&&G.type==="dblclick"||Fx(G,_)&&G.type==="wheel"||Fx(G,B)&&(G.type!=="wheel"||i&&G.type==="wheel"&&!J)||!s&&G.ctrlKey&&G.type==="wheel"||!Y&&!i&&!ee&&G.type==="wheel"||!f&&(G.type==="mousedown"||G.type==="touchstart")||Array.isArray(f)&&!f.includes(G.button)&&G.type==="mousedown")return!1;const P=Array.isArray(f)&&f.includes(G.button)||!G.button||G.button<=1;return(!G.ctrlKey||G.type==="wheel")&&P})},[M,D,a,s,i,u,f,d,J]),at.createElement("div",{className:"react-flow__renderer",ref:j,style:rM},w)},xrt=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function vrt(){const{userSelectionActive:e,userSelectionRect:t}=As(xrt,sl);return e&&t?at.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Vq(e,t){const r=t.parentNode||t.parentId,n=e.find(a=>a.id===r);if(n){const a=t.position.x+t.width-n.width,s=t.position.y+t.height-n.height;if(a>0||s>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),s>0&&(n.style.height+=s),t.position.x<0){const i=Math.abs(t.position.x);n.position.x=n.position.x-i,n.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);n.position.y=n.position.y-i,n.style.height+=i,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Bce(e,t){if(e.some(n=>n.type==="reset"))return e.filter(n=>n.type==="reset").map(n=>n.item);const r=e.filter(n=>n.type==="add").map(n=>n.item);return t.reduce((n,a)=>{const s=e.filter(o=>o.id===a.id);if(s.length===0)return n.push(a),n;const i={...a};for(const o of s)if(o)switch(o.type){case"select":{i.selected=o.selected;break}case"position":{typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&Vq(n,i);break}case"dimensions":{typeof o.dimensions<"u"&&(i.width=o.dimensions.width,i.height=o.dimensions.height),typeof o.updateStyle<"u"&&(i.style={...i.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(i.resizing=o.resizing),i.expandParent&&Vq(n,i);break}case"remove":return n}return n.push(i),n},r)}function jce(e,t){return Bce(e,t)}function brt(e,t){return Bce(e,t)}const F0=(e,t)=>({id:e,type:"select",selected:t});function uv(e,t){return e.reduce((r,n)=>{const a=t.includes(n.id);return!n.selected&&a?(n.selected=!0,r.push(F0(n.id,!0))):n.selected&&!a&&(n.selected=!1,r.push(F0(n.id,!1))),r},[])}const hI=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},yrt=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Tce=S.memo(({isSelecting:e,selectionMode:t=h2.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const h=S.useRef(null),p=eo(),g=S.useRef(0),x=S.useRef(0),b=S.useRef(),{userSelectionActive:y,elementsSelectable:w,dragging:_}=As(yrt,sl),B=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,x.current=0},k=L=>{s==null||s(L),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},I=L=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){L.preventDefault();return}i==null||i(L)},E=o?L=>o(L):void 0,N=L=>{const{resetSelectedElements:M,domNode:J}=p.getState();if(b.current=J==null?void 0:J.getBoundingClientRect(),!w||!e||L.button!==0||L.target!==h.current||!b.current)return;const{x:V,y:K}=om(L,b.current);M(),p.setState({userSelectionRect:{width:0,height:0,startX:V,startY:K,x:V,y:K}}),n==null||n(L)},j=L=>{const{userSelectionRect:M,nodeInternals:J,edges:V,transform:K,onNodesChange:z,onEdgesChange:G,nodeOrigin:Y,getNodes:ee}=p.getState();if(!e||!b.current||!M)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const P=om(L,b.current),Q=M.startX??0,X=M.startY??0,te={...M,x:P.x<Q?P.x:Q,y:P.y<X?P.y:X,width:Math.abs(P.x-Q),height:Math.abs(P.y-X)},ae=ee(),se=dce(J,te,K,t===h2.Partial,!0,Y),oe=Ace(se,V).map(me=>me.id),ce=se.map(me=>me.id);if(g.current!==ce.length){g.current=ce.length;const me=uv(ae,ce);me.length&&(z==null||z(me))}if(x.current!==oe.length){x.current=oe.length;const me=uv(V,oe);me.length&&(G==null||G(me))}p.setState({userSelectionRect:te})},R=L=>{if(L.button!==0)return;const{userSelectionRect:M}=p.getState();!y&&M&&L.target===h.current&&(k==null||k(L)),p.setState({nodesSelectionActive:g.current>0}),B(),a==null||a(L)},D=L=>{y&&(p.setState({nodesSelectionActive:g.current>0}),a==null||a(L)),B()},O=w&&(e||y);return at.createElement("div",{className:_l(["react-flow__pane",{dragging:_,selection:e}]),onClick:O?void 0:hI(k,h),onContextMenu:hI(I,h),onWheel:hI(E,h),onMouseEnter:O?void 0:c,onMouseDown:O?N:void 0,onMouseMove:O?j:u,onMouseUp:O?R:void 0,onMouseLeave:O?D:d,ref:h,style:rM},f,at.createElement(vrt,null))});Tce.displayName="Pane";function Ice(e,t){const r=e.parentNode||e.parentId;if(!r)return!1;const n=t.get(r);return n?n.selected?!0:Ice(n,t):!1}function zq(e,t,r){let n=e;do{if(n!=null&&n.matches(t))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function wrt(e,t,r,n){return Array.from(e.values()).filter(a=>(a.selected||a.id===n)&&(!a.parentNode||a.parentId||!Ice(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var s,i;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((s=a.positionAbsolute)==null?void 0:s.x)??0),y:r.y-(((i=a.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function Ert(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Fce(e,t,r,n,a=[0,0],s){const i=Ert(e,e.extent||n);let o=i;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=r.get(c),{x:h,y:p}=Ov(f,a).positionAbsolute;o=f&&Ou(h)&&Ou(p)&&Ou(f.width)&&Ou(f.height)?[[h+e.width*a[0],p+e.height*a[1]],[h+f.width-e.width+e.width*a[0],p+f.height-e.height+e.height*a[1]]]:o}else s==null||s("005",Sh.error005()),o=i;else if(e.extent&&c&&e.extent!=="parent"){const f=r.get(c),{x:h,y:p}=Ov(f,a).positionAbsolute;o=[[e.extent[0][0]+h,e.extent[0][1]+p],[e.extent[1][0]+h,e.extent[1][1]+p]]}let u={x:0,y:0};if(c){const f=r.get(c);u=Ov(f,a).positionAbsolute}const d=o&&o!=="parent"?KL(t,o):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function mI({nodeId:e,dragItems:t,nodeInternals:r}){const n=t.map(a=>({...r.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?n.find(a=>a.id===e):n[0],n]}const $q=(e,t,r,n)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const s=Array.from(a),i=t.getBoundingClientRect(),o={x:i.width*n[0],y:i.height*n[1]};return s.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-i.left-o.x)/r,y:(u.top-i.top-o.y)/r,...GL(c)}})};function Ay(e,t,r){return r===void 0?r:n=>{const a=t().nodeInternals.get(e);a&&r(n,{...a})}}function wO({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:o,onError:c}=t.getState(),u=o.get(e);if(!u){c==null||c("012",Sh.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&i)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):a([e])}function Crt(){const e=eo();return S.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:a,snapToGrid:s}=e.getState(),i=r.touches?r.touches[0].clientX:r.clientX,o=r.touches?r.touches[0].clientY:r.clientY,c={x:(i-n[0])/n[2],y:(o-n[1])/n[2]};return{xSnapped:s?a[0]*Math.round(c.x/a[0]):c.x,ySnapped:s?a[1]*Math.round(c.y/a[1]):c.y,...c}},[])}function pI(e){return(t,r,n)=>e==null?void 0:e(t,n)}function Oce({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:a,isSelectable:s,selectNodesOnDrag:i}){const o=eo(),[c,u]=S.useState(!1),d=S.useRef([]),f=S.useRef({x:null,y:null}),h=S.useRef(0),p=S.useRef(null),g=S.useRef({x:0,y:0}),x=S.useRef(null),b=S.useRef(!1),y=S.useRef(!1),w=S.useRef(!1),_=Crt();return S.useEffect(()=>{if(e!=null&&e.current){const B=ju(e.current),k=({x:N,y:j})=>{const{nodeInternals:R,onNodeDrag:D,onSelectionDrag:O,updateNodePositions:L,nodeExtent:M,snapGrid:J,snapToGrid:V,nodeOrigin:K,onError:z}=o.getState();f.current={x:N,y:j};let G=!1,Y={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&M){const P=ZL(d.current,K);Y=qL(P)}if(d.current=d.current.map(P=>{const Q={x:N-P.distance.x,y:j-P.distance.y};V&&(Q.x=J[0]*Math.round(Q.x/J[0]),Q.y=J[1]*Math.round(Q.y/J[1]));const X=[[M[0][0],M[0][1]],[M[1][0],M[1][1]]];d.current.length>1&&M&&!P.extent&&(X[0][0]=P.positionAbsolute.x-Y.x+M[0][0],X[1][0]=P.positionAbsolute.x+(P.width??0)-Y.x2+M[1][0],X[0][1]=P.positionAbsolute.y-Y.y+M[0][1],X[1][1]=P.positionAbsolute.y+(P.height??0)-Y.y2+M[1][1]);const te=Fce(P,Q,R,X,K,z);return G=G||P.position.x!==te.position.x||P.position.y!==te.position.y,P.position=te.position,P.positionAbsolute=te.positionAbsolute,P}),!G)return;L(d.current,!0,!0),u(!0);const ee=a?D:pI(O);if(ee&&x.current){const[P,Q]=mI({nodeId:a,dragItems:d.current,nodeInternals:R});ee(x.current,P,Q)}},I=()=>{if(!p.current)return;const[N,j]=rce(g.current,p.current);if(N!==0||j!==0){const{transform:R,panBy:D}=o.getState();f.current.x=(f.current.x??0)-N/R[2],f.current.y=(f.current.y??0)-j/R[2],D({x:N,y:j})&&k(f.current)}h.current=requestAnimationFrame(I)},E=N=>{var K;const{nodeInternals:j,multiSelectionActive:R,nodesDraggable:D,unselectNodesAndEdges:O,onNodeDragStart:L,onSelectionDragStart:M}=o.getState();y.current=!0;const J=a?L:pI(M);(!i||!s)&&!R&&a&&((K=j.get(a))!=null&&K.selected||O()),a&&s&&i&&wO({id:a,store:o,nodeRef:e});const V=_(N);if(f.current=V,d.current=wrt(j,D,V,a),J&&d.current){const[z,G]=mI({nodeId:a,dragItems:d.current,nodeInternals:j});J(N.sourceEvent,z,G)}};if(t)B.on(".drag",null);else{const N=net().on("start",j=>{const{domNode:R,nodeDragThreshold:D}=o.getState();D===0&&E(j),w.current=!1;const O=_(j);f.current=O,p.current=(R==null?void 0:R.getBoundingClientRect())||null,g.current=om(j.sourceEvent,p.current)}).on("drag",j=>{var L,M;const R=_(j),{autoPanOnNodeDrag:D,nodeDragThreshold:O}=o.getState();if(j.sourceEvent.type==="touchmove"&&j.sourceEvent.touches.length>1&&(w.current=!0),!w.current){if(!b.current&&y.current&&D&&(b.current=!0,I()),!y.current){const J=R.xSnapped-(((L=f==null?void 0:f.current)==null?void 0:L.x)??0),V=R.ySnapped-(((M=f==null?void 0:f.current)==null?void 0:M.y)??0);Math.sqrt(J*J+V*V)>O&&E(j)}(f.current.x!==R.xSnapped||f.current.y!==R.ySnapped)&&d.current&&y.current&&(x.current=j.sourceEvent,g.current=om(j.sourceEvent,p.current),k(R))}}).on("end",j=>{if(!(!y.current||w.current)&&(u(!1),b.current=!1,y.current=!1,cancelAnimationFrame(h.current),d.current)){const{updateNodePositions:R,nodeInternals:D,onNodeDragStop:O,onSelectionDragStop:L}=o.getState(),M=a?O:pI(L);if(R(d.current,!1,!1),M){const[J,V]=mI({nodeId:a,dragItems:d.current,nodeInternals:D});M(j.sourceEvent,J,V)}}}).filter(j=>{const R=j.target;return!j.button&&(!r||!zq(R,`.${r}`,e))&&(!n||zq(R,n,e))});return B.call(N),()=>{B.on(".drag",null)}}}},[e,t,r,n,s,o,a,i,_]),c}function Dce(){const e=eo();return S.useCallback(r=>{const{nodeInternals:n,nodeExtent:a,updateNodePositions:s,getNodes:i,snapToGrid:o,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=i().filter(w=>w.selected&&(w.draggable||d&&typeof w.draggable>"u")),h=o?c[0]:5,p=o?c[1]:5,g=r.isShiftPressed?4:1,x=r.x*h*g,b=r.y*p*g,y=f.map(w=>{if(w.positionAbsolute){const _={x:w.positionAbsolute.x+x,y:w.positionAbsolute.y+b};o&&(_.x=c[0]*Math.round(_.x/c[0]),_.y=c[1]*Math.round(_.y/c[1]));const{positionAbsolute:B,position:k}=Fce(w,_,n,a,void 0,u);w.position=k,w.positionAbsolute=B}return w});s(y,!0,!1)},[])}const Dv={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var fy=e=>{const t=({id:r,type:n,data:a,xPos:s,yPos:i,xPosOrigin:o,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:h,onMouseLeave:p,onContextMenu:g,onDoubleClick:x,style:b,className:y,isDraggable:w,isSelectable:_,isConnectable:B,isFocusable:k,selectNodesOnDrag:I,sourcePosition:E,targetPosition:N,hidden:j,resizeObserver:R,dragHandle:D,zIndex:O,isParent:L,noDragClassName:M,noPanClassName:J,initialized:V,disableKeyboardA11y:K,ariaLabel:z,rfId:G,hasHandleBounds:Y})=>{const ee=eo(),P=S.useRef(null),Q=S.useRef(null),X=S.useRef(E),te=S.useRef(N),ae=S.useRef(n),se=_||w||d||f||h||p,oe=Dce(),ce=Ay(r,ee.getState,f),me=Ay(r,ee.getState,h),ke=Ay(r,ee.getState,p),ne=Ay(r,ee.getState,g),_e=Ay(r,ee.getState,x),De=Ie=>{const{nodeDragThreshold:Me}=ee.getState();if(_&&(!I||!w||Me>0)&&wO({id:r,store:ee,nodeRef:P}),d){const Xe=ee.getState().nodeInternals.get(r);Xe&&d(Ie,{...Xe})}},Ne=Ie=>{if(!gO(Ie)&&!K)if(ace.includes(Ie.key)&&_){const Me=Ie.key==="Escape";wO({id:r,store:ee,unselect:Me,nodeRef:P})}else w&&u&&Object.prototype.hasOwnProperty.call(Dv,Ie.key)&&(ee.setState({ariaLiveMessage:`Moved selected node ${Ie.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),oe({x:Dv[Ie.key].x,y:Dv[Ie.key].y,isShiftPressed:Ie.shiftKey}))};S.useEffect(()=>()=>{Q.current&&(R==null||R.unobserve(Q.current),Q.current=null)},[]),S.useEffect(()=>{if(P.current&&!j){const Ie=P.current;(!V||!Y||Q.current!==Ie)&&(Q.current&&(R==null||R.unobserve(Q.current)),R==null||R.observe(Ie),Q.current=Ie)}},[j,V,Y]),S.useEffect(()=>{const Ie=ae.current!==n,Me=X.current!==E,Xe=te.current!==N;P.current&&(Ie||Me||Xe)&&(Ie&&(ae.current=n),Me&&(X.current=E),Xe&&(te.current=N),ee.getState().updateNodeDimensions([{id:r,nodeElement:P.current,forceUpdate:!0}]))},[r,n,E,N]);const fe=Oce({nodeRef:P,disabled:j||!w,noDragClassName:M,handleSelector:D,nodeId:r,isSelectable:_,selectNodesOnDrag:I});return j?null:at.createElement("div",{className:_l(["react-flow__node",`react-flow__node-${n}`,{[J]:w},y,{selected:u,selectable:_,parent:L,dragging:fe}]),ref:P,style:{zIndex:O,transform:`translate(${o}px,${c}px)`,pointerEvents:se?"all":"none",visibility:V?"visible":"hidden",...b},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:ce,onMouseMove:me,onMouseLeave:ke,onContextMenu:ne,onClick:De,onDoubleClick:_e,onKeyDown:k?Ne:void 0,tabIndex:k?0:void 0,role:k?"button":void 0,"aria-describedby":K?void 0:`${Cce}-${G}`,"aria-label":z},at.createElement(Ltt,{value:r},at.createElement(e,{id:r,data:a,type:n,xPos:s,yPos:i,selected:u,isConnectable:B,sourcePosition:E,targetPosition:N,dragging:fe,dragHandle:D,zIndex:O})))};return t.displayName="NodeWrapper",S.memo(t)};const _rt=e=>{const t=e.getNodes().filter(r=>r.selected);return{...ZL(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Nrt({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=eo(),{width:a,height:s,x:i,y:o,transformString:c,userSelectionActive:u}=As(_rt,sl),d=Dce(),f=S.useRef(null);if(S.useEffect(()=>{var g;r||(g=f.current)==null||g.focus({preventScroll:!0})},[r]),Oce({nodeRef:f}),u||!a||!s)return null;const h=e?g=>{const x=n.getState().getNodes().filter(b=>b.selected);e(g,x)}:void 0,p=g=>{Object.prototype.hasOwnProperty.call(Dv,g.key)&&d({x:Dv[g.key].x,y:Dv[g.key].y,isShiftPressed:g.shiftKey})};return at.createElement("div",{className:_l(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},at.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:r?void 0:-1,onKeyDown:r?void 0:p,style:{width:a,height:s,top:o,left:i}}))}var Srt=S.memo(Nrt);const krt=e=>e.nodesSelectionActive,Pce=({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:o,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:h,selectionMode:p,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:b,panActivationKeyCode:y,zoomActivationKeyCode:w,elementsSelectable:_,zoomOnScroll:B,zoomOnPinch:k,panOnScroll:I,panOnScrollSpeed:E,panOnScrollMode:N,zoomOnDoubleClick:j,panOnDrag:R,defaultViewport:D,translateExtent:O,minZoom:L,maxZoom:M,preventScrolling:J,onSelectionContextMenu:V,noWheelClassName:K,noPanClassName:z,disableKeyboardA11y:G})=>{const Y=As(krt),ee=m2(f),P=m2(y),Q=P||R,X=P||I,te=ee||h&&Q!==!0;return frt({deleteKeyCode:o,multiSelectionKeyCode:b}),at.createElement(grt,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:_,zoomOnScroll:B,zoomOnPinch:k,panOnScroll:X,panOnScrollSpeed:E,panOnScrollMode:N,zoomOnDoubleClick:j,panOnDrag:!ee&&Q,defaultViewport:D,translateExtent:O,minZoom:L,maxZoom:M,zoomActivationKeyCode:w,preventScrolling:J,noWheelClassName:K,noPanClassName:z},at.createElement(Tce,{onSelectionStart:g,onSelectionEnd:x,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:Q,isSelecting:!!te,selectionMode:p},e,Y&&at.createElement(Srt,{onSelectionContextMenu:V,noPanClassName:z,disableKeyboardA11y:G})))};Pce.displayName="FlowRenderer";var Brt=S.memo(Pce);function jrt(e){return As(S.useCallback(r=>e?dce(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function Trt(e){const t={input:fy(e.input||bce),default:fy(e.default||yO),output:fy(e.output||wce),group:fy(e.group||tM)},r={},n=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,s)=>(a[s]=fy(e[s]||yO),a),r);return{...t,...n}}const Irt=({x:e,y:t,width:r,height:n,origin:a})=>!r||!n?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-r*a[0],y:t-n*a[1]},Frt=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Rce=e=>{const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:a,updateNodeDimensions:s,onError:i}=As(Frt,sl),o=jrt(e.onlyRenderVisibleElements),c=S.useRef(),u=S.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const h=f.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));s(h)});return c.current=d,d},[]);return S.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),at.createElement("div",{className:"react-flow__nodes",style:rM},o.map(d=>{var k,I,E;let f=d.type||"default";e.nodeTypes[f]||(i==null||i("003",Sh.error003(f)),f="default");const h=e.nodeTypes[f]||e.nodeTypes.default,p=!!(d.draggable||t&&typeof d.draggable>"u"),g=!!(d.selectable||a&&typeof d.selectable>"u"),x=!!(d.connectable||r&&typeof d.connectable>"u"),b=!!(d.focusable||n&&typeof d.focusable>"u"),y=e.nodeExtent?KL(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,w=(y==null?void 0:y.x)??0,_=(y==null?void 0:y.y)??0,B=Irt({x:w,y:_,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return at.createElement(h,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||_r.Bottom,targetPosition:d.targetPosition||_r.Top,hidden:d.hidden,xPos:w,yPos:_,xPosOrigin:B.x,yPosOrigin:B.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:p,isSelectable:g,isConnectable:x,isFocusable:b,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((k=d[Ss])==null?void 0:k.z)??0,isParent:!!((I=d[Ss])!=null&&I.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((E=d[Ss])!=null&&E.handleBounds)})}))};Rce.displayName="NodeRenderer";var Ort=S.memo(Rce);const Drt=(e,t,r)=>r===_r.Left?e-t:r===_r.Right?e+t:e,Prt=(e,t,r)=>r===_r.Top?e-t:r===_r.Bottom?e+t:e,Gq="react-flow__edgeupdater",Kq=({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:a,onMouseEnter:s,onMouseOut:i,type:o})=>at.createElement("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:i,className:_l([Gq,`${Gq}-${o}`]),cx:Drt(t,n,e),cy:Prt(r,n,e),r:n,stroke:"transparent",fill:"transparent"}),Rrt=()=>!0;var Ox=e=>{const t=({id:r,className:n,type:a,data:s,onClick:i,onEdgeDoubleClick:o,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:x,style:b,source:y,target:w,sourceX:_,sourceY:B,targetX:k,targetY:I,sourcePosition:E,targetPosition:N,elementsSelectable:j,hidden:R,sourceHandleId:D,targetHandleId:O,onContextMenu:L,onMouseEnter:M,onMouseMove:J,onMouseLeave:V,reconnectRadius:K,onReconnect:z,onReconnectStart:G,onReconnectEnd:Y,markerEnd:ee,markerStart:P,rfId:Q,ariaLabel:X,isFocusable:te,isReconnectable:ae,pathOptions:se,interactionWidth:oe,disableKeyboardA11y:ce})=>{const me=S.useRef(null),[ke,ne]=S.useState(!1),[_e,De]=S.useState(!1),Ne=eo(),fe=S.useMemo(()=>`url('#${vO(P,Q)}')`,[P,Q]),Ie=S.useMemo(()=>`url('#${vO(ee,Q)}')`,[ee,Q]);if(R)return null;const Me=gt=>{var vn;const{edges:fr,addSelectedEdges:zt,unselectNodesAndEdges:Mr,multiSelectionActive:wr}=Ne.getState(),Dr=fr.find(Tr=>Tr.id===r);Dr&&(j&&(Ne.setState({nodesSelectionActive:!1}),Dr.selected&&wr?(Mr({nodes:[],edges:[Dr]}),(vn=me.current)==null||vn.blur()):zt([r])),i&&i(gt,Dr))},Xe=dy(r,Ne.getState,o),ye=dy(r,Ne.getState,L),Fe=dy(r,Ne.getState,M),Re=dy(r,Ne.getState,J),Ge=dy(r,Ne.getState,V),Ke=(gt,fr)=>{if(gt.button!==0)return;const{edges:zt,isValidConnection:Mr}=Ne.getState(),wr=fr?w:y,Dr=(fr?O:D)||null,vn=fr?"target":"source",Tr=Mr||Rrt,Ga=fr,nn=zt.find(rn=>rn.id===r);De(!0),G==null||G(gt,nn,vn);const oa=rn=>{De(!1),Y==null||Y(rn,nn,vn)};pce({event:gt,handleId:Dr,nodeId:wr,onConnect:rn=>z==null?void 0:z(nn,rn),isTarget:Ga,getState:Ne.getState,setState:Ne.setState,isValidConnection:Tr,edgeUpdaterType:vn,onReconnectEnd:oa})},Ze=gt=>Ke(gt,!0),ft=gt=>Ke(gt,!1),Nt=()=>ne(!0),Tt=()=>ne(!1),St=!j&&!i,Dt=gt=>{var fr;if(!ce&&ace.includes(gt.key)&&j){const{unselectNodesAndEdges:zt,addSelectedEdges:Mr,edges:wr}=Ne.getState();gt.key==="Escape"?((fr=me.current)==null||fr.blur(),zt({edges:[wr.find(vn=>vn.id===r)]})):Mr([r])}};return at.createElement("g",{className:_l(["react-flow__edge",`react-flow__edge-${a}`,n,{selected:c,animated:u,inactive:St,updating:ke}]),onClick:Me,onDoubleClick:Xe,onContextMenu:ye,onMouseEnter:Fe,onMouseMove:Re,onMouseLeave:Ge,onKeyDown:te?Dt:void 0,tabIndex:te?0:void 0,role:te?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":X===null?void 0:X||`Edge from ${y} to ${w}`,"aria-describedby":te?`${_ce}-${Q}`:void 0,ref:me},!_e&&at.createElement(e,{id:r,source:y,target:w,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:x,data:s,style:b,sourceX:_,sourceY:B,targetX:k,targetY:I,sourcePosition:E,targetPosition:N,sourceHandleId:D,targetHandleId:O,markerStart:fe,markerEnd:Ie,pathOptions:se,interactionWidth:oe}),ae&&at.createElement(at.Fragment,null,(ae==="source"||ae===!0)&&at.createElement(Kq,{position:E,centerX:_,centerY:B,radius:K,onMouseDown:Ze,onMouseEnter:Nt,onMouseOut:Tt,type:"source"}),(ae==="target"||ae===!0)&&at.createElement(Kq,{position:N,centerX:k,centerY:I,radius:K,onMouseDown:ft,onMouseEnter:Nt,onMouseOut:Tt,type:"target"})))};return t.displayName="EdgeWrapper",S.memo(t)};function Lrt(e){const t={default:Ox(e.default||gS),straight:Ox(e.bezier||YL),step:Ox(e.step||XL),smoothstep:Ox(e.step||Ik),simplebezier:Ox(e.simplebezier||WL)},r={},n=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,s)=>(a[s]=Ox(e[s]||gS),a),r);return{...t,...n}}function qq(e,t,r=null){const n=((r==null?void 0:r.x)||0)+t.x,a=((r==null?void 0:r.y)||0)+t.y,s=(r==null?void 0:r.width)||t.width,i=(r==null?void 0:r.height)||t.height;switch(e){case _r.Top:return{x:n+s/2,y:a};case _r.Right:return{x:n+s,y:a+i/2};case _r.Bottom:return{x:n+s/2,y:a+i};case _r.Left:return{x:n,y:a+i/2}}}function Wq(e,t){return e?e.length===1||!t?e[0]:t&&e.find(r=>r.id===t)||null:null}const Mrt=(e,t,r,n,a,s)=>{const i=qq(r,e,t),o=qq(s,n,a);return{sourceX:i.x,sourceY:i.y,targetX:o.x,targetY:o.y}};function Urt({sourcePos:e,targetPos:t,sourceWidth:r,sourceHeight:n,targetWidth:a,targetHeight:s,width:i,height:o,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+r,t.x+a),y2:Math.max(e.y+n,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=qL({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:i/c[2],height:o/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),h=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*h)>0}function Xq(e){var n,a,s,i,o;const t=((n=e==null?void 0:e[Ss])==null?void 0:n.handleBounds)||null,r=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!r]}const Qrt=[{level:0,isMaxLevel:!0,edges:[]}];function Hrt(e,t,r=!1){let n=-1;const a=e.reduce((i,o)=>{var d,f;const c=Ou(o.zIndex);let u=c?o.zIndex:0;if(r){const h=t.get(o.target),p=t.get(o.source),g=o.selected||(h==null?void 0:h.selected)||(p==null?void 0:p.selected),x=Math.max(((d=p==null?void 0:p[Ss])==null?void 0:d.z)||0,((f=h==null?void 0:h[Ss])==null?void 0:f.z)||0,1e3);u=(c?o.zIndex:0)+(g?x:0)}return i[u]?i[u].push(o):i[u]=[o],n=u>n?u:n,i},{}),s=Object.entries(a).map(([i,o])=>{const c=+i;return{edges:o,level:c,isMaxLevel:c===n}});return s.length===0?Qrt:s}function Vrt(e,t,r){const n=As(S.useCallback(a=>e?a.edges.filter(s=>{const i=t.get(s.source),o=t.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&Urt({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:o.width,targetHeight:o.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return Hrt(n,t,r)}const zrt=({color:e="none",strokeWidth:t=1})=>at.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),$rt=({color:e="none",strokeWidth:t=1})=>at.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Yq={[pS.Arrow]:zrt,[pS.ArrowClosed]:$rt};function Grt(e){const t=eo();return S.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(Yq,e)?Yq[e]:((s=(a=t.getState()).onError)==null||s.call(a,"009",Sh.error009(e)),null)},[e])}const Krt=({id:e,type:t,color:r,width:n=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:o="auto-start-reverse"})=>{const c=Grt(t);return c?at.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:o,refX:"0",refY:"0"},at.createElement(c,{color:r,strokeWidth:i})):null},qrt=({defaultColor:e,rfId:t})=>r=>{const n=[];return r.edges.reduce((a,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const o=vO(i,t);n.includes(o)||(a.push({id:o,color:i.color||e,...i}),n.push(o))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))},Lce=({defaultColor:e,rfId:t})=>{const r=As(S.useCallback(qrt({defaultColor:e,rfId:t}),[e,t]),(n,a)=>!(n.length!==a.length||n.some((s,i)=>s.id!==a[i].id)));return at.createElement("defs",null,r.map(n=>at.createElement(Krt,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};Lce.displayName="MarkerDefinitions";var Wrt=S.memo(Lce);const Xrt=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Mce=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:r,rfId:n,edgeTypes:a,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:o,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:g,reconnectRadius:x,children:b,disableKeyboardA11y:y})=>{const{edgesFocusable:w,edgesUpdatable:_,elementsSelectable:B,width:k,height:I,connectionMode:E,nodeInternals:N,onError:j}=As(Xrt,sl),R=Vrt(t,N,r);return k?at.createElement(at.Fragment,null,R.map(({level:D,edges:O,isMaxLevel:L})=>at.createElement("svg",{key:D,style:{zIndex:D},width:k,height:I,className:"react-flow__edges react-flow__container"},L&&at.createElement(Wrt,{defaultColor:e,rfId:n}),at.createElement("g",null,O.map(M=>{const[J,V,K]=Xq(N.get(M.source)),[z,G,Y]=Xq(N.get(M.target));if(!K||!Y)return null;let ee=M.type||"default";a[ee]||(j==null||j("011",Sh.error011(ee)),ee="default");const P=a[ee]||a.default,Q=E===Cg.Strict?G.target:(G.target??[]).concat(G.source??[]),X=Wq(V.source,M.sourceHandle),te=Wq(Q,M.targetHandle),ae=(X==null?void 0:X.position)||_r.Bottom,se=(te==null?void 0:te.position)||_r.Top,oe=!!(M.focusable||w&&typeof M.focusable>"u"),ce=M.reconnectable||M.updatable,me=typeof h<"u"&&(ce||_&&typeof ce>"u");if(!X||!te)return j==null||j("008",Sh.error008(X,M)),null;const{sourceX:ke,sourceY:ne,targetX:_e,targetY:De}=Mrt(J,X,ae,z,te,se);return at.createElement(P,{key:M.id,id:M.id,className:_l([M.className,s]),type:ee,data:M.data,selected:!!M.selected,animated:!!M.animated,hidden:!!M.hidden,label:M.label,labelStyle:M.labelStyle,labelShowBg:M.labelShowBg,labelBgStyle:M.labelBgStyle,labelBgPadding:M.labelBgPadding,labelBgBorderRadius:M.labelBgBorderRadius,style:M.style,source:M.source,target:M.target,sourceHandleId:M.sourceHandle,targetHandleId:M.targetHandle,markerEnd:M.markerEnd,markerStart:M.markerStart,sourceX:ke,sourceY:ne,targetX:_e,targetY:De,sourcePosition:ae,targetPosition:se,elementsSelectable:B,onContextMenu:i,onMouseEnter:o,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:g,reconnectRadius:x,rfId:n,ariaLabel:M.ariaLabel,isFocusable:oe,isReconnectable:me,pathOptions:"pathOptions"in M?M.pathOptions:void 0,interactionWidth:M.interactionWidth,disableKeyboardA11y:y})})))),b):null};Mce.displayName="EdgeRenderer";var Yrt=S.memo(Mce);const Jrt=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Zrt({children:e}){const t=As(Jrt);return at.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function ent(e){const t=Fk(),r=S.useRef(!1);S.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const tnt={[_r.Left]:_r.Right,[_r.Right]:_r.Left,[_r.Top]:_r.Bottom,[_r.Bottom]:_r.Top},Uce=({nodeId:e,handleType:t,style:r,type:n=U0.Bezier,CustomComponent:a,connectionStatus:s})=>{var I,E,N;const{fromNode:i,handleId:o,toX:c,toY:u,connectionMode:d}=As(S.useCallback(j=>({fromNode:j.nodeInternals.get(e),handleId:j.connectionHandleId,toX:(j.connectionPosition.x-j.transform[0])/j.transform[2],toY:(j.connectionPosition.y-j.transform[1])/j.transform[2],connectionMode:j.connectionMode}),[e]),sl),f=(I=i==null?void 0:i[Ss])==null?void 0:I.handleBounds;let h=f==null?void 0:f[t];if(d===Cg.Loose&&(h=h||(f==null?void 0:f[t==="source"?"target":"source"])),!i||!h)return null;const p=o?h.find(j=>j.id===o):h[0],g=p?p.x+p.width/2:(i.width??0)/2,x=p?p.y+p.height/2:i.height??0,b=(((E=i.positionAbsolute)==null?void 0:E.x)??0)+g,y=(((N=i.positionAbsolute)==null?void 0:N.y)??0)+x,w=p==null?void 0:p.position,_=w?tnt[w]:null;if(!w||!_)return null;if(a)return at.createElement(a,{connectionLineType:n,connectionLineStyle:r,fromNode:i,fromHandle:p,fromX:b,fromY:y,toX:c,toY:u,fromPosition:w,toPosition:_,connectionStatus:s});let B="";const k={sourceX:b,sourceY:y,sourcePosition:w,targetX:c,targetY:u,targetPosition:_};return n===U0.Bezier?[B]=cce(k):n===U0.Step?[B]=xO({...k,borderRadius:0}):n===U0.SmoothStep?[B]=xO(k):n===U0.SimpleBezier?[B]=lce(k):B=`M${b},${y} ${c},${u}`,at.createElement("path",{d:B,fill:"none",className:"react-flow__connection-path",style:r})};Uce.displayName="ConnectionLine";const rnt=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function nnt({containerStyle:e,style:t,type:r,component:n}){const{nodeId:a,handleType:s,nodesConnectable:i,width:o,height:c,connectionStatus:u}=As(rnt,sl);return!(a&&s&&o&&i)?null:at.createElement("svg",{style:e,width:o,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},at.createElement("g",{className:_l(["react-flow__connection",u])},at.createElement(Uce,{nodeId:a,handleType:s,style:t,type:r,CustomComponent:n,connectionStatus:u})))}function Jq(e,t){return S.useRef(null),eo(),S.useMemo(()=>t(e),[e])}const Qce=({nodeTypes:e,edgeTypes:t,onMove:r,onMoveStart:n,onMoveEnd:a,onInit:s,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:g,onSelectionStart:x,onSelectionEnd:b,connectionLineType:y,connectionLineStyle:w,connectionLineComponent:_,connectionLineContainerStyle:B,selectionKeyCode:k,selectionOnDrag:I,selectionMode:E,multiSelectionKeyCode:N,panActivationKeyCode:j,zoomActivationKeyCode:R,deleteKeyCode:D,onlyRenderVisibleElements:O,elementsSelectable:L,selectNodesOnDrag:M,defaultViewport:J,translateExtent:V,minZoom:K,maxZoom:z,preventScrolling:G,defaultMarkerColor:Y,zoomOnScroll:ee,zoomOnPinch:P,panOnScroll:Q,panOnScrollSpeed:X,panOnScrollMode:te,zoomOnDoubleClick:ae,panOnDrag:se,onPaneClick:oe,onPaneMouseEnter:ce,onPaneMouseMove:me,onPaneMouseLeave:ke,onPaneScroll:ne,onPaneContextMenu:_e,onEdgeContextMenu:De,onEdgeMouseEnter:Ne,onEdgeMouseMove:fe,onEdgeMouseLeave:Ie,onReconnect:Me,onReconnectStart:Xe,onReconnectEnd:ye,reconnectRadius:Fe,noDragClassName:Re,noWheelClassName:Ge,noPanClassName:Ke,elevateEdgesOnSelect:Ze,disableKeyboardA11y:ft,nodeOrigin:Nt,nodeExtent:Tt,rfId:St})=>{const Dt=Jq(e,Trt),gt=Jq(t,Lrt);return ent(s),at.createElement(Brt,{onPaneClick:oe,onPaneMouseEnter:ce,onPaneMouseMove:me,onPaneMouseLeave:ke,onPaneContextMenu:_e,onPaneScroll:ne,deleteKeyCode:D,selectionKeyCode:k,selectionOnDrag:I,selectionMode:E,onSelectionStart:x,onSelectionEnd:b,multiSelectionKeyCode:N,panActivationKeyCode:j,zoomActivationKeyCode:R,elementsSelectable:L,onMove:r,onMoveStart:n,onMoveEnd:a,zoomOnScroll:ee,zoomOnPinch:P,zoomOnDoubleClick:ae,panOnScroll:Q,panOnScrollSpeed:X,panOnScrollMode:te,panOnDrag:se,defaultViewport:J,translateExtent:V,minZoom:K,maxZoom:z,onSelectionContextMenu:g,preventScrolling:G,noDragClassName:Re,noWheelClassName:Ge,noPanClassName:Ke,disableKeyboardA11y:ft},at.createElement(Zrt,null,at.createElement(Yrt,{edgeTypes:gt,onEdgeClick:o,onEdgeDoubleClick:u,onlyRenderVisibleElements:O,onEdgeContextMenu:De,onEdgeMouseEnter:Ne,onEdgeMouseMove:fe,onEdgeMouseLeave:Ie,onReconnect:Me,onReconnectStart:Xe,onReconnectEnd:ye,reconnectRadius:Fe,defaultMarkerColor:Y,noPanClassName:Ke,elevateEdgesOnSelect:!!Ze,disableKeyboardA11y:ft,rfId:St},at.createElement(nnt,{style:w,type:y,component:_,containerStyle:B})),at.createElement("div",{className:"react-flow__edgelabel-renderer"}),at.createElement(Ort,{nodeTypes:Dt,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,selectNodesOnDrag:M,onlyRenderVisibleElements:O,noPanClassName:Ke,noDragClassName:Re,disableKeyboardA11y:ft,nodeOrigin:Nt,nodeExtent:Tt,rfId:St})))};Qce.displayName="GraphView";var ant=S.memo(Qce);const EO=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],S0={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:EO,nodeExtent:EO,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Cg.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Itt,isValidConnection:void 0},snt=()=>mJe((e,t)=>({...S0,setNodes:r=>{const{nodeInternals:n,nodeOrigin:a,elevateNodesOnSelect:s}=t();e({nodeInternals:fI(r,n,a,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=t();e({edges:r.map(a=>({...n,...a}))})},setDefaultNodesAndEdges:(r,n)=>{const a=typeof r<"u",s=typeof n<"u",i=a?fI(r,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?n:[],hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:a,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:o,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:h}=new window.DOMMatrixReadOnly(f.transform),p=r.reduce((x,b)=>{const y=a.get(b.id);if(y!=null&&y.hidden)a.set(y.id,{...y,[Ss]:{...y[Ss],handleBounds:void 0}});else if(y){const w=GL(b.nodeElement);!!(w.width&&w.height&&(y.width!==w.width||y.height!==w.height||b.forceUpdate))&&(a.set(y.id,{...y,[Ss]:{...y[Ss],handleBounds:{source:$q(".source",b.nodeElement,h,u),target:$q(".target",b.nodeElement,h,u)}},...w}),x.push({id:y.id,type:"dimensions",dimensions:w}))}return x},[]);Sce(a,u);const g=i||s&&!i&&kce(t,{initial:!0,...o});e({nodeInternals:new Map(a),fitViewOnInitDone:g}),(p==null?void 0:p.length)>0&&(n==null||n(p))},updateNodePositions:(r,n=!0,a=!1)=>{const{triggerNodeChanges:s}=t(),i=r.map(o=>{const c={id:o.id,type:"position",dragging:a};return n&&(c.positionAbsolute=o.positionAbsolute,c.position=o.position),c});s(i)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:a,hasDefaultNodes:s,nodeOrigin:i,getNodes:o,elevateNodesOnSelect:c}=t();if(r!=null&&r.length){if(s){const u=jce(r,o()),d=fI(u,a,i,c);e({nodeInternals:d})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,o=null;n?i=r.map(c=>F0(c,!0)):(i=uv(s(),r),o=uv(a,[])),u_({changedNodes:i,changedEdges:o,get:t,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,o=null;n?i=r.map(c=>F0(c,!0)):(i=uv(a,r),o=uv(s(),[])),u_({changedNodes:o,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:a,getNodes:s}=t(),i=r||s(),o=n||a,c=i.map(d=>(d.selected=!1,F0(d.id,!1))),u=o.map(d=>F0(d.id,!1));u_({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:a}=t();n==null||n.scaleExtent([r,a]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:a}=t();n==null||n.scaleExtent([a,r]),e({maxZoom:r})},setTranslateExtent:r=>{var n;(n=t().d3Zoom)==null||n.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=t(),s=n().filter(o=>o.selected).map(o=>F0(o.id,!1)),i=r.filter(o=>o.selected).map(o=>F0(o.id,!1));u_({changedNodes:s,changedEdges:i,get:t,set:e})},setNodeExtent:r=>{const{nodeInternals:n}=t();n.forEach(a=>{a.positionAbsolute=KL(a.position,r)}),e({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:a,height:s,d3Zoom:i,d3Selection:o,translateExtent:c}=t();if(!i||!o||!r.x&&!r.y)return!1;const u=im.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),d=[[0,0],[a,s]],f=i==null?void 0:i.constrain()(u,d,c);return i.transform(o,f),n[0]!==f.x||n[1]!==f.y||n[2]!==f.k},cancelConnection:()=>e({connectionNodeId:S0.connectionNodeId,connectionHandleId:S0.connectionHandleId,connectionHandleType:S0.connectionHandleType,connectionStatus:S0.connectionStatus,connectionStartHandle:S0.connectionStartHandle,connectionEndHandle:S0.connectionEndHandle}),reset:()=>e({...S0})}),Object.is),nM=({children:e})=>{const t=S.useRef(null);return t.current||(t.current=snt()),at.createElement(Ctt,{value:t.current},e)};nM.displayName="ReactFlowProvider";const Hce=({children:e})=>S.useContext(Tk)?at.createElement(at.Fragment,null,e):at.createElement(nM,null,e);Hce.displayName="ReactFlowWrapper";const int={input:bce,default:yO,output:wce,group:tM},ont={default:gS,straight:YL,step:XL,smoothstep:Ik,simplebezier:WL},lnt=[0,0],cnt=[15,15],unt={x:0,y:0,zoom:1},dnt={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Vce=S.forwardRef(({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:a,nodeTypes:s=int,edgeTypes:i=ont,onNodeClick:o,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onConnect:p,onConnectStart:g,onConnectEnd:x,onClickConnectStart:b,onClickConnectEnd:y,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:B,onNodeContextMenu:k,onNodeDoubleClick:I,onNodeDragStart:E,onNodeDrag:N,onNodeDragStop:j,onNodesDelete:R,onEdgesDelete:D,onSelectionChange:O,onSelectionDragStart:L,onSelectionDrag:M,onSelectionDragStop:J,onSelectionContextMenu:V,onSelectionStart:K,onSelectionEnd:z,connectionMode:G=Cg.Strict,connectionLineType:Y=U0.Bezier,connectionLineStyle:ee,connectionLineComponent:P,connectionLineContainerStyle:Q,deleteKeyCode:X="Backspace",selectionKeyCode:te="Shift",selectionOnDrag:ae=!1,selectionMode:se=h2.Full,panActivationKeyCode:oe="Space",multiSelectionKeyCode:ce=mS()?"Meta":"Control",zoomActivationKeyCode:me=mS()?"Meta":"Control",snapToGrid:ke=!1,snapGrid:ne=cnt,onlyRenderVisibleElements:_e=!1,selectNodesOnDrag:De=!0,nodesDraggable:Ne,nodesConnectable:fe,nodesFocusable:Ie,nodeOrigin:Me=lnt,edgesFocusable:Xe,edgesUpdatable:ye,elementsSelectable:Fe,defaultViewport:Re=unt,minZoom:Ge=.5,maxZoom:Ke=2,translateExtent:Ze=EO,preventScrolling:ft=!0,nodeExtent:Nt,defaultMarkerColor:Tt="#b1b1b7",zoomOnScroll:St=!0,zoomOnPinch:Dt=!0,panOnScroll:gt=!1,panOnScrollSpeed:fr=.5,panOnScrollMode:zt=Mp.Free,zoomOnDoubleClick:Mr=!0,panOnDrag:wr=!0,onPaneClick:Dr,onPaneMouseEnter:vn,onPaneMouseMove:Tr,onPaneMouseLeave:Ga,onPaneScroll:nn,onPaneContextMenu:oa,children:Ba,onEdgeContextMenu:rn,onEdgeDoubleClick:gr,onEdgeMouseEnter:tt,onEdgeMouseMove:xt,onEdgeMouseLeave:et,onEdgeUpdate:vt,onEdgeUpdateStart:wt,onEdgeUpdateEnd:yt,onReconnect:nr,onReconnectStart:xr,onReconnectEnd:qr,reconnectRadius:Zr=10,edgeUpdaterRadius:Kr=10,onNodesChange:he,onEdgesChange:je,noDragClassName:Ce="nodrag",noWheelClassName:we="nowheel",noPanClassName:Se="nopan",fitView:Te=!1,fitViewOptions:Je,connectOnClick:dt=!0,attributionPosition:$e,proOptions:nt,defaultEdgeOptions:ot,elevateNodesOnSelect:Pt=!0,elevateEdgesOnSelect:Vt=!1,disableKeyboardA11y:Jt=!1,autoPanOnConnect:Ht=!0,autoPanOnNodeDrag:Gt=!0,connectionRadius:kr=20,isValidConnection:sn,onError:on,style:An,id:hs,nodeDragThreshold:Eo,...ms},Js)=>{const Ts=hs||"1";return at.createElement("div",{...ms,style:{...An,...dnt},ref:Js,className:_l(["react-flow",a]),"data-testid":"rf__wrapper",id:hs},at.createElement(Hce,null,at.createElement(ant,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onNodeClick:o,onEdgeClick:c,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:B,onNodeContextMenu:k,onNodeDoubleClick:I,nodeTypes:s,edgeTypes:i,connectionLineType:Y,connectionLineStyle:ee,connectionLineComponent:P,connectionLineContainerStyle:Q,selectionKeyCode:te,selectionOnDrag:ae,selectionMode:se,deleteKeyCode:X,multiSelectionKeyCode:ce,panActivationKeyCode:oe,zoomActivationKeyCode:me,onlyRenderVisibleElements:_e,selectNodesOnDrag:De,defaultViewport:Re,translateExtent:Ze,minZoom:Ge,maxZoom:Ke,preventScrolling:ft,zoomOnScroll:St,zoomOnPinch:Dt,zoomOnDoubleClick:Mr,panOnScroll:gt,panOnScrollSpeed:fr,panOnScrollMode:zt,panOnDrag:wr,onPaneClick:Dr,onPaneMouseEnter:vn,onPaneMouseMove:Tr,onPaneMouseLeave:Ga,onPaneScroll:nn,onPaneContextMenu:oa,onSelectionContextMenu:V,onSelectionStart:K,onSelectionEnd:z,onEdgeContextMenu:rn,onEdgeDoubleClick:gr,onEdgeMouseEnter:tt,onEdgeMouseMove:xt,onEdgeMouseLeave:et,onReconnect:nr??vt,onReconnectStart:xr??wt,onReconnectEnd:qr??yt,reconnectRadius:Zr??Kr,defaultMarkerColor:Tt,noDragClassName:Ce,noWheelClassName:we,noPanClassName:Se,elevateEdgesOnSelect:Vt,rfId:Ts,disableKeyboardA11y:Jt,nodeOrigin:Me,nodeExtent:Nt}),at.createElement(trt,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:p,onConnectStart:g,onConnectEnd:x,onClickConnectStart:b,onClickConnectEnd:y,nodesDraggable:Ne,nodesConnectable:fe,nodesFocusable:Ie,edgesFocusable:Xe,edgesUpdatable:ye,elementsSelectable:Fe,elevateNodesOnSelect:Pt,minZoom:Ge,maxZoom:Ke,nodeExtent:Nt,onNodesChange:he,onEdgesChange:je,snapToGrid:ke,snapGrid:ne,connectionMode:G,translateExtent:Ze,connectOnClick:dt,defaultEdgeOptions:ot,fitView:Te,fitViewOptions:Je,onNodesDelete:R,onEdgesDelete:D,onNodeDragStart:E,onNodeDrag:N,onNodeDragStop:j,onSelectionDrag:M,onSelectionDragStart:L,onSelectionDragStop:J,noPanClassName:Se,nodeOrigin:Me,rfId:Ts,autoPanOnConnect:Ht,autoPanOnNodeDrag:Gt,onError:on,connectionRadius:kr,isValidConnection:sn,nodeDragThreshold:Eo}),at.createElement(Ztt,{onSelectionChange:O}),Ba,at.createElement(Ntt,{proOptions:nt,position:$e}),at.createElement(irt,{rfId:Ts,disableKeyboardA11y:Jt})))});Vce.displayName="ReactFlow";function zce(e){return t=>{const[r,n]=S.useState(t),a=S.useCallback(s=>n(i=>e(s,i)),[]);return[r,n,a]}}const Ant=zce(jce),fnt=zce(brt);function hnt(){return at.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},at.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function mnt(){return at.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},at.createElement("path",{d:"M0 0h32v4.2H0z"}))}function pnt(){return at.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},at.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function gnt(){return at.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},at.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function xnt(){return at.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},at.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Ry=({children:e,className:t,...r})=>at.createElement("button",{type:"button",className:_l(["react-flow__controls-button",t]),...r},e);Ry.displayName="ControlButton";const vnt=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),$ce=({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:i,onFitView:o,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const h=eo(),[p,g]=S.useState(!1),{isInteractive:x,minZoomReached:b,maxZoomReached:y}=As(vnt,sl),{zoomIn:w,zoomOut:_,fitView:B}=Fk();if(S.useEffect(()=>{g(!0)},[]),!p)return null;const k=()=>{w(),s==null||s()},I=()=>{_(),i==null||i()},E=()=>{B(a),o==null||o()},N=()=>{h.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c==null||c(!x)};return at.createElement(tce,{className:_l(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&at.createElement(at.Fragment,null,at.createElement(Ry,{onClick:k,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},at.createElement(hnt,null)),at.createElement(Ry,{onClick:I,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b},at.createElement(mnt,null))),r&&at.createElement(Ry,{className:"react-flow__controls-fitview",onClick:E,title:"fit view","aria-label":"fit view"},at.createElement(pnt,null)),n&&at.createElement(Ry,{className:"react-flow__controls-interactive",onClick:N,title:"toggle interactivity","aria-label":"toggle interactivity"},x?at.createElement(xnt,null):at.createElement(gnt,null)),d)};$ce.displayName="Controls";var bnt=S.memo($ce),Pd;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Pd||(Pd={}));function ynt({color:e,dimensions:t,lineWidth:r}){return at.createElement("path",{stroke:e,strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function wnt({color:e,radius:t}){return at.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const Ent={[Pd.Dots]:"#91919a",[Pd.Lines]:"#eee",[Pd.Cross]:"#e2e2e2"},Cnt={[Pd.Dots]:1,[Pd.Lines]:1,[Pd.Cross]:6},_nt=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Gce({id:e,variant:t=Pd.Dots,gap:r=20,size:n,lineWidth:a=1,offset:s=2,color:i,style:o,className:c}){const u=S.useRef(null),{transform:d,patternId:f}=As(_nt,sl),h=i||Ent[t],p=n||Cnt[t],g=t===Pd.Dots,x=t===Pd.Cross,b=Array.isArray(r)?r:[r,r],y=[b[0]*d[2]||1,b[1]*d[2]||1],w=p*d[2],_=x?[w,w]:y,B=g?[w/s,w/s]:[_[0]/s,_[1]/s];return at.createElement("svg",{className:_l(["react-flow__background",c]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},at.createElement("pattern",{id:f+e,x:d[0]%y[0],y:d[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${B[0]},-${B[1]})`},g?at.createElement(wnt,{color:h,radius:w/s}):at.createElement(ynt,{dimensions:_,color:h,lineWidth:a})),at.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}Gce.displayName="Background";var Nnt=S.memo(Gce);function Snt(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(a),t&&(n.href=t),a.href=e,a.href}const knt=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function lm(e){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r]);return t}let Dx=null;function Kce(e={}){return Dx||(e.includeStyleProperties?(Dx=e.includeStyleProperties,Dx):(Dx=lm(window.getComputedStyle(document.documentElement)),Dx))}function xS(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function Bnt(e){const t=xS(e,"border-left-width"),r=xS(e,"border-right-width");return e.clientWidth+t+r}function jnt(e){const t=xS(e,"border-top-width"),r=xS(e,"border-bottom-width");return e.clientHeight+t+r}function qce(e,t={}){const r=t.width||Bnt(e),n=t.height||jnt(e);return{width:r,height:n}}function Tnt(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Cc=16384;function Int(e){(e.width>Cc||e.height>Cc)&&(e.width>Cc&&e.height>Cc?e.width>e.height?(e.height*=Cc/e.width,e.width=Cc):(e.width*=Cc/e.height,e.height=Cc):e.width>Cc?(e.height*=Cc/e.width,e.width=Cc):(e.width*=Cc/e.height,e.height=Cc))}function vS(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>t(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function Fnt(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function Ont(e,t,r){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),s=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${t} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),a.appendChild(s),s.appendChild(e),Fnt(a)}const tc=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||tc(r,t)};function Dnt(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function Pnt(e,t){return Kce(t).map(r=>{const n=e.getPropertyValue(r),a=e.getPropertyPriority(r);return`${r}: ${n}${a?" !important":""};`}).join(" ")}function Rnt(e,t,r,n){const a=`.${e}:${t}`,s=r.cssText?Dnt(r):Pnt(r,n);return document.createTextNode(`${a}{${s}}`)}function Zq(e,t,r,n){const a=window.getComputedStyle(e,r),s=a.getPropertyValue("content");if(s===""||s==="none")return;const i=knt();try{t.className=`${t.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(Rnt(i,r,a,n)),t.appendChild(o)}function Lnt(e,t,r){Zq(e,t,":before",r),Zq(e,t,":after",r)}const eW="application/font-woff",tW="image/jpeg",Mnt={woff:eW,woff2:eW,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:tW,jpeg:tW,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Unt(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function aM(e){const t=Unt(e).toLowerCase();return Mnt[t]||""}function Qnt(e){return e.split(/,/)[1]}function CO(e){return e.search(/^(data:)/)!==-1}function Hnt(e,t){return`data:${t};base64,${e}`}async function Wce(e,t,r){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((s,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{s(r({res:n,result:o.result}))}catch(c){i(c)}},o.readAsDataURL(a)})}const gI={};function Vnt(e,t,r){let n=e.replace(/\?.*/,"");return r&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function sM(e,t,r){const n=Vnt(e,t,r.includeQueryParams);if(gI[n]!=null)return gI[n];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const s=await Wce(e,r.fetchRequestInit,({res:i,result:o})=>(t||(t=i.headers.get("Content-Type")||""),Qnt(o)));a=Hnt(s,t)}catch(s){a=r.imagePlaceholder||"";let i=`Failed to fetch resource: ${e}`;s&&(i=typeof s=="string"?s:s.message),i&&console.warn(i)}return gI[n]=a,a}async function znt(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):vS(t)}async function $nt(e,t){if(e.currentSrc){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,i==null||i.drawImage(e,0,0,s.width,s.height);const o=s.toDataURL();return vS(o)}const r=e.poster,n=aM(r),a=await sM(r,n,t);return vS(a)}async function Gnt(e,t){var r;try{if(!((r=e==null?void 0:e.contentDocument)===null||r===void 0)&&r.body)return await Ok(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function Knt(e,t){return tc(e,HTMLCanvasElement)?znt(e):tc(e,HTMLVideoElement)?$nt(e,t):tc(e,HTMLIFrameElement)?Gnt(e,t):e.cloneNode(Xce(e))}const qnt=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",Xce=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function Wnt(e,t,r){var n,a;if(Xce(t))return t;let s=[];return qnt(e)&&e.assignedNodes?s=lm(e.assignedNodes()):tc(e,HTMLIFrameElement)&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?s=lm(e.contentDocument.body.childNodes):s=lm(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),s.length===0||tc(e,HTMLVideoElement)||await s.reduce((i,o)=>i.then(()=>Ok(o,r)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function Xnt(e,t,r){const n=t.style;if(!n)return;const a=window.getComputedStyle(e);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):Kce(r).forEach(s=>{let i=a.getPropertyValue(s);s==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),tc(e,HTMLIFrameElement)&&s==="display"&&i==="inline"&&(i="block"),s==="d"&&t.getAttribute("d")&&(i=`path(${t.getAttribute("d")})`),n.setProperty(s,i,a.getPropertyPriority(s))})}function Ynt(e,t){tc(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),tc(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function Jnt(e,t){if(tc(e,HTMLSelectElement)){const r=t,n=Array.from(r.children).find(a=>e.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function Znt(e,t,r){return tc(t,Element)&&(Xnt(e,t,r),Lnt(e,t,r),Ynt(e,t),Jnt(e,t)),t}async function eat(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const n={};for(let s=0;s<r.length;s++){const o=r[s].getAttribute("xlink:href");if(o){const c=e.querySelector(o),u=document.querySelector(o);!c&&u&&!n[o]&&(n[o]=await Ok(u,t,!0))}}const a=Object.values(n);if(a.length){const s="http://www.w3.org/1999/xhtml",i=document.createElementNS(s,"svg");i.setAttribute("xmlns",s),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(s,"defs");i.appendChild(o);for(let c=0;c<a.length;c++)o.appendChild(a[c]);e.appendChild(i)}return e}async function Ok(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>Knt(n,t)).then(n=>Wnt(e,n,t)).then(n=>Znt(e,n,t)).then(n=>eat(n,t))}const Yce=/url\((['"]?)([^'"]+?)\1\)/g,tat=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,rat=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function nat(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function aat(e){const t=[];return e.replace(Yce,(r,n,a)=>(t.push(a),r)),t.filter(r=>!CO(r))}async function sat(e,t,r,n,a){try{const s=r?Snt(t,r):t,i=aM(t);let o;return a||(o=await sM(s,i,n)),e.replace(nat(t),`$1${o}$3`)}catch{}return e}function iat(e,{preferredFontFormat:t}){return t?e.replace(rat,r=>{for(;;){const[n,,a]=tat.exec(r)||[];if(!a)return"";if(a===t)return`src: ${n};`}}):e}function Jce(e){return e.search(Yce)!==-1}async function Zce(e,t,r){if(!Jce(e))return e;const n=iat(e,r);return aat(n).reduce((s,i)=>s.then(o=>sat(o,i,t,r)),Promise.resolve(n))}async function Px(e,t,r){var n;const a=(n=t.style)===null||n===void 0?void 0:n.getPropertyValue(e);if(a){const s=await Zce(a,null,r);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function oat(e,t){await Px("background",e,t)||await Px("background-image",e,t),await Px("mask",e,t)||await Px("-webkit-mask",e,t)||await Px("mask-image",e,t)||await Px("-webkit-mask-image",e,t)}async function lat(e,t){const r=tc(e,HTMLImageElement);if(!(r&&!CO(e.src))&&!(tc(e,SVGImageElement)&&!CO(e.href.baseVal)))return;const n=r?e.src:e.href.baseVal,a=await sM(n,aM(n),t);await new Promise((s,i)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...c)=>{try{s(t.onImageErrorHandler(...c))}catch(u){i(u)}}:i;const o=e;o.decode&&(o.decode=s),o.loading==="lazy"&&(o.loading="eager"),r?(e.srcset="",e.src=a):e.href.baseVal=a})}async function cat(e,t){const n=lm(e.childNodes).map(a=>eue(a,t));await Promise.all(n).then(()=>e)}async function eue(e,t){tc(e,Element)&&(await oat(e,t),await lat(e,t),await cat(e,t))}function uat(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(a=>{r[a]=n[a]}),e}const rW={};async function nW(e){let t=rW[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},rW[e]=t,t}async function aW(e,t){let r=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(n,"$1");return o.startsWith("https://")||(o=new URL(o,e.url).href),Wce(o,t.fetchRequestInit,({result:c})=>(r=r.replace(i,`url(${c})`),[i,c]))});return Promise.all(s).then(()=>r)}function sW(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=a.exec(n);if(c===null)break;t.push(c[0])}n=n.replace(a,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let c=s.exec(n);if(c===null){if(c=o.exec(n),c===null)break;s.lastIndex=o.lastIndex}else o.lastIndex=s.lastIndex;t.push(c[0])}return t}async function dat(e,t){const r=[],n=[];return e.forEach(a=>{if("cssRules"in a)try{lm(a.cssRules||[]).forEach((s,i)=>{if(s.type===CSSRule.IMPORT_RULE){let o=i+1;const c=s.href,u=nW(c).then(d=>aW(d,t)).then(d=>sW(d).forEach(f=>{try{a.insertRule(f,f.startsWith("@import")?o+=1:a.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:f,error:h})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(u)}})}catch(s){const i=e.find(o=>o.href==null)||document.styleSheets[0];a.href!=null&&n.push(nW(a.href).then(o=>aW(o,t)).then(o=>sW(o).forEach(c=>{i.insertRule(c,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",s)}}),Promise.all(n).then(()=>(e.forEach(a=>{if("cssRules"in a)try{lm(a.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${a.href}`,s)}}),r))}function Aat(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Jce(t.style.getPropertyValue("src")))}async function fat(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=lm(e.ownerDocument.styleSheets),n=await dat(r,t);return Aat(n)}function tue(e){return e.trim().replace(/["']/g,"")}function hat(e){const t=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(s=>{t.add(tue(s))}),Array.from(n.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(e),t}async function mat(e,t){const r=await fat(e,t),n=hat(e);return(await Promise.all(r.filter(s=>n.has(tue(s.style.fontFamily))).map(s=>{const i=s.parentStyleSheet?s.parentStyleSheet.href:null;return Zce(s.cssText,i,t)}))).join(`
`)}async function pat(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await mat(e,t);if(r){const n=document.createElement("style"),a=document.createTextNode(r);n.appendChild(a),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function gat(e,t={}){const{width:r,height:n}=qce(e,t),a=await Ok(e,t,!0);return await pat(a,t),await eue(a,t),uat(a,t),await Ont(a,r,n)}async function xat(e,t={}){const{width:r,height:n}=qce(e,t),a=await gat(e,t),s=await vS(a),i=document.createElement("canvas"),o=i.getContext("2d"),c=t.pixelRatio||Tnt(),u=t.canvasWidth||r,d=t.canvasHeight||n;return i.width=u*c,i.height=d*c,t.skipAutoScale||Int(i),i.style.width=`${u}`,i.style.height=`${d}`,t.backgroundColor&&(o.fillStyle=t.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(s,0,0,i.width,i.height),i}async function Dk(e,t={}){return(await xat(e,t)).toDataURL()}const rue="recursos_crucigramas",Pk="recursos_lineas_de_tiempo",Rk="recursos_mapas_mentales",nue="recursos_sopas_de_letras",Lk=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,createdAt:((s=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.createdAt}},vat=e=>{const t=$t(kt(ht,rue),Sr("fechaCreacion","desc"));return pr(t,r=>{const n=r.docs.map(a=>Lk(a));e(n)},r=>{console.error("Error al suscribirse a los crucigramas:",r),e([])})},bat=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:sr.fromDate(new Date)};return(await Tn(kt(ht,rue),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},yat=e=>{const t=$t(kt(ht,Pk),Sr("createdAt","desc"));return pr(t,r=>{const n=r.docs.map(a=>Lk(a));e(n)},r=>{console.error("Error al suscribirse a las líneas de tiempo:",r),e([])})},wat=async(e,t)=>{try{const{id:r,...n}=e,a=dr(ht,Pk,r);await Ji(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:sr.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la línea de tiempo:",r),new Error("No se pudo guardar la línea de tiempo.")}},Eat=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:sr.fromDate(new Date)};return(await Tn(kt(ht,Pk),r)).id}catch(r){throw console.error("Error al crear la línea de tiempo:",r),new Error("No se pudo crear la línea de tiempo.")}},Cat=async e=>{try{const t=dr(ht,Pk,e);await za(t)}catch(t){throw console.error("Error al eliminar la línea de tiempo:",t),new Error("No se pudo eliminar la línea de tiempo.")}},_at=e=>{const t=$t(kt(ht,Rk),Sr("createdAt","desc"));return pr(t,r=>{const n=r.docs.map(a=>Lk(a));e(n)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),e([])})},Nat=async(e,t)=>{try{const{id:r,...n}=e,a=dr(ht,Rk,r);await Ji(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:sr.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},Sat=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:sr.fromDate(new Date)};return(await Tn(kt(ht,Rk),r)).id}catch(r){throw console.error("Error al crear el mapa mental:",r),new Error("No se pudo crear el mapa mental.")}},kat=async e=>{try{const t=dr(ht,Rk,e);await za(t)}catch(t){throw console.error("Error al eliminar el mapa mental:",t),new Error("No se pudo eliminar el mapa mental.")}},Bat=e=>{const t=$t(kt(ht,nue),Sr("createdAt","desc"));return pr(t,r=>{const n=r.docs.map(a=>Lk(a));e(n)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),e([])})},jat=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:sr.fromDate(new Date)};return(await Tn(kt(ht,nue),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},Tat=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Iat=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),Fat=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),Oat=({data:e})=>{const t={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Práctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},r=t[e.type||"default"]||t.default;return l.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${r} flex items-center gap-3 min-w-[180px]`,children:[l.jsx(E1,{type:"target",position:_r.Left,className:"w-2 h-2 !bg-slate-400"}),l.jsx("span",{className:"text-xl",children:e.icon||"🧠"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:e.label}),e.type&&l.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.type})]}),l.jsx(E1,{type:"source",position:_r.Right,className:"w-2 h-2 !bg-slate-400"})]})},_O=(e,t)=>!e.children||e.children.length===0?t:e.children.reduce((r,n)=>r+_O(n,t),0),NO=(e,t="tree")=>{const r=[],n=[];if(t==="tree"){const i=(o,c,u)=>{r.push({id:o.id,position:{x:c*280,y:u},data:{label:o.label,icon:o.icon,type:o.type},type:"custom"});const d=_O(o,100);let f=u-d/2+100/2;(o.children||[]).forEach(h=>{const p=_O(h,100),g=f+p/2-100/2;n.push({id:`e-${o.id}-${h.id}`,source:o.id,target:h.id,type:"smoothstep",animated:!0}),i(h,c+1,g),f+=p})};i(e,0,0)}else{r.push({id:e.id,position:{x:0,y:0},data:{label:e.label,icon:e.icon,type:e.type},type:"custom"});const i=300,o=500;(e.children||[]).forEach((c,u)=>{const d=u/e.children.length*2*Math.PI;r.push({id:c.id,position:{x:i*Math.cos(d),y:i*Math.sin(d)},data:{label:c.label,icon:c.icon,type:c.type},type:"custom"}),n.push({id:`e-${e.id}-${c.id}`,source:e.id,target:c.id,type:"smoothstep"}),(c.children||[]).forEach((f,h)=>{const p=d+(h-(c.children.length-1)/2)*.25;r.push({id:f.id,position:{x:o*Math.cos(p),y:o*Math.sin(p)},data:{label:f.label,icon:f.icon,type:f.type},type:"custom"}),n.push({id:`e-${c.id}-${f.id}`,source:c.id,target:f.id,type:"smoothstep"})})})}return{nodes:r,edges:n}},aue=({node:e,onUpdate:t,onAddChild:r,onDelete:n,level:a=0})=>{const s=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],i=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return l.jsxs("div",{className:`pl-4 ${a>0?"border-l "+i[a-1%i.length]:""}`,children:[l.jsx("div",{className:`p-2 rounded-lg my-1 ${s[a%s.length]}`,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"text",value:e.label,onChange:o=>t(e.id,o.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),l.jsx("button",{onClick:()=>r(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"➕"}),a>0&&l.jsx("button",{onClick:()=>n(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"🗑️"})]})}),(e.children||[]).map(o=>l.jsx(aue,{node:o,onUpdate:t,onAddChild:r,onDelete:n,level:a+1},o.id))]})},Dat={custom:Oat},Pat=({mapData:e,onBack:t,onSave:r})=>{const[n,a]=S.useState(e.treeData),[s,i]=S.useState("tree"),[o,c]=S.useState(!1),[u,d,f]=Ant([]),[h,p,g]=fnt([]),{fitView:x}=Fk();S.useEffect(()=>{const{nodes:k,edges:I}=NO(n,s);d(k),p(I),setTimeout(()=>x({duration:300}),50)},[n,s,d,p,x]);const b=(k,I)=>{const E=JSON.parse(JSON.stringify(n)),N=j=>j.id===k?(j.label=I,!0):(j.children||[]).some(N);N(E),a(E)},y=k=>{const I=JSON.parse(JSON.stringify(n)),E=N=>N.id===k?(N.children||(N.children=[]),N.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(N.children||[]).some(E);E(I),a(I)},w=k=>{const I=JSON.parse(JSON.stringify(n)),E=N=>{const j=(N.children||[]).findIndex(R=>R.id===k);return j!==-1?(N.children.splice(j,1),!0):(N.children||[]).some(E)};E(I),a(I)},_=()=>{c(!0);const{nodes:k,edges:I}=NO(n,s);r({...e,treeData:n,nodes:k,edges:I}),setTimeout(()=>c(!1),1e3)},B=async k=>{const I=document.querySelector(".react-flow");I&&Dk(I,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(E=>{{const N=document.createElement("a");N.download=`${e.tema}.png`,N.href=E,N.click()}}).catch(E=>console.error("oops, something went wrong!",E))};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:e.tema}),l.jsx("button",{onClick:t,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:"← Volver a la lista"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:l.jsxs(Vce,{nodes:u,edges:h,onNodesChange:f,onEdgesChange:g,fitView:!0,nodeTypes:Dat,children:[l.jsx(bnt,{}),l.jsx(Nnt,{})]})}),l.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),l.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[l.jsxs("button",{onClick:()=>i("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[l.jsx(Iat,{})," Vista en árbol"]}),l.jsxs("button",{onClick:()=>i("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[l.jsx(Fat,{})," Vista central"]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:l.jsx(aue,{node:n,onUpdate:b,onAddChild:y,onDelete:w})}),l.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>B(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),l.jsx("button",{onClick:_,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:o?"Guardado!":"Guardar"})]})]})]})]})},Rat=({onBack:e,currentUser:t})=>{const[r,n]=S.useState("list"),[a,s]=S.useState([]),[i,o]=S.useState(null),[c,u]=S.useState(!1),[d,f]=S.useState(!0),[h,p]=S.useState(""),[g,x]=S.useState(""),[b,y]=S.useState("");S.useEffect(()=>{f(!0);const E=_at(N=>{s(N),f(!1)});return()=>E()},[]);const w=async E=>{if(E.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);const N="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",j=`
            Basado en el tema central "${h}", y considerando el contenido adicional "${b}", genera una estructura jerárquica para un mapa mental con al menos 3 niveles de profundidad.
            
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            
            La estructura del JSON debe ser un objeto raíz con las siguientes claves:
            - "label": El tema central ("${h}").
            - "icon": Un emoji que represente el tema.
            - "type": La categoría, que para el nodo raíz debe ser "Concepto Clave".
            - "children": Un array de 2 a 4 nodos hijos.

            Cada nodo hijo (y sus descendientes) debe tener esta misma estructura:
            - "label": El texto del subtema.
            - "icon": Un emoji representativo.
            - "type": Una categoría descriptiva (ej: "Concepto Clave", "Ejemplo Práctico", "Dato Interesante", "Pregunta Abierta").
            - "children": Un array de nodos hijos, o un array vacío si es un nodo final.
        `;try{const J=(await(await new us(N).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(j)).response).text().replace(/^```json\s*|```\s*$/g,""),V=JSON.parse(J),K=Q=>({id:crypto.randomUUID(),label:Q.label||"Sin etiqueta",icon:Q.icon||"🧠",type:Q.type||"default",children:(Q.children||[]).map(K)}),z=K(V),{nodes:G,edges:Y}=NO(z),ee={tema:h,nivel:g,treeData:z,nodes:G,edges:Y},P=await Sat(ee,t);o({...ee,id:P,createdAt:new Date().toISOString()}),n("editor")}catch(R){console.error("AI Generation Error:",R),alert("Hubo un error al generar el mapa mental. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{u(!1)}},_=async E=>{try{await Nat(E,t)}catch(N){console.error("Error saving mind map:",N),alert("No se pudo guardar el mapa mental.")}},B=E=>{o(E),n("editor")},k=async E=>{if(window.confirm("¿Eliminar este mapa mental?"))try{await kat(E)}catch(N){console.error("Error deleting mind map:",N),alert("No se pudo eliminar el mapa mental.")}},I=()=>{switch(r){case"editor":return i?l.jsx(nM,{children:l.jsx(Pat,{mapData:i,onBack:()=>n("list"),onSave:_})}):null;case"config":return l.jsxs("div",{className:"max-w-2xl mx-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),l.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"tema",value:h,onChange:E=>p(E.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),l.jsx("textarea",{id:"contenido",value:b,onChange:E=>y(E.target.value),rows:4,placeholder:"Añade más detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:c?l.jsx(Tat,{}):"Generar Mapa con IA"})})]})]});case"list":default:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),l.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length>0?a.map(E=>l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[l.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:E.tema}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(E.createdAt).toLocaleDateString("es-CL")]}),l.jsxs("div",{className:"mt-4 flex gap-2",children:[l.jsx("button",{onClick:()=>B(E),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),l.jsx("button",{onClick:()=>k(E.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},E.id)):l.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningún mapa mental todavía."})})]})}};return d?l.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("span",{className:"text-4xl",children:"🧠"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),I()]})},Lat=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Mat=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Uat=({onBack:e,currentUser:t})=>{const[r,n]=S.useState([]),[a,s]=S.useState("Media"),[i,o]=S.useState(10),[c,u]=S.useState(!1),[d,f]=S.useState(Array(10).fill("")),[h,p]=S.useState(""),[g,x]=S.useState(null),[b,y]=S.useState({ai:!1,puzzle:!1,data:!0}),w=S.useRef(null);S.useEffect(()=>{y(D=>({...D,data:!0}));const R=Bat(D=>{n(D),y(O=>({...O,data:!1}))});return()=>R()},[]),S.useEffect(()=>{f(R=>{const D=Array(i).fill("");for(let O=0;O<Math.min(R.length,i);O++)D[O]=R[O];return D})},[i]);const _=(R,D)=>{const O=[...d];O[R]=D,f(O)},B=async()=>{if(h.trim()){y(R=>({...R,ai:!0}));try{const R="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",O=new us(R).getGenerativeModel({model:"gemini-1.5-flash-latest"}),L=`
                Genera una lista de ${i} palabras clave en español, estrictamente relacionadas con el tema "${h}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una sola clave: "palabras".
                El valor de "palabras" debe ser un array de ${i} strings.
                Cada string en el array debe ser una sola palabra, sin espacios ni caracteres especiales.
            `,K=(await(await O.generateContent(L)).response).text().replace(/^```json\s*|```\s*$/g,""),z=JSON.parse(K);if(!z.palabras||!Array.isArray(z.palabras))throw new Error("La respuesta de la IA no contiene el array 'palabras' esperado.");const Y=[...z.palabras.map(ee=>ee.toUpperCase().replace(/[^A-ZÑ]/g,"")).slice(0,i)];for(;Y.length<i;)Y.push("");f(Y)}catch(R){console.error("Error generating words with AI:",R),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{y(R=>({...R,ai:!1}))}}},k=(R,D,O,L,M,J)=>{for(let V=0;V<R.length;V++){const K=O+V*M.y,z=L+V*M.x;if(K<0||K>=J||z<0||z>=J||D[K][z]&&D[K][z]!==R[V])return!1}return!0},I=(R,D,O,L,M)=>{for(let J=0;J<R.length;J++)D[O+J*M.y][L+J*M.x]=R[J]},E=async()=>{y(K=>({...K,puzzle:!0})),x(null),await new Promise(K=>setTimeout(K,100));const R=d.map(K=>K.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(R.length===0){alert("Por favor, ingrese al menos una palabra válida."),y(K=>({...K,puzzle:!1}));return}const D=Math.max(...R.map(K=>K.length));let O=Math.max(D,R.length)+2;a==="Media"&&(O+=3),a==="Difícil"&&(O+=5),O=Math.min(Math.max(O,10),25);const L=Array(O).fill(null).map(()=>Array(O).fill(null)),M=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];a!=="Fácil"&&M.push({x:1,y:-1}),a==="Difícil"&&M.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const K of R.sort((z,G)=>G.length-z.length)){let z=!1;for(let G=0;G<100;G++){const Y=M[Math.floor(Math.random()*M.length)],ee=Math.floor(Math.random()*O),P=Math.floor(Math.random()*O);if(k(K,L,ee,P,Y,O)){I(K,L,ee,P,Y),z=!0;break}}z||console.warn(`No se pudo colocar la palabra: ${K}`)}const J=L.map(K=>K.map(z=>z||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)])),V={tema:h||"Personalizado",grid:J.map(K=>K.join("")),words:R.sort()};try{const K=await jat(V,t);x({...V,id:K,createdAt:new Date().toISOString()})}catch(K){console.error("Error saving puzzle:",K),alert("No se pudo guardar la sopa de letras.")}finally{y(K=>({...K,puzzle:!1}))}},N=()=>{w.current&&Dk(w.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(R=>{const D=document.createElement("a");D.download="sopa-de-letras.png",D.href=R,D.click()}).catch(R=>{console.error("oops, something went wrong!",R),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})},j=()=>{var O;if(!g)return null;const R=((O=g.grid[0])==null?void 0:O.length)||1,D=g.grid.join("").split("");return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{ref:w,className:"p-6 bg-white",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[l.jsx("div",{className:"md:col-span-2",children:l.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${R}, minmax(0, 1fr))`},children:D.map((L,M)=>l.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:L},M))})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),l.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:g.words.map(L=>l.jsx("li",{children:L},L))})]})]})}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),l.jsx("button",{onClick:N,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return b.data?l.jsx("div",{className:"text-center py-10",children:"Cargando..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-4xl",children:"🅰️"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!g&&l.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),l.jsxs("select",{value:a,onChange:R=>s(R.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{children:"Fácil"}),l.jsx("option",{children:"Media"}),l.jsx("option",{children:"Difícil"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(R=>l.jsx("button",{onClick:()=>{o(R),u(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!c&&i===R?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:R},R)),l.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${c?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),c&&l.jsx("input",{type:"number",value:i,onChange:R=>o(parseInt(R.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:R=>p(R.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:B,disabled:b.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:b.ai?l.jsx(Lat,{}):l.jsxs(l.Fragment,{children:[l.jsx(Mat,{}),l.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((R,D)=>l.jsx("input",{type:"text",value:R,onChange:O=>_(D,O.target.value),placeholder:`Palabra ${D+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},D))})]}),l.jsx("div",{className:"text-right pt-4",children:l.jsx("button",{onClick:E,disabled:b.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:b.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),g&&j()]})},Qat=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Hat=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Vat=({timeline:e,onSave:t,onBack:r})=>{const[n,a]=S.useState(e),[s,i]=S.useState(null),o=S.useRef(null),c=(p,g,x)=>{a(b=>({...b,events:b.events.map(y=>y.id===p?{...y,[g]:x}:y)}))},u=()=>{const p={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},g=[...n.events,p].sort((x,b)=>parseInt(x.date)-parseInt(b.date));a(x=>({...x,events:g}))},d=p=>{a(g=>({...g,events:g.events.filter(x=>x.id!==p)}))},f=async p=>{if(!p.description.trim()){alert("Escribe al menos una idea en la descripción para que la IA la complete.");return}i(p.id);const g="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",x=`
            Para una línea de tiempo sobre "${n.tema}", toma la siguiente idea para un hito y mejórala.
            Idea del usuario: "${p.description}"

            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional, con tres claves:
            1. "date": El año o fecha más precisa y relevante para esta idea.
            2. "description": Una descripción concisa (máximo 15 palabras) para la línea de tiempo.
            3. "icon": Un único emoji que represente el hito.
        `;try{const k=(await(await new us(g).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(x)).response).text().replace(/^```json\s*|```\s*$/g,""),I=JSON.parse(k);a(E=>({...E,events:E.events.map(N=>N.id===p.id?{...N,date:I.date,description:I.description,icon:I.icon}:N).sort((N,j)=>parseInt(N.date)-parseInt(j.date))}))}catch(b){console.error("Error al generar descripción del hito:",b),alert("No se pudo autocompletar el hito.")}finally{i(null)}},h=()=>{o.current&&Dk(o.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(p=>{const g=document.createElement("a");g.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,g.href=p,g.click()}).catch(p=>{console.error("Error al generar la imagen:",p),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),l.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:l.jsxs("div",{ref:o,className:"relative p-10",children:[l.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),l.jsx("div",{className:"relative",children:n.events.sort((p,g)=>parseInt(p.date)-parseInt(g.date)).map((p,g)=>{const x=g%2===0;return l.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[l.jsx("div",{className:"w-1/2",children:x&&l.jsx("div",{className:"text-right pr-8",children:l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[l.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:p.icon}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:p.date}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:p.description})]})})}),l.jsx("div",{className:"z-10 flex-shrink-0",children:l.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),l.jsx("div",{className:"w-1/2",children:!x&&l.jsx("div",{className:"text-left pl-8",children:l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[l.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:p.icon}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:p.date}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:p.description})]})})})]},p.id)})})]})}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(p=>l.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[l.jsx("input",{type:"text",value:p.date,onChange:g=>c(p.id,"date",g.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("textarea",{value:p.description,onChange:g=>c(p.id,"description",g.target.value),placeholder:"Descripción",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),l.jsx("button",{onClick:()=>f(p),disabled:s===p.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:s===p.id?l.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):l.jsx(Hat,{})})]}),l.jsx("button",{onClick:()=>d(p.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},p.id))}),l.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[l.jsx("button",{onClick:u,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:h,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),l.jsx("button",{onClick:()=>t(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},zat=({onBack:e,currentUser:t})=>{const[r,n]=S.useState("list"),[a,s]=S.useState([]),[i,o]=S.useState(null),[c,u]=S.useState(!1),[d,f]=S.useState(!0),[h,p]=S.useState(""),[g,x]=S.useState(""),[b,y]=S.useState("");S.useEffect(()=>{f(!0);const k=yat(I=>{s(I),f(!1)});return()=>k()},[]);const w=async k=>{if(k.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);const I="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",E=g&&b?`entre ${g} y ${b}`:g?`a partir de ${g}`:b?`hasta ${b}`:"",N=`
            Genera una línea de tiempo sobre el tema "${h}" ${E}.
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            El objeto debe tener una clave "events", que es un array de 5 a 10 objetos.
            Cada objeto en el array "events" debe tener tres claves:
            1. "date": Un string con la fecha o el año del hito.
            2. "description": Un string con la descripción breve del hito (máximo 15 palabras).
            3. "icon": Un string con un único emoji que represente el hito.
            Ordena los eventos cronológicamente.
        `;try{const M=(await(await new us(I).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(N)).response).text().replace(/^```json\s*|```\s*$/g,""),J=JSON.parse(M);if(!J.events||!Array.isArray(J.events))throw new Error("La respuesta de la IA no tiene el formato de eventos esperado.");const V={tema:h,fechaInicio:g,fechaFin:b,events:J.events.map(z=>({id:crypto.randomUUID(),date:z.date||"Sin fecha",description:z.description||"Sin descripción",icon:z.icon||"🗓️"}))},K=await Eat(V,t);o({...V,id:K,createdAt:new Date().toISOString()}),n("editor")}catch(j){console.error("AI Generation Error:",j),alert("Hubo un error al generar la línea de tiempo. Por favor, revisa el formato del tema o inténtalo de nuevo.")}finally{u(!1)}},_=async k=>{try{await wat(k,t),n("list"),o(null)}catch(I){console.error("Error saving timeline:",I),alert("No se pudo guardar la línea de tiempo.")}},B=async k=>{if(window.confirm("¿Eliminar esta línea de tiempo?"))try{await Cat(k)}catch(I){console.error("Error deleting timeline:",I),alert("No se pudo eliminar la línea de tiempo.")}};return r==="editor"&&i?l.jsx(Vat,{timeline:i,onSave:_,onBack:()=>n("list")}):d?l.jsx("div",{className:"text-center py-10",children:"Cargando líneas de tiempo..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-4xl",children:"🕒"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"tema",value:h,onChange:k=>p(k.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),l.jsx("input",{type:"text",id:"fechaInicio",value:g,onChange:k=>x(k.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),l.jsx("input",{type:"text",id:"fechaFin",value:b,onChange:k=>y(k.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:c?l.jsx(Qat,{}):"Generar con IA"})})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),a.length>0?a.map(k=>l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:k.tema}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(k.createdAt).toLocaleDateString("es-CL")]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>{o(k),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),l.jsx("button",{onClick:()=>B(k.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},k.id)):l.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},$at=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),iW=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Gat=({onBack:e,currentUser:t})=>{const[r,n]=S.useState([]),[a,s]=S.useState(10),[i,o]=S.useState(!1),[c,u]=S.useState(Array(10).fill("")),[d,f]=S.useState(Array(10).fill("")),[h,p]=S.useState(""),[g,x]=S.useState(null),[b,y]=S.useState(!1),[w,_]=S.useState({ai:!1,puzzle:!1,data:!0}),[B,k]=S.useState(null),I=S.useRef(null);S.useEffect(()=>{_(J=>({...J,data:!0}));const M=vat(J=>{const V=J.map(K=>{const{grid_flat:z,grid_width:G,...Y}=K,ee=[];if(z&&G>0)for(let P=0;P<z.length;P+=G)ee.push(z.slice(P,P+G));return{...Y,grid:ee}});n(V),_(K=>({...K,data:!1}))});return()=>M()},[]),S.useEffect(()=>{const M=a;u(J=>Array.from({length:M},(V,K)=>J[K]||"")),f(J=>Array.from({length:M},(V,K)=>J[K]||""))},[a]);const E=(M,J)=>{const V=[...c];V[M]=J,u(V)},N=(M,J)=>{const V=[...d];V[M]=J,f(V)},j=async()=>{if(h.trim()){_(M=>({...M,ai:!0}));try{const M="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",V=new us(M).getGenerativeModel({model:"gemini-1.5-flash-latest"}),K=`
                Genera una lista de ${a} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${h}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una clave "items", que es un array de ${a} objetos.
                Cada objeto en el array "items" debe tener dos claves:
                1. "word": Un string con la palabra (sin espacios y en mayúsculas).
                2. "clue": Un string con la pista para esa palabra.
            `;let ee=(await(await V.generateContent(K)).response).text().replace(/^```json\s*|```\s*$/g,"").trim();const P=ee.indexOf("{"),Q=ee.lastIndexOf("}");P!==-1&&Q!==-1&&(ee=ee.substring(P,Q+1)),ee=ee.replace(/},\s*([\r\n\s]*){/g,"}__SPLIT__{"),ee.includes("__SPLIT__")&&(ee=ee.replace(/("items"\s*:\s*\[)([\s\S]*?)(\])/m,(se,oe,ce,me)=>{const ke=ce.split("__SPLIT__").map(ne=>ne.trim().replace(/,$/,""));return oe+ke.join(",")+me})),ee=ee.replace(/,\s*]/g,"]");let X;try{X=JSON.parse(ee)}catch{console.error("Respuesta IA no es JSON válido:",ee),alert("La respuesta de la IA no es un JSON válido. Intenta de nuevo o ajusta el tema."),_(oe=>({...oe,ai:!1}));return}if(!X.items||!Array.isArray(X.items))throw new Error("La respuesta de la IA no contiene la lista de 'items' esperada.");const te=X.items.map(se=>(se.word||"").toUpperCase().replace(/\s/g,"")),ae=X.items.map(se=>se.clue||"");u(Array.from({length:a},(se,oe)=>te[oe]||"")),f(Array.from({length:a},(se,oe)=>ae[oe]||""))}catch(M){console.error("Error generating words/clues with AI:",M),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{_(M=>({...M,ai:!1}))}}},R=async M=>{const J=c[M];if(!J||!J.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}k(M);try{const V="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",z=new us(V).getGenerativeModel({model:"gemini-1.5-flash-latest"}),G=`Para un crucigrama con el tema "${h||"general"}", genera una pista concisa y creativa para la palabra "${J}". La respuesta debe ser un único objeto JSON válido sin texto adicional, con una sola clave: "clue".`,Q=(await(await z.generateContent(G)).response).text().replace(/^```json\s*|```\s*$/g,""),X=JSON.parse(Q);X.clue&&N(M,X.clue)}catch(V){console.error("Error generating clue with AI:",V),alert("No se pudo generar la pista.")}finally{k(null)}},D=S.useCallback(()=>{try{const M=c.map((Ie,Me)=>({word:Ie.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:d[Me]})).filter(Ie=>Ie.word.length>0);if(M.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;M.sort((Ie,Me)=>Me.word.length-Ie.word.length);const J=M[0].word.length,V=Math.max(J,M.length)*2;let K=Array.from({length:V},()=>Array(V).fill(null));const z=[],G=M.shift(),Y=Math.floor(V/2),ee=Math.floor((V-G.word.length)/2);for(let Ie=0;Ie<G.word.length;Ie++)K[Y][ee+Ie]=G.word[Ie];z.push({word:G.word,clue:G.clue,direction:"across",row:Y,col:ee});for(const Ie of M){let Me={score:-1,row:-1,col:-1,direction:"across"};for(const Xe of z)for(let ye=0;ye<Xe.word.length;ye++)for(let Fe=0;Fe<Ie.word.length;Fe++)if(Xe.word[ye]===Ie.word[Fe]){let Re=0,Ge,Ke,Ze;Xe.direction==="across"?(Ze="down",Ge=Xe.row-Fe,Ke=Xe.col+ye):(Ze="across",Ge=Xe.row+ye,Ke=Xe.col-Fe);let ft=!0;for(let Nt=0;Nt<Ie.word.length;Nt++){const Tt=Ge+(Ze==="down"?Nt:0),St=Ke+(Ze==="across"?Nt:0);if(Tt<0||Tt>=V||St<0||St>=V){ft=!1;break}const Dt=K[Tt][St],gt=Tt===Xe.row+(Xe.direction==="down"?ye:0)&&St===Xe.col+(Xe.direction==="across"?ye:0);if(Dt&&!gt){ft=!1;break}if(Dt&&gt&&Dt!==Ie.word[Fe]){ft=!1;break}if(!gt){if(Ze==="across"&&(Tt>0&&K[Tt-1][St]||Tt<V-1&&K[Tt+1][St])){ft=!1;break}if(Ze==="down"&&(St>0&&K[Tt][St-1]||St<V-1&&K[Tt][St+1])){ft=!1;break}}Dt&&Re++}ft&&Re>Me.score&&(Me={score:Re,row:Ge,col:Ke,direction:Ze})}if(Me.score>-1){for(let Xe=0;Xe<Ie.word.length;Xe++){const ye=Me.row+(Me.direction==="down"?Xe:0),Fe=Me.col+(Me.direction==="across"?Xe:0);K[ye][Fe]=Ie.word[Xe]}z.push({word:Ie.word,clue:Ie.clue,direction:Me.direction,row:Me.row,col:Me.col})}}let P=V,Q=-1,X=V,te=-1;z.forEach(Ie=>{P=Math.min(P,Ie.row),Q=Math.max(Q,Ie.row+(Ie.direction==="down"?Ie.word.length-1:0)),X=Math.min(X,Ie.col),te=Math.max(te,Ie.col+(Ie.direction==="across"?Ie.word.length-1:0))}),Q===-1&&(P=z[0].row,Q=z[0].row,X=z[0].col,te=z[0].col+z[0].word.length-1);const ae=1,se=Math.max(0,P-ae),oe=Math.min(V,Q+1+ae),ce=Math.max(0,X-ae),me=Math.min(V,te+1+ae),ke=K.slice(se,oe).map(Ie=>Ie.slice(ce,me)),ne=z.map(Ie=>({...Ie,row:Ie.row-se,col:Ie.col-ce})).sort((Ie,Me)=>Ie.row-Me.row||Ie.col-Me.col);let _e=1;const De=[],Ne=new Map;ne.forEach(Ie=>{const Me=`${Ie.row},${Ie.col}`;Ne.has(Me)||Ne.set(Me,_e++),De.push({...Ie,number:Ne.get(Me)})});const fe=ke.map(Ie=>Ie.map(Me=>({char:Me,number:null})));return De.forEach(Ie=>{const Me=`${Ie.row},${Ie.col}`;fe[Ie.row]&&fe[Ie.row][Ie.col]!==void 0&&(fe[Ie.row][Ie.col].number=Ne.get(Me))}),{grid:fe,clues:{across:De.filter(Ie=>Ie.direction==="across").sort((Ie,Me)=>Ie.number-Me.number),down:De.filter(Ie=>Ie.direction==="down").sort((Ie,Me)=>Ie.number-Me.number)}}}catch(M){return console.error("Error generating crossword grid:",M),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[c,d]),O=async()=>{var J;_(V=>({...V,puzzle:!0})),x(null),await new Promise(V=>setTimeout(V,100));const M=D();if(M){const V={creadorId:t.id,creadorNombre:t.nombreCompleto,tema:h||"Personalizado",grid:M.grid,clues:M.clues},{grid:K,...z}=V,G={...z,grid_flat:K.flat().map(Y=>Y.char||""),grid_width:((J=K[0])==null?void 0:J.length)||0};try{const Y=await bat(G,t);x({...V,id:Y,fechaCreacion:new Date().toISOString()})}catch(Y){console.error("Error saving puzzle:",Y),alert("No se pudo guardar el crucigrama en la base de datos.")}}_(V=>({...V,puzzle:!1}))},L=()=>{I.current&&(y(!1),setTimeout(()=>{Dk(I.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(M=>{const J=document.createElement("a");J.download="crucigrama.png",J.href=M,J.click()}).catch(M=>console.error("Error generating image",M))},100))};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-4xl",children:"✏️"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),g?l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{ref:I,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[l.jsx("div",{children:l.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${g.grid[0].length}, 2rem)`},children:g.grid.flat().map((M,J)=>l.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:M.char?"white":"black"},children:[M.number&&l.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:M.number}),b&&M.char&&l.jsx("span",{children:M.char})]},J))})}),l.jsxs("div",{className:"text-sm",children:[l.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),l.jsx("ul",{className:"space-y-1",children:g.clues.across.map(M=>l.jsxs("li",{children:[l.jsxs("strong",{children:[M.number,"."]})," ",M.clue]},`${M.word}-${M.clue}`))}),l.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),l.jsx("ul",{className:"space-y-1",children:g.clues.down.map(M=>l.jsxs("li",{children:[l.jsxs("strong",{children:[M.number,"."]})," ",M.clue]},`${M.word}-${M.clue}`))})]})]})}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("label",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:b,onChange:()=>y(!b),className:"h-5 w-5 rounded"}),l.jsx("span",{children:"Mostrar Solución"})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),l.jsx("button",{onClick:L,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):l.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(M=>l.jsx("button",{onClick:()=>{s(M),o(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!i&&a===M?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:M},M)),l.jsx("button",{onClick:()=>o(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${i?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),i&&l.jsx("input",{type:"number",value:a,onChange:M=>s(parseInt(M.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:M=>p(M.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:j,disabled:w.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:w.ai?l.jsx($at,{}):l.jsxs(l.Fragment,{children:[l.jsx(iW,{}),l.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),l.jsx("div",{className:"space-y-3",children:Array.from({length:a}).map((M,J)=>l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsx("input",{type:"text",value:c[J],onChange:V=>E(J,V.target.value),placeholder:`Palabra ${J+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[l.jsx("textarea",{value:d[J],onChange:V=>N(J,V.target.value),placeholder:`Pista ${J+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:()=>R(J),disabled:B===J,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:B===J?l.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):l.jsx(iW,{})})]})]},J))}),l.jsx("div",{className:"text-right pt-4",children:l.jsx("button",{onClick:O,disabled:w.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:w.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},Kat=()=>{const[e,t]=S.useState(null),[r,n]=S.useState(!0);return S.useEffect(()=>{const a=KY(Q6,async s=>{if(s&&s.email)try{const i=await cee(s.email);t(i)}catch(i){console.error("Error al obtener el perfil del usuario:",i),t(null)}else t(null);n(!1)});return()=>a()},[]),{currentUser:e,loading:r}},qat=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],Wat=({recurso:e,onClick:t})=>l.jsxs("button",{onClick:t,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[l.jsx("div",{className:"text-6xl mb-4",children:e.icon}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:e.nombre}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:e.descripcion})]}),Xat=()=>{const[e,t]=S.useState("menu"),{currentUser:r}=Kat(),n=()=>e!=="menu"&&!r?l.jsx("div",{className:"text-center p-8",children:"Cargando información de usuario..."}):e==="mapasMentales"?l.jsx(Rat,{onBack:()=>t("menu"),currentUser:r}):e==="sopaDeLetras"?l.jsx(Uat,{onBack:()=>t("menu"),currentUser:r}):e==="lineasDeTiempo"?l.jsx(zat,{onBack:()=>t("menu"),currentUser:r}):e==="crucigramas"?l.jsx(Gat,{onBack:()=>t("menu"),currentUser:r}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:qat.map(a=>l.jsx(Wat,{recurso:a,onClick:()=>t(a.id)},a.id))})]});return l.jsx("div",{className:"animate-fade-in space-y-6",children:n()})},Yat="evaluaciones_formativas",Jat="calificaciones_formativas",sue="trabajos_grupales_formativos",iue=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},Zat=(e,t)=>{const r=$t(kt(ht,Yat),Jr("curso","==",e));return pr(r,n=>{t(n.docs.map(a=>iue(a)))},n=>{console.error("Error subscribing to student evaluations:",n),t([])})},est=e=>{const t=$t(kt(ht,Jat));return pr(t,r=>{const n={};r.forEach(a=>{n[a.id]=a.data()}),e(n)},r=>{console.error("Error subscribing to grades:",r),e({})})},tst=(e,t)=>{const r=$t(kt(ht,sue),Jr("curso","==",e));return pr(r,n=>{t(n.docs.map(a=>iue(a)))},n=>{console.error("Error subscribing to group projects:",n),t([])})},rst=async e=>{try{const{id:t,...r}=e,n=dr(ht,sue,t);await Ji(n,r)}catch(t){throw console.error("Error updating group project:",t),new Error("Could not update group project.")}},nst=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState({}),[s,i]=S.useState([]),[o,c]=S.useState(!0),[u,d]=S.useState(null),[f,h]=S.useState(!1),[p,g]=S.useState(null),x=S.useRef(null);S.useEffect(()=>{if(!e.curso){c(!1);return}c(!0);const B=Zat(e.curso,r),k=est(a),I=tst(e.curso,E=>{i(E),c(!1)});return()=>{B(),k(),I()}},[e.curso]);const b=S.useMemo(()=>{if(!e.curso)return[];const k=t.filter(I=>I.curso===e.curso).reduce((I,E)=>((I[E.asignatura]=I[E.asignatura]||[]).push(E),I),{});return Object.entries(k).map(([I,E])=>{let N=0,j=0;const R=E.map(O=>{var J;const L=(J=n[O.id])==null?void 0:J[e.nombreCompleto];let M="No Trabajado";return L==="trabajado"?(N+=7,j++,M="Trabajado"):L==="no trabajado"&&(N+=2,j++,M="No Trabajado"),{id:O.id,nombreActividad:O.nombreActividad,fecha:O.fecha,estado:M}}).filter(O=>{var L;return(L=n[O.id])==null?void 0:L[e.nombreCompleto]}),D=j>0?(N/j).toFixed(1):"N/A";return{asignatura:I,promedio:D,actividades:R.sort((O,L)=>new Date(L.fecha).getTime()-new Date(O.fecha).getTime())}}).filter(I=>I.actividades.length>0).sort((I,E)=>I.asignatura.localeCompare(E.asignatura))},[t,n,e]);S.useEffect(()=>{if(b.reduce((j,R)=>j+R.actividades.length,0)===0){d(null);return}const k=b.reduce((j,R)=>{const D=parseFloat(R.promedio);return isNaN(D)?j:j+D},0),I=b.length>0?k/b.length:0,E=CC.find(j=>I>=j.promedioMin&&I<=j.promedioMax)||null,N=CC.filter(j=>I>=j.promedioMin);if(d({puntajeTotal:0,promedio:I,rangoActual:E,insigniasGanadas:N}),x.current!==null){const j=CC.find(R=>x.current>=R.promedioMin&&x.current<=R.promedioMax)||null;E&&(!j||E.nombre!==j.nombre)&&g(E)}x.current=I},[b]);const y=S.useMemo(()=>e.curso?s.filter(B=>B.curso===e.curso).map(B=>{const k=B.grupos.find(I=>I.integrantes.some(E=>E.nombre===e.nombreCompleto));return k?{...B,miGrupo:k}:null}).filter(B=>B!==null).sort((B,k)=>new Date(k.fechaPresentacion).getTime()-new Date(B.fechaPresentacion).getTime()):[],[s,e]),w=async(B,k)=>{const I=s.find(N=>N.id===B);if(!I)return;const E={...I,grupos:I.grupos.map(N=>N.integrantes.some(R=>R.nombre===e.nombreCompleto)?{...N,integrantes:N.integrantes.map(R=>R.nombre===e.nombreCompleto?{...R,rol:k||void 0}:R)}:N)};try{await rst(E)}catch(N){console.error("Error updating role:",N),alert("No se pudo actualizar el rol.")}},_=B=>{const k=parseFloat(B);return isNaN(k)?"bg-slate-400":k<4?"bg-red-500":k<5.5?"bg-yellow-500":"bg-green-500"};return o?l.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[p&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>g(null),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:B=>B.stopPropagation(),children:[l.jsx("div",{className:"text-8xl animate-bounce",children:p.emoji}),l.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),l.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:p.nombre}),l.jsx("p",{className:"text-slate-600 mt-4",children:p.mensaje}),l.jsx("button",{onClick:()=>g(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),f&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>h(!1),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:B=>B.stopPropagation(),children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),l.jsx("div",{className:"overflow-y-auto space-y-3",children:CC.map(B=>{const k=u==null?void 0:u.insigniasGanadas.some(I=>I.nombre===B.nombre);return l.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${k?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[l.jsx("div",{className:"text-5xl",children:B.emoji}),l.jsxs("div",{children:[l.jsx("h3",{className:`font-bold ${k?"text-amber-700":"text-slate-600"}`,children:B.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",B.promedioMin," y ",B.promedioMax]})]})]},B.nombre)})})]})}),l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&l.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),l.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),l.jsx("button",{onClick:()=>h(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),l.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),l.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),b.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(B=>l.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800",children:B.asignatura}),l.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),l.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${_(B.promedio)}`,children:B.promedio})]}),l.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),B.actividades.map(k=>l.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-700",children:k.nombreActividad}),l.jsx("p",{className:"text-xs text-slate-500",children:new Date(k.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),l.jsx("span",{className:`font-semibold ${k.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:k.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},k.id))]})]},B.asignatura))}):l.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[l.jsx("span",{className:"text-5xl",children:"📊"}),l.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),l.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),y.length>0&&l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),l.jsx("div",{className:"space-y-4",children:y.map(B=>{const k=B.miGrupo.integrantes.filter(E=>E.nombre!==e.nombreCompleto&&E.rol).map(E=>E.rol),I=dee.filter(E=>!k.includes(E));return l.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[l.jsx("h3",{className:"font-bold text-slate-800",children:B.nombreActividad}),l.jsxs("p",{className:"text-sm text-slate-500",children:[B.asignatura," - Presentación: ",new Date(B.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),l.jsxs("div",{className:"mt-3 pt-3 border-t",children:[l.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",B.miGrupo.numero]}),l.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:B.miGrupo.integrantes.map(E=>l.jsxs("li",{className:"grid grid-cols-2 items-center",children:[l.jsx("span",{className:E.nombre===e.nombreCompleto?"font-bold":"",children:E.nombre}),E.nombre===e.nombreCompleto?l.jsxs("select",{value:E.rol||"",onChange:N=>w(B.id,N.target.value),className:"text-sm p-1 border rounded w-full",children:[l.jsx("option",{value:"",children:"-- Seleccionar rol --"}),E.rol&&!I.includes(E.rol)&&l.jsx("option",{value:E.rol,children:E.rol}),I.map(N=>l.jsx("option",{value:N,children:N},N))]}):l.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:E.rol||"Sin rol"})]},E.nombre))})]})]},B.id)})})]})]})},ast="proyectos_interdisciplinarios",oue="entregas_interdisciplinarias",lue=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaCompletado:((s=(a=t.fechaCompletado)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaCompletado}},sst=(e,t)=>{const r=$t(kt(ht,ast),Jr("cursos","array-contains",e));return pr(r,n=>{const a=n.docs.map(s=>lue(s));t(a)},n=>{console.error("Error al suscribirse a los proyectos:",n),t([])})},ist=(e,t)=>{const r=$t(kt(ht,oue),Jr("estudianteId","==",e));return pr(r,n=>{const a=n.docs.map(s=>lue(s));t(a)},n=>{console.error("Error al suscribirse a las entregas:",n),t([])})},ost=async e=>{try{const{id:t,...r}=e,n=dr(ht,oue,t),a={...r,fechaCompletado:sr.fromDate(new Date(r.fechaCompletado||Date.now()))};await Ji(n,a,{merge:!0})}catch(t){throw console.error("Error al actualizar la entrega:",t),new Error("No se pudo guardar la entrega.")}},lst=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState([]),[s,i]=S.useState(null),[o,c]=S.useState(!0);S.useEffect(()=>{if(!e.curso||!e.id){c(!1);return}c(!0);const f=sst(e.curso,r),h=ist(e.id,p=>{a(p),c(!1)});return()=>{f(),h()}},[e.curso,e.id]);const u=async f=>{try{await ost(f)}catch(h){console.error("Failed to update submission:",h),alert("Hubo un error al guardar tu entrega.")}},d=({plan:f,tarea:h})=>{const p=S.useMemo(()=>{const k=n.find(I=>I.planificacionId===f.id&&I.tareaId===h.id);return k||{id:`${f.id}_${h.id}_${e.id}`,planificacionId:f.id,tareaId:h.id,estudianteId:e.id,estudianteNombre:e.nombreCompleto,completada:!1}},[f.id,h.id,n]),[g,x]=S.useState(!1),[b,y]=S.useState({observaciones:p.observacionesEstudiante||"",enlace:p.enlaceUrl||""}),w=k=>{var E;const I=(E=k.target.files)==null?void 0:E[0];I&&(alert(`Simulación: Archivo "${I.name}" listo para subir.`),u({...p,archivoAdjunto:{nombre:I.name,url:`simulated/path/${I.name}`},fechaCompletado:new Date().toISOString()}))},_=()=>{u({...p,observacionesEstudiante:b.observaciones,enlaceUrl:b.enlace,fechaCompletado:new Date().toISOString()})},B=()=>{u({...p,completada:!p.completada,fechaCompletado:new Date().toISOString()})};return l.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("input",{type:"checkbox",checked:p.completada,onChange:B,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:`font-semibold ${p.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",h.numero,": ",h.instrucciones]}),l.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",h.fechaEntrega]}),h.recursoUrl&&l.jsx("a",{href:h.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),l.jsx("button",{onClick:()=>x(!g),className:"text-sm font-semibold",children:g?"Ocultar":"Entregar"})]}),g&&l.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[l.jsx("textarea",{value:b.observaciones,onChange:k=>y({...b,observaciones:k.target.value}),onBlur:_,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),l.jsx("input",{type:"url",value:b.enlace,onChange:k=>y({...b,enlace:k.target.value}),onBlur:_,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),l.jsx("input",{type:"file",onChange:w,className:"text-sm"}),p.archivoAdjunto&&l.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",p.archivoAdjunto.nombre]})]}),p.feedbackProfesor&&l.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[l.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),l.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:p.feedbackProfesor})]})]})};return o?l.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),t.length>0?t.map(f=>{const h=f.tareas||[],g=n.filter(b=>b.planificacionId===f.id).filter(b=>b.completada).length,x=h.length>0?g/h.length*100:0;return l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[l.jsxs("button",{onClick:()=>i(s===f.id?null:f.id),className:"w-full text-left",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:f.nombreProyecto}),l.jsxs("div",{className:"mt-2 space-y-1",children:[l.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[l.jsx("span",{children:"Progreso"}),l.jsxs("span",{children:[Math.round(x),"%"]})]}),l.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:l.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${x}%`}})})]})]}),s===f.id&&l.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:h.length>0?h.map(b=>l.jsx(d,{plan:f,tarea:b},b.id)):l.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},f.id)}):l.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[l.jsx("span",{className:"text-5xl",children:"🎉"}),l.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),l.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},cst=({data:e})=>l.jsx("div",{className:"space-y-4",children:e.map((r,n)=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),l.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:l.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),ust=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState(!1),[s,i]=S.useState(null),[o,c]=S.useState(null),[u,d]=S.useState(Jy),f=S.useCallback(async()=>{a(!0);try{const b=(await BYe(e.nombreCompleto)).sort((y,w)=>new Date(w.fecha).getTime()-new Date(y.fecha).getTime());r(b),i(null)}catch(x){console.error("Error al cargar acompañamientos desde Firestore",x),i("No se pudieron cargar tus acompañamientos desde la nube.")}finally{a(!1)}},[e.nombreCompleto]),h=S.useCallback(async()=>{try{const x=await jYe();x&&d(x)}catch(x){console.error("Error al cargar rúbrica personalizada",x)}},[]);S.useEffect(()=>{f(),h()},[f,h]);const p=S.useMemo(()=>{if(!o)return[];const x={};return u.forEach(b=>{x[b.domain]={total:0,count:0},b.criteria.forEach(y=>{const w=o.rubricaResultados[y.name];w&&(x[b.domain].total+=w,x[b.domain].count++)})}),Object.entries(x).map(([b,y])=>({label:b,value:y.count>0?y.total/y.count:0}))},[o,u]),g=x=>{const b=new vr;b.setFont("helvetica","bold"),b.setFontSize(10),b.setTextColor(100),b.text("LICEO INDUSTRIAL DE RECOLETA",b.internal.pageSize.getWidth()/2,15,{align:"center"}),b.setFont("helvetica","bold"),b.setFontSize(16),b.setTextColor(40),b.text("Informe de Acompañamiento Docente",b.internal.pageSize.getWidth()/2,25,{align:"center"}),b.setFontSize(12),b.setFont("helvetica","normal"),bo(b,{startY:35,body:[["Docente:",x.docente],["Fecha:",new Date(x.fecha).toLocaleDateString("es-CL")],["Asignatura:",x.asignatura],["Curso:",x.curso],["Bloques:",x.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let y=b.lastAutoTable.finalY+15;if(Object.keys(x.rubricaResultados).length>0){const B=[],k=["Débil","Incipiente","Satisfactorio","Avanzado"];u.forEach(I=>{B.push([{content:I.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),I.criteria.forEach(E=>{const N=x.rubricaResultados[E.name],j=N?k[N-1]:"No evaluado";B.push([E.name,j])})}),bo(b,{startY:y,head:[["Indicador","Nivel de Logro"]],body:B,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),y=b.lastAutoTable.finalY+15}const w=(B,k)=>{if(!k)return;y>250&&(b.addPage(),y=20,b.setFont("helvetica","bold"),b.setFontSize(10),b.setTextColor(100),b.text("LICEO INDUSTRIAL DE RECOLETA",b.internal.pageSize.getWidth()/2,15,{align:"center"}),y=25),b.setFont("helvetica","bold"),b.setFontSize(14),b.setTextColor(40),b.text(B,14,y),y+=8,b.setFont("helvetica","normal"),b.setFontSize(11),b.setTextColor(60);const I=b.splitTextToSize(k.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);b.text(I,14,y),y+=I.length*5+10};w("Observaciones Generales",x.observacionesGenerales),w("Retroalimentación Consolidada",x.retroalimentacionConsolidada);const _=b.getNumberOfPages();for(let B=1;B<=_;B++)b.setPage(B),b.setFontSize(8),b.setTextColor(128),b.text(`Página ${B} de ${_}`,b.internal.pageSize.getWidth()/2,b.internal.pageSize.getHeight()-10,{align:"center"});b.save(`Acompanamiento_${e.nombreCompleto.replace(/\s/g,"_")}_${new Date(x.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return o?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("button",{onClick:()=>c(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(o.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",o.curso," - ",o.asignatura]})]}),l.jsxs("button",{onClick:()=>g(o),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[l.jsx(uee,{})," Exportar PDF"]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-2 space-y-6",children:l.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[l.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx("p",{className:"whitespace-pre-wrap",children:o.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),l.jsx("h3",{children:"Observaciones Generales"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx("p",{className:"whitespace-pre-wrap",children:o.observacionesGenerales||"Sin observaciones."})})]})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx(cst,{data:p})})]})]})]}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),n&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompañamientos desde la nube..."}),s&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),!n&&t.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompañamientos registrados en la nube."}),l.jsx("div",{className:"space-y-4",children:!n&&t.length>0?t.map(x=>l.jsx("button",{onClick:()=>c(x),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[x.curso," - ",x.asignatura]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(x.fecha).toLocaleDateString("es-CL"),x.bloques&&` | Bloques: ${x.bloques}`]}),Object.keys(x.rubricaResultados).length>0&&l.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(x.rubricaResultados).length," criterios"]})]}),l.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},x.id)):!n&&l.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[l.jsx("span",{className:"text-5xl",children:"👍"}),l.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})})]})},dst=e=>{console.log("🔄 Iniciando suscripción a todas las planificaciones...");try{const t=kt(xn,"planificaciones"),r=$t(t,Sr("fechaCreacion","desc"));return pr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Todas las planificaciones cargadas:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar todas las planificaciones:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a todas las planificaciones:",t),t}},Ast=(e,t)=>{if(console.log("🔄 Iniciando suscripción a planificaciones del usuario:",e),!e)throw console.error("❌ userId no proporcionado"),new Error("userId es requerido");try{const r=kt(xn,"planificaciones"),n=$t(r,Jr("userId","==",e),Sr("fechaCreacion","desc"));return pr(n,s=>{const i=[];s.forEach(o=>{const c=o.data();i.push({id:o.id,...c})}),console.log("✅ Planificaciones del usuario cargadas:",i.length),t(i)},s=>{throw console.error("❌ Error al cargar planificaciones del usuario:",s),s})}catch(r){throw console.error("❌ Error al configurar suscripción a planificaciones del usuario:",r),r}};function fst(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}const hst=fst("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var mst={value:function(){}};function cue(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new A5(r)}function A5(e){this._=e}function pst(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}A5.prototype=cue.prototype={constructor:A5,on:function(e,t){var r=this._,n=pst(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=gst(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=oW(r[a],e.name,t);else if(t==null)for(a in r)r[a]=oW(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new A5(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function gst(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function oW(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=mst,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}const xst=Object.freeze(Object.defineProperty({__proto__:null,dispatch:cue},Symbol.toStringTag,{value:"Module"})),vst=yfe(xst);var xI,lW;function bst(){if(lW)return xI;lW=1;const e=vst.dispatch,t=Math.PI/180,r={archimedean:x,rectangular:b},n=64,a=2048;xI=function(){var B=[256,256],k=s,I=i,E=c,N=o,j=o,R=u,D=d,O=x,L=[],M=1/0,J=e("word","end"),V=null,K=Math.random,z={},G=w;z.canvas=function(P){return arguments.length?(G=_(P),z):G},z.start=function(){var P=Y(G()),Q=y((B[0]>>5)*B[1]),X=null,te=L.length,ae=-1,se=[],oe=L.map(function(me,ke){return me.text=k.call(this,me,ke),me.font=I.call(this,me,ke),me.style=N.call(this,me,ke),me.weight=j.call(this,me,ke),me.rotate=R.call(this,me,ke),me.size=~~E.call(this,me,ke),me.padding=D.call(this,me,ke),me}).sort(function(me,ke){return ke.size-me.size});return V&&clearInterval(V),V=setInterval(ce,0),ce(),z;function ce(){for(var me=Date.now();Date.now()-me<M&&++ae<te&&V;){var ke=oe[ae];ke.x=B[0]*(K()+.5)>>1,ke.y=B[1]*(K()+.5)>>1,f(P,ke,oe,ae),ke.hasText&&ee(Q,ke,X)&&(se.push(ke),J.call("word",z,ke),X?p(X,ke):X=[{x:ke.x+ke.x0,y:ke.y+ke.y0},{x:ke.x+ke.x1,y:ke.y+ke.y1}],ke.x-=B[0]>>1,ke.y-=B[1]>>1)}ae>=te&&(z.stop(),J.call("end",z,se,X))}},z.stop=function(){V&&(clearInterval(V),V=null);for(const P of L)delete P.sprite;return z};function Y(P){const Q=P.getContext("2d",{willReadFrequently:!0});P.width=P.height=1;const X=Math.sqrt(Q.getImageData(0,0,1,1).data.length>>2);return P.width=(n<<5)/X,P.height=a/X,Q.fillStyle=Q.strokeStyle="red",{context:Q,ratio:X}}function ee(P,Q,X){B[0],B[1];for(var te=Q.x,ae=Q.y,se=Math.sqrt(B[0]*B[0]+B[1]*B[1]),oe=O(B),ce=K()<.5?1:-1,me=-ce,ke,ne,_e;(ke=oe(me+=ce))&&(ne=~~ke[0],_e=~~ke[1],!(Math.min(Math.abs(ne),Math.abs(_e))>=se));)if(Q.x=te+ne,Q.y=ae+_e,!(Q.x+Q.x0<0||Q.y+Q.y0<0||Q.x+Q.x1>B[0]||Q.y+Q.y1>B[1])&&(!X||g(Q,X))&&!h(Q,P,B[0])){for(var De=Q.sprite,Ne=Q.width>>5,fe=B[0]>>5,Ie=Q.x-(Ne<<4),Me=Ie&127,Xe=32-Me,ye=Q.y1-Q.y0,Fe=(Q.y+Q.y0)*fe+(Ie>>5),Re,Ge=0;Ge<ye;Ge++){Re=0;for(var Ke=0;Ke<=Ne;Ke++)P[Fe+Ke]|=Re<<Xe|(Ke<Ne?(Re=De[Ge*Ne+Ke])>>>Me:0);Fe+=fe}return!0}return!1}return z.timeInterval=function(P){return arguments.length?(M=P??1/0,z):M},z.words=function(P){return arguments.length?(L=P,z):L},z.size=function(P){return arguments.length?(B=[+P[0],+P[1]],z):B},z.font=function(P){return arguments.length?(I=_(P),z):I},z.fontStyle=function(P){return arguments.length?(N=_(P),z):N},z.fontWeight=function(P){return arguments.length?(j=_(P),z):j},z.rotate=function(P){return arguments.length?(R=_(P),z):R},z.text=function(P){return arguments.length?(k=_(P),z):k},z.spiral=function(P){return arguments.length?(O=r[P]||P,z):O},z.fontSize=function(P){return arguments.length?(E=_(P),z):E},z.padding=function(P){return arguments.length?(D=_(P),z):D},z.random=function(P){return arguments.length?(K=P,z):K},z.on=function(){var P=J.on.apply(J,arguments);return P===J?z:P},z};function s(B){return B.text}function i(){return"serif"}function o(){return"normal"}function c(B){return Math.sqrt(B.value)}function u(){return(~~(random()*6)-3)*30}function d(){return 1}function f(B,k,I,E){if(!k.sprite){var N=B.context,j=B.ratio;N.clearRect(0,0,(n<<5)/j,a/j);var R=0,D=0,O=0,L=I.length;for(--E;++E<L;){k=I[E],N.save(),N.font=k.style+" "+k.weight+" "+~~((k.size+1)/j)+"px "+k.font;const ke=N.measureText(k.text),ne=-Math.floor(ke.width/2);let _e=(ke.width+1)*j,De=k.size<<1;if(k.rotate){var M=Math.sin(k.rotate*t),J=Math.cos(k.rotate*t),V=_e*J,K=_e*M,z=De*J,G=De*M;_e=Math.max(Math.abs(V+G),Math.abs(V-G))+31>>5<<5,De=~~Math.max(Math.abs(K+z),Math.abs(K-z))}else _e=_e+31>>5<<5;if(De>O&&(O=De),R+_e>=n<<5&&(R=0,D+=O,O=0),D+De>=a)break;N.translate((R+(_e>>1))/j,(D+(De>>1))/j),k.rotate&&N.rotate(k.rotate*t),N.fillText(k.text,ne,0),k.padding&&(N.lineWidth=2*k.padding,N.strokeText(k.text,ne,0)),N.restore(),k.width=_e,k.height=De,k.xoff=R,k.yoff=D,k.x1=_e>>1,k.y1=De>>1,k.x0=-k.x1,k.y0=-k.y1,k.hasText=!0,R+=_e}for(var Y=N.getImageData(0,0,(n<<5)/j,a/j).data,ee=[];--E>=0;)if(k=I[E],!!k.hasText){for(var P=k.width,Q=P>>5,X=k.y1-k.y0,te=0;te<X*Q;te++)ee[te]=0;if(R=k.xoff,R==null)return;D=k.yoff;for(var ae=0,se=-1,oe=0;oe<X;oe++){for(var te=0;te<P;te++){var ce=Q*oe+(te>>5),me=Y[(D+oe)*(n<<5)+(R+te)<<2]?1<<31-te%32:0;ee[ce]|=me,ae|=me}ae?se=oe:(k.y0++,X--,oe--,D++)}k.y1=k.y0+se,k.sprite=ee.slice(0,(k.y1-k.y0)*Q)}}}function h(B,k,I){I>>=5;for(var E=B.sprite,N=B.width>>5,j=B.x-(N<<4),R=j&127,D=32-R,O=B.y1-B.y0,L=(B.y+B.y0)*I+(j>>5),M,J=0;J<O;J++){M=0;for(var V=0;V<=N;V++)if((M<<D|(V<N?(M=E[J*N+V])>>>R:0))&k[L+V])return!0;L+=I}return!1}function p(B,k){var I=B[0],E=B[1];k.x+k.x0<I.x&&(I.x=k.x+k.x0),k.y+k.y0<I.y&&(I.y=k.y+k.y0),k.x+k.x1>E.x&&(E.x=k.x+k.x1),k.y+k.y1>E.y&&(E.y=k.y+k.y1)}function g(B,k){return B.x+B.x1>k[0].x&&B.x+B.x0<k[1].x&&B.y+B.y1>k[0].y&&B.y+B.y0<k[1].y}function x(B){var k=B[0]/B[1];return function(I){return[k*(I*=.1)*Math.cos(I),I*Math.sin(I)]}}function b(B){var k=4,I=k*B[0]/B[1],E=0,N=0;return function(j){var R=j<0?-1:1;switch(Math.sqrt(1+4*R*j)-R&3){case 0:E+=I;break;case 1:N+=k;break;case 2:E-=I;break;default:N-=k;break}return[E,N]}}function y(B){for(var k=[],I=-1;++I<B;)k[I]=0;return k}function w(){return document.createElement("canvas")}function _(B){return typeof B=="function"?B:function(){return B}}return xI}var yst=bst();const wst=Cl(yst),Est=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),Cst=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),_st=()=>l.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Nst=e=>{const[t,r]=S.useState([]),[n,a]=S.useState(!0),[s,i]=S.useState(null),o=S.useMemo(()=>(e==null?void 0:e.profile)==="SUBDIRECCION",[e]);return S.useEffect(()=>{if(!(e!=null&&e.email)&&!(e!=null&&e.id)){i("Usuario no autenticado"),a(!1);return}try{let c;const u=d=>{r(d),a(!1),i(null)};if(o)c=dst(u);else{const d=e.email||e.id||"";c=Ast(u,d)}return c}catch(c){i(c instanceof Error?c.message:"Error al conectar con la base de datos"),a(!1)}},[e,o]),{planificaciones:t,loading:n,error:s,canViewAllPlans:o}},Sst=({plan:e,onClose:t})=>l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:r=>r.stopPropagation(),children:[l.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreUnidad}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.asignatura," | ",e.nivel," | Autor: ",e.autor||"N/A"]})]}),l.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:l.jsx(Cst,{})})]}),l.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[l.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),l.jsxs("p",{className:"mt-2",children:[l.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),l.jsx("div",{className:"mt-3",children:l.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof e.progreso=="number"?`${e.progreso}%`:"No registrado"]})})]}),l.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",e.detallesLeccion.length,")"]}),l.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:e.detallesLeccion.map((r,n)=>l.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[l.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",n+1,": ",r.actividades]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsxs("span",{children:[l.jsx("strong",{children:"Objetivo:"})," ",r.objetivosAprendizaje]}),l.jsxs("span",{children:[l.jsx("strong",{children:"Contenidos:"})," ",r.contenidosConceptuales]})]})]},n))}),e.reflexionUnidad&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexión Docente"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),e.reflexionUnidad.ordenHabilidades&&e.reflexionUnidad.ordenHabilidades.length>0?l.jsx("ul",{className:"space-y-2",children:e.reflexionUnidad.ordenHabilidades.map((r,n)=>l.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[l.jsxs("span",{className:"font-bold text-amber-500",children:[n+1,"."]})," ",r]},r))}):l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.fortalezas||"N/A"})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.mejoras||"N/A"})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafíos"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),cW=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],kst=["1º Medio","2º Medio","3º Medio","4º Medio"],Bst=({words:e})=>{const t=S.useRef(null);return S.useEffect(()=>{if(!e.length||!t.current)return;const r=ju(t.current);r.selectAll("*").remove();const n=wst().size([500,350]).words(e.map(s=>({...s}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(s=>Math.sqrt(s.value)*12).on("end",a);n.start();function a(s){r.attr("width",n.size()[0]).attr("height",n.size()[1]).append("g").attr("transform",`translate(${n.size()[0]/2},${n.size()[1]/2})`).selectAll("text").data(s).enter().append("text").style("font-size",i=>`${i.size}px`).style("font-family","Impact").style("fill",(i,o)=>L4(hst)(o.toString())).attr("text-anchor","middle").attr("transform",i=>`translate(${[i.x,i.y]})rotate(${i.rotate})`).text(i=>i.text)}},[e]),l.jsx("svg",{ref:t})},jst=({planificaciones:e})=>{const[t,r]=S.useState("todos"),[n,a]=S.useState("todos"),s=S.useMemo(()=>["todos",...Array.from(new Set(e.map(d=>d.asignatura)))],[e]),i=S.useMemo(()=>e.filter(d=>(t==="todos"||d.nivel===t)&&(n==="todos"||d.asignatura===n)&&d.reflexionUnidad),[e,t,n]),o=S.useMemo(()=>{const d=cW.reduce((f,h)=>({...f,[h]:0}),{});return i.forEach(f=>{var h,p;return(p=(h=f.reflexionUnidad)==null?void 0:h.ordenHabilidades)==null?void 0:p.forEach((g,x)=>{d[g]!==void 0&&(d[g]+=cW.length-x)})}),Object.entries(d).map(([f,h])=>({text:f,value:h})).sort((f,h)=>h.value-f.value)},[i]),c=S.useMemo(()=>{const d=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),h=(i.map(p=>{var g,x;return`${((g=p.reflexionUnidad)==null?void 0:g.fortalezas)||""} ${((x=p.reflexionUnidad)==null?void 0:x.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((p,g)=>(d.has(g)||(p[g]=(p[g]||0)+1),p),{});return Object.entries(h).map(([p,g])=>({text:p,value:g})).sort((p,g)=>g.value-p.value).slice(0,50)},[i]),u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return l.jsxs("div",{className:"animate-fade-in",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),l.jsxs("select",{value:t,onChange:d=>r(d.target.value),className:u,children:[l.jsx("option",{value:"todos",children:"Todos los Niveles"}),kst.map(d=>l.jsx("option",{value:d,children:d},d))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsx("select",{value:n,onChange:d=>a(d.target.value),className:u,children:s.map(d=>l.jsx("option",{value:d,children:d==="todos"?"Todas las Asignaturas":d},d))})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),o.every(d=>d.value===0)?l.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):l.jsx("ul",{className:"space-y-3",children:o.map((d,f)=>l.jsxs("li",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:f+1}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:d.text}),l.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:l.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${d.value/(o[0].value||1)*100}%`}})})]})]},d.text))})]}),l.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),c.length>0?l.jsx(Bst,{words:c}):l.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},Tst=({currentUser:e})=>{const{planificaciones:t,loading:r,error:n,canViewAllPlans:a}=Nst(e),[s,i]=S.useState("seguimiento"),[o,c]=S.useState("1º"),[u,d]=S.useState(null),[f,h]=S.useState(null),p=S.useMemo(()=>{const b={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"};return t.filter(y=>y.nivel===b[o]&&y.tipo==="Unidad")},[t,o]),g=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];if(!(e!=null&&e.id))return l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{children:"Usuario no autenticado."})});if(r)return l.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[l.jsx(_st,{}),l.jsx("span",{children:"Cargando planificaciones..."})]});if(n)return l.jsx("div",{className:"text-center py-8",children:l.jsxs("p",{className:"text-red-500",children:["Error: ",n]})});const x=()=>l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:l.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(b=>l.jsx("button",{onClick:()=>c(b.key),className:`${o===b.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:b.label},b.key))})}),p.length===0?l.jsx("div",{className:"text-center py-12",children:l.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):l.jsx("div",{className:"space-y-4",children:qi.map(b=>{const y=p.filter(_=>_.asignatura===b);if(y.length===0)return null;const w=u===b;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[l.jsxs("button",{onClick:()=>d(w?null:b),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:b}),l.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[y.length," unidad",y.length>1?"es":""]})]}),l.jsx("span",{className:`transform transition-transform ${w?"rotate-180":""}`,children:l.jsx(Est,{})})]}),w&&l.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:l.jsx("ul",{className:"space-y-3",children:y.map(_=>l.jsx("li",{children:l.jsxs("button",{onClick:()=>h(_),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:_.nombreUnidad}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",_.autor||"N/A"]})]})},_.id))})})]},b)})})]});return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),a&&l.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"👑 Vista administrativa"})]}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:l.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>i("seguimiento"),className:`${s==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),l.jsx("button",{onClick:()=>i("analisis"),className:`${s==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Análisis de Reflexiones"})]})}),s==="seguimiento"&&x(),s==="analisis"&&l.jsx(jst,{planificaciones:t.filter(b=>b.tipo==="Unidad")})]}),f&&l.jsx(Sst,{plan:f,onClose:()=>h(null)})]})},Mk="analisisTaxonomicos",Ist=async()=>{try{const e=$t(kt(xn,Mk),Sr("uploadDate","desc"));return(await ga(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener todos los análisis:",e),new Error("No se pudieron cargar los análisis taxonómicos")}},Fst=async e=>{if(!e)return[];try{const t=$t(kt(xn,Mk),Jr("userId","==",e),Sr("uploadDate","desc"));return(await ga(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener análisis por usuario:",t),new Error("No se pudieron cargar los análisis del usuario")}},Ost=async e=>{try{return{id:(await Tn(kt(xn,Mk),e)).id,...e}}catch(t){throw console.error("Error al crear análisis:",t),new Error("No se pudo crear el análisis taxonómico")}},Dst=async e=>{try{const t=dr(xn,Mk,e);await za(t)}catch(t){throw console.error("Error al eliminar análisis:",t,"ID:",e),new Error("No se pudo eliminar el análisis taxonómico")}},uW=["1º Medio","2º Medio","3º Medio","4º Medio"],Qf=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],Rx={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},Pst=()=>l.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Rst=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState(!1),[s,i]=S.useState(null),[o,c]=S.useState(null),[u,d]=S.useState(""),[f,h]=S.useState(!1),[p,g]=S.useState(null),[x,b]=S.useState(null),[y,w]=S.useState(""),[_,B]=S.useState(""),[k,I]=S.useState(""),[E,N]=S.useState(""),[j,R]=S.useState("resumen"),D=S.useCallback(async()=>{if(e!=null&&e.id){a(!0);try{const G=e.profile==="SUBDIRECCION"?await Ist():await Fst(e.id);r(G),i(null)}catch(G){console.error("Error al cargar análisis:",G),i("No se pudieron cargar los análisis.")}finally{a(!1)}}},[e]);S.useEffect(()=>{D()},[D]);const O=async G=>{var ee;const Y=(ee=G.target.files)==null?void 0:ee[0];if(Y){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(Y.type)){i("Por favor, suba un archivo PDF o DOCX válido.");return}g(Y),d(Y.name),i(null);const Q=new FileReader;Q.onloadend=()=>{var te;const X=(te=Q.result)==null?void 0:te.split(",")[1];if(!X){i("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),b(null);return}b({mimeType:Y.type,data:X})},Q.onerror=()=>i("Error al leer el archivo."),Q.readAsDataURL(Y)}},L=async()=>{if(!u.trim()||!x){i("Debe subir un documento y asignarle un nombre para analizar.");return}if(!y||!_){i("Seleccione Nivel y Asignatura antes de analizar.");return}h(!0),i(null);const G=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser válido.
        `,Y={type:"object",properties:{analysisResults:{type:"array",items:{type:"object",properties:{question:{type:"string"},habilidadBloom:{type:"string",enum:Qf}},required:["question","habilidadBloom"]}},summary:{type:"object",properties:Qf.reduce((ee,P)=>({...ee,[P]:{type:"number"}}),{})}},required:["analysisResults","summary"]};try{d1("Análisis Taxonómico",e);const ee="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Q=new us(ee).getGenerativeModel({model:"gemini-1.5-pro",generationConfig:{responseMimeType:"application/json",responseSchema:Y}}),X={inlineData:{mimeType:x.mimeType,data:x.data}},ae=(await Q.generateContent([G,X])).response.text();let se;try{se=JSON.parse(ae)}catch(me){throw console.error("Error al parsear JSON:",me),console.error("Respuesta recibida (no es JSON válido):",ae),new Error("La respuesta de la IA no tuvo un formato válido. Intente de nuevo.")}const oe={documentName:u,uploadDate:new Date().toISOString(),userId:e.id,analysisResults:se.analysisResults,summary:se.summary,nivel:y,asignatura:_},ce=await Ost(oe);await D(),c(ce),d(""),g(null),b(null),w(""),B("")}catch(ee){console.error(ee);const P=ee instanceof Error?ee.message:"Hubo un error al analizar el documento.";i(P)}finally{h(!1)}},M=async G=>{if(window.confirm("¿Está seguro de eliminar este análisis?"))try{await Dst(G),await D(),(o==null?void 0:o.id)===G&&c(null)}catch{i("No se pudo eliminar el análisis.")}},J=S.useMemo(()=>t.filter(G=>{const Y=k?G.nivel===k:!0,ee=E?G.asignatura===E:!0;return Y&&ee}),[t,k,E]),V=S.useMemo(()=>{const G={Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0};J.forEach(ee=>{Qf.forEach(P=>{var X;const Q=((X=ee.summary)==null?void 0:X[P])||0;G[P]+=Q})});const Y=Object.values(G).reduce((ee,P)=>ee+P,0);return{acc:G,total:Y}},[J]),K=S.useMemo(()=>{const G=new Map;J.forEach(ee=>{const P=ee.asignatura||"Sin asignatura";G.has(P)||G.set(P,{Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0});const Q=G.get(P);Qf.forEach(X=>{var te;Q[X]+=((te=ee.summary)==null?void 0:te[X])||0})});const Y=Array.from(G.entries()).map(([ee,P])=>({asignatura:ee,counts:P,total:Object.values(P).reduce((Q,X)=>Q+X,0)}));return Y.sort((ee,P)=>P.total-ee.total),Y},[J]),z=S.useMemo(()=>o?Object.values(o.summary).reduce((G,Y)=>G+(Y||0),0):0,[o]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonómico de Evaluaciones"}),s&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),l.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:l.jsxs("div",{className:"space-y-1 text-center",children:[l.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:l.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),l.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[l.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[l.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:O,accept:".pdf,.doc,.docx"}),l.jsx("span",{children:"Cargue un archivo"})]}),l.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),l.jsx("p",{className:"text-xs text-slate-500",children:p?p.name:"PDF, DOCX hasta 10MB"})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),l.jsxs("select",{value:y,onChange:G=>w(G.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione"}),uW.map(G=>l.jsx("option",{value:G,children:G},G))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{value:_,onChange:G=>B(G.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione"}),qi.map(G=>l.jsx("option",{value:G,children:G},G))]})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),l.jsx("input",{type:"text",id:"documentName",value:u,onChange:G=>d(G.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("button",{onClick:L,disabled:f||!x,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:f?l.jsx(Pst,{}):"Analizar con IA"})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),n?l.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):t.length===0?l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay análisis guardados."}):l.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:t.map(G=>l.jsxs("button",{onClick:()=>c(G),className:`w-full text-left p-3 rounded-md border ${(o==null?void 0:o.id)===G.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[l.jsx("p",{className:"font-semibold truncate",children:G.documentName}),l.jsx("p",{className:"text-xs text-slate-500",children:new Date(G.uploadDate).toLocaleString("es-CL")}),(G.nivel||G.asignatura)&&l.jsxs("p",{className:"text-xs text-slate-500",children:[G.nivel||"Nivel s/i"," • ",G.asignatura||"Asignatura s/i"]})]},G.id))})]})]}),l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md",children:l.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Nivel"}),l.jsxs("select",{value:k,onChange:G=>I(G.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todos"}),uW.map(G=>l.jsx("option",{value:G,children:G},G))]})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Asignatura"}),l.jsxs("select",{value:E,onChange:G=>N(G.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todas"}),qi.map(G=>l.jsx("option",{value:G,children:G},G))]})]}),l.jsx("button",{type:"button",onClick:()=>{I(""),N("")},className:"px-4 py-2 rounded-md bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-200 font-semibold",children:"Limpiar filtros"})]})}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md",children:[l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 px-4",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>R("resumen"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${j==="resumen"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Resumen Global"}),l.jsx("button",{onClick:()=>R("comparacion"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${j==="comparacion"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Comparación por Asignatura"})]})}),j==="resumen"?l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Resumen Global de Habilidades"}),l.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[J.length," análisis considerados"]})]}),l.jsx("div",{className:"space-y-3",children:Qf.map(G=>{const Y=V.acc[G],ee=V.total>0?Y/V.total*100:0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:G}),l.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[Y," (",ee.toFixed(0),"%)"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:l.jsx("div",{className:`${Rx[G]} h-4 rounded-full`,style:{width:`${ee}%`}})})]},G)})}),l.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 gap-3",children:Qf.map(G=>l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg border dark:border-slate-700",children:[l.jsx("span",{className:"text-sm",children:G}),l.jsx("span",{className:`text-xs font-bold text-white px-2 py-1 rounded ${Rx[G]}`,children:V.acc[G]})]},G))})]}):l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Comparación por Asignatura"}),l.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[K.length," asignaturas comparadas"]})]}),K.length===0?l.jsx("div",{className:"text-sm text-slate-500",children:"No hay datos con los filtros actuales."}):l.jsx("div",{className:"space-y-5",children:K.map(G=>{const Y=G.total||1;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:G.asignatura}),l.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:[G.total," ítems"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-5 overflow-hidden flex",children:Qf.map(ee=>{const P=G.counts[ee]||0,Q=P/Y*100;return l.jsx("div",{className:`${Rx[ee]} h-5`,style:{width:`${Q}%`},title:`${ee}: ${P} (${Q.toFixed(0)}%)`},ee)})}),l.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:Qf.map(ee=>l.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-300",children:[l.jsx("span",{className:`inline-block w-3 h-3 rounded ${Rx[ee]}`}),l.jsx("span",{children:ee})]},ee))})]},G.asignatura)})})]})]}),l.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:o?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:o.documentName}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(o.uploadDate).toLocaleString("es-CL"),(o.nivel||o.asignatura)&&l.jsxs(l.Fragment,{children:[" ","• ",o.nivel||"Nivel s/i"," • ",o.asignatura||"Asignatura s/i"]})]})]}),l.jsx("button",{onClick:()=>M(o.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado del Documento (",z," preguntas)"]}),l.jsx("div",{className:"space-y-3",children:Qf.map(G=>{const Y=o.summary[G]||0,ee=z>0?Y/z*100:0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:G}),l.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[Y," (",ee.toFixed(0),"%)"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:l.jsx("div",{className:`${Rx[G]} h-4 rounded-full`,style:{width:`${ee}%`}})})]},G)})})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),l.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.analysisResults.map((G,Y)=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:G.question}),l.jsx("td",{className:"px-4 py-3 text-sm",children:l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${Rx[G.habilidadBloom]}`,children:G.habilidadBloom})})]},Y))})]})})]})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})]})},bS="empresas_practicas",Lst="usuarios",iM="rutas_supervision",oM=e=>{const t=e.data();return{id:e.id,...t}};async function Mst(e){const r=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4&region=CL`;try{const a=await(await fetch(r)).json();return a.status==="OK"&&a.results[0]?a.results[0].geometry.location:null}catch(n){return console.error("Error en la llamada a la API de Geocodificación:",n),null}}const Ust=e=>{const t=$t(kt(ht,bS),Sr("nombre","asc"));return pr(t,r=>{const n=r.docs.map(a=>oM(a));e(n)},r=>console.error("Error al suscribirse a empresas:",r))},Qst=async e=>{const t=e.calificaciones.reduce((n,a)=>n+(a.score||0),0),r={...e,puntajeTotal:t};if(e.direccion){const n=await Mst(e.direccion);n&&(r.coordenadas=n)}if("id"in e&&e.id){const{id:n,...a}=r,s=dr(ht,bS,n);return await Ji(s,a,{merge:!0}),n}else return(await Tn(kt(ht,bS),{...r,createdAt:Ni()})).id},Hst=async e=>{const t=dr(ht,bS,e);await za(t)},Vst=e=>{const t=$t(kt(ht,Lst),Jr("profile","==","PROFESORADO"),Sr("nombreCompleto","asc"));return pr(t,r=>{const n=r.docs.map(a=>oM(a));e(n)},r=>console.error("Error al suscribirse a profesores:",r))},zst=async e=>(await Tn(kt(ht,iM),{...e,createdAt:Ni()})).id,$st=e=>{const t=$t(kt(ht,iM),Sr("createdAt","desc"));return pr(t,r=>{const n=r.docs.map(a=>oM(a));e(n)},r=>console.error("Error al suscribirse a rutas guardadas:",r))},Gst=async e=>{const t=dr(ht,iM,e);await za(t)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Zp=function(){return Zp=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Zp.apply(this,arguments)};function Kst(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(u){try{c(n.next(u))}catch(d){s(d)}}function o(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){var d;u.done?a(u.value):(d=u.value,d instanceof r?d:new r(function(f){f(d)})).then(i,o)}c((n=n.apply(e,[])).next())})}function qst(e,t){var r,n,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(u){return function(d){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&d[0]?n.return:d[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,d[1])).done)return a;switch(n=0,a&&(d=[2&d[0],a.value]),d[0]){case 0:case 1:a=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,n=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!((a=a.length>0&&a[a.length-1])||d[0]!==6&&d[0]!==2)){i=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){i.label=d[1];break}if(d[0]===6&&i.label<a[1]){i.label=a[1],a=d;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(d);break}a[2]&&i.ops.pop(),i.trys.pop();continue}d=t.call(e,i)}catch(f){d=[6,f],n=0}finally{r=a=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([c,u])}}}function Rr(){return Rr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rr.apply(this,arguments)}function eg(e){return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eg(e)}function uue(e){var t=function(r,n){if(eg(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n);if(eg(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return eg(t)==="symbol"?t:String(t)}function dv(e,t,r){return(t=uue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dW(Object(r),!0).forEach(function(n){dv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uue(n.key),n)}}function SO(e,t){return SO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},SO(e,t)}function yS(e){return yS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yS(e)}function Wst(e,t){if(t&&(eg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(e)}function Xst(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=yS(e);if(t){var a=yS(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Wst(this,r)}}function kO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function due(e,t){if(e){if(typeof e=="string")return kO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kO(e,t):void 0}}function lM(e){return function(t){if(Array.isArray(t))return kO(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||due(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var Yst=function(){function e(r){var n=this;this._insertTag=function(a){var s;s=n.tags.length===0?n.insertionPoint?n.insertionPoint.nextSibling:n.prepend?n.container.firstChild:n.before:n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(a,s),n.tags.push(a)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(s){var i=document.createElement("style");return i.setAttribute("data-emotion",s.key),s.nonce!==void 0&&i.setAttribute("nonce",s.nonce),i.appendChild(document.createTextNode("")),i.setAttribute("data-s",""),i}(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var a=function(s){if(s.sheet)return s.sheet;for(var i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].ownerNode===s)return document.styleSheets[i]}(n);try{a.insertRule(r,a.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),bu="-ms-",fW="-moz-",Jn="-webkit-",cM="decl",Aue="@keyframes",Jst=Math.abs,Uk=String.fromCharCode,Zst=Object.assign;function fue(e){return e.trim()}function aa(e,t,r){return e.replace(t,r)}function BO(e,t){return e.indexOf(t)}function fo(e,t){return 0|e.charCodeAt(t)}function p2(e,t,r){return e.slice(t,r)}function FA(e){return e.length}function uM(e){return e.length}function A_(e,t){return t.push(e),e}var Qk=1,C1=1,hue=0,nc=0,ui=0,sb="";function Hk(e,t,r,n,a,s,i){return{value:e,root:t,parent:r,type:n,props:a,children:s,line:Qk,column:C1,length:i,return:""}}function hy(e,t){return Zst(Hk("",null,null,"",null,null,0),e,{length:-e.length},t)}function Mc(){return ui=nc<hue?fo(sb,nc++):0,C1++,ui===10&&(C1=1,Qk++),ui}function JA(){return fo(sb,nc)}function f5(){return nc}function AE(e,t){return p2(sb,e,t)}function g2(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function mue(e){return Qk=C1=1,hue=FA(sb=e),nc=0,[]}function pue(e){return sb="",e}function h5(e){return fue(AE(nc-1,jO(e===91?e+2:e===40?e+1:e)))}function eit(e){for(;(ui=JA())&&ui<33;)Mc();return g2(e)>2||g2(ui)>3?"":" "}function tit(e,t){for(;--t&&Mc()&&!(ui<48||ui>102||ui>57&&ui<65||ui>70&&ui<97););return AE(e,f5()+(t<6&&JA()==32&&Mc()==32))}function jO(e){for(;Mc();)switch(ui){case e:return nc;case 34:case 39:e!==34&&e!==39&&jO(ui);break;case 40:e===41&&jO(e);break;case 92:Mc()}return nc}function rit(e,t){for(;Mc()&&e+ui!==57&&(e+ui!==84||JA()!==47););return"/*"+AE(t,nc-1)+"*"+Uk(e===47?e:Mc())}function nit(e){for(;!g2(JA());)Mc();return AE(e,nc)}function hW(e){return pue(m5("",null,null,null,[""],e=mue(e),0,[0],e))}function m5(e,t,r,n,a,s,i,o,c){for(var u=0,d=0,f=i,h=0,p=0,g=0,x=1,b=1,y=1,w=0,_="",B=a,k=s,I=n,E=_;b;)switch(g=w,w=Mc()){case 40:if(g!=108&&fo(E,f-1)==58){BO(E+=aa(h5(w),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:E+=h5(w);break;case 9:case 10:case 13:case 32:E+=eit(g);break;case 92:E+=tit(f5()-1,7);continue;case 47:switch(JA()){case 42:case 47:A_(ait(rit(Mc(),f5()),t,r),c);break;default:E+="/"}break;case 123*x:o[u++]=FA(E)*y;case 125*x:case 59:case 0:switch(w){case 0:case 125:b=0;case 59+d:p>0&&FA(E)-f&&A_(p>32?pW(E+";",n,r,f-1):pW(aa(E," ","")+";",n,r,f-2),c);break;case 59:E+=";";default:if(A_(I=mW(E,t,r,u,d,a,o,_,B=[],k=[],f),s),w===123)if(d===0)m5(E,t,I,I,B,s,f,o,k);else switch(h===99&&fo(E,3)===110?100:h){case 100:case 109:case 115:m5(e,I,I,n&&A_(mW(e,I,I,0,0,a,o,_,a,B=[],f),k),a,k,f,o,n?B:k);break;default:m5(E,I,I,I,[""],k,0,o,k)}}u=d=p=0,x=y=1,_=E="",f=i;break;case 58:f=1+FA(E),p=g;default:if(x<1){if(w==123)--x;else if(w==125&&x++==0&&(ui=nc>0?fo(sb,--nc):0,C1--,ui===10&&(C1=1,Qk--),ui==125))continue}switch(E+=Uk(w),w*x){case 38:y=d>0?1:(E+="\f",-1);break;case 44:o[u++]=(FA(E)-1)*y,y=1;break;case 64:JA()===45&&(E+=h5(Mc())),h=JA(),d=f=FA(_=E+=nit(f5())),w++;break;case 45:g===45&&FA(E)==2&&(x=0)}}return s}function mW(e,t,r,n,a,s,i,o,c,u,d){for(var f=a-1,h=a===0?s:[""],p=uM(h),g=0,x=0,b=0;g<n;++g)for(var y=0,w=p2(e,f+1,f=Jst(x=i[g])),_=e;y<p;++y)(_=fue(x>0?h[y]+" "+w:aa(w,/&\f/g,h[y])))&&(c[b++]=_);return Hk(e,t,r,a===0?"rule":o,c,u,d)}function ait(e,t,r){return Hk(e,t,r,"comm",Uk(ui),p2(e,2,-2),0)}function pW(e,t,r,n){return Hk(e,t,r,cM,p2(e,0,n),p2(e,n+1,-1),n)}function tg(e,t){for(var r="",n=uM(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function gW(e,t,r,n){switch(e.type){case"@import":case cM:return e.return=e.return||e.value;case"comm":return"";case Aue:return e.return=e.value+"{"+tg(e.children,n)+"}";case"rule":e.value=e.props.join(",")}return FA(r=tg(e.children,n))?e.return=e.value+"{"+r+"}":""}function xW(e){var t=uM(e);return function(r,n,a,s){for(var i="",o=0;o<t;o++)i+=e[o](r,n,a,s)||"";return i}}function sit(e){return function(t){t.root||(t=t.return)&&e(t)}}function gue(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var iit=function(e,t,r){for(var n=0,a=0;n=a,a=JA(),n===38&&a===12&&(t[r]=1),!g2(a);)Mc();return AE(e,nc)},oit=function(e,t){return pue(function(r,n){var a=-1,s=44;do switch(g2(s)){case 0:s===38&&JA()===12&&(n[a]=1),r[a]+=iit(nc-1,n,a);break;case 2:r[a]+=h5(s);break;case 4:if(s===44){r[++a]=JA()===58?"&\f":"",n[a]=r[a].length;break}default:r[a]+=Uk(s)}while(s=Mc());return r}(mue(e),t))},vW=new WeakMap,lit=function(e){if(e.type==="rule"&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(!(r=r.parent))return;if((e.props.length!==1||t.charCodeAt(0)===58||vW.get(r))&&!n){vW.set(e,!0);for(var a=[],s=oit(t,a),i=r.props,o=0,c=0;o<s.length;o++)for(var u=0;u<i.length;u++,c++)e.props[c]=a[o]?s[o].replace(/&\f/g,i[u]):i[u]+" "+s[o]}}},cit=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function xue(e,t){switch(function(r,n){return 45^fo(r,0)?(((n<<2^fo(r,0))<<2^fo(r,1))<<2^fo(r,2))<<2^fo(r,3):0}(e,t)){case 5103:return Jn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Jn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Jn+e+fW+e+bu+e+e;case 6828:case 4268:return Jn+e+bu+e+e;case 6165:return Jn+e+bu+"flex-"+e+e;case 5187:return Jn+e+aa(e,/(\w+).+(:[^]+)/,Jn+"box-$1$2-ms-flex-$1$2")+e;case 5443:return Jn+e+bu+"flex-item-"+aa(e,/flex-|-self/,"")+e;case 4675:return Jn+e+bu+"flex-line-pack"+aa(e,/align-content|flex-|-self/,"")+e;case 5548:return Jn+e+bu+aa(e,"shrink","negative")+e;case 5292:return Jn+e+bu+aa(e,"basis","preferred-size")+e;case 6060:return Jn+"box-"+aa(e,"-grow","")+Jn+e+bu+aa(e,"grow","positive")+e;case 4554:return Jn+aa(e,/([^-])(transform)/g,"$1"+Jn+"$2")+e;case 6187:return aa(aa(aa(e,/(zoom-|grab)/,Jn+"$1"),/(image-set)/,Jn+"$1"),e,"")+e;case 5495:case 3959:return aa(e,/(image-set\([^]*)/,Jn+"$1$`$1");case 4968:return aa(aa(e,/(.+:)(flex-)?(.*)/,Jn+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+Jn+e+e;case 4095:case 3583:case 4068:case 2532:return aa(e,/(.+)-inline(.+)/,Jn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(FA(e)-1-t>6)switch(fo(e,t+1)){case 109:if(fo(e,t+4)!==45)break;case 102:return aa(e,/(.+:)(.+)-([^]+)/,"$1"+Jn+"$2-$3$1"+fW+(fo(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~BO(e,"stretch")?xue(aa(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(fo(e,t+1)!==115)break;case 6444:switch(fo(e,FA(e)-3-(~BO(e,"!important")&&10))){case 107:return aa(e,":",":"+Jn)+e;case 101:return aa(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Jn+(fo(e,14)===45?"inline-":"")+"box$3$1"+Jn+"$2$3$1-ms-$2box$3")+e}break;case 5936:switch(fo(e,t+11)){case 114:return Jn+e+bu+aa(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Jn+e+bu+aa(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Jn+e+bu+aa(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Jn+e+bu+e+e}return e}var bW,f_,p5=typeof document<"u",uit=p5?void 0:(bW=function(){return gue(function(){var e={};return function(t){return e[t]}})},f_=new WeakMap,function(e){if(f_.has(e))return f_.get(e);var t=bW(e);return f_.set(e,t),t}),dit=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case cM:e.return=xue(e.value,e.length);break;case Aue:return tg([hy(e,{value:aa(e.value,"@","@"+Jn)})],n);case"rule":if(e.length)return function(a,s){return a.map(s).join("")}(e.props,function(a){switch(function(s,i){return(s=i.exec(s))?s[0]:s}(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return tg([hy(e,{props:[aa(a,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return tg([hy(e,{props:[aa(a,/:(plac\w+)/,":"+Jn+"input-$1")]}),hy(e,{props:[aa(a,/:(plac\w+)/,":-moz-$1")]}),hy(e,{props:[aa(a,/:(plac\w+)/,"-ms-input-$1")]})],n)}return""})}}],vue=function(e){var t=e.key;if(p5&&t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){y.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var n=e.stylisPlugins||dit,a,s,i={},o=[];p5&&(a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(y){for(var w=y.getAttribute("data-emotion").split(" "),_=1;_<w.length;_++)i[w[_]]=!0;o.push(y)}));var c=[lit,cit];if(p5){var u,d=[gW,sit(function(y){u.insert(y)})],f=xW(c.concat(n,d));s=function(y,w,_,B){u=_,tg(hW(y?y+"{"+w.styles+"}":w.styles),f),B&&(b.inserted[w.name]=!0)}}else{var h=[gW],p=xW(c.concat(n,h)),g=uit(n)(t),x=function(y,w){var _=w.name;return g[_]===void 0&&(g[_]=tg(hW(y?y+"{"+w.styles+"}":w.styles),p)),g[_]};s=function(y,w,_,B){var k=w.name,I=x(y,w);return b.compat===void 0?(B&&(b.inserted[k]=!0),I):B?void(b.inserted[k]=I):I}}var b={key:t,sheet:new Yst({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:s};return b.sheet.hydrate(o),b};function ia(e,t,r){return e(r={path:t,exports:{},require:function(n,a){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(a==null&&r.path)}},r.exports),r.exports}var to=typeof Symbol=="function"&&Symbol.for,TO=to?Symbol.for("react.element"):60103,IO=to?Symbol.for("react.portal"):60106,g5=to?Symbol.for("react.fragment"):60107,x5=to?Symbol.for("react.strict_mode"):60108,v5=to?Symbol.for("react.profiler"):60114,b5=to?Symbol.for("react.provider"):60109,y5=to?Symbol.for("react.context"):60110,FO=to?Symbol.for("react.async_mode"):60111,wS=to?Symbol.for("react.concurrent_mode"):60111,w5=to?Symbol.for("react.forward_ref"):60112,E5=to?Symbol.for("react.suspense"):60113,Ait=to?Symbol.for("react.suspense_list"):60120,C5=to?Symbol.for("react.memo"):60115,_5=to?Symbol.for("react.lazy"):60116,fit=to?Symbol.for("react.block"):60121,hit=to?Symbol.for("react.fundamental"):60117,mit=to?Symbol.for("react.responder"):60118,pit=to?Symbol.for("react.scope"):60119;function _c(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case TO:switch(e=e.type){case FO:case wS:case g5:case v5:case x5:case E5:return e;default:switch(e=e&&e.$$typeof){case y5:case w5:case _5:case C5:case b5:return e;default:return t}}case IO:return t}}}function yW(e){return _c(e)===wS}var git={AsyncMode:FO,ConcurrentMode:wS,ContextConsumer:y5,ContextProvider:b5,Element:TO,ForwardRef:w5,Fragment:g5,Lazy:_5,Memo:C5,Portal:IO,Profiler:v5,StrictMode:x5,Suspense:E5,isAsyncMode:function(e){return yW(e)||_c(e)===FO},isConcurrentMode:yW,isContextConsumer:function(e){return _c(e)===y5},isContextProvider:function(e){return _c(e)===b5},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===TO},isForwardRef:function(e){return _c(e)===w5},isFragment:function(e){return _c(e)===g5},isLazy:function(e){return _c(e)===_5},isMemo:function(e){return _c(e)===C5},isPortal:function(e){return _c(e)===IO},isProfiler:function(e){return _c(e)===v5},isStrictMode:function(e){return _c(e)===x5},isSuspense:function(e){return _c(e)===E5},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===g5||e===wS||e===v5||e===x5||e===E5||e===Ait||typeof e=="object"&&e!==null&&(e.$$typeof===_5||e.$$typeof===C5||e.$$typeof===b5||e.$$typeof===y5||e.$$typeof===w5||e.$$typeof===hit||e.$$typeof===mit||e.$$typeof===pit||e.$$typeof===fit)},typeOf:_c};ia(function(e,t){});var wW=ia(function(e){e.exports=git}),EW={};EW[wW.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},EW[wW.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var OO=typeof document<"u";function bue(e,t,r){var n="";return r.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):n+=a+" "}),n}var dM=function(e,t,r){var n=e.key+"-"+t.name;(r===!1||OO===!1&&e.compat!==void 0)&&e.registered[n]===void 0&&(e.registered[n]=t.styles)},AM=function(e,t,r){dM(e,t,r);var n=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a="",s=t;do{var i=e.insert(t===s?"."+n:"",s,e.sheet,!0);OO||i===void 0||(a+=i),s=s.next}while(s!==void 0);if(!OO&&a.length!==0)return a}},xit={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},vit=/[A-Z]|^ms/g,bit=/_EMO_([^_]+?)_([^]*?)_EMO_/g,yue=function(e){return e.charCodeAt(1)===45},CW=function(e){return e!=null&&typeof e!="boolean"},vI=gue(function(e){return yue(e)?e:e.replace(vit,"-$&").toLowerCase()}),_W=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(bit,function(r,n,a){return OA={name:n,styles:a,next:OA},n})}return xit[e]===1||yue(e)||typeof t!="number"||t===0?t:t+"px"};function mw(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":if(r.anim===1)return OA={name:r.name,styles:r.styles,next:OA},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)OA={name:n.name,styles:n.styles,next:OA},n=n.next;var a=r.styles+";";return a}return function(c,u,d){var f="";if(Array.isArray(d))for(var h=0;h<d.length;h++)f+=mw(c,u,d[h])+";";else for(var p in d){var g=d[p];if(typeof g!="object")u!=null&&u[g]!==void 0?f+=p+"{"+u[g]+"}":CW(g)&&(f+=vI(p)+":"+_W(p,g)+";");else if(!Array.isArray(g)||typeof g[0]!="string"||u!=null&&u[g[0]]!==void 0){var x=mw(c,u,g);switch(p){case"animation":case"animationName":f+=vI(p)+":"+x+";";break;default:f+=p+"{"+x+"}"}}else for(var b=0;b<g.length;b++)CW(g[b])&&(f+=vI(p)+":"+_W(p,g[b])+";")}return f}(e,t,r);case"function":if(e!==void 0){var s=OA,i=r(e);return OA=s,mw(e,t,i)}break}if(t==null)return r;var o=t[r];return o!==void 0?o:r}var OA,NW=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Vk=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,a="";OA=void 0;var s=e[0];s==null||s.raw===void 0?(n=!1,a+=mw(r,t,s)):a+=s[0];for(var i=1;i<e.length;i++)a+=mw(r,t,e[i]),n&&(a+=s[i]);NW.lastIndex=0;for(var o,c="";(o=NW.exec(a))!==null;)c+="-"+o[1];var u=function(d){for(var f,h=0,p=0,g=d.length;g>=4;++p,g-=4)f=1540483477*(65535&(f=255&d.charCodeAt(p)|(255&d.charCodeAt(++p))<<8|(255&d.charCodeAt(++p))<<16|(255&d.charCodeAt(++p))<<24))+(59797*(f>>>16)<<16),h=1540483477*(65535&(f^=f>>>24))+(59797*(f>>>16)<<16)^1540483477*(65535&h)+(59797*(h>>>16)<<16);switch(g){case 3:h^=(255&d.charCodeAt(p+2))<<16;case 2:h^=(255&d.charCodeAt(p+1))<<8;case 1:h=1540483477*(65535&(h^=255&d.charCodeAt(p)))+(59797*(h>>>16)<<16)}return(((h=1540483477*(65535&(h^=h>>>13))+(59797*(h>>>16)<<16))^h>>>15)>>>0).toString(36)}(a)+c;return{name:u,styles:a,next:OA}},yit=typeof document<"u",wit=function(e){return e()},wue=!!S.useInsertionEffect&&S.useInsertionEffect,Eue=yit&&wue||wit,SW=wue||S.useLayoutEffect,Pv=typeof document<"u",fM={}.hasOwnProperty,ES=S.createContext(typeof HTMLElement<"u"?vue({key:"css"}):null);ES.Provider;var zk=function(e){return S.forwardRef(function(t,r){var n=S.useContext(ES);return e(t,n,r)})};Pv||(zk=function(e){return function(t){var r=S.useContext(ES);return r===null?(r=vue({key:"css"}),S.createElement(ES.Provider,{value:r},e(t,r))):e(t,r)}});var hM=S.createContext({}),DO="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Eit=function(e,t){var r={};for(var n in t)fM.call(t,n)&&(r[n]=t[n]);return r[DO]=e,r},Cit=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;dM(t,r,n);var a=Eue(function(){return AM(t,r,n)});if(!Pv&&a!==void 0){for(var s,i=r.name,o=r.next;o!==void 0;)i+=" "+o.name,o=o.next;return S.createElement("style",((s={})["data-emotion"]=t.key+" "+i,s.dangerouslySetInnerHTML={__html:a},s.nonce=t.sheet.nonce,s))}return null},_it=zk(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var a=e[DO],s=[n],i="";typeof e.className=="string"?i=bue(t.registered,s,e.className):e.className!=null&&(i=e.className+" ");var o=Vk(s,void 0,S.useContext(hM));i+=t.key+"-"+o.name;var c={};for(var u in e)!fM.call(e,u)||u==="css"||u===DO||(c[u]=e[u]);return c.ref=r,c.className=i,S.createElement(S.Fragment,null,S.createElement(Cit,{cache:t,serialized:o,isStringTag:typeof a=="string"}),S.createElement(a,c))});ia(function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});var jr=function(e,t){var r=arguments;if(t==null||!fM.call(t,"css"))return S.createElement.apply(void 0,r);var n=r.length,a=new Array(n);a[0]=_it,a[1]=Eit(e,t);for(var s=2;s<n;s++)a[s]=r[s];return S.createElement.apply(null,a)};zk(function(e,t){var r=e.styles,n=Vk([r],void 0,S.useContext(hM));if(!Pv){for(var a,s=n.name,i=n.styles,o=n.next;o!==void 0;)s+=" "+o.name,i+=o.styles,o=o.next;var c=t.compat===!0,u=t.insert("",{name:s,styles:i},t.sheet,c);return c?null:S.createElement("style",((a={})["data-emotion"]=t.key+"-global "+s,a.dangerouslySetInnerHTML={__html:u},a.nonce=t.sheet.nonce,a))}var d=S.useRef();return SW(function(){var f=t.key+"-global",h=new t.sheet.constructor({key:f,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),p=!1,g=document.querySelector('style[data-emotion="'+f+" "+n.name+'"]');return t.sheet.tags.length&&(h.before=t.sheet.tags[0]),g!==null&&(p=!0,g.setAttribute("data-emotion",f),h.hydrate([g])),d.current=[h,p],function(){h.flush()}},[t]),SW(function(){var f=d.current,h=f[0];if(f[1])f[1]=!1;else{if(n.next!==void 0&&AM(t,n.next,!0),h.tags.length){var p=h.tags[h.tags.length-1].nextElementSibling;h.before=p,h.flush()}t.insert("",n,h,!1)}},[t,n.name]),null});function mM(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Vk(t)}var Nit=function e(t){for(var r=t.length,n=0,a="";n<r;n++){var s=t[n];if(s!=null){var i=void 0;switch(typeof s){case"boolean":break;case"object":if(Array.isArray(s))i=e(s);else for(var o in i="",s)s[o]&&o&&(i&&(i+=" "),i+=o);break;default:i=s}i&&(a&&(a+=" "),a+=i)}}return a};function Sit(e,t,r){var n=[],a=bue(e,n,r);return n.length<2?r:a+t(n)}var kit=function(e){var t,r=e.cache,n=e.serializedArr,a=Eue(function(){for(var s="",i=0;i<n.length;i++){var o=AM(r,n[i],!1);Pv||o===void 0||(s+=o)}if(!Pv)return s});return Pv||a.length===0?null:S.createElement("style",((t={})["data-emotion"]=r.key+" "+n.map(function(s){return s.name}).join(" "),t.dangerouslySetInnerHTML={__html:a},t.nonce=r.sheet.nonce,t))};zk(function(e,t){var r=[],n=function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];var u=Vk(o,t.registered);return r.push(u),dM(t,u,!1),t.key+"-"+u.name},a={css:n,cx:function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return Sit(t.registered,n,Nit(o))},theme:S.useContext(hM)},s=e.children(a);return S.createElement(S.Fragment,null,S.createElement(kit,{cache:t,serializedArr:r}),s)});function Qi(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var a=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(a!=null){var s,i,o,c,u=[],d=!0,f=!1;try{if(o=(a=a.call(r)).next,n===0){if(Object(a)!==a)return;d=!1}else for(;!(d=(s=o.call(a)).done)&&(u.push(s.value),u.length!==n);d=!0);}catch(h){f=!0,i=h}finally{try{if(!d&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(f)throw i}}return u}}(e,t)||due(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function RA(e,t){if(e==null)return{};var r,n,a=function(i,o){if(i==null)return{};var c,u,d={},f=Object.keys(i);for(u=0;u<f.length;u++)c=f[u],o.indexOf(c)>=0||(d[c]=i[c]);return d}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function uh(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Cue(e){return uh(e).getComputedStyle(e)}const h_=Math.round;function _ue(e){return Sue(e)?(e.nodeName||"").toLowerCase():""}let m_;function Nue(e){return e instanceof uh(e).HTMLElement}function N5(e){return e instanceof uh(e).Element}function Sue(e){return e instanceof uh(e).Node}function kW(e){return typeof ShadowRoot>"u"?!1:e instanceof uh(e).ShadowRoot||e instanceof ShadowRoot}function kue(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Cue(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function Bit(){return/^((?!chrome|android).)*safari/i.test(function(){if(m_)return m_;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(m_=e.brands.map(t=>t.brand+"/"+t.version).join(" "),m_):navigator.userAgent}())}function Bue(e){return N5(e)?e:e.contextElement}const jue={x:1,y:1};function BW(e){const t=Bue(e);if(!Nue(t))return jue;const r=t.getBoundingClientRect(),{width:n,height:a,fallback:s}=function(c){const u=Cue(c);let d=parseFloat(u.width),f=parseFloat(u.height);const h=c.offsetWidth,p=c.offsetHeight,g=h_(d)!==h||h_(f)!==p;return g&&(d=h,f=p),{width:d,height:f,fallback:g}}(t);let i=(s?h_(r.width):r.width)/n,o=(s?h_(r.height):r.height)/a;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}function jW(e,t,r,n){var a,s;t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),o=Bue(e);let c=jue;t&&(c=BW(e));const u=o?uh(o):window,d=Bit()&&r;let f=(i.left+(d&&((a=u.visualViewport)==null?void 0:a.offsetLeft)||0))/c.x,h=(i.top+(d&&((s=u.visualViewport)==null?void 0:s.offsetTop)||0))/c.y,p=i.width/c.x,g=i.height/c.y;if(o){const x=uh(o),b=n;let y=x.frameElement;for(;y&&n&&b!==x;){const w=BW(y),_=y.getBoundingClientRect(),B=getComputedStyle(y);_.x+=(y.clientLeft+parseFloat(B.paddingLeft))*w.x,_.y+=(y.clientTop+parseFloat(B.paddingTop))*w.y,f*=w.x,h*=w.y,p*=w.x,g*=w.y,f+=_.x,h+=_.y,y=uh(y).frameElement}}return{width:p,height:g,top:h,right:f+p,bottom:h+g,left:f,x:f,y:h}}function jit(e){if(_ue(e)==="html")return e;const t=e.assignedSlot||e.parentNode||kW(e)&&e.host||function(r){return((Sue(r)?r.ownerDocument:r.document)||window.document).documentElement}(e);return kW(t)?t.host:t}function Tue(e){const t=jit(e);return function(r){return["html","body","#document"].includes(_ue(r))}(t)?t.ownerDocument.body:Nue(t)&&kue(t)?t:Tue(t)}function S5(e,t){var r;t===void 0&&(t=[]);const n=Tue(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),s=uh(n);return a?t.concat(s,s.visualViewport||[],kue(n)?n:[]):t.concat(n,S5(n))}var PO=typeof document<"u"?S.useLayoutEffect:S.useEffect,Tit=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],CS=function(){};function Iit(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function Fit(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var s=[].concat(n);if(t&&e)for(var i in t)t.hasOwnProperty(i)&&t[i]&&s.push("".concat(Iit(e,i)));return s.filter(function(o){return o}).map(function(o){return String(o).trim()}).join(" ")}var TW=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):eg(e)==="object"&&e!==null?[e]:[];var t},IW=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,Cr({},RA(e,Tit))},Es=function(e,t,r){var n=e.cx,a=e.getStyles,s=e.getClassNames,i=e.className;return{css:a(t,e),className:n(r??{},s(t,e),i)}};function $k(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function Iue(e){return $k(e)?window.pageYOffset:e.scrollTop}function _S(e,t){$k(e)?window.scrollTo(0,t):e.scrollTop=t}function Oit(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function p_(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:CS,a=Iue(e),s=t-a,i=10,o=0;function c(){var u=Oit(o+=i,a,s,r);_S(e,u),o<r?window.requestAnimationFrame(c):n(e)}c()}function FW(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=t.offsetHeight/3;n.bottom+a>r.bottom?_S(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):n.top-a<r.top&&_S(e,Math.max(t.offsetTop-a,0))}function OW(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var Fue=!1,Dit={get passive(){return Fue=!0}},g_=typeof window<"u"?window:{};g_.addEventListener&&g_.removeEventListener&&(g_.addEventListener("p",CS,Dit),g_.removeEventListener("p",CS,!1));var Pit=Fue;function Rit(e){return e!=null}function x_(e,t,r){return e?t:r}var Lit=["children","innerProps"],Mit=["children","innerProps"];function Uit(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,a=e.placement,s=e.shouldScroll,i=e.isFixedPosition,o=e.controlHeight,c=function(J){var V=getComputedStyle(J),K=V.position==="absolute",z=/(auto|scroll)/;if(V.position==="fixed")return document.documentElement;for(var G=J;G=G.parentElement;)if(V=getComputedStyle(G),(!K||V.position!=="static")&&z.test(V.overflow+V.overflowY+V.overflowX))return G;return document.documentElement}(r),u={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return u;var d,f=c.getBoundingClientRect().height,h=r.getBoundingClientRect(),p=h.bottom,g=h.height,x=h.top,b=r.offsetParent.getBoundingClientRect().top,y=i||$k(d=c)?window.innerHeight:d.clientHeight,w=Iue(c),_=parseInt(getComputedStyle(r).marginBottom,10),B=parseInt(getComputedStyle(r).marginTop,10),k=b-B,I=y-x,E=k+w,N=f-w-x,j=p-y+w+_,R=w+x-B,D=160;switch(a){case"auto":case"bottom":if(I>=g)return{placement:"bottom",maxHeight:t};if(N>=g&&!i)return s&&p_(c,j,D),{placement:"bottom",maxHeight:t};if(!i&&N>=n||i&&I>=n)return s&&p_(c,j,D),{placement:"bottom",maxHeight:i?I-_:N-_};if(a==="auto"||i){var O=t,L=i?k:E;return L>=n&&(O=Math.min(L-_-o,t)),{placement:"top",maxHeight:O}}if(a==="bottom")return s&&_S(c,j),{placement:"bottom",maxHeight:t};break;case"top":if(k>=g)return{placement:"top",maxHeight:t};if(E>=g&&!i)return s&&p_(c,R,D),{placement:"top",maxHeight:t};if(!i&&E>=n||i&&k>=n){var M=t;return(!i&&E>=n||i&&k>=n)&&(M=i?k-B:E-B),s&&p_(c,R,D),{placement:"top",maxHeight:M}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return u}var DW,Oue=function(e){return e==="auto"?"bottom":e},Due=S.createContext(null),Qit=function(e){var t=e.children,r=e.minMenuHeight,n=e.maxMenuHeight,a=e.menuPlacement,s=e.menuPosition,i=e.menuShouldScrollIntoView,o=e.theme,c=(S.useContext(Due)||{}).setPortalPlacement,u=S.useRef(null),d=Qi(S.useState(n),2),f=d[0],h=d[1],p=Qi(S.useState(null),2),g=p[0],x=p[1],b=o.spacing.controlHeight;return PO(function(){var y=u.current;if(y){var w=s==="fixed",_=Uit({maxHeight:n,menuEl:y,minHeight:r,placement:a,shouldScroll:i&&!w,isFixedPosition:w,controlHeight:b});h(_.maxHeight),x(_.placement),c==null||c(_.placement)}},[n,a,s,i,r,c,b]),t({ref:u,placerProps:Cr(Cr({},e),{},{placement:g||Oue(a),maxHeight:f})})},Hit=function(e){var t=e.children,r=e.innerRef,n=e.innerProps;return jr("div",Rr({},Es(e,"menu",{menu:!0}),{ref:r},n),t)},Pue=function(e,t){var r=e.theme,n=r.spacing.baseUnit,a=r.colors;return Cr({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px")})},Vit=Pue,zit=Pue,$it=["size"],Git=["innerProps","isRtl","size"],bI,yI,Kit={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Rue=function(e){var t=e.size,r=RA(e,$it);return jr("svg",Rr({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Kit},r))},wI=function(e){return jr(Rue,Rr({size:20},e),jr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},PW=function(e){return jr(Rue,Rr({size:20},e),jr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Lue=function(e,t){var r=e.isFocused,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return Cr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*a,":hover":{color:r?s.neutral80:s.neutral40}})},qit=Lue,Wit=Lue,Xit=function(){var e=mM.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(DW||(bI=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],yI||(yI=bI.slice(0)),DW=Object.freeze(Object.defineProperties(bI,{raw:{value:Object.freeze(yI)}})))),EI=function(e){var t=e.delay,r=e.offset;return jr("span",{css:mM({animation:"".concat(Xit," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Yit=function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.innerRef,s=e.innerProps,i=e.menuIsOpen;return jr("div",Rr({ref:a},Es(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":n,"control--menu-is-open":i}),s,{"aria-disabled":r||void 0}),t)},Jit=["data"],Zit=function(e){var t=e.children,r=e.cx,n=e.getStyles,a=e.getClassNames,s=e.Heading,i=e.headingProps,o=e.innerProps,c=e.label,u=e.theme,d=e.selectProps;return jr("div",Rr({},Es(e,"group",{group:!0}),o),jr(s,Rr({},i,{selectProps:d,theme:u,getStyles:n,getClassNames:a,cx:r}),c),jr("div",null,t))},eot=["innerRef","isDisabled","isHidden","inputClassName"],Mue={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},tot={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Cr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},Mue)},rot=function(e){return Cr({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},Mue)},RW=function(e){var t=e.children,r=e.innerProps;return jr("div",r,t)},not=function(e){var t=e.children,r=e.components,n=e.data,a=e.innerProps,s=e.isDisabled,i=e.removeProps,o=e.selectProps,c=r.Container,u=r.Label,d=r.Remove;return jr(c,{data:n,innerProps:Cr(Cr({},Es(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),a),selectProps:o},jr(u,{data:n,innerProps:Cr({},Es(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:o},t),jr(d,{data:n,innerProps:Cr(Cr({},Es(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},i),selectProps:o}))},aot={ClearIndicator:function(e){var t=e.children,r=e.innerProps;return jr("div",Rr({},Es(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||jr(wI,null))},Control:Yit,DropdownIndicator:function(e){var t=e.children,r=e.innerProps;return jr("div",Rr({},Es(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||jr(PW,null))},DownChevron:PW,CrossIcon:wI,Group:Zit,GroupHeading:function(e){var t=IW(e);t.data;var r=RA(t,Jit);return jr("div",Rr({},Es(e,"groupHeading",{"group-heading":!0}),r))},IndicatorsContainer:function(e){var t=e.children,r=e.innerProps;return jr("div",Rr({},Es(e,"indicatorsContainer",{indicators:!0}),r),t)},IndicatorSeparator:function(e){var t=e.innerProps;return jr("span",Rr({},t,Es(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,r=e.value,n=IW(e),a=n.innerRef,s=n.isDisabled,i=n.isHidden,o=n.inputClassName,c=RA(n,eot);return jr("div",Rr({},Es(e,"input",{"input-container":!0}),{"data-value":r||""}),jr("input",Rr({className:t({input:!0},o),ref:a,style:rot(i),disabled:s},c)))},LoadingIndicator:function(e){var t=e.innerProps,r=e.isRtl,n=e.size,a=n===void 0?4:n,s=RA(e,Git);return jr("div",Rr({},Es(Cr(Cr({},s),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),jr(EI,{delay:0,offset:r}),jr(EI,{delay:160,offset:!0}),jr(EI,{delay:320,offset:!r}))},Menu:Hit,MenuList:function(e){var t=e.children,r=e.innerProps,n=e.innerRef,a=e.isMulti;return jr("div",Rr({},Es(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:n},r),t)},MenuPortal:function(e){var t=e.appendTo,r=e.children,n=e.controlElement,a=e.innerProps,s=e.menuPlacement,i=e.menuPosition,o=S.useRef(null),c=S.useRef(null),u=Qi(S.useState(Oue(s)),2),d=u[0],f=u[1],h=S.useMemo(function(){return{setPortalPlacement:f}},[]),p=Qi(S.useState(null),2),g=p[0],x=p[1],b=S.useCallback(function(){if(n){var B=function(E){var N=E.getBoundingClientRect();return{bottom:N.bottom,height:N.height,left:N.left,right:N.right,top:N.top,width:N.width}}(n),k=i==="fixed"?0:window.pageYOffset,I=B[d]+k;I===(g==null?void 0:g.offset)&&B.left===(g==null?void 0:g.rect.left)&&B.width===(g==null?void 0:g.rect.width)||x({offset:I,rect:B})}},[n,i,d,g==null?void 0:g.offset,g==null?void 0:g.rect.left,g==null?void 0:g.rect.width]);PO(function(){b()},[b]);var y=S.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),n&&o.current&&(c.current=function(B,k,I,E){E===void 0&&(E={});const{ancestorScroll:N=!0,ancestorResize:j=!0,elementResize:R=!0,animationFrame:D=!1}=E,O=N&&!D,L=O||j?[...N5(B)?S5(B):B.contextElement?S5(B.contextElement):[],...S5(k)]:[];L.forEach(K=>{O&&K.addEventListener("scroll",I,{passive:!0}),j&&K.addEventListener("resize",I)});let M,J=null;if(R){let K=!0;J=new ResizeObserver(()=>{K||I(),K=!1}),N5(B)&&!D&&J.observe(B),N5(B)||!B.contextElement||D||J.observe(B.contextElement),J.observe(k)}let V=D?jW(B):null;return D&&function K(){const z=jW(B);!V||z.x===V.x&&z.y===V.y&&z.width===V.width&&z.height===V.height||I(),V=z,M=requestAnimationFrame(K)}(),I(),()=>{var K;L.forEach(z=>{O&&z.removeEventListener("scroll",I),j&&z.removeEventListener("resize",I)}),(K=J)==null||K.disconnect(),J=null,D&&cancelAnimationFrame(M)}}(n,o.current,b,{elementResize:"ResizeObserver"in window}))},[n,b]);PO(function(){y()},[y]);var w=S.useCallback(function(B){o.current=B,y()},[y]);if(!t&&i!=="fixed"||!g)return null;var _=jr("div",Rr({ref:w},Es(Cr(Cr({},e),{},{offset:g.offset,position:i,rect:g.rect}),"menuPortal",{"menu-portal":!0}),a),r);return jr(Due.Provider,{value:h},t?FP.createPortal(_,t):_)},LoadingMessage:function(e){var t=e.children,r=t===void 0?"Loading...":t,n=e.innerProps,a=RA(e,Mit);return jr("div",Rr({},Es(Cr(Cr({},a),{},{children:r,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),r)},NoOptionsMessage:function(e){var t=e.children,r=t===void 0?"No options":t,n=e.innerProps,a=RA(e,Lit);return jr("div",Rr({},Es(Cr(Cr({},a),{},{children:r,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),r)},MultiValue:not,MultiValueContainer:RW,MultiValueLabel:RW,MultiValueRemove:function(e){var t=e.children,r=e.innerProps;return jr("div",Rr({role:"button"},r),t||jr(wI,{size:14}))},Option:function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.innerRef,i=e.innerProps;return jr("div",Rr({},Es(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":n,"option--is-selected":a}),{ref:s,"aria-disabled":r},i),t)},Placeholder:function(e){var t=e.children,r=e.innerProps;return jr("div",Rr({},Es(e,"placeholder",{placeholder:!0}),r),t)},SelectContainer:function(e){var t=e.children,r=e.innerProps,n=e.isDisabled,a=e.isRtl;return jr("div",Rr({},Es(e,"container",{"--is-disabled":n,"--is-rtl":a}),r),t)},SingleValue:function(e){var t=e.children,r=e.isDisabled,n=e.innerProps;return jr("div",Rr({},Es(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),n),t)},ValueContainer:function(e){var t=e.children,r=e.innerProps,n=e.isMulti,a=e.hasValue;return jr("div",Rr({},Es(e,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":a}),r),t)}},LW=Number.isNaN||function(e){return typeof e=="number"&&e!=e};function sot(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],a=t[r],!(n===a||LW(n)&&LW(a)))return!1;var n,a;return!0}for(var iot={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},MW=function(e){return jr("span",Rr({css:iot},e))},oot={guidance:function(e){var t=e.isSearchable,r=e.isMulti,n=e.tabSelectsValue,a=e.context,s=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(n?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,n=r===void 0?"":r,a=e.labels,s=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return"option ".concat(n,s?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,n=e.options,a=e.label,s=a===void 0?"":a,i=e.selectValue,o=e.isDisabled,c=e.isSelected,u=e.isAppleDevice,d=function(p,g){return p&&p.length?"".concat(p.indexOf(g)+1," of ").concat(p.length):""};if(t==="value"&&i)return"value ".concat(s," focused, ").concat(d(i,r),".");if(t==="menu"&&u){var f=o?" disabled":"",h="".concat(c?" selected":"").concat(f);return"".concat(s).concat(h,", ").concat(d(n,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},lot=function(e){var t=e.ariaSelection,r=e.focusedOption,n=e.focusedValue,a=e.focusableOptions,s=e.isFocused,i=e.selectValue,o=e.selectProps,c=e.id,u=e.isAppleDevice,d=o.ariaLiveMessages,f=o.getOptionLabel,h=o.inputValue,p=o.isMulti,g=o.isOptionDisabled,x=o.isSearchable,b=o.menuIsOpen,y=o.options,w=o.screenReaderStatus,_=o.tabSelectsValue,B=o.isLoading,k=o["aria-label"],I=o["aria-live"],E=S.useMemo(function(){return Cr(Cr({},oot),d||{})},[d]),N=S.useMemo(function(){var M,J="";if(t&&E.onChange){var V=t.option,K=t.options,z=t.removedValue,G=t.removedValues,Y=t.value,ee=z||V||(M=Y,Array.isArray(M)?null:M),P=ee?f(ee):"",Q=K||G||void 0,X=Q?Q.map(f):[],te=Cr({isDisabled:ee&&g(ee,i),label:P,labels:X},t);J=E.onChange(te)}return J},[t,E,g,i,f]),j=S.useMemo(function(){var M="",J=r||n,V=!!(r&&i&&i.includes(r));if(J&&E.onFocus){var K={focused:J,label:f(J),isDisabled:g(J,i),isSelected:V,options:a,context:J===r?"menu":"value",selectValue:i,isAppleDevice:u};M=E.onFocus(K)}return M},[r,n,f,g,E,a,i,u]),R=S.useMemo(function(){var M="";if(b&&y.length&&!B&&E.onFilter){var J=w({count:a.length});M=E.onFilter({inputValue:h,resultsMessage:J})}return M},[a,h,b,E,y,w,B]),D=(t==null?void 0:t.action)==="initial-input-focus",O=S.useMemo(function(){var M="";if(E.guidance){var J=n?"value":b?"menu":"input";M=E.guidance({"aria-label":k,context:J,isDisabled:r&&g(r,i),isMulti:p,isSearchable:x,tabSelectsValue:_,isInitialFocus:D})}return M},[k,r,n,p,g,x,b,E,i,_,D]),L=jr(S.Fragment,null,jr("span",{id:"aria-selection"},N),jr("span",{id:"aria-focused"},j),jr("span",{id:"aria-results"},R),jr("span",{id:"aria-guidance"},O));return jr(S.Fragment,null,jr(MW,{id:c},D&&L),jr(MW,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!D&&L))},CI=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],cot=new RegExp("["+CI.map(function(e){return e.letters}).join("")+"]","g"),Uue={},_I=0;_I<CI.length;_I++)for(var NI=CI[_I],SI=0;SI<NI.letters.length;SI++)Uue[NI.letters[SI]]=NI.base;var Que=function(e){return e.replace(cot,function(t){return Uue[t]})},uot=function(e,t){t===void 0&&(t=sot);var r=null;function n(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var i=e.apply(this,a);return r={lastResult:i,lastArgs:a,lastThis:this},i}return n.clear=function(){r=null},n}(Que),UW=function(e){return e.replace(/^\s+|\s+$/g,"")},dot=function(e){return"".concat(e.label," ").concat(e.value)},Aot=["innerRef"];function fot(e){var t=e.innerRef,r=function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];var o=Object.entries(n).filter(function(c){var u=Qi(c,1)[0];return!s.includes(u)});return o.reduce(function(c,u){var d=Qi(u,2),f=d[0],h=d[1];return c[f]=h,c},{})}(RA(e,Aot),"onExited","in","enter","exit","appear");return jr("input",Rr({ref:t},r,{css:mM({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var QW=["boxSizing","height","overflow","paddingRight","position"],HW={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function VW(e){e.preventDefault()}function zW(e){e.stopPropagation()}function $W(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function GW(){return"ontouchstart"in window||navigator.maxTouchPoints}var KW=!(typeof window>"u"||!window.document||!window.document.createElement),my=0,Lx={capture:!1,passive:!1},hot=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},mot={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function pot(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,a=function(i){var o=i.isEnabled,c=i.onBottomArrive,u=i.onBottomLeave,d=i.onTopArrive,f=i.onTopLeave,h=S.useRef(!1),p=S.useRef(!1),g=S.useRef(0),x=S.useRef(null),b=S.useCallback(function(I,E){if(x.current!==null){var N=x.current,j=N.scrollTop,R=N.scrollHeight,D=N.clientHeight,O=x.current,L=E>0,M=R-D-j,J=!1;M>E&&h.current&&(u&&u(I),h.current=!1),L&&p.current&&(f&&f(I),p.current=!1),L&&E>M?(c&&!h.current&&c(I),O.scrollTop=R,J=!0,h.current=!0):!L&&-E>j&&(d&&!p.current&&d(I),O.scrollTop=0,J=!0,p.current=!0),J&&function(V){V.cancelable&&V.preventDefault(),V.stopPropagation()}(I)}},[c,u,d,f]),y=S.useCallback(function(I){b(I,I.deltaY)},[b]),w=S.useCallback(function(I){g.current=I.changedTouches[0].clientY},[]),_=S.useCallback(function(I){var E=g.current-I.changedTouches[0].clientY;b(I,E)},[b]),B=S.useCallback(function(I){if(I){var E=!!Pit&&{passive:!1};I.addEventListener("wheel",y,E),I.addEventListener("touchstart",w,E),I.addEventListener("touchmove",_,E)}},[_,w,y]),k=S.useCallback(function(I){I&&(I.removeEventListener("wheel",y,!1),I.removeEventListener("touchstart",w,!1),I.removeEventListener("touchmove",_,!1))},[_,w,y]);return S.useEffect(function(){if(o){var I=x.current;return B(I),function(){k(I)}}},[o,B,k]),function(I){x.current=I}}({isEnabled:n===void 0||n,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),s=function(i){var o=i.isEnabled,c=i.accountForScrollbars,u=c===void 0||c,d=S.useRef({}),f=S.useRef(null),h=S.useCallback(function(g){if(KW){var x=document.body,b=x&&x.style;if(u&&QW.forEach(function(B){var k=b&&b[B];d.current[B]=k}),u&&my<1){var y=parseInt(d.current.paddingRight,10)||0,w=document.body?document.body.clientWidth:0,_=window.innerWidth-w+y||0;Object.keys(HW).forEach(function(B){var k=HW[B];b&&(b[B]=k)}),b&&(b.paddingRight="".concat(_,"px"))}x&&GW()&&(x.addEventListener("touchmove",VW,Lx),g&&(g.addEventListener("touchstart",$W,Lx),g.addEventListener("touchmove",zW,Lx))),my+=1}},[u]),p=S.useCallback(function(g){if(KW){var x=document.body,b=x&&x.style;my=Math.max(my-1,0),u&&my<1&&QW.forEach(function(y){var w=d.current[y];b&&(b[y]=w)}),x&&GW()&&(x.removeEventListener("touchmove",VW,Lx),g&&(g.removeEventListener("touchstart",$W,Lx),g.removeEventListener("touchmove",zW,Lx)))}},[u]);return S.useEffect(function(){if(o){var g=f.current;return h(g),function(){p(g)}}},[o,h,p]),function(g){f.current=g}}({isEnabled:r});return jr(S.Fragment,null,r&&jr("div",{onClick:hot,css:mot}),t(function(i){a(i),s(i)}))}var got={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},xot=function(e){var t=e.name,r=e.onFocus;return jr("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:got,value:"",onChange:function(){}})};function RO(e){var t;return typeof window<"u"&&window.navigator!=null&&e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform)}function Hue(){return RO(/^Mac/i)}function vot(){return RO(/^iPhone/i)||RO(/^iPad/i)||Hue()&&navigator.maxTouchPoints>1}var bot,yot={clearIndicator:Wit,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.theme,s=a.colors,i=a.borderRadius;return Cr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?s.neutral5:s.neutral0,borderColor:r?s.neutral10:n?s.primary:s.neutral20,borderRadius:i,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:n?s.primary:s.neutral30}})},dropdownIndicator:qit,group:function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},groupHeading:function(e,t){var r=e.theme,n=r.colors,a=r.spacing;return Cr({label:"group",cursor:"default",display:"block"},t?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*a.baseUnit,paddingRight:3*a.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return Cr({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?s.neutral10:s.neutral20,marginBottom:2*a,marginTop:2*a})},input:function(e,t){var r=e.isDisabled,n=e.value,a=e.theme,s=a.spacing,i=a.colors;return Cr(Cr({visibility:r?"hidden":"visible",transform:n?"translateZ(0)":""},tot),t?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:i.neutral80})},loadingIndicator:function(e,t){var r=e.isFocused,n=e.size,a=e.theme,s=a.colors,i=a.spacing.baseUnit;return Cr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*i})},loadingMessage:zit,menu:function(e,t){var r,n=e.placement,a=e.theme,s=a.borderRadius,i=a.spacing,o=a.colors;return Cr((dv(r={label:"menu"},function(c){return c?{bottom:"top",top:"bottom"}[c]:"bottom"}(n),"100%"),dv(r,"position","absolute"),dv(r,"width","100%"),dv(r,"zIndex",1),r),t?{}:{backgroundColor:o.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:i.menuGutter,marginTop:i.menuGutter})},menuList:function(e,t){var r=e.maxHeight,n=e.theme.spacing.baseUnit;return Cr({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:n,paddingTop:n})},menuPortal:function(e){var t=e.rect,r=e.offset,n=e.position;return{left:t.left,position:n,top:r,width:t.width,zIndex:1}},multiValue:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors;return Cr({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:s.neutral10,borderRadius:a/2,margin:n.baseUnit/2})},multiValueLabel:function(e,t){var r=e.theme,n=r.borderRadius,a=r.colors,s=e.cropWithEllipsis;return Cr({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:n/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors,i=e.isFocused;return Cr({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:i?s.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},noOptionsMessage:Vit,option:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.theme,i=s.spacing,o=s.colors;return Cr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?o.primary:n?o.primary25:"transparent",color:r?o.neutral20:a?o.neutral0:"inherit",padding:"".concat(2*i.baseUnit,"px ").concat(3*i.baseUnit,"px"),":active":{backgroundColor:r?void 0:a?o.primary:o.primary50}})},placeholder:function(e,t){var r=e.theme,n=r.spacing,a=r.colors;return Cr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},singleValue:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing,s=n.colors;return Cr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?s.neutral40:s.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},valueContainer:function(e,t){var r=e.theme.spacing,n=e.isMulti,a=e.hasValue,s=e.selectProps.controlShouldRenderValue;return Cr({alignItems:"center",display:n&&a&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})}},kI={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},wot={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:OW(),captureMenuScroll:!OW(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var r=Cr({ignoreCase:!0,ignoreAccents:!0,stringify:dot,trim:!0,matchFrom:"any"},bot),n=r.ignoreCase,a=r.ignoreAccents,s=r.stringify,i=r.trim,o=r.matchFrom,c=i?UW(t):t,u=i?UW(s(e)):s(e);return n&&(c=c.toLowerCase(),u=u.toLowerCase()),a&&(c=uot(c),u=Que(u)),o==="start"?u.substr(0,c.length)===c:u.indexOf(c)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function qW(e,t,r,n){return{type:"option",data:t,isDisabled:zue(e,t,r),isSelected:$ue(e,t,r),label:Vue(e,t),value:NS(e,t),index:n}}function v_(e,t){return e.options.map(function(r,n){if("options"in r){var a=r.options.map(function(i,o){return qW(e,i,t,o)}).filter(function(i){return YW(e,i)});return a.length>0?{type:"group",data:r,options:a,index:n}:void 0}var s=qW(e,r,t,n);return YW(e,s)?s:void 0}).filter(Rit)}function WW(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,lM(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function XW(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,lM(n.options.map(function(a){return{data:a.data,id:"".concat(t,"-").concat(n.index,"-").concat(a.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function YW(e,t){var r=e.inputValue,n=r===void 0?"":r,a=t.data,s=t.isSelected,i=t.label,o=t.value;return(!Kue(e)||!s)&&Gue(e,{label:i,value:o,data:a},n)}var BI=function(e,t){var r;return((r=e.find(function(n){return n.data===t}))===null||r===void 0?void 0:r.id)||null},Vue=function(e,t){return e.getOptionLabel(t)},NS=function(e,t){return e.getOptionValue(t)};function zue(e,t,r){return typeof e.isOptionDisabled=="function"&&e.isOptionDisabled(t,r)}function $ue(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=NS(e,t);return r.some(function(a){return NS(e,a)===n})}function Gue(e,t,r){return!e.filterOption||e.filterOption(t,r)}var Kue=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},Eot=1,que=function(e){(function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),o&&SO(i,o)})(s,S.Component);var t,r,n,a=Xst(s);function s(i){var o;if(function(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}(this,s),(o=a.call(this,i)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},o.blockOptionHover=!1,o.isComposing=!1,o.commonProps=void 0,o.initialTouchX=0,o.initialTouchY=0,o.openAfterFocus=!1,o.scrollToFocusedOptionOnUpdate=!1,o.userIsDragging=void 0,o.isAppleDevice=Hue()||vot(),o.controlRef=null,o.getControlRef=function(f){o.controlRef=f},o.focusedOptionRef=null,o.getFocusedOptionRef=function(f){o.focusedOptionRef=f},o.menuListRef=null,o.getMenuListRef=function(f){o.menuListRef=f},o.inputRef=null,o.getInputRef=function(f){o.inputRef=f},o.focus=o.focusInput,o.blur=o.blurInput,o.onChange=function(f,h){var p=o.props,g=p.onChange,x=p.name;h.name=x,o.ariaOnChange(f,h),g(f,h)},o.setValue=function(f,h,p){var g=o.props,x=g.closeMenuOnSelect,b=g.isMulti,y=g.inputValue;o.onInputChange("",{action:"set-value",prevInputValue:y}),x&&(o.setState({inputIsHiddenAfterUpdate:!b}),o.onMenuClose()),o.setState({clearFocusValueOnUpdate:!0}),o.onChange(f,{action:h,option:p})},o.selectOption=function(f){var h=o.props,p=h.blurInputOnSelect,g=h.isMulti,x=h.name,b=o.state.selectValue,y=g&&o.isOptionSelected(f,b),w=o.isOptionDisabled(f,b);if(y){var _=o.getOptionValue(f);o.setValue(b.filter(function(B){return o.getOptionValue(B)!==_}),"deselect-option",f)}else{if(w)return void o.ariaOnChange(f,{action:"select-option",option:f,name:x});g?o.setValue([].concat(lM(b),[f]),"select-option",f):o.setValue(f,"select-option")}p&&o.blurInput()},o.removeValue=function(f){var h=o.props.isMulti,p=o.state.selectValue,g=o.getOptionValue(f),x=p.filter(function(y){return o.getOptionValue(y)!==g}),b=x_(h,x,x[0]||null);o.onChange(b,{action:"remove-value",removedValue:f}),o.focusInput()},o.clearValue=function(){var f=o.state.selectValue;o.onChange(x_(o.props.isMulti,[],null),{action:"clear",removedValues:f})},o.popValue=function(){var f=o.props.isMulti,h=o.state.selectValue,p=h[h.length-1],g=h.slice(0,h.length-1),x=x_(f,g,g[0]||null);o.onChange(x,{action:"pop-value",removedValue:p})},o.getFocusedOptionId=function(f){return BI(o.state.focusableOptionsWithIds,f)},o.getFocusableOptionsWithIds=function(){return XW(v_(o.props,o.state.selectValue),o.getElementId("option"))},o.getValue=function(){return o.state.selectValue},o.cx=function(){for(var f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];return Fit.apply(void 0,[o.props.classNamePrefix].concat(h))},o.getOptionLabel=function(f){return Vue(o.props,f)},o.getOptionValue=function(f){return NS(o.props,f)},o.getStyles=function(f,h){var p=o.props.unstyled,g=yot[f](h,p);g.boxSizing="border-box";var x=o.props.styles[f];return x?x(g,h):g},o.getClassNames=function(f,h){var p,g;return(p=(g=o.props.classNames)[f])===null||p===void 0?void 0:p.call(g,h)},o.getElementId=function(f){return"".concat(o.state.instancePrefix,"-").concat(f)},o.getComponents=function(){return f=o.props,Cr(Cr({},aot),f.components);var f},o.buildCategorizedOptions=function(){return v_(o.props,o.state.selectValue)},o.getCategorizedOptions=function(){return o.props.menuIsOpen?o.buildCategorizedOptions():[]},o.buildFocusableOptions=function(){return WW(o.buildCategorizedOptions())},o.getFocusableOptions=function(){return o.props.menuIsOpen?o.buildFocusableOptions():[]},o.ariaOnChange=function(f,h){o.setState({ariaSelection:Cr({value:f},h)})},o.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),o.focusInput())},o.onMenuMouseMove=function(f){o.blockOptionHover=!1},o.onControlMouseDown=function(f){if(!f.defaultPrevented){var h=o.props.openMenuOnClick;o.state.isFocused?o.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&o.onMenuClose():h&&o.openMenu("first"):(h&&(o.openAfterFocus=!0),o.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},o.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0||o.props.isDisabled)){var h=o.props,p=h.isMulti,g=h.menuIsOpen;o.focusInput(),g?(o.setState({inputIsHiddenAfterUpdate:!p}),o.onMenuClose()):o.openMenu("first"),f.preventDefault()}},o.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(o.clearValue(),f.preventDefault(),o.openAfterFocus=!1,f.type==="touchend"?o.focusInput():setTimeout(function(){return o.focusInput()}))},o.onScroll=function(f){typeof o.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&$k(f.target)&&o.props.onMenuClose():typeof o.props.closeMenuOnScroll=="function"&&o.props.closeMenuOnScroll(f)&&o.props.onMenuClose()},o.onCompositionStart=function(){o.isComposing=!0},o.onCompositionEnd=function(){o.isComposing=!1},o.onTouchStart=function(f){var h=f.touches,p=h&&h.item(0);p&&(o.initialTouchX=p.clientX,o.initialTouchY=p.clientY,o.userIsDragging=!1)},o.onTouchMove=function(f){var h=f.touches,p=h&&h.item(0);if(p){var g=Math.abs(p.clientX-o.initialTouchX),x=Math.abs(p.clientY-o.initialTouchY);o.userIsDragging=g>5||x>5}},o.onTouchEnd=function(f){o.userIsDragging||(o.controlRef&&!o.controlRef.contains(f.target)&&o.menuListRef&&!o.menuListRef.contains(f.target)&&o.blurInput(),o.initialTouchX=0,o.initialTouchY=0)},o.onControlTouchEnd=function(f){o.userIsDragging||o.onControlMouseDown(f)},o.onClearIndicatorTouchEnd=function(f){o.userIsDragging||o.onClearIndicatorMouseDown(f)},o.onDropdownIndicatorTouchEnd=function(f){o.userIsDragging||o.onDropdownIndicatorMouseDown(f)},o.handleInputChange=function(f){var h=o.props.inputValue,p=f.currentTarget.value;o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange(p,{action:"input-change",prevInputValue:h}),o.props.menuIsOpen||o.onMenuOpen()},o.onInputFocus=function(f){o.props.onFocus&&o.props.onFocus(f),o.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(o.openAfterFocus||o.props.openMenuOnFocus)&&o.openMenu("first"),o.openAfterFocus=!1},o.onInputBlur=function(f){var h=o.props.inputValue;o.menuListRef&&o.menuListRef.contains(document.activeElement)?o.inputRef.focus():(o.props.onBlur&&o.props.onBlur(f),o.onInputChange("",{action:"input-blur",prevInputValue:h}),o.onMenuClose(),o.setState({focusedValue:null,isFocused:!1}))},o.onOptionHover=function(f){if(!o.blockOptionHover&&o.state.focusedOption!==f){var h=o.getFocusableOptions().indexOf(f);o.setState({focusedOption:f,focusedOptionId:h>-1?o.getFocusedOptionId(f):null})}},o.shouldHideSelectedOptions=function(){return Kue(o.props)},o.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),o.focus()},o.onKeyDown=function(f){var h=o.props,p=h.isMulti,g=h.backspaceRemovesValue,x=h.escapeClearsValue,b=h.inputValue,y=h.isClearable,w=h.isDisabled,_=h.menuIsOpen,B=h.onKeyDown,k=h.tabSelectsValue,I=h.openMenuOnFocus,E=o.state,N=E.focusedOption,j=E.focusedValue,R=E.selectValue;if(!(w||typeof B=="function"&&(B(f),f.defaultPrevented))){switch(o.blockOptionHover=!0,f.key){case"ArrowLeft":if(!p||b)return;o.focusValue("previous");break;case"ArrowRight":if(!p||b)return;o.focusValue("next");break;case"Delete":case"Backspace":if(b)return;if(j)o.removeValue(j);else{if(!g)return;p?o.popValue():y&&o.clearValue()}break;case"Tab":if(o.isComposing||f.shiftKey||!_||!k||!N||I&&o.isOptionSelected(N,R))return;o.selectOption(N);break;case"Enter":if(f.keyCode===229)break;if(_){if(!N||o.isComposing)return;o.selectOption(N);break}return;case"Escape":_?(o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange("",{action:"menu-close",prevInputValue:b}),o.onMenuClose()):y&&x&&o.clearValue();break;case" ":if(b)return;if(!_){o.openMenu("first");break}if(!N)return;o.selectOption(N);break;case"ArrowUp":_?o.focusOption("up"):o.openMenu("last");break;case"ArrowDown":_?o.focusOption("down"):o.openMenu("first");break;case"PageUp":if(!_)return;o.focusOption("pageup");break;case"PageDown":if(!_)return;o.focusOption("pagedown");break;case"Home":if(!_)return;o.focusOption("first");break;case"End":if(!_)return;o.focusOption("last");break;default:return}f.preventDefault()}},o.state.instancePrefix="react-select-"+(o.props.instanceId||++Eot),o.state.selectValue=TW(i.value),i.menuIsOpen&&o.state.selectValue.length){var c=o.getFocusableOptionsWithIds(),u=o.buildFocusableOptions(),d=u.indexOf(o.state.selectValue[0]);o.state.focusableOptionsWithIds=c,o.state.focusedOption=u[d],o.state.focusedOptionId=BI(c,u[d])}return o}return t=s,r=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&FW(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var o=this.props,c=o.isDisabled,u=o.menuIsOpen,d=this.state.isFocused;(d&&!c&&i.isDisabled||d&&u&&!i.menuIsOpen)&&this.focusInput(),d&&c&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):d||c||!i.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(FW(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,o){this.props.onInputChange(i,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var o=this,c=this.state,u=c.selectValue,d=c.isFocused,f=this.buildFocusableOptions(),h=i==="first"?0:f.length-1;if(!this.props.isMulti){var p=f.indexOf(u[0]);p>-1&&(h=p)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:f[h],focusedOptionId:this.getFocusedOptionId(f[h])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(i){var o=this.state,c=o.selectValue,u=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=c.indexOf(u);u||(d=-1);var f=c.length-1,h=-1;if(c.length){switch(i){case"previous":h=d===0?0:d===-1?f:d-1;break;case"next":d>-1&&d<f&&(h=d+1)}this.setState({inputIsHidden:h!==-1,focusedValue:c[h]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,c=this.state.focusedOption,u=this.getFocusableOptions();if(u.length){var d=0,f=u.indexOf(c);c||(f=-1),i==="up"?d=f>0?f-1:u.length-1:i==="down"?d=(f+1)%u.length:i==="pageup"?(d=f-o)<0&&(d=0):i==="pagedown"?(d=f+o)>u.length-1&&(d=u.length-1):i==="last"&&(d=u.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:u[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(u[d])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(kI):Cr(Cr({},kI),this.props.theme):kI}},{key:"getCommonProps",value:function(){var i=this.clearValue,o=this.cx,c=this.getStyles,u=this.getClassNames,d=this.getValue,f=this.selectOption,h=this.setValue,p=this.props,g=p.isMulti,x=p.isRtl,b=p.options;return{clearValue:i,cx:o,getStyles:c,getClassNames:u,getValue:d,hasValue:this.hasValue(),isMulti:g,isRtl:x,options:b,selectOption:f,selectProps:p,setValue:h,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,o=i.isClearable,c=i.isMulti;return o===void 0?c:o}},{key:"isOptionDisabled",value:function(i,o){return zue(this.props,i,o)}},{key:"isOptionSelected",value:function(i,o){return $ue(this.props,i,o)}},{key:"filterOption",value:function(i,o){return Gue(this.props,i,o)}},{key:"formatOptionLabel",value:function(i,o){if(typeof this.props.formatOptionLabel=="function"){var c=this.props.inputValue,u=this.state.selectValue;return this.props.formatOptionLabel(i,{context:o,inputValue:c,selectValue:u})}return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,o=i.isDisabled,c=i.isSearchable,u=i.inputId,d=i.inputValue,f=i.tabIndex,h=i.form,p=i.menuIsOpen,g=i.required,x=this.getComponents().Input,b=this.state,y=b.inputIsHidden,w=b.ariaSelection,_=this.commonProps,B=u||this.getElementId("input"),k=Cr(Cr(Cr({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!c&&{"aria-readonly":!0}),this.hasValue()?(w==null?void 0:w.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return c?S.createElement(x,Rr({},_,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:B,innerRef:this.getInputRef,isDisabled:o,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:f,form:h,type:"text",value:d},k)):S.createElement(fot,Rr({id:B,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:CS,onFocus:this.onInputFocus,disabled:o,tabIndex:f,inputMode:"none",form:h,value:""},k))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,o=this.getComponents(),c=o.MultiValue,u=o.MultiValueContainer,d=o.MultiValueLabel,f=o.MultiValueRemove,h=o.SingleValue,p=o.Placeholder,g=this.commonProps,x=this.props,b=x.controlShouldRenderValue,y=x.isDisabled,w=x.isMulti,_=x.inputValue,B=x.placeholder,k=this.state,I=k.selectValue,E=k.focusedValue,N=k.isFocused;if(!this.hasValue()||!b)return _?null:S.createElement(p,Rr({},g,{key:"placeholder",isDisabled:y,isFocused:N,innerProps:{id:this.getElementId("placeholder")}}),B);if(w)return I.map(function(R,D){var O=R===E,L="".concat(i.getOptionLabel(R),"-").concat(i.getOptionValue(R));return S.createElement(c,Rr({},g,{components:{Container:u,Label:d,Remove:f},isFocused:O,isDisabled:y,key:L,index:D,removeProps:{onClick:function(){return i.removeValue(R)},onTouchEnd:function(){return i.removeValue(R)},onMouseDown:function(M){M.preventDefault()}},data:R}),i.formatOptionLabel(R,"value"))});if(_)return null;var j=I[0];return S.createElement(h,Rr({},g,{data:j,isDisabled:y}),this.formatOptionLabel(j,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents().ClearIndicator,o=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;if(!this.isClearable()||!i||u||!this.hasValue()||d)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return S.createElement(i,Rr({},o,{innerProps:h,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents().LoadingIndicator,o=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;return i&&d?S.createElement(i,Rr({},o,{innerProps:{"aria-hidden":"true"},isDisabled:u,isFocused:f})):null}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator,c=i.IndicatorSeparator;if(!o||!c)return null;var u=this.commonProps,d=this.props.isDisabled,f=this.state.isFocused;return S.createElement(c,Rr({},u,{isDisabled:d,isFocused:f}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents().DropdownIndicator;if(!i)return null;var o=this.commonProps,c=this.props.isDisabled,u=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return S.createElement(i,Rr({},o,{innerProps:d,isDisabled:c,isFocused:u}))}},{key:"renderMenu",value:function(){var i=this,o=this.getComponents(),c=o.Group,u=o.GroupHeading,d=o.Menu,f=o.MenuList,h=o.MenuPortal,p=o.LoadingMessage,g=o.NoOptionsMessage,x=o.Option,b=this.commonProps,y=this.state.focusedOption,w=this.props,_=w.captureMenuScroll,B=w.inputValue,k=w.isLoading,I=w.loadingMessage,E=w.minMenuHeight,N=w.maxMenuHeight,j=w.menuIsOpen,R=w.menuPlacement,D=w.menuPosition,O=w.menuPortalTarget,L=w.menuShouldBlockScroll,M=w.menuShouldScrollIntoView,J=w.noOptionsMessage,V=w.onMenuScrollToTop,K=w.onMenuScrollToBottom;if(!j)return null;var z,G=function(X,te){var ae=X.type,se=X.data,oe=X.isDisabled,ce=X.isSelected,me=X.label,ke=X.value,ne=y===se,_e=oe?void 0:function(){return i.onOptionHover(se)},De=oe?void 0:function(){return i.selectOption(se)},Ne="".concat(i.getElementId("option"),"-").concat(te),fe={id:Ne,onClick:De,onMouseMove:_e,onMouseOver:_e,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:ce};return S.createElement(x,Rr({},b,{innerProps:fe,data:se,isDisabled:oe,isSelected:ce,key:Ne,label:me,type:ae,value:ke,isFocused:ne,innerRef:ne?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(X.data,"menu"))};if(this.hasOptions())z=this.getCategorizedOptions().map(function(X){if(X.type==="group"){var te=X.data,ae=X.options,se=X.index,oe="".concat(i.getElementId("group"),"-").concat(se),ce="".concat(oe,"-heading");return S.createElement(c,Rr({},b,{key:oe,data:te,options:ae,Heading:u,headingProps:{id:ce,data:X.data},label:i.formatGroupLabel(X.data)}),X.options.map(function(me){return G(me,"".concat(se,"-").concat(me.index))}))}if(X.type==="option")return G(X,"".concat(X.index))});else if(k){var Y=I({inputValue:B});if(Y===null)return null;z=S.createElement(p,b,Y)}else{var ee=J({inputValue:B});if(ee===null)return null;z=S.createElement(g,b,ee)}var P={minMenuHeight:E,maxMenuHeight:N,menuPlacement:R,menuPosition:D,menuShouldScrollIntoView:M},Q=S.createElement(Qit,Rr({},b,P),function(X){var te=X.ref,ae=X.placerProps,se=ae.placement,oe=ae.maxHeight;return S.createElement(d,Rr({},b,P,{innerRef:te,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:k,placement:se}),S.createElement(pot,{captureEnabled:_,onTopArrive:V,onBottomArrive:K,lockEnabled:L},function(ce){return S.createElement(f,Rr({},b,{innerRef:function(me){i.getMenuListRef(me),ce(me)},innerProps:{role:"listbox","aria-multiselectable":b.isMulti,id:i.getElementId("listbox")},isLoading:k,maxHeight:oe,focusedOption:y}),z)}))});return O||D==="fixed"?S.createElement(h,Rr({},b,{appendTo:O,controlElement:this.controlRef,menuPlacement:R,menuPosition:D}),Q):Q}},{key:"renderFormField",value:function(){var i=this,o=this.props,c=o.delimiter,u=o.isDisabled,d=o.isMulti,f=o.name,h=o.required,p=this.state.selectValue;if(h&&!this.hasValue()&&!u)return S.createElement(xot,{name:f,onFocus:this.onValueInputFocus});if(f&&!u){if(d){if(c){var g=p.map(function(y){return i.getOptionValue(y)}).join(c);return S.createElement("input",{name:f,type:"hidden",value:g})}var x=p.length>0?p.map(function(y,w){return S.createElement("input",{key:"i-".concat(w),name:f,type:"hidden",value:i.getOptionValue(y)})}):S.createElement("input",{name:f,type:"hidden",value:""});return S.createElement("div",null,x)}var b=p[0]?this.getOptionValue(p[0]):"";return S.createElement("input",{name:f,type:"hidden",value:b})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,o=this.state,c=o.ariaSelection,u=o.focusedOption,d=o.focusedValue,f=o.isFocused,h=o.selectValue,p=this.getFocusableOptions();return S.createElement(lot,Rr({},i,{id:this.getElementId("live-region"),ariaSelection:c,focusedOption:u,focusedValue:d,isFocused:f,selectValue:h,focusableOptions:p,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),o=i.Control,c=i.IndicatorsContainer,u=i.SelectContainer,d=i.ValueContainer,f=this.props,h=f.className,p=f.id,g=f.isDisabled,x=f.menuIsOpen,b=this.state.isFocused,y=this.commonProps=this.getCommonProps();return S.createElement(u,Rr({},y,{className:h,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:b}),this.renderLiveRegion(),S.createElement(o,Rr({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:b,menuIsOpen:x}),S.createElement(d,Rr({},y,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),S.createElement(c,Rr({},y,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],n=[{key:"getDerivedStateFromProps",value:function(i,o){var c=o.prevProps,u=o.clearFocusValueOnUpdate,d=o.inputIsHiddenAfterUpdate,f=o.ariaSelection,h=o.isFocused,p=o.prevWasFocused,g=o.instancePrefix,x=i.options,b=i.value,y=i.menuIsOpen,w=i.inputValue,_=i.isMulti,B=TW(b),k={};if(c&&(b!==c.value||x!==c.options||y!==c.menuIsOpen||w!==c.inputValue)){var I=y?function(L,M){return WW(v_(L,M))}(i,B):[],E=y?XW(v_(i,B),"".concat(g,"-option")):[],N=u?function(L,M){var J=L.focusedValue,V=L.selectValue.indexOf(J);if(V>-1){if(M.indexOf(J)>-1)return J;if(V<M.length)return M[V]}return null}(o,B):null,j=function(L,M){var J=L.focusedOption;return J&&M.indexOf(J)>-1?J:M[0]}(o,I);k={selectValue:B,focusedOption:j,focusedOptionId:BI(E,j),focusableOptionsWithIds:E,focusedValue:N,clearFocusValueOnUpdate:!1}}var R=d!=null&&i!==c?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},D=f,O=h&&p;return h&&!O&&(D={value:x_(_,B,B[0]||null),options:B,action:"initial-input-focus"},O=!p),(f==null?void 0:f.action)==="initial-input-focus"&&(D=null),Cr(Cr(Cr({},k),R),{},{prevProps:i,ariaSelection:D,prevWasFocused:O})}}],r&&AW(t.prototype,r),n&&AW(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}();que.defaultProps=wot;var Cot=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],_ot=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],pM=ia(function(e){function t(r){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),Not=ia(function(e){var t=pM.default;e.exports=function(r,n){if(t(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n||"default");if(t(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)},e.exports.__esModule=!0,e.exports.default=e.exports}),Wue=ia(function(e){var t=pM.default;e.exports=function(r){var n=Not(r,"string");return t(n)==="symbol"?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports}),Sot=ia(function(e){e.exports=function(t,r,n){return(r=Wue(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t},e.exports.__esModule=!0,e.exports.default=e.exports});ia(function(e){function t(r,n){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);n&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),a.push.apply(a,s)}return a}e.exports=function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?t(Object(a),!0).forEach(function(s){Sot(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r},e.exports.__esModule=!0,e.exports.default=e.exports}),ia(function(e){e.exports=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}),ia(function(e){function t(r,n){for(var a=0;a<n.length;a++){var s=n[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,Wue(s.key),s)}}e.exports=function(r,n,a){return n&&t(r.prototype,n),a&&t(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r},e.exports.__esModule=!0,e.exports.default=e.exports});var kot=ia(function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});ia(function(e){e.exports=function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&kot(t,r)},e.exports.__esModule=!0,e.exports.default=e.exports});var JW=ia(function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),Bot=ia(function(e){e.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}),jot=ia(function(e){e.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},e.exports.__esModule=!0,e.exports.default=e.exports}),Tot=ia(function(e){var t=pM.default;e.exports=function(r,n){if(n&&(t(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jot(r)},e.exports.__esModule=!0,e.exports.default=e.exports});ia(function(e){e.exports=function(t){var r=Bot();return function(){var n,a=JW(t);if(r){var s=JW(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return Tot(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports});var LO=ia(function(e){e.exports=function(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a},e.exports.__esModule=!0,e.exports.default=e.exports}),Iot=ia(function(e){e.exports=function(t){if(Array.isArray(t))return LO(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),Fot=ia(function(e){e.exports=function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),Xue=ia(function(e){e.exports=function(t,r){if(t){if(typeof t=="string")return LO(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?LO(t,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}),Oot=ia(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});ia(function(e){e.exports=function(t){return Iot(t)||Fot(t)||Xue(t)||Oot()},e.exports.__esModule=!0,e.exports.default=e.exports});var Dot=ia(function(e){e.exports=function(t){if(Array.isArray(t))return t},e.exports.__esModule=!0,e.exports.default=e.exports}),Pot=ia(function(e){e.exports=function(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,o,c=[],u=!0,d=!1;try{if(i=(n=n.call(t)).next,r===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=i.call(n)).done)&&(c.push(a.value),c.length!==r);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return c}},e.exports.__esModule=!0,e.exports.default=e.exports}),Rot=ia(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});ia(function(e){e.exports=function(t,r){return Dot(t)||Pot(t,r)||Xue(t,r)||Rot()},e.exports.__esModule=!0,e.exports.default=e.exports});var Lot=ia(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||(s[n]=t[n]);return s},e.exports.__esModule=!0,e.exports.default=e.exports});ia(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s=Lot(t,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s},e.exports.__esModule=!0,e.exports.default=e.exports}),ia(function(e){e.exports=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))},e.exports.__esModule=!0,e.exports.default=e.exports});var Mot=S.forwardRef(function(e,t){var r=function(a){var s=a.defaultOptions,i=s!==void 0&&s,o=a.cacheOptions,c=o!==void 0&&o,u=a.loadOptions;a.options;var d=a.isLoading,f=d!==void 0&&d,h=a.onInputChange,p=a.filterOption,g=p===void 0?null:p,x=RA(a,_ot),b=x.inputValue,y=S.useRef(void 0),w=S.useRef(!1),_=Qi(S.useState(Array.isArray(i)?i:void 0),2),B=_[0],k=_[1],I=Qi(S.useState(b!==void 0?b:""),2),E=I[0],N=I[1],j=Qi(S.useState(i===!0),2),R=j[0],D=j[1],O=Qi(S.useState(void 0),2),L=O[0],M=O[1],J=Qi(S.useState([]),2),V=J[0],K=J[1],z=Qi(S.useState(!1),2),G=z[0],Y=z[1],ee=Qi(S.useState({}),2),P=ee[0],Q=ee[1],X=Qi(S.useState(void 0),2),te=X[0],ae=X[1],se=Qi(S.useState(void 0),2),oe=se[0],ce=se[1];c!==oe&&(Q({}),ce(c)),i!==te&&(k(Array.isArray(i)?i:void 0),ae(i)),S.useEffect(function(){return w.current=!0,function(){w.current=!1}},[]);var me=S.useCallback(function(_e,De){if(!u)return De();var Ne=u(_e,De);Ne&&typeof Ne.then=="function"&&Ne.then(De,function(){return De()})},[u]);S.useEffect(function(){i===!0&&me(E,function(_e){w.current&&(k(_e||[]),D(!!y.current))})},[]);var ke=S.useCallback(function(_e,De){var Ne=function(Ie,Me,Xe){if(Xe){var ye=Xe(Ie,Me);if(typeof ye=="string")return ye}return Ie}(_e,De,h);if(!Ne)return y.current=void 0,N(""),M(""),K([]),D(!1),void Y(!1);if(c&&P[Ne])N(Ne),M(Ne),K(P[Ne]),D(!1),Y(!1);else{var fe=y.current={};N(Ne),D(!0),Y(!L),me(Ne,function(Ie){w&&fe===y.current&&(y.current=void 0,D(!1),M(Ne),K(Ie||[]),Y(!1),Q(Ie?Cr(Cr({},P),{},dv({},Ne,Ie)):P))})}},[c,me,L,P,h]),ne=G?[]:E&&L?V:B||[];return Cr(Cr({},x),{},{options:ne,isLoading:R||f,onInputChange:ke,filterOption:g})}(e),n=function(a){var s=a.defaultInputValue,i=s===void 0?"":s,o=a.defaultMenuIsOpen,c=o!==void 0&&o,u=a.defaultValue,d=u===void 0?null:u,f=a.inputValue,h=a.menuIsOpen,p=a.onChange,g=a.onInputChange,x=a.onMenuClose,b=a.onMenuOpen,y=a.value,w=RA(a,Cot),_=Qi(S.useState(f!==void 0?f:i),2),B=_[0],k=_[1],I=Qi(S.useState(h!==void 0?h:c),2),E=I[0],N=I[1],j=Qi(S.useState(y!==void 0?y:d),2),R=j[0],D=j[1],O=S.useCallback(function(G,Y){typeof p=="function"&&p(G,Y),D(G)},[p]),L=S.useCallback(function(G,Y){var ee;typeof g=="function"&&(ee=g(G,Y)),k(ee!==void 0?ee:G)},[g]),M=S.useCallback(function(){typeof b=="function"&&b(),N(!0)},[b]),J=S.useCallback(function(){typeof x=="function"&&x(),N(!1)},[x]),V=f!==void 0?f:B,K=h!==void 0?h:E,z=y!==void 0?y:R;return Cr(Cr({},w),{},{inputValue:V,menuIsOpen:K,onChange:O,onInputChange:L,onMenuClose:J,onMenuOpen:M,value:z})}(r);return S.createElement(que,Rr({ref:t},n))}),Uot=Mot,Qot=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(a=n;a--!=0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=n;a--!=0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!=0;){var i=s[a];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r},Av;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(Av||(Av={}));class kp{constructor({apiKey:t,authReferrerPolicy:r,channel:n,client:a,id:s="__googleMapsScriptId",language:i,libraries:o=[],mapIds:c,nonce:u,region:d,retries:f=3,url:h="https://maps.googleapis.com/maps/api/js",version:p}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=n,this.client=a,this.id=s||"__googleMapsScriptId",this.language=i,this.libraries=o,this.mapIds=c,this.nonce=u,this.region=d,this.retries=f,this.url=h,this.version=p,kp.instance){if(!Qot(this.options,kp.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(kp.instance.options)}`);return kp.instance}kp.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?Av.FAILURE:this.done?Av.SUCCESS:this.loading?Av.LOADING:Av.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(n=>{n?r(n.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),r=document.createElement("script");r.id=this.id,r.type="text/javascript",r.src=t,r.onerror=this.loadErrorCallback.bind(this),r.defer=!0,r.async=!0,this.nonce&&(r.nonce=this.nonce),document.head.appendChild(r)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var Hot=function(e,t,r){var n,a=e.bounds,s=e.location,i=function(c,u){var d={};for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&u.indexOf(f)<0&&(d[f]=c[f]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(f=Object.getOwnPropertySymbols(c);h<f.length;h++)u.indexOf(f[h])<0&&Object.prototype.propertyIsEnumerable.call(c,f[h])&&(d[f[h]]=c[f[h]])}return d}(e,["bounds","location"]),o=Zp({input:t},i);return r&&(o.sessionToken=r),a&&(o.bounds=new((n=google.maps.LatLngBounds).bind.apply(n,function(){for(var c=0,u=0,d=arguments.length;u<d;u++)c+=arguments[u].length;var f=Array(c),h=0;for(u=0;u<d;u++)for(var p=arguments[u],g=0,x=p.length;g<x;g++,h++)f[h]=p[g];return f}([void 0],a)))),s&&(o.location=new google.maps.LatLng(s)),o},Vot=function(e){var t=e.autocompletionRequest,r=e.debounce,n=e.minLengthAutocomplete,a=e.placesService,s=e.sessionToken,i=e.withSessionToken,o=function(c,u,d){d===void 0&&(d={});var f=d.maxWait,h=S.useRef(null),p=S.useRef([]),g=d.leading,x=d.trailing===void 0||d.trailing,b=S.useRef(!1),y=S.useRef(null),w=S.useRef(!1),_=S.useRef(c);_.current=c;var B=S.useCallback(function(){clearTimeout(y.current),clearTimeout(h.current),h.current=null,p.current=[],y.current=null,b.current=!1},[]);S.useEffect(function(){return w.current=!1,function(){w.current=!0}},[]);var k=S.useCallback(function(){for(var E=[],N=0;N<arguments.length;N++)E[N]=arguments[N];p.current=E,clearTimeout(y.current),b.current&&(b.current=!1),y.current||!g||b.current||(_.current.apply(_,E),b.current=!0),y.current=setTimeout(function(){var j=!0;g&&b.current&&(j=!1),B(),!w.current&&x&&j&&_.current.apply(_,E)},u),f&&!h.current&&x&&(h.current=setTimeout(function(){var j=p.current;B(),w.current||_.current.apply(null,j)},f))},[f,u,B,g,x]),I=S.useCallback(function(){y.current&&(_.current.apply(null,p.current),B())},[B]);return[k,B,I]}(function(c,u){if(!a)return u([]);if(c.length<n)return u([]);var d=Zp({},t);a.getPlacePredictions(Hot(d,c,i&&s),function(f){u((f||[]).map(function(h){return{label:h.description,value:h}}))})},r)[0];return o},ZW=S.forwardRef(function(e,t){var r,n,a,s,i,o,c,u,d=function(x){var b=x.apiKey,y=x.apiOptions,w=x.onLoadFailed,_=S.useState(void 0),B=_[0],k=_[1],I=S.useState(void 0),E=I[0],N=I[1],j=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");k(new window.google.maps.places.AutocompleteService),N(new google.maps.places.AutocompleteSessionToken)};return S.useEffect(function(){b?Kst(void 0,void 0,void 0,function(){var R;return qst(this,function(D){switch(D.label){case 0:if(!b)return[2];D.label=1;case 1:return D.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new kp(Zp({apiKey:b},Zp({libraries:["places"]},y))).load()];case 2:D.sent(),D.label=3;case 3:return j(),[3,5];case 4:return R=D.sent(),typeof w=="function"&&w(R),[3,5];case 5:return[2]}})}):j()},[]),{placesService:B,sessionToken:E,setSessionToken:N}}({apiKey:(r=e.apiKey)!==null&&r!==void 0?r:"",apiOptions:(n=e.apiOptions)!==null&&n!==void 0?n:{},onLoadFailed:(a=e.onLoadFailed)!==null&&a!==void 0?a:console.error}),f=d.placesService,h=d.sessionToken,p=d.setSessionToken,g=Vot({autocompletionRequest:(s=e.autocompletionRequest)!==null&&s!==void 0?s:{},debounce:(i=e.debounce)!==null&&i!==void 0?i:300,minLengthAutocomplete:(o=e.minLengthAutocomplete)!==null&&o!==void 0?o:0,placesService:f,sessionToken:h,withSessionToken:(c=e.withSessionToken)!==null&&c!==void 0&&c});return S.useImperativeHandle(t,function(){return{getSessionToken:function(){return h},refreshSessionToken:function(){p(new google.maps.places.AutocompleteSessionToken)}}},[h]),at.createElement(Uot,Zp({},(u=e.selectProps)!==null&&u!==void 0?u:{},{loadOptions:g,getOptionValue:function(x){return x.value.place_id}}))});/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var MO=function(e,t){return MO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},MO(e,t)};function Gd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");MO(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var UO=function(){return UO=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},UO.apply(this,arguments)};function fl(e,t,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function o(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?s(d.value):a(d.value).then(o,c)}u((n=n.apply(e,[])).next())})}function Qo(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function b_(e,t,r){if(arguments.length===2)for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||t)}var kh=function(){function e(t,r,n,a){this.left=t,this.top=r,this.width=n,this.height=a}return e.prototype.add=function(t,r,n,a){return new e(this.left+t,this.top+r,this.width+n,this.height+a)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),Gk=function(e,t){return kh.fromClientRect(e,t.getBoundingClientRect())},zot=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),a=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new kh(0,0,n,a)},Kk=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},Qs=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},eX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$ot=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var y_=0;y_<eX.length;y_++)$ot[eX.charCodeAt(y_)]=y_;var tX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ly=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var w_=0;w_<tX.length;w_++)Ly[tX.charCodeAt(w_)]=w_;var Got=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,o,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Ly[e.charCodeAt(n)],i=Ly[e.charCodeAt(n+1)],o=Ly[e.charCodeAt(n+2)],c=Ly[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|c&63;return u},Kot=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},qot=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},rg=5,gM=11,jI=2,Wot=gM-rg,Yue=65536>>rg,Xot=1<<rg,TI=Xot-1,Yot=1024>>rg,Jot=Yue+Yot,Zot=Jot,elt=32,tlt=Zot+elt,rlt=65536>>gM,nlt=1<<Wot,alt=nlt-1,rX=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},slt=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},ilt=function(e,t){var r=Got(e),n=Array.isArray(r)?qot(r):new Uint32Array(r),a=Array.isArray(r)?Kot(r):new Uint16Array(r),s=24,i=rX(a,s/2,n[4]/2),o=n[5]===2?rX(a,(s+n[4])/2):slt(n,Math.ceil((s+n[4])/4));return new olt(n[0],n[1],n[2],n[3],i,o)},olt=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>rg],r=(r<<jI)+(t&TI),this.data[r];if(t<=65535)return r=this.index[Yue+(t-55296>>rg)],r=(r<<jI)+(t&TI),this.data[r];if(t<this.highStart)return r=tlt-rlt+(t>>gM),r=this.index[r],r+=t>>rg&alt,r=this.index[r],r=(r<<jI)+(t&TI),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),nX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",llt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var E_=0;E_<nX.length;E_++)llt[nX.charCodeAt(E_)]=E_;var clt="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",aX=50,ult=1,Jue=2,Zue=3,dlt=4,Alt=5,sX=7,ede=8,iX=9,q0=10,QO=11,oX=12,HO=13,flt=14,My=15,VO=16,C_=17,py=18,hlt=19,lX=20,zO=21,gy=22,II=23,Mx=24,Nc=25,Uy=26,Qy=27,Ux=28,mlt=29,Bp=30,plt=31,__=32,N_=33,$O=34,GO=35,KO=36,x2=37,qO=38,k5=39,B5=40,FI=41,tde=42,glt=43,xlt=[9001,65288],rde="!",Sn="×",S_="÷",WO=ilt(clt),Hf=[Bp,KO],XO=[ult,Jue,Zue,Alt],nde=[q0,ede],cX=[Qy,Uy],vlt=XO.concat(nde),uX=[qO,k5,B5,$O,GO],blt=[My,HO],ylt=function(e,t){t===void 0&&(t="strict");var r=[],n=[],a=[];return e.forEach(function(s,i){var o=WO.get(s);if(o>aX?(a.push(!0),o-=aX):a.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(VO);if(o===dlt||o===QO){if(i===0)return n.push(i),r.push(Bp);var c=r[i-1];return vlt.indexOf(c)===-1?(n.push(n[i-1]),r.push(c)):(n.push(i),r.push(Bp))}if(n.push(i),o===plt)return r.push(t==="strict"?zO:x2);if(o===tde||o===mlt)return r.push(Bp);if(o===glt)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(x2):r.push(Bp);r.push(o)}),[n,r,a]},OI=function(e,t,r,n){var a=n[r];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===t)return!0;if(i!==q0)break}if(a===q0)for(var s=r;s>0;){s--;var o=n[s];if(Array.isArray(e)?e.indexOf(o)!==-1:e===o)for(var c=r;c<=n.length;){c++;var i=n[c];if(i===t)return!0;if(i!==q0)break}if(o!==q0)break}return!1},dX=function(e,t){for(var r=e;r>=0;){var n=t[r];if(n===q0)r--;else return n}return 0},wlt=function(e,t,r,n,a){if(r[n]===0)return Sn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return Sn;var i=s-1,o=s+1,c=t[s],u=i>=0?t[i]:0,d=t[o];if(c===Jue&&d===Zue)return Sn;if(XO.indexOf(c)!==-1)return rde;if(XO.indexOf(d)!==-1||nde.indexOf(d)!==-1)return Sn;if(dX(s,t)===ede)return S_;if(WO.get(e[s])===QO||(c===__||c===N_)&&WO.get(e[o])===QO||c===sX||d===sX||c===iX||[q0,HO,My].indexOf(c)===-1&&d===iX||[C_,py,hlt,Mx,Ux].indexOf(d)!==-1||dX(s,t)===gy||OI(II,gy,s,t)||OI([C_,py],zO,s,t)||OI(oX,oX,s,t))return Sn;if(c===q0)return S_;if(c===II||d===II)return Sn;if(d===VO||c===VO)return S_;if([HO,My,zO].indexOf(d)!==-1||c===flt||u===KO&&blt.indexOf(c)!==-1||c===Ux&&d===KO||d===lX||Hf.indexOf(d)!==-1&&c===Nc||Hf.indexOf(c)!==-1&&d===Nc||c===Qy&&[x2,__,N_].indexOf(d)!==-1||[x2,__,N_].indexOf(c)!==-1&&d===Uy||Hf.indexOf(c)!==-1&&cX.indexOf(d)!==-1||cX.indexOf(c)!==-1&&Hf.indexOf(d)!==-1||[Qy,Uy].indexOf(c)!==-1&&(d===Nc||[gy,My].indexOf(d)!==-1&&t[o+1]===Nc)||[gy,My].indexOf(c)!==-1&&d===Nc||c===Nc&&[Nc,Ux,Mx].indexOf(d)!==-1)return Sn;if([Nc,Ux,Mx,C_,py].indexOf(d)!==-1)for(var f=s;f>=0;){var h=t[f];if(h===Nc)return Sn;if([Ux,Mx].indexOf(h)!==-1)f--;else break}if([Qy,Uy].indexOf(d)!==-1)for(var f=[C_,py].indexOf(c)!==-1?i:s;f>=0;){var h=t[f];if(h===Nc)return Sn;if([Ux,Mx].indexOf(h)!==-1)f--;else break}if(qO===c&&[qO,k5,$O,GO].indexOf(d)!==-1||[k5,$O].indexOf(c)!==-1&&[k5,B5].indexOf(d)!==-1||[B5,GO].indexOf(c)!==-1&&d===B5||uX.indexOf(c)!==-1&&[lX,Uy].indexOf(d)!==-1||uX.indexOf(d)!==-1&&c===Qy||Hf.indexOf(c)!==-1&&Hf.indexOf(d)!==-1||c===Mx&&Hf.indexOf(d)!==-1||Hf.concat(Nc).indexOf(c)!==-1&&d===gy&&xlt.indexOf(e[o])===-1||Hf.concat(Nc).indexOf(d)!==-1&&c===py)return Sn;if(c===FI&&d===FI){for(var p=r[s],g=1;p>0&&(p--,t[p]===FI);)g++;if(g%2!==0)return Sn}return c===__&&d===N_?Sn:S_},Elt=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=ylt(e,t.lineBreak),n=r[0],a=r[1],s=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(a=a.map(function(o){return[Nc,Bp,tde].indexOf(o)!==-1?x2:o}));var i=t.wordBreak==="keep-all"?s.map(function(o,c){return o&&e[c]>=19968&&e[c]<=40959}):void 0;return[n,a,i]},Clt=function(){function e(t,r,n,a){this.codePoints=t,this.required=r===rde,this.start=n,this.end=a}return e.prototype.slice=function(){return Qs.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),_lt=function(e,t){var r=Kk(e),n=Elt(r,t),a=n[0],s=n[1],i=n[2],o=r.length,c=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var d=Sn;u<o&&(d=wlt(r,s,a,++u,i))===Sn;);if(d!==Sn||u===o){var f=new Clt(r,d,c,u);return c=u,{value:f,done:!1}}return{done:!0,value:null}}}},Nlt=1,Slt=2,fE=4,AX=8,SS=10,fX=47,pw=92,klt=9,Blt=32,k_=34,xy=61,jlt=35,Tlt=36,Ilt=37,B_=39,j_=40,vy=41,Flt=95,Kl=45,Olt=33,Dlt=60,Plt=62,Rlt=64,Llt=91,Mlt=93,Ult=61,Qlt=123,T_=63,Hlt=125,hX=124,Vlt=126,zlt=128,mX=65533,DI=42,Up=43,$lt=44,Glt=58,Klt=59,v2=46,qlt=0,Wlt=8,Xlt=11,Ylt=14,Jlt=31,Zlt=127,_A=-1,ade=48,sde=97,ide=101,ect=102,tct=117,rct=122,ode=65,lde=69,cde=70,nct=85,act=90,Go=function(e){return e>=ade&&e<=57},sct=function(e){return e>=55296&&e<=57343},Qx=function(e){return Go(e)||e>=ode&&e<=cde||e>=sde&&e<=ect},ict=function(e){return e>=sde&&e<=rct},oct=function(e){return e>=ode&&e<=act},lct=function(e){return ict(e)||oct(e)},cct=function(e){return e>=zlt},I_=function(e){return e===SS||e===klt||e===Blt},kS=function(e){return lct(e)||cct(e)||e===Flt},pX=function(e){return kS(e)||Go(e)||e===Kl},uct=function(e){return e>=qlt&&e<=Wlt||e===Xlt||e>=Ylt&&e<=Jlt||e===Zlt},O0=function(e,t){return e!==pw?!1:t!==SS},F_=function(e,t,r){return e===Kl?kS(t)||O0(t,r):kS(e)?!0:!!(e===pw&&O0(e,t))},PI=function(e,t,r){return e===Up||e===Kl?Go(t)?!0:t===v2&&Go(r):Go(e===v2?t:e)},dct=function(e){var t=0,r=1;(e[t]===Up||e[t]===Kl)&&(e[t]===Kl&&(r=-1),t++);for(var n=[];Go(e[t]);)n.push(e[t++]);var a=n.length?parseInt(Qs.apply(void 0,n),10):0;e[t]===v2&&t++;for(var s=[];Go(e[t]);)s.push(e[t++]);var i=s.length,o=i?parseInt(Qs.apply(void 0,s),10):0;(e[t]===lde||e[t]===ide)&&t++;var c=1;(e[t]===Up||e[t]===Kl)&&(e[t]===Kl&&(c=-1),t++);for(var u=[];Go(e[t]);)u.push(e[t++]);var d=u.length?parseInt(Qs.apply(void 0,u),10):0;return r*(a+o*Math.pow(10,-i))*Math.pow(10,c*d)},Act={type:2},fct={type:3},hct={type:4},mct={type:13},pct={type:8},gct={type:21},xct={type:9},vct={type:10},bct={type:11},yct={type:12},wct={type:14},O_={type:23},Ect={type:1},Cct={type:25},_ct={type:24},Nct={type:26},Sct={type:27},kct={type:28},Bct={type:29},jct={type:31},YO={type:32},ude=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(Kk(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==YO;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case k_:return this.consumeStringToken(k_);case jlt:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(pX(r)||O0(n,a)){var s=F_(r,n,a)?Slt:Nlt,i=this.consumeName();return{type:5,value:i,flags:s}}break;case Tlt:if(this.peekCodePoint(0)===xy)return this.consumeCodePoint(),mct;break;case B_:return this.consumeStringToken(B_);case j_:return Act;case vy:return fct;case DI:if(this.peekCodePoint(0)===xy)return this.consumeCodePoint(),wct;break;case Up:if(PI(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case $lt:return hct;case Kl:var o=t,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(PI(o,c,u))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(F_(o,c,u))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(c===Kl&&u===Plt)return this.consumeCodePoint(),this.consumeCodePoint(),_ct;break;case v2:if(PI(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case fX:if(this.peekCodePoint(0)===DI)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===DI&&(d=this.consumeCodePoint(),d===fX))return this.consumeToken();if(d===_A)return this.consumeToken()}break;case Glt:return Nct;case Klt:return Sct;case Dlt:if(this.peekCodePoint(0)===Olt&&this.peekCodePoint(1)===Kl&&this.peekCodePoint(2)===Kl)return this.consumeCodePoint(),this.consumeCodePoint(),Cct;break;case Rlt:var f=this.peekCodePoint(0),h=this.peekCodePoint(1),p=this.peekCodePoint(2);if(F_(f,h,p)){var i=this.consumeName();return{type:7,value:i}}break;case Llt:return kct;case pw:if(O0(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case Mlt:return Bct;case Ult:if(this.peekCodePoint(0)===xy)return this.consumeCodePoint(),pct;break;case Qlt:return bct;case Hlt:return yct;case tct:case nct:var g=this.peekCodePoint(0),x=this.peekCodePoint(1);return g===Up&&(Qx(x)||x===T_)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case hX:if(this.peekCodePoint(0)===xy)return this.consumeCodePoint(),xct;if(this.peekCodePoint(0)===hX)return this.consumeCodePoint(),gct;break;case Vlt:if(this.peekCodePoint(0)===xy)return this.consumeCodePoint(),vct;break;case _A:return YO}return I_(t)?(this.consumeWhiteSpace(),jct):Go(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):kS(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Qs(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();Qx(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var n=!1;r===T_&&t.length<6;)t.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(Qs.apply(void 0,t.map(function(c){return c===T_?ade:c})),16),s=parseInt(Qs.apply(void 0,t.map(function(c){return c===T_?cde:c})),16);return{type:30,start:a,end:s}}var i=parseInt(Qs.apply(void 0,t),16);if(this.peekCodePoint(0)===Kl&&Qx(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];Qx(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var s=parseInt(Qs.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===j_?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===j_?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===_A)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===B_||r===k_){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===_A||this.peekCodePoint(0)===vy)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),O_)}for(;;){var a=this.consumeCodePoint();if(a===_A||a===vy)return{type:22,value:Qs.apply(void 0,t)};if(I_(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===_A||this.peekCodePoint(0)===vy?(this.consumeCodePoint(),{type:22,value:Qs.apply(void 0,t)}):(this.consumeBadUrlRemnants(),O_);if(a===k_||a===B_||a===j_||uct(a))return this.consumeBadUrlRemnants(),O_;if(a===pw)if(O0(a,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),O_;else t.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;I_(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===vy||t===_A)return;O0(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,n="";t>0;){var a=Math.min(r,t);n+=Qs.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),n},e.prototype.consumeStringToken=function(t){var r="",n=0;do{var a=this._value[n];if(a===_A||a===void 0||a===t)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===SS)return this._value.splice(0,n),Ect;if(a===pw){var s=this._value[n+1];s!==_A&&s!==void 0&&(s===SS?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):O0(a,s)&&(r+=this.consumeStringSlice(n),r+=Qs(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=fE,n=this.peekCodePoint(0);for((n===Up||n===Kl)&&t.push(this.consumeCodePoint());Go(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===v2&&Go(a))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=AX;Go(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===lde||n===ide)&&((a===Up||a===Kl)&&Go(s)||Go(a)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=AX;Go(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[dct(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],n=t[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(F_(a,s,i)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return a===Ilt?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(Qx(t)){for(var r=Qs(t);Qx(this.peekCodePoint(0))&&r.length<6;)r+=Qs(this.consumeCodePoint());I_(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||sct(n)||n>1114111?mX:n}return t===_A?mX:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(pX(r))t+=Qs(r);else if(O0(r,this.peekCodePoint(0)))t+=Qs(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),dde=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new ude;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},n=this.consumeToken();;){if(n.type===32||Ict(n,t))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?YO:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),hE=function(e){return e.type===15},ib=function(e){return e.type===17},wa=function(e){return e.type===20},Tct=function(e){return e.type===0},JO=function(e,t){return wa(e)&&e.value===t},Ade=function(e){return e.type!==31},_1=function(e){return e.type!==31&&e.type!==4},lf=function(e){var t=[],r=[];return e.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&t.push(r),t},Ict=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},jm=function(e){return e.type===17||e.type===15},di=function(e){return e.type===16||jm(e)},fde=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},wo={type:17,number:0,flags:fE},xM={type:16,number:50,flags:fE},W0={type:16,number:100,flags:fE},Hy=function(e,t,r){var n=e[0],a=e[1];return[Da(n,t),Da(typeof a<"u"?a:n,r)]},Da=function(e,t){if(e.type===16)return e.number/100*t;if(hE(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},hde="deg",mde="grad",pde="rad",gde="turn",qk={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case hde:return Math.PI*t.number/180;case mde:return Math.PI/200*t.number;case pde:return t.number;case gde:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},xde=function(e){return e.type===15&&(e.unit===hde||e.unit===mde||e.unit===pde||e.unit===gde)},vde=function(e){var t=e.filter(wa).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[wo,wo];case"to top":case"bottom":return Du(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[wo,W0];case"to right":case"left":return Du(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[W0,W0];case"to bottom":case"top":return Du(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[W0,wo];case"to left":case"right":return Du(270)}return 0},Du=function(e){return Math.PI*e/180},cm={name:"color",parse:function(e,t){if(t.type===18){var r=Fct[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3);return X0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(t.value.length===4){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3),i=t.value.substring(3,4);return X0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(t.value.length===6){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6);return X0(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(t.value.length===8){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6),i=t.value.substring(6,8);return X0(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}}if(t.type===20){var o=dh[t.value.toUpperCase()];if(typeof o<"u")return o}return dh.TRANSPARENT}},um=function(e){return(255&e)===0},Ui=function(e){var t=255&e,r=255&e>>8,n=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+n+","+r+","+t/255+")":"rgb("+a+","+n+","+r+")"},X0=function(e,t,r,n){return(e<<24|t<<16|r<<8|Math.round(n*255)<<0)>>>0},gX=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},xX=function(e,t){var r=t.filter(_1);if(r.length===3){var n=r.map(gX),a=n[0],s=n[1],i=n[2];return X0(a,s,i,1)}if(r.length===4){var o=r.map(gX),a=o[0],s=o[1],i=o[2],c=o[3];return X0(a,s,i,c)}return 0};function RI(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var vX=function(e,t){var r=t.filter(_1),n=r[0],a=r[1],s=r[2],i=r[3],o=(n.type===17?Du(n.number):qk.parse(e,n))/(Math.PI*2),c=di(a)?a.number/100:0,u=di(s)?s.number/100:0,d=typeof i<"u"&&di(i)?Da(i,1):1;if(c===0)return X0(u*255,u*255,u*255,1);var f=u<=.5?u*(c+1):u+c-u*c,h=u*2-f,p=RI(h,f,o+1/3),g=RI(h,f,o),x=RI(h,f,o-1/3);return X0(p*255,g*255,x*255,d)},Fct={hsl:vX,hsla:vX,rgb:xX,rgba:xX},gw=function(e,t){return cm.parse(e,dde.create(t).parseComponentValue())},dh={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Oct={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(wa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Dct={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Wk=function(e,t){var r=cm.parse(e,t[0]),n=t[1];return n&&di(n)?{color:r,stop:n}:{color:r,stop:null}},bX=function(e,t){var r=e[0],n=e[e.length-1];r.stop===null&&(r.stop=wo),n.stop===null&&(n.stop=W0);for(var a=[],s=0,i=0;i<e.length;i++){var o=e[i].stop;if(o!==null){var c=Da(o,t);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,i=0;i<a.length;i++){var d=a[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var f=i-u,h=a[u-1],p=(d-h)/(f+1),g=1;g<=f;g++)a[u+g-1]=p*g;u=null}}return e.map(function(x,b){var y=x.color;return{color:y,stop:Math.max(Math.min(1,a[b]/t),0)}})},Pct=function(e,t,r){var n=t/2,a=r/2,s=Da(e[0],t)-n,i=a-Da(e[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},Rct=function(e,t,r){var n=typeof e=="number"?e:Pct(e,t,r),a=Math.abs(t*Math.sin(n))+Math.abs(r*Math.cos(n)),s=t/2,i=r/2,o=a/2,c=Math.sin(n-Math.PI/2)*o,u=Math.cos(n-Math.PI/2)*o;return[a,s-u,s+u,i-c,i+c]},vd=function(e,t){return Math.sqrt(e*e+t*t)},yX=function(e,t,r,n,a){var s=[[0,0],[0,t],[e,0],[e,t]];return s.reduce(function(i,o){var c=o[0],u=o[1],d=vd(r-c,n-u);return(a?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},Lct=function(e,t,r,n,a){var s=0,i=0;switch(e.size){case 0:e.shape===0?s=i=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.min(Math.abs(t),Math.abs(t-n)),i=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(e.shape===0)s=i=Math.min(vd(t,r),vd(t,r-a),vd(t-n,r),vd(t-n,r-a));else if(e.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(t),Math.abs(t-n)),c=yX(n,a,t,r,!0),u=c[0],d=c[1];s=vd(u-t,(d-r)/o),i=o*s}break;case 1:e.shape===0?s=i=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.max(Math.abs(t),Math.abs(t-n)),i=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(e.shape===0)s=i=Math.max(vd(t,r),vd(t,r-a),vd(t-n,r),vd(t-n,r-a));else if(e.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(t),Math.abs(t-n)),f=yX(n,a,t,r,!1),u=f[0],d=f[1];s=vd(u-t,(d-r)/o),i=o*s}break}return Array.isArray(e.size)&&(s=Da(e.size[0],n),i=e.size.length===2?Da(e.size[1],a):s),[s,i]},Mct=function(e,t){var r=Du(180),n=[];return lf(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&i.value==="to"){r=vde(a);return}else if(xde(i)){r=qk.parse(e,i);return}}var o=Wk(e,a);n.push(o)}),{angle:r,stops:n,type:1}},D_=function(e,t){var r=Du(180),n=[];return lf(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=vde(a);return}else if(xde(i)){r=(qk.parse(e,i)+Du(270))%Du(360);return}}var o=Wk(e,a);n.push(o)}),{angle:r,stops:n,type:1}},Uct=function(e,t){var r=Du(180),n=[],a=1,s=0,i=3,o=[];return lf(t).forEach(function(c,u){var d=c[0];if(u===0){if(wa(d)&&d.value==="linear"){a=1;return}else if(wa(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var f=cm.parse(e,d.values[0]);n.push({stop:wo,color:f})}else if(d.name==="to"){var f=cm.parse(e,d.values[0]);n.push({stop:W0,color:f})}else if(d.name==="color-stop"){var h=d.values.filter(_1);if(h.length===2){var f=cm.parse(e,h[1]),p=h[0];ib(p)&&n.push({stop:{type:16,number:p.number*100,flags:p.flags},color:f})}}}}),a===1?{angle:(r+Du(180))%Du(360),stops:n,type:a}:{size:i,shape:s,stops:n,position:o,type:a}},bde="closest-side",yde="farthest-side",wde="closest-corner",Ede="farthest-corner",Cde="circle",_de="ellipse",Nde="cover",Sde="contain",Qct=function(e,t){var r=0,n=3,a=[],s=[];return lf(t).forEach(function(i,o){var c=!0;if(o===0){var u=!1;c=i.reduce(function(f,h){if(u)if(wa(h))switch(h.value){case"center":return s.push(xM),f;case"top":case"left":return s.push(wo),f;case"right":case"bottom":return s.push(W0),f}else(di(h)||jm(h))&&s.push(h);else if(wa(h))switch(h.value){case Cde:return r=0,!1;case _de:return r=1,!1;case"at":return u=!0,!1;case bde:return n=0,!1;case Nde:case yde:return n=1,!1;case Sde:case wde:return n=2,!1;case Ede:return n=3,!1}else if(jm(h)||di(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return f},c)}if(c){var d=Wk(e,i);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},P_=function(e,t){var r=0,n=3,a=[],s=[];return lf(t).forEach(function(i,o){var c=!0;if(o===0?c=i.reduce(function(d,f){if(wa(f))switch(f.value){case"center":return s.push(xM),!1;case"top":case"left":return s.push(wo),!1;case"right":case"bottom":return s.push(W0),!1}else if(di(f)||jm(f))return s.push(f),!1;return d},c):o===1&&(c=i.reduce(function(d,f){if(wa(f))switch(f.value){case Cde:return r=0,!1;case _de:return r=1,!1;case Sde:case bde:return n=0,!1;case yde:return n=1,!1;case wde:return n=2,!1;case Nde:case Ede:return n=3,!1}else if(jm(f)||di(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},c)),c){var u=Wk(e,i);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},Hct=function(e){return e.type===1},Vct=function(e){return e.type===2},vM={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var n=kde[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function zct(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!kde[e.name])}var kde={"linear-gradient":Mct,"-moz-linear-gradient":D_,"-ms-linear-gradient":D_,"-o-linear-gradient":D_,"-webkit-linear-gradient":D_,"radial-gradient":Qct,"-moz-radial-gradient":P_,"-ms-radial-gradient":P_,"-o-radial-gradient":P_,"-webkit-radial-gradient":P_,"-webkit-gradient":Uct},$ct={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(n){return _1(n)&&zct(n)}).map(function(n){return vM.parse(e,n)})}},Gct={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(wa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Kct={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return lf(t).map(function(r){return r.filter(di)}).map(fde)}},qct={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return lf(t).map(function(r){return r.filter(wa).map(function(n){return n.value}).join(" ")}).map(Wct)}},Wct=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Rv;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(Rv||(Rv={}));var Xct={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return lf(t).map(function(r){return r.filter(Yct)})}},Yct=function(e){return wa(e)||di(e)},Xk=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Jct=Xk("top"),Zct=Xk("right"),eut=Xk("bottom"),tut=Xk("left"),Yk=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return fde(r.filter(di))}}},rut=Yk("top-left"),nut=Yk("top-right"),aut=Yk("bottom-right"),sut=Yk("bottom-left"),Jk=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},iut=Jk("top"),out=Jk("right"),lut=Jk("bottom"),cut=Jk("left"),Zk=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return hE(r)?r.number:0}}},uut=Zk("top"),dut=Zk("right"),Aut=Zk("bottom"),fut=Zk("left"),hut={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},mut={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},put={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(wa).reduce(function(r,n){return r|gut(n.value)},0)}},gut=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},xut={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},vut={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},BS;(function(e){e.NORMAL="normal",e.STRICT="strict"})(BS||(BS={}));var but={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return BS.STRICT;case"normal":default:return BS.NORMAL}}},yut={name:"line-height",initialValue:"normal",prefix:!1,type:4},wX=function(e,t){return wa(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:di(e)?Da(e,t):t},wut={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:vM.parse(e,t)}},Eut={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},ZO={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},eB=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Cut=eB("top"),_ut=eB("right"),Nut=eB("bottom"),Sut=eB("left"),kut={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(wa).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},But={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},tB=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},jut=tB("top"),Tut=tB("right"),Iut=tB("bottom"),Fut=tB("left"),Out={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Dut={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Put={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&JO(t[0],"none")?[]:lf(t).map(function(r){for(var n={color:dh.TRANSPARENT,offsetX:wo,offsetY:wo,blur:wo},a=0,s=0;s<r.length;s++){var i=r[s];jm(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:n.blur=i,a++):n.color=cm.parse(e,i)}return n})}},Rut={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Lut={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=Qut[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},Mut=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},Uut=function(e){var t=e.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=t[0],n=t[1];t[2],t[3];var a=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var i=t[12],o=t[13];return t[14],t[15],t.length===16?[r,n,a,s,i,o]:null},Qut={matrix:Mut,matrix3d:Uut},EX={type:16,number:50,flags:fE},Hut=[EX,EX],Vut={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(di);return r.length!==2?Hut:[r[0],r[1]]}},zut={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},xw;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(xw||(xw={}));var $ut={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return xw.BREAK_ALL;case"keep-all":return xw.KEEP_ALL;case"normal":default:return xw.NORMAL}}},Gut={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(ib(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Bde={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},Kut={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return ib(t)?t.number:1}},qut={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Wut={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(wa).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},Xut={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],n=[];return t.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},Yut={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Jut={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(ib(t))return t.number;if(wa(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},Zut={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(wa).map(function(r){return r.value})}},edt={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Ei=function(e,t){return(e&t)!==0},tdt={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},rdt={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=t.filter(Ade),s=0;s<a.length;s++){var i=a[s],o=a[s+1];if(i.type===20){var c=o&&ib(o)?o.number:1;n.push({counter:i.value,increment:c})}}return n}},ndt={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],n=t.filter(Ade),a=0;a<n.length;a++){var s=n[a],i=n[a+1];if(wa(s)&&s.value!=="none"){var o=i&&ib(i)?i.number:0;r.push({counter:s.value,reset:o})}}return r}},adt={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(hE).map(function(r){return Bde.parse(e,r)})}},sdt={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var n=[],a=t.filter(Tct);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,o=a[s+1].value;n.push({open:i,close:o})}return n}},CX=function(e,t,r){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?r?n.open:n.close:""},idt={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&JO(t[0],"none")?[]:lf(t).map(function(r){for(var n={color:255,offsetX:wo,offsetY:wo,blur:wo,spread:wo,inset:!1},a=0,s=0;s<r.length;s++){var i=r[s];JO(i,"inset")?n.inset=!0:jm(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:a===2?n.blur=i:n.spread=i,a++):n.color=cm.parse(e,i)}return n})}},odt={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],n=[];return t.filter(wa).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},ldt={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},cdt={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return hE(t)?t.number:0}},udt=function(){function e(t,r){var n,a;this.animationDuration=or(t,adt,r.animationDuration),this.backgroundClip=or(t,Oct,r.backgroundClip),this.backgroundColor=or(t,Dct,r.backgroundColor),this.backgroundImage=or(t,$ct,r.backgroundImage),this.backgroundOrigin=or(t,Gct,r.backgroundOrigin),this.backgroundPosition=or(t,Kct,r.backgroundPosition),this.backgroundRepeat=or(t,qct,r.backgroundRepeat),this.backgroundSize=or(t,Xct,r.backgroundSize),this.borderTopColor=or(t,Jct,r.borderTopColor),this.borderRightColor=or(t,Zct,r.borderRightColor),this.borderBottomColor=or(t,eut,r.borderBottomColor),this.borderLeftColor=or(t,tut,r.borderLeftColor),this.borderTopLeftRadius=or(t,rut,r.borderTopLeftRadius),this.borderTopRightRadius=or(t,nut,r.borderTopRightRadius),this.borderBottomRightRadius=or(t,aut,r.borderBottomRightRadius),this.borderBottomLeftRadius=or(t,sut,r.borderBottomLeftRadius),this.borderTopStyle=or(t,iut,r.borderTopStyle),this.borderRightStyle=or(t,out,r.borderRightStyle),this.borderBottomStyle=or(t,lut,r.borderBottomStyle),this.borderLeftStyle=or(t,cut,r.borderLeftStyle),this.borderTopWidth=or(t,uut,r.borderTopWidth),this.borderRightWidth=or(t,dut,r.borderRightWidth),this.borderBottomWidth=or(t,Aut,r.borderBottomWidth),this.borderLeftWidth=or(t,fut,r.borderLeftWidth),this.boxShadow=or(t,idt,r.boxShadow),this.color=or(t,hut,r.color),this.direction=or(t,mut,r.direction),this.display=or(t,put,r.display),this.float=or(t,xut,r.cssFloat),this.fontFamily=or(t,Xut,r.fontFamily),this.fontSize=or(t,Yut,r.fontSize),this.fontStyle=or(t,edt,r.fontStyle),this.fontVariant=or(t,Zut,r.fontVariant),this.fontWeight=or(t,Jut,r.fontWeight),this.letterSpacing=or(t,vut,r.letterSpacing),this.lineBreak=or(t,but,r.lineBreak),this.lineHeight=or(t,yut,r.lineHeight),this.listStyleImage=or(t,wut,r.listStyleImage),this.listStylePosition=or(t,Eut,r.listStylePosition),this.listStyleType=or(t,ZO,r.listStyleType),this.marginTop=or(t,Cut,r.marginTop),this.marginRight=or(t,_ut,r.marginRight),this.marginBottom=or(t,Nut,r.marginBottom),this.marginLeft=or(t,Sut,r.marginLeft),this.opacity=or(t,Kut,r.opacity);var s=or(t,kut,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=or(t,But,r.overflowWrap),this.paddingTop=or(t,jut,r.paddingTop),this.paddingRight=or(t,Tut,r.paddingRight),this.paddingBottom=or(t,Iut,r.paddingBottom),this.paddingLeft=or(t,Fut,r.paddingLeft),this.paintOrder=or(t,odt,r.paintOrder),this.position=or(t,Dut,r.position),this.textAlign=or(t,Out,r.textAlign),this.textDecorationColor=or(t,qut,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=or(t,Wut,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=or(t,Put,r.textShadow),this.textTransform=or(t,Rut,r.textTransform),this.transform=or(t,Lut,r.transform),this.transformOrigin=or(t,Vut,r.transformOrigin),this.visibility=or(t,zut,r.visibility),this.webkitTextStrokeColor=or(t,ldt,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=or(t,cdt,r.webkitTextStrokeWidth),this.wordBreak=or(t,$ut,r.wordBreak),this.zIndex=or(t,Gut,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return um(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return Ei(this.display,4)||Ei(this.display,33554432)||Ei(this.display,268435456)||Ei(this.display,536870912)||Ei(this.display,67108864)||Ei(this.display,134217728)},e}(),ddt=function(){function e(t,r){this.content=or(t,tdt,r.content),this.quotes=or(t,sdt,r.quotes)}return e}(),_X=function(){function e(t,r){this.counterIncrement=or(t,rdt,r.counterIncrement),this.counterReset=or(t,ndt,r.counterReset)}return e}(),or=function(e,t,r){var n=new ude,a=r!==null&&typeof r<"u"?r.toString():t.initialValue;n.write(a);var s=new dde(n.read());switch(t.type){case 2:var i=s.parseComponentValue();return t.parse(e,wa(i)?i.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return qk.parse(e,s.parseComponentValue());case"color":return cm.parse(e,s.parseComponentValue());case"image":return vM.parse(e,s.parseComponentValue());case"length":var o=s.parseComponentValue();return jm(o)?o:wo;case"length-percentage":var c=s.parseComponentValue();return di(c)?c:wo;case"time":return Bde.parse(e,s.parseComponentValue())}break}},Adt="data-html2canvas-debug",fdt=function(e){var t=e.getAttribute(Adt);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},eD=function(e,t){var r=fdt(e);return r===1||t===r},cf=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,eD(r,3))debugger;this.styles=new udt(t,window.getComputedStyle(r,null)),nD(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=Gk(this.context,r),eD(r,4)&&(this.flags|=16)}return e}(),hdt="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",NX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var R_=0;R_<NX.length;R_++)Vy[NX.charCodeAt(R_)]=R_;var mdt=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,o,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Vy[e.charCodeAt(n)],i=Vy[e.charCodeAt(n+1)],o=Vy[e.charCodeAt(n+2)],c=Vy[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|c&63;return u},pdt=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},gdt=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},ng=5,bM=11,LI=2,xdt=bM-ng,jde=65536>>ng,vdt=1<<ng,MI=vdt-1,bdt=1024>>ng,ydt=jde+bdt,wdt=ydt,Edt=32,Cdt=wdt+Edt,_dt=65536>>bM,Ndt=1<<xdt,Sdt=Ndt-1,SX=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},kdt=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},Bdt=function(e,t){var r=mdt(e),n=Array.isArray(r)?gdt(r):new Uint32Array(r),a=Array.isArray(r)?pdt(r):new Uint16Array(r),s=24,i=SX(a,s/2,n[4]/2),o=n[5]===2?SX(a,(s+n[4])/2):kdt(n,Math.ceil((s+n[4])/4));return new jdt(n[0],n[1],n[2],n[3],i,o)},jdt=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>ng],r=(r<<LI)+(t&MI),this.data[r];if(t<=65535)return r=this.index[jde+(t-55296>>ng)],r=(r<<LI)+(t&MI),this.data[r];if(t<this.highStart)return r=Cdt-_dt+(t>>bM),r=this.index[r],r+=t>>ng&Sdt,r=this.index[r],r=(r<<LI)+(t&MI),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),kX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Tdt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var L_=0;L_<kX.length;L_++)Tdt[kX.charCodeAt(L_)]=L_;var Idt=1,UI=2,QI=3,BX=4,jX=5,Fdt=7,TX=8,HI=9,VI=10,IX=11,FX=12,OX=13,DX=14,zI=15,Odt=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},Ddt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},Pdt=Bdt(hdt),Nu="×",$I="÷",Rdt=function(e){return Pdt.get(e)},Ldt=function(e,t,r){var n=r-2,a=t[n],s=t[r-1],i=t[r];if(s===UI&&i===QI)return Nu;if(s===UI||s===QI||s===BX||i===UI||i===QI||i===BX)return $I;if(s===TX&&[TX,HI,IX,FX].indexOf(i)!==-1||(s===IX||s===HI)&&(i===HI||i===VI)||(s===FX||s===VI)&&i===VI||i===OX||i===jX||i===Fdt||s===Idt)return Nu;if(s===OX&&i===DX){for(;a===jX;)a=t[--n];if(a===DX)return Nu}if(s===zI&&i===zI){for(var o=0;a===zI;)o++,a=t[--n];if(o%2===0)return Nu}return $I},Mdt=function(e){var t=Odt(e),r=t.length,n=0,a=0,s=t.map(Rdt);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=Nu;n<r&&(i=Ldt(t,s,++n))===Nu;);if(i!==Nu||n===r){var o=Ddt.apply(null,t.slice(a,n));return a=n,{value:o,done:!1}}return{done:!0,value:null}}}},Udt=function(e){for(var t=Mdt(e),r=[],n;!(n=t.next()).done;)n.value&&r.push(n.value.slice());return r},Qdt=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=t+"px",n.style.display="block",e.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(e.body.removeChild(n),s===t)return!0}}return!1},Hdt=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=t.firstChild,a=Kk(n.data).map(function(c){return Qs(c)}),s=0,i={},o=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var f=d.x>i.x||d.y>i.y;return i=d,u===0?!0:f});return e.body.removeChild(t),o},Vdt=function(){return typeof new Image().crossOrigin<"u"},zdt=function(){return typeof new XMLHttpRequest().responseType=="string"},$dt=function(e){var t=new Image,r=e.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},PX=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},Gdt=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=t.toDataURL();a.src=s;var i=tD(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),RX(i).then(function(o){n.drawImage(o,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=e.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",PX(c)?RX(tD(r,r,0,0,u)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),PX(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},tD=function(e,t,r,n,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",e.toString()),i.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(a),i},RX=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},ho={get SUPPORT_RANGE_BOUNDS(){var e=Qdt(document);return Object.defineProperty(ho,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=ho.SUPPORT_RANGE_BOUNDS&&Hdt(document);return Object.defineProperty(ho,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=$dt(document);return Object.defineProperty(ho,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?Gdt(document):Promise.resolve(!1);return Object.defineProperty(ho,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=Vdt();return Object.defineProperty(ho,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=zdt();return Object.defineProperty(ho,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ho,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ho,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},vw=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),Kdt=function(e,t,r,n){var a=Xdt(t,r),s=[],i=0;return a.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(ho.SUPPORT_RANGE_BOUNDS){var c=LX(n,i,o.length).getClientRects();if(c.length>1){var u=yM(o),d=0;u.forEach(function(h){s.push(new vw(h,kh.fromDOMRectList(e,LX(n,d+i,h.length).getClientRects()))),d+=h.length})}else s.push(new vw(o,kh.fromDOMRectList(e,c)))}else{var f=n.splitText(o.length);s.push(new vw(o,qdt(e,n))),n=f}else ho.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));i+=o.length}),s},qdt=function(e,t){var r=t.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(n,t);var s=Gk(e,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return kh.EMPTY},LX=function(e,t,r){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(e,t),a.setEnd(e,t+r),a},yM=function(e){if(ho.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return Udt(e)},Wdt=function(e,t){if(ho.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(n){return n.segment})}return Jdt(e,t)},Xdt=function(e,t){return t.letterSpacing!==0?yM(e):Wdt(e,t)},Ydt=[32,160,4961,65792,65793,4153,4241],Jdt=function(e,t){for(var r=_lt(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),n=[],a,s=function(){if(a.value){var i=a.value.slice(),o=Kk(i),c="";o.forEach(function(u){Ydt.indexOf(u)===-1?c+=Qs(u):(c.length&&n.push(c),n.push(Qs(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},Zdt=function(){function e(t,r,n){this.text=eAt(r.data,n.textTransform),this.textBounds=Kdt(t,this.text,n,r)}return e}(),eAt=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(tAt,rAt);case 2:return e.toUpperCase();default:return e}},tAt=/(^|\s|:|-|\(|\))([a-z])/g,rAt=function(e,t,r){return e.length>0?t+r.toUpperCase():e},Tde=function(e){Gd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return t}(cf),Ide=function(e){Gd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return t}(cf),Fde=function(e){Gd(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=new XMLSerializer,i=Gk(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return t}(cf),Ode=function(e){Gd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(cf),rD=function(e){Gd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return t}(cf),nAt=[{type:15,flags:0,unit:"px",number:3}],aAt=[{type:16,flags:0,number:50}],sAt=function(e){return e.width>e.height?new kh(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new kh(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},iAt=function(e){var t=e.type===oAt?new Array(e.value.length+1).join("•"):e.value;return t.length===0?e.placeholder||"":t},jS="checkbox",TS="radio",oAt="password",MX=707406591,wM=function(e){Gd(t,e);function t(r,n){var a=e.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=iAt(n),(a.type===jS||a.type===TS)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=sAt(a.bounds)),a.type){case jS:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=nAt;break;case TS:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=aAt;break}return a}return t}(cf),Dde=function(e){Gd(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return t}(cf),Pde=function(e){Gd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(cf),Rde=function(e){Gd(t,e);function t(r,n){var a=e.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=Mde(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?gw(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):dh.TRANSPARENT,i=n.contentWindow.document.body?gw(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):dh.TRANSPARENT;a.backgroundColor=um(s)?um(i)?a.styles.backgroundColor:i:s}}catch{}return a}return t}(cf),lAt=["OL","UL","MENU"],j5=function(e,t,r,n){for(var a=t.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,Ude(a)&&a.data.trim().length>0)r.textNodes.push(new Zdt(e,a,r.styles));else if(fv(a))if(zde(a)&&a.assignedNodes)a.assignedNodes().forEach(function(o){return j5(e,o,r,n)});else{var i=Lde(e,a);i.styles.isVisible()&&(cAt(a,i,n)?i.flags|=4:uAt(i.styles)&&(i.flags|=2),lAt.indexOf(a.tagName)!==-1&&(i.flags|=8),r.elements.push(i),a.slot,a.shadowRoot?j5(e,a.shadowRoot,i,n):!IS(a)&&!Qde(a)&&!FS(a)&&j5(e,a,i,n))}},Lde=function(e,t){return aD(t)?new Tde(e,t):Hde(t)?new Ide(e,t):Qde(t)?new Fde(e,t):dAt(t)?new Ode(e,t):AAt(t)?new rD(e,t):fAt(t)?new wM(e,t):FS(t)?new Dde(e,t):IS(t)?new Pde(e,t):Vde(t)?new Rde(e,t):new cf(e,t)},Mde=function(e,t){var r=Lde(e,t);return r.flags|=4,j5(e,t,r,r),r},cAt=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||EM(e)&&r.styles.isTransparent()},uAt=function(e){return e.isPositioned()||e.isFloating()},Ude=function(e){return e.nodeType===Node.TEXT_NODE},fv=function(e){return e.nodeType===Node.ELEMENT_NODE},nD=function(e){return fv(e)&&typeof e.style<"u"&&!T5(e)},T5=function(e){return typeof e.className=="object"},dAt=function(e){return e.tagName==="LI"},AAt=function(e){return e.tagName==="OL"},fAt=function(e){return e.tagName==="INPUT"},hAt=function(e){return e.tagName==="HTML"},Qde=function(e){return e.tagName==="svg"},EM=function(e){return e.tagName==="BODY"},Hde=function(e){return e.tagName==="CANVAS"},UX=function(e){return e.tagName==="VIDEO"},aD=function(e){return e.tagName==="IMG"},Vde=function(e){return e.tagName==="IFRAME"},QX=function(e){return e.tagName==="STYLE"},mAt=function(e){return e.tagName==="SCRIPT"},IS=function(e){return e.tagName==="TEXTAREA"},FS=function(e){return e.tagName==="SELECT"},zde=function(e){return e.tagName==="SLOT"},HX=function(e){return e.tagName.indexOf("-")>0},pAt=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(n){return r.counters[n].pop()})},e.prototype.parse=function(t){var r=this,n=t.counterIncrement,a=t.counterReset,s=!0;n!==null&&n.forEach(function(o){var c=r.counters[o.counter];c&&o.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=o.increment)});var i=[];return s&&a.forEach(function(o){var c=r.counters[o.counter];i.push(o.counter),c||(c=r.counters[o.counter]=[]),c.push(o.reset)}),i},e}(),VX={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},zX={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},gAt={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},xAt={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Hx=function(e,t,r,n,a,s){return e<t||e>r?b2(e,a,s.length>0):n.integers.reduce(function(i,o,c){for(;e>=o;)e-=o,i+=n.values[c];return i},"")+s},$de=function(e,t,r,n){var a="";do r||e--,a=n(e)+a,e/=t;while(e*t>=t);return a},Ls=function(e,t,r,n,a){var s=r-t+1;return(e<0?"-":"")+($de(Math.abs(e),s,n,function(i){return Qs(Math.floor(i%s)+t)})+a)},mp=function(e,t,r){r===void 0&&(r=". ");var n=t.length;return $de(Math.abs(e),n,!1,function(a){return t[Math.floor(a%n)]})+r},Zx=1,B0=2,j0=4,zy=8,Vf=function(e,t,r,n,a,s){if(e<-9999||e>9999)return b2(e,4,a.length>0);var i=Math.abs(e),o=a;if(i===0)return t[0]+o;for(var c=0;i>0&&c<=4;c++){var u=i%10;u===0&&Ei(s,Zx)&&o!==""?o=t[u]+o:u>1||u===1&&c===0||u===1&&c===1&&Ei(s,B0)||u===1&&c===1&&Ei(s,j0)&&e>100||u===1&&c>1&&Ei(s,zy)?o=t[u]+(c>0?r[c-1]:"")+o:u===1&&c>0&&(o=r[c-1]+o),i=Math.floor(i/10)}return(e<0?n:"")+o},$X="十百千萬",GX="拾佰仟萬",KX="マイナス",GI="마이너스",b2=function(e,t,r){var n=r?". ":"",a=r?"、":"",s=r?", ":"",i=r?" ":"";switch(t){case 0:return"•"+i;case 1:return"◦"+i;case 2:return"◾"+i;case 5:var o=Ls(e,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return mp(e,"〇一二三四五六七八九",a);case 6:return Hx(e,1,3999,VX,3,n).toLowerCase();case 7:return Hx(e,1,3999,VX,3,n);case 8:return Ls(e,945,969,!1,n);case 9:return Ls(e,97,122,!1,n);case 10:return Ls(e,65,90,!1,n);case 11:return Ls(e,1632,1641,!0,n);case 12:case 49:return Hx(e,1,9999,zX,3,n);case 35:return Hx(e,1,9999,zX,3,n).toLowerCase();case 13:return Ls(e,2534,2543,!0,n);case 14:case 30:return Ls(e,6112,6121,!0,n);case 15:return mp(e,"子丑寅卯辰巳午未申酉戌亥",a);case 16:return mp(e,"甲乙丙丁戊己庚辛壬癸",a);case 17:case 48:return Vf(e,"零一二三四五六七八九",$X,"負",a,B0|j0|zy);case 47:return Vf(e,"零壹貳參肆伍陸柒捌玖",GX,"負",a,Zx|B0|j0|zy);case 42:return Vf(e,"零一二三四五六七八九",$X,"负",a,B0|j0|zy);case 41:return Vf(e,"零壹贰叁肆伍陆柒捌玖",GX,"负",a,Zx|B0|j0|zy);case 26:return Vf(e,"〇一二三四五六七八九","十百千万",KX,a,0);case 25:return Vf(e,"零壱弐参四伍六七八九","拾百千万",KX,a,Zx|B0|j0);case 31:return Vf(e,"영일이삼사오육칠팔구","십백천만",GI,s,Zx|B0|j0);case 33:return Vf(e,"零一二三四五六七八九","十百千萬",GI,s,0);case 32:return Vf(e,"零壹貳參四五六七八九","拾百千",GI,s,Zx|B0|j0);case 18:return Ls(e,2406,2415,!0,n);case 20:return Hx(e,1,19999,xAt,3,n);case 21:return Ls(e,2790,2799,!0,n);case 22:return Ls(e,2662,2671,!0,n);case 22:return Hx(e,1,10999,gAt,3,n);case 23:return mp(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return mp(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Ls(e,3302,3311,!0,n);case 28:return mp(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",a);case 29:return mp(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",a);case 34:return Ls(e,3792,3801,!0,n);case 37:return Ls(e,6160,6169,!0,n);case 38:return Ls(e,4160,4169,!0,n);case 39:return Ls(e,2918,2927,!0,n);case 40:return Ls(e,1776,1785,!0,n);case 43:return Ls(e,3046,3055,!0,n);case 44:return Ls(e,3174,3183,!0,n);case 45:return Ls(e,3664,3673,!0,n);case 46:return Ls(e,3872,3881,!0,n);case 3:default:return Ls(e,48,57,!0,n)}},Gde="data-html2canvas-ignore",qX=function(){function e(t,r,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new pAt,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var n=this,a=vAt(t,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,i=t.defaultView.pageYOffset,o=a.contentWindow,c=o.document,u=wAt(a).then(function(){return fl(n,void 0,void 0,function(){var d,f;return Qo(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(NAt),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,yAt(c)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(CAt(document.doctype)+"<html></html>"),_At(this.referenceElement.ownerDocument,s,i),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},e.prototype.createElementClone=function(t){if(eD(t,2))debugger;if(Hde(t))return this.createCanvasClone(t);if(UX(t))return this.createVideoClone(t);if(QX(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return aD(r)&&(aD(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),HX(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return KI(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),a=t.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var s=t.getContext("2d"),i=a.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var o=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(o){var c=o.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}i.drawImage(t,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return a},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var a=t.ownerDocument.createElement("canvas");return a.width=t.offsetWidth,a.height=t.offsetHeight,a},e.prototype.appendChildNode=function(t,r,n){(!fv(r)||!mAt(r)&&!r.hasAttribute(Gde)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!fv(r)||!QX(r))&&t.appendChild(this.cloneNode(r,n))},e.prototype.cloneChildNodes=function(t,r,n){for(var a=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(fv(s)&&zde(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(o){return a.appendChildNode(r,o,n)})}else this.appendChildNode(r,s,n)},e.prototype.cloneNode=function(t,r){if(Ude(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&fv(t)&&(nD(t)||T5(t))){var a=this.createElementClone(t);a.style.transitionProperty="none";var s=n.getComputedStyle(t),i=n.getComputedStyle(t,":before"),o=n.getComputedStyle(t,":after");this.referenceElement===t&&nD(a)&&(this.clonedReferenceElement=a),EM(a)&&BAt(a);var c=this.counters.parse(new _X(this.context,s)),u=this.resolvePseudoContent(t,a,i,bw.BEFORE);HX(t)&&(r=!0),UX(t)||this.cloneChildNodes(t,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(t,a,o,bw.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||T5(t))&&!Vde(t)||r)&&KI(s,a),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(IS(t)||FS(t))&&(IS(a)||FS(a))&&(a.value=t.value),a}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,n,a){var s=this;if(n){var i=n.content,o=r.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new _X(this.context,n));var c=new ddt(this.context,n),u=o.createElement("html2canvaspseudoelement");KI(n,u),c.content.forEach(function(f){if(f.type===0)u.appendChild(o.createTextNode(f.value));else if(f.type===22){var h=o.createElement("img");h.src=f.value,h.style.opacity="1",u.appendChild(h)}else if(f.type===18){if(f.name==="attr"){var p=f.values.filter(wa);p.length&&u.appendChild(o.createTextNode(t.getAttribute(p[0].value)||""))}else if(f.name==="counter"){var g=f.values.filter(_1),x=g[0],b=g[1];if(x&&wa(x)){var y=s.counters.getCounterValue(x.value),w=b&&wa(b)?ZO.parse(s.context,b.value):3;u.appendChild(o.createTextNode(b2(y,w,!1)))}}else if(f.name==="counters"){var _=f.values.filter(_1),x=_[0],B=_[1],b=_[2];if(x&&wa(x)){var k=s.counters.getCounterValues(x.value),I=b&&wa(b)?ZO.parse(s.context,b.value):3,E=B&&B.type===0?B.value:"",N=k.map(function(D){return b2(D,I,!1)}).join(E);u.appendChild(o.createTextNode(N))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(o.createTextNode(CX(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(o.createTextNode(CX(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(o.createTextNode(f.value))}}),u.className=sD+" "+iD;var d=a===bw.BEFORE?" "+sD:" "+iD;return T5(r)?r.className.baseValue+=d:r.className+=d,u}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),bw;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(bw||(bw={}));var vAt=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(Gde,"true"),e.body.appendChild(r),r},bAt=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},yAt=function(e){return Promise.all([].slice.call(e.images,0).map(bAt))},wAt=function(e){return new Promise(function(t,r){var n=e.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),t(e))},50)}})},EAt=["all","d","content"],KI=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e.item(r);EAt.indexOf(n)===-1&&t.style.setProperty(n,e.getPropertyValue(n))}return t},CAt=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},_At=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},NAt=function(e){var t=e[0],r=e[1],n=e[2];t.scrollLeft=r,t.scrollTop=n},SAt=":before",kAt=":after",sD="___html2canvas___pseudoelement_before",iD="___html2canvas___pseudoelement_after",WX=`{
    content: "" !important;
    display: none !important;
}`,BAt=function(e){jAt(e,"."+sD+SAt+WX+`
         .`+iD+kAt+WX)},jAt=function(e,t){var r=e.ownerDocument;if(r){var n=r.createElement("style");n.textContent=t,e.appendChild(n)}},Kde=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),TAt=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(WI(t)||DAt(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return fl(this,void 0,void 0,function(){var r,n,a,s,i=this;return Qo(this,function(o){switch(o.label){case 0:return r=Kde.isSameOrigin(t),n=!qI(t)&&this._options.useCORS===!0&&ho.SUPPORT_CORS_IMAGES&&!r,a=!qI(t)&&!r&&!WI(t)&&typeof this._options.proxy=="string"&&ho.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!qI(t)&&!WI(t)&&!a&&!n?[2]:(s=t,a?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(PAt(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=t.substring(0,256);return new Promise(function(s,i){var o=ho.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(o==="text")s(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(h){return i(h)},!1),f.readAsDataURL(c.response)}else i("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=i;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(t)+"&responseType="+o),o!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=o),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+a)}}c.send()})},e}(),IAt=/^data:image\/svg\+xml/i,FAt=/^data:image\/.*;base64,/i,OAt=/^data:image\/.*/i,DAt=function(e){return ho.SUPPORT_SVG_DRAWING||!RAt(e)},qI=function(e){return OAt.test(e)},PAt=function(e){return FAt.test(e)},WI=function(e){return e.substr(0,4)==="blob"},RAt=function(e){return e.substr(-3).toLowerCase()==="svg"||IAt.test(e)},ar=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),Vx=function(e,t,r){return new ar(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},M_=function(){function e(t,r,n,a){this.type=1,this.start=t,this.startControl=r,this.endControl=n,this.end=a}return e.prototype.subdivide=function(t,r){var n=Vx(this.start,this.startControl,t),a=Vx(this.startControl,this.endControl,t),s=Vx(this.endControl,this.end,t),i=Vx(n,a,t),o=Vx(a,s,t),c=Vx(i,o,t);return r?new e(this.start,n,i,c):new e(c,o,s,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Bu=function(e){return e.type===1},LAt=function(){function e(t){var r=t.styles,n=t.bounds,a=Hy(r.borderTopLeftRadius,n.width,n.height),s=a[0],i=a[1],o=Hy(r.borderTopRightRadius,n.width,n.height),c=o[0],u=o[1],d=Hy(r.borderBottomRightRadius,n.width,n.height),f=d[0],h=d[1],p=Hy(r.borderBottomLeftRadius,n.width,n.height),g=p[0],x=p[1],b=[];b.push((s+c)/n.width),b.push((g+f)/n.width),b.push((i+x)/n.height),b.push((u+h)/n.height);var y=Math.max.apply(Math,b);y>1&&(s/=y,i/=y,c/=y,u/=y,f/=y,h/=y,g/=y,x/=y);var w=n.width-c,_=n.height-h,B=n.width-f,k=n.height-x,I=r.borderTopWidth,E=r.borderRightWidth,N=r.borderBottomWidth,j=r.borderLeftWidth,R=Da(r.paddingTop,t.bounds.width),D=Da(r.paddingRight,t.bounds.width),O=Da(r.paddingBottom,t.bounds.width),L=Da(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?Ya(n.left+j/3,n.top+I/3,s-j/3,i-I/3,na.TOP_LEFT):new ar(n.left+j/3,n.top+I/3),this.topRightBorderDoubleOuterBox=s>0||i>0?Ya(n.left+w,n.top+I/3,c-E/3,u-I/3,na.TOP_RIGHT):new ar(n.left+n.width-E/3,n.top+I/3),this.bottomRightBorderDoubleOuterBox=f>0||h>0?Ya(n.left+B,n.top+_,f-E/3,h-N/3,na.BOTTOM_RIGHT):new ar(n.left+n.width-E/3,n.top+n.height-N/3),this.bottomLeftBorderDoubleOuterBox=g>0||x>0?Ya(n.left+j/3,n.top+k,g-j/3,x-N/3,na.BOTTOM_LEFT):new ar(n.left+j/3,n.top+n.height-N/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?Ya(n.left+j*2/3,n.top+I*2/3,s-j*2/3,i-I*2/3,na.TOP_LEFT):new ar(n.left+j*2/3,n.top+I*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?Ya(n.left+w,n.top+I*2/3,c-E*2/3,u-I*2/3,na.TOP_RIGHT):new ar(n.left+n.width-E*2/3,n.top+I*2/3),this.bottomRightBorderDoubleInnerBox=f>0||h>0?Ya(n.left+B,n.top+_,f-E*2/3,h-N*2/3,na.BOTTOM_RIGHT):new ar(n.left+n.width-E*2/3,n.top+n.height-N*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||x>0?Ya(n.left+j*2/3,n.top+k,g-j*2/3,x-N*2/3,na.BOTTOM_LEFT):new ar(n.left+j*2/3,n.top+n.height-N*2/3),this.topLeftBorderStroke=s>0||i>0?Ya(n.left+j/2,n.top+I/2,s-j/2,i-I/2,na.TOP_LEFT):new ar(n.left+j/2,n.top+I/2),this.topRightBorderStroke=s>0||i>0?Ya(n.left+w,n.top+I/2,c-E/2,u-I/2,na.TOP_RIGHT):new ar(n.left+n.width-E/2,n.top+I/2),this.bottomRightBorderStroke=f>0||h>0?Ya(n.left+B,n.top+_,f-E/2,h-N/2,na.BOTTOM_RIGHT):new ar(n.left+n.width-E/2,n.top+n.height-N/2),this.bottomLeftBorderStroke=g>0||x>0?Ya(n.left+j/2,n.top+k,g-j/2,x-N/2,na.BOTTOM_LEFT):new ar(n.left+j/2,n.top+n.height-N/2),this.topLeftBorderBox=s>0||i>0?Ya(n.left,n.top,s,i,na.TOP_LEFT):new ar(n.left,n.top),this.topRightBorderBox=c>0||u>0?Ya(n.left+w,n.top,c,u,na.TOP_RIGHT):new ar(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||h>0?Ya(n.left+B,n.top+_,f,h,na.BOTTOM_RIGHT):new ar(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=g>0||x>0?Ya(n.left,n.top+k,g,x,na.BOTTOM_LEFT):new ar(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?Ya(n.left+j,n.top+I,Math.max(0,s-j),Math.max(0,i-I),na.TOP_LEFT):new ar(n.left+j,n.top+I),this.topRightPaddingBox=c>0||u>0?Ya(n.left+Math.min(w,n.width-E),n.top+I,w>n.width+E?0:Math.max(0,c-E),Math.max(0,u-I),na.TOP_RIGHT):new ar(n.left+n.width-E,n.top+I),this.bottomRightPaddingBox=f>0||h>0?Ya(n.left+Math.min(B,n.width-j),n.top+Math.min(_,n.height-N),Math.max(0,f-E),Math.max(0,h-N),na.BOTTOM_RIGHT):new ar(n.left+n.width-E,n.top+n.height-N),this.bottomLeftPaddingBox=g>0||x>0?Ya(n.left+j,n.top+Math.min(k,n.height-N),Math.max(0,g-j),Math.max(0,x-N),na.BOTTOM_LEFT):new ar(n.left+j,n.top+n.height-N),this.topLeftContentBox=s>0||i>0?Ya(n.left+j+L,n.top+I+R,Math.max(0,s-(j+L)),Math.max(0,i-(I+R)),na.TOP_LEFT):new ar(n.left+j+L,n.top+I+R),this.topRightContentBox=c>0||u>0?Ya(n.left+Math.min(w,n.width+j+L),n.top+I+R,w>n.width+j+L?0:c-j+L,u-(I+R),na.TOP_RIGHT):new ar(n.left+n.width-(E+D),n.top+I+R),this.bottomRightContentBox=f>0||h>0?Ya(n.left+Math.min(B,n.width-(j+L)),n.top+Math.min(_,n.height+I+R),Math.max(0,f-(E+D)),h-(N+O),na.BOTTOM_RIGHT):new ar(n.left+n.width-(E+D),n.top+n.height-(N+O)),this.bottomLeftContentBox=g>0||x>0?Ya(n.left+j+L,n.top+k,Math.max(0,g-(j+L)),x-(N+O),na.BOTTOM_LEFT):new ar(n.left+j+L,n.top+n.height-(N+O))}return e}(),na;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(na||(na={}));var Ya=function(e,t,r,n,a){var s=4*((Math.sqrt(2)-1)/3),i=r*s,o=n*s,c=e+r,u=t+n;switch(a){case na.TOP_LEFT:return new M_(new ar(e,u),new ar(e,u-o),new ar(c-i,t),new ar(c,t));case na.TOP_RIGHT:return new M_(new ar(e,t),new ar(e+i,t),new ar(c,u-o),new ar(c,u));case na.BOTTOM_RIGHT:return new M_(new ar(c,t),new ar(c,t+o),new ar(e+i,u),new ar(e,u));case na.BOTTOM_LEFT:default:return new M_(new ar(c,u),new ar(c-i,u),new ar(e,t+o),new ar(e,t))}},OS=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},MAt=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},DS=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},UAt=function(){function e(t,r,n){this.offsetX=t,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return e}(),U_=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),QAt=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),HAt=function(e){return e.type===0},qde=function(e){return e.type===1},VAt=function(e){return e.type===2},XX=function(e,t){return e.length===t.length?e.some(function(r,n){return r===t[n]}):!1},zAt=function(e,t,r,n,a){return e.map(function(s,i){switch(i){case 0:return s.add(t,r);case 1:return s.add(t+n,r);case 2:return s.add(t+n,r+a);case 3:return s.add(t,r+a)}return s})},Wde=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),Xde=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new LAt(this.container),this.container.styles.opacity<1&&this.effects.push(new QAt(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new UAt(n,a,s))}if(this.container.styles.overflowX!==0){var i=OS(this.curves),o=DS(this.curves);XX(i,o)?this.effects.push(new U_(i,6)):(this.effects.push(new U_(i,2)),this.effects.push(new U_(o,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!qde(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=OS(n.curves),o=DS(n.curves);XX(i,o)||a.unshift(new U_(o,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return Ei(c.target,t)})},e}(),oD=function(e,t,r,n){e.container.elements.forEach(function(a){var s=Ei(a.flags,4),i=Ei(a.flags,2),o=new Xde(a,e);Ei(a.styles.display,2048)&&n.push(o);var c=Ei(a.flags,8)?[]:n;if(s||i){var u=s||a.styles.isPositioned()?r:t,d=new Wde(o);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var h=0;u.negativeZIndex.some(function(g,x){return f>g.element.container.styles.zIndex.order?(h=x,!1):h>0}),u.negativeZIndex.splice(h,0,d)}else if(f>0){var p=0;u.positiveZIndex.some(function(g,x){return f>=g.element.container.styles.zIndex.order?(p=x+1,!1):p>0}),u.positiveZIndex.splice(p,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);oD(o,d,s?d:r,c)}else a.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),oD(o,t,r,c);Ei(a.flags,8)&&Yde(a,c)})},Yde=function(e,t){for(var r=e instanceof rD?e.start:1,n=e instanceof rD?e.reversed:!1,a=0;a<t.length;a++){var s=t[a];s.container instanceof Ode&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=b2(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},$At=function(e){var t=new Xde(e,null),r=new Wde(t),n=[];return oD(t,r,r,n),Yde(t.container,n),r},YX=function(e,t){switch(t){case 0:return Pu(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Pu(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Pu(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return Pu(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},GAt=function(e,t){switch(t){case 0:return Pu(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Pu(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Pu(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return Pu(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},KAt=function(e,t){switch(t){case 0:return Pu(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Pu(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Pu(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return Pu(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},qAt=function(e,t){switch(t){case 0:return Q_(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return Q_(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return Q_(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return Q_(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},Q_=function(e,t){var r=[];return Bu(e)?r.push(e.subdivide(.5,!1)):r.push(e),Bu(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},Pu=function(e,t,r,n){var a=[];return Bu(e)?a.push(e.subdivide(.5,!1)):a.push(e),Bu(r)?a.push(r.subdivide(.5,!0)):a.push(r),Bu(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),Bu(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},Jde=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},PS=function(e){var t=e.styles,r=e.bounds,n=Da(t.paddingLeft,r.width),a=Da(t.paddingRight,r.width),s=Da(t.paddingTop,r.width),i=Da(t.paddingBottom,r.width);return r.add(n+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+a),-(t.borderTopWidth+t.borderBottomWidth+s+i))},WAt=function(e,t){return e===0?t.bounds:e===2?PS(t):Jde(t)},XAt=function(e,t){return e===0?t.bounds:e===2?PS(t):Jde(t)},XI=function(e,t,r){var n=WAt(ev(e.styles.backgroundOrigin,t),e),a=XAt(ev(e.styles.backgroundClip,t),e),s=YAt(ev(e.styles.backgroundSize,t),r,n),i=s[0],o=s[1],c=Hy(ev(e.styles.backgroundPosition,t),n.width-i,n.height-o),u=JAt(ev(e.styles.backgroundRepeat,t),c,s,n,a),d=Math.round(n.left+c[0]),f=Math.round(n.top+c[1]);return[u,d,f,i,o]},zx=function(e){return wa(e)&&e.value===Rv.AUTO},H_=function(e){return typeof e=="number"},YAt=function(e,t,r){var n=t[0],a=t[1],s=t[2],i=e[0],o=e[1];if(!i)return[0,0];if(di(i)&&o&&di(o))return[Da(i,r.width),Da(o,r.height)];var c=H_(s);if(wa(i)&&(i.value===Rv.CONTAIN||i.value===Rv.COVER)){if(H_(s)){var u=r.width/r.height;return u<s!=(i.value===Rv.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=H_(n),f=H_(a),h=d||f;if(zx(i)&&(!o||zx(o))){if(d&&f)return[n,a];if(!c&&!h)return[r.width,r.height];if(h&&c){var p=d?n:a*s,g=f?a:n/s;return[p,g]}var x=d?n:r.width,b=f?a:r.height;return[x,b]}if(c){var y=0,w=0;return di(i)?y=Da(i,r.width):di(o)&&(w=Da(o,r.height)),zx(i)?y=w*s:(!o||zx(o))&&(w=y/s),[y,w]}var _=null,B=null;if(di(i)?_=Da(i,r.width):o&&di(o)&&(B=Da(o,r.height)),_!==null&&(!o||zx(o))&&(B=d&&f?_/n*a:r.height),B!==null&&zx(i)&&(_=d&&f?B/a*n:r.width),_!==null&&B!==null)return[_,B];throw new Error("Unable to calculate background-size for element")},ev=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},JAt=function(e,t,r,n,a){var s=t[0],i=t[1],o=r[0],c=r[1];switch(e){case 2:return[new ar(Math.round(n.left),Math.round(n.top+i)),new ar(Math.round(n.left+n.width),Math.round(n.top+i)),new ar(Math.round(n.left+n.width),Math.round(c+n.top+i)),new ar(Math.round(n.left),Math.round(c+n.top+i))];case 3:return[new ar(Math.round(n.left+s),Math.round(n.top)),new ar(Math.round(n.left+s+o),Math.round(n.top)),new ar(Math.round(n.left+s+o),Math.round(n.height+n.top)),new ar(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new ar(Math.round(n.left+s),Math.round(n.top+i)),new ar(Math.round(n.left+s+o),Math.round(n.top+i)),new ar(Math.round(n.left+s+o),Math.round(n.top+i+c)),new ar(Math.round(n.left+s),Math.round(n.top+i+c))];default:return[new ar(Math.round(a.left),Math.round(a.top)),new ar(Math.round(a.left+a.width),Math.round(a.top)),new ar(Math.round(a.left+a.width),Math.round(a.height+a.top)),new ar(Math.round(a.left),Math.round(a.height+a.top))]}},ZAt="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",JX="Hidden Text",eft=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),a.src=ZAt,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(JX)),n.appendChild(s),n.appendChild(a);var o=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(JX)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:o,middle:c}},e.prototype.getMetrics=function(t,r){var n=t+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(t,r)),this._data[n]},e}(),Zde=function(){function e(t,r){this.context=t,this.options=r}return e}(),tft=1e4,rft=function(e){Gd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new eft(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return t.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},t.prototype.applyEffect=function(r){this.ctx.save(),VAt(r)&&(this.ctx.globalAlpha=r.opacity),HAt(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),qde(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return fl(this,void 0,void 0,function(){var n;return Qo(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return fl(this,void 0,void 0,function(){return Qo(this,function(n){switch(n.label){case 0:if(Ei(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var i=yM(r.text);i.reduce(function(o,c){return s.ctx.fillText(c,o,r.bounds.top+a),o+s.ctx.measureText(c).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),a=oft(r.fontFamily).join(", "),s=hE(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},t.prototype.renderTextNode=function(r,n){return fl(this,void 0,void 0,function(){var a,s,i,o,c,u,d,f,h=this;return Qo(this,function(p){return a=this.createFontStyle(n),s=a[0],i=a[1],o=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(i,o),u=c.baseline,d=c.middle,f=n.paintOrder,r.textBounds.forEach(function(g){f.forEach(function(x){switch(x){case 0:h.ctx.fillStyle=Ui(n.color),h.renderTextWithLetterSpacing(g,n.letterSpacing,u);var b=n.textShadow;b.length&&g.text.trim().length&&(b.slice(0).reverse().forEach(function(y){h.ctx.shadowColor=Ui(y.color),h.ctx.shadowOffsetX=y.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=y.offsetY.number*h.options.scale,h.ctx.shadowBlur=y.blur.number,h.renderTextWithLetterSpacing(g,n.letterSpacing,u)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=Ui(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(y){switch(y){case 1:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top+u),g.bounds.width,1);break;case 2:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top),g.bounds.width,1);break;case 3:h.ctx.fillRect(g.bounds.left,Math.ceil(g.bounds.top+d),g.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&g.text.trim().length&&(h.ctx.strokeStyle=Ui(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(g.text,g.bounds.left,g.bounds.top+u)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=PS(r),i=DS(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return fl(this,void 0,void 0,function(){var n,a,s,i,o,c,w,w,u,d,f,h,B,p,g,k,x,b,y,w,_,B,k;return Qo(this,function(I){switch(I.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,i=0,o=n.textNodes,I.label=1;case 1:return i<o.length?(c=o[i],[4,this.renderTextNode(c,s)]):[3,4];case 2:I.sent(),I.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof Tde))return[3,8];I.label=5;case 5:return I.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return w=I.sent(),this.renderReplacedElement(n,a,w),[3,8];case 7:return I.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof Ide&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof Fde))return[3,12];I.label=9;case 9:return I.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return w=I.sent(),this.renderReplacedElement(n,a,w),[3,12];case 11:return I.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof Rde&&n.tree?(u=new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=I.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),I.label=14;case 14:if(n instanceof wM&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===jS?n.checked&&(this.ctx.save(),this.path([new ar(n.bounds.left+f*.39363,n.bounds.top+f*.79),new ar(n.bounds.left+f*.16,n.bounds.top+f*.5549),new ar(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new ar(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new ar(n.bounds.left+f*.72983,n.bounds.top+f*.23),new ar(n.bounds.left+f*.84,n.bounds.top+f*.34085),new ar(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=Ui(MX),this.ctx.fill(),this.ctx.restore()):n.type===TS&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Ui(MX),this.ctx.fill(),this.ctx.restore())),nft(n)&&n.value.length){switch(h=this.createFontStyle(s),B=h[0],p=h[1],g=this.fontMetrics.getMetrics(B,p).baseline,this.ctx.font=B,this.ctx.fillStyle=Ui(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=sft(n.styles.textAlign),k=PS(n),x=0,n.styles.textAlign){case 1:x+=k.width/2;break;case 2:x+=k.width;break}b=k.add(x,0,0,-k.height/2+1),this.ctx.save(),this.path([new ar(k.left,k.top),new ar(k.left+k.width,k.top),new ar(k.left+k.width,k.top+k.height),new ar(k.left,k.top+k.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new vw(n.value,b),s.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Ei(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(y=n.styles.listStyleImage,y.type!==0)return[3,18];w=void 0,_=y.url,I.label=15;case 15:return I.trys.push([15,17,,18]),[4,this.context.cache.match(_)];case 16:return w=I.sent(),this.ctx.drawImage(w,n.bounds.left-(w.width+10),n.bounds.top),[3,18];case 17:return I.sent(),this.context.logger.error("Error loading list-style-image "+_),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(B=this.createFontStyle(s)[0],this.ctx.font=B,this.ctx.fillStyle=Ui(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",k=new kh(n.bounds.left,n.bounds.top+Da(n.styles.paddingTop,n.bounds.width),n.bounds.width,wX(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new vw(r.listValue,k),s.letterSpacing,wX(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),I.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return fl(this,void 0,void 0,function(){var n,a,y,s,i,y,o,c,y,u,d,y,f,h,y,p,g,y,x,b,y;return Qo(this,function(w){switch(w.label){case 0:if(Ei(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:w.sent(),n=0,a=r.negativeZIndex,w.label=2;case 2:return n<a.length?(y=a[n],[4,this.renderStack(y)]):[3,5];case 3:w.sent(),w.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:w.sent(),s=0,i=r.nonInlineLevel,w.label=7;case 7:return s<i.length?(y=i[s],[4,this.renderNode(y)]):[3,10];case 8:w.sent(),w.label=9;case 9:return s++,[3,7];case 10:o=0,c=r.nonPositionedFloats,w.label=11;case 11:return o<c.length?(y=c[o],[4,this.renderStack(y)]):[3,14];case 12:w.sent(),w.label=13;case 13:return o++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,w.label=15;case 15:return u<d.length?(y=d[u],[4,this.renderStack(y)]):[3,18];case 16:w.sent(),w.label=17;case 17:return u++,[3,15];case 18:f=0,h=r.inlineLevel,w.label=19;case 19:return f<h.length?(y=h[f],[4,this.renderNode(y)]):[3,22];case 20:w.sent(),w.label=21;case 21:return f++,[3,19];case 22:p=0,g=r.zeroOrAutoZIndexOrTransformedOrOpacity,w.label=23;case 23:return p<g.length?(y=g[p],[4,this.renderStack(y)]):[3,26];case 24:w.sent(),w.label=25;case 25:return p++,[3,23];case 26:x=0,b=r.positiveZIndex,w.label=27;case 27:return x<b.length?(y=b[x],[4,this.renderStack(y)]):[3,30];case 28:w.sent(),w.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var i=Bu(a)?a.start:a;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),Bu(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},t.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},t.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,a);var c=o.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),o},t.prototype.renderBackgroundImage=function(r){return fl(this,void 0,void 0,function(){var n,a,s,i,o,c;return Qo(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var f,h,p,R,V,K,L,M,N,g,R,V,K,L,M,x,b,y,w,_,B,k,I,E,N,j,R,D,O,L,M,J,V,K,z,G,Y,ee,P,Q,X,te;return Qo(this,function(ae){switch(ae.label){case 0:if(d.type!==0)return[3,5];f=void 0,h=d.url,ae.label=1;case 1:return ae.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return f=ae.sent(),[3,4];case 3:return ae.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return f&&(p=XI(r,n,[f.width,f.height,f.width/f.height]),R=p[0],V=p[1],K=p[2],L=p[3],M=p[4],N=s.ctx.createPattern(s.resizeImage(f,L,M),"repeat"),s.renderRepeat(R,N,V,K)),[3,6];case 5:Hct(d)?(g=XI(r,n,[null,null,null]),R=g[0],V=g[1],K=g[2],L=g[3],M=g[4],x=Rct(d.angle,L,M),b=x[0],y=x[1],w=x[2],_=x[3],B=x[4],k=document.createElement("canvas"),k.width=L,k.height=M,I=k.getContext("2d"),E=I.createLinearGradient(y,_,w,B),bX(d.stops,b).forEach(function(se){return E.addColorStop(se.stop,Ui(se.color))}),I.fillStyle=E,I.fillRect(0,0,L,M),L>0&&M>0&&(N=s.ctx.createPattern(k,"repeat"),s.renderRepeat(R,N,V,K))):Vct(d)&&(j=XI(r,n,[null,null,null]),R=j[0],D=j[1],O=j[2],L=j[3],M=j[4],J=d.position.length===0?[xM]:d.position,V=Da(J[0],L),K=Da(J[J.length-1],M),z=Lct(d,V,K,L,M),G=z[0],Y=z[1],G>0&&Y>0&&(ee=s.ctx.createRadialGradient(D+V,O+K,0,D+V,O+K,G),bX(d.stops,G*2).forEach(function(se){return ee.addColorStop(se.stop,Ui(se.color))}),s.path(R),s.ctx.fillStyle=ee,G!==Y?(P=r.bounds.left+.5*r.bounds.width,Q=r.bounds.top+.5*r.bounds.height,X=Y/G,te=1/X,s.ctx.save(),s.ctx.translate(P,Q),s.ctx.transform(1,0,0,X,0,0),s.ctx.translate(-P,-Q),s.ctx.fillRect(D,te*(O-Q)+Q,L,M*te),s.ctx.restore()):s.ctx.fill())),ae.label=6;case 6:return n--,[2]}})},s=this,i=0,o=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<o.length?(c=o[i],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,n,a){return fl(this,void 0,void 0,function(){return Qo(this,function(s){return this.path(YX(a,n)),this.ctx.fillStyle=Ui(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,n,a,s){return fl(this,void 0,void 0,function(){var i,o;return Qo(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return i=GAt(s,a),this.path(i),this.ctx.fillStyle=Ui(r),this.ctx.fill(),o=KAt(s,a),this.path(o),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return fl(this,void 0,void 0,function(){var n,a,s,i,o,c,u,d,f=this;return Qo(this,function(h){switch(h.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!um(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=aft(ev(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),um(n.backgroundColor)||(this.ctx.fillStyle=Ui(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(p){f.ctx.save();var g=OS(r.curves),x=p.inset?0:tft,b=zAt(g,-x+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(f.path(g),f.ctx.clip(),f.mask(b)):(f.mask(g),f.ctx.clip(),f.path(b)),f.ctx.shadowOffsetX=p.offsetX.number+x,f.ctx.shadowOffsetY=p.offsetY.number,f.ctx.shadowColor=Ui(p.color),f.ctx.shadowBlur=p.blur.number,f.ctx.fillStyle=p.inset?Ui(p.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),h.label=2;case 2:o=0,c=0,u=s,h.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!um(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,3)];case 6:return h.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,r.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,r.curves)];case 10:h.sent(),h.label=11;case 11:o++,h.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,n,a,s,i){return fl(this,void 0,void 0,function(){var o,c,u,d,f,h,p,g,x,b,y,w,_,B,k,I,k,I;return Qo(this,function(E){return this.ctx.save(),o=qAt(s,a),c=YX(s,a),i===2&&(this.path(c),this.ctx.clip()),Bu(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),Bu(c[1])?(f=c[1].end.x,h=c[1].end.y):(f=c[1].x,h=c[1].y),a===0||a===2?p=Math.abs(u-f):p=Math.abs(d-h),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(c.slice(0,2)),g=n<3?n*3:n*2,x=n<3?n*2:n,i===3&&(g=n,x=n),b=!0,p<=g*2?b=!1:p<=g*2+x?(y=p/(2*g+x),g*=y,x*=y):(w=Math.floor((p+x)/(g+x)),_=(p-w*g)/(w-1),B=(p-(w+1)*g)/w,x=B<=0||Math.abs(x-_)<Math.abs(x-B)?_:B),b&&(i===3?this.ctx.setLineDash([0,g+x]):this.ctx.setLineDash([g,x])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Ui(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Bu(c[0])&&(k=c[3],I=c[0],this.ctx.beginPath(),this.formatPath([new ar(k.end.x,k.end.y),new ar(I.start.x,I.start.y)]),this.ctx.stroke()),Bu(c[1])&&(k=c[1],I=c[2],this.ctx.beginPath(),this.formatPath([new ar(k.end.x,k.end.y),new ar(I.start.x,I.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return fl(this,void 0,void 0,function(){var n;return Qo(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Ui(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=$At(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(Zde),nft=function(e){return e instanceof Pde||e instanceof Dde?!0:e instanceof wM&&e.type!==TS&&e.type!==jS},aft=function(e,t){switch(e){case 0:return OS(t);case 2:return MAt(t);case 1:default:return DS(t)}},sft=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},ift=["-apple-system","system-ui"],oft=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return ift.indexOf(t)===-1}):e},lft=function(e){Gd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return t.prototype.render=function(r){return fl(this,void 0,void 0,function(){var n,a;return Qo(this,function(s){switch(s.label){case 0:return n=tD(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,cft(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Ui(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(Zde),cft=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},uft=function(){function e(t){var r=t.id,n=t.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,b_([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,b_([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,b_([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,b_([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),dft=function(){function e(t,r){var n;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new uft({id:this.instanceName,enabled:t.logging}),this.cache=(n=t.cache)!==null&&n!==void 0?n:new TAt(this,t)}return e.instanceCount=1,e}(),lD=function(e,t){return t===void 0&&(t={}),Aft(e,t)};typeof window<"u"&&Kde.setContext(window);var Aft=function(e,t){return fl(void 0,void 0,void 0,function(){var r,n,a,s,i,o,c,u,d,f,h,p,g,x,b,y,w,_,B,k,E,I,E,N,j,R,D,O,L,M,J,V,K,z,G,Y,ee,P,Q,X;return Qo(this,function(te){switch(te.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(N=t.allowTaint)!==null&&N!==void 0?N:!1,imageTimeout:(j=t.imageTimeout)!==null&&j!==void 0?j:15e3,proxy:t.proxy,useCORS:(R=t.useCORS)!==null&&R!==void 0?R:!1},s=UO({logging:(D=t.logging)!==null&&D!==void 0?D:!0,cache:t.cache},a),i={windowWidth:(O=t.windowWidth)!==null&&O!==void 0?O:n.innerWidth,windowHeight:(L=t.windowHeight)!==null&&L!==void 0?L:n.innerHeight,scrollX:(M=t.scrollX)!==null&&M!==void 0?M:n.pageXOffset,scrollY:(J=t.scrollY)!==null&&J!==void 0?J:n.pageYOffset},o=new kh(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),c=new dft(s,o),u=(V=t.foreignObjectRendering)!==null&&V!==void 0?V:!1,d={allowTaint:(K=t.allowTaint)!==null&&K!==void 0?K:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),f=new qX(c,e,d),h=f.clonedReferenceElement,h?[4,f.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return p=te.sent(),g=EM(h)||hAt(h)?zot(h.ownerDocument):Gk(c,h),x=g.width,b=g.height,y=g.left,w=g.top,_=fft(c,h,t.backgroundColor),B={canvas:t.canvas,backgroundColor:_,scale:(G=(z=t.scale)!==null&&z!==void 0?z:n.devicePixelRatio)!==null&&G!==void 0?G:1,x:((Y=t.x)!==null&&Y!==void 0?Y:0)+y,y:((ee=t.y)!==null&&ee!==void 0?ee:0)+w,width:(P=t.width)!==null&&P!==void 0?P:Math.ceil(x),height:(Q=t.height)!==null&&Q!==void 0?Q:Math.ceil(b)},u?(c.logger.debug("Document cloned, using foreign object rendering"),E=new lft(c,B),[4,E.render(h)]):[3,3];case 2:return k=te.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+y+","+w+" with size "+x+"x"+b+" using computed rendering"),c.logger.debug("Starting DOM parsing"),I=Mde(c,h),_===I.styles.backgroundColor&&(I.styles.backgroundColor=dh.TRANSPARENT),c.logger.debug("Starting renderer for element at "+B.x+","+B.y+" with size "+B.width+"x"+B.height),E=new rft(c,B),[4,E.render(I)];case 4:k=te.sent(),te.label=5;case 5:return(!((X=t.removeContainer)!==null&&X!==void 0)||X)&&(qX.destroy(p)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,k]}})})},fft=function(e,t,r){var n=t.ownerDocument,a=n.documentElement?gw(e,getComputedStyle(n.documentElement).backgroundColor):dh.TRANSPARENT,s=n.body?gw(e,getComputedStyle(n.body).backgroundColor):dh.TRANSPARENT,i=typeof r=="string"?gw(e,r):r===null?dh.TRANSPARENT:4294967295;return t===n.documentElement?um(a)?um(s)?i:s:a:i};const hft=Object.freeze(Object.defineProperty({__proto__:null,default:lD},Symbol.toStringTag,{value:"Module"})),mft=e=>{const[t,r]=S.useState(!1),[n,a]=S.useState(null);return S.useEffect(()=>{const s="google-maps-script";if(document.getElementById(s)||window.google){r(!0);return}const i=document.createElement("script");i.id=s,i.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,directions&loading=async`,i.async=!0,i.defer=!0,i.onload=()=>r(!0),i.onerror=()=>a(new Error("No se pudo cargar Google Maps.")),document.head.appendChild(i)},[e]),{isLoaded:t,error:n}},eAe=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de práctica"},{elemento:"Ambiente laboral y clima organizacional"},{elemento:"Supervisión y mentoría"},{elemento:"Oportunidades de aprendizaje"},{elemento:"Recursos y herramientas disponibles"},{elemento:"Seguridad y salud ocupacional"},{elemento:"Comunicación interna"}],pft=["Mecánica Industrial","Mecánica Automotriz"],gft=()=>({nombre:"",rut:"",direccion:"",contacto:"",email:"",area:"",cupos:1,coordenadas:null,calificaciones:eAe.map(e=>({...e,score:null})),estudiantesAsignados:[],docenteSupervisor:void 0}),ZX=({empresas:e,isLoaded:t,route:r})=>{const n=S.useRef(null),a=S.useRef(null),s=S.useRef([]),i=S.useRef(null),o=e.filter(c=>{var u,d;return((u=c.coordenadas)==null?void 0:u.lat)&&((d=c.coordenadas)==null?void 0:d.lng)});return S.useEffect(()=>{!t||!n.current||!window.google||(a.current||(a.current=new window.google.maps.Map(n.current,{center:{lat:-33.4489,lng:-70.6693},zoom:11})),i.current||(i.current=new window.google.maps.DirectionsRenderer),s.current.forEach(c=>c.setMap(null)),s.current=[],i.current.setMap(null),r?(i.current.setMap(a.current),i.current.setDirections(r)):o.forEach(c=>{const u=new window.google.maps.Marker({position:{lat:c.coordenadas.lat,lng:c.coordenadas.lng},map:a.current,title:c.nombre}),d=new window.google.maps.InfoWindow({content:`<div style="font-weight: bold;">${c.nombre}</div><div>${c.direccion}</div>`});u.addListener("click",()=>{d.open(a.current,u)}),s.current.push(u)}))},[o,t,r]),l.jsxs("div",{className:"relative",id:"map-container-for-pdf",children:[l.jsx("div",{ref:n,className:"h-[600px] w-full rounded-lg border"}),!r&&o.length===0&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 rounded-lg",children:l.jsx("div",{className:"text-center p-6",children:l.jsx("p",{className:"text-gray-600 text-lg",children:"📍 No hay empresas geo-localizadas"})})})]})},xft=({route:e,travelMode:t})=>{const a=t==="TRANSIT"?45:30,s=e.routes[0].legs.reduce((f,h)=>{var p;return f+(((p=h.duration)==null?void 0:p.value)||0)},0),o=(e.routes[0].legs.length>1?e.routes[0].legs.length-1:0)*a*60,c=s+o,u=e.routes[0].legs.reduce((f,h)=>{var p;return f+(((p=h.distance)==null?void 0:p.value)||0)},0),d=t==="DRIVING"?u/1e3/12*1300:0;return l.jsxs("div",{className:"mt-6 p-4 border rounded-lg bg-slate-50",id:"route-details-for-pdf",children:[l.jsx("h3",{className:"text-xl font-bold mb-3",children:"Detalles de la Ruta"}),l.jsx("div",{className:"space-y-4",children:e.routes[0].legs.map((f,h)=>{var p,g,x;return l.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("h4",{className:"font-bold text-lg",children:["Tramo ",h+1,": ",f.start_address.split(",")[0]," → ",f.end_address.split(",")[0]]}),l.jsxs("div",{className:"text-sm text-gray-600",children:[(p=f.duration)==null?void 0:p.text," • ",(g=f.distance)==null?void 0:g.text]})]}),t==="TRANSIT"&&l.jsx("div",{className:"space-y-3",children:(x=f.steps)==null?void 0:x.map((b,y)=>b.transit&&l.jsxs("div",{className:"flex items-start gap-2 text-sm py-1",children:[l.jsx("span",{className:"text-lg",children:"🚌"}),l.jsx("span",{dangerouslySetInnerHTML:{__html:b.instructions}})]},y))})]},h)})}),l.jsxs("div",{className:"mt-4 pt-4 border-t font-bold text-right",children:[l.jsxs("p",{children:["Tiempo de viaje: ",Math.round(s/60)," min"]}),l.jsxs("p",{children:["Tiempo en paradas: ",Math.round(o/60)," min"]}),l.jsxs("p",{className:"text-lg",children:["Duración Total Estimada: ",Math.round(c/60)," min"]}),l.jsxs("p",{children:["Distancia Total: ",(u/1e3).toFixed(1)," km"]}),t==="DRIVING"&&l.jsxs("p",{className:"text-green-600",children:["Costo Bencina Aprox: $",d.toLocaleString("es-CL",{maximumFractionDigits:0})]})]})]})},eY=async e=>window.google?new Promise(t=>{new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:e,fields:["geometry"]},(n,a)=>{var s;a===window.google.maps.places.PlacesServiceStatus.OK&&((s=n==null?void 0:n.geometry)!=null&&s.location)?t({lat:n.geometry.location.lat(),lng:n.geometry.location.lng()}):t(null)})}):null,vft=({data:e})=>{const t=["#0088FE","#00C49F","#FFBB28","#FF8042"];return l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Especialidad"}),l.jsx(Pp,{width:"100%",height:300,children:l.jsxs(pse,{children:[l.jsx(N8,{data:e.porEspecialidad,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:!0,children:e.porEspecialidad.map((r,n)=>l.jsx(pg,{fill:t[n%t.length]},`cell-${n}`))}),l.jsx(Dp,{})]})})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Supervisor"}),l.jsx(Pp,{width:"100%",height:300,children:l.jsxs(VN,{data:e.porSupervisor,layout:"vertical",children:[l.jsx(qw,{strokeDasharray:"3 3"}),l.jsx(c1,{type:"number"}),l.jsx(u1,{type:"category",dataKey:"name",width:150}),l.jsx(Dp,{}),l.jsx(Kw,{dataKey:"value",fill:"#82ca9d",name:"Empresas"})]})})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 lg:col-span-3",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Distribución por Comuna"}),l.jsx(Pp,{width:"100%",height:300,children:l.jsxs(VN,{data:e.porComuna,children:[l.jsx(qw,{strokeDasharray:"3 3"}),l.jsx(c1,{dataKey:"name"}),l.jsx(u1,{}),l.jsx(Dp,{}),l.jsx(Kw,{dataKey:"value",fill:"#8884d8",name:"Empresas"})]})})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Calificación por Ámbito"}),l.jsx(Pp,{width:"100%",height:300,children:l.jsxs(BRe,{cx:"50%",cy:"50%",outerRadius:"80%",data:e.calificacionPorAmbito,children:[l.jsx(Eae,{}),l.jsx(sk,{dataKey:"subject"}),l.jsx(nk,{angle:30,domain:[0,5]}),l.jsx(B8,{name:"Promedio",dataKey:"A",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),l.jsx(Dp,{})]})})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Ranking de Empresas"}),l.jsx("div",{className:"overflow-y-auto max-h-[300px]",children:l.jsx("ul",{className:"space-y-2",children:e.ranking.map((r,n)=>l.jsxs("li",{className:"flex items-center justify-between p-2 rounded-lg bg-slate-50",children:[l.jsxs("span",{className:"font-semibold",children:[n+1,". ",r.nombre]}),l.jsxs("span",{className:"font-bold text-amber-500",children:[r.promedio.toFixed(1)," ★"]})]},r.id))})})]})]})},bft=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,s]=S.useState("list"),[i,o]=S.useState(null),[c,u]=S.useState(!0),[d,f]=S.useState(null),[h,p]=S.useState(null),[g,x]=S.useState(null),[b,y]=S.useState([]),[w,_]=S.useState(null),[B,k]=S.useState(!1),[I,E]=S.useState("DRIVING"),[N,j]=S.useState(""),[R,D]=S.useState([]),O="AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4",{isLoaded:L}=mft(O);S.useEffect(()=>{u(!0);const oe=Ust(t),ce=Vst(n),me=$st(D);return u(!1),()=>{oe(),ce(),me()}},[]);const M=S.useMemo(()=>{const oe=e.reduce((_e,De)=>{const Ne=De.area||"Sin especificar";return _e[Ne]=(_e[Ne]||0)+1,_e},{}),ce=e.reduce((_e,De)=>{var fe;const Ne=((fe=De.docenteSupervisor)==null?void 0:fe.nombreCompleto)||"Sin asignar";return _e[Ne]=(_e[Ne]||0)+1,_e},{}),me=e.reduce((_e,De)=>{const Ne=De.direccion.split(",").map(Ie=>Ie.trim()),fe=Ne.length>1?Ne[1]:"Desconocida";return _e[fe]=(_e[fe]||0)+1,_e},{}),ke=eAe.map(_e=>{const De=e.flatMap(fe=>{var Ie;return(Ie=fe.calificaciones.find(Me=>Me.elemento===_e.elemento))==null?void 0:Ie.score}).filter(fe=>fe!=null),Ne=De.length>0?De.reduce((fe,Ie)=>fe+Ie,0)/De.length:0;return{subject:_e.elemento.split(" ")[0],A:Ne,fullMark:5}}),ne=e.map(_e=>{const De=_e.calificaciones.map(fe=>fe.score).filter(fe=>fe!=null),Ne=De.length>0?De.reduce((fe,Ie)=>fe+Ie,0)/De.length:0;return{..._e,promedio:Ne}}).filter(_e=>_e.promedio>0).sort((_e,De)=>De.promedio-_e.promedio);return{porEspecialidad:Object.entries(oe).map(([_e,De])=>({name:_e,value:De})),porSupervisor:Object.entries(ce).map(([_e,De])=>({name:_e,value:De})),porComuna:Object.entries(me).map(([_e,De])=>({name:_e,value:De})),calificacionPorAmbito:ke,ranking:ne}},[e]),J=async()=>{if(i)try{await Qst(i),s("list"),o(null),f(null)}catch{alert("No se pudo guardar la empresa.")}},V=async oe=>{window.confirm("¿Está seguro de eliminar esta empresa?")&&await Hst(oe)},K=(oe,ce)=>{o(me=>me?{...me,[oe]:ce}:null)},z=async oe=>{var ce;if(f(oe),(ce=oe==null?void 0:oe.value)!=null&&ce.place_id&&L){const me=await eY(oe.value.place_id);K("direccion",oe.label||""),K("coordenadas",me)}else K("direccion",(oe==null?void 0:oe.label)||"")},G=oe=>{o(JSON.parse(JSON.stringify(oe))),oe.direccion&&f({label:oe.direccion,value:{description:oe.direccion}}),s("form")},Y=async oe=>{var ce;if(p(oe),(ce=oe==null?void 0:oe.value)!=null&&ce.place_id&&L){const me=await eY(oe.value.place_id);x(me)}},ee=oe=>{y(ce=>ce.some(me=>me.id===oe.id)?ce.filter(me=>me.id!==oe.id):[...ce,oe])},P=()=>{if(!g||b.length===0||!L)return;k(!0);const oe=new window.google.maps.DirectionsService,ce=b.filter(me=>me.coordenadas).map(me=>({location:me.coordenadas,stopover:!0}));oe.route({origin:g,destination:g,waypoints:ce,optimizeWaypoints:!0,travelMode:window.google.maps.TravelMode[I]},(me,ke)=>{k(!1),ke===window.google.maps.DirectionsStatus.OK&&me?_(me):alert("No se pudo calcular la ruta: "+ke)})},Q=()=>{_(null),p(null),x(null),y([]),j("")},X=async()=>{if(!N||!h||!g||b.length===0){alert("Por favor, asigna un nombre a la ruta y asegúrate de tener un punto de partida y empresas seleccionadas.");return}const oe={nombre:N,startPoint:{label:h.label,coords:g},empresas:b.map(ce=>({id:ce.id,nombre:ce.nombre,coordenadas:ce.coordenadas})),travelMode:I};try{await zst(oe),alert("Ruta guardada con éxito."),s("saved-routes")}catch{alert("Error al guardar la ruta.")}},te=async()=>{const oe=document.getElementById("map-container-for-pdf"),ce=document.getElementById("route-details-for-pdf");if(!oe||!ce)return;const me=new vr("p","mm","a4"),ke=me.internal.pageSize.getWidth();me.text(`Ruta de Supervisión: ${N||"Sin nombre"}`,10,15),me.setFontSize(10),me.text(`Fecha: ${new Date().toLocaleDateString("es-CL")}`,10,22);const _e=(await lD(oe,{useCORS:!0})).toDataURL("image/png");me.addImage(_e,"PNG",10,30,ke-20,100);const Ne=(await lD(ce)).toDataURL("image/png"),fe=me.getImageProperties(Ne),Ie=fe.height*(ke-20)/fe.width;me.addImage(Ne,"PNG",10,135,ke-20,Ie),me.save(`ruta-${N||"supervision"}.pdf`)},ae=oe=>{p({label:oe.startPoint.label,value:null}),x(oe.startPoint.coords),y(oe.empresas),E(oe.travelMode),j(oe.nombre),s("route")},se=async oe=>{window.confirm("¿Estás seguro de que quieres eliminar esta ruta guardada?")&&(await Gst(oe),alert("Ruta eliminada."))};return c?l.jsx("div",{className:"text-center p-8",children:"Cargando..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Gestión de Empresas"}),l.jsxs("div",{className:"flex items-center gap-4",children:[a!=="list"&&l.jsx("button",{onClick:()=>{s("list"),f(null),o(null),Q()},className:"font-semibold hover:text-blue-600",children:"← Volver al listado"}),a==="list"&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>s("dashboard"),title:"Dashboard",className:"bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[l.jsx(Qye,{size:18})," Dashboard"]}),l.jsx("button",{onClick:()=>s("saved-routes"),title:"Rutas Guardadas",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Rutas Guardadas"}),l.jsx("button",{onClick:()=>s("route"),title:"Ruta de Supervisión",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Ruta de Supervisión"}),l.jsx("button",{onClick:()=>s("map"),title:"Vista de Mapa",className:"bg-slate-200 hover:bg-slate-300 p-2 rounded-lg transition-colors",children:"🗺️"}),l.jsx("button",{onClick:()=>{o(gft()),s("form")},className:"bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Crear Empresa"})]})]})]}),a==="dashboard"&&l.jsx(vft,{data:M}),a==="saved-routes"&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Rutas de Supervisión Guardadas"}),l.jsx("div",{className:"space-y-3",children:R.length===0?l.jsx("p",{className:"text-gray-500",children:"No tienes rutas guardadas."}):R.map(oe=>l.jsxs("div",{className:"p-4 border rounded-lg flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold",children:oe.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:[oe.empresas.length," paradas"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>ae(oe),className:"bg-blue-500 text-white px-3 py-1 rounded-md text-sm",children:"Cargar"}),l.jsx("button",{onClick:()=>se(oe.id),className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm",children:"Eliminar"})]})]},oe.id))})]}),a==="route"&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Planificador de Ruta de Supervisión"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1. Ingresa un nombre para la ruta"}),l.jsx("input",{type:"text",value:N,onChange:oe=>j(oe.target.value),placeholder:"Ej: Supervisión Zona Norte",className:"input-style w-full"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"2. Ingresa el punto de partida"}),l.jsx(ZW,{apiKey:O,selectProps:{value:h,onChange:Y,placeholder:"Buscar dirección de partida..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3. Elige el modo de transporte"}),l.jsxs("div",{className:"flex gap-4 rounded-lg bg-slate-100 p-1",children:[l.jsx("button",{onClick:()=>E("DRIVING"),className:`w-full py-2 rounded-md transition ${I==="DRIVING"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Automóvil"}),l.jsx("button",{onClick:()=>E("TRANSIT"),className:`w-full py-2 rounded-md transition ${I==="TRANSIT"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Transporte Público"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"4. Selecciona las empresas a visitar"}),l.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-2 space-y-2",children:e.filter(oe=>oe.coordenadas).map(oe=>l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:`route-${oe.id}`,checked:b.some(ce=>ce.id===oe.id),onChange:()=>ee(oe),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),l.jsx("label",{htmlFor:`route-${oe.id}`,className:"ml-3 text-sm text-gray-700",children:oe.nombre})]},oe.id))})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("button",{onClick:P,disabled:!g||b.length===0||B,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:B?"Calculando...":"Visualizar Ruta"}),l.jsx("button",{onClick:X,disabled:!N||!g||b.length===0,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Guardar Ruta"}),l.jsx("button",{onClick:te,disabled:!w,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Exportar PDF"}),l.jsx("button",{onClick:Q,className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-lg transition-colors",children:"Limpiar"})]})]}),l.jsx("div",{children:l.jsx(ZX,{empresas:b,isLoaded:L,route:w})})]}),w&&l.jsx(xft,{route:w,travelMode:I})]}),a==="map"&&l.jsx(ZX,{empresas:e,isLoaded:L}),a==="list"&&l.jsx("div",{className:"space-y-3",children:e.length===0?l.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay empresas registradas."}):e.map(oe=>{var ce;return l.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg",children:oe.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:[oe.rut," | ",oe.direccion]}),l.jsxs("p",{className:"text-sm text-slate-600",children:["Área: ",oe.area||"No especificada"," | Cupos: ",oe.cupos," | Supervisor: ",((ce=oe.docenteSupervisor)==null?void 0:ce.nombreCompleto)||"Ninguno"]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:()=>G(oe),className:"text-sm font-semibold text-blue-600 hover:text-blue-800",children:"Editar"}),l.jsx("button",{onClick:()=>V(oe.id),className:"text-sm text-red-500 hover:text-red-700",children:"Eliminar"})]})]})},oe.id)})}),a==="form"&&i&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"id"in i?"Editando Empresa":"Nueva Empresa"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(tye,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{value:i.nombre,onChange:oe=>K("nombre",oe.target.value),placeholder:"Nombre Empresa",className:"input-style pl-10",required:!0})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(Pye,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{value:i.rut,onChange:oe=>K("rut",oe.target.value),placeholder:"RUT Empresa",className:"input-style pl-10",required:!0})]}),l.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[l.jsx(rN,{className:"absolute left-3 top-5 -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),l.jsx("div",{className:"w-full pl-10",children:l.jsx(ZW,{apiKey:O,selectProps:{value:d,onChange:z,placeholder:"Buscar dirección..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(Fw,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{value:i.contacto,onChange:oe=>K("contacto",oe.target.value),placeholder:"Contacto",className:"input-style pl-10"})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(Zye,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{type:"email",value:i.email||"",onChange:oe=>K("email",oe.target.value),placeholder:"Correo electrónico",className:"input-style pl-10"})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(Zl,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{type:"number",value:i.cupos,onChange:oe=>K("cupos",parseInt(oe.target.value)||1),placeholder:"N° de cupos",className:"input-style pl-10",min:"1"})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(fee,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsxs("select",{value:i.area||"",onChange:oe=>K("area",oe.target.value),className:"input-style pl-10 w-full",children:[l.jsx("option",{value:"",disabled:!0,children:"Seleccione un área"}),pft.map(oe=>l.jsx("option",{value:oe,children:oe},oe))]})]}),l.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[l.jsx(Fw,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsxs("select",{value:i.docenteSupervisor?JSON.stringify(i.docenteSupervisor):"",onChange:oe=>{const ce=oe.target.value;K("docenteSupervisor",ce?JSON.parse(ce):void 0)},className:"input-style pl-10 w-full",children:[l.jsx("option",{value:"",children:"Sin supervisor asignado"}),r.map(oe=>l.jsx("option",{value:JSON.stringify({id:oe.id,nombre:oe.nombreCompleto}),children:oe.nombreCompleto},oe.id))]})]})]}),l.jsxs("div",{className:"space-y-4 pt-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Evaluación de la Empresa"}),i.calificaciones.map((oe,ce)=>l.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border",children:[l.jsx(jwe,{className:"w-5 h-5 text-slate-400"}),l.jsx("span",{className:"flex-1 text-sm font-medium text-gray-700",children:oe.elemento}),l.jsxs("select",{value:oe.score||"",onChange:me=>{const ke=[...i.calificaciones];ke[ce].score=me.target.value?parseInt(me.target.value):null,K("calificaciones",ke)},className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[l.jsx("option",{value:"",children:"Sin calificar"}),[1,2,3,4,5].map(me=>l.jsx("option",{value:me,children:me},me))]})]},ce))]}),l.jsx("div",{className:"pt-6",children:l.jsx("button",{onClick:J,className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 rounded-lg transition-colors",disabled:!i.nombre||!i.rut,children:"Guardar Empresa"})})]})]})},CM="dpd_actividades",tAe="dpd_respuestas",yft="usuarios";function wft(e,{includeArchived:t=!1}={}){const r=kt(ht,CM),n=t?$t(r,Sr("createdAt","desc")):$t(r,Jr("isArchived","==",!1),Sr("createdAt","desc"));return pr(n,a=>{const s=a.docs.map(i=>({id:i.id,...i.data()}));e(s)})}async function Eft(e){const t=kt(ht,CM);return(await Tn(t,{...e,isArchived:!1,createdAt:Ni(),updatedAt:Ni()})).id}async function Cft(e){const t=dr(ht,CM,e);await za(t)}function _ft(e,t){const r=kt(ht,tAe),n=$t(r,Jr("activityId","==",e),Sr("createdAt","desc"));return pr(n,a=>{const s=a.docs.map(i=>({id:i.id,...i.data()}));t(s)})}async function Nft(e){const t=kt(ht,tAe);return(await Tn(t,{...e,createdAt:Ni()})).id}function Sft(e,t){const r=kt(ht,yft),n=$t(r,Jr("profile","in",e));return pr(n,a=>{const s=a.docs.map(i=>{const o=i.data();return{id:i.id,nombre:(o==null?void 0:o.displayName)||(o==null?void 0:o.name)||(o==null?void 0:o.email)||"Sin nombre",profile:o==null?void 0:o.profile,email:o==null?void 0:o.email}});t(s)})}function rAe(e){return(e||"").trim().split(/\s+/).filter(Boolean).length}const kft=[{model:"gemini-2.5-flash-lite",generationConfig:{temperature:.7,maxOutputTokens:1024}},{model:"gemini-1.5-pro",generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:1024}}],Bft=()=>{const e="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";try{return new us(e)}catch(t){return console.error("Error al inicializar Gemini:",t),null}};async function jft(e,t){try{const r=e.getGenerativeModel(t);return await r.generateContent("test"),r}catch(r){return console.warn(`Modelo ${t.model} no disponible:`,r),null}}async function nAe(){const e=Bft();if(!e)return null;for(const t of kft){const r=await jft(e,t);if(r)return console.log(`Usando modelo ${t.model}`),r}return console.error("No se encontró ningún modelo de Gemini disponible"),null}function aAe(e){try{const t=e.trim().replace(/^```json/i,"").replace(/^```/i,"").replace(/```$/i,"");return JSON.parse(t)}catch{return null}}function Tft(e){const t=[...e];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t}async function Ift(e,t=3){var n;const r=await nAe();if(!r)return YI(e,t);try{const a=`Genera ${t} preguntas de selección múltiple sobre el tema "${e}".
    Para cada pregunta, proporciona:
    1. Un enunciado claro y conciso
    2. 4 opciones de respuesta plausibles
    
    Devuelve las preguntas en formato JSON como este:
    {
      "preguntas": [
        {
          "enunciado": "¿Pregunta 1?",
          "opciones": ["Opción 1", "Opción 2", "Opción 3", "Opción 4"]
        }
      ]
    }`,i=(await r.generateContent(a)).response.text(),o=aAe(i);return(n=o==null?void 0:o.preguntas)!=null&&n.length?o.preguntas.slice(0,t):(console.warn("Formato inesperado de respuesta:",i),YI(e,t))}catch(a){return console.error("Error al generar preguntas:",a),YI(e,t)}}async function Fft(e,t=30){var n;const r=await nAe();if(!r)return JI(e);try{const a=e.filter(u=>u&&u.trim());if(a.length===0)return[];const s=`Analiza estas respuestas y extrae los conceptos clave con su relevancia:
    ${a.join(`
---
`)}
    
    Responde en formato JSON:
    {
      "keywords": [
        { "keyword": "concepto1", "score": 0.9 },
        { "keyword": "concepto2", "score": 0.8 }
      ]
    }
    
    Incluye hasta ${t} conceptos más relevantes.`,o=(await r.generateContent(s)).response.text(),c=aAe(o);return(n=c==null?void 0:c.keywords)!=null&&n.length?c.keywords.filter(u=>u.keyword&&typeof u.score=="number").slice(0,t):(console.warn("Formato inesperado de respuesta:",o),JI(e))}catch(a){return console.error("Error al analizar respuestas:",a),JI(e)}}function YI(e,t){const r=["Totalmente de acuerdo","De acuerdo","Neutral","En desacuerdo","Totalmente en desacuerdo"];return Array(t).fill(null).map((n,a)=>({enunciado:`Pregunta ${a+1} sobre ${e}`,opciones:Tft(r).slice(0,4)}))}function JI(e){const t=new Set(["el","la","los","las","un","una","unos","unas","de","del","a","ante","con","en","para","por","sobre","y","o","pero","si","no","que","cual","quien","como"]),r={},n=e.join(" ").toLowerCase().split(/\W+/).filter(a=>a.length>3&&!t.has(a));for(const a of n)r[a]=(r[a]||0)+1;return Object.entries(r).sort(([,a],[,s])=>s-a).slice(0,20).map(([a,s])=>({keyword:a,score:Math.min(1,s/n.length)}))}const RS=500,tY=()=>({titulo:"",dimension:"Liderazgo Curricular",subdimension:"Planificación y organización del currículo",creadorPerfil:"PROFESORADO",creadorId:"",creadorNombre:"",preguntas:[],aiTema:"",aiCantidad:3}),by=at.memo(({title:e,icon:t,right:r,children:n})=>l.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-4 md:p-6 shadow-sm",children:[l.jsxs("header",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[t,e]}),r]}),n]})),Oft=at.memo(({value:e,onChange:t,canCreate:r})=>{const n=(a,s)=>l.jsx("button",{onClick:()=>t(a),className:`px-3 py-1.5 rounded-lg text-sm border transition ${e===a?"bg-indigo-600 text-white border-indigo-600":"bg-white hover:bg-indigo-50"}`,disabled:a==="crear"&&!r,title:a==="crear"&&!r?"Tu perfil no crea actividades":"",children:s},a);return l.jsxs("div",{className:"flex items-center gap-2",children:[n("responder","Responder"),n("dashboard","Dashboard"),n("crear","Nueva actividad")]})}),Dft=at.memo(({items:e,selectedId:t,onSelect:r,canDelete:n,onDelete:a})=>e.length?l.jsx("ul",{className:"space-y-2",children:e.map(s=>{const i=s.id===t;return l.jsxs("li",{children:[l.jsxs("button",{onClick:()=>r(s.id),className:`w-full flex items-center justify-between gap-2 rounded-xl border px-3 py-2 text-left transition ${i?"border-indigo-600 bg-indigo-600 text-white":"border-slate-200 bg-white hover:bg-indigo-50"}`,title:`${s.titulo} • ${s.dimension} / ${s.subdimension}`,children:[l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(qv,{className:"w-4 h-4"}),l.jsx("span",{className:"font-medium",children:s.titulo})]}),l.jsx(bP,{className:"w-4 h-4 opacity-70"})]}),n(s)&&l.jsx("button",{onClick:()=>a(s.id,s.titulo),className:"mt-1 text-xs text-red-600 hover:underline",title:"Eliminar actividad",children:"Eliminar"})]},s.id)})}):l.jsxs("div",{className:"p-4 text-sm text-slate-500 flex items-center gap-2",children:[l.jsx(jye,{className:"w-4 h-4"})," Aún no hay actividades creadas."]})),ZI=at.memo(({label:e,value:t,pill:r})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-slate-500",children:[e,":"]}),r?l.jsx("span",{className:"px-2 py-0.5 rounded-full bg-indigo-50 text-indigo-700 text-xs",children:t}):l.jsx("span",{className:"font-medium",children:t})]})),Pft=at.memo(({label:e,value:t,total:r=0})=>{const n=r>0?t/r*100:t>0?100:0,a=n>=75?"from-emerald-500":n>=50?"from-blue-500":n>=25?"from-amber-500":"from-rose-500";return l.jsxs("div",{className:"relative mt-1",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),l.jsx("span",{className:"text-sm font-medium text-slate-700",children:t})]}),l.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5",children:l.jsx("div",{className:`h-2.5 rounded-full bg-gradient-to-r ${a} to-transparent transition-all duration-500`,style:{width:`${Math.min(100,n)}%`}})})]})}),Rft=at.memo(({option:e,options:t,onChangeText:r,onDelete:n})=>{const a=S.useCallback(i=>r(e.id,i.target.value),[e.id,r]),s=S.useCallback(()=>n(e.id),[e.id,n]);return l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{value:e.text,onChange:a,className:"flex-1 border rounded-lg px-3 py-1.5",placeholder:`Opción ${t.findIndex(i=>i.id===e.id)+1}`}),l.jsx("button",{onClick:s,className:"text-red-600 hover:text-red-700",title:"Eliminar opción",children:l.jsx(tl,{className:"w-4 h-4"})})]})}),Lft=at.memo(({q:e,index:t,onRemove:r,onPatch:n})=>{const a=S.useCallback(f=>n(e.id,{enunciado:f.target.value}),[e.id,n]),s=S.useCallback(f=>n(e.id,{maxPalabras:parseInt(f.target.value||"500")}),[e.id,n]),i=S.useCallback(f=>n(e.id,{multiple:f.target.checked}),[e.id,n]),o=S.useCallback(()=>n(e.id,{opciones:[...e.opciones,{id:crypto.randomUUID(),text:""}]}),[e.id,e.opciones,n]),c=S.useCallback((f,h)=>{n(e.id,{opciones:e.opciones.map(p=>p.id===f?{...p,text:h}:p)})},[e.id,e.opciones,n]),u=S.useCallback(f=>n(e.id,{opciones:e.opciones.filter(h=>h.id!==f)}),[e.id,e.opciones,n]),d=S.useCallback(()=>r(e.id),[e.id,r]);return l.jsxs("div",{className:"border rounded-xl p-3",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"text-sm text-slate-600",children:["#",t+1," • ",e.tipo==="abierta"?"Abierta":"Selección múltiple"]}),l.jsx("button",{onClick:d,className:"text-red-600 hover:text-red-700",title:"Eliminar",children:l.jsx(tl,{className:"w-4 h-4"})})]}),l.jsx("input",{value:e.enunciado,onChange:a,className:"w-full border rounded-lg px-3 py-2 mb-2",placeholder:"Escribe el enunciado de la pregunta"}),e.tipo==="abierta"?l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("label",{className:"text-sm",children:"Máx. palabras"}),l.jsx("input",{type:"number",min:50,max:1e3,value:e.maxPalabras||RS,onChange:s,className:"w-24 border rounded-lg px-2 py-1"})]}):l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[l.jsx("input",{type:"checkbox",checked:e.multiple??!0,onChange:i})," Permitir selección múltiple"]}),e.opciones.map(f=>l.jsx(Rft,{option:f,options:e.opciones,onChangeText:c,onDelete:u},f.id)),l.jsx("button",{onClick:o,className:"text-sm text-sky-700 hover:underline",children:"+ Añadir opción"})]})]})}),Mft=at.memo(({q:e,respuestas:t,onChange:r})=>{var i,o;const n=S.useCallback(c=>r(e,c.target.value),[e,r]);if(e.tipo==="abierta"){const c=((i=t[e.id])==null?void 0:i.valorTexto)||"";return l.jsxs("div",{className:"border rounded-xl p-3",children:[l.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),l.jsx("textarea",{rows:5,value:c,onChange:n,placeholder:`Máximo ${e.maxPalabras||RS} palabras…`,className:"w-full border rounded-lg px-3 py-2"}),l.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[rAe(c)," / ",e.maxPalabras||RS," palabras"]})]})}const a=((o=t[e.id])==null?void 0:o.seleccionados)||[],s=c=>{let u=new Set(a);a.includes(c)?u.delete(c):e.multiple?u.add(c):u=new Set([c]),r(e,Array.from(u))};return l.jsxs("div",{className:"border rounded-xl p-3",children:[l.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),l.jsx("div",{className:"flex flex-col gap-2",children:(e.opciones||[]).map((c,u)=>{const d=a.includes(c);return l.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:e.multiple?"checkbox":"radio",name:e.multiple?`answer-${e.id}[]`:`answer-${e.id}`,checked:d,onChange:()=>s(c)}),l.jsx("span",{children:c})]},`${e.id}-${u}`)})})]})}),Uft=({currentUser:e})=>{var P;const[t,r]=S.useState("responder"),[n,a]=S.useState([]),[s,i]=S.useState(""),[o,c]=S.useState(""),[u,d]=S.useState(tY()),f=S.useCallback(Q=>d(X=>({...X,...Q})),[]),[h,p]=S.useState([]),[g,x]=S.useState({}),[b,y]=S.useState([]),w=EQ.includes(e==null?void 0:e.profile)||(e==null?void 0:e.isAdmin);S.useEffect(()=>{const Q=wft(X=>{a(X),i(te=>{var ae;return te||(((ae=X[0])==null?void 0:ae.id)??"")})});return()=>Q()},[]),S.useEffect(()=>{const Q=Sft(["PROFESORADO","SUBDIRECCION"],X=>{p(X),d(te=>{if(te.creadorId)return te;const ae=X.find(se=>se.id===(e==null?void 0:e.uid));return ae?{...te,creadorId:ae.id,creadorNombre:ae.nombre,creadorPerfil:ae.profile||te.creadorPerfil}:te})});return()=>Q()},[e]),S.useEffect(()=>{if(!s)return;const Q=_ft(s,y);return()=>Q()},[s]);const _=S.useMemo(()=>n.find(Q=>Q.id===s),[n,s]);S.useMemo(()=>Kf[u.dimension]||[],[u.dimension]),S.useEffect(()=>{d(Q=>{const X=Kf[Q.dimension]||[],te=X.includes(Q.subdimension)?Q.subdimension:X[0]||"";return te===Q.subdimension?Q:{...Q,subdimension:te}})},[u.dimension]);const B=S.useCallback(()=>{const Q={id:crypto.randomUUID(),tipo:"abierta",enunciado:"Escribe aquí tu pregunta abierta",maxPalabras:RS};d(X=>({...X,preguntas:[...X.preguntas,Q]}))},[]),k=S.useCallback(()=>{const Q={id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:"Selecciona la(s) opción(es) que corresponda(n)",opciones:[{id:crypto.randomUUID(),text:"Opción 1"},{id:crypto.randomUUID(),text:"Opción 2"},{id:crypto.randomUUID(),text:"Opción 3"},{id:crypto.randomUUID(),text:"Opción 4"}],multiple:!0};d(X=>({...X,preguntas:[...X.preguntas,Q]}))},[]),I=S.useCallback((Q,X)=>{d(te=>({...te,preguntas:te.preguntas.map(ae=>ae.id===Q?{...ae,...X}:ae)}))},[]),E=S.useCallback(Q=>{d(X=>({...X,preguntas:X.preguntas.filter(te=>te.id!==Q)}))},[]),[N,j]=S.useState(!1),R=S.useCallback(async()=>{if(!(!u.aiTema||u.aiCantidad<1)){j(!0);try{const X=(await Ift(u.aiTema,u.aiCantidad)).map(te=>({id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:te.enunciado,opciones:te.opciones.slice(0,5).map(ae=>({id:crypto.randomUUID(),text:ae})),multiple:!0}));d(te=>({...te,preguntas:[...te.preguntas,...X]}))}finally{j(!1)}}},[u.aiTema,u.aiCantidad]),[D,O]=S.useState([]);S.useEffect(()=>{(async()=>{var te;if(!_)return;const X=[];for(const ae of b)if(ae.respuestas)for(const[se,oe]of Object.entries(ae.respuestas)){const ce=_.preguntas.find(ke=>ke.id===se);if(!ce||ce.tipo!=="abierta")continue;const me=oe;me.tipo==="abierta"&&((te=me.valorTexto)!=null&&te.trim())&&X.push(me.valorTexto.trim())}if(console.log("Respuestas abiertas encontradas:",X.length),X.length>0)try{const ae=await Fft(X,30);console.log("Keywords generadas:",ae),O(ae)}catch(ae){console.error("Error al extraer keywords:",ae),O([])}else O([])})()},[_,b]);const L=S.useMemo(()=>{if(!_)return{};const Q={};for(const X of _.preguntas)X.tipo==="seleccion_multiple"&&(Q[X.id]={},(X.opciones||[]).forEach(te=>Q[X.id][te]=0));for(const X of b)for(const[te,ae]of Object.entries(X.respuestas||{})){const se=ae;if((se==null?void 0:se.tipo)==="seleccion_multiple")for(const oe of se.seleccionados||[])Q[te]||(Q[te]={}),Q[te][oe]=(Q[te][oe]||0)+1}return Q},[_,b]),M=S.useCallback(Q=>Q.map(X=>X.tipo==="abierta"?X:{...X,opciones:X.opciones.map(te=>te.text)}),[]),J=S.useCallback(()=>d(tY()),[]),V=S.useCallback(async()=>{if(!u.titulo.trim())return alert("Debes ingresar un título");if(!u.creadorId)return alert("Debes seleccionar un creador");const Q={titulo:u.titulo,dimension:u.dimension,subdimension:u.subdimension,creadorId:u.creadorId,creadorNombre:u.creadorNombre,creadorPerfil:u.creadorPerfil,preguntas:M(u.preguntas)},X=await Eft(Q);J(),i(X),r("responder")},[u,M,J]),K=S.useCallback(async(Q,X)=>{var ae;if(window.confirm(`¿Eliminar "${X}"?
Se eliminarán la actividad, sus preguntas y respuestas. Esta acción no se puede deshacer.`)){if(await Cft(Q),s===Q){const se=n.filter(oe=>oe.id!==Q);i(((ae=se[0])==null?void 0:ae.id)||""),se.length||r("crear")}alert("Actividad eliminada.")}},[s,n]),z=S.useCallback(async()=>{if(!_||!b.length)return;const Q=new vr("p","mm","a4"),X=210,te=297,ae=25;let se=ae;const oe=Ke=>{Q.setFont("helvetica","normal"),Q.setFontSize(10),Q.text(`${Ke}`,X/2,te-10,{align:"center"})},ce=async()=>{try{const Ke=new Image;Ke.src="https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",await new Promise((Nt,Tt)=>{Ke.onload=Nt,Ke.onerror=Tt});const Ze=20,ft=Ke.height*Ze/Ke.width;Q.addImage(Ke,"PNG",(X-Ze)/2,10,Ze,ft),se=ae+ft+10}catch(Ke){console.error("Error al cargar la imagen:",Ke),se=ae}},me=async()=>(Q.addPage(),await ce(),oe(Q.internal.getNumberOfPages()),ae+20);await ce(),oe(1);const ke=(Ke,Ze)=>Q.splitTextToSize(Ke,Ze);Q.setFont("helvetica","bold"),Q.setFontSize(16),Q.text("Informe de Desarrollo Profesional Docente",X/2,se,{align:"center"}),se+=12,Q.setFontSize(14);const _e=X-2*ae,De=ke(_.titulo,_e);Q.text(De,X/2,se,{align:"center"}),se+=De.length*8+4,Q.setFont("helvetica","normal"),Q.setFontSize(10),Q.text(new Date().getFullYear().toString(),X/2,se,{align:"center"}),se+=15;const Ne=ae+5,fe=X-2*ae-10,Ie=ke(`Dimensión: ${_.dimension}`,fe),Me=ke(`Subdimensión: ${_.subdimension}`,fe),Xe=ke(`Creador: ${_.creadorNombre} (${_.creadorPerfil})`,fe),ye=`Total de respuestas: ${b.length}`,Fe=7,Re=(Ie.length+Me.length+Xe.length)*Fe+25;Q.setDrawColor(200,200,200),Q.setFillColor(248,250,252),Q.roundedRect(ae,se,X-2*ae,Re,3,3,"FD"),Q.setFont("helvetica","normal"),Q.setFontSize(11),se+=8;const Ge=(Ke,Ze)=>(Ke.forEach((ft,Nt)=>{Q.text(ft,Ne,Ze+Nt*Fe)}),Ze+Ke.length*Fe);se=Ge(Ie,se),se=Ge(Me,se),se=Ge(Xe,se),Q.text(ye,Ne,se+=Fe),se+=10;for(const[Ke,Ze]of _.preguntas.entries()){se>te-50&&(se=await me()),Q.setDrawColor(70,100,200),Q.setLineWidth(.5),Q.line(ae,se,X-ae,se),se+=5,Q.setFont("helvetica","bold"),Q.setFontSize(12);const ft=`Pregunta ${Ke+1}: ${Ze.enunciado}`,Nt=ke(ft,X-2*ae);if(Q.text(Nt,ae,se+=8),se+=Nt.length*7,Q.setFont("helvetica","normal"),Q.setFontSize(11),Ze.tipo==="seleccion_multiple"){const Tt=L[Ze.id]||{},St=b.length,Dt=Object.entries(Tt),gt=8,fr=5,zt=40,wr=X-2*ae-zt-25-10;for(const[Dr,vn]of Dt){se>te-30&&(se=await me());const Tr=St>0?Math.round(vn/St*100):0,Ga=vn/St*wr,nn=ke(Dr,zt);Q.text(nn,ae,se+6),Q.setFillColor(240,240,240),Q.rect(ae+zt+5,se,wr,gt,"F"),Q.setFillColor(100,100,200),Q.rect(ae+zt+5,se,Ga,gt,"F"),Q.text(`${Tr}%`,X-ae-5,se+6,{align:"right"}),se+=Math.max(nn.length*7,gt+fr)}se+=10}else{Q.text("Respuestas:",ae,se+=7);for(const Tt of b){const St=Tt.respuestas[Ze.id];if((St==null?void 0:St.tipo)==="abierta"&&St.valorTexto){se>te-50&&(se=await me());const Dt=X-2*ae-20,gt=ae+10;Q.setFont("helvetica","bold");const fr=ke(`${Tt.userNombre}:`,Dt);Q.text(fr,gt,se+=7),se+=(fr.length-1)*7,Q.setFont("helvetica","normal");const zt=ke(St.valorTexto,Dt-10),Mr=zt.length*7+6;Q.setFillColor(248,250,252),Q.rect(gt,se+2,Dt,Mr,"F"),Q.text(zt,gt+5,se+=7),se+=Mr+3}}}se+=10}if(D.length>0){se>te-80&&(se=await me()),Q.setDrawColor(70,100,200),Q.setLineWidth(.5),Q.line(ae,se,X-ae,se),se+=10,Q.setFont("helvetica","bold"),Q.setFontSize(14),Q.text("Análisis de Conceptos Clave",X/2,se,{align:"center"}),se+=15;const Ze=D.sort((Dt,gt)=>gt.score-Dt.score).slice(0,10),ft=16,Nt=10;let Tt=ae,St=se;Ze.forEach((Dt,gt)=>{const fr=Nt+Dt.score*(ft-Nt);Q.setFontSize(fr);const zt=Dt.keyword,Mr=Q.getTextWidth(zt);Tt+Mr>X-ae&&(Tt=ae,se=St+10,St=se),Q.setFillColor(240,240,250),Q.roundedRect(Tt-2,se-fr/2,Mr+8,fr+4,2,2,"F"),Q.setTextColor(70,100,200),Q.text(zt,Tt+2,se+fr/4),Q.setTextColor(0),Tt+=Mr+15,St=Math.max(St,se+fr/2+5)}),se=St+20}Q.save(`informe_${_.titulo.replace(/\s+/g,"_")}.pdf`)},[_,b,L,D]),G=S.useCallback(Q=>{const X=e==null?void 0:e.isAdmin,te=Q.creadorId===(e==null?void 0:e.uid);return w&&(X||te)},[e,w]),Y=S.useCallback((Q,X)=>{x(te=>({...te,[Q.id]:Q.tipo==="abierta"?{tipo:"abierta",valorTexto:X}:{tipo:"seleccion_multiple",seleccionados:X}}))},[]),ee=S.useCallback(async()=>{if(_){for(const Q of _.preguntas){const X=g[Q.id];if(X&&Q.tipo==="abierta"&&Q.maxPalabras){const te=rAe(X.valorTexto||"");if(te>Q.maxPalabras)return alert(`La respuesta a "${Q.enunciado}" supera el máximo de ${Q.maxPalabras} palabras (${te}).`)}}await Nft({activityId:_.id,userId:(e==null?void 0:e.uid)||"anon",userNombre:(e==null?void 0:e.displayName)||(e==null?void 0:e.name)||"Anónimo",respuestas:g}),x({}),alert("¡Respuestas enviadas!")}},[_,g,e]);return l.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 md:p-6 space-y-6",children:[l.jsxs("header",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(pee,{className:"w-7 h-7 text-indigo-600"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Desarrollo Profesional Docente"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Crea sesiones, responde y explora insights en tiempo real."})]})]}),l.jsx(Oft,{value:t,onChange:r,canCreate:w})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[l.jsx("aside",{className:"lg:col-span-4 xl:col-span-3",children:l.jsx(by,{title:"Actividades",icon:l.jsx(qv,{className:"w-5 h-5 text-indigo-600"}),children:l.jsx(Dft,{items:n,selectedId:s,onSelect:Q=>{i(Q),r("responder")},canDelete:G,onDelete:K})})}),l.jsxs("main",{className:"lg:col-span-8 xl:col-span-9 space-y-6",children:[t==="crear"&&w&&l.jsxs(by,{title:"Nueva actividad / sesión",icon:l.jsx(BQ,{className:"w-5 h-5 text-indigo-600"}),right:l.jsxs("button",{onClick:V,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[l.jsx(vm,{className:"w-4 h-4"}),"Guardar"]}),children:[l.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Título"}),l.jsx("input",{value:u.titulo,onChange:Q=>f({titulo:Q.target.value}),placeholder:"Ej: Comunidades de aprendizaje 1",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Área de trabajo (Dimensión PME)"}),l.jsx("select",{value:u.dimension,onChange:Q=>f({dimension:Q.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:Object.keys(Kf).map(Q=>l.jsx("option",{value:Q,children:Q},Q))}),l.jsx("select",{value:u.subdimension,onChange:Q=>f({subdimension:Q.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:(Kf[u.dimension]||[]).map(Q=>l.jsx("option",{value:Q,children:Q},Q))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Creador • Perfil"}),l.jsx("select",{value:u.creadorPerfil,onChange:Q=>f({creadorPerfil:Q.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:EQ.map(Q=>l.jsx("option",{value:Q,children:Q},Q))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Creador • Usuario"}),l.jsxs("select",{value:u.creadorId,onChange:Q=>{const X=Q.target.value,te=h.find(ae=>ae.id===X);f({creadorId:X,creadorNombre:(te==null?void 0:te.nombre)||""})},className:"w-full border rounded-lg px-3 py-2 bg-white",children:[l.jsx("option",{value:"",children:"Seleccione…"}),h.filter(Q=>Q.profile===u.creadorPerfil).map(Q=>l.jsx("option",{value:Q.id,children:Q.nombre},Q.id))]})]})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[l.jsx(gee,{className:"w-4 h-4"})," Preguntas"]}),l.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[l.jsxs("button",{onClick:B,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[l.jsx(Lu,{className:"w-4 h-4"})," Abierta"]}),l.jsxs("button",{onClick:k,className:"inline-flex items-center gap-2 bg-sky-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[l.jsx(Lu,{className:"w-4 h-4"})," Selección múltiple"]}),l.jsxs("div",{className:"ms-auto flex items-center gap-2",children:[l.jsxs("div",{className:"hidden md:inline-flex items-center gap-1 text-slate-500 text-xs",children:[l.jsx(zwe,{className:"w-4 h-4"})," IA"]}),l.jsx("input",{value:u.aiTema,onChange:Q=>f({aiTema:Q.target.value}),placeholder:"Tema para IA (p. ej., evaluación formativa)",className:"border rounded-lg px-3 py-1.5"}),l.jsx("input",{type:"number",min:1,max:10,value:u.aiCantidad,onChange:Q=>f({aiCantidad:parseInt(Q.target.value||"1")}),className:"w-20 border rounded-lg px-3 py-1.5"}),l.jsxs("button",{onClick:R,disabled:N||!u.aiTema,className:"inline-flex items-center gap-2 bg-fuchsia-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90 disabled:opacity-50",children:[l.jsx(yv,{className:"w-4 h-4"}),N?"Generando…":"Generar con IA"]})]})]}),l.jsxs("div",{className:"space-y-4",children:[u.preguntas.map((Q,X)=>l.jsx(Lft,{q:Q,index:X,onRemove:E,onPatch:I},Q.id)),u.preguntas.length===0&&l.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-2",children:[l.jsx(vo,{className:"w-4 h-4"}),"Añade preguntas abiertas o de selección múltiple (o usa IA)."]})]})]})]}),t==="responder"&&_&&l.jsx(by,{title:`Responder: ${_.titulo}`,icon:l.jsx(Zl,{className:"w-5 h-5 text-indigo-600"}),right:l.jsxs("button",{onClick:ee,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[l.jsx(vm,{className:"w-4 h-4"}),"Enviar respuestas"]}),children:l.jsxs("div",{className:"grid gap-4",children:[l.jsxs("div",{className:"grid md:grid-cols-3 gap-3 text-sm",children:[l.jsx(ZI,{pill:!0,label:"Dimensión",value:_.dimension}),l.jsx(ZI,{pill:!0,label:"Subdimensión",value:_.subdimension}),l.jsx(ZI,{pill:!0,label:"Creador",value:`${_.creadorNombre} • ${_.creadorPerfil}`})]}),_.preguntas.map(Q=>l.jsx(Mft,{q:Q,respuestas:g,onChange:Y},Q.id))]})}),t==="respuestas_individuales"&&_&&l.jsx(by,{title:`Respuestas individuales: ${_.titulo}`,icon:l.jsx(Zl,{className:"w-5 h-5 text-indigo-600"}),right:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:z,disabled:!b.length,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:b.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[l.jsx(cg,{className:"w-4 h-4"}),"Descargar informe"]}),l.jsxs("button",{onClick:()=>{c(""),r("dashboard")},className:"inline-flex items-center gap-2 bg-slate-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[l.jsx(Yf,{className:"w-4 h-4"}),"Volver al dashboard"]})]}),children:l.jsxs("div",{className:"grid md:grid-cols-12 gap-6",children:[l.jsx("div",{className:"md:col-span-4 lg:col-span-3",children:l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[l.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2",children:[l.jsx(qb,{className:"w-5 h-5 text-indigo-600"}),"Usuarios (",b.length,")"]}),l.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto pr-2",children:b.length>0?b.map(Q=>{var X;return l.jsxs("button",{onClick:()=>c(Q.userId),className:`w-full text-left p-3 rounded-lg transition-all duration-200 ${o===Q.userId?"bg-indigo-50 text-indigo-700 font-medium border border-indigo-200 shadow-sm":"hover:bg-slate-50 border border-transparent"}`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"p-1.5 bg-indigo-100 rounded-lg",children:l.jsx(qb,{className:"w-4 h-4 text-indigo-600"})}),l.jsx("span",{className:"font-medium",children:Q.userNombre})]}),l.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1.5",children:[l.jsx(Id,{className:"w-3.5 h-3.5"}),new Date(((X=Q.createdAt)==null?void 0:X.seconds)*1e3).toLocaleDateString()]})]},Q.userId)}):l.jsxs("div",{className:"text-center py-8 text-slate-500",children:[l.jsx(qb,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"No hay respuestas todavía"})]})})]})}),l.jsx("div",{className:"md:col-span-8 lg:col-span-9",children:o?l.jsxs(l.Fragment,{children:[l.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2 text-lg",children:[l.jsx(BQ,{className:"w-5 h-5 text-indigo-600"}),"Respuestas de:"," ",l.jsx("span",{className:"text-indigo-600",children:(P=b.find(Q=>Q.userId===o))==null?void 0:P.userNombre})]}),l.jsx("div",{className:"space-y-6",children:_.preguntas.map(Q=>{var ae;const X=b.find(se=>se.userId===o),te=(ae=X==null?void 0:X.respuestas)==null?void 0:ae[Q.id];return console.log("Respuesta encontrada:",{preguntaId:Q.id,tipo:Q.tipo,respuesta:te}),l.jsxs("div",{className:"bg-white p-6 border border-slate-200 rounded-xl shadow-sm",children:[l.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[l.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg shrink-0",children:Q.tipo==="abierta"?l.jsx(jQ,{className:"w-5 h-5 text-indigo-600"}):l.jsx(Zy,{className:"w-5 h-5 text-indigo-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-900",children:Q.enunciado}),l.jsx("p",{className:"text-sm text-slate-500 mt-1",children:Q.tipo==="abierta"?"Respuesta abierta":"Selección múltiple"})]})]}),Q.tipo==="abierta"?(te==null?void 0:te.tipo)==="abierta"&&te.valorTexto?l.jsx("div",{className:"mt-3 bg-slate-50 rounded-lg p-4",children:l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:te.valorTexto})}):l.jsx("p",{className:"text-slate-500 italic mt-3",children:"Sin respuesta"}):l.jsxs("div",{className:"space-y-2 mt-3",children:[(Q.opciones||[]).map(se=>{const ce=((te==null?void 0:te.tipo)==="seleccion_multiple"?te.seleccionados||[]:[]).includes(se.text);return l.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-all ${ce?"border-indigo-200 bg-indigo-50 text-indigo-700 shadow-sm":"border-slate-200 text-slate-500"}`,children:[l.jsx("div",{className:"flex-shrink-0",children:ce?l.jsx(vo,{className:"w-4 h-4 text-indigo-600"}):l.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 rounded-full"})}),l.jsx("span",{className:"text-sm",children:typeof se=="string"?se:se.text})]},typeof se=="string"?se:se.id)}),!te&&l.jsx("p",{className:"text-slate-500 italic mt-1 text-sm",children:"Sin respuesta"})]})]},Q.id)})})]}):l.jsx("div",{className:"text-center text-slate-500 py-12",children:"Selecciona un usuario para ver sus respuestas"})})]})}),t==="dashboard"&&_&&l.jsxs(by,{title:`Dashboard: ${_.titulo}`,icon:l.jsx(Tw,{className:"w-5 h-5 text-indigo-600"}),right:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>r("respuestas_individuales"),className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:[l.jsx(qb,{className:"w-4 h-4"}),"Ver respuestas individuales"]}),G(_)&&l.jsxs("button",{onClick:()=>K(_.id,_.titulo),className:"inline-flex items-center gap-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[l.jsx(tl,{className:"w-4 h-4"}),"Eliminar actividad"]})]}),children:[l.jsx("div",{className:"mb-6",children:l.jsxs("button",{onClick:z,disabled:!b.length,className:"w-full md:w-auto inline-flex items-center justify-center gap-2 bg-emerald-600 text-white px-6 py-3 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-lg font-medium",title:b.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[l.jsx(cg,{className:"w-5 h-5"}),"Descargar Informe Global"]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[l.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:l.jsx(qb,{className:"w-5 h-5 text-indigo-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-slate-500",children:"Total respuestas"}),l.jsx("p",{className:"text-xl font-semibold",children:b.length})]})]})}),l.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:l.jsx(Zy,{className:"w-5 h-5 text-emerald-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-slate-500",children:"Preguntas"}),l.jsx("p",{className:"text-xl font-semibold",children:_.preguntas.length})]})]})}),l.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:l.jsx(ug,{className:"w-5 h-5 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-slate-500",children:"Creador"}),l.jsx("p",{className:"text-sm font-medium truncate",children:_.creadorNombre})]})]})}),l.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:l.jsx(Id,{className:"w-5 h-5 text-purple-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-slate-500",children:"Fecha"}),l.jsx("p",{className:"text-sm font-medium",children:(()=>{const Q=_.createdAt,X=Q!=null&&Q.toDate?Q.toDate():Q!=null&&Q.seconds?new Date(Q.seconds*1e3):Q?new Date(Q):null;return X?X.toLocaleDateString():"No disponible"})()})]})]})})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(hee,{className:"w-5 h-5 text-indigo-600"}),l.jsx("h4",{className:"font-semibold",children:"Resultados de selección múltiple"})]}),l.jsxs("div",{className:"space-y-4",children:[_.preguntas.filter(Q=>Q.tipo==="seleccion_multiple").map(Q=>l.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[l.jsx("p",{className:"font-medium mb-3 text-slate-700",children:Q.enunciado}),Object.entries(L[Q.id]||{}).map(([X,te])=>l.jsx(Pft,{label:X,value:te},X)),l.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1",children:[l.jsx(Wv,{className:"w-4 h-4"}),"Total respuestas: ",b.length]})]},Q.id)),_.preguntas.filter(Q=>Q.tipo==="seleccion_multiple").length===0&&l.jsxs("div",{className:"text-center py-8 text-slate-500",children:[l.jsx(Zy,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"No hay preguntas de selección múltiple en esta actividad."})]})]})]}),l.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(Xbe,{className:"w-5 h-5 text-indigo-600"}),l.jsx("h4",{className:"font-semibold",children:"Conceptos clave (IA)"})]}),D.length?l.jsx("div",{className:"flex flex-wrap gap-2",children:D.map(Q=>l.jsx("span",{className:"rounded-full px-3 py-1.5 text-sm bg-gradient-to-r from-indigo-50 to-purple-50 text-indigo-700 border border-indigo-100 shadow-sm transition-transform hover:scale-105",style:{fontSize:`${12+Math.round(Q.score*18)}px`},children:Q.keyword},Q.keyword))}):l.jsxs("div",{className:"text-center py-8 text-slate-500",children:[l.jsx(jQ,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"Aún no hay suficientes respuestas abiertas para mostrar conceptos."})]})]})]})]})]})]})]})};var mE=e=>e.type==="checkbox",Qp=e=>e instanceof Date,gl=e=>e==null;const sAe=e=>typeof e=="object";var Ws=e=>!gl(e)&&!Array.isArray(e)&&sAe(e)&&!Qp(e),Qft=e=>Ws(e)&&e.target?mE(e.target)?e.target.checked:e.target.value:e,Hft=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Vft=(e,t)=>e.has(Hft(t)),zft=e=>{const t=e.constructor&&e.constructor.prototype;return Ws(t)&&t.hasOwnProperty("isPrototypeOf")},_M=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ja(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(_M&&(e instanceof Blob||n))&&(r||Ws(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!zft(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Ja(e[a]));else return e;return t}var rB=e=>/^\w*$/.test(e),Za=e=>e===void 0,nB=e=>Array.isArray(e)?e.filter(Boolean):[],NM=e=>nB(e.replace(/["|']|\]/g,"").split(/\.|\[/)),lr=(e,t,r)=>{if(!t||!Ws(e))return r;const n=(rB(t)?[t]:NM(t)).reduce((a,s)=>gl(a)?a:a[s],e);return Za(n)||n===e?Za(e[t])?r:e[t]:n},IA=e=>typeof e=="boolean",Fa=(e,t,r)=>{let n=-1;const a=rB(t)?[t]:NM(t),s=a.length,i=s-1;for(;++n<s;){const o=a[n];let c=r;if(n!==i){const u=e[o];c=Ws(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;e[o]=c,e=e[o]}};const rY={BLUR:"blur",FOCUS_OUT:"focusout"},Tu={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},zf={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},iAe=at.createContext(null);iAe.displayName="HookFormContext";const $ft=()=>at.useContext(iAe);var Gft=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(a,s,{get:()=>{const i=s;return t._proxyFormState[i]!==Tu.all&&(t._proxyFormState[i]=!n||Tu.all),e[i]}});return a};const oAe=typeof window<"u"?at.useLayoutEffect:at.useEffect;var VA=e=>typeof e=="string",Kft=(e,t,r,n,a)=>VA(e)?(n&&t.watch.add(e),lr(r,e,a)):Array.isArray(e)?e.map(s=>(n&&t.watch.add(s),lr(r,s))):(n&&(t.watchAll=!0),r),cD=e=>gl(e)||!sAe(e);function Q0(e,t,r=new WeakSet){if(cD(e)||cD(t))return e===t;if(Qp(e)&&Qp(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const s of n){const i=e[s];if(!a.includes(s))return!1;if(s!=="ref"){const o=t[s];if(Qp(i)&&Qp(o)||Ws(i)&&Ws(o)||Array.isArray(i)&&Array.isArray(o)?!Q0(i,o,r):i!==o)return!1}}return!0}var qft=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},Jl=e=>Array.isArray(e)?e:[e],nY=()=>{let e=[];return{get observers(){return e},next:a=>{for(const s of e)s.next&&s.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(s=>s!==a)}}),unsubscribe:()=>{e=[]}}},hl=e=>Ws(e)&&!Object.keys(e).length,SM=e=>e.type==="file",Cd=e=>typeof e=="function",LS=e=>{if(!_M)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},lAe=e=>e.type==="select-multiple",kM=e=>e.type==="radio",Wft=e=>kM(e)||mE(e),e6=e=>LS(e)&&e.isConnected;function Xft(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Za(e)?n++:e[t[n++]];return e}function Yft(e){for(const t in e)if(e.hasOwnProperty(t)&&!Za(e[t]))return!1;return!0}function Us(e,t){const r=Array.isArray(t)?t:rB(t)?[t]:NM(t),n=r.length===1?e:Xft(e,r),a=r.length-1,s=r[a];return n&&delete n[s],a!==0&&(Ws(n)&&hl(n)||Array.isArray(n)&&Yft(n))&&Us(e,r.slice(0,-1)),e}var cAe=e=>{for(const t in e)if(Cd(e[t]))return!0;return!1};function MS(e,t={}){const r=Array.isArray(e);if(Ws(e)||r)for(const n in e)Array.isArray(e[n])||Ws(e[n])&&!cAe(e[n])?(t[n]=Array.isArray(e[n])?[]:{},MS(e[n],t[n])):gl(e[n])||(t[n]=!0);return t}function uAe(e,t,r){const n=Array.isArray(e);if(Ws(e)||n)for(const a in e)Array.isArray(e[a])||Ws(e[a])&&!cAe(e[a])?Za(t)||cD(r[a])?r[a]=Array.isArray(e[a])?MS(e[a],[]):{...MS(e[a])}:uAe(e[a],gl(t)?{}:t[a],r[a]):r[a]=!Q0(e[a],t[a]);return r}var yy=(e,t)=>uAe(e,t,MS(t));const aY={value:!1,isValid:!1},sY={value:!0,isValid:!0};var dAe=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Za(e[0].attributes.value)?Za(e[0].value)||e[0].value===""?sY:{value:e[0].value,isValid:!0}:sY:aY}return aY},AAe=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Za(e)?e:t?e===""?NaN:e&&+e:r&&VA(e)?new Date(e):n?n(e):e;const iY={isValid:!1,value:null};var fAe=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,iY):iY;function oY(e){const t=e.ref;return SM(t)?t.files:kM(t)?fAe(e.refs).value:lAe(t)?[...t.selectedOptions].map(({value:r})=>r):mE(t)?dAe(e.refs).value:AAe(Za(t.value)?e.ref.value:t.value,e)}var Jft=(e,t,r,n)=>{const a={};for(const s of e){const i=lr(t,s);i&&Fa(a,s,i._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},US=e=>e instanceof RegExp,wy=e=>Za(e)?e:US(e)?e.source:Ws(e)?US(e.value)?e.value.source:e.value:e,hv=e=>({isOnSubmit:!e||e===Tu.onSubmit,isOnBlur:e===Tu.onBlur,isOnChange:e===Tu.onChange,isOnAll:e===Tu.all,isOnTouch:e===Tu.onTouched});const lY="AsyncFunction";var Zft=e=>!!e&&!!e.validate&&!!(Cd(e.validate)&&e.validate.constructor.name===lY||Ws(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===lY)),eht=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),uD=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const Lv=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const s=lr(e,a);if(s){const{_f:i,...o}=s;if(i){if(i.refs&&i.refs[0]&&t(i.refs[0],a)&&!n)return!0;if(i.ref&&t(i.ref,i.name)&&!n)return!0;if(Lv(o,t))break}else if(Ws(o)&&Lv(o,t))break}}};function cY(e,t,r){const n=lr(e,r);if(n||rB(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const s=a.join("."),i=lr(t,s),o=lr(e,s);if(i&&!Array.isArray(i)&&r!==s)return{name:r};if(o&&o.type)return{name:s,error:o};if(o&&o.root&&o.root.type)return{name:`${s}.root`,error:o.root};a.pop()}return{name:r}}var tht=(e,t,r,n)=>{r(e);const{name:a,...s}=e;return hl(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(i=>t[i]===(!n||Tu.all))},rht=(e,t,r)=>!e||!t||e===t||Jl(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),nht=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,aht=(e,t)=>!nB(lr(e,t)).length&&Us(e,t),hAe=(e,t,r)=>{const n=Jl(lr(e,r));return Fa(n,"root",t[r]),Fa(e,r,n),e},I5=e=>VA(e);function uY(e,t,r="validate"){if(I5(e)||Array.isArray(e)&&e.every(I5)||IA(e)&&!e)return{type:r,message:I5(e)?e:"",ref:t}}var $x=e=>Ws(e)&&!US(e)?e:{value:e,message:""},dD=async(e,t,r,n,a,s)=>{const{ref:i,refs:o,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:p,validate:g,name:x,valueAsNumber:b,mount:y}=e._f,w=lr(r,x);if(!y||t.has(x))return{};const _=o?o[0]:i,B=O=>{a&&_.reportValidity&&(_.setCustomValidity(IA(O)?"":O||""),_.reportValidity())},k={},I=kM(i),E=mE(i),N=I||E,j=(b||SM(i))&&Za(i.value)&&Za(w)||LS(i)&&i.value===""||w===""||Array.isArray(w)&&!w.length,R=qft.bind(null,x,n,k),D=(O,L,M,J=zf.maxLength,V=zf.minLength)=>{const K=O?L:M;k[x]={type:O?J:V,message:K,ref:i,...R(O?J:V,K)}};if(s?!Array.isArray(w)||!w.length:c&&(!N&&(j||gl(w))||IA(w)&&!w||E&&!dAe(o).isValid||I&&!fAe(o).isValid)){const{value:O,message:L}=I5(c)?{value:!!c,message:c}:$x(c);if(O&&(k[x]={type:zf.required,message:L,ref:_,...R(zf.required,L)},!n))return B(L),k}if(!j&&(!gl(f)||!gl(h))){let O,L;const M=$x(h),J=$x(f);if(!gl(w)&&!isNaN(w)){const V=i.valueAsNumber||w&&+w;gl(M.value)||(O=V>M.value),gl(J.value)||(L=V<J.value)}else{const V=i.valueAsDate||new Date(w),K=Y=>new Date(new Date().toDateString()+" "+Y),z=i.type=="time",G=i.type=="week";VA(M.value)&&w&&(O=z?K(w)>K(M.value):G?w>M.value:V>new Date(M.value)),VA(J.value)&&w&&(L=z?K(w)<K(J.value):G?w<J.value:V<new Date(J.value))}if((O||L)&&(D(!!O,M.message,J.message,zf.max,zf.min),!n))return B(k[x].message),k}if((u||d)&&!j&&(VA(w)||s&&Array.isArray(w))){const O=$x(u),L=$x(d),M=!gl(O.value)&&w.length>+O.value,J=!gl(L.value)&&w.length<+L.value;if((M||J)&&(D(M,O.message,L.message),!n))return B(k[x].message),k}if(p&&!j&&VA(w)){const{value:O,message:L}=$x(p);if(US(O)&&!w.match(O)&&(k[x]={type:zf.pattern,message:L,ref:i,...R(zf.pattern,L)},!n))return B(L),k}if(g){if(Cd(g)){const O=await g(w,r),L=uY(O,_);if(L&&(k[x]={...L,...R(zf.validate,L.message)},!n))return B(L.message),k}else if(Ws(g)){let O={};for(const L in g){if(!hl(O)&&!n)break;const M=uY(await g[L](w,r),_,L);M&&(O={...M,...R(L,M.message)},B(M.message),n&&(k[x]=O))}if(!hl(O)&&(k[x]={ref:_,...O},!n))return k}}return B(!0),k};const sht={mode:Tu.onSubmit,reValidateMode:Tu.onChange,shouldFocusError:!0};function iht(e={}){let t={...sht,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Cd(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=Ws(t.defaultValues)||Ws(t.values)?Ja(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:Ja(a),i={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:nY(),state:nY()},p=t.criteriaMode===Tu.all,g=ye=>Fe=>{clearTimeout(u),u=setTimeout(ye,Fe)},x=async ye=>{if(!t.disabled&&(d.isValid||f.isValid||ye)){const Fe=t.resolver?hl((await E()).errors):await j(n,!0);Fe!==r.isValid&&h.state.next({isValid:Fe})}},b=(ye,Fe)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((ye||Array.from(o.mount)).forEach(Re=>{Re&&(Fe?Fa(r.validatingFields,Re,Fe):Us(r.validatingFields,Re))}),h.state.next({validatingFields:r.validatingFields,isValidating:!hl(r.validatingFields)}))},y=(ye,Fe=[],Re,Ge,Ke=!0,Ze=!0)=>{if(Ge&&Re&&!t.disabled){if(i.action=!0,Ze&&Array.isArray(lr(n,ye))){const ft=Re(lr(n,ye),Ge.argA,Ge.argB);Ke&&Fa(n,ye,ft)}if(Ze&&Array.isArray(lr(r.errors,ye))){const ft=Re(lr(r.errors,ye),Ge.argA,Ge.argB);Ke&&Fa(r.errors,ye,ft),aht(r.errors,ye)}if((d.touchedFields||f.touchedFields)&&Ze&&Array.isArray(lr(r.touchedFields,ye))){const ft=Re(lr(r.touchedFields,ye),Ge.argA,Ge.argB);Ke&&Fa(r.touchedFields,ye,ft)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=yy(a,s)),h.state.next({name:ye,isDirty:D(ye,Fe),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Fa(s,ye,Fe)},w=(ye,Fe)=>{Fa(r.errors,ye,Fe),h.state.next({errors:r.errors})},_=ye=>{r.errors=ye,h.state.next({errors:r.errors,isValid:!1})},B=(ye,Fe,Re,Ge)=>{const Ke=lr(n,ye);if(Ke){const Ze=lr(s,ye,Za(Re)?lr(a,ye):Re);Za(Ze)||Ge&&Ge.defaultChecked||Fe?Fa(s,ye,Fe?Ze:oY(Ke._f)):M(ye,Ze),i.mount&&x()}},k=(ye,Fe,Re,Ge,Ke)=>{let Ze=!1,ft=!1;const Nt={name:ye};if(!t.disabled){if(!Re||Ge){(d.isDirty||f.isDirty)&&(ft=r.isDirty,r.isDirty=Nt.isDirty=D(),Ze=ft!==Nt.isDirty);const Tt=Q0(lr(a,ye),Fe);ft=!!lr(r.dirtyFields,ye),Tt?Us(r.dirtyFields,ye):Fa(r.dirtyFields,ye,!0),Nt.dirtyFields=r.dirtyFields,Ze=Ze||(d.dirtyFields||f.dirtyFields)&&ft!==!Tt}if(Re){const Tt=lr(r.touchedFields,ye);Tt||(Fa(r.touchedFields,ye,Re),Nt.touchedFields=r.touchedFields,Ze=Ze||(d.touchedFields||f.touchedFields)&&Tt!==Re)}Ze&&Ke&&h.state.next(Nt)}return Ze?Nt:{}},I=(ye,Fe,Re,Ge)=>{const Ke=lr(r.errors,ye),Ze=(d.isValid||f.isValid)&&IA(Fe)&&r.isValid!==Fe;if(t.delayError&&Re?(c=g(()=>w(ye,Re)),c(t.delayError)):(clearTimeout(u),c=null,Re?Fa(r.errors,ye,Re):Us(r.errors,ye)),(Re?!Q0(Ke,Re):Ke)||!hl(Ge)||Ze){const ft={...Ge,...Ze&&IA(Fe)?{isValid:Fe}:{},errors:r.errors,name:ye};r={...r,...ft},h.state.next(ft)}},E=async ye=>{b(ye,!0);const Fe=await t.resolver(s,t.context,Jft(ye||o.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return b(ye),Fe},N=async ye=>{const{errors:Fe}=await E(ye);if(ye)for(const Re of ye){const Ge=lr(Fe,Re);Ge?Fa(r.errors,Re,Ge):Us(r.errors,Re)}else r.errors=Fe;return Fe},j=async(ye,Fe,Re={valid:!0})=>{for(const Ge in ye){const Ke=ye[Ge];if(Ke){const{_f:Ze,...ft}=Ke;if(Ze){const Nt=o.array.has(Ze.name),Tt=Ke._f&&Zft(Ke._f);Tt&&d.validatingFields&&b([Ge],!0);const St=await dD(Ke,o.disabled,s,p,t.shouldUseNativeValidation&&!Fe,Nt);if(Tt&&d.validatingFields&&b([Ge]),St[Ze.name]&&(Re.valid=!1,Fe))break;!Fe&&(lr(St,Ze.name)?Nt?hAe(r.errors,St,Ze.name):Fa(r.errors,Ze.name,St[Ze.name]):Us(r.errors,Ze.name))}!hl(ft)&&await j(ft,Fe,Re)}}return Re.valid},R=()=>{for(const ye of o.unMount){const Fe=lr(n,ye);Fe&&(Fe._f.refs?Fe._f.refs.every(Re=>!e6(Re)):!e6(Fe._f.ref))&&se(ye)}o.unMount=new Set},D=(ye,Fe)=>!t.disabled&&(ye&&Fe&&Fa(s,ye,Fe),!Q0(Y(),a)),O=(ye,Fe,Re)=>Kft(ye,o,{...i.mount?s:Za(Fe)?a:VA(ye)?{[ye]:Fe}:Fe},Re,Fe),L=ye=>nB(lr(i.mount?s:a,ye,t.shouldUnregister?lr(a,ye,[]):[])),M=(ye,Fe,Re={})=>{const Ge=lr(n,ye);let Ke=Fe;if(Ge){const Ze=Ge._f;Ze&&(!Ze.disabled&&Fa(s,ye,AAe(Fe,Ze)),Ke=LS(Ze.ref)&&gl(Fe)?"":Fe,lAe(Ze.ref)?[...Ze.ref.options].forEach(ft=>ft.selected=Ke.includes(ft.value)):Ze.refs?mE(Ze.ref)?Ze.refs.forEach(ft=>{(!ft.defaultChecked||!ft.disabled)&&(Array.isArray(Ke)?ft.checked=!!Ke.find(Nt=>Nt===ft.value):ft.checked=Ke===ft.value||!!Ke)}):Ze.refs.forEach(ft=>ft.checked=ft.value===Ke):SM(Ze.ref)?Ze.ref.value="":(Ze.ref.value=Ke,Ze.ref.type||h.state.next({name:ye,values:Ja(s)})))}(Re.shouldDirty||Re.shouldTouch)&&k(ye,Ke,Re.shouldTouch,Re.shouldDirty,!0),Re.shouldValidate&&G(ye)},J=(ye,Fe,Re)=>{for(const Ge in Fe){if(!Fe.hasOwnProperty(Ge))return;const Ke=Fe[Ge],Ze=ye+"."+Ge,ft=lr(n,Ze);(o.array.has(ye)||Ws(Ke)||ft&&!ft._f)&&!Qp(Ke)?J(Ze,Ke,Re):M(Ze,Ke,Re)}},V=(ye,Fe,Re={})=>{const Ge=lr(n,ye),Ke=o.array.has(ye),Ze=Ja(Fe);Fa(s,ye,Ze),Ke?(h.array.next({name:ye,values:Ja(s)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&Re.shouldDirty&&h.state.next({name:ye,dirtyFields:yy(a,s),isDirty:D(ye,Ze)})):Ge&&!Ge._f&&!gl(Ze)?J(ye,Ze,Re):M(ye,Ze,Re),uD(ye,o)&&h.state.next({...r,name:ye}),h.state.next({name:i.mount?ye:void 0,values:Ja(s)})},K=async ye=>{i.mount=!0;const Fe=ye.target;let Re=Fe.name,Ge=!0;const Ke=lr(n,Re),Ze=Tt=>{Ge=Number.isNaN(Tt)||Qp(Tt)&&isNaN(Tt.getTime())||Q0(Tt,lr(s,Re,Tt))},ft=hv(t.mode),Nt=hv(t.reValidateMode);if(Ke){let Tt,St;const Dt=Fe.type?oY(Ke._f):Qft(ye),gt=ye.type===rY.BLUR||ye.type===rY.FOCUS_OUT,fr=!eht(Ke._f)&&!t.resolver&&!lr(r.errors,Re)&&!Ke._f.deps||nht(gt,lr(r.touchedFields,Re),r.isSubmitted,Nt,ft),zt=uD(Re,o,gt);Fa(s,Re,Dt),gt?(!Fe||!Fe.readOnly)&&(Ke._f.onBlur&&Ke._f.onBlur(ye),c&&c(0)):Ke._f.onChange&&Ke._f.onChange(ye);const Mr=k(Re,Dt,gt),wr=!hl(Mr)||zt;if(!gt&&h.state.next({name:Re,type:ye.type,values:Ja(s)}),fr)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?gt&&x():gt||x()),wr&&h.state.next({name:Re,...zt?{}:Mr});if(!gt&&zt&&h.state.next({...r}),t.resolver){const{errors:Dr}=await E([Re]);if(Ze(Dt),Ge){const vn=cY(r.errors,n,Re),Tr=cY(Dr,n,vn.name||Re);Tt=Tr.error,Re=Tr.name,St=hl(Dr)}}else b([Re],!0),Tt=(await dD(Ke,o.disabled,s,p,t.shouldUseNativeValidation))[Re],b([Re]),Ze(Dt),Ge&&(Tt?St=!1:(d.isValid||f.isValid)&&(St=await j(n,!0)));Ge&&(Ke._f.deps&&G(Ke._f.deps),I(Re,St,Tt,Mr))}},z=(ye,Fe)=>{if(lr(r.errors,Fe)&&ye.focus)return ye.focus(),1},G=async(ye,Fe={})=>{let Re,Ge;const Ke=Jl(ye);if(t.resolver){const Ze=await N(Za(ye)?ye:Ke);Re=hl(Ze),Ge=ye?!Ke.some(ft=>lr(Ze,ft)):Re}else ye?(Ge=(await Promise.all(Ke.map(async Ze=>{const ft=lr(n,Ze);return await j(ft&&ft._f?{[Ze]:ft}:ft)}))).every(Boolean),!(!Ge&&!r.isValid)&&x()):Ge=Re=await j(n);return h.state.next({...!VA(ye)||(d.isValid||f.isValid)&&Re!==r.isValid?{}:{name:ye},...t.resolver||!ye?{isValid:Re}:{},errors:r.errors}),Fe.shouldFocus&&!Ge&&Lv(n,z,ye?Ke:o.mount),Ge},Y=ye=>{const Fe={...i.mount?s:a};return Za(ye)?Fe:VA(ye)?lr(Fe,ye):ye.map(Re=>lr(Fe,Re))},ee=(ye,Fe)=>({invalid:!!lr((Fe||r).errors,ye),isDirty:!!lr((Fe||r).dirtyFields,ye),error:lr((Fe||r).errors,ye),isValidating:!!lr(r.validatingFields,ye),isTouched:!!lr((Fe||r).touchedFields,ye)}),P=ye=>{ye&&Jl(ye).forEach(Fe=>Us(r.errors,Fe)),h.state.next({errors:ye?r.errors:{}})},Q=(ye,Fe,Re)=>{const Ge=(lr(n,ye,{_f:{}})._f||{}).ref,Ke=lr(r.errors,ye)||{},{ref:Ze,message:ft,type:Nt,...Tt}=Ke;Fa(r.errors,ye,{...Tt,...Fe,ref:Ge}),h.state.next({name:ye,errors:r.errors,isValid:!1}),Re&&Re.shouldFocus&&Ge&&Ge.focus&&Ge.focus()},X=(ye,Fe)=>Cd(ye)?h.state.subscribe({next:Re=>"values"in Re&&ye(O(void 0,Fe),Re)}):O(ye,Fe,!0),te=ye=>h.state.subscribe({next:Fe=>{rht(ye.name,Fe.name,ye.exact)&&tht(Fe,ye.formState||d,Ie,ye.reRenderRoot)&&ye.callback({values:{...s},...r,...Fe,defaultValues:a})}}).unsubscribe,ae=ye=>(i.mount=!0,f={...f,...ye.formState},te({...ye,formState:f})),se=(ye,Fe={})=>{for(const Re of ye?Jl(ye):o.mount)o.mount.delete(Re),o.array.delete(Re),Fe.keepValue||(Us(n,Re),Us(s,Re)),!Fe.keepError&&Us(r.errors,Re),!Fe.keepDirty&&Us(r.dirtyFields,Re),!Fe.keepTouched&&Us(r.touchedFields,Re),!Fe.keepIsValidating&&Us(r.validatingFields,Re),!t.shouldUnregister&&!Fe.keepDefaultValue&&Us(a,Re);h.state.next({values:Ja(s)}),h.state.next({...r,...Fe.keepDirty?{isDirty:D()}:{}}),!Fe.keepIsValid&&x()},oe=({disabled:ye,name:Fe})=>{(IA(ye)&&i.mount||ye||o.disabled.has(Fe))&&(ye?o.disabled.add(Fe):o.disabled.delete(Fe))},ce=(ye,Fe={})=>{let Re=lr(n,ye);const Ge=IA(Fe.disabled)||IA(t.disabled);return Fa(n,ye,{...Re||{},_f:{...Re&&Re._f?Re._f:{ref:{name:ye}},name:ye,mount:!0,...Fe}}),o.mount.add(ye),Re?oe({disabled:IA(Fe.disabled)?Fe.disabled:t.disabled,name:ye}):B(ye,!0,Fe.value),{...Ge?{disabled:Fe.disabled||t.disabled}:{},...t.progressive?{required:!!Fe.required,min:wy(Fe.min),max:wy(Fe.max),minLength:wy(Fe.minLength),maxLength:wy(Fe.maxLength),pattern:wy(Fe.pattern)}:{},name:ye,onChange:K,onBlur:K,ref:Ke=>{if(Ke){ce(ye,Fe),Re=lr(n,ye);const Ze=Za(Ke.value)&&Ke.querySelectorAll&&Ke.querySelectorAll("input,select,textarea")[0]||Ke,ft=Wft(Ze),Nt=Re._f.refs||[];if(ft?Nt.find(Tt=>Tt===Ze):Ze===Re._f.ref)return;Fa(n,ye,{_f:{...Re._f,...ft?{refs:[...Nt.filter(e6),Ze,...Array.isArray(lr(a,ye))?[{}]:[]],ref:{type:Ze.type,name:ye}}:{ref:Ze}}}),B(ye,!1,void 0,Ze)}else Re=lr(n,ye,{}),Re._f&&(Re._f.mount=!1),(t.shouldUnregister||Fe.shouldUnregister)&&!(Vft(o.array,ye)&&i.action)&&o.unMount.add(ye)}}},me=()=>t.shouldFocusError&&Lv(n,z,o.mount),ke=ye=>{IA(ye)&&(h.state.next({disabled:ye}),Lv(n,(Fe,Re)=>{const Ge=lr(n,Re);Ge&&(Fe.disabled=Ge._f.disabled||ye,Array.isArray(Ge._f.refs)&&Ge._f.refs.forEach(Ke=>{Ke.disabled=Ge._f.disabled||ye}))},0,!1))},ne=(ye,Fe)=>async Re=>{let Ge;Re&&(Re.preventDefault&&Re.preventDefault(),Re.persist&&Re.persist());let Ke=Ja(s);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:Ze,values:ft}=await E();r.errors=Ze,Ke=Ja(ft)}else await j(n);if(o.disabled.size)for(const Ze of o.disabled)Us(Ke,Ze);if(Us(r.errors,"root"),hl(r.errors)){h.state.next({errors:{}});try{await ye(Ke,Re)}catch(Ze){Ge=Ze}}else Fe&&await Fe({...r.errors},Re),me(),setTimeout(me);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:hl(r.errors)&&!Ge,submitCount:r.submitCount+1,errors:r.errors}),Ge)throw Ge},_e=(ye,Fe={})=>{lr(n,ye)&&(Za(Fe.defaultValue)?V(ye,Ja(lr(a,ye))):(V(ye,Fe.defaultValue),Fa(a,ye,Ja(Fe.defaultValue))),Fe.keepTouched||Us(r.touchedFields,ye),Fe.keepDirty||(Us(r.dirtyFields,ye),r.isDirty=Fe.defaultValue?D(ye,Ja(lr(a,ye))):D()),Fe.keepError||(Us(r.errors,ye),d.isValid&&x()),h.state.next({...r}))},De=(ye,Fe={})=>{const Re=ye?Ja(ye):a,Ge=Ja(Re),Ke=hl(ye),Ze=Ke?a:Ge;if(Fe.keepDefaultValues||(a=Re),!Fe.keepValues){if(Fe.keepDirtyValues){const ft=new Set([...o.mount,...Object.keys(yy(a,s))]);for(const Nt of Array.from(ft))lr(r.dirtyFields,Nt)?Fa(Ze,Nt,lr(s,Nt)):V(Nt,lr(Ze,Nt))}else{if(_M&&Za(ye))for(const ft of o.mount){const Nt=lr(n,ft);if(Nt&&Nt._f){const Tt=Array.isArray(Nt._f.refs)?Nt._f.refs[0]:Nt._f.ref;if(LS(Tt)){const St=Tt.closest("form");if(St){St.reset();break}}}}if(Fe.keepFieldsRef)for(const ft of o.mount)V(ft,lr(Ze,ft));else n={}}s=t.shouldUnregister?Fe.keepDefaultValues?Ja(a):{}:Ja(Ze),h.array.next({values:{...Ze}}),h.state.next({values:{...Ze}})}o={mount:Fe.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!d.isValid||!!Fe.keepIsValid||!!Fe.keepDirtyValues,i.watch=!!t.shouldUnregister,h.state.next({submitCount:Fe.keepSubmitCount?r.submitCount:0,isDirty:Ke?!1:Fe.keepDirty?r.isDirty:!!(Fe.keepDefaultValues&&!Q0(ye,a)),isSubmitted:Fe.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Ke?{}:Fe.keepDirtyValues?Fe.keepDefaultValues&&s?yy(a,s):r.dirtyFields:Fe.keepDefaultValues&&ye?yy(a,ye):Fe.keepDirty?r.dirtyFields:{},touchedFields:Fe.keepTouched?r.touchedFields:{},errors:Fe.keepErrors?r.errors:{},isSubmitSuccessful:Fe.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},Ne=(ye,Fe)=>De(Cd(ye)?ye(s):ye,Fe),fe=(ye,Fe={})=>{const Re=lr(n,ye),Ge=Re&&Re._f;if(Ge){const Ke=Ge.refs?Ge.refs[0]:Ge.ref;Ke.focus&&(Ke.focus(),Fe.shouldSelect&&Cd(Ke.select)&&Ke.select())}},Ie=ye=>{r={...r,...ye}},Xe={control:{register:ce,unregister:se,getFieldState:ee,handleSubmit:ne,setError:Q,_subscribe:te,_runSchema:E,_focusError:me,_getWatch:O,_getDirty:D,_setValid:x,_setFieldArray:y,_setDisabledField:oe,_setErrors:_,_getFieldArray:L,_reset:De,_resetDefaultValues:()=>Cd(t.defaultValues)&&t.defaultValues().then(ye=>{Ne(ye,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:R,_disableForm:ke,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return s},get _state(){return i},set _state(ye){i=ye},get _defaultValues(){return a},get _names(){return o},set _names(ye){o=ye},get _formState(){return r},get _options(){return t},set _options(ye){t={...t,...ye}}},subscribe:ae,trigger:G,register:ce,handleSubmit:ne,watch:X,setValue:V,getValues:Y,reset:Ne,resetField:_e,clearErrors:P,unregister:se,setError:Q,setFocus:fe,getFieldState:ee};return{...Xe,formControl:Xe}}var k0=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},t6=(e,t,r={})=>r.shouldFocus||Za(r.shouldFocus)?r.focusName||`${e}.${Za(r.focusIndex)?t:r.focusIndex}.`:"",r6=(e,t)=>[...e,...Jl(t)],n6=e=>Array.isArray(e)?e.map(()=>{}):void 0;function a6(e,t,r){return[...e.slice(0,t),...Jl(r),...e.slice(t)]}var s6=(e,t,r)=>Array.isArray(e)?(Za(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],i6=(e,t)=>[...Jl(t),...Jl(e)];function oht(e,t){let r=0;const n=[...e];for(const a of t)n.splice(a-r,1),r++;return nB(n).length?n:[]}var o6=(e,t)=>Za(t)?[]:oht(e,Jl(t).sort((r,n)=>r-n)),l6=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},dY=(e,t,r)=>(e[t]=r,e);function lht(e){const t=$ft(),{control:r=t.control,name:n,keyName:a="id",shouldUnregister:s,rules:i}=e,[o,c]=at.useState(r._getFieldArray(n)),u=at.useRef(r._getFieldArray(n).map(k0)),d=at.useRef(o),f=at.useRef(!1);d.current=o,r._names.array.add(n),at.useMemo(()=>i&&r.register(n,i),[r,i,n]),oAe(()=>r._subjects.array.subscribe({next:({values:k,name:I})=>{if(I===n||!I){const E=lr(k,n);Array.isArray(E)&&(c(E),u.current=E.map(k0))}}}).unsubscribe,[r,n]);const h=at.useCallback(k=>{f.current=!0,r._setFieldArray(n,k)},[r,n]),p=(k,I)=>{const E=Jl(Ja(k)),N=r6(r._getFieldArray(n),E);r._names.focus=t6(n,N.length-1,I),u.current=r6(u.current,E.map(k0)),h(N),c(N),r._setFieldArray(n,N,r6,{argA:n6(k)})},g=(k,I)=>{const E=Jl(Ja(k)),N=i6(r._getFieldArray(n),E);r._names.focus=t6(n,0,I),u.current=i6(u.current,E.map(k0)),h(N),c(N),r._setFieldArray(n,N,i6,{argA:n6(k)})},x=k=>{const I=o6(r._getFieldArray(n),k);u.current=o6(u.current,k),h(I),c(I),!Array.isArray(lr(r._fields,n))&&Fa(r._fields,n,void 0),r._setFieldArray(n,I,o6,{argA:k})},b=(k,I,E)=>{const N=Jl(Ja(I)),j=a6(r._getFieldArray(n),k,N);r._names.focus=t6(n,k,E),u.current=a6(u.current,k,N.map(k0)),h(j),c(j),r._setFieldArray(n,j,a6,{argA:k,argB:n6(I)})},y=(k,I)=>{const E=r._getFieldArray(n);l6(E,k,I),l6(u.current,k,I),h(E),c(E),r._setFieldArray(n,E,l6,{argA:k,argB:I},!1)},w=(k,I)=>{const E=r._getFieldArray(n);s6(E,k,I),s6(u.current,k,I),h(E),c(E),r._setFieldArray(n,E,s6,{argA:k,argB:I},!1)},_=(k,I)=>{const E=Ja(I),N=dY(r._getFieldArray(n),k,E);u.current=[...N].map((j,R)=>!j||R===k?k0():u.current[R]),h(N),c([...N]),r._setFieldArray(n,N,dY,{argA:k,argB:E},!0,!1)},B=k=>{const I=Jl(Ja(k));u.current=I.map(k0),h([...I]),c([...I]),r._setFieldArray(n,[...I],E=>E,{},!0,!1)};return at.useEffect(()=>{if(r._state.action=!1,uD(n,r._names)&&r._subjects.state.next({...r._formState}),f.current&&(!hv(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!hv(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(k=>{const I=lr(k.errors,n),E=lr(r._formState.errors,n);(E?!I&&E.type||I&&(E.type!==I.type||E.message!==I.message):I&&I.type)&&(I?Fa(r._formState.errors,n,I):Us(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const k=lr(r._fields,n);k&&k._f&&!(hv(r._options.reValidateMode).isOnSubmit&&hv(r._options.mode).isOnSubmit)&&dD(k,r._names.disabled,r._formValues,r._options.criteriaMode===Tu.all,r._options.shouldUseNativeValidation,!0).then(I=>!hl(I)&&r._subjects.state.next({errors:hAe(r._formState.errors,I,n)}))}r._subjects.state.next({name:n,values:Ja(r._formValues)}),r._names.focus&&Lv(r._fields,(k,I)=>{if(r._names.focus&&I.startsWith(r._names.focus)&&k.focus)return k.focus(),1}),r._names.focus="",r._setValid(),f.current=!1},[o,n,r]),at.useEffect(()=>(!lr(r._formValues,n)&&r._setFieldArray(n),()=>{const k=(I,E)=>{const N=lr(r._fields,I);N&&N._f&&(N._f.mount=E)};r._options.shouldUnregister||s?r.unregister(n):k(n,!1)}),[n,r,a,s]),{swap:at.useCallback(y,[h,n,r]),move:at.useCallback(w,[h,n,r]),prepend:at.useCallback(g,[h,n,r]),append:at.useCallback(p,[h,n,r]),remove:at.useCallback(x,[h,n,r]),insert:at.useCallback(b,[h,n,r]),update:at.useCallback(_,[h,n,r]),replace:at.useCallback(B,[h,n,r]),fields:at.useMemo(()=>o.map((k,I)=>({...k,[a]:u.current[I]||k0()})),[o,a])}}function cht(e={}){const t=at.useRef(void 0),r=at.useRef(void 0),[n,a]=at.useState({isDirty:!1,isValidating:!1,isLoading:Cd(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Cd(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Cd(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:i,...o}=iht(e);t.current={...o,formState:n}}const s=t.current.control;return s._options=e,oAe(()=>{const i=s._subscribe({formState:s._proxyFormState,callback:()=>a({...s._formState}),reRenderRoot:!0});return a(o=>({...o,isReady:!0})),s._formState.isReady=!0,i},[s]),at.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),at.useEffect(()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)},[s,e.mode,e.reValidateMode]),at.useEffect(()=>{e.errors&&(s._setErrors(e.errors),s._focusError())},[s,e.errors]),at.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,e.shouldUnregister]),at.useEffect(()=>{if(s._proxyFormState.isDirty){const i=s._getDirty();i!==n.isDirty&&s._subjects.state.next({isDirty:i})}},[s,n.isDirty]),at.useEffect(()=>{e.values&&!Q0(e.values,r.current)?(s._reset(e.values,{keepFieldsRef:!0,...s._options.resetOptions}),r.current=e.values,a(i=>({...i}))):s._resetDefaultValues()},[s,e.values]),at.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),t.current.formState=Gft(n,s),t.current}const AD=kt(xn,"alternancias");async function uht(e){return(await Tn(AD,{...e,createdAt:Ni(),updatedAt:Ni()})).id}async function dht({especialidad:e,pageSize:t=10,lastDoc:r}){let n=$t(AD,Sr("createdAt","desc"),Td(t));e&&(n=$t(AD,Jr("especialidad","==",e),Sr("createdAt","desc"),Td(t))),r&&(n=$t(n,DZ(r)));const a=await ga(n);return{items:a.docs.map(i=>({id:i.id,...i.data()})),lastDoc:a.docs[a.docs.length-1]}}async function Aht(e,t){const r=dr(xn,"alternancias",e);await Vu(r,{...t,updatedAt:Ni()})}async function fht(e){const t=dr(xn,"alternancias",e);await za(t)}async function hht(e,t,r){const n=kt(xn,"alternancias",e,t);await Tn(n,{...r,createdAt:Ni()})}async function mht(e,t){const r=`alternancias/${e}/evidencias/${Date.now()}_${t.name}`,n=b4(oee,r);await iee(n,t);const a=await pP(n);return await hht(e,"evidencias",{url:a,path:r,nombre:t.name}),{url:a,path:r}}const pp=({title:e,icon:t,children:r,accent:n="indigo"})=>{const a={indigo:"border-indigo-200 bg-indigo-50/60",emerald:"border-emerald-200 bg-emerald-50/60",amber:"border-amber-200 bg-amber-50/60",sky:"border-sky-200 bg-sky-50/60",slate:"border-slate-200 bg-white/70"};return l.jsxs("div",{className:`rounded-2xl border ${a[n]} p-4 md:p-5 shadow-sm`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx("div",{className:"inline-flex items-center justify-center w-9 h-9 rounded-xl bg-white shadow-sm border border-slate-200",children:t}),l.jsx("h2",{className:"text-lg md:text-xl font-semibold text-slate-800",children:e})]}),r]})},NA=({children:e,hint:t})=>l.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[l.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),t&&l.jsx("span",{className:"text-[11px] text-slate-500",children:t})]}),V_=({children:e,tone:t="indigo"})=>{const r={indigo:"bg-indigo-100 text-indigo-700 border-indigo-200",emerald:"bg-emerald-100 text-emerald-700 border-emerald-200",amber:"bg-amber-100 text-amber-800 border-amber-200",sky:"bg-sky-100 text-sky-700 border-sky-200"};return l.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${r[t]}`,children:e})},gp=({title:e,onClick:t,tone:r="neutral",children:n,type:a="button",disabled:s})=>{const i={primary:"bg-indigo-600 hover:bg-indigo-700 text-white border border-indigo-700 shadow-sm",danger:"bg-rose-600 hover:bg-rose-700 text-white border border-rose-700 shadow-sm",warning:"bg-amber-500 hover:bg-amber-600 text-white border border-amber-600 shadow-sm",success:"bg-emerald-600 hover:bg-emerald-700 text-white border border-emerald-700 shadow-sm",neutral:"bg-white hover:bg-slate-50 text-slate-700 border border-slate-200 shadow-sm"};return l.jsx("button",{type:a,title:e,onClick:t,disabled:s,className:`inline-flex items-center gap-2 px-3 py-2 rounded-xl text-sm transition ${i[r]} disabled:opacity-60`,children:n})},pht=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState(null),[s,i]=S.useState(!1),{register:o,control:c,handleSubmit:u,reset:d,watch:f,setValue:h,formState:{isSubmitting:p}}=cht({defaultValues:{especialidad:"",curso:[],institucion:"",modulos:[],tipoAlternancia:[],fundamentacion:"",actividades:[],equipo:[],contrapartes:[],tutores:[],analisisCurricular:""}}),g=lht({control:c,name:"actividades"}),x=["COORDINACION_TP","SUBDIRECCION"],b=((e==null?void 0:e.role)||"").toString().trim().toUpperCase();if(!(!b||x.some(M=>b.includes(M))))return l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"rounded-xl border border-rose-200 bg-rose-50/60 p-4 text-rose-700 flex items-center gap-2",children:[l.jsx(_we,{className:"w-5 h-5"}),"Acceso no autorizado"]})});const w=M=>(M||"").replace(/\s*[-–]\s*\d+\s*horas?$/i,"").trim(),_=(M,J)=>{var V;return!M||!J?[]:((V=Ibe[M])==null?void 0:V[J])??[]},B=f("especialidad"),k=f("modulos")||[],I=S.useMemo(()=>B?Bbe[B]??[]:[],[B]),E=S.useMemo(()=>B?Tbe[B]??[]:[],[B]);S.useEffect(()=>{h("curso",[]),h("modulos",[]);const M=[...f("actividades")||[]].map(J=>({...J,modulo:"",oa:""}));h("actividades",M)},[B]),S.useEffect(()=>{const M=[...f("actividades")||[]].map(J=>J.modulo&&!k.includes(J.modulo)?{...J,modulo:"",oa:""}:J);h("actividades",M)},[k]);const N=async()=>{i(!0);const{items:M}=await dht({});r(M),i(!1)};S.useEffect(()=>{N()},[]);const j=async M=>{n?await Aht(n,{...M}):await uht({...M,createdBy:(e==null?void 0:e.email)||"desconocido"}),d(),a(null),await N()},R=M=>{const J=Array.isArray(M.curso)?M.curso:M.curso?[M.curso]:[],V=Array.isArray(M.modulos)?M.modulos.map(z=>w(z)):[],K=Array.isArray(M.actividades)?M.actividades.map(z=>({...z,modulo:z!=null&&z.modulo?w(z.modulo):"",oa:(z==null?void 0:z.oa)||""})):[];d({...M,curso:J,modulos:V,actividades:K}),a(M.id),window.scrollTo({top:0,behavior:"smooth"})},D=async M=>{confirm("¿Eliminar esta alternancia?")&&(await fht(M),await N())},O=async(M,J)=>{await mht(M,J),alert("Evidencia subida correctamente")},L=M=>{const J=Array.from(M.currentTarget.selectedOptions).map(V=>V.value);h("curso",J,{shouldDirty:!0})};return l.jsxs("div",{className:"p-4 md:p-6",children:[l.jsx("div",{className:"mb-6 rounded-2xl bg-gradient-to-r from-indigo-600 via-sky-600 to-emerald-600 text-white p-5 shadow-sm",children:l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-11 h-11 rounded-xl bg-white/10 flex items-center justify-center",children:l.jsx(fee,{className:"w-6 h-6"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl md:text-2xl font-semibold",children:"Formación por Alternancia"}),l.jsx("p",{className:"text-white/90 text-sm",children:"Registra planes, actividades y evidencias. Interfaz moderna, responsiva y con íconos."})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(gp,{title:"Nuevo plan",onClick:()=>{d(),a(null)},tone:"neutral",children:[l.jsx(aN,{className:"w-4 h-4"}),"Limpiar"]}),l.jsxs(gp,{title:"Guardar",type:"submit",tone:"success",disabled:p,children:[p?l.jsx(z0,{className:"w-4 h-4 animate-spin"}):l.jsx(vm,{className:"w-4 h-4"}),"Guardar"]})]})]})}),l.jsx(pp,{title:"Planes guardados",icon:l.jsx(qv,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:s?l.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[l.jsx(z0,{className:"w-4 h-4 animate-spin"})," Cargando…"]}):t.length===0?l.jsx("p",{className:"text-slate-500 text-sm",children:"No hay alternancias registradas"}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:t.map(M=>l.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm hover:shadow-md transition",children:l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-semibold",children:[l.jsx(Lj,{className:"w-4 h-4 text-indigo-600"}),M.especialidad]}),l.jsxs("div",{className:"text-sm text-slate-600 flex flex-wrap gap-2",children:[l.jsx(V_,{tone:"indigo",children:Array.isArray(M.curso)?M.curso.join(", "):M.curso}),l.jsx(V_,{tone:"sky",children:M.institucion}),(Array.isArray(M.tipoAlternancia)?M.tipoAlternancia:[]).slice(0,2).map(J=>l.jsx(V_,{tone:"emerald",children:J},J))]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-1 rounded-xl bg-amber-500 hover:bg-amber-600 text-white text-xs px-3 py-2 transition",children:[l.jsx(vee,{className:"w-4 h-4"}),l.jsx("input",{type:"file",className:"hidden",onChange:J=>J.target.files&&O(M.id,J.target.files[0])}),"Evidencia"]}),l.jsxs(gp,{title:"Editar",onClick:()=>R(M),children:[l.jsx(M6,{className:"w-4 h-4"})," Editar"]}),l.jsxs(gp,{title:"Eliminar",onClick:()=>D(M.id),tone:"danger",children:[l.jsx(tl,{className:"w-4 h-4"})," Eliminar"]})]})]})},M.id))})}),l.jsxs("form",{onSubmit:u(j),className:"mt-6 space-y-5",children:[l.jsx(pp,{title:"Contexto de la Alternancia",icon:l.jsx(eN,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx(NA,{children:"Especialidad"}),l.jsxs("div",{className:"relative",children:[l.jsx(Lj,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),l.jsxs("select",{...o("especialidad"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-indigo-100",children:[l.jsx("option",{value:"",children:"Selecciona…"}),Sbe.map(M=>l.jsx("option",{value:M,children:M},M))]})]})]}),l.jsxs("div",{children:[l.jsx(NA,{children:"Institución"}),l.jsxs("div",{className:"relative",children:[l.jsx(eN,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),l.jsxs("select",{...o("institucion"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-sky-100",children:[l.jsx("option",{value:"",children:"Selecciona…"}),kbe.map(M=>l.jsx("option",{value:M,children:M},M))]})]})]}),l.jsxs("div",{children:[l.jsx(NA,{hint:"Ctrl/Cmd + clic para seleccionar múltiples cursos.",children:"Cursos"}),l.jsxs("div",{className:"relative",children:[l.jsx(Zl,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),l.jsx("select",{multiple:!0,size:4,...o("curso"),onChange:L,className:"w-full min-h-[120px] rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-emerald-100 disabled:opacity-50",disabled:!B,children:B?I.map(M=>l.jsx("option",{value:M,children:M},M)):l.jsx("option",{value:"",children:"Elige especialidad primero"})})]}),l.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:(f("curso")||[]).map(M=>l.jsx(V_,{tone:"sky",children:M},M))})]})]})}),l.jsx(pp,{title:"Módulos implicados",icon:l.jsx(pee,{className:"w-5 h-5 text-emerald-700"}),accent:"emerald",children:B?l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:E.map(M=>l.jsxs("label",{className:"flex items-start gap-2 rounded-xl border border-emerald-200 bg-white p-3 shadow-sm hover:shadow transition",children:[l.jsx("input",{type:"checkbox",value:M,className:"mt-1 accent-emerald-600",...o("modulos")}),l.jsx("span",{className:"text-sm text-slate-700",children:M})]},M))}):l.jsx("p",{className:"text-sm text-slate-500",children:"Elige una especialidad para ver los módulos."})}),l.jsx(pp,{title:"Tipo de Alternancia",icon:l.jsx(Zy,{className:"w-5 h-5 text-amber-700"}),accent:"amber",children:l.jsx("div",{className:"flex gap-3 flex-wrap",children:jbe.map(M=>l.jsxs("label",{className:"inline-flex items-center gap-2 rounded-full border border-amber-200 bg-white px-3 py-2 text-sm shadow-sm hover:shadow transition",children:[l.jsx("input",{type:"checkbox",value:M,className:"accent-amber-600",...o("tipoAlternancia")}),l.jsx("span",{className:"text-slate-700",children:M})]},M))})}),l.jsx(pp,{title:"Fundamentación técnico‑pedagógica",icon:l.jsx(Kbe,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:l.jsx("textarea",{...o("fundamentacion"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Describe brevemente la finalidad pedagógica, vínculos curriculares y el aporte para los estudiantes."})}),l.jsx(pp,{title:"Plan de actividades",icon:l.jsx(qv,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:l.jsxs("div",{className:"space-y-3",children:[g.fields.map((M,J)=>{const V=f(`actividades.${J}.modulo`)||"",K=_(B,V);return l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[l.jsxs("div",{className:"relative",children:[l.jsx(NA,{children:"Fecha"}),l.jsx(Id,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),l.jsx("input",{type:"date",placeholder:"Fecha",...o(`actividades.${J}.fecha`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),l.jsxs("div",{children:[l.jsx(NA,{children:"Tipo"}),l.jsx("input",{placeholder:"Pasantía, visita, taller...",...o(`actividades.${J}.tipo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),l.jsxs("div",{children:[l.jsx(NA,{children:"Actividad"}),l.jsx("input",{placeholder:"Descripción breve",...o(`actividades.${J}.actividad`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),l.jsxs("div",{className:"relative",children:[l.jsx(NA,{children:"Lugar"}),l.jsx(rN,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),l.jsx("input",{placeholder:"Empresa/IP/CFT/Lab",...o(`actividades.${J}.lugar`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),l.jsxs("div",{className:"relative",children:[l.jsx(NA,{children:"Evidencias"}),l.jsx(_ye,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),l.jsx("input",{placeholder:"Informe, fotos, lista asistencia...",...o(`actividades.${J}.evidencias`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]})]}),l.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx(NA,{children:"Módulo"}),l.jsxs("select",{...o(`actividades.${J}.modulo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!B||k.length===0,children:[l.jsx("option",{value:"",children:!B&&"Elige especialidad arriba"||k.length===0&&"Selecciona módulos arriba"||"Selecciona…"}),k.map(z=>l.jsx("option",{value:z,children:z},z))]})]}),l.jsxs("div",{children:[l.jsx(NA,{children:"Objetivo de Aprendizaje (OA)"}),l.jsxs("select",{...o(`actividades.${J}.oa`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!V||K.length===0,children:[l.jsx("option",{value:"",children:V?K.length===0?"Sin OA definidos para este módulo":"Selecciona…":"Selecciona módulo primero"}),K.map(z=>l.jsx("option",{value:z,children:z},z))]})]})]}),l.jsx("div",{className:"mt-3 flex justify-end",children:l.jsxs(gp,{title:"Eliminar fila",onClick:()=>g.remove(J),tone:"danger",children:[l.jsx(tl,{className:"w-4 h-4"}),"Eliminar actividad"]})})]},M.id)}),l.jsxs(gp,{title:"Agregar actividad",onClick:()=>g.append({fecha:"",tipo:"",actividad:"",lugar:"",evidencias:"",modulo:"",oa:""}),tone:"primary",children:[l.jsx(Lu,{className:"w-4 h-4"})," Agregar actividad"]})]})}),l.jsx(pp,{title:"Análisis Curricular",icon:l.jsx(Lj,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:l.jsx("textarea",{...o("analisisCurricular"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Módulos implicados + OA/AE asociados + distribución de horas (liceo/otro lugar)."})}),l.jsx("div",{className:"flex items-center justify-end gap-2",children:l.jsxs(gp,{title:"Guardar",type:"submit",tone:"success",disabled:p,children:[p?l.jsx(z0,{className:"w-4 h-4 animate-spin"}):l.jsx(vo,{className:"w-4 h-4"}),"Guardar"]})})]})]})},ght=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},xht=({currentUser:e,onLogout:t,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,unreadMessagesCount:s,refreshUnreadCount:i})=>{const o=e.profile,c=S.useMemo(()=>{const B=Ebe[o]||[];return o!==Wt.ESTUDIANTE?B:B.filter(k=>{if(k.name==="Asistencia a Empresa"){const I=ght(e.curso||"");return I.startsWith("3º")||I.startsWith("4º")}return!0})},[o,e.curso]),[u,d]=S.useState(null),[f,h]=S.useState(!1),[p,g]=S.useState(!1),x=S.useRef([]);S.useEffect(()=>{c&&c.length>0?d(c[0]):d(null)},[o,c]);const b=S.useCallback(B=>{d(B),window.innerWidth<768&&h(!1)},[]),y=S.useCallback(B=>{const k=c.find(I=>I.name===B);k&&b(k)},[c,b]),w=()=>l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center h-20 px-4 border-b border-white/10 bg-[#121926]",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-400 flex items-center justify-center shadow-inner",children:l.jsx("span",{className:"text-slate-900 inline-flex items-center justify-center",children:l.jsx(obe,{className:"w-5 h-5"})})}),!p&&l.jsx("span",{className:"text-white font-extrabold text-xl tracking-tight",children:"Gestión LIR"})]}),l.jsx("button",{type:"button",onClick:()=>g(B=>!B),className:"ml-auto w-9 h-9 inline-flex items-center justify-center rounded-full hover:bg-white/10 transition",title:p?"Expandir":"Colapsar",children:p?l.jsx(bP,{className:"w-5 h-5 text-slate-200"}):l.jsx(Iw,{className:"w-5 h-5 text-slate-200"})})]}),l.jsx("nav",{className:"flex-1 overflow-y-auto p-3 bg-[#1B2433]",onKeyDown:B=>{var I,E,N;const k=x.current.findIndex(j=>j===document.activeElement);if(B.key==="ArrowDown"){B.preventDefault();const j=Math.min(k===-1?0:k+1,x.current.length-1);(I=x.current[j])==null||I.focus()}else if(B.key==="ArrowUp"){B.preventDefault();const j=Math.max(k===-1?0:k-1,0);(E=x.current[j])==null||E.focus()}else B.key==="Enter"&&k>=0&&((N=x.current[k])==null||N.click())},children:l.jsx("div",{className:"space-y-1",children:c.map((B,k)=>{const I=(u==null?void 0:u.name)===B.name;return l.jsxs("button",{ref:E=>x.current[k]=E,onClick:()=>b(B),className:`w-full group flex items-center ${p?"justify-center px-2":"justify-start px-4"} gap-3 py-3 rounded-2xl transition-all
                  ${I?"bg-amber-400 text-slate-900 font-bold shadow-md":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:p?B.name:void 0,children:[l.jsx("span",{className:`shrink-0 ${I?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:B.icon}),!p&&l.jsx("span",{className:"text-[1.05rem] leading-tight whitespace-normal break-words text-left",children:B.name})]},B.name)})})})]}),_=()=>{if(!u)return l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full flex items-center justify-center",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Seleccione un módulo del menú para comenzar."})});if(u.name==="Calendario Académico")return l.jsx(r8e,{profile:o});if(u.name==="Muro de Anuncios")return l.jsx(o8e,{currentUser:e});if(u.name==="Mensajería Interna")return l.jsx(HYe,{currentUser:e,refreshUnreadCount:i});if(u.name==="Generador de Actas")return l.jsx(m8e,{});if(u.name==="Desarrollo Profesional")return l.jsx(Uft,{currentUser:e});if(o===Wt.SUBDIRECCION){if(u.name==="Dashboard")return l.jsx(E2e,{currentUser:e});if(u.name==="Administración")return l.jsx(MWe,{});if(u.name==="Seguimiento Curricular")return l.jsx(Tst,{currentUser:e});if(u.name==="Acompañamiento docente")return l.jsx(OYe,{currentUser:e});if(u.name==="Análisis Taxonómico")return l.jsx(Rst,{currentUser:e});if(u.name==="Interdisciplinario")return l.jsx(bq,{});if(u.name==="Registro de inasistencias y reemplazos docentes")return l.jsx(x2e,{currentUser:e});if(u.name==="Crear horarios")return l.jsx(iEe,{});if(u.name==="Seguimiento de acciones pedagógicas")return l.jsx(DRe,{});if(u.name==="Inclusión")return l.jsx(mq,{currentUser:e})}if(o===Wt.PROFESORADO){if(u.name==="Planificación")return l.jsx(qRe,{currentUser:e});if(u.name==="Mis Acompañamientos")return l.jsx(ust,{currentUser:e});if(u.name==="Recursos de Aprendizaje")return l.jsx(Xat,{});if(u.name==="Análisis Taxonómico")return l.jsx(AnalisisTaxonómico,{currentUser:e});if(u.name==="Interdisciplinario")return l.jsx(bq,{});if(u.name==="Inclusión")return l.jsx(mq,{currentUser:e});if(u.name==="Actividades Remotas")return l.jsx(mXe,{});if(u.name==="Evaluación de Aprendizajes")return l.jsx(pMe,{});if(u.name==="Evaluaciones Formativas")return l.jsx(mYe,{currentUser:e})}if(o===Wt.COORDINACION_TP){if(u.name==="Seguimiento Dual")return l.jsx(WWe,{});if(u.name==="Asistencia Dual")return l.jsx(ZXe,{});if(u.name==="Pañol")return l.jsx(cJe,{});if(u.name==="Gestión de Empresas")return l.jsx(bft,{});if(u.name==="Alternancia TP")return l.jsx(pht,{})}if(o===Wt.ESTUDIANTE){if(u.name==="Auto-aprendizaje")return l.jsx(jXe,{currentUser:e});if(u.name==="Evaluación Formativa")return l.jsx(nst,{currentUser:e});if(u.name==="Tareas Interdisciplinarias")return l.jsx(lst,{currentUser:e});if(u.name==="Asistencia a Empresa")return l.jsx($Xe,{currentUser:e})}return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:u.name}),l.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:l.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",l.jsx("span",{className:"font-semibold",children:u.name}),"."]})})]})};return l.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-b from-slate-100 to-slate-50 dark:from-slate-950 dark:to-slate-900",children:[l.jsx(Jwe,{currentUser:e,onLogout:t,onNavigate:y,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,toggleSidebar:()=>h(B=>!B),unreadMessagesCount:s,refreshUnreadCount:i}),l.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f&&l.jsx("div",{onClick:()=>h(!1),className:"fixed inset-0 bg-black/40 backdrop-blur-[1px] z-20 md:hidden"}),l.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 ${p?"w-16":"w-72"} 
          bg-[#0F1724] text-white flex flex-col transform md:translate-x-0
          ${f?"translate-x-0":"-translate-x-full"} md:translate-x-0
          transition-all duration-300 ease-in-out border-r border-white/10`,children:l.jsx(w,{})}),l.jsx("main",{className:"flex-1 overflow-y-auto",children:l.jsxs("div",{className:"relative p-5 md:p-8 space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{className:"md:hidden inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow hover:shadow-md transition",onClick:()=>h(!0),title:"Abrir menú",children:l.jsx(awe,{className:"w-5 h-5"})}),(u==null?void 0:u.icon)&&l.jsx("span",{className:"inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow",children:u.icon}),l.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-slate-800 dark:text-slate-100",children:(u==null?void 0:u.name)??"Dashboard"})]})}),l.jsx("div",{className:"min-h-[60vh]",children:_()})]})})]})]})},vht=({onSelectProfile:e,isAdminView:t=!1})=>l.jsxs("div",{className:`relative flex flex-col items-center justify-center min-h-screen p-6 overflow-hidden
                    bg-gradient-to-br from-blue-50 via-blue-100 to-yellow-50
                    dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[l.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[l.jsx("div",{className:`absolute -top-24 -left-16 h-72 w-72 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-yellow-300 to-yellow-200
                        dark:from-yellow-400/20 dark:to-yellow-500/20`}),l.jsx("div",{className:`absolute top-40 -right-10 h-80 w-80 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-blue-300 to-sky-300
                        dark:from-blue-500/20 dark:to-sky-500/20`}),l.jsx("div",{className:`absolute bottom-0 left-1/2 -translate-x-1/2 h-96 w-96 rounded-full blur-3xl opacity-30
                        bg-gradient-to-tr from-sky-200 to-blue-200
                        dark:from-sky-500/20 dark:to-blue-500/20`})]}),l.jsxs("div",{className:"text-center mb-10",children:[l.jsx("div",{className:"mb-4 flex justify-center items-center",children:l.jsx(vP,{})}),l.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-100 mt-2 drop-shadow-sm",children:"Gestión Pedagógica LIR"}),l.jsx("p",{className:"text-slate-700/80 dark:text-slate-300/80 mt-2 text-lg",children:t?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:wbe.map(r=>l.jsxs("button",{onClick:()=>e(r.id),className:`group relative overflow-hidden p-8 rounded-2xl
                       bg-white/10 dark:bg-white/5
                       backdrop-blur-xl border border-white/30 dark:border-white/10
                       shadow-lg hover:shadow-2xl hover:-translate-y-1.5
                       transition-all duration-300 ease-out
                       focus:outline-none focus:ring-4 focus:ring-yellow-400/40`,children:[l.jsx("div",{className:`pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100
                            transition-opacity duration-300
                            bg-gradient-to-br from-white/40 to-transparent`}),l.jsx("div",{className:"text-slate-800 dark:text-slate-200 group-hover:text-yellow-500 transition-colors duration-300",children:r.icon}),l.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-900 dark:text-slate-100 drop-shadow-[0_1px_0_rgba(0,0,0,0.1)]",children:r.label})]},r.id))}),l.jsxs("footer",{className:"absolute bottom-4 text-slate-600 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),bht=()=>{const[e,t]=S.useState(null),[r,n]=S.useState(null),[a,s]=S.useState(!0),[i,o]=S.useState(null),[c,u]=S.useState(!1),[d,f]=S.useState(null);S.useEffect(()=>{const w=KY(O2,async _=>{if(t(_),_)try{const B=await cee(_.email);B?(n(B),B.profile===Wt.SUBDIRECCION&&u(!0)):(o("Usuario no encontrado en la base de datos. Contacte al administrador."),await Ij())}catch{o("Error al conectar con la base de datos."),await Ij()}else n(null),f(null),u(!1),o(null);s(!1)});return()=>w()},[]);const h=async(w,_)=>{if(o(null),!w.trim()||!_.trim()){o("Por favor ingrese email y contraseña");return}try{await abe(w.trim(),_)}catch(B){switch(B.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":o("Credenciales inválidas. Verifique su email y contraseña.");break;case"auth/too-many-requests":o("Demasiados intentos fallidos. Intente más tarde.");break;case"auth/network-request-failed":o("Error de conexión. Verifique su internet.");break;default:o("Ocurrió un error al intentar iniciar sesión.")}}},p=async w=>{try{await sbe(w)}catch(_){console.error("Error al enviar email de recuperación:",_)}},g=w=>{f(w),u(!1)},x=()=>{u(!0),f(null)},b=async()=>{try{await Ij()}catch(w){console.error("Error al cerrar sesión:",w)}};if(a)return l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"mb-4 flex justify-center items-center",children:l.jsx(vP,{})}),l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicación..."})]})});if(!e||!r)return l.jsx(Fbe,{onLoginAttempt:h,onForgotPasswordRequest:p,error:i});if(c&&r.profile===Wt.SUBDIRECCION)return l.jsx(vht,{onSelectProfile:g,isAdminView:!0});const y=d||r.profile;return l.jsx(xht,{currentUser:{...r,profile:y},onLogout:b,onChangeProfile:r.profile===Wt.SUBDIRECCION?x:void 0,canChangeProfile:r.profile===Wt.SUBDIRECCION})},mAe=document.getElementById("root");if(!mAe)throw new Error("Could not find root element to mount to");const yht=Ife.createRoot(mAe);yht.render(l.jsx(at.StrictMode,{children:l.jsx(bht,{})}));export{ma as _,Eht as c,Cl as g};
