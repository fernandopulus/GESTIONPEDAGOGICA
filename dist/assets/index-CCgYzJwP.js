var Q1e=Object.defineProperty;var V1e=(e,t,r)=>t in e?Q1e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var CI=(e,t,r)=>V1e(e,typeof t!="symbol"?t+"":t,r);function $1e(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var wSt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function z1e(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var EI={exports:{}},Iw={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y$;function G1e(){if(y$)return Iw;y$=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,s){var o=null;if(s!==void 0&&(o=""+s),a.key!==void 0&&(o=""+a.key),"key"in a){s={};for(var l in a)l!=="key"&&(s[l]=a[l])}else s=a;return a=s.ref,{$$typeof:e,type:n,key:o,ref:a!==void 0?a:null,props:s}}return Iw.Fragment=t,Iw.jsx=r,Iw.jsxs=r,Iw}var w$;function q1e(){return w$||(w$=1,EI.exports=G1e()),EI.exports}var i=q1e(),jI={exports:{}},fn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N$;function K1e(){if(N$)return fn;N$=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function A(U){return U===null||typeof U!="object"?null:(U=f&&U[f]||U["@@iterator"],typeof U=="function"?U:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,x={};function v(U,Y,R){this.props=U,this.context=Y,this.refs=x,this.updater=R||m}v.prototype.isReactComponent={},v.prototype.setState=function(U,Y){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Y,"setState")},v.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function y(){}y.prototype=v.prototype;function N(U,Y,R){this.props=U,this.context=Y,this.refs=x,this.updater=R||m}var C=N.prototype=new y;C.constructor=N,g(C,v.prototype),C.isPureReactComponent=!0;var _=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function T(U,Y,R,D,W,J){return R=J.ref,{$$typeof:e,type:U,key:Y,ref:R!==void 0?R:null,props:J}}function k(U,Y){return T(U.type,Y,void 0,void 0,void 0,U.props)}function B(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function M(U){var Y={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(R){return Y[R]})}var P=/\/+/g;function S(U,Y){return typeof U=="object"&&U!==null&&U.key!=null?M(""+U.key):Y.toString(36)}function L(){}function H(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(L,L):(U.status="pending",U.then(function(Y){U.status==="pending"&&(U.status="fulfilled",U.value=Y)},function(Y){U.status==="pending"&&(U.status="rejected",U.reason=Y)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function q(U,Y,R,D,W){var J=typeof U;(J==="undefined"||J==="boolean")&&(U=null);var le=!1;if(U===null)le=!0;else switch(J){case"bigint":case"string":case"number":le=!0;break;case"object":switch(U.$$typeof){case e:case t:le=!0;break;case d:return le=U._init,q(le(U._payload),Y,R,D,W)}}if(le)return W=W(U),le=D===""?"."+S(U,0):D,_(W)?(R="",le!=null&&(R=le.replace(P,"$&/")+"/"),q(W,Y,R,"",function(ce){return ce})):W!=null&&(B(W)&&(W=k(W,R+(W.key==null||U&&U.key===W.key?"":(""+W.key).replace(P,"$&/")+"/")+le)),Y.push(W)),1;le=0;var ie=D===""?".":D+":";if(_(U))for(var re=0;re<U.length;re++)D=U[re],J=ie+S(D,re),le+=q(D,Y,R,J,W);else if(re=A(U),typeof re=="function")for(U=re.call(U),re=0;!(D=U.next()).done;)D=D.value,J=ie+S(D,re++),le+=q(D,Y,R,J,W);else if(J==="object"){if(typeof U.then=="function")return q(H(U),Y,R,D,W);throw Y=String(U),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return le}function Q(U,Y,R){if(U==null)return U;var D=[],W=0;return q(U,D,"","",function(J){return Y.call(R,J,W++)}),D}function z(U){if(U._status===-1){var Y=U._result;Y=Y(),Y.then(function(R){(U._status===0||U._status===-1)&&(U._status=1,U._result=R)},function(R){(U._status===0||U._status===-1)&&(U._status=2,U._result=R)}),U._status===-1&&(U._status=0,U._result=Y)}if(U._status===1)return U._result.default;throw U._result}var K=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function Z(){}return fn.Children={map:Q,forEach:function(U,Y,R){Q(U,function(){Y.apply(this,arguments)},R)},count:function(U){var Y=0;return Q(U,function(){Y++}),Y},toArray:function(U){return Q(U,function(Y){return Y})||[]},only:function(U){if(!B(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},fn.Component=v,fn.Fragment=r,fn.Profiler=a,fn.PureComponent=N,fn.StrictMode=n,fn.Suspense=c,fn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,fn.__COMPILER_RUNTIME={__proto__:null,c:function(U){return j.H.useMemoCache(U)}},fn.cache=function(U){return function(){return U.apply(null,arguments)}},fn.cloneElement=function(U,Y,R){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var D=g({},U.props),W=U.key,J=void 0;if(Y!=null)for(le in Y.ref!==void 0&&(J=void 0),Y.key!==void 0&&(W=""+Y.key),Y)!I.call(Y,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&Y.ref===void 0||(D[le]=Y[le]);var le=arguments.length-2;if(le===1)D.children=R;else if(1<le){for(var ie=Array(le),re=0;re<le;re++)ie[re]=arguments[re+2];D.children=ie}return T(U.type,W,void 0,void 0,J,D)},fn.createContext=function(U){return U={$$typeof:o,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:s,_context:U},U},fn.createElement=function(U,Y,R){var D,W={},J=null;if(Y!=null)for(D in Y.key!==void 0&&(J=""+Y.key),Y)I.call(Y,D)&&D!=="key"&&D!=="__self"&&D!=="__source"&&(W[D]=Y[D]);var le=arguments.length-2;if(le===1)W.children=R;else if(1<le){for(var ie=Array(le),re=0;re<le;re++)ie[re]=arguments[re+2];W.children=ie}if(U&&U.defaultProps)for(D in le=U.defaultProps,le)W[D]===void 0&&(W[D]=le[D]);return T(U,J,void 0,void 0,null,W)},fn.createRef=function(){return{current:null}},fn.forwardRef=function(U){return{$$typeof:l,render:U}},fn.isValidElement=B,fn.lazy=function(U){return{$$typeof:d,_payload:{_status:-1,_result:U},_init:z}},fn.memo=function(U,Y){return{$$typeof:u,type:U,compare:Y===void 0?null:Y}},fn.startTransition=function(U){var Y=j.T,R={};j.T=R;try{var D=U(),W=j.S;W!==null&&W(R,D),typeof D=="object"&&D!==null&&typeof D.then=="function"&&D.then(Z,K)}catch(J){K(J)}finally{j.T=Y}},fn.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},fn.use=function(U){return j.H.use(U)},fn.useActionState=function(U,Y,R){return j.H.useActionState(U,Y,R)},fn.useCallback=function(U,Y){return j.H.useCallback(U,Y)},fn.useContext=function(U){return j.H.useContext(U)},fn.useDebugValue=function(){},fn.useDeferredValue=function(U,Y){return j.H.useDeferredValue(U,Y)},fn.useEffect=function(U,Y,R){var D=j.H;if(typeof R=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return D.useEffect(U,Y)},fn.useId=function(){return j.H.useId()},fn.useImperativeHandle=function(U,Y,R){return j.H.useImperativeHandle(U,Y,R)},fn.useInsertionEffect=function(U,Y){return j.H.useInsertionEffect(U,Y)},fn.useLayoutEffect=function(U,Y){return j.H.useLayoutEffect(U,Y)},fn.useMemo=function(U,Y){return j.H.useMemo(U,Y)},fn.useOptimistic=function(U,Y){return j.H.useOptimistic(U,Y)},fn.useReducer=function(U,Y,R){return j.H.useReducer(U,Y,R)},fn.useRef=function(U){return j.H.useRef(U)},fn.useState=function(U){return j.H.useState(U)},fn.useSyncExternalStore=function(U,Y,R){return j.H.useSyncExternalStore(U,Y,R)},fn.useTransition=function(){return j.H.useTransition()},fn.version="19.1.1",fn}var C$;function ly(){return C$||(C$=1,jI.exports=K1e()),jI.exports}var w=ly();const ft=sc(w),W1e=$1e({__proto__:null,default:ft},[w]);var kI={exports:{}},Dw={},SI={exports:{}},_I={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E$;function X1e(){return E$||(E$=1,function(e){function t(Q,z){var K=Q.length;Q.push(z);e:for(;0<K;){var Z=K-1>>>1,U=Q[Z];if(0<a(U,z))Q[Z]=z,Q[K]=U,K=Z;else break e}}function r(Q){return Q.length===0?null:Q[0]}function n(Q){if(Q.length===0)return null;var z=Q[0],K=Q.pop();if(K!==z){Q[0]=K;e:for(var Z=0,U=Q.length,Y=U>>>1;Z<Y;){var R=2*(Z+1)-1,D=Q[R],W=R+1,J=Q[W];if(0>a(D,K))W<U&&0>a(J,D)?(Q[Z]=J,Q[W]=K,Z=W):(Q[Z]=D,Q[R]=K,Z=R);else if(W<U&&0>a(J,K))Q[Z]=J,Q[W]=K,Z=W;else break e}}return z}function a(Q,z){var K=Q.sortIndex-z.sortIndex;return K!==0?K:Q.id-z.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,A=3,m=!1,g=!1,x=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function _(Q){for(var z=r(u);z!==null;){if(z.callback===null)n(u);else if(z.startTime<=Q)n(u),z.sortIndex=z.expirationTime,t(c,z);else break;z=r(u)}}function j(Q){if(x=!1,_(Q),!g)if(r(c)!==null)g=!0,I||(I=!0,S());else{var z=r(u);z!==null&&q(j,z.startTime-Q)}}var I=!1,T=-1,k=5,B=-1;function M(){return v?!0:!(e.unstable_now()-B<k)}function P(){if(v=!1,I){var Q=e.unstable_now();B=Q;var z=!0;try{e:{g=!1,x&&(x=!1,N(T),T=-1),m=!0;var K=A;try{t:{for(_(Q),f=r(c);f!==null&&!(f.expirationTime>Q&&M());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,A=f.priorityLevel;var U=Z(f.expirationTime<=Q);if(Q=e.unstable_now(),typeof U=="function"){f.callback=U,_(Q),z=!0;break t}f===r(c)&&n(c),_(Q)}else n(c);f=r(c)}if(f!==null)z=!0;else{var Y=r(u);Y!==null&&q(j,Y.startTime-Q),z=!1}}break e}finally{f=null,A=K,m=!1}z=void 0}}finally{z?S():I=!1}}}var S;if(typeof C=="function")S=function(){C(P)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,H=L.port2;L.port1.onmessage=P,S=function(){H.postMessage(null)}}else S=function(){y(P,0)};function q(Q,z){T=y(function(){Q(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Q){Q.callback=null},e.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<Q?Math.floor(1e3/Q):5},e.unstable_getCurrentPriorityLevel=function(){return A},e.unstable_next=function(Q){switch(A){case 1:case 2:case 3:var z=3;break;default:z=A}var K=A;A=z;try{return Q()}finally{A=K}},e.unstable_requestPaint=function(){v=!0},e.unstable_runWithPriority=function(Q,z){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var K=A;A=Q;try{return z()}finally{A=K}},e.unstable_scheduleCallback=function(Q,z,K){var Z=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?Z+K:Z):K=Z,Q){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=K+U,Q={id:d++,callback:z,priorityLevel:Q,startTime:K,expirationTime:U,sortIndex:-1},K>Z?(Q.sortIndex=K,t(u,Q),r(c)===null&&Q===r(u)&&(x?(N(T),T=-1):x=!0,q(j,K-Z))):(Q.sortIndex=U,t(c,Q),g||m||(g=!0,I||(I=!0,S()))),Q},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(Q){var z=A;return function(){var K=A;A=z;try{return Q.apply(this,arguments)}finally{A=K}}}}(_I)),_I}var j$;function Y1e(){return j$||(j$=1,SI.exports=X1e()),SI.exports}var TI={exports:{}},il={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k$;function J1e(){if(k$)return il;k$=1;var e=ly();function t(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(c,u,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:f==null?null:""+f,children:c,containerInfo:u,implementation:d}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return il.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,il.createPortal=function(c,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return s(c,u,null,d)},il.flushSync=function(c){var u=o.T,d=n.p;try{if(o.T=null,n.p=2,c)return c()}finally{o.T=u,n.p=d,n.d.f()}},il.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(c,u))},il.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},il.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var d=u.as,f=l(d,u.crossOrigin),A=typeof u.integrity=="string"?u.integrity:void 0,m=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?n.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:A,fetchPriority:m}):d==="script"&&n.d.X(c,{crossOrigin:f,integrity:A,fetchPriority:m,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},il.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=l(u.as,u.crossOrigin);n.d.M(c,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(c)},il.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,f=l(d,u.crossOrigin);n.d.L(c,d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},il.preloadModule=function(c,u){if(typeof c=="string")if(u){var d=l(u.as,u.crossOrigin);n.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(c)},il.requestFormReset=function(c){n.d.r(c)},il.unstable_batchedUpdates=function(c,u){return c(u)},il.useFormState=function(c,u,d){return o.H.useFormState(c,u,d)},il.useFormStatus=function(){return o.H.useHostTransitionStatus()},il.version="19.1.1",il}var S$;function Wne(){if(S$)return TI.exports;S$=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),TI.exports=J1e(),TI.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _$;function Z1e(){if(_$)return Dw;_$=1;var e=Y1e(),t=ly(),r=Wne();function n(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function s(h){var p=h,b=h;if(h.alternate)for(;p.return;)p=p.return;else{h=p;do p=h,(p.flags&4098)!==0&&(b=p.return),h=p.return;while(h)}return p.tag===3?b:null}function o(h){if(h.tag===13){var p=h.memoizedState;if(p===null&&(h=h.alternate,h!==null&&(p=h.memoizedState)),p!==null)return p.dehydrated}return null}function l(h){if(s(h)!==h)throw Error(n(188))}function c(h){var p=h.alternate;if(!p){if(p=s(h),p===null)throw Error(n(188));return p!==h?null:h}for(var b=h,E=p;;){var V=b.return;if(V===null)break;var ee=V.alternate;if(ee===null){if(E=V.return,E!==null){b=E;continue}break}if(V.child===ee.child){for(ee=V.child;ee;){if(ee===b)return l(V),h;if(ee===E)return l(V),p;ee=ee.sibling}throw Error(n(188))}if(b.return!==E.return)b=V,E=ee;else{for(var ye=!1,Re=V.child;Re;){if(Re===b){ye=!0,b=V,E=ee;break}if(Re===E){ye=!0,E=V,b=ee;break}Re=Re.sibling}if(!ye){for(Re=ee.child;Re;){if(Re===b){ye=!0,b=ee,E=V;break}if(Re===E){ye=!0,E=ee,b=V;break}Re=Re.sibling}if(!ye)throw Error(n(189))}}if(b.alternate!==E)throw Error(n(190))}if(b.tag!==3)throw Error(n(188));return b.stateNode.current===b?h:p}function u(h){var p=h.tag;if(p===5||p===26||p===27||p===6)return h;for(h=h.child;h!==null;){if(p=u(h),p!==null)return p;h=h.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),C=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function S(h){return h===null||typeof h!="object"?null:(h=P&&h[P]||h["@@iterator"],typeof h=="function"?h:null)}var L=Symbol.for("react.client.reference");function H(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===L?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case g:return"Fragment";case v:return"Profiler";case x:return"StrictMode";case j:return"Suspense";case I:return"SuspenseList";case B:return"Activity"}if(typeof h=="object")switch(h.$$typeof){case m:return"Portal";case C:return(h.displayName||"Context")+".Provider";case N:return(h._context.displayName||"Context")+".Consumer";case _:var p=h.render;return h=h.displayName,h||(h=p.displayName||p.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case T:return p=h.displayName||null,p!==null?p:H(h.type)||"Memo";case k:p=h._payload,h=h._init;try{return H(h(p))}catch{}}return null}var q=Array.isArray,Q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},Z=[],U=-1;function Y(h){return{current:h}}function R(h){0>U||(h.current=Z[U],Z[U]=null,U--)}function D(h,p){U++,Z[U]=h.current,h.current=p}var W=Y(null),J=Y(null),le=Y(null),ie=Y(null);function re(h,p){switch(D(le,p),D(J,h),D(W,null),p.nodeType){case 9:case 11:h=(h=p.documentElement)&&(h=h.namespaceURI)?WV(h):0;break;default:if(h=p.tagName,p=p.namespaceURI)p=WV(p),h=XV(p,h);else switch(h){case"svg":h=1;break;case"math":h=2;break;default:h=0}}R(W),D(W,h)}function ce(){R(W),R(J),R(le)}function oe(h){h.memoizedState!==null&&D(ie,h);var p=W.current,b=XV(p,h.type);p!==b&&(D(J,h),D(W,b))}function be(h){J.current===h&&(R(W),R(J)),ie.current===h&&(R(ie),kw._currentValue=K)}var X=Object.prototype.hasOwnProperty,je=e.unstable_scheduleCallback,De=e.unstable_cancelCallback,ke=e.unstable_shouldYield,ue=e.unstable_requestPaint,we=e.unstable_now,Ae=e.unstable_getCurrentPriorityLevel,de=e.unstable_ImmediatePriority,ae=e.unstable_UserBlockingPriority,fe=e.unstable_NormalPriority,ge=e.unstable_LowPriority,xe=e.unstable_IdlePriority,Ue=e.log,qe=e.unstable_setDisableYieldValue,Ze=null,We=null;function me(h){if(typeof Ue=="function"&&qe(h),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(Ze,h)}catch{}}var Ve=Math.clz32?Math.clz32:Be,Xe=Math.log,Ie=Math.LN2;function Be(h){return h>>>=0,h===0?32:31-(Xe(h)/Ie|0)|0}var et=256,bt=4194304;function jt(h){var p=h&42;if(p!==0)return p;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function qt(h,p,b){var E=h.pendingLanes;if(E===0)return 0;var V=0,ee=h.suspendedLanes,ye=h.pingedLanes;h=h.warmLanes;var Re=E&134217727;return Re!==0?(E=Re&~ee,E!==0?V=jt(E):(ye&=Re,ye!==0?V=jt(ye):b||(b=Re&~h,b!==0&&(V=jt(b))))):(Re=E&~ee,Re!==0?V=jt(Re):ye!==0?V=jt(ye):b||(b=E&~h,b!==0&&(V=jt(b)))),V===0?0:p!==0&&p!==V&&(p&ee)===0&&(ee=V&-V,b=p&-p,ee>=b||ee===32&&(b&4194048)!==0)?p:V}function ir(h,p){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&p)===0}function Ut(h,p){switch(h){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nr(){var h=et;return et<<=1,(et&4194048)===0&&(et=256),h}function tr(){var h=bt;return bt<<=1,(bt&62914560)===0&&(bt=4194304),h}function Xr(h){for(var p=[],b=0;31>b;b++)p.push(h);return p}function hr(h,p){h.pendingLanes|=p,p!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function Dr(h,p,b,E,V,ee){var ye=h.pendingLanes;h.pendingLanes=b,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=b,h.entangledLanes&=b,h.errorRecoveryDisabledLanes&=b,h.shellSuspendCounter=0;var Re=h.entanglements,Je=h.expirationTimes,xt=h.hiddenUpdates;for(b=ye&~b;0<b;){var Pt=31-Ve(b),Ht=1<<Pt;Re[Pt]=0,Je[Pt]=-1;var yt=xt[Pt];if(yt!==null)for(xt[Pt]=null,Pt=0;Pt<yt.length;Pt++){var wt=yt[Pt];wt!==null&&(wt.lane&=-536870913)}b&=~Ht}E!==0&&or(h,E,0),ee!==0&&V===0&&h.tag!==0&&(h.suspendedLanes|=ee&~(ye&~p))}function or(h,p,b){h.pendingLanes|=p,h.suspendedLanes&=~p;var E=31-Ve(p);h.entangledLanes|=p,h.entanglements[E]=h.entanglements[E]|1073741824|b&4194090}function Yr(h,p){var b=h.entangledLanes|=p;for(h=h.entanglements;b;){var E=31-Ve(b),V=1<<E;V&p|h[E]&p&&(h[E]|=p),b&=~V}}function Xa(h){switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=128;break;case 268435456:h=134217728;break;default:h=0}return h}function aa(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function Gn(){var h=z.p;return h!==0?h:(h=window.event,h===void 0?32:m$(h.type))}function is(h,p){var b=z.p;try{return z.p=h,p()}finally{z.p=b}}var rr=Math.random().toString(36).slice(2),wn="__reactFiber$"+rr,cn="__reactProps$"+rr,On="__reactContainer$"+rr,Fn="__reactEvents$"+rr,sa="__reactListeners$"+rr,Se="__reactHandles$"+rr,Ge="__reactResources$"+rr,Me="__reactMarker$"+rr;function Qe(h){delete h[wn],delete h[cn],delete h[Fn],delete h[sa],delete h[Se]}function Ne(h){var p=h[wn];if(p)return p;for(var b=h.parentNode;b;){if(p=b[On]||b[wn]){if(b=p.alternate,p.child!==null||b!==null&&b.child!==null)for(h=e$(h);h!==null;){if(b=h[wn])return b;h=e$(h)}return p}h=b,b=h.parentNode}return null}function ve(h){if(h=h[wn]||h[On]){var p=h.tag;if(p===5||p===6||p===13||p===26||p===27||p===3)return h}return null}function Fe(h){var p=h.tag;if(p===5||p===26||p===27||p===6)return h.stateNode;throw Error(n(33))}function ze(h){var p=h[Ge];return p||(p=h[Ge]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function He(h){h[Me]=!0}var Ye=new Set,rt={};function Ct(h,p){Et(h,p),Et(h+"Capture",p)}function Et(h,p){for(rt[h]=p,h=0;h<p.length;h++)Ye.add(p[h])}var Qt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ot={},Kt={};function Cr(h){return X.call(Kt,h)?!0:X.call(Ot,h)?!1:Qt.test(h)?Kt[h]=!0:(Ot[h]=!0,!1)}function rn(h,p,b){if(Cr(p))if(b===null)h.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":h.removeAttribute(p);return;case"boolean":var E=p.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){h.removeAttribute(p);return}}h.setAttribute(p,""+b)}}function Jr(h,p,b){if(b===null)h.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(p);return}h.setAttribute(p,""+b)}}function an(h,p,b,E){if(E===null)h.removeAttribute(b);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(b);return}h.setAttributeNS(p,b,""+E)}}var va,Ys;function Ya(h){if(va===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);va=p&&p[1]||"",Ys=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+va+h+Ys}var os=!1;function xs(h,p){if(!h||os)return"";os=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(p){var Ht=function(){throw Error()};if(Object.defineProperty(Ht.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ht,[])}catch(wt){var yt=wt}Reflect.construct(h,[],Ht)}else{try{Ht.call()}catch(wt){yt=wt}h.call(Ht.prototype)}}else{try{throw Error()}catch(wt){yt=wt}(Ht=h())&&typeof Ht.catch=="function"&&Ht.catch(function(){})}}catch(wt){if(wt&&yt&&typeof wt.stack=="string")return[wt.stack,yt.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var V=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");V&&V.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ee=E.DetermineComponentFrameRoot(),ye=ee[0],Re=ee[1];if(ye&&Re){var Je=ye.split(`
`),xt=Re.split(`
`);for(V=E=0;E<Je.length&&!Je[E].includes("DetermineComponentFrameRoot");)E++;for(;V<xt.length&&!xt[V].includes("DetermineComponentFrameRoot");)V++;if(E===Je.length||V===xt.length)for(E=Je.length-1,V=xt.length-1;1<=E&&0<=V&&Je[E]!==xt[V];)V--;for(;1<=E&&0<=V;E--,V--)if(Je[E]!==xt[V]){if(E!==1||V!==1)do if(E--,V--,0>V||Je[E]!==xt[V]){var Pt=`
`+Je[E].replace(" at new "," at ");return h.displayName&&Pt.includes("<anonymous>")&&(Pt=Pt.replace("<anonymous>",h.displayName)),Pt}while(1<=E&&0<=V);break}}}finally{os=!1,Error.prepareStackTrace=b}return(b=h?h.displayName||h.name:"")?Ya(b):""}function Tr(h){switch(h.tag){case 26:case 27:case 5:return Ya(h.type);case 16:return Ya("Lazy");case 13:return Ya("Suspense");case 19:return Ya("SuspenseList");case 0:case 15:return xs(h.type,!1);case 11:return xs(h.type.render,!1);case 1:return xs(h.type,!0);case 31:return Ya("Activity");default:return""}}function Zr(h){try{var p="";do p+=Tr(h),h=h.return;while(h);return p}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function Rn(h){switch(typeof h){case"bigint":case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function Ji(h){var p=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Kc(h){var p=Ji(h)?"checked":"value",b=Object.getOwnPropertyDescriptor(h.constructor.prototype,p),E=""+h[p];if(!h.hasOwnProperty(p)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var V=b.get,ee=b.set;return Object.defineProperty(h,p,{configurable:!0,get:function(){return V.call(this)},set:function(ye){E=""+ye,ee.call(this,ye)}}),Object.defineProperty(h,p,{enumerable:b.enumerable}),{getValue:function(){return E},setValue:function(ye){E=""+ye},stopTracking:function(){h._valueTracker=null,delete h[p]}}}}function oc(h){h._valueTracker||(h._valueTracker=Kc(h))}function Rd(h){if(!h)return!1;var p=h._valueTracker;if(!p)return!0;var b=p.getValue(),E="";return h&&(E=Ji(h)?h.checked?"true":"false":h.value),h=E,h!==b?(p.setValue(h),!0):!1}function Js(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}var Lu=/[\n"\\]/g;function gn(h){return h.replace(Lu,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function Zs(h,p,b,E,V,ee,ye,Re){h.name="",ye!=null&&typeof ye!="function"&&typeof ye!="symbol"&&typeof ye!="boolean"?h.type=ye:h.removeAttribute("type"),p!=null?ye==="number"?(p===0&&h.value===""||h.value!=p)&&(h.value=""+Rn(p)):h.value!==""+Rn(p)&&(h.value=""+Rn(p)):ye!=="submit"&&ye!=="reset"||h.removeAttribute("value"),p!=null?lc(h,ye,Rn(p)):b!=null?lc(h,ye,Rn(b)):E!=null&&h.removeAttribute("value"),V==null&&ee!=null&&(h.defaultChecked=!!ee),V!=null&&(h.checked=V&&typeof V!="function"&&typeof V!="symbol"),Re!=null&&typeof Re!="function"&&typeof Re!="symbol"&&typeof Re!="boolean"?h.name=""+Rn(Re):h.removeAttribute("name")}function Hl(h,p,b,E,V,ee,ye,Re){if(ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"&&(h.type=ee),p!=null||b!=null){if(!(ee!=="submit"&&ee!=="reset"||p!=null))return;b=b!=null?""+Rn(b):"",p=p!=null?""+Rn(p):b,Re||p===h.value||(h.value=p),h.defaultValue=p}E=E??V,E=typeof E!="function"&&typeof E!="symbol"&&!!E,h.checked=Re?h.checked:!!E,h.defaultChecked=!!E,ye!=null&&typeof ye!="function"&&typeof ye!="symbol"&&typeof ye!="boolean"&&(h.name=ye)}function lc(h,p,b){p==="number"&&Js(h.ownerDocument)===h||h.defaultValue===""+b||(h.defaultValue=""+b)}function Co(h,p,b,E){if(h=h.options,p){p={};for(var V=0;V<b.length;V++)p["$"+b[V]]=!0;for(b=0;b<h.length;b++)V=p.hasOwnProperty("$"+h[b].value),h[b].selected!==V&&(h[b].selected=V),V&&E&&(h[b].defaultSelected=!0)}else{for(b=""+Rn(b),p=null,V=0;V<h.length;V++){if(h[V].value===b){h[V].selected=!0,E&&(h[V].defaultSelected=!0);return}p!==null||h[V].disabled||(p=h[V])}p!==null&&(p.selected=!0)}}function Ln(h,p,b){if(p!=null&&(p=""+Rn(p),p!==h.value&&(h.value=p),b==null)){h.defaultValue!==p&&(h.defaultValue=p);return}h.defaultValue=b!=null?""+Rn(b):""}function cc(h,p,b,E){if(p==null){if(E!=null){if(b!=null)throw Error(n(92));if(q(E)){if(1<E.length)throw Error(n(93));E=E[0]}b=E}b==null&&(b=""),p=b}b=Rn(p),h.defaultValue=b,E=h.textContent,E===b&&E!==""&&E!==null&&(h.value=E)}function Eo(h,p){if(p){var b=h.firstChild;if(b&&b===h.lastChild&&b.nodeType===3){b.nodeValue=p;return}}h.textContent=p}var Xo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ld(h,p,b){var E=p.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?E?h.setProperty(p,""):p==="float"?h.cssFloat="":h[p]="":E?h.setProperty(p,b):typeof b!="number"||b===0||Xo.has(p)?p==="float"?h.cssFloat=b:h[p]=(""+b).trim():h[p]=b+"px"}function Mu(h,p,b){if(p!=null&&typeof p!="object")throw Error(n(62));if(h=h.style,b!=null){for(var E in b)!b.hasOwnProperty(E)||p!=null&&p.hasOwnProperty(E)||(E.indexOf("--")===0?h.setProperty(E,""):E==="float"?h.cssFloat="":h[E]="");for(var V in p)E=p[V],p.hasOwnProperty(V)&&b[V]!==E&&Ld(h,V,E)}else for(var ee in p)p.hasOwnProperty(ee)&&Ld(h,ee,p[ee])}function Uu(h){if(h.indexOf("-")===-1)return!1;switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ql=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wc(h){return zf.test(""+h)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":h}var uc=null;function ba(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var Xc=null,dc=null;function Fr(h){var p=ve(h);if(p&&(h=p.stateNode)){var b=h[cn]||null;e:switch(h=p.stateNode,p.type){case"input":if(Zs(h,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),p=b.name,b.type==="radio"&&p!=null){for(b=h;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+gn(""+p)+'"][type="radio"]'),p=0;p<b.length;p++){var E=b[p];if(E!==h&&E.form===h.form){var V=E[cn]||null;if(!V)throw Error(n(90));Zs(E,V.value,V.defaultValue,V.defaultValue,V.checked,V.defaultChecked,V.type,V.name)}}for(p=0;p<b.length;p++)E=b[p],E.form===h.form&&Rd(E)}break e;case"textarea":Ln(h,b.value,b.defaultValue);break e;case"select":p=b.value,p!=null&&Co(h,!!b.multiple,p,!1)}}}var fc=!1;function qA(h,p,b){if(fc)return h(p,b);fc=!0;try{var E=h(p);return E}finally{if(fc=!1,(Xc!==null||dc!==null)&&(dj(),Xc&&(p=Xc,h=dc,dc=Xc=null,Fr(p),h)))for(p=0;p<h.length;p++)Fr(h[p])}}function Zi(h,p){var b=h.stateNode;if(b===null)return null;var E=b[cn]||null;if(E===null)return null;b=E[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(h=h.type,E=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!E;break e;default:h=!1}if(h)return null;if(b&&typeof b!="function")throw Error(n(231,p,typeof b));return b}var Yo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jo=!1;if(Yo)try{var hc={};Object.defineProperty(hc,"passive",{get:function(){jo=!0}}),window.addEventListener("test",hc,hc),window.removeEventListener("test",hc,hc)}catch{jo=!1}var Jo=null,Hu=null,Yc=null;function f0(){if(Yc)return Yc;var h,p=Hu,b=p.length,E,V="value"in Jo?Jo.value:Jo.textContent,ee=V.length;for(h=0;h<b&&p[h]===V[h];h++);var ye=b-h;for(E=1;E<=ye&&p[b-E]===V[ee-E];E++);return Yc=V.slice(h,1<E?1-E:void 0)}function Zo(h){var p=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&p===13&&(h=13)):h=p,h===10&&(h=13),32<=h||h===13?h:0}function eo(){return!0}function Ac(){return!1}function Bs(h){function p(b,E,V,ee,ye){this._reactName=b,this._targetInst=V,this.type=E,this.nativeEvent=ee,this.target=ye,this.currentTarget=null;for(var Re in h)h.hasOwnProperty(Re)&&(b=h[Re],this[Re]=b?b(ee):ee[Re]);return this.isDefaultPrevented=(ee.defaultPrevented!=null?ee.defaultPrevented:ee.returnValue===!1)?eo:Ac,this.isPropagationStopped=Ac,this}return d(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=eo)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=eo)},persist:function(){},isPersistent:eo}),p}var Nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qu=Bs(Nn),mc=d({},Nn,{view:0,detail:0}),h0=Bs(mc),Md,Ud,Vl,to=d({},mc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gu,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==Vl&&(Vl&&h.type==="mousemove"?(Md=h.screenX-Vl.screenX,Ud=h.screenY-Vl.screenY):Ud=Md=0,Vl=h),Md)},movementY:function(h){return"movementY"in h?h.movementY:Ud}}),Is=Bs(to),KA=d({},to,{dataTransfer:0}),Vu=Bs(KA),Li=d({},mc,{relatedTarget:0}),$u=Bs(Li),Jc=d({},Nn,{animationName:0,elapsedTime:0,pseudoElement:0}),Gf=Bs(Jc),Hd=d({},Nn,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),qf=Bs(Hd),A0=d({},Nn,{data:0}),Qd=Bs(A0),zu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $d(h){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(h):(h=Kf[h])?!!p[h]:!1}function Gu(){return $d}var WA=d({},mc,{key:function(h){if(h.key){var p=zu[h.key]||h.key;if(p!=="Unidentified")return p}return h.type==="keypress"?(h=Zo(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?Vd[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gu,charCode:function(h){return h.type==="keypress"?Zo(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?Zo(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),Zc=Bs(WA),qu=d({},to,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zd=Bs(qu),ro=d({},mc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gu}),Wf=Bs(ro),te=d({},Nn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ee=Bs(te),Ke=d({},to,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),tt=Bs(Ke),lt=d({},Nn,{newState:0,oldState:0}),kt=Bs(lt),zt=[9,13,27,32],nr=Yo&&"CompositionEvent"in window,F=null;Yo&&"documentMode"in document&&(F=document.documentMode);var se=Yo&&"TextEvent"in window&&!F,pe=Yo&&(!nr||F&&8<F&&11>=F),Pe=" ",ot=!1;function gt(h,p){switch(h){case"keyup":return zt.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gt(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var Rr=!1;function Cn(h,p){switch(h){case"compositionend":return Gt(p);case"keypress":return p.which!==32?null:(ot=!0,Pe);case"textInput":return h=p.data,h===Pe&&ot?null:h;default:return null}}function en(h,p){if(Rr)return h==="compositionend"||!nr&&gt(h,p)?(h=f0(),Yc=Hu=Jo=null,Rr=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return pe&&p.locale!=="ko"?null:p.data;default:return null}}var Yn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ua(h){var p=h&&h.nodeName&&h.nodeName.toLowerCase();return p==="input"?!!Yn[h.type]:p==="textarea"}function pc(h,p,b,E){Xc?dc?dc.push(E):dc=[E]:Xc=E,p=gj(p,"onChange"),0<p.length&&(b=new Qu("onChange","change",null,b,E),h.push({event:b,listeners:p}))}var vs=null,el=null;function Ku(h){$V(h,0)}function Xf(h){var p=Fe(h);if(Rd(p))return h}function XA(h,p){if(h==="change")return p}var m0=!1;if(Yo){var ei;if(Yo){var Yf="oninput"in document;if(!Yf){var p0=document.createElement("div");p0.setAttribute("oninput","return;"),Yf=typeof p0.oninput=="function"}ei=Yf}else ei=!1;m0=ei&&(!document.documentMode||9<document.documentMode)}function g0(){vs&&(vs.detachEvent("onpropertychange",YA),el=vs=null)}function YA(h){if(h.propertyName==="value"&&Xf(el)){var p=[];pc(p,el,h,ba(h)),qA(Ku,p)}}function tl(h,p,b){h==="focusin"?(g0(),vs=p,el=b,vs.attachEvent("onpropertychange",YA)):h==="focusout"&&g0()}function Ky(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return Xf(el)}function ng(h,p){if(h==="click")return Xf(p)}function Av(h,p){if(h==="input"||h==="change")return Xf(p)}function gc(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var Ni=typeof Object.is=="function"?Object.is:gc;function Jf(h,p){if(Ni(h,p))return!0;if(typeof h!="object"||h===null||typeof p!="object"||p===null)return!1;var b=Object.keys(h),E=Object.keys(p);if(b.length!==E.length)return!1;for(E=0;E<b.length;E++){var V=b[E];if(!X.call(p,V)||!Ni(h[V],p[V]))return!1}return!0}function ag(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function Gd(h,p){var b=ag(h);h=0;for(var E;b;){if(b.nodeType===3){if(E=h+b.textContent.length,h<=p&&E>=p)return{node:b,offset:p-h};h=E}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=ag(b)}}function Zf(h,p){return h&&p?h===p?!0:h&&h.nodeType===3?!1:p&&p.nodeType===3?Zf(h,p.parentNode):"contains"in h?h.contains(p):h.compareDocumentPosition?!!(h.compareDocumentPosition(p)&16):!1:!1}function ko(h){h=h!=null&&h.ownerDocument!=null&&h.ownerDocument.defaultView!=null?h.ownerDocument.defaultView:window;for(var p=Js(h.document);p instanceof h.HTMLIFrameElement;){try{var b=typeof p.contentWindow.location.href=="string"}catch{b=!1}if(b)h=p.contentWindow;else break;p=Js(h.document)}return p}function Mi(h){var p=h&&h.nodeName&&h.nodeName.toLowerCase();return p&&(p==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||p==="textarea"||h.contentEditable==="true")}var eh=Yo&&"documentMode"in document&&11>=document.documentMode,rl=null,eu=null,Wu=null,tu=!1;function ls(h,p,b){var E=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;tu||rl==null||rl!==Js(E)||(E=rl,"selectionStart"in E&&Mi(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Wu&&Jf(Wu,E)||(Wu=E,E=gj(eu,"onSelect"),0<E.length&&(p=new Qu("onSelect","select",null,p,b),h.push({event:p,listeners:E}),p.target=rl)))}function ru(h,p){var b={};return b[h.toLowerCase()]=p.toLowerCase(),b["Webkit"+h]="webkit"+p,b["Moz"+h]="moz"+p,b}var Ds={animationend:ru("Animation","AnimationEnd"),animationiteration:ru("Animation","AnimationIteration"),animationstart:ru("Animation","AnimationStart"),transitionrun:ru("Transition","TransitionRun"),transitionstart:ru("Transition","TransitionStart"),transitioncancel:ru("Transition","TransitionCancel"),transitionend:ru("Transition","TransitionEnd")},nl={},x0={};Yo&&(x0=document.createElement("div").style,"AnimationEvent"in window||(delete Ds.animationend.animation,delete Ds.animationiteration.animation,delete Ds.animationstart.animation),"TransitionEvent"in window||delete Ds.transitionend.transition);function Xu(h){if(nl[h])return nl[h];if(!Ds[h])return h;var p=Ds[h],b;for(b in p)if(p.hasOwnProperty(b)&&b in x0)return nl[h]=p[b];return h}var JA=Xu("animationend"),th=Xu("animationiteration"),rh=Xu("animationstart"),nh=Xu("transitionrun"),v0=Xu("transitionstart"),ZA=Xu("transitioncancel"),ah=Xu("transitionend"),qd=new Map,b0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");b0.push("scrollEnd");function cs(h,p){qd.set(h,p),Ct(p,[h])}var $l=new WeakMap;function xn(h,p){if(typeof h=="object"&&h!==null){var b=$l.get(h);return b!==void 0?b:(p={value:h,source:p,stack:Zr(p)},$l.set(h,p),p)}return{value:h,source:p,stack:Zr(p)}}var vn=[],Ba=0,bs=0;function xc(){for(var h=Ba,p=bs=Ba=0;p<h;){var b=vn[p];vn[p++]=null;var E=vn[p];vn[p++]=null;var V=vn[p];vn[p++]=null;var ee=vn[p];if(vn[p++]=null,E!==null&&V!==null){var ye=E.pending;ye===null?V.next=V:(V.next=ye.next,ye.next=V),E.pending=V}ee!==0&&mv(b,V,ee)}}function sh(h,p,b,E){vn[Ba++]=h,vn[Ba++]=p,vn[Ba++]=b,vn[Ba++]=E,bs|=E,h.lanes|=E,h=h.alternate,h!==null&&(h.lanes|=E)}function ih(h,p,b,E){return sh(h,p,b,E),y0(h)}function Kd(h,p){return sh(h,null,null,p),y0(h)}function mv(h,p,b){h.lanes|=b;var E=h.alternate;E!==null&&(E.lanes|=b);for(var V=!1,ee=h.return;ee!==null;)ee.childLanes|=b,E=ee.alternate,E!==null&&(E.childLanes|=b),ee.tag===22&&(h=ee.stateNode,h===null||h._visibility&1||(V=!0)),h=ee,ee=ee.return;return h.tag===3?(ee=h.stateNode,V&&p!==null&&(V=31-Ve(b),h=ee.hiddenUpdates,E=h[V],E===null?h[V]=[p]:E.push(p),p.lane=b|536870912),ee):null}function y0(h){if(50<vw)throw vw=0,KB=null,Error(n(185));for(var p=h.return;p!==null;)h=p,p=h.return;return h.tag===3?h.stateNode:null}var Ci={};function vc(h,p,b,E){this.tag=h,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function no(h,p,b,E){return new vc(h,p,b,E)}function em(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Yu(h,p){var b=h.alternate;return b===null?(b=no(h.tag,p,h.key,h.mode),b.elementType=h.elementType,b.type=h.type,b.stateNode=h.stateNode,b.alternate=h,h.alternate=b):(b.pendingProps=p,b.type=h.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=h.flags&65011712,b.childLanes=h.childLanes,b.lanes=h.lanes,b.child=h.child,b.memoizedProps=h.memoizedProps,b.memoizedState=h.memoizedState,b.updateQueue=h.updateQueue,p=h.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=h.sibling,b.index=h.index,b.ref=h.ref,b.refCleanup=h.refCleanup,b}function sg(h,p){h.flags&=65011714;var b=h.alternate;return b===null?(h.childLanes=0,h.lanes=p,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=b.childLanes,h.lanes=b.lanes,h.child=b.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=b.memoizedProps,h.memoizedState=b.memoizedState,h.updateQueue=b.updateQueue,h.type=b.type,p=b.dependencies,h.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),h}function w0(h,p,b,E,V,ee){var ye=0;if(E=h,typeof h=="function")em(h)&&(ye=1);else if(typeof h=="string")ye=_1e(h,b,W.current)?26:h==="html"||h==="head"||h==="body"?27:5;else e:switch(h){case B:return h=no(31,b,p,V),h.elementType=B,h.lanes=ee,h;case g:return Wd(b.children,V,ee,p);case x:ye=8,V|=24;break;case v:return h=no(12,b,p,V|2),h.elementType=v,h.lanes=ee,h;case j:return h=no(13,b,p,V),h.elementType=j,h.lanes=ee,h;case I:return h=no(19,b,p,V),h.elementType=I,h.lanes=ee,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case y:case C:ye=10;break e;case N:ye=9;break e;case _:ye=11;break e;case T:ye=14;break e;case k:ye=16,E=null;break e}ye=29,b=Error(n(130,h===null?"null":typeof h,"")),E=null}return p=no(ye,b,p,V),p.elementType=h,p.type=E,p.lanes=ee,p}function Wd(h,p,b,E){return h=no(7,h,E,p),h.lanes=b,h}function pv(h,p,b){return h=no(6,h,null,p),h.lanes=b,h}function ig(h,p,b){return p=no(4,h.children!==null?h.children:[],h.key,p),p.lanes=b,p.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},p}var oh=[],Xd=0,tm=null,gv=0,bc=[],zl=0,N0=null,Yd=1,Jd="";function C0(h,p){oh[Xd++]=gv,oh[Xd++]=tm,tm=h,gv=p}function PE(h,p,b){bc[zl++]=Yd,bc[zl++]=Jd,bc[zl++]=N0,N0=h;var E=Yd;h=Jd;var V=32-Ve(E)-1;E&=~(1<<V),b+=1;var ee=32-Ve(p)+V;if(30<ee){var ye=V-V%5;ee=(E&(1<<ye)-1).toString(32),E>>=ye,V-=ye,Yd=1<<32-Ve(p)+V|b<<V|E,Jd=ee+h}else Yd=1<<ee|b<<V|E,Jd=h}function og(h){h.return!==null&&(C0(h,1),PE(h,1,0))}function lg(h){for(;h===tm;)tm=oh[--Xd],oh[Xd]=null,gv=oh[--Xd],oh[Xd]=null;for(;h===N0;)N0=bc[--zl],bc[zl]=null,Jd=bc[--zl],bc[zl]=null,Yd=bc[--zl],bc[zl]=null}var ti=null,us=null,qn=!1,lh=null,Ju=!1,Wy=Error(n(519));function E0(h){var p=Error(n(418,""));throw rm(xn(p,h)),Wy}function FE(h){var p=h.stateNode,b=h.type,E=h.memoizedProps;switch(p[wn]=h,p[cn]=E,b){case"dialog":_n("cancel",p),_n("close",p);break;case"iframe":case"object":case"embed":_n("load",p);break;case"video":case"audio":for(b=0;b<yw.length;b++)_n(yw[b],p);break;case"source":_n("error",p);break;case"img":case"image":case"link":_n("error",p),_n("load",p);break;case"details":_n("toggle",p);break;case"input":_n("invalid",p),Hl(p,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0),oc(p);break;case"select":_n("invalid",p);break;case"textarea":_n("invalid",p),cc(p,E.value,E.defaultValue,E.children),oc(p)}b=E.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||p.textContent===""+b||E.suppressHydrationWarning===!0||KV(p.textContent,b)?(E.popover!=null&&(_n("beforetoggle",p),_n("toggle",p)),E.onScroll!=null&&_n("scroll",p),E.onScrollEnd!=null&&_n("scrollend",p),E.onClick!=null&&(p.onclick=xj),p=!0):p=!1,p||E0(h)}function Zd(h){for(ti=h.return;ti;)switch(ti.tag){case 5:case 13:Ju=!1;return;case 27:case 3:Ju=!0;return;default:ti=ti.return}}function So(h){if(h!==ti)return!1;if(!qn)return Zd(h),qn=!0,!1;var p=h.tag,b;if((b=p!==3&&p!==27)&&((b=p===5)&&(b=h.type,b=!(b!=="form"&&b!=="button")||uI(h.type,h.memoizedProps)),b=!b),b&&us&&E0(h),Zd(h),p===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(317));e:{for(h=h.nextSibling,p=0;h;){if(h.nodeType===8)if(b=h.data,b==="/$"){if(p===0){us=lf(h.nextSibling);break e}p--}else b!=="$"&&b!=="$!"&&b!=="$?"||p++;h=h.nextSibling}us=null}}else p===27?(p=us,vm(h.type)?(h=AI,AI=null,us=h):us=p):us=ti?lf(h.stateNode.nextSibling):null;return!0}function Gl(){us=ti=null,qn=!1}function RE(){var h=lh;return h!==null&&(Nc===null?Nc=h:Nc.push.apply(Nc,h),lh=null),h}function rm(h){lh===null?lh=[h]:lh.push(h)}var Zu=Y(null),Ei=null,ef=null;function ch(h,p,b){D(Zu,p._currentValue),p._currentValue=b}function ed(h){h._currentValue=Zu.current,R(Zu)}function xv(h,p,b){for(;h!==null;){var E=h.alternate;if((h.childLanes&p)!==p?(h.childLanes|=p,E!==null&&(E.childLanes|=p)):E!==null&&(E.childLanes&p)!==p&&(E.childLanes|=p),h===b)break;h=h.return}}function vv(h,p,b,E){var V=h.child;for(V!==null&&(V.return=h);V!==null;){var ee=V.dependencies;if(ee!==null){var ye=V.child;ee=ee.firstContext;e:for(;ee!==null;){var Re=ee;ee=V;for(var Je=0;Je<p.length;Je++)if(Re.context===p[Je]){ee.lanes|=b,Re=ee.alternate,Re!==null&&(Re.lanes|=b),xv(ee.return,b,h),E||(ye=null);break e}ee=Re.next}}else if(V.tag===18){if(ye=V.return,ye===null)throw Error(n(341));ye.lanes|=b,ee=ye.alternate,ee!==null&&(ee.lanes|=b),xv(ye,b,h),ye=null}else ye=V.child;if(ye!==null)ye.return=V;else for(ye=V;ye!==null;){if(ye===h){ye=null;break}if(V=ye.sibling,V!==null){V.return=ye.return,ye=V;break}ye=ye.return}V=ye}}function nm(h,p,b,E){h=null;for(var V=p,ee=!1;V!==null;){if(!ee){if((V.flags&524288)!==0)ee=!0;else if((V.flags&262144)!==0)break}if(V.tag===10){var ye=V.alternate;if(ye===null)throw Error(n(387));if(ye=ye.memoizedProps,ye!==null){var Re=V.type;Ni(V.pendingProps.value,ye.value)||(h!==null?h.push(Re):h=[Re])}}else if(V===ie.current){if(ye=V.alternate,ye===null)throw Error(n(387));ye.memoizedState.memoizedState!==V.memoizedState.memoizedState&&(h!==null?h.push(kw):h=[kw])}V=V.return}h!==null&&vv(p,h,b,E),p.flags|=262144}function bv(h){for(h=h.firstContext;h!==null;){if(!Ni(h.context._currentValue,h.memoizedValue))return!0;h=h.next}return!1}function td(h){Ei=h,ef=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function ri(h){return yv(Ei,h)}function uh(h,p){return Ei===null&&td(h),yv(h,p)}function yv(h,p){var b=p._currentValue;if(p={context:p,memoizedValue:b,next:null},ef===null){if(h===null)throw Error(n(308));ef=p,h.dependencies={lanes:0,firstContext:p},h.flags|=524288}else ef=ef.next=p;return b}var vB=typeof AbortController<"u"?AbortController:function(){var h=[],p=this.signal={aborted:!1,addEventListener:function(b,E){h.push(E)}};this.abort=function(){p.aborted=!0,h.forEach(function(b){return b()})}},LE=e.unstable_scheduleCallback,bB=e.unstable_NormalPriority,ni={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xy(){return{controller:new vB,data:new Map,refCount:0}}function cg(h){h.refCount--,h.refCount===0&&LE(bB,function(){h.controller.abort()})}var ug=null,Yy=0,j0=0,tf=null;function yB(h,p){if(ug===null){var b=ug=[];Yy=0,j0=tI(),tf={status:"pending",value:void 0,then:function(E){b.push(E)}}}return Yy++,p.then(ME,ME),p}function ME(){if(--Yy===0&&ug!==null){tf!==null&&(tf.status="fulfilled");var h=ug;ug=null,j0=0,tf=null;for(var p=0;p<h.length;p++)(0,h[p])()}}function UE(h,p){var b=[],E={status:"pending",value:null,reason:null,then:function(V){b.push(V)}};return h.then(function(){E.status="fulfilled",E.value=p;for(var V=0;V<b.length;V++)(0,b[V])(p)},function(V){for(E.status="rejected",E.reason=V,V=0;V<b.length;V++)(0,b[V])(void 0)}),E}var O=Q.S;Q.S=function(h,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&yB(h,p),O!==null&&O(h,p)};var G=Y(null);function ne(){var h=G.current;return h!==null?h:$a.pooledCache}function he(h,p){p===null?D(G,G.current):D(G,p.pool)}function Ce(){var h=ne();return h===null?null:{parent:ni._currentValue,pool:h}}var _e=Error(n(460)),Te=Error(n(474)),Oe=Error(n(542)),Le={then:function(){}};function $e(h){return h=h.status,h==="fulfilled"||h==="rejected"}function nt(){}function pt(h,p,b){switch(b=h[b],b===void 0?h.push(p):b!==p&&(p.then(nt,nt),p=b),p.status){case"fulfilled":return p.value;case"rejected":throw h=p.reason,Lt(h),h;default:if(typeof p.status=="string")p.then(nt,nt);else{if(h=$a,h!==null&&100<h.shellSuspendCounter)throw Error(n(482));h=p,h.status="pending",h.then(function(E){if(p.status==="pending"){var V=p;V.status="fulfilled",V.value=E}},function(E){if(p.status==="pending"){var V=p;V.status="rejected",V.reason=E}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw h=p.reason,Lt(h),h}throw At=p,_e}}var At=null;function ct(){if(At===null)throw Error(n(459));var h=At;return At=null,h}function Lt(h){if(h===_e||h===Oe)throw Error(n(483))}var Nt=!1;function at(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function it(h,p){h=h.updateQueue,p.updateQueue===h&&(p.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function Dt(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function Mt(h,p,b){var E=h.updateQueue;if(E===null)return null;if(E=E.shared,(wa&2)!==0){var V=E.pending;return V===null?p.next=p:(p.next=V.next,V.next=p),E.pending=p,p=y0(h),mv(h,null,b),p}return sh(h,E,p,b),y0(h)}function Ft(h,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194048)!==0)){var E=p.lanes;E&=h.pendingLanes,b|=E,p.lanes=b,Yr(h,b)}}function cr(h,p){var b=h.updateQueue,E=h.alternate;if(E!==null&&(E=E.updateQueue,b===E)){var V=null,ee=null;if(b=b.firstBaseUpdate,b!==null){do{var ye={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};ee===null?V=ee=ye:ee=ee.next=ye,b=b.next}while(b!==null);ee===null?V=ee=p:ee=ee.next=p}else V=ee=p;b={baseState:E.baseState,firstBaseUpdate:V,lastBaseUpdate:ee,shared:E.shared,callbacks:E.callbacks},h.updateQueue=b;return}h=b.lastBaseUpdate,h===null?b.firstBaseUpdate=p:h.next=p,b.lastBaseUpdate=p}var er=!1;function Er(){if(er){var h=tf;if(h!==null)throw h}}function ar(h,p,b,E){er=!1;var V=h.updateQueue;Nt=!1;var ee=V.firstBaseUpdate,ye=V.lastBaseUpdate,Re=V.shared.pending;if(Re!==null){V.shared.pending=null;var Je=Re,xt=Je.next;Je.next=null,ye===null?ee=xt:ye.next=xt,ye=Je;var Pt=h.alternate;Pt!==null&&(Pt=Pt.updateQueue,Re=Pt.lastBaseUpdate,Re!==ye&&(Re===null?Pt.firstBaseUpdate=xt:Re.next=xt,Pt.lastBaseUpdate=Je))}if(ee!==null){var Ht=V.baseState;ye=0,Pt=xt=Je=null,Re=ee;do{var yt=Re.lane&-536870913,wt=yt!==Re.lane;if(wt?(Hn&yt)===yt:(E&yt)===yt){yt!==0&&yt===j0&&(er=!0),Pt!==null&&(Pt=Pt.next={lane:0,tag:Re.tag,payload:Re.payload,callback:null,next:null});e:{var Kr=h,Lr=Re;yt=p;var Da=b;switch(Lr.tag){case 1:if(Kr=Lr.payload,typeof Kr=="function"){Ht=Kr.call(Da,Ht,yt);break e}Ht=Kr;break e;case 3:Kr.flags=Kr.flags&-65537|128;case 0:if(Kr=Lr.payload,yt=typeof Kr=="function"?Kr.call(Da,Ht,yt):Kr,yt==null)break e;Ht=d({},Ht,yt);break e;case 2:Nt=!0}}yt=Re.callback,yt!==null&&(h.flags|=64,wt&&(h.flags|=8192),wt=V.callbacks,wt===null?V.callbacks=[yt]:wt.push(yt))}else wt={lane:yt,tag:Re.tag,payload:Re.payload,callback:Re.callback,next:null},Pt===null?(xt=Pt=wt,Je=Ht):Pt=Pt.next=wt,ye|=yt;if(Re=Re.next,Re===null){if(Re=V.shared.pending,Re===null)break;wt=Re,Re=wt.next,wt.next=null,V.lastBaseUpdate=wt,V.shared.pending=null}}while(!0);Pt===null&&(Je=Ht),V.baseState=Je,V.firstBaseUpdate=xt,V.lastBaseUpdate=Pt,ee===null&&(V.shared.lanes=0),mm|=ye,h.lanes=ye,h.memoizedState=Ht}}function Mn(h,p){if(typeof h!="function")throw Error(n(191,h));h.call(p)}function Jn(h,p){var b=h.callbacks;if(b!==null)for(h.callbacks=null,h=0;h<b.length;h++)Mn(b[h],p)}var pn=Y(null),dn=Y(0);function da(h,p){h=F0,D(dn,h),D(pn,p),F0=h|p.baseLanes}function Zn(){D(dn,F0),D(pn,pn.current)}function tn(){F0=dn.current,R(pn),R(dn)}var ya=0,Or=null,Vr=null,Pn=null,Un=!1,ji=!1,ai=!1,ys=0,ws=0,Os=null,yc=0;function ea(){throw Error(n(321))}function Ps(h,p){if(p===null)return!1;for(var b=0;b<p.length&&b<h.length;b++)if(!Ni(h[b],p[b]))return!1;return!0}function nu(h,p,b,E,V,ee){return ya=ee,Or=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,Q.H=h===null||h.memoizedState===null?SQ:_Q,ai=!1,ee=b(E,V),ai=!1,ji&&(ee=k0(p,b,E,V)),dh(h),ee}function dh(h){Q.H=JE;var p=Vr!==null&&Vr.next!==null;if(ya=0,Pn=Vr=Or=null,Un=!1,ws=0,Os=null,p)throw Error(n(300));h===null||ao||(h=h.dependencies,h!==null&&bv(h)&&(ao=!0))}function k0(h,p,b,E){Or=h;var V=0;do{if(ji&&(Os=null),ws=0,ji=!1,25<=V)throw Error(n(301));if(V+=1,Pn=Vr=null,h.updateQueue!=null){var ee=h.updateQueue;ee.lastEffect=null,ee.events=null,ee.stores=null,ee.memoCache!=null&&(ee.memoCache.index=0)}Q.H=Ube,ee=p(b,E)}while(ji);return ee}function fh(){var h=Q.H,p=h.useState()[0];return p=typeof p.then=="function"?hh(p):p,h=h.useState()[0],(Vr!==null?Vr.memoizedState:null)!==h&&(Or.flags|=1024),p}function Va(){var h=ys!==0;return ys=0,h}function dg(h,p,b){p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~b}function wv(h){if(Un){for(h=h.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}Un=!1}ya=0,Pn=Vr=Or=null,ji=!1,ws=ys=0,Os=null}function _o(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?Or.memoizedState=Pn=h:Pn=Pn.next=h,Pn}function Ja(){if(Vr===null){var h=Or.alternate;h=h!==null?h.memoizedState:null}else h=Vr.next;var p=Pn===null?Or.memoizedState:Pn.next;if(p!==null)Pn=p,Vr=h;else{if(h===null)throw Or.alternate===null?Error(n(467)):Error(n(310));Vr=h,h={memoizedState:Vr.memoizedState,baseState:Vr.baseState,baseQueue:Vr.baseQueue,queue:Vr.queue,next:null},Pn===null?Or.memoizedState=Pn=h:Pn=Pn.next=h}return Pn}function S0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hh(h){var p=ws;return ws+=1,Os===null&&(Os=[]),h=pt(Os,h,p),p=Or,(Pn===null?p.memoizedState:Pn.next)===null&&(p=p.alternate,Q.H=p===null||p.memoizedState===null?SQ:_Q),h}function al(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return hh(h);if(h.$$typeof===C)return ri(h)}throw Error(n(438,String(h)))}function Ah(h){var p=null,b=Or.updateQueue;if(b!==null&&(p=b.memoCache),p==null){var E=Or.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(p={data:E.data.map(function(V){return V.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),b===null&&(b=S0(),Or.updateQueue=b),b.memoCache=p,b=p.data[p.index],b===void 0)for(b=p.data[p.index]=Array(h),E=0;E<h;E++)b[E]=M;return p.index++,b}function sl(h,p){return typeof p=="function"?p(h):p}function fg(h){var p=Ja();return am(p,Vr,h)}function am(h,p,b){var E=h.queue;if(E===null)throw Error(n(311));E.lastRenderedReducer=b;var V=h.baseQueue,ee=E.pending;if(ee!==null){if(V!==null){var ye=V.next;V.next=ee.next,ee.next=ye}p.baseQueue=V=ee,E.pending=null}if(ee=h.baseState,V===null)h.memoizedState=ee;else{p=V.next;var Re=ye=null,Je=null,xt=p,Pt=!1;do{var Ht=xt.lane&-536870913;if(Ht!==xt.lane?(Hn&Ht)===Ht:(ya&Ht)===Ht){var yt=xt.revertLane;if(yt===0)Je!==null&&(Je=Je.next={lane:0,revertLane:0,action:xt.action,hasEagerState:xt.hasEagerState,eagerState:xt.eagerState,next:null}),Ht===j0&&(Pt=!0);else if((ya&yt)===yt){xt=xt.next,yt===j0&&(Pt=!0);continue}else Ht={lane:0,revertLane:xt.revertLane,action:xt.action,hasEagerState:xt.hasEagerState,eagerState:xt.eagerState,next:null},Je===null?(Re=Je=Ht,ye=ee):Je=Je.next=Ht,Or.lanes|=yt,mm|=yt;Ht=xt.action,ai&&b(ee,Ht),ee=xt.hasEagerState?xt.eagerState:b(ee,Ht)}else yt={lane:Ht,revertLane:xt.revertLane,action:xt.action,hasEagerState:xt.hasEagerState,eagerState:xt.eagerState,next:null},Je===null?(Re=Je=yt,ye=ee):Je=Je.next=yt,Or.lanes|=Ht,mm|=Ht;xt=xt.next}while(xt!==null&&xt!==p);if(Je===null?ye=ee:Je.next=Re,!Ni(ee,h.memoizedState)&&(ao=!0,Pt&&(b=tf,b!==null)))throw b;h.memoizedState=ee,h.baseState=ye,h.baseQueue=Je,E.lastRenderedState=ee}return V===null&&(E.lanes=0),[h.memoizedState,E.dispatch]}function Nv(h){var p=Ja(),b=p.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=h;var E=b.dispatch,V=b.pending,ee=p.memoizedState;if(V!==null){b.pending=null;var ye=V=V.next;do ee=h(ee,ye.action),ye=ye.next;while(ye!==V);Ni(ee,p.memoizedState)||(ao=!0),p.memoizedState=ee,p.baseQueue===null&&(p.baseState=ee),b.lastRenderedState=ee}return[ee,E]}function hg(h,p,b){var E=Or,V=Ja(),ee=qn;if(ee){if(b===void 0)throw Error(n(407));b=b()}else b=p();var ye=!Ni((Vr||V).memoizedState,b);ye&&(V.memoizedState=b,ao=!0),V=V.queue;var Re=sm.bind(null,E,V,h);if(lm(2048,8,Re,[h]),V.getSnapshot!==p||ye||Pn!==null&&Pn.memoizedState.tag&1){if(E.flags|=2048,nf(9,gg(),Ag.bind(null,E,V,b,p),null),$a===null)throw Error(n(349));ee||(ya&124)!==0||Cv(E,p,b)}return b}function Cv(h,p,b){h.flags|=16384,h={getSnapshot:p,value:b},p=Or.updateQueue,p===null?(p=S0(),Or.updateQueue=p,p.stores=[h]):(b=p.stores,b===null?p.stores=[h]:b.push(h))}function Ag(h,p,b,E){p.value=b,p.getSnapshot=E,HE(p)&&QE(h)}function sm(h,p,b){return b(function(){HE(p)&&QE(h)})}function HE(h){var p=h.getSnapshot;h=h.value;try{var b=p();return!Ni(h,b)}catch{return!0}}function QE(h){var p=Kd(h,2);p!==null&&cu(p,h,2)}function mg(h){var p=_o();if(typeof h=="function"){var b=h;if(h=b(),ai){me(!0);try{b()}finally{me(!1)}}}return p.memoizedState=p.baseState=h,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sl,lastRenderedState:h},p}function rf(h,p,b,E){return h.baseState=b,am(h,Vr,typeof E=="function"?E:sl)}function wB(h,p,b,E,V){if(YE(h))throw Error(n(485));if(h=p.action,h!==null){var ee={payload:V,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ye){ee.listeners.push(ye)}};Q.T!==null?b(!0):ee.isTransition=!1,E(ee),b=p.pending,b===null?(ee.next=p.pending=ee,VE(p,ee)):(ee.next=b.next,p.pending=b.next=ee)}}function VE(h,p){var b=p.action,E=p.payload,V=h.state;if(p.isTransition){var ee=Q.T,ye={};Q.T=ye;try{var Re=b(V,E),Je=Q.S;Je!==null&&Je(ye,Re),$E(h,p,Re)}catch(xt){im(h,p,xt)}finally{Q.T=ee}}else try{ee=b(V,E),$E(h,p,ee)}catch(xt){im(h,p,xt)}}function $E(h,p,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(E){Jy(h,p,E)},function(E){return im(h,p,E)}):Jy(h,p,b)}function Jy(h,p,b){p.status="fulfilled",p.value=b,Zy(p),h.state=b,p=h.pending,p!==null&&(b=p.next,b===p?h.pending=null:(b=b.next,p.next=b,VE(h,b)))}function im(h,p,b){var E=h.pending;if(h.pending=null,E!==null){E=E.next;do p.status="rejected",p.reason=b,Zy(p),p=p.next;while(p!==E)}h.action=null}function Zy(h){h=h.listeners;for(var p=0;p<h.length;p++)(0,h[p])()}function ew(h,p){return p}function pg(h,p){if(qn){var b=$a.formState;if(b!==null){e:{var E=Or;if(qn){if(us){t:{for(var V=us,ee=Ju;V.nodeType!==8;){if(!ee){V=null;break t}if(V=lf(V.nextSibling),V===null){V=null;break t}}ee=V.data,V=ee==="F!"||ee==="F"?V:null}if(V){us=lf(V.nextSibling),E=V.data==="F!";break e}}E0(E)}E=!1}E&&(p=b[0])}}return b=_o(),b.memoizedState=b.baseState=p,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ew,lastRenderedState:p},b.queue=E,b=EQ.bind(null,Or,E),E.dispatch=b,E=mg(!1),ee=NB.bind(null,Or,!1,E.queue),E=_o(),V={state:p,dispatch:null,action:h,pending:null},E.queue=V,b=wB.bind(null,Or,V,ee,b),V.dispatch=b,E.memoizedState=h,[p,b,!1]}function Ev(h){var p=Ja();return om(p,Vr,h)}function om(h,p,b){if(p=am(h,p,ew)[0],h=fg(sl)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var E=hh(p)}catch(ye){throw ye===_e?Oe:ye}else E=p;p=Ja();var V=p.queue,ee=V.dispatch;return b!==p.memoizedState&&(Or.flags|=2048,nf(9,gg(),zE.bind(null,V,b),null)),[E,ee,h]}function zE(h,p){h.action=p}function GE(h){var p=Ja(),b=Vr;if(b!==null)return om(p,b,h);Ja(),p=p.memoizedState,b=Ja();var E=b.queue.dispatch;return b.memoizedState=h,[p,E,!1]}function nf(h,p,b,E){return h={tag:h,create:b,deps:E,inst:p,next:null},p=Or.updateQueue,p===null&&(p=S0(),Or.updateQueue=p),b=p.lastEffect,b===null?p.lastEffect=h.next=h:(E=b.next,b.next=h,h.next=E,p.lastEffect=h),h}function gg(){return{destroy:void 0,resource:void 0}}function jv(){return Ja().memoizedState}function au(h,p,b,E){var V=_o();E=E===void 0?null:E,Or.flags|=h,V.memoizedState=nf(1|p,gg(),b,E)}function lm(h,p,b,E){var V=Ja();E=E===void 0?null:E;var ee=V.memoizedState.inst;Vr!==null&&E!==null&&Ps(E,Vr.memoizedState.deps)?V.memoizedState=nf(p,ee,b,E):(Or.flags|=h,V.memoizedState=nf(1|p,ee,b,E))}function tw(h,p){au(8390656,8,h,p)}function qE(h,p){lm(2048,8,h,p)}function rw(h,p){return lm(4,2,h,p)}function _0(h,p){return lm(4,4,h,p)}function KE(h,p){if(typeof p=="function"){h=h();var b=p(h);return function(){typeof b=="function"?b():p(null)}}if(p!=null)return h=h(),p.current=h,function(){p.current=null}}function nw(h,p,b){b=b!=null?b.concat([h]):null,lm(4,4,KE.bind(null,p,h),b)}function aw(){}function sw(h,p){var b=Ja();p=p===void 0?null:p;var E=b.memoizedState;return p!==null&&Ps(p,E[1])?E[0]:(b.memoizedState=[h,p],h)}function WE(h,p){var b=Ja();p=p===void 0?null:p;var E=b.memoizedState;if(p!==null&&Ps(p,E[1]))return E[0];if(E=h(),ai){me(!0);try{h()}finally{me(!1)}}return b.memoizedState=[E,p],E}function T0(h,p,b){return b===void 0||(ya&1073741824)!==0?h.memoizedState=p:(h.memoizedState=b,h=yV(),Or.lanes|=h,mm|=h,b)}function kv(h,p,b,E){return Ni(b,p)?b:pn.current!==null?(h=T0(h,b,E),Ni(h,p)||(ao=!0),h):(ya&42)===0?(ao=!0,h.memoizedState=b):(h=yV(),Or.lanes|=h,mm|=h,p)}function xg(h,p,b,E,V){var ee=z.p;z.p=ee!==0&&8>ee?ee:8;var ye=Q.T,Re={};Q.T=Re,NB(h,!1,p,b);try{var Je=V(),xt=Q.S;if(xt!==null&&xt(Re,Je),Je!==null&&typeof Je=="object"&&typeof Je.then=="function"){var Pt=UE(Je,E);cw(h,p,Pt,lu(h))}else cw(h,p,E,lu(h))}catch(Ht){cw(h,p,{then:function(){},status:"rejected",reason:Ht},lu())}finally{z.p=ee,Q.T=ye}}function af(){}function rd(h,p,b,E){if(h.tag!==5)throw Error(n(476));var V=sf(h).queue;xg(h,V,p,K,b===null?af:function(){return vg(h),b(E)})}function sf(h){var p=h.memoizedState;if(p!==null)return p;p={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sl,lastRenderedState:K},next:null};var b={};return p.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sl,lastRenderedState:b},next:null},h.memoizedState=p,h=h.alternate,h!==null&&(h.memoizedState=p),p}function vg(h){var p=sf(h).next.queue;cw(h,p,{},lu())}function bg(){return ri(kw)}function iw(){return Ja().memoizedState}function XE(){return Ja().memoizedState}function ow(h){for(var p=h.return;p!==null;){switch(p.tag){case 24:case 3:var b=lu();h=Dt(b);var E=Mt(p,h,b);E!==null&&(cu(E,p,b),Ft(E,p,b)),p={cache:Xy()},h.payload=p;return}p=p.return}}function lw(h,p,b){var E=lu();b={lane:E,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null},YE(h)?jQ(p,b):(b=ih(h,p,b,E),b!==null&&(cu(b,h,E),kQ(b,p,E)))}function EQ(h,p,b){var E=lu();cw(h,p,b,E)}function cw(h,p,b,E){var V={lane:E,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null};if(YE(h))jQ(p,V);else{var ee=h.alternate;if(h.lanes===0&&(ee===null||ee.lanes===0)&&(ee=p.lastRenderedReducer,ee!==null))try{var ye=p.lastRenderedState,Re=ee(ye,b);if(V.hasEagerState=!0,V.eagerState=Re,Ni(Re,ye))return sh(h,p,V,0),$a===null&&xc(),!1}catch{}finally{}if(b=ih(h,p,V,E),b!==null)return cu(b,h,E),kQ(b,p,E),!0}return!1}function NB(h,p,b,E){if(E={lane:2,revertLane:tI(),action:E,hasEagerState:!1,eagerState:null,next:null},YE(h)){if(p)throw Error(n(479))}else p=ih(h,b,E,2),p!==null&&cu(p,h,2)}function YE(h){var p=h.alternate;return h===Or||p!==null&&p===Or}function jQ(h,p){ji=Un=!0;var b=h.pending;b===null?p.next=p:(p.next=b.next,b.next=p),h.pending=p}function kQ(h,p,b){if((b&4194048)!==0){var E=p.lanes;E&=h.pendingLanes,b|=E,p.lanes=b,Yr(h,b)}}var JE={readContext:ri,use:al,useCallback:ea,useContext:ea,useEffect:ea,useImperativeHandle:ea,useLayoutEffect:ea,useInsertionEffect:ea,useMemo:ea,useReducer:ea,useRef:ea,useState:ea,useDebugValue:ea,useDeferredValue:ea,useTransition:ea,useSyncExternalStore:ea,useId:ea,useHostTransitionStatus:ea,useFormState:ea,useActionState:ea,useOptimistic:ea,useMemoCache:ea,useCacheRefresh:ea},SQ={readContext:ri,use:al,useCallback:function(h,p){return _o().memoizedState=[h,p===void 0?null:p],h},useContext:ri,useEffect:tw,useImperativeHandle:function(h,p,b){b=b!=null?b.concat([h]):null,au(4194308,4,KE.bind(null,p,h),b)},useLayoutEffect:function(h,p){return au(4194308,4,h,p)},useInsertionEffect:function(h,p){au(4,2,h,p)},useMemo:function(h,p){var b=_o();p=p===void 0?null:p;var E=h();if(ai){me(!0);try{h()}finally{me(!1)}}return b.memoizedState=[E,p],E},useReducer:function(h,p,b){var E=_o();if(b!==void 0){var V=b(p);if(ai){me(!0);try{b(p)}finally{me(!1)}}}else V=p;return E.memoizedState=E.baseState=V,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:V},E.queue=h,h=h.dispatch=lw.bind(null,Or,h),[E.memoizedState,h]},useRef:function(h){var p=_o();return h={current:h},p.memoizedState=h},useState:function(h){h=mg(h);var p=h.queue,b=EQ.bind(null,Or,p);return p.dispatch=b,[h.memoizedState,b]},useDebugValue:aw,useDeferredValue:function(h,p){var b=_o();return T0(b,h,p)},useTransition:function(){var h=mg(!1);return h=xg.bind(null,Or,h.queue,!0,!1),_o().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,p,b){var E=Or,V=_o();if(qn){if(b===void 0)throw Error(n(407));b=b()}else{if(b=p(),$a===null)throw Error(n(349));(Hn&124)!==0||Cv(E,p,b)}V.memoizedState=b;var ee={value:b,getSnapshot:p};return V.queue=ee,tw(sm.bind(null,E,ee,h),[h]),E.flags|=2048,nf(9,gg(),Ag.bind(null,E,ee,b,p),null),b},useId:function(){var h=_o(),p=$a.identifierPrefix;if(qn){var b=Jd,E=Yd;b=(E&~(1<<32-Ve(E)-1)).toString(32)+b,p=""+p+"R"+b,b=ys++,0<b&&(p+="H"+b.toString(32)),p+=""}else b=yc++,p=""+p+"r"+b.toString(32)+"";return h.memoizedState=p},useHostTransitionStatus:bg,useFormState:pg,useActionState:pg,useOptimistic:function(h){var p=_o();p.memoizedState=p.baseState=h;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=b,p=NB.bind(null,Or,!0,b),b.dispatch=p,[h,p]},useMemoCache:Ah,useCacheRefresh:function(){return _o().memoizedState=ow.bind(null,Or)}},_Q={readContext:ri,use:al,useCallback:sw,useContext:ri,useEffect:qE,useImperativeHandle:nw,useInsertionEffect:rw,useLayoutEffect:_0,useMemo:WE,useReducer:fg,useRef:jv,useState:function(){return fg(sl)},useDebugValue:aw,useDeferredValue:function(h,p){var b=Ja();return kv(b,Vr.memoizedState,h,p)},useTransition:function(){var h=fg(sl)[0],p=Ja().memoizedState;return[typeof h=="boolean"?h:hh(h),p]},useSyncExternalStore:hg,useId:iw,useHostTransitionStatus:bg,useFormState:Ev,useActionState:Ev,useOptimistic:function(h,p){var b=Ja();return rf(b,Vr,h,p)},useMemoCache:Ah,useCacheRefresh:XE},Ube={readContext:ri,use:al,useCallback:sw,useContext:ri,useEffect:qE,useImperativeHandle:nw,useInsertionEffect:rw,useLayoutEffect:_0,useMemo:WE,useReducer:Nv,useRef:jv,useState:function(){return Nv(sl)},useDebugValue:aw,useDeferredValue:function(h,p){var b=Ja();return Vr===null?T0(b,h,p):kv(b,Vr.memoizedState,h,p)},useTransition:function(){var h=Nv(sl)[0],p=Ja().memoizedState;return[typeof h=="boolean"?h:hh(h),p]},useSyncExternalStore:hg,useId:iw,useHostTransitionStatus:bg,useFormState:GE,useActionState:GE,useOptimistic:function(h,p){var b=Ja();return Vr!==null?rf(b,Vr,h,p):(b.baseState=h,[h,b.queue.dispatch])},useMemoCache:Ah,useCacheRefresh:XE},Sv=null,uw=0;function ZE(h){var p=uw;return uw+=1,Sv===null&&(Sv=[]),pt(Sv,h,p)}function dw(h,p){p=p.props.ref,h.ref=p!==void 0?p:null}function ej(h,p){throw p.$$typeof===f?Error(n(525)):(h=Object.prototype.toString.call(p),Error(n(31,h==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":h)))}function TQ(h){var p=h._init;return p(h._payload)}function BQ(h){function p(dt,st){if(h){var mt=dt.deletions;mt===null?(dt.deletions=[st],dt.flags|=16):mt.push(st)}}function b(dt,st){if(!h)return null;for(;st!==null;)p(dt,st),st=st.sibling;return null}function E(dt){for(var st=new Map;dt!==null;)dt.key!==null?st.set(dt.key,dt):st.set(dt.index,dt),dt=dt.sibling;return st}function V(dt,st){return dt=Yu(dt,st),dt.index=0,dt.sibling=null,dt}function ee(dt,st,mt){return dt.index=mt,h?(mt=dt.alternate,mt!==null?(mt=mt.index,mt<st?(dt.flags|=67108866,st):mt):(dt.flags|=67108866,st)):(dt.flags|=1048576,st)}function ye(dt){return h&&dt.alternate===null&&(dt.flags|=67108866),dt}function Re(dt,st,mt,Rt){return st===null||st.tag!==6?(st=pv(mt,dt.mode,Rt),st.return=dt,st):(st=V(st,mt),st.return=dt,st)}function Je(dt,st,mt,Rt){var br=mt.type;return br===g?Pt(dt,st,mt.props.children,Rt,mt.key):st!==null&&(st.elementType===br||typeof br=="object"&&br!==null&&br.$$typeof===k&&TQ(br)===st.type)?(st=V(st,mt.props),dw(st,mt),st.return=dt,st):(st=w0(mt.type,mt.key,mt.props,null,dt.mode,Rt),dw(st,mt),st.return=dt,st)}function xt(dt,st,mt,Rt){return st===null||st.tag!==4||st.stateNode.containerInfo!==mt.containerInfo||st.stateNode.implementation!==mt.implementation?(st=ig(mt,dt.mode,Rt),st.return=dt,st):(st=V(st,mt.children||[]),st.return=dt,st)}function Pt(dt,st,mt,Rt,br){return st===null||st.tag!==7?(st=Wd(mt,dt.mode,Rt,br),st.return=dt,st):(st=V(st,mt),st.return=dt,st)}function Ht(dt,st,mt){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return st=pv(""+st,dt.mode,mt),st.return=dt,st;if(typeof st=="object"&&st!==null){switch(st.$$typeof){case A:return mt=w0(st.type,st.key,st.props,null,dt.mode,mt),dw(mt,st),mt.return=dt,mt;case m:return st=ig(st,dt.mode,mt),st.return=dt,st;case k:var Rt=st._init;return st=Rt(st._payload),Ht(dt,st,mt)}if(q(st)||S(st))return st=Wd(st,dt.mode,mt,null),st.return=dt,st;if(typeof st.then=="function")return Ht(dt,ZE(st),mt);if(st.$$typeof===C)return Ht(dt,uh(dt,st),mt);ej(dt,st)}return null}function yt(dt,st,mt,Rt){var br=st!==null?st.key:null;if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return br!==null?null:Re(dt,st,""+mt,Rt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case A:return mt.key===br?Je(dt,st,mt,Rt):null;case m:return mt.key===br?xt(dt,st,mt,Rt):null;case k:return br=mt._init,mt=br(mt._payload),yt(dt,st,mt,Rt)}if(q(mt)||S(mt))return br!==null?null:Pt(dt,st,mt,Rt,null);if(typeof mt.then=="function")return yt(dt,st,ZE(mt),Rt);if(mt.$$typeof===C)return yt(dt,st,uh(dt,mt),Rt);ej(dt,mt)}return null}function wt(dt,st,mt,Rt,br){if(typeof Rt=="string"&&Rt!==""||typeof Rt=="number"||typeof Rt=="bigint")return dt=dt.get(mt)||null,Re(st,dt,""+Rt,br);if(typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case A:return dt=dt.get(Rt.key===null?mt:Rt.key)||null,Je(st,dt,Rt,br);case m:return dt=dt.get(Rt.key===null?mt:Rt.key)||null,xt(st,dt,Rt,br);case k:var En=Rt._init;return Rt=En(Rt._payload),wt(dt,st,mt,Rt,br)}if(q(Rt)||S(Rt))return dt=dt.get(mt)||null,Pt(st,dt,Rt,br,null);if(typeof Rt.then=="function")return wt(dt,st,mt,ZE(Rt),br);if(Rt.$$typeof===C)return wt(dt,st,mt,uh(st,Rt),br);ej(st,Rt)}return null}function Kr(dt,st,mt,Rt){for(var br=null,En=null,kr=st,Mr=st=0,io=null;kr!==null&&Mr<mt.length;Mr++){kr.index>Mr?(io=kr,kr=null):io=kr.sibling;var ta=yt(dt,kr,mt[Mr],Rt);if(ta===null){kr===null&&(kr=io);break}h&&kr&&ta.alternate===null&&p(dt,kr),st=ee(ta,st,Mr),En===null?br=ta:En.sibling=ta,En=ta,kr=io}if(Mr===mt.length)return b(dt,kr),qn&&C0(dt,Mr),br;if(kr===null){for(;Mr<mt.length;Mr++)kr=Ht(dt,mt[Mr],Rt),kr!==null&&(st=ee(kr,st,Mr),En===null?br=kr:En.sibling=kr,En=kr);return qn&&C0(dt,Mr),br}for(kr=E(kr);Mr<mt.length;Mr++)io=wt(kr,dt,Mr,mt[Mr],Rt),io!==null&&(h&&io.alternate!==null&&kr.delete(io.key===null?Mr:io.key),st=ee(io,st,Mr),En===null?br=io:En.sibling=io,En=io);return h&&kr.forEach(function(Cm){return p(dt,Cm)}),qn&&C0(dt,Mr),br}function Lr(dt,st,mt,Rt){if(mt==null)throw Error(n(151));for(var br=null,En=null,kr=st,Mr=st=0,io=null,ta=mt.next();kr!==null&&!ta.done;Mr++,ta=mt.next()){kr.index>Mr?(io=kr,kr=null):io=kr.sibling;var Cm=yt(dt,kr,ta.value,Rt);if(Cm===null){kr===null&&(kr=io);break}h&&kr&&Cm.alternate===null&&p(dt,kr),st=ee(Cm,st,Mr),En===null?br=Cm:En.sibling=Cm,En=Cm,kr=io}if(ta.done)return b(dt,kr),qn&&C0(dt,Mr),br;if(kr===null){for(;!ta.done;Mr++,ta=mt.next())ta=Ht(dt,ta.value,Rt),ta!==null&&(st=ee(ta,st,Mr),En===null?br=ta:En.sibling=ta,En=ta);return qn&&C0(dt,Mr),br}for(kr=E(kr);!ta.done;Mr++,ta=mt.next())ta=wt(kr,dt,Mr,ta.value,Rt),ta!==null&&(h&&ta.alternate!==null&&kr.delete(ta.key===null?Mr:ta.key),st=ee(ta,st,Mr),En===null?br=ta:En.sibling=ta,En=ta);return h&&kr.forEach(function(H1e){return p(dt,H1e)}),qn&&C0(dt,Mr),br}function Da(dt,st,mt,Rt){if(typeof mt=="object"&&mt!==null&&mt.type===g&&mt.key===null&&(mt=mt.props.children),typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case A:e:{for(var br=mt.key;st!==null;){if(st.key===br){if(br=mt.type,br===g){if(st.tag===7){b(dt,st.sibling),Rt=V(st,mt.props.children),Rt.return=dt,dt=Rt;break e}}else if(st.elementType===br||typeof br=="object"&&br!==null&&br.$$typeof===k&&TQ(br)===st.type){b(dt,st.sibling),Rt=V(st,mt.props),dw(Rt,mt),Rt.return=dt,dt=Rt;break e}b(dt,st);break}else p(dt,st);st=st.sibling}mt.type===g?(Rt=Wd(mt.props.children,dt.mode,Rt,mt.key),Rt.return=dt,dt=Rt):(Rt=w0(mt.type,mt.key,mt.props,null,dt.mode,Rt),dw(Rt,mt),Rt.return=dt,dt=Rt)}return ye(dt);case m:e:{for(br=mt.key;st!==null;){if(st.key===br)if(st.tag===4&&st.stateNode.containerInfo===mt.containerInfo&&st.stateNode.implementation===mt.implementation){b(dt,st.sibling),Rt=V(st,mt.children||[]),Rt.return=dt,dt=Rt;break e}else{b(dt,st);break}else p(dt,st);st=st.sibling}Rt=ig(mt,dt.mode,Rt),Rt.return=dt,dt=Rt}return ye(dt);case k:return br=mt._init,mt=br(mt._payload),Da(dt,st,mt,Rt)}if(q(mt))return Kr(dt,st,mt,Rt);if(S(mt)){if(br=S(mt),typeof br!="function")throw Error(n(150));return mt=br.call(mt),Lr(dt,st,mt,Rt)}if(typeof mt.then=="function")return Da(dt,st,ZE(mt),Rt);if(mt.$$typeof===C)return Da(dt,st,uh(dt,mt),Rt);ej(dt,mt)}return typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint"?(mt=""+mt,st!==null&&st.tag===6?(b(dt,st.sibling),Rt=V(st,mt),Rt.return=dt,dt=Rt):(b(dt,st),Rt=pv(mt,dt.mode,Rt),Rt.return=dt,dt=Rt),ye(dt)):b(dt,st)}return function(dt,st,mt,Rt){try{uw=0;var br=Da(dt,st,mt,Rt);return Sv=null,br}catch(kr){if(kr===_e||kr===Oe)throw kr;var En=no(29,kr,null,dt.mode);return En.lanes=Rt,En.return=dt,En}finally{}}}var _v=BQ(!0),IQ=BQ(!1),nd=Y(null),mh=null;function cm(h){var p=h.alternate;D(Ui,Ui.current&1),D(nd,h),mh===null&&(p===null||pn.current!==null||p.memoizedState!==null)&&(mh=h)}function DQ(h){if(h.tag===22){if(D(Ui,Ui.current),D(nd,h),mh===null){var p=h.alternate;p!==null&&p.memoizedState!==null&&(mh=h)}}else um()}function um(){D(Ui,Ui.current),D(nd,nd.current)}function B0(h){R(nd),mh===h&&(mh=null),R(Ui)}var Ui=Y(0);function tj(h){for(var p=h;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||hI(b)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function CB(h,p,b,E){p=h.memoizedState,b=b(E,p),b=b==null?p:d({},p,b),h.memoizedState=b,h.lanes===0&&(h.updateQueue.baseState=b)}var EB={enqueueSetState:function(h,p,b){h=h._reactInternals;var E=lu(),V=Dt(E);V.payload=p,b!=null&&(V.callback=b),p=Mt(h,V,E),p!==null&&(cu(p,h,E),Ft(p,h,E))},enqueueReplaceState:function(h,p,b){h=h._reactInternals;var E=lu(),V=Dt(E);V.tag=1,V.payload=p,b!=null&&(V.callback=b),p=Mt(h,V,E),p!==null&&(cu(p,h,E),Ft(p,h,E))},enqueueForceUpdate:function(h,p){h=h._reactInternals;var b=lu(),E=Dt(b);E.tag=2,p!=null&&(E.callback=p),p=Mt(h,E,b),p!==null&&(cu(p,h,b),Ft(p,h,b))}};function OQ(h,p,b,E,V,ee,ye){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(E,ee,ye):p.prototype&&p.prototype.isPureReactComponent?!Jf(b,E)||!Jf(V,ee):!0}function PQ(h,p,b,E){h=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,E),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,E),p.state!==h&&EB.enqueueReplaceState(p,p.state,null)}function yg(h,p){var b=p;if("ref"in p){b={};for(var E in p)E!=="ref"&&(b[E]=p[E])}if(h=h.defaultProps){b===p&&(b=d({},b));for(var V in h)b[V]===void 0&&(b[V]=h[V])}return b}var rj=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)};function FQ(h){rj(h)}function RQ(h){console.error(h)}function LQ(h){rj(h)}function nj(h,p){try{var b=h.onUncaughtError;b(p.value,{componentStack:p.stack})}catch(E){setTimeout(function(){throw E})}}function MQ(h,p,b){try{var E=h.onCaughtError;E(b.value,{componentStack:b.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(V){setTimeout(function(){throw V})}}function jB(h,p,b){return b=Dt(b),b.tag=3,b.payload={element:null},b.callback=function(){nj(h,p)},b}function UQ(h){return h=Dt(h),h.tag=3,h}function HQ(h,p,b,E){var V=b.type.getDerivedStateFromError;if(typeof V=="function"){var ee=E.value;h.payload=function(){return V(ee)},h.callback=function(){MQ(p,b,E)}}var ye=b.stateNode;ye!==null&&typeof ye.componentDidCatch=="function"&&(h.callback=function(){MQ(p,b,E),typeof V!="function"&&(pm===null?pm=new Set([this]):pm.add(this));var Re=E.stack;this.componentDidCatch(E.value,{componentStack:Re!==null?Re:""})})}function Hbe(h,p,b,E,V){if(b.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(p=b.alternate,p!==null&&nm(p,b,V,!0),b=nd.current,b!==null){switch(b.tag){case 13:return mh===null?XB():b.alternate===null&&Fs===0&&(Fs=3),b.flags&=-257,b.flags|=65536,b.lanes=V,E===Le?b.flags|=16384:(p=b.updateQueue,p===null?b.updateQueue=new Set([E]):p.add(E),JB(h,E,V)),!1;case 22:return b.flags|=65536,E===Le?b.flags|=16384:(p=b.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([E])},b.updateQueue=p):(b=p.retryQueue,b===null?p.retryQueue=new Set([E]):b.add(E)),JB(h,E,V)),!1}throw Error(n(435,b.tag))}return JB(h,E,V),XB(),!1}if(qn)return p=nd.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=V,E!==Wy&&(h=Error(n(422),{cause:E}),rm(xn(h,b)))):(E!==Wy&&(p=Error(n(423),{cause:E}),rm(xn(p,b))),h=h.current.alternate,h.flags|=65536,V&=-V,h.lanes|=V,E=xn(E,b),V=jB(h.stateNode,E,V),cr(h,V),Fs!==4&&(Fs=2)),!1;var ee=Error(n(520),{cause:E});if(ee=xn(ee,b),xw===null?xw=[ee]:xw.push(ee),Fs!==4&&(Fs=2),p===null)return!0;E=xn(E,b),b=p;do{switch(b.tag){case 3:return b.flags|=65536,h=V&-V,b.lanes|=h,h=jB(b.stateNode,E,h),cr(b,h),!1;case 1:if(p=b.type,ee=b.stateNode,(b.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||ee!==null&&typeof ee.componentDidCatch=="function"&&(pm===null||!pm.has(ee))))return b.flags|=65536,V&=-V,b.lanes|=V,V=UQ(V),HQ(V,h,b,E),cr(b,V),!1}b=b.return}while(b!==null);return!1}var QQ=Error(n(461)),ao=!1;function To(h,p,b,E){p.child=h===null?IQ(p,null,b,E):_v(p,h.child,b,E)}function VQ(h,p,b,E,V){b=b.render;var ee=p.ref;if("ref"in E){var ye={};for(var Re in E)Re!=="ref"&&(ye[Re]=E[Re])}else ye=E;return td(p),E=nu(h,p,b,ye,ee,V),Re=Va(),h!==null&&!ao?(dg(h,p,V),I0(h,p,V)):(qn&&Re&&og(p),p.flags|=1,To(h,p,E,V),p.child)}function $Q(h,p,b,E,V){if(h===null){var ee=b.type;return typeof ee=="function"&&!em(ee)&&ee.defaultProps===void 0&&b.compare===null?(p.tag=15,p.type=ee,zQ(h,p,ee,E,V)):(h=w0(b.type,null,E,p,p.mode,V),h.ref=p.ref,h.return=p,p.child=h)}if(ee=h.child,!OB(h,V)){var ye=ee.memoizedProps;if(b=b.compare,b=b!==null?b:Jf,b(ye,E)&&h.ref===p.ref)return I0(h,p,V)}return p.flags|=1,h=Yu(ee,E),h.ref=p.ref,h.return=p,p.child=h}function zQ(h,p,b,E,V){if(h!==null){var ee=h.memoizedProps;if(Jf(ee,E)&&h.ref===p.ref)if(ao=!1,p.pendingProps=E=ee,OB(h,V))(h.flags&131072)!==0&&(ao=!0);else return p.lanes=h.lanes,I0(h,p,V)}return kB(h,p,b,E,V)}function GQ(h,p,b){var E=p.pendingProps,V=E.children,ee=h!==null?h.memoizedState:null;if(E.mode==="hidden"){if((p.flags&128)!==0){if(E=ee!==null?ee.baseLanes|b:b,h!==null){for(V=p.child=h.child,ee=0;V!==null;)ee=ee|V.lanes|V.childLanes,V=V.sibling;p.childLanes=ee&~E}else p.childLanes=0,p.child=null;return qQ(h,p,E,b)}if((b&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},h!==null&&he(p,ee!==null?ee.cachePool:null),ee!==null?da(p,ee):Zn(),DQ(p);else return p.lanes=p.childLanes=536870912,qQ(h,p,ee!==null?ee.baseLanes|b:b,b)}else ee!==null?(he(p,ee.cachePool),da(p,ee),um(),p.memoizedState=null):(h!==null&&he(p,null),Zn(),um());return To(h,p,V,b),p.child}function qQ(h,p,b,E){var V=ne();return V=V===null?null:{parent:ni._currentValue,pool:V},p.memoizedState={baseLanes:b,cachePool:V},h!==null&&he(p,null),Zn(),DQ(p),h!==null&&nm(h,p,E,!0),null}function aj(h,p){var b=p.ref;if(b===null)h!==null&&h.ref!==null&&(p.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(n(284));(h===null||h.ref!==b)&&(p.flags|=4194816)}}function kB(h,p,b,E,V){return td(p),b=nu(h,p,b,E,void 0,V),E=Va(),h!==null&&!ao?(dg(h,p,V),I0(h,p,V)):(qn&&E&&og(p),p.flags|=1,To(h,p,b,V),p.child)}function KQ(h,p,b,E,V,ee){return td(p),p.updateQueue=null,b=k0(p,E,b,V),dh(h),E=Va(),h!==null&&!ao?(dg(h,p,ee),I0(h,p,ee)):(qn&&E&&og(p),p.flags|=1,To(h,p,b,ee),p.child)}function WQ(h,p,b,E,V){if(td(p),p.stateNode===null){var ee=Ci,ye=b.contextType;typeof ye=="object"&&ye!==null&&(ee=ri(ye)),ee=new b(E,ee),p.memoizedState=ee.state!==null&&ee.state!==void 0?ee.state:null,ee.updater=EB,p.stateNode=ee,ee._reactInternals=p,ee=p.stateNode,ee.props=E,ee.state=p.memoizedState,ee.refs={},at(p),ye=b.contextType,ee.context=typeof ye=="object"&&ye!==null?ri(ye):Ci,ee.state=p.memoizedState,ye=b.getDerivedStateFromProps,typeof ye=="function"&&(CB(p,b,ye,E),ee.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof ee.getSnapshotBeforeUpdate=="function"||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(ye=ee.state,typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount(),ye!==ee.state&&EB.enqueueReplaceState(ee,ee.state,null),ar(p,E,ee,V),Er(),ee.state=p.memoizedState),typeof ee.componentDidMount=="function"&&(p.flags|=4194308),E=!0}else if(h===null){ee=p.stateNode;var Re=p.memoizedProps,Je=yg(b,Re);ee.props=Je;var xt=ee.context,Pt=b.contextType;ye=Ci,typeof Pt=="object"&&Pt!==null&&(ye=ri(Pt));var Ht=b.getDerivedStateFromProps;Pt=typeof Ht=="function"||typeof ee.getSnapshotBeforeUpdate=="function",Re=p.pendingProps!==Re,Pt||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(Re||xt!==ye)&&PQ(p,ee,E,ye),Nt=!1;var yt=p.memoizedState;ee.state=yt,ar(p,E,ee,V),Er(),xt=p.memoizedState,Re||yt!==xt||Nt?(typeof Ht=="function"&&(CB(p,b,Ht,E),xt=p.memoizedState),(Je=Nt||OQ(p,b,Je,E,yt,xt,ye))?(Pt||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount()),typeof ee.componentDidMount=="function"&&(p.flags|=4194308)):(typeof ee.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=E,p.memoizedState=xt),ee.props=E,ee.state=xt,ee.context=ye,E=Je):(typeof ee.componentDidMount=="function"&&(p.flags|=4194308),E=!1)}else{ee=p.stateNode,it(h,p),ye=p.memoizedProps,Pt=yg(b,ye),ee.props=Pt,Ht=p.pendingProps,yt=ee.context,xt=b.contextType,Je=Ci,typeof xt=="object"&&xt!==null&&(Je=ri(xt)),Re=b.getDerivedStateFromProps,(xt=typeof Re=="function"||typeof ee.getSnapshotBeforeUpdate=="function")||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(ye!==Ht||yt!==Je)&&PQ(p,ee,E,Je),Nt=!1,yt=p.memoizedState,ee.state=yt,ar(p,E,ee,V),Er();var wt=p.memoizedState;ye!==Ht||yt!==wt||Nt||h!==null&&h.dependencies!==null&&bv(h.dependencies)?(typeof Re=="function"&&(CB(p,b,Re,E),wt=p.memoizedState),(Pt=Nt||OQ(p,b,Pt,E,yt,wt,Je)||h!==null&&h.dependencies!==null&&bv(h.dependencies))?(xt||typeof ee.UNSAFE_componentWillUpdate!="function"&&typeof ee.componentWillUpdate!="function"||(typeof ee.componentWillUpdate=="function"&&ee.componentWillUpdate(E,wt,Je),typeof ee.UNSAFE_componentWillUpdate=="function"&&ee.UNSAFE_componentWillUpdate(E,wt,Je)),typeof ee.componentDidUpdate=="function"&&(p.flags|=4),typeof ee.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof ee.componentDidUpdate!="function"||ye===h.memoizedProps&&yt===h.memoizedState||(p.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||ye===h.memoizedProps&&yt===h.memoizedState||(p.flags|=1024),p.memoizedProps=E,p.memoizedState=wt),ee.props=E,ee.state=wt,ee.context=Je,E=Pt):(typeof ee.componentDidUpdate!="function"||ye===h.memoizedProps&&yt===h.memoizedState||(p.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||ye===h.memoizedProps&&yt===h.memoizedState||(p.flags|=1024),E=!1)}return ee=E,aj(h,p),E=(p.flags&128)!==0,ee||E?(ee=p.stateNode,b=E&&typeof b.getDerivedStateFromError!="function"?null:ee.render(),p.flags|=1,h!==null&&E?(p.child=_v(p,h.child,null,V),p.child=_v(p,null,b,V)):To(h,p,b,V),p.memoizedState=ee.state,h=p.child):h=I0(h,p,V),h}function XQ(h,p,b,E){return Gl(),p.flags|=256,To(h,p,b,E),p.child}var SB={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _B(h){return{baseLanes:h,cachePool:Ce()}}function TB(h,p,b){return h=h!==null?h.childLanes&~b:0,p&&(h|=ad),h}function YQ(h,p,b){var E=p.pendingProps,V=!1,ee=(p.flags&128)!==0,ye;if((ye=ee)||(ye=h!==null&&h.memoizedState===null?!1:(Ui.current&2)!==0),ye&&(V=!0,p.flags&=-129),ye=(p.flags&32)!==0,p.flags&=-33,h===null){if(qn){if(V?cm(p):um(),qn){var Re=us,Je;if(Je=Re){e:{for(Je=Re,Re=Ju;Je.nodeType!==8;){if(!Re){Re=null;break e}if(Je=lf(Je.nextSibling),Je===null){Re=null;break e}}Re=Je}Re!==null?(p.memoizedState={dehydrated:Re,treeContext:N0!==null?{id:Yd,overflow:Jd}:null,retryLane:536870912,hydrationErrors:null},Je=no(18,null,null,0),Je.stateNode=Re,Je.return=p,p.child=Je,ti=p,us=null,Je=!0):Je=!1}Je||E0(p)}if(Re=p.memoizedState,Re!==null&&(Re=Re.dehydrated,Re!==null))return hI(Re)?p.lanes=32:p.lanes=536870912,null;B0(p)}return Re=E.children,E=E.fallback,V?(um(),V=p.mode,Re=sj({mode:"hidden",children:Re},V),E=Wd(E,V,b,null),Re.return=p,E.return=p,Re.sibling=E,p.child=Re,V=p.child,V.memoizedState=_B(b),V.childLanes=TB(h,ye,b),p.memoizedState=SB,E):(cm(p),BB(p,Re))}if(Je=h.memoizedState,Je!==null&&(Re=Je.dehydrated,Re!==null)){if(ee)p.flags&256?(cm(p),p.flags&=-257,p=IB(h,p,b)):p.memoizedState!==null?(um(),p.child=h.child,p.flags|=128,p=null):(um(),V=E.fallback,Re=p.mode,E=sj({mode:"visible",children:E.children},Re),V=Wd(V,Re,b,null),V.flags|=2,E.return=p,V.return=p,E.sibling=V,p.child=E,_v(p,h.child,null,b),E=p.child,E.memoizedState=_B(b),E.childLanes=TB(h,ye,b),p.memoizedState=SB,p=V);else if(cm(p),hI(Re)){if(ye=Re.nextSibling&&Re.nextSibling.dataset,ye)var xt=ye.dgst;ye=xt,E=Error(n(419)),E.stack="",E.digest=ye,rm({value:E,source:null,stack:null}),p=IB(h,p,b)}else if(ao||nm(h,p,b,!1),ye=(b&h.childLanes)!==0,ao||ye){if(ye=$a,ye!==null&&(E=b&-b,E=(E&42)!==0?1:Xa(E),E=(E&(ye.suspendedLanes|b))!==0?0:E,E!==0&&E!==Je.retryLane))throw Je.retryLane=E,Kd(h,E),cu(ye,h,E),QQ;Re.data==="$?"||XB(),p=IB(h,p,b)}else Re.data==="$?"?(p.flags|=192,p.child=h.child,p=null):(h=Je.treeContext,us=lf(Re.nextSibling),ti=p,qn=!0,lh=null,Ju=!1,h!==null&&(bc[zl++]=Yd,bc[zl++]=Jd,bc[zl++]=N0,Yd=h.id,Jd=h.overflow,N0=p),p=BB(p,E.children),p.flags|=4096);return p}return V?(um(),V=E.fallback,Re=p.mode,Je=h.child,xt=Je.sibling,E=Yu(Je,{mode:"hidden",children:E.children}),E.subtreeFlags=Je.subtreeFlags&65011712,xt!==null?V=Yu(xt,V):(V=Wd(V,Re,b,null),V.flags|=2),V.return=p,E.return=p,E.sibling=V,p.child=E,E=V,V=p.child,Re=h.child.memoizedState,Re===null?Re=_B(b):(Je=Re.cachePool,Je!==null?(xt=ni._currentValue,Je=Je.parent!==xt?{parent:xt,pool:xt}:Je):Je=Ce(),Re={baseLanes:Re.baseLanes|b,cachePool:Je}),V.memoizedState=Re,V.childLanes=TB(h,ye,b),p.memoizedState=SB,E):(cm(p),b=h.child,h=b.sibling,b=Yu(b,{mode:"visible",children:E.children}),b.return=p,b.sibling=null,h!==null&&(ye=p.deletions,ye===null?(p.deletions=[h],p.flags|=16):ye.push(h)),p.child=b,p.memoizedState=null,b)}function BB(h,p){return p=sj({mode:"visible",children:p},h.mode),p.return=h,h.child=p}function sj(h,p){return h=no(22,h,null,p),h.lanes=0,h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},h}function IB(h,p,b){return _v(p,h.child,null,b),h=BB(p,p.pendingProps.children),h.flags|=2,p.memoizedState=null,h}function JQ(h,p,b){h.lanes|=p;var E=h.alternate;E!==null&&(E.lanes|=p),xv(h.return,p,b)}function DB(h,p,b,E,V){var ee=h.memoizedState;ee===null?h.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:E,tail:b,tailMode:V}:(ee.isBackwards=p,ee.rendering=null,ee.renderingStartTime=0,ee.last=E,ee.tail=b,ee.tailMode=V)}function ZQ(h,p,b){var E=p.pendingProps,V=E.revealOrder,ee=E.tail;if(To(h,p,E.children,b),E=Ui.current,(E&2)!==0)E=E&1|2,p.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=p.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&JQ(h,b,p);else if(h.tag===19)JQ(h,b,p);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===p)break e;for(;h.sibling===null;){if(h.return===null||h.return===p)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}E&=1}switch(D(Ui,E),V){case"forwards":for(b=p.child,V=null;b!==null;)h=b.alternate,h!==null&&tj(h)===null&&(V=b),b=b.sibling;b=V,b===null?(V=p.child,p.child=null):(V=b.sibling,b.sibling=null),DB(p,!1,V,b,ee);break;case"backwards":for(b=null,V=p.child,p.child=null;V!==null;){if(h=V.alternate,h!==null&&tj(h)===null){p.child=V;break}h=V.sibling,V.sibling=b,b=V,V=h}DB(p,!0,b,null,ee);break;case"together":DB(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function I0(h,p,b){if(h!==null&&(p.dependencies=h.dependencies),mm|=p.lanes,(b&p.childLanes)===0)if(h!==null){if(nm(h,p,b,!1),(b&p.childLanes)===0)return null}else return null;if(h!==null&&p.child!==h.child)throw Error(n(153));if(p.child!==null){for(h=p.child,b=Yu(h,h.pendingProps),p.child=b,b.return=p;h.sibling!==null;)h=h.sibling,b=b.sibling=Yu(h,h.pendingProps),b.return=p;b.sibling=null}return p.child}function OB(h,p){return(h.lanes&p)!==0?!0:(h=h.dependencies,!!(h!==null&&bv(h)))}function Qbe(h,p,b){switch(p.tag){case 3:re(p,p.stateNode.containerInfo),ch(p,ni,h.memoizedState.cache),Gl();break;case 27:case 5:oe(p);break;case 4:re(p,p.stateNode.containerInfo);break;case 10:ch(p,p.type,p.memoizedProps.value);break;case 13:var E=p.memoizedState;if(E!==null)return E.dehydrated!==null?(cm(p),p.flags|=128,null):(b&p.child.childLanes)!==0?YQ(h,p,b):(cm(p),h=I0(h,p,b),h!==null?h.sibling:null);cm(p);break;case 19:var V=(h.flags&128)!==0;if(E=(b&p.childLanes)!==0,E||(nm(h,p,b,!1),E=(b&p.childLanes)!==0),V){if(E)return ZQ(h,p,b);p.flags|=128}if(V=p.memoizedState,V!==null&&(V.rendering=null,V.tail=null,V.lastEffect=null),D(Ui,Ui.current),E)break;return null;case 22:case 23:return p.lanes=0,GQ(h,p,b);case 24:ch(p,ni,h.memoizedState.cache)}return I0(h,p,b)}function eV(h,p,b){if(h!==null)if(h.memoizedProps!==p.pendingProps)ao=!0;else{if(!OB(h,b)&&(p.flags&128)===0)return ao=!1,Qbe(h,p,b);ao=(h.flags&131072)!==0}else ao=!1,qn&&(p.flags&1048576)!==0&&PE(p,gv,p.index);switch(p.lanes=0,p.tag){case 16:e:{h=p.pendingProps;var E=p.elementType,V=E._init;if(E=V(E._payload),p.type=E,typeof E=="function")em(E)?(h=yg(E,h),p.tag=1,p=WQ(null,p,E,h,b)):(p.tag=0,p=kB(null,p,E,h,b));else{if(E!=null){if(V=E.$$typeof,V===_){p.tag=11,p=VQ(null,p,E,h,b);break e}else if(V===T){p.tag=14,p=$Q(null,p,E,h,b);break e}}throw p=H(E)||E,Error(n(306,p,""))}}return p;case 0:return kB(h,p,p.type,p.pendingProps,b);case 1:return E=p.type,V=yg(E,p.pendingProps),WQ(h,p,E,V,b);case 3:e:{if(re(p,p.stateNode.containerInfo),h===null)throw Error(n(387));E=p.pendingProps;var ee=p.memoizedState;V=ee.element,it(h,p),ar(p,E,null,b);var ye=p.memoizedState;if(E=ye.cache,ch(p,ni,E),E!==ee.cache&&vv(p,[ni],b,!0),Er(),E=ye.element,ee.isDehydrated)if(ee={element:E,isDehydrated:!1,cache:ye.cache},p.updateQueue.baseState=ee,p.memoizedState=ee,p.flags&256){p=XQ(h,p,E,b);break e}else if(E!==V){V=xn(Error(n(424)),p),rm(V),p=XQ(h,p,E,b);break e}else{switch(h=p.stateNode.containerInfo,h.nodeType){case 9:h=h.body;break;default:h=h.nodeName==="HTML"?h.ownerDocument.body:h}for(us=lf(h.firstChild),ti=p,qn=!0,lh=null,Ju=!0,b=IQ(p,null,E,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling}else{if(Gl(),E===V){p=I0(h,p,b);break e}To(h,p,E,b)}p=p.child}return p;case 26:return aj(h,p),h===null?(b=a$(p.type,null,p.pendingProps,null))?p.memoizedState=b:qn||(b=p.type,h=p.pendingProps,E=vj(le.current).createElement(b),E[wn]=p,E[cn]=h,Io(E,b,h),He(E),p.stateNode=E):p.memoizedState=a$(p.type,h.memoizedProps,p.pendingProps,h.memoizedState),null;case 27:return oe(p),h===null&&qn&&(E=p.stateNode=t$(p.type,p.pendingProps,le.current),ti=p,Ju=!0,V=us,vm(p.type)?(AI=V,us=lf(E.firstChild)):us=V),To(h,p,p.pendingProps.children,b),aj(h,p),h===null&&(p.flags|=4194304),p.child;case 5:return h===null&&qn&&((V=E=us)&&(E=p1e(E,p.type,p.pendingProps,Ju),E!==null?(p.stateNode=E,ti=p,us=lf(E.firstChild),Ju=!1,V=!0):V=!1),V||E0(p)),oe(p),V=p.type,ee=p.pendingProps,ye=h!==null?h.memoizedProps:null,E=ee.children,uI(V,ee)?E=null:ye!==null&&uI(V,ye)&&(p.flags|=32),p.memoizedState!==null&&(V=nu(h,p,fh,null,null,b),kw._currentValue=V),aj(h,p),To(h,p,E,b),p.child;case 6:return h===null&&qn&&((h=b=us)&&(b=g1e(b,p.pendingProps,Ju),b!==null?(p.stateNode=b,ti=p,us=null,h=!0):h=!1),h||E0(p)),null;case 13:return YQ(h,p,b);case 4:return re(p,p.stateNode.containerInfo),E=p.pendingProps,h===null?p.child=_v(p,null,E,b):To(h,p,E,b),p.child;case 11:return VQ(h,p,p.type,p.pendingProps,b);case 7:return To(h,p,p.pendingProps,b),p.child;case 8:return To(h,p,p.pendingProps.children,b),p.child;case 12:return To(h,p,p.pendingProps.children,b),p.child;case 10:return E=p.pendingProps,ch(p,p.type,E.value),To(h,p,E.children,b),p.child;case 9:return V=p.type._context,E=p.pendingProps.children,td(p),V=ri(V),E=E(V),p.flags|=1,To(h,p,E,b),p.child;case 14:return $Q(h,p,p.type,p.pendingProps,b);case 15:return zQ(h,p,p.type,p.pendingProps,b);case 19:return ZQ(h,p,b);case 31:return E=p.pendingProps,b=p.mode,E={mode:E.mode,children:E.children},h===null?(b=sj(E,b),b.ref=p.ref,p.child=b,b.return=p,p=b):(b=Yu(h.child,E),b.ref=p.ref,p.child=b,b.return=p,p=b),p;case 22:return GQ(h,p,b);case 24:return td(p),E=ri(ni),h===null?(V=ne(),V===null&&(V=$a,ee=Xy(),V.pooledCache=ee,ee.refCount++,ee!==null&&(V.pooledCacheLanes|=b),V=ee),p.memoizedState={parent:E,cache:V},at(p),ch(p,ni,V)):((h.lanes&b)!==0&&(it(h,p),ar(p,null,null,b),Er()),V=h.memoizedState,ee=p.memoizedState,V.parent!==E?(V={parent:E,cache:E},p.memoizedState=V,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=V),ch(p,ni,E)):(E=ee.cache,ch(p,ni,E),E!==V.cache&&vv(p,[ni],b,!0))),To(h,p,p.pendingProps.children,b),p.child;case 29:throw p.pendingProps}throw Error(n(156,p.tag))}function D0(h){h.flags|=4}function tV(h,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)h.flags&=-16777217;else if(h.flags|=16777216,!c$(p)){if(p=nd.current,p!==null&&((Hn&4194048)===Hn?mh!==null:(Hn&62914560)!==Hn&&(Hn&536870912)===0||p!==mh))throw At=Le,Te;h.flags|=8192}}function ij(h,p){p!==null&&(h.flags|=4),h.flags&16384&&(p=h.tag!==22?tr():536870912,h.lanes|=p,Dv|=p)}function fw(h,p){if(!qn)switch(h.tailMode){case"hidden":p=h.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?h.tail=null:b.sibling=null;break;case"collapsed":b=h.tail;for(var E=null;b!==null;)b.alternate!==null&&(E=b),b=b.sibling;E===null?p||h.tail===null?h.tail=null:h.tail.sibling=null:E.sibling=null}}function Ns(h){var p=h.alternate!==null&&h.alternate.child===h.child,b=0,E=0;if(p)for(var V=h.child;V!==null;)b|=V.lanes|V.childLanes,E|=V.subtreeFlags&65011712,E|=V.flags&65011712,V.return=h,V=V.sibling;else for(V=h.child;V!==null;)b|=V.lanes|V.childLanes,E|=V.subtreeFlags,E|=V.flags,V.return=h,V=V.sibling;return h.subtreeFlags|=E,h.childLanes=b,p}function Vbe(h,p,b){var E=p.pendingProps;switch(lg(p),p.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ns(p),null;case 1:return Ns(p),null;case 3:return b=p.stateNode,E=null,h!==null&&(E=h.memoizedState.cache),p.memoizedState.cache!==E&&(p.flags|=2048),ed(ni),ce(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(h===null||h.child===null)&&(So(p)?D0(p):h===null||h.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,RE())),Ns(p),null;case 26:return b=p.memoizedState,h===null?(D0(p),b!==null?(Ns(p),tV(p,b)):(Ns(p),p.flags&=-16777217)):b?b!==h.memoizedState?(D0(p),Ns(p),tV(p,b)):(Ns(p),p.flags&=-16777217):(h.memoizedProps!==E&&D0(p),Ns(p),p.flags&=-16777217),null;case 27:be(p),b=le.current;var V=p.type;if(h!==null&&p.stateNode!=null)h.memoizedProps!==E&&D0(p);else{if(!E){if(p.stateNode===null)throw Error(n(166));return Ns(p),null}h=W.current,So(p)?FE(p):(h=t$(V,E,b),p.stateNode=h,D0(p))}return Ns(p),null;case 5:if(be(p),b=p.type,h!==null&&p.stateNode!=null)h.memoizedProps!==E&&D0(p);else{if(!E){if(p.stateNode===null)throw Error(n(166));return Ns(p),null}if(h=W.current,So(p))FE(p);else{switch(V=vj(le.current),h){case 1:h=V.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:h=V.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":h=V.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":h=V.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":h=V.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof E.is=="string"?V.createElement("select",{is:E.is}):V.createElement("select"),E.multiple?h.multiple=!0:E.size&&(h.size=E.size);break;default:h=typeof E.is=="string"?V.createElement(b,{is:E.is}):V.createElement(b)}}h[wn]=p,h[cn]=E;e:for(V=p.child;V!==null;){if(V.tag===5||V.tag===6)h.appendChild(V.stateNode);else if(V.tag!==4&&V.tag!==27&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===p)break e;for(;V.sibling===null;){if(V.return===null||V.return===p)break e;V=V.return}V.sibling.return=V.return,V=V.sibling}p.stateNode=h;e:switch(Io(h,b,E),b){case"button":case"input":case"select":case"textarea":h=!!E.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&D0(p)}}return Ns(p),p.flags&=-16777217,null;case 6:if(h&&p.stateNode!=null)h.memoizedProps!==E&&D0(p);else{if(typeof E!="string"&&p.stateNode===null)throw Error(n(166));if(h=le.current,So(p)){if(h=p.stateNode,b=p.memoizedProps,E=null,V=ti,V!==null)switch(V.tag){case 27:case 5:E=V.memoizedProps}h[wn]=p,h=!!(h.nodeValue===b||E!==null&&E.suppressHydrationWarning===!0||KV(h.nodeValue,b)),h||E0(p)}else h=vj(h).createTextNode(E),h[wn]=p,p.stateNode=h}return Ns(p),null;case 13:if(E=p.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(V=So(p),E!==null&&E.dehydrated!==null){if(h===null){if(!V)throw Error(n(318));if(V=p.memoizedState,V=V!==null?V.dehydrated:null,!V)throw Error(n(317));V[wn]=p}else Gl(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Ns(p),V=!1}else V=RE(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=V),V=!0;if(!V)return p.flags&256?(B0(p),p):(B0(p),null)}if(B0(p),(p.flags&128)!==0)return p.lanes=b,p;if(b=E!==null,h=h!==null&&h.memoizedState!==null,b){E=p.child,V=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(V=E.alternate.memoizedState.cachePool.pool);var ee=null;E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(ee=E.memoizedState.cachePool.pool),ee!==V&&(E.flags|=2048)}return b!==h&&b&&(p.child.flags|=8192),ij(p,p.updateQueue),Ns(p),null;case 4:return ce(),h===null&&sI(p.stateNode.containerInfo),Ns(p),null;case 10:return ed(p.type),Ns(p),null;case 19:if(R(Ui),V=p.memoizedState,V===null)return Ns(p),null;if(E=(p.flags&128)!==0,ee=V.rendering,ee===null)if(E)fw(V,!1);else{if(Fs!==0||h!==null&&(h.flags&128)!==0)for(h=p.child;h!==null;){if(ee=tj(h),ee!==null){for(p.flags|=128,fw(V,!1),h=ee.updateQueue,p.updateQueue=h,ij(p,h),p.subtreeFlags=0,h=b,b=p.child;b!==null;)sg(b,h),b=b.sibling;return D(Ui,Ui.current&1|2),p.child}h=h.sibling}V.tail!==null&&we()>cj&&(p.flags|=128,E=!0,fw(V,!1),p.lanes=4194304)}else{if(!E)if(h=tj(ee),h!==null){if(p.flags|=128,E=!0,h=h.updateQueue,p.updateQueue=h,ij(p,h),fw(V,!0),V.tail===null&&V.tailMode==="hidden"&&!ee.alternate&&!qn)return Ns(p),null}else 2*we()-V.renderingStartTime>cj&&b!==536870912&&(p.flags|=128,E=!0,fw(V,!1),p.lanes=4194304);V.isBackwards?(ee.sibling=p.child,p.child=ee):(h=V.last,h!==null?h.sibling=ee:p.child=ee,V.last=ee)}return V.tail!==null?(p=V.tail,V.rendering=p,V.tail=p.sibling,V.renderingStartTime=we(),p.sibling=null,h=Ui.current,D(Ui,E?h&1|2:h&1),p):(Ns(p),null);case 22:case 23:return B0(p),tn(),E=p.memoizedState!==null,h!==null?h.memoizedState!==null!==E&&(p.flags|=8192):E&&(p.flags|=8192),E?(b&536870912)!==0&&(p.flags&128)===0&&(Ns(p),p.subtreeFlags&6&&(p.flags|=8192)):Ns(p),b=p.updateQueue,b!==null&&ij(p,b.retryQueue),b=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),E=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),E!==b&&(p.flags|=2048),h!==null&&R(G),null;case 24:return b=null,h!==null&&(b=h.memoizedState.cache),p.memoizedState.cache!==b&&(p.flags|=2048),ed(ni),Ns(p),null;case 25:return null;case 30:return null}throw Error(n(156,p.tag))}function $be(h,p){switch(lg(p),p.tag){case 1:return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 3:return ed(ni),ce(),h=p.flags,(h&65536)!==0&&(h&128)===0?(p.flags=h&-65537|128,p):null;case 26:case 27:case 5:return be(p),null;case 13:if(B0(p),h=p.memoizedState,h!==null&&h.dehydrated!==null){if(p.alternate===null)throw Error(n(340));Gl()}return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 19:return R(Ui),null;case 4:return ce(),null;case 10:return ed(p.type),null;case 22:case 23:return B0(p),tn(),h!==null&&R(G),h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 24:return ed(ni),null;case 25:return null;default:return null}}function rV(h,p){switch(lg(p),p.tag){case 3:ed(ni),ce();break;case 26:case 27:case 5:be(p);break;case 4:ce();break;case 13:B0(p);break;case 19:R(Ui);break;case 10:ed(p.type);break;case 22:case 23:B0(p),tn(),h!==null&&R(G);break;case 24:ed(ni)}}function hw(h,p){try{var b=p.updateQueue,E=b!==null?b.lastEffect:null;if(E!==null){var V=E.next;b=V;do{if((b.tag&h)===h){E=void 0;var ee=b.create,ye=b.inst;E=ee(),ye.destroy=E}b=b.next}while(b!==V)}}catch(Re){Ra(p,p.return,Re)}}function dm(h,p,b){try{var E=p.updateQueue,V=E!==null?E.lastEffect:null;if(V!==null){var ee=V.next;E=ee;do{if((E.tag&h)===h){var ye=E.inst,Re=ye.destroy;if(Re!==void 0){ye.destroy=void 0,V=p;var Je=b,xt=Re;try{xt()}catch(Pt){Ra(V,Je,Pt)}}}E=E.next}while(E!==ee)}}catch(Pt){Ra(p,p.return,Pt)}}function nV(h){var p=h.updateQueue;if(p!==null){var b=h.stateNode;try{Jn(p,b)}catch(E){Ra(h,h.return,E)}}}function aV(h,p,b){b.props=yg(h.type,h.memoizedProps),b.state=h.memoizedState;try{b.componentWillUnmount()}catch(E){Ra(h,p,E)}}function Aw(h,p){try{var b=h.ref;if(b!==null){switch(h.tag){case 26:case 27:case 5:var E=h.stateNode;break;case 30:E=h.stateNode;break;default:E=h.stateNode}typeof b=="function"?h.refCleanup=b(E):b.current=E}}catch(V){Ra(h,p,V)}}function ph(h,p){var b=h.ref,E=h.refCleanup;if(b!==null)if(typeof E=="function")try{E()}catch(V){Ra(h,p,V)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(V){Ra(h,p,V)}else b.current=null}function sV(h){var p=h.type,b=h.memoizedProps,E=h.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":b.autoFocus&&E.focus();break e;case"img":b.src?E.src=b.src:b.srcSet&&(E.srcset=b.srcSet)}}catch(V){Ra(h,h.return,V)}}function PB(h,p,b){try{var E=h.stateNode;d1e(E,h.type,b,p),E[cn]=p}catch(V){Ra(h,h.return,V)}}function iV(h){return h.tag===5||h.tag===3||h.tag===26||h.tag===27&&vm(h.type)||h.tag===4}function FB(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||iV(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.tag===27&&vm(h.type)||h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function RB(h,p,b){var E=h.tag;if(E===5||E===6)h=h.stateNode,p?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(h,p):(p=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,p.appendChild(h),b=b._reactRootContainer,b!=null||p.onclick!==null||(p.onclick=xj));else if(E!==4&&(E===27&&vm(h.type)&&(b=h.stateNode,p=null),h=h.child,h!==null))for(RB(h,p,b),h=h.sibling;h!==null;)RB(h,p,b),h=h.sibling}function oj(h,p,b){var E=h.tag;if(E===5||E===6)h=h.stateNode,p?b.insertBefore(h,p):b.appendChild(h);else if(E!==4&&(E===27&&vm(h.type)&&(b=h.stateNode),h=h.child,h!==null))for(oj(h,p,b),h=h.sibling;h!==null;)oj(h,p,b),h=h.sibling}function oV(h){var p=h.stateNode,b=h.memoizedProps;try{for(var E=h.type,V=p.attributes;V.length;)p.removeAttributeNode(V[0]);Io(p,E,b),p[wn]=h,p[cn]=b}catch(ee){Ra(h,h.return,ee)}}var O0=!1,si=!1,LB=!1,lV=typeof WeakSet=="function"?WeakSet:Set,so=null;function zbe(h,p){if(h=h.containerInfo,lI=Ej,h=ko(h),Mi(h)){if("selectionStart"in h)var b={start:h.selectionStart,end:h.selectionEnd};else e:{b=(b=h.ownerDocument)&&b.defaultView||window;var E=b.getSelection&&b.getSelection();if(E&&E.rangeCount!==0){b=E.anchorNode;var V=E.anchorOffset,ee=E.focusNode;E=E.focusOffset;try{b.nodeType,ee.nodeType}catch{b=null;break e}var ye=0,Re=-1,Je=-1,xt=0,Pt=0,Ht=h,yt=null;t:for(;;){for(var wt;Ht!==b||V!==0&&Ht.nodeType!==3||(Re=ye+V),Ht!==ee||E!==0&&Ht.nodeType!==3||(Je=ye+E),Ht.nodeType===3&&(ye+=Ht.nodeValue.length),(wt=Ht.firstChild)!==null;)yt=Ht,Ht=wt;for(;;){if(Ht===h)break t;if(yt===b&&++xt===V&&(Re=ye),yt===ee&&++Pt===E&&(Je=ye),(wt=Ht.nextSibling)!==null)break;Ht=yt,yt=Ht.parentNode}Ht=wt}b=Re===-1||Je===-1?null:{start:Re,end:Je}}else b=null}b=b||{start:0,end:0}}else b=null;for(cI={focusedElem:h,selectionRange:b},Ej=!1,so=p;so!==null;)if(p=so,h=p.child,(p.subtreeFlags&1024)!==0&&h!==null)h.return=p,so=h;else for(;so!==null;){switch(p=so,ee=p.alternate,h=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if((h&1024)!==0&&ee!==null){h=void 0,b=p,V=ee.memoizedProps,ee=ee.memoizedState,E=b.stateNode;try{var Kr=yg(b.type,V,b.elementType===b.type);h=E.getSnapshotBeforeUpdate(Kr,ee),E.__reactInternalSnapshotBeforeUpdate=h}catch(Lr){Ra(b,b.return,Lr)}}break;case 3:if((h&1024)!==0){if(h=p.stateNode.containerInfo,b=h.nodeType,b===9)fI(h);else if(b===1)switch(h.nodeName){case"HEAD":case"HTML":case"BODY":fI(h);break;default:h.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(n(163))}if(h=p.sibling,h!==null){h.return=p.return,so=h;break}so=p.return}}function cV(h,p,b){var E=b.flags;switch(b.tag){case 0:case 11:case 15:fm(h,b),E&4&&hw(5,b);break;case 1:if(fm(h,b),E&4)if(h=b.stateNode,p===null)try{h.componentDidMount()}catch(ye){Ra(b,b.return,ye)}else{var V=yg(b.type,p.memoizedProps);p=p.memoizedState;try{h.componentDidUpdate(V,p,h.__reactInternalSnapshotBeforeUpdate)}catch(ye){Ra(b,b.return,ye)}}E&64&&nV(b),E&512&&Aw(b,b.return);break;case 3:if(fm(h,b),E&64&&(h=b.updateQueue,h!==null)){if(p=null,b.child!==null)switch(b.child.tag){case 27:case 5:p=b.child.stateNode;break;case 1:p=b.child.stateNode}try{Jn(h,p)}catch(ye){Ra(b,b.return,ye)}}break;case 27:p===null&&E&4&&oV(b);case 26:case 5:fm(h,b),p===null&&E&4&&sV(b),E&512&&Aw(b,b.return);break;case 12:fm(h,b);break;case 13:fm(h,b),E&4&&fV(h,b),E&64&&(h=b.memoizedState,h!==null&&(h=h.dehydrated,h!==null&&(b=e1e.bind(null,b),x1e(h,b))));break;case 22:if(E=b.memoizedState!==null||O0,!E){p=p!==null&&p.memoizedState!==null||si,V=O0;var ee=si;O0=E,(si=p)&&!ee?hm(h,b,(b.subtreeFlags&8772)!==0):fm(h,b),O0=V,si=ee}break;case 30:break;default:fm(h,b)}}function uV(h){var p=h.alternate;p!==null&&(h.alternate=null,uV(p)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(p=h.stateNode,p!==null&&Qe(p)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}var ds=null,wc=!1;function P0(h,p,b){for(b=b.child;b!==null;)dV(h,p,b),b=b.sibling}function dV(h,p,b){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(Ze,b)}catch{}switch(b.tag){case 26:si||ph(b,p),P0(h,p,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:si||ph(b,p);var E=ds,V=wc;vm(b.type)&&(ds=b.stateNode,wc=!1),P0(h,p,b),Nw(b.stateNode),ds=E,wc=V;break;case 5:si||ph(b,p);case 6:if(E=ds,V=wc,ds=null,P0(h,p,b),ds=E,wc=V,ds!==null)if(wc)try{(ds.nodeType===9?ds.body:ds.nodeName==="HTML"?ds.ownerDocument.body:ds).removeChild(b.stateNode)}catch(ee){Ra(b,p,ee)}else try{ds.removeChild(b.stateNode)}catch(ee){Ra(b,p,ee)}break;case 18:ds!==null&&(wc?(h=ds,ZV(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,b.stateNode),Bw(h)):ZV(ds,b.stateNode));break;case 4:E=ds,V=wc,ds=b.stateNode.containerInfo,wc=!0,P0(h,p,b),ds=E,wc=V;break;case 0:case 11:case 14:case 15:si||dm(2,b,p),si||dm(4,b,p),P0(h,p,b);break;case 1:si||(ph(b,p),E=b.stateNode,typeof E.componentWillUnmount=="function"&&aV(b,p,E)),P0(h,p,b);break;case 21:P0(h,p,b);break;case 22:si=(E=si)||b.memoizedState!==null,P0(h,p,b),si=E;break;default:P0(h,p,b)}}function fV(h,p){if(p.memoizedState===null&&(h=p.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{Bw(h)}catch(b){Ra(p,p.return,b)}}function Gbe(h){switch(h.tag){case 13:case 19:var p=h.stateNode;return p===null&&(p=h.stateNode=new lV),p;case 22:return h=h.stateNode,p=h._retryCache,p===null&&(p=h._retryCache=new lV),p;default:throw Error(n(435,h.tag))}}function MB(h,p){var b=Gbe(h);p.forEach(function(E){var V=t1e.bind(null,h,E);b.has(E)||(b.add(E),E.then(V,V))})}function su(h,p){var b=p.deletions;if(b!==null)for(var E=0;E<b.length;E++){var V=b[E],ee=h,ye=p,Re=ye;e:for(;Re!==null;){switch(Re.tag){case 27:if(vm(Re.type)){ds=Re.stateNode,wc=!1;break e}break;case 5:ds=Re.stateNode,wc=!1;break e;case 3:case 4:ds=Re.stateNode.containerInfo,wc=!0;break e}Re=Re.return}if(ds===null)throw Error(n(160));dV(ee,ye,V),ds=null,wc=!1,ee=V.alternate,ee!==null&&(ee.return=null),V.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)hV(p,h),p=p.sibling}var of=null;function hV(h,p){var b=h.alternate,E=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:su(p,h),iu(h),E&4&&(dm(3,h,h.return),hw(3,h),dm(5,h,h.return));break;case 1:su(p,h),iu(h),E&512&&(si||b===null||ph(b,b.return)),E&64&&O0&&(h=h.updateQueue,h!==null&&(E=h.callbacks,E!==null&&(b=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=b===null?E:b.concat(E))));break;case 26:var V=of;if(su(p,h),iu(h),E&512&&(si||b===null||ph(b,b.return)),E&4){var ee=b!==null?b.memoizedState:null;if(E=h.memoizedState,b===null)if(E===null)if(h.stateNode===null){e:{E=h.type,b=h.memoizedProps,V=V.ownerDocument||V;t:switch(E){case"title":ee=V.getElementsByTagName("title")[0],(!ee||ee[Me]||ee[wn]||ee.namespaceURI==="http://www.w3.org/2000/svg"||ee.hasAttribute("itemprop"))&&(ee=V.createElement(E),V.head.insertBefore(ee,V.querySelector("head > title"))),Io(ee,E,b),ee[wn]=h,He(ee),E=ee;break e;case"link":var ye=o$("link","href",V).get(E+(b.href||""));if(ye){for(var Re=0;Re<ye.length;Re++)if(ee=ye[Re],ee.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&ee.getAttribute("rel")===(b.rel==null?null:b.rel)&&ee.getAttribute("title")===(b.title==null?null:b.title)&&ee.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){ye.splice(Re,1);break t}}ee=V.createElement(E),Io(ee,E,b),V.head.appendChild(ee);break;case"meta":if(ye=o$("meta","content",V).get(E+(b.content||""))){for(Re=0;Re<ye.length;Re++)if(ee=ye[Re],ee.getAttribute("content")===(b.content==null?null:""+b.content)&&ee.getAttribute("name")===(b.name==null?null:b.name)&&ee.getAttribute("property")===(b.property==null?null:b.property)&&ee.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&ee.getAttribute("charset")===(b.charSet==null?null:b.charSet)){ye.splice(Re,1);break t}}ee=V.createElement(E),Io(ee,E,b),V.head.appendChild(ee);break;default:throw Error(n(468,E))}ee[wn]=h,He(ee),E=ee}h.stateNode=E}else l$(V,h.type,h.stateNode);else h.stateNode=i$(V,E,h.memoizedProps);else ee!==E?(ee===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):ee.count--,E===null?l$(V,h.type,h.stateNode):i$(V,E,h.memoizedProps)):E===null&&h.stateNode!==null&&PB(h,h.memoizedProps,b.memoizedProps)}break;case 27:su(p,h),iu(h),E&512&&(si||b===null||ph(b,b.return)),b!==null&&E&4&&PB(h,h.memoizedProps,b.memoizedProps);break;case 5:if(su(p,h),iu(h),E&512&&(si||b===null||ph(b,b.return)),h.flags&32){V=h.stateNode;try{Eo(V,"")}catch(wt){Ra(h,h.return,wt)}}E&4&&h.stateNode!=null&&(V=h.memoizedProps,PB(h,V,b!==null?b.memoizedProps:V)),E&1024&&(LB=!0);break;case 6:if(su(p,h),iu(h),E&4){if(h.stateNode===null)throw Error(n(162));E=h.memoizedProps,b=h.stateNode;try{b.nodeValue=E}catch(wt){Ra(h,h.return,wt)}}break;case 3:if(wj=null,V=of,of=bj(p.containerInfo),su(p,h),of=V,iu(h),E&4&&b!==null&&b.memoizedState.isDehydrated)try{Bw(p.containerInfo)}catch(wt){Ra(h,h.return,wt)}LB&&(LB=!1,AV(h));break;case 4:E=of,of=bj(h.stateNode.containerInfo),su(p,h),iu(h),of=E;break;case 12:su(p,h),iu(h);break;case 13:su(p,h),iu(h),h.child.flags&8192&&h.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(zB=we()),E&4&&(E=h.updateQueue,E!==null&&(h.updateQueue=null,MB(h,E)));break;case 22:V=h.memoizedState!==null;var Je=b!==null&&b.memoizedState!==null,xt=O0,Pt=si;if(O0=xt||V,si=Pt||Je,su(p,h),si=Pt,O0=xt,iu(h),E&8192)e:for(p=h.stateNode,p._visibility=V?p._visibility&-2:p._visibility|1,V&&(b===null||Je||O0||si||wg(h)),b=null,p=h;;){if(p.tag===5||p.tag===26){if(b===null){Je=b=p;try{if(ee=Je.stateNode,V)ye=ee.style,typeof ye.setProperty=="function"?ye.setProperty("display","none","important"):ye.display="none";else{Re=Je.stateNode;var Ht=Je.memoizedProps.style,yt=Ht!=null&&Ht.hasOwnProperty("display")?Ht.display:null;Re.style.display=yt==null||typeof yt=="boolean"?"":(""+yt).trim()}}catch(wt){Ra(Je,Je.return,wt)}}}else if(p.tag===6){if(b===null){Je=p;try{Je.stateNode.nodeValue=V?"":Je.memoizedProps}catch(wt){Ra(Je,Je.return,wt)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===h)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break e;for(;p.sibling===null;){if(p.return===null||p.return===h)break e;b===p&&(b=null),p=p.return}b===p&&(b=null),p.sibling.return=p.return,p=p.sibling}E&4&&(E=h.updateQueue,E!==null&&(b=E.retryQueue,b!==null&&(E.retryQueue=null,MB(h,b))));break;case 19:su(p,h),iu(h),E&4&&(E=h.updateQueue,E!==null&&(h.updateQueue=null,MB(h,E)));break;case 30:break;case 21:break;default:su(p,h),iu(h)}}function iu(h){var p=h.flags;if(p&2){try{for(var b,E=h.return;E!==null;){if(iV(E)){b=E;break}E=E.return}if(b==null)throw Error(n(160));switch(b.tag){case 27:var V=b.stateNode,ee=FB(h);oj(h,ee,V);break;case 5:var ye=b.stateNode;b.flags&32&&(Eo(ye,""),b.flags&=-33);var Re=FB(h);oj(h,Re,ye);break;case 3:case 4:var Je=b.stateNode.containerInfo,xt=FB(h);RB(h,xt,Je);break;default:throw Error(n(161))}}catch(Pt){Ra(h,h.return,Pt)}h.flags&=-3}p&4096&&(h.flags&=-4097)}function AV(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var p=h;AV(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),h=h.sibling}}function fm(h,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)cV(h,p.alternate,p),p=p.sibling}function wg(h){for(h=h.child;h!==null;){var p=h;switch(p.tag){case 0:case 11:case 14:case 15:dm(4,p,p.return),wg(p);break;case 1:ph(p,p.return);var b=p.stateNode;typeof b.componentWillUnmount=="function"&&aV(p,p.return,b),wg(p);break;case 27:Nw(p.stateNode);case 26:case 5:ph(p,p.return),wg(p);break;case 22:p.memoizedState===null&&wg(p);break;case 30:wg(p);break;default:wg(p)}h=h.sibling}}function hm(h,p,b){for(b=b&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var E=p.alternate,V=h,ee=p,ye=ee.flags;switch(ee.tag){case 0:case 11:case 15:hm(V,ee,b),hw(4,ee);break;case 1:if(hm(V,ee,b),E=ee,V=E.stateNode,typeof V.componentDidMount=="function")try{V.componentDidMount()}catch(xt){Ra(E,E.return,xt)}if(E=ee,V=E.updateQueue,V!==null){var Re=E.stateNode;try{var Je=V.shared.hiddenCallbacks;if(Je!==null)for(V.shared.hiddenCallbacks=null,V=0;V<Je.length;V++)Mn(Je[V],Re)}catch(xt){Ra(E,E.return,xt)}}b&&ye&64&&nV(ee),Aw(ee,ee.return);break;case 27:oV(ee);case 26:case 5:hm(V,ee,b),b&&E===null&&ye&4&&sV(ee),Aw(ee,ee.return);break;case 12:hm(V,ee,b);break;case 13:hm(V,ee,b),b&&ye&4&&fV(V,ee);break;case 22:ee.memoizedState===null&&hm(V,ee,b),Aw(ee,ee.return);break;case 30:break;default:hm(V,ee,b)}p=p.sibling}}function UB(h,p){var b=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),h=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(h=p.memoizedState.cachePool.pool),h!==b&&(h!=null&&h.refCount++,b!=null&&cg(b))}function HB(h,p){h=null,p.alternate!==null&&(h=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==h&&(p.refCount++,h!=null&&cg(h))}function gh(h,p,b,E){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)mV(h,p,b,E),p=p.sibling}function mV(h,p,b,E){var V=p.flags;switch(p.tag){case 0:case 11:case 15:gh(h,p,b,E),V&2048&&hw(9,p);break;case 1:gh(h,p,b,E);break;case 3:gh(h,p,b,E),V&2048&&(h=null,p.alternate!==null&&(h=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==h&&(p.refCount++,h!=null&&cg(h)));break;case 12:if(V&2048){gh(h,p,b,E),h=p.stateNode;try{var ee=p.memoizedProps,ye=ee.id,Re=ee.onPostCommit;typeof Re=="function"&&Re(ye,p.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(Je){Ra(p,p.return,Je)}}else gh(h,p,b,E);break;case 13:gh(h,p,b,E);break;case 23:break;case 22:ee=p.stateNode,ye=p.alternate,p.memoizedState!==null?ee._visibility&2?gh(h,p,b,E):mw(h,p):ee._visibility&2?gh(h,p,b,E):(ee._visibility|=2,Tv(h,p,b,E,(p.subtreeFlags&10256)!==0)),V&2048&&UB(ye,p);break;case 24:gh(h,p,b,E),V&2048&&HB(p.alternate,p);break;default:gh(h,p,b,E)}}function Tv(h,p,b,E,V){for(V=V&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var ee=h,ye=p,Re=b,Je=E,xt=ye.flags;switch(ye.tag){case 0:case 11:case 15:Tv(ee,ye,Re,Je,V),hw(8,ye);break;case 23:break;case 22:var Pt=ye.stateNode;ye.memoizedState!==null?Pt._visibility&2?Tv(ee,ye,Re,Je,V):mw(ee,ye):(Pt._visibility|=2,Tv(ee,ye,Re,Je,V)),V&&xt&2048&&UB(ye.alternate,ye);break;case 24:Tv(ee,ye,Re,Je,V),V&&xt&2048&&HB(ye.alternate,ye);break;default:Tv(ee,ye,Re,Je,V)}p=p.sibling}}function mw(h,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var b=h,E=p,V=E.flags;switch(E.tag){case 22:mw(b,E),V&2048&&UB(E.alternate,E);break;case 24:mw(b,E),V&2048&&HB(E.alternate,E);break;default:mw(b,E)}p=p.sibling}}var pw=8192;function Bv(h){if(h.subtreeFlags&pw)for(h=h.child;h!==null;)pV(h),h=h.sibling}function pV(h){switch(h.tag){case 26:Bv(h),h.flags&pw&&h.memoizedState!==null&&B1e(of,h.memoizedState,h.memoizedProps);break;case 5:Bv(h);break;case 3:case 4:var p=of;of=bj(h.stateNode.containerInfo),Bv(h),of=p;break;case 22:h.memoizedState===null&&(p=h.alternate,p!==null&&p.memoizedState!==null?(p=pw,pw=16777216,Bv(h),pw=p):Bv(h));break;default:Bv(h)}}function gV(h){var p=h.alternate;if(p!==null&&(h=p.child,h!==null)){p.child=null;do p=h.sibling,h.sibling=null,h=p;while(h!==null)}}function gw(h){var p=h.deletions;if((h.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var E=p[b];so=E,vV(E,h)}gV(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)xV(h),h=h.sibling}function xV(h){switch(h.tag){case 0:case 11:case 15:gw(h),h.flags&2048&&dm(9,h,h.return);break;case 3:gw(h);break;case 12:gw(h);break;case 22:var p=h.stateNode;h.memoizedState!==null&&p._visibility&2&&(h.return===null||h.return.tag!==13)?(p._visibility&=-3,lj(h)):gw(h);break;default:gw(h)}}function lj(h){var p=h.deletions;if((h.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var E=p[b];so=E,vV(E,h)}gV(h)}for(h=h.child;h!==null;){switch(p=h,p.tag){case 0:case 11:case 15:dm(8,p,p.return),lj(p);break;case 22:b=p.stateNode,b._visibility&2&&(b._visibility&=-3,lj(p));break;default:lj(p)}h=h.sibling}}function vV(h,p){for(;so!==null;){var b=so;switch(b.tag){case 0:case 11:case 15:dm(8,b,p);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var E=b.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:cg(b.memoizedState.cache)}if(E=b.child,E!==null)E.return=b,so=E;else e:for(b=h;so!==null;){E=so;var V=E.sibling,ee=E.return;if(uV(E),E===b){so=null;break e}if(V!==null){V.return=ee,so=V;break e}so=ee}}}var qbe={getCacheForType:function(h){var p=ri(ni),b=p.data.get(h);return b===void 0&&(b=h(),p.data.set(h,b)),b}},Kbe=typeof WeakMap=="function"?WeakMap:Map,wa=0,$a=null,Sn=null,Hn=0,Na=0,ou=null,Am=!1,Iv=!1,QB=!1,F0=0,Fs=0,mm=0,Ng=0,VB=0,ad=0,Dv=0,xw=null,Nc=null,$B=!1,zB=0,cj=1/0,uj=null,pm=null,Bo=0,gm=null,Ov=null,Pv=0,GB=0,qB=null,bV=null,vw=0,KB=null;function lu(){if((wa&2)!==0&&Hn!==0)return Hn&-Hn;if(Q.T!==null){var h=j0;return h!==0?h:tI()}return Gn()}function yV(){ad===0&&(ad=(Hn&536870912)===0||qn?Nr():536870912);var h=nd.current;return h!==null&&(h.flags|=32),ad}function cu(h,p,b){(h===$a&&(Na===2||Na===9)||h.cancelPendingCommit!==null)&&(Fv(h,0),xm(h,Hn,ad,!1)),hr(h,b),((wa&2)===0||h!==$a)&&(h===$a&&((wa&2)===0&&(Ng|=b),Fs===4&&xm(h,Hn,ad,!1)),xh(h))}function wV(h,p,b){if((wa&6)!==0)throw Error(n(327));var E=!b&&(p&124)===0&&(p&h.expiredLanes)===0||ir(h,p),V=E?Ybe(h,p):YB(h,p,!0),ee=E;do{if(V===0){Iv&&!E&&xm(h,p,0,!1);break}else{if(b=h.current.alternate,ee&&!Wbe(b)){V=YB(h,p,!1),ee=!1;continue}if(V===2){if(ee=p,h.errorRecoveryDisabledLanes&ee)var ye=0;else ye=h.pendingLanes&-536870913,ye=ye!==0?ye:ye&536870912?536870912:0;if(ye!==0){p=ye;e:{var Re=h;V=xw;var Je=Re.current.memoizedState.isDehydrated;if(Je&&(Fv(Re,ye).flags|=256),ye=YB(Re,ye,!1),ye!==2){if(QB&&!Je){Re.errorRecoveryDisabledLanes|=ee,Ng|=ee,V=4;break e}ee=Nc,Nc=V,ee!==null&&(Nc===null?Nc=ee:Nc.push.apply(Nc,ee))}V=ye}if(ee=!1,V!==2)continue}}if(V===1){Fv(h,0),xm(h,p,0,!0);break}e:{switch(E=h,ee=V,ee){case 0:case 1:throw Error(n(345));case 4:if((p&4194048)!==p)break;case 6:xm(E,p,ad,!Am);break e;case 2:Nc=null;break;case 3:case 5:break;default:throw Error(n(329))}if((p&62914560)===p&&(V=zB+300-we(),10<V)){if(xm(E,p,ad,!Am),qt(E,0,!0)!==0)break e;E.timeoutHandle=YV(NV.bind(null,E,b,Nc,uj,$B,p,ad,Ng,Dv,Am,ee,2,-0,0),V);break e}NV(E,b,Nc,uj,$B,p,ad,Ng,Dv,Am,ee,0,-0,0)}}break}while(!0);xh(h)}function NV(h,p,b,E,V,ee,ye,Re,Je,xt,Pt,Ht,yt,wt){if(h.timeoutHandle=-1,Ht=p.subtreeFlags,(Ht&8192||(Ht&16785408)===16785408)&&(jw={stylesheets:null,count:0,unsuspend:T1e},pV(p),Ht=I1e(),Ht!==null)){h.cancelPendingCommit=Ht(TV.bind(null,h,p,ee,b,E,V,ye,Re,Je,Pt,1,yt,wt)),xm(h,ee,ye,!xt);return}TV(h,p,ee,b,E,V,ye,Re,Je)}function Wbe(h){for(var p=h;;){var b=p.tag;if((b===0||b===11||b===15)&&p.flags&16384&&(b=p.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var E=0;E<b.length;E++){var V=b[E],ee=V.getSnapshot;V=V.value;try{if(!Ni(ee(),V))return!1}catch{return!1}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function xm(h,p,b,E){p&=~VB,p&=~Ng,h.suspendedLanes|=p,h.pingedLanes&=~p,E&&(h.warmLanes|=p),E=h.expirationTimes;for(var V=p;0<V;){var ee=31-Ve(V),ye=1<<ee;E[ee]=-1,V&=~ye}b!==0&&or(h,b,p)}function dj(){return(wa&6)===0?(bw(0),!1):!0}function WB(){if(Sn!==null){if(Na===0)var h=Sn.return;else h=Sn,ef=Ei=null,wv(h),Sv=null,uw=0,h=Sn;for(;h!==null;)rV(h.alternate,h),h=h.return;Sn=null}}function Fv(h,p){var b=h.timeoutHandle;b!==-1&&(h.timeoutHandle=-1,h1e(b)),b=h.cancelPendingCommit,b!==null&&(h.cancelPendingCommit=null,b()),WB(),$a=h,Sn=b=Yu(h.current,null),Hn=p,Na=0,ou=null,Am=!1,Iv=ir(h,p),QB=!1,Dv=ad=VB=Ng=mm=Fs=0,Nc=xw=null,$B=!1,(p&8)!==0&&(p|=p&32);var E=h.entangledLanes;if(E!==0)for(h=h.entanglements,E&=p;0<E;){var V=31-Ve(E),ee=1<<V;p|=h[V],E&=~ee}return F0=p,xc(),b}function CV(h,p){Or=null,Q.H=JE,p===_e||p===Oe?(p=ct(),Na=3):p===Te?(p=ct(),Na=4):Na=p===QQ?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,ou=p,Sn===null&&(Fs=1,nj(h,xn(p,h.current)))}function EV(){var h=Q.H;return Q.H=JE,h===null?JE:h}function jV(){var h=Q.A;return Q.A=qbe,h}function XB(){Fs=4,Am||(Hn&4194048)!==Hn&&nd.current!==null||(Iv=!0),(mm&134217727)===0&&(Ng&134217727)===0||$a===null||xm($a,Hn,ad,!1)}function YB(h,p,b){var E=wa;wa|=2;var V=EV(),ee=jV();($a!==h||Hn!==p)&&(uj=null,Fv(h,p)),p=!1;var ye=Fs;e:do try{if(Na!==0&&Sn!==null){var Re=Sn,Je=ou;switch(Na){case 8:WB(),ye=6;break e;case 3:case 2:case 9:case 6:nd.current===null&&(p=!0);var xt=Na;if(Na=0,ou=null,Rv(h,Re,Je,xt),b&&Iv){ye=0;break e}break;default:xt=Na,Na=0,ou=null,Rv(h,Re,Je,xt)}}Xbe(),ye=Fs;break}catch(Pt){CV(h,Pt)}while(!0);return p&&h.shellSuspendCounter++,ef=Ei=null,wa=E,Q.H=V,Q.A=ee,Sn===null&&($a=null,Hn=0,xc()),ye}function Xbe(){for(;Sn!==null;)kV(Sn)}function Ybe(h,p){var b=wa;wa|=2;var E=EV(),V=jV();$a!==h||Hn!==p?(uj=null,cj=we()+500,Fv(h,p)):Iv=ir(h,p);e:do try{if(Na!==0&&Sn!==null){p=Sn;var ee=ou;t:switch(Na){case 1:Na=0,ou=null,Rv(h,p,ee,1);break;case 2:case 9:if($e(ee)){Na=0,ou=null,SV(p);break}p=function(){Na!==2&&Na!==9||$a!==h||(Na=7),xh(h)},ee.then(p,p);break e;case 3:Na=7;break e;case 4:Na=5;break e;case 7:$e(ee)?(Na=0,ou=null,SV(p)):(Na=0,ou=null,Rv(h,p,ee,7));break;case 5:var ye=null;switch(Sn.tag){case 26:ye=Sn.memoizedState;case 5:case 27:var Re=Sn;if(!ye||c$(ye)){Na=0,ou=null;var Je=Re.sibling;if(Je!==null)Sn=Je;else{var xt=Re.return;xt!==null?(Sn=xt,fj(xt)):Sn=null}break t}}Na=0,ou=null,Rv(h,p,ee,5);break;case 6:Na=0,ou=null,Rv(h,p,ee,6);break;case 8:WB(),Fs=6;break e;default:throw Error(n(462))}}Jbe();break}catch(Pt){CV(h,Pt)}while(!0);return ef=Ei=null,Q.H=E,Q.A=V,wa=b,Sn!==null?0:($a=null,Hn=0,xc(),Fs)}function Jbe(){for(;Sn!==null&&!ke();)kV(Sn)}function kV(h){var p=eV(h.alternate,h,F0);h.memoizedProps=h.pendingProps,p===null?fj(h):Sn=p}function SV(h){var p=h,b=p.alternate;switch(p.tag){case 15:case 0:p=KQ(b,p,p.pendingProps,p.type,void 0,Hn);break;case 11:p=KQ(b,p,p.pendingProps,p.type.render,p.ref,Hn);break;case 5:wv(p);default:rV(b,p),p=Sn=sg(p,F0),p=eV(b,p,F0)}h.memoizedProps=h.pendingProps,p===null?fj(h):Sn=p}function Rv(h,p,b,E){ef=Ei=null,wv(p),Sv=null,uw=0;var V=p.return;try{if(Hbe(h,V,p,b,Hn)){Fs=1,nj(h,xn(b,h.current)),Sn=null;return}}catch(ee){if(V!==null)throw Sn=V,ee;Fs=1,nj(h,xn(b,h.current)),Sn=null;return}p.flags&32768?(qn||E===1?h=!0:Iv||(Hn&536870912)!==0?h=!1:(Am=h=!0,(E===2||E===9||E===3||E===6)&&(E=nd.current,E!==null&&E.tag===13&&(E.flags|=16384))),_V(p,h)):fj(p)}function fj(h){var p=h;do{if((p.flags&32768)!==0){_V(p,Am);return}h=p.return;var b=Vbe(p.alternate,p,F0);if(b!==null){Sn=b;return}if(p=p.sibling,p!==null){Sn=p;return}Sn=p=h}while(p!==null);Fs===0&&(Fs=5)}function _V(h,p){do{var b=$be(h.alternate,h);if(b!==null){b.flags&=32767,Sn=b;return}if(b=h.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!p&&(h=h.sibling,h!==null)){Sn=h;return}Sn=h=b}while(h!==null);Fs=6,Sn=null}function TV(h,p,b,E,V,ee,ye,Re,Je){h.cancelPendingCommit=null;do hj();while(Bo!==0);if((wa&6)!==0)throw Error(n(327));if(p!==null){if(p===h.current)throw Error(n(177));if(ee=p.lanes|p.childLanes,ee|=bs,Dr(h,b,ee,ye,Re,Je),h===$a&&(Sn=$a=null,Hn=0),Ov=p,gm=h,Pv=b,GB=ee,qB=V,bV=E,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(h.callbackNode=null,h.callbackPriority=0,r1e(fe,function(){return PV(),null})):(h.callbackNode=null,h.callbackPriority=0),E=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||E){E=Q.T,Q.T=null,V=z.p,z.p=2,ye=wa,wa|=4;try{zbe(h,p,b)}finally{wa=ye,z.p=V,Q.T=E}}Bo=1,BV(),IV(),DV()}}function BV(){if(Bo===1){Bo=0;var h=gm,p=Ov,b=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||b){b=Q.T,Q.T=null;var E=z.p;z.p=2;var V=wa;wa|=4;try{hV(p,h);var ee=cI,ye=ko(h.containerInfo),Re=ee.focusedElem,Je=ee.selectionRange;if(ye!==Re&&Re&&Re.ownerDocument&&Zf(Re.ownerDocument.documentElement,Re)){if(Je!==null&&Mi(Re)){var xt=Je.start,Pt=Je.end;if(Pt===void 0&&(Pt=xt),"selectionStart"in Re)Re.selectionStart=xt,Re.selectionEnd=Math.min(Pt,Re.value.length);else{var Ht=Re.ownerDocument||document,yt=Ht&&Ht.defaultView||window;if(yt.getSelection){var wt=yt.getSelection(),Kr=Re.textContent.length,Lr=Math.min(Je.start,Kr),Da=Je.end===void 0?Lr:Math.min(Je.end,Kr);!wt.extend&&Lr>Da&&(ye=Da,Da=Lr,Lr=ye);var dt=Gd(Re,Lr),st=Gd(Re,Da);if(dt&&st&&(wt.rangeCount!==1||wt.anchorNode!==dt.node||wt.anchorOffset!==dt.offset||wt.focusNode!==st.node||wt.focusOffset!==st.offset)){var mt=Ht.createRange();mt.setStart(dt.node,dt.offset),wt.removeAllRanges(),Lr>Da?(wt.addRange(mt),wt.extend(st.node,st.offset)):(mt.setEnd(st.node,st.offset),wt.addRange(mt))}}}}for(Ht=[],wt=Re;wt=wt.parentNode;)wt.nodeType===1&&Ht.push({element:wt,left:wt.scrollLeft,top:wt.scrollTop});for(typeof Re.focus=="function"&&Re.focus(),Re=0;Re<Ht.length;Re++){var Rt=Ht[Re];Rt.element.scrollLeft=Rt.left,Rt.element.scrollTop=Rt.top}}Ej=!!lI,cI=lI=null}finally{wa=V,z.p=E,Q.T=b}}h.current=p,Bo=2}}function IV(){if(Bo===2){Bo=0;var h=gm,p=Ov,b=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||b){b=Q.T,Q.T=null;var E=z.p;z.p=2;var V=wa;wa|=4;try{cV(h,p.alternate,p)}finally{wa=V,z.p=E,Q.T=b}}Bo=3}}function DV(){if(Bo===4||Bo===3){Bo=0,ue();var h=gm,p=Ov,b=Pv,E=bV;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?Bo=5:(Bo=0,Ov=gm=null,OV(h,h.pendingLanes));var V=h.pendingLanes;if(V===0&&(pm=null),aa(b),p=p.stateNode,We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(Ze,p,void 0,(p.current.flags&128)===128)}catch{}if(E!==null){p=Q.T,V=z.p,z.p=2,Q.T=null;try{for(var ee=h.onRecoverableError,ye=0;ye<E.length;ye++){var Re=E[ye];ee(Re.value,{componentStack:Re.stack})}}finally{Q.T=p,z.p=V}}(Pv&3)!==0&&hj(),xh(h),V=h.pendingLanes,(b&4194090)!==0&&(V&42)!==0?h===KB?vw++:(vw=0,KB=h):vw=0,bw(0)}}function OV(h,p){(h.pooledCacheLanes&=p)===0&&(p=h.pooledCache,p!=null&&(h.pooledCache=null,cg(p)))}function hj(h){return BV(),IV(),DV(),PV()}function PV(){if(Bo!==5)return!1;var h=gm,p=GB;GB=0;var b=aa(Pv),E=Q.T,V=z.p;try{z.p=32>b?32:b,Q.T=null,b=qB,qB=null;var ee=gm,ye=Pv;if(Bo=0,Ov=gm=null,Pv=0,(wa&6)!==0)throw Error(n(331));var Re=wa;if(wa|=4,xV(ee.current),mV(ee,ee.current,ye,b),wa=Re,bw(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(Ze,ee)}catch{}return!0}finally{z.p=V,Q.T=E,OV(h,p)}}function FV(h,p,b){p=xn(b,p),p=jB(h.stateNode,p,2),h=Mt(h,p,2),h!==null&&(hr(h,2),xh(h))}function Ra(h,p,b){if(h.tag===3)FV(h,h,b);else for(;p!==null;){if(p.tag===3){FV(p,h,b);break}else if(p.tag===1){var E=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(pm===null||!pm.has(E))){h=xn(b,h),b=UQ(2),E=Mt(p,b,2),E!==null&&(HQ(b,E,p,h),hr(E,2),xh(E));break}}p=p.return}}function JB(h,p,b){var E=h.pingCache;if(E===null){E=h.pingCache=new Kbe;var V=new Set;E.set(p,V)}else V=E.get(p),V===void 0&&(V=new Set,E.set(p,V));V.has(b)||(QB=!0,V.add(b),h=Zbe.bind(null,h,p,b),p.then(h,h))}function Zbe(h,p,b){var E=h.pingCache;E!==null&&E.delete(p),h.pingedLanes|=h.suspendedLanes&b,h.warmLanes&=~b,$a===h&&(Hn&b)===b&&(Fs===4||Fs===3&&(Hn&62914560)===Hn&&300>we()-zB?(wa&2)===0&&Fv(h,0):VB|=b,Dv===Hn&&(Dv=0)),xh(h)}function RV(h,p){p===0&&(p=tr()),h=Kd(h,p),h!==null&&(hr(h,p),xh(h))}function e1e(h){var p=h.memoizedState,b=0;p!==null&&(b=p.retryLane),RV(h,b)}function t1e(h,p){var b=0;switch(h.tag){case 13:var E=h.stateNode,V=h.memoizedState;V!==null&&(b=V.retryLane);break;case 19:E=h.stateNode;break;case 22:E=h.stateNode._retryCache;break;default:throw Error(n(314))}E!==null&&E.delete(p),RV(h,b)}function r1e(h,p){return je(h,p)}var Aj=null,Lv=null,ZB=!1,mj=!1,eI=!1,Cg=0;function xh(h){h!==Lv&&h.next===null&&(Lv===null?Aj=Lv=h:Lv=Lv.next=h),mj=!0,ZB||(ZB=!0,a1e())}function bw(h,p){if(!eI&&mj){eI=!0;do for(var b=!1,E=Aj;E!==null;){if(h!==0){var V=E.pendingLanes;if(V===0)var ee=0;else{var ye=E.suspendedLanes,Re=E.pingedLanes;ee=(1<<31-Ve(42|h)+1)-1,ee&=V&~(ye&~Re),ee=ee&201326741?ee&201326741|1:ee?ee|2:0}ee!==0&&(b=!0,HV(E,ee))}else ee=Hn,ee=qt(E,E===$a?ee:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(ee&3)===0||ir(E,ee)||(b=!0,HV(E,ee));E=E.next}while(b);eI=!1}}function n1e(){LV()}function LV(){mj=ZB=!1;var h=0;Cg!==0&&(f1e()&&(h=Cg),Cg=0);for(var p=we(),b=null,E=Aj;E!==null;){var V=E.next,ee=MV(E,p);ee===0?(E.next=null,b===null?Aj=V:b.next=V,V===null&&(Lv=b)):(b=E,(h!==0||(ee&3)!==0)&&(mj=!0)),E=V}bw(h)}function MV(h,p){for(var b=h.suspendedLanes,E=h.pingedLanes,V=h.expirationTimes,ee=h.pendingLanes&-62914561;0<ee;){var ye=31-Ve(ee),Re=1<<ye,Je=V[ye];Je===-1?((Re&b)===0||(Re&E)!==0)&&(V[ye]=Ut(Re,p)):Je<=p&&(h.expiredLanes|=Re),ee&=~Re}if(p=$a,b=Hn,b=qt(h,h===p?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),E=h.callbackNode,b===0||h===p&&(Na===2||Na===9)||h.cancelPendingCommit!==null)return E!==null&&E!==null&&De(E),h.callbackNode=null,h.callbackPriority=0;if((b&3)===0||ir(h,b)){if(p=b&-b,p===h.callbackPriority)return p;switch(E!==null&&De(E),aa(b)){case 2:case 8:b=ae;break;case 32:b=fe;break;case 268435456:b=xe;break;default:b=fe}return E=UV.bind(null,h),b=je(b,E),h.callbackPriority=p,h.callbackNode=b,p}return E!==null&&E!==null&&De(E),h.callbackPriority=2,h.callbackNode=null,2}function UV(h,p){if(Bo!==0&&Bo!==5)return h.callbackNode=null,h.callbackPriority=0,null;var b=h.callbackNode;if(hj()&&h.callbackNode!==b)return null;var E=Hn;return E=qt(h,h===$a?E:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),E===0?null:(wV(h,E,p),MV(h,we()),h.callbackNode!=null&&h.callbackNode===b?UV.bind(null,h):null)}function HV(h,p){if(hj())return null;wV(h,p,!0)}function a1e(){A1e(function(){(wa&6)!==0?je(de,n1e):LV()})}function tI(){return Cg===0&&(Cg=Nr()),Cg}function QV(h){return h==null||typeof h=="symbol"||typeof h=="boolean"?null:typeof h=="function"?h:Wc(""+h)}function VV(h,p){var b=p.ownerDocument.createElement("input");return b.name=p.name,b.value=p.value,h.id&&b.setAttribute("form",h.id),p.parentNode.insertBefore(b,p),h=new FormData(h),b.parentNode.removeChild(b),h}function s1e(h,p,b,E,V){if(p==="submit"&&b&&b.stateNode===V){var ee=QV((V[cn]||null).action),ye=E.submitter;ye&&(p=(p=ye[cn]||null)?QV(p.formAction):ye.getAttribute("formAction"),p!==null&&(ee=p,ye=null));var Re=new Qu("action","action",null,E,V);h.push({event:Re,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(Cg!==0){var Je=ye?VV(V,ye):new FormData(V);rd(b,{pending:!0,data:Je,method:V.method,action:ee},null,Je)}}else typeof ee=="function"&&(Re.preventDefault(),Je=ye?VV(V,ye):new FormData(V),rd(b,{pending:!0,data:Je,method:V.method,action:ee},ee,Je))},currentTarget:V}]})}}for(var rI=0;rI<b0.length;rI++){var nI=b0[rI],i1e=nI.toLowerCase(),o1e=nI[0].toUpperCase()+nI.slice(1);cs(i1e,"on"+o1e)}cs(JA,"onAnimationEnd"),cs(th,"onAnimationIteration"),cs(rh,"onAnimationStart"),cs("dblclick","onDoubleClick"),cs("focusin","onFocus"),cs("focusout","onBlur"),cs(nh,"onTransitionRun"),cs(v0,"onTransitionStart"),cs(ZA,"onTransitionCancel"),cs(ah,"onTransitionEnd"),Et("onMouseEnter",["mouseout","mouseover"]),Et("onMouseLeave",["mouseout","mouseover"]),Et("onPointerEnter",["pointerout","pointerover"]),Et("onPointerLeave",["pointerout","pointerover"]),Ct("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ct("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ct("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ct("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ct("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ct("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yw="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l1e=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yw));function $V(h,p){p=(p&4)!==0;for(var b=0;b<h.length;b++){var E=h[b],V=E.event;E=E.listeners;e:{var ee=void 0;if(p)for(var ye=E.length-1;0<=ye;ye--){var Re=E[ye],Je=Re.instance,xt=Re.currentTarget;if(Re=Re.listener,Je!==ee&&V.isPropagationStopped())break e;ee=Re,V.currentTarget=xt;try{ee(V)}catch(Pt){rj(Pt)}V.currentTarget=null,ee=Je}else for(ye=0;ye<E.length;ye++){if(Re=E[ye],Je=Re.instance,xt=Re.currentTarget,Re=Re.listener,Je!==ee&&V.isPropagationStopped())break e;ee=Re,V.currentTarget=xt;try{ee(V)}catch(Pt){rj(Pt)}V.currentTarget=null,ee=Je}}}}function _n(h,p){var b=p[Fn];b===void 0&&(b=p[Fn]=new Set);var E=h+"__bubble";b.has(E)||(zV(p,h,2,!1),b.add(E))}function aI(h,p,b){var E=0;p&&(E|=4),zV(b,h,E,p)}var pj="_reactListening"+Math.random().toString(36).slice(2);function sI(h){if(!h[pj]){h[pj]=!0,Ye.forEach(function(b){b!=="selectionchange"&&(l1e.has(b)||aI(b,!1,h),aI(b,!0,h))});var p=h.nodeType===9?h:h.ownerDocument;p===null||p[pj]||(p[pj]=!0,aI("selectionchange",!1,p))}}function zV(h,p,b,E){switch(m$(p)){case 2:var V=P1e;break;case 8:V=F1e;break;default:V=vI}b=V.bind(null,p,b,h),V=void 0,!jo||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(V=!0),E?V!==void 0?h.addEventListener(p,b,{capture:!0,passive:V}):h.addEventListener(p,b,!0):V!==void 0?h.addEventListener(p,b,{passive:V}):h.addEventListener(p,b,!1)}function iI(h,p,b,E,V){var ee=E;if((p&1)===0&&(p&2)===0&&E!==null)e:for(;;){if(E===null)return;var ye=E.tag;if(ye===3||ye===4){var Re=E.stateNode.containerInfo;if(Re===V)break;if(ye===4)for(ye=E.return;ye!==null;){var Je=ye.tag;if((Je===3||Je===4)&&ye.stateNode.containerInfo===V)return;ye=ye.return}for(;Re!==null;){if(ye=Ne(Re),ye===null)return;if(Je=ye.tag,Je===5||Je===6||Je===26||Je===27){E=ee=ye;continue e}Re=Re.parentNode}}E=E.return}qA(function(){var xt=ee,Pt=ba(b),Ht=[];e:{var yt=qd.get(h);if(yt!==void 0){var wt=Qu,Kr=h;switch(h){case"keypress":if(Zo(b)===0)break e;case"keydown":case"keyup":wt=Zc;break;case"focusin":Kr="focus",wt=$u;break;case"focusout":Kr="blur",wt=$u;break;case"beforeblur":case"afterblur":wt=$u;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":wt=Is;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":wt=Vu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":wt=Wf;break;case JA:case th:case rh:wt=Gf;break;case ah:wt=Ee;break;case"scroll":case"scrollend":wt=h0;break;case"wheel":wt=tt;break;case"copy":case"cut":case"paste":wt=qf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":wt=zd;break;case"toggle":case"beforetoggle":wt=kt}var Lr=(p&4)!==0,Da=!Lr&&(h==="scroll"||h==="scrollend"),dt=Lr?yt!==null?yt+"Capture":null:yt;Lr=[];for(var st=xt,mt;st!==null;){var Rt=st;if(mt=Rt.stateNode,Rt=Rt.tag,Rt!==5&&Rt!==26&&Rt!==27||mt===null||dt===null||(Rt=Zi(st,dt),Rt!=null&&Lr.push(ww(st,Rt,mt))),Da)break;st=st.return}0<Lr.length&&(yt=new wt(yt,Kr,null,b,Pt),Ht.push({event:yt,listeners:Lr}))}}if((p&7)===0){e:{if(yt=h==="mouseover"||h==="pointerover",wt=h==="mouseout"||h==="pointerout",yt&&b!==uc&&(Kr=b.relatedTarget||b.fromElement)&&(Ne(Kr)||Kr[On]))break e;if((wt||yt)&&(yt=Pt.window===Pt?Pt:(yt=Pt.ownerDocument)?yt.defaultView||yt.parentWindow:window,wt?(Kr=b.relatedTarget||b.toElement,wt=xt,Kr=Kr?Ne(Kr):null,Kr!==null&&(Da=s(Kr),Lr=Kr.tag,Kr!==Da||Lr!==5&&Lr!==27&&Lr!==6)&&(Kr=null)):(wt=null,Kr=xt),wt!==Kr)){if(Lr=Is,Rt="onMouseLeave",dt="onMouseEnter",st="mouse",(h==="pointerout"||h==="pointerover")&&(Lr=zd,Rt="onPointerLeave",dt="onPointerEnter",st="pointer"),Da=wt==null?yt:Fe(wt),mt=Kr==null?yt:Fe(Kr),yt=new Lr(Rt,st+"leave",wt,b,Pt),yt.target=Da,yt.relatedTarget=mt,Rt=null,Ne(Pt)===xt&&(Lr=new Lr(dt,st+"enter",Kr,b,Pt),Lr.target=mt,Lr.relatedTarget=Da,Rt=Lr),Da=Rt,wt&&Kr)t:{for(Lr=wt,dt=Kr,st=0,mt=Lr;mt;mt=Mv(mt))st++;for(mt=0,Rt=dt;Rt;Rt=Mv(Rt))mt++;for(;0<st-mt;)Lr=Mv(Lr),st--;for(;0<mt-st;)dt=Mv(dt),mt--;for(;st--;){if(Lr===dt||dt!==null&&Lr===dt.alternate)break t;Lr=Mv(Lr),dt=Mv(dt)}Lr=null}else Lr=null;wt!==null&&GV(Ht,yt,wt,Lr,!1),Kr!==null&&Da!==null&&GV(Ht,Da,Kr,Lr,!0)}}e:{if(yt=xt?Fe(xt):window,wt=yt.nodeName&&yt.nodeName.toLowerCase(),wt==="select"||wt==="input"&&yt.type==="file")var br=XA;else if(ua(yt))if(m0)br=Av;else{br=Ky;var En=tl}else wt=yt.nodeName,!wt||wt.toLowerCase()!=="input"||yt.type!=="checkbox"&&yt.type!=="radio"?xt&&Uu(xt.elementType)&&(br=XA):br=ng;if(br&&(br=br(h,xt))){pc(Ht,br,b,Pt);break e}En&&En(h,yt,xt),h==="focusout"&&xt&&yt.type==="number"&&xt.memoizedProps.value!=null&&lc(yt,"number",yt.value)}switch(En=xt?Fe(xt):window,h){case"focusin":(ua(En)||En.contentEditable==="true")&&(rl=En,eu=xt,Wu=null);break;case"focusout":Wu=eu=rl=null;break;case"mousedown":tu=!0;break;case"contextmenu":case"mouseup":case"dragend":tu=!1,ls(Ht,b,Pt);break;case"selectionchange":if(eh)break;case"keydown":case"keyup":ls(Ht,b,Pt)}var kr;if(nr)e:{switch(h){case"compositionstart":var Mr="onCompositionStart";break e;case"compositionend":Mr="onCompositionEnd";break e;case"compositionupdate":Mr="onCompositionUpdate";break e}Mr=void 0}else Rr?gt(h,b)&&(Mr="onCompositionEnd"):h==="keydown"&&b.keyCode===229&&(Mr="onCompositionStart");Mr&&(pe&&b.locale!=="ko"&&(Rr||Mr!=="onCompositionStart"?Mr==="onCompositionEnd"&&Rr&&(kr=f0()):(Jo=Pt,Hu="value"in Jo?Jo.value:Jo.textContent,Rr=!0)),En=gj(xt,Mr),0<En.length&&(Mr=new Qd(Mr,h,null,b,Pt),Ht.push({event:Mr,listeners:En}),kr?Mr.data=kr:(kr=Gt(b),kr!==null&&(Mr.data=kr)))),(kr=se?Cn(h,b):en(h,b))&&(Mr=gj(xt,"onBeforeInput"),0<Mr.length&&(En=new Qd("onBeforeInput","beforeinput",null,b,Pt),Ht.push({event:En,listeners:Mr}),En.data=kr)),s1e(Ht,h,xt,b,Pt)}$V(Ht,p)})}function ww(h,p,b){return{instance:h,listener:p,currentTarget:b}}function gj(h,p){for(var b=p+"Capture",E=[];h!==null;){var V=h,ee=V.stateNode;if(V=V.tag,V!==5&&V!==26&&V!==27||ee===null||(V=Zi(h,b),V!=null&&E.unshift(ww(h,V,ee)),V=Zi(h,p),V!=null&&E.push(ww(h,V,ee))),h.tag===3)return E;h=h.return}return[]}function Mv(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5&&h.tag!==27);return h||null}function GV(h,p,b,E,V){for(var ee=p._reactName,ye=[];b!==null&&b!==E;){var Re=b,Je=Re.alternate,xt=Re.stateNode;if(Re=Re.tag,Je!==null&&Je===E)break;Re!==5&&Re!==26&&Re!==27||xt===null||(Je=xt,V?(xt=Zi(b,ee),xt!=null&&ye.unshift(ww(b,xt,Je))):V||(xt=Zi(b,ee),xt!=null&&ye.push(ww(b,xt,Je)))),b=b.return}ye.length!==0&&h.push({event:p,listeners:ye})}var c1e=/\r\n?/g,u1e=/\u0000|\uFFFD/g;function qV(h){return(typeof h=="string"?h:""+h).replace(c1e,`
`).replace(u1e,"")}function KV(h,p){return p=qV(p),qV(h)===p}function xj(){}function Ia(h,p,b,E,V,ee){switch(b){case"children":typeof E=="string"?p==="body"||p==="textarea"&&E===""||Eo(h,E):(typeof E=="number"||typeof E=="bigint")&&p!=="body"&&Eo(h,""+E);break;case"className":Jr(h,"class",E);break;case"tabIndex":Jr(h,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":Jr(h,b,E);break;case"style":Mu(h,E,ee);break;case"data":if(p!=="object"){Jr(h,"data",E);break}case"src":case"href":if(E===""&&(p!=="a"||b!=="href")){h.removeAttribute(b);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){h.removeAttribute(b);break}E=Wc(""+E),h.setAttribute(b,E);break;case"action":case"formAction":if(typeof E=="function"){h.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof ee=="function"&&(b==="formAction"?(p!=="input"&&Ia(h,p,"name",V.name,V,null),Ia(h,p,"formEncType",V.formEncType,V,null),Ia(h,p,"formMethod",V.formMethod,V,null),Ia(h,p,"formTarget",V.formTarget,V,null)):(Ia(h,p,"encType",V.encType,V,null),Ia(h,p,"method",V.method,V,null),Ia(h,p,"target",V.target,V,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){h.removeAttribute(b);break}E=Wc(""+E),h.setAttribute(b,E);break;case"onClick":E!=null&&(h.onclick=xj);break;case"onScroll":E!=null&&_n("scroll",h);break;case"onScrollEnd":E!=null&&_n("scrollend",h);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(b=E.__html,b!=null){if(V.children!=null)throw Error(n(60));h.innerHTML=b}}break;case"multiple":h.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":h.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){h.removeAttribute("xlink:href");break}b=Wc(""+E),h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?h.setAttribute(b,""+E):h.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?h.setAttribute(b,""):h.removeAttribute(b);break;case"capture":case"download":E===!0?h.setAttribute(b,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?h.setAttribute(b,E):h.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?h.setAttribute(b,E):h.removeAttribute(b);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?h.removeAttribute(b):h.setAttribute(b,E);break;case"popover":_n("beforetoggle",h),_n("toggle",h),rn(h,"popover",E);break;case"xlinkActuate":an(h,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":an(h,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":an(h,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":an(h,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":an(h,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":an(h,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":an(h,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":an(h,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":an(h,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":rn(h,"is",E);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=Ql.get(b)||b,rn(h,b,E))}}function oI(h,p,b,E,V,ee){switch(b){case"style":Mu(h,E,ee);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(b=E.__html,b!=null){if(V.children!=null)throw Error(n(60));h.innerHTML=b}}break;case"children":typeof E=="string"?Eo(h,E):(typeof E=="number"||typeof E=="bigint")&&Eo(h,""+E);break;case"onScroll":E!=null&&_n("scroll",h);break;case"onScrollEnd":E!=null&&_n("scrollend",h);break;case"onClick":E!=null&&(h.onclick=xj);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rt.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(V=b.endsWith("Capture"),p=b.slice(2,V?b.length-7:void 0),ee=h[cn]||null,ee=ee!=null?ee[b]:null,typeof ee=="function"&&h.removeEventListener(p,ee,V),typeof E=="function")){typeof ee!="function"&&ee!==null&&(b in h?h[b]=null:h.hasAttribute(b)&&h.removeAttribute(b)),h.addEventListener(p,E,V);break e}b in h?h[b]=E:E===!0?h.setAttribute(b,""):rn(h,b,E)}}}function Io(h,p,b){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_n("error",h),_n("load",h);var E=!1,V=!1,ee;for(ee in b)if(b.hasOwnProperty(ee)){var ye=b[ee];if(ye!=null)switch(ee){case"src":E=!0;break;case"srcSet":V=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,p));default:Ia(h,p,ee,ye,b,null)}}V&&Ia(h,p,"srcSet",b.srcSet,b,null),E&&Ia(h,p,"src",b.src,b,null);return;case"input":_n("invalid",h);var Re=ee=ye=V=null,Je=null,xt=null;for(E in b)if(b.hasOwnProperty(E)){var Pt=b[E];if(Pt!=null)switch(E){case"name":V=Pt;break;case"type":ye=Pt;break;case"checked":Je=Pt;break;case"defaultChecked":xt=Pt;break;case"value":ee=Pt;break;case"defaultValue":Re=Pt;break;case"children":case"dangerouslySetInnerHTML":if(Pt!=null)throw Error(n(137,p));break;default:Ia(h,p,E,Pt,b,null)}}Hl(h,ee,Re,Je,xt,ye,V,!1),oc(h);return;case"select":_n("invalid",h),E=ye=ee=null;for(V in b)if(b.hasOwnProperty(V)&&(Re=b[V],Re!=null))switch(V){case"value":ee=Re;break;case"defaultValue":ye=Re;break;case"multiple":E=Re;default:Ia(h,p,V,Re,b,null)}p=ee,b=ye,h.multiple=!!E,p!=null?Co(h,!!E,p,!1):b!=null&&Co(h,!!E,b,!0);return;case"textarea":_n("invalid",h),ee=V=E=null;for(ye in b)if(b.hasOwnProperty(ye)&&(Re=b[ye],Re!=null))switch(ye){case"value":E=Re;break;case"defaultValue":V=Re;break;case"children":ee=Re;break;case"dangerouslySetInnerHTML":if(Re!=null)throw Error(n(91));break;default:Ia(h,p,ye,Re,b,null)}cc(h,E,V,ee),oc(h);return;case"option":for(Je in b)if(b.hasOwnProperty(Je)&&(E=b[Je],E!=null))switch(Je){case"selected":h.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:Ia(h,p,Je,E,b,null)}return;case"dialog":_n("beforetoggle",h),_n("toggle",h),_n("cancel",h),_n("close",h);break;case"iframe":case"object":_n("load",h);break;case"video":case"audio":for(E=0;E<yw.length;E++)_n(yw[E],h);break;case"image":_n("error",h),_n("load",h);break;case"details":_n("toggle",h);break;case"embed":case"source":case"link":_n("error",h),_n("load",h);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(xt in b)if(b.hasOwnProperty(xt)&&(E=b[xt],E!=null))switch(xt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,p));default:Ia(h,p,xt,E,b,null)}return;default:if(Uu(p)){for(Pt in b)b.hasOwnProperty(Pt)&&(E=b[Pt],E!==void 0&&oI(h,p,Pt,E,b,void 0));return}}for(Re in b)b.hasOwnProperty(Re)&&(E=b[Re],E!=null&&Ia(h,p,Re,E,b,null))}function d1e(h,p,b,E){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var V=null,ee=null,ye=null,Re=null,Je=null,xt=null,Pt=null;for(wt in b){var Ht=b[wt];if(b.hasOwnProperty(wt)&&Ht!=null)switch(wt){case"checked":break;case"value":break;case"defaultValue":Je=Ht;default:E.hasOwnProperty(wt)||Ia(h,p,wt,null,E,Ht)}}for(var yt in E){var wt=E[yt];if(Ht=b[yt],E.hasOwnProperty(yt)&&(wt!=null||Ht!=null))switch(yt){case"type":ee=wt;break;case"name":V=wt;break;case"checked":xt=wt;break;case"defaultChecked":Pt=wt;break;case"value":ye=wt;break;case"defaultValue":Re=wt;break;case"children":case"dangerouslySetInnerHTML":if(wt!=null)throw Error(n(137,p));break;default:wt!==Ht&&Ia(h,p,yt,wt,E,Ht)}}Zs(h,ye,Re,Je,xt,Pt,ee,V);return;case"select":wt=ye=Re=yt=null;for(ee in b)if(Je=b[ee],b.hasOwnProperty(ee)&&Je!=null)switch(ee){case"value":break;case"multiple":wt=Je;default:E.hasOwnProperty(ee)||Ia(h,p,ee,null,E,Je)}for(V in E)if(ee=E[V],Je=b[V],E.hasOwnProperty(V)&&(ee!=null||Je!=null))switch(V){case"value":yt=ee;break;case"defaultValue":Re=ee;break;case"multiple":ye=ee;default:ee!==Je&&Ia(h,p,V,ee,E,Je)}p=Re,b=ye,E=wt,yt!=null?Co(h,!!b,yt,!1):!!E!=!!b&&(p!=null?Co(h,!!b,p,!0):Co(h,!!b,b?[]:"",!1));return;case"textarea":wt=yt=null;for(Re in b)if(V=b[Re],b.hasOwnProperty(Re)&&V!=null&&!E.hasOwnProperty(Re))switch(Re){case"value":break;case"children":break;default:Ia(h,p,Re,null,E,V)}for(ye in E)if(V=E[ye],ee=b[ye],E.hasOwnProperty(ye)&&(V!=null||ee!=null))switch(ye){case"value":yt=V;break;case"defaultValue":wt=V;break;case"children":break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(n(91));break;default:V!==ee&&Ia(h,p,ye,V,E,ee)}Ln(h,yt,wt);return;case"option":for(var Kr in b)if(yt=b[Kr],b.hasOwnProperty(Kr)&&yt!=null&&!E.hasOwnProperty(Kr))switch(Kr){case"selected":h.selected=!1;break;default:Ia(h,p,Kr,null,E,yt)}for(Je in E)if(yt=E[Je],wt=b[Je],E.hasOwnProperty(Je)&&yt!==wt&&(yt!=null||wt!=null))switch(Je){case"selected":h.selected=yt&&typeof yt!="function"&&typeof yt!="symbol";break;default:Ia(h,p,Je,yt,E,wt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Lr in b)yt=b[Lr],b.hasOwnProperty(Lr)&&yt!=null&&!E.hasOwnProperty(Lr)&&Ia(h,p,Lr,null,E,yt);for(xt in E)if(yt=E[xt],wt=b[xt],E.hasOwnProperty(xt)&&yt!==wt&&(yt!=null||wt!=null))switch(xt){case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(n(137,p));break;default:Ia(h,p,xt,yt,E,wt)}return;default:if(Uu(p)){for(var Da in b)yt=b[Da],b.hasOwnProperty(Da)&&yt!==void 0&&!E.hasOwnProperty(Da)&&oI(h,p,Da,void 0,E,yt);for(Pt in E)yt=E[Pt],wt=b[Pt],!E.hasOwnProperty(Pt)||yt===wt||yt===void 0&&wt===void 0||oI(h,p,Pt,yt,E,wt);return}}for(var dt in b)yt=b[dt],b.hasOwnProperty(dt)&&yt!=null&&!E.hasOwnProperty(dt)&&Ia(h,p,dt,null,E,yt);for(Ht in E)yt=E[Ht],wt=b[Ht],!E.hasOwnProperty(Ht)||yt===wt||yt==null&&wt==null||Ia(h,p,Ht,yt,E,wt)}var lI=null,cI=null;function vj(h){return h.nodeType===9?h:h.ownerDocument}function WV(h){switch(h){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function XV(h,p){if(h===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return h===1&&p==="foreignObject"?0:h}function uI(h,p){return h==="textarea"||h==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var dI=null;function f1e(){var h=window.event;return h&&h.type==="popstate"?h===dI?!1:(dI=h,!0):(dI=null,!1)}var YV=typeof setTimeout=="function"?setTimeout:void 0,h1e=typeof clearTimeout=="function"?clearTimeout:void 0,JV=typeof Promise=="function"?Promise:void 0,A1e=typeof queueMicrotask=="function"?queueMicrotask:typeof JV<"u"?function(h){return JV.resolve(null).then(h).catch(m1e)}:YV;function m1e(h){setTimeout(function(){throw h})}function vm(h){return h==="head"}function ZV(h,p){var b=p,E=0,V=0;do{var ee=b.nextSibling;if(h.removeChild(b),ee&&ee.nodeType===8)if(b=ee.data,b==="/$"){if(0<E&&8>E){b=E;var ye=h.ownerDocument;if(b&1&&Nw(ye.documentElement),b&2&&Nw(ye.body),b&4)for(b=ye.head,Nw(b),ye=b.firstChild;ye;){var Re=ye.nextSibling,Je=ye.nodeName;ye[Me]||Je==="SCRIPT"||Je==="STYLE"||Je==="LINK"&&ye.rel.toLowerCase()==="stylesheet"||b.removeChild(ye),ye=Re}}if(V===0){h.removeChild(ee),Bw(p);return}V--}else b==="$"||b==="$?"||b==="$!"?V++:E=b.charCodeAt(0)-48;else E=0;b=ee}while(b);Bw(p)}function fI(h){var p=h.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var b=p;switch(p=p.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":fI(b),Qe(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}h.removeChild(b)}}function p1e(h,p,b,E){for(;h.nodeType===1;){var V=b;if(h.nodeName.toLowerCase()!==p.toLowerCase()){if(!E&&(h.nodeName!=="INPUT"||h.type!=="hidden"))break}else if(E){if(!h[Me])switch(p){case"meta":if(!h.hasAttribute("itemprop"))break;return h;case"link":if(ee=h.getAttribute("rel"),ee==="stylesheet"&&h.hasAttribute("data-precedence"))break;if(ee!==V.rel||h.getAttribute("href")!==(V.href==null||V.href===""?null:V.href)||h.getAttribute("crossorigin")!==(V.crossOrigin==null?null:V.crossOrigin)||h.getAttribute("title")!==(V.title==null?null:V.title))break;return h;case"style":if(h.hasAttribute("data-precedence"))break;return h;case"script":if(ee=h.getAttribute("src"),(ee!==(V.src==null?null:V.src)||h.getAttribute("type")!==(V.type==null?null:V.type)||h.getAttribute("crossorigin")!==(V.crossOrigin==null?null:V.crossOrigin))&&ee&&h.hasAttribute("async")&&!h.hasAttribute("itemprop"))break;return h;default:return h}}else if(p==="input"&&h.type==="hidden"){var ee=V.name==null?null:""+V.name;if(V.type==="hidden"&&h.getAttribute("name")===ee)return h}else return h;if(h=lf(h.nextSibling),h===null)break}return null}function g1e(h,p,b){if(p==="")return null;for(;h.nodeType!==3;)if((h.nodeType!==1||h.nodeName!=="INPUT"||h.type!=="hidden")&&!b||(h=lf(h.nextSibling),h===null))return null;return h}function hI(h){return h.data==="$!"||h.data==="$?"&&h.ownerDocument.readyState==="complete"}function x1e(h,p){var b=h.ownerDocument;if(h.data!=="$?"||b.readyState==="complete")p();else{var E=function(){p(),b.removeEventListener("DOMContentLoaded",E)};b.addEventListener("DOMContentLoaded",E),h._reactRetry=E}}function lf(h){for(;h!=null;h=h.nextSibling){var p=h.nodeType;if(p===1||p===3)break;if(p===8){if(p=h.data,p==="$"||p==="$!"||p==="$?"||p==="F!"||p==="F")break;if(p==="/$")return null}}return h}var AI=null;function e$(h){h=h.previousSibling;for(var p=0;h;){if(h.nodeType===8){var b=h.data;if(b==="$"||b==="$!"||b==="$?"){if(p===0)return h;p--}else b==="/$"&&p++}h=h.previousSibling}return null}function t$(h,p,b){switch(p=vj(b),h){case"html":if(h=p.documentElement,!h)throw Error(n(452));return h;case"head":if(h=p.head,!h)throw Error(n(453));return h;case"body":if(h=p.body,!h)throw Error(n(454));return h;default:throw Error(n(451))}}function Nw(h){for(var p=h.attributes;p.length;)h.removeAttributeNode(p[0]);Qe(h)}var sd=new Map,r$=new Set;function bj(h){return typeof h.getRootNode=="function"?h.getRootNode():h.nodeType===9?h:h.ownerDocument}var R0=z.d;z.d={f:v1e,r:b1e,D:y1e,C:w1e,L:N1e,m:C1e,X:j1e,S:E1e,M:k1e};function v1e(){var h=R0.f(),p=dj();return h||p}function b1e(h){var p=ve(h);p!==null&&p.tag===5&&p.type==="form"?vg(p):R0.r(h)}var Uv=typeof document>"u"?null:document;function n$(h,p,b){var E=Uv;if(E&&typeof p=="string"&&p){var V=gn(p);V='link[rel="'+h+'"][href="'+V+'"]',typeof b=="string"&&(V+='[crossorigin="'+b+'"]'),r$.has(V)||(r$.add(V),h={rel:h,crossOrigin:b,href:p},E.querySelector(V)===null&&(p=E.createElement("link"),Io(p,"link",h),He(p),E.head.appendChild(p)))}}function y1e(h){R0.D(h),n$("dns-prefetch",h,null)}function w1e(h,p){R0.C(h,p),n$("preconnect",h,p)}function N1e(h,p,b){R0.L(h,p,b);var E=Uv;if(E&&h&&p){var V='link[rel="preload"][as="'+gn(p)+'"]';p==="image"&&b&&b.imageSrcSet?(V+='[imagesrcset="'+gn(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(V+='[imagesizes="'+gn(b.imageSizes)+'"]')):V+='[href="'+gn(h)+'"]';var ee=V;switch(p){case"style":ee=Hv(h);break;case"script":ee=Qv(h)}sd.has(ee)||(h=d({rel:"preload",href:p==="image"&&b&&b.imageSrcSet?void 0:h,as:p},b),sd.set(ee,h),E.querySelector(V)!==null||p==="style"&&E.querySelector(Cw(ee))||p==="script"&&E.querySelector(Ew(ee))||(p=E.createElement("link"),Io(p,"link",h),He(p),E.head.appendChild(p)))}}function C1e(h,p){R0.m(h,p);var b=Uv;if(b&&h){var E=p&&typeof p.as=="string"?p.as:"script",V='link[rel="modulepreload"][as="'+gn(E)+'"][href="'+gn(h)+'"]',ee=V;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":ee=Qv(h)}if(!sd.has(ee)&&(h=d({rel:"modulepreload",href:h},p),sd.set(ee,h),b.querySelector(V)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(Ew(ee)))return}E=b.createElement("link"),Io(E,"link",h),He(E),b.head.appendChild(E)}}}function E1e(h,p,b){R0.S(h,p,b);var E=Uv;if(E&&h){var V=ze(E).hoistableStyles,ee=Hv(h);p=p||"default";var ye=V.get(ee);if(!ye){var Re={loading:0,preload:null};if(ye=E.querySelector(Cw(ee)))Re.loading=5;else{h=d({rel:"stylesheet",href:h,"data-precedence":p},b),(b=sd.get(ee))&&mI(h,b);var Je=ye=E.createElement("link");He(Je),Io(Je,"link",h),Je._p=new Promise(function(xt,Pt){Je.onload=xt,Je.onerror=Pt}),Je.addEventListener("load",function(){Re.loading|=1}),Je.addEventListener("error",function(){Re.loading|=2}),Re.loading|=4,yj(ye,p,E)}ye={type:"stylesheet",instance:ye,count:1,state:Re},V.set(ee,ye)}}}function j1e(h,p){R0.X(h,p);var b=Uv;if(b&&h){var E=ze(b).hoistableScripts,V=Qv(h),ee=E.get(V);ee||(ee=b.querySelector(Ew(V)),ee||(h=d({src:h,async:!0},p),(p=sd.get(V))&&pI(h,p),ee=b.createElement("script"),He(ee),Io(ee,"link",h),b.head.appendChild(ee)),ee={type:"script",instance:ee,count:1,state:null},E.set(V,ee))}}function k1e(h,p){R0.M(h,p);var b=Uv;if(b&&h){var E=ze(b).hoistableScripts,V=Qv(h),ee=E.get(V);ee||(ee=b.querySelector(Ew(V)),ee||(h=d({src:h,async:!0,type:"module"},p),(p=sd.get(V))&&pI(h,p),ee=b.createElement("script"),He(ee),Io(ee,"link",h),b.head.appendChild(ee)),ee={type:"script",instance:ee,count:1,state:null},E.set(V,ee))}}function a$(h,p,b,E){var V=(V=le.current)?bj(V):null;if(!V)throw Error(n(446));switch(h){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(p=Hv(b.href),b=ze(V).hoistableStyles,E=b.get(p),E||(E={type:"style",instance:null,count:0,state:null},b.set(p,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){h=Hv(b.href);var ee=ze(V).hoistableStyles,ye=ee.get(h);if(ye||(V=V.ownerDocument||V,ye={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},ee.set(h,ye),(ee=V.querySelector(Cw(h)))&&!ee._p&&(ye.instance=ee,ye.state.loading=5),sd.has(h)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},sd.set(h,b),ee||S1e(V,h,b,ye.state))),p&&E===null)throw Error(n(528,""));return ye}if(p&&E!==null)throw Error(n(529,""));return null;case"script":return p=b.async,b=b.src,typeof b=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=Qv(b),b=ze(V).hoistableScripts,E=b.get(p),E||(E={type:"script",instance:null,count:0,state:null},b.set(p,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,h))}}function Hv(h){return'href="'+gn(h)+'"'}function Cw(h){return'link[rel="stylesheet"]['+h+"]"}function s$(h){return d({},h,{"data-precedence":h.precedence,precedence:null})}function S1e(h,p,b,E){h.querySelector('link[rel="preload"][as="style"]['+p+"]")?E.loading=1:(p=h.createElement("link"),E.preload=p,p.addEventListener("load",function(){return E.loading|=1}),p.addEventListener("error",function(){return E.loading|=2}),Io(p,"link",b),He(p),h.head.appendChild(p))}function Qv(h){return'[src="'+gn(h)+'"]'}function Ew(h){return"script[async]"+h}function i$(h,p,b){if(p.count++,p.instance===null)switch(p.type){case"style":var E=h.querySelector('style[data-href~="'+gn(b.href)+'"]');if(E)return p.instance=E,He(E),E;var V=d({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return E=(h.ownerDocument||h).createElement("style"),He(E),Io(E,"style",V),yj(E,b.precedence,h),p.instance=E;case"stylesheet":V=Hv(b.href);var ee=h.querySelector(Cw(V));if(ee)return p.state.loading|=4,p.instance=ee,He(ee),ee;E=s$(b),(V=sd.get(V))&&mI(E,V),ee=(h.ownerDocument||h).createElement("link"),He(ee);var ye=ee;return ye._p=new Promise(function(Re,Je){ye.onload=Re,ye.onerror=Je}),Io(ee,"link",E),p.state.loading|=4,yj(ee,b.precedence,h),p.instance=ee;case"script":return ee=Qv(b.src),(V=h.querySelector(Ew(ee)))?(p.instance=V,He(V),V):(E=b,(V=sd.get(ee))&&(E=d({},b),pI(E,V)),h=h.ownerDocument||h,V=h.createElement("script"),He(V),Io(V,"link",E),h.head.appendChild(V),p.instance=V);case"void":return null;default:throw Error(n(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(E=p.instance,p.state.loading|=4,yj(E,b.precedence,h));return p.instance}function yj(h,p,b){for(var E=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),V=E.length?E[E.length-1]:null,ee=V,ye=0;ye<E.length;ye++){var Re=E[ye];if(Re.dataset.precedence===p)ee=Re;else if(ee!==V)break}ee?ee.parentNode.insertBefore(h,ee.nextSibling):(p=b.nodeType===9?b.head:b,p.insertBefore(h,p.firstChild))}function mI(h,p){h.crossOrigin==null&&(h.crossOrigin=p.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=p.referrerPolicy),h.title==null&&(h.title=p.title)}function pI(h,p){h.crossOrigin==null&&(h.crossOrigin=p.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=p.referrerPolicy),h.integrity==null&&(h.integrity=p.integrity)}var wj=null;function o$(h,p,b){if(wj===null){var E=new Map,V=wj=new Map;V.set(b,E)}else V=wj,E=V.get(b),E||(E=new Map,V.set(b,E));if(E.has(h))return E;for(E.set(h,null),b=b.getElementsByTagName(h),V=0;V<b.length;V++){var ee=b[V];if(!(ee[Me]||ee[wn]||h==="link"&&ee.getAttribute("rel")==="stylesheet")&&ee.namespaceURI!=="http://www.w3.org/2000/svg"){var ye=ee.getAttribute(p)||"";ye=h+ye;var Re=E.get(ye);Re?Re.push(ee):E.set(ye,[ee])}}return E}function l$(h,p,b){h=h.ownerDocument||h,h.head.insertBefore(b,p==="title"?h.querySelector("head > title"):null)}function _1e(h,p,b){if(b===1||p.itemProp!=null)return!1;switch(h){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return h=p.disabled,typeof p.precedence=="string"&&h==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function c$(h){return!(h.type==="stylesheet"&&(h.state.loading&3)===0)}var jw=null;function T1e(){}function B1e(h,p,b){if(jw===null)throw Error(n(475));var E=jw;if(p.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var V=Hv(b.href),ee=h.querySelector(Cw(V));if(ee){h=ee._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(E.count++,E=Nj.bind(E),h.then(E,E)),p.state.loading|=4,p.instance=ee,He(ee);return}ee=h.ownerDocument||h,b=s$(b),(V=sd.get(V))&&mI(b,V),ee=ee.createElement("link"),He(ee);var ye=ee;ye._p=new Promise(function(Re,Je){ye.onload=Re,ye.onerror=Je}),Io(ee,"link",b),p.instance=ee}E.stylesheets===null&&(E.stylesheets=new Map),E.stylesheets.set(p,h),(h=p.state.preload)&&(p.state.loading&3)===0&&(E.count++,p=Nj.bind(E),h.addEventListener("load",p),h.addEventListener("error",p))}}function I1e(){if(jw===null)throw Error(n(475));var h=jw;return h.stylesheets&&h.count===0&&gI(h,h.stylesheets),0<h.count?function(p){var b=setTimeout(function(){if(h.stylesheets&&gI(h,h.stylesheets),h.unsuspend){var E=h.unsuspend;h.unsuspend=null,E()}},6e4);return h.unsuspend=p,function(){h.unsuspend=null,clearTimeout(b)}}:null}function Nj(){if(this.count--,this.count===0){if(this.stylesheets)gI(this,this.stylesheets);else if(this.unsuspend){var h=this.unsuspend;this.unsuspend=null,h()}}}var Cj=null;function gI(h,p){h.stylesheets=null,h.unsuspend!==null&&(h.count++,Cj=new Map,p.forEach(D1e,h),Cj=null,Nj.call(h))}function D1e(h,p){if(!(p.state.loading&4)){var b=Cj.get(h);if(b)var E=b.get(null);else{b=new Map,Cj.set(h,b);for(var V=h.querySelectorAll("link[data-precedence],style[data-precedence]"),ee=0;ee<V.length;ee++){var ye=V[ee];(ye.nodeName==="LINK"||ye.getAttribute("media")!=="not all")&&(b.set(ye.dataset.precedence,ye),E=ye)}E&&b.set(null,E)}V=p.instance,ye=V.getAttribute("data-precedence"),ee=b.get(ye)||E,ee===E&&b.set(null,V),b.set(ye,V),this.count++,E=Nj.bind(this),V.addEventListener("load",E),V.addEventListener("error",E),ee?ee.parentNode.insertBefore(V,ee.nextSibling):(h=h.nodeType===9?h.head:h,h.insertBefore(V,h.firstChild)),p.state.loading|=4}}var kw={$$typeof:C,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function O1e(h,p,b,E,V,ee,ye,Re){this.tag=1,this.containerInfo=h,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xr(0),this.hiddenUpdates=Xr(null),this.identifierPrefix=E,this.onUncaughtError=V,this.onCaughtError=ee,this.onRecoverableError=ye,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Re,this.incompleteTransitions=new Map}function u$(h,p,b,E,V,ee,ye,Re,Je,xt,Pt,Ht){return h=new O1e(h,p,b,ye,Re,Je,xt,Ht),p=1,ee===!0&&(p|=24),ee=no(3,null,null,p),h.current=ee,ee.stateNode=h,p=Xy(),p.refCount++,h.pooledCache=p,p.refCount++,ee.memoizedState={element:E,isDehydrated:b,cache:p},at(ee),h}function d$(h){return h?(h=Ci,h):Ci}function f$(h,p,b,E,V,ee){V=d$(V),E.context===null?E.context=V:E.pendingContext=V,E=Dt(p),E.payload={element:b},ee=ee===void 0?null:ee,ee!==null&&(E.callback=ee),b=Mt(h,E,p),b!==null&&(cu(b,h,p),Ft(b,h,p))}function h$(h,p){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var b=h.retryLane;h.retryLane=b!==0&&b<p?b:p}}function xI(h,p){h$(h,p),(h=h.alternate)&&h$(h,p)}function A$(h){if(h.tag===13){var p=Kd(h,67108864);p!==null&&cu(p,h,67108864),xI(h,67108864)}}var Ej=!0;function P1e(h,p,b,E){var V=Q.T;Q.T=null;var ee=z.p;try{z.p=2,vI(h,p,b,E)}finally{z.p=ee,Q.T=V}}function F1e(h,p,b,E){var V=Q.T;Q.T=null;var ee=z.p;try{z.p=8,vI(h,p,b,E)}finally{z.p=ee,Q.T=V}}function vI(h,p,b,E){if(Ej){var V=bI(E);if(V===null)iI(h,p,E,jj,b),p$(h,E);else if(L1e(V,h,p,b,E))E.stopPropagation();else if(p$(h,E),p&4&&-1<R1e.indexOf(h)){for(;V!==null;){var ee=ve(V);if(ee!==null)switch(ee.tag){case 3:if(ee=ee.stateNode,ee.current.memoizedState.isDehydrated){var ye=jt(ee.pendingLanes);if(ye!==0){var Re=ee;for(Re.pendingLanes|=2,Re.entangledLanes|=2;ye;){var Je=1<<31-Ve(ye);Re.entanglements[1]|=Je,ye&=~Je}xh(ee),(wa&6)===0&&(cj=we()+500,bw(0))}}break;case 13:Re=Kd(ee,2),Re!==null&&cu(Re,ee,2),dj(),xI(ee,2)}if(ee=bI(E),ee===null&&iI(h,p,E,jj,b),ee===V)break;V=ee}V!==null&&E.stopPropagation()}else iI(h,p,E,null,b)}}function bI(h){return h=ba(h),yI(h)}var jj=null;function yI(h){if(jj=null,h=Ne(h),h!==null){var p=s(h);if(p===null)h=null;else{var b=p.tag;if(b===13){if(h=o(p),h!==null)return h;h=null}else if(b===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;h=null}else p!==h&&(h=null)}}return jj=h,null}function m$(h){switch(h){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ae()){case de:return 2;case ae:return 8;case fe:case ge:return 32;case xe:return 268435456;default:return 32}default:return 32}}var wI=!1,bm=null,ym=null,wm=null,Sw=new Map,_w=new Map,Nm=[],R1e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function p$(h,p){switch(h){case"focusin":case"focusout":bm=null;break;case"dragenter":case"dragleave":ym=null;break;case"mouseover":case"mouseout":wm=null;break;case"pointerover":case"pointerout":Sw.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":_w.delete(p.pointerId)}}function Tw(h,p,b,E,V,ee){return h===null||h.nativeEvent!==ee?(h={blockedOn:p,domEventName:b,eventSystemFlags:E,nativeEvent:ee,targetContainers:[V]},p!==null&&(p=ve(p),p!==null&&A$(p)),h):(h.eventSystemFlags|=E,p=h.targetContainers,V!==null&&p.indexOf(V)===-1&&p.push(V),h)}function L1e(h,p,b,E,V){switch(p){case"focusin":return bm=Tw(bm,h,p,b,E,V),!0;case"dragenter":return ym=Tw(ym,h,p,b,E,V),!0;case"mouseover":return wm=Tw(wm,h,p,b,E,V),!0;case"pointerover":var ee=V.pointerId;return Sw.set(ee,Tw(Sw.get(ee)||null,h,p,b,E,V)),!0;case"gotpointercapture":return ee=V.pointerId,_w.set(ee,Tw(_w.get(ee)||null,h,p,b,E,V)),!0}return!1}function g$(h){var p=Ne(h.target);if(p!==null){var b=s(p);if(b!==null){if(p=b.tag,p===13){if(p=o(b),p!==null){h.blockedOn=p,is(h.priority,function(){if(b.tag===13){var E=lu();E=Xa(E);var V=Kd(b,E);V!==null&&cu(V,b,E),xI(b,E)}});return}}else if(p===3&&b.stateNode.current.memoizedState.isDehydrated){h.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}h.blockedOn=null}function kj(h){if(h.blockedOn!==null)return!1;for(var p=h.targetContainers;0<p.length;){var b=bI(h.nativeEvent);if(b===null){b=h.nativeEvent;var E=new b.constructor(b.type,b);uc=E,b.target.dispatchEvent(E),uc=null}else return p=ve(b),p!==null&&A$(p),h.blockedOn=b,!1;p.shift()}return!0}function x$(h,p,b){kj(h)&&b.delete(p)}function M1e(){wI=!1,bm!==null&&kj(bm)&&(bm=null),ym!==null&&kj(ym)&&(ym=null),wm!==null&&kj(wm)&&(wm=null),Sw.forEach(x$),_w.forEach(x$)}function Sj(h,p){h.blockedOn===p&&(h.blockedOn=null,wI||(wI=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,M1e)))}var _j=null;function v$(h){_j!==h&&(_j=h,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){_j===h&&(_j=null);for(var p=0;p<h.length;p+=3){var b=h[p],E=h[p+1],V=h[p+2];if(typeof E!="function"){if(yI(E||b)===null)continue;break}var ee=ve(b);ee!==null&&(h.splice(p,3),p-=3,rd(ee,{pending:!0,data:V,method:b.method,action:E},E,V))}}))}function Bw(h){function p(Je){return Sj(Je,h)}bm!==null&&Sj(bm,h),ym!==null&&Sj(ym,h),wm!==null&&Sj(wm,h),Sw.forEach(p),_w.forEach(p);for(var b=0;b<Nm.length;b++){var E=Nm[b];E.blockedOn===h&&(E.blockedOn=null)}for(;0<Nm.length&&(b=Nm[0],b.blockedOn===null);)g$(b),b.blockedOn===null&&Nm.shift();if(b=(h.ownerDocument||h).$$reactFormReplay,b!=null)for(E=0;E<b.length;E+=3){var V=b[E],ee=b[E+1],ye=V[cn]||null;if(typeof ee=="function")ye||v$(b);else if(ye){var Re=null;if(ee&&ee.hasAttribute("formAction")){if(V=ee,ye=ee[cn]||null)Re=ye.formAction;else if(yI(V)!==null)continue}else Re=ye.action;typeof Re=="function"?b[E+1]=Re:(b.splice(E,3),E-=3),v$(b)}}}function NI(h){this._internalRoot=h}Tj.prototype.render=NI.prototype.render=function(h){var p=this._internalRoot;if(p===null)throw Error(n(409));var b=p.current,E=lu();f$(b,E,h,p,null,null)},Tj.prototype.unmount=NI.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var p=h.containerInfo;f$(h.current,2,null,h,null,null),dj(),p[On]=null}};function Tj(h){this._internalRoot=h}Tj.prototype.unstable_scheduleHydration=function(h){if(h){var p=Gn();h={blockedOn:null,target:h,priority:p};for(var b=0;b<Nm.length&&p!==0&&p<Nm[b].priority;b++);Nm.splice(b,0,h),b===0&&g$(h)}};var b$=t.version;if(b$!=="19.1.1")throw Error(n(527,b$,"19.1.1"));z.findDOMNode=function(h){var p=h._reactInternals;if(p===void 0)throw typeof h.render=="function"?Error(n(188)):(h=Object.keys(h).join(","),Error(n(268,h)));return h=c(p),h=h!==null?u(h):null,h=h===null?null:h.stateNode,h};var U1e={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bj=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bj.isDisabled&&Bj.supportsFiber)try{Ze=Bj.inject(U1e),We=Bj}catch{}}return Dw.createRoot=function(h,p){if(!a(h))throw Error(n(299));var b=!1,E="",V=FQ,ee=RQ,ye=LQ,Re=null;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(V=p.onUncaughtError),p.onCaughtError!==void 0&&(ee=p.onCaughtError),p.onRecoverableError!==void 0&&(ye=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(Re=p.unstable_transitionCallbacks)),p=u$(h,1,!1,null,null,b,E,V,ee,ye,Re,null),h[On]=p.current,sI(h),new NI(p)},Dw.hydrateRoot=function(h,p,b){if(!a(h))throw Error(n(299));var E=!1,V="",ee=FQ,ye=RQ,Re=LQ,Je=null,xt=null;return b!=null&&(b.unstable_strictMode===!0&&(E=!0),b.identifierPrefix!==void 0&&(V=b.identifierPrefix),b.onUncaughtError!==void 0&&(ee=b.onUncaughtError),b.onCaughtError!==void 0&&(ye=b.onCaughtError),b.onRecoverableError!==void 0&&(Re=b.onRecoverableError),b.unstable_transitionCallbacks!==void 0&&(Je=b.unstable_transitionCallbacks),b.formState!==void 0&&(xt=b.formState)),p=u$(h,1,!0,p,b??null,E,V,ee,ye,Re,Je,xt),p.context=d$(null),b=p.current,E=lu(),E=Xa(E),V=Dt(E),V.callback=null,Mt(b,V,E),b=E,p.current.lanes=b,hr(p,b),xh(p),h[On]=p.current,sI(h),new Tj(p)},Dw.version="19.1.1",Dw}var T$;function eye(){if(T$)return kI.exports;T$=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),kI.exports=Z1e(),kI.exports}var tye=eye();const rye=sc(tye),nye=()=>{};var B$={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xne=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},aye=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const a=e[r++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[r++];t[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=e[r++],o=e[r++],l=e[r++],c=((a&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;t[n++]=String.fromCharCode(55296+(c>>10)),t[n++]=String.fromCharCode(56320+(c&1023))}else{const s=e[r++],o=e[r++];t[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|o&63)}}return t.join("")},S8={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<e.length;a+=3){const s=e[a],o=a+1<e.length,l=o?e[a+1]:0,c=a+2<e.length,u=c?e[a+2]:0,d=s>>2,f=(s&3)<<4|l>>4;let A=(l&15)<<2|u>>6,m=u&63;c||(m=64,o||(A=64)),n.push(r[d],r[f],r[A],r[m])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Xne(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):aye(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<e.length;){const s=r[e.charAt(a++)],l=a<e.length?r[e.charAt(a)]:0;++a;const u=a<e.length?r[e.charAt(a)]:64;++a;const f=a<e.length?r[e.charAt(a)]:64;if(++a,s==null||l==null||u==null||f==null)throw new sye;const A=s<<2|l>>4;if(n.push(A),u!==64){const m=l<<4&240|u>>2;if(n.push(m),f!==64){const g=u<<6&192|f;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class sye extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iye=function(e){const t=Xne(e);return S8.encodeByteArray(t,!0)},h5=function(e){return iye(e).replace(/\./g,"")},Yne=function(e){try{return S8.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jne(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oye=()=>Jne().__FIREBASE_DEFAULTS__,lye=()=>{if(typeof process>"u"||typeof B$>"u")return;const e=B$.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},cye=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Yne(e[1]);return t&&JSON.parse(t)},O4=()=>{try{return nye()||oye()||lye()||cye()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Zne=e=>{var t,r;return(r=(t=O4())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},_8=e=>{const t=Zne(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},eae=()=>{var e;return(e=O4())==null?void 0:e.config},tae=e=>{var t;return(t=O4())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function P4(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rae(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",a=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[h5(JSON.stringify(r)),h5(JSON.stringify(o)),""].join(".")}const U2={};function uye(){const e={prod:[],emulator:[]};for(const t of Object.keys(U2))U2[t]?e.emulator.push(t):e.prod.push(t);return e}function dye(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let I$=!1;function F4(e,t){if(typeof window>"u"||typeof document>"u"||!FA(window.location.host)||U2[e]===t||U2[e]||I$)return;U2[e]=t;function r(A){return`__firebase__banner__${A}`}const n="__firebase__banner",s=uye().prod.length>0;function o(){const A=document.getElementById(n);A&&A.remove()}function l(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function c(A,m){A.setAttribute("width","24"),A.setAttribute("id",m),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function u(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{I$=!0,o()},A}function d(A,m){A.setAttribute("id",m),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function f(){const A=dye(n),m=r("text"),g=document.getElementById(m)||document.createElement("span"),x=r("learnmore"),v=document.getElementById(x)||document.createElement("a"),y=r("preprendIcon"),N=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const C=A.element;l(C),d(v,x);const _=u();c(N,y),C.append(N,g,v,_),document.body.appendChild(C)}s?(g.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fye(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pl())}function hye(){var t;const e=(t=O4())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Aye(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mye(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function pye(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gye(){const e=Pl();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function xye(){return!hye()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function T8(){try{return typeof indexedDB=="object"}catch{return!1}}function vye(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;t(((s=a.error)==null?void 0:s.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bye="FirebaseError";class Lf extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=bye,Object.setPrototypeOf(this,Lf.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cy.prototype.create)}}class cy{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},a=`${this.service}/${t}`,s=this.errors[t],o=s?yye(s,n):"Error",l=`${this.serviceName}: ${o} (${a}).`;return new Lf(a,l,n)}}function yye(e,t){return e.replace(wye,(r,n)=>{const a=t[n];return a!=null?String(a):`<${n}?>`})}const wye=/\{\$([^}]+)}/g;function Nye(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ex(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const a of r){if(!n.includes(a))return!1;const s=e[a],o=t[a];if(D$(s)&&D$(o)){if(!Ex(s,o))return!1}else if(s!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function D$(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function h2(e){const t={};return e.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");t[decodeURIComponent(a)]=decodeURIComponent(s)}}),t}function A2(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function Cye(e,t){const r=new Eye(e,t);return r.subscribe.bind(r)}class Eye{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let a;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");jye(t,["next","error","complete"])?a=t:a={next:t,error:r,complete:n},a.next===void 0&&(a.next=BI),a.error===void 0&&(a.error=BI),a.complete===void 0&&(a.complete=BI);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jye(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function BI(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kye=1e3,Sye=2,_ye=14400*1e3,Tye=.5;function Bye(e,t=kye,r=Sye){const n=t*Math.pow(r,e),a=Math.round(Tye*n*(Math.random()-.5)*2);return Math.min(_ye,n+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(e){return e&&e._delegate?e._delegate:e}class Bf{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iye=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new NN;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Oye(t))try{this.getOrInitializeService({instanceIdentifier:Bg})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(t=Bg){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Bg){return this.instances.has(t)}getOptions(t=Bg){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&o.resolve(a)}return a}onInit(t,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(t),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&t(s,n),()=>{a.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Dye(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Bg){return this.component?this.component.multipleInstances?t:Bg:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Dye(e){return e===Bg?void 0:e}function Oye(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pye{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new Iye(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Bn||(Bn={}));const Fye={debug:Bn.DEBUG,verbose:Bn.VERBOSE,info:Bn.INFO,warn:Bn.WARN,error:Bn.ERROR,silent:Bn.SILENT},Rye=Bn.INFO,Lye={[Bn.DEBUG]:"log",[Bn.VERBOSE]:"log",[Bn.INFO]:"info",[Bn.WARN]:"warn",[Bn.ERROR]:"error"},Mye=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),a=Lye[t];if(a)console[a](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let R4=class{constructor(t){this.name=t,this._logLevel=Rye,this._logHandler=Mye,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Bn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Fye[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Bn.DEBUG,...t),this._logHandler(this,Bn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Bn.VERBOSE,...t),this._logHandler(this,Bn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Bn.INFO,...t),this._logHandler(this,Bn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Bn.WARN,...t),this._logHandler(this,Bn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Bn.ERROR,...t),this._logHandler(this,Bn.ERROR,...t)}};const Uye=(e,t)=>t.some(r=>e instanceof r);let O$,P$;function Hye(){return O$||(O$=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qye(){return P$||(P$=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nae=new WeakMap,zP=new WeakMap,aae=new WeakMap,II=new WeakMap,B8=new WeakMap;function Vye(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{r(sp(e.result)),a()},o=()=>{n(e.error),a()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(r=>{r instanceof IDBCursor&&nae.set(r,e)}).catch(()=>{}),B8.set(t,e),t}function $ye(e){if(zP.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{r(),a()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});zP.set(e,t)}let GP={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return zP.get(e);if(t==="objectStoreNames")return e.objectStoreNames||aae.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return sp(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function zye(e){GP=e(GP)}function Gye(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(DI(this),t,...r);return aae.set(n,t.sort?t.sort():[t]),sp(n)}:Qye().includes(e)?function(...t){return e.apply(DI(this),t),sp(nae.get(this))}:function(...t){return sp(e.apply(DI(this),t))}}function qye(e){return typeof e=="function"?Gye(e):(e instanceof IDBTransaction&&$ye(e),Uye(e,Hye())?new Proxy(e,GP):e)}function sp(e){if(e instanceof IDBRequest)return Vye(e);if(II.has(e))return II.get(e);const t=qye(e);return t!==e&&(II.set(e,t),B8.set(t,e)),t}const DI=e=>B8.get(e);function Kye(e,t,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const o=indexedDB.open(e,t),l=sp(o);return n&&o.addEventListener("upgradeneeded",c=>{n(sp(o.result),c.oldVersion,c.newVersion,sp(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Wye=["get","getKey","getAll","getAllKeys","count"],Xye=["put","add","delete","clear"],OI=new Map;function F$(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(OI.get(t))return OI.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=Xye.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||Wye.includes(r)))return;const s=async function(o,...l){const c=this.transaction(o,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),a&&c.done]))[0]};return OI.set(t,s),s}zye(e=>({...e,get:(t,r,n)=>F$(t,r)||e.get(t,r,n),has:(t,r)=>!!F$(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yye{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Jye(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function Jye(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const qP="@firebase/app",R$="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA=new R4("@firebase/app"),Zye="@firebase/app-compat",ewe="@firebase/analytics-compat",twe="@firebase/analytics",rwe="@firebase/app-check-compat",nwe="@firebase/app-check",awe="@firebase/auth",swe="@firebase/auth-compat",iwe="@firebase/database",owe="@firebase/data-connect",lwe="@firebase/database-compat",cwe="@firebase/functions",uwe="@firebase/functions-compat",dwe="@firebase/installations",fwe="@firebase/installations-compat",hwe="@firebase/messaging",Awe="@firebase/messaging-compat",mwe="@firebase/performance",pwe="@firebase/performance-compat",gwe="@firebase/remote-config",xwe="@firebase/remote-config-compat",vwe="@firebase/storage",bwe="@firebase/storage-compat",ywe="@firebase/firestore",wwe="@firebase/ai",Nwe="@firebase/firestore-compat",Cwe="firebase",Ewe="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="[DEFAULT]",jwe={[qP]:"fire-core",[Zye]:"fire-core-compat",[twe]:"fire-analytics",[ewe]:"fire-analytics-compat",[nwe]:"fire-app-check",[rwe]:"fire-app-check-compat",[awe]:"fire-auth",[swe]:"fire-auth-compat",[iwe]:"fire-rtdb",[owe]:"fire-data-connect",[lwe]:"fire-rtdb-compat",[cwe]:"fire-fn",[uwe]:"fire-fn-compat",[dwe]:"fire-iid",[fwe]:"fire-iid-compat",[hwe]:"fire-fcm",[Awe]:"fire-fcm-compat",[mwe]:"fire-perf",[pwe]:"fire-perf-compat",[gwe]:"fire-rc",[xwe]:"fire-rc-compat",[vwe]:"fire-gcs",[bwe]:"fire-gcs-compat",[ywe]:"fire-fst",[Nwe]:"fire-fst-compat",[wwe]:"fire-vertex","fire-js":"fire-js",[Cwe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=new Map,kwe=new Map,WP=new Map;function L$(e,t){try{e.container.addComponent(t)}catch(r){pA.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function e0(e){const t=e.name;if(WP.has(t))return pA.debug(`There were multiple attempts to register component ${t}.`),!1;WP.set(t,e);for(const r of CN.values())L$(r,e);for(const r of kwe.values())L$(r,e);return!0}function zx(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function bu(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Swe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ip=new cy("app","Firebase",Swe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _we{constructor(t,r,n){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Bf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ip.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=Ewe;function I8(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n={name:KP,automaticDataCollectionEnabled:!0,...t},a=n.name;if(typeof a!="string"||!a)throw ip.create("bad-app-name",{appName:String(a)});if(r||(r=eae()),!r)throw ip.create("no-options");const s=CN.get(a);if(s){if(Ex(r,s.options)&&Ex(n,s.config))return s;throw ip.create("duplicate-app",{appName:a})}const o=new Pye(a);for(const c of WP.values())o.addComponent(c);const l=new _we(r,n,o);return CN.set(a,l),l}function DC(e=KP){const t=CN.get(e);if(!t&&e===KP&&eae())return I8();if(!t)throw ip.create("no-app",{appName:e});return t}function M$(){return Array.from(CN.values())}function Su(e,t,r){let n=jwe[e]??e;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const o=[`Unable to register library "${n}" with version "${t}":`];a&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&o.push("and"),s&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),pA.warn(o.join(" "));return}e0(new Bf(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Twe="firebase-heartbeat-database",Bwe=1,EN="firebase-heartbeat-store";let PI=null;function sae(){return PI||(PI=Kye(Twe,Bwe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(EN)}catch(r){console.warn(r)}}}}).catch(e=>{throw ip.create("idb-open",{originalErrorMessage:e.message})})),PI}async function Iwe(e){try{const r=(await sae()).transaction(EN),n=await r.objectStore(EN).get(iae(e));return await r.done,n}catch(t){if(t instanceof Lf)pA.warn(t.message);else{const r=ip.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});pA.warn(r.message)}}}async function U$(e,t){try{const n=(await sae()).transaction(EN,"readwrite");await n.objectStore(EN).put(t,iae(e)),await n.done}catch(r){if(r instanceof Lf)pA.warn(r.message);else{const n=ip.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});pA.warn(n.message)}}}function iae(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dwe=1024,Owe=30;class Pwe{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Rwe(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=H$();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>Owe){const o=Lwe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){pA.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=H$(),{heartbeatsToSend:n,unsentEntries:a}=Fwe(this._heartbeatsCache.heartbeats),s=h5(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return pA.warn(r),""}}}function H$(){return new Date().toISOString().substring(0,10)}function Fwe(e,t=Dwe){const r=[];let n=e.slice();for(const a of e){const s=r.find(o=>o.agent===a.agent);if(s){if(s.dates.push(a.date),Q$(r)>t){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),Q$(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Rwe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return T8()?vye().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Iwe(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return U$(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return U$(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function Q$(e){return h5(JSON.stringify({version:2,heartbeats:e})).length}function Lwe(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mwe(e){e0(new Bf("platform-logger",t=>new Yye(t),"PRIVATE")),e0(new Bf("heartbeat",t=>new Pwe(t),"PRIVATE")),Su(qP,R$,e),Su(qP,R$,"esm2020"),Su("fire-js","")}Mwe("");function oae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Uwe=oae,lae=new cy("auth","Firebase",oae());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5=new R4("@firebase/auth");function Hwe(e,...t){A5.logLevel<=Bn.WARN&&A5.warn(`Auth (${Gx}): ${e}`,...t)}function vS(e,...t){A5.logLevel<=Bn.ERROR&&A5.error(`Auth (${Gx}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(e,...t){throw D8(e,...t)}function Qh(e,...t){return D8(e,...t)}function cae(e,t,r){const n={...Uwe(),[t]:r};return new cy("auth","Firebase",n).create(t,{appName:e.name})}function op(e){return cae(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function D8(e,...t){if(typeof e!="string"){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return lae.create(e,...t)}function Gr(e,t,...r){if(!e)throw D8(t,...r)}function K0(e){const t="INTERNAL ASSERTION FAILED: "+e;throw vS(t),new Error(t)}function gA(e,t){e||K0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function Qwe(){return V$()==="http:"||V$()==="https:"}function V$(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vwe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Qwe()||mye()||"connection"in navigator)?navigator.onLine:!0}function $we(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(t,r){this.shortDelay=t,this.longDelay=r,gA(r>t,"Short delay should be less than long delay!"),this.isMobile=fye()||pye()}get(){return Vwe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O8(e,t){gA(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uae{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;K0("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;K0("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;K0("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zwe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gwe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qwe=new OC(3e4,6e4);function Mp(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function RA(e,t,r,n,a={}){return dae(e,a,async()=>{let s={},o={};n&&(t==="GET"?o=n:s={body:JSON.stringify(n)});const l=IC({key:e.config.apiKey,...o}).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const u={method:t,headers:c,...s};return Aye()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&FA(e.emulatorConfig.host)&&(u.credentials="include"),uae.fetch()(await fae(e,e.config.apiHost,r,l),u)})}async function dae(e,t,r){e._canInitEmulator=!1;const n={...zwe,...t};try{const a=new Wwe(e),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ij(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ij(e,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ij(e,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ij(e,"user-disabled",o);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw cae(e,d,u);If(e,d)}}catch(a){if(a instanceof Lf)throw a;If(e,"network-request-failed",{message:String(a)})}}async function L4(e,t,r,n,a={}){const s=await RA(e,t,r,n,a);return"mfaPendingCredential"in s&&If(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function fae(e,t,r,n){const a=`${t}${r}?${n}`,s=e,o=s.config.emulator?O8(e.config,a):`${e.config.apiScheme}://${a}`;return Gwe.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function Kwe(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Wwe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Qh(this.auth,"network-request-failed")),qwe.get())})}}function Ij(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=Qh(e,t,n);return a.customData._tokenResponse=r,a}function $$(e){return e!==void 0&&e.enterprise!==void 0}class Xwe{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return Kwe(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Ywe(e,t){return RA(e,"GET","/v2/recaptchaConfig",Mp(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jwe(e,t){return RA(e,"POST","/v1/accounts:delete",t)}async function m5(e,t){return RA(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Zwe(e,t=!1){const r=Wn(e),n=await r.getIdToken(t),a=P8(n);Gr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:H2(FI(a.auth_time)),issuedAtTime:H2(FI(a.iat)),expirationTime:H2(FI(a.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function FI(e){return Number(e)*1e3}function P8(e){const[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return vS("JWT malformed, contained fewer than 3 sections"),null;try{const a=Yne(r);return a?JSON.parse(a):(vS("Failed to decode base64 JWT payload"),null)}catch(a){return vS("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function z$(e){const t=P8(e);return Gr(t,"internal-error"),Gr(typeof t.exp<"u","internal-error"),Gr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jN(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof Lf&&e2e(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function e2e({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2e{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=H2(this.lastLoginAt),this.creationTime=H2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p5(e){var f;const t=e.auth,r=await e.getIdToken(),n=await jN(e,m5(t,{idToken:r}));Gr(n==null?void 0:n.users.length,t,"internal-error");const a=n.users[0];e._notifyReloadListener(a);const s=(f=a.providerUserInfo)!=null&&f.length?hae(a.providerUserInfo):[],o=n2e(e.providerData,s),l=e.isAnonymous,c=!(e.email&&a.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new YP(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(e,d)}async function r2e(e){const t=Wn(e);await p5(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function n2e(e,t){return[...e.filter(n=>!t.some(a=>a.providerId===n.providerId)),...t]}function hae(e){return e.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a2e(e,t){const r=await dae(e,{},async()=>{const n=IC({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:s}=e.config,o=await fae(e,a,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:n};return e.emulatorConfig&&FA(e.emulatorConfig.host)&&(c.credentials="include"),uae.fetch()(o,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function s2e(e,t){return RA(e,"POST","/v2/accounts:revokeToken",Mp(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Gr(t.idToken,"internal-error"),Gr(typeof t.idToken<"u","internal-error"),Gr(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):z$(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){Gr(t.length!==0,"internal-error");const r=z$(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Gr(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await a2e(t,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,o=new Wb;return n&&(Gr(typeof n=="string","internal-error",{appName:t}),o.refreshToken=n),a&&(Gr(typeof a=="string","internal-error",{appName:t}),o.accessToken=a),s&&(Gr(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Wb,this.toJSON())}_performRefresh(){return K0("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(e,t){Gr(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class vf{constructor({uid:t,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new t2e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new YP(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const r=await jN(this,this.stsTokenManager.getToken(this.auth,t));return Gr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return Zwe(this,t)}reload(){return r2e(this)}_assign(t){this!==t&&(Gr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new vf({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){Gr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await p5(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bu(this.auth.app))return Promise.reject(op(this.auth));const t=await this.getIdToken();return await jN(this,Jwe(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,o=r.photoURL??void 0,l=r.tenantId??void 0,c=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:f,emailVerified:A,isAnonymous:m,providerData:g,stsTokenManager:x}=r;Gr(f&&x,t,"internal-error");const v=Wb.fromJSON(this.name,x);Gr(typeof f=="string",t,"internal-error"),Em(n,t.name),Em(a,t.name),Gr(typeof A=="boolean",t,"internal-error"),Gr(typeof m=="boolean",t,"internal-error"),Em(s,t.name),Em(o,t.name),Em(l,t.name),Em(c,t.name),Em(u,t.name),Em(d,t.name);const y=new vf({uid:f,auth:t,email:a,emailVerified:A,displayName:n,isAnonymous:m,photoURL:o,phoneNumber:s,tenantId:l,stsTokenManager:v,createdAt:u,lastLoginAt:d});return g&&Array.isArray(g)&&(y.providerData=g.map(N=>({...N}))),c&&(y._redirectEventId=c),y}static async _fromIdTokenResponse(t,r,n=!1){const a=new Wb;a.updateFromServerResponse(r);const s=new vf({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:n});return await p5(s),s}static async _fromGetAccountInfoResponse(t,r,n){const a=r.users[0];Gr(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?hae(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),l=new Wb;l.updateFromIdToken(n);const c=new vf({uid:a.localId,auth:t,stsTokenManager:l,isAnonymous:o}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new YP(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G$=new Map;function W0(e){gA(e instanceof Function,"Expected a class definition");let t=G$.get(e);return t?(gA(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,G$.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aae{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}Aae.type="NONE";const q$=Aae;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(e,t,r){return`firebase:${e}:${t}:${r}`}class Xb{constructor(t,r,n){this.persistence=t,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=bS(this.userKey,a.apiKey,s),this.fullPersistenceKey=bS("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await m5(this.auth,{idToken:t}).catch(()=>{});return r?vf._fromGetAccountInfoResponse(this.auth,r,t):null}return vf._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new Xb(W0(q$),t,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||W0(q$);const o=bS(n,t.config.apiKey,t.name);let l=null;for(const u of r)try{const d=await u._get(o);if(d){let f;if(typeof d=="string"){const A=await m5(t,{idToken:d}).catch(()=>{});if(!A)break;f=await vf._fromGetAccountInfoResponse(t,A,d)}else f=vf._fromJSON(t,d);u!==s&&(l=f),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Xb(s,t,n):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Xb(s,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K$(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(xae(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(mae(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(bae(t))return"Blackberry";if(yae(t))return"Webos";if(pae(t))return"Safari";if((t.includes("chrome/")||gae(t))&&!t.includes("edge/"))return"Chrome";if(vae(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function mae(e=Pl()){return/firefox\//i.test(e)}function pae(e=Pl()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function gae(e=Pl()){return/crios\//i.test(e)}function xae(e=Pl()){return/iemobile/i.test(e)}function vae(e=Pl()){return/android/i.test(e)}function bae(e=Pl()){return/blackberry/i.test(e)}function yae(e=Pl()){return/webos/i.test(e)}function F8(e=Pl()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function i2e(e=Pl()){var t;return F8(e)&&!!((t=window.navigator)!=null&&t.standalone)}function o2e(){return gye()&&document.documentMode===10}function wae(e=Pl()){return F8(e)||vae(e)||yae(e)||bae(e)||/windows phone/i.test(e)||xae(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nae(e,t=[]){let r;switch(e){case"Browser":r=K$(Pl());break;case"Worker":r=`${K$(Pl())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${Gx}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2e{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const n=s=>new Promise((o,l)=>{try{const c=t(s);o(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c2e(e,t={}){return RA(e,"GET","/v2/passwordPolicy",Mp(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2e=6;class d2e{constructor(t){var n;const r=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??u2e,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=t.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,r),this.validatePasswordCharacterOptions(t,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(t,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=t.length>=n),a&&(r.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<t.length;a++)n=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2e{constructor(t,r,n,a){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new W$(this),this.idTokenSubscription=new W$(this),this.beforeStateQueue=new l2e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lae,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=W0(r)),this._initializationPromise=this.queue(async()=>{var n,a,s;if(!this._deleted&&(this.persistenceManager=await Xb.create(this,t),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await m5(this,{idToken:t}),n=await vf._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(bu(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(t);(!o||o===l)&&(c!=null&&c.user)&&(n=c.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Gr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await p5(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=$we()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(bu(this.app))return Promise.reject(op(this));const r=t?Wn(t):null;return r&&Gr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&Gr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return bu(this.app)?Promise.reject(op(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return bu(this.app)?Promise.reject(op(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(W0(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await c2e(this),r=new d2e(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new cy("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await s2e(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,r){const n=await this.getOrInitRedirectPersistenceManager(r);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&W0(t)||this._popupRedirectResolver;Gr(r,this,"argument-error"),this.redirectPersistenceManager=await Xb.create(this,[W0(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===t?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Gr(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof r=="function"){const c=t.addObserver(r,n,a);return()=>{o=!0,c()}}else{const c=t.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Gr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Nae(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var r;if(bu(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return t!=null&&t.error&&Hwe(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function qx(e){return Wn(e)}class W${constructor(t){this.auth=t,this.observer=null,this.addObserver=Cye(r=>this.observer=r)}get next(){return Gr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M4={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function h2e(e){M4=e}function Cae(e){return M4.loadJS(e)}function A2e(){return M4.recaptchaEnterpriseScript}function m2e(){return M4.gapiScript}function p2e(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class g2e{constructor(){this.enterprise=new x2e}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class x2e{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const v2e="recaptcha-enterprise",Eae="NO_RECAPTCHA";class b2e{constructor(t){this.type=v2e,this.auth=qx(t)}async verify(t="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{Ywe(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new Xwe(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function a(s,o,l){const c=window.grecaptcha;$$(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:t}).then(u=>{o(u)}).catch(()=>{o(Eae)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new g2e().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{n(this.auth).then(l=>{if(!r&&$$(window.grecaptcha))a(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=A2e();c.length!==0&&(c+=l),Cae(c).then(()=>{a(l,s,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function X$(e,t,r,n=!1,a=!1){const s=new b2e(e);let o;if(a)o=Eae;else try{o=await s.verify(r)}catch{o=await s.verify(r,!0)}const l={...t};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function JP(e,t,r,n,a){var s;if((s=e._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await X$(e,t,r,r==="getOobCode");return n(e,o)}else return n(e,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await X$(e,t,r,r==="getOobCode");return n(e,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2e(e,t){const r=zx(e,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(Ex(s,t??{}))return a;If(a,"already-initialized")}return r.initialize({options:t})}function w2e(e,t){const r=(t==null?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(W0);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function N2e(e,t,r){const n=qx(e);Gr(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const a=!1,s=jae(t),{host:o,port:l}=C2e(t),c=l===null?"":`:${l}`,u={url:`${s}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){Gr(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Gr(Ex(u,n.config.emulator)&&Ex(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,FA(o)?(P4(`${s}//${o}${c}`),F4("Auth",!0)):E2e()}function jae(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function C2e(e){const t=jae(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:Y$(n.substr(s.length+1))}}else{const[s,o]=n.split(":");return{host:s,port:Y$(o)}}}function Y$(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function E2e(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return K0("not implemented")}_getIdTokenResponse(t){return K0("not implemented")}_linkToIdToken(t,r){return K0("not implemented")}_getReauthenticationResolver(t){return K0("not implemented")}}async function j2e(e,t){return RA(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k2e(e,t){return L4(e,"POST","/v1/accounts:signInWithPassword",Mp(e,t))}async function S2e(e,t){return RA(e,"POST","/v1/accounts:sendOobCode",Mp(e,t))}async function _2e(e,t){return S2e(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T2e(e,t){return L4(e,"POST","/v1/accounts:signInWithEmailLink",Mp(e,t))}async function B2e(e,t){return L4(e,"POST","/v1/accounts:signInWithEmailLink",Mp(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN extends R8{constructor(t,r,n,a=null){super("password",n),this._email=t,this._password=r,this._tenantId=a}static _fromEmailAndPassword(t,r){return new kN(t,r,"password")}static _fromEmailAndCode(t,r,n=null){return new kN(t,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return JP(t,r,"signInWithPassword",k2e);case"emailLink":return T2e(t,{email:this._email,oobCode:this._password});default:If(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return JP(t,n,"signUpPassword",j2e);case"emailLink":return B2e(t,{idToken:r,email:this._email,oobCode:this._password});default:If(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yb(e,t){return L4(e,"POST","/v1/accounts:signInWithIdp",Mp(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2e="http://localhost";class jx extends R8{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new jx(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):If("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const o=new jx(n,a);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const r=this.buildRequest();return Yb(t,r)}_linkToIdToken(t,r){const n=this.buildRequest();return n.idToken=r,Yb(t,n)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,Yb(t,r)}buildRequest(){const t={requestUri:I2e,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=IC(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2e(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function O2e(e){const t=h2(A2(e)).link,r=t?h2(A2(t)).deep_link_id:null,n=h2(A2(e)).deep_link_id;return(n?h2(A2(n)).link:null)||n||r||t||e}class L8{constructor(t){const r=h2(A2(t)),n=r.apiKey??null,a=r.oobCode??null,s=D2e(r.mode??null);Gr(n&&a&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(t){const r=O2e(t);try{return new L8(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(){this.providerId=uy.PROVIDER_ID}static credential(t,r){return kN._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const n=L8.parseLink(r);return Gr(n,"argument-error"),kN._fromEmailAndCode(t,n.code,n.tenantId)}}uy.PROVIDER_ID="password";uy.EMAIL_PASSWORD_SIGN_IN_METHOD="password";uy.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kae{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC extends kae{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m extends PC{constructor(){super("facebook.com")}static credential(t){return jx._fromParams({providerId:$m.PROVIDER_ID,signInMethod:$m.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return $m.credentialFromTaggedObject(t)}static credentialFromError(t){return $m.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return $m.credential(t.oauthAccessToken)}catch{return null}}}$m.FACEBOOK_SIGN_IN_METHOD="facebook.com";$m.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm extends PC{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return jx._fromParams({providerId:zm.PROVIDER_ID,signInMethod:zm.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return zm.credentialFromTaggedObject(t)}static credentialFromError(t){return zm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return zm.credential(r,n)}catch{return null}}}zm.GOOGLE_SIGN_IN_METHOD="google.com";zm.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm extends PC{constructor(){super("github.com")}static credential(t){return jx._fromParams({providerId:Gm.PROVIDER_ID,signInMethod:Gm.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Gm.credentialFromTaggedObject(t)}static credentialFromError(t){return Gm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Gm.credential(t.oauthAccessToken)}catch{return null}}}Gm.GITHUB_SIGN_IN_METHOD="github.com";Gm.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm extends PC{constructor(){super("twitter.com")}static credential(t,r){return jx._fromParams({providerId:qm.PROVIDER_ID,signInMethod:qm.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return qm.credentialFromTaggedObject(t)}static credentialFromError(t){return qm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return qm.credential(r,n)}catch{return null}}}qm.TWITTER_SIGN_IN_METHOD="twitter.com";qm.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,a=!1){const s=await vf._fromIdTokenResponse(t,n,a),o=J$(n);return new w1({user:s,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);const a=J$(n);return new w1({user:t,providerId:a,_tokenResponse:n,operationType:r})}}function J$(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5 extends Lf{constructor(t,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,g5.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,r,n,a){return new g5(t,r,n,a)}}function Sae(e,t,r,n){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?g5._fromErrorAndOperation(e,s,t,n):s})}async function P2e(e,t,r=!1){const n=await jN(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return w1._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F2e(e,t,r=!1){const{auth:n}=e;if(bu(n.app))return Promise.reject(op(n));const a="reauthenticate";try{const s=await jN(e,Sae(n,a,t,e),r);Gr(s.idToken,n,"internal-error");const o=P8(s.idToken);Gr(o,n,"internal-error");const{sub:l}=o;return Gr(e.uid===l,n,"user-mismatch"),w1._forOperation(e,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&If(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _ae(e,t,r=!1){if(bu(e.app))return Promise.reject(op(e));const n="signIn",a=await Sae(e,n,t),s=await w1._fromIdTokenResponse(e,n,a);return r||await e._updateCurrentUser(s.user),s}async function R2e(e,t){return _ae(qx(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L2e(e){const t=qx(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function M2e(e,t,r){const n=qx(e);await JP(n,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",_2e)}function U2e(e,t,r){return bu(e.app)?Promise.reject(op(e)):R2e(Wn(e),uy.credential(t,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&L2e(e),n})}function H2e(e,t,r,n){return Wn(e).onIdTokenChanged(t,r,n)}function Q2e(e,t,r){return Wn(e).beforeAuthStateChanged(t,r)}function Tae(e,t,r,n){return Wn(e).onAuthStateChanged(t,r,n)}function V2e(e){return Wn(e).signOut()}const x5="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bae{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(x5,"1"),this.storage.removeItem(x5),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2e=1e3,z2e=10;class Iae extends Bae{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wae(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&t(r,a,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=t.key;r?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},s=this.storage.getItem(n);o2e()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,z2e):a()}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},$2e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}Iae.type="LOCAL";const G2e=Iae;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dae extends Bae{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}Dae.type="SESSION";const Oae=Dae;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2e(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(a=>a.isListeningto(t));if(r)return r;const n=new U4(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:n,eventType:a,data:s}=r.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const l=Array.from(o).map(async u=>u(r.origin,s)),c=await q2e(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}U4.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M8(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2e{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const u=M8("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(f){const A=f;if(A.data.eventId===u)switch(A.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(A.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:u,data:r},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(){return window}function W2e(e){Vh().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pae(){return typeof Vh().WorkerGlobalScope<"u"&&typeof Vh().importScripts=="function"}async function X2e(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Y2e(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function J2e(){return Pae()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fae="firebaseLocalStorageDb",Z2e=1,v5="firebaseLocalStorage",Rae="fbase_key";class FC{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function H4(e,t){return e.transaction([v5],t?"readwrite":"readonly").objectStore(v5)}function eNe(){const e=indexedDB.deleteDatabase(Fae);return new FC(e).toPromise()}function ZP(){const e=indexedDB.open(Fae,Z2e);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(v5,{keyPath:Rae})}catch(a){r(a)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(v5)?t(n):(n.close(),await eNe(),t(await ZP()))})})}async function Z$(e,t,r){const n=H4(e,!0).put({[Rae]:t,value:r});return new FC(n).toPromise()}async function tNe(e,t){const r=H4(e,!1).get(t),n=await new FC(r).toPromise();return n===void 0?null:n.value}function ez(e,t){const r=H4(e,!0).delete(t);return new FC(r).toPromise()}const rNe=800,nNe=3;class Lae{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ZP(),this.db)}async _withRetries(t){let r=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(r++>nNe)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Pae()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=U4._getInstance(J2e()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await X2e(),!this.activeServiceWorker)return;this.sender=new K2e(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(r=t[0])!=null&&r.fulfilled&&(n=t[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Y2e()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await ZP();return await Z$(t,x5,"1"),await ez(t,x5),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>Z$(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(n=>tNe(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>ez(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const s=H4(a,!1).getAll();return new FC(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(t.length!==0)for(const{fbase_key:a,value:s}of t)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rNe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Lae.type="LOCAL";const aNe=Lae;new OC(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sNe(e,t){return t?W0(t):(Gr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8 extends R8{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Yb(t,this._buildIdpRequest())}_linkToIdToken(t,r){return Yb(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return Yb(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function iNe(e){return _ae(e.auth,new U8(e),e.bypassAuthState)}function oNe(e){const{auth:t,user:r}=e;return Gr(r,t,"internal-error"),F2e(r,new U8(e),e.bypassAuthState)}async function lNe(e){const{auth:t,user:r}=e;return Gr(r,t,"internal-error"),P2e(r,new U8(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mae{constructor(t,r,n,a,s=!1){this.auth=t,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:o,type:l}=t;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return iNe;case"linkViaPopup":case"linkViaRedirect":return lNe;case"reauthViaPopup":case"reauthViaRedirect":return oNe;default:If(this.auth,"internal-error")}}resolve(t){gA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){gA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cNe=new OC(2e3,1e4);class Sb extends Mae{constructor(t,r,n,a,s){super(t,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,Sb.currentPopupAction&&Sb.currentPopupAction.cancel(),Sb.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Gr(t,this.auth,"internal-error"),t}async onExecution(){gA(this.filter.length===1,"Popup operations only handle one event");const t=M8();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Qh(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Qh(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sb.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qh(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,cNe.get())};t()}}Sb.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uNe="pendingRedirect",yS=new Map;class dNe extends Mae{constructor(t,r,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let t=yS.get(this.auth._key());if(!t){try{const n=await fNe(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(r){t=()=>Promise.reject(r)}yS.set(this.auth._key(),t)}return this.bypassAuthState||yS.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fNe(e,t){const r=mNe(t),n=ANe(e);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function hNe(e,t){yS.set(e._key(),t)}function ANe(e){return W0(e._redirectPersistence)}function mNe(e){return bS(uNe,e.config.apiKey,e.name)}async function pNe(e,t,r=!1){if(bu(e.app))return Promise.reject(op(e));const n=qx(e),a=sNe(n,t),o=await new dNe(n,a,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gNe=600*1e3;class xNe{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(r=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!vNe(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var n;if(t.error&&!Uae(t)){const a=((n=t.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(Qh(this.auth,a))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const n=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=gNe&&this.cachedEventUids.clear(),this.cachedEventUids.has(tz(t))}saveEventToCache(t){this.cachedEventUids.add(tz(t)),this.lastProcessedEventTime=Date.now()}}function tz(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function Uae({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function vNe(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Uae(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bNe(e,t={}){return RA(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yNe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wNe=/^https?/;async function NNe(e){if(e.config.emulator)return;const{authorizedDomains:t}=await bNe(e);for(const r of t)try{if(CNe(r))return}catch{}If(e,"unauthorized-domain")}function CNe(e){const t=XP(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&n===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!wNe.test(r))return!1;if(yNe.test(e))return n===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ENe=new OC(3e4,6e4);function rz(){const e=Vh().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function jNe(e){return new Promise((t,r)=>{var a,s,o;function n(){rz(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{rz(),r(Qh(e,"network-request-failed"))},timeout:ENe.get()})}if((s=(a=Vh().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((o=Vh().gapi)!=null&&o.load)n();else{const l=p2e("iframefcb");return Vh()[l]=()=>{gapi.load?n():r(Qh(e,"network-request-failed"))},Cae(`${m2e()}?onload=${l}`).catch(c=>r(c))}}).catch(t=>{throw wS=null,t})}let wS=null;function kNe(e){return wS=wS||jNe(e),wS}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SNe=new OC(5e3,15e3),_Ne="__/auth/iframe",TNe="emulator/auth/iframe",BNe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},INe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DNe(e){const t=e.config;Gr(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?O8(t,TNe):`https://${e.config.authDomain}/${_Ne}`,n={apiKey:t.apiKey,appName:e.name,v:Gx},a=INe.get(e.config.apiHost);a&&(n.eid=a);const s=e._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${IC(n).slice(1)}`}async function ONe(e){const t=await kNe(e),r=Vh().gapi;return Gr(r,e,"internal-error"),t.open({where:document.body,url:DNe(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BNe,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const o=Qh(e,"network-request-failed"),l=Vh().setTimeout(()=>{s(o)},SNe.get());function c(){Vh().clearTimeout(l),a(n)}n.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PNe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FNe=500,RNe=600,LNe="_blank",MNe="http://localhost";class nz{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UNe(e,t,r,n=FNe,a=RNe){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c={...PNe,width:n.toString(),height:a.toString(),top:s,left:o},u=Pl().toLowerCase();r&&(l=gae(u)?LNe:r),mae(u)&&(t=t||MNe,c.scrollbars="yes");const d=Object.entries(c).reduce((A,[m,g])=>`${A}${m}=${g},`,"");if(i2e(u)&&l!=="_self")return HNe(t||"",l),new nz(null);const f=window.open(t||"",l,d);Gr(f,e,"popup-blocked");try{f.focus()}catch{}return new nz(f)}function HNe(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QNe="__/auth/handler",VNe="emulator/auth/handler",$Ne=encodeURIComponent("fac");async function az(e,t,r,n,a,s){Gr(e.config.authDomain,e,"auth-domain-config-required"),Gr(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:Gx,eventId:a};if(t instanceof kae){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Nye(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(t instanceof PC){const d=t.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await e._getAppCheckToken(),u=c?`#${$Ne}=${encodeURIComponent(c)}`:"";return`${zNe(e)}?${IC(l).slice(1)}${u}`}function zNe({config:e}){return e.emulator?O8(e,VNe):`https://${e.authDomain}/${QNe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI="webStorageSupport";class GNe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Oae,this._completeRedirectFn=pNe,this._overrideRedirectResult=hNe}async _openPopup(t,r,n,a){var o;gA((o=this.eventManagers[t._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await az(t,r,n,XP(),a);return UNe(t,s,M8())}async _openRedirect(t,r,n,a){await this._originValidation(t);const s=await az(t,r,n,XP(),a);return W2e(s),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(gA(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(t);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(t){const r=await ONe(t),n=new xNe(t);return r.register("authEvent",a=>(Gr(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=r,n}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(RI,{type:RI},a=>{var o;const s=(o=a==null?void 0:a[0])==null?void 0:o[RI];s!==void 0&&r(!!s),If(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=NNe(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return wae()||pae()||F8()}}const qNe=GNe;var sz="@firebase/auth",iz="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KNe{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Gr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WNe(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XNe(e){e0(new Bf("auth",(t,{options:r})=>{const n=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;Gr(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Nae(e)},u=new f2e(n,a,s,c);return w2e(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),e0(new Bf("auth-internal",t=>{const r=qx(t.getProvider("auth").getImmediate());return(n=>new KNe(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Su(sz,iz,WNe(e)),Su(sz,iz,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YNe=300,JNe=tae("authIdTokenMaxAge")||YNe;let oz=null;const ZNe=e=>async t=>{const r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>JNe)return;const a=r==null?void 0:r.token;oz!==a&&(oz=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function Hae(e=DC()){const t=zx(e,"auth");if(t.isInitialized())return t.getImmediate();const r=y2e(e,{popupRedirectResolver:qNe,persistence:[aNe,G2e,Oae]}),n=tae("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const o=ZNe(s.toString());Q2e(r,o,()=>o(r.currentUser)),H2e(r,l=>o(l))}}const a=Zne("auth");return a&&N2e(r,`http://${a}`),r}function eCe(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}h2e({loadJS(e){return new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=a=>{const s=Qh("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",eCe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XNe("Browser");var tCe="firebase",rCe="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Su(tCe,rCe,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF=new Map,Qae={activated:!1,tokenObservers:[]},nCe={initialized:!1,enabled:!1};function $i(e){return eF.get(e)||{...Qae}}function aCe(e,t){return eF.set(e,t),eF.get(e)}function Q4(){return nCe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vae="https://content-firebaseappcheck.googleapis.com/v1",sCe="exchangeRecaptchaV3Token",iCe="exchangeDebugToken",lz={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},oCe=1440*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lCe{constructor(t,r,n,a,s){if(this.operation=t,this.retryPolicy=r,this.getWaitDuration=n,this.lowerBound=a,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=a,a>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new NN,this.pending.promise.catch(r=>{}),await cCe(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new NN,this.pending.promise.catch(r=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(r){this.retryPolicy(r)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const r=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),r}}}function cCe(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uCe={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Oc=new cy("appCheck","AppCheck",uCe);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cz(e=!1){var t;return e?(t=self.grecaptcha)==null?void 0:t.enterprise:self.grecaptcha}function H8(e){if(!$i(e).activated)throw Oc.create("use-before-activation",{appName:e.name})}function $ae(e){const t=Math.round(e/1e3),r=Math.floor(t/(3600*24)),n=Math.floor((t-r*3600*24)/3600),a=Math.floor((t-r*3600*24-n*3600)/60),s=t-r*3600*24-n*3600-a*60;let o="";return r&&(o+=Dj(r)+"d:"),n&&(o+=Dj(n)+"h:"),o+=Dj(a)+"m:"+Dj(s)+"s",o}function Dj(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q8({url:e,body:t},r){const n={"Content-Type":"application/json"},a=r.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&(n["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:n};let o;try{o=await fetch(e,s)}catch(f){throw Oc.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Oc.create("fetch-status-error",{httpStatus:o.status});let l;try{l=await o.json()}catch(f){throw Oc.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const c=l.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw Oc.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});const u=Number(c[1])*1e3,d=Date.now();return{token:l.token,expireTimeMillis:d+u,issuedAtTimeMillis:d}}function dCe(e,t){const{projectId:r,appId:n,apiKey:a}=e.options;return{url:`${Vae}/projects/${r}/apps/${n}:${sCe}?key=${a}`,body:{recaptcha_v3_token:t}}}function zae(e,t){const{projectId:r,appId:n,apiKey:a}=e.options;return{url:`${Vae}/projects/${r}/apps/${n}:${iCe}?key=${a}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fCe="firebase-app-check-database",hCe=1,SN="firebase-app-check-store",Gae="debug-token";let Oj=null;function qae(){return Oj||(Oj=new Promise((e,t)=>{try{const r=indexedDB.open(fCe,hCe);r.onsuccess=n=>{e(n.target.result)},r.onerror=n=>{var a;t(Oc.create("storage-open",{originalErrorMessage:(a=n.target.error)==null?void 0:a.message}))},r.onupgradeneeded=n=>{const a=n.target.result;switch(n.oldVersion){case 0:a.createObjectStore(SN,{keyPath:"compositeKey"})}}}catch(r){t(Oc.create("storage-open",{originalErrorMessage:r==null?void 0:r.message}))}}),Oj)}function ACe(e){return Wae(Xae(e))}function mCe(e,t){return Kae(Xae(e),t)}function pCe(e){return Kae(Gae,e)}function gCe(){return Wae(Gae)}async function Kae(e,t){const n=(await qae()).transaction(SN,"readwrite"),s=n.objectStore(SN).put({compositeKey:e,value:t});return new Promise((o,l)=>{s.onsuccess=c=>{o()},n.onerror=c=>{var u;l(Oc.create("storage-set",{originalErrorMessage:(u=c.target.error)==null?void 0:u.message}))}})}async function Wae(e){const r=(await qae()).transaction(SN,"readonly"),a=r.objectStore(SN).get(e);return new Promise((s,o)=>{a.onsuccess=l=>{const c=l.target.result;s(c?c.value:void 0)},r.onerror=l=>{var c;o(Oc.create("storage-get",{originalErrorMessage:(c=l.target.error)==null?void 0:c.message}))}})}function Xae(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym=new R4("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xCe(e){if(T8()){let t;try{t=await ACe(e)}catch(r){Ym.warn(`Failed to read token from IndexedDB. Error: ${r}`)}return t}}function LI(e,t){return T8()?mCe(e,t).catch(r=>{Ym.warn(`Failed to write token to IndexedDB. Error: ${r}`)}):Promise.resolve()}async function vCe(){let e;try{e=await gCe()}catch{}if(e)return e;{const t=crypto.randomUUID();return pCe(t).catch(r=>Ym.warn(`Failed to persist debug token to IndexedDB. Error: ${r}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V8(){return Q4().enabled}async function $8(){const e=Q4();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function bCe(){const e=Jne(),t=Q4();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const r=new NN;t.token=r,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?r.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):r.resolve(vCe())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yCe={error:"UNKNOWN_ERROR"};function wCe(e){return S8.encodeString(JSON.stringify(e),!1)}async function tF(e,t=!1,r=!1){const n=e.app;H8(n);const a=$i(n);let s=a.token,o;if(s&&!_b(s)&&(a.token=void 0,s=void 0),!s){const u=await a.cachedTokenPromise;u&&(_b(u)?s=u:await LI(n,void 0))}if(!t&&s&&_b(s))return{token:s.token};let l=!1;if(V8())try{a.exchangeTokenPromise||(a.exchangeTokenPromise=Q8(zae(n,await $8()),e.heartbeatServiceProvider).finally(()=>{a.exchangeTokenPromise=void 0}),l=!0);const u=await a.exchangeTokenPromise;return await LI(n,u),a.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Ym.warn(u.message):r&&Ym.error(u),MI(u)}try{a.exchangeTokenPromise||(a.exchangeTokenPromise=a.provider.getToken().finally(()=>{a.exchangeTokenPromise=void 0}),l=!0),s=await $i(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Ym.warn(u.message):r&&Ym.error(u),o=u}let c;return s?o?_b(s)?c={token:s.token,internalError:o}:c=MI(o):(c={token:s.token},a.token=s,await LI(n,s)):c=MI(o),l&&Zae(n,c),c}async function NCe(e){const t=e.app;H8(t);const{provider:r}=$i(t);if(V8()){const n=await $8(),{token:a}=await Q8(zae(t,n),e.heartbeatServiceProvider);return{token:a}}else{const{token:n}=await r.getToken();return{token:n}}}function Yae(e,t,r,n){const{app:a}=e,s=$i(a),o={next:r,error:n,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&_b(s.token)){const l=s.token;Promise.resolve().then(()=>{r({token:l.token}),uz(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>uz(e))}function Jae(e,t){const r=$i(e),n=r.tokenObservers.filter(a=>a.next!==t);n.length===0&&r.tokenRefresher&&r.tokenRefresher.isRunning()&&r.tokenRefresher.stop(),r.tokenObservers=n}function uz(e){const{app:t}=e,r=$i(t);let n=r.tokenRefresher;n||(n=CCe(e),r.tokenRefresher=n),!n.isRunning()&&r.isTokenAutoRefreshEnabled&&n.start()}function CCe(e){const{app:t}=e;return new lCe(async()=>{const r=$i(t);let n;if(r.token?n=await tF(e,!0):n=await tF(e),n.error)throw n.error;if(n.internalError)throw n.internalError},()=>!0,()=>{const r=$i(t);if(r.token){let n=r.token.issuedAtTimeMillis+(r.token.expireTimeMillis-r.token.issuedAtTimeMillis)*.5+3e5;const a=r.token.expireTimeMillis-300*1e3;return n=Math.min(n,a),Math.max(0,n-Date.now())}else return 0},lz.RETRIAL_MIN_WAIT,lz.RETRIAL_MAX_WAIT)}function Zae(e,t){const r=$i(e).tokenObservers;for(const n of r)try{n.type==="EXTERNAL"&&t.error!=null?n.error(t.error):n.next(t)}catch{}}function _b(e){return e.expireTimeMillis-Date.now()>0}function MI(e){return{token:wCe(yCe),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ECe{constructor(t,r){this.app=t,this.heartbeatServiceProvider=r}_delete(){const{tokenObservers:t}=$i(this.app);for(const r of t)Jae(this.app,r.next);return Promise.resolve()}}function jCe(e,t){return new ECe(e,t)}function kCe(e){return{getToken:t=>tF(e,t),getLimitedUseToken:()=>NCe(e),addTokenListener:t=>Yae(e,"INTERNAL",t),removeTokenListener:t=>Jae(e.app,t)}}const SCe="@firebase/app-check",_Ce="0.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TCe="https://www.google.com/recaptcha/api.js";function BCe(e,t){const r=new NN,n=$i(e);n.reCAPTCHAState={initialized:r};const a=ICe(e),s=cz(!1);return s?dz(e,t,s,a,r):PCe(()=>{const o=cz(!1);if(!o)throw new Error("no recaptcha");dz(e,t,o,a,r)}),r.promise}function dz(e,t,r,n,a){r.ready(()=>{OCe(e,t,r,n),a.resolve(r)})}function ICe(e){const t=`fire_app_check_${e.name}`,r=document.createElement("div");return r.id=t,r.style.display="none",document.body.appendChild(r),t}async function DCe(e){H8(e);const r=await $i(e).reCAPTCHAState.initialized.promise;return new Promise((n,a)=>{const s=$i(e).reCAPTCHAState;r.ready(()=>{n(r.execute(s.widgetId,{action:"fire_app_check"}))})})}function OCe(e,t,r,n){const a=r.render(n,{sitekey:t,size:"invisible",callback:()=>{$i(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{$i(e).reCAPTCHAState.succeeded=!1}}),s=$i(e);s.reCAPTCHAState={...s.reCAPTCHAState,widgetId:a}}function PCe(e){const t=document.createElement("script");t.src=TCe,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var n,a,s;RCe(this._throttleData);const t=await DCe(this._app).catch(o=>{throw Oc.create("recaptcha-error")});if(!((n=$i(this._app).reCAPTCHAState)!=null&&n.succeeded))throw Oc.create("recaptcha-error");let r;try{r=await Q8(dCe(this._app,t),this._heartbeatServiceProvider)}catch(o){throw(a=o.code)!=null&&a.includes("fetch-status-error")?(this._throttleData=FCe(Number((s=o.customData)==null?void 0:s.httpStatus),this._throttleData),Oc.create("initial-throttle",{time:$ae(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,r}initialize(t){this._app=t,this._heartbeatServiceProvider=zx(t,"heartbeat"),BCe(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof z8?this._siteKey===t._siteKey:!1}}function FCe(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+oCe,httpStatus:e};{const r=t?t.backoffCount:0,n=Bye(r,1e3,2);return{backoffCount:r+1,allowRequestsAfter:Date.now()+n,httpStatus:e}}}function RCe(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Oc.create("throttled",{time:$ae(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LCe(e=DC(),t){e=Wn(e);const r=zx(e,"app-check");if(Q4().initialized||bCe(),V8()&&$8().then(a=>console.log(`App Check debug token: ${a}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return a;throw Oc.create("already-initialized",{appName:e.name})}const n=r.initialize({options:t});return MCe(e,t.provider,t.isTokenAutoRefreshEnabled),$i(e).isTokenAutoRefreshEnabled&&Yae(n,"INTERNAL",()=>{}),n}function MCe(e,t,r=!1){const n=aCe(e,{...Qae});n.activated=!0,n.provider=t,n.cachedTokenPromise=xCe(e).then(a=>(a&&_b(a)&&(n.token=a,Zae(e,{token:a.token})),a)),n.isTokenAutoRefreshEnabled=r&&e.automaticDataCollectionEnabled,!e.automaticDataCollectionEnabled&&r&&Ym.warn("`isTokenAutoRefreshEnabled` is true but `automaticDataCollectionEnabled` was set to false during `initializeApp()`. This blocks automatic token refresh."),n.provider.initialize(e)}const UCe="app-check",fz="app-check-internal";function HCe(){e0(new Bf(UCe,e=>{const t=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat");return jCe(t,r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider(fz).initialize()})),e0(new Bf(fz,e=>{const t=e.getProvider("app-check").getImmediate();return kCe(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Su(SCe,_Ce)}HCe();var hz=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lp,ese;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,k){function B(){}B.prototype=k.prototype,T.D=k.prototype,T.prototype=new B,T.prototype.constructor=T,T.C=function(M,P,S){for(var L=Array(arguments.length-2),H=2;H<arguments.length;H++)L[H-2]=arguments[H];return k.prototype[P].apply(M,L)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(T,k,B){B||(B=0);var M=Array(16);if(typeof k=="string")for(var P=0;16>P;++P)M[P]=k.charCodeAt(B++)|k.charCodeAt(B++)<<8|k.charCodeAt(B++)<<16|k.charCodeAt(B++)<<24;else for(P=0;16>P;++P)M[P]=k[B++]|k[B++]<<8|k[B++]<<16|k[B++]<<24;k=T.g[0],B=T.g[1],P=T.g[2];var S=T.g[3],L=k+(S^B&(P^S))+M[0]+3614090360&4294967295;k=B+(L<<7&4294967295|L>>>25),L=S+(P^k&(B^P))+M[1]+3905402710&4294967295,S=k+(L<<12&4294967295|L>>>20),L=P+(B^S&(k^B))+M[2]+606105819&4294967295,P=S+(L<<17&4294967295|L>>>15),L=B+(k^P&(S^k))+M[3]+3250441966&4294967295,B=P+(L<<22&4294967295|L>>>10),L=k+(S^B&(P^S))+M[4]+4118548399&4294967295,k=B+(L<<7&4294967295|L>>>25),L=S+(P^k&(B^P))+M[5]+1200080426&4294967295,S=k+(L<<12&4294967295|L>>>20),L=P+(B^S&(k^B))+M[6]+2821735955&4294967295,P=S+(L<<17&4294967295|L>>>15),L=B+(k^P&(S^k))+M[7]+4249261313&4294967295,B=P+(L<<22&4294967295|L>>>10),L=k+(S^B&(P^S))+M[8]+1770035416&4294967295,k=B+(L<<7&4294967295|L>>>25),L=S+(P^k&(B^P))+M[9]+2336552879&4294967295,S=k+(L<<12&4294967295|L>>>20),L=P+(B^S&(k^B))+M[10]+4294925233&4294967295,P=S+(L<<17&4294967295|L>>>15),L=B+(k^P&(S^k))+M[11]+2304563134&4294967295,B=P+(L<<22&4294967295|L>>>10),L=k+(S^B&(P^S))+M[12]+1804603682&4294967295,k=B+(L<<7&4294967295|L>>>25),L=S+(P^k&(B^P))+M[13]+4254626195&4294967295,S=k+(L<<12&4294967295|L>>>20),L=P+(B^S&(k^B))+M[14]+2792965006&4294967295,P=S+(L<<17&4294967295|L>>>15),L=B+(k^P&(S^k))+M[15]+1236535329&4294967295,B=P+(L<<22&4294967295|L>>>10),L=k+(P^S&(B^P))+M[1]+4129170786&4294967295,k=B+(L<<5&4294967295|L>>>27),L=S+(B^P&(k^B))+M[6]+3225465664&4294967295,S=k+(L<<9&4294967295|L>>>23),L=P+(k^B&(S^k))+M[11]+643717713&4294967295,P=S+(L<<14&4294967295|L>>>18),L=B+(S^k&(P^S))+M[0]+3921069994&4294967295,B=P+(L<<20&4294967295|L>>>12),L=k+(P^S&(B^P))+M[5]+3593408605&4294967295,k=B+(L<<5&4294967295|L>>>27),L=S+(B^P&(k^B))+M[10]+38016083&4294967295,S=k+(L<<9&4294967295|L>>>23),L=P+(k^B&(S^k))+M[15]+3634488961&4294967295,P=S+(L<<14&4294967295|L>>>18),L=B+(S^k&(P^S))+M[4]+3889429448&4294967295,B=P+(L<<20&4294967295|L>>>12),L=k+(P^S&(B^P))+M[9]+568446438&4294967295,k=B+(L<<5&4294967295|L>>>27),L=S+(B^P&(k^B))+M[14]+3275163606&4294967295,S=k+(L<<9&4294967295|L>>>23),L=P+(k^B&(S^k))+M[3]+4107603335&4294967295,P=S+(L<<14&4294967295|L>>>18),L=B+(S^k&(P^S))+M[8]+1163531501&4294967295,B=P+(L<<20&4294967295|L>>>12),L=k+(P^S&(B^P))+M[13]+2850285829&4294967295,k=B+(L<<5&4294967295|L>>>27),L=S+(B^P&(k^B))+M[2]+4243563512&4294967295,S=k+(L<<9&4294967295|L>>>23),L=P+(k^B&(S^k))+M[7]+1735328473&4294967295,P=S+(L<<14&4294967295|L>>>18),L=B+(S^k&(P^S))+M[12]+2368359562&4294967295,B=P+(L<<20&4294967295|L>>>12),L=k+(B^P^S)+M[5]+4294588738&4294967295,k=B+(L<<4&4294967295|L>>>28),L=S+(k^B^P)+M[8]+2272392833&4294967295,S=k+(L<<11&4294967295|L>>>21),L=P+(S^k^B)+M[11]+1839030562&4294967295,P=S+(L<<16&4294967295|L>>>16),L=B+(P^S^k)+M[14]+4259657740&4294967295,B=P+(L<<23&4294967295|L>>>9),L=k+(B^P^S)+M[1]+2763975236&4294967295,k=B+(L<<4&4294967295|L>>>28),L=S+(k^B^P)+M[4]+1272893353&4294967295,S=k+(L<<11&4294967295|L>>>21),L=P+(S^k^B)+M[7]+4139469664&4294967295,P=S+(L<<16&4294967295|L>>>16),L=B+(P^S^k)+M[10]+3200236656&4294967295,B=P+(L<<23&4294967295|L>>>9),L=k+(B^P^S)+M[13]+681279174&4294967295,k=B+(L<<4&4294967295|L>>>28),L=S+(k^B^P)+M[0]+3936430074&4294967295,S=k+(L<<11&4294967295|L>>>21),L=P+(S^k^B)+M[3]+3572445317&4294967295,P=S+(L<<16&4294967295|L>>>16),L=B+(P^S^k)+M[6]+76029189&4294967295,B=P+(L<<23&4294967295|L>>>9),L=k+(B^P^S)+M[9]+3654602809&4294967295,k=B+(L<<4&4294967295|L>>>28),L=S+(k^B^P)+M[12]+3873151461&4294967295,S=k+(L<<11&4294967295|L>>>21),L=P+(S^k^B)+M[15]+530742520&4294967295,P=S+(L<<16&4294967295|L>>>16),L=B+(P^S^k)+M[2]+3299628645&4294967295,B=P+(L<<23&4294967295|L>>>9),L=k+(P^(B|~S))+M[0]+4096336452&4294967295,k=B+(L<<6&4294967295|L>>>26),L=S+(B^(k|~P))+M[7]+1126891415&4294967295,S=k+(L<<10&4294967295|L>>>22),L=P+(k^(S|~B))+M[14]+2878612391&4294967295,P=S+(L<<15&4294967295|L>>>17),L=B+(S^(P|~k))+M[5]+4237533241&4294967295,B=P+(L<<21&4294967295|L>>>11),L=k+(P^(B|~S))+M[12]+1700485571&4294967295,k=B+(L<<6&4294967295|L>>>26),L=S+(B^(k|~P))+M[3]+2399980690&4294967295,S=k+(L<<10&4294967295|L>>>22),L=P+(k^(S|~B))+M[10]+4293915773&4294967295,P=S+(L<<15&4294967295|L>>>17),L=B+(S^(P|~k))+M[1]+2240044497&4294967295,B=P+(L<<21&4294967295|L>>>11),L=k+(P^(B|~S))+M[8]+1873313359&4294967295,k=B+(L<<6&4294967295|L>>>26),L=S+(B^(k|~P))+M[15]+4264355552&4294967295,S=k+(L<<10&4294967295|L>>>22),L=P+(k^(S|~B))+M[6]+2734768916&4294967295,P=S+(L<<15&4294967295|L>>>17),L=B+(S^(P|~k))+M[13]+1309151649&4294967295,B=P+(L<<21&4294967295|L>>>11),L=k+(P^(B|~S))+M[4]+4149444226&4294967295,k=B+(L<<6&4294967295|L>>>26),L=S+(B^(k|~P))+M[11]+3174756917&4294967295,S=k+(L<<10&4294967295|L>>>22),L=P+(k^(S|~B))+M[2]+718787259&4294967295,P=S+(L<<15&4294967295|L>>>17),L=B+(S^(P|~k))+M[9]+3951481745&4294967295,T.g[0]=T.g[0]+k&4294967295,T.g[1]=T.g[1]+(P+(L<<21&4294967295|L>>>11))&4294967295,T.g[2]=T.g[2]+P&4294967295,T.g[3]=T.g[3]+S&4294967295}n.prototype.u=function(T,k){k===void 0&&(k=T.length);for(var B=k-this.blockSize,M=this.B,P=this.h,S=0;S<k;){if(P==0)for(;S<=B;)a(this,T,S),S+=this.blockSize;if(typeof T=="string"){for(;S<k;)if(M[P++]=T.charCodeAt(S++),P==this.blockSize){a(this,M),P=0;break}}else for(;S<k;)if(M[P++]=T[S++],P==this.blockSize){a(this,M),P=0;break}}this.h=P,this.o+=k},n.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var k=1;k<T.length-8;++k)T[k]=0;var B=8*this.o;for(k=T.length-8;k<T.length;++k)T[k]=B&255,B/=256;for(this.u(T),T=Array(16),k=B=0;4>k;++k)for(var M=0;32>M;M+=8)T[B++]=this.g[k]>>>M&255;return T};function s(T,k){var B=l;return Object.prototype.hasOwnProperty.call(B,T)?B[T]:B[T]=k(T)}function o(T,k){this.h=k;for(var B=[],M=!0,P=T.length-1;0<=P;P--){var S=T[P]|0;M&&S==k||(B[P]=S,M=!1)}this.g=B}var l={};function c(T){return-128<=T&&128>T?s(T,function(k){return new o([k|0],0>k?-1:0)}):new o([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return v(u(-T));for(var k=[],B=1,M=0;T>=B;M++)k[M]=T/B|0,B*=4294967296;return new o(k,0)}function d(T,k){if(T.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(T.charAt(0)=="-")return v(d(T.substring(1),k));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var B=u(Math.pow(k,8)),M=f,P=0;P<T.length;P+=8){var S=Math.min(8,T.length-P),L=parseInt(T.substring(P,P+S),k);8>S?(S=u(Math.pow(k,S)),M=M.j(S).add(u(L))):(M=M.j(B),M=M.add(u(L)))}return M}var f=c(0),A=c(1),m=c(16777216);e=o.prototype,e.m=function(){if(x(this))return-v(this).m();for(var T=0,k=1,B=0;B<this.g.length;B++){var M=this.i(B);T+=(0<=M?M:4294967296+M)*k,k*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(g(this))return"0";if(x(this))return"-"+v(this).toString(T);for(var k=u(Math.pow(T,6)),B=this,M="";;){var P=_(B,k).g;B=y(B,P.j(k));var S=((0<B.g.length?B.g[0]:B.h)>>>0).toString(T);if(B=P,g(B))return S+M;for(;6>S.length;)S="0"+S;M=S+M}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function g(T){if(T.h!=0)return!1;for(var k=0;k<T.g.length;k++)if(T.g[k]!=0)return!1;return!0}function x(T){return T.h==-1}e.l=function(T){return T=y(this,T),x(T)?-1:g(T)?0:1};function v(T){for(var k=T.g.length,B=[],M=0;M<k;M++)B[M]=~T.g[M];return new o(B,~T.h).add(A)}e.abs=function(){return x(this)?v(this):this},e.add=function(T){for(var k=Math.max(this.g.length,T.g.length),B=[],M=0,P=0;P<=k;P++){var S=M+(this.i(P)&65535)+(T.i(P)&65535),L=(S>>>16)+(this.i(P)>>>16)+(T.i(P)>>>16);M=L>>>16,S&=65535,L&=65535,B[P]=L<<16|S}return new o(B,B[B.length-1]&-2147483648?-1:0)};function y(T,k){return T.add(v(k))}e.j=function(T){if(g(this)||g(T))return f;if(x(this))return x(T)?v(this).j(v(T)):v(v(this).j(T));if(x(T))return v(this.j(v(T)));if(0>this.l(m)&&0>T.l(m))return u(this.m()*T.m());for(var k=this.g.length+T.g.length,B=[],M=0;M<2*k;M++)B[M]=0;for(M=0;M<this.g.length;M++)for(var P=0;P<T.g.length;P++){var S=this.i(M)>>>16,L=this.i(M)&65535,H=T.i(P)>>>16,q=T.i(P)&65535;B[2*M+2*P]+=L*q,N(B,2*M+2*P),B[2*M+2*P+1]+=S*q,N(B,2*M+2*P+1),B[2*M+2*P+1]+=L*H,N(B,2*M+2*P+1),B[2*M+2*P+2]+=S*H,N(B,2*M+2*P+2)}for(M=0;M<k;M++)B[M]=B[2*M+1]<<16|B[2*M];for(M=k;M<2*k;M++)B[M]=0;return new o(B,0)};function N(T,k){for(;(T[k]&65535)!=T[k];)T[k+1]+=T[k]>>>16,T[k]&=65535,k++}function C(T,k){this.g=T,this.h=k}function _(T,k){if(g(k))throw Error("division by zero");if(g(T))return new C(f,f);if(x(T))return k=_(v(T),k),new C(v(k.g),v(k.h));if(x(k))return k=_(T,v(k)),new C(v(k.g),k.h);if(30<T.g.length){if(x(T)||x(k))throw Error("slowDivide_ only works with positive integers.");for(var B=A,M=k;0>=M.l(T);)B=j(B),M=j(M);var P=I(B,1),S=I(M,1);for(M=I(M,2),B=I(B,2);!g(M);){var L=S.add(M);0>=L.l(T)&&(P=P.add(B),S=L),M=I(M,1),B=I(B,1)}return k=y(T,P.j(k)),new C(P,k)}for(P=f;0<=T.l(k);){for(B=Math.max(1,Math.floor(T.m()/k.m())),M=Math.ceil(Math.log(B)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),S=u(B),L=S.j(k);x(L)||0<L.l(T);)B-=M,S=u(B),L=S.j(k);g(S)&&(S=A),P=P.add(S),T=y(T,L)}return new C(P,T)}e.A=function(T){return _(this,T).h},e.and=function(T){for(var k=Math.max(this.g.length,T.g.length),B=[],M=0;M<k;M++)B[M]=this.i(M)&T.i(M);return new o(B,this.h&T.h)},e.or=function(T){for(var k=Math.max(this.g.length,T.g.length),B=[],M=0;M<k;M++)B[M]=this.i(M)|T.i(M);return new o(B,this.h|T.h)},e.xor=function(T){for(var k=Math.max(this.g.length,T.g.length),B=[],M=0;M<k;M++)B[M]=this.i(M)^T.i(M);return new o(B,this.h^T.h)};function j(T){for(var k=T.g.length+1,B=[],M=0;M<k;M++)B[M]=T.i(M)<<1|T.i(M-1)>>>31;return new o(B,T.h)}function I(T,k){var B=k>>5;k%=32;for(var M=T.g.length-B,P=[],S=0;S<M;S++)P[S]=0<k?T.i(S+B)>>>k|T.i(S+B+1)<<32-k:T.i(S+B);return new o(P,T.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,ese=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,lp=o}).apply(typeof hz<"u"?hz:typeof self<"u"?self:typeof window<"u"?window:{});var Pj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tse,m2,rse,NS,rF,nse,ase,sse;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(F,se,pe){return F==Array.prototype||F==Object.prototype||(F[se]=pe.value),F};function r(F){F=[typeof globalThis=="object"&&globalThis,F,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pj=="object"&&Pj];for(var se=0;se<F.length;++se){var pe=F[se];if(pe&&pe.Math==Math)return pe}throw Error("Cannot find global object")}var n=r(this);function a(F,se){if(se)e:{var pe=n;F=F.split(".");for(var Pe=0;Pe<F.length-1;Pe++){var ot=F[Pe];if(!(ot in pe))break e;pe=pe[ot]}F=F[F.length-1],Pe=pe[F],se=se(Pe),se!=Pe&&se!=null&&t(pe,F,{configurable:!0,writable:!0,value:se})}}function s(F,se){F instanceof String&&(F+="");var pe=0,Pe=!1,ot={next:function(){if(!Pe&&pe<F.length){var gt=pe++;return{value:se(gt,F[gt]),done:!1}}return Pe=!0,{done:!0,value:void 0}}};return ot[Symbol.iterator]=function(){return ot},ot}a("Array.prototype.values",function(F){return F||function(){return s(this,function(se,pe){return pe})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(F){var se=typeof F;return se=se!="object"?se:F?Array.isArray(F)?"array":se:"null",se=="array"||se=="object"&&typeof F.length=="number"}function u(F){var se=typeof F;return se=="object"&&F!=null||se=="function"}function d(F,se,pe){return F.call.apply(F.bind,arguments)}function f(F,se,pe){if(!F)throw Error();if(2<arguments.length){var Pe=Array.prototype.slice.call(arguments,2);return function(){var ot=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ot,Pe),F.apply(se,ot)}}return function(){return F.apply(se,arguments)}}function A(F,se,pe){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,A.apply(null,arguments)}function m(F,se){var pe=Array.prototype.slice.call(arguments,1);return function(){var Pe=pe.slice();return Pe.push.apply(Pe,arguments),F.apply(this,Pe)}}function g(F,se){function pe(){}pe.prototype=se.prototype,F.aa=se.prototype,F.prototype=new pe,F.prototype.constructor=F,F.Qb=function(Pe,ot,gt){for(var Gt=Array(arguments.length-2),Rr=2;Rr<arguments.length;Rr++)Gt[Rr-2]=arguments[Rr];return se.prototype[ot].apply(Pe,Gt)}}function x(F){const se=F.length;if(0<se){const pe=Array(se);for(let Pe=0;Pe<se;Pe++)pe[Pe]=F[Pe];return pe}return[]}function v(F,se){for(let pe=1;pe<arguments.length;pe++){const Pe=arguments[pe];if(c(Pe)){const ot=F.length||0,gt=Pe.length||0;F.length=ot+gt;for(let Gt=0;Gt<gt;Gt++)F[ot+Gt]=Pe[Gt]}else F.push(Pe)}}class y{constructor(se,pe){this.i=se,this.j=pe,this.h=0,this.g=null}get(){let se;return 0<this.h?(this.h--,se=this.g,this.g=se.next,se.next=null):se=this.i(),se}}function N(F){return/^[\s\xa0]*$/.test(F)}function C(){var F=l.navigator;return F&&(F=F.userAgent)?F:""}function _(F){return _[" "](F),F}_[" "]=function(){};var j=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function I(F,se,pe){for(const Pe in F)se.call(pe,F[Pe],Pe,F)}function T(F,se){for(const pe in F)se.call(void 0,F[pe],pe,F)}function k(F){const se={};for(const pe in F)se[pe]=F[pe];return se}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(F,se){let pe,Pe;for(let ot=1;ot<arguments.length;ot++){Pe=arguments[ot];for(pe in Pe)F[pe]=Pe[pe];for(let gt=0;gt<B.length;gt++)pe=B[gt],Object.prototype.hasOwnProperty.call(Pe,pe)&&(F[pe]=Pe[pe])}}function P(F){var se=1;F=F.split(":");const pe=[];for(;0<se&&F.length;)pe.push(F.shift()),se--;return F.length&&pe.push(F.join(":")),pe}function S(F){l.setTimeout(()=>{throw F},0)}function L(){var F=Z;let se=null;return F.g&&(se=F.g,F.g=F.g.next,F.g||(F.h=null),se.next=null),se}class H{constructor(){this.h=this.g=null}add(se,pe){const Pe=q.get();Pe.set(se,pe),this.h?this.h.next=Pe:this.g=Pe,this.h=Pe}}var q=new y(()=>new Q,F=>F.reset());class Q{constructor(){this.next=this.g=this.h=null}set(se,pe){this.h=se,this.g=pe,this.next=null}reset(){this.next=this.g=this.h=null}}let z,K=!1,Z=new H,U=()=>{const F=l.Promise.resolve(void 0);z=()=>{F.then(Y)}};var Y=()=>{for(var F;F=L();){try{F.h.call(F.g)}catch(pe){S(pe)}var se=q;se.j(F),100>se.h&&(se.h++,F.next=se.g,se.g=F)}K=!1};function R(){this.s=this.s,this.C=this.C}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(F,se){this.type=F,this.g=this.target=se,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var W=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var F=!1,se=Object.defineProperty({},"passive",{get:function(){F=!0}});try{const pe=()=>{};l.addEventListener("test",pe,se),l.removeEventListener("test",pe,se)}catch{}return F}();function J(F,se){if(D.call(this,F?F.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,F){var pe=this.type=F.type,Pe=F.changedTouches&&F.changedTouches.length?F.changedTouches[0]:null;if(this.target=F.target||F.srcElement,this.g=se,se=F.relatedTarget){if(j){e:{try{_(se.nodeName);var ot=!0;break e}catch{}ot=!1}ot||(se=null)}}else pe=="mouseover"?se=F.fromElement:pe=="mouseout"&&(se=F.toElement);this.relatedTarget=se,Pe?(this.clientX=Pe.clientX!==void 0?Pe.clientX:Pe.pageX,this.clientY=Pe.clientY!==void 0?Pe.clientY:Pe.pageY,this.screenX=Pe.screenX||0,this.screenY=Pe.screenY||0):(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0),this.button=F.button,this.key=F.key||"",this.ctrlKey=F.ctrlKey,this.altKey=F.altKey,this.shiftKey=F.shiftKey,this.metaKey=F.metaKey,this.pointerId=F.pointerId||0,this.pointerType=typeof F.pointerType=="string"?F.pointerType:le[F.pointerType]||"",this.state=F.state,this.i=F,F.defaultPrevented&&J.aa.h.call(this)}}g(J,D);var le={2:"touch",3:"pen",4:"mouse"};J.prototype.h=function(){J.aa.h.call(this);var F=this.i;F.preventDefault?F.preventDefault():F.returnValue=!1};var ie="closure_listenable_"+(1e6*Math.random()|0),re=0;function ce(F,se,pe,Pe,ot){this.listener=F,this.proxy=null,this.src=se,this.type=pe,this.capture=!!Pe,this.ha=ot,this.key=++re,this.da=this.fa=!1}function oe(F){F.da=!0,F.listener=null,F.proxy=null,F.src=null,F.ha=null}function be(F){this.src=F,this.g={},this.h=0}be.prototype.add=function(F,se,pe,Pe,ot){var gt=F.toString();F=this.g[gt],F||(F=this.g[gt]=[],this.h++);var Gt=je(F,se,Pe,ot);return-1<Gt?(se=F[Gt],pe||(se.fa=!1)):(se=new ce(se,this.src,gt,!!Pe,ot),se.fa=pe,F.push(se)),se};function X(F,se){var pe=se.type;if(pe in F.g){var Pe=F.g[pe],ot=Array.prototype.indexOf.call(Pe,se,void 0),gt;(gt=0<=ot)&&Array.prototype.splice.call(Pe,ot,1),gt&&(oe(se),F.g[pe].length==0&&(delete F.g[pe],F.h--))}}function je(F,se,pe,Pe){for(var ot=0;ot<F.length;++ot){var gt=F[ot];if(!gt.da&&gt.listener==se&&gt.capture==!!pe&&gt.ha==Pe)return ot}return-1}var De="closure_lm_"+(1e6*Math.random()|0),ke={};function ue(F,se,pe,Pe,ot){if(Array.isArray(se)){for(var gt=0;gt<se.length;gt++)ue(F,se[gt],pe,Pe,ot);return null}return pe=qe(pe),F&&F[ie]?F.K(se,pe,u(Pe)?!!Pe.capture:!1,ot):we(F,se,pe,!1,Pe,ot)}function we(F,se,pe,Pe,ot,gt){if(!se)throw Error("Invalid event type");var Gt=u(ot)?!!ot.capture:!!ot,Rr=xe(F);if(Rr||(F[De]=Rr=new be(F)),pe=Rr.add(se,pe,Pe,Gt,gt),pe.proxy)return pe;if(Pe=Ae(),pe.proxy=Pe,Pe.src=F,Pe.listener=pe,F.addEventListener)W||(ot=Gt),ot===void 0&&(ot=!1),F.addEventListener(se.toString(),Pe,ot);else if(F.attachEvent)F.attachEvent(fe(se.toString()),Pe);else if(F.addListener&&F.removeListener)F.addListener(Pe);else throw Error("addEventListener and attachEvent are unavailable.");return pe}function Ae(){function F(pe){return se.call(F.src,F.listener,pe)}const se=ge;return F}function de(F,se,pe,Pe,ot){if(Array.isArray(se))for(var gt=0;gt<se.length;gt++)de(F,se[gt],pe,Pe,ot);else Pe=u(Pe)?!!Pe.capture:!!Pe,pe=qe(pe),F&&F[ie]?(F=F.i,se=String(se).toString(),se in F.g&&(gt=F.g[se],pe=je(gt,pe,Pe,ot),-1<pe&&(oe(gt[pe]),Array.prototype.splice.call(gt,pe,1),gt.length==0&&(delete F.g[se],F.h--)))):F&&(F=xe(F))&&(se=F.g[se.toString()],F=-1,se&&(F=je(se,pe,Pe,ot)),(pe=-1<F?se[F]:null)&&ae(pe))}function ae(F){if(typeof F!="number"&&F&&!F.da){var se=F.src;if(se&&se[ie])X(se.i,F);else{var pe=F.type,Pe=F.proxy;se.removeEventListener?se.removeEventListener(pe,Pe,F.capture):se.detachEvent?se.detachEvent(fe(pe),Pe):se.addListener&&se.removeListener&&se.removeListener(Pe),(pe=xe(se))?(X(pe,F),pe.h==0&&(pe.src=null,se[De]=null)):oe(F)}}}function fe(F){return F in ke?ke[F]:ke[F]="on"+F}function ge(F,se){if(F.da)F=!0;else{se=new J(se,this);var pe=F.listener,Pe=F.ha||F.src;F.fa&&ae(F),F=pe.call(Pe,se)}return F}function xe(F){return F=F[De],F instanceof be?F:null}var Ue="__closure_events_fn_"+(1e9*Math.random()>>>0);function qe(F){return typeof F=="function"?F:(F[Ue]||(F[Ue]=function(se){return F.handleEvent(se)}),F[Ue])}function Ze(){R.call(this),this.i=new be(this),this.M=this,this.F=null}g(Ze,R),Ze.prototype[ie]=!0,Ze.prototype.removeEventListener=function(F,se,pe,Pe){de(this,F,se,pe,Pe)};function We(F,se){var pe,Pe=F.F;if(Pe)for(pe=[];Pe;Pe=Pe.F)pe.push(Pe);if(F=F.M,Pe=se.type||se,typeof se=="string")se=new D(se,F);else if(se instanceof D)se.target=se.target||F;else{var ot=se;se=new D(Pe,F),M(se,ot)}if(ot=!0,pe)for(var gt=pe.length-1;0<=gt;gt--){var Gt=se.g=pe[gt];ot=me(Gt,Pe,!0,se)&&ot}if(Gt=se.g=F,ot=me(Gt,Pe,!0,se)&&ot,ot=me(Gt,Pe,!1,se)&&ot,pe)for(gt=0;gt<pe.length;gt++)Gt=se.g=pe[gt],ot=me(Gt,Pe,!1,se)&&ot}Ze.prototype.N=function(){if(Ze.aa.N.call(this),this.i){var F=this.i,se;for(se in F.g){for(var pe=F.g[se],Pe=0;Pe<pe.length;Pe++)oe(pe[Pe]);delete F.g[se],F.h--}}this.F=null},Ze.prototype.K=function(F,se,pe,Pe){return this.i.add(String(F),se,!1,pe,Pe)},Ze.prototype.L=function(F,se,pe,Pe){return this.i.add(String(F),se,!0,pe,Pe)};function me(F,se,pe,Pe){if(se=F.i.g[String(se)],!se)return!0;se=se.concat();for(var ot=!0,gt=0;gt<se.length;++gt){var Gt=se[gt];if(Gt&&!Gt.da&&Gt.capture==pe){var Rr=Gt.listener,Cn=Gt.ha||Gt.src;Gt.fa&&X(F.i,Gt),ot=Rr.call(Cn,Pe)!==!1&&ot}}return ot&&!Pe.defaultPrevented}function Ve(F,se,pe){if(typeof F=="function")pe&&(F=A(F,pe));else if(F&&typeof F.handleEvent=="function")F=A(F.handleEvent,F);else throw Error("Invalid listener argument");return 2147483647<Number(se)?-1:l.setTimeout(F,se||0)}function Xe(F){F.g=Ve(()=>{F.g=null,F.i&&(F.i=!1,Xe(F))},F.l);const se=F.h;F.h=null,F.m.apply(null,se)}class Ie extends R{constructor(se,pe){super(),this.m=se,this.l=pe,this.h=null,this.i=!1,this.g=null}j(se){this.h=arguments,this.g?this.i=!0:Xe(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Be(F){R.call(this),this.h=F,this.g={}}g(Be,R);var et=[];function bt(F){I(F.g,function(se,pe){this.g.hasOwnProperty(pe)&&ae(se)},F),F.g={}}Be.prototype.N=function(){Be.aa.N.call(this),bt(this)},Be.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jt=l.JSON.stringify,qt=l.JSON.parse,ir=class{stringify(F){return l.JSON.stringify(F,void 0)}parse(F){return l.JSON.parse(F,void 0)}};function Ut(){}Ut.prototype.h=null;function Nr(F){return F.h||(F.h=F.i())}function tr(){}var Xr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hr(){D.call(this,"d")}g(hr,D);function Dr(){D.call(this,"c")}g(Dr,D);var or={},Yr=null;function Xa(){return Yr=Yr||new Ze}or.La="serverreachability";function aa(F){D.call(this,or.La,F)}g(aa,D);function Gn(F){const se=Xa();We(se,new aa(se))}or.STAT_EVENT="statevent";function is(F,se){D.call(this,or.STAT_EVENT,F),this.stat=se}g(is,D);function rr(F){const se=Xa();We(se,new is(se,F))}or.Ma="timingevent";function wn(F,se){D.call(this,or.Ma,F),this.size=se}g(wn,D);function cn(F,se){if(typeof F!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){F()},se)}function On(){this.g=!0}On.prototype.xa=function(){this.g=!1};function Fn(F,se,pe,Pe,ot,gt){F.info(function(){if(F.g)if(gt)for(var Gt="",Rr=gt.split("&"),Cn=0;Cn<Rr.length;Cn++){var en=Rr[Cn].split("=");if(1<en.length){var Yn=en[0];en=en[1];var ua=Yn.split("_");Gt=2<=ua.length&&ua[1]=="type"?Gt+(Yn+"="+en+"&"):Gt+(Yn+"=redacted&")}}else Gt=null;else Gt=gt;return"XMLHTTP REQ ("+Pe+") [attempt "+ot+"]: "+se+`
`+pe+`
`+Gt})}function sa(F,se,pe,Pe,ot,gt,Gt){F.info(function(){return"XMLHTTP RESP ("+Pe+") [ attempt "+ot+"]: "+se+`
`+pe+`
`+gt+" "+Gt})}function Se(F,se,pe,Pe){F.info(function(){return"XMLHTTP TEXT ("+se+"): "+Me(F,pe)+(Pe?" "+Pe:"")})}function Ge(F,se){F.info(function(){return"TIMEOUT: "+se})}On.prototype.info=function(){};function Me(F,se){if(!F.g)return se;if(!se)return null;try{var pe=JSON.parse(se);if(pe){for(F=0;F<pe.length;F++)if(Array.isArray(pe[F])){var Pe=pe[F];if(!(2>Pe.length)){var ot=Pe[1];if(Array.isArray(ot)&&!(1>ot.length)){var gt=ot[0];if(gt!="noop"&&gt!="stop"&&gt!="close")for(var Gt=1;Gt<ot.length;Gt++)ot[Gt]=""}}}}return jt(pe)}catch{return se}}var Qe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ne={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ve;function Fe(){}g(Fe,Ut),Fe.prototype.g=function(){return new XMLHttpRequest},Fe.prototype.i=function(){return{}},ve=new Fe;function ze(F,se,pe,Pe){this.j=F,this.i=se,this.l=pe,this.R=Pe||1,this.U=new Be(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new He}function He(){this.i=null,this.g="",this.h=!1}var Ye={},rt={};function Ct(F,se,pe){F.L=1,F.v=cc(Zs(se)),F.m=pe,F.P=!0,Et(F,null)}function Et(F,se){F.F=Date.now(),Kt(F),F.A=Zs(F.v);var pe=F.A,Pe=F.R;Array.isArray(Pe)||(Pe=[String(Pe)]),Fr(pe.i,"t",Pe),F.C=0,pe=F.j.J,F.h=new He,F.g=Ee(F.j,pe?se:null,!F.m),0<F.O&&(F.M=new Ie(A(F.Y,F,F.g),F.O)),se=F.U,pe=F.g,Pe=F.ca;var ot="readystatechange";Array.isArray(ot)||(ot&&(et[0]=ot.toString()),ot=et);for(var gt=0;gt<ot.length;gt++){var Gt=ue(pe,ot[gt],Pe||se.handleEvent,!1,se.h||se);if(!Gt)break;se.g[Gt.key]=Gt}se=F.H?k(F.H):{},F.m?(F.u||(F.u="POST"),se["Content-Type"]="application/x-www-form-urlencoded",F.g.ea(F.A,F.u,F.m,se)):(F.u="GET",F.g.ea(F.A,F.u,null,se)),Gn(),Fn(F.i,F.u,F.A,F.l,F.R,F.m)}ze.prototype.ca=function(F){F=F.target;const se=this.M;se&&Is(F)==3?se.j():this.Y(F)},ze.prototype.Y=function(F){try{if(F==this.g)e:{const ua=Is(this.g);var se=this.g.Ba();const pc=this.g.Z();if(!(3>ua)&&(ua!=3||this.g&&(this.h.h||this.g.oa()||KA(this.g)))){this.J||ua!=4||se==7||(se==8||0>=pc?Gn(3):Gn(2)),rn(this);var pe=this.g.Z();this.X=pe;t:if(Qt(this)){var Pe=KA(this.g);F="";var ot=Pe.length,gt=Is(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){an(this),Jr(this);var Gt="";break t}this.h.i=new l.TextDecoder}for(se=0;se<ot;se++)this.h.h=!0,F+=this.h.i.decode(Pe[se],{stream:!(gt&&se==ot-1)});Pe.length=0,this.h.g+=F,this.C=0,Gt=this.h.g}else Gt=this.g.oa();if(this.o=pe==200,sa(this.i,this.u,this.A,this.l,this.R,ua,pe),this.o){if(this.T&&!this.K){t:{if(this.g){var Rr,Cn=this.g;if((Rr=Cn.g?Cn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(Rr)){var en=Rr;break t}}en=null}if(pe=en)Se(this.i,this.l,pe,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,va(this,pe);else{this.o=!1,this.s=3,rr(12),an(this),Jr(this);break e}}if(this.P){pe=!0;let vs;for(;!this.J&&this.C<Gt.length;)if(vs=Ot(this,Gt),vs==rt){ua==4&&(this.s=4,rr(14),pe=!1),Se(this.i,this.l,null,"[Incomplete Response]");break}else if(vs==Ye){this.s=4,rr(15),Se(this.i,this.l,Gt,"[Invalid Chunk]"),pe=!1;break}else Se(this.i,this.l,vs,null),va(this,vs);if(Qt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ua!=4||Gt.length!=0||this.h.h||(this.s=1,rr(16),pe=!1),this.o=this.o&&pe,!pe)Se(this.i,this.l,Gt,"[Invalid Chunked Response]"),an(this),Jr(this);else if(0<Gt.length&&!this.W){this.W=!0;var Yn=this.j;Yn.g==this&&Yn.ba&&!Yn.M&&(Yn.j.info("Great, no buffering proxy detected. Bytes received: "+Gt.length),Gu(Yn),Yn.M=!0,rr(11))}}else Se(this.i,this.l,Gt,null),va(this,Gt);ua==4&&an(this),this.o&&!this.J&&(ua==4?qu(this.j,this):(this.o=!1,Kt(this)))}else Vu(this.g),pe==400&&0<Gt.indexOf("Unknown SID")?(this.s=3,rr(12)):(this.s=0,rr(13)),an(this),Jr(this)}}}catch{}finally{}};function Qt(F){return F.g?F.u=="GET"&&F.L!=2&&F.j.Ca:!1}function Ot(F,se){var pe=F.C,Pe=se.indexOf(`
`,pe);return Pe==-1?rt:(pe=Number(se.substring(pe,Pe)),isNaN(pe)?Ye:(Pe+=1,Pe+pe>se.length?rt:(se=se.slice(Pe,Pe+pe),F.C=Pe+pe,se)))}ze.prototype.cancel=function(){this.J=!0,an(this)};function Kt(F){F.S=Date.now()+F.I,Cr(F,F.I)}function Cr(F,se){if(F.B!=null)throw Error("WatchDog timer not null");F.B=cn(A(F.ba,F),se)}function rn(F){F.B&&(l.clearTimeout(F.B),F.B=null)}ze.prototype.ba=function(){this.B=null;const F=Date.now();0<=F-this.S?(Ge(this.i,this.A),this.L!=2&&(Gn(),rr(17)),an(this),this.s=2,Jr(this)):Cr(this,this.S-F)};function Jr(F){F.j.G==0||F.J||qu(F.j,F)}function an(F){rn(F);var se=F.M;se&&typeof se.ma=="function"&&se.ma(),F.M=null,bt(F.U),F.g&&(se=F.g,F.g=null,se.abort(),se.ma())}function va(F,se){try{var pe=F.j;if(pe.G!=0&&(pe.g==F||Tr(pe.h,F))){if(!F.K&&Tr(pe.h,F)&&pe.G==3){try{var Pe=pe.Da.g.parse(se)}catch{Pe=null}if(Array.isArray(Pe)&&Pe.length==3){var ot=Pe;if(ot[0]==0){e:if(!pe.u){if(pe.g)if(pe.g.F+3e3<F.F)Zc(pe),Gf(pe);else break e;$d(pe),rr(18)}}else pe.za=ot[1],0<pe.za-pe.T&&37500>ot[2]&&pe.F&&pe.v==0&&!pe.C&&(pe.C=cn(A(pe.Za,pe),6e3));if(1>=xs(pe.h)&&pe.ca){try{pe.ca()}catch{}pe.ca=void 0}}else ro(pe,11)}else if((F.K||pe.g==F)&&Zc(pe),!N(se))for(ot=pe.Da.g.parse(se),se=0;se<ot.length;se++){let en=ot[se];if(pe.T=en[0],en=en[1],pe.G==2)if(en[0]=="c"){pe.K=en[1],pe.ia=en[2];const Yn=en[3];Yn!=null&&(pe.la=Yn,pe.j.info("VER="+pe.la));const ua=en[4];ua!=null&&(pe.Aa=ua,pe.j.info("SVER="+pe.Aa));const pc=en[5];pc!=null&&typeof pc=="number"&&0<pc&&(Pe=1.5*pc,pe.L=Pe,pe.j.info("backChannelRequestTimeoutMs_="+Pe)),Pe=pe;const vs=F.g;if(vs){const el=vs.g?vs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(el){var gt=Pe.h;gt.g||el.indexOf("spdy")==-1&&el.indexOf("quic")==-1&&el.indexOf("h2")==-1||(gt.j=gt.l,gt.g=new Set,gt.h&&(Zr(gt,gt.h),gt.h=null))}if(Pe.D){const Ku=vs.g?vs.g.getResponseHeader("X-HTTP-Session-Id"):null;Ku&&(Pe.ya=Ku,Ln(Pe.I,Pe.D,Ku))}}pe.G=3,pe.l&&pe.l.ua(),pe.ba&&(pe.R=Date.now()-F.F,pe.j.info("Handshake RTT: "+pe.R+"ms")),Pe=pe;var Gt=F;if(Pe.qa=te(Pe,Pe.J?Pe.ia:null,Pe.W),Gt.K){Rn(Pe.h,Gt);var Rr=Gt,Cn=Pe.L;Cn&&(Rr.I=Cn),Rr.B&&(rn(Rr),Kt(Rr)),Pe.g=Gt}else Kf(Pe);0<pe.i.length&&qf(pe)}else en[0]!="stop"&&en[0]!="close"||ro(pe,7);else pe.G==3&&(en[0]=="stop"||en[0]=="close"?en[0]=="stop"?ro(pe,7):Jc(pe):en[0]!="noop"&&pe.l&&pe.l.ta(en),pe.v=0)}}Gn(4)}catch{}}var Ys=class{constructor(F,se){this.g=F,this.map=se}};function Ya(F){this.l=F||10,l.PerformanceNavigationTiming?(F=l.performance.getEntriesByType("navigation"),F=0<F.length&&(F[0].nextHopProtocol=="hq"||F[0].nextHopProtocol=="h2")):F=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=F?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function os(F){return F.h?!0:F.g?F.g.size>=F.j:!1}function xs(F){return F.h?1:F.g?F.g.size:0}function Tr(F,se){return F.h?F.h==se:F.g?F.g.has(se):!1}function Zr(F,se){F.g?F.g.add(se):F.h=se}function Rn(F,se){F.h&&F.h==se?F.h=null:F.g&&F.g.has(se)&&F.g.delete(se)}Ya.prototype.cancel=function(){if(this.i=Ji(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const F of this.g.values())F.cancel();this.g.clear()}};function Ji(F){if(F.h!=null)return F.i.concat(F.h.D);if(F.g!=null&&F.g.size!==0){let se=F.i;for(const pe of F.g.values())se=se.concat(pe.D);return se}return x(F.i)}function Kc(F){if(F.V&&typeof F.V=="function")return F.V();if(typeof Map<"u"&&F instanceof Map||typeof Set<"u"&&F instanceof Set)return Array.from(F.values());if(typeof F=="string")return F.split("");if(c(F)){for(var se=[],pe=F.length,Pe=0;Pe<pe;Pe++)se.push(F[Pe]);return se}se=[],pe=0;for(Pe in F)se[pe++]=F[Pe];return se}function oc(F){if(F.na&&typeof F.na=="function")return F.na();if(!F.V||typeof F.V!="function"){if(typeof Map<"u"&&F instanceof Map)return Array.from(F.keys());if(!(typeof Set<"u"&&F instanceof Set)){if(c(F)||typeof F=="string"){var se=[];F=F.length;for(var pe=0;pe<F;pe++)se.push(pe);return se}se=[],pe=0;for(const Pe in F)se[pe++]=Pe;return se}}}function Rd(F,se){if(F.forEach&&typeof F.forEach=="function")F.forEach(se,void 0);else if(c(F)||typeof F=="string")Array.prototype.forEach.call(F,se,void 0);else for(var pe=oc(F),Pe=Kc(F),ot=Pe.length,gt=0;gt<ot;gt++)se.call(void 0,Pe[gt],pe&&pe[gt],F)}var Js=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lu(F,se){if(F){F=F.split("&");for(var pe=0;pe<F.length;pe++){var Pe=F[pe].indexOf("="),ot=null;if(0<=Pe){var gt=F[pe].substring(0,Pe);ot=F[pe].substring(Pe+1)}else gt=F[pe];se(gt,ot?decodeURIComponent(ot.replace(/\+/g," ")):"")}}}function gn(F){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,F instanceof gn){this.h=F.h,Hl(this,F.j),this.o=F.o,this.g=F.g,lc(this,F.s),this.l=F.l;var se=F.i,pe=new uc;pe.i=se.i,se.g&&(pe.g=new Map(se.g),pe.h=se.h),Co(this,pe),this.m=F.m}else F&&(se=String(F).match(Js))?(this.h=!1,Hl(this,se[1]||"",!0),this.o=Eo(se[2]||""),this.g=Eo(se[3]||"",!0),lc(this,se[4]),this.l=Eo(se[5]||"",!0),Co(this,se[6]||"",!0),this.m=Eo(se[7]||"")):(this.h=!1,this.i=new uc(null,this.h))}gn.prototype.toString=function(){var F=[],se=this.j;se&&F.push(Xo(se,Mu,!0),":");var pe=this.g;return(pe||se=="file")&&(F.push("//"),(se=this.o)&&F.push(Xo(se,Mu,!0),"@"),F.push(encodeURIComponent(String(pe)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),pe=this.s,pe!=null&&F.push(":",String(pe))),(pe=this.l)&&(this.g&&pe.charAt(0)!="/"&&F.push("/"),F.push(Xo(pe,pe.charAt(0)=="/"?Ql:Uu,!0))),(pe=this.i.toString())&&F.push("?",pe),(pe=this.m)&&F.push("#",Xo(pe,Wc)),F.join("")};function Zs(F){return new gn(F)}function Hl(F,se,pe){F.j=pe?Eo(se,!0):se,F.j&&(F.j=F.j.replace(/:$/,""))}function lc(F,se){if(se){if(se=Number(se),isNaN(se)||0>se)throw Error("Bad port number "+se);F.s=se}else F.s=null}function Co(F,se,pe){se instanceof uc?(F.i=se,qA(F.i,F.h)):(pe||(se=Xo(se,zf)),F.i=new uc(se,F.h))}function Ln(F,se,pe){F.i.set(se,pe)}function cc(F){return Ln(F,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),F}function Eo(F,se){return F?se?decodeURI(F.replace(/%25/g,"%2525")):decodeURIComponent(F):""}function Xo(F,se,pe){return typeof F=="string"?(F=encodeURI(F).replace(se,Ld),pe&&(F=F.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F):null}function Ld(F){return F=F.charCodeAt(0),"%"+(F>>4&15).toString(16)+(F&15).toString(16)}var Mu=/[#\/\?@]/g,Uu=/[#\?:]/g,Ql=/[#\?]/g,zf=/[#\?@]/g,Wc=/#/g;function uc(F,se){this.h=this.g=null,this.i=F||null,this.j=!!se}function ba(F){F.g||(F.g=new Map,F.h=0,F.i&&Lu(F.i,function(se,pe){F.add(decodeURIComponent(se.replace(/\+/g," ")),pe)}))}e=uc.prototype,e.add=function(F,se){ba(this),this.i=null,F=fc(this,F);var pe=this.g.get(F);return pe||this.g.set(F,pe=[]),pe.push(se),this.h+=1,this};function Xc(F,se){ba(F),se=fc(F,se),F.g.has(se)&&(F.i=null,F.h-=F.g.get(se).length,F.g.delete(se))}function dc(F,se){return ba(F),se=fc(F,se),F.g.has(se)}e.forEach=function(F,se){ba(this),this.g.forEach(function(pe,Pe){pe.forEach(function(ot){F.call(se,ot,Pe,this)},this)},this)},e.na=function(){ba(this);const F=Array.from(this.g.values()),se=Array.from(this.g.keys()),pe=[];for(let Pe=0;Pe<se.length;Pe++){const ot=F[Pe];for(let gt=0;gt<ot.length;gt++)pe.push(se[Pe])}return pe},e.V=function(F){ba(this);let se=[];if(typeof F=="string")dc(this,F)&&(se=se.concat(this.g.get(fc(this,F))));else{F=Array.from(this.g.values());for(let pe=0;pe<F.length;pe++)se=se.concat(F[pe])}return se},e.set=function(F,se){return ba(this),this.i=null,F=fc(this,F),dc(this,F)&&(this.h-=this.g.get(F).length),this.g.set(F,[se]),this.h+=1,this},e.get=function(F,se){return F?(F=this.V(F),0<F.length?String(F[0]):se):se};function Fr(F,se,pe){Xc(F,se),0<pe.length&&(F.i=null,F.g.set(fc(F,se),x(pe)),F.h+=pe.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const F=[],se=Array.from(this.g.keys());for(var pe=0;pe<se.length;pe++){var Pe=se[pe];const gt=encodeURIComponent(String(Pe)),Gt=this.V(Pe);for(Pe=0;Pe<Gt.length;Pe++){var ot=gt;Gt[Pe]!==""&&(ot+="="+encodeURIComponent(String(Gt[Pe]))),F.push(ot)}}return this.i=F.join("&")};function fc(F,se){return se=String(se),F.j&&(se=se.toLowerCase()),se}function qA(F,se){se&&!F.j&&(ba(F),F.i=null,F.g.forEach(function(pe,Pe){var ot=Pe.toLowerCase();Pe!=ot&&(Xc(this,Pe),Fr(this,ot,pe))},F)),F.j=se}function Zi(F,se){const pe=new On;if(l.Image){const Pe=new Image;Pe.onload=m(jo,pe,"TestLoadImage: loaded",!0,se,Pe),Pe.onerror=m(jo,pe,"TestLoadImage: error",!1,se,Pe),Pe.onabort=m(jo,pe,"TestLoadImage: abort",!1,se,Pe),Pe.ontimeout=m(jo,pe,"TestLoadImage: timeout",!1,se,Pe),l.setTimeout(function(){Pe.ontimeout&&Pe.ontimeout()},1e4),Pe.src=F}else se(!1)}function Yo(F,se){const pe=new On,Pe=new AbortController,ot=setTimeout(()=>{Pe.abort(),jo(pe,"TestPingServer: timeout",!1,se)},1e4);fetch(F,{signal:Pe.signal}).then(gt=>{clearTimeout(ot),gt.ok?jo(pe,"TestPingServer: ok",!0,se):jo(pe,"TestPingServer: server error",!1,se)}).catch(()=>{clearTimeout(ot),jo(pe,"TestPingServer: error",!1,se)})}function jo(F,se,pe,Pe,ot){try{ot&&(ot.onload=null,ot.onerror=null,ot.onabort=null,ot.ontimeout=null),Pe(pe)}catch{}}function hc(){this.g=new ir}function Jo(F,se,pe){const Pe=pe||"";try{Rd(F,function(ot,gt){let Gt=ot;u(ot)&&(Gt=jt(ot)),se.push(Pe+gt+"="+encodeURIComponent(Gt))})}catch(ot){throw se.push(Pe+"type="+encodeURIComponent("_badmap")),ot}}function Hu(F){this.l=F.Ub||null,this.j=F.eb||!1}g(Hu,Ut),Hu.prototype.g=function(){return new Yc(this.l,this.j)},Hu.prototype.i=function(F){return function(){return F}}({});function Yc(F,se){Ze.call(this),this.D=F,this.o=se,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(Yc,Ze),e=Yc.prototype,e.open=function(F,se){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=F,this.A=se,this.readyState=1,eo(this)},e.send=function(F){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const se={headers:this.u,method:this.B,credentials:this.m,cache:void 0};F&&(se.body=F),(this.D||l).fetch(new Request(this.A,se)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zo(this)),this.readyState=0},e.Sa=function(F){if(this.g&&(this.l=F,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=F.headers,this.readyState=2,eo(this)),this.g&&(this.readyState=3,eo(this),this.g)))if(this.responseType==="arraybuffer")F.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in F){if(this.j=F.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;f0(this)}else F.text().then(this.Ra.bind(this),this.ga.bind(this))};function f0(F){F.j.read().then(F.Pa.bind(F)).catch(F.ga.bind(F))}e.Pa=function(F){if(this.g){if(this.o&&F.value)this.response.push(F.value);else if(!this.o){var se=F.value?F.value:new Uint8Array(0);(se=this.v.decode(se,{stream:!F.done}))&&(this.response=this.responseText+=se)}F.done?Zo(this):eo(this),this.readyState==3&&f0(this)}},e.Ra=function(F){this.g&&(this.response=this.responseText=F,Zo(this))},e.Qa=function(F){this.g&&(this.response=F,Zo(this))},e.ga=function(){this.g&&Zo(this)};function Zo(F){F.readyState=4,F.l=null,F.j=null,F.v=null,eo(F)}e.setRequestHeader=function(F,se){this.u.append(F,se)},e.getResponseHeader=function(F){return this.h&&this.h.get(F.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const F=[],se=this.h.entries();for(var pe=se.next();!pe.done;)pe=pe.value,F.push(pe[0]+": "+pe[1]),pe=se.next();return F.join(`\r
`)};function eo(F){F.onreadystatechange&&F.onreadystatechange.call(F)}Object.defineProperty(Yc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(F){this.m=F?"include":"same-origin"}});function Ac(F){let se="";return I(F,function(pe,Pe){se+=Pe,se+=":",se+=pe,se+=`\r
`}),se}function Bs(F,se,pe){e:{for(Pe in pe){var Pe=!1;break e}Pe=!0}Pe||(pe=Ac(pe),typeof F=="string"?pe!=null&&encodeURIComponent(String(pe)):Ln(F,se,pe))}function Nn(F){Ze.call(this),this.headers=new Map,this.o=F||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(Nn,Ze);var Qu=/^https?$/i,mc=["POST","PUT"];e=Nn.prototype,e.Ha=function(F){this.J=F},e.ea=function(F,se,pe,Pe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+F);se=se?se.toUpperCase():"GET",this.D=F,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ve.g(),this.v=this.o?Nr(this.o):Nr(ve),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(se,String(F),!0),this.B=!1}catch(gt){h0(this,gt);return}if(F=pe||"",pe=new Map(this.headers),Pe)if(Object.getPrototypeOf(Pe)===Object.prototype)for(var ot in Pe)pe.set(ot,Pe[ot]);else if(typeof Pe.keys=="function"&&typeof Pe.get=="function")for(const gt of Pe.keys())pe.set(gt,Pe.get(gt));else throw Error("Unknown input type for opt_headers: "+String(Pe));Pe=Array.from(pe.keys()).find(gt=>gt.toLowerCase()=="content-type"),ot=l.FormData&&F instanceof l.FormData,!(0<=Array.prototype.indexOf.call(mc,se,void 0))||Pe||ot||pe.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[gt,Gt]of pe)this.g.setRequestHeader(gt,Gt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{to(this),this.u=!0,this.g.send(F),this.u=!1}catch(gt){h0(this,gt)}};function h0(F,se){F.h=!1,F.g&&(F.j=!0,F.g.abort(),F.j=!1),F.l=se,F.m=5,Md(F),Vl(F)}function Md(F){F.A||(F.A=!0,We(F,"complete"),We(F,"error"))}e.abort=function(F){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=F||7,We(this,"complete"),We(this,"abort"),Vl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vl(this,!0)),Nn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ud(this):this.bb())},e.bb=function(){Ud(this)};function Ud(F){if(F.h&&typeof o<"u"&&(!F.v[1]||Is(F)!=4||F.Z()!=2)){if(F.u&&Is(F)==4)Ve(F.Ea,0,F);else if(We(F,"readystatechange"),Is(F)==4){F.h=!1;try{const Gt=F.Z();e:switch(Gt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var se=!0;break e;default:se=!1}var pe;if(!(pe=se)){var Pe;if(Pe=Gt===0){var ot=String(F.D).match(Js)[1]||null;!ot&&l.self&&l.self.location&&(ot=l.self.location.protocol.slice(0,-1)),Pe=!Qu.test(ot?ot.toLowerCase():"")}pe=Pe}if(pe)We(F,"complete"),We(F,"success");else{F.m=6;try{var gt=2<Is(F)?F.g.statusText:""}catch{gt=""}F.l=gt+" ["+F.Z()+"]",Md(F)}}finally{Vl(F)}}}}function Vl(F,se){if(F.g){to(F);const pe=F.g,Pe=F.v[0]?()=>{}:null;F.g=null,F.v=null,se||We(F,"ready");try{pe.onreadystatechange=Pe}catch{}}}function to(F){F.I&&(l.clearTimeout(F.I),F.I=null)}e.isActive=function(){return!!this.g};function Is(F){return F.g?F.g.readyState:0}e.Z=function(){try{return 2<Is(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(F){if(this.g){var se=this.g.responseText;return F&&se.indexOf(F)==0&&(se=se.substring(F.length)),qt(se)}};function KA(F){try{if(!F.g)return null;if("response"in F.g)return F.g.response;switch(F.H){case"":case"text":return F.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in F.g)return F.g.mozResponseArrayBuffer}return null}catch{return null}}function Vu(F){const se={};F=(F.g&&2<=Is(F)&&F.g.getAllResponseHeaders()||"").split(`\r
`);for(let Pe=0;Pe<F.length;Pe++){if(N(F[Pe]))continue;var pe=P(F[Pe]);const ot=pe[0];if(pe=pe[1],typeof pe!="string")continue;pe=pe.trim();const gt=se[ot]||[];se[ot]=gt,gt.push(pe)}T(se,function(Pe){return Pe.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Li(F,se,pe){return pe&&pe.internalChannelParams&&pe.internalChannelParams[F]||se}function $u(F){this.Aa=0,this.i=[],this.j=new On,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Li("failFast",!1,F),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Li("baseRetryDelayMs",5e3,F),this.cb=Li("retryDelaySeedMs",1e4,F),this.Wa=Li("forwardChannelMaxRetries",2,F),this.wa=Li("forwardChannelRequestTimeoutMs",2e4,F),this.pa=F&&F.xmlHttpFactory||void 0,this.Xa=F&&F.Tb||void 0,this.Ca=F&&F.useFetchStreams||!1,this.L=void 0,this.J=F&&F.supportsCrossDomainXhr||!1,this.K="",this.h=new Ya(F&&F.concurrentRequestLimit),this.Da=new hc,this.P=F&&F.fastHandshake||!1,this.O=F&&F.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=F&&F.Rb||!1,F&&F.xa&&this.j.xa(),F&&F.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&F&&F.detectBufferingProxy||!1,this.ja=void 0,F&&F.longPollingTimeout&&0<F.longPollingTimeout&&(this.ja=F.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=$u.prototype,e.la=8,e.G=1,e.connect=function(F,se,pe,Pe){rr(0),this.W=F,this.H=se||{},pe&&Pe!==void 0&&(this.H.OSID=pe,this.H.OAID=Pe),this.F=this.X,this.I=te(this,null,this.W),qf(this)};function Jc(F){if(Hd(F),F.G==3){var se=F.U++,pe=Zs(F.I);if(Ln(pe,"SID",F.K),Ln(pe,"RID",se),Ln(pe,"TYPE","terminate"),zu(F,pe),se=new ze(F,F.j,se),se.L=2,se.v=cc(Zs(pe)),pe=!1,l.navigator&&l.navigator.sendBeacon)try{pe=l.navigator.sendBeacon(se.v.toString(),"")}catch{}!pe&&l.Image&&(new Image().src=se.v,pe=!0),pe||(se.g=Ee(se.j,null),se.g.ea(se.v)),se.F=Date.now(),Kt(se)}Wf(F)}function Gf(F){F.g&&(Gu(F),F.g.cancel(),F.g=null)}function Hd(F){Gf(F),F.u&&(l.clearTimeout(F.u),F.u=null),Zc(F),F.h.cancel(),F.s&&(typeof F.s=="number"&&l.clearTimeout(F.s),F.s=null)}function qf(F){if(!os(F.h)&&!F.s){F.s=!0;var se=F.Ga;z||U(),K||(z(),K=!0),Z.add(se,F),F.B=0}}function A0(F,se){return xs(F.h)>=F.h.j-(F.s?1:0)?!1:F.s?(F.i=se.D.concat(F.i),!0):F.G==1||F.G==2||F.B>=(F.Va?0:F.Wa)?!1:(F.s=cn(A(F.Ga,F,se),zd(F,F.B)),F.B++,!0)}e.Ga=function(F){if(this.s)if(this.s=null,this.G==1){if(!F){this.U=Math.floor(1e5*Math.random()),F=this.U++;const ot=new ze(this,this.j,F);let gt=this.o;if(this.S&&(gt?(gt=k(gt),M(gt,this.S)):gt=this.S),this.m!==null||this.O||(ot.H=gt,gt=null),this.P)e:{for(var se=0,pe=0;pe<this.i.length;pe++){t:{var Pe=this.i[pe];if("__data__"in Pe.map&&(Pe=Pe.map.__data__,typeof Pe=="string")){Pe=Pe.length;break t}Pe=void 0}if(Pe===void 0)break;if(se+=Pe,4096<se){se=pe;break e}if(se===4096||pe===this.i.length-1){se=pe+1;break e}}se=1e3}else se=1e3;se=Vd(this,ot,se),pe=Zs(this.I),Ln(pe,"RID",F),Ln(pe,"CVER",22),this.D&&Ln(pe,"X-HTTP-Session-Id",this.D),zu(this,pe),gt&&(this.O?se="headers="+encodeURIComponent(String(Ac(gt)))+"&"+se:this.m&&Bs(pe,this.m,gt)),Zr(this.h,ot),this.Ua&&Ln(pe,"TYPE","init"),this.P?(Ln(pe,"$req",se),Ln(pe,"SID","null"),ot.T=!0,Ct(ot,pe,null)):Ct(ot,pe,se),this.G=2}}else this.G==3&&(F?Qd(this,F):this.i.length==0||os(this.h)||Qd(this))};function Qd(F,se){var pe;se?pe=se.l:pe=F.U++;const Pe=Zs(F.I);Ln(Pe,"SID",F.K),Ln(Pe,"RID",pe),Ln(Pe,"AID",F.T),zu(F,Pe),F.m&&F.o&&Bs(Pe,F.m,F.o),pe=new ze(F,F.j,pe,F.B+1),F.m===null&&(pe.H=F.o),se&&(F.i=se.D.concat(F.i)),se=Vd(F,pe,1e3),pe.I=Math.round(.5*F.wa)+Math.round(.5*F.wa*Math.random()),Zr(F.h,pe),Ct(pe,Pe,se)}function zu(F,se){F.H&&I(F.H,function(pe,Pe){Ln(se,Pe,pe)}),F.l&&Rd({},function(pe,Pe){Ln(se,Pe,pe)})}function Vd(F,se,pe){pe=Math.min(F.i.length,pe);var Pe=F.l?A(F.l.Na,F.l,F):null;e:{var ot=F.i;let gt=-1;for(;;){const Gt=["count="+pe];gt==-1?0<pe?(gt=ot[0].g,Gt.push("ofs="+gt)):gt=0:Gt.push("ofs="+gt);let Rr=!0;for(let Cn=0;Cn<pe;Cn++){let en=ot[Cn].g;const Yn=ot[Cn].map;if(en-=gt,0>en)gt=Math.max(0,ot[Cn].g-100),Rr=!1;else try{Jo(Yn,Gt,"req"+en+"_")}catch{Pe&&Pe(Yn)}}if(Rr){Pe=Gt.join("&");break e}}}return F=F.i.splice(0,pe),se.D=F,Pe}function Kf(F){if(!F.g&&!F.u){F.Y=1;var se=F.Fa;z||U(),K||(z(),K=!0),Z.add(se,F),F.v=0}}function $d(F){return F.g||F.u||3<=F.v?!1:(F.Y++,F.u=cn(A(F.Fa,F),zd(F,F.v)),F.v++,!0)}e.Fa=function(){if(this.u=null,WA(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var F=2*this.R;this.j.info("BP detection timer enabled: "+F),this.A=cn(A(this.ab,this),F)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rr(10),Gf(this),WA(this))};function Gu(F){F.A!=null&&(l.clearTimeout(F.A),F.A=null)}function WA(F){F.g=new ze(F,F.j,"rpc",F.Y),F.m===null&&(F.g.H=F.o),F.g.O=0;var se=Zs(F.qa);Ln(se,"RID","rpc"),Ln(se,"SID",F.K),Ln(se,"AID",F.T),Ln(se,"CI",F.F?"0":"1"),!F.F&&F.ja&&Ln(se,"TO",F.ja),Ln(se,"TYPE","xmlhttp"),zu(F,se),F.m&&F.o&&Bs(se,F.m,F.o),F.L&&(F.g.I=F.L);var pe=F.g;F=F.ia,pe.L=1,pe.v=cc(Zs(se)),pe.m=null,pe.P=!0,Et(pe,F)}e.Za=function(){this.C!=null&&(this.C=null,Gf(this),$d(this),rr(19))};function Zc(F){F.C!=null&&(l.clearTimeout(F.C),F.C=null)}function qu(F,se){var pe=null;if(F.g==se){Zc(F),Gu(F),F.g=null;var Pe=2}else if(Tr(F.h,se))pe=se.D,Rn(F.h,se),Pe=1;else return;if(F.G!=0){if(se.o)if(Pe==1){pe=se.m?se.m.length:0,se=Date.now()-se.F;var ot=F.B;Pe=Xa(),We(Pe,new wn(Pe,pe)),qf(F)}else Kf(F);else if(ot=se.s,ot==3||ot==0&&0<se.X||!(Pe==1&&A0(F,se)||Pe==2&&$d(F)))switch(pe&&0<pe.length&&(se=F.h,se.i=se.i.concat(pe)),ot){case 1:ro(F,5);break;case 4:ro(F,10);break;case 3:ro(F,6);break;default:ro(F,2)}}}function zd(F,se){let pe=F.Ta+Math.floor(Math.random()*F.cb);return F.isActive()||(pe*=2),pe*se}function ro(F,se){if(F.j.info("Error code "+se),se==2){var pe=A(F.fb,F),Pe=F.Xa;const ot=!Pe;Pe=new gn(Pe||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Hl(Pe,"https"),cc(Pe),ot?Zi(Pe.toString(),pe):Yo(Pe.toString(),pe)}else rr(2);F.G=0,F.l&&F.l.sa(se),Wf(F),Hd(F)}e.fb=function(F){F?(this.j.info("Successfully pinged google.com"),rr(2)):(this.j.info("Failed to ping google.com"),rr(1))};function Wf(F){if(F.G=0,F.ka=[],F.l){const se=Ji(F.h);(se.length!=0||F.i.length!=0)&&(v(F.ka,se),v(F.ka,F.i),F.h.i.length=0,x(F.i),F.i.length=0),F.l.ra()}}function te(F,se,pe){var Pe=pe instanceof gn?Zs(pe):new gn(pe);if(Pe.g!="")se&&(Pe.g=se+"."+Pe.g),lc(Pe,Pe.s);else{var ot=l.location;Pe=ot.protocol,se=se?se+"."+ot.hostname:ot.hostname,ot=+ot.port;var gt=new gn(null);Pe&&Hl(gt,Pe),se&&(gt.g=se),ot&&lc(gt,ot),pe&&(gt.l=pe),Pe=gt}return pe=F.D,se=F.ya,pe&&se&&Ln(Pe,pe,se),Ln(Pe,"VER",F.la),zu(F,Pe),Pe}function Ee(F,se,pe){if(se&&!F.J)throw Error("Can't create secondary domain capable XhrIo object.");return se=F.Ca&&!F.pa?new Nn(new Hu({eb:pe})):new Nn(F.pa),se.Ha(F.J),se}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ke(){}e=Ke.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function tt(){}tt.prototype.g=function(F,se){return new lt(F,se)};function lt(F,se){Ze.call(this),this.g=new $u(se),this.l=F,this.h=se&&se.messageUrlParams||null,F=se&&se.messageHeaders||null,se&&se.clientProtocolHeaderRequired&&(F?F["X-Client-Protocol"]="webchannel":F={"X-Client-Protocol":"webchannel"}),this.g.o=F,F=se&&se.initMessageHeaders||null,se&&se.messageContentType&&(F?F["X-WebChannel-Content-Type"]=se.messageContentType:F={"X-WebChannel-Content-Type":se.messageContentType}),se&&se.va&&(F?F["X-WebChannel-Client-Profile"]=se.va:F={"X-WebChannel-Client-Profile":se.va}),this.g.S=F,(F=se&&se.Sb)&&!N(F)&&(this.g.m=F),this.v=se&&se.supportsCrossDomainXhr||!1,this.u=se&&se.sendRawJson||!1,(se=se&&se.httpSessionIdParam)&&!N(se)&&(this.g.D=se,F=this.h,F!==null&&se in F&&(F=this.h,se in F&&delete F[se])),this.j=new nr(this)}g(lt,Ze),lt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},lt.prototype.close=function(){Jc(this.g)},lt.prototype.o=function(F){var se=this.g;if(typeof F=="string"){var pe={};pe.__data__=F,F=pe}else this.u&&(pe={},pe.__data__=jt(F),F=pe);se.i.push(new Ys(se.Ya++,F)),se.G==3&&qf(se)},lt.prototype.N=function(){this.g.l=null,delete this.j,Jc(this.g),delete this.g,lt.aa.N.call(this)};function kt(F){hr.call(this),F.__headers__&&(this.headers=F.__headers__,this.statusCode=F.__status__,delete F.__headers__,delete F.__status__);var se=F.__sm__;if(se){e:{for(const pe in se){F=pe;break e}F=void 0}(this.i=F)&&(F=this.i,se=se!==null&&F in se?se[F]:void 0),this.data=se}else this.data=F}g(kt,hr);function zt(){Dr.call(this),this.status=1}g(zt,Dr);function nr(F){this.g=F}g(nr,Ke),nr.prototype.ua=function(){We(this.g,"a")},nr.prototype.ta=function(F){We(this.g,new kt(F))},nr.prototype.sa=function(F){We(this.g,new zt)},nr.prototype.ra=function(){We(this.g,"b")},tt.prototype.createWebChannel=tt.prototype.g,lt.prototype.send=lt.prototype.o,lt.prototype.open=lt.prototype.m,lt.prototype.close=lt.prototype.close,sse=function(){return new tt},ase=function(){return Xa()},nse=or,rF={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qe.NO_ERROR=0,Qe.TIMEOUT=8,Qe.HTTP_ERROR=6,NS=Qe,Ne.COMPLETE="complete",rse=Ne,tr.EventType=Xr,Xr.OPEN="a",Xr.CLOSE="b",Xr.ERROR="c",Xr.MESSAGE="d",Ze.prototype.listen=Ze.prototype.K,m2=tr,Nn.prototype.listenOnce=Nn.prototype.L,Nn.prototype.getLastError=Nn.prototype.Ka,Nn.prototype.getLastErrorCode=Nn.prototype.Ba,Nn.prototype.getStatus=Nn.prototype.Z,Nn.prototype.getResponseJson=Nn.prototype.Oa,Nn.prototype.getResponseText=Nn.prototype.oa,Nn.prototype.send=Nn.prototype.ea,Nn.prototype.setWithCredentials=Nn.prototype.Ha,tse=Nn}).apply(typeof Pj<"u"?Pj:typeof self<"u"?self:typeof window<"u"?window:{});const Az="@firebase/firestore",mz="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gl=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};gl.UNAUTHENTICATED=new gl(null),gl.GOOGLE_CREDENTIALS=new gl("google-credentials-uid"),gl.FIRST_PARTY=new gl("first-party-uid"),gl.MOCK_USER=new gl("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dy="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp=new R4("@firebase/firestore");function xb(){return vp.logLevel}function QCe(e){vp.setLogLevel(e)}function gr(e,...t){if(vp.logLevel<=Bn.DEBUG){const r=t.map(G8);vp.debug(`Firestore (${dy}): ${e}`,...r)}}function xA(e,...t){if(vp.logLevel<=Bn.ERROR){const r=t.map(G8);vp.error(`Firestore (${dy}): ${e}`,...r)}}function kx(e,...t){if(vp.logLevel<=Bn.WARN){const r=t.map(G8);vp.warn(`Firestore (${dy}): ${e}`,...r)}}function G8(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(e,t,r){let n="Unexpected state";typeof t=="string"?n=t:r=t,ise(e,n,r)}function ise(e,t,r){let n=`FIRESTORE (${dy}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw xA(n),new Error(n)}function ga(e,t,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,e||ise(t,a,n)}function on(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Zt extends Lf{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ose{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class lse{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(gl.UNAUTHENTICATED))}shutdown(){}}class VCe{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class $Ce{constructor(t){this.t=t,this.currentUser=gl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){ga(this.o===void 0,42304);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new nA;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new nA,t.enqueueRetryable(()=>a(this.currentUser))};const o=()=>{const c=s;t.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},l=c=>{gr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(gr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new nA)}},0),o()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==t?(gr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ga(typeof n.accessToken=="string",31837,{l:n}),new ose(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ga(t===null||typeof t=="string",2055,{h:t}),new gl(t)}}class zCe{constructor(t,r,n){this.P=t,this.T=r,this.I=n,this.type="FirstParty",this.user=gl.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class GCe{constructor(t,r,n){this.P=t,this.T=r,this.I=n}getToken(){return Promise.resolve(new zCe(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable(()=>r(gl.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pz{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qCe{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bu(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){ga(this.o===void 0,3512);const n=s=>{s.error!=null&&gr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,gr("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const a=s=>{gr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):gr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new pz(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(ga(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new pz(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KCe(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=KCe(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=t.charAt(a[s]%62))}return n}}function In(e,t){return e<t?-1:e>t?1:0}function nF(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const a=e.charAt(n),s=t.charAt(n);if(a!==s)return UI(a)===UI(s)?In(a,s):UI(a)?1:-1}return In(e.length,t.length)}const WCe=55296,XCe=57343;function UI(e){const t=e.charCodeAt(0);return t>=WCe&&t<=XCe}function N1(e,t,r){return e.length===t.length&&e.every((n,a)=>r(n,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gz="__name__";class Eh{constructor(t,r,n){r===void 0?r=0:r>t.length&&qr(637,{offset:r,range:t.length}),n===void 0?n=t.length-r:n>t.length-r&&qr(1746,{length:n,range:t.length-r}),this.segments=t,this.offset=r,this.len=n}get length(){return this.len}isEqual(t){return Eh.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof Eh?t.forEach(n=>{r.push(n)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,n=this.limit();r<n;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const n=Math.min(t.length,r.length);for(let a=0;a<n;a++){const s=Eh.compareSegments(t.get(a),r.get(a));if(s!==0)return s}return In(t.length,r.length)}static compareSegments(t,r){const n=Eh.isNumericId(t),a=Eh.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?Eh.extractNumericId(t).compare(Eh.extractNumericId(r)):nF(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return lp.fromString(t.substring(4,t.length-2))}}class Ua extends Eh{construct(t,r,n){return new Ua(t,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const n of t){if(n.indexOf("//")>=0)throw new Zt(Tt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new Ua(r)}static emptyPath(){return new Ua([])}}const YCe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ao extends Eh{construct(t,r,n){return new Ao(t,r,n)}static isValidIdentifier(t){return YCe.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ao.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gz}static keyField(){return new Ao([gz])}static fromServerFormat(t){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new Zt(Tt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;a<t.length;){const l=t[a];if(l==="\\"){if(a+1===t.length)throw new Zt(Tt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Zt(Tt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=c,a+=2}else l==="`"?(o=!o,a++):l!=="."||o?(n+=l,a++):(s(),a++)}if(s(),o)throw new Zt(Tt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ao(r)}static emptyPath(){return new Ao([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(t){this.path=t}static fromPath(t){return new jr(Ua.fromString(t))}static fromName(t){return new jr(Ua.fromString(t).popFirst(5))}static empty(){return new jr(Ua.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ua.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return Ua.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new jr(new Ua(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cse(e,t,r){if(!r)throw new Zt(Tt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function use(e,t,r,n){if(t===!0&&n===!0)throw new Zt(Tt.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function xz(e){if(!jr.isDocumentKey(e))throw new Zt(Tt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function vz(e){if(jr.isDocumentKey(e))throw new Zt(Tt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function dse(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function $4(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":qr(12329,{type:typeof e})}function Il(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Zt(Tt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=$4(e);throw new Zt(Tt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function JCe(e,t){if(t<=0)throw new Zt(Tt.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(e,t){const r={typeString:e};return t&&(r.value=t),r}function RC(e,t){if(!dse(e))throw new Zt(Tt.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in t)if(t[n]){const a=t[n].typeString,s="value"in t[n]?{value:t[n].value}:void 0;if(!(n in e)){r=`JSON missing required field: '${n}'`;break}const o=e[n];if(a&&typeof o!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&o!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new Zt(Tt.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bz=-62135596800,yz=1e6;class xr{static now(){return xr.fromMillis(Date.now())}static fromDate(t){return xr.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),n=Math.floor((t-1e3*r)*yz);return new xr(r,n)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Zt(Tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Zt(Tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<bz)throw new Zt(Tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Zt(Tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/yz}_compareTo(t){return this.seconds===t.seconds?In(this.nanoseconds,t.nanoseconds):In(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(RC(t,xr._jsonSchema))return new xr(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-bz;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xr._jsonSchemaVersion="firestore/timestamp/1.0",xr._jsonSchema={type:Fi("string",xr._jsonSchemaVersion),seconds:Fi("number"),nanoseconds:Fi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{static fromTimestamp(t){return new nn(t)}static min(){return new nn(new xr(0,0))}static max(){return new nn(new xr(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=-1;function ZCe(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,a=nn.fromTimestamp(n===1e9?new xr(r+1,0):new xr(r,n));return new bp(a,jr.empty(),t)}function eEe(e){return new bp(e.readTime,e.key,_N)}class bp{constructor(t,r,n){this.readTime=t,this.documentKey=r,this.largestBatchId=n}static min(){return new bp(nn.min(),jr.empty(),_N)}static max(){return new bp(nn.max(),jr.empty(),_N)}}function tEe(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=jr.comparator(e.documentKey,t.documentKey),r!==0?r:In(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rEe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nEe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fy(e){if(e.code!==Tt.FAILED_PRECONDITION||e.message!==rEe)throw e;gr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&qr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Vt((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Vt?r:Vt.resolve(r)}catch(r){return Vt.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Vt.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Vt.reject(r)}static resolve(t){return new Vt((r,n)=>{r(t)})}static reject(t){return new Vt((r,n)=>{n(t)})}static waitFor(t){return new Vt((r,n)=>{let a=0,s=0,o=!1;t.forEach(l=>{++a,l.next(()=>{++s,o&&s===a&&r()},c=>n(c))}),o=!0,s===a&&r()})}static or(t){let r=Vt.resolve(!1);for(const n of t)r=r.next(a=>a?Vt.resolve(a):n());return r}static forEach(t,r){const n=[];return t.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(t,r){return new Vt((n,a)=>{const s=t.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;r(t[u]).next(d=>{o[u]=d,++l,l===s&&n(o)},d=>a(d))}})}static doWhile(t,r){return new Vt((n,a)=>{const s=()=>{t()===!0?r().next(()=>{s()},a):n()};s()})}}function aEe(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function hy(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}z4.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q8=-1;function G4(e){return e==null}function b5(e){return e===0&&1/e==-1/0}function sEe(e){return typeof e=="number"&&Number.isInteger(e)&&!b5(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fse="";function iEe(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=wz(t)),t=oEe(e.get(r),t);return wz(t)}function oEe(e,t){let r=t;const n=e.length;for(let a=0;a<n;a++){const s=e.charAt(a);switch(s){case"\0":r+="";break;case fse:r+="";break;default:r+=s}}return r}function wz(e){return e+fse+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nz(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function Up(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function hse(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(t,r){this.comparator=t,this.root=r||Mo.EMPTY}insert(t,r){return new _s(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,Mo.BLACK,null,null))}remove(t){return new _s(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Mo.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(t,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(t){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(t,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,n)=>(t(r,n),!1))}toString(){const t=[];return this.inorderTraversal((r,n)=>(t.push(`${r}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Fj(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Fj(this.root,t,this.comparator,!1)}getReverseIterator(){return new Fj(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Fj(this.root,t,this.comparator,!0)}}class Fj{constructor(t,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=r?n(t.key,r):1,r&&a&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Mo{constructor(t,r,n,a,s){this.key=t,this.value=r,this.color=n??Mo.RED,this.left=a??Mo.EMPTY,this.right=s??Mo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,n,a,s){return new Mo(t??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let a=this;const s=n(t,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(t,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Mo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let n,a=this;if(r(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(t,a.key)===0){if(a.right.isEmpty())return Mo.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Mo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Mo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw qr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw qr(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw qr(27949);return t+(this.isRed()?0:1)}}Mo.EMPTY=null,Mo.RED=!0,Mo.BLACK=!1;Mo.EMPTY=new class{constructor(){this.size=0}get key(){throw qr(57766)}get value(){throw qr(16141)}get color(){throw qr(16727)}get left(){throw qr(29726)}get right(){throw qr(36894)}copy(t,r,n,a,s){return this}insert(t,r,n){return new Mo(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(t){this.comparator=t,this.data=new _s(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,n)=>(t(r),!1))}forEachInRange(t,r){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,t[1])>=0)return;r(a.key)}}forEachWhile(t,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new Cz(this.data.getIterator())}getIteratorFrom(t){return new Cz(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(n=>{r=r.add(n)}),r}isEqual(t){if(!(t instanceof zi)||this.size!==t.size)return!1;const r=this.data.getIterator(),n=t.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new zi(this.comparator);return r.data=t,r}}class Cz{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(t){this.fields=t,t.sort(Ao.comparator)}static empty(){return new ju([])}unionWith(t){let r=new zi(Ao.comparator);for(const n of this.fields)r=r.add(n);for(const n of t)r=r.add(n);return new ju(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return N1(this.fields,t.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ase extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ase("Invalid base64 string: "+s):s}}(t);return new vo(r)}static fromUint8Array(t){const r=function(a){let s="";for(let o=0;o<a.length;++o)s+=String.fromCharCode(a[o]);return s}(t);return new vo(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return In(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}vo.EMPTY_BYTE_STRING=new vo("");const lEe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yp(e){if(ga(!!e,39018),typeof e=="string"){let t=0;const r=lEe.exec(e);if(ga(!!r,46558,{timestamp:e}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),t=Number(a)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:fi(e.seconds),nanos:fi(e.nanos)}}function fi(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function wp(e){return typeof e=="string"?vo.fromBase64String(e):vo.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mse="server_timestamp",pse="__type__",gse="__previous_value__",xse="__local_write_time__";function q4(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[pse])==null?void 0:n.stringValue)===mse}function K4(e){const t=e.mapValue.fields[gse];return q4(t)?K4(t):t}function TN(e){const t=yp(e.mapValue.fields[xse].timestampValue);return new xr(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cEe{constructor(t,r,n,a,s,o,l,c,u,d){this.databaseId=t,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const y5="(default)";class C1{constructor(t,r){this.projectId=t,this.database=r||y5}static empty(){return new C1("","")}get isDefaultDatabase(){return this.database===y5}isEqual(t){return t instanceof C1&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vse="__type__",uEe="__max__",Rj={mapValue:{}},bse="__vector__",w5="value";function Np(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?q4(e)?4:fEe(e)?9007199254740991:dEe(e)?10:11:qr(28295,{value:e})}function t0(e,t){if(e===t)return!0;const r=Np(e);if(r!==Np(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return TN(e).isEqual(TN(t));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const o=yp(a.timestampValue),l=yp(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,s){return wp(a.bytesValue).isEqual(wp(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,s){return fi(a.geoPointValue.latitude)===fi(s.geoPointValue.latitude)&&fi(a.geoPointValue.longitude)===fi(s.geoPointValue.longitude)}(e,t);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return fi(a.integerValue)===fi(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const o=fi(a.doubleValue),l=fi(s.doubleValue);return o===l?b5(o)===b5(l):isNaN(o)&&isNaN(l)}return!1}(e,t);case 9:return N1(e.arrayValue.values||[],t.arrayValue.values||[],t0);case 10:case 11:return function(a,s){const o=a.mapValue.fields||{},l=s.mapValue.fields||{};if(Nz(o)!==Nz(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!t0(o[c],l[c])))return!1;return!0}(e,t);default:return qr(52216,{left:e})}}function BN(e,t){return(e.values||[]).find(r=>t0(r,t))!==void 0}function E1(e,t){if(e===t)return 0;const r=Np(e),n=Np(t);if(r!==n)return In(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return In(e.booleanValue,t.booleanValue);case 2:return function(s,o){const l=fi(s.integerValue||s.doubleValue),c=fi(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(e,t);case 3:return Ez(e.timestampValue,t.timestampValue);case 4:return Ez(TN(e),TN(t));case 5:return nF(e.stringValue,t.stringValue);case 6:return function(s,o){const l=wp(s),c=wp(o);return l.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=In(l[u],c[u]);if(d!==0)return d}return In(l.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const l=In(fi(s.latitude),fi(o.latitude));return l!==0?l:In(fi(s.longitude),fi(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return jz(e.arrayValue,t.arrayValue);case 10:return function(s,o){var A,m,g,x;const l=s.fields||{},c=o.fields||{},u=(A=l[w5])==null?void 0:A.arrayValue,d=(m=c[w5])==null?void 0:m.arrayValue,f=In(((g=u==null?void 0:u.values)==null?void 0:g.length)||0,((x=d==null?void 0:d.values)==null?void 0:x.length)||0);return f!==0?f:jz(u,d)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===Rj.mapValue&&o===Rj.mapValue)return 0;if(s===Rj.mapValue)return 1;if(o===Rj.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const A=nF(c[f],d[f]);if(A!==0)return A;const m=E1(l[c[f]],u[d[f]]);if(m!==0)return m}return In(c.length,d.length)}(e.mapValue,t.mapValue);default:throw qr(23264,{he:r})}}function Ez(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return In(e,t);const r=yp(e),n=yp(t),a=In(r.seconds,n.seconds);return a!==0?a:In(r.nanos,n.nanos)}function jz(e,t){const r=e.values||[],n=t.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=E1(r[a],n[a]);if(s)return s}return In(r.length,n.length)}function j1(e){return aF(e)}function aF(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const n=yp(r);return`time(${n.seconds},${n.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return wp(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return jr.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=aF(s);return n+"]"}(e.arrayValue):"mapValue"in e?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const o of n)s?s=!1:a+=",",a+=`${o}:${aF(r.fields[o])}`;return a+"}"}(e.mapValue):qr(61005,{value:e})}function CS(e){switch(Np(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=K4(e);return t?16+CS(t):16;case 5:return 2*e.stringValue.length;case 6:return wp(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+CS(s),0)}(e.arrayValue);case 10:case 11:return function(n){let a=0;return Up(n.fields,(s,o)=>{a+=s.length+CS(o)}),a}(e.mapValue);default:throw qr(13486,{value:e})}}function N5(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function sF(e){return!!e&&"integerValue"in e}function K8(e){return!!e&&"arrayValue"in e}function kz(e){return!!e&&"nullValue"in e}function Sz(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ES(e){return!!e&&"mapValue"in e}function dEe(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[vse])==null?void 0:n.stringValue)===bse}function Q2(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Up(e.mapValue.fields,(r,n)=>t.mapValue.fields[r]=Q2(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=Q2(e.arrayValue.values[r]);return t}return{...e}}function fEe(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===uEe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(t){this.value=t}static empty(){return new Ic({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let n=0;n<t.length-1;++n)if(r=(r.mapValue.fields||{})[t.get(n)],!ES(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=Q2(r)}setAll(t){let r=Ao.emptyPath(),n={},a=[];t.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=l.popLast()}o?n[l.lastSegment()]=Q2(o):a.push(l.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(t){const r=this.field(t.popLast());ES(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return t0(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<t.length;++n){let a=r.mapValue.fields[t.get(n)];ES(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[t.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(t,r,n){Up(r,(a,s)=>t[a]=s);for(const a of n)delete t[a]}clone(){return new Ic(Q2(this.value))}}function yse(e){const t=[];return Up(e.fields,(r,n)=>{const a=new Ao([r]);if(ES(n)){const s=yse(n.mapValue).fields;if(s.length===0)t.push(a);else for(const o of s)t.push(a.child(o))}else t.push(a)}),new ju(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(t,r,n,a,s,o,l){this.key=t,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(t){return new wl(t,0,nn.min(),nn.min(),nn.min(),Ic.empty(),0)}static newFoundDocument(t,r,n,a){return new wl(t,1,r,nn.min(),n,a,0)}static newNoDocument(t,r){return new wl(t,2,r,nn.min(),nn.min(),Ic.empty(),0)}static newUnknownDocument(t,r){return new wl(t,3,r,nn.min(),nn.min(),Ic.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(nn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ic.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ic.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof wl&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new wl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(t,r){this.position=t,this.inclusive=r}}function _z(e,t,r){let n=0;for(let a=0;a<e.position.length;a++){const s=t[a],o=e.position[a];if(s.field.isKeyField()?n=jr.comparator(jr.fromName(o.referenceValue),r.key):n=E1(o,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function Tz(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!t0(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(t,r="asc"){this.field=t,this.dir=r}}function hEe(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wse{}class Oi extends wse{constructor(t,r,n){super(),this.field=t,this.op=r,this.value=n}static create(t,r,n){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,n):new mEe(t,r,n):r==="array-contains"?new xEe(t,n):r==="in"?new vEe(t,n):r==="not-in"?new bEe(t,n):r==="array-contains-any"?new yEe(t,n):new Oi(t,r,n)}static createKeyFieldInFilter(t,r,n){return r==="in"?new pEe(t,n):new gEe(t,n)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(E1(r,this.value)):r!==null&&Np(this.value)===Np(r)&&this.matchesComparison(E1(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return qr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Df extends wse{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new Df(t,r)}matches(t){return Nse(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Nse(e){return e.op==="and"}function Cse(e){return AEe(e)&&Nse(e)}function AEe(e){for(const t of e.filters)if(t instanceof Df)return!1;return!0}function iF(e){if(e instanceof Oi)return e.field.canonicalString()+e.op.toString()+j1(e.value);if(Cse(e))return e.filters.map(t=>iF(t)).join(",");{const t=e.filters.map(r=>iF(r)).join(",");return`${e.op}(${t})`}}function Ese(e,t){return e instanceof Oi?function(n,a){return a instanceof Oi&&n.op===a.op&&n.field.isEqual(a.field)&&t0(n.value,a.value)}(e,t):e instanceof Df?function(n,a){return a instanceof Df&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,o,l)=>s&&Ese(o,a.filters[l]),!0):!1}(e,t):void qr(19439)}function jse(e){return e instanceof Oi?function(r){return`${r.field.canonicalString()} ${r.op} ${j1(r.value)}`}(e):e instanceof Df?function(r){return r.op.toString()+" {"+r.getFilters().map(jse).join(" ,")+"}"}(e):"Filter"}class mEe extends Oi{constructor(t,r,n){super(t,r,n),this.key=jr.fromName(n.referenceValue)}matches(t){const r=jr.comparator(t.key,this.key);return this.matchesComparison(r)}}class pEe extends Oi{constructor(t,r){super(t,"in",r),this.keys=kse("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class gEe extends Oi{constructor(t,r){super(t,"not-in",r),this.keys=kse("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function kse(e,t){var r;return(((r=t.arrayValue)==null?void 0:r.values)||[]).map(n=>jr.fromName(n.referenceValue))}class xEe extends Oi{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return K8(r)&&BN(r.arrayValue,this.value)}}class vEe extends Oi{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&BN(this.value.arrayValue,r)}}class bEe extends Oi{constructor(t,r){super(t,"not-in",r)}matches(t){if(BN(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!BN(this.value.arrayValue,r)}}class yEe extends Oi{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!K8(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>BN(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wEe{constructor(t,r=null,n=[],a=[],s=null,o=null,l=null){this.path=t,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function Bz(e,t=null,r=[],n=[],a=null,s=null,o=null){return new wEe(e,t,r,n,a,s,o)}function W8(e){const t=on(e);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(n=>iF(n)).join(","),r+="|ob:",r+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),G4(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(n=>j1(n)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(n=>j1(n)).join(",")),t.Te=r}return t.Te}function X8(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!hEe(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!Ese(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Tz(e.startAt,t.startAt)&&Tz(e.endAt,t.endAt)}function oF(e){return jr.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(t,r=null,n=[],a=[],s=null,o="F",l=null,c=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function NEe(e,t,r,n,a,s,o,l){return new Kx(e,t,r,n,a,s,o,l)}function W4(e){return new Kx(e)}function Iz(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Y8(e){return e.collectionGroup!==null}function Jb(e){const t=on(e);if(t.Ie===null){t.Ie=[];const r=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),r.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new zi(Ao.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(t).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new IN(s,n))}),r.has(Ao.keyField().canonicalString())||t.Ie.push(new IN(Ao.keyField(),n))}return t.Ie}function $h(e){const t=on(e);return t.Ee||(t.Ee=CEe(t,Jb(e))),t.Ee}function CEe(e,t){if(e.limitType==="F")return Bz(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new IN(a.field,s)});const r=e.endAt?new k1(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new k1(e.startAt.position,e.startAt.inclusive):null;return Bz(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function lF(e,t){const r=e.filters.concat([t]);return new Kx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function C5(e,t,r){return new Kx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function X4(e,t){return X8($h(e),$h(t))&&e.limitType===t.limitType}function Sse(e){return`${W8($h(e))}|lt:${e.limitType}`}function vb(e){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>jse(a)).join(", ")}]`),G4(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>j1(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>j1(a)).join(",")),`Target(${n})`}($h(e))}; limitType=${e.limitType})`}function Y4(e,t){return t.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):jr.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(e,t)&&function(n,a){for(const s of Jb(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(e,t)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(e,t)&&function(n,a){return!(n.startAt&&!function(o,l,c){const u=_z(o,l,c);return o.inclusive?u<=0:u<0}(n.startAt,Jb(n),a)||n.endAt&&!function(o,l,c){const u=_z(o,l,c);return o.inclusive?u>=0:u>0}(n.endAt,Jb(n),a))}(e,t)}function EEe(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function _se(e){return(t,r)=>{let n=!1;for(const a of Jb(e)){const s=jEe(a,t,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function jEe(e,t,r){const n=e.field.isKeyField()?jr.comparator(t.key,r.key):function(s,o,l){const c=o.data.field(s),u=l.data.field(s);return c!==null&&u!==null?E1(c,u):qr(42886)}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return qr(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,t))return s}}has(t){return this.get(t)!==void 0}set(t,r){const n=this.mapKeyFn(t),a=this.inner[n];if(a===void 0)return this.inner[n]=[[t,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],t))return void(a[s]=[t,r]);a.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],t))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(t){Up(this.inner,(r,n)=>{for(const[a,s]of n)t(a,s)})}isEmpty(){return hse(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kEe=new _s(jr.comparator);function vA(){return kEe}const Tse=new _s(jr.comparator);function p2(...e){let t=Tse;for(const r of e)t=t.insert(r.key,r);return t}function Bse(e){let t=Tse;return e.forEach((r,n)=>t=t.insert(r,n.overlayedDocument)),t}function qg(){return V2()}function Ise(){return V2()}function V2(){return new Wx(e=>e.toString(),(e,t)=>e.isEqual(t))}const SEe=new _s(jr.comparator),_Ee=new zi(jr.comparator);function Dn(...e){let t=_Ee;for(const r of e)t=t.add(r);return t}const TEe=new zi(In);function BEe(){return TEe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J8(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:b5(t)?"-0":t}}function Dse(e){return{integerValue:""+e}}function IEe(e,t){return sEe(t)?Dse(t):J8(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(){this._=void 0}}function DEe(e,t,r){return e instanceof DN?function(a,s){const o={fields:{[pse]:{stringValue:mse},[xse]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&q4(s)&&(s=K4(s)),s&&(o.fields[gse]=s),{mapValue:o}}(r,t):e instanceof ON?Pse(e,t):e instanceof PN?Fse(e,t):function(a,s){const o=Ose(a,s),l=Dz(o)+Dz(a.Ae);return sF(o)&&sF(a.Ae)?Dse(l):J8(a.serializer,l)}(e,t)}function OEe(e,t,r){return e instanceof ON?Pse(e,t):e instanceof PN?Fse(e,t):r}function Ose(e,t){return e instanceof E5?function(n){return sF(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class DN extends J4{}class ON extends J4{constructor(t){super(),this.elements=t}}function Pse(e,t){const r=Rse(t);for(const n of e.elements)r.some(a=>t0(a,n))||r.push(n);return{arrayValue:{values:r}}}class PN extends J4{constructor(t){super(),this.elements=t}}function Fse(e,t){let r=Rse(t);for(const n of e.elements)r=r.filter(a=>!t0(a,n));return{arrayValue:{values:r}}}class E5 extends J4{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function Dz(e){return fi(e.integerValue||e.doubleValue)}function Rse(e){return K8(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PEe{constructor(t,r){this.field=t,this.transform=r}}function FEe(e,t){return e.field.isEqual(t.field)&&function(n,a){return n instanceof ON&&a instanceof ON||n instanceof PN&&a instanceof PN?N1(n.elements,a.elements,t0):n instanceof E5&&a instanceof E5?t0(n.Ae,a.Ae):n instanceof DN&&a instanceof DN}(e.transform,t.transform)}class REe{constructor(t,r){this.version=t,this.transformResults=r}}class rc{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new rc}static exists(t){return new rc(void 0,t)}static updateTime(t){return new rc(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function jS(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Z4{}function Lse(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new e3(e.key,rc.none()):new LC(e.key,e.data,rc.none());{const r=e.data,n=Ic.empty();let a=new zi(Ao.comparator);for(let s of t.fields)if(!a.has(s)){let o=r.field(s);o===null&&s.length>1&&(s=s.popLast(),o=r.field(s)),o===null?n.delete(s):n.set(s,o),a=a.add(s)}return new Hp(e.key,n,new ju(a.toArray()),rc.none())}}function LEe(e,t,r){e instanceof LC?function(a,s,o){const l=a.value.clone(),c=Pz(a.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,r):e instanceof Hp?function(a,s,o){if(!jS(a.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Pz(a.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(Mse(a)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(e,t,r):function(a,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,r)}function $2(e,t,r,n){return e instanceof LC?function(s,o,l,c){if(!jS(s.precondition,o))return l;const u=s.value.clone(),d=Fz(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(e,t,r,n):e instanceof Hp?function(s,o,l,c){if(!jS(s.precondition,o))return l;const u=Fz(s.fieldTransforms,c,o),d=o.data;return d.setAll(Mse(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,r,n):function(s,o,l){return jS(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(e,t,r)}function MEe(e,t){let r=null;for(const n of e.fieldTransforms){const a=t.data.field(n.field),s=Ose(n.transform,a||null);s!=null&&(r===null&&(r=Ic.empty()),r.set(n.field,s))}return r||null}function Oz(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&N1(n,a,(s,o)=>FEe(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class LC extends Z4{constructor(t,r,n,a=[]){super(),this.key=t,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Hp extends Z4{constructor(t,r,n,a,s=[]){super(),this.key=t,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Mse(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}}),t}function Pz(e,t,r){const n=new Map;ga(e.length===r.length,32656,{Re:r.length,Ve:e.length});for(let a=0;a<r.length;a++){const s=e[a],o=s.transform,l=t.data.field(s.field);n.set(s.field,OEe(o,l,r[a]))}return n}function Fz(e,t,r){const n=new Map;for(const a of e){const s=a.transform,o=r.data.field(a.field);n.set(a.field,DEe(s,o,t))}return n}class e3 extends Z4{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UEe extends Z4{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HEe{constructor(t,r,n,a){this.batchId=t,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(t,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(t.key)&&LEe(s,t,n[a])}}applyToLocalView(t,r){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(r=$2(n,t,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(r=$2(n,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const n=Ise();return this.mutations.forEach(a=>{const s=t.get(a.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=r.has(a.key)?null:l;const c=Lse(o,l);c!==null&&n.set(a.key,c),o.isValidDocument()||o.convertToNoDocument(nn.min())}),n}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Dn())}isEqual(t){return this.batchId===t.batchId&&N1(this.mutations,t.mutations,(r,n)=>Oz(r,n))&&N1(this.baseMutations,t.baseMutations,(r,n)=>Oz(r,n))}}class Z8{constructor(t,r,n,a){this.batch=t,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(t,r,n){ga(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let a=function(){return SEe}();const s=t.mutations;for(let o=0;o<s.length;o++)a=a.insert(s[o].key,n[o].version);return new Z8(t,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QEe{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VEe{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Si,Qn;function $Ee(e){switch(e){case Tt.OK:return qr(64938);case Tt.CANCELLED:case Tt.UNKNOWN:case Tt.DEADLINE_EXCEEDED:case Tt.RESOURCE_EXHAUSTED:case Tt.INTERNAL:case Tt.UNAVAILABLE:case Tt.UNAUTHENTICATED:return!1;case Tt.INVALID_ARGUMENT:case Tt.NOT_FOUND:case Tt.ALREADY_EXISTS:case Tt.PERMISSION_DENIED:case Tt.FAILED_PRECONDITION:case Tt.ABORTED:case Tt.OUT_OF_RANGE:case Tt.UNIMPLEMENTED:case Tt.DATA_LOSS:return!0;default:return qr(15467,{code:e})}}function Use(e){if(e===void 0)return xA("GRPC error has no .code"),Tt.UNKNOWN;switch(e){case Si.OK:return Tt.OK;case Si.CANCELLED:return Tt.CANCELLED;case Si.UNKNOWN:return Tt.UNKNOWN;case Si.DEADLINE_EXCEEDED:return Tt.DEADLINE_EXCEEDED;case Si.RESOURCE_EXHAUSTED:return Tt.RESOURCE_EXHAUSTED;case Si.INTERNAL:return Tt.INTERNAL;case Si.UNAVAILABLE:return Tt.UNAVAILABLE;case Si.UNAUTHENTICATED:return Tt.UNAUTHENTICATED;case Si.INVALID_ARGUMENT:return Tt.INVALID_ARGUMENT;case Si.NOT_FOUND:return Tt.NOT_FOUND;case Si.ALREADY_EXISTS:return Tt.ALREADY_EXISTS;case Si.PERMISSION_DENIED:return Tt.PERMISSION_DENIED;case Si.FAILED_PRECONDITION:return Tt.FAILED_PRECONDITION;case Si.ABORTED:return Tt.ABORTED;case Si.OUT_OF_RANGE:return Tt.OUT_OF_RANGE;case Si.UNIMPLEMENTED:return Tt.UNIMPLEMENTED;case Si.DATA_LOSS:return Tt.DATA_LOSS;default:return qr(39323,{code:e})}}(Qn=Si||(Si={}))[Qn.OK=0]="OK",Qn[Qn.CANCELLED=1]="CANCELLED",Qn[Qn.UNKNOWN=2]="UNKNOWN",Qn[Qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qn[Qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qn[Qn.NOT_FOUND=5]="NOT_FOUND",Qn[Qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qn[Qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qn[Qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qn[Qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qn[Qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qn[Qn.ABORTED=10]="ABORTED",Qn[Qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qn[Qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qn[Qn.INTERNAL=13]="INTERNAL",Qn[Qn.UNAVAILABLE=14]="UNAVAILABLE",Qn[Qn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zEe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GEe=new lp([4294967295,4294967295],0);function Rz(e){const t=zEe().encode(e),r=new ese;return r.update(t),new Uint8Array(r.digest())}function Lz(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),a=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new lp([r,n],0),new lp([a,s],0)]}class eM{constructor(t,r,n){if(this.bitmap=t,this.padding=r,this.hashCount=n,r<0||r>=8)throw new g2(`Invalid padding: ${r}`);if(n<0)throw new g2(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new g2(`Invalid hash count: ${n}`);if(t.length===0&&r!==0)throw new g2(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=lp.fromNumber(this.ge)}ye(t,r,n){let a=t.add(r.multiply(lp.fromNumber(n)));return a.compare(GEe)===1&&(a=new lp([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=Rz(t),[n,a]=Lz(r);for(let s=0;s<this.hashCount;s++){const o=this.ye(n,a,s);if(!this.we(o))return!1}return!0}static create(t,r,n){const a=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new eM(s,a,r);return n.forEach(l=>o.insert(l)),o}insert(t){if(this.ge===0)return;const r=Rz(t),[n,a]=Lz(r);for(let s=0;s<this.hashCount;s++){const o=this.ye(n,a,s);this.Se(o)}}Se(t){const r=Math.floor(t/8),n=t%8;this.bitmap[r]|=1<<n}}class g2 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(t,r,n,a,s){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,r,n){const a=new Map;return a.set(t,MC.createSynthesizedTargetChangeForCurrentChange(t,r,n)),new t3(nn.min(),a,new _s(In),vA(),Dn())}}class MC{constructor(t,r,n,a,s){this.resumeToken=t,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,r,n){return new MC(n,r,Dn(),Dn(),Dn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(t,r,n,a){this.be=t,this.removedTargetIds=r,this.key=n,this.De=a}}class Hse{constructor(t,r){this.targetId=t,this.Ce=r}}class Qse{constructor(t,r,n=vo.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=r,this.resumeToken=n,this.cause=a}}class Mz{constructor(){this.ve=0,this.Fe=Uz(),this.Me=vo.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Dn(),r=Dn(),n=Dn();return this.Fe.forEach((a,s)=>{switch(s){case 0:t=t.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:qr(38017,{changeType:s})}}),new MC(this.Me,this.xe,t,r,n)}qe(){this.Oe=!1,this.Fe=Uz()}Qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ga(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class qEe{constructor(t){this.Ge=t,this.ze=new Map,this.je=vA(),this.Je=Lj(),this.He=Lj(),this.Ye=new _s(In)}Ze(t){for(const r of t.be)t.De&&t.De.isFoundDocument()?this.Xe(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,r=>{const n=this.nt(r);switch(t.state){case 0:this.rt(r)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(t.resumeToken));break;default:qr(56790,{state:t.state})}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(t){const r=t.targetId,n=t.Ce.count,a=this.ot(r);if(a){const s=a.target;if(oF(s))if(n===0){const o=new jr(s.path);this.et(r,o,wl.newNoDocument(o,nn.min()))}else ga(n===1,20013,{expectedCount:n});else{const o=this._t(r);if(o!==n){const l=this.ut(t),c=l?this.ct(l,t,o):1;if(c!==0){this.it(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let o,l;try{o=wp(n).toUint8Array()}catch(c){if(c instanceof Ase)return kx("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new eM(o,a,s)}catch(c){return kx(c instanceof g2?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(t,r,n){return r.Ce.count===n-this.Pt(t,r.targetId)?0:2}Pt(t,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.et(r,s,null),a++)}),a}Tt(t){const r=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&oF(l.target)){const c=new jr(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,wl.newNoDocument(c,t))}s.Be&&(r.set(o,s.ke()),s.qe())}});let n=Dn();this.He.forEach((s,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.je.forEach((s,o)=>o.setReadTime(t));const a=new t3(t,r,this.Ye,this.je,n);return this.je=vA(),this.Je=Lj(),this.He=Lj(),this.Ye=new _s(In),a}Xe(t,r){if(!this.rt(t))return;const n=this.Et(t,r.key)?2:0;this.nt(t).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(t)),this.He=this.He.insert(r.key,this.dt(r.key).add(t))}et(t,r,n){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(t)),this.He=this.He.insert(r,this.dt(r).add(t)),n&&(this.je=this.je.insert(r,n))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let r=this.ze.get(t);return r||(r=new Mz,this.ze.set(t,r)),r}dt(t){let r=this.He.get(t);return r||(r=new zi(In),this.He=this.He.insert(t,r)),r}It(t){let r=this.Je.get(t);return r||(r=new zi(In),this.Je=this.Je.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||gr("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Mz),this.Ge.getRemoteKeysForTarget(t).forEach(r=>{this.et(t,r,null)})}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function Lj(){return new _s(jr.comparator)}function Uz(){return new _s(jr.comparator)}const KEe={asc:"ASCENDING",desc:"DESCENDING"},WEe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XEe={and:"AND",or:"OR"};class YEe{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function cF(e,t){return e.useProto3Json||G4(t)?t:{value:t}}function j5(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Vse(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function JEe(e,t){return j5(e,t.toTimestamp())}function zh(e){return ga(!!e,49232),nn.fromTimestamp(function(r){const n=yp(r);return new xr(n.seconds,n.nanos)}(e))}function tM(e,t){return uF(e,t).canonicalString()}function uF(e,t){const r=function(a){return new Ua(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?r:r.child(t)}function $se(e){const t=Ua.fromString(e);return ga(Wse(t),10190,{key:t.toString()}),t}function dF(e,t){return tM(e.databaseId,t.path)}function HI(e,t){const r=$se(t);if(r.get(1)!==e.databaseId.projectId)throw new Zt(Tt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new Zt(Tt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new jr(Gse(r))}function zse(e,t){return tM(e.databaseId,t)}function ZEe(e){const t=$se(e);return t.length===4?Ua.emptyPath():Gse(t)}function fF(e){return new Ua(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Gse(e){return ga(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function Hz(e,t,r){return{name:dF(e,t),fields:r.value.mapValue.fields}}function eje(e,t){let r;if("targetChange"in t){t.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:qr(39313,{state:u})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(ga(d===void 0||typeof d=="string",58123),vo.fromBase64String(d||"")):(ga(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),vo.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(u){const d=u.code===void 0?Tt.UNKNOWN:Use(u.code);return new Zt(d,u.message||"")}(o);r=new Qse(n,a,s,l||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const a=HI(e,n.document.name),s=zh(n.document.updateTime),o=n.document.createTime?zh(n.document.createTime):nn.min(),l=new Ic({mapValue:{fields:n.document.fields}}),c=wl.newFoundDocument(a,s,o,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new kS(u,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const a=HI(e,n.document),s=n.readTime?zh(n.readTime):nn.min(),o=wl.newNoDocument(a,s),l=n.removedTargetIds||[];r=new kS([],l,o.key,o)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const a=HI(e,n.document),s=n.removedTargetIds||[];r=new kS([],s,a,null)}else{if(!("filter"in t))return qr(11601,{Rt:t});{t.filter;const n=t.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,o=new VEe(a,s),l=n.targetId;r=new Hse(l,o)}}return r}function tje(e,t){let r;if(t instanceof LC)r={update:Hz(e,t.key,t.value)};else if(t instanceof e3)r={delete:dF(e,t.key)};else if(t instanceof Hp)r={update:Hz(e,t.key,t.data),updateMask:uje(t.fieldMask)};else{if(!(t instanceof UEe))return qr(16599,{Vt:t.type});r={verify:dF(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(n=>function(s,o){const l=o.transform;if(l instanceof DN)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ON)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof PN)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof E5)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw qr(20930,{transform:o.transform})}(0,n))),t.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:JEe(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:qr(27497)}(e,t.precondition)),r}function rje(e,t){return e&&e.length>0?(ga(t!==void 0,14353),e.map(r=>function(a,s){let o=a.updateTime?zh(a.updateTime):zh(s);return o.isEqual(nn.min())&&(o=zh(s)),new REe(o,a.transformResults||[])}(r,t))):[]}function nje(e,t){return{documents:[zse(e,t.path)]}}function aje(e,t){const r={structuredQuery:{}},n=t.path;let a;t.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=zse(e,a);const s=function(u){if(u.length!==0)return Kse(Df.create(u,"and"))}(t.filters);s&&(r.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(A){return{field:bb(A.field),direction:oje(A.dir)}}(d))}(t.orderBy);o&&(r.structuredQuery.orderBy=o);const l=cF(e,t.limit);return l!==null&&(r.structuredQuery.limit=l),t.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ft:r,parent:a}}function sje(e){let t=ZEe(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){ga(n===1,65062);const d=r.from[0];d.allDescendants?a=d.collectionId:t=t.child(d.collectionId)}let s=[];r.where&&(s=function(f){const A=qse(f);return A instanceof Df&&Cse(A)?A.getFilters():[A]}(r.where));let o=[];r.orderBy&&(o=function(f){return f.map(A=>function(g){return new IN(yb(g.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(A))}(r.orderBy));let l=null;r.limit&&(l=function(f){let A;return A=typeof f=="object"?f.value:f,G4(A)?null:A}(r.limit));let c=null;r.startAt&&(c=function(f){const A=!!f.before,m=f.values||[];return new k1(m,A)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const A=!f.before,m=f.values||[];return new k1(m,A)}(r.endAt)),NEe(t,a,o,s,l,"F",c,u)}function ije(e,t){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qr(28987,{purpose:a})}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function qse(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=yb(r.unaryFilter.field);return Oi.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=yb(r.unaryFilter.field);return Oi.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=yb(r.unaryFilter.field);return Oi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=yb(r.unaryFilter.field);return Oi.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return qr(61313);default:return qr(60726)}}(e):e.fieldFilter!==void 0?function(r){return Oi.create(yb(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return qr(58110);default:return qr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return Df.create(r.compositeFilter.filters.map(n=>qse(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return qr(1026)}}(r.compositeFilter.op))}(e):qr(30097,{filter:e})}function oje(e){return KEe[e]}function lje(e){return WEe[e]}function cje(e){return XEe[e]}function bb(e){return{fieldPath:e.canonicalString()}}function yb(e){return Ao.fromServerFormat(e.fieldPath)}function Kse(e){return e instanceof Oi?function(r){if(r.op==="=="){if(Sz(r.value))return{unaryFilter:{field:bb(r.field),op:"IS_NAN"}};if(kz(r.value))return{unaryFilter:{field:bb(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Sz(r.value))return{unaryFilter:{field:bb(r.field),op:"IS_NOT_NAN"}};if(kz(r.value))return{unaryFilter:{field:bb(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bb(r.field),op:lje(r.op),value:r.value}}}(e):e instanceof Df?function(r){const n=r.getFilters().map(a=>Kse(a));return n.length===1?n[0]:{compositeFilter:{op:cje(r.op),filters:n}}}(e):qr(54877,{filter:e})}function uje(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function Wse(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(t,r,n,a,s=nn.min(),o=nn.min(),l=vo.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new Jm(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new Jm(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Jm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Jm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dje{constructor(t){this.yt=t}}function fje(e){const t=sje({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?C5(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hje{constructor(){this.Cn=new Aje}addToCollectionParentIndex(t,r){return this.Cn.add(r),Vt.resolve()}getCollectionParents(t,r){return Vt.resolve(this.Cn.getEntries(r))}addFieldIndex(t,r){return Vt.resolve()}deleteFieldIndex(t,r){return Vt.resolve()}deleteAllFieldIndexes(t){return Vt.resolve()}createTargetIndexes(t,r){return Vt.resolve()}getDocumentsMatchingTarget(t,r){return Vt.resolve(null)}getIndexType(t,r){return Vt.resolve(0)}getFieldIndexes(t,r){return Vt.resolve([])}getNextCollectionGroupToUpdate(t){return Vt.resolve(null)}getMinOffset(t,r){return Vt.resolve(bp.min())}getMinOffsetFromCollectionGroup(t,r){return Vt.resolve(bp.min())}updateCollectionGroup(t,r,n){return Vt.resolve()}updateIndexEntries(t,r){return Vt.resolve()}}class Aje{constructor(){this.index={}}add(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r]||new zi(Ua.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(t){return(this.index[t]||new zi(Ua.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qz={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xse=41943040;class kc{static withCacheSize(t){return new kc(t,kc.DEFAULT_COLLECTION_PERCENTILE,kc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kc.DEFAULT_COLLECTION_PERCENTILE=10,kc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kc.DEFAULT=new kc(Xse,kc.DEFAULT_COLLECTION_PERCENTILE,kc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kc.DISABLED=new kc(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new S1(0)}static cr(){return new S1(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vz="LruGarbageCollector",mje=1048576;function $z([e,t],[r,n]){const a=In(e,r);return a===0?In(t,n):a}class pje{constructor(t){this.Ir=t,this.buffer=new zi($z),this.Er=0}dr(){return++this.Er}Ar(t){const r=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();$z(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class gje{constructor(t,r,n){this.garbageCollector=t,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){gr(Vz,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){hy(r)?gr(Vz,"Ignoring IndexedDB error during garbage collection: ",r):await fy(r)}await this.Vr(3e5)})}}class xje{constructor(t,r){this.mr=t,this.params=r}calculateTargetCount(t,r){return this.mr.gr(t).next(n=>Math.floor(r/100*n))}nthSequenceNumber(t,r){if(r===0)return Vt.resolve(z4.ce);const n=new pje(r);return this.mr.forEachTarget(t,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(t,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(t,r,n){return this.mr.removeTargets(t,r,n)}removeOrphanedDocuments(t,r){return this.mr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(gr("LruGarbageCollector","Garbage collection skipped; disabled"),Vt.resolve(Qz)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(gr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qz):this.yr(t,r))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,r){let n,a,s,o,l,c,u;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(gr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,o=Date.now(),this.nthSequenceNumber(t,a))).next(f=>(n=f,l=Date.now(),this.removeTargets(t,n,r))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(t,n))).next(f=>(u=Date.now(),xb()<=Bn.DEBUG&&gr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${a} in `+(l-o)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Vt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function vje(e,t){return new xje(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bje{constructor(){this.changes=new Wx(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,wl.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Vt.resolve(n):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yje{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wje{constructor(t,r,n,a){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(t,r){let n=null;return this.documentOverlayCache.getOverlay(t,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(t,r))).next(a=>(n!==null&&$2(n.mutation,a,ju.empty(),xr.now()),a))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.getLocalViewOfDocuments(t,n,Dn()).next(()=>n))}getLocalViewOfDocuments(t,r,n=Dn()){const a=qg();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,n).next(s=>{let o=p2();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,r){const n=qg();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,Dn()))}populateOverlays(t,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(t,a).next(s=>{s.forEach((o,l)=>{r.set(o,l)})})}computeViews(t,r,n,a){let s=vA();const o=V2(),l=function(){return V2()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof Hp)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),$2(d.mutation,u,d.mutation.getFieldMask(),xr.now())):o.set(u.key,ju.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),r.forEach((u,d)=>l.set(u,new yje(d,o.get(u)??null))),l))}recalculateAndSaveOverlays(t,r){const n=V2();let a=new _s((o,l)=>o-l),s=Dn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||ju.empty();d=l.applyToLocalView(u,d),n.set(c,d);const f=(a.get(l.batchId)||Dn()).add(c);a=a.insert(l.batchId,f)})}).next(()=>{const o=[],l=a.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=Ise();d.forEach(A=>{if(!s.has(A)){const m=Lse(r.get(A),n.get(A));m!==null&&f.set(A,m),s=s.add(A)}}),o.push(this.documentOverlayCache.saveOverlays(t,u,f))}return Vt.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,r,n,a){return function(o){return jr.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):Y8(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,n,a):this.getDocumentsMatchingCollectionQuery(t,r,n,a)}getNextDocuments(t,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,n,a).next(s=>{const o=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,n.largestBatchId,a-s.size):Vt.resolve(qg());let l=_N,c=s;return o.next(u=>Vt.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),s.get(d)?Vt.resolve():this.remoteDocumentCache.getEntry(t,d).next(A=>{c=c.insert(d,A)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,c,u,Dn())).next(d=>({batchId:l,changes:Bse(d)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new jr(r)).next(n=>{let a=p2();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(t,r,n,a){const s=r.collectionGroup;let o=p2();return this.indexManager.getCollectionParents(t,s).next(l=>Vt.forEach(l,c=>{const u=function(f,A){return new Kx(A,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,n,a).next(d=>{d.forEach((f,A)=>{o=o.insert(f,A)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,n,s,a))).next(o=>{s.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,wl.newInvalidDocument(d)))});let l=p2();return o.forEach((c,u)=>{const d=s.get(c);d!==void 0&&$2(d.mutation,u,ju.empty(),xr.now()),Y4(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nje{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,r){return Vt.resolve(this.Lr.get(r))}saveBundleMetadata(t,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:zh(a.createTime)}}(r)),Vt.resolve()}getNamedQuery(t,r){return Vt.resolve(this.kr.get(r))}saveNamedQuery(t,r){return this.kr.set(r.name,function(a){return{name:a.name,query:fje(a.bundledQuery),readTime:zh(a.readTime)}}(r)),Vt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cje{constructor(){this.overlays=new _s(jr.comparator),this.qr=new Map}getOverlay(t,r){return Vt.resolve(this.overlays.get(r))}getOverlays(t,r){const n=qg();return Vt.forEach(r,a=>this.getOverlay(t,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(t,r,n){return n.forEach((a,s)=>{this.St(t,r,s)}),Vt.resolve()}removeOverlaysForBatchId(t,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),Vt.resolve()}getOverlaysForCollection(t,r,n){const a=qg(),s=r.length+1,o=new jr(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return Vt.resolve(a)}getOverlaysForCollectionGroup(t,r,n,a){let s=new _s((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=qg(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=qg(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=a)););return Vt.resolve(l)}St(t,r,n){const a=this.overlays.get(n.key);if(a!==null){const o=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new QEe(r,n));let s=this.qr.get(r);s===void 0&&(s=Dn(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eje{constructor(){this.sessionToken=vo.EMPTY_BYTE_STRING}getSessionToken(t){return Vt.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Vt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(){this.Qr=new zi(co.$r),this.Ur=new zi(co.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,r){const n=new co(t,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,r){t.forEach(n=>this.addReference(n,r))}removeReference(t,r){this.Gr(new co(t,r))}zr(t,r){t.forEach(n=>this.removeReference(n,r))}jr(t){const r=new jr(new Ua([])),n=new co(r,t),a=new co(r,t+1),s=[];return this.Ur.forEachInRange([n,a],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const r=new jr(new Ua([])),n=new co(r,t),a=new co(r,t+1);let s=Dn();return this.Ur.forEachInRange([n,a],o=>{s=s.add(o.key)}),s}containsKey(t){const r=new co(t,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&t.isEqual(n.key)}}class co{constructor(t,r){this.key=t,this.Yr=r}static $r(t,r){return jr.comparator(t.key,r.key)||In(t.Yr,r.Yr)}static Kr(t,r){return In(t.Yr,r.Yr)||jr.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jje{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new zi(co.$r)}checkEmpty(t){return Vt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,n,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new HEe(s,r,n,a);this.mutationQueue.push(o);for(const l of a)this.Zr=this.Zr.add(new co(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return Vt.resolve(o)}lookupMutationBatch(t,r){return Vt.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(t,r){const n=r+1,a=this.ei(n),s=a<0?0:a;return Vt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Vt.resolve(this.mutationQueue.length===0?q8:this.tr-1)}getAllMutationBatches(t){return Vt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const n=new co(r,0),a=new co(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,a],o=>{const l=this.Xr(o.Yr);s.push(l)}),Vt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,r){let n=new zi(In);return r.forEach(a=>{const s=new co(a,0),o=new co(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],l=>{n=n.add(l.Yr)})}),Vt.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,r){const n=r.path,a=n.length+1;let s=n;jr.isDocumentKey(s)||(s=s.child(""));const o=new co(new jr(s),0);let l=new zi(In);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(l=l.add(c.Yr)),!0)},o),Vt.resolve(this.ti(l))}ti(t){const r=[];return t.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(t,r){ga(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Vt.forEach(r.mutations,a=>{const s=new co(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Zr=n})}ir(t){}containsKey(t,r){const n=new co(r,0),a=this.Zr.firstAfterOrEqual(n);return Vt.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,Vt.resolve()}ni(t,r){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const r=this.ei(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kje{constructor(t){this.ri=t,this.docs=function(){return new _s(jr.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,o=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const n=this.docs.get(r);return Vt.resolve(n?n.document.mutableCopy():wl.newInvalidDocument(r))}getEntries(t,r){let n=vA();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():wl.newInvalidDocument(a))}),Vt.resolve(n)}getDocumentsMatchingQuery(t,r,n,a){let s=vA();const o=r.path,l=new jr(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||tEe(eEe(d),n)<=0||(a.has(d.key)||Y4(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Vt.resolve(s)}getAllFromCollectionGroup(t,r,n,a){qr(9500)}ii(t,r){return Vt.forEach(this.docs,n=>r(n))}newChangeBuffer(t){return new Sje(this)}getSize(t){return Vt.resolve(this.size)}}class Sje extends bje{constructor(t){super(),this.Nr=t}applyChanges(t){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(n)}),Vt.waitFor(r)}getFromCache(t,r){return this.Nr.getEntry(t,r)}getAllFromCache(t,r){return this.Nr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _je{constructor(t){this.persistence=t,this.si=new Wx(r=>W8(r),X8),this.lastRemoteSnapshotVersion=nn.min(),this.highestTargetId=0,this.oi=0,this._i=new rM,this.targetCount=0,this.ai=S1.ur()}forEachTarget(t,r){return this.si.forEach((n,a)=>r(a)),Vt.resolve()}getLastRemoteSnapshotVersion(t){return Vt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Vt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Vt.resolve(this.highestTargetId)}setTargetsMetadata(t,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),Vt.resolve()}Pr(t){this.si.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.ai=new S1(r),this.highestTargetId=r),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,r){return this.Pr(r),this.targetCount+=1,Vt.resolve()}updateTargetData(t,r){return this.Pr(r),Vt.resolve()}removeTargetData(t,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Vt.resolve()}removeTargets(t,r,n){let a=0;const s=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),a++)}),Vt.waitFor(s).next(()=>a)}getTargetCount(t){return Vt.resolve(this.targetCount)}getTargetData(t,r){const n=this.si.get(r)||null;return Vt.resolve(n)}addMatchingKeys(t,r,n){return this._i.Wr(r,n),Vt.resolve()}removeMatchingKeys(t,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(o=>{s.push(a.markPotentiallyOrphaned(t,o))}),Vt.waitFor(s)}removeMatchingKeysForTargetId(t,r){return this._i.jr(r),Vt.resolve()}getMatchingKeysForTargetId(t,r){const n=this._i.Hr(r);return Vt.resolve(n)}containsKey(t,r){return Vt.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yse{constructor(t,r){this.ui={},this.overlays={},this.ci=new z4(0),this.li=!1,this.li=!0,this.hi=new Eje,this.referenceDelegate=t(this),this.Pi=new _je(this),this.indexManager=new hje,this.remoteDocumentCache=function(a){return new kje(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new dje(r),this.Ii=new Nje(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new Cje,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let n=this.ui[t.toKey()];return n||(n=new jje(r,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,r,n){gr("MemoryPersistence","Starting transaction:",t);const a=new Tje(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(t,r){return Vt.or(Object.values(this.ui).map(n=>()=>n.containsKey(t,r)))}}class Tje extends nEe{constructor(t){super(),this.currentSequenceNumber=t}}class nM{constructor(t){this.persistence=t,this.Ri=new rM,this.Vi=null}static mi(t){return new nM(t)}get fi(){if(this.Vi)return this.Vi;throw qr(60996)}addReference(t,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),Vt.resolve()}removeReference(t,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),Vt.resolve()}markPotentiallyOrphaned(t,r){return this.fi.add(r.toString()),Vt.resolve()}removeTarget(t,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,r.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(t,r))}Ei(){this.Vi=new Set}di(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Vt.forEach(this.fi,n=>{const a=jr.fromPath(n);return this.gi(t,a).next(s=>{s||r.removeEntry(a,nn.min())})}).next(()=>(this.Vi=null,r.apply(t)))}updateLimboDocument(t,r){return this.gi(t,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(t){return 0}gi(t,r){return Vt.or([()=>Vt.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ai(t,r)])}}class k5{constructor(t,r){this.persistence=t,this.pi=new Wx(n=>iEe(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=vje(this,r)}static mi(t,r){return new k5(t,r)}Ei(){}di(t){return Vt.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}gr(t){const r=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(n=>r.next(a=>n+a))}wr(t){let r=0;return this.pr(t,n=>{r++}).next(()=>r)}pr(t,r){return Vt.forEach(this.pi,(n,a)=>this.br(t,n,a).next(s=>s?Vt.resolve():r(a)))}removeTargets(t,r,n){return this.persistence.getTargetCache().removeTargets(t,r,n)}removeOrphanedDocuments(t,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(t,o=>this.br(t,o,r).next(l=>{l||(n++,s.removeEntry(o,nn.min()))})).next(()=>s.apply(t)).next(()=>n)}markPotentiallyOrphaned(t,r){return this.pi.set(r,t.currentSequenceNumber),Vt.resolve()}removeTarget(t,r){const n=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Vt.resolve()}removeReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Vt.resolve()}updateLimboDocument(t,r){return this.pi.set(r,t.currentSequenceNumber),Vt.resolve()}Ti(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=CS(t.data.value)),r}br(t,r,n){return Vt.or([()=>this.persistence.Ai(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const a=this.pi.get(r);return Vt.resolve(a!==void 0&&a>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(t,r,n,a){this.targetId=t,this.fromCache=r,this.Es=n,this.ds=a}static As(t,r){let n=Dn(),a=Dn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new aM(t,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bje{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ije{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return xye()?8:aEe(Pl())>0?6:4}()}initialize(t,r){this.ps=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,n,a){const s={result:null};return this.ys(t,r).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(t,r,a,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Bje;return this.Ss(t,r,o).next(l=>{if(s.result=l,this.Vs)return this.bs(t,r,o,l.size)})}).next(()=>s.result)}bs(t,r,n,a){return n.documentReadCount<this.fs?(xb()<=Bn.DEBUG&&gr("QueryEngine","SDK will not create cache indexes for query:",vb(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Vt.resolve()):(xb()<=Bn.DEBUG&&gr("QueryEngine","Query:",vb(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(xb()<=Bn.DEBUG&&gr("QueryEngine","The SDK decides to create cache indexes for query:",vb(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,$h(r))):Vt.resolve())}ys(t,r){if(Iz(r))return Vt.resolve(null);let n=$h(r);return this.indexManager.getIndexType(t,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=C5(r,null,"F"),n=$h(r)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const o=Dn(...s);return this.ps.getDocuments(t,o).next(l=>this.indexManager.getMinOffset(t,n).next(c=>{const u=this.Ds(r,l);return this.Cs(r,u,o,c.readTime)?this.ys(t,C5(r,null,"F")):this.vs(t,u,r,c)}))})))}ws(t,r,n,a){return Iz(r)||a.isEqual(nn.min())?Vt.resolve(null):this.ps.getDocuments(t,n).next(s=>{const o=this.Ds(r,s);return this.Cs(r,o,n,a)?Vt.resolve(null):(xb()<=Bn.DEBUG&&gr("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),vb(r)),this.vs(t,o,r,ZCe(a,_N)).next(l=>l))})}Ds(t,r){let n=new zi(_se(t));return r.forEach((a,s)=>{Y4(t,s)&&(n=n.add(s))}),n}Cs(t,r,n,a){if(t.limit===null)return!1;if(n.size!==r.size)return!0;const s=t.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(t,r,n){return xb()<=Bn.DEBUG&&gr("QueryEngine","Using full collection scan to execute query:",vb(r)),this.ps.getDocumentsMatchingQuery(t,r,bp.min(),n)}vs(t,r,n,a){return this.ps.getDocumentsMatchingQuery(t,n,a).next(s=>(r.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM="LocalStore",Dje=3e8;class Oje{constructor(t,r,n,a){this.persistence=t,this.Fs=r,this.serializer=a,this.Ms=new _s(In),this.xs=new Wx(s=>W8(s),X8),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new wje(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ms))}}function Pje(e,t,r,n){return new Oje(e,t,r,n)}async function Jse(e,t){const r=on(e);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Bs(t),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],l=[];let c=Dn();for(const u of a){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function Fje(e,t){const r=on(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=t.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,A=f.keys();let m=Vt.resolve();return A.forEach(g=>{m=m.next(()=>d.getEntry(c,g)).next(x=>{const v=u.docVersions.get(g);ga(v!==null,48541),x.version.compareTo(v)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,n,t,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=Dn();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(t))).next(()=>r.localDocuments.getDocuments(n,a))})}function Zse(e){const t=on(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Pi.getLastRemoteSnapshotVersion(r))}function Rje(e,t){const r=on(e),n=t.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const l=[];t.targetChanges.forEach((d,f)=>{const A=a.get(f);if(!A)return;l.push(r.Pi.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(s,d.addedDocuments,f)));let m=A.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?m=m.withResumeToken(vo.EMPTY_BYTE_STRING,nn.min()).withLastLimboFreeSnapshotVersion(nn.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,n)),a=a.insert(f,m),function(x,v,y){return x.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=Dje?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(A,m,d)&&l.push(r.Pi.updateTargetData(s,m))});let c=vA(),u=Dn();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(Lje(s,o,t.documentUpdates).next(d=>{c=d.ks,u=d.qs})),!n.isEqual(nn.min())){const d=r.Pi.getLastRemoteSnapshotVersion(s).next(f=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(d)}return Vt.waitFor(l).next(()=>o.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.Ms=a,s))}function Lje(e,t,r){let n=Dn(),a=Dn();return r.forEach(s=>n=n.add(s)),t.getEntries(e,n).next(s=>{let o=vA();return r.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(l)),c.isNoDocument()&&c.version.isEqual(nn.min())?(t.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(c),o=o.insert(l,c)):gr(sM,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:a}})}function Mje(e,t){const r=on(e);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=q8),r.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function Uje(e,t){const r=on(e);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,t).next(s=>s?(a=s,Vt.resolve(a)):r.Pi.allocateTargetId(n).next(o=>(a=new Jm(t,o,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(t,n.targetId)),n})}async function hF(e,t,r){const n=on(e),a=n.Ms.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,a))}catch(o){if(!hy(o))throw o;gr(sM,`Failed to update sequence numbers for target ${t}: ${o}`)}n.Ms=n.Ms.remove(t),n.xs.delete(a.target)}function zz(e,t,r){const n=on(e);let a=nn.min(),s=Dn();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const f=on(c),A=f.xs.get(d);return A!==void 0?Vt.resolve(f.Ms.get(A)):f.Pi.getTargetData(u,d)}(n,o,$h(t)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{s=c})}).next(()=>n.Fs.getDocumentsMatchingQuery(o,t,r?a:nn.min(),r?s:Dn())).next(l=>(Hje(n,EEe(t),l),{documents:l,Qs:s})))}function Hje(e,t,r){let n=e.Os.get(t)||nn.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),e.Os.set(t,n)}class Gz{constructor(){this.activeTargetIds=BEe()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Qje{constructor(){this.Mo=new Gz,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,n){}addLocalQueryTarget(t,r=!0){return r&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,r,n){this.xo[t]=r}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Gz,Promise.resolve()}handleUserChange(t,r,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vje{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qz="ConnectivityMonitor";class Kz{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){gr(qz,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){gr(qz,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mj=null;function AF(){return Mj===null?Mj=function(){return 268435456+Math.round(2147483648*Math.random())}():Mj++,"0x"+Mj.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="RestConnection",$je={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zje{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+t.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===y5?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(t,r,n,a,s){const o=AF(),l=this.zo(t,r.toUriEncodedString());gr(QI,`Sending RPC '${t}' ${o}:`,l,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,a,s);const{host:u}=new URL(l),d=FA(u);return this.Jo(t,l,c,n,d).then(f=>(gr(QI,`Received RPC '${t}' ${o}: `,f),f),f=>{throw kx(QI,`RPC '${t}' ${o} failed with error: `,f,"url: ",l,"request:",n),f})}Ho(t,r,n,a,s,o){return this.Go(t,r,n,a,s)}jo(t,r,n){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+dy}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>t[s]=a),n&&n.headers.forEach((a,s)=>t[s]=a)}zo(t,r){const n=$je[t];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gje{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol="WebChannelConnection";class qje extends zje{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,r,n,a,s){const o=AF();return new Promise((l,c)=>{const u=new tse;u.setWithCredentials(!0),u.listenOnce(rse.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case NS.NO_ERROR:const f=u.getResponseJson();gr(ol,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(f)),l(f);break;case NS.TIMEOUT:gr(ol,`RPC '${t}' ${o} timed out`),c(new Zt(Tt.DEADLINE_EXCEEDED,"Request time out"));break;case NS.HTTP_ERROR:const A=u.getStatus();if(gr(ol,`RPC '${t}' ${o} failed with status:`,A,"response text:",u.getResponseText()),A>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const x=function(y){const N=y.toLowerCase().replace(/_/g,"-");return Object.values(Tt).indexOf(N)>=0?N:Tt.UNKNOWN}(g.status);c(new Zt(x,g.message))}else c(new Zt(Tt.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Zt(Tt.UNAVAILABLE,"Connection failed."));break;default:qr(9055,{l_:t,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{gr(ol,`RPC '${t}' ${o} completed.`)}});const d=JSON.stringify(a);gr(ol,`RPC '${t}' ${o} sending request:`,a),u.send(r,"POST",d,n,15)})}T_(t,r,n){const a=AF(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=sse(),l=ase(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");gr(ol,`Creating RPC '${t}' stream ${a}: ${d}`,c);const f=o.createWebChannel(d,c);this.I_(f);let A=!1,m=!1;const g=new Gje({Yo:v=>{m?gr(ol,`Not sending because RPC '${t}' stream ${a} is closed:`,v):(A||(gr(ol,`Opening RPC '${t}' stream ${a} transport.`),f.open(),A=!0),gr(ol,`RPC '${t}' stream ${a} sending:`,v),f.send(v))},Zo:()=>f.close()}),x=(v,y,N)=>{v.listen(y,C=>{try{N(C)}catch(_){setTimeout(()=>{throw _},0)}})};return x(f,m2.EventType.OPEN,()=>{m||(gr(ol,`RPC '${t}' stream ${a} transport opened.`),g.o_())}),x(f,m2.EventType.CLOSE,()=>{m||(m=!0,gr(ol,`RPC '${t}' stream ${a} transport closed`),g.a_(),this.E_(f))}),x(f,m2.EventType.ERROR,v=>{m||(m=!0,kx(ol,`RPC '${t}' stream ${a} transport errored. Name:`,v.name,"Message:",v.message),g.a_(new Zt(Tt.UNAVAILABLE,"The operation could not be completed")))}),x(f,m2.EventType.MESSAGE,v=>{var y;if(!m){const N=v.data[0];ga(!!N,16349);const C=N,_=(C==null?void 0:C.error)||((y=C[0])==null?void 0:y.error);if(_){gr(ol,`RPC '${t}' stream ${a} received error:`,_);const j=_.status;let I=function(B){const M=Si[B];if(M!==void 0)return Use(M)}(j),T=_.message;I===void 0&&(I=Tt.INTERNAL,T="Unknown error status: "+j+" with message "+_.message),m=!0,g.a_(new Zt(I,T)),f.close()}else gr(ol,`RPC '${t}' stream ${a} received:`,N),g.u_(N)}}),x(l,nse.STAT_EVENT,v=>{v.stat===rF.PROXY?gr(ol,`RPC '${t}' stream ${a} detected buffering proxy`):v.stat===rF.NOPROXY&&gr(ol,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{g.__()},0),g}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(r=>r===t)}}function VI(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(e){return new YEe(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eie{constructor(t,r,n=1e3,a=1.5,s=6e4){this.Mi=t,this.timerId=r,this.d_=n,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&gr("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wz="PersistentStream";class tie{constructor(t,r,n,a,s,o,l,c){this.Mi=t,this.S_=n,this.b_=a,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new eie(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===Tt.RESOURCE_EXHAUSTED?(xA(r.toString()),xA("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===Tt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(r)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{t(()=>{const a=new Zt(Tt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(t,r){const n=this.W_(this.D_);this.stream=this.j_(t,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return gr(Wz,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return r=>{this.Mi.enqueueAndForget(()=>this.D_===t?r():(gr(Wz,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Kje extends tie{constructor(t,r,n,a,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}j_(t,r){return this.connection.T_("Listen",t,r)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=eje(this.serializer,t),n=function(s){if(!("targetChange"in s))return nn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?nn.min():o.readTime?zh(o.readTime):nn.min()}(t);return this.listener.H_(r,n)}Y_(t){const r={};r.database=fF(this.serializer),r.addTarget=function(s,o){let l;const c=o.target;if(l=oF(c)?{documents:nje(s,c)}:{query:aje(s,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Vse(s,o.resumeToken);const u=cF(s,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(nn.min())>0){l.readTime=j5(s,o.snapshotVersion.toTimestamp());const u=cF(s,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,t);const n=ije(this.serializer,t);n&&(r.labels=n),this.q_(r)}Z_(t){const r={};r.database=fF(this.serializer),r.removeTarget=t,this.q_(r)}}class Wje extends tie{constructor(t,r,n,a,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}J_(t){return ga(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ga(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ga(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=rje(t.writeResults,t.commitTime),n=zh(t.commitTime);return this.listener.na(n,r)}ra(){const t={};t.database=fF(this.serializer),this.q_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map(n=>tje(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xje{}class Yje extends Xje{constructor(t,r,n,a){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Zt(Tt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(t,uF(r,n),a,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Zt(Tt.UNKNOWN,s.toString())})}Ho(t,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(t,uF(r,n),a,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Zt(Tt.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Jje{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(xA(r),this.aa=!1):gr("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx="RemoteStore";class Zje{constructor(t,r,n,a,s){this.localStore=t,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{n.enqueueAndForget(async()=>{Xx(this)&&(gr(Sx,"Restarting streams for network reachability change."),await async function(c){const u=on(c);u.Ea.add(4),await UC(u),u.Ra.set("Unknown"),u.Ea.delete(4),await n3(u)}(this))})}),this.Ra=new Jje(n,a)}}async function n3(e){if(Xx(e))for(const t of e.da)await t(!0)}async function UC(e){for(const t of e.da)await t(!1)}function rie(e,t){const r=on(e);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),cM(r)?lM(r):Ay(r).O_()&&oM(r,t))}function iM(e,t){const r=on(e),n=Ay(r);r.Ia.delete(t),n.O_()&&nie(r,t),r.Ia.size===0&&(n.O_()?n.L_():Xx(r)&&r.Ra.set("Unknown"))}function oM(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(nn.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}Ay(e).Y_(t)}function nie(e,t){e.Va.Ue(t),Ay(e).Z_(t)}function lM(e){e.Va=new qEe({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Ay(e).start(),e.Ra.ua()}function cM(e){return Xx(e)&&!Ay(e).x_()&&e.Ia.size>0}function Xx(e){return on(e).Ea.size===0}function aie(e){e.Va=void 0}async function eke(e){e.Ra.set("Online")}async function tke(e){e.Ia.forEach((t,r)=>{oM(e,t)})}async function rke(e,t){aie(e),cM(e)?(e.Ra.ha(t),lM(e)):e.Ra.set("Unknown")}async function nke(e,t,r){if(e.Ra.set("Online"),t instanceof Qse&&t.state===2&&t.cause)try{await async function(a,s){const o=s.cause;for(const l of s.targetIds)a.Ia.has(l)&&(await a.remoteSyncer.rejectListen(l,o),a.Ia.delete(l),a.Va.removeTarget(l))}(e,t)}catch(n){gr(Sx,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await S5(e,n)}else if(t instanceof kS?e.Va.Ze(t):t instanceof Hse?e.Va.st(t):e.Va.tt(t),!r.isEqual(nn.min()))try{const n=await Zse(e.localStore);r.compareTo(n)>=0&&await function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=s.Ia.get(c);if(!d)return;s.Ia.set(c,d.withResumeToken(vo.EMPTY_BYTE_STRING,d.snapshotVersion)),nie(s,c);const f=new Jm(d.target,c,u,d.sequenceNumber);oM(s,f)}),s.remoteSyncer.applyRemoteEvent(l)}(e,r)}catch(n){gr(Sx,"Failed to raise snapshot:",n),await S5(e,n)}}async function S5(e,t,r){if(!hy(t))throw t;e.Ea.add(1),await UC(e),e.Ra.set("Offline"),r||(r=()=>Zse(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{gr(Sx,"Retrying IndexedDB access"),await r(),e.Ea.delete(1),await n3(e)})}function sie(e,t){return t().catch(r=>S5(e,r,t))}async function a3(e){const t=on(e),r=Cp(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:q8;for(;ake(t);)try{const a=await Mje(t.localStore,n);if(a===null){t.Ta.length===0&&r.L_();break}n=a.batchId,ske(t,a)}catch(a){await S5(t,a)}iie(t)&&oie(t)}function ake(e){return Xx(e)&&e.Ta.length<10}function ske(e,t){e.Ta.push(t);const r=Cp(e);r.O_()&&r.X_&&r.ea(t.mutations)}function iie(e){return Xx(e)&&!Cp(e).x_()&&e.Ta.length>0}function oie(e){Cp(e).start()}async function ike(e){Cp(e).ra()}async function oke(e){const t=Cp(e);for(const r of e.Ta)t.ea(r.mutations)}async function lke(e,t,r){const n=e.Ta.shift(),a=Z8.from(n,t,r);await sie(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await a3(e)}async function cke(e,t){t&&Cp(e).X_&&await async function(n,a){if(function(o){return $Ee(o)&&o!==Tt.ABORTED}(a.code)){const s=n.Ta.shift();Cp(n).B_(),await sie(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await a3(n)}}(e,t),iie(e)&&oie(e)}async function Xz(e,t){const r=on(e);r.asyncQueue.verifyOperationInProgress(),gr(Sx,"RemoteStore received new credentials");const n=Xx(r);r.Ea.add(3),await UC(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await n3(r)}async function uke(e,t){const r=on(e);t?(r.Ea.delete(2),await n3(r)):t||(r.Ea.add(2),await UC(r),r.Ra.set("Unknown"))}function Ay(e){return e.ma||(e.ma=function(r,n,a){const s=on(r);return s.sa(),new Kje(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:eke.bind(null,e),t_:tke.bind(null,e),r_:rke.bind(null,e),H_:nke.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),cM(e)?lM(e):e.Ra.set("Unknown")):(await e.ma.stop(),aie(e))})),e.ma}function Cp(e){return e.fa||(e.fa=function(r,n,a){const s=on(r);return s.sa(),new Wje(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:ike.bind(null,e),r_:cke.bind(null,e),ta:oke.bind(null,e),na:lke.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await a3(e)):(await e.fa.stop(),e.Ta.length>0&&(gr(Sx,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(t,r,n,a,s){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new nA,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,n,a,s){const o=Date.now()+n,l=new uM(t,r,o,a,s);return l.start(n),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Zt(Tt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dM(e,t){if(xA("AsyncQueue",`${t}: ${e}`),hy(e))return new Zt(Tt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{static emptySet(t){return new Zb(t.comparator)}constructor(t){this.comparator=t?(r,n)=>t(r,n)||jr.comparator(r.key,n.key):(r,n)=>jr.comparator(r.key,n.key),this.keyedMap=p2(),this.sortedSet=new _s(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,n)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof Zb)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const n=new Zb;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{constructor(){this.ga=new _s(jr.comparator)}track(t){const r=t.doc.key,n=this.ga.get(r);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(r,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(r):t.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):qr(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal((r,n)=>{t.push(n)}),t}}class _1{constructor(t,r,n,a,s,o,l,c,u){this.query=t,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(t,r,n,a,s){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new _1(t,r,Zb.emptySet(r),o,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&X4(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,n=t.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dke{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class fke{constructor(){this.queries=Jz(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=on(r),s=a.queries;a.queries=Jz(),s.forEach((o,l)=>{for(const c of l.Sa)c.onError(n)})})(this,new Zt(Tt.ABORTED,"Firestore shutting down"))}}function Jz(){return new Wx(e=>Sse(e),X4)}async function fM(e,t){const r=on(e);let n=3;const a=t.query;let s=r.queries.get(a);s?!s.ba()&&t.Da()&&(n=2):(s=new dke,n=t.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(o){const l=dM(o,`Initialization of query '${vb(t.query)}' failed`);return void t.onError(l)}r.queries.set(a,s),s.Sa.push(t),t.va(r.onlineState),s.wa&&t.Fa(s.wa)&&AM(r)}async function hM(e,t){const r=on(e),n=t.query;let a=3;const s=r.queries.get(n);if(s){const o=s.Sa.indexOf(t);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?a=t.Da()?0:1:!s.ba()&&t.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function hke(e,t){const r=on(e);let n=!1;for(const a of t){const s=a.query,o=r.queries.get(s);if(o){for(const l of o.Sa)l.Fa(a)&&(n=!0);o.wa=a}}n&&AM(r)}function Ake(e,t,r){const n=on(e),a=n.queries.get(t);if(a)for(const s of a.Sa)s.onError(r);n.queries.delete(t)}function AM(e){e.Ca.forEach(t=>{t.next()})}var mF,Zz;(Zz=mF||(mF={})).Ma="default",Zz.Cache="cache";class mM{constructor(t,r,n){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const a of t.docChanges)a.type!==3&&n.push(a);t=new _1(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=_1.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==mF.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lie{constructor(t){this.key=t}}class cie{constructor(t){this.key=t}}class mke{constructor(t,r){this.query=t,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Dn(),this.mutatedKeys=Dn(),this.eu=_se(t),this.tu=new Zb(this.eu)}get nu(){return this.Ya}ru(t,r){const n=r?r.iu:new Yz,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,o=a,l=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((d,f)=>{const A=a.get(d),m=Y4(this.query,f)?f:null,g=!!A&&this.mutatedKeys.has(A.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let v=!1;A&&m?A.data.isEqual(m.data)?g!==x&&(n.track({type:3,doc:m}),v=!0):this.su(A,m)||(n.track({type:2,doc:m}),v=!0,(c&&this.eu(m,c)>0||u&&this.eu(m,u)<0)&&(l=!0)):!A&&m?(n.track({type:0,doc:m}),v=!0):A&&!m&&(n.track({type:1,doc:A}),v=!0,(c||u)&&(l=!0)),v&&(m?(o=o.add(m),s=x?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{tu:o,iu:n,Cs:l,mutatedKeys:s}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,n,a){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort((d,f)=>function(m,g){const x=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qr(20277,{Rt:v})}};return x(m)-x(g)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(n),a=a??!1;const l=r&&!a?this._u():[],c=this.Xa.size===0&&this.current&&!a?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new _1(this.query,t.tu,s,o,t.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Yz,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Dn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return t.forEach(n=>{this.Xa.has(n)||r.push(new cie(n))}),this.Xa.forEach(n=>{t.has(n)||r.push(new lie(n))}),r}cu(t){this.Ya=t.Qs,this.Xa=Dn();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return _1.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const pM="SyncEngine";class pke{constructor(t,r,n){this.query=t,this.targetId=r,this.view=n}}class gke{constructor(t){this.key=t,this.hu=!1}}class xke{constructor(t,r,n,a,s,o){this.localStore=t,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Wx(l=>Sse(l),X4),this.Iu=new Map,this.Eu=new Set,this.du=new _s(jr.comparator),this.Au=new Map,this.Ru=new rM,this.Vu={},this.mu=new Map,this.fu=S1.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function vke(e,t,r=!0){const n=mie(e);let a;const s=n.Tu.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await uie(n,t,r,!0),a}async function bke(e,t){const r=mie(e);await uie(r,t,!0,!1)}async function uie(e,t,r,n){const a=await Uje(e.localStore,$h(t)),s=a.targetId,o=e.sharedClientState.addLocalQueryTarget(s,r);let l;return n&&(l=await yke(e,t,s,o==="current",a.resumeToken)),e.isPrimaryClient&&r&&rie(e.remoteStore,a),l}async function yke(e,t,r,n,a){e.pu=(f,A,m)=>async function(x,v,y,N){let C=v.view.ru(y);C.Cs&&(C=await zz(x.localStore,v.query,!1).then(({documents:T})=>v.view.ru(T,C)));const _=N&&N.targetChanges.get(v.targetId),j=N&&N.targetMismatches.get(v.targetId)!=null,I=v.view.applyChanges(C,x.isPrimaryClient,_,j);return tG(x,v.targetId,I.au),I.snapshot}(e,f,A,m);const s=await zz(e.localStore,t,!0),o=new mke(t,s.Qs),l=o.ru(s.documents),c=MC.createSynthesizedTargetChangeForCurrentChange(r,n&&e.onlineState!=="Offline",a),u=o.applyChanges(l,e.isPrimaryClient,c);tG(e,r,u.au);const d=new pke(t,r,o);return e.Tu.set(t,d),e.Iu.has(r)?e.Iu.get(r).push(t):e.Iu.set(r,[t]),u.snapshot}async function wke(e,t,r){const n=on(e),a=n.Tu.get(t),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(o=>!X4(o,t))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await hF(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&iM(n.remoteStore,a.targetId),pF(n,a.targetId)}).catch(fy)):(pF(n,a.targetId),await hF(n.localStore,a.targetId,!0))}async function Nke(e,t){const r=on(e),n=r.Tu.get(t),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),iM(r.remoteStore,n.targetId))}async function Cke(e,t,r){const n=Bke(e);try{const a=await function(o,l){const c=on(o),u=xr.now(),d=l.reduce((m,g)=>m.add(g.key),Dn());let f,A;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=vA(),x=Dn();return c.Ns.getEntries(m,d).next(v=>{g=v,g.forEach((y,N)=>{N.isValidDocument()||(x=x.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,g)).next(v=>{f=v;const y=[];for(const N of l){const C=MEe(N,f.get(N.key).overlayedDocument);C!=null&&y.push(new Hp(N.key,C,yse(C.value.mapValue),rc.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,y,l)}).next(v=>{A=v;const y=v.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(m,v.batchId,y)})}).then(()=>({batchId:A.batchId,changes:Bse(f)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(a.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new _s(In)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(n,a.batchId,r),await HC(n,a.changes),await a3(n.remoteStore)}catch(a){const s=dM(a,"Failed to persist write");r.reject(s)}}async function die(e,t){const r=on(e);try{const n=await Rje(r.localStore,t);t.targetChanges.forEach((a,s)=>{const o=r.Au.get(s);o&&(ga(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?o.hu=!0:a.modifiedDocuments.size>0?ga(o.hu,14607):a.removedDocuments.size>0&&(ga(o.hu,42227),o.hu=!1))}),await HC(r,n,t)}catch(n){await fy(n)}}function eG(e,t,r){const n=on(e);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,o)=>{const l=o.view.va(t);l.snapshot&&a.push(l.snapshot)}),function(o,l){const c=on(o);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const A of f.Sa)A.va(l)&&(u=!0)}),u&&AM(c)}(n.eventManager,t),a.length&&n.Pu.H_(a),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function Eke(e,t,r){const n=on(e);n.sharedClientState.updateQueryState(t,"rejected",r);const a=n.Au.get(t),s=a&&a.key;if(s){let o=new _s(jr.comparator);o=o.insert(s,wl.newNoDocument(s,nn.min()));const l=Dn().add(s),c=new t3(nn.min(),new Map,new _s(In),o,l);await die(n,c),n.du=n.du.remove(s),n.Au.delete(t),gM(n)}else await hF(n.localStore,t,!1).then(()=>pF(n,t,r)).catch(fy)}async function jke(e,t){const r=on(e),n=t.batch.batchId;try{const a=await Fje(r.localStore,t);hie(r,n,null),fie(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await HC(r,a)}catch(a){await fy(a)}}async function kke(e,t,r){const n=on(e);try{const a=await function(o,l){const c=on(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(ga(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,t);hie(n,t,r),fie(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await HC(n,a)}catch(a){await fy(a)}}function fie(e,t){(e.mu.get(t)||[]).forEach(r=>{r.resolve()}),e.mu.delete(t)}function hie(e,t,r){const n=on(e);let a=n.Vu[n.currentUser.toKey()];if(a){const s=a.get(t);s&&(r?s.reject(r):s.resolve(),a=a.remove(t)),n.Vu[n.currentUser.toKey()]=a}}function pF(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.Iu.get(t))e.Tu.delete(n),r&&e.Pu.yu(n,r);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(n=>{e.Ru.containsKey(n)||Aie(e,n)})}function Aie(e,t){e.Eu.delete(t.path.canonicalString());const r=e.du.get(t);r!==null&&(iM(e.remoteStore,r),e.du=e.du.remove(t),e.Au.delete(r),gM(e))}function tG(e,t,r){for(const n of r)n instanceof lie?(e.Ru.addReference(n.key,t),Ske(e,n)):n instanceof cie?(gr(pM,"Document no longer in limbo: "+n.key),e.Ru.removeReference(n.key,t),e.Ru.containsKey(n.key)||Aie(e,n.key)):qr(19791,{wu:n})}function Ske(e,t){const r=t.key,n=r.path.canonicalString();e.du.get(r)||e.Eu.has(n)||(gr(pM,"New document in limbo: "+r),e.Eu.add(n),gM(e))}function gM(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const r=new jr(Ua.fromString(t)),n=e.fu.next();e.Au.set(n,new gke(r)),e.du=e.du.insert(r,n),rie(e.remoteStore,new Jm($h(W4(r.path)),n,"TargetPurposeLimboResolution",z4.ce))}}async function HC(e,t,r){const n=on(e),a=[],s=[],o=[];n.Tu.isEmpty()||(n.Tu.forEach((l,c)=>{o.push(n.pu(c,t,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){a.push(u);const f=aM.As(c.targetId,u);s.push(f)}}))}),await Promise.all(o),n.Pu.H_(a),await async function(c,u){const d=on(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Vt.forEach(u,A=>Vt.forEach(A.Es,m=>d.persistence.referenceDelegate.addReference(f,A.targetId,m)).next(()=>Vt.forEach(A.ds,m=>d.persistence.referenceDelegate.removeReference(f,A.targetId,m)))))}catch(f){if(!hy(f))throw f;gr(sM,"Failed to update sequence numbers: "+f)}for(const f of u){const A=f.targetId;if(!f.fromCache){const m=d.Ms.get(A),g=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(g);d.Ms=d.Ms.insert(A,x)}}}(n.localStore,s))}async function _ke(e,t){const r=on(e);if(!r.currentUser.isEqual(t)){gr(pM,"User change. New user:",t.toKey());const n=await Jse(r.localStore,t);r.currentUser=t,function(s,o){s.mu.forEach(l=>{l.forEach(c=>{c.reject(new Zt(Tt.CANCELLED,o))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await HC(r,n.Ls)}}function Tke(e,t){const r=on(e),n=r.Au.get(t);if(n&&n.hu)return Dn().add(n.key);{let a=Dn();const s=r.Iu.get(t);if(!s)return a;for(const o of s){const l=r.Tu.get(o);a=a.unionWith(l.view.nu)}return a}}function mie(e){const t=on(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=die.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tke.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Eke.bind(null,t),t.Pu.H_=hke.bind(null,t.eventManager),t.Pu.yu=Ake.bind(null,t.eventManager),t}function Bke(e){const t=on(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=jke.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=kke.bind(null,t),t}class _5{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=r3(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return Pje(this.persistence,new Ije,t.initialUser,this.serializer)}Cu(t){return new Yse(nM.mi,this.serializer)}Du(t){return new Qje}async terminate(){var t,r;(t=this.gcScheduler)==null||t.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_5.provider={build:()=>new _5};class Ike extends _5{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){ga(this.persistence.referenceDelegate instanceof k5,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new gje(n,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?kc.withCacheSize(this.cacheSizeBytes):kc.DEFAULT;return new Yse(n=>k5.mi(n,r),this.serializer)}}class gF{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>eG(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=_ke.bind(null,this.syncEngine),await uke(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new fke}()}createDatastore(t){const r=r3(t.databaseInfo.databaseId),n=function(s){return new qje(s)}(t.databaseInfo);return function(s,o,l,c){return new Yje(s,o,l,c)}(t.authCredentials,t.appCheckCredentials,n,r)}createRemoteStore(t){return function(n,a,s,o,l){return new Zje(n,a,s,o,l)}(this.localStore,this.datastore,t.asyncQueue,r=>eG(this.syncEngine,r,0),function(){return Kz.v()?new Kz:new Vje}())}createSyncEngine(t,r){return function(a,s,o,l,c,u,d){const f=new xke(a,s,o,l,c,u);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(a){const s=on(a);gr(Sx,"RemoteStore shutting down."),s.Ea.add(5),await UC(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(r=this.eventManager)==null||r.terminate()}}gF.provider={build:()=>new gF};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):xA("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="FirestoreClient";class Dke{constructor(t,r,n,a,s){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=gl.UNAUTHENTICATED,this.clientId=V4.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async o=>{gr(Ep,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(gr(Ep,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new nA;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const n=dM(r,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function $I(e,t){e.asyncQueue.verifyOperationInProgress(),gr(Ep,"Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async a=>{n.isEqual(a)||(await Jse(t.localStore,a),n=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function rG(e,t){e.asyncQueue.verifyOperationInProgress();const r=await Oke(e);gr(Ep,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(n=>Xz(t.remoteStore,n)),e.setAppCheckTokenChangeListener((n,a)=>Xz(t.remoteStore,a)),e._onlineComponents=t}async function Oke(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){gr(Ep,"Using user provided OfflineComponentProvider");try{await $I(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(a){return a.name==="FirebaseError"?a.code===Tt.FAILED_PRECONDITION||a.code===Tt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;kx("Error using user provided cache. Falling back to memory cache: "+r),await $I(e,new _5)}}else gr(Ep,"Using default OfflineComponentProvider"),await $I(e,new Ike(void 0));return e._offlineComponents}async function pie(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(gr(Ep,"Using user provided OnlineComponentProvider"),await rG(e,e._uninitializedComponentsProvider._online)):(gr(Ep,"Using default OnlineComponentProvider"),await rG(e,new gF))),e._onlineComponents}function Pke(e){return pie(e).then(t=>t.syncEngine)}async function T5(e){const t=await pie(e),r=t.eventManager;return r.onListen=vke.bind(null,t.syncEngine),r.onUnlisten=wke.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=bke.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=Nke.bind(null,t.syncEngine),r}function Fke(e,t,r={}){const n=new nA;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new xM({next:A=>{d.Nu(),o.enqueueAndForget(()=>hM(s,f));const m=A.docs.has(l);!m&&A.fromCache?u.reject(new Zt(Tt.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&A.fromCache&&c&&c.source==="server"?u.reject(new Zt(Tt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(A)},error:A=>u.reject(A)}),f=new mM(W4(l.path),d,{includeMetadataChanges:!0,qa:!0});return fM(s,f)}(await T5(e),e.asyncQueue,t,r,n)),n.promise}function Rke(e,t,r={}){const n=new nA;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new xM({next:A=>{d.Nu(),o.enqueueAndForget(()=>hM(s,f)),A.fromCache&&c.source==="server"?u.reject(new Zt(Tt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(A)},error:A=>u.reject(A)}),f=new mM(l,d,{includeMetadataChanges:!0,qa:!0});return fM(s,f)}(await T5(e),e.asyncQueue,t,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gie(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nG=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xie="firestore.googleapis.com",aG=!0;class sG{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Zt(Tt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xie,this.ssl=aG}else this.host=t.host,this.ssl=t.ssl??aG;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Xse;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<mje)throw new Zt(Tt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}use("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gie(t.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Zt(Tt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Zt(Tt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Zt(Tt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class s3{constructor(t,r,n,a){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sG({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Zt(Tt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Zt(Tt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sG(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new lse;switch(n.type){case"firstParty":return new GCe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Zt(Tt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=nG.get(r);n&&(gr("ComponentProvider","Removing Datastore"),nG.delete(r),n.terminate())}(this),Promise.resolve()}}function vie(e,t,r,n={}){var u;e=Il(e,s3);const a=FA(t),s=e._getSettings(),o={...s,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${r}`;a&&(P4(`https://${l}`),F4("Firestore",!0)),s.host!==xie&&s.host!==l&&kx("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:l,ssl:a,emulatorOptions:n};if(!Ex(c,o)&&(e._setSettings(c),n.mockUserToken)){let d,f;if(typeof n.mockUserToken=="string")d=n.mockUserToken,f=gl.MOCK_USER;else{d=rae(n.mockUserToken,(u=e._app)==null?void 0:u.options.projectId);const A=n.mockUserToken.sub||n.mockUserToken.user_id;if(!A)throw new Zt(Tt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new gl(A)}e._authCredentials=new VCe(new ose(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(t,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Mf(this.firestore,t,this._query)}}class Es{constructor(t,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new aA(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Es(this.firestore,t,this._key)}toJSON(){return{type:Es._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,n){if(RC(r,Es._jsonSchema))return new Es(t,n||null,new jr(Ua.fromString(r.referencePath)))}}Es._jsonSchemaVersion="firestore/documentReference/1.0",Es._jsonSchema={type:Fi("string",Es._jsonSchemaVersion),referencePath:Fi("string")};class aA extends Mf{constructor(t,r,n){super(t,r,W4(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Es(this.firestore,null,new jr(t))}withConverter(t){return new aA(this.firestore,t,this._path)}}function ht(e,t,...r){if(e=Wn(e),cse("collection","path",t),e instanceof s3){const n=Ua.fromString(t,...r);return vz(n),new aA(e,null,n)}{if(!(e instanceof Es||e instanceof aA))throw new Zt(Tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ua.fromString(t,...r));return vz(n),new aA(e.firestore,null,n)}}function Wt(e,t,...r){if(e=Wn(e),arguments.length===1&&(t=V4.newId()),cse("doc","path",t),e instanceof s3){const n=Ua.fromString(t,...r);return xz(n),new Es(e,null,new jr(n))}{if(!(e instanceof Es||e instanceof aA))throw new Zt(Tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ua.fromString(t,...r));return xz(n),new Es(e.firestore,e instanceof aA?e.converter:null,new jr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iG="AsyncQueue";class oG{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new eie(this,"async_queue_retry"),this._c=()=>{const n=VI();n&&gr(iG,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const r=VI();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=VI();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const r=new nA;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!hy(t))throw t;gr(iG,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const r=this.ac.then(()=>(this.rc=!0,t().catch(n=>{throw this.nc=n,this.rc=!1,xA("INTERNAL UNHANDLED ERROR: ",lG(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(t,r,n){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const a=uM.createAndSchedule(this,t,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&qr(47125,{Pc:lG(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function lG(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cG(e){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(e,["next","error","complete"])}class Of extends s3{constructor(t,r,n,a){super(t,r,n,a),this.type="firestore",this._queue=new oG,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new oG(t),this._firestoreClient=void 0,await t}}}function vM(e,t){const r=typeof e=="object"?e:DC(),n=typeof e=="string"?e:y5,a=zx(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=_8("firestore");s&&vie(a,...s)}return a}function my(e){if(e._terminated)throw new Zt(Tt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Lke(e),e._firestoreClient}function Lke(e){var n,a,s;const t=e._freezeSettings(),r=function(l,c,u,d){return new cEe(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,gie(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((n=e._app)==null?void 0:n.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(a=t.localCache)!=null&&a._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Dke(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new yu(vo.fromBase64String(t))}catch(r){throw new Zt(Tt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new yu(vo.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:yu._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(RC(t,yu._jsonSchema))return yu.fromBase64String(t.bytes)}}yu._jsonSchemaVersion="firestore/bytes/1.0",yu._jsonSchema={type:Fi("string",yu._jsonSchemaVersion),bytes:Fi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Zt(Tt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ao(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Zt(Tt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Zt(Tt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return In(this._lat,t._lat)||In(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:jf._jsonSchemaVersion}}static fromJSON(t){if(RC(t,jf._jsonSchema))return new jf(t.latitude,t.longitude)}}jf._jsonSchemaVersion="firestore/geoPoint/1.0",jf._jsonSchema={type:Fi("string",jf._jsonSchemaVersion),latitude:Fi("number"),longitude:Fi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:kf._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(RC(t,kf._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(r=>typeof r=="number"))return new kf(t.vectorValues);throw new Zt(Tt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}kf._jsonSchemaVersion="firestore/vectorValue/1.0",kf._jsonSchema={type:Fi("string",kf._jsonSchemaVersion),vectorValues:Fi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mke=/^__.*__$/;class Uke{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return this.fieldMask!==null?new Hp(t,this.data,this.fieldMask,r,this.fieldTransforms):new LC(t,this.data,r,this.fieldTransforms)}}class bie{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return new Hp(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function yie(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qr(40011,{Ac:e})}}class bM{constructor(t,r,n,a,s,o){this.settings=t,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new bM({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.gc(t),n}yc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return B5(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(yie(this.Ac)&&Mke.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Hke{constructor(t,r,n){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=n||r3(t)}Cc(t,r,n,a=!1){return new bM({Ac:t,methodName:r,Dc:n,path:Ao.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gy(e){const t=e._freezeSettings(),r=r3(e._databaseId);return new Hke(e._databaseId,!!t.ignoreUndefinedProperties,r)}function yM(e,t,r,n,a,s={}){const o=e.Cc(s.merge||s.mergeFields?2:0,t,r,a);NM("Data must be an object, but it was:",o,n);const l=Eie(n,o);let c,u;if(s.merge)c=new ju(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const A=xF(t,f,r);if(!o.contains(A))throw new Zt(Tt.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);kie(d,A)||d.push(A)}c=new ju(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new Uke(new Ic(l),c,u)}class i3 extends QC{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof i3}}class wM extends QC{_toFieldTransform(t){return new PEe(t.path,new DN)}isEqual(t){return t instanceof wM}}function wie(e,t,r,n){const a=e.Cc(1,t,r);NM("Data must be an object, but it was:",a,n);const s=[],o=Ic.empty();Up(n,(c,u)=>{const d=CM(t,c,r);u=Wn(u);const f=a.yc(d);if(u instanceof i3)s.push(d);else{const A=VC(u,f);A!=null&&(s.push(d),o.set(d,A))}});const l=new ju(s);return new bie(o,l,a.fieldTransforms)}function Nie(e,t,r,n,a,s){const o=e.Cc(1,t,r),l=[xF(t,n,r)],c=[a];if(s.length%2!=0)throw new Zt(Tt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<s.length;A+=2)l.push(xF(t,s[A])),c.push(s[A+1]);const u=[],d=Ic.empty();for(let A=l.length-1;A>=0;--A)if(!kie(u,l[A])){const m=l[A];let g=c[A];g=Wn(g);const x=o.yc(m);if(g instanceof i3)u.push(m);else{const v=VC(g,x);v!=null&&(u.push(m),d.set(m,v))}}const f=new ju(u);return new bie(d,f,o.fieldTransforms)}function Cie(e,t,r,n=!1){return VC(r,e.Cc(n?4:3,t))}function VC(e,t){if(jie(e=Wn(e)))return NM("Unsupported field value:",t,e),Eie(e,t);if(e instanceof QC)return function(n,a){if(!yie(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(n,a){const s=[];let o=0;for(const l of n){let c=VC(l,a.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(e,t)}return function(n,a){if((n=Wn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return IEe(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=xr.fromDate(n);return{timestampValue:j5(a.serializer,s)}}if(n instanceof xr){const s=new xr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:j5(a.serializer,s)}}if(n instanceof jf)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof yu)return{bytesValue:Vse(a.serializer,n._byteString)};if(n instanceof Es){const s=a.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw a.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:tM(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof kf)return function(o,l){return{mapValue:{fields:{[vse]:{stringValue:bse},[w5]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return J8(l.serializer,u)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${$4(n)}`)}(e,t)}function Eie(e,t){const r={};return hse(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Up(e,(n,a)=>{const s=VC(a,t.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function jie(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof xr||e instanceof jf||e instanceof yu||e instanceof Es||e instanceof QC||e instanceof kf)}function NM(e,t,r){if(!jie(r)||!dse(r)){const n=$4(r);throw n==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+n)}}function xF(e,t,r){if((t=Wn(t))instanceof py)return t._internalPath;if(typeof t=="string")return CM(e,t);throw B5("Field path arguments must be of type string or ",e,!1,void 0,r)}const Qke=new RegExp("[~\\*/\\[\\]]");function CM(e,t,r){if(t.search(Qke)>=0)throw B5(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new py(...t.split("."))._internalPath}catch{throw B5(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function B5(e,t,r,n,a){const s=n&&!n.isEmpty(),o=a!==void 0;let l=`Function ${t}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${n}`),o&&(c+=` in document ${a}`),c+=")"),new Zt(Tt.INVALID_ARGUMENT,l+e+c)}function kie(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(t,r,n,a,s){this._firestore=t,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Es(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Vke(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(o3("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Vke extends EM{data(){return super.data()}}function o3(e,t){return typeof t=="string"?CM(e,t):t instanceof py?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sie(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Zt(Tt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jM{}class $C extends jM{}function Bt(e,t,...r){let n=[];t instanceof jM&&n.push(t),n=n.concat(r),function(s){const o=s.filter(c=>c instanceof l3).length,l=s.filter(c=>c instanceof zC).length;if(o>1||o>0&&l>0)throw new Zt(Tt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class zC extends $C{constructor(t,r,n){super(),this._field=t,this._op=r,this._value=n,this.type="where"}static _create(t,r,n){return new zC(t,r,n)}_apply(t){const r=this._parse(t);return Tie(t._query,r),new Mf(t.firestore,t.converter,lF(t._query,r))}_parse(t){const r=gy(t.firestore);return function(s,o,l,c,u,d,f){let A;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Zt(Tt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){dG(f,d);const g=[];for(const x of f)g.push(uG(c,s,x));A={arrayValue:{values:g}}}else A=uG(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||dG(f,d),A=Cie(l,o,f,d==="in"||d==="not-in");return Oi.create(u,d,A)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function sr(e,t,r){const n=t,a=o3("where",e);return zC._create(a,n,r)}class l3 extends jM{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new l3(t,r)}_parse(t){const r=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Df.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(a,s){let o=a;const l=s.getFlattenedFilters();for(const c of l)Tie(o,c),o=lF(o,c)}(t._query,r),new Mf(t.firestore,t.converter,lF(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class c3 extends $C{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new c3(t,r)}_apply(t){const r=function(a,s,o){if(a.startAt!==null)throw new Zt(Tt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Zt(Tt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new IN(s,o)}(t._query,this._field,this._direction);return new Mf(t.firestore,t.converter,function(a,s){const o=a.explicitOrderBy.concat([s]);return new Kx(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,r))}}function Xt(e,t="asc"){const r=t,n=o3("orderBy",e);return c3._create(n,r)}class u3 extends $C{constructor(t,r,n){super(),this.type=t,this._limit=r,this._limitType=n}static _create(t,r,n){return new u3(t,r,n)}_apply(t){return new Mf(t.firestore,t.converter,C5(t._query,this._limit,this._limitType))}}function Dl(e){return JCe("limit",e),u3._create("limit",e,"F")}class d3 extends $C{constructor(t,r,n){super(),this.type=t,this._docOrFields=r,this._inclusive=n}static _create(t,r,n){return new d3(t,r,n)}_apply(t){const r=$ke(t,this.type,this._docOrFields,this._inclusive);return new Mf(t.firestore,t.converter,function(a,s){return new Kx(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,s,a.endAt)}(t._query,r))}}function _ie(...e){return d3._create("startAfter",e,!1)}function $ke(e,t,r,n){if(r[0]=Wn(r[0]),r[0]instanceof EM)return function(s,o,l,c,u){if(!c)throw new Zt(Tt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const d=[];for(const f of Jb(s))if(f.field.isKeyField())d.push(N5(o,c.key));else{const A=c.data.field(f.field);if(q4(A))throw new Zt(Tt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(A===null){const m=f.field.canonicalString();throw new Zt(Tt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(A)}return new k1(d,u)}(e._query,e.firestore._databaseId,t,r[0]._document,n);{const a=gy(e.firestore);return function(o,l,c,u,d,f){const A=o.explicitOrderBy;if(d.length>A.length)throw new Zt(Tt.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let g=0;g<d.length;g++){const x=d[g];if(A[g].field.isKeyField()){if(typeof x!="string")throw new Zt(Tt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof x}`);if(!Y8(o)&&x.indexOf("/")!==-1)throw new Zt(Tt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${x}' contains a slash.`);const v=o.path.child(Ua.fromString(x));if(!jr.isDocumentKey(v))throw new Zt(Tt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const y=new jr(v);m.push(N5(l,y))}else{const v=Cie(c,u,x);m.push(v)}}return new k1(m,f)}(e._query,e.firestore._databaseId,a,t,r,n)}}function uG(e,t,r){if(typeof(r=Wn(r))=="string"){if(r==="")throw new Zt(Tt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Y8(t)&&r.indexOf("/")!==-1)throw new Zt(Tt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=t.path.child(Ua.fromString(r));if(!jr.isDocumentKey(n))throw new Zt(Tt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return N5(e,new jr(n))}if(r instanceof Es)return N5(e,r._key);throw new Zt(Tt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$4(r)}.`)}function dG(e,t){if(!Array.isArray(e)||e.length===0)throw new Zt(Tt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Tie(e,t){const r=function(a,s){for(const o of a)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new Zt(Tt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Zt(Tt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class Bie{convertValue(t,r="none"){switch(Np(t)){case 0:return null;case 1:return t.booleanValue;case 2:return fi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(wp(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw qr(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const n={};return Up(t,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(t){var n,a,s;const r=(s=(a=(n=t.fields)==null?void 0:n[w5].arrayValue)==null?void 0:a.values)==null?void 0:s.map(o=>fi(o.doubleValue));return new kf(r)}convertGeoPoint(t){return new jf(fi(t.latitude),fi(t.longitude))}convertArray(t,r){return(t.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(t,r){switch(r){case"previous":const n=K4(t);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(TN(t));default:return null}}convertTimestamp(t){const r=yp(t);return new xr(r.seconds,r.nanos)}convertDocumentKey(t,r){const n=Ua.fromString(t);ga(Wse(n),9688,{name:t});const a=new C1(n.get(1),n.get(3)),s=new jr(n.popFirst(5));return a.isEqual(r)||xA(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(e,t,r){let n;return n=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,n}class Tb{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class cp extends EM{constructor(t,r,n,a,s,o){super(t,r,n,a,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new z2(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const n=this._document.data.field(o3("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Zt(Tt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=cp._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}cp._jsonSchemaVersion="firestore/documentSnapshot/1.0",cp._jsonSchema={type:Fi("string",cp._jsonSchemaVersion),bundleSource:Fi("string","DocumentSnapshot"),bundleName:Fi("string"),bundle:Fi("string")};class z2 extends cp{data(t={}){return super.data(t)}}class up{constructor(t,r,n,a){this._firestore=t,this._userDataWriter=r,this._snapshot=a,this.metadata=new Tb(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(n=>{t.call(r,new z2(this._firestore,this._userDataWriter,n.key,n,new Tb(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Zt(Tt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map(l=>{const c=new z2(a._firestore,a._userDataWriter,l.doc.key,l.doc,new Tb(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new z2(a._firestore,a._userDataWriter,l.doc.key,l.doc,new Tb(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:zke(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Zt(Tt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=up._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=V4.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function zke(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qr(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(e){e=Il(e,Es);const t=Il(e.firestore,Of);return Fke(my(t),e._key).then(r=>Iie(t,e,r))}up._jsonSchemaVersion="firestore/querySnapshot/1.0",up._jsonSchema={type:Fi("string",up._jsonSchemaVersion),bundleSource:Fi("string","QuerySnapshot"),bundleName:Fi("string"),bundle:Fi("string")};class SM extends Bie{constructor(t){super(),this.firestore=t}convertBytes(t){return new yu(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new Es(this.firestore,null,r)}}function Ir(e){e=Il(e,Mf);const t=Il(e.firestore,Of),r=my(t),n=new SM(t);return Sie(e._query),Rke(r,e._query).then(a=>new up(t,n,e,a))}function bi(e,t,r){e=Il(e,Es);const n=Il(e.firestore,Of),a=kM(e.converter,t,r);return xy(n,[yM(gy(n),"setDoc",e._key,a,e.converter!==null,r).toMutation(e._key,rc.none())])}function qi(e,t,r,...n){e=Il(e,Es);const a=Il(e.firestore,Of),s=gy(a);let o;return o=typeof(t=Wn(t))=="string"||t instanceof py?Nie(s,"updateDoc",e._key,t,r,n):wie(s,"updateDoc",e._key,t),xy(a,[o.toMutation(e._key,rc.exists(!0))])}function ca(e){return xy(Il(e.firestore,Of),[new e3(e._key,rc.none())])}function ln(e,t){const r=Il(e.firestore,Of),n=Wt(e),a=kM(e.converter,t);return xy(r,[yM(gy(e.firestore),"addDoc",n._key,a,e.converter!==null,{}).toMutation(n._key,rc.exists(!1))]).then(()=>n)}function lr(e,...t){var c,u,d;e=Wn(e);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof t[n]!="object"||cG(t[n])||(r=t[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(cG(t[n])){const f=t[n];t[n]=(c=f.next)==null?void 0:c.bind(f),t[n+1]=(u=f.error)==null?void 0:u.bind(f),t[n+2]=(d=f.complete)==null?void 0:d.bind(f)}let s,o,l;if(e instanceof Es)o=Il(e.firestore,Of),l=W4(e._key.path),s={next:f=>{t[n]&&t[n](Iie(o,e,f))},error:t[n+1],complete:t[n+2]};else{const f=Il(e,Mf);o=Il(f.firestore,Of),l=f._query;const A=new SM(o);s={next:m=>{t[n]&&t[n](new up(o,A,f,m))},error:t[n+1],complete:t[n+2]},Sie(e._query)}return function(A,m,g,x){const v=new xM(x),y=new mM(m,v,g);return A.asyncQueue.enqueueAndForget(async()=>fM(await T5(A),y)),()=>{v.Nu(),A.asyncQueue.enqueueAndForget(async()=>hM(await T5(A),y))}}(my(o),l,a,s)}function xy(e,t){return function(n,a){const s=new nA;return n.asyncQueue.enqueueAndForget(async()=>Cke(await Pke(n),a,s)),s.promise}(my(e),t)}function Iie(e,t,r){const n=r.docs.get(t._key),a=new SM(e);return new cp(e,a,t._key,n,new Tb(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Die{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=gy(t)}set(t,r,n){this._verifyNotCommitted();const a=zI(t,this._firestore),s=kM(a.converter,r,n),o=yM(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(o.toMutation(a._key,rc.none())),this}update(t,r,n,...a){this._verifyNotCommitted();const s=zI(t,this._firestore);let o;return o=typeof(r=Wn(r))=="string"||r instanceof py?Nie(this._dataReader,"WriteBatch.update",s._key,r,n,a):wie(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(o.toMutation(s._key,rc.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=zI(t,this._firestore);return this._mutations=this._mutations.concat(new e3(r._key,rc.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Zt(Tt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zI(e,t){if((e=Wn(e)).firestore!==t)throw new Zt(Tt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function zn(){return new wM("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(e){return my(e=Il(e,Of)),new Die(e,t=>xy(e,t))}(function(t,r=!0){(function(a){dy=a})(Gx),e0(new Bf("firestore",(n,{instanceIdentifier:a,options:s})=>{const o=n.getProvider("app").getImmediate(),l=new Of(new $Ce(n.getProvider("auth-internal")),new qCe(o,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Zt(Tt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new C1(u.options.projectId,d)}(o,a),o);return s={useFetchStreams:r,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Su(Az,mz,t),Su(Az,mz,"esm2020")})();const T1=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Bie,Bytes:yu,CollectionReference:aA,DocumentReference:Es,DocumentSnapshot:cp,FieldPath:py,FieldValue:QC,Firestore:Of,FirestoreError:Zt,GeoPoint:jf,Query:Mf,QueryCompositeFilterConstraint:l3,QueryConstraint:$C,QueryDocumentSnapshot:z2,QueryFieldFilterConstraint:zC,QueryLimitConstraint:u3,QueryOrderByConstraint:c3,QuerySnapshot:up,QueryStartAtConstraint:d3,SnapshotMetadata:Tb,Timestamp:xr,VectorValue:kf,WriteBatch:Die,_AutoId:V4,_ByteString:vo,_DatabaseId:C1,_DocumentKey:jr,_EmptyAuthCredentialsProvider:lse,_FieldPath:Ao,_cast:Il,_logWarn:kx,_validateIsNotUsedTogether:use,addDoc:ln,collection:ht,connectFirestoreEmulator:vie,deleteDoc:ca,doc:Wt,ensureFirestoreConfigured:my,executeWrite:xy,getDoc:bA,getDocs:Ir,getFirestore:vM,limit:Dl,onSnapshot:lr,orderBy:Xt,query:Bt,serverTimestamp:zn,setDoc:bi,setLogLevel:QCe,startAfter:_ie,updateDoc:qi,where:sr,writeBatch:Qp},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oie="firebasestorage.googleapis.com",Pie="storageBucket",Gke=120*1e3,qke=600*1e3,Kke=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends Lf{constructor(t,r,n=0){super(GI(t),`Firebase Storage: ${r} (${GI(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,gs.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return GI(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Wa;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Wa||(Wa={}));function GI(e){return"storage/"+e}function _M(){const e="An unknown error occurred, please check the error payload for server response.";return new gs(Wa.UNKNOWN,e)}function Wke(e){return new gs(Wa.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function Xke(e){return new gs(Wa.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Yke(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new gs(Wa.UNAUTHENTICATED,e)}function Jke(){return new gs(Wa.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Zke(e){return new gs(Wa.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function Fie(){return new gs(Wa.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Rie(){return new gs(Wa.CANCELED,"User canceled the upload/download.")}function eSe(e){return new gs(Wa.INVALID_URL,"Invalid URL '"+e+"'.")}function tSe(e){return new gs(Wa.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function rSe(){return new gs(Wa.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Pie+"' property when initializing the app?")}function Lie(){return new gs(Wa.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function nSe(){return new gs(Wa.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function aSe(){return new gs(Wa.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function sSe(e){return new gs(Wa.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function I5(e){return new gs(Wa.INVALID_ARGUMENT,e)}function Mie(){return new gs(Wa.APP_DELETED,"The Firebase app was deleted.")}function Uie(e){return new gs(Wa.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function G2(e,t){return new gs(Wa.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Ow(e){throw new gs(Wa.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let n;try{n=_l.makeFromUrl(t,r)}catch{return new _l(t,"")}if(n.path==="")return n;throw tSe(t)}static makeFromUrl(t,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function s(_){_.path.charAt(_.path.length-1)==="/"&&(_.path_=_.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+a+o,"i"),c={bucket:1,path:3};function u(_){_.path_=decodeURIComponent(_.path)}const d="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${d}/b/${a}/o${A}`,"i"),g={bucket:1,path:3},x=r===Oie?"(?:storage.googleapis.com|storage.cloud.google.com)":r,v="([^?#]*)",y=new RegExp(`^https?://${x}/${a}/${v}`,"i"),C=[{regex:l,indices:c,postModify:s},{regex:m,indices:g,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let _=0;_<C.length;_++){const j=C[_],I=j.regex.exec(t);if(I){const T=I[j.indices.bucket];let k=I[j.indices.path];k||(k=""),n=new _l(T,k),j.postModify(n);break}}if(n==null)throw eSe(t);return n}}class iSe{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oSe(e,t,r){let n=1,a=null,s=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(...v){u||(u=!0,t.apply(null,v))}function f(v){a=setTimeout(()=>{a=null,e(m,c())},v)}function A(){s&&clearTimeout(s)}function m(v,...y){if(u){A();return}if(v){A(),d.call(null,v,...y);return}if(c()||o){A(),d.call(null,v,...y);return}n<64&&(n*=2);let C;l===1?(l=2,C=0):C=(n+Math.random())*1e3,f(C)}let g=!1;function x(v){g||(g=!0,A(),!u&&(a!==null?(v||(l=2),clearTimeout(a),f(0)):v||(l=1)))}return f(0),s=setTimeout(()=>{o=!0,x(!0)},r),x}function lSe(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cSe(e){return e!==void 0}function uSe(e){return typeof e=="function"}function dSe(e){return typeof e=="object"&&!Array.isArray(e)}function f3(e){return typeof e=="string"||e instanceof String}function fG(e){return TM()&&e instanceof Blob}function TM(){return typeof Blob<"u"}function vF(e,t,r,n){if(n<t)throw I5(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw I5(`Invalid value for '${e}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(e,t,r){let n=t;return r==null&&(n=`https://${t}`),`${r}://${n}/v0${e}`}function Hie(e){const t=encodeURIComponent;let r="?";for(const n in e)if(e.hasOwnProperty(n)){const a=t(n)+"="+t(e[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var sx;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(sx||(sx={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qie(e,t){const r=e>=500&&e<600,a=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return r||a||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fSe{constructor(t,r,n,a,s,o,l,c,u,d,f,A=!0,m=!1){this.url_=t,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=A,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,x)=>{this.resolve_=g,this.reject_=x,this.start_()})}start_(){const t=(n,a)=>{if(a){n(!1,new Uj(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===sx.NO_ERROR,c=s.getStatus();if(!l||Qie(c,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===sx.ABORT;n(!1,new Uj(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;n(!0,new Uj(u,s))})},r=(n,a)=>{const s=this.resolve_,o=this.reject_,l=a.connection;if(a.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());cSe(c)?s(c):s()}catch(c){o(c)}else if(l!==null){const c=_M();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(a.canceled){const c=this.appDelete_?Mie():Rie();o(c)}else{const c=Fie();o(c)}};this.canceled_?r(!1,new Uj(!1,null,!0)):this.backoffId_=oSe(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&lSe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Uj{constructor(t,r,n){this.wasSuccessCode=t,this.connection=r,this.canceled=!!n}}function hSe(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function ASe(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function mSe(e,t){t&&(e["X-Firebase-GMPID"]=t)}function pSe(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function gSe(e,t,r,n,a,s,o=!0,l=!1){const c=Hie(e.urlParams),u=e.url+c,d=Object.assign({},e.headers);return mSe(d,t),hSe(d,r),ASe(d,s),pSe(d,n),new fSe(u,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xSe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function vSe(...e){const t=xSe();if(t!==void 0){const r=new t;for(let n=0;n<e.length;n++)r.append(e[n]);return r.getBlob()}else{if(TM())return new Blob(e);throw new gs(Wa.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function bSe(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ySe(e){if(typeof atob>"u")throw sSe("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class qI{constructor(t,r){this.data=t,this.contentType=r||null}}function Vie(e,t){switch(e){case bf.RAW:return new qI($ie(t));case bf.BASE64:case bf.BASE64URL:return new qI(zie(e,t));case bf.DATA_URL:return new qI(NSe(t),CSe(t))}throw _M()}function $ie(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n<=127)t.push(n);else if(n<=2047)t.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<e.length-1&&(e.charCodeAt(r+1)&64512)===56320))t.push(239,191,189);else{const s=n,o=e.charCodeAt(++r);n=65536|(s&1023)<<10|o&1023,t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(t)}function wSe(e){let t;try{t=decodeURIComponent(e)}catch{throw G2(bf.DATA_URL,"Malformed data URL.")}return $ie(t)}function zie(e,t){switch(e){case bf.BASE64:{const a=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(a||s)throw G2(e,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case bf.BASE64URL:{const a=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(a||s)throw G2(e,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=ySe(t)}catch(a){throw a.message.includes("polyfill")?a:G2(e,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class Gie{constructor(t){this.base64=!1,this.contentType=null;const r=t.match(/^data:([^,]+)?,/);if(r===null)throw G2(bf.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=ESe(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}function NSe(e){const t=new Gie(e);return t.base64?zie(bf.BASE64,t.rest):wSe(t.rest)}function CSe(e){return new Gie(e).contentType}function ESe(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(t,r){let n=0,a="";fG(t)?(this.data_=t,n=t.size,a=t.type):t instanceof ArrayBuffer?(r?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(r?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(t,r){if(fG(this.data_)){const n=this.data_,a=bSe(n,t,r);return a===null?null:new Th(a)}else{const n=new Uint8Array(this.data_.buffer,t,r-t);return new Th(n,!0)}}static getBlob(...t){if(TM()){const r=t.map(n=>n instanceof Th?n.data_:n);return new Th(vSe.apply(null,r))}else{const r=t.map(o=>f3(o)?Vie(bf.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const a=new Uint8Array(n);let s=0;return r.forEach(o=>{for(let l=0;l<o.length;l++)a[s++]=o[l]}),new Th(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BM(e){let t;try{t=JSON.parse(e)}catch{return null}return dSe(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jSe(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function kSe(e,t){const r=t.split("/").filter(n=>n.length>0).join("/");return e.length===0?r:e+"/"+r}function qie(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SSe(e,t){return t}class ql{constructor(t,r,n,a){this.server=t,this.local=r||t,this.writable=!!n,this.xform=a||SSe}}let Hj=null;function _Se(e){return!f3(e)||e.length<2?e:qie(e)}function IM(){if(Hj)return Hj;const e=[];e.push(new ql("bucket")),e.push(new ql("generation")),e.push(new ql("metageneration")),e.push(new ql("name","fullPath",!0));function t(s,o){return _Se(o)}const r=new ql("name");r.xform=t,e.push(r);function n(s,o){return o!==void 0?Number(o):o}const a=new ql("size");return a.xform=n,e.push(a),e.push(new ql("timeCreated")),e.push(new ql("updated")),e.push(new ql("md5Hash",null,!0)),e.push(new ql("cacheControl",null,!0)),e.push(new ql("contentDisposition",null,!0)),e.push(new ql("contentEncoding",null,!0)),e.push(new ql("contentLanguage",null,!0)),e.push(new ql("contentType",null,!0)),e.push(new ql("metadata","customMetadata",!0)),Hj=e,Hj}function TSe(e,t){function r(){const n=e.bucket,a=e.fullPath,s=new _l(n,a);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:r})}function BSe(e,t,r){const n={};n.type="file";const a=r.length;for(let s=0;s<a;s++){const o=r[s];n[o.local]=o.xform(n,t[o.server])}return TSe(n,e),n}function Kie(e,t,r){const n=BM(t);return n===null?null:BSe(e,n,r)}function ISe(e,t,r,n){const a=BM(t);if(a===null||!f3(a.downloadTokens))return null;const s=a.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const d=e.bucket,f=e.fullPath,A="/b/"+o(d)+"/o/"+o(f),m=Yx(A,r,n),g=Hie({alt:"media",token:u});return m+g})[0]}function Wie(e,t){const r={},n=t.length;for(let a=0;a<n;a++){const s=t[a];s.writable&&(r[s.server]=e[s.local])}return JSON.stringify(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hG="prefixes",AG="items";function DSe(e,t,r){const n={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[hG])for(const a of r[hG]){const s=a.replace(/\/$/,""),o=e._makeStorageReference(new _l(t,s));n.prefixes.push(o)}if(r[AG])for(const a of r[AG]){const s=e._makeStorageReference(new _l(t,a.name));n.items.push(s)}return n}function OSe(e,t,r){const n=BM(r);return n===null?null:DSe(e,t,n)}class Vp{constructor(t,r,n,a){this.url=t,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(e){if(!e)throw _M()}function DM(e,t){function r(n,a){const s=Kie(e,a,t);return Gh(s!==null),s}return r}function PSe(e,t){function r(n,a){const s=OSe(e,t,a);return Gh(s!==null),s}return r}function FSe(e,t){function r(n,a){const s=Kie(e,a,t);return Gh(s!==null),ISe(s,a,e.host,e._protocol)}return r}function vy(e){function t(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=Jke():a=Yke():r.getStatus()===402?a=Xke(e.bucket):r.getStatus()===403?a=Zke(e.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return t}function OM(e){const t=vy(e);function r(n,a){let s=t(n,a);return n.getStatus()===404&&(s=Wke(e.path)),s.serverResponse=a.serverResponse,s}return r}function RSe(e,t,r){const n=t.fullServerUrl(),a=Yx(n,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,l=new Vp(a,s,DM(e,r),o);return l.errorHandler=OM(t),l}function LSe(e,t,r,n,a){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",r.length>0&&(s.delimiter=r),n&&(s.pageToken=n),a&&(s.maxResults=a);const o=t.bucketOnlyServerUrl(),l=Yx(o,e.host,e._protocol),c="GET",u=e.maxOperationRetryTime,d=new Vp(l,c,PSe(e,t.bucket),u);return d.urlParams=s,d.errorHandler=vy(t),d}function MSe(e,t,r){const n=t.fullServerUrl(),a=Yx(n,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,l=new Vp(a,s,FSe(e,r),o);return l.errorHandler=OM(t),l}function USe(e,t){const r=t.fullServerUrl(),n=Yx(r,e.host,e._protocol),a="DELETE",s=e.maxOperationRetryTime;function o(c,u){}const l=new Vp(n,a,o,s);return l.successCodes=[200,204],l.errorHandler=OM(t),l}function HSe(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function Xie(e,t,r){const n=Object.assign({},r);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=HSe(null,t)),n}function Yie(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let C="";for(let _=0;_<2;_++)C=C+Math.random().toString().slice(2);return C}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=Xie(t,n,a),d=Wie(u,r),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,A=`\r
--`+c+"--",m=Th.getBlob(f,n,A);if(m===null)throw Lie();const g={name:u.fullPath},x=Yx(s,e.host,e._protocol),v="POST",y=e.maxUploadRetryTime,N=new Vp(x,v,DM(e,r),y);return N.urlParams=g,N.headers=o,N.body=m.uploadData(),N.errorHandler=vy(t),N}class D5{constructor(t,r,n,a){this.current=t,this.total=r,this.finalized=!!n,this.metadata=a||null}}function PM(e,t){let r=null;try{r=e.getResponseHeader("X-Goog-Upload-Status")}catch{Gh(!1)}return Gh(!!r&&(t||["active"]).indexOf(r)!==-1),r}function QSe(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),o=Xie(t,n,a),l={name:o.fullPath},c=Yx(s,e.host,e._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},f=Wie(o,r),A=e.maxUploadRetryTime;function m(x){PM(x);let v;try{v=x.getResponseHeader("X-Goog-Upload-URL")}catch{Gh(!1)}return Gh(f3(v)),v}const g=new Vp(c,u,m,A);return g.urlParams=l,g.headers=d,g.body=f,g.errorHandler=vy(t),g}function VSe(e,t,r,n){const a={"X-Goog-Upload-Command":"query"};function s(u){const d=PM(u,["active","final"]);let f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Gh(!1)}f||Gh(!1);const A=Number(f);return Gh(!isNaN(A)),new D5(A,n.size(),d==="final")}const o="POST",l=e.maxUploadRetryTime,c=new Vp(r,o,s,l);return c.headers=a,c.errorHandler=vy(t),c}const mG=256*1024;function $Se(e,t,r,n,a,s,o,l){const c=new D5(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=n.size()),n.size()!==c.total)throw nSe();const u=c.total-c.current;let d=u;a>0&&(d=Math.min(d,a));const f=c.current,A=f+d;let m="";d===0?m="finalize":u===d?m="upload, finalize":m="upload";const g={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${c.current}`},x=n.slice(f,A);if(x===null)throw Lie();function v(_,j){const I=PM(_,["active","final"]),T=c.current+d,k=n.size();let B;return I==="final"?B=DM(t,s)(_,j):B=null,new D5(T,k,I==="final",B)}const y="POST",N=t.maxUploadRetryTime,C=new Vp(r,y,v,N);return C.headers=g,C.body=x.uploadData(),C.progressCallback=l||null,C.errorHandler=vy(e),C}const Xl={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function KI(e){switch(e){case"running":case"pausing":case"canceling":return Xl.RUNNING;case"paused":return Xl.PAUSED;case"success":return Xl.SUCCESS;case"canceled":return Xl.CANCELED;case"error":return Xl.ERROR;default:return Xl.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zSe{constructor(t,r,n){if(uSe(t)||r!=null||n!=null)this.next=t,this.error=r??void 0,this.complete=n??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}class GSe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=sx.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=sx.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=sx.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,r,n,a,s){if(this.sent_)throw Ow("cannot .send() more than once");if(FA(t)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,t,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ow("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ow("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ow("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ow("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class qSe extends GSe{initXhr(){this.xhr_.responseType="text"}}function z0(){return new qSe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jie{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(t,r,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=r,this._metadata=n,this._mappings=IM(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(Wa.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(Qie(a.status,[]))if(s)a=Fie();else{this.sleepTime=Math.max(this.sleepTime*2,Kke),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(Wa.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,s)=>{this._resolve=a,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return r=>this._updateProgress(t+r)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,n])=>{switch(this._state){case"running":t(r,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,r)=>{const n=QSe(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,z0,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((r,n)=>{const a=VSe(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(a,z0,r,n);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=mG*this._chunkMultiplier,r=new D5(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((a,s)=>{let o;try{o=$Se(this._ref._location,this._ref.storage,n,this._blob,t,this._mappings,r,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const l=this._ref.storage._makeRequest(o,z0,a,s,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){mG*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,r)=>{const n=RSe(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(n,z0,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,r)=>{const n=Yie(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,z0,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const r=this._transferred;this._transferred=t,this._transferred!==r&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const r=this._state==="paused";this._state=t,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Rie(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const t=KI(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,r,n,a){const s=new zSe(r||void 0,n||void 0,a||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,r){return this._promise.then(t,r)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const r=this._observers.indexOf(t);r!==-1&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(KI(this._state)){case Xl.SUCCESS:Vv(this._resolve.bind(null,this.snapshot))();break;case Xl.CANCELED:case Xl.ERROR:const r=this._reject;Vv(r.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(KI(this._state)){case Xl.RUNNING:case Xl.PAUSED:t.next&&Vv(t.next.bind(t,this.snapshot))();break;case Xl.SUCCESS:t.complete&&Vv(t.complete.bind(t))();break;case Xl.CANCELED:case Xl.ERROR:t.error&&Vv(t.error.bind(t,this._error))();break;default:t.error&&Vv(t.error.bind(t,this._error))()}}resume(){const t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){const t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){const t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(t,r){this._service=t,r instanceof _l?this._location=r:this._location=_l.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new _x(t,r)}get root(){const t=new _l(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return qie(this._location.path)}get storage(){return this._service}get parent(){const t=jSe(this._location.path);if(t===null)return null;const r=new _l(this._location.bucket,t);return new _x(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw Uie(t)}}function KSe(e,t,r){e._throwIfRoot("uploadBytes");const n=Yie(e.storage,e._location,IM(),new Th(t,!0),r);return e.storage.makeRequestWithTokens(n,z0).then(a=>({metadata:a,ref:e}))}function WSe(e,t,r){return e._throwIfRoot("uploadBytesResumable"),new Jie(e,new Th(t),r)}function XSe(e){const t={prefixes:[],items:[]};return Zie(e,t).then(()=>t)}async function Zie(e,t,r){const a=await YSe(e,{pageToken:r});t.prefixes.push(...a.prefixes),t.items.push(...a.items),a.nextPageToken!=null&&await Zie(e,t,a.nextPageToken)}function YSe(e,t){t!=null&&typeof t.maxResults=="number"&&vF("options.maxResults",1,1e3,t.maxResults);const r=t||{},n=LSe(e.storage,e._location,"/",r.pageToken,r.maxResults);return e.storage.makeRequestWithTokens(n,z0)}function JSe(e){e._throwIfRoot("getDownloadURL");const t=MSe(e.storage,e._location,IM());return e.storage.makeRequestWithTokens(t,z0).then(r=>{if(r===null)throw aSe();return r})}function ZSe(e){e._throwIfRoot("deleteObject");const t=USe(e.storage,e._location);return e.storage.makeRequestWithTokens(t,z0)}function e5e(e,t){const r=kSe(e._location.path,t),n=new _l(e._location.bucket,r);return new _x(e.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t5e(e){return/^[A-Za-z]+:\/\//.test(e)}function r5e(e,t){return new _x(e,t)}function eoe(e,t){if(e instanceof FM){const r=e;if(r._bucket==null)throw rSe();const n=new _x(r,r._bucket);return t!=null?eoe(n,t):n}else return t!==void 0?e5e(e,t):e}function n5e(e,t){if(t&&t5e(t)){if(e instanceof FM)return r5e(e,t);throw I5("To use ref(service, url), the first argument must be a Storage instance.")}else return eoe(e,t)}function pG(e,t){const r=t==null?void 0:t[Pie];return r==null?null:_l.makeFromBucketSpec(r,e)}function a5e(e,t,r,n={}){e.host=`${t}:${r}`;const a=FA(t);a&&(P4(`https://${e.host}/b`),F4("Storage",!0)),e._isUsingEmulator=!0,e._protocol=a?"https":"http";const{mockUserToken:s}=n;s&&(e._overrideAuthToken=typeof s=="string"?s:rae(s,e.app.options.projectId))}class FM{constructor(t,r,n,a,s,o=!1){this.app=t,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=Oie,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Gke,this._maxUploadRetryTime=qke,this._requests=new Set,a!=null?this._bucket=_l.makeFromBucketSpec(a,this._host):this._bucket=pG(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=_l.makeFromBucketSpec(this._url,t):this._bucket=pG(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){vF("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){vF("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(bu(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new _x(this,t)}_makeRequest(t,r,n,a,s=!0){if(this._deleted)return new iSe(Mie());{const o=gSe(t,this._appId,n,a,r,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,n,a).getPromise()}}const gG="@firebase/storage",xG="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const toe="storage";function by(e,t,r){return e=Wn(e),KSe(e,t,r)}function RM(e,t,r){return e=Wn(e),WSe(e,t,r)}function roe(e){return e=Wn(e),XSe(e)}function LA(e){return e=Wn(e),JSe(e)}function h3(e){return e=Wn(e),ZSe(e)}function Od(e,t){return e=Wn(e),n5e(e,t)}function A3(e=DC(),t){e=Wn(e);const n=zx(e,toe).getImmediate({identifier:t}),a=_8("storage");return a&&noe(n,...a),n}function noe(e,t,r,n={}){a5e(e,t,r,n)}function s5e(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new FM(r,n,a,t,Gx)}function i5e(){e0(new Bf(toe,s5e,"PUBLIC").setMultipleInstances(!0)),Su(gG,xG,""),Su(gG,xG,"esm2020")}i5e();const o5e=Object.freeze(Object.defineProperty({__proto__:null,StorageError:gs,get StorageErrorCode(){return Wa},StringFormat:bf,_FbsBlob:Th,_Location:_l,_TaskState:Xl,_UploadTask:Jie,_dataFromString:Vie,_invalidArgument:I5,_invalidRootOperation:Uie,connectStorageEmulator:noe,deleteObject:h3,getDownloadURL:LA,getStorage:A3,listAll:roe,ref:Od,uploadBytes:by,uploadBytesResumable:RM},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5e="type.googleapis.com/google.protobuf.Int64Value",c5e="type.googleapis.com/google.protobuf.UInt64Value";function aoe(e,t){const r={};for(const n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}function O5(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>O5(t));if(typeof e=="function"||typeof e=="object")return aoe(e,t=>O5(t));throw new Error("Data cannot be encoded in JSON: "+e)}function B1(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case l5e:case c5e:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>B1(t)):typeof e=="function"||typeof e=="object"?aoe(e,t=>B1(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vG={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pc extends Lf{constructor(t,r,n){super(`${LM}/${t}`,r||""),this.details=n,Object.setPrototypeOf(this,Pc.prototype)}}function u5e(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function P5(e,t){let r=u5e(e),n=r,a;try{const s=t&&t.error;if(s){const o=s.status;if(typeof o=="string"){if(!vG[o])return new Pc("internal","internal");r=vG[o],n=o}const l=s.message;typeof l=="string"&&(n=l),a=s.details,a!==void 0&&(a=B1(a))}}catch{}return r==="ok"?null:new Pc(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5e{constructor(t,r,n,a){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,bu(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||a==null||a.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(t);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF="us-central1",f5e=/^data: (.*?)(?:\n|$)/;function h5e(e){let t=null;return{promise:new Promise((r,n)=>{t=setTimeout(()=>{n(new Pc("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class A5e{constructor(t,r,n,a,s=bF,o=(...l)=>fetch(...l)){this.app=t,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new d5e(t,r,n,a),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(s);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=bF}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function m5e(e,t,r){const n=FA(t);e.emulatorOrigin=`http${n?"s":""}://${t}:${r}`,n&&(P4(e.emulatorOrigin),F4("Functions",!0))}function p5e(e,t,r){const n=a=>x5e(e,t,a,{});return n.stream=(a,s)=>b5e(e,t,a,s),n}async function g5e(e,t,r,n){r["Content-Type"]="application/json";let a;try{a=await n(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function soe(e,t){const r={},n=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function x5e(e,t,r,n){const a=e._url(t);return v5e(e,a,r,n)}async function v5e(e,t,r,n){r=O5(r);const a={data:r},s=await soe(e,n),o=n.timeout||7e4,l=h5e(o),c=await Promise.race([g5e(t,a,s,e.fetchImpl),l.promise,e.cancelAllRequests]);if(l.cancel(),!c)throw new Pc("cancelled","Firebase Functions instance was deleted.");const u=P5(c.status,c.json);if(u)throw u;if(!c.json)throw new Pc("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new Pc("internal","Response is missing data field.");return{data:B1(d)}}function b5e(e,t,r,n){const a=e._url(t);return y5e(e,a,r,n||{})}async function y5e(e,t,r,n){var A;r=O5(r);const a={data:r},s=await soe(e,n);s["Content-Type"]="application/json",s.Accept="text/event-stream";let o;try{o=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(a),headers:s,signal:n==null?void 0:n.signal})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const x=new Pc("cancelled","Request was cancelled.");return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}const g=P5(0,null);return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}let l,c;const u=new Promise((m,g)=>{l=m,c=g});(A=n==null?void 0:n.signal)==null||A.addEventListener("abort",()=>{const m=new Pc("cancelled","Request was cancelled.");c(m)});const d=o.body.getReader(),f=w5e(d,l,c,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const m=f.getReader();return{async next(){const{value:g,done:x}=await m.read();return{value:g,done:x}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:u}}function w5e(e,t,r,n){const a=(o,l)=>{const c=o.match(f5e);if(!c)return;const u=c[1];try{const d=JSON.parse(u);if("result"in d){t(B1(d.result));return}if("message"in d){l.enqueue(B1(d.message));return}if("error"in d){const f=P5(0,d);l.error(f),r(f);return}}catch(d){if(d instanceof Pc){l.error(d),r(d);return}}},s=new TextDecoder;return new ReadableStream({start(o){let l="";return c();async function c(){if(n!=null&&n.aborted){const u=new Pc("cancelled","Request was cancelled");return o.error(u),r(u),Promise.resolve()}try{const{value:u,done:d}=await e.read();if(d){l.trim()&&a(l.trim(),o),o.close();return}if(n!=null&&n.aborted){const A=new Pc("cancelled","Request was cancelled");o.error(A),r(A),await e.cancel();return}l+=s.decode(u,{stream:!0});const f=l.split(`
`);l=f.pop()||"";for(const A of f)A.trim()&&a(A.trim(),o);return c()}catch(u){const d=u instanceof Pc?u:P5(0,null);o.error(d),r(d)}}},cancel(){return e.cancel()}})}const bG="@firebase/functions",yG="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5e="auth-internal",C5e="app-check-internal",E5e="messaging-internal";function j5e(e){const t=(r,{instanceIdentifier:n})=>{const a=r.getProvider("app").getImmediate(),s=r.getProvider(N5e),o=r.getProvider(E5e),l=r.getProvider(C5e);return new A5e(a,s,o,l,n)};e0(new Bf(LM,t,"PUBLIC").setMultipleInstances(!0)),Su(bG,yG,e),Su(bG,yG,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(e=DC(),t=bF){const n=zx(Wn(e),LM).getImmediate({identifier:t}),a=_8("functions");return a&&k5e(n,...a),n}function k5e(e,t,r){m5e(Wn(e),t,r)}function vl(e,t,r){return p5e(Wn(e),t)}j5e();const $v={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyBX_n9qoSh0N2c1OAPurBAl6FC9ltX4tK0",VITE_FIREBASE_APP_ID:"1:978612067917:web:299137755ec80939d7c604",VITE_FIREBASE_AUTH_DOMAIN:"plania-clase.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"978612067917",VITE_FIREBASE_PROJECT_ID:"plania-clase",VITE_FIREBASE_STORAGE_BUCKET:"plania-clase.firebasestorage.app",VITE_GOOGLE_MAPS_API_KEY:"AIzaSyDjpSq97TvCxx7jIY7fEapTysmiZ1H30bg"},S5e={apiKey:"AIzaSyBX_n9qoSh0N2c1OAPurBAl6FC9ltX4tK0",authDomain:"plania-clase.firebaseapp.com",projectId:"plania-clase",storageBucket:"plania-clase.firebasestorage.app",messagingSenderId:"978612067917",appId:"1:978612067917:web:299137755ec80939d7c604"},Jx=I8(S5e),oa=Hae(Jx),Ar=vM(Jx),Zx=A3(Jx),Tx=$0(Jx,"us-central1");try{const e=($v==null?void 0:$v.VITE_APPCHECK_SITE_KEY)||($v==null?void 0:$v.VITE_RECAPTCHA_V3_SITE_KEY);e?LCe(Jx,{provider:new z8(e),isTokenAutoRefreshEnabled:!0}):console.warn("[AppCheck] Falta VITE_APPCHECK_SITE_KEY o VITE_RECAPTCHA_V3_SITE_KEY. Las funciones con App Check pueden fallar.")}catch{}const MM=Object.freeze(Object.defineProperty({__proto__:null,app:Jx,auth:oa,db:Ar,functions:Tx,storage:Zx},Symbol.toStringTag,{value:"Module"})),_5e=async(e,t)=>{try{return(await U2e(oa,e,t)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},WI=async()=>{try{await V2e(oa)}catch(e){throw console.error("Error en logoutUser helper:",e),e}},T5e=async e=>{try{await M2e(oa,e)}catch(t){throw console.error("Error en resetPassword helper:",t),t}},ioe=async e=>{try{const t=Wt(Ar,"usuarios",e),r=await bA(t);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontr perfil en Firestore para: ${e}`),null)}catch(t){throw console.error("Error en getUserProfile helper:",t),t}};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5e=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),I5e=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),wG=e=>{const t=I5e(e);return t.charAt(0).toUpperCase()+t.slice(1)},ooe=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),D5e=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var O5e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5e=w.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:o,...l},c)=>w.createElement("svg",{ref:c,...O5e,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:ooe("lucide",a),...!s&&!D5e(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,d])=>w.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=(e,t)=>{const r=w.forwardRef(({className:n,...a},s)=>w.createElement(P5e,{ref:s,iconNode:t,className:ooe(`lucide-${B5e(wG(e))}`,`lucide-${e}`,n),...a}));return r.displayName=wG(e),r};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5e=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],R5e=St("activity",F5e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5e=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Qj=St("arrow-left",L5e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5e=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],U5e=St("arrow-up-down",M5e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5e=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Q5e=St("award",H5e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5e=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],$5e=St("bell-ring",V5e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5e=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],G5e=St("bell",z5e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5e=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],K5e=St("book-marked",q5e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5e=[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]],X5e=St("book-open-check",W5e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5e=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ps=St("book-open",Y5e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5e=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],NG=St("book",J5e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5e=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],e_e=St("brain-circuit",Z5e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_e=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],FN=St("brain",t_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_e=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],I1=St("briefcase",r_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_e=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],e1=St("building-2",n_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_e=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],CG=St("building",a_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_e=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],UM=St("calculator",s_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_e=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],HM=St("calendar-check",i_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_e=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],qo=St("calendar",o_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_e=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],c_e=St("camera",l_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_e=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Tl=St("chart-column",u_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_e=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],f_e=St("chart-line",d_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_e=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],yF=St("chart-no-axes-column-increasing",h_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_e=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],loe=St("chart-no-axes-column",A_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_e=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],t1=St("chart-pie",m_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_e=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],coe=St("check",p_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_e=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],SS=St("chevron-down",g_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_e=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],RN=St("chevron-left",x_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_e=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],m3=St("chevron-right",v_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Uc=St("circle-alert",b_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_e=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],GC=St("circle-check-big",y_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],pa=St("circle-check",w_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_e=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],C_e=St("circle-play",N_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Vj=St("circle-plus",E_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],uoe=St("circle-question-mark",j_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Bh=St("circle-x",k_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],__e=St("circle",S_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_e=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],x2=St("clipboard-check",T_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_e=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],r0=St("clipboard-list",B_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_e=[["path",{d:"M12 6v6h4",key:"135r8i"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],D_e=St("clock-3",I_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_e=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Dc=St("clock",O_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_e=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],EG=St("cloud-upload",P_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_e=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],R_e=St("cog",F_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_e=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Pf=St("download",L_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_e=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ix=St("external-link",M_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_e=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],H_e=St("eye-off",U_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_e=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ox=St("eye",Q_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_e=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],$_e=St("factory",V_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_e=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],wF=St("file-check",z_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_e=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],q_e=St("file-down",G_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_e=[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]],jG=St("file-pen",K_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_e=[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]],X_e=St("file-play",W_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_e=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],p3=St("file-spreadsheet",Y_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_e=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ko=St("file-text",J_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_e=[["path",{d:"M15 2a2 2 0 0 1 1.414.586l4 4A2 2 0 0 1 21 8v7a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z",key:"1vo8kb"}],["path",{d:"M15 2v4a2 2 0 0 0 2 2h4",key:"sud9ri"}],["path",{d:"M5 7a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 1.732-1",key:"l4dndm"}]],XI=St("files",Z_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],doe=St("film",e4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4e=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M2 10h20",key:"1ir3d8"}]],r4e=St("folder-closed",t4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4e=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],kG=St("folder-open",n4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4e=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],s4e=St("folder",a4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4e=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],qC=St("funnel",i4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4e=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],F5=St("gauge",o4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],c4e=St("globe",l4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4e=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],yA=St("graduation-cap",u4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4e=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],f4e=St("hash",d4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4e=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],A4e=St("heart",h4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4e=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],foe=St("hourglass",m4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],R5=St("image",p4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],x4e=St("info",g4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4e=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],hoe=St("layout-dashboard",v4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4e=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],g3=St("layers",b4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4e=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],w4e=St("layout-grid",y4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4e=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],C4e=St("layout-list",N4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4e=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],j4e=St("lightbulb",E4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4e=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],SG=St("link-2",k4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4e=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],L5=St("link",S4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4e=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],r1=St("list-checks",_4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4e=[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]],B4e=St("list-ordered",T4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4e=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],pi=St("loader-circle",I4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4e=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Aoe=St("mail",D4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4e=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],LN=St("map-pin",O4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4e=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],F4e=St("map",P4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4e=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],moe=St("megaphone",R4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4e=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],M4e=St("menu",L4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4e=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],yy=St("message-square",U4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4e=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],_G=St("notebook-pen",H4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4e=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],V4e=St("palette",Q4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4e=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],Bb=St("paperclip",$4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4e=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],MN=St("pen-line",z4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4e=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],x3=St("pencil",G4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4e=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],K4e=St("percent",q4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4e=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],X4e=St("phone",W4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4e=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],_S=St("pin",Y4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4e=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],gi=St("plus",J4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4e=[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]],NF=St("presentation",Z4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3e=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],t3e=St("puzzle",e3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3e=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],TS=St("refresh-ccw",r3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3e=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],qh=St("refresh-cw",n3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3e=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],s3e=St("rocket",a3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3e=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],o3e=St("rotate-cw",i3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3e=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],c3e=St("route",l3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3e=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],d3e=St("ruler",u3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3e=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Fl=St("save",f3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3e=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],Ph=St("school",h3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3e=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],TG=St("scroll-text",A3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3e=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],wy=St("search",m3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3e=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],QM=St("send",p3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3e=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],UN=St("settings",g3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3e=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],v3e=St("shield-check",x3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3e=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],lx=St("sparkles",b3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3e=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],X0=St("square-pen",y3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],CF=St("square-plus",w3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3e=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],poe=St("star",N3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3e=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],E3e=St("tag",C3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],D1=St("target",j3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3e=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Vn=St("trash-2",k3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3e=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],M5=St("trending-up",S3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3e=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],O1=St("triangle-alert",_3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3e=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M18 16h.01",key:"plv8zi"}],["path",{d:"M22 7a1 1 0 0 0-1-1h-2a2 2 0 0 1-1.143-.359L13.143 2.36a2 2 0 0 0-2.286-.001L6.143 5.64A2 2 0 0 1 5 6H3a1 1 0 0 0-1 1v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2z",key:"1ogmi3"}],["path",{d:"M6 12h.01",key:"c2rlol"}],["path",{d:"M6 16h.01",key:"1pmjb7"}],["circle",{cx:"12",cy:"10",r:"2",key:"1yojzk"}]],B3e=St("university",T3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3e=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ev=St("upload",I3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3e=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],BG=St("user-cog",D3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],IG=St("user-minus",O3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],U5=St("user-plus",P3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3e=[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]],R3e=St("user-round",F3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3e=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],cx=St("user",L3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3e=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],wb=St("users-round",M3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],qs=St("users",U3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3e=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],wu=St("video",H3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3e=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],goe=St("wand-sparkles",Q3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3e=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],q2=St("wrench",V3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xo=St("x",$3e);var It=(e=>(e.SUBDIRECCION="SUBDIRECCION",e.PROFESORADO="PROFESORADO",e.COORDINACION_TP="COORDINACION_TP",e.ESTUDIANTE="ESTUDIANTE",e))(It||{}),An=(e=>(e.EVALUACION="Evaluacin",e.ACTO="Acto",e.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",e.SALIDA_PEDAGOGICA="Salida Pedaggica",e))(An||{}),Mg=(e=>(e.PRUEBA_PARCIAL="Prueba parcial",e.GUIA_APRENDIZAJE="Gua de Aprendizaje",e.RUBRICA="Rbrica",e.PAUTA_COTEJO="Pauta de Cotejo",e))(Mg||{});const z3e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),G3e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 3.75H6A2.25 2.25 0 003.75 6v1.5M16.5 3.75H18A2.25 2.25 0 0120.25 6v1.5m0 9V18A2.25 2.25 0 0118 20.25h-1.5m-9 0H6A2.25 2.25 0 013.75 18v-1.5M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),Xs="w-5 h-5",v3="w-16 h-16",VM=()=>i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestin Pedaggica LIR",className:"w-32 h-32 object-contain"}),q3e=({className:e,...t})=>i.jsxs("svg",{className:e??"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",...t,children:[i.jsx("path",{d:"M9 18h6"}),i.jsx("path",{d:"M10 22h4"}),i.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),K3e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),BS=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),W3e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),X3e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),xoe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Y3e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:v3,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),J3e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:v3,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),Z3e=()=>i.jsx(R_e,{className:v3}),eTe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:v3,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),tTe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),$j=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),zj=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Gj=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),qj=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),jm=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),YI=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),rTe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),nTe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),aTe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),sTe=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Kj=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),iTe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),JI=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),oTe=()=>i.jsx(q2,{className:Xs}),lTe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),DG=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Xs,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),Wj=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Xs,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),OG=[{id:It.SUBDIRECCION,label:"Subdireccin Pedaggica",icon:i.jsx(Y3e,{})},{id:It.PROFESORADO,label:"Profesorado",icon:i.jsx(J3e,{})},{id:It.COORDINACION_TP,label:"Coordinacin TP",icon:i.jsx(Z3e,{})},{id:It.ESTUDIANTE,label:"Estudiantes",icon:i.jsx(eTe,{})}],cTe={[It.SUBDIRECCION]:[{name:"Intranet",icon:i.jsx(BS,{})},{name:"Planificacin",icon:i.jsx(YI,{})},{name:"Documentacin",icon:i.jsx(jm,{})},{name:"Dashboard",icon:i.jsx(tTe,{})},{name:"Administracin",icon:i.jsx(sTe,{})},{name:"Horario del liceo",icon:i.jsx(Gj,{})},{name:"Multicopias",icon:i.jsx($j,{})},{name:"Evaluacin de Ensayo",icon:i.jsx(jm,{})},{name:"Seguimiento Curricular",icon:i.jsx(lTe,{})},{name:"Acompaamiento docente",icon:i.jsx(aTe,{})},{name:"Anlisis Taxonmico",icon:i.jsx(DG,{})},{name:"SIMCE",icon:i.jsx(Wj,{})},{name:"Interdisciplinario",icon:i.jsx(JI,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:i.jsx($j,{})},{name:"Crear horarios",icon:i.jsx(Gj,{})},{name:"Seguimiento de acciones pedaggicas",icon:i.jsx(qj,{})},{name:"Inclusin",icon:i.jsx(Kj,{})},{name:"Calendario Acadmico",icon:i.jsx(zj,{})}],[It.PROFESORADO]:[{name:"Intranet",icon:i.jsx(BS,{})},{name:"Documentacin",icon:i.jsx(jm,{})},{name:"Planificacin",icon:i.jsx(YI,{})},{name:"Mis Acompaamientos",icon:i.jsx(iTe,{})},{name:"Recursos de Aprendizaje",icon:i.jsx(rTe,{})},{name:"Anlisis Taxonmico",icon:i.jsx(DG,{})},{name:"SIMCE",icon:i.jsx(Wj,{})},{name:"Interdisciplinario",icon:i.jsx(JI,{})},{name:"Inclusin",icon:i.jsx(Kj,{})},{name:"Multicopias",icon:i.jsx($j,{})},{name:"Actividades Remotas",icon:i.jsx(nTe,{})},{name:"Evaluacin de Ensayo",icon:i.jsx(jm,{})},{name:"Evaluacin de Aprendizajes",icon:i.jsx(jm,{})},{name:"Evaluaciones Formativas",icon:i.jsx(qj,{})},{name:"Desarrollo Profesional",icon:i.jsx(Kj,{})},{name:"Evaluacin de Competencias",icon:i.jsx(G3e,{})},{name:"Calendario Acadmico",icon:i.jsx(zj,{})}],[It.COORDINACION_TP]:[{name:"Intranet",icon:i.jsx(BS,{})},{name:"Documentacin",icon:i.jsx(jm,{})},{name:"Seguimiento Dual",icon:i.jsx(qj,{})},{name:"Asistencia Dual",icon:i.jsx(Gj,{})},{name:"Paol",icon:i.jsx(oTe,{})},{name:"SIMCE",icon:i.jsx(Wj,{})},{name:"Evaluacin de Ensayo",icon:i.jsx(jm,{})},{name:"Multicopias",icon:i.jsx($j,{})},{name:"Gestin de Empresas",icon:i.jsx(z3e,{})},{name:"Calendario Acadmico",icon:i.jsx(zj,{})},{name:"Alternancia TP",icon:""},{name:"Desarrollo Profesional",icon:i.jsx(Kj,{})}],[It.ESTUDIANTE]:[{name:"Documentacin",icon:i.jsx(jm,{})},{name:"Auto-aprendizaje",icon:i.jsx(YI,{})},{name:"Evaluacin Formativa",icon:i.jsx(qj,{})},{name:"SIMCE",icon:i.jsx(Wj,{})},{name:"Tareas Interdisciplinarias",icon:i.jsx(JI,{})},{name:"Asistencia a Empresa",icon:i.jsx(Gj,{})},{name:"Calendario Acadmico",icon:i.jsx(zj,{})}]},Y0=["1 Medio","2 Medio","3 Medio","4 Medio"],ma=["Lengua y Literatura","Matemtica","Ingls","Filosofa","Historia y Geografa","Educacin Ciudadana","Ciencias","Ciencias para la Ciudadana","Artes","Msica","Educacin Fsica","Orientacin","Mecnica Industrial","Mecnica Automotriz","Emprendimiento","Tecnologa","Pensamiento Lgico","Competencia Lectora"],ja=["1A","1B","1C","1D","1E","2A","2B","2C","2D","3A","3B","3C","3D","4A","4B","4C","4D"],EF=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],Kh=["Lunes","Martes","Mircoles","Jueves","Viernes"],Hs=[{bloque:1,inicio:"08:30",fin:"09:10"},{bloque:2,inicio:"09:10",fin:"09:50"},{bloque:3,inicio:"10:10",fin:"10:50"},{bloque:4,inicio:"10:50",fin:"11:30"},{bloque:5,inicio:"11:40",fin:"12:20"},{bloque:6,inicio:"12:20",fin:"13:00"},{bloque:7,inicio:"13:40",fin:"14:20"},{bloque:8,inicio:"14:20",fin:"15:00"},{bloque:9,inicio:"15:10",fin:"15:50"},{bloque:10,inicio:"15:50",fin:"16:30"}],n1={[An.EVALUACION]:{label:"Evaluacin",icon:"",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[An.ACTO]:{label:"Acto",icon:"",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[An.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[An.SALIDA_PEDAGOGICA]:{label:"Salida Pedaggica",icon:"",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},uTe=Object.values(Mg),ZI=["Vinculado","Desvinculado","En proceso","Empresa"],dp=["3A","3B","3C","3D","4A","4B","4C","4D"],dTe=["Quiz","Comprensin de Lectura","Trminos Pareados","Desarrollo"],H5=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limtrofe","Trastorno Dficit Atencional (TDA)","Trastorno Dficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Especfica del Aprendizaje","Dificultad Especfica de Aprendizaje en Matemticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarizacin"],K2=[{domain:"Dominio A: Preparacin de la Enseanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que ensea, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que ensea, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemolgicas o metodolgicas en su rea.","Conoce y comprende los principios y conceptos centrales de las disciplinas que ensea, atendiendo a la permanente actualizacin curricular en su rea.","Conoce, comprende y cuestiona los principios centrales de la disciplina que ensea a la luz de nuevos paradigmas epistemolgicos o tericos, permitiendo que el trabajo o la exposicin conceptual invite al desarrollo del pensamiento crtico o la investigacin continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificacin o gestin de la clase estndar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relacin al contexto y caractersticas del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que ensea en consonancia con el contexto y caractersticas propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que ensea en consonancia con el contexto y caractersticas propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Seleccin de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las caractersticas de sus estudiantes y a la relacin con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didcticos de aprendizaje, siendo congruentes al contenido pero no a las caractersticas de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejndose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didcticos de aprendizaje congruentes con la complejidad de los contenidos y las caractersticas de sus alumnos.","Conoce y selecciona distintos recursos didcticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisicin de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluacin",levels:["Establece estrategias de evaluacin incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo adems, las metodologas empleadas previamente en clases.","Establece estrategias de evaluacin coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluacin coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluacin coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexin, y, la retroalimentacin descriptiva."]},{name:"Estrategias de enseanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes disean e implementan estrategias de enseanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes disean e implementan estrategias efectivas de enseanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes disean e implementan estrategias avanzadas de enseanza-aprendizaje tales como (ABP, ABD, Gamificacin, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creacin de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empata",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vnculos fundados en el respeto y/o en la empata.","Establece un clima de relaciones interpersonales respetuosas y empticas con la mayora de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empticas con todos sus alumnos, generando situaciones concretas de cooperacin y ayuda mutua entre l/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Inters por las especialidades",levels:["No transmite inters por las especialidades, centrndose exclusivamente en su rea de desempeo.","Transmite inters general por las especialidades, no obstante no es capaz de acercarse a las caractersticas concretas de los mdulos.","Transmite inters por los contenidos y actividades de las asignaturas, mdulos y especialidades.","Transmite inters por los contenidos y actividades de las asignaturas, mdulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha rea de desempeo."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implcitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explcitamente actitudes de compromiso y solidaridad entre los alumnos, a travs de estrategias, instrucciones o anlisis que tiendan a ello.","Promueve explcitamente actitudes de compromiso y solidaridad entre los alumnos, a travs de estrategias, instrucciones o anlisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estndar que implican un desarrollo mecnico y que no tienden hacia la consolidacin de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus caractersticas personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus caractersticas personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus caractersticas personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivacin por el aprendizaje",levels:["No transmite motivacin por el aprendizaje, la bsqueda o la indagacin.","Transmite una motivacin positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autnoma","Transmite una motivacin positiva por el aprendizaje, la indagacin y la bsqueda.","Transmite una motivacin positiva por el aprendizaje, la indagacin y la bsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemtico en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participacin."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentacin de objetivos",levels:["Al iniciar las clases no presenta el objetivo o slo lo enuncia sin profundizar en l.","Al iniciar las clases presenta el objetivo de aprendizaje y el propsito, pero no logra dar cuenta de la relacin con el futuro laboral de los estudiantes o con otras reas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionndolo con el propsito que posee desde la disciplina, otras reas del conocimiento o para su desempeo laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a travs de la relacin con el propsito que posee desde la disciplina, otras reas del conocimiento o para su desempeo laboral futuro."]},{name:"Clase en funcin de objetivos",levels:["No realiza su clase en funcin de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currculum nacional","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando slo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currculum nacional.","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currculum nacional.","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currculum nacional y en el PEI."]},{name:"Introduccin de nueva informacin",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva informacin, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva informacin y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva informacin y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisin conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolacin que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentacin",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes slo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeo, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeo, de manera individual o grupal, a travs de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensin y desempeo de sus estudiantes.","Monitorea parcialmente el grado de comprensin y desempeo de sus estudiantes, no siempre a travs de evidencia.","Monitorea constantemente el grado de comprensin y el desempeo de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que estn aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensin y el desempeo de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que estn aprendiendo."]},{name:"Orientacin a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales, no obstante, la orientacin es superficial y no predispone la construccin de valores.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales del currculum, con el fin de favorecer su proceso de construccin de valores.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales del currculum, con el fin de favorecer su proceso de construccin de valores en consonancia a elementos propios del PEI."]},{name:"Conclusin de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicacin que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora adems preguntas de metacognicin y/o autoevaluacin."]},{name:"Abordaje de errores",levels:["No aborda los errores, nicamente los seala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a travs de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogneo, descuidando la diversidad y las caractersticas particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias segn nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos segn el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos segn el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],voe=["Lder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],Xj=[{nombre:"Aprendiz Emergente",emoji:"",promedioMin:1,promedioMax:3.9,mensaje:"Ests comenzando tu viaje de aprendizaje! Sigue esforzndote."},{nombre:"Explorador del Conocimiento",emoji:"",promedioMin:4,promedioMax:4.9,mensaje:"Buen trabajo! Ests construyendo una base slida."},{nombre:"Arquitecto de Ideas",emoji:"",promedioMin:5,promedioMax:5.9,mensaje:"Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"",promedioMin:6,promedioMax:6.5,mensaje:"Impresionante! Tu dedicacin te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"",promedioMin:6.6,promedioMax:7,mensaje:"Extraordinario! Eres una inspiracin para tus compaeros."}],fTe=["Mecnica Industrial","Mecnica Automotriz"],hTe=["INACAP","UNAB","DUOC","Universidad de Las Amricas"],ATe={"Mecnica Automotriz":["3A","3B","4A","4B"],"Mecnica Industrial":["3C","3D","4C","4D"]},mTe=["Pasanta","Visita","Certificacin","Formacin en empresa"],pTe={"Mecnica Industrial":["Soldadura industrial","Mantenimiento de herramientas","Medicin y verificacin","Mecnica de banco","Torneado de piezas y conjuntos mecnicos","Fresado de piezas mecnicas","Taladrado de piezas mecnicas","Rectificado de piezas mecnicas","Fabricacin asistida por computador (CNC)"],"Mecnica Automotriz":["Ajuste de motores","Lectura de planos y manuales tcnicos","Manejo de residuos y desechos automotrices","Mantenimiento de sistemas de seguridad y confortabilidad","Mantenimiento de sistemas elctricos y electrnicos","Mantenimiento de motores","Mantenimiento de sistemas hidrulicos y neumticos","Mantenimiento de los sistemas de transmisin y frenos","Mantenimiento de sistemas de direccin y suspensin","Emprendimiento y empleabilidad"]},gTe={"Mecnica Automotriz":{"Ajuste de motores":["Reparar y probar el funcionamiento de motores (gasolina, disel, gas e hbridos), incluyendo sistemas de control de emisiones, lubricacin y refrigeracin, usando herramientas e instrumentos apropiados y siguiendo especificaciones del fabricante."],"Lectura de planos y manuales tcnicos":["Leer e interpretar informacin tcnica (manuales, planos, diagramas y normas de emisiones) para resolver diagnsticos y fallas."],"Manejo de residuos y desechos automotrices":["Aplicar procedimientos y normativas de seguridad, higiene y cuidado ambiental en la manipulacin y disposicin de residuos y desechos automotrices."],"Mantenimiento de sistemas de seguridad y confortabilidad":["Diagnosticar, reparar y mantener sistemas de seguridad (frenos ABS, airbags) y confortabilidad (climatizacin, cierre centralizado, asientos elctricos) segn especificaciones tcnicas."],"Mantenimiento de sistemas elctricos y electrnicos":["Reemplazar, ajustar y probar sistemas elctricos y electrnicos automotrices, siguiendo procedimientos y normas internacionales."],"Mantenimiento de motores":["Realizar mantenimiento preventivo y correctivo de motores y sus sistemas asociados, verificando tolerancias y parmetros operativos segn especificaciones."],"Mantenimiento de sistemas hidrulicos y neumticos":["Inspeccionar, diagnosticar y reparar sistemas hidrulicos y neumticos de vehculos automotrices."],"Mantenimiento de los sistemas de transmisin y frenos":["Verificar, ajustar o reemplazar componentes de transmisin y frenos, segn manual del fabricante."],"Mantenimiento de sistemas de direccin y suspensin":["Diagnosticar, alinear y corregir sistemas de direccin y suspensin, cumpliendo normas de seguridad."],"Emprendimiento y empleabilidad":["Desarrollar un proyecto o plan de negocio relacionado con el sector automotriz, aplicando conceptos de gestin, marketing y normativa vigente."]},"Mecnica Industrial":{"Soldadura industrial":["Ejecutar procesos de corte y soldadura (oxiacetileno, arco manual, TIG, MIG) en distintas posiciones y materiales, aplicando normas de seguridad, higiene y cuidado ambiental."],"Mantenimiento de herramientas":["Mantener y reparar herramientas manuales y de mquinas, asegurando su operatividad y prolongando su vida til."],"Medicin y verificacin":["Utilizar instrumentos de medicin y verificacin para controlar dimensiones y tolerancias segn planos y especificaciones tcnicas."],"Mecnica de banco":["Realizar operaciones manuales de mecanizado, ajuste, limado, roscado y ensamblaje, siguiendo planos y tolerancias indicadas."],"Torneado de piezas y conjuntos mecnicos":["Operar tornos convencionales para fabricar piezas y conjuntos mecnicos, cumpliendo con las especificaciones tcnicas y de seguridad."],"Fresado de piezas mecnicas":["Operar fresadoras para fabricar piezas mecnicas, seleccionando herramientas de corte y parmetros de mecanizado adecuados."],"Taladrado de piezas mecnicas":["Ejecutar operaciones de taladrado, escariado y roscado en taladros de banco o columna, cumpliendo especificaciones tcnicas y de seguridad."],"Rectificado de piezas mecnicas":["Utilizar rectificadoras para mejorar el acabado y precisin dimensional de piezas mecnicas, cumpliendo tolerancias indicadas."],"Fabricacin asistida por computador (CNC)":["Programar y operar mquinas CNC para fabricar piezas mecnicas con precisin, optimizando procesos y aplicando normas de seguridad."]}},G0={"Liderazgo Curricular":["Planificacin y organizacin del currculo","Asegurar la cobertura y secuenciacin de los contenidos","Monitoreo del cumplimiento de los planes de estudio"],"Prcticas Pedaggicas en el Aula":["Estrategias de enseanza y metodologas activas","Evaluacin de los aprendizajes para retroalimentar el proceso","Uso de recursos y tecnologas para apoyar la enseanza"],"Acompaamiento y Desarrollo Profesional Docente":["Observacin de clases y retroalimentacin","Planes de formacin continua y actualizacin pedaggica","Fomento de comunidades de aprendizaje docente"],"Monitoreo y Evaluacin de los Aprendizajes":["Uso de datos e indicadores para tomar decisiones pedaggicas","Evaluaciones internas y externas","Ajuste de estrategias segn resultados y metas de aprendizaje"]},PG=["Pendiente","En Proceso","Cumplida"],FG=["PROFESORADO","SUBDIRECCION","COORDINACION_TP"],xTe=({onLoginAttempt:e,onForgotPasswordRequest:t,error:r})=>{const[n,a]=w.useState(""),[s,o]=w.useState(""),[l,c]=w.useState("login"),u=A=>{A.preventDefault(),e(n,s)},d=A=>{A.preventDefault(),t(n),c("forgot_sent")},f=()=>l==="forgot"?i.jsxs("form",{onSubmit:d,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrnico Registrado"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:A=>a(A.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperacin"})}),i.jsx("div",{className:"text-sm text-center",children:i.jsx("button",{type:"button",onClick:()=>c("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesin"})})]}):l==="forgot_sent"?i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),i.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",i.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contrasea."]}),i.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulacin, revise la consola del navegador para ver el enlace)."}),i.jsx("button",{type:"button",onClick:()=>{c("login"),a("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:" Volver a Iniciar Sesin"})]}):i.jsxs("form",{onSubmit:u,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrnico"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:A=>a(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contrasea"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:A=>o(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&i.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:i.jsx("p",{children:r})}),i.jsx("div",{className:"text-sm text-center",children:i.jsx("button",{type:"button",onClick:()=>c("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Olvid su contrasea?"})}),i.jsx("div",{children:i.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return i.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("div",{className:"mb-4 flex justify-center items-center",children:i.jsx(VM,{})}),i.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestin Pedaggica LIR"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:l==="login"?"Bienvenido/a, por favor inicie sesin":"Recuperacin de Contrasea"})]}),i.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:f()}),i.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:[" ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},Yj=({trigger:e,children:t,onOpen:r})=>{const[n,a]=w.useState(!1),s=w.useRef(null),o=()=>{const c=!n;a(c),c&&r&&r()},l=c=>{s.current&&!s.current.contains(c.target)&&a(!1)};return w.useEffect(()=>(document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}),[]),i.jsxs("div",{className:"relative",ref:s,children:[i.jsx("div",{onClick:o,children:e}),n&&i.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>a(!1),children:t})]})},RG="usuariosLiceo",vTe=({user:e,onClose:t,onSave:r})=>{const[n,a]=w.useState({nombreCompleto:e.nombreCompleto,email:e.email,fotoUrl:e.fotoUrl||""}),s=l=>{a({...n,[l.target.name]:l.target.value})},o=l=>{l.preventDefault();const c={...e,...n};try{const u=localStorage.getItem(RG);let d=u?JSON.parse(u):[];const f=d.findIndex(A=>A.id===e.id);f>-1?d[f]=c:d.push(c),localStorage.setItem(RG,JSON.stringify(d)),r(c),t()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:l=>l.stopPropagation(),children:i.jsxs("form",{onSubmit:o,children:[i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),i.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),i.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrnico"}),i.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Funcin"}),i.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.profile})]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},LG="usuariosLiceo",bTe=({user:e,onClose:t,onSave:r})=>{const[n,a]=w.useState(""),[s,o]=w.useState(""),[l,c]=w.useState(null),u=d=>{if(d.preventDefault(),c(null),!n){c("La contrasea no puede estar en blanco.");return}if(n!==s){c("Las contraseas no coinciden.");return}const f={...e,password:n};try{const A=localStorage.getItem(LG);let m=A?JSON.parse(A):[];const g=m.findIndex(x=>x.id===e.id);g>-1?m[g]=f:m.push(f),localStorage.setItem(LG,JSON.stringify(m)),r(f),t()}catch(A){console.error("Failed to save new password:",A),c("No se pudo guardar la nueva contrasea.")}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:i.jsxs("form",{onSubmit:u,children:[i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuracin de Cuenta"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),i.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.email})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contrasea"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:d=>a(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contrasea"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s,onChange:d=>o(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l&&i.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:i.jsx("p",{children:l})})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contrasea"})]})]})})})};async function boe(e){const t={...e,docenteEmailLower:e.docenteEmail?e.docenteEmail.toLowerCase():e.docenteEmailLower,leida:!1,createdAt:zn()};return Object.keys(t).forEach(n=>t[n]===void 0&&delete t[n]),(await ln(ht(Ar,"notificaciones"),t)).id}function yTe(e,t){const r=[];let n=[],a=[];const s=()=>{const o=new Map;[...n,...a].forEach(c=>{c.id&&(o.has(c.id)||o.set(c.id,c))});const l=Array.from(o.values()).sort((c,u)=>{var A,m;const d=(A=c.createdAt)!=null&&A.toDate?c.createdAt.toDate().getTime():0;return((m=u.createdAt)!=null&&m.toDate?u.createdAt.toDate().getTime():0)-d});t(l)};if(e.email){const o=Bt(ht(Ar,"notificaciones"),sr("docenteEmailLower","==",e.email.toLowerCase()),Xt("createdAt","desc"));r.push(lr(o,l=>{n=l.docs.map(c=>({id:c.id,...c.data()})),s()}))}if(e.nombreCompleto){const o=Bt(ht(Ar,"notificaciones"),sr("docenteNombre","==",e.nombreCompleto),Xt("createdAt","desc"));r.push(lr(o,l=>{a=l.docs.map(c=>({id:c.id,...c.data()})),s()}))}return()=>r.forEach(o=>o())}async function wTe(e){const t=Wt(Ar,"notificaciones",e);await qi(t,{leida:!0})}async function NTe(e){const t=Wt(Ar,"notificaciones",e);await ca(t)}const MG="anunciosMuro",UG="mensajesInternos",HG="lir-read-status",CTe=({user:e})=>{if(e.fotoUrl)return i.jsx("img",{src:e.fotoUrl,alt:e.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const t=e.nombreCompleto||"",r=String(t).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return i.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},ETe=({currentUser:e,onLogout:t,onNavigate:r,onUserUpdate:n,onChangeProfile:a,canChangeProfile:s,toggleSidebar:o,unreadMessagesCount:l,refreshUnreadCount:c})=>{const[u,d]=w.useState([]),[f,A]=w.useState([]),[m,g]=w.useState(!1),[x,v]=w.useState(!1),[y,N]=w.useState([]),C=w.useCallback(()=>{try{const B=localStorage.getItem(`${HG}-${e.id}`);return B?JSON.parse(B):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[e.id]),_=w.useCallback(B=>{try{localStorage.setItem(`${HG}-${e.id}`,JSON.stringify(B))}catch(M){console.error("Failed to set read status:",M)}},[e.id]);w.useEffect(()=>{const B=JSON.parse(localStorage.getItem(MG)||"[]"),M=C();d(B.filter(S=>!M.announcements.includes(S.id)));const P=JSON.parse(localStorage.getItem(UG)||"[]");A(P.filter(S=>S.para===e.email).sort((S,L)=>new Date(L.fecha).getTime()-new Date(S.fecha).getTime()).slice(0,5))},[e.id,C,l]),w.useEffect(()=>{if(!((e==null?void 0:e.profile)===It.SUBDIRECCION||(e==null?void 0:e.profile)===It.PROFESORADO||(e==null?void 0:e.profile)===It.COORDINACION_TP)||!(e!=null&&e.email))return;const M=yTe({email:e.email,nombreCompleto:e.nombreCompleto},P=>{const S=P.filter(L=>L.tipo&&(L.tipo.toLowerCase()==="pie"||L.tipo==="nueva_intervencion"));N(S)});return()=>M()},[e==null?void 0:e.email,e==null?void 0:e.nombreCompleto,e==null?void 0:e.profile]);const j=()=>{const B=C(),M=JSON.parse(localStorage.getItem(MG)||"[]").map(P=>P.id);B.announcements=M,_(B),d([])},I=()=>{const B=C(),P=JSON.parse(localStorage.getItem(UG)||"[]").filter(S=>S.para===e.email).map(S=>S.id);B.messages=[...new Set([...B.messages,...P])],_(B),c()},T=y.filter(B=>!B.leida).length,k=B=>{var M;try{const P=(M=B.createdAt)!=null&&M.toDate?B.createdAt.toDate():new Date(B.createdAt);return P?P.toLocaleString("es-CL"):""}catch{return""}};return i.jsxs(i.Fragment,{children:[i.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:i.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:o,children:i.jsx(K3e,{})}),i.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),i.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestin LIR"})]})]}),i.jsx("div",{className:"flex-1 flex justify-center",children:i.jsx("button",{onClick:()=>r("Calendario Acadmico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Acadmico",children:i.jsx(BS,{})})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Yj,{onOpen:j,trigger:i.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Anuncios",children:[i.jsx(W3e,{}),u.length>0&&i.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:u.length})]}),children:i.jsxs("div",{className:"p-2",children:[i.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),i.jsxs("ul",{className:"mt-1",children:[u.slice(0,3).map(B=>i.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[i.jsx("p",{className:"font-bold dark:text-slate-200",children:B.titulo}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:B.mensaje})]},B.id)),u.length===0&&i.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]})]})}),(e.profile===It.SUBDIRECCION||e.profile===It.PROFESORADO||e.profile===It.COORDINACION_TP)&&i.jsx(Yj,{trigger:i.jsxs("button",{className:"relative p-2 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-700 dark:bg-sky-900/30 dark:hover:bg-sky-900/40 dark:text-sky-300 transition-colors",title:"Notificaciones PIE",children:[i.jsx(t3e,{className:"w-5 h-5"}),T>0&&i.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:T})]}),children:i.jsxs("div",{className:"p-2 w-80",children:[i.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Notificaciones PIE"}),i.jsxs("ul",{className:"mt-1 max-h-80 overflow-y-auto divide-y dark:divide-slate-700",children:[y.length===0&&i.jsx("li",{className:"p-3 text-sm text-slate-500 dark:text-slate-400",children:"No hay notificaciones."}),y.map(B=>i.jsx("li",{className:"p-2 text-sm",children:i.jsxs("div",{className:"flex justify-between items-start gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:B.titulo}),i.jsx("div",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-line",children:B.mensaje}),B.estudianteNombre&&i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Estudiante: ",i.jsx("b",{children:B.estudianteNombre})]}),i.jsx("div",{className:"text-[11px] text-slate-400 mt-1",children:k(B)})]}),i.jsxs("div",{className:"flex-shrink-0 flex flex-col gap-1",children:[!B.leida&&i.jsx("button",{onClick:()=>B.id&&wTe(B.id),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded hover:bg-green-200",children:"Marcar leda"}),i.jsx("button",{onClick:()=>B.id&&NTe(B.id),className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded hover:bg-red-200",children:"Eliminar"})]})]})},B.id))]})]})}),i.jsx(Yj,{onOpen:I,trigger:i.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[i.jsx(X3e,{}),l>0&&i.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:l})]}),children:i.jsxs("div",{className:"p-2",children:[i.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),i.jsxs("ul",{className:"mt-1",children:[f.slice(0,3).map(B=>i.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[i.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",B.de]}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:B.asunto})]},B.id)),f.length===0&&i.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]})]})}),i.jsx(Yj,{trigger:i.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsx(CTe,{user:e})}),children:i.jsxs("div",{className:"p-2",children:[i.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:e.nombreCompleto}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.profile})]}),i.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[i.jsx("li",{children:i.jsx("button",{onClick:()=>g(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),i.jsx("li",{children:i.jsx("button",{onClick:()=>v(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuracin"})}),s&&i.jsx("li",{children:i.jsx("button",{onClick:a,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:" Cambiar Vista"})}),i.jsx("li",{children:i.jsx("button",{onClick:t,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesin"})})]})]})})]})]})}),m&&i.jsx(vTe,{user:e,onClose:()=>g(!1),onSave:n}),x&&i.jsx(bTe,{user:e,onClose:()=>v(!1),onSave:n})]})},jTe={apiKey:"AIzaSyBX_n9qoSh0N2c1OAPurBAl6FC9ltX4tK0",authDomain:"plania-clase.firebaseapp.com",projectId:"plania-clase",storageBucket:"plania-clase.firebasestorage.app",messagingSenderId:"978612067917",appId:"1:978612067917:web:299137755ec80939d7c604",measurementId:void 0},$M=M$().length?M$()[0]:I8(jTe),ut=vM($M),HN=Hae($M),b3=A3($M),zM=Object.freeze(Object.defineProperty({__proto__:null,auth:HN,db:ut,storage:b3},Symbol.toStringTag,{value:"Module"})),y3="reemplazos_docentes",kTe="usuarios",yoe=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaActualizacion:((s=(a=t.fechaActualizacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaActualizacion}},STe=e=>{const t=e.data();return{id:e.id,...t}},_Te=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:xr.fromDate(new Date),fechaActualizacion:xr.fromDate(new Date)};return(await ln(ht(ut,y3),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},TTe=async(e,t)=>{try{const r=Wt(ut,y3,e),n=await bA(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar este reemplazo");await ca(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},BTe=(e,t,r=50)=>{try{const n=Bt(ht(ut,y3),sr("userId","==",e),Xt("diaAusencia","desc"),Dl(r));return lr(n,a=>{const s=a.docs.map(yoe);t(s)},a=>{console.error("Error en suscripcin a reemplazos:",a),t([])})}catch(n){return console.error("Error al crear la suscripcin de reemplazos:",n),()=>{}}},ITe=e=>{try{const t=Bt(ht(ut,kTe),sr("profile","==",It.PROFESORADO));return lr(t,n=>{const a=n.docs.map(STe);e(a)},n=>{console.error("Error al obtener la lista de profesores:",n),e([])})}catch(t){return console.error("Error al crear la suscripcin de profesores:",t),()=>{}}},DTe=async(e,t)=>{try{if(!t.trim())return[];const r=Bt(ht(ut,y3),sr("userId","==",e),Xt("diaAusencia","desc"),Dl(100)),a=(await Ir(r)).docs.map(yoe),s=t.toLowerCase();return a.filter(o=>o.docenteAusente.toLowerCase().includes(s)||o.docenteReemplazante.toLowerCase().includes(s)||o.curso.toLowerCase().includes(s)||o.diaAusencia.includes(s)||o.asignaturaAusente.toLowerCase().includes(s)||o.asignaturaReemplazante.toLowerCase().includes(s))}catch(r){return console.error("Error en bsqueda de reemplazos:",r),[]}};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Q5={};Q5.version="0.18.5";var woe=1252,OTe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],GM={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},qM=function(e){OTe.indexOf(e)!=-1&&(woe=GM[0]=e)};function PTe(){qM(1252)}var yf=function(e){qM(e)};function KM(){yf(1200),PTe()}function QG(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function FTe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function Noe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var v2=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?FTe(e.slice(2)):t==254&&r==255?Noe(e.slice(2)):t==65279?e.slice(1):e},Jj=function(t){return String.fromCharCode(t)},VG=function(t){return String.fromCharCode(t)},QN,Zm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function VN(e){for(var t="",r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),s=r>>2,n=e.charCodeAt(u++),o=(r&3)<<4|n>>4,a=e.charCodeAt(u++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),t+=Zm.charAt(s)+Zm.charAt(o)+Zm.charAt(l)+Zm.charAt(c);return t}function Iu(e){var t="",r=0,n=0,a=0,s=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)s=Zm.indexOf(e.charAt(u++)),o=Zm.indexOf(e.charAt(u++)),r=s<<2|o>>4,t+=String.fromCharCode(r),l=Zm.indexOf(e.charAt(u++)),n=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),c=Zm.indexOf(e.charAt(u++)),a=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var bn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),MA=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function jp(e){return bn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function $G(e){return bn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Nu=function(t){return bn?MA(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function w3(e){if(typeof ArrayBuffer>"u")return Nu(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function $p(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function RTe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function WM(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return WM(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var mo=bn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:MA(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function LTe(e){for(var t=[],r=0,n=e.length+250,a=jp(e.length+255),s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o<128)a[r++]=o;else if(o<2048)a[r++]=192|o>>6&31,a[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++s)&1023;a[r++]=240|o>>8&7,a[r++]=128|o>>2&63,a[r++]=128|l>>6&15|(o&3)<<4,a[r++]=128|l&63}else a[r++]=224|o>>12&15,a[r++]=128|o>>6&63,a[r++]=128|o&63;r>n&&(t.push(a.slice(0,r)),r=0,a=jp(65535),n=65530)}return t.push(a.slice(0,r)),mo(t)}var nc=/\u0000/g,b2=/[\u0001-\u0006]/g;function a1(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function wf(e,t){var r=""+e;return r.length>=t?r:Vs("0",t-r.length)+r}function XM(e,t){var r=""+e;return r.length>=t?r:Vs(" ",t-r.length)+r}function V5(e,t){var r=""+e;return r.length>=t?r:r+Vs(" ",t-r.length)}function MTe(e,t){var r=""+Math.round(e);return r.length>=t?r:Vs("0",t-r.length)+r}function UTe(e,t){var r=""+e;return r.length>=t?r:Vs("0",t-r.length)+r}var zG=Math.pow(2,32);function zv(e,t){if(e>zG||e<-zG)return MTe(e,t);var r=Math.round(e);return UTe(r,t)}function $5(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var GG=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],e6=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function HTe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Qr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},qG={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},QTe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function z5(e,t,r){for(var n=e<0?-1:1,a=e*n,s=0,o=1,l=0,c=1,u=0,d=0,f=Math.floor(a);u<t&&(f=Math.floor(a),l=f*o+s,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),s=o,o=l,c=u,u=d;if(d>t&&(u>t?(d=c,l=s):(d=u,l=o)),!r)return[0,n*l,d];var A=Math.floor(n*l/d);return[A,n*l-A*d,d]}function Kg(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),s=0,o=[],l={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=KTe(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=s,l}var Coe=new Date(1899,11,31,0,0,0),VTe=Coe.getTime(),$Te=new Date(1900,2,1,0,0,0);function Eoe(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=$Te&&(r+=1440*60*1e3),(r-(VTe+(e.getTimezoneOffset()-Coe.getTimezoneOffset())*6e4))/(1440*60*1e3)}function YM(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function zTe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function GTe(e){var t=e<0?12:11,r=YM(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function qTe(e){var t=YM(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function $N(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=GTe(e):t===10?r=e.toFixed(10).substr(0,12):r=qTe(e),YM(zTe(r.toUpperCase()))}function Bx(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):$N(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Bd(14,Eoe(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function KTe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function WTe(e,t,r,n){var a="",s=0,o=0,l=r.y,c,u=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return e6[r.m-1][1];case 5:return e6[r.m-1][0];default:return e6[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return GG[r.q][0];default:return GG[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?wf(r.S,t.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,s=Math.round(o*(r.S+r.u)),s>=60*o&&(s=0),t==="s"?s===0?"0":""+s/o:(a=wf(s,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?wf(c,u):"";return d}function ep(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var joe=/%/g;function XTe(e,t,r){var n=t.replace(joe,""),a=t.length-n.length;return sA(e,n,r*Math.pow(10,2*a))+Vs("%",a)}function YTe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return sA(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function koe(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+koe(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Soe=/# (\?+)( ?)\/( ?)(\d+)/;function JTe(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),s=Math.floor(a/n),o=a-s*n,l=n;return r+(s===0?"":""+s)+" "+(o===0?Vs(" ",e[1].length+1+e[4].length):XM(o,e[1].length)+e[2]+"/"+e[3]+wf(l,e[4].length))}function ZTe(e,t,r){return r+(t===0?"":""+t)+Vs(" ",e[1].length+2+e[4].length)}var _oe=/^#*0*\.([0#]+)/,Toe=/\).*[0#]/,Boe=/\(###\) ###\\?-####/;function Yl(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function KG(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function WG(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function eBe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function tBe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function fd(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Toe)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?fd("n",n,r):"("+fd("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return YTe(e,t,r);if(t.indexOf("%")!==-1)return XTe(e,t,r);if(t.indexOf("E")!==-1)return koe(t,r);if(t.charCodeAt(0)===36)return"$"+fd(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+zv(c,t.length);if(t.match(/^[#?]+$/))return a=zv(r,0),a==="0"&&(a=""),a.length>t.length?a:Yl(t.substr(0,t.length-a.length))+a;if(s=t.match(Soe))return JTe(s,c,u);if(t.match(/^#+0+$/))return u+zv(c,t.length-t.indexOf("0"));if(s=t.match(_oe))return a=KG(r,s[1].length).replace(/^([^\.]+)$/,"$1."+Yl(s[1])).replace(/\.$/,"."+Yl(s[1])).replace(/\.(\d*)$/,function(g,x){return"."+x+Vs("0",Yl(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+KG(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+ep(zv(c,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+fd(e,t,-r):ep(""+(Math.floor(r)+eBe(r,s[1].length)))+"."+wf(WG(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return fd(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=a1(fd(e,t.replace(/[\\-]/g,""),r)),o=0,a1(a1(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<a.length?a.charAt(o++):g==="0"?"0":""}));if(t.match(Boe))return a=fd(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=z5(c,Math.pow(10,o)-1,!1),a=""+u,d=sA("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=V5(l[2],o),d.length<s[4].length&&(d=Yl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=z5(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?XM(l[1],o)+s[2]+"/"+s[3]+V5(l[2],o):Vs(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=zv(r,0),t.length<=a.length?a:Yl(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=t.indexOf(".")-o,A=t.length-a.length-f;return Yl(t.substr(0,f)+a+t.substr(t.length-A))}if(s=t.match(/^00,000\.([#0]*0)$/))return o=WG(r,s[1].length),r<0?"-"+fd(e,t,-r):ep(tBe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?wf(0,3-g.length):"")+g})+"."+wf(o,s[1].length);switch(t){case"###,##0.00":return fd(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=ep(zv(c,0));return m!=="0"?u+m:"";case"###,###.00":return fd(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return fd(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function rBe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return sA(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function nBe(e,t,r){var n=t.replace(joe,""),a=t.length-n.length;return sA(e,n,r*Math.pow(10,2*a))+Vs("%",a)}function Ioe(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Ioe(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function wh(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Toe)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?wh("n",n,r):"("+wh("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return rBe(e,t,r);if(t.indexOf("%")!==-1)return nBe(e,t,r);if(t.indexOf("E")!==-1)return Ioe(t,r);if(t.charCodeAt(0)===36)return"$"+wh(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+wf(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:Yl(t.substr(0,t.length-a.length))+a;if(s=t.match(Soe))return ZTe(s,c,u);if(t.match(/^#+0+$/))return u+wf(c,t.length-t.indexOf("0"));if(s=t.match(_oe))return a=(""+r).replace(/^([^\.]+)$/,"$1."+Yl(s[1])).replace(/\.$/,"."+Yl(s[1])),a=a.replace(/\.(\d*)$/,function(g,x){return"."+x+Vs("0",Yl(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+ep(""+c);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+wh(e,t,-r):ep(""+r)+"."+Vs("0",s[1].length);if(s=t.match(/^#,#*,#0/))return wh(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=a1(wh(e,t.replace(/[\\-]/g,""),r)),o=0,a1(a1(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<a.length?a.charAt(o++):g==="0"?"0":""}));if(t.match(Boe))return a=wh(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=z5(c,Math.pow(10,o)-1,!1),a=""+u,d=sA("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=V5(l[2],o),d.length<s[4].length&&(d=Yl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=z5(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?XM(l[1],o)+s[2]+"/"+s[3]+V5(l[2],o):Vs(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:Yl(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=t.indexOf(".")-o,A=t.length-a.length-f;return Yl(t.substr(0,f)+a+t.substr(t.length-A))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+wh(e,t,-r):ep(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?wf(0,3-g.length):"")+g})+"."+wf(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var m=ep(""+c);return m!=="0"?u+m:"";default:if(t.match(/\.[0#?]*$/))return wh(e,t.slice(0,t.lastIndexOf(".")),r)+Yl(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function sA(e,t,r){return(r|0)===r?wh(e,t,r):fd(e,t,r)}function aBe(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var Doe=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Ny(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":$5(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(Doe))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function sBe(e,t,r,n){for(var a=[],s="",o=0,l="",c="t",u,d,f,A="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!$5(e,o))throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(f=e.charCodeAt(++o))!==34&&o<e.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++o;break;case"\\":var m=e.charAt(++o),g=m==="("||m===")"?m:"t";a[a.length]={t:g,v:m},++o;break;case"_":a[a.length]={t:"t",v:" "},o+=2;break;case"@":a[a.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(u==null&&(u=Kg(t,r,e.charAt(o+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=Kg(t,r),u==null))return"";for(s=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)s+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=A),a[a.length]={t:l,v:s},c=l;break;case"A":case"a":case"":var x={t:l,v:l};if(u==null&&(u=Kg(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(x.v=u.H>=12?"P":"A"),x.t="T",A="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(x.v=u.H>=12?"PM":"AM"),x.t="T",o+=5,A="h"):e.substr(o,5).toUpperCase()==="/"?(u!=null&&(x.v=u.H>=12?"":""),x.t="T",o+=5,A="h"):(x.t="t",++o),u==null&&x.t==="T")return"";a[a.length]=x,c=l;break;case"[":for(s=l;e.charAt(o++)!=="]"&&o<e.length;)s+=e.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(Doe)){if(u==null&&(u=Kg(t,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",Ny(e)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=l;++o<e.length&&(l=e.charAt(o))==="0";)s+=l;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)s+=l;a[a.length]={t:"n",v:s};break;case"?":for(s=l;e.charAt(++o)===l;)s+=l;a[a.length]={t:l,v:s},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)s+=e.charAt(o);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:l,v:l},++o;break;case"$":a[a.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"t",v:l},++o;break}var v=0,y=0,N;for(o=a.length-1,c="t";o>=0;--o)switch(a[o].t){case"h":case"H":a[o].t=A,c="h",v<1&&(v=1);break;case"s":(N=a[o].v.match(/\.0+$/))&&(y=Math.max(y,N[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":c=a[o].t;break;case"m":c==="s"&&(a[o].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&a[o].v.match(/[Hh]/)&&(v=1),v<2&&a[o].v.match(/[Mm]/)&&(v=2),v<3&&a[o].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var C="",_;for(o=0;o<a.length;++o)switch(a[o].t){case"t":case"T":case" ":case"D":break;case"X":a[o].v="",a[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[o].v=WTe(a[o].t.charCodeAt(0),a[o].v,u,y),a[o].t="t";break;case"n":case"?":for(_=o+1;a[_]!=null&&((l=a[_].t)==="?"||l==="D"||(l===" "||l==="t")&&a[_+1]!=null&&(a[_+1].t==="?"||a[_+1].t==="t"&&a[_+1].v==="/")||a[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[_].v==="/"||a[_].v===" "&&a[_+1]!=null&&a[_+1].t=="?"));)a[o].v+=a[_].v,a[_]={v:"",t:";"},++_;C+=a[o].v,o=_-1;break;case"G":a[o].t="t",a[o].v=Bx(t,r);break}var j="",I,T;if(C.length>0){C.charCodeAt(0)==40?(I=t<0&&C.charCodeAt(0)===45?-t:t,T=sA("n",C,I)):(I=t<0&&n>1?-t:t,T=sA("n",C,I),I<0&&a[0]&&a[0].t=="t"&&(T=T.substr(1),a[0].v="-"+a[0].v)),_=T.length-1;var k=a.length;for(o=0;o<a.length;++o)if(a[o]!=null&&a[o].t!="t"&&a[o].v.indexOf(".")>-1){k=o;break}var B=a.length;if(k===a.length&&T.indexOf("E")===-1){for(o=a.length-1;o>=0;--o)a[o]==null||"n?".indexOf(a[o].t)===-1||(_>=a[o].v.length-1?(_-=a[o].v.length,a[o].v=T.substr(_+1,a[o].v.length)):_<0?a[o].v="":(a[o].v=T.substr(0,_+1),_=-1),a[o].t="t",B=o);_>=0&&B<a.length&&(a[B].v=T.substr(0,_+1)+a[B].v)}else if(k!==a.length&&T.indexOf("E")===-1){for(_=T.indexOf(".")-1,o=k;o>=0;--o)if(!(a[o]==null||"n?".indexOf(a[o].t)===-1)){for(d=a[o].v.indexOf(".")>-1&&o===k?a[o].v.indexOf(".")-1:a[o].v.length-1,j=a[o].v.substr(d+1);d>=0;--d)_>=0&&(a[o].v.charAt(d)==="0"||a[o].v.charAt(d)==="#")&&(j=T.charAt(_--)+j);a[o].v=j,a[o].t="t",B=o}for(_>=0&&B<a.length&&(a[B].v=T.substr(0,_+1)+a[B].v),_=T.indexOf(".")+1,o=k;o<a.length;++o)if(!(a[o]==null||"n?(".indexOf(a[o].t)===-1&&o!==k)){for(d=a[o].v.indexOf(".")>-1&&o===k?a[o].v.indexOf(".")+1:0,j=a[o].v.substr(0,d);d<a[o].v.length;++d)_<T.length&&(j+=T.charAt(_++));a[o].v=j,a[o].t="t",B=o}}}for(o=0;o<a.length;++o)a[o]!=null&&"n?".indexOf(a[o].t)>-1&&(I=n>1&&t<0&&o>0&&a[o-1].v==="-"?-t:t,a[o].v=sA(a[o].t,a[o].v,I),a[o].t="t");var M="";for(o=0;o!==a.length;++o)a[o]!=null&&(M+=a[o].v);return M}var XG=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function YG(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function iBe(e,t){var r=aBe(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(XG),l=r[1].match(XG);return YG(t,o)?[n,r[0]]:YG(t,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,s]}function Bd(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Qr)[e],n==null&&(n=r.table&&r.table[qG[e]]||Qr[qG[e]]),n==null&&(n=QTe[e]||"General");break}if($5(n,0))return Bx(t,r);t instanceof Date&&(t=Eoe(t,r.date1904));var a=iBe(n,t);if($5(a[1]))return Bx(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return sBe(a[1],t,r,a[0])}function iA(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Qr[r]==null){t<0&&(t=r);continue}if(Qr[r]==e){t=r;break}}t<0&&(t=391)}return Qr[t]=e,t}function N3(e){for(var t=0;t!=392;++t)e[t]!==void 0&&iA(e[t],t)}function Cy(){Qr=HTe()}var oBe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},Ooe=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function lBe(e){var t=typeof e=="number"?Qr[e]:e;return t=t.replace(Ooe,"(\\d+)"),new RegExp("^"+t+"$")}function cBe(e,t,r){var n=-1,a=-1,s=-1,o=-1,l=-1,c=-1;(t.match(Ooe)||[]).forEach(function(f,A){var m=parseInt(r[A+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=m;break;case"d":s=m;break;case"h":o=m;break;case"s":c=m;break;case"m":o>=0?l=m:a=m;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var uBe=function(){var e={};e.version="1.2.0";function t(){for(var T=0,k=new Array(256),B=0;B!=256;++B)T=B,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,k[B]=T;return typeof Int32Array<"u"?new Int32Array(k):k}var r=t();function n(T){var k=0,B=0,M=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(M=0;M!=256;++M)P[M]=T[M];for(M=0;M!=256;++M)for(B=T[M],k=256+M;k<4096;k+=256)B=P[k]=B>>>8^T[B&255];var S=[];for(M=1;M!=16;++M)S[M-1]=typeof Int32Array<"u"?P.subarray(M*256,M*256+256):P.slice(M*256,M*256+256);return S}var a=n(r),s=a[0],o=a[1],l=a[2],c=a[3],u=a[4],d=a[5],f=a[6],A=a[7],m=a[8],g=a[9],x=a[10],v=a[11],y=a[12],N=a[13],C=a[14];function _(T,k){for(var B=k^-1,M=0,P=T.length;M<P;)B=B>>>8^r[(B^T.charCodeAt(M++))&255];return~B}function j(T,k){for(var B=k^-1,M=T.length-15,P=0;P<M;)B=C[T[P++]^B&255]^N[T[P++]^B>>8&255]^y[T[P++]^B>>16&255]^v[T[P++]^B>>>24]^x[T[P++]]^g[T[P++]]^m[T[P++]]^A[T[P++]]^f[T[P++]]^d[T[P++]]^u[T[P++]]^c[T[P++]]^l[T[P++]]^o[T[P++]]^s[T[P++]]^r[T[P++]];for(M+=15;P<M;)B=B>>>8^r[(B^T[P++])&255];return~B}function I(T,k){for(var B=k^-1,M=0,P=T.length,S=0,L=0;M<P;)S=T.charCodeAt(M++),S<128?B=B>>>8^r[(B^S)&255]:S<2048?(B=B>>>8^r[(B^(192|S>>6&31))&255],B=B>>>8^r[(B^(128|S&63))&255]):S>=55296&&S<57344?(S=(S&1023)+64,L=T.charCodeAt(M++)&1023,B=B>>>8^r[(B^(240|S>>8&7))&255],B=B>>>8^r[(B^(128|S>>2&63))&255],B=B>>>8^r[(B^(128|L>>6&15|(S&3)<<4))&255],B=B>>>8^r[(B^(128|L&63))&255]):(B=B>>>8^r[(B^(224|S>>12&15))&255],B=B>>>8^r[(B^(128|S>>6&63))&255],B=B>>>8^r[(B^(128|S&63))&255]);return~B}return e.table=r,e.bstr=_,e.buf=j,e.str=I,e}(),Br=function(){var t={};t.version="1.2.1";function r(Se,Ge){for(var Me=Se.split("/"),Qe=Ge.split("/"),Ne=0,ve=0,Fe=Math.min(Me.length,Qe.length);Ne<Fe;++Ne){if(ve=Me[Ne].length-Qe[Ne].length)return ve;if(Me[Ne]!=Qe[Ne])return Me[Ne]<Qe[Ne]?-1:1}return Me.length-Qe.length}function n(Se){if(Se.charAt(Se.length-1)=="/")return Se.slice(0,-1).indexOf("/")===-1?Se:n(Se.slice(0,-1));var Ge=Se.lastIndexOf("/");return Ge===-1?Se:Se.slice(0,Ge+1)}function a(Se){if(Se.charAt(Se.length-1)=="/")return a(Se.slice(0,-1));var Ge=Se.lastIndexOf("/");return Ge===-1?Se:Se.slice(Ge+1)}function s(Se,Ge){typeof Ge=="string"&&(Ge=new Date(Ge));var Me=Ge.getHours();Me=Me<<6|Ge.getMinutes(),Me=Me<<5|Ge.getSeconds()>>>1,Se.write_shift(2,Me);var Qe=Ge.getFullYear()-1980;Qe=Qe<<4|Ge.getMonth()+1,Qe=Qe<<5|Ge.getDate(),Se.write_shift(2,Qe)}function o(Se){var Ge=Se.read_shift(2)&65535,Me=Se.read_shift(2)&65535,Qe=new Date,Ne=Me&31;Me>>>=5;var ve=Me&15;Me>>>=4,Qe.setMilliseconds(0),Qe.setFullYear(Me+1980),Qe.setMonth(ve-1),Qe.setDate(Ne);var Fe=Ge&31;Ge>>>=5;var ze=Ge&63;return Ge>>>=6,Qe.setHours(Ge),Qe.setMinutes(ze),Qe.setSeconds(Fe<<1),Qe}function l(Se){Ho(Se,0);for(var Ge={},Me=0;Se.l<=Se.length-4;){var Qe=Se.read_shift(2),Ne=Se.read_shift(2),ve=Se.l+Ne,Fe={};switch(Qe){case 21589:Me=Se.read_shift(1),Me&1&&(Fe.mtime=Se.read_shift(4)),Ne>5&&(Me&2&&(Fe.atime=Se.read_shift(4)),Me&4&&(Fe.ctime=Se.read_shift(4))),Fe.mtime&&(Fe.mt=new Date(Fe.mtime*1e3));break}Se.l=ve,Ge[Qe]=Fe}return Ge}var c;function u(){return c||(c={})}function d(Se,Ge){if(Se[0]==80&&Se[1]==75)return tr(Se,Ge);if((Se[0]|32)==109&&(Se[1]|32)==105)return is(Se,Ge);if(Se.length<512)throw new Error("CFB file size "+Se.length+" < 512");var Me=3,Qe=512,Ne=0,ve=0,Fe=0,ze=0,He=0,Ye=[],rt=Se.slice(0,512);Ho(rt,0);var Ct=f(rt);switch(Me=Ct[0],Me){case 3:Qe=512;break;case 4:Qe=4096;break;case 0:if(Ct[1]==0)return tr(Se,Ge);default:throw new Error("Major Version: Expected 3 or 4 saw "+Me)}Qe!==512&&(rt=Se.slice(0,Qe),Ho(rt,28));var Et=Se.slice(0,Qe);A(rt,Me);var Qt=rt.read_shift(4,"i");if(Me===3&&Qt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Qt);rt.l+=4,Fe=rt.read_shift(4,"i"),rt.l+=4,rt.chk("00100000","Mini Stream Cutoff Size: "),ze=rt.read_shift(4,"i"),Ne=rt.read_shift(4,"i"),He=rt.read_shift(4,"i"),ve=rt.read_shift(4,"i");for(var Ot=-1,Kt=0;Kt<109&&(Ot=rt.read_shift(4,"i"),!(Ot<0));++Kt)Ye[Kt]=Ot;var Cr=m(Se,Qe);v(He,ve,Cr,Qe,Ye);var rn=N(Cr,Fe,Ye,Qe);rn[Fe].name="!Directory",Ne>0&&ze!==L&&(rn[ze].name="!MiniFAT"),rn[Ye[0]].name="!FAT",rn.fat_addrs=Ye,rn.ssz=Qe;var Jr={},an=[],va=[],Ys=[];C(Fe,rn,Cr,an,Ne,Jr,va,ze),g(va,Ys,an),an.shift();var Ya={FileIndex:va,FullPaths:Ys};return Ge&&Ge.raw&&(Ya.raw={header:Et,sectors:Cr}),Ya}function f(Se){if(Se[Se.l]==80&&Se[Se.l+1]==75)return[0,0];Se.chk(H,"Header Signature: "),Se.l+=16;var Ge=Se.read_shift(2,"u");return[Se.read_shift(2,"u"),Ge]}function A(Se,Ge){var Me=9;switch(Se.l+=2,Me=Se.read_shift(2)){case 9:if(Ge!=3)throw new Error("Sector Shift: Expected 9 saw "+Me);break;case 12:if(Ge!=4)throw new Error("Sector Shift: Expected 12 saw "+Me);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Me)}Se.chk("0600","Mini Sector Shift: "),Se.chk("000000000000","Reserved: ")}function m(Se,Ge){for(var Me=Math.ceil(Se.length/Ge)-1,Qe=[],Ne=1;Ne<Me;++Ne)Qe[Ne-1]=Se.slice(Ne*Ge,(Ne+1)*Ge);return Qe[Me-1]=Se.slice(Me*Ge),Qe}function g(Se,Ge,Me){for(var Qe=0,Ne=0,ve=0,Fe=0,ze=0,He=Me.length,Ye=[],rt=[];Qe<He;++Qe)Ye[Qe]=rt[Qe]=Qe,Ge[Qe]=Me[Qe];for(;ze<rt.length;++ze)Qe=rt[ze],Ne=Se[Qe].L,ve=Se[Qe].R,Fe=Se[Qe].C,Ye[Qe]===Qe&&(Ne!==-1&&Ye[Ne]!==Ne&&(Ye[Qe]=Ye[Ne]),ve!==-1&&Ye[ve]!==ve&&(Ye[Qe]=Ye[ve])),Fe!==-1&&(Ye[Fe]=Qe),Ne!==-1&&Qe!=Ye[Qe]&&(Ye[Ne]=Ye[Qe],rt.lastIndexOf(Ne)<ze&&rt.push(Ne)),ve!==-1&&Qe!=Ye[Qe]&&(Ye[ve]=Ye[Qe],rt.lastIndexOf(ve)<ze&&rt.push(ve));for(Qe=1;Qe<He;++Qe)Ye[Qe]===Qe&&(ve!==-1&&Ye[ve]!==ve?Ye[Qe]=Ye[ve]:Ne!==-1&&Ye[Ne]!==Ne&&(Ye[Qe]=Ye[Ne]));for(Qe=1;Qe<He;++Qe)if(Se[Qe].type!==0){if(ze=Qe,ze!=Ye[ze])do ze=Ye[ze],Ge[Qe]=Ge[ze]+"/"+Ge[Qe];while(ze!==0&&Ye[ze]!==-1&&ze!=Ye[ze]);Ye[Qe]=-1}for(Ge[0]+="/",Qe=1;Qe<He;++Qe)Se[Qe].type!==2&&(Ge[Qe]+="/")}function x(Se,Ge,Me){for(var Qe=Se.start,Ne=Se.size,ve=[],Fe=Qe;Me&&Ne>0&&Fe>=0;)ve.push(Ge.slice(Fe*S,Fe*S+S)),Ne-=S,Fe=Ug(Me,Fe*4);return ve.length===0?_t(0):mo(ve).slice(0,Se.size)}function v(Se,Ge,Me,Qe,Ne){var ve=L;if(Se===L){if(Ge!==0)throw new Error("DIFAT chain shorter than expected")}else if(Se!==-1){var Fe=Me[Se],ze=(Qe>>>2)-1;if(!Fe)return;for(var He=0;He<ze&&(ve=Ug(Fe,He*4))!==L;++He)Ne.push(ve);v(Ug(Fe,Qe-4),Ge-1,Me,Qe,Ne)}}function y(Se,Ge,Me,Qe,Ne){var ve=[],Fe=[];Ne||(Ne=[]);var ze=Qe-1,He=0,Ye=0;for(He=Ge;He>=0;){Ne[He]=!0,ve[ve.length]=He,Fe.push(Se[He]);var rt=Me[Math.floor(He*4/Qe)];if(Ye=He*4&ze,Qe<4+Ye)throw new Error("FAT boundary crossed: "+He+" 4 "+Qe);if(!Se[rt])break;He=Ug(Se[rt],Ye)}return{nodes:ve,data:cq([Fe])}}function N(Se,Ge,Me,Qe){var Ne=Se.length,ve=[],Fe=[],ze=[],He=[],Ye=Qe-1,rt=0,Ct=0,Et=0,Qt=0;for(rt=0;rt<Ne;++rt)if(ze=[],Et=rt+Ge,Et>=Ne&&(Et-=Ne),!Fe[Et]){He=[];var Ot=[];for(Ct=Et;Ct>=0;){Ot[Ct]=!0,Fe[Ct]=!0,ze[ze.length]=Ct,He.push(Se[Ct]);var Kt=Me[Math.floor(Ct*4/Qe)];if(Qt=Ct*4&Ye,Qe<4+Qt)throw new Error("FAT boundary crossed: "+Ct+" 4 "+Qe);if(!Se[Kt]||(Ct=Ug(Se[Kt],Qt),Ot[Ct]))break}ve[Et]={nodes:ze,data:cq([He])}}return ve}function C(Se,Ge,Me,Qe,Ne,ve,Fe,ze){for(var He=0,Ye=Qe.length?2:0,rt=Ge[Se].data,Ct=0,Et=0,Qt;Ct<rt.length;Ct+=128){var Ot=rt.slice(Ct,Ct+128);Ho(Ot,64),Et=Ot.read_shift(2),Qt=a7(Ot,0,Et-Ye),Qe.push(Qt);var Kt={name:Qt,type:Ot.read_shift(1),color:Ot.read_shift(1),L:Ot.read_shift(4,"i"),R:Ot.read_shift(4,"i"),C:Ot.read_shift(4,"i"),clsid:Ot.read_shift(16),state:Ot.read_shift(4,"i"),start:0,size:0},Cr=Ot.read_shift(2)+Ot.read_shift(2)+Ot.read_shift(2)+Ot.read_shift(2);Cr!==0&&(Kt.ct=_(Ot,Ot.l-8));var rn=Ot.read_shift(2)+Ot.read_shift(2)+Ot.read_shift(2)+Ot.read_shift(2);rn!==0&&(Kt.mt=_(Ot,Ot.l-8)),Kt.start=Ot.read_shift(4,"i"),Kt.size=Ot.read_shift(4,"i"),Kt.size<0&&Kt.start<0&&(Kt.size=Kt.type=0,Kt.start=L,Kt.name=""),Kt.type===5?(He=Kt.start,Ne>0&&He!==L&&(Ge[He].name="!StreamData")):Kt.size>=4096?(Kt.storage="fat",Ge[Kt.start]===void 0&&(Ge[Kt.start]=y(Me,Kt.start,Ge.fat_addrs,Ge.ssz)),Ge[Kt.start].name=Kt.name,Kt.content=Ge[Kt.start].data.slice(0,Kt.size)):(Kt.storage="minifat",Kt.size<0?Kt.size=0:He!==L&&Kt.start!==L&&Ge[He]&&(Kt.content=x(Kt,Ge[He].data,(Ge[ze]||{}).data))),Kt.content&&Ho(Kt.content,0),ve[Qt]=Kt,Fe.push(Kt)}}function _(Se,Ge){return new Date((vu(Se,Ge+4)/1e7*Math.pow(2,32)+vu(Se,Ge)/1e7-11644473600)*1e3)}function j(Se,Ge){return u(),d(c.readFileSync(Se),Ge)}function I(Se,Ge){var Me=Ge&&Ge.type;switch(Me||bn&&Buffer.isBuffer(Se)&&(Me="buffer"),Me||"base64"){case"file":return j(Se,Ge);case"base64":return d(Nu(Iu(Se)),Ge);case"binary":return d(Nu(Se),Ge)}return d(Se,Ge)}function T(Se,Ge){var Me=Ge||{},Qe=Me.root||"Root Entry";if(Se.FullPaths||(Se.FullPaths=[]),Se.FileIndex||(Se.FileIndex=[]),Se.FullPaths.length!==Se.FileIndex.length)throw new Error("inconsistent CFB structure");Se.FullPaths.length===0&&(Se.FullPaths[0]=Qe+"/",Se.FileIndex[0]={name:Qe,type:5}),Me.CLSID&&(Se.FileIndex[0].clsid=Me.CLSID),k(Se)}function k(Se){var Ge="Sh33tJ5";if(!Br.find(Se,"/"+Ge)){var Me=_t(4);Me[0]=55,Me[1]=Me[3]=50,Me[2]=54,Se.FileIndex.push({name:Ge,type:2,content:Me,size:4,L:69,R:69,C:69}),Se.FullPaths.push(Se.FullPaths[0]+Ge),B(Se)}}function B(Se,Ge){T(Se);for(var Me=!1,Qe=!1,Ne=Se.FullPaths.length-1;Ne>=0;--Ne){var ve=Se.FileIndex[Ne];switch(ve.type){case 0:Qe?Me=!0:(Se.FileIndex.pop(),Se.FullPaths.pop());break;case 1:case 2:case 5:Qe=!0,isNaN(ve.R*ve.L*ve.C)&&(Me=!0),ve.R>-1&&ve.L>-1&&ve.R==ve.L&&(Me=!0);break;default:Me=!0;break}}if(!(!Me&&!Ge)){var Fe=new Date(1987,1,19),ze=0,He=Object.create?Object.create(null):{},Ye=[];for(Ne=0;Ne<Se.FullPaths.length;++Ne)He[Se.FullPaths[Ne]]=!0,Se.FileIndex[Ne].type!==0&&Ye.push([Se.FullPaths[Ne],Se.FileIndex[Ne]]);for(Ne=0;Ne<Ye.length;++Ne){var rt=n(Ye[Ne][0]);Qe=He[rt],Qe||(Ye.push([rt,{name:a(rt).replace("/",""),type:1,clsid:Q,ct:Fe,mt:Fe,content:null}]),He[rt]=!0)}for(Ye.sort(function(Qt,Ot){return r(Qt[0],Ot[0])}),Se.FullPaths=[],Se.FileIndex=[],Ne=0;Ne<Ye.length;++Ne)Se.FullPaths[Ne]=Ye[Ne][0],Se.FileIndex[Ne]=Ye[Ne][1];for(Ne=0;Ne<Ye.length;++Ne){var Ct=Se.FileIndex[Ne],Et=Se.FullPaths[Ne];if(Ct.name=a(Et).replace("/",""),Ct.L=Ct.R=Ct.C=-(Ct.color=1),Ct.size=Ct.content?Ct.content.length:0,Ct.start=0,Ct.clsid=Ct.clsid||Q,Ne===0)Ct.C=Ye.length>1?1:-1,Ct.size=0,Ct.type=5;else if(Et.slice(-1)=="/"){for(ze=Ne+1;ze<Ye.length&&n(Se.FullPaths[ze])!=Et;++ze);for(Ct.C=ze>=Ye.length?-1:ze,ze=Ne+1;ze<Ye.length&&n(Se.FullPaths[ze])!=n(Et);++ze);Ct.R=ze>=Ye.length?-1:ze,Ct.type=1}else n(Se.FullPaths[Ne+1]||"")==n(Et)&&(Ct.R=Ne+1),Ct.type=2}}}function M(Se,Ge){var Me=Ge||{};if(Me.fileType=="mad")return rr(Se,Me);switch(B(Se),Me.fileType){case"zip":return hr(Se,Me)}var Qe=function(Qt){for(var Ot=0,Kt=0,Cr=0;Cr<Qt.FileIndex.length;++Cr){var rn=Qt.FileIndex[Cr];if(rn.content){var Jr=rn.content.length;Jr>0&&(Jr<4096?Ot+=Jr+63>>6:Kt+=Jr+511>>9)}}for(var an=Qt.FullPaths.length+3>>2,va=Ot+7>>3,Ys=Ot+127>>7,Ya=va+Kt+an+Ys,os=Ya+127>>7,xs=os<=109?0:Math.ceil((os-109)/127);Ya+os+xs+127>>7>os;)xs=++os<=109?0:Math.ceil((os-109)/127);var Tr=[1,xs,os,Ys,an,Kt,Ot,0];return Qt.FileIndex[0].size=Ot<<6,Tr[7]=(Qt.FileIndex[0].start=Tr[0]+Tr[1]+Tr[2]+Tr[3]+Tr[4]+Tr[5])+(Tr[6]+7>>3),Tr}(Se),Ne=_t(Qe[7]<<9),ve=0,Fe=0;{for(ve=0;ve<8;++ve)Ne.write_shift(1,q[ve]);for(ve=0;ve<8;++ve)Ne.write_shift(2,0);for(Ne.write_shift(2,62),Ne.write_shift(2,3),Ne.write_shift(2,65534),Ne.write_shift(2,9),Ne.write_shift(2,6),ve=0;ve<3;++ve)Ne.write_shift(2,0);for(Ne.write_shift(4,0),Ne.write_shift(4,Qe[2]),Ne.write_shift(4,Qe[0]+Qe[1]+Qe[2]+Qe[3]-1),Ne.write_shift(4,0),Ne.write_shift(4,4096),Ne.write_shift(4,Qe[3]?Qe[0]+Qe[1]+Qe[2]-1:L),Ne.write_shift(4,Qe[3]),Ne.write_shift(-4,Qe[1]?Qe[0]-1:L),Ne.write_shift(4,Qe[1]),ve=0;ve<109;++ve)Ne.write_shift(-4,ve<Qe[2]?Qe[1]+ve:-1)}if(Qe[1])for(Fe=0;Fe<Qe[1];++Fe){for(;ve<236+Fe*127;++ve)Ne.write_shift(-4,ve<Qe[2]?Qe[1]+ve:-1);Ne.write_shift(-4,Fe===Qe[1]-1?L:Fe+1)}var ze=function(Qt){for(Fe+=Qt;ve<Fe-1;++ve)Ne.write_shift(-4,ve+1);Qt&&(++ve,Ne.write_shift(-4,L))};for(Fe=ve=0,Fe+=Qe[1];ve<Fe;++ve)Ne.write_shift(-4,z.DIFSECT);for(Fe+=Qe[2];ve<Fe;++ve)Ne.write_shift(-4,z.FATSECT);ze(Qe[3]),ze(Qe[4]);for(var He=0,Ye=0,rt=Se.FileIndex[0];He<Se.FileIndex.length;++He)rt=Se.FileIndex[He],rt.content&&(Ye=rt.content.length,!(Ye<4096)&&(rt.start=Fe,ze(Ye+511>>9)));for(ze(Qe[6]+7>>3);Ne.l&511;)Ne.write_shift(-4,z.ENDOFCHAIN);for(Fe=ve=0,He=0;He<Se.FileIndex.length;++He)rt=Se.FileIndex[He],rt.content&&(Ye=rt.content.length,!(!Ye||Ye>=4096)&&(rt.start=Fe,ze(Ye+63>>6)));for(;Ne.l&511;)Ne.write_shift(-4,z.ENDOFCHAIN);for(ve=0;ve<Qe[4]<<2;++ve){var Ct=Se.FullPaths[ve];if(!Ct||Ct.length===0){for(He=0;He<17;++He)Ne.write_shift(4,0);for(He=0;He<3;++He)Ne.write_shift(4,-1);for(He=0;He<12;++He)Ne.write_shift(4,0);continue}rt=Se.FileIndex[ve],ve===0&&(rt.start=rt.size?rt.start-1:L);var Et=ve===0&&Me.root||rt.name;if(Ye=2*(Et.length+1),Ne.write_shift(64,Et,"utf16le"),Ne.write_shift(2,Ye),Ne.write_shift(1,rt.type),Ne.write_shift(1,rt.color),Ne.write_shift(-4,rt.L),Ne.write_shift(-4,rt.R),Ne.write_shift(-4,rt.C),rt.clsid)Ne.write_shift(16,rt.clsid,"hex");else for(He=0;He<4;++He)Ne.write_shift(4,0);Ne.write_shift(4,rt.state||0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,rt.start),Ne.write_shift(4,rt.size),Ne.write_shift(4,0)}for(ve=1;ve<Se.FileIndex.length;++ve)if(rt=Se.FileIndex[ve],rt.size>=4096)if(Ne.l=rt.start+1<<9,bn&&Buffer.isBuffer(rt.content))rt.content.copy(Ne,Ne.l,0,rt.size),Ne.l+=rt.size+511&-512;else{for(He=0;He<rt.size;++He)Ne.write_shift(1,rt.content[He]);for(;He&511;++He)Ne.write_shift(1,0)}for(ve=1;ve<Se.FileIndex.length;++ve)if(rt=Se.FileIndex[ve],rt.size>0&&rt.size<4096)if(bn&&Buffer.isBuffer(rt.content))rt.content.copy(Ne,Ne.l,0,rt.size),Ne.l+=rt.size+63&-64;else{for(He=0;He<rt.size;++He)Ne.write_shift(1,rt.content[He]);for(;He&63;++He)Ne.write_shift(1,0)}if(bn)Ne.l=Ne.length;else for(;Ne.l<Ne.length;)Ne.write_shift(1,0);return Ne}function P(Se,Ge){var Me=Se.FullPaths.map(function(He){return He.toUpperCase()}),Qe=Me.map(function(He){var Ye=He.split("/");return Ye[Ye.length-(He.slice(-1)=="/"?2:1)]}),Ne=!1;Ge.charCodeAt(0)===47?(Ne=!0,Ge=Me[0].slice(0,-1)+Ge):Ne=Ge.indexOf("/")!==-1;var ve=Ge.toUpperCase(),Fe=Ne===!0?Me.indexOf(ve):Qe.indexOf(ve);if(Fe!==-1)return Se.FileIndex[Fe];var ze=!ve.match(b2);for(ve=ve.replace(nc,""),ze&&(ve=ve.replace(b2,"!")),Fe=0;Fe<Me.length;++Fe)if((ze?Me[Fe].replace(b2,"!"):Me[Fe]).replace(nc,"")==ve||(ze?Qe[Fe].replace(b2,"!"):Qe[Fe]).replace(nc,"")==ve)return Se.FileIndex[Fe];return null}var S=64,L=-2,H="d0cf11e0a1b11ae1",q=[208,207,17,224,161,177,26,225],Q="00000000000000000000000000000000",z={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:L,FREESECT:-1,HEADER_SIGNATURE:H,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Q,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function K(Se,Ge,Me){u();var Qe=M(Se,Me);c.writeFileSync(Ge,Qe)}function Z(Se){for(var Ge=new Array(Se.length),Me=0;Me<Se.length;++Me)Ge[Me]=String.fromCharCode(Se[Me]);return Ge.join("")}function U(Se,Ge){var Me=M(Se,Ge);switch(Ge&&Ge.type||"buffer"){case"file":return u(),c.writeFileSync(Ge.filename,Me),Me;case"binary":return typeof Me=="string"?Me:Z(Me);case"base64":return VN(typeof Me=="string"?Me:Z(Me));case"buffer":if(bn)return Buffer.isBuffer(Me)?Me:MA(Me);case"array":return typeof Me=="string"?Nu(Me):Me}return Me}var Y;function R(Se){try{var Ge=Se.InflateRaw,Me=new Ge;if(Me._processChunk(new Uint8Array([3,0]),Me._finishFlushFlag),Me.bytesRead)Y=Se;else throw new Error("zlib does not expose bytesRead")}catch(Qe){console.error("cannot use native zlib: "+(Qe.message||Qe))}}function D(Se,Ge){if(!Y)return Ut(Se,Ge);var Me=Y.InflateRaw,Qe=new Me,Ne=Qe._processChunk(Se.slice(Se.l),Qe._finishFlushFlag);return Se.l+=Qe.bytesRead,Ne}function W(Se){return Y?Y.deflateRawSync(Se):Xe(Se)}var J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],le=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ie=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function re(Se){var Ge=(Se<<1|Se<<11)&139536|(Se<<5|Se<<15)&558144;return(Ge>>16|Ge>>8|Ge)&255}for(var ce=typeof Uint8Array<"u",oe=ce?new Uint8Array(256):[],be=0;be<256;++be)oe[be]=re(be);function X(Se,Ge){var Me=oe[Se&255];return Ge<=8?Me>>>8-Ge:(Me=Me<<8|oe[Se>>8&255],Ge<=16?Me>>>16-Ge:(Me=Me<<8|oe[Se>>16&255],Me>>>24-Ge))}function je(Se,Ge){var Me=Ge&7,Qe=Ge>>>3;return(Se[Qe]|(Me<=6?0:Se[Qe+1]<<8))>>>Me&3}function De(Se,Ge){var Me=Ge&7,Qe=Ge>>>3;return(Se[Qe]|(Me<=5?0:Se[Qe+1]<<8))>>>Me&7}function ke(Se,Ge){var Me=Ge&7,Qe=Ge>>>3;return(Se[Qe]|(Me<=4?0:Se[Qe+1]<<8))>>>Me&15}function ue(Se,Ge){var Me=Ge&7,Qe=Ge>>>3;return(Se[Qe]|(Me<=3?0:Se[Qe+1]<<8))>>>Me&31}function we(Se,Ge){var Me=Ge&7,Qe=Ge>>>3;return(Se[Qe]|(Me<=1?0:Se[Qe+1]<<8))>>>Me&127}function Ae(Se,Ge,Me){var Qe=Ge&7,Ne=Ge>>>3,ve=(1<<Me)-1,Fe=Se[Ne]>>>Qe;return Me<8-Qe||(Fe|=Se[Ne+1]<<8-Qe,Me<16-Qe)||(Fe|=Se[Ne+2]<<16-Qe,Me<24-Qe)||(Fe|=Se[Ne+3]<<24-Qe),Fe&ve}function de(Se,Ge,Me){var Qe=Ge&7,Ne=Ge>>>3;return Qe<=5?Se[Ne]|=(Me&7)<<Qe:(Se[Ne]|=Me<<Qe&255,Se[Ne+1]=(Me&7)>>8-Qe),Ge+3}function ae(Se,Ge,Me){var Qe=Ge&7,Ne=Ge>>>3;return Me=(Me&1)<<Qe,Se[Ne]|=Me,Ge+1}function fe(Se,Ge,Me){var Qe=Ge&7,Ne=Ge>>>3;return Me<<=Qe,Se[Ne]|=Me&255,Me>>>=8,Se[Ne+1]=Me,Ge+8}function ge(Se,Ge,Me){var Qe=Ge&7,Ne=Ge>>>3;return Me<<=Qe,Se[Ne]|=Me&255,Me>>>=8,Se[Ne+1]=Me&255,Se[Ne+2]=Me>>>8,Ge+16}function xe(Se,Ge){var Me=Se.length,Qe=2*Me>Ge?2*Me:Ge+5,Ne=0;if(Me>=Ge)return Se;if(bn){var ve=$G(Qe);if(Se.copy)Se.copy(ve);else for(;Ne<Se.length;++Ne)ve[Ne]=Se[Ne];return ve}else if(ce){var Fe=new Uint8Array(Qe);if(Fe.set)Fe.set(Se);else for(;Ne<Me;++Ne)Fe[Ne]=Se[Ne];return Fe}return Se.length=Qe,Se}function Ue(Se){for(var Ge=new Array(Se),Me=0;Me<Se;++Me)Ge[Me]=0;return Ge}function qe(Se,Ge,Me){var Qe=1,Ne=0,ve=0,Fe=0,ze=0,He=Se.length,Ye=ce?new Uint16Array(32):Ue(32);for(ve=0;ve<32;++ve)Ye[ve]=0;for(ve=He;ve<Me;++ve)Se[ve]=0;He=Se.length;var rt=ce?new Uint16Array(He):Ue(He);for(ve=0;ve<He;++ve)Ye[Ne=Se[ve]]++,Qe<Ne&&(Qe=Ne),rt[ve]=0;for(Ye[0]=0,ve=1;ve<=Qe;++ve)Ye[ve+16]=ze=ze+Ye[ve-1]<<1;for(ve=0;ve<He;++ve)ze=Se[ve],ze!=0&&(rt[ve]=Ye[ze+16]++);var Ct=0;for(ve=0;ve<He;++ve)if(Ct=Se[ve],Ct!=0)for(ze=X(rt[ve],Qe)>>Qe-Ct,Fe=(1<<Qe+4-Ct)-1;Fe>=0;--Fe)Ge[ze|Fe<<Ct]=Ct&15|ve<<4;return Qe}var Ze=ce?new Uint16Array(512):Ue(512),We=ce?new Uint16Array(32):Ue(32);if(!ce){for(var me=0;me<512;++me)Ze[me]=0;for(me=0;me<32;++me)We[me]=0}(function(){for(var Se=[],Ge=0;Ge<32;Ge++)Se.push(5);qe(Se,We,32);var Me=[];for(Ge=0;Ge<=143;Ge++)Me.push(8);for(;Ge<=255;Ge++)Me.push(9);for(;Ge<=279;Ge++)Me.push(7);for(;Ge<=287;Ge++)Me.push(8);qe(Me,Ze,288)})();var Ve=function(){for(var Ge=ce?new Uint8Array(32768):[],Me=0,Qe=0;Me<ie.length-1;++Me)for(;Qe<ie[Me+1];++Qe)Ge[Qe]=Me;for(;Qe<32768;++Qe)Ge[Qe]=29;var Ne=ce?new Uint8Array(259):[];for(Me=0,Qe=0;Me<le.length-1;++Me)for(;Qe<le[Me+1];++Qe)Ne[Qe]=Me;function ve(ze,He){for(var Ye=0;Ye<ze.length;){var rt=Math.min(65535,ze.length-Ye),Ct=Ye+rt==ze.length;for(He.write_shift(1,+Ct),He.write_shift(2,rt),He.write_shift(2,~rt&65535);rt-- >0;)He[He.l++]=ze[Ye++]}return He.l}function Fe(ze,He){for(var Ye=0,rt=0,Ct=ce?new Uint16Array(32768):[];rt<ze.length;){var Et=Math.min(65535,ze.length-rt);if(Et<10){for(Ye=de(He,Ye,+(rt+Et==ze.length)),Ye&7&&(Ye+=8-(Ye&7)),He.l=Ye/8|0,He.write_shift(2,Et),He.write_shift(2,~Et&65535);Et-- >0;)He[He.l++]=ze[rt++];Ye=He.l*8;continue}Ye=de(He,Ye,+(rt+Et==ze.length)+2);for(var Qt=0;Et-- >0;){var Ot=ze[rt];Qt=(Qt<<5^Ot)&32767;var Kt=-1,Cr=0;if((Kt=Ct[Qt])&&(Kt|=rt&-32768,Kt>rt&&(Kt-=32768),Kt<rt))for(;ze[Kt+Cr]==ze[rt+Cr]&&Cr<250;)++Cr;if(Cr>2){Ot=Ne[Cr],Ot<=22?Ye=fe(He,Ye,oe[Ot+1]>>1)-1:(fe(He,Ye,3),Ye+=5,fe(He,Ye,oe[Ot-23]>>5),Ye+=3);var rn=Ot<8?0:Ot-4>>2;rn>0&&(ge(He,Ye,Cr-le[Ot]),Ye+=rn),Ot=Ge[rt-Kt],Ye=fe(He,Ye,oe[Ot]>>3),Ye-=3;var Jr=Ot<4?0:Ot-2>>1;Jr>0&&(ge(He,Ye,rt-Kt-ie[Ot]),Ye+=Jr);for(var an=0;an<Cr;++an)Ct[Qt]=rt&32767,Qt=(Qt<<5^ze[rt])&32767,++rt;Et-=Cr-1}else Ot<=143?Ot=Ot+48:Ye=ae(He,Ye,1),Ye=fe(He,Ye,oe[Ot]),Ct[Qt]=rt&32767,++rt}Ye=fe(He,Ye,0)-1}return He.l=(Ye+7)/8|0,He.l}return function(He,Ye){return He.length<8?ve(He,Ye):Fe(He,Ye)}}();function Xe(Se){var Ge=_t(50+Math.floor(Se.length*1.1)),Me=Ve(Se,Ge);return Ge.slice(0,Me)}var Ie=ce?new Uint16Array(32768):Ue(32768),Be=ce?new Uint16Array(32768):Ue(32768),et=ce?new Uint16Array(128):Ue(128),bt=1,jt=1;function qt(Se,Ge){var Me=ue(Se,Ge)+257;Ge+=5;var Qe=ue(Se,Ge)+1;Ge+=5;var Ne=ke(Se,Ge)+4;Ge+=4;for(var ve=0,Fe=ce?new Uint8Array(19):Ue(19),ze=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],He=1,Ye=ce?new Uint8Array(8):Ue(8),rt=ce?new Uint8Array(8):Ue(8),Ct=Fe.length,Et=0;Et<Ne;++Et)Fe[J[Et]]=ve=De(Se,Ge),He<ve&&(He=ve),Ye[ve]++,Ge+=3;var Qt=0;for(Ye[0]=0,Et=1;Et<=He;++Et)rt[Et]=Qt=Qt+Ye[Et-1]<<1;for(Et=0;Et<Ct;++Et)(Qt=Fe[Et])!=0&&(ze[Et]=rt[Qt]++);var Ot=0;for(Et=0;Et<Ct;++Et)if(Ot=Fe[Et],Ot!=0){Qt=oe[ze[Et]]>>8-Ot;for(var Kt=(1<<7-Ot)-1;Kt>=0;--Kt)et[Qt|Kt<<Ot]=Ot&7|Et<<3}var Cr=[];for(He=1;Cr.length<Me+Qe;)switch(Qt=et[we(Se,Ge)],Ge+=Qt&7,Qt>>>=3){case 16:for(ve=3+je(Se,Ge),Ge+=2,Qt=Cr[Cr.length-1];ve-- >0;)Cr.push(Qt);break;case 17:for(ve=3+De(Se,Ge),Ge+=3;ve-- >0;)Cr.push(0);break;case 18:for(ve=11+we(Se,Ge),Ge+=7;ve-- >0;)Cr.push(0);break;default:Cr.push(Qt),He<Qt&&(He=Qt);break}var rn=Cr.slice(0,Me),Jr=Cr.slice(Me);for(Et=Me;Et<286;++Et)rn[Et]=0;for(Et=Qe;Et<30;++Et)Jr[Et]=0;return bt=qe(rn,Ie,286),jt=qe(Jr,Be,30),Ge}function ir(Se,Ge){if(Se[0]==3&&!(Se[1]&3))return[jp(Ge),2];for(var Me=0,Qe=0,Ne=$G(Ge||1<<18),ve=0,Fe=Ne.length>>>0,ze=0,He=0;(Qe&1)==0;){if(Qe=De(Se,Me),Me+=3,Qe>>>1)Qe>>1==1?(ze=9,He=5):(Me=qt(Se,Me),ze=bt,He=jt);else{Me&7&&(Me+=8-(Me&7));var Ye=Se[Me>>>3]|Se[(Me>>>3)+1]<<8;if(Me+=32,Ye>0)for(!Ge&&Fe<ve+Ye&&(Ne=xe(Ne,ve+Ye),Fe=Ne.length);Ye-- >0;)Ne[ve++]=Se[Me>>>3],Me+=8;continue}for(;;){!Ge&&Fe<ve+32767&&(Ne=xe(Ne,ve+32767),Fe=Ne.length);var rt=Ae(Se,Me,ze),Ct=Qe>>>1==1?Ze[rt]:Ie[rt];if(Me+=Ct&15,Ct>>>=4,(Ct>>>8&255)===0)Ne[ve++]=Ct;else{if(Ct==256)break;Ct-=257;var Et=Ct<8?0:Ct-4>>2;Et>5&&(Et=0);var Qt=ve+le[Ct];Et>0&&(Qt+=Ae(Se,Me,Et),Me+=Et),rt=Ae(Se,Me,He),Ct=Qe>>>1==1?We[rt]:Be[rt],Me+=Ct&15,Ct>>>=4;var Ot=Ct<4?0:Ct-2>>1,Kt=ie[Ct];for(Ot>0&&(Kt+=Ae(Se,Me,Ot),Me+=Ot),!Ge&&Fe<Qt&&(Ne=xe(Ne,Qt+100),Fe=Ne.length);ve<Qt;)Ne[ve]=Ne[ve-Kt],++ve}}}return Ge?[Ne,Me+7>>>3]:[Ne.slice(0,ve),Me+7>>>3]}function Ut(Se,Ge){var Me=Se.slice(Se.l||0),Qe=ir(Me,Ge);return Se.l+=Qe[1],Qe[0]}function Nr(Se,Ge){if(Se)typeof console<"u"&&console.error(Ge);else throw new Error(Ge)}function tr(Se,Ge){var Me=Se;Ho(Me,0);var Qe=[],Ne=[],ve={FileIndex:Qe,FullPaths:Ne};T(ve,{root:Ge.root});for(var Fe=Me.length-4;(Me[Fe]!=80||Me[Fe+1]!=75||Me[Fe+2]!=5||Me[Fe+3]!=6)&&Fe>=0;)--Fe;Me.l=Fe+4,Me.l+=4;var ze=Me.read_shift(2);Me.l+=6;var He=Me.read_shift(4);for(Me.l=He,Fe=0;Fe<ze;++Fe){Me.l+=20;var Ye=Me.read_shift(4),rt=Me.read_shift(4),Ct=Me.read_shift(2),Et=Me.read_shift(2),Qt=Me.read_shift(2);Me.l+=8;var Ot=Me.read_shift(4),Kt=l(Me.slice(Me.l+Ct,Me.l+Ct+Et));Me.l+=Ct+Et+Qt;var Cr=Me.l;Me.l=Ot+4,Xr(Me,Ye,rt,ve,Kt),Me.l=Cr}return ve}function Xr(Se,Ge,Me,Qe,Ne){Se.l+=2;var ve=Se.read_shift(2),Fe=Se.read_shift(2),ze=o(Se);if(ve&8257)throw new Error("Unsupported ZIP encryption");for(var He=Se.read_shift(4),Ye=Se.read_shift(4),rt=Se.read_shift(4),Ct=Se.read_shift(2),Et=Se.read_shift(2),Qt="",Ot=0;Ot<Ct;++Ot)Qt+=String.fromCharCode(Se[Se.l++]);if(Et){var Kt=l(Se.slice(Se.l,Se.l+Et));(Kt[21589]||{}).mt&&(ze=Kt[21589].mt),((Ne||{})[21589]||{}).mt&&(ze=Ne[21589].mt)}Se.l+=Et;var Cr=Se.slice(Se.l,Se.l+Ye);switch(Fe){case 8:Cr=D(Se,rt);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Fe)}var rn=!1;ve&8&&(He=Se.read_shift(4),He==134695760&&(He=Se.read_shift(4),rn=!0),Ye=Se.read_shift(4),rt=Se.read_shift(4)),Ye!=Ge&&Nr(rn,"Bad compressed size: "+Ge+" != "+Ye),rt!=Me&&Nr(rn,"Bad uncompressed size: "+Me+" != "+rt),cn(Qe,Qt,Cr,{unsafe:!0,mt:ze})}function hr(Se,Ge){var Me=Ge||{},Qe=[],Ne=[],ve=_t(1),Fe=Me.compression?8:0,ze=0,He=0,Ye=0,rt=0,Ct=0,Et=Se.FullPaths[0],Qt=Et,Ot=Se.FileIndex[0],Kt=[],Cr=0;for(He=1;He<Se.FullPaths.length;++He)if(Qt=Se.FullPaths[He].slice(Et.length),Ot=Se.FileIndex[He],!(!Ot.size||!Ot.content||Qt=="Sh33tJ5")){var rn=rt,Jr=_t(Qt.length);for(Ye=0;Ye<Qt.length;++Ye)Jr.write_shift(1,Qt.charCodeAt(Ye)&127);Jr=Jr.slice(0,Jr.l),Kt[Ct]=uBe.buf(Ot.content,0);var an=Ot.content;Fe==8&&(an=W(an)),ve=_t(30),ve.write_shift(4,67324752),ve.write_shift(2,20),ve.write_shift(2,ze),ve.write_shift(2,Fe),Ot.mt?s(ve,Ot.mt):ve.write_shift(4,0),ve.write_shift(-4,Kt[Ct]),ve.write_shift(4,an.length),ve.write_shift(4,Ot.content.length),ve.write_shift(2,Jr.length),ve.write_shift(2,0),rt+=ve.length,Qe.push(ve),rt+=Jr.length,Qe.push(Jr),rt+=an.length,Qe.push(an),ve=_t(46),ve.write_shift(4,33639248),ve.write_shift(2,0),ve.write_shift(2,20),ve.write_shift(2,ze),ve.write_shift(2,Fe),ve.write_shift(4,0),ve.write_shift(-4,Kt[Ct]),ve.write_shift(4,an.length),ve.write_shift(4,Ot.content.length),ve.write_shift(2,Jr.length),ve.write_shift(2,0),ve.write_shift(2,0),ve.write_shift(2,0),ve.write_shift(2,0),ve.write_shift(4,0),ve.write_shift(4,rn),Cr+=ve.l,Ne.push(ve),Cr+=Jr.length,Ne.push(Jr),++Ct}return ve=_t(22),ve.write_shift(4,101010256),ve.write_shift(2,0),ve.write_shift(2,0),ve.write_shift(2,Ct),ve.write_shift(2,Ct),ve.write_shift(4,Cr),ve.write_shift(4,rt),ve.write_shift(2,0),mo([mo(Qe),mo(Ne),ve])}var Dr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function or(Se,Ge){if(Se.ctype)return Se.ctype;var Me=Se.name||"",Qe=Me.match(/\.([^\.]+)$/);return Qe&&Dr[Qe[1]]||Ge&&(Qe=(Me=Ge).match(/[\.\\]([^\.\\])+$/),Qe&&Dr[Qe[1]])?Dr[Qe[1]]:"application/octet-stream"}function Yr(Se){for(var Ge=VN(Se),Me=[],Qe=0;Qe<Ge.length;Qe+=76)Me.push(Ge.slice(Qe,Qe+76));return Me.join(`\r
`)+`\r
`}function Xa(Se){var Ge=Se.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ye){var rt=Ye.charCodeAt(0).toString(16).toUpperCase();return"="+(rt.length==1?"0"+rt:rt)});Ge=Ge.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Ge.charAt(0)==`
`&&(Ge="=0D"+Ge.slice(1)),Ge=Ge.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Me=[],Qe=Ge.split(`\r
`),Ne=0;Ne<Qe.length;++Ne){var ve=Qe[Ne];if(ve.length==0){Me.push("");continue}for(var Fe=0;Fe<ve.length;){var ze=76,He=ve.slice(Fe,Fe+ze);He.charAt(ze-1)=="="?ze--:He.charAt(ze-2)=="="?ze-=2:He.charAt(ze-3)=="="&&(ze-=3),He=ve.slice(Fe,Fe+ze),Fe+=ze,Fe<ve.length&&(He+="="),Me.push(He)}}return Me.join(`\r
`)}function aa(Se){for(var Ge=[],Me=0;Me<Se.length;++Me){for(var Qe=Se[Me];Me<=Se.length&&Qe.charAt(Qe.length-1)=="=";)Qe=Qe.slice(0,Qe.length-1)+Se[++Me];Ge.push(Qe)}for(var Ne=0;Ne<Ge.length;++Ne)Ge[Ne]=Ge[Ne].replace(/[=][0-9A-Fa-f]{2}/g,function(ve){return String.fromCharCode(parseInt(ve.slice(1),16))});return Nu(Ge.join(`\r
`))}function Gn(Se,Ge,Me){for(var Qe="",Ne="",ve="",Fe,ze=0;ze<10;++ze){var He=Ge[ze];if(!He||He.match(/^\s*$/))break;var Ye=He.match(/^(.*?):\s*([^\s].*)$/);if(Ye)switch(Ye[1].toLowerCase()){case"content-location":Qe=Ye[2].trim();break;case"content-type":ve=Ye[2].trim();break;case"content-transfer-encoding":Ne=Ye[2].trim();break}}switch(++ze,Ne.toLowerCase()){case"base64":Fe=Nu(Iu(Ge.slice(ze).join("")));break;case"quoted-printable":Fe=aa(Ge.slice(ze));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ne)}var rt=cn(Se,Qe.slice(Me.length),Fe,{unsafe:!0});ve&&(rt.ctype=ve)}function is(Se,Ge){if(Z(Se.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Me=Ge&&Ge.root||"",Qe=(bn&&Buffer.isBuffer(Se)?Se.toString("binary"):Z(Se)).split(`\r
`),Ne=0,ve="";for(Ne=0;Ne<Qe.length;++Ne)if(ve=Qe[Ne],!!/^Content-Location:/i.test(ve)&&(ve=ve.slice(ve.indexOf("file")),Me||(Me=ve.slice(0,ve.lastIndexOf("/")+1)),ve.slice(0,Me.length)!=Me))for(;Me.length>0&&(Me=Me.slice(0,Me.length-1),Me=Me.slice(0,Me.lastIndexOf("/")+1),ve.slice(0,Me.length)!=Me););var Fe=(Qe[1]||"").match(/boundary="(.*?)"/);if(!Fe)throw new Error("MAD cannot find boundary");var ze="--"+(Fe[1]||""),He=[],Ye=[],rt={FileIndex:He,FullPaths:Ye};T(rt);var Ct,Et=0;for(Ne=0;Ne<Qe.length;++Ne){var Qt=Qe[Ne];Qt!==ze&&Qt!==ze+"--"||(Et++&&Gn(rt,Qe.slice(Ct,Ne),Me),Ct=Ne)}return rt}function rr(Se,Ge){var Me=Ge||{},Qe=Me.boundary||"SheetJS";Qe="------="+Qe;for(var Ne=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Qe.slice(2)+'"',"","",""],ve=Se.FullPaths[0],Fe=ve,ze=Se.FileIndex[0],He=1;He<Se.FullPaths.length;++He)if(Fe=Se.FullPaths[He].slice(ve.length),ze=Se.FileIndex[He],!(!ze.size||!ze.content||Fe=="Sh33tJ5")){Fe=Fe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Cr){return"_x"+Cr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Cr){return"_u"+Cr.charCodeAt(0).toString(16)+"_"});for(var Ye=ze.content,rt=bn&&Buffer.isBuffer(Ye)?Ye.toString("binary"):Z(Ye),Ct=0,Et=Math.min(1024,rt.length),Qt=0,Ot=0;Ot<=Et;++Ot)(Qt=rt.charCodeAt(Ot))>=32&&Qt<128&&++Ct;var Kt=Ct>=Et*4/5;Ne.push(Qe),Ne.push("Content-Location: "+(Me.root||"file:///C:/SheetJS/")+Fe),Ne.push("Content-Transfer-Encoding: "+(Kt?"quoted-printable":"base64")),Ne.push("Content-Type: "+or(ze,Fe)),Ne.push(""),Ne.push(Kt?Xa(rt):Yr(rt))}return Ne.push(Qe+`--\r
`),Ne.join(`\r
`)}function wn(Se){var Ge={};return T(Ge,Se),Ge}function cn(Se,Ge,Me,Qe){var Ne=Qe&&Qe.unsafe;Ne||T(Se);var ve=!Ne&&Br.find(Se,Ge);if(!ve){var Fe=Se.FullPaths[0];Ge.slice(0,Fe.length)==Fe?Fe=Ge:(Fe.slice(-1)!="/"&&(Fe+="/"),Fe=(Fe+Ge).replace("//","/")),ve={name:a(Ge),type:2},Se.FileIndex.push(ve),Se.FullPaths.push(Fe),Ne||Br.utils.cfb_gc(Se)}return ve.content=Me,ve.size=Me?Me.length:0,Qe&&(Qe.CLSID&&(ve.clsid=Qe.CLSID),Qe.mt&&(ve.mt=Qe.mt),Qe.ct&&(ve.ct=Qe.ct)),ve}function On(Se,Ge){T(Se);var Me=Br.find(Se,Ge);if(Me){for(var Qe=0;Qe<Se.FileIndex.length;++Qe)if(Se.FileIndex[Qe]==Me)return Se.FileIndex.splice(Qe,1),Se.FullPaths.splice(Qe,1),!0}return!1}function Fn(Se,Ge,Me){T(Se);var Qe=Br.find(Se,Ge);if(Qe){for(var Ne=0;Ne<Se.FileIndex.length;++Ne)if(Se.FileIndex[Ne]==Qe)return Se.FileIndex[Ne].name=a(Me),Se.FullPaths[Ne]=Me,!0}return!1}function sa(Se){B(Se,!0)}return t.find=P,t.read=I,t.parse=d,t.write=U,t.writeFile=K,t.utils={cfb_new:wn,cfb_add:cn,cfb_del:On,cfb_mov:Fn,cfb_gc:sa,ReadShift:W2,CheckField:rle,prep_blob:Ho,bconcat:mo,use_zlib:R,_deflateRaw:Xe,_inflateRaw:Ut,consts:z},t}();function dBe(e){return typeof e=="string"?w3(e):Array.isArray(e)?RTe(e):e}function KC(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=w3(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Fh(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([dBe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=$p(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function fBe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Ws(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function JG(e,t){for(var r=[],n=Ws(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function C3(e){for(var t=[],r=Ws(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function E3(e){for(var t=[],r=Ws(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function hBe(e){for(var t=[],r=Ws(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var G5=new Date(1899,11,30,0,0,0);function Gi(e,t){var r=e.getTime(),n=G5.getTime()+(e.getTimezoneOffset()-G5.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var Poe=new Date,ABe=G5.getTime()+(Poe.getTimezoneOffset()-G5.getTimezoneOffset())*6e4,ZG=Poe.getTimezoneOffset();function j3(e){var t=new Date;return t.setTime(e*24*60*60*1e3+ABe),t.getTimezoneOffset()!==ZG&&t.setTime(t.getTime()+(t.getTimezoneOffset()-ZG)*6e4),t}function mBe(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[s],10)}return t}var eq=new Date("2017-02-19T19:06:09.000Z"),Foe=isNaN(eq.getFullYear())?new Date("2/19/17"):eq,pBe=Foe.getFullYear()==2017;function rs(e,t){var r=new Date(e);if(pBe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(Foe.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Ix(e,t){if(bn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Fh(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Fh(Noe(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Fh(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Fh(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function ns(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=ns(e[r]));return t}function Vs(e,t){for(var r="";r.length<t;)r+=e;return r}function Sf(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(t=Number(n)))?t/r:t}var gBe=["january","february","march","april","may","june","july","august","september","october","november","december"];function P1(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&gBe.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var xBe=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var s=r.split(n),o=[s[0]],l=1;l<s.length;++l)o.push(a),o.push(s[l]);return o}}();function Roe(e){return e?e.content&&e.type?Ix(e.content,!0):e.data?v2(e.data):e.asNodeBuffer&&bn?v2(e.asNodeBuffer().toString("binary")):e.asBinary?v2(e.asBinary()):e._data&&e._data.getContent?v2(Ix(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function Loe(e){if(!e)return null;if(e.data)return QG(e.data);if(e.asNodeBuffer&&bn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?QG(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function vBe(e){return e&&e.name.slice(-4)===".bin"?Loe(e):Roe(e)}function gd(e,t){for(var r=e.FullPaths||Ws(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var o=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||a==o)return e.files?e.files[r[s]]:e.FileIndex[s]}return null}function JM(e,t){var r=gd(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Ti(e,t,r){if(!r)return vBe(JM(e,t));if(!t)return null;try{return Ti(e,t)}catch{return null}}function Cu(e,t,r){if(!r)return Roe(JM(e,t));if(!t)return null;try{return Cu(e,t)}catch{return null}}function bBe(e,t,r){return Loe(JM(e,t))}function tq(e){for(var t=e.FullPaths||Ws(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function hn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return bn?n=MA(r):n=LTe(r),Br.utils.cfb_add(e,t,n)}Br.utils.cfb_add(e,t,r)}else e.file(t,r)}function ZM(){return Br.utils.cfb_new()}function Moe(e,t){switch(t.type){case"base64":return Br.read(e,{type:"base64"});case"binary":return Br.read(e,{type:"binary"});case"buffer":case"array":return Br.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function y2(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var yi=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,yBe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,rq=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,wBe=/<[^>]*>/g,Ml=yi.match(rq)?rq:wBe,NBe=/<\w*:/,CBe=/<(\/?)\w+:/;function Wr(e,t,r){for(var n={},a=0,s=0;a!==e.length&&!((s=e.charCodeAt(a))===32||s===10||s===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var o=e.match(yBe),l=0,c="",u=0,d="",f="",A=1;if(o)for(u=0;u!=o.length;++u){for(f=o[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(A=(a=f.charCodeAt(s+1))==34||a==39?1:0,c=f.slice(s+1+A,f.length-A),l=0;l!=d.length&&d.charCodeAt(l)!==58;++l);if(l===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var m=(l===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(l+1);if(n[m]&&d.slice(l-3,l)=="ext")continue;n[m]=c,n[m.toLowerCase()]=c}}return n}function s0(e){return e.replace(CBe,"<$1")}var Uoe={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},e7=C3(Uoe),Kn=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(e,function(l,c){return Uoe[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,o)+r(a.slice(o+3))}}(),t7=/[&<>'"]/g,EBe=/[\u0000-\u0008\u000b-\u001f]/g;function _a(e){var t=e+"";return t.replace(t7,function(r){return e7[r]}).replace(EBe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function nq(e){return _a(e).replace(/ /g,"_x0020_")}var Hoe=/[\u0000-\u001f]/g;function r7(e){var t=e+"";return t.replace(t7,function(r){return e7[r]}).replace(/\n/g,"<br/>").replace(Hoe,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function jBe(e){var t=e+"";return t.replace(t7,function(r){return e7[r]}).replace(Hoe,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var aq=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function kBe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function es(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function t6(e){for(var t="",r=0,n=0,a=0,s=0,o=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=a&63,t+=String.fromCharCode(o);continue}if(s=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}o=e.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function sq(e){var t=jp(2*e.length),r,n,a=1,s=0,o=0,l;for(n=0;n<e.length;n+=a)a=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[s++]=o&255,t[s++]=o>>>8,o=0),t[s++]=r%256,t[s++]=r>>>8;return t.slice(0,s).toString("ucs2")}function iq(e){return MA(e,"binary").toString("utf8")}var Zj="foo bar baz",Pa=bn&&(iq(Zj)==t6(Zj)&&iq||sq(Zj)==t6(Zj)&&sq)||t6,Fh=bn?function(e){return MA(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},zN=function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),Qoe=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),SBe=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),_Be=/<\/?(?:vt:)?variant>/g,TBe=/<(?:vt:)([^>]*)>([\s\S]*)</;function oq(e,t){var r=Wr(e),n=e.match(SBe(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var o=s.replace(_Be,"").match(TBe);o&&a.push({v:Pa(o[2]),t:o[1]})}),a}var Voe=/(^\s|\s$|\n)/;function Qo(e,t){return"<"+e+(t.match(Voe)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function GN(e){return Ws(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Yt(e,t,r){return"<"+e+(r!=null?GN(r):"")+(t!=null?(t.match(Voe)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function jF(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function BBe(e,t){switch(typeof e){case"string":var r=Yt("vt:lpwstr",_a(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Yt((e|0)==e?"vt:i4":"vt:r8",_a(String(e)));case"boolean":return Yt("vt:bool",e?"true":"false")}if(e instanceof Date)return Yt("vt:filetime",jF(e));throw new Error("Unable to serialize "+e)}function n7(e){if(bn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Pa($p(WM(e)));throw new Error("Bad input format: expected Buffer or string")}var qN=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Vi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},tv=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],xu={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function IBe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,s=5;s>=0;--s)a=a*256+e[t+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function DBe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,o=n?-t:t;isFinite(o)?o==0?a=s=0:(a=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var l=0;l<=5;++l,s/=256)e[r+l]=s&255;e[r+6]=(a&15)<<4|s&15,e[r+7]=a>>4|n}var lq=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,s=e[0][n].length;a<s;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},cq=bn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:MA(t)})):lq(e)}:lq,uq=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(J0(e,a)));return n.join("").replace(nc,"")},a7=bn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(nc,""):uq(e,t,r)}:uq,dq=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},$oe=bn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):dq(e,t,r)}:dq,fq=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(Nb(e,a)));return n.join("")},WC=bn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):fq(t,r,n)}:fq,zoe=function(e,t){var r=vu(e,t);return r>0?WC(e,t+4,t+4+r-1):""},Goe=zoe,qoe=function(e,t){var r=vu(e,t);return r>0?WC(e,t+4,t+4+r-1):""},Koe=qoe,Woe=function(e,t){var r=2*vu(e,t);return r>0?WC(e,t+4,t+4+r-1):""},Xoe=Woe,Yoe=function(t,r){var n=vu(t,r);return n>0?a7(t,r+4,r+4+n):""},Joe=Yoe,Zoe=function(e,t){var r=vu(e,t);return r>0?WC(e,t+4,t+4+r):""},ele=Zoe,tle=function(e,t){return IBe(e,t)},q5=tle,s7=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};bn&&(Goe=function(t,r){if(!Buffer.isBuffer(t))return zoe(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},Koe=function(t,r){if(!Buffer.isBuffer(t))return qoe(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},Xoe=function(t,r){if(!Buffer.isBuffer(t))return Woe(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},Joe=function(t,r){if(!Buffer.isBuffer(t))return Yoe(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},ele=function(t,r){if(!Buffer.isBuffer(t))return Zoe(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},q5=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):tle(t,r)},s7=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Nb=function(e,t){return e[t]},J0=function(e,t){return e[t+1]*256+e[t]},OBe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},vu=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Ug=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},PBe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function W2(e,t){var r="",n,a,s=[],o,l,c,u;switch(t){case"dbcs":if(u=this.l,bn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(J0(this,u)),u+=2;e*=2;break;case"utf8":r=WC(this,this.l,this.l+e);break;case"utf16le":e*=2,r=a7(this,this.l,this.l+e);break;case"wstr":return W2.call(this,e,"dbcs");case"lpstr-ansi":r=Goe(this,this.l),e=4+vu(this,this.l);break;case"lpstr-cp":r=Koe(this,this.l),e=4+vu(this,this.l);break;case"lpwstr":r=Xoe(this,this.l),e=4+2*vu(this,this.l);break;case"lpp4":e=4+vu(this,this.l),r=Joe(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+vu(this,this.l),r=ele(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=Nb(this,this.l+e++))!==0;)s.push(Jj(o));r=s.join("");break;case"_wstr":for(e=0,r="";(o=J0(this,this.l+e))!==0;)s.push(Jj(o)),e+=2;e+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Nb(this,u),this.l=u+1,l=W2.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(Jj(J0(this,u))),u+=2}r=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Nb(this,u),this.l=u+1,l=W2.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(Jj(Nb(this,u))),u+=1}r=s.join("");break;default:switch(e){case 1:return n=Nb(this,this.l),this.l++,n;case 2:return n=(t==="i"?OBe:J0)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?Ug:PBe)(this,this.l),this.l+=4,n):(a=vu(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=q5(this,this.l):a=q5([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=$oe(this,this.l,e);break}}return this.l+=e,r}var FBe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},RBe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},LBe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function MBe(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)LBe(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var o=t.charCodeAt(a);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,FBe(this,t,this.l);break;case 8:if(n=8,r==="f"){DBe(this,t,this.l);break}case 16:break;case-4:n=4,RBe(this,t,this.l);break}return this.l+=n,this}function rle(e,t){var r=$oe(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Ho(e,t){e.l=t,e.read_shift=W2,e.chk=rle,e.write_shift=MBe}function Rl(e,t){e.l+=t}function _t(e){var t=jp(e);return Ho(t,0),t}function UA(e,t,r){if(e){var n,a,s;Ho(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var u=ZN[l]||ZN[65535];for(n=e.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=e.read_shift(1))&127)<<7*a;c=e.l+s;var d=u.f&&u.f(e,s,r);if(e.l=c,t(d,u,l))return}}}function Hc(){var e=[],t=bn?256:2048,r=function(u){var d=_t(u);return Ho(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},o=function(){return a(),mo(e)},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(t)};return{next:s,push:l,end:o,_bufs:e}}function $t(e,t,r,n){var a=+t,s;if(!isNaN(a)){n||(n=ZN[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var o=e.next(s);a<=127?o.write_shift(1,a):(o.write_shift(1,(a&127)+128),o.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&s7(r)&&e.push(r)}}function X2(e,t,r){var n=ns(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function hq(e,t,r){var n=ns(e);return n.s=X2(n.s,t.s,r),n.e=X2(n.e,t.s,r),n}function Y2(e,t){if(e.cRel&&e.c<0)for(e=ns(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=ns(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=zr(e);return!e.cRel&&e.cRel!=null&&(r=QBe(r)),!e.rRel&&e.rRel!=null&&(r=UBe(r)),r}function r6(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+js(e.s.c)+":"+(e.e.cRel?"":"$")+js(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+xi(e.s.r)+":"+(e.e.rRel?"":"$")+xi(e.e.r):Y2(e.s,t.biff)+":"+Y2(e.e,t.biff)}function i7(e){return parseInt(HBe(e),10)-1}function xi(e){return""+(e+1)}function UBe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function HBe(e){return e.replace(/\$(\d+)$/,"$1")}function o7(e){for(var t=VBe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function js(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function QBe(e){return e.replace(/^([A-Z])/,"$$$1")}function VBe(e){return e.replace(/^\$([A-Z])/,"$1")}function $Be(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ks(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function zr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Vc(e){var t=e.indexOf(":");return t==-1?{s:ks(e),e:ks(e)}:{s:ks(e.slice(0,t)),e:ks(e.slice(t+1))}}function un(e,t){return typeof t>"u"||typeof t=="number"?un(e.s,e.e):(typeof e!="string"&&(e=zr(e)),typeof t!="string"&&(t=zr(t)),e==t?e:e+":"+t)}function Xn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=e.length;for(r=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===s||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function Aq(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Bd(e.z,r?Gi(t):t)}catch{}try{return e.w=Bd((e.XF||{}).numFmtId||(r?14:0),r?Gi(t):t)}catch{return""+t}}function wA(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?HA[e.v]||e.v:t==null?Aq(e,e.v):Aq(e,t))}function zp(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function nle(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,s=e||(a?[]:{}),o=0,l=0;if(s&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?ks(n.origin):n.origin;o=c.r,l=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Xn(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),o==-1&&(u.e.r=o=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var A=0;A!=t[f].length;++A)if(!(typeof t[f][A]>"u")){var m={v:t[f][A]},g=o+f,x=l+A;if(u.s.r>g&&(u.s.r=g),u.s.c>x&&(u.s.c=x),u.e.r<g&&(u.e.r=g),u.e.c<x&&(u.e.c=x),t[f][A]&&typeof t[f][A]=="object"&&!Array.isArray(t[f][A])&&!(t[f][A]instanceof Date))m=t[f][A];else if(Array.isArray(m.v)&&(m.f=t[f][A][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||Qr[14],n.cellDates?(m.t="d",m.w=Bd(m.z,Gi(m.v))):(m.t="n",m.v=Gi(m.v),m.w=Bd(m.z,m.v))):m.t="s";if(a)s[g]||(s[g]=[]),s[g][x]&&s[g][x].z&&(m.z=s[g][x].z),s[g][x]=m;else{var v=zr({c:x,r:g});s[v]&&s[v].z&&(m.z=s[v].z),s[v]=m}}}return u.s.c<1e7&&(s["!ref"]=un(u)),s}function Ey(e,t){return nle(null,e,t)}function zBe(e){return e.read_shift(4,"i")}function _f(e,t){return t||(t=_t(4)),t.write_shift(4,e),t}function Ol(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function po(e,t){var r=!1;return t==null&&(r=!0,t=_t(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function GBe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function qBe(e,t){return t||(t=_t(4)),t.write_shift(2,0),t.write_shift(2,0),t}function l7(e,t){var r=e.l,n=e.read_shift(1),a=Ol(e),s=[],o={t:a,h:a};if((n&1)!==0){for(var l=e.read_shift(4),c=0;c!=l;++c)s.push(GBe(e));o.r=s}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function KBe(e,t){var r=!1;return t==null&&(r=!0,t=_t(15+4*e.t.length)),t.write_shift(1,0),po(e.t,t),r?t.slice(0,t.l):t}var WBe=l7;function XBe(e,t){var r=!1;return t==null&&(r=!0,t=_t(23+4*e.t.length)),t.write_shift(1,1),po(e.t,t),t.write_shift(4,1),qBe({},t),r?t.slice(0,t.l):t}function Pd(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function rv(e,t){return t==null&&(t=_t(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function nv(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function av(e,t){return t==null&&(t=_t(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var YBe=Ol,ale=po;function c7(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function K5(e,t){var r=!1;return t==null&&(r=!0,t=_t(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var JBe=Ol,kF=c7,u7=K5;function d7(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?q5([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Ug(t,0)>>2;return r?a/100:a}function sle(e,t){t==null&&(t=_t(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function ile(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function ZBe(e,t){return t||(t=_t(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var sv=ile,jy=ZBe;function jl(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Dx(e,t){return(t||_t(8)).write_shift(8,e,"f")}function eIe(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),s=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=ux[a];u&&(t.rgb=WN(u));break;case 2:t.rgb=WN([o,l,c]);break;case 3:t.theme=a;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function W5(e,t){if(t||(t=_t(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function tIe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function rIe(e,t){t||(t=_t(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function ole(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function nIe(e){return ole(e,1)}function aIe(e){return ole(e,2)}var f7=2,Ec=3,ek=11,mq=12,X5=19,tk=64,sIe=65,iIe=71,oIe=4108,lIe=4126,uo=80,lle=81,cIe=[uo,lle],SF={1:{n:"CodePage",t:f7},2:{n:"Category",t:uo},3:{n:"PresentationFormat",t:uo},4:{n:"ByteCount",t:Ec},5:{n:"LineCount",t:Ec},6:{n:"ParagraphCount",t:Ec},7:{n:"SlideCount",t:Ec},8:{n:"NoteCount",t:Ec},9:{n:"HiddenCount",t:Ec},10:{n:"MultimediaClipCount",t:Ec},11:{n:"ScaleCrop",t:ek},12:{n:"HeadingPairs",t:oIe},13:{n:"TitlesOfParts",t:lIe},14:{n:"Manager",t:uo},15:{n:"Company",t:uo},16:{n:"LinksUpToDate",t:ek},17:{n:"CharacterCount",t:Ec},19:{n:"SharedDoc",t:ek},22:{n:"HyperlinksChanged",t:ek},23:{n:"AppVersion",t:Ec,p:"version"},24:{n:"DigSig",t:sIe},26:{n:"ContentType",t:uo},27:{n:"ContentStatus",t:uo},28:{n:"Language",t:uo},29:{n:"Version",t:uo},255:{},2147483648:{n:"Locale",t:X5},2147483651:{n:"Behavior",t:X5},1919054434:{}},_F={1:{n:"CodePage",t:f7},2:{n:"Title",t:uo},3:{n:"Subject",t:uo},4:{n:"Author",t:uo},5:{n:"Keywords",t:uo},6:{n:"Comments",t:uo},7:{n:"Template",t:uo},8:{n:"LastAuthor",t:uo},9:{n:"RevNumber",t:uo},10:{n:"EditTime",t:tk},11:{n:"LastPrinted",t:tk},12:{n:"CreatedDate",t:tk},13:{n:"ModifiedDate",t:tk},14:{n:"PageCount",t:Ec},15:{n:"WordCount",t:Ec},16:{n:"CharCount",t:Ec},17:{n:"Thumbnail",t:iIe},18:{n:"Application",t:uo},19:{n:"DocSecurity",t:Ec},255:{},2147483648:{n:"Locale",t:X5},2147483651:{n:"Behavior",t:X5},1919054434:{}},pq={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},uIe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function dIe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var fIe=dIe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),ux=ns(fIe),HA={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},cle={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},TF={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},rk={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function h7(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function hIe(e){var t=h7();if(!e||!e.match)return t;var r={};if((e.match(Ml)||[]).forEach(function(n){var a=Wr(n);switch(a[0].replace(NBe,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[TF[a.ContentType]]!==void 0&&t[TF[a.ContentType]].push(a.PartName);break}}),t.xmlns!==Vi.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function ule(e,t){var r=hBe(TF),n=[],a;n[n.length]=yi,n[n.length]=Yt("Types",null,{xmlns:Vi.CT,"xmlns:xsd":Vi.xsd,"xmlns:xsi":Vi.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Yt("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){e[c]&&e[c].length>0&&(a=e[c][0],n[n.length]=Yt("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:rk[c][t.bookType]||rk[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(u){n[n.length]=Yt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:rk[c][t.bookType]||rk[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(u){n[n.length]=Yt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var kn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function KN(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function J2(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(Ml)||[]).forEach(function(a){var s=Wr(a);if(s[0]==="<Relationship"){var o={};o.Type=s.Type,o.Target=s.Target,o.Id=s.Id,s.TargetMode&&(o.TargetMode=s.TargetMode);var l=s.TargetMode==="External"?s.Target:y2(s.Target,t);r[l]=o,n[s.Id]=o}}),r["!id"]=n,r}function s1(e){var t=[yi,Yt("Relationships",null,{xmlns:Vi.RELS})];return Ws(e["!id"]).forEach(function(r){t[t.length]=Yt("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Ea(e,t,r,n,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[kn.HLINK,kn.XPATH,kn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var AIe="application/vnd.oasis.opendocument.spreadsheet";function mIe(e,t){for(var r=n7(e),n,a;n=qN.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=Wr(n[0],!1),a.path=="/"&&a.type!==AIe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function pIe(e){var t=[yi];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function gq(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function gIe(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function xIe(e){var t=[yi];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(gq(e[r][0],e[r][1])),t.push(gIe("",e[r][0]));return t.push(gq("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function dle(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Q5.version+"</meta:generator></office:meta></office:document-meta>"}var Td=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],vIe=function(){for(var e=new Array(Td.length),t=0;t<Td.length;++t){var r=Td[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function fle(e){var t={};e=Pa(e);for(var r=0;r<Td.length;++r){var n=Td[r],a=e.match(vIe[r]);a!=null&&a.length>0&&(t[n[1]]=Kn(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=rs(t[n[1]]))}return t}function n6(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=_a(t),n[n.length]=r?Yt(e,t,r):Qo(e,t))}function hle(e,t){var r=t||{},n=[yi,Yt("cp:coreProperties",null,{"xmlns:cp":Vi.CORE_PROPS,"xmlns:dc":Vi.dc,"xmlns:dcterms":Vi.dcterms,"xmlns:dcmitype":Vi.dcmitype,"xmlns:xsi":Vi.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&n6("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:jF(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&n6("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:jF(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=Td.length;++s){var o=Td[s],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&n6(o[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var dx=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Ale=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function mle(e,t,r,n){var a=[];if(typeof e=="string")a=oq(e,n);else for(var s=0;s<e.length;++s)a=a.concat(e[s].map(function(d){return{v:d}}));var o=typeof t=="string"?oq(t,n).map(function(d){return d.v}):t,l=0,c=0;if(o.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function bIe(e,t,r){var n={};return t||(t={}),e=Pa(e),dx.forEach(function(a){var s=(e.match(zN(a[0]))||[])[1];switch(a[2]){case"string":s&&(t[a[1]]=Kn(s));break;case"bool":t[a[1]]=s==="true";break;case"raw":var o=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));o&&o.length>0&&(n[a[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&mle(n.HeadingPairs,n.TitlesOfParts,t,r),t}function ple(e){var t=[],r=Yt;return e||(e={}),e.Application="SheetJS",t[t.length]=yi,t[t.length]=Yt("Properties",null,{xmlns:Vi.EXT_PROPS,"xmlns:vt":Vi.vt}),dx.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=_a(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+_a(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var yIe=/<[^>]+>[^<]*/g;function wIe(e,t){var r={},n="",a=e.match(yIe);if(a)for(var s=0;s!=a.length;++s){var o=a[s],l=Wr(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Kn(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Kn(d);break;case"bool":r[n]=es(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=rs(d);break;case"cy":case"error":r[n]=Kn(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,u,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function gle(e){var t=[yi,Yt("Properties",null,{xmlns:Vi.CUST_PROPS,"xmlns:vt":Vi.vt})];if(!e)return t.join("");var r=1;return Ws(e).forEach(function(a){++r,t[t.length]=Yt("property",BBe(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:_a(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var BF={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},a6;function NIe(e,t,r){a6||(a6=C3(BF)),t=a6[t]||t,e[t]=r}function CIe(e,t){var r=[];return Ws(BF).map(function(n){for(var a=0;a<Td.length;++a)if(Td[a][1]==n)return Td[a];for(a=0;a<dx.length;++a)if(dx[a][1]==n)return dx[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(Qo(BF[n[1]]||n[1],a))}}),Yt("DocumentProperties",r.join(""),{xmlns:xu.o})}function EIe(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&Ws(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)){for(var o=0;o<Td.length;++o)if(s==Td[o][1])return;for(o=0;o<dx.length;++o)if(s==dx[o][1])return;for(o=0;o<r.length;++o)if(s==r[o])return;var l=e[s],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),a.push(Yt(nq(s),l,{"dt:dt":c}))}}),t&&Ws(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)&&!(e&&Object.prototype.hasOwnProperty.call(e,s))){var o=t[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),a.push(Yt(nq(s),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+xu.o+'">'+a.join("")+"</"+n+">"}function A7(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function jIe(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var o=_t(8);return o.write_shift(4,n),o.write_shift(4,a),o}function xle(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function vle(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function ble(e,t,r){return t===31?vle(e):xle(e,t,r)}function IF(e,t,r){return ble(e,t,r===!1?0:4)}function kIe(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return ble(e,t,0)}function SIe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(nc,""),e.l-a&2&&(e.l+=2)}return r}function _Ie(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(nc,"");return r}function TIe(e){var t=e.l,r=Y5(e,lle);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=Y5(e,Ec);return[r,n]}function BIe(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(TIe(e));return r}function xq(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var s=e.read_shift(4),o=e.read_shift(4);n[s]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(nc,"").replace(b2,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function yle(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function IIe(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function Y5(e,t,r){var n=e.read_shift(2),a,s=r||{};if(e.l+=2,t!==mq&&n!==t&&cIe.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===mq?n:t){case 2:return a=e.read_shift(2,"i"),s.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return xle(e,n,4).replace(nc,"");case 31:return vle(e);case 64:return A7(e);case 65:return yle(e);case 71:return IIe(e);case 80:return IF(e,n,!s.raw).replace(nc,"");case 81:return kIe(e,n).replace(nc,"");case 4108:return BIe(e);case 4126:case 4127:return n==4127?SIe(e):_Ie(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function vq(e,t){var r=_t(4),n=_t(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=_t(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=jIe(t);break;case 31:case 80:for(n=_t(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return mo([r,n])}function bq(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),s=[],o=0,l=0,c=-1,u={};for(o=0;o!=a;++o){var d=e.read_shift(4),f=e.read_shift(4);s[o]=[d,f+r]}s.sort(function(N,C){return N[1]-C[1]});var A={};for(o=0;o!=a;++o){if(e.l!==s[o][1]){var m=!0;if(o>0&&t)switch(t[s[o-1][0]].t){case 2:e.l+2===s[o][1]&&(e.l+=2,m=!1);break;case 80:e.l<=s[o][1]&&(e.l=s[o][1],m=!1);break;case 4108:e.l<=s[o][1]&&(e.l=s[o][1],m=!1);break}if((!t||o==0)&&e.l<=s[o][1]&&(m=!1,e.l=s[o][1]),m)throw new Error("Read Error: Expected address "+s[o][1]+" at "+e.l+" :"+o)}if(t){var g=t[s[o][0]];if(A[g.n]=Y5(e,g.t,{raw:!0}),g.p==="version"&&(A[g.n]=String(A[g.n]>>16)+"."+("0000"+String(A[g.n]&65535)).slice(-4)),g.n=="CodePage")switch(A[g.n]){case 0:A[g.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:yf(l=A[g.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+A[g.n])}}else if(s[o][0]===1){if(l=A.CodePage=Y5(e,f7),yf(l),c!==-1){var x=e.l;e.l=s[c][1],u=xq(e,l),e.l=x}}else if(s[o][0]===0){if(l===0){c=o,e.l=s[o+1][1];continue}u=xq(e,l)}else{var v=u[s[o][0]],y;switch(e[e.l]){case 65:e.l+=4,y=yle(e);break;case 30:e.l+=4,y=IF(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=IF(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=li(e,4);break;case 64:e.l+=4,y=rs(A7(e));break;default:throw new Error("unparsed value: "+e[e.l])}A[v]=y}}return e.l=r+n,A}var wle=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function DIe(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function yq(e,t,r){var n=_t(8),a=[],s=[],o=8,l=0,c=_t(8),u=_t(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),o+=8+c.length,!t){u=_t(8),u.write_shift(4,0),a.unshift(u);var d=[_t(4)];for(d[0].write_shift(4,e.length),l=0;l<e.length;++l){var f=e[l][0];for(c=_t(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=mo(d),s.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(wle.indexOf(e[l][0])>-1||Ale.indexOf(e[l][0])>-1)&&e[l][1]!=null){var A=e[l][1],m=0;if(t){m=+t[e[l][0]];var g=r[m];if(g.p=="version"&&typeof A=="string"){var x=A.split(".");A=(+x[0]<<16)+(+x[1]||0)}c=vq(g.t,A)}else{var v=DIe(A);v==-1&&(v=31,A=String(A)),c=vq(v,A)}s.push(c),u=_t(8),u.write_shift(4,t?m:2+l),a.push(u),o+=8+c.length}var y=8*(s.length+1);for(l=0;l<s.length;++l)a[l].write_shift(4,y),y+=s[l].length;return n.write_shift(4,o),n.write_shift(4,s.length),mo([n].concat(a).concat(s))}function wq(e,t,r){var n=e.content;if(!n)return{};Ho(n,0);var a,s,o,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==Br.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),l=n.read_shift(4),a===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);a===2&&(o=n.read_shift(16),c=n.read_shift(4));var f=bq(n,t),A={SystemIdentifier:u};for(var m in f)A[m]=f[m];if(A.FMTID=s,a===1)return A;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var g;try{g=bq(n,null)}catch{}for(m in g)A[m]=g[m];return A.FMTID=[s,o],A}function Nq(e,t,r,n,a,s){var o=_t(a?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Br.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,a?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,a?68:48);var c=yq(e,r,n);if(l.push(c),a){var u=yq(a,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+c.length),l.push(u)}return mo(l)}function km(e,t){return e.read_shift(t),null}function OIe(e,t){t||(t=_t(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function PIe(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function li(e,t){return e.read_shift(t)===1}function Jl(e,t){return t||(t=_t(2)),t.write_shift(2,+!!e),t}function Bi(e){return e.read_shift(2,"u")}function vd(e,t){return t||(t=_t(2)),t.write_shift(2,e),t}function Nle(e,t){return PIe(e,t,Bi)}function FIe(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function Cle(e,t,r){return r||(r=_t(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function XC(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=e.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var o=n?e.read_shift(n,a):"";return o}function RIe(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,s=1+(r&1),o=0,l,c={};a&&(o=e.read_shift(2)),n&&(l=e.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return a&&(e.l+=4*o),n&&(e.l+=l),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function LIe(e){var t=e.t||"",r=_t(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=_t(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return mo(a)}function Ox(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function YC(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):Ox(e,n,r)}function iv(e,t,r){if(r.biff>5)return YC(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Ele(e,t,r){return r||(r=_t(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function MIe(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function UIe(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(nc,"");return n&&(e.l+=24),a}function HIe(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(s>>1,"utf16le").replace(nc,"");return r+o}function QIe(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return UIe(e);case"0303000000000000c000000000000046":return HIe(e);default:throw new Error("Unsupported Moniker "+r)}}function nk(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(nc,""):"";return r}function Cq(e,t){t||(t=_t(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function VIe(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var s,o,l,c,u="",d,f;a&16&&(s=nk(e,r-e.l)),a&128&&(o=nk(e,r-e.l)),(a&257)===257&&(l=nk(e,r-e.l)),(a&257)===1&&(c=QIe(e,r-e.l)),a&8&&(u=nk(e,r-e.l)),a&32&&(d=e.read_shift(16)),a&64&&(f=A7(e)),e.l=r;var A=o||l||c||"";A&&u&&(A+="#"+u),A||(A="#"+u),a&2&&A.charAt(0)=="/"&&A.charAt(1)!="/"&&(A="file://"+A);var m={Target:A};return d&&(m.guid=d),f&&(m.time=f),s&&(m.Tooltip=s),m}function $Ie(e){var t=_t(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}t.write_shift(4,2),t.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(s==28)n=n.slice(1),Cq(n,t);else if(s&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),s&8&&Cq(a>-1?n.slice(a+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function jle(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function kle(e,t){var r=jle(e);return r[3]=0,r}function i0(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function Px(e,t,r,n){return n||(n=_t(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function zIe(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function GIe(e,t,r){return t===0?"":iv(e,t,r)}function qIe(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),s=e.read_shift(n,"i"),o=e.read_shift(n,"i");return[a,s,o]}function Sle(e){var t=e.read_shift(2),r=d7(e);return[t,r]}function KIe(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=XC(e,t,r),s=e.read_shift(2);if(n-=e.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return e.l+=s,a}function k3(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function _le(e,t){return t||(t=_t(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function Tle(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var WIe=Tle;function Ble(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function XIe(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function YIe(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function ll(e){e.l+=2,e.l+=e.read_shift(2)}var JIe={0:ll,4:ll,5:ll,6:ll,7:YIe,8:ll,9:ll,10:ll,11:ll,12:ll,13:XIe,14:ll,15:ll,16:ll,17:ll,18:ll,19:ll,20:ll,21:Ble};function ZIe(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(JIe[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function ak(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function m7(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=_t(a);return s.write_shift(2,n),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function e6e(e,t){return t===0||e.read_shift(2),1200}function t6e(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=iv(e,0,r);return e.read_shift(t+n-e.l),a}function r6e(e,t){var r=!t||t.biff==8,n=_t(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function n6e(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function a6e(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var o=XC(e,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:a,dt:s,name:o}}function s6e(e,t){var r=!t||t.biff>=8?2:1,n=_t(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function i6e(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),s=[],o=0;o!=a&&e.l<r;++o)s.push(RIe(e));return s.Count=n,s.Unique=a,s}function o6e(e,t){var r=_t(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=LIe(e[a]);var s=mo([r].concat(n));return s.parts=[r.length].concat(n.map(function(o){return o.length})),s}function l6e(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function c6e(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function u6e(e){var t=zIe(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function d6e(e){return e.read_shift(2),e.read_shift(4)}function Eq(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function f6e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:s,CurTab:o,FirstTab:l,Selected:c,TabRatio:u}}function h6e(){var e=_t(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function A6e(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function m6e(e){var t=_t(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function p6e(){}function g6e(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=XC(e,0,r),n}function x6e(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,s=_t(a);return s.write_shift(2,e.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function v6e(e){var t=i0(e);return t.isst=e.read_shift(4),t}function b6e(e,t,r,n){var a=_t(10);return Px(e,t,n,a),a.write_shift(4,r),a}function y6e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=i0(e);r.biff==2&&e.l++;var s=YC(e,n-e.l,r);return a.val=s,a}function w6e(e,t,r,n,a){var s=!a||a.biff==8,o=_t(8+ +s+(1+s)*r.length);return Px(e,t,n,o),o.write_shift(2,r.length),s&&o.write_shift(1,1),o.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),o}function N6e(e,t,r){var n=e.read_shift(2),a=iv(e,0,r);return[n,a]}function C6e(e,t,r,n){var a=r&&r.biff==5;n||(n=_t(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var E6e=iv;function jq(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,s=e.read_shift(a),o=e.read_shift(a),l=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:s,c:l},e:{r:o,c}}}function j6e(e,t){var r=t.biff==8||!t.biff?4:2,n=_t(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function k6e(e){var t=e.read_shift(2),r=e.read_shift(2),n=Sle(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function S6e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(Sle(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(s.length!=o-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:o,rkrec:s}}function _6e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(s.length!=o-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:o,ixfe:s}}function T6e(e,t,r,n){var a={},s=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return a.patternType=uIe[l>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=o&15,a.dgRight=o>>4&15,a.dgTop=o>>8&15,a.dgBottom=o>>12&15,a.icvLeft=o>>16&127,a.icvRight=o>>23&127,a.grbitDiag=o>>30&3,a.icvTop=l&127,a.icvBottom=l>>7&127,a.icvDiag=l>>14&127,a.dgDiag=l>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function B6e(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=T6e(e,t,n.fStyle,r),n}function kq(e,t,r,n){var a=r&&r.biff==5;n||(n=_t(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function I6e(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function D6e(e){var t=_t(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function Sq(e,t,r){var n=i0(e);(r.biff==2||t==9)&&++e.l;var a=FIe(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function O6e(e,t,r,n,a,s){var o=_t(8);return Px(e,t,n,o),Cle(r,s,o),o}function P6e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=i0(e),a=jl(e);return n.val=a,n}function F6e(e,t,r,n){var a=_t(14);return Px(e,t,n,a),Dx(r,a),a}var _q=GIe;function R6e(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var o=Ox(e,s),l=[];n>e.l;)l.push(YC(e));return[s,a,o,l]}function Tq(e,t,r){var n=e.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=KIe(e,t-2,r)),s.body=a||e.read_shift(t-2),typeof a=="string"&&(s.Name=a),s}var L6e=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function Bq(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=Ox(e,o,r);a&32&&(u=L6e[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||l===0||!(d>0)?[]:ZFe(e,d,r,l);return{chKey:s,Name:u,itab:c,rgce:f}}function Ile(e,t,r){if(r.biff<8)return M6e(e,t,r);for(var n=[],a=e.l+t,s=e.read_shift(r.biff>8?4:2);s--!==0;)n.push(qIe(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function M6e(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=XC(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function U6e(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),s=Ox(e,n,r),o=Ox(e,a,r);return[s,o]}function H6e(e,t,r){var n=Tle(e);e.l++;var a=e.read_shift(1);return t-=8,[eRe(e,t,r),a,n]}function Iq(e,t,r){var n=WIe(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,YFe(e,t,r)]}function Q6e(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function V6e(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),l=iv(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},l,o,s]}}function $6e(e,t,r){return V6e(e,t,r)}function z6e(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(k3(e));return r}function G6e(e){var t=_t(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)_le(e[r],t);return t}function q6e(e,t,r){if(r&&r.biff<8)return W6e(e,t,r);var n=Ble(e),a=ZIe(e,t-22,n[1]);return{cmo:n,ft:a}}var K6e={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function W6e(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((K6e[n]||Rl)(e,t,r)),{cmo:[a,n,s],ft:o}}function X6e(e,t,r){var n=e.l,a="";try{e.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:o=MIe(e,6,r);var l=e.read_shift(2);e.read_shift(2),Bi(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=Ox(e,e.lens[u+1]-e.lens[u]-1);if(a+=f,a.length>=(d?l:2*l))break}if(a.length!==l&&a.length!==l*2)throw new Error("cchText: "+l+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function Y6e(e,t){var r=k3(e);e.l+=16;var n=VIe(e,t-24);return[r,n]}function J6e(e){var t=_t(24),r=ks(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return mo([t,$Ie(e[1])])}function Z6e(e,t){e.read_shift(2);var r=k3(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(nc,""),[r,n]}function eDe(e){var t=e[1].Tooltip,r=_t(10+2*(t.length+1));r.write_shift(2,2048);var n=ks(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function tDe(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=pq[r]||r,r=e.read_shift(2),t[1]=pq[r]||r,t}function rDe(e){return e||(e=_t(4)),e.write_shift(2,1),e.write_shift(2,1),e}function nDe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(kle(e));return r}function aDe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(kle(e));return r}function sDe(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function Dle(e,t,r){if(!r.cellStyles)return Rl(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:s,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function iDe(e,t){var r=_t(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function oDe(e,t){var r={};return t<32||(e.l+=16,r.header=jl(e),r.footer=jl(e),e.l+=2),r}function lDe(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function cDe(e){for(var t=_t(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var uDe=i0,dDe=Nle,fDe=YC;function hDe(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function ADe(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=i0(e);++e.l;var a=iv(e,t-7,r);return n.t="str",n.val=a,n}function mDe(e){var t=i0(e);++e.l;var r=jl(e);return t.t="n",t.val=r,t}function pDe(e,t,r){var n=_t(15);return tE(n,e,t),n.write_shift(8,r,"f"),n}function gDe(e){var t=i0(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function xDe(e,t,r){var n=_t(9);return tE(n,e,t),n.write_shift(2,r),n}function vDe(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function bDe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function yDe(e,t,r){var n=e.l+t,a=i0(e),s=e.read_shift(2),o=Ox(e,s,r);return e.l=n,a.t="str",a.val=o,a}var wDe=[2,3,48,49,131,139,140,245],DF=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=C3({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=jp(1);switch(c.type){case"base64":d=Nu(Iu(l));break;case"binary":d=Nu(l);break;case"buffer":case"array":d=l;break}Ho(d,0);var f=d.read_shift(1),A=!!(f&136),m=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:m=!0,A=!0;break;case 49:m=!0,A=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var x=0,v=521;f==2&&(x=d.read_shift(2)),d.l+=3,f!=2&&(x=d.read_shift(4)),x>1048576&&(x=1e6),f!=2&&(v=d.read_shift(2));var y=d.read_shift(2),N=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(N=e[d[d.l]]),d.l+=1,d.l+=2),g&&(d.l+=36);for(var C=[],_={},j=Math.min(d.length,f==2?521:v-10-(m?264:0)),I=g?32:11;d.l<j&&d[d.l]!=13;)switch(_={},_.name=QN.utils.decode(N,d.slice(d.l,d.l+I)).replace(/[\u0000\r\n].*$/g,""),d.l+=I,_.type=String.fromCharCode(d.read_shift(1)),f!=2&&!g&&(_.offset=d.read_shift(4)),_.len=d.read_shift(1),f==2&&(_.offset=d.read_shift(2)),_.dec=d.read_shift(1),_.name.length&&C.push(_),f!=2&&(d.l+=g?13:14),_.type){case"B":(!m||_.len!=8)&&c.WTF&&console.log("Skipping "+_.name+":"+_.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+_.name+":"+_.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+_.type)}if(d[d.l]!==13&&(d.l=v-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=v;var T=0,k=0;for(u[0]=[],k=0;k!=C.length;++k)u[0][k]=C[k].name;for(;x-- >0;){if(d[d.l]===42){d.l+=y;continue}for(++d.l,u[++T]=[],k=0,k=0;k!=C.length;++k){var B=d.slice(d.l,d.l+C[k].len);d.l+=C[k].len,Ho(B,0);var M=QN.utils.decode(N,B);switch(C[k].type){case"C":M.trim().length&&(u[T][k]=M.replace(/\s+$/,""));break;case"D":M.length===8?u[T][k]=new Date(+M.slice(0,4),+M.slice(4,6)-1,+M.slice(6,8)):u[T][k]=M;break;case"F":u[T][k]=parseFloat(M.trim());break;case"+":case"I":u[T][k]=g?B.read_shift(-4,"i")^2147483648:B.read_shift(4,"i");break;case"L":switch(M.trim().toUpperCase()){case"Y":case"T":u[T][k]=!0;break;case"N":case"F":u[T][k]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+M+"|")}break;case"M":if(!A)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[T][k]="##MEMO##"+(g?parseInt(M.trim(),10):B.read_shift(4));break;case"N":M=M.replace(/\u0000/g,"").trim(),M&&M!="."&&(u[T][k]=+M||0);break;case"@":u[T][k]=new Date(B.read_shift(-8,"f")-621356832e5);break;case"T":u[T][k]=new Date((B.read_shift(4)-2440588)*864e5+B.read_shift(4));break;case"Y":u[T][k]=B.read_shift(4,"i")/1e4+B.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[T][k]=-B.read_shift(-8,"f");break;case"B":if(m&&C[k].len==8){u[T][k]=B.read_shift(8,"f");break}case"G":case"P":B.l+=C[k].len;break;case"0":if(C[k].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+C[k].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=C,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=Ey(r(l,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(l,c){try{return zp(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var u=c||{};if(+u.codepage>=0&&yf(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=Hc(),f=e_(l,{header:1,raw:!0,cellDates:!0}),A=f[0],m=f.slice(1),g=l["!cols"]||[],x=0,v=0,y=0,N=1;for(x=0;x<A.length;++x){if(((g[x]||{}).DBF||{}).name){A[x]=g[x].DBF.name,++y;continue}if(A[x]!=null){if(++y,typeof A[x]=="number"&&(A[x]=A[x].toString(10)),typeof A[x]!="string")throw new Error("DBF Invalid column name "+A[x]+" |"+typeof A[x]+"|");if(A.indexOf(A[x])!==x){for(v=0;v<1024;++v)if(A.indexOf(A[x]+"_"+v)==-1){A[x]+="_"+v;break}}}}var C=Xn(l["!ref"]),_=[],j=[],I=[];for(x=0;x<=C.e.c-C.s.c;++x){var T="",k="",B=0,M=[];for(v=0;v<m.length;++v)m[v][x]!=null&&M.push(m[v][x]);if(M.length==0||A[x]==null){_[x]="?";continue}for(v=0;v<M.length;++v){switch(typeof M[v]){case"number":k="B";break;case"string":k="C";break;case"boolean":k="L";break;case"object":k=M[v]instanceof Date?"D":"C";break;default:k="C"}B=Math.max(B,String(M[v]).length),T=T&&T!=k?"C":k}B>250&&(B=250),k=((g[x]||{}).DBF||{}).type,k=="C"&&g[x].DBF.len>B&&(B=g[x].DBF.len),T=="B"&&k=="N"&&(T="N",I[x]=g[x].DBF.dec,B=g[x].DBF.len),j[x]=T=="C"||k=="N"?B:s[T]||0,N+=j[x],_[x]=T}var P=d.next(32);for(P.write_shift(4,318902576),P.write_shift(4,m.length),P.write_shift(2,296+32*y),P.write_shift(2,N),x=0;x<4;++x)P.write_shift(4,0);for(P.write_shift(4,0|(+t[woe]||3)<<8),x=0,v=0;x<A.length;++x)if(A[x]!=null){var S=d.next(32),L=(A[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);S.write_shift(1,L,"sbcs"),S.write_shift(1,_[x]=="?"?"C":_[x],"sbcs"),S.write_shift(4,v),S.write_shift(1,j[x]||s[_[x]]||0),S.write_shift(1,I[x]||0),S.write_shift(1,2),S.write_shift(4,0),S.write_shift(1,0),S.write_shift(4,0),S.write_shift(4,0),v+=j[x]||s[_[x]]||0}var H=d.next(264);for(H.write_shift(4,13),x=0;x<65;++x)H.write_shift(4,0);for(x=0;x<m.length;++x){var q=d.next(N);for(q.write_shift(1,0),v=0;v<A.length;++v)if(A[v]!=null)switch(_[v]){case"L":q.write_shift(1,m[x][v]==null?63:m[x][v]?84:70);break;case"B":q.write_shift(8,m[x][v]||0,"f");break;case"N":var Q="0";for(typeof m[x][v]=="number"&&(Q=m[x][v].toFixed(I[v]||0)),y=0;y<j[v]-Q.length;++y)q.write_shift(1,32);q.write_shift(1,Q,"sbcs");break;case"D":m[x][v]?(q.write_shift(4,("0000"+m[x][v].getFullYear()).slice(-4),"sbcs"),q.write_shift(2,("00"+(m[x][v].getMonth()+1)).slice(-2),"sbcs"),q.write_shift(2,("00"+m[x][v].getDate()).slice(-2),"sbcs")):q.write_shift(8,"00000000","sbcs");break;case"C":var z=String(m[x][v]!=null?m[x][v]:"").slice(0,j[v]);for(q.write_shift(1,z,"sbcs"),y=0;y<j[v]-z.length;++y)q.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:o}}(),Ole=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Ws(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(A,m){var g=e[m];return typeof g=="number"?VG(g):g},n=function(A,m,g){var x=m.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return x==59?A:VG(x)};e["|"]=254;function a(A,m){switch(m.type){case"base64":return s(Iu(A),m);case"binary":return s(A,m);case"buffer":return s(bn&&Buffer.isBuffer(A)?A.toString("binary"):$p(A),m);case"array":return s(Ix(A),m)}throw new Error("Unrecognized type "+m.type)}function s(A,m){var g=A.split(/[\n\r]+/),x=-1,v=-1,y=0,N=0,C=[],_=[],j=null,I={},T=[],k=[],B=[],M=0,P;for(+m.codepage>=0&&yf(+m.codepage);y!==g.length;++y){M=0;var S=g[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),L=S.replace(/;;/g,"\0").split(";").map(function(J){return J.replace(/\u0000/g,";")}),H=L[0],q;if(S.length>0)switch(H){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":L[1].charAt(0)=="P"&&_.push(S.slice(3).replace(/;;/g,";"));break;case"C":var Q=!1,z=!1,K=!1,Z=!1,U=-1,Y=-1;for(N=1;N<L.length;++N)switch(L[N].charAt(0)){case"A":break;case"X":v=parseInt(L[N].slice(1))-1,z=!0;break;case"Y":for(x=parseInt(L[N].slice(1))-1,z||(v=0),P=C.length;P<=x;++P)C[P]=[];break;case"K":q=L[N].slice(1),q.charAt(0)==='"'?q=q.slice(1,q.length-1):q==="TRUE"?q=!0:q==="FALSE"?q=!1:isNaN(Sf(q))?isNaN(P1(q).getDate())||(q=rs(q)):(q=Sf(q),j!==null&&Ny(j)&&(q=j3(q))),Q=!0;break;case"E":Z=!0;var R=i1(L[N].slice(1),{r:x,c:v});C[x][v]=[C[x][v],R];break;case"S":K=!0,C[x][v]=[C[x][v],"S5S"];break;case"G":break;case"R":U=parseInt(L[N].slice(1))-1;break;case"C":Y=parseInt(L[N].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+S)}if(Q&&(C[x][v]&&C[x][v].length==2?C[x][v][0]=q:C[x][v]=q,j=null),K){if(Z)throw new Error("SYLK shared formula cannot have own formula");var D=U>-1&&C[U][Y];if(!D||!D[1])throw new Error("SYLK shared formula cannot find base");C[x][v][1]=Jle(D[1],{r:x-U,c:v-Y})}break;case"F":var W=0;for(N=1;N<L.length;++N)switch(L[N].charAt(0)){case"X":v=parseInt(L[N].slice(1))-1,++W;break;case"Y":for(x=parseInt(L[N].slice(1))-1,P=C.length;P<=x;++P)C[P]=[];break;case"M":M=parseInt(L[N].slice(1))/20;break;case"F":break;case"G":break;case"P":j=_[parseInt(L[N].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(B=L[N].slice(1).split(" "),P=parseInt(B[0],10);P<=parseInt(B[1],10);++P)M=parseInt(B[2],10),k[P-1]=M===0?{hidden:!0}:{wch:M},kp(k[P-1]);break;case"C":v=parseInt(L[N].slice(1))-1,k[v]||(k[v]={});break;case"R":x=parseInt(L[N].slice(1))-1,T[x]||(T[x]={}),M>0?(T[x].hpt=M,T[x].hpx=R1(M)):M===0&&(T[x].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+S)}W<1&&(j=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+S)}}return T.length>0&&(I["!rows"]=T),k.length>0&&(I["!cols"]=k),m&&m.sheetRows&&(C=C.slice(0,m.sheetRows)),[C,I]}function o(A,m){var g=a(A,m),x=g[0],v=g[1],y=Ey(x,m);return Ws(v).forEach(function(N){y[N]=v[N]}),y}function l(A,m){return zp(o(A,m),m)}function c(A,m,g,x){var v="C;Y"+(g+1)+";X"+(x+1)+";K";switch(A.t){case"n":v+=A.v||0,A.f&&!A.F&&(v+=";E"+y7(A.f,{r:g,c:x}));break;case"b":v+=A.v?"TRUE":"FALSE";break;case"e":v+=A.w||A.v;break;case"d":v+='"'+(A.w||A.v)+'"';break;case"s":v+='"'+A.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function u(A,m){m.forEach(function(g,x){var v="F;W"+(x+1)+" "+(x+1)+" ";g.hidden?v+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=XN(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=YN(g.wpx)),typeof g.wch=="number"&&(v+=Math.round(g.wch))),v.charAt(v.length-1)!=" "&&A.push(v)})}function d(A,m){m.forEach(function(g,x){var v="F;";g.hidden?v+="M0;":g.hpt?v+="M"+20*g.hpt+";":g.hpx&&(v+="M"+20*JN(g.hpx)+";"),v.length>2&&A.push(v+"R"+(x+1))})}function f(A,m){var g=["ID;PWXL;N;E"],x=[],v=Xn(A["!ref"]),y,N=Array.isArray(A),C=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),A["!cols"]&&u(g,A["!cols"]),A["!rows"]&&d(g,A["!rows"]),g.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var _=v.s.r;_<=v.e.r;++_)for(var j=v.s.c;j<=v.e.c;++j){var I=zr({r:_,c:j});y=N?(A[_]||[])[j]:A[I],!(!y||y.v==null&&(!y.f||y.F))&&x.push(c(y,A,_,j))}return g.join(C)+C+x.join(C)+C+"E"+C}return{to_workbook:l,to_sheet:o,from_sheet:f}}(),Ple=function(){function e(s,o){switch(o.type){case"base64":return t(Iu(s),o);case"binary":return t(s,o);case"buffer":return t(bn&&Buffer.isBuffer(s)?s.toString("binary"):$p(s),o);case"array":return t(Ix(s),o)}throw new Error("Unrecognized type "+o.type)}function t(s,o){for(var l=s.split(`
`),c=-1,u=-1,d=0,f=[];d!==l.length;++d){if(l[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var A=l[d].trim().split(","),m=A[0],g=A[1];++d;for(var x=l[d]||"";(x.match(/["]/g)||[]).length&1&&d<l.length-1;)x+=`
`+l[++d];switch(x=x.trim(),+m){case-1:if(x==="BOT"){f[++c]=[],u=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?f[c][u]=!0:x==="FALSE"?f[c][u]=!1:isNaN(Sf(g))?isNaN(P1(g).getDate())?f[c][u]=g:f[c][u]=rs(g):f[c][u]=Sf(g),++u;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),f[c][u++]=x!==""?x:null;break}if(x==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function r(s,o){return Ey(e(s,o),o)}function n(s,o){return zp(r(s,o),o)}var a=function(){var s=function(c,u,d,f,A){c.push(u),c.push(d+","+f),c.push('"'+A.replace(/"/g,'""')+'"')},o=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=Xn(c["!ref"]),f,A=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var m=d.s.r;m<=d.e.r;++m){o(u,-1,0,"BOT");for(var g=d.s.c;g<=d.e.c;++g){var x=zr({r:m,c:g});if(f=A?(c[m]||[])[g]:c[x],!f){o(u,1,0,"");continue}switch(f.t){case"n":var v=f.w;!v&&f.v!=null&&(v=f.v),v==null?f.f&&!f.F?o(u,1,0,"="+f.f):o(u,1,0,""):o(u,0,v,"V");break;case"b":o(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Bd(f.z||Qr[14],Gi(rs(f.v)))),o(u,0,f.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var y=`\r
`,N=u.join(y);return N}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),Fle=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,A){for(var m=f.split(`
`),g=-1,x=-1,v=0,y=[];v!==m.length;++v){var N=m[v].trim().split(":");if(N[0]==="cell"){var C=ks(N[1]);if(y.length<=C.r)for(g=y.length;g<=C.r;++g)y[g]||(y[g]=[]);switch(g=C.r,x=C.c,N[2]){case"t":y[g][x]=e(N[3]);break;case"v":y[g][x]=+N[3];break;case"vtf":var _=N[N.length-1];case"vtc":switch(N[3]){case"nl":y[g][x]=!!+N[4];break;default:y[g][x]=+N[4];break}N[2]=="vtf"&&(y[g][x]=[y[g][x],_])}}}return A&&A.sheetRows&&(y=y.slice(0,A.sheetRows)),y}function n(f,A){return Ey(r(f,A),A)}function a(f,A){return zp(n(f,A),A)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var A=[],m=[],g,x="",v=Vc(f["!ref"]),y=Array.isArray(f),N=v.s.r;N<=v.e.r;++N)for(var C=v.s.c;C<=v.e.c;++C)if(x=zr({r:N,c:C}),g=y?(f[N]||[])[C]:f[x],!(!g||g.v==null||g.t==="z")){switch(m=["cell",x,"t"],g.t){case"s":case"str":m.push(t(g.v));break;case"n":g.f?(m[2]="vtf",m[3]="n",m[4]=g.v,m[5]=t(g.f)):(m[2]="v",m[3]=g.v);break;case"b":m[2]="vt"+(g.f?"f":"c"),m[3]="nl",m[4]=g.v?"1":"0",m[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var _=Gi(rs(g.v));m[2]="vtc",m[3]="nd",m[4]=""+_,m[5]=g.w||Bd(g.z||Qr[14],_);break;case"e":continue}A.push(m.join(":"))}return A.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),A.push("valueformat:1:text-wiki"),A.join(`
`)}function d(f){return[s,o,l,o,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),F1=function(){function e(d,f,A,m,g){g.raw?f[A][m]=d:d===""||(d==="TRUE"?f[A][m]=!0:d==="FALSE"?f[A][m]=!1:isNaN(Sf(d))?isNaN(P1(d).getDate())?f[A][m]=d:f[A][m]=rs(d):f[A][m]=Sf(d))}function t(d,f){var A=f||{},m=[];if(!d||d.length===0)return m;for(var g=d.split(/[\r\n]/),x=g.length-1;x>=0&&g[x].length===0;)--x;for(var v=10,y=0,N=0;N<=x;++N)y=g[N].indexOf(" "),y==-1?y=g[N].length:y++,v=Math.max(v,y);for(N=0;N<=x;++N){m[N]=[];var C=0;for(e(g[N].slice(0,v).trim(),m,N,C,A),C=1;C<=(g[N].length-v)/10+1;++C)e(g[N].slice(v+(C-1)*10,v+C*10).trim(),m,N,C,A)}return A.sheetRows&&(m=m.slice(0,A.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},A=!1,m=0,g=0;m<d.length;++m)(g=d.charCodeAt(m))==34?A=!A:!A&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&g.push([f[m],m]);if(!g.length){f=n;for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&g.push([f[m],m])}return g.sort(function(x,v){return x[0]-v[0]||n[x[1]]-n[v[1]]}),r[g.pop()[1]]||44}function s(d,f){var A=f||{},m="",g=A.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(m=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(m=d.charAt(4),d=d.slice(6)):m=a(d.slice(0,1024)):A&&A.FS?m=A.FS:m=a(d.slice(0,1024));var v=0,y=0,N=0,C=0,_=0,j=m.charCodeAt(0),I=!1,T=0,k=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var B=A.dateNF!=null?lBe(A.dateNF):null;function M(){var P=d.slice(C,_),S={};if(P.charAt(0)=='"'&&P.charAt(P.length-1)=='"'&&(P=P.slice(1,-1).replace(/""/g,'"')),P.length===0)S.t="z";else if(A.raw)S.t="s",S.v=P;else if(P.trim().length===0)S.t="s",S.v=P;else if(P.charCodeAt(0)==61)P.charCodeAt(1)==34&&P.charCodeAt(P.length-1)==34?(S.t="s",S.v=P.slice(2,-1).replace(/""/g,'"')):RPe(P)?(S.t="n",S.f=P.slice(1)):(S.t="s",S.v=P);else if(P=="TRUE")S.t="b",S.v=!0;else if(P=="FALSE")S.t="b",S.v=!1;else if(!isNaN(N=Sf(P)))S.t="n",A.cellText!==!1&&(S.w=P),S.v=N;else if(!isNaN(P1(P).getDate())||B&&P.match(B)){S.z=A.dateNF||Qr[14];var L=0;B&&P.match(B)&&(P=cBe(P,A.dateNF,P.match(B)||[]),L=1),A.cellDates?(S.t="d",S.v=rs(P,L)):(S.t="n",S.v=Gi(rs(P,L))),A.cellText!==!1&&(S.w=Bd(S.z,S.v instanceof Date?Gi(S.v):S.v)),A.cellNF||delete S.z}else S.t="s",S.v=P;if(S.t=="z"||(A.dense?(g[v]||(g[v]=[]),g[v][y]=S):g[zr({c:y,r:v})]=S),C=_+1,k=d.charCodeAt(C),x.e.c<y&&(x.e.c=y),x.e.r<v&&(x.e.r=v),T==j)++y;else if(y=0,++v,A.sheetRows&&A.sheetRows<=v)return!0}e:for(;_<d.length;++_)switch(T=d.charCodeAt(_)){case 34:k===34&&(I=!I);break;case j:case 10:case 13:if(!I&&M())break e;break}return _-C>0&&M(),g["!ref"]=un(x),g}function o(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):Ey(t(d,f),f)}function l(d,f){var A="",m=f.type=="string"?[0,0,0,0]:_7(d,f);switch(f.type){case"base64":A=Iu(d);break;case"binary":A=d;break;case"buffer":f.codepage==65001?A=d.toString("utf8"):f.codepage&&typeof QN<"u"||(A=bn&&Buffer.isBuffer(d)?d.toString("binary"):$p(d));break;case"array":A=Ix(d);break;case"string":A=d;break;default:throw new Error("Unrecognized type "+f.type)}return m[0]==239&&m[1]==187&&m[2]==191?A=Pa(A.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?A=Pa(A):f.type=="binary"&&typeof QN<"u",A.slice(0,19)=="socialcalc:version:"?Fle.to_sheet(f.type=="string"?A:Pa(A),f):o(A,f)}function c(d,f){return zp(l(d,f),f)}function u(d){for(var f=[],A=Xn(d["!ref"]),m,g=Array.isArray(d),x=A.s.r;x<=A.e.r;++x){for(var v=[],y=A.s.c;y<=A.e.c;++y){var N=zr({r:x,c:y});if(m=g?(d[x]||[])[y]:d[N],!m||m.v==null){v.push("          ");continue}for(var C=(m.w||(wA(m),m.w)||"").slice(0,10);C.length<10;)C+=" ";v.push(C+(y===0?" ":""))}f.push(v.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}();function NDe(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=Ole.to_workbook(e,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return F1.to_workbook(e,t)}}var fx=function(){function e(R,D,W){if(R){Ho(R,R.l||0);for(var J=W.Enum||U;R.l<R.length;){var le=R.read_shift(2),ie=J[le]||J[65535],re=R.read_shift(2),ce=R.l+re,oe=ie.f&&ie.f(R,re,W);if(R.l=ce,D(oe,ie,le))return}}}function t(R,D){switch(D.type){case"base64":return r(Nu(Iu(R)),D);case"binary":return r(Nu(R),D);case"buffer":case"array":return r(R,D)}throw"Unsupported type "+D.type}function r(R,D){if(!R)return R;var W=D||{},J=W.dense?[]:{},le="Sheet1",ie="",re=0,ce={},oe=[],be=[],X={s:{r:0,c:0},e:{r:0,c:0}},je=W.sheetRows||0;if(R[2]==0&&(R[3]==8||R[3]==9)&&R.length>=16&&R[14]==5&&R[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(R[2]==2)W.Enum=U,e(R,function(we,Ae,de){switch(de){case 0:W.vers=we,we>=4096&&(W.qpro=!0);break;case 6:X=we;break;case 204:we&&(ie=we);break;case 222:ie=we;break;case 15:case 51:W.qpro||(we[1].v=we[1].v.slice(1));case 13:case 14:case 16:de==14&&(we[2]&112)==112&&(we[2]&15)>1&&(we[2]&15)<15&&(we[1].z=W.dateNF||Qr[14],W.cellDates&&(we[1].t="d",we[1].v=j3(we[1].v))),W.qpro&&we[3]>re&&(J["!ref"]=un(X),ce[le]=J,oe.push(le),J=W.dense?[]:{},X={s:{r:0,c:0},e:{r:0,c:0}},re=we[3],le=ie||"Sheet"+(re+1),ie="");var ae=W.dense?(J[we[0].r]||[])[we[0].c]:J[zr(we[0])];if(ae){ae.t=we[1].t,ae.v=we[1].v,we[1].z!=null&&(ae.z=we[1].z),we[1].f!=null&&(ae.f=we[1].f);break}W.dense?(J[we[0].r]||(J[we[0].r]=[]),J[we[0].r][we[0].c]=we[1]):J[zr(we[0])]=we[1];break}},W);else if(R[2]==26||R[2]==14)W.Enum=Y,R[2]==14&&(W.qpro=!0,R.l=0),e(R,function(we,Ae,de){switch(de){case 204:le=we;break;case 22:we[1].v=we[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(we[3]>re&&(J["!ref"]=un(X),ce[le]=J,oe.push(le),J=W.dense?[]:{},X={s:{r:0,c:0},e:{r:0,c:0}},re=we[3],le="Sheet"+(re+1)),je>0&&we[0].r>=je)break;W.dense?(J[we[0].r]||(J[we[0].r]=[]),J[we[0].r][we[0].c]=we[1]):J[zr(we[0])]=we[1],X.e.c<we[0].c&&(X.e.c=we[0].c),X.e.r<we[0].r&&(X.e.r=we[0].r);break;case 27:we[14e3]&&(be[we[14e3][0]]=we[14e3][1]);break;case 1537:be[we[0]]=we[1],we[0]==re&&(le=we[1]);break}},W);else throw new Error("Unrecognized LOTUS BOF "+R[2]);if(J["!ref"]=un(X),ce[ie||le]=J,oe.push(ie||le),!be.length)return{SheetNames:oe,Sheets:ce};for(var De={},ke=[],ue=0;ue<be.length;++ue)ce[oe[ue]]?(ke.push(be[ue]||oe[ue]),De[be[ue]]=ce[be[ue]]||ce[oe[ue]]):(ke.push(be[ue]),De[be[ue]]={"!ref":"A1"});return{SheetNames:ke,Sheets:De}}function n(R,D){var W=D||{};if(+W.codepage>=0&&yf(+W.codepage),W.type=="string")throw new Error("Cannot write WK1 to JS string");var J=Hc(),le=Xn(R["!ref"]),ie=Array.isArray(R),re=[];Jt(J,0,s(1030)),Jt(J,6,c(le));for(var ce=Math.min(le.e.r,8191),oe=le.s.r;oe<=ce;++oe)for(var be=xi(oe),X=le.s.c;X<=le.e.c;++X){oe===le.s.r&&(re[X]=js(X));var je=re[X]+be,De=ie?(R[oe]||[])[X]:R[je];if(!(!De||De.t=="z"))if(De.t=="n")(De.v|0)==De.v&&De.v>=-32768&&De.v<=32767?Jt(J,13,m(oe,X,De.v)):Jt(J,14,x(oe,X,De.v));else{var ke=wA(De);Jt(J,15,f(oe,X,ke.slice(0,239)))}}return Jt(J,1),J.end()}function a(R,D){var W=D||{};if(+W.codepage>=0&&yf(+W.codepage),W.type=="string")throw new Error("Cannot write WK3 to JS string");var J=Hc();Jt(J,0,o(R));for(var le=0,ie=0;le<R.SheetNames.length;++le)(R.Sheets[R.SheetNames[le]]||{})["!ref"]&&Jt(J,27,Z(R.SheetNames[le],ie++));var re=0;for(le=0;le<R.SheetNames.length;++le){var ce=R.Sheets[R.SheetNames[le]];if(!(!ce||!ce["!ref"])){for(var oe=Xn(ce["!ref"]),be=Array.isArray(ce),X=[],je=Math.min(oe.e.r,8191),De=oe.s.r;De<=je;++De)for(var ke=xi(De),ue=oe.s.c;ue<=oe.e.c;++ue){De===oe.s.r&&(X[ue]=js(ue));var we=X[ue]+ke,Ae=be?(ce[De]||[])[ue]:ce[we];if(!(!Ae||Ae.t=="z"))if(Ae.t=="n")Jt(J,23,M(De,ue,re,Ae.v));else{var de=wA(Ae);Jt(J,22,T(De,ue,re,de.slice(0,239)))}}++re}}return Jt(J,1),J.end()}function s(R){var D=_t(2);return D.write_shift(2,R),D}function o(R){var D=_t(26);D.write_shift(2,4096),D.write_shift(2,4),D.write_shift(4,0);for(var W=0,J=0,le=0,ie=0;ie<R.SheetNames.length;++ie){var re=R.SheetNames[ie],ce=R.Sheets[re];if(!(!ce||!ce["!ref"])){++le;var oe=Vc(ce["!ref"]);W<oe.e.r&&(W=oe.e.r),J<oe.e.c&&(J=oe.e.c)}}return W>8191&&(W=8191),D.write_shift(2,W),D.write_shift(1,le),D.write_shift(1,J),D.write_shift(2,0),D.write_shift(2,0),D.write_shift(1,1),D.write_shift(1,2),D.write_shift(4,0),D.write_shift(4,0),D}function l(R,D,W){var J={s:{c:0,r:0},e:{c:0,r:0}};return D==8&&W.qpro?(J.s.c=R.read_shift(1),R.l++,J.s.r=R.read_shift(2),J.e.c=R.read_shift(1),R.l++,J.e.r=R.read_shift(2),J):(J.s.c=R.read_shift(2),J.s.r=R.read_shift(2),D==12&&W.qpro&&(R.l+=2),J.e.c=R.read_shift(2),J.e.r=R.read_shift(2),D==12&&W.qpro&&(R.l+=2),J.s.c==65535&&(J.s.c=J.e.c=J.s.r=J.e.r=0),J)}function c(R){var D=_t(8);return D.write_shift(2,R.s.c),D.write_shift(2,R.s.r),D.write_shift(2,R.e.c),D.write_shift(2,R.e.r),D}function u(R,D,W){var J=[{c:0,r:0},{t:"n",v:0},0,0];return W.qpro&&W.vers!=20768?(J[0].c=R.read_shift(1),J[3]=R.read_shift(1),J[0].r=R.read_shift(2),R.l+=2):(J[2]=R.read_shift(1),J[0].c=R.read_shift(2),J[0].r=R.read_shift(2)),J}function d(R,D,W){var J=R.l+D,le=u(R,D,W);if(le[1].t="s",W.vers==20768){R.l++;var ie=R.read_shift(1);return le[1].v=R.read_shift(ie,"utf8"),le}return W.qpro&&R.l++,le[1].v=R.read_shift(J-R.l,"cstr"),le}function f(R,D,W){var J=_t(7+W.length);J.write_shift(1,255),J.write_shift(2,D),J.write_shift(2,R),J.write_shift(1,39);for(var le=0;le<J.length;++le){var ie=W.charCodeAt(le);J.write_shift(1,ie>=128?95:ie)}return J.write_shift(1,0),J}function A(R,D,W){var J=u(R,D,W);return J[1].v=R.read_shift(2,"i"),J}function m(R,D,W){var J=_t(7);return J.write_shift(1,255),J.write_shift(2,D),J.write_shift(2,R),J.write_shift(2,W,"i"),J}function g(R,D,W){var J=u(R,D,W);return J[1].v=R.read_shift(8,"f"),J}function x(R,D,W){var J=_t(13);return J.write_shift(1,255),J.write_shift(2,D),J.write_shift(2,R),J.write_shift(8,W,"f"),J}function v(R,D,W){var J=R.l+D,le=u(R,D,W);if(le[1].v=R.read_shift(8,"f"),W.qpro)R.l=J;else{var ie=R.read_shift(2);_(R.slice(R.l,R.l+ie),le),R.l+=ie}return le}function y(R,D,W){var J=D&32768;return D&=-32769,D=(J?R:0)+(D>=8192?D-16384:D),(J?"":"$")+(W?js(D):xi(D))}var N={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},C=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function _(R,D){Ho(R,0);for(var W=[],J=0,le="",ie="",re="",ce="";R.l<R.length;){var oe=R[R.l++];switch(oe){case 0:W.push(R.read_shift(8,"f"));break;case 1:ie=y(D[0].c,R.read_shift(2),!0),le=y(D[0].r,R.read_shift(2),!1),W.push(ie+le);break;case 2:{var be=y(D[0].c,R.read_shift(2),!0),X=y(D[0].r,R.read_shift(2),!1);ie=y(D[0].c,R.read_shift(2),!0),le=y(D[0].r,R.read_shift(2),!1),W.push(be+X+":"+ie+le)}break;case 3:if(R.l<R.length){console.error("WK1 premature formula end");return}break;case 4:W.push("("+W.pop()+")");break;case 5:W.push(R.read_shift(2));break;case 6:{for(var je="";oe=R[R.l++];)je+=String.fromCharCode(oe);W.push('"'+je.replace(/"/g,'""')+'"')}break;case 8:W.push("-"+W.pop());break;case 23:W.push("+"+W.pop());break;case 22:W.push("NOT("+W.pop()+")");break;case 20:case 21:ce=W.pop(),re=W.pop(),W.push(["AND","OR"][oe-20]+"("+re+","+ce+")");break;default:if(oe<32&&C[oe])ce=W.pop(),re=W.pop(),W.push(re+C[oe]+ce);else if(N[oe]){if(J=N[oe][1],J==69&&(J=R[R.l++]),J>W.length){console.error("WK1 bad formula parse 0x"+oe.toString(16)+":|"+W.join("|")+"|");return}var De=W.slice(-J);W.length-=J,W.push(N[oe][0]+"("+De.join(",")+")")}else return oe<=7?console.error("WK1 invalid opcode "+oe.toString(16)):oe<=24?console.error("WK1 unsupported op "+oe.toString(16)):oe<=30?console.error("WK1 invalid opcode "+oe.toString(16)):oe<=115?console.error("WK1 unsupported function opcode "+oe.toString(16)):console.error("WK1 unrecognized opcode "+oe.toString(16))}}W.length==1?D[1].f=""+W[0]:console.error("WK1 bad formula parse |"+W.join("|")+"|")}function j(R){var D=[{c:0,r:0},{t:"n",v:0},0];return D[0].r=R.read_shift(2),D[3]=R[R.l++],D[0].c=R[R.l++],D}function I(R,D){var W=j(R);return W[1].t="s",W[1].v=R.read_shift(D-4,"cstr"),W}function T(R,D,W,J){var le=_t(6+J.length);le.write_shift(2,R),le.write_shift(1,W),le.write_shift(1,D),le.write_shift(1,39);for(var ie=0;ie<J.length;++ie){var re=J.charCodeAt(ie);le.write_shift(1,re>=128?95:re)}return le.write_shift(1,0),le}function k(R,D){var W=j(R);W[1].v=R.read_shift(2);var J=W[1].v>>1;if(W[1].v&1)switch(J&7){case 0:J=(J>>3)*5e3;break;case 1:J=(J>>3)*500;break;case 2:J=(J>>3)/20;break;case 3:J=(J>>3)/200;break;case 4:J=(J>>3)/2e3;break;case 5:J=(J>>3)/2e4;break;case 6:J=(J>>3)/16;break;case 7:J=(J>>3)/64;break}return W[1].v=J,W}function B(R,D){var W=j(R),J=R.read_shift(4),le=R.read_shift(4),ie=R.read_shift(2);if(ie==65535)return J===0&&le===3221225472?(W[1].t="e",W[1].v=15):J===0&&le===3489660928?(W[1].t="e",W[1].v=42):W[1].v=0,W;var re=ie&32768;return ie=(ie&32767)-16446,W[1].v=(1-re*2)*(le*Math.pow(2,ie+32)+J*Math.pow(2,ie)),W}function M(R,D,W,J){var le=_t(14);if(le.write_shift(2,R),le.write_shift(1,W),le.write_shift(1,D),J==0)return le.write_shift(4,0),le.write_shift(4,0),le.write_shift(2,65535),le;var ie=0,re=0,ce=0,oe=0;return J<0&&(ie=1,J=-J),re=Math.log2(J)|0,J/=Math.pow(2,re-31),oe=J>>>0,(oe&2147483648)==0&&(J/=2,++re,oe=J>>>0),J-=oe,oe|=2147483648,oe>>>=0,J*=Math.pow(2,32),ce=J>>>0,le.write_shift(4,ce),le.write_shift(4,oe),re+=16383+(ie?32768:0),le.write_shift(2,re),le}function P(R,D){var W=B(R);return R.l+=D-14,W}function S(R,D){var W=j(R),J=R.read_shift(4);return W[1].v=J>>6,W}function L(R,D){var W=j(R),J=R.read_shift(8,"f");return W[1].v=J,W}function H(R,D){var W=L(R);return R.l+=D-10,W}function q(R,D){return R[R.l+D-1]==0?R.read_shift(D,"cstr"):""}function Q(R,D){var W=R[R.l++];W>D-1&&(W=D-1);for(var J="";J.length<W;)J+=String.fromCharCode(R[R.l++]);return J}function z(R,D,W){if(!(!W.qpro||D<21)){var J=R.read_shift(1);R.l+=17,R.l+=1,R.l+=2;var le=R.read_shift(D-21,"cstr");return[J,le]}}function K(R,D){for(var W={},J=R.l+D;R.l<J;){var le=R.read_shift(2);if(le==14e3){for(W[le]=[0,""],W[le][0]=R.read_shift(2);R[R.l];)W[le][1]+=String.fromCharCode(R[R.l]),R.l++;R.l++}}return W}function Z(R,D){var W=_t(5+R.length);W.write_shift(2,14e3),W.write_shift(2,D);for(var J=0;J<R.length;++J){var le=R.charCodeAt(J);W[W.l++]=le>127?95:le}return W[W.l++]=0,W}var U={0:{n:"BOF",f:Bi},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:A},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:q},222:{n:"SHEETNAMELP",f:Q},65535:{n:""}},Y={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:I},23:{n:"NUMBER17",f:B},24:{n:"NUMBER18",f:k},25:{n:"FORMULA19",f:P},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:K},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:S},38:{n:"??"},39:{n:"NUMBER27",f:L},40:{n:"FORMULA28",f:H},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:q},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:z},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}();function CDe(e){var t={},r=e.match(Ml),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=Wr(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=GM[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return t}var EDe=function(){var e=zN("t"),t=zN("rPr");function r(s){var o=s.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:Kn(o[1])},c=s.match(t);return c&&(l.s=CDe(c[1])),l}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(a).map(r).filter(function(l){return l.v})}}(),jDe=function(){var t=/(\r\n|\n)/g;function r(a,s,o){var l=[];a.u&&l.push("text-decoration: underline;"),a.uval&&l.push("text-underline-style:"+a.uval+";"),a.sz&&l.push("font-size:"+a.sz+"pt;"),a.outline&&l.push("text-effect: outline;"),a.shadow&&l.push("text-shadow: auto;"),s.push('<span style="'+l.join("")+'">'),a.b&&(s.push("<b>"),o.push("</b>")),a.i&&(s.push("<i>"),o.push("</i>")),a.strike&&(s.push("<s>"),o.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),kDe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,SDe=/<(?:\w+:)?r>/,_De=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function p7(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Kn(Pa(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Pa(e),r&&(n.h=r7(n.t))):e.match(SDe)&&(n.r=Pa(e),n.t=Kn(Pa((e.replace(_De,"").match(kDe)||[]).join("").replace(Ml,""))),r&&(n.h=jDe(EDe(n.r)))),n):{t:""}}var TDe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,BDe=/<(?:\w+:)?(?:si|sstItem)>/g,IDe=/<\/(?:\w+:)?(?:si|sstItem)>/;function DDe(e,t){var r=[],n="";if(!e)return r;var a=e.match(TDe);if(a){n=a[2].replace(BDe,"").split(IDe);for(var s=0;s!=n.length;++s){var o=p7(n[s].trim(),t);o!=null&&(r[r.length]=o)}a=Wr(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var ODe=/^\s|\s$|[\t\n\r]/;function Rle(e,t){if(!t.bookSST)return"";var r=[yi];r[r.length]=Yt("sst",null,{xmlns:tv[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(ODe)&&(s+=' xml:space="preserve"'),s+=">"+_a(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function PDe(e){return[e.read_shift(4),e.read_shift(4)]}function FDe(e,t){var r=[],n=!1;return UA(e,function(s,o,l){switch(l){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function RDe(e,t){return t||(t=_t(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var LDe=KBe;function MDe(e){var t=Hc();$t(t,159,RDe(e));for(var r=0;r<e.length;++r)$t(t,19,LDe(e[r]));return $t(t,160),t.end()}function Lle(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function oA(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function UDe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=oA(e,4),t.U=oA(e,4),t.W=oA(e,4),t}function HDe(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),s=[];a-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=s,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function QDe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(HDe(e));return t}function VDe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function $De(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=oA(e,4),t.U=oA(e,4),t.W=oA(e,4),t}function zDe(e){var t=$De(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function Mle(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function Ule(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function GDe(e){var t=oA(e);switch(t.Minor){case 2:return[t.Minor,qDe(e)];case 3:return[t.Minor,KDe()];case 4:return[t.Minor,WDe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function qDe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=Mle(e,r),a=Ule(e,e.length-e.l);return{t:"Std",h:n,v:a}}function KDe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function WDe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(Ml,function(s){var o=Wr(s);switch(s0(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function XDe(e,t){var r={},n=r.EncryptionVersionInfo=oA(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=Mle(e,a),t-=a,r.EncryptionVerifier=Ule(e,t),r}function YDe(e){var t={},r=t.EncryptionVersionInfo=oA(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function g7(e){var t=0,r,n=Lle(e),a=n.length+1,s,o,l,c,u;for(r=jp(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)o=r[s],l=(t&16384)===0?0:1,c=t<<1&32767,u=l|c,t=u^o;return t^52811}var Hle=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},a=function(o,l){return n(o^l)},s=function(o){for(var l=t[o.length-1],c=104,u=o.length-1;u>=0;--u)for(var d=o[u],f=0;f!=7;++f)d&64&&(l^=r[c]),d*=2,--c;return l};return function(o){for(var l=Lle(o),c=s(l),u=l.length,d=jp(16),f=0;f!=16;++f)d[f]=0;var A,m,g;for((u&1)===1&&(A=c>>8,d[u]=a(e[0],A),--u,A=c&255,m=l[l.length-1],d[u]=a(m,A));u>0;)--u,A=c>>8,d[u]=a(l[u],A),--u,A=c&255,d[u]=a(l[u],A);for(u=15,g=15-l.length;g>0;)A=c>>8,d[u]=a(e[g],A),--u,--g,A=c&255,d[u]=a(l[u],A),--u,--g;return d}}(),JDe=function(e,t,r,n,a){a||(a=t),n||(n=Hle(e));var s,o;for(s=0;s!=t.length;++s)o=t[s],o^=n[r],o=(o>>5|o<<3)&255,a[s]=o,++r;return[a,r,n]},ZDe=function(e){var t=0,r=Hle(e);return function(n){var a=JDe("",n,t,r);return t=a[1],a[0]}};function eOe(e,t,r,n){var a={key:Bi(e),verificationBytes:Bi(e)};return r.password&&(a.verifier=g7(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=ZDe(r.password)),a}function tOe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=YDe(e):n.Data=XDe(e,t),n}function rOe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?tOe(e,t-2,n):eOe(e,r.biff>=8?t:t-2,r,n),n}var Qle=function(){function e(a,s){switch(s.type){case"base64":return t(Iu(a),s);case"binary":return t(a,s);case"buffer":return t(bn&&Buffer.isBuffer(a)?a.toString("binary"):$p(a),s);case"array":return t(Ix(a),s)}throw new Error("Unrecognized type "+s.type)}function t(a,s){var o=s||{},l=o.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(l)&&(l[f]=[]);for(var A=/\\\w+\b/g,m=0,g,x=-1;g=A.exec(d);){switch(g[0]){case"\\cell":var v=d.slice(m,A.lastIndex-g[0].length);if(v[0]==" "&&(v=v.slice(1)),++x,v.length){var y={v,t:"s"};Array.isArray(l)?l[f][x]=y:l[zr({r:f,c:x})]=y}break}m=A.lastIndex}x>u.e.c&&(u.e.c=x)}),l["!ref"]=un(u),l}function r(a,s){return zp(e(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],o=Xn(a["!ref"]),l,c=Array.isArray(a),u=o.s.r;u<=o.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var f=zr({r:u,c:d});l=c?(a[u]||[])[d]:a[f],!(!l||l.v==null&&(!l.f||l.F))&&(s.push(" "+(l.w||(wA(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function nOe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function WN(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function aOe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),s=Math.min(t,r,n),o=a-s;if(o===0)return[0,0,t];var l=0,c=0,u=a+s;switch(c=o/(u>1?2-u:u),a){case t:l=((r-n)/o+6)%6;break;case r:l=(n-t)/o+2;break;case n:l=(t-r)/o+4;break}return[l/6,c,u/2]}function sOe(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),s=n-a/2,o=[s,s,s],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=a*l,o[0]+=a,o[1]+=c;break;case 1:c=a*(2-l),o[0]+=c,o[1]+=a;break;case 2:c=a*(l-2),o[1]+=a,o[2]+=c;break;case 3:c=a*(4-l),o[1]+=c,o[2]+=a;break;case 4:c=a*(l-4),o[2]+=a,o[0]+=c;break;case 5:c=a*(6-l),o[2]+=c,o[0]+=a;break}for(var u=0;u!=3;++u)o[u]=Math.round(o[u]*255);return o}function J5(e,t){if(t===0)return e;var r=aOe(nOe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),WN(sOe(r))}var Vle=6,iOe=15,oOe=1,Nl=Vle;function XN(e){return Math.floor((e+Math.round(128/Nl)/256)*Nl)}function YN(e){return Math.floor((e-5)/Nl*100+.5)/100}function Z5(e){return Math.round((e*Nl+5)/Nl*256)/256}function s6(e){return Z5(YN(XN(e)))}function x7(e){var t=Math.abs(e-s6(e)),r=Nl;if(t>.005)for(Nl=oOe;Nl<iOe;++Nl)Math.abs(e-s6(e))<=t&&(t=Math.abs(e-s6(e)),r=Nl);Nl=r}function kp(e){e.width?(e.wpx=XN(e.width),e.wch=YN(e.wpx),e.MDW=Nl):e.wpx?(e.wch=YN(e.wpx),e.width=Z5(e.wch),e.MDW=Nl):typeof e.wch=="number"&&(e.width=Z5(e.wch),e.wpx=XN(e.width),e.MDW=Nl),e.customWidth&&delete e.customWidth}var lOe=96,$le=lOe;function JN(e){return e*96/$le}function R1(e){return e*$le/96}var cOe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function uOe(e,t,r,n){t.Borders=[];var a={},s=!1;(e[0].match(Ml)||[]).forEach(function(o){var l=Wr(o);switch(s0(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},l.diagonalUp&&(a.diagonalUp=es(l.diagonalUp)),l.diagonalDown&&(a.diagonalDown=es(l.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in borders")}})}function dOe(e,t,r,n){t.Fills=[];var a={},s=!1;(e[0].match(Ml)||[]).forEach(function(o){var l=Wr(o);switch(s0(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":l.patternType&&(a.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),l.indexed&&(a.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(a.bgColor.theme=parseInt(l.theme,10)),l.tint&&(a.bgColor.tint=parseFloat(l.tint)),l.rgb&&(a.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),l.theme&&(a.fgColor.theme=parseInt(l.theme,10)),l.tint&&(a.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(a.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fills")}})}function fOe(e,t,r,n){t.Fonts=[];var a={},s=!1;(e[0].match(Ml)||[]).forEach(function(o){var l=Wr(o);switch(s0(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":l.val&&(a.name=Pa(l.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=l.val?es(l.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=l.val?es(l.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(l.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=l.val?es(l.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=l.val?es(l.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=l.val?es(l.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=l.val?es(l.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=l.val?es(l.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":l.val&&(a.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(a.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(a.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(a.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=GM[parseInt(l.val,10)];break;case"<color":if(a.color||(a.color={}),l.auto&&(a.color.auto=es(l.auto)),l.rgb)a.color.rgb=l.rgb.slice(-6);else if(l.indexed){a.color.index=parseInt(l.indexed,10);var c=ux[a.color.index];a.color.index==81&&(c=ux[1]),c||(c=ux[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(a.color.theme=parseInt(l.theme,10),l.tint&&(a.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=J5(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fonts")}})}function hOe(e,t,r){t.NumberFmt=[];for(var n=Ws(Qr),a=0;a<n.length;++a)t.NumberFmt[n[a]]=Qr[n[a]];var s=e[0].match(Ml);if(s)for(a=0;a<s.length;++a){var o=Wr(s[a]);switch(s0(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Kn(Pa(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}iA(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function AOe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Yt("numFmt",null,{numFmtId:n,formatCode:_a(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Yt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var sk=["numFmtId","fillId","fontId","borderId","xfId"],ik=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function mOe(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(Ml)||[]).forEach(function(s){var o=Wr(s),l=0;switch(s0(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<sk.length;++l)n[sk[l]]&&(n[sk[l]]=parseInt(n[sk[l]],10));for(l=0;l<ik.length;++l)n[ik[l]]&&(n[ik[l]]=es(n[ik[l]]));if(t.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[l]){n.numFmtId=l;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=es(o.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function pOe(e){var t=[];return t[t.length]=Yt("cellXfs",null),e.forEach(function(r){t[t.length]=Yt("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Yt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var gOe=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var d={};if(!l)return d;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=l.match(t))&&hOe(f,d,u),(f=l.match(a))&&fOe(f,d,c,u),(f=l.match(n))&&dOe(f,d,c,u),(f=l.match(s))&&uOe(f,d,c,u),(f=l.match(r))&&mOe(f,d,u),d}}();function zle(e,t){var r=[yi,Yt("styleSheet",null,{xmlns:tv[0],"xmlns:vt":Vi.vt})],n;return e.SSF&&(n=AOe(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=pOe(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function xOe(e,t){var r=e.read_shift(2),n=Ol(e);return[r,n]}function vOe(e,t,r){r||(r=_t(6+4*t.length)),r.write_shift(2,e),po(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function bOe(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=tIe(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=e.read_shift(2);switch(s===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(n.underline=o);var l=e.read_shift(1);l>0&&(n.family=l);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=eIe(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Ol(e),n}function yOe(e,t){t||(t=_t(153)),t.write_shift(2,e.sz*20),rIe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),W5(e.color,t);var n=0;return n=2,t.write_shift(1,n),po(e.name,t),t.length>t.l?t.slice(0,t.l):t}var wOe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],i6,NOe=Rl;function Dq(e,t){t||(t=_t(84)),i6||(i6=C3(wOe));var r=i6[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(W5({auto:1},t),W5({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function COe(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function Gle(e,t,r){r||(r=_t(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Pw(e,t){return t||(t=_t(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var EOe=Rl;function jOe(e,t){return t||(t=_t(51)),t.write_shift(1,0),Pw(null,t),Pw(null,t),Pw(null,t),Pw(null,t),Pw(null,t),t.length>t.l?t.slice(0,t.l):t}function kOe(e,t){return t||(t=_t(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),K5(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function SOe(e,t,r){var n=_t(2052);return n.write_shift(4,e),K5(t,n),K5(r,n),n.length>n.l?n.slice(0,n.l):n}function _Oe(e,t,r){var n={};n.NumberFmt=[];for(var a in Qr)n.NumberFmt[a]=Qr[a];n.CellXf=[],n.Fonts=[];var s=[],o=!1;return UA(e,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],iA(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=J5(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:s.push(d),o=!0;break;case 38:s.pop(),o=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!o||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function TOe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&($t(e,615,_f(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&$t(e,44,vOe(a,t[a]))}),$t(e,616))}}function BOe(e){var t=1;$t(e,611,_f(t)),$t(e,43,yOe({sz:12,color:{theme:1},name:"Calibri",family:2})),$t(e,612)}function IOe(e){var t=2;$t(e,603,_f(t)),$t(e,45,Dq({patternType:"none"})),$t(e,45,Dq({patternType:"gray125"})),$t(e,604)}function DOe(e){var t=1;$t(e,613,_f(t)),$t(e,46,jOe()),$t(e,614)}function OOe(e){var t=1;$t(e,626,_f(t)),$t(e,47,Gle({numFmtId:0},65535)),$t(e,627)}function POe(e,t){$t(e,617,_f(t.length)),t.forEach(function(r){$t(e,47,Gle(r,0))}),$t(e,618)}function FOe(e){var t=1;$t(e,619,_f(t)),$t(e,48,kOe({xfId:0,name:"Normal"})),$t(e,620)}function ROe(e){var t=0;$t(e,505,_f(t)),$t(e,506)}function LOe(e){var t=0;$t(e,508,SOe(t,"TableStyleMedium9","PivotStyleMedium4")),$t(e,509)}function MOe(e,t){var r=Hc();return $t(r,278),TOe(r,e.SSF),BOe(r),IOe(r),DOe(r),OOe(r),POe(r,t.cellXfs),FOe(r),ROe(r),LOe(r),$t(r,279),r.end()}var UOe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function HOe(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(Ml)||[]).forEach(function(a){var s=Wr(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[UOe.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function QOe(){}function VOe(){}var $Oe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,zOe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,GOe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function qOe(e,t,r){t.themeElements={};var n;[["clrScheme",$Oe,HOe],["fontScheme",zOe,QOe],["fmtScheme",GOe,VOe]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var KOe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function qle(e,t){(!e||e.length===0)&&(e=v7());var r,n={};if(!(r=e.match(KOe)))throw new Error("themeElements not found in theme");return qOe(r[0],n,t),n.raw=e,n}function v7(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[yi];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function WOe(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var s=e.slice(e.l);e.l=n;var o;try{o=Moe(s,{type:"array"})}catch{return}var l=Cu(o,"theme/theme/theme1.xml",!0);if(l)return qle(l,r)}}function XOe(e){return e.read_shift(4)}function YOe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=JOe(e,4);break;case 2:t.xclrValue=jle(e);break;case 3:t.xclrValue=XOe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function JOe(e,t){return Rl(e,t)}function ZOe(e,t){return Rl(e,t)}function ePe(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=YOe(e);break;case 6:n[1]=ZOe(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function tPe(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),s=[];a-- >0;)s.push(ePe(e,r-e.l));return{ixfe:n,ext:s}}function rPe(e,t){t.forEach(function(r){r[0]})}function nPe(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Ol(e)}}function aPe(e){var t=_t(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),po(e.name,t),t.slice(0,t.l)}function sPe(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function iPe(e){var t=_t(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function oPe(e,t){var r=_t(8+2*t.length);return r.write_shift(4,e),po(t,r),r.slice(0,r.l)}function lPe(e){return e.l+=4,e.read_shift(4)!=0}function cPe(e,t){var r=_t(8);return r.write_shift(4,e),r.write_shift(4,1),r}function uPe(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],o=!1,l=2;return UA(e,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){l==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):l==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:s.push(d),o=!0;break;case 36:s.pop(),o=!1;break;default:if(!u.T){if(!o||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function dPe(){var e=Hc();return $t(e,332),$t(e,334,_f(1)),$t(e,335,aPe({name:"XLDAPR",version:12e4,flags:3496657072})),$t(e,336),$t(e,339,oPe(1,"XLDAPR")),$t(e,52),$t(e,35,_f(514)),$t(e,4096,_f(0)),$t(e,4097,vd(1)),$t(e,36),$t(e,53),$t(e,340),$t(e,337,cPe(1)),$t(e,51,iPe([[1,0]])),$t(e,338),$t(e,333),e.end()}function fPe(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,s=2,o;return e.replace(Ml,function(l){var c=Wr(l);switch(s0(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(o=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function Kle(){var e=[yi];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function hPe(e){var t=[];if(!e)return t;var r=1;return(e.match(Ml)||[]).forEach(function(n){var a=Wr(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function APe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=zr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function mPe(e,t,r){var n=[];return UA(e,function(s,o,l){switch(l){case 63:n.push(s);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function pPe(e,t,r,n){if(!e)return e;var a=n||{},s=!1;UA(e,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function gPe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var Ib=1024;function Wle(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Yt("xml",null,{"xmlns:v":xu.v,"xmlns:o":xu.o,"xmlns:x":xu.x,"xmlns:mv":xu.mv}).replace(/\/>/,">"),Yt("o:shapelayout",Yt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Yt("v:shapetype",[Yt("v:stroke",null,{joinstyle:"miter"}),Yt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Ib<e*1e3;)Ib+=1e3;return t.forEach(function(s){var o=ks(s[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?Yt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Yt("v:fill",c,l),d={on:"t",obscured:"t"};++Ib,a=a.concat(["<v:shape"+GN({id:"_x0000_s"+Ib,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Yt("v:shadow",null,d),Yt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Qo("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Qo("x:AutoFill","False"),Qo("x:Row",String(o.r)),Qo("x:Column",String(o.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function Oq(e,t,r,n){var a=Array.isArray(e),s;t.forEach(function(o){var l=ks(o.ref);if(a?(e[l.r]||(e[l.r]=[]),s=e[l.r][l.c]):s=e[o.ref],!s){s={t:"z"},a?e[l.r][l.c]=s:e[o.ref]=s;var c=Xn(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=un(c);u!==e["!ref"]&&(e["!ref"]=u)}s.c||(s.c=[]);var d={a:o.author,t:o.t,r:o.r,T:r};o.h&&(d.h=o.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function xPe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=Wr(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=ks(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),A=!!f&&!!f[1]&&p7(f[1])||{r:"",t:"",h:""};u.r=A.r,A.r=="<t></t>"&&(A.t=A.h=""),u.t=(A.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=A.h),n.push(u)}}}}),n}function Xle(e){var t=[yi,Yt("comments",null,{xmlns:tv[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var s=_a(a.a);r.indexOf(s)==-1&&(r.push(s),t.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(_a(c.a))),s.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)t.push(Qo("t",_a(s[0]||"")));else{for(var o=`Comment:
    `+s[0]+`
`,l=1;l<s.length;++l)o+=`Reply:
    `+s[l]+`
`;t.push(Qo("t",_a(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function vPe(e,t){var r=[],n=!1,a={},s=0;return e.replace(Ml,function(l,c){var u=Wr(l);switch(s0(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+l.length;break;case"</text>":a.t=e.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function bPe(e,t,r){var n=[yi,Yt("ThreadedComments",null,{xmlns:Vi.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var s="";(a[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?s=c.id:c.parentId=s,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),n.push(Yt("threadedComment",Qo("text",o.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function yPe(e,t){var r=[],n=!1;return e.replace(Ml,function(s){var o=Wr(s);switch(s0(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return s}),r}function wPe(e){var t=[yi,Yt("personList",null,{xmlns:Vi.TCMNT,"xmlns:x":tv[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Yt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function NPe(e){var t={};t.iauthor=e.read_shift(4);var r=sv(e);return t.rfx=r.s,t.ref=zr(r.s),e.l+=16,t}function CPe(e,t){return t==null&&(t=_t(36)),t.write_shift(4,e[1].iauthor),jy(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var EPe=Ol;function jPe(e){return po(e.slice(0,54))}function kPe(e,t){var r=[],n=[],a={},s=!1;return UA(e,function(l,c,u){switch(u){case 632:n.push(l);break;case 635:a=l;break;case 637:a.t=l.t,a.h=l.h,a.r=l.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function SPe(e){var t=Hc(),r=[];return $t(t,628),$t(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),$t(t,632,jPe(a.a)))})}),$t(t,631),$t(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:ks(n[0]),e:ks(n[0])};$t(t,635,CPe([s,a])),a.t&&a.t.length>0&&$t(t,637,XBe(a)),$t(t,636),delete a.iauthor})}),$t(t,634),$t(t,629),t.end()}var _Pe="application/vnd.ms-office.vbaProject";function TPe(e){var t=Br.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Br.utils.cfb_add(t,a,e.FileIndex[n].content)}}),Br.write(t)}function BPe(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Br.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var Yle=["xlsb","xlsm","xlam","biff8","xla"];function IPe(){return{"!type":"dialog"}}function DPe(){return{"!type":"dialog"}}function OPe(){return{"!type":"macro"}}function PPe(){return{"!type":"macro"}}var i1=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,s,o){var l=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return l?d+=t.c:--d,c?u+=t.r:--u,a+(l?"":"$")+js(d)+(c?"":"$")+xi(u)}return function(a,s){return t=s,a.replace(e,r)}}(),b7=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,y7=function(){return function(t,r){return t.replace(b7,function(n,a,s,o,l,c){var u=o7(o)-(s?0:r.c),d=i7(c)-(l?0:r.r),f=d==0?"":l?d+1:"["+d+"]",A=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+A})}}();function Jle(e,t){return e.replace(b7,function(r,n,a,s,o,l){return n+(a=="$"?a+s:js(o7(s)+t.c))+(o=="$"?o+l:xi(i7(l)+t.r))})}function FPe(e,t,r){var n=Vc(t),a=n.s,s=ks(r),o={r:s.r-a.r,c:s.c-a.c};return Jle(e,o)}function RPe(e){return e.length!=1}function Pq(e){return e.replace(/_xlfn\./g,"")}function ki(e){e.l+=1}function Sp(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Zle(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return ece(e);r.biff==12&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),o=Sp(e),l=Sp(e);return{s:{r:a,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function ece(e){var t=Sp(e),r=Sp(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function LPe(e,t,r){if(r.biff<8)return ece(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),s=Sp(e),o=Sp(e);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function tce(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return MPe(e);var n=e.read_shift(r&&r.biff==12?4:2),a=Sp(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function MPe(e){var t=Sp(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function UPe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function HPe(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return QPe(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),o=(s&16384)>>14,l=(s&32768)>>15;if(s&=16383,l==1)for(;a>524287;)a-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:o,rRel:l}}function QPe(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function VPe(e,t,r){var n=(e[e.l++]&96)>>5,a=Zle(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function $Pe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var o=Zle(e,s,r);return[n,a,o]}function zPe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function GPe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[n,a]}function qPe(e,t,r){var n=(e[e.l++]&96)>>5,a=LPe(e,t-1,r);return[n,a]}function KPe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function Fq(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function WPe(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function XPe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function YPe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function JPe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function ZPe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function rce(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function eFe(e){return e.read_shift(2),rce(e)}function tFe(e){return e.read_shift(2),rce(e)}function rFe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=tce(e,0,r);return[n,a]}function nFe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=HPe(e,0,r);return[n,a]}function aFe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var s=tce(e,0,r);return[n,a,s]}function sFe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[lRe[a],sce[a],n]}function iFe(e,t,r){var n=e[e.l++],a=e.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:oFe(e);return[a,(s[0]===0?sce:oRe)[s[1]]]}function oFe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function lFe(e,t,r){e.l+=r&&r.biff==2?3:4}function cFe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function uFe(e){return e.l++,HA[e.read_shift(1)]}function dFe(e){return e.l++,e.read_shift(2)}function fFe(e){return e.l++,e.read_shift(1)!==0}function hFe(e){return e.l++,jl(e)}function AFe(e,t,r){return e.l++,XC(e,t-1,r)}function mFe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=li(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=HA[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=jl(e);break;case 2:r[1]=iv(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function pFe(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?sv:k3)(e));return a}function gFe(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,o=[];s!=n&&(o[s]=[]);++s)for(var l=0;l!=a;++l)o[s][l]=mFe(e,r.biff);return o}function xFe(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,s]}function vFe(e,t,r){if(r.biff==5)return bFe(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),s=e.read_shift(4);return[n,a,s]}function bFe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function yFe(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function wFe(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function NFe(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function CFe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[n,a]}var EFe=Rl,jFe=Rl,kFe=Rl;function JC(e,t,r){return e.l+=2,[UPe(e)]}function w7(e){return e.l+=6,[]}var SFe=JC,_Fe=w7,TFe=w7,BFe=JC;function nce(e){return e.l+=2,[Bi(e),e.read_shift(2)&1]}var IFe=JC,DFe=nce,OFe=w7,PFe=JC,FFe=JC,RFe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function LFe(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2),o=RFe[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:n,c:a,C:s}}function MFe(e){return e.l+=2,[e.read_shift(4)]}function UFe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function HFe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function QFe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function VFe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function $Fe(e){return e.l+=4,[0,0]}var Rq={1:{n:"PtgExp",f:cFe},2:{n:"PtgTbl",f:kFe},3:{n:"PtgAdd",f:ki},4:{n:"PtgSub",f:ki},5:{n:"PtgMul",f:ki},6:{n:"PtgDiv",f:ki},7:{n:"PtgPower",f:ki},8:{n:"PtgConcat",f:ki},9:{n:"PtgLt",f:ki},10:{n:"PtgLe",f:ki},11:{n:"PtgEq",f:ki},12:{n:"PtgGe",f:ki},13:{n:"PtgGt",f:ki},14:{n:"PtgNe",f:ki},15:{n:"PtgIsect",f:ki},16:{n:"PtgUnion",f:ki},17:{n:"PtgRange",f:ki},18:{n:"PtgUplus",f:ki},19:{n:"PtgUminus",f:ki},20:{n:"PtgPercent",f:ki},21:{n:"PtgParen",f:ki},22:{n:"PtgMissArg",f:ki},23:{n:"PtgStr",f:AFe},26:{n:"PtgSheet",f:UFe},27:{n:"PtgEndSheet",f:HFe},28:{n:"PtgErr",f:uFe},29:{n:"PtgBool",f:fFe},30:{n:"PtgInt",f:dFe},31:{n:"PtgNum",f:hFe},32:{n:"PtgArray",f:KPe},33:{n:"PtgFunc",f:sFe},34:{n:"PtgFuncVar",f:iFe},35:{n:"PtgName",f:xFe},36:{n:"PtgRef",f:rFe},37:{n:"PtgArea",f:VPe},38:{n:"PtgMemArea",f:yFe},39:{n:"PtgMemErr",f:EFe},40:{n:"PtgMemNoMem",f:jFe},41:{n:"PtgMemFunc",f:wFe},42:{n:"PtgRefErr",f:NFe},43:{n:"PtgAreaErr",f:zPe},44:{n:"PtgRefN",f:nFe},45:{n:"PtgAreaN",f:qPe},46:{n:"PtgMemAreaN",f:QFe},47:{n:"PtgMemNoMemN",f:VFe},57:{n:"PtgNameX",f:vFe},58:{n:"PtgRef3d",f:aFe},59:{n:"PtgArea3d",f:$Pe},60:{n:"PtgRefErr3d",f:CFe},61:{n:"PtgAreaErr3d",f:GPe},255:{}},zFe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},GFe={1:{n:"PtgElfLel",f:nce},2:{n:"PtgElfRw",f:PFe},3:{n:"PtgElfCol",f:SFe},6:{n:"PtgElfRwV",f:FFe},7:{n:"PtgElfColV",f:BFe},10:{n:"PtgElfRadical",f:IFe},11:{n:"PtgElfRadicalS",f:OFe},13:{n:"PtgElfColS",f:_Fe},15:{n:"PtgElfColSV",f:TFe},16:{n:"PtgElfRadicalLel",f:DFe},25:{n:"PtgList",f:LFe},29:{n:"PtgSxName",f:MFe},255:{}},qFe={0:{n:"PtgAttrNoop",f:$Fe},1:{n:"PtgAttrSemi",f:ZPe},2:{n:"PtgAttrIf",f:YPe},4:{n:"PtgAttrChoose",f:WPe},8:{n:"PtgAttrGoto",f:XPe},16:{n:"PtgAttrSum",f:lFe},32:{n:"PtgAttrBaxcel",f:Fq},33:{n:"PtgAttrBaxcel",f:Fq},64:{n:"PtgAttrSpace",f:eFe},65:{n:"PtgAttrSpaceSemi",f:tFe},128:{n:"PtgAttrIfError",f:JPe},255:{}};function ZC(e,t,r,n){if(n.biff<8)return Rl(e,t);for(var a=e.l+t,s=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=gFe(e,0,n),s.push(r[o][1]);break;case"PtgMemArea":r[o][2]=pFe(e,r[o][1],n),s.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=e.read_shift(4),s.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=a-e.l,t!==0&&s.push(Rl(e,t)),s}function eE(e,t,r){for(var n=e.l+t,a,s,o=[];n!=e.l;)t=n-e.l,s=e[e.l],a=Rq[s]||Rq[zFe[s]],(s===24||s===25)&&(a=(s===24?GFe:qFe)[e[e.l+1]]),!a||!a.f?Rl(e,t):o.push([a.n,a.f(e,t,r)]);return o}function KFe(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],s=0;s<n.length;++s){var o=n[s];if(o)switch(o[0]){case 2:a.push('"'+o[1].replace(/"/g,'""')+'"');break;default:a.push(o[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var WFe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function XFe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function ace(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function Lq(e,t,r){var n=ace(e,t,r);return n=="#REF"?n:XFe(n,r)}function bl(e,t,r,n,a){var s=a&&a.biff||8,o={s:{c:0,r:0}},l=[],c,u,d,f=0,A=0,m,g="";if(!e[0]||!e[0][0])return"";for(var x=-1,v="",y=0,N=e[0].length;y<N;++y){var C=e[0][y];switch(C[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),x>=0){switch(e[0][x][1][0]){case 0:v=Vs(" ",e[0][x][1][1]);break;case 1:v=Vs("\r",e[0][x][1][1]);break;default:if(v="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}u=u+v,x=-1}l.push(u+WFe[C[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=X2(C[1][1],o,a),l.push(Y2(d,s));break;case"PtgRefN":d=r?X2(C[1][1],r,a):C[1][1],l.push(Y2(d,s));break;case"PtgRef3d":f=C[1][1],d=X2(C[1][2],o,a),g=Lq(n,f,a),l.push(g+"!"+Y2(d,s));break;case"PtgFunc":case"PtgFuncVar":var _=C[1][0],j=C[1][1];_||(_=0),_&=127;var I=_==0?[]:l.slice(-_);l.length-=_,j==="User"&&(j=I.shift()),l.push(j+"("+I.join(",")+")");break;case"PtgBool":l.push(C[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(C[1]);break;case"PtgNum":l.push(String(C[1]));break;case"PtgStr":l.push('"'+C[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(C[1]);break;case"PtgAreaN":m=hq(C[1][1],r?{s:r}:o,a),l.push(r6(m,a));break;case"PtgArea":m=hq(C[1][1],o,a),l.push(r6(m,a));break;case"PtgArea3d":f=C[1][1],m=C[1][2],g=Lq(n,f,a),l.push(g+"!"+r6(m,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":A=C[1][2];var T=(n.names||[])[A-1]||(n[0]||[])[A],k=T?T.Name:"SH33TJSNAME"+String(A);k&&k.slice(0,6)=="_xlfn."&&!a.xlfn&&(k=k.slice(6)),l.push(k);break;case"PtgNameX":var B=C[1][1];A=C[1][2];var M;if(a.biff<=5)B<0&&(B=-B),n[B]&&(M=n[B][A]);else{var P="";if(((n[B]||[])[0]||[])[0]==14849||(((n[B]||[])[0]||[])[0]==1025?n[B][A]&&n[B][A].itab>0&&(P=n.SheetNames[n[B][A].itab-1]+"!"):P=n.SheetNames[A-1]+"!"),n[B]&&n[B][A])P+=n[B][A].Name;else if(n[0]&&n[0][A])P+=n[0][A].Name;else{var S=(ace(n,B,a)||"").split(";;");S[A-1]?P=S[A-1]:P+="SH33TJSERRX"}l.push(P);break}M||(M={Name:"SH33TJSERRY"}),l.push(M.Name);break;case"PtgParen":var L="(",H=")";if(x>=0){switch(v="",e[0][x][1][0]){case 2:L=Vs(" ",e[0][x][1][1])+L;break;case 3:L=Vs("\r",e[0][x][1][1])+L;break;case 4:H=Vs(" ",e[0][x][1][1])+H;break;case 5:H=Vs("\r",e[0][x][1][1])+H;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}x=-1}l.push(L+l.pop()+H);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:C[1][1],r:C[1][0]};var q={c:r.c,r:r.r};if(n.sharedf[zr(d)]){var Q=n.sharedf[zr(d)];l.push(bl(Q,o,q,n,a))}else{var z=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(bl(u[1],o,q,n,a)),z=!0;break}z||l.push(C[1])}break;case"PtgArray":l.push("{"+KFe(C[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+C[1].idx+"[#"+C[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(C));default:throw new Error("Unrecognized Formula Token: "+String(C))}var K=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&x>=0&&K.indexOf(e[0][y][0])==-1){C=e[0][x];var Z=!0;switch(C[1][0]){case 4:Z=!1;case 0:v=Vs(" ",C[1][1]);break;case 5:Z=!1;case 1:v=Vs("\r",C[1][1]);break;default:if(v="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+C[1][0])}l.push((Z?v:"")+l.pop()+(Z?"":v)),x=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function YFe(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,o=e.read_shift(a);if(o==65535)return[[],Rl(e,t-2)];var l=eE(e,o,r);return t!==o+a&&(s=ZC(e,t-o-a,l,r)),e.l=n,[l,s]}function JFe(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,o=e.read_shift(a);if(o==65535)return[[],Rl(e,t-2)];var l=eE(e,o,r);return t!==o+a&&(s=ZC(e,t-o-a,l,r)),e.l=n,[l,s]}function ZFe(e,t,r,n){var a=e.l+t,s=eE(e,n,r),o;return a!==e.l&&(o=ZC(e,a-e.l,s,r)),[s,o]}function eRe(e,t,r){var n=e.l+t,a,s=e.read_shift(2),o=eE(e,s,r);return s==65535?[[],Rl(e,t-2)]:(t!==s+2&&(a=ZC(e,n-s-2,o,r)),[o,a])}function tRe(e){var t;if(J0(e,e.l+6)!==65535)return[jl(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function rRe(e){if(e==null){var t=_t(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Dx(e);return Dx(0)}function o6(e,t,r){var n=e.l+t,a=i0(e);r.biff==2&&++e.l;var s=tRe(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=JFe(e,n-e.l,r);return{cell:a,val:s[0],formula:l,shared:o>>3&1,tt:s[1]}}function nRe(e,t,r,n,a){var s=Px(t,r,a),o=rRe(e.v),l=_t(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=_t(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=mo([s,o,l,u]);return f}function S3(e,t,r){var n=e.read_shift(4),a=eE(e,n,r),s=e.read_shift(4),o=s>0?ZC(e,s,a,r):null;return[a,o]}var aRe=S3,_3=S3,sRe=S3,iRe=S3,oRe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},sce={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},lRe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Mq(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function cRe(e){var t="of:="+e.replace(b7,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function l6(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function uRe(e){return e.replace(/\./,"!")}var Z2={},o1={},eN=typeof Map<"u";function N7(e,t,r){var n=0,a=e.length;if(r){if(eN?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var s=eN?r.get(t):r[t];n<s.length;++n)if(e[s[n]].t===t)return e.Count++,s[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(eN?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function T3(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(Nl=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=YN(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=Z5(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function hx(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function Gp(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,s=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){iA(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=s;++a)if(e[a].numFmtId===n)return a;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function ice(e,t,r,n,a,s){try{n.cellNF&&(e.z=Qr[t])}catch(l){if(n.WTF)throw l}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=rs(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Qr[t]==null&&iA(oBe[t]||"General",t),e.t==="e")e.w=e.w||HA[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=$N(e.v);else if(e.t==="d"){var o=Gi(e.v);(o|0)===o?e.w=o.toString(10):e.w=$N(o)}else{if(e.v===void 0)return"";e.w=Bx(e.v,o1)}else e.t==="d"?e.w=Bd(t,Gi(e.v),o1):e.w=Bd(t,e.v,o1)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{e.s=s.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=J5(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=J5(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&s.Fills)throw l}}}function dRe(e,t,r){if(e&&e["!ref"]){var n=Xn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function fRe(e,t){var r=Xn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=un(r))}var hRe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,ARe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,mRe=/<(?:\w:)?hyperlink [^>]*>/mg,pRe=/"(\w*:\w*)"/,gRe=/<(?:\w:)?col\b[^>]*[\/]?>/g,xRe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,vRe=/<(?:\w:)?pageMargins[^>]*\/>/g,oce=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,bRe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,yRe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function wRe(e,t,r,n,a,s,o){if(!e)return e;n||(n={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(ARe);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var A=u.match(oce);A?C7(A[0],l,a,r):(A=u.match(bRe))&&CRe(A[0],A[1]||"",l,a,r);var m=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var g=u.slice(m,m+50).match(pRe);g&&fRe(l,g[1])}var x=u.match(yRe);x&&x[1]&&RRe(x[1],a);var v=[];if(t.cellStyles){var y=u.match(gRe);y&&IRe(v,y)}f&&URe(f[1],l,t,c,s,o);var N=d.match(xRe);N&&(l["!autofilter"]=ORe(N[0]));var C=[],_=d.match(hRe);if(_)for(m=0;m!=_.length;++m)C[m]=Xn(_[m].slice(_[m].indexOf('"')+1));var j=d.match(mRe);j&&_Re(l,j,n);var I=d.match(vRe);if(I&&(l["!margins"]=TRe(Wr(I[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=un(c)),t.sheetRows>0&&l["!ref"]){var T=Xn(l["!ref"]);t.sheetRows<=+T.e.r&&(T.e.r=t.sheetRows-1,T.e.r>c.e.r&&(T.e.r=c.e.r),T.e.r<T.s.r&&(T.s.r=T.e.r),T.e.c>c.e.c&&(T.e.c=c.e.c),T.e.c<T.s.c&&(T.s.c=T.e.c),l["!fullref"]=l["!ref"],l["!ref"]=un(T))}return v.length>0&&(l["!cols"]=v),C.length>0&&(l["!merges"]=C),l}function NRe(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+un(e[r])+'"/>';return t+"</mergeCells>"}function C7(e,t,r,n){var a=Wr(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Kn(Pa(a.codeName)))}function CRe(e,t,r,n,a){C7(e.slice(0,e.indexOf(">")),r,n,a)}function ERe(e,t,r,n,a){var s=!1,o={},l=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,o.codeName=Fh(_a(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),l=(l||"")+Yt("outlinePr",null,u)}!s&&!l||(a[a.length]=Yt("sheetPr",l,o))}var jRe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],kRe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function SRe(e){var t={sheet:1};return jRe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),kRe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=g7(e.password).toString(16).toUpperCase()),Yt("sheetProtection",null,t)}function _Re(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var s=Wr(Pa(t[a]),!0);if(!s.ref)return;var o=((r||{})["!id"]||[])[s.id];o?(s.Target=o.Target,s.location&&(s.Target+="#"+Kn(s.location))):(s.Target="#"+Kn(s.location),o={Target:s.Target,TargetMode:"Internal"}),s.Rel=o,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var l=Xn(s.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var d=zr({c:u,r:c});n?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}function TRe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function BRe(e){return hx(e),Yt("pageMargins",null,e)}function IRe(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=Wr(t[n],!0);a.hidden&&(a.hidden=es(a.hidden));var s=parseInt(a.min,10)-1,o=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,x7(a.width)),kp(a);s<=o;)e[s++]=ns(a)}}function DRe(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=Yt("col",null,T3(a,n)));return r[r.length]="</cols>",r.join("")}function ORe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function PRe(e,t,r,n){var a=typeof e.ref=="string"?e.ref:un(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=Vc(a);o.s.r==o.e.r&&(o.e.r=Vc(t["!ref"]).e.r,a=un(o));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Yt("autoFilter",null,{ref:a})}var FRe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function RRe(e,t){t.Views||(t.Views=[{}]),(e.match(FRe)||[]).forEach(function(r,n){var a=Wr(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),es(a.rightToLeft)&&(t.Views[n].RTL=!0)})}function LRe(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Yt("sheetViews",Yt("sheetView",null,a),{})}function MRe(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",s=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=HA[e.v];break;case"d":n&&n.cellDates?a=rs(e.v,-1).toISOString():(e=ns(e),e.t="n",a=""+(e.v=Gi(rs(e.v)))),typeof e.z>"u"&&(e.z=Qr[14]);break;default:a=e.v;break}var l=Qo("v",_a(a)),c={r:t},u=Gp(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=Qo("v",""+N7(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=s&&(e.t=s,e.v=o),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=Yt("f",_a(e.f),d)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),Yt("c",l,c)}var URe=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=zN("v"),o=zN("f");return function(c,u,d,f,A,m){for(var g=0,x="",v=[],y=[],N=0,C=0,_=0,j="",I,T,k=0,B=0,M,P,S=0,L=0,H=Array.isArray(m.CellXf),q,Q=[],z=[],K=Array.isArray(u),Z=[],U={},Y=!1,R=!!d.sheetStubs,D=c.split(t),W=0,J=D.length;W!=J;++W){x=D[W].trim();var le=x.length;if(le!==0){var ie=0;e:for(g=0;g<le;++g)switch(x[g]){case">":if(x[g-1]!="/"){++g;break e}if(d&&d.cellStyles){if(T=Wr(x.slice(ie,g),!0),k=T.r!=null?parseInt(T.r,10):k+1,B=-1,d.sheetRows&&d.sheetRows<k)continue;U={},Y=!1,T.ht&&(Y=!0,U.hpt=parseFloat(T.ht),U.hpx=R1(U.hpt)),T.hidden=="1"&&(Y=!0,U.hidden=!0),T.outlineLevel!=null&&(Y=!0,U.level=+T.outlineLevel),Y&&(Z[k-1]=U)}break;case"<":ie=g;break}if(ie>=g)break;if(T=Wr(x.slice(ie,g),!0),k=T.r!=null?parseInt(T.r,10):k+1,B=-1,!(d.sheetRows&&d.sheetRows<k)){f.s.r>k-1&&(f.s.r=k-1),f.e.r<k-1&&(f.e.r=k-1),d&&d.cellStyles&&(U={},Y=!1,T.ht&&(Y=!0,U.hpt=parseFloat(T.ht),U.hpx=R1(U.hpt)),T.hidden=="1"&&(Y=!0,U.hidden=!0),T.outlineLevel!=null&&(Y=!0,U.level=+T.outlineLevel),Y&&(Z[k-1]=U)),v=x.slice(g).split(e);for(var re=0;re!=v.length&&v[re].trim().charAt(0)=="<";++re);for(v=v.slice(re),g=0;g!=v.length;++g)if(x=v[g].trim(),x.length!==0){if(y=x.match(r),N=g,C=0,_=0,x="<c "+(x.slice(0,1)=="<"?">":"")+x,y!=null&&y.length===2){for(N=0,j=y[1],C=0;C!=j.length&&!((_=j.charCodeAt(C)-64)<1||_>26);++C)N=26*N+_;--N,B=N}else++B;for(C=0;C!=x.length&&x.charCodeAt(C)!==62;++C);if(++C,T=Wr(x.slice(0,C),!0),T.r||(T.r=zr({r:k-1,c:B})),j=x.slice(C),I={t:""},(y=j.match(s))!=null&&y[1]!==""&&(I.v=Kn(y[1])),d.cellFormula){if((y=j.match(o))!=null&&y[1]!==""){if(I.f=Kn(Pa(y[1])).replace(/\r\n/g,`
`),d.xlfn||(I.f=Pq(I.f)),y[0].indexOf('t="array"')>-1)I.F=(j.match(a)||[])[1],I.F.indexOf(":")>-1&&Q.push([Xn(I.F),I.F]);else if(y[0].indexOf('t="shared"')>-1){P=Wr(y[0]);var ce=Kn(Pa(y[1]));d.xlfn||(ce=Pq(ce)),z[parseInt(P.si,10)]=[P,ce,T.r]}}else(y=j.match(/<f[^>]*\/>/))&&(P=Wr(y[0]),z[P.si]&&(I.f=FPe(z[P.si][1],z[P.si][2],T.r)));var oe=ks(T.r);for(C=0;C<Q.length;++C)oe.r>=Q[C][0].s.r&&oe.r<=Q[C][0].e.r&&oe.c>=Q[C][0].s.c&&oe.c<=Q[C][0].e.c&&(I.F=Q[C][1])}if(T.t==null&&I.v===void 0)if(I.f||I.F)I.v=0,I.t="n";else if(R)I.t="z";else continue;else I.t=T.t||"n";switch(f.s.c>B&&(f.s.c=B),f.e.c<B&&(f.e.c=B),I.t){case"n":if(I.v==""||I.v==null){if(!R)continue;I.t="z"}else I.v=parseFloat(I.v);break;case"s":if(typeof I.v>"u"){if(!R)continue;I.t="z"}else M=Z2[parseInt(I.v,10)],I.v=M.t,I.r=M.r,d.cellHTML&&(I.h=M.h);break;case"str":I.t="s",I.v=I.v!=null?Pa(I.v):"",d.cellHTML&&(I.h=r7(I.v));break;case"inlineStr":y=j.match(n),I.t="s",y!=null&&(M=p7(y[1]))?(I.v=M.t,d.cellHTML&&(I.h=M.h)):I.v="";break;case"b":I.v=es(I.v);break;case"d":d.cellDates?I.v=rs(I.v,1):(I.v=Gi(rs(I.v,1)),I.t="n");break;case"e":(!d||d.cellText!==!1)&&(I.w=I.v),I.v=cle[I.v];break}if(S=L=0,q=null,H&&T.s!==void 0&&(q=m.CellXf[T.s],q!=null&&(q.numFmtId!=null&&(S=q.numFmtId),d.cellStyles&&q.fillId!=null&&(L=q.fillId))),ice(I,S,L,d,A,m),d.cellDates&&H&&I.t=="n"&&Ny(Qr[S])&&(I.t="d",I.v=j3(I.v)),T.cm&&d.xlmeta){var be=(d.xlmeta.Cell||[])[+T.cm-1];be&&be.type=="XLDAPR"&&(I.D=!0)}if(K){var X=ks(T.r);u[X.r]||(u[X.r]=[]),u[X.r][X.c]=I}else u[T.r]=I}}}}Z.length>0&&(u["!rows"]=Z)}}();function HRe(e,t,r,n){var a=[],s=[],o=Xn(e["!ref"]),l="",c,u="",d=[],f=0,A=0,m=e["!rows"],g=Array.isArray(e),x={r:u},v,y=-1;for(A=o.s.c;A<=o.e.c;++A)d[A]=js(A);for(f=o.s.r;f<=o.e.r;++f){for(s=[],u=xi(f),A=o.s.c;A<=o.e.c;++A){c=d[A]+u;var N=g?(e[f]||[])[A]:e[c];N!==void 0&&(l=MRe(N,c,e,t))!=null&&s.push(l)}(s.length>0||m&&m[f])&&(x={r:u},m&&m[f]&&(v=m[f],v.hidden&&(x.hidden=1),y=-1,v.hpx?y=JN(v.hpx):v.hpt&&(y=v.hpt),y>-1&&(x.ht=y,x.customHeight=1),v.level&&(x.outlineLevel=v.level)),a[a.length]=Yt("row",s.join(""),x))}if(m)for(;f<m.length;++f)m&&m[f]&&(x={r:f+1},v=m[f],v.hidden&&(x.hidden=1),y=-1,v.hpx?y=JN(v.hpx):v.hpt&&(y=v.hpt),y>-1&&(x.ht=y,x.customHeight=1),v.level&&(x.outlineLevel=v.level),a[a.length]=Yt("row","",x));return a.join("")}function lce(e,t,r,n){var a=[yi,Yt("worksheet",null,{xmlns:tv[0],"xmlns:r":Vi.r})],s=r.SheetNames[e],o=0,l="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=Xn(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=un(d)}n||(n={}),c["!comments"]=[];var f=[];ERe(c,r,e,t,a),a[a.length]=Yt("dimension",null,{ref:u}),a[a.length]=LRe(c,t,e,r),t.sheetFormat&&(a[a.length]=Yt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=DRe(c,c["!cols"])),a[o=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=HRe(c,t),l.length>0&&(a[a.length]=l)),a.length>o+1&&(a[a.length]="</sheetData>",a[o]=a[o].replace("/>",">")),c["!protect"]&&(a[a.length]=SRe(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=PRe(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=NRe(c["!merges"]));var A=-1,m,g=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(x){x[1].Target&&(m={ref:x[0]},x[1].Target.charAt(0)!="#"&&(g=Ea(n,-1,_a(x[1].Target).replace(/#.*$/,""),kn.HLINK),m["r:id"]="rId"+g),(A=x[1].Target.indexOf("#"))>-1&&(m.location=_a(x[1].Target.slice(A+1))),x[1].Tooltip&&(m.tooltip=_a(x[1].Tooltip)),a[a.length]=Yt("hyperlink",null,m))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=BRe(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=Qo("ignoredErrors",Yt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(g=Ea(n,-1,"../drawings/drawing"+(e+1)+".xml",kn.DRAW),a[a.length]=Yt("drawing",null,{"r:id":"rId"+g}),c["!drawing"]=f),c["!comments"].length>0&&(g=Ea(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",kn.VML),a[a.length]=Yt("legacyDrawing",null,{"r:id":"rId"+g}),c["!legacy"]=g),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function QRe(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function VRe(e,t,r){var n=_t(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;a.hpx?s=JN(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var o=0;a.level&&(o|=a.level),a.hidden&&(o|=16),(a.hpx||a.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,A=-1,m=d<<10;m<d+1<<10;++m){u.c=m;var g=Array.isArray(r)?(r[u.r]||[])[u.c]:r[zr(u)];g&&(f<0&&(f=m),A=m)}f<0||(++l,n.write_shift(4,f),n.write_shift(4,A))}var x=n.l;return n.l=c,n.write_shift(4,l),n.l=x,n.length>n.l?n.slice(0,n.l):n}function $Re(e,t,r,n){var a=VRe(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&$t(e,0,a)}var zRe=sv,GRe=jy;function qRe(){}function KRe(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=YBe(e),r}function WRe(e,t,r){r==null&&(r=_t(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return W5({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),ale(e,r),r.slice(0,r.l)}function XRe(e){var t=Pd(e);return[t]}function YRe(e,t,r){return r==null&&(r=_t(8)),rv(t,r)}function JRe(e){var t=nv(e);return[t]}function ZRe(e,t,r){return r==null&&(r=_t(4)),av(t,r)}function eLe(e){var t=Pd(e),r=e.read_shift(1);return[t,r,"b"]}function tLe(e,t,r){return r==null&&(r=_t(9)),rv(t,r),r.write_shift(1,e.v?1:0),r}function rLe(e){var t=nv(e),r=e.read_shift(1);return[t,r,"b"]}function nLe(e,t,r){return r==null&&(r=_t(5)),av(t,r),r.write_shift(1,e.v?1:0),r}function aLe(e){var t=Pd(e),r=e.read_shift(1);return[t,r,"e"]}function sLe(e,t,r){return r==null&&(r=_t(9)),rv(t,r),r.write_shift(1,e.v),r}function iLe(e){var t=nv(e),r=e.read_shift(1);return[t,r,"e"]}function oLe(e,t,r){return r==null&&(r=_t(8)),av(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function lLe(e){var t=Pd(e),r=e.read_shift(4);return[t,r,"s"]}function cLe(e,t,r){return r==null&&(r=_t(12)),rv(t,r),r.write_shift(4,t.v),r}function uLe(e){var t=nv(e),r=e.read_shift(4);return[t,r,"s"]}function dLe(e,t,r){return r==null&&(r=_t(8)),av(t,r),r.write_shift(4,t.v),r}function fLe(e){var t=Pd(e),r=jl(e);return[t,r,"n"]}function hLe(e,t,r){return r==null&&(r=_t(16)),rv(t,r),Dx(e.v,r),r}function cce(e){var t=nv(e),r=jl(e);return[t,r,"n"]}function ALe(e,t,r){return r==null&&(r=_t(12)),av(t,r),Dx(e.v,r),r}function mLe(e){var t=Pd(e),r=d7(e);return[t,r,"n"]}function pLe(e,t,r){return r==null&&(r=_t(12)),rv(t,r),sle(e.v,r),r}function gLe(e){var t=nv(e),r=d7(e);return[t,r,"n"]}function xLe(e,t,r){return r==null&&(r=_t(8)),av(t,r),sle(e.v,r),r}function vLe(e){var t=Pd(e),r=l7(e);return[t,r,"is"]}function bLe(e){var t=Pd(e),r=Ol(e);return[t,r,"str"]}function yLe(e,t,r){return r==null&&(r=_t(12+4*e.v.length)),rv(t,r),po(e.v,r),r.length>r.l?r.slice(0,r.l):r}function wLe(e){var t=nv(e),r=Ol(e);return[t,r,"str"]}function NLe(e,t,r){return r==null&&(r=_t(8+4*e.v.length)),av(t,r),po(e.v,r),r.length>r.l?r.slice(0,r.l):r}function CLe(e,t,r){var n=e.l+t,a=Pd(e);a.r=r["!row"];var s=e.read_shift(1),o=[a,s,"b"];if(r.cellFormula){e.l+=2;var l=_3(e,n-e.l,r);o[3]=bl(l,null,a,r.supbooks,r)}else e.l=n;return o}function ELe(e,t,r){var n=e.l+t,a=Pd(e);a.r=r["!row"];var s=e.read_shift(1),o=[a,s,"e"];if(r.cellFormula){e.l+=2;var l=_3(e,n-e.l,r);o[3]=bl(l,null,a,r.supbooks,r)}else e.l=n;return o}function jLe(e,t,r){var n=e.l+t,a=Pd(e);a.r=r["!row"];var s=jl(e),o=[a,s,"n"];if(r.cellFormula){e.l+=2;var l=_3(e,n-e.l,r);o[3]=bl(l,null,a,r.supbooks,r)}else e.l=n;return o}function kLe(e,t,r){var n=e.l+t,a=Pd(e);a.r=r["!row"];var s=Ol(e),o=[a,s,"str"];if(r.cellFormula){e.l+=2;var l=_3(e,n-e.l,r);o[3]=bl(l,null,a,r.supbooks,r)}else e.l=n;return o}var SLe=sv,_Le=jy;function TLe(e,t){return t==null&&(t=_t(4)),t.write_shift(4,e),t}function BLe(e,t){var r=e.l+t,n=sv(e),a=c7(e),s=Ol(e),o=Ol(e),l=Ol(e);e.l=r;var c={rfx:n,relId:a,loc:s,display:l};return o&&(c.Tooltip=o),c}function ILe(e,t){var r=_t(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));jy({s:ks(e[0]),e:ks(e[0])},r),u7("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return po(a||"",r),po(e[1].Tooltip||"",r),po("",r),r.slice(0,r.l)}function DLe(){}function OLe(e,t,r){var n=e.l+t,a=ile(e),s=e.read_shift(1),o=[a];if(o[2]=s,r.cellFormula){var l=aRe(e,n-e.l,r);o[1]=l}else e.l=n;return o}function PLe(e,t,r){var n=e.l+t,a=sv(e),s=[a];if(r.cellFormula){var o=iRe(e,n-e.l,r);s[1]=o,e.l=n}else e.l=n;return s}function FLe(e,t,r){r==null&&(r=_t(18));var n=T3(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var uce=["left","right","top","bottom","header","footer"];function RLe(e){var t={};return uce.forEach(function(r){t[r]=jl(e)}),t}function LLe(e,t){return t==null&&(t=_t(48)),hx(e),uce.forEach(function(r){Dx(e[r],t)}),t}function MLe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function ULe(e,t,r){r==null&&(r=_t(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function HLe(e){var t=_t(24);return t.write_shift(4,4),t.write_shift(4,1),jy(e,t),t}function QLe(e,t){return t==null&&(t=_t(66)),t.write_shift(2,e.password?g7(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function VLe(){}function $Le(){}function zLe(e,t,r,n,a,s,o){if(!e)return e;var l=t||{};n||(n={"!id":{}});var c=l.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,A=!1,m,g,x,v,y,N,C,_,j,I=[];l.biff=12,l["!row"]=0;var T=0,k=!1,B=[],M={},P=l.supbooks||a.supbooks||[[]];if(P.sharedf=M,P.arrayf=B,P.SheetNames=a.SheetNames||a.Sheets.map(function(K){return K.name}),!l.supbooks&&(l.supbooks=P,a.Names))for(var S=0;S<a.Names.length;++S)P[0][S+1]=a.Names[S];var L=[],H=[],q=!1;ZN[16]={n:"BrtShortReal",f:cce};var Q;if(UA(e,function(Z,U,Y){if(!A)switch(Y){case 148:u=Z;break;case 0:m=Z,l.sheetRows&&l.sheetRows<=m.r&&(A=!0),_=xi(v=m.r),l["!row"]=m.r,(Z.hidden||Z.hpt||Z.level!=null)&&(Z.hpt&&(Z.hpx=R1(Z.hpt)),H[Z.r]=Z);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(g={t:Z[2]},Z[2]){case"n":g.v=Z[1];break;case"s":C=Z2[Z[1]],g.v=C.t,g.r=C.r;break;case"b":g.v=!!Z[1];break;case"e":g.v=Z[1],l.cellText!==!1&&(g.w=HA[g.v]);break;case"str":g.t="s",g.v=Z[1];break;case"is":g.t="s",g.v=Z[1].t;break}if((x=o.CellXf[Z[0].iStyleRef])&&ice(g,x.numFmtId,null,l,s,o),y=Z[0].c==-1?y+1:Z[0].c,l.dense?(c[v]||(c[v]=[]),c[v][y]=g):c[js(y)+_]=g,l.cellFormula){for(k=!1,T=0;T<B.length;++T){var R=B[T];m.r>=R[0].s.r&&m.r<=R[0].e.r&&y>=R[0].s.c&&y<=R[0].e.c&&(g.F=un(R[0]),k=!0)}!k&&Z.length>3&&(g.f=Z[3])}if(d.s.r>m.r&&(d.s.r=m.r),d.s.c>y&&(d.s.c=y),d.e.r<m.r&&(d.e.r=m.r),d.e.c<y&&(d.e.c=y),l.cellDates&&x&&g.t=="n"&&Ny(Qr[x.numFmtId])){var D=Kg(g.v);D&&(g.t="d",g.v=new Date(D.y,D.m-1,D.d,D.H,D.M,D.S,D.u))}Q&&(Q.type=="XLDAPR"&&(g.D=!0),Q=void 0);break;case 1:case 12:if(!l.sheetStubs||f)break;g={t:"z",v:void 0},y=Z[0].c==-1?y+1:Z[0].c,l.dense?(c[v]||(c[v]=[]),c[v][y]=g):c[js(y)+_]=g,d.s.r>m.r&&(d.s.r=m.r),d.s.c>y&&(d.s.c=y),d.e.r<m.r&&(d.e.r=m.r),d.e.c<y&&(d.e.c=y),Q&&(Q.type=="XLDAPR"&&(g.D=!0),Q=void 0);break;case 176:I.push(Z);break;case 49:Q=((l.xlmeta||{}).Cell||[])[Z-1];break;case 494:var W=n["!id"][Z.relId];for(W?(Z.Target=W.Target,Z.loc&&(Z.Target+="#"+Z.loc),Z.Rel=W):Z.relId==""&&(Z.Target="#"+Z.loc),v=Z.rfx.s.r;v<=Z.rfx.e.r;++v)for(y=Z.rfx.s.c;y<=Z.rfx.e.c;++y)l.dense?(c[v]||(c[v]=[]),c[v][y]||(c[v][y]={t:"z",v:void 0}),c[v][y].l=Z):(N=zr({c:y,r:v}),c[N]||(c[N]={t:"z",v:void 0}),c[N].l=Z);break;case 426:if(!l.cellFormula)break;B.push(Z),j=l.dense?c[v][y]:c[js(y)+_],j.f=bl(Z[1],d,{r:m.r,c:y},P,l),j.F=un(Z[0]);break;case 427:if(!l.cellFormula)break;M[zr(Z[0].s)]=Z[1],j=l.dense?c[v][y]:c[js(y)+_],j.f=bl(Z[1],d,{r:m.r,c:y},P,l);break;case 60:if(!l.cellStyles)break;for(;Z.e>=Z.s;)L[Z.e--]={width:Z.w/256,hidden:!!(Z.flags&1),level:Z.level},q||(q=!0,x7(Z.w/256)),kp(L[Z.e+1]);break;case 161:c["!autofilter"]={ref:un(Z)};break;case 476:c["!margins"]=Z;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),Z.name&&(a.Sheets[r].CodeName=Z.name),(Z.above||Z.left)&&(c["!outline"]={above:Z.above,left:Z.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),Z.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!U.T){if(!f||l.WTF)throw new Error("Unexpected record 0x"+Y.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=un(u||d)),l.sheetRows&&c["!ref"]){var z=Xn(c["!ref"]);l.sheetRows<=+z.e.r&&(z.e.r=l.sheetRows-1,z.e.r>d.e.r&&(z.e.r=d.e.r),z.e.r<z.s.r&&(z.s.r=z.e.r),z.e.c>d.e.c&&(z.e.c=d.e.c),z.e.c<z.s.c&&(z.s.c=z.e.c),c["!fullref"]=c["!ref"],c["!ref"]=un(z))}return I.length>0&&(c["!merges"]=I),L.length>0&&(c["!cols"]=L),H.length>0&&(c["!rows"]=H),c}function GLe(e,t,r,n,a,s,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=ns(t),t.z=t.z||Qr[14],t.v=Gi(rs(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:n};switch(c.s=Gp(a.cellXfs,t,a),t.l&&s["!links"].push([zr(c),t.l]),t.c&&s["!comments"].push([zr(c),t.c]),t.t){case"s":case"str":return a.bookSST?(l=N7(a.Strings,t.v,a.revStrings),c.t="s",c.v=l,o?$t(e,18,dLe(t,c)):$t(e,7,cLe(t,c))):(c.t="str",o?$t(e,17,NLe(t,c)):$t(e,6,yLe(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?$t(e,13,xLe(t,c)):$t(e,2,pLe(t,c)):o?$t(e,16,ALe(t,c)):$t(e,5,hLe(t,c)),!0;case"b":return c.t="b",o?$t(e,15,nLe(t,c)):$t(e,4,tLe(t,c)),!0;case"e":return c.t="e",o?$t(e,14,oLe(t,c)):$t(e,3,sLe(t,c)),!0}return o?$t(e,12,ZRe(t,c)):$t(e,1,YRe(t,c)),!0}function qLe(e,t,r,n){var a=Xn(t["!ref"]||"A1"),s,o="",l=[];$t(e,145);var c=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){o=xi(d),$Re(e,t,a,d);var f=!1;if(d<=a.e.r)for(var A=a.s.c;A<=a.e.c;++A){d===a.s.r&&(l[A]=js(A)),s=l[A]+o;var m=c?(t[d]||[])[A]:t[s];if(!m){f=!1;continue}f=GLe(e,m,d,A,n,t,f)}}$t(e,146)}function KLe(e,t){!t||!t["!merges"]||($t(e,177,TLe(t["!merges"].length)),t["!merges"].forEach(function(r){$t(e,176,_Le(r))}),$t(e,178))}function WLe(e,t){!t||!t["!cols"]||($t(e,390),t["!cols"].forEach(function(r,n){r&&$t(e,60,FLe(n,r))}),$t(e,391))}function XLe(e,t){!t||!t["!ref"]||($t(e,648),$t(e,649,HLe(Xn(t["!ref"]))),$t(e,650))}function YLe(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=Ea(r,-1,n[1].Target.replace(/#.*$/,""),kn.HLINK);$t(e,494,ILe(n,a))}}),delete t["!links"]}function JLe(e,t,r,n){if(t["!comments"].length>0){var a=Ea(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",kn.VML);$t(e,551,u7("rId"+a)),t["!legacy"]=a}}function ZLe(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],s=typeof a.ref=="string"?a.ref:un(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=Vc(s);l.s.r==l.e.r&&(l.e.r=Vc(t["!ref"]).e.r,s=un(l));for(var c=0;c<o.length;++c){var u=o[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),$t(e,161,jy(Xn(s))),$t(e,162)}}function e8e(e,t,r){$t(e,133),$t(e,137,ULe(t,r)),$t(e,138),$t(e,134)}function t8e(e,t){t["!protect"]&&$t(e,535,QLe(t["!protect"]))}function r8e(e,t,r,n){var a=Hc(),s=r.SheetNames[e],o=r.Sheets[s]||{},l=s;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=Xn(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],$t(a,129),(r.vbaraw||o["!outline"])&&$t(a,147,WRe(l,o["!outline"])),$t(a,148,GRe(c)),e8e(a,o,r.Workbook),WLe(a,o),qLe(a,o,e,t),t8e(a,o),ZLe(a,o,r,e),KLe(a,o),YLe(a,o,n),o["!margins"]&&$t(a,476,LLe(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&XLe(a,o),JLe(a,o,e,n),$t(a,130),a.end()}function n8e(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var o=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var a=Kn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[t,a,n]}function a8e(e,t,r,n,a,s){var o=s||{"!type":"chart"};if(!e)return s;var l=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var A=n8e(f);d.s.r=d.s.c=0,d.e.c=l,u=js(l),A[0].forEach(function(m,g){o[u+xi(g)]={t:"n",v:m,z:A[1]},c=g}),d.e.r<c&&(d.e.r=c),++l}),l>0&&(o["!ref"]=un(d)),o}function s8e(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(oce);return l&&C7(l[0],s,a,r),(o=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=o[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function i8e(e,t){e.l+=10;var r=Ol(e);return{name:r}}function o8e(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o=!1;return UA(e,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var E7=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],l8e=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],c8e=[],u8e=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function Uq(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var s=t[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=es(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function Hq(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=es(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function dce(e){Hq(e.WBProps,E7),Hq(e.CalcPr,u8e),Uq(e.WBView,l8e),Uq(e.Sheets,c8e),o1.date1904=es(e.WBProps.date1904)}function d8e(e){return!e.Workbook||!e.Workbook.WBProps?"false":es(e.Workbook.WBProps.date1904)?"true":"false"}var f8e="][*?/\\".split("");function fce(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return f8e.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function h8e(e,t,r){e.forEach(function(n,a){fce(n);for(var s=0;s<a;++s)if(n==e[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=t&&t[a]&&t[a].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function A8e(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];h8e(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)dRe(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var m8e=/<\w+:workbook/;function p8e(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},o=0;if(e.replace(Ml,function(c,u){var d=Wr(c);switch(s0(d[0])){case"<?xml":break;case"<workbook":c.match(m8e)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":E7.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=es(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=Pa(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Kn(Pa(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Pa(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),es(d.hidden||"0")&&(s.Hidden=!0),o=u+c.length;break;case"</definedName>":s.Ref=Kn(Pa(e.slice(o,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),tv.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return dce(r),r}function hce(e){var t=[yi];t[t.length]=Yt("workbook",null,{xmlns:tv[0],"xmlns:r":Vi.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(E7.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Yt("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var o={name:_a(e.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=Yt("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=Yt("definedName",_a(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function g8e(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=kF(e),r.name=Ol(e),r}function x8e(e,t){return t||(t=_t(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),u7(e.strRelID,t),po(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function v8e(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?Ol(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function b8e(e,t){t||(t=_t(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),ale(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function y8e(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function w8e(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=JBe(e),o=sRe(e,0,r),l=c7(e);e.l=n;var c={Name:s,Ptg:o};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function N8e(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var s=[],o=[[]];return o.SheetNames=[],o.XTI=[],ZN[16]={n:"BrtFRTArchID$",f:y8e},UA(e,function(c,u,d){switch(d){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=bl(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([d,c]):o[0]=[d,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),dce(r),r.Names=s,r.supbooks=o,r}function C8e(e,t){$t(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};$t(e,156,x8e(a))}$t(e,144)}function E8e(e,t){t||(t=_t(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return po("SheetJS",t),po(Q5.version,t),po(Q5.version,t),po("7262",t),t.length>t.l?t.slice(0,t.l):t}function j8e(e,t){t||(t=_t(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function k8e(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||($t(e,135),$t(e,158,j8e(a)),$t(e,136))}}function S8e(e,t){var r=Hc();return $t(r,131),$t(r,128,E8e()),$t(r,153,b8e(e.Workbook&&e.Workbook.WBProps||null)),k8e(r,e),C8e(r,e),$t(r,132),r.end()}function _8e(e,t,r){return t.slice(-4)===".bin"?N8e(e,r):p8e(e,r)}function T8e(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?zLe(e,n,r,a,s,o,l):wRe(e,n,r,a,s,o,l)}function B8e(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?o8e(e,n,r,a,s):s8e(e,n,r,a,s)}function I8e(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?OPe():PPe()}function D8e(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?IPe():DPe()}function O8e(e,t,r,n){return t.slice(-4)===".bin"?_Oe(e,r,n):gOe(e,r,n)}function P8e(e,t,r){return qle(e,r)}function F8e(e,t,r){return t.slice(-4)===".bin"?FDe(e,r):DDe(e,r)}function R8e(e,t,r){return t.slice(-4)===".bin"?kPe(e,r):xPe(e,r)}function L8e(e,t,r){return t.slice(-4)===".bin"?mPe(e):hPe(e)}function M8e(e,t,r,n){return r.slice(-4)===".bin"?pPe(e,t,r,n):void 0}function U8e(e,t,r){return t.slice(-4)===".bin"?uPe(e,t,r):fPe(e,t,r)}function H8e(e,t,r){return(t.slice(-4)===".bin"?S8e:hce)(e)}function Q8e(e,t,r,n,a){return(t.slice(-4)===".bin"?r8e:lce)(e,r,n,a)}function V8e(e,t,r){return(t.slice(-4)===".bin"?MOe:zle)(e,r)}function $8e(e,t,r){return(t.slice(-4)===".bin"?MDe:Rle)(e,r)}function z8e(e,t,r){return(t.slice(-4)===".bin"?SPe:Xle)(e)}function G8e(e){return(e.slice(-4)===".bin"?dPe:Kle)()}var Ace=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,mce=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function cf(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match(Ace),s,o,l,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(mce),(o=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?l="xmlns"+s[1].slice(6):l=s[1].slice(o+1),n[l]=s[2].slice(1,s[2].length-1));return n}function q8e(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(Ace),a,s,o,l;if(n)for(l=0;l!=n.length;++l)a=n[l].match(mce),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(s+1),r[o]=a[2].slice(1,a[2].length-1));return r}var tN;function K8e(e,t){var r=tN[e]||Kn(e);return r==="General"?Bx(t):Bd(r,t)}function W8e(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=es(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=rs(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Kn(t)]=a}function X8e(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||HA[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=$N(e.v):e.w=Bx(e.v):e.w=K8e(t||"General",e.v)}catch(s){if(r.WTF)throw s}try{var n=tN[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&Ny(n)){var a=Kg(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function Y8e(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=cOe[n.Pattern]||n.Pattern)}e[t.ID]=t}function J8e(e,t,r,n,a,s,o,l,c,u){var d="General",f=n.StyleID,A={};u=u||{};var m=[],g=0;for(f===void 0&&l&&(f=l.StyleID),f===void 0&&o&&(f=o.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&m.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=es(e);break;case"String":n.t="s",n.r=aq(Kn(e)),n.v=e.indexOf("<")>-1?Kn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(rs(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Kn(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=cle[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=aq(t||e));break}if(X8e(n,d,u),u.cellFormula!==!1)if(n.Formula){var x=Kn(n.Formula);x.charCodeAt(0)==61&&(x=x.slice(1)),n.f=i1(x,a),delete n.Formula,n.ArrayRange=="RC"?n.F=i1("RC:RC",a):n.ArrayRange&&(n.F=i1(n.ArrayRange,a),c.push([Xn(n.F),n.F]))}else for(g=0;g<c.length;++g)a.r>=c[g][0].s.r&&a.r<=c[g][0].e.r&&a.c>=c[g][0].s.c&&a.c<=c[g][0].e.c&&(n.F=c[g][1]);u.cellStyles&&(m.forEach(function(v){!A.patternType&&v.patternType&&(A.patternType=v.patternType)}),n.s=A),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function Z8e(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function c6(e,t){var r=t||{};Cy();var n=v2(n7(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Pa(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var o=ns(r);return o.type="string",F1.to_workbook(n,o)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ae){a.indexOf("<"+Ae)>=0&&(s=!0)}),s)return LMe(n,r);tN={"General Number":"General","General Date":Qr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Qr[15],"Short Date":Qr[14],"Long Time":Qr[19],"Medium Time":Qr[18],"Short Time":Qr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Qr[2],Standard:Qr[4],Percent:Qr[10],Scientific:Qr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,d={},f=[],A=r.dense?[]:{},m="",g={},x={},v=cf('<Data ss:Type="String">'),y=0,N=0,C=0,_={s:{r:2e6,c:2e6},e:{r:0,c:0}},j={},I={},T="",k=0,B=[],M={},P={},S=0,L=[],H=[],q={},Q=[],z,K=!1,Z=[],U=[],Y={},R=0,D=0,W={Sheets:[],WBProps:{date1904:!1}},J={};qN.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var le="";l=qN.exec(n);)switch(l[3]=(le=l[3]).toLowerCase()){case"data":if(le=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?J8e(n.slice(y,l.index),T,v,c[c.length-1][0]=="comment"?q:g,{c:N,r:C},j,Q[N],x,Z,r):(T="",v=cf(l[0]),y=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(H.length>0&&(g.c=H),(!r.sheetRows||r.sheetRows>C)&&g.v!==void 0&&(r.dense?(A[C]||(A[C]=[]),A[C][N]=g):A[js(N)+xi(C)]=g),g.HRef&&(g.l={Target:Kn(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(R=N+(parseInt(g.MergeAcross,10)|0),D=C+(parseInt(g.MergeDown,10)|0),B.push({s:{c:N,r:C},e:{c:R,r:D}})),!r.sheetStubs)g.MergeAcross?N=R+1:++N;else if(g.MergeAcross||g.MergeDown){for(var ie=N;ie<=R;++ie)for(var re=C;re<=D;++re)(ie>N||re>C)&&(r.dense?(A[re]||(A[re]=[]),A[re][ie]={t:"z"}):A[js(ie)+xi(re)]={t:"z"});N=R+1}else++N;else g=q8e(l[0]),g.Index&&(N=+g.Index-1),N<_.s.c&&(_.s.c=N),N>_.e.c&&(_.e.c=N),l[0].slice(-2)==="/>"&&++N,H=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(C<_.s.r&&(_.s.r=C),C>_.e.r&&(_.e.r=C),l[0].slice(-2)==="/>"&&(x=cf(l[0]),x.Index&&(C=+x.Index-1)),N=0,++C):(x=cf(l[0]),x.Index&&(C=+x.Index-1),Y={},(x.AutoFitHeight=="0"||x.Height)&&(Y.hpx=parseInt(x.Height,10),Y.hpt=JN(Y.hpx),U[C]=Y),x.Hidden=="1"&&(Y.hidden=!0,U[C]=Y));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));f.push(m),_.s.r<=_.e.r&&_.s.c<=_.e.c&&(A["!ref"]=un(_),r.sheetRows&&r.sheetRows<=_.e.r&&(A["!fullref"]=A["!ref"],_.e.r=r.sheetRows-1,A["!ref"]=un(_))),B.length&&(A["!merges"]=B),Q.length>0&&(A["!cols"]=Q),U.length>0&&(A["!rows"]=U),d[m]=A}else _={s:{r:2e6,c:2e6},e:{r:0,c:0}},C=N=0,c.push([l[3],!1]),u=cf(l[0]),m=Kn(u.Name),A=r.dense?[]:{},B=[],Z=[],U=[],J={name:m,Hidden:0},W.Sheets.push(J);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),Q=[],K=!1}break;case"style":l[1]==="/"?Y8e(j,I,r):I=cf(l[0]);break;case"numberformat":I.nf=Kn(cf(l[0]).Format||"General"),tN[I.nf]&&(I.nf=tN[I.nf]);for(var ce=0;ce!=392&&Qr[ce]!=I.nf;++ce);if(ce==392){for(ce=57;ce!=392;++ce)if(Qr[ce]==null){iA(I.nf,ce);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(z=cf(l[0]),z.Hidden&&(z.hidden=!0,delete z.Hidden),z.Width&&(z.wpx=parseInt(z.Width,10)),!K&&z.wpx>10){K=!0,Nl=Vle;for(var oe=0;oe<Q.length;++oe)Q[oe]&&kp(Q[oe])}K&&kp(z),Q[z.Index-1||Q.length]=z;for(var be=0;be<+z.Span;++be)Q[Q.length]=ns(z);break;case"namedrange":if(l[1]==="/")break;W.Names||(W.Names=[]);var X=Wr(l[0]),je={Name:X.Name,Ref:i1(X.RefersTo.slice(1),{r:0,c:0})};W.Sheets.length>0&&(je.Sheet=W.Sheets.length-1),W.Names.push(je);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?T+=n.slice(k,l.index):k=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;I.Interior=cf(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?NIe(M,le,n.slice(S,l.index)):S=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));Z8e(q),H.push(q)}else c.push([l[3],!1]),u=cf(l[0]),q={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var De=cf(l[0]);A["!autofilter"]={ref:i1(De.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return Gq(n,r);var ke=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ke=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ke=!1}break;case"excelworkbook":switch(l[3]){case"date1904":W.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ke=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:ke=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(S,l.index)){case"SheetHidden":J.Hidden=1;break;case"SheetVeryHidden":J.Hidden=2;break}else S=l.index+l[0].length;break;case"header":A["!margins"]||hx(A["!margins"]={},"xlml"),isNaN(+Wr(l[0]).Margin)||(A["!margins"].header=+Wr(l[0]).Margin);break;case"footer":A["!margins"]||hx(A["!margins"]={},"xlml"),isNaN(+Wr(l[0]).Margin)||(A["!margins"].footer=+Wr(l[0]).Margin);break;case"pagemargins":var ue=Wr(l[0]);A["!margins"]||hx(A["!margins"]={},"xlml"),isNaN(+ue.Top)||(A["!margins"].top=+ue.Top),isNaN(+ue.Left)||(A["!margins"].left=+ue.Left),isNaN(+ue.Right)||(A["!margins"].right=+ue.Right),isNaN(+ue.Bottom)||(A["!margins"].bottom=+ue.Bottom);break;case"displayrighttoleft":W.Views||(W.Views=[]),W.Views[0]||(W.Views[0]={}),W.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":A["!outline"]||(A["!outline"]={}),A["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":A["!outline"]||(A["!outline"]={}),A["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ke=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ke=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ke=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ke=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ke=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ke=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ke=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ke=!1}break;case"smarttags":break;default:ke=!1;break}if(ke||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?W8e(P,le,L,n.slice(S,l.index)):(L=l,S=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var we={};return!r.bookSheets&&!r.bookProps&&(we.Sheets=d),we.SheetNames=f,we.Workbook=W,we.SSF=ns(Qr),we.Props=M,we.Custprops=P,we}function OF(e,t){switch(k7(t=t||{}),t.type||"base64"){case"base64":return c6(Iu(e),t);case"binary":case"buffer":case"file":return c6(e,t);case"array":return c6($p(e),t)}}function eMe(e,t){var r=[];return e.Props&&r.push(CIe(e.Props,t)),e.Custprops&&r.push(EIe(e.Props,e.Custprops)),r.join("")}function tMe(){return""}function rMe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var s=[];s.push(Yt("NumberFormat",null,{"ss:Format":_a(Qr[n.numFmtId])}));var o={"ss:ID":"s"+(21+a)};r.push(Yt("Style",s.join(""),o))}),Yt("Styles",r.join(""))}function pce(e){return Yt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+y7(e.Ref,{r:0,c:0})})}function nMe(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(pce(a)))}return Yt("Names",r.join(""))}function aMe(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],o=0;o<a.length;++o){var l=a[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||s.push(pce(l)))}return s.join("")}function sMe(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(Yt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(Yt("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(Yt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Yt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(Qo("ProtectContents","True")),e["!protect"].objects&&a.push(Qo("ProtectObjects","True")),e["!protect"].scenarios&&a.push(Qo("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(Qo("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(Qo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&a.push("<"+o[1]+"/>")})),a.length==0?"":Yt("WorksheetOptions",a.join(""),{xmlns:xu.x})}function iMe(e){return e.map(function(t){var r=kBe(t.t||""),n=Yt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Yt("Comment",n,{"ss:Author":t.a})}).join("")}function oMe(e,t,r,n,a,s,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+_a(y7(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=ks(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=_a(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=_a(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=o.c||u[d].s.r!=o.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",A="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",A=String(e.v);break;case"b":f="Boolean",A=e.v?"1":"0";break;case"e":f="Error",A=HA[e.v];break;case"d":f="DateTime",A=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Qr[14]);break;case"s":f="String",A=jBe(e.v||"");break}var m=Gp(n.cellXfs,e,n);l["ss:StyleID"]="s"+(21+m),l["ss:Index"]=o.c+1;var g=e.v!=null?A:"",x=e.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(e.c||[]).length>0&&(x+=iMe(e.c)),Yt("Cell",x,l)}function lMe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=R1(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function cMe(e,t,r,n){if(!e["!ref"])return"";var a=Xn(e["!ref"]),s=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(v,y){kp(v);var N=!!v.width,C=T3(y,v),_={"ss:Index":y+1};N&&(_["ss:Width"]=XN(C.width)),v.hidden&&(_["ss:Hidden"]="1"),l.push(Yt("Column",null,_))});for(var c=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[lMe(u,(e["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var A=!1;for(o=0;o!=s.length;++o)if(!(s[o].s.c>f)&&!(s[o].s.r>u)&&!(s[o].e.c<f)&&!(s[o].e.r<u)){(s[o].s.c!=f||s[o].s.r!=u)&&(A=!0);break}if(!A){var m={r:u,c:f},g=zr(m),x=c?(e[u]||[])[f]:e[g];d.push(oMe(x,g,e,t,r,n,m))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function uMe(e,t,r){var n=[],a=r.SheetNames[e],s=r.Sheets[a],o=s?aMe(s,t,e,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=s?cMe(s,t,e,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(sMe(s,t,e,r)),n.join("")}function dMe(e,t){t||(t={}),e.SSF||(e.SSF=ns(Qr)),e.SSF&&(Cy(),N3(e.SSF),t.revssf=E3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Gp(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(eMe(e,t)),r.push(tMe()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Yt("Worksheet",uMe(n,t,e),{"ss:Name":_a(e.SheetNames[n])}));return r[2]=rMe(e,t),r[3]=nMe(e),yi+Yt("Workbook",r.join(""),{xmlns:xu.ss,"xmlns:o":xu.o,"xmlns:x":xu.x,"xmlns:ss":xu.ss,"xmlns:dt":xu.dt,"xmlns:html":xu.html})}function fMe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=nIe(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=aIe(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var hMe=[60,1084,2066,2165,2175];function AMe(e,t,r,n,a){var s=n,o=[],l=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(l)}o.push(l),r.l+=s;for(var c=J0(r,r.l),u=PF[c],d=0;u!=null&&hMe.indexOf(c)>-1;)s=J0(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),l=r.slice(d,r.l+4+s),o.push(l),r.l+=4+s,u=PF[c=J0(r,r.l)];var f=mo(o);Ho(f,0);var A=0;f.lens=[];for(var m=0;m<o.length;++m)f.lens.push(A),A+=o[m].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,a)}function vh(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Qr[n])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||HA[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=$N(e.v):e.w=Bx(e.v):e.w=Bd(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&n&&e.t=="n"&&Ny(Qr[n]||String(n))){var a=Kg(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function ok(e,t,r){return{v:e,ixfe:t,t:r}}function mMe(e,t){var r={opts:{}},n={},a=t.dense?[]:{},s={},o={},l=null,c=[],u="",d={},f,A="",m,g,x,v,y={},N=[],C,_,j=[],I=[],T={Sheets:[],WBProps:{date1904:!1},Views:[{}]},k={},B=function(Xe){return Xe<8?ux[Xe]:Xe<64&&I[Xe-8]||ux[Xe]},M=function(Xe,Ie,Be){var et=Ie.XF.data;if(!(!et||!et.patternType||!Be||!Be.cellStyles)){Ie.s={},Ie.s.patternType=et.patternType;var bt;(bt=WN(B(et.icvFore)))&&(Ie.s.fgColor={rgb:bt}),(bt=WN(B(et.icvBack)))&&(Ie.s.bgColor={rgb:bt})}},P=function(Xe,Ie,Be){if(!(Y>1)&&!(Be.sheetRows&&Xe.r>=Be.sheetRows)){if(Be.cellStyles&&Ie.XF&&Ie.XF.data&&M(Xe,Ie,Be),delete Ie.ixfe,delete Ie.XF,f=Xe,A=zr(Xe),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),Xe.r<o.s.r&&(o.s.r=Xe.r),Xe.c<o.s.c&&(o.s.c=Xe.c),Xe.r+1>o.e.r&&(o.e.r=Xe.r+1),Xe.c+1>o.e.c&&(o.e.c=Xe.c+1),Be.cellFormula&&Ie.f){for(var et=0;et<N.length;++et)if(!(N[et][0].s.c>Xe.c||N[et][0].s.r>Xe.r)&&!(N[et][0].e.c<Xe.c||N[et][0].e.r<Xe.r)){Ie.F=un(N[et][0]),(N[et][0].s.c!=Xe.c||N[et][0].s.r!=Xe.r)&&delete Ie.f,Ie.f&&(Ie.f=""+bl(N[et][1],o,Xe,Z,S));break}}Be.dense?(a[Xe.r]||(a[Xe.r]=[]),a[Xe.r][Xe.c]=Ie):a[A]=Ie}},S={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:N,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(S.password=t.password);var L,H=[],q=[],Q=[],z=[],K=!1,Z=[];Z.SheetNames=S.snames,Z.sharedf=S.sharedf,Z.arrayf=S.arrayf,Z.names=[],Z.XTI=[];var U=0,Y=0,R=0,D=[],W=[],J;S.codepage=1200,yf(1200);for(var le=!1;e.l<e.length-1;){var ie=e.l,re=e.read_shift(2);if(re===0&&U===10)break;var ce=e.l===e.length?0:e.read_shift(2),oe=PF[re];if(oe&&oe.f){if(t.bookSheets&&U===133&&re!==133)break;if(U=re,oe.r===2||oe.r==12){var be=e.read_shift(2);if(ce-=2,!S.enc&&be!==re&&((be&255)<<8|be>>8)!==re)throw new Error("rt mismatch: "+be+"!="+re);oe.r==12&&(e.l+=10,ce-=10)}var X={};if(re===10?X=oe.f(e,ce,S):X=AMe(re,oe,e,ce,S),Y==0&&[9,521,1033,2057].indexOf(U)===-1)continue;switch(re){case 34:r.opts.Date1904=T.WBProps.date1904=X;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(S.enc||(e.l=0),S.enc=X,!t.password)throw new Error("File is password-protected");if(X.valid==null)throw new Error("Encryption scheme unsupported");if(!X.valid)throw new Error("Password is incorrect");break;case 92:S.lastuser=X;break;case 66:var je=Number(X);switch(je){case 21010:je=1200;break;case 32768:je=1e4;break;case 32769:je=1252;break}yf(S.codepage=je),le=!0;break;case 317:S.rrtabid=X;break;case 25:S.winlocked=X;break;case 439:r.opts.RefreshAll=X;break;case 12:r.opts.CalcCount=X;break;case 16:r.opts.CalcDelta=X;break;case 17:r.opts.CalcIter=X;break;case 13:r.opts.CalcMode=X;break;case 14:r.opts.CalcPrecision=X;break;case 95:r.opts.CalcSaveRecalc=X;break;case 15:S.CalcRefMode=X;break;case 2211:r.opts.FullCalc=X;break;case 129:X.fDialog&&(a["!type"]="dialog"),X.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),X.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:j.push(X);break;case 430:Z.push([X]),Z[Z.length-1].XTI=[];break;case 35:case 547:Z[Z.length-1].push(X);break;case 24:case 536:J={Name:X.Name,Ref:bl(X.rgce,o,null,Z,S)},X.itab>0&&(J.Sheet=X.itab-1),Z.names.push(J),Z[0]||(Z[0]=[],Z[0].XTI=[]),Z[Z.length-1].push(X),X.Name=="_xlnm._FilterDatabase"&&X.itab>0&&X.rgce&&X.rgce[0]&&X.rgce[0][0]&&X.rgce[0][0][0]=="PtgArea3d"&&(W[X.itab-1]={ref:un(X.rgce[0][0][1][2])});break;case 22:S.ExternCount=X;break;case 23:Z.length==0&&(Z[0]=[],Z[0].XTI=[]),Z[Z.length-1].XTI=Z[Z.length-1].XTI.concat(X),Z.XTI=Z.XTI.concat(X);break;case 2196:if(S.biff<8)break;J!=null&&(J.Comment=X[1]);break;case 18:a["!protect"]=X;break;case 19:X!==0&&S.WTF&&console.error("Password verifier: "+X);break;case 133:s[X.pos]=X,S.snames.push(X.name);break;case 10:{if(--Y)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,a["!ref"]=un(o),t.sheetRows&&t.sheetRows<=o.e.r){var De=o.e.r;o.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=un(o),o.e.r=De}o.e.r++,o.e.c++}H.length>0&&(a["!merges"]=H),q.length>0&&(a["!objects"]=q),Q.length>0&&(a["!cols"]=Q),z.length>0&&(a["!rows"]=z),T.Sheets.push(k)}u===""?d=a:n[u]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(S.biff===8&&(S.biff={9:2,521:3,1033:4}[re]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[X.BIFFVer]||8),S.biffguess=X.BIFFVer==0,X.BIFFVer==0&&X.dt==4096&&(S.biff=5,le=!0,yf(S.codepage=28591)),S.biff==8&&X.BIFFVer==0&&X.dt==16&&(S.biff=2),Y++)break;if(a=t.dense?[]:{},S.biff<8&&!le&&(le=!0,yf(S.codepage=t.codepage||1252)),S.biff<5||X.BIFFVer==0&&X.dt==4096){u===""&&(u="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var ke={pos:e.l-ce,name:u};s[ke.pos]=ke,S.snames.push(u)}else u=(s[ie]||{name:""}).name;X.dt==32&&(a["!type"]="chart"),X.dt==64&&(a["!type"]="macro"),H=[],q=[],S.arrayf=N=[],Q=[],z=[],K=!1,k={Hidden:(s[ie]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[X.r]||[])[X.c]:a[zr({c:X.c,r:X.r})])&&++X.c,C={ixfe:X.ixfe,XF:j[X.ixfe]||{},v:X.val,t:"n"},R>0&&(C.z=D[C.ixfe>>8&63]),vh(C,t,r.opts.Date1904),P({c:X.c,r:X.r},C,t);break;case 5:case 517:C={ixfe:X.ixfe,XF:j[X.ixfe],v:X.val,t:X.t},R>0&&(C.z=D[C.ixfe>>8&63]),vh(C,t,r.opts.Date1904),P({c:X.c,r:X.r},C,t);break;case 638:C={ixfe:X.ixfe,XF:j[X.ixfe],v:X.rknum,t:"n"},R>0&&(C.z=D[C.ixfe>>8&63]),vh(C,t,r.opts.Date1904),P({c:X.c,r:X.r},C,t);break;case 189:for(var ue=X.c;ue<=X.C;++ue){var we=X.rkrec[ue-X.c][0];C={ixfe:we,XF:j[we],v:X.rkrec[ue-X.c][1],t:"n"},R>0&&(C.z=D[C.ixfe>>8&63]),vh(C,t,r.opts.Date1904),P({c:ue,r:X.r},C,t)}break;case 6:case 518:case 1030:{if(X.val=="String"){l=X;break}if(C=ok(X.val,X.cell.ixfe,X.tt),C.XF=j[C.ixfe],t.cellFormula){var Ae=X.formula;if(Ae&&Ae[0]&&Ae[0][0]&&Ae[0][0][0]=="PtgExp"){var de=Ae[0][0][1][0],ae=Ae[0][0][1][1],fe=zr({r:de,c:ae});y[fe]?C.f=""+bl(X.formula,o,X.cell,Z,S):C.F=((t.dense?(a[de]||[])[ae]:a[fe])||{}).F}else C.f=""+bl(X.formula,o,X.cell,Z,S)}R>0&&(C.z=D[C.ixfe>>8&63]),vh(C,t,r.opts.Date1904),P(X.cell,C,t),l=X}break;case 7:case 519:if(l)l.val=X,C=ok(X,l.cell.ixfe,"s"),C.XF=j[C.ixfe],t.cellFormula&&(C.f=""+bl(l.formula,o,l.cell,Z,S)),R>0&&(C.z=D[C.ixfe>>8&63]),vh(C,t,r.opts.Date1904),P(l.cell,C,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{N.push(X);var ge=zr(X[0].s);if(m=t.dense?(a[X[0].s.r]||[])[X[0].s.c]:a[ge],t.cellFormula&&m){if(!l||!ge||!m)break;m.f=""+bl(X[1],o,X[0],Z,S),m.F=un(X[0])}}break;case 1212:{if(!t.cellFormula)break;if(A){if(!l)break;y[zr(l.cell)]=X[0],m=t.dense?(a[l.cell.r]||[])[l.cell.c]:a[zr(l.cell)],(m||{}).f=""+bl(X[0],o,f,Z,S)}}break;case 253:C=ok(c[X.isst].t,X.ixfe,"s"),c[X.isst].h&&(C.h=c[X.isst].h),C.XF=j[C.ixfe],R>0&&(C.z=D[C.ixfe>>8&63]),vh(C,t,r.opts.Date1904),P({c:X.c,r:X.r},C,t);break;case 513:t.sheetStubs&&(C={ixfe:X.ixfe,XF:j[X.ixfe],t:"z"},R>0&&(C.z=D[C.ixfe>>8&63]),vh(C,t,r.opts.Date1904),P({c:X.c,r:X.r},C,t));break;case 190:if(t.sheetStubs)for(var xe=X.c;xe<=X.C;++xe){var Ue=X.ixfe[xe-X.c];C={ixfe:Ue,XF:j[Ue],t:"z"},R>0&&(C.z=D[C.ixfe>>8&63]),vh(C,t,r.opts.Date1904),P({c:xe,r:X.r},C,t)}break;case 214:case 516:case 4:C=ok(X.val,X.ixfe,"s"),C.XF=j[C.ixfe],R>0&&(C.z=D[C.ixfe>>8&63]),vh(C,t,r.opts.Date1904),P({c:X.c,r:X.r},C,t);break;case 0:case 512:Y===1&&(o=X);break;case 252:c=X;break;case 1054:if(S.biff==4){D[R++]=X[1];for(var qe=0;qe<R+163&&Qr[qe]!=X[1];++qe);qe>=163&&iA(X[1],R+163)}else iA(X[1],X[0]);break;case 30:{D[R++]=X;for(var Ze=0;Ze<R+163&&Qr[Ze]!=X;++Ze);Ze>=163&&iA(X,R+163)}break;case 229:H=H.concat(X);break;case 93:q[X.cmo[0]]=S.lastobj=X;break;case 438:S.lastobj.TxO=X;break;case 127:S.lastobj.ImData=X;break;case 440:for(v=X[0].s.r;v<=X[0].e.r;++v)for(x=X[0].s.c;x<=X[0].e.c;++x)m=t.dense?(a[v]||[])[x]:a[zr({c:x,r:v})],m&&(m.l=X[1]);break;case 2048:for(v=X[0].s.r;v<=X[0].e.r;++v)for(x=X[0].s.c;x<=X[0].e.c;++x)m=t.dense?(a[v]||[])[x]:a[zr({c:x,r:v})],m&&m.l&&(m.l.Tooltip=X[1]);break;case 28:{if(S.biff<=5&&S.biff>=2)break;m=t.dense?(a[X[0].r]||[])[X[0].c]:a[zr(X[0])];var We=q[X[2]];m||(t.dense?(a[X[0].r]||(a[X[0].r]=[]),m=a[X[0].r][X[0].c]={t:"z"}):m=a[zr(X[0])]={t:"z"},o.e.r=Math.max(o.e.r,X[0].r),o.s.r=Math.min(o.s.r,X[0].r),o.e.c=Math.max(o.e.c,X[0].c),o.s.c=Math.min(o.s.c,X[0].c)),m.c||(m.c=[]),g={a:X[1],t:We.TxO.t},m.c.push(g)}break;case 2173:rPe(j[X.ixfe],X.ext);break;case 125:{if(!S.cellStyles)break;for(;X.e>=X.s;)Q[X.e--]={width:X.w/256,level:X.level||0,hidden:!!(X.flags&1)},K||(K=!0,x7(X.w/256)),kp(Q[X.e+1])}break;case 520:{var me={};X.level!=null&&(z[X.r]=me,me.level=X.level),X.hidden&&(z[X.r]=me,me.hidden=!0),X.hpt&&(z[X.r]=me,me.hpt=X.hpt,me.hpx=R1(X.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||hx(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[re]]=X;break;case 161:a["!margins"]||hx(a["!margins"]={}),a["!margins"].header=X.header,a["!margins"].footer=X.footer;break;case 574:X.RTL&&(T.Views[0].RTL=!0);break;case 146:I=X;break;case 2198:L=X;break;case 140:_=X;break;case 442:u?k.CodeName=X||k.name:T.WBProps.CodeName=X||"ThisWorkbook";break}}else oe||console.error("Missing Info for XLS Record 0x"+re.toString(16)),e.l+=ce}return r.SheetNames=Ws(s).sort(function(Ve,Xe){return Number(Ve)-Number(Xe)}).map(function(Ve){return s[Ve].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&W.forEach(function(Ve,Xe){r.Sheets[r.SheetNames[Xe]]["!autofilter"]=Ve}),r.Strings=c,r.SSF=ns(Qr),S.enc&&(r.Encryption=S.enc),L&&(r.Themes=L),r.Metadata={},_!==void 0&&(r.Metadata.Country=_),Z.names.length>0&&(T.Names=Z.names),r.Workbook=T,r}var rN={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function pMe(e,t,r){var n=Br.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=wq(n,SF,rN.DSI);for(var s in a)t[s]=a[s]}catch(u){if(r.WTF)throw u}var o=Br.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=wq(o,_F,rN.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(mle(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function gMe(e,t){var r=[],n=[],a=[],s=0,o,l=JG(SF,"n"),c=JG(_F,"n");if(e.Props)for(o=Ws(e.Props),s=0;s<o.length;++s)(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],e.Props[o[s]]]);if(e.Custprops)for(o=Ws(e.Custprops),s=0;s<o.length;++s)Object.prototype.hasOwnProperty.call(e.Props||{},o[s])||(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],e.Custprops[o[s]]]);var u=[];for(s=0;s<a.length;++s)wle.indexOf(a[s][0])>-1||Ale.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&Br.utils.cfb_add(t,"/SummaryInformation",Nq(n,rN.SI,c,_F)),(r.length||u.length)&&Br.utils.cfb_add(t,"/DocumentSummaryInformation",Nq(r,rN.DSI,l,SF,u.length?u:null,rN.UDI))}function gce(e,t){t||(t={}),k7(t),KM(),t.codepage&&qM(t.codepage);var r,n;if(e.FullPaths){if(Br.find(e,"/encryption"))throw new Error("File is password-protected");r=Br.find(e,"!CompObj"),n=Br.find(e,"/Workbook")||Br.find(e,"/Book")}else{switch(t.type){case"base64":e=Nu(Iu(e));break;case"binary":e=Nu(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Ho(e,0),n={content:e}}var a,s;if(r&&fMe(r),t.bookProps&&!t.bookSheets)a={};else{var o=bn?"buffer":"array";if(n&&n.content)a=mMe(n.content,t);else if((s=Br.find(e,"PerfectOffice_MAIN"))&&s.content)a=fx.to_workbook(s.content,(t.type=o,t));else if((s=Br.find(e,"NativeContent_MAIN"))&&s.content)a=fx.to_workbook(s.content,(t.type=o,t));else throw(s=Br.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Br.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=TPe(e))}var l={};return e.FullPaths&&pMe(e,l,t),a.Props=a.Custprops=l,t.bookFiles&&(a.cfb=e),a}function xMe(e,t){var r=t||{},n=Br.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Br.utils.cfb_add(n,a,xce(e,r)),r.biff==8&&(e.Props||e.Custprops)&&gMe(e,n),r.biff==8&&e.vbaraw&&BPe(n,Br.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var ZN={0:{f:QRe},1:{f:XRe},2:{f:mLe},3:{f:aLe},4:{f:eLe},5:{f:fLe},6:{f:bLe},7:{f:lLe},8:{f:kLe},9:{f:jLe},10:{f:CLe},11:{f:ELe},12:{f:JRe},13:{f:gLe},14:{f:iLe},15:{f:rLe},16:{f:cce},17:{f:wLe},18:{f:uLe},19:{f:l7},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:w8e},40:{},42:{},43:{f:bOe},44:{f:xOe},45:{f:NOe},46:{f:EOe},47:{f:COe},48:{},49:{f:zBe},50:{},51:{f:sPe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Dle},62:{f:vLe},63:{f:APe},64:{f:VLe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Rl,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:MLe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:KRe},148:{f:zRe,p:16},151:{f:DLe},152:{},153:{f:v8e},154:{},155:{},156:{f:g8e},157:{},158:{},159:{T:1,f:PDe},160:{T:-1},161:{T:1,f:sv},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:SLe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:nPe},336:{T:-1},337:{f:lPe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:kF},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Ile},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:OLe},427:{f:PLe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:RLe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:qRe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:BLe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:kF},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:EPe},633:{T:1},634:{T:-1},635:{T:1,f:NPe},636:{T:-1},637:{f:WBe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:i8e},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:$Le},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},PF={6:{f:o6},10:{f:km},12:{f:Bi},13:{f:Bi},14:{f:li},15:{f:li},16:{f:jl},17:{f:li},18:{f:li},19:{f:Bi},20:{f:_q},21:{f:_q},23:{f:Ile},24:{f:Bq},25:{f:li},26:{},27:{},28:{f:$6e},29:{},34:{f:li},35:{f:Tq},38:{f:jl},39:{f:jl},40:{f:jl},41:{f:jl},42:{f:li},43:{f:li},47:{f:rOe},49:{f:g6e},51:{f:Bi},60:{},61:{f:f6e},64:{f:li},65:{f:p6e},66:{f:Bi},77:{},80:{},81:{},82:{},85:{f:Bi},89:{},90:{},91:{},92:{f:t6e},93:{f:q6e},94:{},95:{f:li},96:{},97:{},99:{f:li},125:{f:Dle},128:{f:I6e},129:{f:n6e},130:{f:Bi},131:{f:li},132:{f:li},133:{f:a6e},134:{},140:{f:tDe},141:{f:Bi},144:{},146:{f:aDe},151:{},152:{},153:{},154:{},155:{},156:{f:Bi},157:{},158:{},160:{f:dDe},161:{f:oDe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:S6e},190:{f:_6e},193:{f:km},197:{},198:{},199:{},200:{},201:{},202:{f:li},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Bi},220:{},221:{f:li},222:{},224:{f:B6e},225:{f:e6e},226:{f:km},227:{},229:{f:z6e},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:i6e},253:{f:v6e},255:{f:l6e},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Nle},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:li},353:{f:km},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:R6e},431:{f:li},432:{},433:{},434:{},437:{},438:{f:X6e},439:{f:li},440:{f:Y6e},441:{},442:{f:YC},443:{},444:{f:Bi},445:{},446:{},448:{f:km},449:{f:d6e,r:2},450:{f:km},512:{f:jq},513:{f:uDe},515:{f:P6e},516:{f:y6e},517:{f:Sq},519:{f:fDe},520:{f:c6e},523:{},545:{f:Iq},549:{f:Eq},566:{},574:{f:A6e},638:{f:k6e},659:{},1048:{},1054:{f:N6e},1084:{},1212:{f:H6e},2048:{f:Z6e},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:ak},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:km},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:sDe,r:12},2173:{f:tPe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:li,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:U6e,r:12},2197:{},2198:{f:WOe,r:12},2199:{},2200:{},2201:{},2202:{f:Q6e,r:12},2203:{f:km},2204:{},2205:{},2206:{},2207:{},2211:{f:u6e},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Bi},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:lDe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:nDe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:jq},1:{},2:{f:gDe},3:{f:mDe},4:{f:ADe},5:{f:Sq},7:{f:vDe},8:{},9:{f:ak},11:{},22:{f:Bi},30:{f:E6e},31:{},32:{},33:{f:Iq},36:{},37:{f:Eq},50:{f:bDe},62:{},52:{},67:{},68:{f:Bi},69:{},86:{},126:{},127:{f:hDe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:yDe},223:{},234:{},354:{},421:{},518:{f:o6},521:{f:ak},536:{f:Bq},547:{f:Tq},561:{},579:{},1030:{f:o6},1033:{f:ak},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Jt(e,t,r,n){var a=t;if(!isNaN(a)){var s=n||(r||[]).length||0,o=e.next(4);o.write_shift(2,a),o.write_shift(2,s),s>0&&s7(r)&&e.push(r)}}function vMe(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return Jt(e,t,r,a);var s=t;if(!isNaN(s)){for(var o=r.parts||[],l=0,c=0,u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;var d=e.next(4);for(d.write_shift(2,s),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function tE(e,t,r){return e||(e=_t(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function bMe(e,t,r,n){var a=_t(9);return tE(a,e,t),Cle(r,n||"b",a),a}function yMe(e,t,r){var n=_t(8+2*r.length);return tE(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function wMe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?Gi(rs(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?Jt(e,2,xDe(r,n,a)):Jt(e,3,pDe(r,n,a));return;case"b":case"e":Jt(e,5,bMe(r,n,t.v,t.t));return;case"s":case"str":Jt(e,4,yMe(r,n,(t.v||"").slice(0,255)));return}Jt(e,1,tE(null,r,n))}function NMe(e,t,r,n){var a=Array.isArray(t),s=Xn(t["!ref"]||"A1"),o,l="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),o=un(s)}for(var u=s.s.r;u<=s.e.r;++u){l=xi(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=js(d)),o=c[d]+l;var f=a?(t[u]||[])[d]:t[o];f&&wMe(e,f,u,d)}}}function CMe(e,t){for(var r=t||{},n=Hc(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Jt(n,r.biff==4?1033:r.biff==3?521:9,m7(e,16,r)),NMe(n,e.Sheets[e.SheetNames[a]],a,r),Jt(n,10),n.end()}function EMe(e,t,r){Jt(e,49,x6e({sz:12,name:"Arial"},r))}function jMe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Jt(e,1054,C6e(a,t[a],r))})}function kMe(e,t){var r=_t(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Jt(e,2151,r),r=_t(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),_le(Xn(t["!ref"]||"A1"),r),r.write_shift(4,4),Jt(e,2152,r)}function SMe(e,t){for(var r=0;r<16;++r)Jt(e,224,kq({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){Jt(e,224,kq(n,0,t))})}function _Me(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];Jt(e,440,J6e(n)),n[1].Tooltip&&Jt(e,2048,eDe(n))}delete t["!links"]}function TMe(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&Jt(e,125,iDe(T3(a,n),a))})}}function BMe(e,t,r,n,a){var s=16+Gp(a.cellXfs,t,a);if(t.v==null&&!t.bf){Jt(e,513,Px(r,n,s));return}if(t.bf)Jt(e,6,nRe(t,r,n,a,s));else switch(t.t){case"d":case"n":var o=t.t=="d"?Gi(rs(t.v)):t.v;Jt(e,515,F6e(r,n,o,s));break;case"b":case"e":Jt(e,517,O6e(r,n,t.v,s,a,t.t));break;case"s":case"str":if(a.bookSST){var l=N7(a.Strings,t.v,a.revStrings);Jt(e,253,b6e(r,n,l,s))}else Jt(e,516,w6e(r,n,(t.v||"").slice(0,255),s,a));break;default:Jt(e,513,Px(r,n,s))}}function IMe(e,t,r){var n=Hc(),a=r.SheetNames[e],s=r.Sheets[a]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(s),u=t.biff==8,d,f="",A=[],m=Xn(s["!ref"]||"A1"),g=u?65536:16384;if(m.e.c>255||m.e.r>=g){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,g-1)}Jt(n,2057,m7(r,16,t)),Jt(n,13,vd(1)),Jt(n,12,vd(100)),Jt(n,15,Jl(!0)),Jt(n,17,Jl(!1)),Jt(n,16,Dx(.001)),Jt(n,95,Jl(!0)),Jt(n,42,Jl(!1)),Jt(n,43,Jl(!1)),Jt(n,130,vd(1)),Jt(n,128,D6e()),Jt(n,131,Jl(!1)),Jt(n,132,Jl(!1)),u&&TMe(n,s["!cols"]),Jt(n,512,j6e(m,t)),u&&(s["!links"]=[]);for(var x=m.s.r;x<=m.e.r;++x){f=xi(x);for(var v=m.s.c;v<=m.e.c;++v){x===m.s.r&&(A[v]=js(v)),d=A[v]+f;var y=c?(s[x]||[])[v]:s[d];y&&(BMe(n,y,x,v,t),u&&y.l&&s["!links"].push([d,y.l]))}}var N=l.CodeName||l.name||a;return u&&Jt(n,574,m6e((o.Views||[])[0])),u&&(s["!merges"]||[]).length&&Jt(n,229,G6e(s["!merges"])),u&&_Me(n,s),Jt(n,442,Ele(N)),u&&kMe(n,s),Jt(n,10),n.end()}function DMe(e,t,r){var n=Hc(),a=(e||{}).Workbook||{},s=a.Sheets||[],o=a.WBProps||{},l=r.biff==8,c=r.biff==5;if(Jt(n,2057,m7(e,5,r)),r.bookType=="xla"&&Jt(n,135),Jt(n,225,l?vd(1200):null),Jt(n,193,OIe(2)),c&&Jt(n,191),c&&Jt(n,192),Jt(n,226),Jt(n,92,r6e("SheetJS",r)),Jt(n,66,vd(l?1200:1252)),l&&Jt(n,353,vd(0)),l&&Jt(n,448),Jt(n,317,cDe(e.SheetNames.length)),l&&e.vbaraw&&Jt(n,211),l&&e.vbaraw){var u=o.CodeName||"ThisWorkbook";Jt(n,442,Ele(u))}Jt(n,156,vd(17)),Jt(n,25,Jl(!1)),Jt(n,18,Jl(!1)),Jt(n,19,vd(0)),l&&Jt(n,431,Jl(!1)),l&&Jt(n,444,vd(0)),Jt(n,61,h6e()),Jt(n,64,Jl(!1)),Jt(n,141,vd(0)),Jt(n,34,Jl(d8e(e)=="true")),Jt(n,14,Jl(!0)),l&&Jt(n,439,Jl(!1)),Jt(n,218,vd(0)),EMe(n,e,r),jMe(n,e.SSF,r),SMe(n,r),l&&Jt(n,352,Jl(!1));var d=n.end(),f=Hc();l&&Jt(f,140,rDe()),l&&r.Strings&&vMe(f,252,o6e(r.Strings)),Jt(f,10);var A=f.end(),m=Hc(),g=0,x=0;for(x=0;x<e.SheetNames.length;++x)g+=(l?12:11)+(l?2:1)*e.SheetNames[x].length;var v=d.length+g+A.length;for(x=0;x<e.SheetNames.length;++x){var y=s[x]||{};Jt(m,133,s6e({pos:v,hs:y.Hidden||0,dt:0,name:e.SheetNames[x]},r)),v+=t[x].length}var N=m.end();if(g!=N.length)throw new Error("BS8 "+g+" != "+N.length);var C=[];return d.length&&C.push(d),N.length&&C.push(N),A.length&&C.push(A),mo(C)}function OMe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=ns(Qr)),e&&e.SSF&&(Cy(),N3(e.SSF),r.revssf=E3(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,S7(r),r.cellXfs=[],Gp(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=IMe(a,r,e);return n.unshift(DMe(e,n,r)),mo(n)}function xce(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=Vc(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=t||{};switch(s.biff||2){case 8:case 5:return OMe(e,t);case 4:case 3:case 2:return CMe(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function Qq(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),o=a.index,l=s&&s.index||e.length,c=xBe(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,A=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(o=0;o<c.length;++o){var x=c[o].trim(),v=x.slice(0,3).toLowerCase();if(v=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(v!="<td"&&v!="<th")){var y=x.split(/<\/t[dh]>/i);for(l=0;l<y.length;++l){var N=y[l].trim();if(N.match(/<t[dh]/i)){for(var C=N,_=0;C.charAt(0)=="<"&&(_=C.indexOf(">"))>-1;)C=C.slice(_+1);for(var j=0;j<g.length;++j){var I=g[j];I.s.c==d&&I.s.r<u&&u<=I.e.r&&(d=I.e.c+1,j=-1)}var T=Wr(N.slice(0,N.indexOf(">")));A=T.colspan?+T.colspan:1,((f=+T.rowspan)>1||A>1)&&g.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+A-1}});var k=T.t||T["data-t"]||"";if(!C.length){d+=A;continue}if(C=Qoe(C),m.s.r>u&&(m.s.r=u),m.e.r<u&&(m.e.r=u),m.s.c>d&&(m.s.c=d),m.e.c<d&&(m.e.c=d),!C.length){d+=A;continue}var B={t:"s",v:C};r.raw||!C.trim().length||k=="s"||(C==="TRUE"?B={t:"b",v:!0}:C==="FALSE"?B={t:"b",v:!1}:isNaN(Sf(C))?isNaN(P1(C).getDate())||(B={t:"d",v:rs(C)},r.cellDates||(B={t:"n",v:Gi(B.v)}),B.z=r.dateNF||Qr[14]):B={t:"n",v:Sf(C)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=B):n[zr({r:u,c:d})]=B,d+=A}}}}return n["!ref"]=un(m),g.length&&(n["!merges"]=g),n}function PMe(e,t,r,n){for(var a=e["!merges"]||[],s=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>o)&&!(a[u].e.r<r||a[u].e.c<o)){if(a[u].s.r<r||a[u].s.c<o){l=-1;break}l=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(l<0)){var d=zr({r,c:o}),f=n.dense?(e[r]||[])[o]:e[d],A=f&&f.v!=null&&(f.h||r7(f.w||(wA(f),f.w)||""))||"",m={};l>1&&(m.rowspan=l),c>1&&(m.colspan=c),n.editable?A='<span contenteditable="true">'+A+"</span>":f&&(m["data-t"]=f&&f.t||"z",f.v!=null&&(m["data-v"]=f.v),f.z!=null&&(m["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(A='<a href="'+f.l.Target+'">'+A+"</a>")),m.id=(n.id||"sjs")+"-"+d,s.push(Yt("td",A,m))}}var g="<tr>";return g+s.join("")+"</tr>"}var FMe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',RMe="</body></html>";function LMe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return zp(Qq(r[0],t),t);var n=B7();return r.forEach(function(a,s){I7(n,Qq(a,t),"Sheet"+(s+1))}),n}function MMe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function vce(e,t){var r=t||{},n=r.header!=null?r.header:FMe,a=r.footer!=null?r.footer:RMe,s=[n],o=Vc(e["!ref"]);r.dense=Array.isArray(e),s.push(MMe(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)s.push(PMe(e,o,l,r));return s.push("</table>"+a),s.join("")}function bce(e,t,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var o=typeof n.origin=="string"?ks(n.origin):n.origin;a=o.r,s=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var d=Vc(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],A=0,m=e["!rows"]||(e["!rows"]=[]),g=0,x=0,v=0,y=0,N=0,C=0;for(e["!cols"]||(e["!cols"]=[]);g<l.length&&x<c;++g){var _=l[g];if(Vq(_)){if(n.display)continue;m[x]={hidden:!0}}var j=_.children;for(v=y=0;v<j.length;++v){var I=j[v];if(!(n.display&&Vq(I))){var T=I.hasAttribute("data-v")?I.getAttribute("data-v"):I.hasAttribute("v")?I.getAttribute("v"):Qoe(I.innerHTML),k=I.getAttribute("data-z")||I.getAttribute("z");for(A=0;A<f.length;++A){var B=f[A];B.s.c==y+s&&B.s.r<x+a&&x+a<=B.e.r&&(y=B.e.c+1-s,A=-1)}C=+I.getAttribute("colspan")||1,((N=+I.getAttribute("rowspan")||1)>1||C>1)&&f.push({s:{r:x+a,c:y+s},e:{r:x+a+(N||1)-1,c:y+s+(C||1)-1}});var M={t:"s",v:T},P=I.getAttribute("data-t")||I.getAttribute("t")||"";T!=null&&(T.length==0?M.t=P||"z":n.raw||T.trim().length==0||P=="s"||(T==="TRUE"?M={t:"b",v:!0}:T==="FALSE"?M={t:"b",v:!1}:isNaN(Sf(T))?isNaN(P1(T).getDate())||(M={t:"d",v:rs(T)},n.cellDates||(M={t:"n",v:Gi(M.v)}),M.z=n.dateNF||Qr[14]):M={t:"n",v:Sf(T)})),M.z===void 0&&k!=null&&(M.z=k);var S="",L=I.getElementsByTagName("A");if(L&&L.length)for(var H=0;H<L.length&&!(L[H].hasAttribute("href")&&(S=L[H].getAttribute("href"),S.charAt(0)!="#"));++H);S&&S.charAt(0)!="#"&&(M.l={Target:S}),n.dense?(e[x+a]||(e[x+a]=[]),e[x+a][y+s]=M):e[zr({c:y+s,r:x+a})]=M,u.e.c<y+s&&(u.e.c=y+s),y+=C}}++x}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,x-1+a),e["!ref"]=un(u),x>=c&&(e["!fullref"]=un((u.e.r=l.length-g+x-1+a,u))),e}function yce(e,t){var r=t||{},n=r.dense?[]:{};return bce(n,e,t)}function UMe(e,t){return zp(yce(e,t),t)}function Vq(e){var t="",r=HMe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function HMe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function QMe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Kn(t.replace(/<[^>]*>/g,""));return[r]}var $q={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function wce(e,t){var r=t||{},n=n7(e),a=[],s,o,l={name:""},c="",u=0,d,f,A={},m=[],g=r.dense?[]:{},x,v,y={value:""},N="",C=0,_=[],j=-1,I=-1,T={s:{r:1e6,c:1e7},e:{r:0,c:0}},k=0,B={},M=[],P={},S=0,L=0,H=[],q=1,Q=1,z=[],K={Names:[]},Z={},U=["",""],Y=[],R={},D="",W=0,J=!1,le=!1,ie=0;for(qN.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");x=qN.exec(n);)switch(x[3]=x[3].replace(/_.*$/,"")){case"table":case"":x[1]==="/"?(T.e.c>=T.s.c&&T.e.r>=T.s.r?g["!ref"]=un(T):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=T.e.r&&(g["!fullref"]=g["!ref"],T.e.r=r.sheetRows-1,g["!ref"]=un(T)),M.length&&(g["!merges"]=M),H.length&&(g["!rows"]=H),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),m.push(d.name),A[d.name]=g,le=!1):x[0].charAt(x[0].length-2)!=="/"&&(d=Wr(x[0],!1),j=I=-1,T.s.r=T.s.c=1e7,T.e.r=T.e.c=0,g=r.dense?[]:{},M=[],H=[],le=!0);break;case"table-row-group":x[1]==="/"?--k:++k;break;case"table-row":case"":if(x[1]==="/"){j+=q,q=1;break}if(f=Wr(x[0],!1),f.?j=f.-1:j==-1&&(j=0),q=+f["number-rows-repeated"]||1,q<10)for(ie=0;ie<q;++ie)k>0&&(H[j+ie]={level:k});I=-1;break;case"covered-table-cell":x[1]!=="/"&&++I,r.sheetStubs&&(r.dense?(g[j]||(g[j]=[]),g[j][I]={t:"z"}):g[zr({r:j,c:I})]={t:"z"}),N="",_=[];break;case"table-cell":case"":if(x[0].charAt(x[0].length-2)==="/")++I,y=Wr(x[0],!1),Q=parseInt(y["number-columns-repeated"]||"1",10),v={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(v.f=Mq(Kn(y.formula))),(y.||y["value-type"])=="string"&&(v.t="s",v.v=Kn(y["string-value"]||""),r.dense?(g[j]||(g[j]=[]),g[j][I]=v):g[zr({r:j,c:I})]=v),I+=Q-1;else if(x[1]!=="/"){++I,N="",C=0,_=[],Q=1;var re=q?j+q-1:j;if(I>T.e.c&&(T.e.c=I),I<T.s.c&&(T.s.c=I),j<T.s.r&&(T.s.r=j),re>T.e.r&&(T.e.r=re),y=Wr(x[0],!1),Y=[],R={},v={t:y.||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Kn(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(S=parseInt(y["number-matrix-rows-spanned"],10)||0,L=parseInt(y["number-matrix-columns-spanned"],10)||0,P={s:{r:j,c:I},e:{r:j+S-1,c:I+L-1}},v.F=un(P),z.push([P,v.F])),y.formula)v.f=Mq(y.formula);else for(ie=0;ie<z.length;++ie)j>=z[ie][0].s.r&&j<=z[ie][0].e.r&&I>=z[ie][0].s.c&&I<=z[ie][0].e.c&&(v.F=z[ie][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(S=parseInt(y["number-rows-spanned"],10)||0,L=parseInt(y["number-columns-spanned"],10)||0,P={s:{r:j,c:I},e:{r:j+S-1,c:I+L-1}},M.push(P)),y["number-columns-repeated"]&&(Q=parseInt(y["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=es(y["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(y.value);break;case"percentage":v.t="n",v.v=parseFloat(y.value);break;case"currency":v.t="n",v.v=parseFloat(y.value);break;case"date":v.t="d",v.v=rs(y["date-value"]),r.cellDates||(v.t="n",v.v=Gi(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=mBe(y["time-value"])/86400,r.cellDates&&(v.t="d",v.v=j3(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(y.);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",y["string-value"]!=null&&(N=Kn(y["string-value"]),_=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(J=!1,v.t==="s"&&(v.v=N||"",_.length&&(v.R=_),J=C==0),Z.Target&&(v.l=Z),Y.length>0&&(v.c=Y,Y=[]),N&&r.cellText!==!1&&(v.w=N),J&&(v.t="z",delete v.v),(!J||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=j))for(var ce=0;ce<q;++ce){if(Q=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(g[j+ce]||(g[j+ce]=[]),g[j+ce][I]=ce==0?v:ns(v);--Q>0;)g[j+ce][I+Q]=ns(v);else for(g[zr({r:j+ce,c:I})]=v;--Q>0;)g[zr({r:j+ce,c:I+Q})]=ns(v);T.e.c<=I&&(T.e.c=I)}Q=parseInt(y["number-columns-repeated"]||"1",10),I+=Q-1,Q=0,v={},N="",_=[]}Z={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!0]);break;case"annotation":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s;R.t=N,_.length&&(R.R=_),R.a=D,Y.push(R)}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);D="",W=0,N="",C=0,_=[];break;case"creator":x[1]==="/"?D=n.slice(W,x.index):W=x.index+x[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);N="",C=0,_=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(x[1]==="/"){if(B[l.name]=c,(s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&(c="",l=Wr(x[0],!1),a.push([x[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":o=Wr(x[0],!1),c+=$q[x[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":o=Wr(x[0],!1),c+=$q[x[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(x[0].slice(-2)==="/>")break;if(x[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,x.index);break}else u=x.index+x[0].length;break;case"named-range":o=Wr(x[0],!1),U=l6(o["cell-range-address"]);var oe={Name:o.name,Ref:U[0]+"!"+U[1]};le&&(oe.Sheet=m.length),K.Names.push(oe);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(x[1]==="/"&&(!y||!y["string-value"])){var be=QMe(n.slice(C,x.index));N=(N.length>0?N+`
`:"")+be[0]}else Wr(x[0],!1),C=x.index+x[0].length;break;case"s":break;case"database-range":if(x[1]==="/")break;try{U=l6(Wr(x[0])["target-range-address"]),A[U[0]]["!autofilter"]={ref:U[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(x[1]!=="/"){if(Z=Wr(x[0],!1),!Z.href)break;Z.Target=Kn(Z.href),delete Z.href,Z.Target.charAt(0)=="#"&&Z.Target.indexOf(".")>-1?(U=l6(Z.Target.slice(1)),Z.Target="#"+U[0]+"!"+U[1]):Z.Target.match(/^\.\.[\\\/]/)&&(Z.Target=Z.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(x[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(x)}}var X={Sheets:A,SheetNames:m,Workbook:K};return r.bookSheets&&delete X.Sheets,X}function zq(e,t){t=t||{},gd(e,"META-INF/manifest.xml")&&mIe(Ti(e,"META-INF/manifest.xml"),t);var r=Cu(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=wce(Pa(r),t);return gd(e,"meta.xml")&&(n.Props=fle(Ti(e,"meta.xml"))),n}function Gq(e,t){return wce(e,t)}var VMe=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+GN({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return yi+t}}(),qq=function(){var e=function(s){return _a(s).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,o,l){var c=[];c.push('      <table:table table:name="'+_a(o.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,f=Vc(s["!ref"]||"A1"),A=s["!merges"]||[],m=0,g=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var x="",v=s["!rows"]||[];for(u=0;u<f.s.r;++u)x=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+x+`></table:table-row>
`);for(;u<=f.e.r;++u){for(x=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+x+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var y=!1,N={},C="";for(m=0;m!=A.length;++m)if(!(A[m].s.c>d)&&!(A[m].s.r>u)&&!(A[m].e.c<d)&&!(A[m].e.r<u)){(A[m].s.c!=d||A[m].s.r!=u)&&(y=!0),N["table:number-columns-spanned"]=A[m].e.c-A[m].s.c+1,N["table:number-rows-spanned"]=A[m].e.r-A[m].s.r+1;break}if(y){c.push(r);continue}var _=zr({r:u,c:d}),j=g?(s[u]||[])[d]:s[_];if(j&&j.f&&(N["table:formula"]=_a(cRe(j.f)),j.F&&j.F.slice(0,_.length)==_)){var I=Vc(j.F);N["table:number-matrix-columns-spanned"]=I.e.c-I.s.c+1,N["table:number-matrix-rows-spanned"]=I.e.r-I.s.r+1}if(!j){c.push(t);continue}switch(j.t){case"b":C=j.v?"TRUE":"FALSE",N["office:value-type"]="boolean",N["office:boolean-value"]=j.v?"true":"false";break;case"n":C=j.w||String(j.v||0),N["office:value-type"]="float",N["office:value"]=j.v||0;break;case"s":case"str":C=j.v==null?"":j.v,N["office:value-type"]="string";break;case"d":C=j.w||rs(j.v).toISOString(),N["office:value-type"]="date",N["office:date-value"]=rs(j.v).toISOString(),N["table:style-name"]="ce1";break;default:c.push(t);continue}var T=e(C);if(j.l&&j.l.Target){var k=j.l.Target;k=k.charAt(0)=="#"?"#"+uRe(k.slice(1)):k,k.charAt(0)!="#"&&!k.match(/^\w+:/)&&(k="../"+k),T=Yt("text:a",T,{"xlink:href":k.replace(/&/g,"&amp;")})}c.push("          "+Yt("table:table-cell",Yt("text:p",T,{}),N)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,o){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;kp(f),f.ods=l;var A=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+A+`"/>
`),s.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(o,l){var c=[yi],u=GN({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=GN({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(dle().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=o.SheetNames.length;++f)c.push(n(o.Sheets[o.SheetNames[f]],o,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function Nce(e,t){if(t.bookType=="fods")return qq(e,t);var r=ZM(),n="",a=[],s=[];return n="mimetype",hn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",hn(r,n,qq(e,t)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",hn(r,n,VMe(e,t)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",hn(r,n,yi+dle()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",hn(r,n,xIe(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",hn(r,n,pIe(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Fx(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function FF(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Pa($p(e))}function $Me(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Nu(Fh(e))}function zMe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function _p(e){var t=e.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function Kq(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function GMe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function qMe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=a&255;e[t+15]|=r>=0?0:128}function eC(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function Ca(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Ks(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function ra(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=eC(e,r),s=a&7;a=Math.floor(a/8);var o=0,l;if(a==0)break;switch(s){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=eC(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:l,type:s};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function Oo(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(Ca(n*8+a.type)),a.type==2&&t.push(Ca(a.data.length)),t.push(a.data))})}),_p(t)}function j7(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function hd(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=eC(e,n),s=ra(e.slice(n[0],n[0]+a));n[0]+=a;var o={id:Ks(s[1][0].data),messages:[]};s[2].forEach(function(l){var c=ra(l.data),u=Ks(c[3][0].data);o.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=s[3])!=null&&t[0]&&(o.merge=Ks(s[3][0].data)>>>0>0),r.push(o)}return r}function Gv(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:Ca(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Ca(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(o){a.push(o.data),o.meta[3]=[{type:0,data:Ca(o.data.length)}],n[2].push({data:Oo(o.meta),type:2})});var s=Oo(n);t.push(Ca(s.length)),t.push(s),a.forEach(function(o){return t.push(o)})}),_p(t)}function KMe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=eC(t,r),a=[];r[0]<t.length;){var s=t[r[0]]&3;if(s==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}a.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,u=0;if(s==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,s==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[_p(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=_p(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Ad(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(KMe(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return _p(t)}function qv(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var s=Ca(n),o=s.length;t.push(s),n<=60?(o++,t.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),o+=n,a[0]=0,a[1]=o&255,a[2]=o>>8&255,a[3]=o>>16&255,r+=n}return _p(t)}function WMe(e,t,r,n){var a=Fx(e),s=a.getUint32(4,!0),o=(n>1?12:8)+Kq(s&(n>1?3470:398))*4,l=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(l=a.getUint32(o,!0),o+=4),o+=Kq(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(o,!0),o+=4),s&32&&(u=a.getFloat64(o,!0),o+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(o,!0)*1e3),o+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function XMe(e,t,r){var n=Fx(e),a=n.getUint32(8,!0),s=12,o=-1,l=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=GMe(e,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(l=n.getUint32(s,!0),s+=4),a&16&&(o=n.getUint32(s,!0),s+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return f}function u6(e,t){var r=new Uint8Array(32),n=Fx(r),a=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,qMe(r,a,e.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),r.slice(0,a)}function d6(e,t){var r=new Uint8Array(32),n=Fx(r),a=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),r.slice(0,a)}function YMe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return WMe(e,t,r,e[0]);case 5:return XMe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function xl(e){var t=ra(e);return eC(t[1][0].data)}function Wq(e,t){var r=ra(t.data),n=Ks(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(o){var l=ra(o.data),c=Ks(l[1][0].data)>>>0;switch(n){case 1:s[c]=FF(l[3][0].data);break;case 8:{var u=e[xl(l[9][0].data)][0],d=ra(u.data),f=e[xl(d[1][0].data)][0],A=Ks(f.meta[1][0].data);if(A!=2001)throw new Error("2000 unexpected reference to ".concat(A));var m=ra(f.data);s[c]=m[3].map(function(g){return FF(g.data)}).join("")}break}}),s}function JMe(e,t){var r,n,a,s,o,l,c,u,d,f,A,m,g,x,v=ra(e),y=Ks(v[1][0].data)>>>0,N=Ks(v[2][0].data)>>>0,C=((n=(r=v[8])==null?void 0:r[0])==null?void 0:n.data)&&Ks(v[8][0].data)>0||!1,_,j;if((s=(a=v[7])==null?void 0:a[0])!=null&&s.data&&t!=0)_=(l=(o=v[7])==null?void 0:o[0])==null?void 0:l.data,j=(u=(c=v[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=v[4])==null?void 0:d[0])!=null&&f.data&&t!=1)_=(m=(A=v[4])==null?void 0:A[0])==null?void 0:m.data,j=(x=(g=v[3])==null?void 0:g[0])==null?void 0:x.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var I=C?4:1,T=Fx(_),k=[],B=0;B<_.length/2;++B){var M=T.getUint16(B*2,!0);M<65535&&k.push([B,M])}if(k.length!=N)throw"Expected ".concat(N," cells, found ").concat(k.length);var P=[];for(B=0;B<k.length-1;++B)P[k[B][0]]=j.subarray(k[B][1]*I,k[B+1][1]*I);return k.length>=1&&(P[k[k.length-1][0]]=j.subarray(k[k.length-1][1]*I)),{R:y,cells:P}}function ZMe(e,t){var r,n=ra(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Ks(n[7][0].data)>>>0>0?1:0:-1,s=j7(n[5],function(o){return JMe(o,a)});return{nrows:Ks(n[4][0].data)>>>0,data:s.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,u){if(o[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));o[l.R][u]=c}),o},[])}}function e7e(e,t,r){var n,a=ra(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Ks(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Ks(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=un(s);var o=ra(a[4][0].data),l=Wq(e,e[xl(o[4][0].data)][0]),c=(n=o[17])!=null&&n[0]?Wq(e,e[xl(o[17][0].data)][0]):[],u=ra(o[3][0].data),d=0;u[1].forEach(function(f){var A=ra(f.data),m=e[xl(A[2][0].data)][0],g=Ks(m.meta[1][0].data);if(g!=6002)throw new Error("6001 unexpected reference to ".concat(g));var x=ZMe(e,m);x.data.forEach(function(v,y){v.forEach(function(N,C){var _=zr({r:d+y,c:C}),j=YMe(N,l,c);j&&(r[_]=j)})}),d+=x.nrows})}function t7e(e,t){var r=ra(t.data),n={"!ref":"A1"},a=e[xl(r[2][0].data)],s=Ks(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return e7e(e,a[0],n),n}function r7e(e,t){var r,n=ra(t.data),a={name:(r=n[1])!=null&&r[0]?FF(n[1][0].data):"",sheets:[]},s=j7(n[2],xl);return s.forEach(function(o){e[o].forEach(function(l){var c=Ks(l.meta[1][0].data);c==6e3&&a.sheets.push(t7e(e,l))})}),a}function n7e(e,t){var r=B7(),n=ra(t.data),a=j7(n[1],xl);if(a.forEach(function(s){e[s].forEach(function(o){var l=Ks(o.meta[1][0].data);if(l==2){var c=r7e(e,o);c.sheets.forEach(function(u,d){I7(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function f6(e){var t,r,n,a,s={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=Ad(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=hd(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,o.push(f.id)})}}),!o.length)throw new Error("File has no messages");var l=((a=(n=(r=(t=s==null?void 0:s[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Ks(s[1][0].meta[1][0].data)==1&&s[1][0];if(l||o.forEach(function(c){s[c].forEach(function(u){var d=Ks(u.meta[1][0].data)>>>0;if(d==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return n7e(s,l)}function a7e(e,t,r){var n,a,s,o;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(s=e[8])==null?void 0:s[0])==null?void 0:o.data)&&Ks(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=Fx(e[7][0].data),d=0,f=[],A=Fx(e[4][0].data),m=0,g=[],x=0;x<t.length;++x){if(t[x]==null){u.setUint16(x*2,65535,!0),A.setUint16(x*2,65535);continue}u.setUint16(x*2,d,!0),A.setUint16(x*2,m,!0);var v,y;switch(typeof t[x]){case"string":v=u6({t:"s",v:t[x]},r),y=d6({t:"s",v:t[x]},r);break;case"number":v=u6({t:"n",v:t[x]},r),y=d6({t:"n",v:t[x]},r);break;case"boolean":v=u6({t:"b",v:t[x]},r),y=d6({t:"b",v:t[x]},r);break;default:throw new Error("Unsupported value "+t[x])}f.push(v),d+=v.length,g.push(y),m+=y.length,++c}for(e[2][0].data=Ca(c);x<e[7][0].data.length/2;++x)u.setUint16(x*2,65535,!0),A.setUint16(x*2,65535,!0);return e[6][0].data=_p(f),e[3][0].data=_p(g),c}function s7e(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Vc(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(un(n)));var s=e_(r,{range:n,header:1}),o=["~Sh33tJ5~"];s.forEach(function(D){return D.forEach(function(W){typeof W=="string"&&o.push(W)})});var l={},c=[],u=Br.read(t.numbers,{type:"base64"});u.FileIndex.map(function(D,W){return[D,u.FullPaths[W]]}).forEach(function(D){var W=D[0],J=D[1];if(W.type==2&&W.name.match(/\.iwa/)){var le=W.content,ie=Ad(le),re=hd(ie);re.forEach(function(ce){c.push(ce.id),l[ce.id]={deps:[],location:J,type:Ks(ce.messages[0].meta[1][0].data)}})}}),c.sort(function(D,W){return D-W});var d=c.filter(function(D){return D>1}).map(function(D){return[D,Ca(D)]});u.FileIndex.map(function(D,W){return[D,u.FullPaths[W]]}).forEach(function(D){var W=D[0];if(D[1],!!W.name.match(/\.iwa/)){var J=hd(Ad(W.content));J.forEach(function(le){le.messages.forEach(function(ie){d.forEach(function(re){le.messages.some(function(ce){return Ks(ce.meta[1][0].data)!=11006&&zMe(ce.data,re[1])})&&l[re[0]].deps.push(le.id)})})})}});for(var f=Br.find(u,l[1].location),A=hd(Ad(f.content)),m,g=0;g<A.length;++g){var x=A[g];x.id==1&&(m=x)}var v=xl(ra(m.messages[0].data)[1][0].data);for(f=Br.find(u,l[v].location),A=hd(Ad(f.content)),g=0;g<A.length;++g)x=A[g],x.id==v&&(m=x);for(v=xl(ra(m.messages[0].data)[2][0].data),f=Br.find(u,l[v].location),A=hd(Ad(f.content)),g=0;g<A.length;++g)x=A[g],x.id==v&&(m=x);for(v=xl(ra(m.messages[0].data)[2][0].data),f=Br.find(u,l[v].location),A=hd(Ad(f.content)),g=0;g<A.length;++g)x=A[g],x.id==v&&(m=x);var y=ra(m.messages[0].data);{y[6][0].data=Ca(n.e.r+1),y[7][0].data=Ca(n.e.c+1);var N=xl(y[46][0].data),C=Br.find(u,l[N].location),_=hd(Ad(C.content));{for(var j=0;j<_.length&&_[j].id!=N;++j);if(_[j].id!=N)throw"Bad ColumnRowUIDMapArchive";var I=ra(_[j].messages[0].data);I[1]=[],I[2]=[],I[3]=[];for(var T=0;T<=n.e.c;++T){var k=[];k[1]=k[2]=[{type:0,data:Ca(T+420690)}],I[1].push({type:2,data:Oo(k)}),I[2].push({type:0,data:Ca(T)}),I[3].push({type:0,data:Ca(T)})}I[4]=[],I[5]=[],I[6]=[];for(var B=0;B<=n.e.r;++B)k=[],k[1]=k[2]=[{type:0,data:Ca(B+726270)}],I[4].push({type:2,data:Oo(k)}),I[5].push({type:0,data:Ca(B)}),I[6].push({type:0,data:Ca(B)});_[j].messages[0].data=Oo(I)}C.content=qv(Gv(_)),C.size=C.content.length,delete y[46];var M=ra(y[4][0].data);{M[7][0].data=Ca(n.e.r+1);var P=ra(M[1][0].data),S=xl(P[2][0].data);C=Br.find(u,l[S].location),_=hd(Ad(C.content));{if(_[0].id!=S)throw"Bad HeaderStorageBucket";var L=ra(_[0].messages[0].data);for(B=0;B<s.length;++B){var H=ra(L[2][0].data);H[1][0].data=Ca(B),H[4][0].data=Ca(s[B].length),L[2][B]={type:L[2][0].type,data:Oo(H)}}_[0].messages[0].data=Oo(L)}C.content=qv(Gv(_)),C.size=C.content.length;var q=xl(M[2][0].data);C=Br.find(u,l[q].location),_=hd(Ad(C.content));{if(_[0].id!=q)throw"Bad HeaderStorageBucket";for(L=ra(_[0].messages[0].data),T=0;T<=n.e.c;++T)H=ra(L[2][0].data),H[1][0].data=Ca(T),H[4][0].data=Ca(n.e.r+1),L[2][T]={type:L[2][0].type,data:Oo(H)};_[0].messages[0].data=Oo(L)}C.content=qv(Gv(_)),C.size=C.content.length;var Q=xl(M[4][0].data);(function(){for(var D=Br.find(u,l[Q].location),W=hd(Ad(D.content)),J,le=0;le<W.length;++le){var ie=W[le];ie.id==Q&&(J=ie)}var re=ra(J.messages[0].data);{re[3]=[];var ce=[];o.forEach(function(X,je){ce[1]=[{type:0,data:Ca(je)}],ce[2]=[{type:0,data:Ca(1)}],ce[3]=[{type:2,data:$Me(X)}],re[3].push({type:2,data:Oo(ce)})})}J.messages[0].data=Oo(re);var oe=Gv(W),be=qv(oe);D.content=be,D.size=D.content.length})();var z=ra(M[3][0].data);{var K=z[1][0];delete z[2];var Z=ra(K.data);{var U=xl(Z[2][0].data);(function(){for(var D=Br.find(u,l[U].location),W=hd(Ad(D.content)),J,le=0;le<W.length;++le){var ie=W[le];ie.id==U&&(J=ie)}var re=ra(J.messages[0].data);{delete re[6],delete z[7];var ce=new Uint8Array(re[5][0].data);re[5]=[];for(var oe=0,be=0;be<=n.e.r;++be){var X=ra(ce);oe+=a7e(X,s[be],o),X[1][0].data=Ca(be),re[5].push({data:Oo(X),type:2})}re[1]=[{type:0,data:Ca(n.e.c+1)}],re[2]=[{type:0,data:Ca(n.e.r+1)}],re[3]=[{type:0,data:Ca(oe)}],re[4]=[{type:0,data:Ca(n.e.r+1)}]}J.messages[0].data=Oo(re);var je=Gv(W),De=qv(je);D.content=De,D.size=D.content.length})()}K.data=Oo(Z)}M[3][0].data=Oo(z)}y[4][0].data=Oo(M)}m.messages[0].data=Oo(y);var Y=Gv(A),R=qv(Y);return f.content=R,f.size=f.content.length,u}function Cce(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function k7(e){Cce([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function S7(e){Cce([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function i7e(e){return kn.WS.indexOf(e)>-1?"sheet":e==kn.CS?"chart":e==kn.DS?"dialog":e==kn.MS?"macro":e&&e.length?e:"sheet"}function o7e(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,i7e(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function l7e(e,t,r,n,a,s,o,l,c,u,d,f){try{s[n]=J2(Cu(e,r,!0),t);var A=Ti(e,t),m;switch(l){case"sheet":m=T8e(A,t,a,c,s[n],u,d,f);break;case"chart":if(m=B8e(A,t,a,c,s[n],u,d,f),!m||!m["!drawel"])break;var g=y2(m["!drawel"].Target,t),x=KN(g),v=gPe(Cu(e,g,!0),J2(Cu(e,x,!0),g)),y=y2(v,g),N=KN(y);m=a8e(Cu(e,y,!0),y,c,J2(Cu(e,N,!0),y),u,m);break;case"macro":m=I8e(A,t,a,c,s[n],u,d,f);break;case"dialog":m=D8e(A,t,a,c,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=m;var C=[];s&&s[n]&&Ws(s[n]).forEach(function(_){var j="";if(s[n][_].Type==kn.CMNT){j=y2(s[n][_].Target,t);var I=R8e(Ti(e,j,!0),j,c);if(!I||!I.length)return;Oq(m,I,!1)}s[n][_].Type==kn.TCMNT&&(j=y2(s[n][_].Target,t),C=C.concat(vPe(Ti(e,j,!0),c)))}),C&&C.length&&Oq(m,C,!0,c.people||[])}catch(_){if(c.WTF)throw _}}function id(e){return e.charAt(0)=="/"?e.slice(1):e}function c7e(e,t){if(Cy(),t=t||{},k7(t),gd(e,"META-INF/manifest.xml")||gd(e,"objectdata.xml"))return zq(e,t);if(gd(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof f6<"u"){if(e.FileIndex)return f6(e);var r=Br.utils.cfb_new();return tq(e).forEach(function(H){hn(r,H,bBe(e,H))}),f6(r)}throw new Error("Unsupported NUMBERS file")}if(!gd(e,"[Content_Types].xml"))throw gd(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):gd(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=tq(e),a=hIe(Cu(e,"[Content_Types].xml")),s=!1,o,l;if(a.workbooks.length===0&&(l="xl/workbook.xml",Ti(e,l,!0)&&a.workbooks.push(l)),a.workbooks.length===0){if(l="xl/workbook.bin",!Ti(e,l,!0))throw new Error("Could not find workbook");a.workbooks.push(l),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(Z2=[],a.sst)try{Z2=F8e(Ti(e,id(a.sst)),a.sst,t)}catch(H){if(t.WTF)throw H}t.cellStyles&&a.themes.length&&(c=P8e(Cu(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(u=O8e(Ti(e,id(a.style)),a.style,c,t))}a.links.map(function(H){try{var q=J2(Cu(e,KN(id(H))),H);return M8e(Ti(e,id(H)),q,H,t)}catch{}});var d=_8e(Ti(e,id(a.workbooks[0])),a.workbooks[0],t),f={},A="";a.coreprops.length&&(A=Ti(e,id(a.coreprops[0]),!0),A&&(f=fle(A)),a.extprops.length!==0&&(A=Ti(e,id(a.extprops[0]),!0),A&&bIe(A,f,t)));var m={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(A=Cu(e,id(a.custprops[0]),!0),A&&(m=wIe(A,t)));var g={};if((t.bookSheets||t.bookProps)&&(d.Sheets?o=d.Sheets.map(function(q){return q.name}):f.Worksheets&&f.SheetNames.length>0&&(o=f.SheetNames),t.bookProps&&(g.Props=f,g.Custprops=m),t.bookSheets&&typeof o<"u"&&(g.SheetNames=o),t.bookSheets?g.SheetNames:t.bookProps))return g;o={};var x={};t.bookDeps&&a.calcchain&&(x=L8e(Ti(e,id(a.calcchain)),a.calcchain));var v=0,y={},N,C;{var _=d.Sheets;f.Worksheets=_.length,f.SheetNames=[];for(var j=0;j!=_.length;++j)f.SheetNames[j]=_[j].name}var I=s?"bin":"xml",T=a.workbooks[0].lastIndexOf("/"),k=(a.workbooks[0].slice(0,T+1)+"_rels/"+a.workbooks[0].slice(T+1)+".rels").replace(/^\//,"");gd(e,k)||(k="xl/_rels/workbook."+I+".rels");var B=J2(Cu(e,k,!0),k.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=U8e(Ti(e,id(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=yPe(Ti(e,id(a.people[0])),t)),B&&(B=o7e(B,d.Sheets));var M=Ti(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=f.Worksheets;++v){var P="sheet";if(B&&B[v]?(N="xl/"+B[v][1].replace(/[\/]?xl\//,""),gd(e,N)||(N=B[v][1]),gd(e,N)||(N=k.replace(/_rels\/.*$/,"")+B[v][1]),P=B[v][2]):(N="xl/worksheets/sheet"+(v+1-M)+"."+I,N=N.replace(/sheet0\./,"sheet.")),C=N.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(v!=t.sheets)continue e;break;case"string":if(f.SheetNames[v].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var S=!1,L=0;L!=t.sheets.length;++L)typeof t.sheets[L]=="number"&&t.sheets[L]==v&&(S=1),typeof t.sheets[L]=="string"&&t.sheets[L].toLowerCase()==f.SheetNames[v].toLowerCase()&&(S=1);if(!S)continue e}}l7e(e,N,C,f.SheetNames[v],v,y,o,P,t,d,c,u)}return g={Directory:a,Workbook:d,Props:f,Custprops:m,Deps:x,Sheets:o,SheetNames:f.SheetNames,Strings:Z2,Styles:u,Themes:c,SSF:ns(Qr)},t&&t.bookFiles&&(e.files?(g.keys=n,g.files=e.files):(g.keys=[],g.files={},e.FullPaths.forEach(function(H,q){H=H.replace(/^Root Entry[\/]/,""),g.keys.push(H),g.files[H]=e.FileIndex[q]}))),t&&t.bookVBA&&(a.vba.length>0?g.vbaraw=Ti(e,id(a.vba[0]),!0):a.defaults&&a.defaults.bin===_Pe&&(g.vbaraw=Ti(e,"xl/vbaProject.bin",!0))),g}function u7e(e,t){var r=t||{},n="Workbook",a=Br.find(e,n);try{if(n="/!DataSpaces/Version",a=Br.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(UDe(a.content),n="/!DataSpaces/DataSpaceMap",a=Br.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=QDe(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=Br.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=VDe(a.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=Br.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);zDe(a.content)}catch{}if(n="/EncryptionInfo",a=Br.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=GDe(a.content);if(n="/EncryptedPackage",a=Br.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],a.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function d7e(e,t){return t.bookType=="ods"?Nce(e,t):t.bookType=="numbers"?s7e(e,t):t.bookType=="xlsb"?f7e(e,t):h7e(e,t)}function f7e(e,t){Ib=1024,e&&!e.SSF&&(e.SSF=ns(Qr)),e&&e.SSF&&(Cy(),N3(e.SSF),t.revssf=E3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,eN?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=Yle.indexOf(t.bookType)>-1,a=h7();S7(t=t||{});var s=ZM(),o="",l=0;if(t.cellXfs=[],Gp(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",hn(s,o,hle(e.Props,t)),a.coreprops.push(o),Ea(t.rels,2,o,kn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,hn(s,o,ple(e.Props)),a.extprops.push(o),Ea(t.rels,3,o,kn.EXT_PROPS),e.Custprops!==e.Props&&Ws(e.Custprops||{}).length>0&&(o="docProps/custom.xml",hn(s,o,gle(e.Custprops)),a.custprops.push(o),Ea(t.rels,4,o,kn.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var d={"!id":{}},f=e.Sheets[e.SheetNames[l-1]],A=(f||{})["!type"]||"sheet";switch(A){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,hn(s,o,Q8e(l-1,o,t,e,d)),a.sheets.push(o),Ea(t.wbrels,-1,"worksheets/sheet"+l+"."+r,kn.WS[0])}if(f){var m=f["!comments"],g=!1,x="";m&&m.length>0&&(x="xl/comments"+l+"."+r,hn(s,x,z8e(m,x)),a.comments.push(x),Ea(d,-1,"../comments"+l+"."+r,kn.CMNT),g=!0),f["!legacy"]&&g&&hn(s,"xl/drawings/vmlDrawing"+l+".vml",Wle(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&hn(s,KN(o),s1(d))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,hn(s,o,$8e(t.Strings,o,t)),a.strs.push(o),Ea(t.wbrels,-1,"sharedStrings."+r,kn.SST)),o="xl/workbook."+r,hn(s,o,H8e(e,o)),a.workbooks.push(o),Ea(t.rels,1,o,kn.WB),o="xl/theme/theme1.xml",hn(s,o,v7(e.Themes,t)),a.themes.push(o),Ea(t.wbrels,-1,"theme/theme1.xml",kn.THEME),o="xl/styles."+r,hn(s,o,V8e(e,o,t)),a.styles.push(o),Ea(t.wbrels,-1,"styles."+r,kn.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",hn(s,o,e.vbaraw),a.vba.push(o),Ea(t.wbrels,-1,"vbaProject.bin",kn.VBA)),o="xl/metadata."+r,hn(s,o,G8e(o)),a.metadata.push(o),Ea(t.wbrels,-1,"metadata."+r,kn.XLMETA),hn(s,"[Content_Types].xml",ule(a,t)),hn(s,"_rels/.rels",s1(t.rels)),hn(s,"xl/_rels/workbook."+r+".rels",s1(t.wbrels)),delete t.revssf,delete t.ssf,s}function h7e(e,t){Ib=1024,e&&!e.SSF&&(e.SSF=ns(Qr)),e&&e.SSF&&(Cy(),N3(e.SSF),t.revssf=E3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,eN?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=Yle.indexOf(t.bookType)>-1,a=h7();S7(t=t||{});var s=ZM(),o="",l=0;if(t.cellXfs=[],Gp(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",hn(s,o,hle(e.Props,t)),a.coreprops.push(o),Ea(t.rels,2,o,kn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,hn(s,o,ple(e.Props)),a.extprops.push(o),Ea(t.rels,3,o,kn.EXT_PROPS),e.Custprops!==e.Props&&Ws(e.Custprops||{}).length>0&&(o="docProps/custom.xml",hn(s,o,gle(e.Custprops)),a.custprops.push(o),Ea(t.rels,4,o,kn.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var f={"!id":{}},A=e.Sheets[e.SheetNames[l-1]],m=(A||{})["!type"]||"sheet";switch(m){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,hn(s,o,lce(l-1,t,e,f)),a.sheets.push(o),Ea(t.wbrels,-1,"worksheets/sheet"+l+"."+r,kn.WS[0])}if(A){var g=A["!comments"],x=!1,v="";if(g&&g.length>0){var y=!1;g.forEach(function(N){N[1].forEach(function(C){C.T==!0&&(y=!0)})}),y&&(v="xl/threadedComments/threadedComment"+l+"."+r,hn(s,v,bPe(g,d,t)),a.threadedcomments.push(v),Ea(f,-1,"../threadedComments/threadedComment"+l+"."+r,kn.TCMNT)),v="xl/comments"+l+"."+r,hn(s,v,Xle(g)),a.comments.push(v),Ea(f,-1,"../comments"+l+"."+r,kn.CMNT),x=!0}A["!legacy"]&&x&&hn(s,"xl/drawings/vmlDrawing"+l+".vml",Wle(l,A["!comments"])),delete A["!comments"],delete A["!legacy"]}f["!id"].rId1&&hn(s,KN(o),s1(f))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,hn(s,o,Rle(t.Strings,t)),a.strs.push(o),Ea(t.wbrels,-1,"sharedStrings."+r,kn.SST)),o="xl/workbook."+r,hn(s,o,hce(e)),a.workbooks.push(o),Ea(t.rels,1,o,kn.WB),o="xl/theme/theme1.xml",hn(s,o,v7(e.Themes,t)),a.themes.push(o),Ea(t.wbrels,-1,"theme/theme1.xml",kn.THEME),o="xl/styles."+r,hn(s,o,zle(e,t)),a.styles.push(o),Ea(t.wbrels,-1,"styles."+r,kn.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",hn(s,o,e.vbaraw),a.vba.push(o),Ea(t.wbrels,-1,"vbaProject.bin",kn.VBA)),o="xl/metadata."+r,hn(s,o,Kle()),a.metadata.push(o),Ea(t.wbrels,-1,"metadata."+r,kn.XLMETA),d.length>1&&(o="xl/persons/person.xml",hn(s,o,wPe(d)),a.people.push(o),Ea(t.wbrels,-1,"persons/person.xml",kn.PEOPLE)),hn(s,"[Content_Types].xml",ule(a,t)),hn(s,"_rels/.rels",s1(t.rels)),hn(s,"xl/_rels/workbook."+r+".rels",s1(t.wbrels)),delete t.revssf,delete t.ssf,s}function _7(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Iu(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function A7e(e,t){return Br.find(e,"EncryptedPackage")?u7e(e,t):gce(e,t)}function m7e(e,t){var r,n=e,a=t||{};return a.type||(a.type=bn&&Buffer.isBuffer(e)?"buffer":"base64"),r=Moe(n,a),c7e(r,a)}function Ece(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return OF(e.slice(r),t);default:break e}return F1.to_workbook(e,t)}function p7e(e,t){var r="",n=_7(e,t);switch(t.type){case"base64":r=Iu(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Ix(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Pa(r)),t.type="binary",Ece(r,t)}function g7e(e,t){var r=e;return t.type=="base64"&&(r=Iu(r)),r=QN.utils.decode(1200,r.slice(2),"str"),t.type="binary",Ece(r,t)}function x7e(e){return e.match(/[^\x00-\x7F]/)?Fh(e):e}function h6(e,t,r,n){return n?(r.type="string",F1.to_workbook(e,r)):F1.to_workbook(t,r)}function L1(e,t){KM();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return L1(new Uint8Array(e),(r=ns(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),o1={},r.dateNF&&(o1.dateNF=r.dateNF),r.type||(r.type=bn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=bn?"buffer":"binary",n=fBe(e),typeof Uint8Array<"u"&&!bn&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=x7e(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=ns(r),r.type="array",L1(WM(n),r)}switch((a=_7(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return A7e(Br.read(n,r),r);break;case 9:if(a[1]<=8)return gce(n,r);break;case 60:return OF(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return NDe(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return Ple.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?m7e(n,r):h6(e,n,r,s);case 239:return a[3]===60?OF(n,r):h6(e,n,r,s);case 255:if(a[1]===254)return g7e(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return fx.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return fx.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return DF.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return Qle.to_workbook(n,r);break;case 10:case 13:case 32:return p7e(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return wDe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?DF.to_workbook(n,r):h6(e,n,r,s)}function jce(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return KC(t.file,Br.write(e,{type:bn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Br.write(e,t)}function v7e(e,t){var r=ns(t||{}),n=d7e(e,r);return b7e(n,r)}function b7e(e,t){var r={},n=bn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?Br.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(w3(a))}return t.password&&typeof encrypt_agile<"u"?jce(encrypt_agile(a,t.password),t):t.type==="file"?KC(t.file,a):t.type=="string"?Pa(a):a}function y7e(e,t){var r=t||{},n=xMe(e,r);return jce(n,r)}function Nh(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return VN(Fh(n));case"binary":return Fh(n);case"string":return e;case"file":return KC(t.file,n,"utf8");case"buffer":return bn?MA(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Nh(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function w7e(e,t){switch(t.type){case"base64":return VN(e);case"binary":return e;case"string":return e;case"file":return KC(t.file,e,"binary");case"buffer":return bn?MA(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function lk(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?VN(r):t.type=="string"?Pa(r):r;case"file":return KC(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function kce(e,t){KM(),A8e(e);var r=ns(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=kce(e,r);return r.type="array",w3(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Nh(dMe(e,r),r);case"slk":case"sylk":return Nh(Ole.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return Nh(vce(e.Sheets[e.SheetNames[a]],r),r);case"txt":return w7e(Sce(e.Sheets[e.SheetNames[a]],r),r);case"csv":return Nh(T7(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return Nh(Ple.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return lk(DF.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return Nh(F1.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return Nh(Qle.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return Nh(Fle.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return Nh(Nce(e,r),r);case"wk1":return lk(fx.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return lk(fx.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),lk(xce(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),y7e(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return v7e(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function N7e(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function ky(e,t,r){var n={};return n.type="file",n.file=t,N7e(n),kce(e,n)}function C7e(e,t,r,n,a,s,o,l){var c=xi(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,A=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(A,"__rowNum__",{value:r,enumerable:!1})}catch{A.__rowNum__=r}else A.__rowNum__=r;if(!o||e[r])for(var m=t.s.c;m<=t.e.c;++m){var g=o?e[r][m]:e[n[m]+c];if(g===void 0||g.t===void 0){if(u===void 0)continue;s[m]!=null&&(A[s[m]]=u);continue}var x=g.v;switch(g.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(s[m]!=null){if(x==null)if(g.t=="e"&&x===null)A[s[m]]=null;else if(u!==void 0)A[s[m]]=u;else if(d&&x===null)A[s[m]]=null;else continue;else A[s[m]]=d&&(g.t!=="n"||g.t==="n"&&l.rawNumbers!==!1)?x:wA(g,x,l);x!=null&&(f=!1)}}return{row:A,isempty:f}}function e_(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=Xn(d);break;case"number":c=Xn(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=xi(c.s.r),A=[],m=[],g=0,x=0,v=Array.isArray(e),y=c.s.r,N=0,C={};v&&!e[y]&&(e[y]=[]);var _=u.skipHidden&&e["!cols"]||[],j=u.skipHidden&&e["!rows"]||[];for(N=c.s.c;N<=c.e.c;++N)if(!(_[N]||{}).hidden)switch(A[N]=js(N),r=v?e[y][N]:e[A[N]+f],n){case 1:s[N]=N-c.s.c;break;case 2:s[N]=A[N];break;case 3:s[N]=u.header[N-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=wA(r,null,u),x=C[o]||0,!x)C[o]=1;else{do l=o+"_"+x++;while(C[l]);C[o]=x,C[l]=1}s[N]=l}for(y=c.s.r+a;y<=c.e.r;++y)if(!(j[y]||{}).hidden){var I=C7e(e,c,y,A,n,s,v,u);(I.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(m[g++]=I.row)}return m.length=g,m}var Xq=/"/g;function E7e(e,t,r,n,a,s,o,l){for(var c=!0,u=[],d="",f=xi(r),A=t.s.c;A<=t.e.c;++A)if(n[A]){var m=l.dense?(e[r]||[])[A]:e[n[A]+f];if(m==null)d="";else if(m.v!=null){c=!1,d=""+(l.rawNumbers&&m.t=="n"?m.v:wA(m,null,l));for(var g=0,x=0;g!==d.length;++g)if((x=d.charCodeAt(g))===a||x===s||x===34||l.forceQuotes){d='"'+d.replace(Xq,'""')+'"';break}d=="ID"&&(d='"ID"')}else m.f!=null&&!m.F?(c=!1,d="="+m.f,d.indexOf(",")>=0&&(d='"'+d.replace(Xq,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(o)}function T7(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=Xn(e["!ref"]),s=n.FS!==void 0?n.FS:",",o=s.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var A=n.skipHidden&&e["!cols"]||[],m=n.skipHidden&&e["!rows"]||[],g=a.s.c;g<=a.e.c;++g)(A[g]||{}).hidden||(f[g]=js(g));for(var x=0,v=a.s.r;v<=a.e.r;++v)(m[v]||{}).hidden||(d=E7e(e,a,v,f,o,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((x++?l:"")+d)));return delete n.dense,r.join("")}function Sce(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=T7(e,t);return r}function j7e(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=Xn(e["!ref"]),s="",o=[],l,c=[],u=Array.isArray(e);for(l=a.s.c;l<=a.e.c;++l)o[l]=js(l);for(var d=a.s.r;d<=a.e.r;++d)for(s=xi(d),l=a.s.c;l<=a.e.c;++l)if(t=o[l]+s,r=u?(e[d]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function _ce(e,t,r){var n=r||{},a=+!n.skipHeader,s=e||{},o=0,l=0;if(s&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?ks(n.origin):n.origin;o=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:o+t.length-1+a}};if(s["!ref"]){var f=Xn(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),o==-1&&(o=f.e.r+1,d.e.r=o+t.length-1+a)}else o==-1&&(o=0,d.e.r=t.length-1+a);var A=n.header||[],m=0;t.forEach(function(x,v){Ws(x).forEach(function(y){(m=A.indexOf(y))==-1&&(A[m=A.length]=y);var N=x[y],C="z",_="",j=zr({c:l+m,r:o+v+a});u=tC(s,j),N&&typeof N=="object"&&!(N instanceof Date)?s[j]=N:(typeof N=="number"?C="n":typeof N=="boolean"?C="b":typeof N=="string"?C="s":N instanceof Date?(C="d",n.cellDates||(C="n",N=Gi(N)),_=n.dateNF||Qr[14]):N===null&&n.nullError&&(C="e",N=0),u?(u.t=C,u.v=N,delete u.w,delete u.R,_&&(u.z=_)):s[j]=u={t:C,v:N},_&&(u.z=_))})}),d.e.c=Math.max(d.e.c,l+A.length-1);var g=xi(o);if(a)for(m=0;m<A.length;++m)s[js(m+l)+g]={t:"s",v:A[m]};return s["!ref"]=un(d),s}function k7e(e,t){return _ce(null,e,t)}function tC(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=ks(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?tC(e,zr(t)):tC(e,zr({r:t,c:r||0}))}function S7e(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function B7(){return{SheetNames:[],Sheets:{}}}function I7(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var o=s&&s[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=o+a)!=-1;++a);}if(fce(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function _7e(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=S7e(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function T7e(e,t){return e.z=t,e}function Tce(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function B7e(e,t,r){return Tce(e,"#"+t,r)}function I7e(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function D7e(e,t,r,n){for(var a=typeof t!="string"?t:Xn(t),s=typeof t=="string"?t:un(t),o=a.s.r;o<=a.e.r;++o)for(var l=a.s.c;l<=a.e.c;++l){var c=tC(e,o,l);c.t="n",c.F=s,delete c.v,o==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var zs={encode_col:js,encode_row:xi,encode_cell:zr,encode_range:un,decode_col:o7,decode_row:i7,split_cell:$Be,decode_cell:ks,decode_range:Vc,format_cell:wA,sheet_add_aoa:nle,sheet_add_json:_ce,sheet_add_dom:bce,aoa_to_sheet:Ey,json_to_sheet:k7e,table_to_sheet:yce,table_to_book:UMe,sheet_to_csv:T7,sheet_to_txt:Sce,sheet_to_json:e_,sheet_to_html:vce,sheet_to_formulae:j7e,sheet_to_row_object_array:e_,sheet_get_cell:tC,book_new:B7,book_append_sheet:I7,book_set_sheet_visibility:_7e,cell_set_number_format:T7e,cell_set_hyperlink:Tce,cell_set_internal_link:B7e,cell_add_comment:I7e,sheet_set_array_formula:D7e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function O7e({data:e,fileName:t,sheetName:r="Sheet 1"}){try{const n=zs.book_new(),a=zs.json_to_sheet(e);zs.book_append_sheet(n,a,r),ky(n,`${t}.xlsx`)}catch(n){console.error("Error exporting to Excel:",n),alert("Hubo un error al generar el archivo de Excel. Por favor, intente de nuevo.")}}const P7e=Array.from({length:Hs.length},(e,t)=>t+1),Yq={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},F7e=e=>{const[t,r]=w.useState([]),[n,a]=w.useState(!0),[s,o]=w.useState(null);w.useEffect(()=>e?BTe(e,f=>{r(f),a(!1)}):void 0,[e]);const l=w.useCallback(async d=>{try{return o(null),await _Te(d,e)}catch(f){throw o(f instanceof Error?f.message:"Error al guardar"),f}},[e]),c=w.useCallback(async d=>{try{o(null),await TTe(d,e)}catch(f){throw o(f instanceof Error?f.message:"Error al eliminar"),f}},[e]),u=w.useCallback(async d=>{try{return o(null),d.trim()?await DTe(e,d):t}catch(f){return o(f instanceof Error?f.message:"Error en la bsqueda"),[]}},[e,t]);return{reemplazos:t,loading:n,error:s,save:l,remove:c,search:u}},R7e=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!0);w.useEffect(()=>ITe(o=>{t(o),n(!1)}),[]);const a=w.useMemo(()=>e.map(s=>s.nombreCompleto).sort(),[e]);return{profesores:e,profesorNames:a,loading:r}},Kv=({label:e,icon:t,children:r})=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:e}),i.jsxs("div",{className:"relative",children:[t&&i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:t}),r]})]}),L7e="inline-flex items-center justify-center rounded-xl border text-sm px-3 py-2 transition-all",M7e="bg-emerald-50 border-emerald-200 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-200 dark:border-emerald-700",U7e="bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700 dark:hover:bg-slate-700",Sm=({title:e,value:t,icon:r})=>i.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsx("div",{className:"grid place-items-center h-12 w-12 rounded-xl bg-gradient-to-br from-slate-100 to-slate-200 text-slate-700 dark:from-slate-700 dark:to-slate-600 dark:text-slate-200",children:r}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:e}),i.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:t})]})]}),H7e=({data:e,title:t,period:r})=>{const n=Math.max(1,...e.map(s=>s.value)),a=["from-indigo-500 to-sky-500","from-emerald-500 to-lime-500","from-amber-500 to-orange-600","from-fuchsia-500 to-pink-500","from-cyan-500 to-teal-500","from-rose-500 to-red-500","from-violet-500 to-purple-500"];return i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[i.jsx(Tl,{className:"h-5 w-5 text-slate-400"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:t||`Reemplazos / Inasistencias por curso (${r==="month"?"mes":"total"})`})]}),e.length===0?i.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:["No hay registros ",r==="month"?"este mes":"en el perodo seleccionado","."]}):i.jsx("div",{className:"grid gap-3",children:e.map((s,o)=>i.jsxs("div",{className:"w-full",children:[i.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[i.jsx("span",{className:"font-medium",children:s.label}),i.jsx("span",{children:s.value})]}),i.jsx("div",{className:"h-3 w-full rounded-lg bg-slate-100 dark:bg-slate-700",children:i.jsx("div",{className:`h-3 rounded-lg bg-gradient-to-r ${a[o%a.length]}`,style:{width:`${s.value/n*100}%`}})})]},s.label))})]})},A6=({title:e,data:t,icon:r})=>{const n=Math.max(1,...t.map(s=>s.value)),a=["from-indigo-500 to-sky-500","from-emerald-500 to-lime-500","from-amber-500 to-orange-600","from-fuchsia-500 to-pink-500"];return i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[r,i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:e})]}),t.length===0?i.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No hay registros para mostrar."}):i.jsx("div",{className:"grid gap-3",children:t.slice(0,5).map((s,o)=>i.jsxs("div",{className:"w-full",children:[i.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[i.jsx("span",{className:"font-medium",children:s.label}),i.jsx("span",{children:s.value})]}),i.jsx("div",{className:"h-3 w-full rounded-lg bg-slate-100 dark:bg-slate-700",children:i.jsx("div",{className:`h-3 rounded-lg bg-gradient-to-r ${a[o%a.length]}`,style:{width:`${s.value/n*100}%`}})})]},s.label))})]})},Q7e=({reemplazos:e,period:t})=>{const r=w.useMemo(()=>{if(t==="month"){const a=new Date,s=a.getMonth(),o=a.getFullYear();return(e||[]).filter(l=>{if(!l.diaAusencia)return!1;const c=new Date(l.diaAusencia+"T00:00:00");return c.getMonth()===s&&c.getFullYear()===o})}return e},[e,t]),n=w.useMemo(()=>{const a=r.length,s=r.filter(u=>u.resultado==="Hora realizada").length,o=a-s,l=a>0?s/a*100:0,c=u=>Object.entries(r.reduce((d,f)=>{const A=f[u];return A&&(d[A]=(d[A]||0)+1),d},{})).map(([d,f])=>({label:d,value:f})).sort((d,f)=>f.value-d.value);return{totalReemplazos:a,horasRealizadas:s,horasCubiertas:o,porcentajeRealizadas:l,setAusentes:new Set(r.map(u=>u.docenteAusente).filter(Boolean)),setReemplazan:new Set(r.map(u=>u.docenteReemplazante).filter(Boolean)),setCursos:new Set(r.map(u=>u.curso).filter(Boolean)),setAsigAusentes:new Set(r.map(u=>u.asignaturaAusente).filter(Boolean)),ausenciasPorProfesor:c("docenteAusente"),reemplazosPorProfesor:c("docenteReemplazante"),ausenciasPorAsignatura:c("asignaturaAusente")}},[r]);return n?i.jsxs("div",{className:"grid gap-4",children:[i.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[i.jsx(Sm,{title:"Total Reemplazos",value:n.totalReemplazos,icon:i.jsx($5e,{className:"h-6 w-6"})}),i.jsx(Sm,{title:"Horas Realizadas",value:n.horasRealizadas,icon:i.jsx(pa,{className:"h-6 w-6"})}),i.jsx(Sm,{title:"Horas Cubiertas",value:n.horasCubiertas,icon:i.jsx(x2,{className:"h-6 w-6"})}),i.jsx(Sm,{title:"Efectividad",value:`${n.porcentajeRealizadas.toFixed(1)}%`,icon:i.jsx(K4e,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[i.jsx(Sm,{title:"Profesores ausentes (nicos)",value:n.setAusentes.size,icon:i.jsx(IG,{className:"h-6 w-6"})}),i.jsx(Sm,{title:"Reemplazantes (nicos)",value:n.setReemplazan.size,icon:i.jsx(U5,{className:"h-6 w-6"})}),i.jsx(Sm,{title:"Cursos (nicos)",value:n.setCursos.size,icon:i.jsx(qs,{className:"h-6 w-6"})}),i.jsx(Sm,{title:"Asignaturas ausentes (nicas)",value:n.setAsigAusentes.size,icon:i.jsx(ps,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsx(A6,{title:`Profesores con ms ausencias (${t==="month"?"mes":"total"})`,data:n.ausenciasPorProfesor,icon:i.jsx(IG,{className:"h-5 w-5 text-slate-400"})}),i.jsx(A6,{title:`Profesores que ms reemplazan (${t==="month"?"mes":"total"})`,data:n.reemplazosPorProfesor,icon:i.jsx(U5,{className:"h-5 w-5 text-slate-400"})})]}),i.jsx("div",{className:"grid gap-4",children:i.jsx(A6,{title:`Asignaturas con ms ausencias (${t==="month"?"mes":"total"})`,data:n.ausenciasPorAsignatura,icon:i.jsx(ps,{className:"h-5 w-5 text-slate-400"})})})]}):i.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:i.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-500",children:[i.jsx(pi,{className:"h-5 w-5 animate-spin"}),"Calculando estadsticas"]})})},V7e=({currentUser:e})=>{const t=e.email||e.id||"",{reemplazos:r,save:n,remove:a,search:s,loading:o,error:l}=F7e(t),{profesorNames:c,loading:u}=R7e(),[d,f]=w.useState(Yq),[A,m]=w.useState(""),[g,x]=w.useState([]),[v,y]=w.useState(null),[N,C]=w.useState(!1),[_,j]=w.useState(!1),[I,T]=w.useState("month"),[k,B]=w.useState(null);w.useEffect(()=>{(async()=>{if(!A.trim()){x(r);return}j(!0);try{const Z=await s(A);x(Z)}finally{j(!1)}})()},[r,A,s]);const M=w.useMemo(()=>{let K=[...g];return k!==null&&K.sort((Z,U)=>{const Y=k.key,R=Z[Y],D=U[Y];if(R==null)return 1;if(D==null)return-1;let W=0;if(Y==="bloquesAfectados"){const J=R,le=D;J.length<le.length?W=-1:J.length>le.length&&(W=1)}else{const J=String(R),le=String(D);W=J.localeCompare(le,"es",{numeric:!0})}return k.direction==="ascending"?W:-W}),K},[g,k]),P=K=>{let Z="ascending";k&&k.key===K&&k.direction==="ascending"&&(Z="descending"),B({key:K,direction:Z})},S=w.useCallback(K=>{const{name:Z,value:U}=K.target;f(Y=>({...Y,[Z]:U}))},[]),L=w.useCallback(K=>{f(Z=>{const Y=Z.bloquesAfectados.includes(K)?Z.bloquesAfectados.filter(R=>R!==K):[...Z.bloquesAfectados,K].sort((R,D)=>R-D);return{...Z,bloquesAfectados:Y}})},[]),H=w.useCallback(async K=>{K.preventDefault(),y(null),C(!0);const{docenteAusente:Z,asignaturaAusente:U,curso:Y,diaAusencia:R,bloquesAfectados:D,docenteReemplazante:W,asignaturaReemplazante:J}=d;if(!Z||!U||!Y||!R||!W||!J||D.length===0){y("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),C(!1);return}if(Z===W){y("El docente ausente y el reemplazante no pueden ser la misma persona."),C(!1);return}try{const le=U.trim().toLowerCase()===J.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",ie={...d,resultado:le};await n(ie),f(Yq);const re=document.createElement("div");re.className="fixed top-4 right-4 z-50 rounded-lg bg-emerald-600 px-4 py-2 text-white shadow-lg",re.textContent=le==="Hora realizada"?" Reemplazo registrado  Hora realizada":" Reemplazo registrado  Hora cubierta, no realizada",document.body.appendChild(re),setTimeout(()=>{document.body.contains(re)&&document.body.removeChild(re)},2500)}catch(le){console.error(le),y("Error al guardar el reemplazo. Intente nuevamente.")}finally{C(!1)}},[d,n]),q=w.useCallback(async K=>{if(window.confirm("Eliminar este registro?"))try{await a(K)}catch(Z){console.error(Z),alert("No se pudo eliminar. Intente nuevamente.")}},[a]),Q=w.useMemo(()=>{const K=I==="month"?r.filter(U=>{if(!U.diaAusencia)return!1;const Y=new Date(U.diaAusencia+"T00:00:00"),R=new Date;return Y.getMonth()===R.getMonth()&&Y.getFullYear()===R.getFullYear()}):r,Z={};for(const U of K){const Y=U.curso||"Sin curso";Z[Y]=(Z[Y]||0)+1}return Object.entries(Z).sort(([U],[Y])=>U.localeCompare(Y,"es")).map(([U,Y])=>({label:U,value:Y}))},[r,I]),z="w-full rounded-lg border bg-white pl-10 pr-4 py-2.5 text-slate-700 placeholder-slate-400 shadow-sm outline-none transition focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100";return!(e!=null&&e.id)&&!(e!=null&&e.email)?i.jsx("div",{className:"grid place-items-center rounded-xl border border-slate-200 bg-white p-8 text-center shadow-sm dark:border-slate-700 dark:bg-slate-800",children:i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Error: Usuario no autenticado."})}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Estadsticas"}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Mostrando datos para: ",I==="month"?"Mes Actual":"Total"]})]}),i.jsxs("div",{className:"flex items-center rounded-lg bg-slate-100 p-1 dark:bg-slate-700",children:[i.jsx("button",{onClick:()=>T("month"),className:`px-3 py-1 text-sm font-semibold rounded-md transition-colors ${I==="month"?"bg-white text-slate-800 shadow-sm dark:bg-slate-600 dark:text-white":"text-slate-600 hover:text-slate-800 dark:text-slate-300 dark:hover:text-white"}`,children:"Mes"}),i.jsx("button",{onClick:()=>T("total"),className:`px-3 py-1 text-sm font-semibold rounded-md transition-colors ${I==="total"?"bg-white text-slate-800 shadow-sm dark:bg-slate-600 dark:text-white":"text-slate-600 hover:text-slate-800 dark:text-slate-300 dark:hover:text-white"}`,children:"Total"})]})]}),i.jsx(Q7e,{reemplazos:r,period:I})]}),i.jsx(H7e,{data:Q,title:`Reemplazos / Inasistencias por curso (${I==="month"?"mes":"total"})`,period:I}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Registro de Inasistencias y Reemplazos"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Complete el formulario para registrar una nueva suplencia."})]}),u?i.jsxs("div",{className:"flex items-center justify-center gap-2 py-8 text-slate-500",children:[i.jsx(pi,{className:"h-5 w-5 animate-spin"})," Cargando profesores"]}):i.jsxs("form",{onSubmit:H,className:"space-y-8",children:[i.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qs,{className:"h-5 w-5 text-slate-400"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Ausente"})]}),i.jsx(Kv,{label:"Nombre",icon:i.jsx(yA,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:S,className:z,required:!0,disabled:N,children:[i.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(K=>i.jsx("option",{value:K,children:K},K))]})}),i.jsx(Kv,{label:"Asignatura",icon:i.jsx(ps,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:S,className:z,required:!0,disabled:N,children:[i.jsx("option",{value:"",children:"Seleccione una asignatura"}),ma.map(K=>i.jsx("option",{value:K,children:K},K))]})}),i.jsx(Kv,{label:"Curso",icon:i.jsx(qs,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"curso",value:d.curso,onChange:S,className:z,required:!0,disabled:N,children:[i.jsx("option",{value:"",children:"Seleccione un curso"}),ja.map(K=>i.jsx("option",{value:K,children:K},K))]})}),i.jsx(Kv,{label:"Da de ausencia",icon:i.jsx(qo,{className:"h-5 w-5"}),children:i.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:S,className:z,required:!0,disabled:N})}),i.jsxs("div",{children:[i.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[i.jsx(Dc,{className:"h-5 w-5 text-slate-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Bloques afectados"})]}),i.jsx("div",{className:"grid grid-cols-4 gap-2 sm:grid-cols-6",children:P7e.map(K=>{const Z=d.bloquesAfectados.includes(K);return i.jsx("button",{type:"button",onClick:()=>L(K),disabled:N,className:`${L7e} ${Z?M7e:U7e}`,"aria-pressed":Z,children:K},K)})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qs,{className:"h-5 w-5 text-slate-400"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Reemplazante"})]}),i.jsx(Kv,{label:"Nombre",icon:i.jsx(yA,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:S,className:z,required:!0,disabled:N,children:[i.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(K=>i.jsx("option",{value:K,children:K},K))]})}),i.jsx(Kv,{label:"Asignatura",icon:i.jsx(ps,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:S,className:z,required:!0,disabled:N,children:[i.jsx("option",{value:"",children:"Seleccione una asignatura"}),ma.map(K=>i.jsx("option",{value:K,children:K},K))]})}),d.asignaturaAusente&&d.asignaturaReemplazante&&i.jsxs("div",{className:"mt-4 rounded-xl border-2 border-dashed border-slate-200 p-4 dark:border-slate-700",children:[i.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Vista previa del resultado"}),i.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[i.jsx(pa,{className:"h-4 w-4"}),d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Hora realizada":"Hora cubierta, no realizada"]}),i.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden.":"Las asignaturas no coinciden."})]})]})]}),(v||l)&&i.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 text-red-700 dark:border-red-800 dark:bg-red-900/20 dark:text-red-300",children:v||l}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"submit",disabled:N||u,className:"inline-flex items-center gap-2 rounded-xl bg-slate-900 px-5 py-2.5 font-semibold text-white shadow hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:N?i.jsxs(i.Fragment,{children:[i.jsx(pi,{className:"h-4 w-4 animate-spin"})," Registrando"]}):i.jsxs(i.Fragment,{children:[i.jsx(Fl,{className:"h-4 w-4"})," Registrar Reemplazo"]})})})]})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Historial de Reemplazos"}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Mostrando ",M.length," de ",r.length," registros."]})]}),i.jsxs("div",{className:"flex w-full sm:w-auto items-center gap-2",children:[i.jsxs("div",{className:"relative w-full max-w-md",children:[i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:_?i.jsx(pi,{className:"h-5 w-5 animate-spin"}):i.jsx(wy,{className:"h-5 w-5"})}),i.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)",value:A,onChange:K=>m(K.target.value),className:z+" pl-10",disabled:_})]}),i.jsxs("button",{onClick:()=>O7e({data:M.map(K=>({Fecha:K.diaAusencia,Curso:K.curso,"Docente Ausente":K.docenteAusente,"Asignatura Ausente":K.asignaturaAusente,"Docente Reemplazante":K.docenteReemplazante,"Asignatura Reemplazante":K.asignaturaReemplazante,"Bloques Afectados":K.bloquesAfectados.join(", "),Resultado:K.resultado})),fileName:`Historial_Reemplazos_${new Date().toISOString().split("T")[0]}`,sheetName:"Reemplazos"}),disabled:M.length===0,className:"inline-flex items-center gap-2 rounded-lg bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-emerald-700 disabled:opacity-50",title:"Descargar datos filtrados a Excel",children:[i.jsx(q_e,{className:"h-4 w-4"}),i.jsx("span",{children:"Excel"})]})]})]}),o?i.jsxs("div",{className:"flex items-center justify-center gap-2 py-10 text-slate-500",children:[i.jsx(pi,{className:"h-5 w-5 animate-spin"})," Cargando reemplazos"]}):i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:i.jsxs("tr",{children:[[{label:"Fecha",key:"diaAusencia"},{label:"Curso",key:"curso"},{label:"Docente Ausente",key:"docenteAusente"},{label:"Docente Reemplazante",key:"docenteReemplazante"},{label:"Bloques",key:"bloquesAfectados"},{label:"Resultado",key:"resultado"}].map(K=>i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:i.jsxs("button",{onClick:()=>P(K.key),className:"flex items-center gap-1 hover:text-slate-700 dark:hover:text-slate-200",children:[K.label,i.jsx(U5e,{className:"h-3 w-3"})]})},K.key)),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:"Acciones"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 bg-white dark:divide-slate-700 dark:bg-slate-800",children:M.length>0?M.map(K=>i.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/40",children:[i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-200",children:new Date(K.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:K.curso}),i.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[K.docenteAusente,i.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:K.asignaturaAusente})]}),i.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[K.docenteReemplazante,i.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:K.asignaturaReemplazante})]}),i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:K.bloquesAfectados.join(", ")}),i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:i.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${K.resultado==="Hora realizada"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[i.jsx(pa,{className:"h-4 w-4"}),K.resultado]})}),i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:i.jsx("button",{onClick:()=>q(K.id),title:"Eliminar registro",className:"rounded-full p-2 text-red-600 hover:bg-red-50 hover:text-red-700 dark:text-red-300 dark:hover:bg-red-900/30",disabled:N,children:i.jsx(Vn,{className:"h-4 w-4"})})})]},K.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:A?"No se encontraron resultados para tu bsqueda.":"An no hay registros."})})})]}),M.length>0&&!A&&i.jsxs("div",{className:"mt-4 text-center text-sm text-slate-500 dark:text-slate-400",children:["Mostrando los ltimos ",M.length," registros"]})]})]})]})},$7e=e=>{console.log(" Iniciando suscripcin a todos los reemplazos...");try{const t=ht(Ar,"reemplazos"),r=Bt(t,Xt("fecha","desc"));return lr(r,a=>{const s=[];a.forEach(o=>{const l=o.data();s.push({id:o.id,...l})}),console.log(" Reemplazos cargados para dashboard:",s.length),e(s)},a=>{throw console.error(" Error al cargar reemplazos:",a),a})}catch(t){throw console.error(" Error al configurar suscripcin a reemplazos:",t),t}},z7e=e=>{console.log(" Iniciando suscripcin a todos los acompaamientos...");try{const t=ht(Ar,"acompanamientos"),r=Bt(t,Xt("fecha","desc"));return lr(r,a=>{const s=[];a.forEach(o=>{const l=o.data();s.push({id:o.id,...l})}),console.log(" Acompaamientos cargados para dashboard:",s.length),e(s)},a=>{throw console.error(" Error al cargar acompaamientos:",a),a})}catch(t){throw console.error(" Error al configurar suscripcin a acompaamientos:",t),t}},G7e=e=>{console.log(" Iniciando suscripcin a todos los eventos del calendario...");try{const t=ht(Ar,"calendar_events"),r=Bt(t,Xt("date","asc"));return lr(r,a=>{const s=[];a.forEach(o=>{const l=o.data();s.push({id:o.id,...l})}),console.log(" Eventos del calendario cargados para dashboard:",s.length),e(s)},a=>{throw console.error(" Error al cargar eventos del calendario:",a),a})}catch(t){throw console.error(" Error al configurar suscripcin a eventos del calendario:",t),t}},bh=({title:e,value:t,description:r,isLoading:n=!1})=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),n?i.jsxs("div",{className:"flex items-center mt-2",children:[i.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),i.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:t}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),Eg=({title:e,data:t,colorClass:r,valueFormatter:n=s=>String(s),isLoading:a=!1})=>{const s=w.useMemo(()=>t.map(l=>typeof l.value=="number"?l.value:parseFloat(String(l.value))||0),[t]),o=w.useMemo(()=>Math.max(...s,1),[s]);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),a?i.jsxs("div",{className:"flex justify-center items-center py-8",children:[i.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),i.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):i.jsx("div",{className:"space-y-4",children:t.length>0?t.sort((l,c)=>(typeof c.value=="number"?c.value:0)-(typeof l.value=="number"?l.value:0)).map((l,c)=>{const u=typeof l.value=="number"?l.value:parseFloat(String(l.value))||0;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:l.label}),i.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(l.value)})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:i.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/o*100}%`}})})]},l.label+c)}):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},q7e=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[a,s]=w.useState([]),[o,l]=w.useState(!0),[c,u]=w.useState(null);return w.useEffect(()=>{console.log(" Iniciando carga de datos del dashboard...");let d=0;const f=3,A=()=>{d++,d>=f&&(l(!1),console.log(" Todos los datos del dashboard cargados"))};try{const m=$7e(v=>{t(v),A()}),g=z7e(v=>{n(v),A()}),x=G7e(v=>{s(v),A()});return()=>{m(),g(),x()}}catch(m){console.error(" Error al configurar suscripciones del dashboard:",m),u(m instanceof Error?m.message:"Error al cargar datos del dashboard"),l(!1)}},[]),{registros:e,acompanamientos:r,calendarEvents:a,loading:o,error:c}},K7e=({currentUser:e})=>{var f,A;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log(" Dashboard - currentUser completo:",e),console.log(" Dashboard - currentUser.profile:",e==null?void 0:e.profile),console.log(" Dashboard - Verificacin de perfil:",(e==null?void 0:e.profile)==="SUBDIRECCION"),console.log(" Dashboard - Typeof profile:",typeof(e==null?void 0:e.profile)),console.log(" Dashboard - Profile length:",(f=e==null?void 0:e.profile)==null?void 0:f.length),console.log(" Dashboard - Profile con comillas:",`"${e==null?void 0:e.profile}"`),console.log(" Dashboard - Comparacin con trim:",((A=e==null?void 0:e.profile)==null?void 0:A.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:t,acompanamientos:r,calendarEvents:n,loading:a,error:s}=q7e(),[o,l]=w.useState(K2);if(console.log(" Dashboard - Datos recibidos:",{registros:t.length,acompanamientos:r.length,calendarEvents:n.length,loading:a,error:s,currentUser:e==null?void 0:e.profile}),w.useEffect(()=>{try{const m=localStorage.getItem("acompanamientoDocenteCustomRubrica");l(m?JSON.parse(m):K2)}catch(m){console.error("Error al leer rbrica personalizada",m),l(K2)}},[]),console.log(" Dashboard - Verificando permisos..."),console.log(" Dashboard - currentUser existe:",!!e),console.log(" Dashboard - profile value:",`"${e==null?void 0:e.profile}"`),console.log(" Dashboard - comparacin exacta:",(e==null?void 0:e.profile)==="SUBDIRECCION"),!e)return console.log(" Dashboard - currentUser es null/undefined"),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(e.profile!=="SUBDIRECCION")return console.log(" Dashboard - Perfil no autorizado:",e.profile),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("span",{className:"text-6xl mb-4",children:""}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard est disponible solo para usuarios con perfil de Subdireccin."}),i.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[i.jsx("p",{children:i.jsx("strong",{children:"Debug Info:"})}),i.jsxs("p",{children:['Su perfil actual: "',e.profile,'"']}),i.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),i.jsxs("p",{children:["Usuario: ",e.email||e.nombreCompleto]})]})]});if(console.log(" Dashboard - Permisos verificados correctamente"),s)return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("span",{className:"text-6xl mb-4",children:""}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),i.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:s}),i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Pgina"})]});const c=w.useMemo(()=>{const m=t.length;if(m===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const g=t.filter(j=>j.resultado==="Hora realizada").length,x=m-g,v=`${(g/m*100).toFixed(1)}%`,y=(j,I)=>j.reduce((T,k)=>{const B=k[I];return typeof B=="string"&&(T[B]=(T[B]||0)+1),T},{}),N=y(t,"docenteAusente"),C=y(t,"docenteReemplazante"),_=y(t,"curso");return{totalInasistencias:m,horasRealizadas:g,horasCubiertas:x,tasaCobertura:v,inasistenciasPorDocente:Object.entries(N).map(([j,I])=>({label:j,value:I})),reemplazosPorDocente:Object.entries(C).map(([j,I])=>({label:j,value:I})),inasistenciasPorCurso:Object.entries(_).map(([j,I])=>({label:j,value:I})),distribucionResultados:[{label:"Hora Realizada",value:g},{label:"Hora Cubierta",value:x}]}},[t]),u=w.useMemo(()=>{const m=r.length;if(m===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const g=new Map;o.forEach(I=>{I.criteria.forEach(T=>{g.set(T.name,I.domain)})});let x=0,v=0;const y={},N={};r.forEach(I=>{y[I.docente]||(y[I.docente]={total:0,count:0}),Object.entries(I.rubricaResultados).forEach(([T,k])=>{x+=k,v++,y[I.docente].total+=k,y[I.docente].count++;const B=g.get(T);B&&(N[B]||(N[B]={total:0,count:0}),N[B].total+=k,N[B].count++)})});const C=v>0?(x/v).toFixed(2):"N/A",_=Object.entries(y).map(([I,T])=>({label:I,value:T.count>0?(T.total/T.count).toFixed(2):0})),j=Object.entries(N).map(([I,T])=>({label:I,value:T.count>0?(T.total/T.count).toFixed(2):0}));return{totalAcompanamientos:m,promedioGeneral:C,desempenoPorDocente:_,desempenoPorDominio:j}},[r,o]),d=w.useMemo(()=>{const m={[An.EVALUACION]:0,[An.ACTO]:0,[An.ACTIVIDAD_FOCALIZADA]:0,[An.SALIDA_PEDAGOGICA]:0};for(const x of n)m.hasOwnProperty(x.type)&&m[x.type]++;const g=Object.entries(m).map(([x,v])=>({label:n1[x].label,value:v}));return{totalEvaluaciones:m[An.EVALUACION],totalActos:m[An.ACTO],totalActividadesFocalizadas:m[An.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:m[An.SALIDA_PEDAGOGICA],distribucionEventos:g}},[n]);return a?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):c.totalInasistencias===0&&u.totalAcompanamientos===0&&n.length===0?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("span",{className:"text-6xl mb-4",children:""}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdireccin"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"An no hay datos para mostrar. Comience por aadir registros en los mdulos correspondientes."}),i.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[i.jsx("p",{children:" Mdulo de Inasistencias y Reemplazos"}),i.jsx("p",{children:" Mdulo de Acompaamiento Docente"}),i.jsx("p",{children:" Calendario Acadmico"})]})]}):i.jsxs("div",{className:"space-y-12 animate-fade-in",children:[i.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdireccin"}),i.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),i.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["ltima actualizacin: ",new Date().toLocaleString("es-CL")]})]}),t.length>0&&i.jsxs("div",{className:"space-y-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Dashboard de Inasistencias y Reemplazos"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(bh,{title:"Total Inasistencias",value:c.totalInasistencias,description:"Registros totales",isLoading:a}),i.jsx(bh,{title:"Horas Realizadas",value:c.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:a}),i.jsx(bh,{title:"Horas Cubiertas",value:c.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:a}),i.jsx(bh,{title:"Tasa de Cobertura Efectiva",value:c.tasaCobertura,description:"% de horas realizadas",isLoading:a})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx(Eg,{title:"Inasistencias por Docente",data:c.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:a}),i.jsx(Eg,{title:"Reemplazos por Docente",data:c.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:a}),i.jsx(Eg,{title:"Inasistencias por Curso",data:c.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:a}),i.jsx(Eg,{title:"Distribucin de Resultados",data:c.distribucionResultados,colorClass:"bg-green-400",isLoading:a})]})]}),r.length>0&&i.jsxs("div",{className:"space-y-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Dashboard de Acompaamiento Docente"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(bh,{title:"Total Acompaamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:a}),i.jsx(bh,{title:"Promedio General",value:u.promedioGeneral,description:"Calificacin promedio (1-4)",isLoading:a})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx(Eg,{title:"Desempeo Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:a}),i.jsx(Eg,{title:"Desempeo Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:a})]})]}),n.length>0&&i.jsxs("div",{className:"space-y-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Resumen del Calendario Acadmico"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(bh,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:a}),i.jsx(bh,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:a}),i.jsx(bh,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:a}),i.jsx(bh,{title:"Salidas Pedaggicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:a})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx(Eg,{title:"Distribucin de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:a}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Prximos Eventos"}),a?i.jsxs("div",{className:"flex justify-center items-center py-8",children:[i.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),i.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):i.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(m=>new Date(m.date)>=new Date).slice(0,5).map((m,g)=>{var x,v;return i.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:m.responsables||"Evento sin ttulo"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(m.date).toLocaleDateString("es-CL")}),m.ubicacion&&i.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:[" ",m.ubicacion]})]}),i.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((x=n1[m.type])==null?void 0:x.color)||"bg-gray-100 text-gray-800"}`,children:((v=n1[m.type])==null?void 0:v.label)||m.type})]})},m.id||g)}),n.filter(m=>new Date(m.date)>=new Date).length===0&&i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos prximos programados"})]})]})]})]}),i.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:" Resumen Ejecutivo"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:t.length+r.length+n.length}),i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...t.map(m=>m.docenteAusente),...r.map(m=>m.docente)]).size}),i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(t.filter(m=>m.resultado==="Hora realizada").length/Math.max(t.length,1)*100),"%"]}),i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),i.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[i.jsx("p",{children:"Dashboard de Subdireccin - Sistema de Gestin Pedaggica"}),i.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})},RF="carga_horaria_asignaciones",Bce="usuarios",W7e=e=>{const t=e.data();return{id:e.id,...t}},X7e=e=>{const t=Bt(ht(ut,Bce),sr("profile","in",["PROFESORADO","SUBDIRECCION","COORDINACION_TP"]),Xt("nombreCompleto","asc"));return lr(t,n=>{const a=n.docs.map(s=>{const o=s.data();return{id:s.id,nombre:o.nombreCompleto||o.nombre||o.email||"Sin nombre",departamento:o.departamento||"General",horasContrato:o.horasContrato||44,perfil:o.profile||"PROFESORADO",email:o.email}});e(a)},n=>{console.error("Error al suscribirse a los docentes:",n),e([])})},Y7e=async e=>{try{return(await ln(ht(ut,Bce),{nombreCompleto:e.nombre,email:e.email,departamento:e.departamento||"General",horasContrato:e.horasContrato,profile:e.perfil,createdAt:zn()})).id}catch(t){throw console.error("Error al crear nuevo docente:",t),new Error("No se pudo crear el docente.")}},J7e=e=>{const t=Bt(ht(ut,RF),Xt("docenteNombre","asc"));return lr(t,n=>{const a=n.docs.map(s=>W7e(s));e(a)},n=>{console.error("Error al suscribirse a las asignaciones:",n),e([])})},Z7e=async(e,t=!1)=>{try{if(t){const a=(await Ir(ht(ut,RF))).docs.map(s=>ca(s.ref));await Promise.all(a),console.log(`Se eliminaron ${a.length} asignaciones existentes`)}const r=e.map(n=>ln(ht(ut,RF),{...n,createdAt:zn(),updatedAt:zn()}));await Promise.all(r),console.log(`Se guardaron ${r.length} asignaciones`)}catch(r){throw console.error("Error al guardar asignaciones en batch:",r),new Error("No se pudieron guardar todas las asignaciones.")}},t_=e=>{const t={44:38,43:37,42:36,41:35,40:35,39:34,38:33,37:32,36:31,35:30,34:29,33:29,32:28,31:27,30:26,29:25,28:24,27:23,26:22,25:22,24:21,23:20,22:19,21:18,20:17,19:16,18:16,17:15,16:14,15:13,14:12,13:11,12:10,11:10,10:9,9:8,8:7,7:6,6:5,5:4,4:3,3:2,2:1,1:1};return t[e]!==void 0?t[e]:Math.round(e*.65)},w2=e=>{const t=t_(e);return e-t},IS=e=>Object.values(e).reduce((t,r)=>t+(r||0),0),Ice=(e,t)=>{const r=t_(e.horasContrato),n=w2(e.horasContrato),a=t.filter(m=>m.docenteId===e.id),s=a.reduce((m,g)=>m+IS(g.horasPorCurso),0),o=a.reduce((m,g)=>{if(g.funcionesLectivas&&g.funcionesLectivas.length>0)return m+g.funcionesLectivas.reduce((x,v)=>x+v.horas,0);if(g.funcionesNoLectivas&&g.funcionesNoLectivas.length>0)return m+g.funcionesNoLectivas.reduce((x,v)=>x+v.horas,0);{const x=g.otraFuncion&&parseInt(g.otraFuncion)||0;return m+x}},0),l=s+o,c=0,u=r-l,d=n-c,f=[],A=[];return l>r&&f.push(`Excede horas lectivas: ${l}/${r}`),c>n&&f.push(`Excede horas no lectivas: ${c}/${n}`),l<r&&l>0&&A.push(`Faltan ${u} horas lectivas`),{HA:r,HB:n,sumCursos:s,sumFunciones:c,sumFuncionesLectivas:o,totalHorasLectivas:l,restantesHA:u,restantesHB:d,horasContrato:e.horasContrato,valido:f.length===0,warnings:A,errors:f}},eUe=(e,t)=>{const r=Ice(e,t),n=[];return r.errors.forEach(a=>{n.push({asignacionId:"",docenteId:e.id,tipo:"error",mensaje:`${e.nombre}: ${a}`})}),r.warnings.forEach(a=>{n.push({asignacionId:"",docenteId:e.id,tipo:"warning",mensaje:`${e.nombre}: ${a}`})}),n},tUe=e=>{const t=e.match(/^(\d+)([A-E])$/i);return t?`${t[1]}${t[2].toUpperCase()}`:e},Dce="horarios_generados",rUe=async e=>{try{const t=Wt(ut,Dce,"global");await bi(t,{data:e})}catch(t){throw console.error("Error al guardar los horarios:",t),new Error("No se pudieron guardar los horarios generados.")}},Oce=e=>{const t=Wt(ut,Dce,"global");return lr(t,n=>{n.exists()?e(n.data().data||{}):e({})},n=>{console.error("Error al suscribirse a los horarios:",n),e({})})};var Jq;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(Jq||(Jq={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zq;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(Zq||(Zq={}));var eK;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(eK||(eK={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tK=["user","model","function","system"];var rK;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(rK||(rK={}));var nK;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(nK||(nK={}));var aK;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(aK||(aK={}));var sK;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(sK||(sK={}));var nN;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(nN||(nN={}));var iK;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(iK||(iK={}));var oK;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(oK||(oK={}));var lK;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(lK||(lK={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class Wv extends kl{constructor(t,r){super(t),this.response=r}}class Pce extends kl{constructor(t,r,n,a){super(t),this.status=r,this.statusText=n,this.errorDetails=a}}class fp extends kl{}class Fce extends kl{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nUe="https://generativelanguage.googleapis.com",aUe="v1beta",sUe="0.24.1",iUe="genai-js";var Rx;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Rx||(Rx={}));class oUe{constructor(t,r,n,a,s){this.model=t,this.task=r,this.apiKey=n,this.stream=a,this.requestOptions=s}toString(){var t,r;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||aUe;let s=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||nUe}/${n}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function lUe(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${iUe}/${sUe}`),t.join(" ")}async function cUe(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",lUe(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(a){throw new fp(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${a.message}`)}for(const[a,s]of n.entries()){if(a==="x-goog-api-key")throw new fp(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new fp(`Header name ${a} can only be set using the apiClient field`);r.append(a,s)}}return r}async function uUe(e,t,r,n,a,s){const o=new oUe(e,t,r,n,s);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},AUe(s)),{method:"POST",headers:await cUe(o),body:a})}}async function rE(e,t,r,n,a,s={},o=fetch){const{url:l,fetchOptions:c}=await uUe(e,t,r,n,a,s);return dUe(l,c,o)}async function dUe(e,t,r=fetch){let n;try{n=await r(e,t)}catch(a){fUe(a,e)}return n.ok||await hUe(n,e),n}function fUe(e,t){let r=e;throw r.name==="AbortError"?(r=new Fce(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof Pce||e instanceof fp||(r=new kl(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function hUe(e,t){let r="",n;try{const a=await e.json();r=a.error.message,a.error.details&&(r+=` ${JSON.stringify(a.error.details)}`,n=a.error.details)}catch{}throw new Pce(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}function AUe(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D7(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),DS(e.candidates[0]))throw new Wv(`${Um(e)}`,e);return mUe(e)}else if(e.promptFeedback)throw new Wv(`Text not available. ${Um(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),DS(e.candidates[0]))throw new Wv(`${Um(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),cK(e)[0]}else if(e.promptFeedback)throw new Wv(`Function call not available. ${Um(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),DS(e.candidates[0]))throw new Wv(`${Um(e)}`,e);return cK(e)}else if(e.promptFeedback)throw new Wv(`Function call not available. ${Um(e)}`,e)},e}function mUe(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const o of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)o.text&&s.push(o.text),o.executableCode&&s.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&s.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function cK(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const o of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)o.functionCall&&s.push(o.functionCall);if(s.length>0)return s}const pUe=[nN.RECITATION,nN.SAFETY,nN.LANGUAGE];function DS(e){return!!e.finishReason&&pUe.includes(e.finishReason)}function Um(e){var t,r,n;let a="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)a+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(a+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const s=e.candidates[0];DS(s)&&(a+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(a+=`: ${s.finishMessage}`))}return a}function rC(e){return this instanceof rC?(this.v=e,this):new rC(e)}function gUe(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,s=[];return a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a;function o(A){n[A]&&(a[A]=function(m){return new Promise(function(g,x){s.push([A,m,g,x])>1||l(A,m)})})}function l(A,m){try{c(n[A](m))}catch(g){f(s[0][3],g)}}function c(A){A.value instanceof rC?Promise.resolve(A.value.v).then(u,d):f(s[0][2],A)}function u(A){l("next",A)}function d(A){l("throw",A)}function f(A,m){A(m),s.shift(),s.length&&l(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uK=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function xUe(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=yUe(t),[n,a]=r.tee();return{stream:bUe(n),response:vUe(a)}}async function vUe(e){const t=[],r=e.getReader();for(;;){const{done:n,value:a}=await r.read();if(n)return D7(wUe(t));t.push(a)}}function bUe(e){return gUe(this,arguments,function*(){const r=e.getReader();for(;;){const{value:n,done:a}=yield rC(r.read());if(a)break;yield yield rC(D7(n))}})}function yUe(e){const t=e.getReader();return new ReadableStream({start(n){let a="";return s();function s(){return t.read().then(({value:o,done:l})=>{if(l){if(a.trim()){n.error(new kl("Failed to parse stream"));return}n.close();return}a+=o;let c=a.match(uK),u;for(;c;){try{u=JSON.parse(c[1])}catch{n.error(new kl(`Error parsing JSON response: "${c[1]}"`));return}n.enqueue(u),a=a.substring(c[0].length),c=a.match(uK)}return s()}).catch(o=>{let l=o;throw l.stack=o.stack,l.name==="AbortError"?l=new Fce("Request aborted when reading from the stream"):l=new kl("Error reading from the stream"),l})}}})}function wUe(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let a=0;for(const s of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[a]||(r.candidates[a]={index:a}),r.candidates[a].citationMetadata=s.citationMetadata,r.candidates[a].groundingMetadata=s.groundingMetadata,r.candidates[a].finishReason=s.finishReason,r.candidates[a].finishMessage=s.finishMessage,r.candidates[a].safetyRatings=s.safetyRatings,s.content&&s.content.parts){r.candidates[a].content||(r.candidates[a].content={role:s.content.role||"user",parts:[]});const o={};for(const l of s.content.parts)l.text&&(o.text=l.text),l.functionCall&&(o.functionCall=l.functionCall),l.executableCode&&(o.executableCode=l.executableCode),l.codeExecutionResult&&(o.codeExecutionResult=l.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),r.candidates[a].content.parts.push(o)}a++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rce(e,t,r,n){const a=await rE(t,Rx.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n);return xUe(a)}async function Lce(e,t,r,n){const s=await(await rE(t,Rx.GENERATE_CONTENT,e,!1,JSON.stringify(r),n)).json();return{response:D7(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mce(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function nC(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return NUe(t)}function NUe(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,a=!1;for(const s of e)"functionResponse"in s?(r.parts.push(s),a=!0):(t.parts.push(s),n=!0);if(n&&a)throw new kl("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!a)throw new kl("No content is provided for sending chat message.");return n?t:r}function CUe(e,t){var r;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const a=e.generateContentRequest!=null;if(e.contents){if(a)throw new fp("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(a)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const s=nC(e);n.contents=[s]}return{generateContentRequest:n}}function dK(e){let t;return e.contents?t=e:t={contents:[nC(e)]},e.systemInstruction&&(t.systemInstruction=Mce(e.systemInstruction)),t}function EUe(e){return typeof e=="string"||Array.isArray(e)?{content:nC(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fK=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],jUe={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function kUe(e){let t=!1;for(const r of e){const{role:n,parts:a}=r;if(!t&&n!=="user")throw new kl(`First content should be with role 'user', got ${n}`);if(!tK.includes(n))throw new kl(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(tK)}`);if(!Array.isArray(a))throw new kl("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new kl("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const l of a)for(const c of fK)c in l&&(s[c]+=1);const o=jUe[n];for(const l of fK)if(!o.includes(l)&&s[l]>0)throw new kl(`Content with role '${n}' can't contain '${l}' part`);t=!0}}function hK(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AK="SILENT_ERROR";class SUe{constructor(t,r,n,a={}){this.model=r,this.params=n,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(kUe(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var n,a,s,o,l,c;await this._sendPromise;const u=nC(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r);let A;return this._sendPromise=this._sendPromise.then(()=>Lce(this._apiKey,this.model,d,f)).then(m=>{var g;if(hK(m.response)){this._history.push(u);const x=Object.assign({parts:[],role:"model"},(g=m.response.candidates)===null||g===void 0?void 0:g[0].content);this._history.push(x)}else{const x=Um(m.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}A=m}).catch(m=>{throw this._sendPromise=Promise.resolve(),m}),await this._sendPromise,A}async sendMessageStream(t,r={}){var n,a,s,o,l,c;await this._sendPromise;const u=nC(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r),A=Rce(this._apiKey,this.model,d,f);return this._sendPromise=this._sendPromise.then(()=>A).catch(m=>{throw new Error(AK)}).then(m=>m.response).then(m=>{if(hK(m)){this._history.push(u);const g=Object.assign({},m.candidates[0].content);g.role||(g.role="model"),this._history.push(g)}else{const g=Um(m);g&&console.warn(`sendMessageStream() was unsuccessful. ${g}. Inspect response object for details.`)}}).catch(m=>{m.message!==AK&&console.error(m)}),A}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _Ue(e,t,r,n){return(await rE(t,Rx.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TUe(e,t,r,n){return(await rE(t,Rx.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}async function BUe(e,t,r,n){const a=r.requests.map(o=>Object.assign(Object.assign({},o),{model:t}));return(await rE(t,Rx.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:a}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mK{constructor(t,r,n={}){this.apiKey=t,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=Mce(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var n;const a=dK(t),s=Object.assign(Object.assign({},this._requestOptions),r);return Lce(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}async generateContentStream(t,r={}){var n;const a=dK(t),s=Object.assign(Object.assign({},this._requestOptions),r);return Rce(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}startChat(t){var r;return new SUe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const n=CUe(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),r);return _Ue(this.apiKey,this.model,n,a)}async embedContent(t,r={}){const n=EUe(t),a=Object.assign(Object.assign({},this._requestOptions),r);return TUe(this.apiKey,this.model,n,a)}async batchEmbedContents(t,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return BUe(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new kl("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new mK(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,n){if(!t.name)throw new fp("Cached content must contain a `name` field.");if(!t.model)throw new fp("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const o of a)if(r!=null&&r[o]&&t[o]&&(r==null?void 0:r[o])!==t[o]){if(o==="model"){const l=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,c=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(l===c)continue}throw new fp(`Different value for "${o}" specified in modelParams (${r[o]}) and cachedContent (${t[o]})`)}const s=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new mK(this.apiKey,s,n)}}const IUe=[{model:"gemini-2.5-pro",generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:2048}},{model:"gemini-2.5-flash-lite",generationConfig:{temperature:.7,maxOutputTokens:1024}}],Uce=()=>(console.warn("No se encontr la API key de Gemini"),null);async function DUe(e,t){try{const r=e.getGenerativeModel(t);return await r.generateContent("test"),r}catch(r){return console.warn(`Modelo ${t.model} no disponible:`,r),null}}async function aC(){const e=Uce();if(!e)return null;for(const t of IUe){const r=await DUe(e,t);if(r)return console.log(`Usando modelo ${t.model}`),r}return console.error("No se encontr ningn modelo de Gemini disponible"),null}function Hce(e){try{const t=e.trim().replace(/^```json/i,"").replace(/^```/i,"").replace(/```$/i,"");return JSON.parse(t)}catch{return null}}function OUe(e){const t=[...e];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t}async function PUe(e,t=3){var n;const r=await aC();if(!r)return m6(e,t);try{const a=`Genera ${t} preguntas de seleccin mltiple sobre el tema "${e}".
    Para cada pregunta, proporciona:
    1. Un enunciado claro y conciso
    2. 4 opciones de respuesta plausibles
    
    Devuelve las preguntas en formato JSON como este:
    {
      "preguntas": [
        {
          "enunciado": "Pregunta 1?",
          "opciones": ["Opcin 1", "Opcin 2", "Opcin 3", "Opcin 4"]
        }
      ]
    }`,o=(await r.generateContent(a)).response.text(),l=Hce(o);return(n=l==null?void 0:l.preguntas)!=null&&n.length?l.preguntas.slice(0,t):(console.warn("Formato inesperado de respuesta:",o),m6(e,t))}catch(a){return console.error("Error al generar preguntas:",a),m6(e,t)}}async function FUe(e,t=30){var n;const r=await aC();if(!r)return p6(e);try{const a=e.filter(u=>u&&u.trim());if(a.length===0)return[];const s=`Analiza estas respuestas y extrae los conceptos clave con su relevancia:
    ${a.join(`
---
`)}
    
    Responde en formato JSON:
    {
      "keywords": [
        { "keyword": "concepto1", "score": 0.9 },
        { "keyword": "concepto2", "score": 0.8 }
      ]
    }
    
    Incluye hasta ${t} conceptos ms relevantes.`,l=(await r.generateContent(s)).response.text(),c=Hce(l);return(n=c==null?void 0:c.keywords)!=null&&n.length?c.keywords.filter(u=>u.keyword&&typeof u.score=="number").slice(0,t):(console.warn("Formato inesperado de respuesta:",l),p6(e))}catch(a){return console.error("Error al analizar respuestas:",a),p6(e)}}function m6(e,t){const r=["Totalmente de acuerdo","De acuerdo","Neutral","En desacuerdo","Totalmente en desacuerdo"];return Array(t).fill(null).map((n,a)=>({enunciado:`Pregunta ${a+1} sobre ${e}`,opciones:OUe(r).slice(0,4)}))}function p6(e){const t=new Set(["el","la","los","las","un","una","unos","unas","de","del","a","ante","con","en","para","por","sobre","y","o","pero","si","no","que","cual","quien","como"]),r={},n=e.join(" ").toLowerCase().split(/\W+/).filter(a=>a.length>3&&!t.has(a));for(const a of n)r[a]=(r[a]||0)+1;return Object.entries(r).sort(([,a],[,s])=>s-a).slice(0,20).map(([a,s])=>({keyword:a,score:Math.min(1,s/n.length)}))}async function RUe(){const e=Uce();if(!e)return null;const t={model:"gemini-2.5-pro",generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:2048}};try{const r=e.getGenerativeModel(t);return await r.generateContent("test"),console.log(`Usando modelo optimizado: ${t.model}`),r}catch(r){return console.warn("Modelo Pro no disponible, usando fallback:",r),aC()}}async function O7(e,t=2,r=!0,n="General"){var d,f;const a=e.substring(0,50).replace(/\n/g," ")+"...";console.log(`Iniciando generacin con IA. Prompt: "${a}"`),console.log(`Configuracin: maxRetries=${t}, useProModel=${r}`);try{const m=await vl(Tx,"callGeminiGeneric")({prompt:e,module:n});if((d=m==null?void 0:m.data)!=null&&d.success&&typeof m.data.response=="string"&&m.data.response.length>0)return console.log("Respuesta obtenida va Cloud Function (genrica)."),m.data.response;const x=await vl(Tx,"callGeminiAI")({prompt:e,module:n});if((f=x==null?void 0:x.data)!=null&&f.success&&typeof x.data.response=="string"&&x.data.response.length>0)return console.log("Respuesta obtenida va Cloud Function (secreto en backend)."),x.data.response}catch(A){const m=(A==null?void 0:A.message)||String(A);console.warn("Fallo llamada a Cloud Function callGeminiAI, intentando otras rutas:",m)}let s;try{if(r?(console.log("Intentando usar modelo Pro prioritariamente..."),s=await RUe(),s||(console.warn("Modelo Pro no disponible, intentando fallback a modelos alternativos"),s=await aC())):s=await aC(),!s)throw console.warn("IA en cliente no disponible (sin API key en frontend o sin conectividad). Usar fallback."),new Error("IA_NOT_AVAILABLE")}catch(A){throw console.warn("Inicializacin de IA fallida, continuando con fallback:",A),new Error("IA_NOT_AVAILABLE")}let o=0,l,c="",u=0;for(;o<=t;){try{console.log(`Intento ${o+1}/${t+1} de generacin con IA`);const A=e+`

IMPORTANTE: Devuelve SOLO el JSON estructurado sin comentarios adicionales. El JSON debe ser vlido y parseable.`,m=await s.generateContent(A);if(m!=null&&m.response&&typeof m.response.text=="function"){const g=m.response.text();if(g&&g.length>100){if(console.log(`Respuesta generada exitosamente (${g.length} caracteres)`),g.includes("{")&&g.includes("}")||g.includes("[")&&g.includes("]"))return console.log("La respuesta contiene estructuras JSON"),g;if(console.warn("La respuesta no parece contener JSON vlido"),g.length>u&&(c=g,u=g.length),o===t)return console.log("Usando la mejor respuesta disponible en el ltimo intento"),c}else console.warn("Respuesta de IA demasiado corta, reintentando...")}else if(m){const g=typeof m=="string"?m:JSON.stringify(m);return console.warn("Formato de respuesta inesperado, usando fallback a string"),g}else console.warn("No se recibi respuesta vlida del modelo")}catch(A){console.error(`Error en intento ${o+1}:`,A),l=A,A.message&&(A.message.includes("token")||A.message.includes("length")||A.message.includes("limit"))&&(console.log("Error relacionado con lmites de tokens, intentando simplificar el prompt"),e=e.substring(0,Math.floor(e.length*.75)))}if(o++,o<=t){const A=Math.min(1e3*Math.pow(2,o),8e3);console.log(`Esperando ${A}ms antes de reintentar...`),await new Promise(m=>setTimeout(m,A))}}if(c)return console.log("Devolviendo la mejor respuesta disponible despus de agotar reintentos"),c;throw console.error(`Todos los intentos de generacin fallaron despus de ${t+1} intentos`),l||new Error("No se pudo generar contenido despus de mltiples intentos. Por favor, intente nuevamente.")}const n_=e=>{const[t,r]=e.split(":").map(Number);return t*60+r},LUe=e=>e==="Viernes",pK=(e,t)=>{if(!LUe(e))return!0;const r=Hs.find(n=>n.bloque===t);return!!r&&n_(r.fin)<=n_("13:00")},N2=e=>{const t=(e||"").toLowerCase();return["mecnica","mecanica","taller","mquinas","maquinas","automotriz","electromecnica","electromecanica","metal","soldadura","tp"].some(r=>t.includes(r))},Hg=e=>{const t=(e||"").toLowerCase();return["lenguaje","matem","historia","ingls","ingles","ciencias","biologa","biologia","qumica","quimica","fsica","fisica","ed. fsica","educacin fsica","ciudadana","ciudadania"].some(r=>t.includes(r))},LF=e=>{const t=(e||"").toLowerCase();return["taller","prctica","practica","laboratorio","mecnica","mecanica","electr","maquin","tp"].some(r=>t.includes(r))},MF=e=>{const t=Hs.find(r=>r.bloque===e);return t?n_(t.inicio)>=n_("13:40"):!1};function P7(){const e={};for(const t of Kh){e[t]={};for(const r of Hs){const n=String(r.bloque);e[t][n]={}}}return e}function Qce(e){const t=[];for(const r of Object.keys(e)){const n=e[r];for(const a of Object.keys(n)){const s=n[a],o=new Map;for(const l of Object.keys(s)){const c=s[l];if(c!=null&&c.profesor){const u=o.get(c.profesor)||[];u.push(l),o.set(c.profesor,u)}}for(const[l,c]of o.entries())c.length>1&&t.push(`Tope docente ${l} el ${r} bloque ${a} en cursos: ${c.join(", ")}`)}}return t}function MUe(e,t){const r=P7();for(const n of e){if(!r[n.dia])continue;const a=String(n.bloque);r[n.dia][a]&&t.includes(n.curso)&&(r[n.dia][a][n.curso]={asignatura:n.asignatura,profesor:n.docente})}return r}function UUe(e,t,r){var d,f,A,m;const n=P7(),a=e.map(g=>({...g})),s={},o={},l=(g,x)=>`${g}|${x}`;for(const g of t)s[g]={};a.sort((g,x)=>x.horas-g.horas);const c=(g,x)=>Hs.map(v=>v.bloque).filter(v=>!!n[x][String(v)][g]);for(const g of a){let x=g.horas;e:for(;x>0;){let v=!1;const y=[...Kh].sort((N,C)=>{const _=c(g.curso,N).length;return c(g.curso,C).length-_});for(const N of y)if(!(r.terceroSoloPlanGeneral&&typeof g.curso=="string"&&g.curso.trim().startsWith("3")&&!Hg(g.asignatura)))for(let C=0;C<Hs.length;C++){const j=Hs[C].bloque;if(!pK(N,j)||r.practicasPM&&LF(g.asignatura)&&!MF(j))continue;const I=l(N,j),T=(d=s[g.curso])==null?void 0:d[I],k=(f=o[g.docente])==null?void 0:f[I],B=n[N][String(j)][g.curso];if(!T&&!k&&!B){const M=N2(g.asignatura),P=Hg(g.asignatura),S=Math.max(1,Math.min(10,r.maxConsecutivasMecanica??10)),L=Math.max(1,Math.min(3,r.maxConsecutivasPlanGeneral??3)),H=Q=>{const z=Z=>Q==="mec"?N2(Z):Hg(Z);let K=0;for(let Z=C-1;Z>=0;Z--){const U=Hs[Z].bloque,Y=n[N][String(U)][g.curso];if(!Y)break;if(z(Y.asignatura))K++;else break}for(let Z=C+1;Z<Hs.length;Z++){const U=Hs[Z].bloque,Y=n[N][String(U)][g.curso];if(!Y)break;if(z(Y.asignatura))K++;else break}return K};if(M&&H("mec")+1>S||P&&H("pg")+1>L)continue;if(n[N][String(j)][g.curso]={asignatura:g.asignatura,profesor:g.docente},s[g.curso][I]=!0,o[g.docente]=o[g.docente]||{},o[g.docente][I]=!0,x--,v=!0,x===0)break e;const q=Hs[C+1];if(q&&pK(N,q.bloque)){const Q=l(N,q.bloque),z=n[N][String(q.bloque)][g.curso],K=(A=o[g.docente])==null?void 0:A[Q],Z=()=>{if(r.practicasPM&&LF(g.asignatura)&&!MF(q.bloque))return!1;const U=N2(g.asignatura),Y=Hg(g.asignatura),R=D=>{const W=le=>D==="mec"?N2(le):Hg(le);let J=1;for(let le=C-1;le>=0;le--){const ie=Hs[le].bloque,re=n[N][String(ie)][g.curso];if(!re)break;if(W(re.asignatura))J++;else break}return J++,J};return!(U&&R("mec")>(r.maxConsecutivasMecanica??10)||Y&&R("pg")>(r.maxConsecutivasPlanGeneral??3))};if(x>0&&!((m=s[g.curso])!=null&&m[Q])&&!K&&!z&&Z()&&(n[N][String(q.bloque)][g.curso]={asignatura:g.asignatura,profesor:g.docente},s[g.curso][Q]=!0,o[g.docente][Q]=!0,x--,x===0))break e}}}if(!v)break}}const u=[];for(const g of a){let x=0;for(const y of Kh)for(const N of Hs){const C=n[y][String(N.bloque)][g.curso];C&&C.asignatura===g.asignatura&&C.profesor===g.docente&&x++}const v=g.horas-x;v>0&&u.push(`No se pudieron ubicar ${v} bloque(s) para ${g.asignatura} (${g.curso}) con ${g.docente}`)}for(const g of t)for(const x of Kh){const v=Hs.map(y=>y.bloque).filter(y=>!!n[x][String(y)][g]);if(v.length>0){const y=Math.min(...v),N=Math.max(...v);for(let C=y;C<=N;C++)if(!n[x][String(C)][g]){u.push(`Ventana detectada en ${g} el ${x} entre bloques ${y}${N}`);break}}}return u.push(...Qce(n)),{horarios:n,conflictos:u,fuente:"fallback"}}async function HUe(e,t,r,n){var o,l;const a={maxConsecutivasMecanica:(n==null?void 0:n.maxConsecutivasMecanica)??10,maxConsecutivasPlanGeneral:(n==null?void 0:n.maxConsecutivasPlanGeneral)??3,practicasPM:(n==null?void 0:n.practicasPM)??!1,terceroSoloPlanGeneral:(n==null?void 0:n.terceroSoloPlanGeneral)??!1},s=[];for(const c of e){const u=c.docenteNombre||((o=t.find(d=>d.id===c.docenteId))==null?void 0:o.nombre)||"Docente";for(const[d,f]of Object.entries(c.horasPorCurso||{})){const A=typeof f=="number"?f:0;A>0&&d&&s.push({curso:d,asignatura:c.asignaturaOModulo||"Asignatura",docente:u,horas:A})}}if(s.length===0)return{horarios:P7(),conflictos:[],fuente:"fallback"};try{const c={dias:Kh,bloques:Hs,cursos:r,demanda:s},u=`Genera un horario semanal sin topes de profesor entre cursos.
Reglas:
- Un docente no puede estar en ms de un curso en el mismo da y bloque.
- Cada item de demanda representa cuntos bloques deben ubicarse.
- Usa solamente los das y bloques provistos.
- Distribuye equilibradamente a lo largo de la semana evitando ventanas (huecos) y procurando no dejar das completamente vacos por curso.
- El da Viernes no se pueden asignar bloques que terminen despus de las 13:00.
 - Mximo de bloques consecutivos de asignaturas de mecnica: ${a.maxConsecutivasMecanica}.
 - Mximo de bloques consecutivos de asignaturas de plan general: ${a.maxConsecutivasPlanGeneral}.
 - ${a.practicasPM?"Las asignaturas prcticas (taller/prctica/laboratorio/TP) deben ubicarse en horario PM (desde 13:40).":"Preferir, si es posible, las asignaturas prcticas en PM, pero no obligatorio."}
 - ${a.terceroSoloPlanGeneral?"Para cursos de 3 medio (3A, 3B, etc.), solo ubicar asignaturas de plan general.":"Sin restriccin especial para 3 medio."}

Entrada JSON:
${JSON.stringify(c,null,2)}

Devuelve SOLO JSON vlido con el formato:
{
	"sesiones": [
		{ "curso": "1A", "dia": "Lunes", "bloque": 1, "asignatura": "Matemtica", "docente": "Nombre" }
	]
}`,d=await O7(u,2,!0,"Horarios"),f=typeof window<"u"&&typeof localStorage<"u"&&localStorage.getItem("DEBUG_HORARIO_AI")==="1";if(f)try{localStorage.setItem("HORARIO_AI_RAW",typeof d=="string"?d:String(d)),console.debug("[HORARIO_AI] RAW respuesta IA guardada en localStorage.HORARIO_AI_RAW")}catch{}const m=(y=>{let N=(y==null?void 0:y.trim())||"";const C=N.match(/```(?:json)?\s*([\s\S]*?)\s*```/i);if(C&&C[1]&&(N=C[1].trim()),!(N.startsWith("{")&&N.endsWith("}"))){const H=N.indexOf("{"),q=N.lastIndexOf("}");H!==-1&&q!==-1&&q>H&&(N=N.slice(H,q+1))}if(N=N.replace(/[]/g,'"').replace(/[]/g,"'").replace(/\/(\/[^\n]*\n)/g,"").replace(/\/\*[\s\S]*?\*\//g,"").replace(/,\s*([}\]])/g,"$1"),f)try{localStorage.setItem("HORARIO_AI_JSON_CANDIDATE",N),console.debug("[HORARIO_AI] JSON candidato guardado en localStorage.HORARIO_AI_JSON_CANDIDATE")}catch{}const _=JSON.parse(N),j=H=>H.normalize("NFD").replace(/[\u0300-\u036f]/g,""),I=H=>{if(!H||typeof H!="string")return null;const q=j(H.toLowerCase().trim());return{lunes:"Lunes",martes:"Martes",miercoles:"Mircoles",jueves:"Jueves",viernes:"Viernes",monday:"Lunes",tuesday:"Martes",wednesday:"Mircoles",thursday:"Jueves",friday:"Viernes",lun:"Lunes",mar:"Martes",mie:"Mircoles",mier:"Mircoles",jue:"Jueves",vie:"Viernes"}[q]||null},T=H=>j(H.toLowerCase().replace(/[]/g,"").replace(/\s+/g,"")),k=new Map;(Array.isArray(r)?r:[]).forEach(H=>k.set(T(String(H)),String(H)));const B=H=>{if(!H||typeof H!="string")return null;let q=H.trim();q=q.replace("",""),q=q.replace(/\s+/g,""),q=q.replace(/\s+/g,q.includes("")?"":" ");const Q=T(q);if(k.has(Q))return k.get(Q);const z=q.match(/(\d{1,2})\s*?\s*([A-Za-z])/);if(z){const K=`${z[1]}${z[2].toUpperCase()}`,Z=T(K);if(k.has(Z))return k.get(Z)}return q},M=new Set(Hs.map(H=>H.bloque)),P=new Set(Array.isArray(r)?r:[]),L=(H=>{if(!H)return[];let q=[];Array.isArray(H)?q=H:Array.isArray(H.sesiones)?q=H.sesiones:H.horario&&Array.isArray(H.horario.sesiones)?q=H.horario.sesiones:H.schedule&&Array.isArray(H.schedule.sessions)?q=H.schedule.sessions:Array.isArray(H.clases)?q=H.clases:Array.isArray(H.asignaciones)?q=H.asignaciones:Array.isArray(H.data)?q=H.data:Array.isArray(H.output)?q=H.output:Array.isArray(H.result)&&(q=H.result);const Q=[],z=K=>{if(!K||typeof K!="object")return;const Z=B(K.curso||K.cursoId||K.course||K.class||K.grupo),U=I(K.dia||K.da||K.day||K.weekday);let Y=K.bloque??K.block??K.slot??K.periodo??K.period;if(typeof Y=="string"){const W=Y.match(/(\d{1,2})/);W&&(Y=parseInt(W[1],10))}const R=(K.asignatura||K.materia||K.subject||K.asig||"").toString(),D=(K.docente||K.profesor||K.teacher||K.profe||"").toString();!Z||!U||!Y||!M.has(Y)||P.size&&!P.has(Z)||Q.push({curso:Z,dia:U,bloque:Y,asignatura:R,docente:D})};if(q.length>0)for(const K of q)z(K);else{if(H.horario&&typeof H.horario=="object")for(const K of Object.keys(H.horario)){const Z=I(K);if(!Z)continue;const U=H.horario[K];if(!(!U||typeof U!="object"))for(const Y of Object.keys(U)){let R=Y;if(typeof R=="string"){const W=R.match(/(\d{1,2})/);W&&(R=parseInt(W[1],10))}if(!M.has(R))continue;const D=U[Y];if(Array.isArray(D))for(const W of D)z({...W||{},dia:Z,bloque:R});else if(D&&typeof D=="object")for(const W of Object.keys(D)){const J=B(W),le=D[W];le&&typeof le=="object"&&z({curso:J,dia:Z,bloque:R,asignatura:le.asignatura,docente:le.docente||le.profesor||le.teacher})}}}for(const K of Object.keys(H)){const Z=H[K];if(Array.isArray(Z))for(const U of Z)z(U)}}return Q})(_);if(f)try{localStorage.setItem("HORARIO_AI_SESIONES_COUNT",String(L.length))}catch{}return{sesiones:L}})(d);if(!((l=m==null?void 0:m.sesiones)!=null&&l.length))throw new Error("Respuesta IA sin sesiones");const g=MUe(m.sesiones,r),x=Qce(g),v=[];for(const y of r)for(const N of Kh){let C=0,_=0;for(const j of Hs){const I=g[N][String(j.bloque)][y];I&&(N2(I.asignatura)?C++:C=0,Hg(I.asignatura)?_++:_=0,C>(a.maxConsecutivasMecanica??10)&&v.push(`Exceso mecnica consecutiva en ${y} ${N}`),_>(a.maxConsecutivasPlanGeneral??3)&&v.push(`Exceso plan general consecutiva en ${y} ${N}`),a.practicasPM&&LF(I.asignatura)&&!MF(j.bloque)&&v.push(`Prctica fuera de PM en ${y} ${N} bloque ${j.bloque}`),a.terceroSoloPlanGeneral&&y.trim().startsWith("3")&&!Hg(I.asignatura)&&v.push(`3 medio con asignatura no plan general en ${y} ${N} bloque ${j.bloque}`))}}return{horarios:g,conflictos:[...x,...v],fuente:"IA"}}catch(c){return c instanceof Error&&c.message==="IA_NOT_AVAILABLE"?console.warn("IA no disponible. Generando horario con algoritmo fallback."):console.warn("Falla IA en generacin de horario, usando fallback:",c),UUe(s,r,a)}}const QUe=`
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes scaleIn {
    from { transform: scale(0.95); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }

  @keyframes slideInFromBottom {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }

  .animate-fadeIn {
    animation: fadeIn 0.3s ease-out forwards;
  }

  .animate-scaleIn {
    animation: scaleIn 0.3s ease-out forwards;
  }

  .animate-slideIn {
    animation: slideInFromBottom 0.3s ease-out forwards;
  }

  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(0,0,0,0.05);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(0,0,0,0.15);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(0,0,0,0.25);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(255,255,255,0.05);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.15);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(255,255,255,0.25);
  }
`,VUe=()=>{w.useEffect(()=>{const Ae=document.createElement("style");return Ae.innerHTML=QUe,document.head.appendChild(Ae),()=>{document.head.removeChild(Ae)}},[]);const[e,t]=w.useState([]),[r,n]=w.useState([]),[a,s]=w.useState({busqueda:"",curso:"",asignatura:"",departamento:""}),[o,l]=w.useState(!1),[c,u]=w.useState("docentes"),[d,f]=w.useState([]),[A,m]=w.useState(!1),[g,x]=w.useState(null),[v,y]=w.useState(null),[N,C]=w.useState([]),[_,j]=w.useState(null),[I,T]=w.useState(ja[0]||""),[k,B]=w.useState(!1),[M,P]=w.useState({maxConsecutivasMecanica:10,maxConsecutivasPlanGeneral:3,practicasPM:!1,terceroSoloPlanGeneral:!1}),[S,L]=w.useState(!1),[H,q]=w.useState({nombre:"",email:"",departamento:"General",horasContrato:44,perfil:"PROFESORADO"}),[Q,z]=w.useState("");w.useEffect(()=>X7e(de=>t(de)),[]),w.useEffect(()=>J7e(de=>{const ae=de.map(fe=>{let ge=fe.funcionesLectivas||[];!ge.length&&fe.funcionesNoLectivas&&fe.funcionesNoLectivas.length?ge=fe.funcionesNoLectivas:!ge.length&&fe.otraFuncion&&(ge=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:fe.otraFuncion,horas:parseInt(fe.otraFuncion)||0}]);const{funcionesNoLectivas:xe,otraFuncion:Ue,...qe}=fe;return{...qe,funcionesLectivas:ge}});n(ae)}),[]),w.useEffect(()=>Oce(de=>{x(de&&Object.keys(de).length>0?de:null)}),[]);const K=w.useMemo(()=>{const Ae={};return e.forEach(de=>{const ae=r.filter(fe=>fe.docenteId===de.id);Ae[de.id]=Ice(de,ae)}),Ae},[e,r]);w.useEffect(()=>{const Ae=[];e.forEach(de=>Ae.push(...eUe(de,r))),f(Ae)},[e,r]);const Z=w.useMemo(()=>Q?e.filter(Ae=>{var de;return Ae.nombre.toLowerCase().includes(Q.toLowerCase())||((de=Ae.email)==null?void 0:de.toLowerCase().includes(Q.toLowerCase()))}):e,[e,Q]),U=w.useMemo(()=>r.filter(de=>{const ae=e.find(fe=>fe.id===de.docenteId);return!(!ae||a.busqueda&&!ae.nombre.toLowerCase().includes(a.busqueda.toLowerCase())||a.asignatura&&de.asignaturaOModulo!==a.asignatura||a.departamento&&ae.departamento!==a.departamento||a.curso&&!Object.keys(de.horasPorCurso).includes(a.curso))}).sort((de,ae)=>de.docenteId!==ae.docenteId?de.docenteId.localeCompare(ae.docenteId):(de.asignaturaOModulo||"").localeCompare(ae.asignaturaOModulo||"")),[r,e,a]),Y=async()=>{try{if(m(!0),!H.nombre||!H.email){alert("El nombre y email son obligatorios"),m(!1);return}await Y7e(H),L(!1),q({nombre:"",email:"",departamento:"General",horasContrato:44,perfil:"PROFESORADO"}),alert("Docente creado exitosamente")}catch(Ae){console.error(Ae),alert("Error al crear docente")}finally{m(!1)}},R=w.useCallback(()=>{if(e.length===0)return;const Ae={id:`asig_${Date.now()}`,docenteId:e[0].id,docenteNombre:e[0].nombre,asignaturaOModulo:ma[0],funcionesLectivas:[],horasPorCurso:{},horasXAsig:0};n(de=>[...de,Ae])},[e]),D=w.useCallback((Ae,de)=>{const ae=r.filter(xe=>xe.docenteId===Ae).map(xe=>xe.asignaturaOModulo);let fe=ma[0];for(const xe of ma)if(!ae.includes(xe)){fe=xe;break}const ge={id:`asig_${Date.now()}`,docenteId:Ae,docenteNombre:de,asignaturaOModulo:fe,funcionesLectivas:[],horasPorCurso:{},horasXAsig:0};n(xe=>[...xe,ge])},[r]),W=w.useCallback(Ae=>n(de=>de.filter(ae=>ae.id!==Ae)),[]),J=w.useCallback(Ae=>{n(de=>de.map(ae=>{if(ae.id!==Ae)return ae;const fe={id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:"",horas:0};return{...ae,funcionesLectivas:[...ae.funcionesLectivas||[],fe]}}))},[]),le=w.useCallback((Ae,de,ae,fe)=>{n(ge=>ge.map(xe=>{if(xe.id!==Ae)return xe;const Ue=(xe.funcionesLectivas||[]).map(qe=>qe.id===de?{...qe,[ae]:fe}:qe);return{...xe,funcionesLectivas:Ue}}))},[]),ie=w.useCallback((Ae,de)=>{n(ae=>ae.map(fe=>{if(fe.id!==Ae)return fe;const ge=(fe.funcionesLectivas||[]).filter(xe=>xe.id!==de);return{...fe,funcionesLectivas:ge}}))},[]),re=w.useCallback((Ae,de,ae)=>{n(fe=>fe.map(ge=>{if(ge.id!==Ae)return ge;const xe={...ge,[de]:ae};if(de==="docenteId"){const Ue=e.find(qe=>qe.id===ae);Ue&&(xe.docenteNombre=Ue.nombre)}return de==="horasPorCurso"&&(xe.horasXAsig=IS(ae)),xe}))},[e]),ce=w.useCallback((Ae,de,ae)=>{n(fe=>fe.map(ge=>{if(ge.id!==Ae)return ge;const xe={...ge.horasPorCurso};return ae===0?delete xe[de]:xe[de]=ae,{...ge,horasPorCurso:xe,horasXAsig:IS(xe)}}))},[]),oe=w.useCallback(Ae=>{m(!0);const de=new FileReader;de.onload=ae=>{var fe;try{const ge=new Uint8Array((fe=ae.target)==null?void 0:fe.result),xe=L1(ge,{type:"array"}),Ue=xe.Sheets["Docentes 2025"]||xe.Sheets[xe.SheetNames[0]],qe=zs.sheet_to_json(Ue,{header:1});let Ze=-1;for(let Ve=0;Ve<qe.length;Ve++){const Xe=qe[Ve];if(Xe&&Xe.some(Ie=>typeof Ie=="string"&&(Ie.includes("Docente")||Ie.includes("ASIGNATURA")||ja.some(Be=>Ie.includes(Be.replace("","")))))){Ze=Ve;break}}if(Ze===-1){alert("No se encontr la fila de encabezado en el archivo");return}const We=qe[Ze],me=[];for(let Ve=Ze+1;Ve<qe.length;Ve++){const Xe=qe[Ve];if(!Xe||Xe.length===0)continue;const Ie=Xe[We.indexOf("Docente")]||"";if(!Ie)continue;const Be=e.find(ir=>ir.nombre.toLowerCase().includes(Ie.toLowerCase()));if(!Be)continue;const et={};We.forEach((ir,Ut)=>{if(typeof ir=="string"){const Nr=tUe(ir.trim());if(ja.includes(Nr)){const tr=parseInt(Xe[Ut])||0;tr>0&&(et[Nr]=tr)}}});let bt=[];const jt=Xe[We.indexOf("FUNCIONES LECTIVAS")]||Xe[We.indexOf("FUNCIONES NO LECTIVAS")]||Xe[We.indexOf("OTRA FUNCIN")]||"";typeof jt=="string"&&jt.includes(":")?bt=jt.split(",").map(ir=>{const[Ut,Nr]=ir.split(":").map(tr=>tr.trim());return{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:Ut,horas:parseInt(Nr)||0}}):jt&&(bt=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:jt,horas:0}]);const qt={id:`import_${Date.now()}_${Ve}`,docenteId:Be.id,docenteNombre:Be.nombre,asignaturaOModulo:Xe[We.indexOf("ASIGNATURA O MDULO")]||"",funcionesLectivas:bt,horasPorCurso:et,horasXAsig:IS(et)};me.push(qt)}n(me),alert(`Se importaron ${me.length} asignaciones exitosamente`)}catch(ge){console.error("Error al importar:",ge),alert("Error al procesar el archivo. Verifique el formato.")}finally{m(!1)}},de.readAsArrayBuffer(Ae)},[e]),be=w.useCallback(()=>{const Ae=r.map(fe=>{const ge=e.find(Ze=>Ze.id===fe.docenteId),xe=K[fe.docenteId];let Ue="";fe.funcionesLectivas&&fe.funcionesLectivas.length>0?Ue=fe.funcionesLectivas.map(Ze=>`${Ze.nombre}: ${Ze.horas}h`).join(", "):fe.funcionesNoLectivas&&fe.funcionesNoLectivas.length>0?Ue=fe.funcionesNoLectivas.map(Ze=>`${Ze.nombre}: ${Ze.horas}h`).join(", "):fe.otraFuncion&&(Ue=fe.otraFuncion);const qe={Docente:fe.docenteNombre,"ASIGNATURA O MDULO":fe.asignaturaOModulo||"","FUNCIONES LECTIVAS":Ue,"HORAS X ASIG.":fe.horasXAsig||0};return ja.forEach(Ze=>qe[Ze]=fe.horasPorCurso[Ze]||0),xe&&(qe["HORAS LECTIVAS (HA)"]=xe.HA,qe["HORAS NO LECTIVAS (HB)"]=xe.HB,qe["HORAS CONTRATO"]=(ge==null?void 0:ge.horasContrato)||0),qe}),de=zs.json_to_sheet(Ae),ae=zs.book_new();zs.book_append_sheet(ae,de,"Horarios"),ky(ae,`horarios_${new Date().toISOString().split("T")[0]}.xlsx`)},[r,e,K]),X=w.useCallback(async()=>{try{m(!0);const Ae=ja,de=await HUe(r,e,Ae,M);y(de.horarios),C(de.conflictos||[]),j(de.fuente),!I&&Ae.length&&T(Ae[0])}catch(Ae){console.error("Error al generar horario:",Ae),alert("No se pudo generar el horario.")}finally{m(!1)}},[r,e,I,M]),je=w.useCallback(async()=>{if(!v){alert("No hay un horario generado para guardar.");return}try{m(!0),await rUe(v),alert("Horario guardado exitosamente"),x(v)}catch(Ae){console.error("Error al guardar horario:",Ae),alert("Error al guardar el horario")}finally{m(!1)}},[v]),De=w.useCallback(()=>{y(null),C([]),j(null)},[]),ke=w.useCallback(async()=>{if(d.filter(de=>de.tipo==="error").length>0){alert("No se puede guardar. Hay errores que deben corregirse primero.");return}try{m(!0);const de=[],ae=[];r.forEach(ge=>{let xe=ge.funcionesLectivas||[];ge.funcionesNoLectivas&&ge.funcionesNoLectivas.length>0&&xe.length===0?xe=ge.funcionesNoLectivas.map(me=>({id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:me.nombre,horas:me.horas})):ge.otraFuncion&&xe.length===0&&(xe=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:ge.otraFuncion,horas:parseInt(ge.otraFuncion)||0}]);const{funcionesNoLectivas:Ue,otraFuncion:qe,...Ze}=ge,We={...Ze,funcionesLectivas:xe};if(ge.id.startsWith("asig_")||ge.id.startsWith("import_")){const{id:me,...Ve}=We;ae.push(Ve)}else de.push(We)});const fe=[...de.map(({id:ge,...xe})=>xe),...ae];await Z7e(fe,!0),alert("Horarios guardados exitosamente")}catch(de){console.error("Error al guardar horarios:",de),alert("Error al guardar los horarios")}finally{m(!1)}},[d,r]),ue=Ae=>{const de=K[Ae];return de?de.errors.length>0?"red":de.warnings.length>0?"yellow":"green":"gray"},we=()=>S?i.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-96 max-w-full overflow-hidden animate-scaleIn",children:[i.jsx("div",{className:"p-5 bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[i.jsx(U5,{className:"w-5 h-5"}),"Aadir Nuevo Docente"]}),i.jsx("button",{onClick:()=>L(!1),className:"text-white/80 hover:text-white p-1 rounded-full hover:bg-white/20 transition-all duration-200",disabled:A,children:i.jsx(xo,{className:"w-5 h-5"})})]})}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 flex items-center gap-1.5",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Nombre Completo"]}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"text",value:H.nombre,onChange:Ae=>q({...H,nombre:Ae.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"Nombre Apellido",required:!0})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 flex items-center gap-1.5",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Email"]}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"email",value:H.email,onChange:Ae=>q({...H,email:Ae.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"correo@ejemplo.com",required:!0})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Departamento"}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"text",value:H.departamento,onChange:Ae=>q({...H,departamento:Ae.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"Ej: Matemticas, Lenguaje, etc."})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Horas Contrato"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"number",value:H.horasContrato,onChange:Ae=>q({...H,horasContrato:parseInt(Ae.target.value)||0}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",min:1,max:44}),i.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs",children:"horas"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Perfil"}),i.jsxs("div",{className:"relative",children:[i.jsxs("select",{value:H.perfil,onChange:Ae=>q({...H,perfil:Ae.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 appearance-none",children:[i.jsx("option",{value:"PROFESORADO",children:"Profesorado"}),i.jsx("option",{value:"SUBDIRECCION",children:"Subdireccin"}),i.jsx("option",{value:"COORDINACION_TP",children:"Coordinacin TP"})]}),i.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:i.jsx("svg",{className:"w-4 h-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),i.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",disabled:A,children:"Cancelar"}),i.jsx("button",{onClick:Y,className:"px-4 py-2.5 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg shadow-sm disabled:opacity-50 transition-all duration-200 flex items-center gap-2",disabled:A||!H.nombre||!H.email,children:A?i.jsxs(i.Fragment,{children:[i.jsx(pi,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Guardando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(coe,{className:"w-4 h-4"}),i.jsx("span",{children:"Guardar"})]})})]})]}),i.jsx("div",{className:"bg-gray-50 dark:bg-gray-750 px-6 py-3 text-xs text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(uoe,{className:"w-3.5 h-3.5"}),i.jsxs("span",{children:["Los campos marcados con ",i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500 inline-block"})," son obligatorios"]})]})})]})}):null;return i.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-6 bg-gradient-to-r from-blue-600 to-indigo-700 dark:from-blue-800 dark:to-indigo-900 rounded-xl p-6 shadow-lg relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 bg-white dark:bg-gray-900 opacity-5",children:[i.jsx("div",{className:"w-96 h-96 rounded-full bg-white dark:bg-blue-600 absolute -top-20 -right-20 opacity-20"}),i.jsx("div",{className:"w-64 h-64 rounded-full bg-white dark:bg-indigo-600 absolute -bottom-10 -left-10 opacity-20"})]}),i.jsx("div",{className:"relative z-10",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center",children:[i.jsx(qo,{className:"mr-3 h-8 w-8"}),"Crear Horarios"]}),i.jsx("p",{className:"text-blue-100 dark:text-blue-200 max-w-2xl",children:"Sistema de gestin de carga horaria docente con validacin 65%/35% y visualizacin en tiempo real"})]}),i.jsxs("div",{className:"mt-4 md:mt-0 flex gap-3",children:[i.jsxs("button",{onClick:()=>l(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 text-white text-sm rounded-lg transition-all duration-200 border border-white border-opacity-30",children:[i.jsx(t1,{className:"w-4 h-4"}),i.jsx("span",{children:"Ver estadsticas"})]}),i.jsxs("button",{onClick:ke,disabled:d.some(Ae=>Ae.tipo==="error")||A,className:"flex items-center justify-center gap-2 px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-md",children:[i.jsx(Fl,{className:"w-4 h-4"}),i.jsx("span",{children:A?"Guardando...":"Guardar cambios"})]})]})]})})]}),i.jsxs("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",children:[i.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-750 border-b border-gray-100 dark:border-gray-700 flex items-center",children:[i.jsx(qC,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mr-2"}),i.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Filtros y acciones"})]}),i.jsxs("div",{className:"p-5",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[i.jsx("div",{className:"flex-1 md:max-w-xs",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(wy,{className:"text-gray-400 w-4 h-4"})}),i.jsx("input",{type:"text",placeholder:"Buscar docente...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",value:Q,onChange:Ae=>z(Ae.target.value)})]})}),i.jsxs("div",{className:"flex gap-3 flex-wrap",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(Ph,{className:"text-gray-400 w-4 h-4"})}),i.jsxs("select",{className:"pl-10 pr-8 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 min-w-[150px]",value:a.curso,onChange:Ae=>s(de=>({...de,curso:Ae.target.value})),children:[i.jsx("option",{value:"",children:"Todos los cursos"}),ja.map(Ae=>i.jsx("option",{value:Ae,children:Ae},Ae))]})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(ps,{className:"text-gray-400 w-4 h-4"})}),i.jsxs("select",{className:"pl-10 pr-8 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 min-w-[180px]",value:a.asignatura,onChange:Ae=>s(de=>({...de,asignatura:Ae.target.value})),children:[i.jsx("option",{value:"",children:"Todas las asignaturas"}),ma.map(Ae=>i.jsx("option",{value:Ae,children:Ae},Ae))]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[i.jsxs("button",{onClick:()=>L(!0),className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[i.jsx(U5,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Nuevo Docente"})]}),i.jsxs("button",{onClick:R,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[i.jsx(gi,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Agregar Asignatura"})]}),i.jsxs("label",{className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700 text-white rounded-lg transition-all duration-200 shadow-sm cursor-pointer group",children:[i.jsx(ev,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Importar Excel"}),i.jsx("input",{type:"file",accept:".xlsx,.xls",className:"hidden",onChange:Ae=>{var de;return((de=Ae.target.files)==null?void 0:de[0])&&oe(Ae.target.files[0])}})]}),i.jsxs("button",{onClick:be,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-purple-500 to-violet-600 hover:from-purple-600 hover:to-violet-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[i.jsx(p3,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Exportar Excel"})]}),i.jsxs("button",{onClick:()=>B(!0),disabled:A||r.length===0,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-cyan-500 to-sky-600 hover:from-cyan-600 hover:to-sky-700 text-white rounded-lg transition-all duration-200 shadow-sm group disabled:opacity-50",title:"Generar horario semanal automticamente (IA)",children:[A?i.jsx(pi,{className:"w-5 h-5 animate-spin"}):i.jsx(qh,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Generar horario (IA)"})]}),i.jsxs("button",{onClick:()=>l(!0),className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-indigo-500 to-blue-600 hover:from-indigo-600 hover:to-blue-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[i.jsx(Tl,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Abrir Resumen"})]}),i.jsxs("button",{onClick:ke,disabled:d.some(Ae=>Ae.tipo==="error")||A,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white rounded-lg transition-all duration-200 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-amber-500 disabled:hover:to-orange-600 group",children:[A?i.jsx(pi,{className:"w-5 h-5 animate-spin"}):i.jsx(Fl,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:A?"Guardando...":"Guardar"})]})]})]})]}),d.length>0&&i.jsxs("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",children:[i.jsxs("div",{className:"px-6 py-4 bg-red-50 dark:bg-red-900/20 border-b border-red-100 dark:border-red-800/30 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Uc,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),i.jsxs("h3",{className:"font-medium text-red-700 dark:text-red-300",children:["Validaciones y Alertas (",d.length,")"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("span",{className:"px-2 py-1 bg-red-100 dark:bg-red-800/30 text-red-700 dark:text-red-300 text-xs rounded-md flex items-center gap-1",children:[i.jsx(Bh,{className:"w-3 h-3"})," ",d.filter(Ae=>Ae.tipo==="error").length," Errores"]}),i.jsxs("span",{className:"px-2 py-1 bg-yellow-100 dark:bg-yellow-800/30 text-yellow-700 dark:text-yellow-300 text-xs rounded-md flex items-center gap-1",children:[i.jsx(O1,{className:"w-3 h-3"})," ",d.filter(Ae=>Ae.tipo==="warning").length," Advertencias"]})]})]}),i.jsx("div",{className:"p-5",children:i.jsx("div",{className:"space-y-2.5 max-h-48 overflow-y-auto pr-2 custom-scrollbar",children:d.map((Ae,de)=>i.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-lg shadow-sm ${Ae.tipo==="error"?"bg-red-50 dark:bg-red-900/10 text-red-700 dark:text-red-300 border-l-4 border-red-500 dark:border-red-600":"bg-yellow-50 dark:bg-yellow-900/10 text-yellow-700 dark:text-yellow-300 border-l-4 border-yellow-500 dark:border-yellow-600"}`,children:[Ae.tipo==="error"?i.jsx(Bh,{className:"w-5 h-5 shrink-0"}):i.jsx(O1,{className:"w-5 h-5 shrink-0"}),i.jsx("span",{className:"text-sm",children:Ae.mensaje})]},de))})})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-100 dark:border-gray-700 overflow-hidden",children:[i.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-700 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(I1,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mr-2"}),i.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Asignaciones de Carga Horaria"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Correcto"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-yellow-500"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Advertencia"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-500"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Error"})]})]})]}),i.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:i.jsxs("table",{className:"w-full min-w-[1000px]",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky left-0 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 dark:bg-blue-500"}),i.jsx("span",{children:"Estado"})]})}),i.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky left-14 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(qs,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Docente"})]})}),i.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(ps,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Asignatura"})]})}),i.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(BG,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Func. Lectivas"})]})}),i.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[i.jsx(Dc,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Hrs"})]})}),i.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",colSpan:ja.length,children:i.jsxs("div",{className:"flex justify-center items-center gap-1.5",children:[i.jsx(Ph,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Cursos"}),i.jsx("span",{className:"ml-1 text-xs text-gray-400 font-normal",children:"(horas por curso)"})]})}),i.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[i.jsx(t1,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"HA/HB"})]})}),i.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky right-0 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:i.jsx("div",{className:"flex items-center justify-center gap-1.5",children:i.jsx("span",{children:"Acciones"})})})]})}),i.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:U.map((Ae,de)=>{const ae=K[Ae.docenteId],fe=ue(Ae.docenteId),ge=de===0||U[de-1].docenteId!==Ae.docenteId,xe=de===U.length-1||U[de+1].docenteId!==Ae.docenteId,Ue=U.filter(We=>We.docenteId===Ae.docenteId),qe=Ue.length>1;let Ze="hover:bg-gray-50 dark:hover:bg-gray-750 ";return qe&&(ge?Ze+="border-t-2 border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/10 ":Ze+="bg-blue-50 dark:bg-blue-900/10 ",xe&&(Ze+="border-b-2 border-blue-200 dark:border-blue-800 mb-1 ")),i.jsxs("tr",{className:Ze,children:[i.jsx("td",{className:"px-1 py-2 sticky left-0 z-10 bg-inherit",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${fe==="green"?"bg-green-500":fe==="yellow"?"bg-yellow-500":fe==="red"?"bg-red-500":"bg-gray-500"}`}),qe&&ge&&i.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium mt-1",children:Ue.length})]})}),i.jsx("td",{className:"px-1 py-2 sticky left-10 z-10 bg-inherit",children:!qe||ge?i.jsxs("div",{children:[i.jsx("select",{value:Ae.docenteId,onChange:We=>re(Ae.id,"docenteId",We.target.value),className:`w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs ${qe?"font-medium":""}`,children:(Z.length>0?Z:e).map(We=>i.jsx("option",{value:We.id,children:We.nombre},We.id))}),qe&&i.jsxs("div",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:[Ue.length," asig."]})]}):i.jsx("div",{className:"pl-1 italic text-gray-500 dark:text-gray-400 text-xs whitespace-nowrap",children:" Mismo"})}),i.jsxs("td",{className:"px-1 py-2",children:[i.jsxs("select",{value:Ae.asignaturaOModulo||"",onChange:We=>re(Ae.id,"asignaturaOModulo",We.target.value),className:`w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs ${qe?"border-blue-300 dark:border-blue-700":""}`,children:[i.jsx("option",{value:"",children:"Seleccionar..."}),ma.map(We=>i.jsx("option",{value:We,children:We},We))]}),qe&&!ge&&i.jsx("div",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:"Adicional"})]}),i.jsx("td",{className:"px-1 py-2",children:i.jsxs("div",{className:"space-y-1 w-full min-w-[200px]",children:[(Ae.funcionesLectivas||[]).map(We=>i.jsxs("div",{className:"flex gap-1 items-center",children:[i.jsx("input",{type:"text",value:We.nombre,onChange:me=>le(Ae.id,We.id,"nombre",me.target.value),placeholder:"Nombre",className:"flex-grow px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-l bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs"}),i.jsx("input",{type:"number",value:We.horas,onChange:me=>le(Ae.id,We.id,"horas",parseInt(me.target.value)||0),min:0,max:44,className:"w-10 px-1 py-1 border-y border-r border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs text-center"}),i.jsx("button",{onClick:()=>ie(Ae.id,We.id),className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-r",title:"Eliminar funcin",children:i.jsx(Vn,{className:"w-3 h-3"})})]},We.id)),!Ae.funcionesLectivas&&i.jsx("div",{className:"flex gap-1 items-center",children:i.jsx("input",{type:"text",value:Ae.otraFuncion||"",onChange:We=>re(Ae.id,"otraFuncion",We.target.value),placeholder:"Ej: Coordinador",className:"flex-grow px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs"})}),i.jsxs("button",{onClick:()=>J(Ae.id),className:"flex items-center gap-1 text-xs text-blue-500 hover:text-blue-700 px-2 py-0.5 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",children:[i.jsx(gi,{className:"w-3 h-3"})," ",i.jsx("span",{className:"text-xs",children:"Agregar"})]})]})}),i.jsx("td",{className:"px-1 py-2 text-center",children:i.jsx("span",{className:"text-xs font-medium text-gray-900 dark:text-white",children:Ae.horasXAsig||0})}),i.jsx("td",{className:"px-1 py-2",children:i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-1",children:ja.map(We=>i.jsxs("div",{className:"flex flex-col items-center bg-gray-50 dark:bg-gray-750 p-1 rounded",children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:We}),i.jsx("input",{type:"number",min:0,value:Ae.horasPorCurso[We]||"",onChange:me=>ce(Ae.id,We,parseInt(me.target.value)||0),className:"w-10 h-7 px-1 py-0 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs text-center"})]},We))})}),i.jsx("td",{className:"px-1 py-2 text-center whitespace-nowrap",children:ae&&i.jsxs("div",{className:"space-y-0",children:[i.jsxs("div",{className:"text-blue-600 dark:text-blue-400 text-xs",children:["HA: ",ae.HA," (",ae.restantesHA>=0?"+":"",ae.restantesHA,")"]}),i.jsxs("div",{className:"text-green-600 dark:text-green-400 text-xs",children:["HB: ",ae.HB," (",ae.restantesHB>=0?"+":"",ae.restantesHB,")"]})]})}),i.jsx("td",{className:"px-1 py-2 text-center sticky right-0 z-10 bg-inherit",children:i.jsxs("div",{className:"flex flex-col items-center gap-1",children:[i.jsx("button",{onClick:()=>D(Ae.docenteId,Ae.docenteNombre),className:"p-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",title:"Agregar otra asignatura a este docente",children:i.jsx(gi,{className:"w-3.5 h-3.5"})}),i.jsx("button",{onClick:()=>W(Ae.id),className:"p-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Eliminar esta asignacin",children:i.jsx(Vn,{className:"w-3.5 h-3.5"})})]})})]},Ae.id)})})]})})]}),o&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-7xl w-full max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h2",{className:"text-xl font-bold",children:"Panel de Resumen"}),i.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:i.jsx(xo,{})})]}),i.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:i.jsxs("nav",{className:"flex -mb-px px-6",children:[i.jsx("button",{onClick:()=>u("docentes"),className:`px-6 py-3 font-medium text-sm ${c==="docentes"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Docente"}),i.jsx("button",{onClick:()=>u("cursos"),className:`px-6 py-3 font-medium text-sm ${c==="cursos"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Curso"}),i.jsx("button",{onClick:()=>u("funciones"),className:`px-6 py-3 font-medium text-sm ${c==="funciones"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Funcin"}),i.jsx("button",{onClick:()=>u("totales"),className:`px-6 py-3 font-medium text-sm ${c==="totales"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Totales Generales"})]})}),i.jsxs("div",{className:"p-6 overflow-y-auto flex-grow",children:[c==="docentes"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Docente"}),i.jsx("div",{className:"grid gap-4",children:e.map(Ae=>{const de=K[Ae.id],ae=r.filter(fe=>fe.docenteId===Ae.id);return i.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:Ae.nombre}),i.jsx("div",{className:`w-3 h-3 rounded-full ${ue(Ae.id)==="green"?"bg-green-500":ue(Ae.id)==="yellow"?"bg-yellow-500":ue(Ae.id)==="red"?"bg-red-500":"bg-gray-500"}`})]}),de&&i.jsxs("div",{children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Contrato:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[Ae.horasContrato,"h"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"HA:"}),i.jsxs("span",{className:"ml-1 font-medium text-blue-600 dark:text-blue-400",children:[de.sumCursos,"/",de.HA]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"HB:"}),i.jsxs("span",{className:"ml-1 font-medium text-green-600 dark:text-green-400",children:[de.sumFunciones,"/",de.HB]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Asignaciones:"}),i.jsx("span",{className:"ml-1 font-medium",children:ae.length})]})]}),ae.length>0&&i.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-2",children:[i.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Asignaturas asignadas:"}),i.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:ae.map(fe=>i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:fe.asignaturaOModulo||"Sin asignatura"}),i.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:[fe.horasXAsig||0,"h"]})]},fe.id))})]}),i.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-2",children:[i.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Distribucin por curso:"}),i.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:ja.filter(fe=>ae.some(ge=>ge.horasPorCurso[fe])).map(fe=>{const ge=ae.reduce((xe,Ue)=>xe+(Ue.horasPorCurso[fe]||0),0);return i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:fe}),i.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:[ge,"h"]})]},fe)})})]})]}),ae.some(fe=>(fe.funcionesLectivas||[]).length>0)&&i.jsxs("div",{className:"mt-2 border-t border-gray-100 dark:border-gray-700 pt-2",children:[i.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Funciones lectivas:"}),i.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:ae.flatMap(fe=>(fe.funcionesLectivas||[]).map(ge=>({id:`${fe.id}_${ge.id}`,nombre:ge.nombre,horas:ge.horas}))).map(fe=>i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:fe.nombre||"Sin nombre"}),i.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[fe.horas,"h"]})]},fe.id))})]})]})]},Ae.id)})})]}),c==="cursos"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Curso"}),i.jsx("div",{className:"grid gap-4",children:ja.filter(Ae=>r.some(de=>de.horasPorCurso[Ae])).map(Ae=>{const de=r.filter(ge=>ge.horasPorCurso[Ae]),ae=[];de.forEach(ge=>{const xe=ae.findIndex(Ue=>Ue.id===ge.docenteId);xe===-1?ae.push({id:ge.docenteId,nombre:ge.docenteNombre,asignaciones:[ge]}):ae[xe].asignaciones.push(ge)});const fe=de.reduce((ge,xe)=>ge+(xe.horasPorCurso[Ae]||0),0);return i.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:Ae}),i.jsxs("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-xs rounded-md",children:["Total: ",fe,"h"]})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("h5",{className:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Docentes asignados:"}),i.jsx("div",{className:"grid gap-2",children:ae.map(ge=>i.jsxs("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-750 rounded",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-medium",children:ge.nombre}),i.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:[ge.asignaciones.reduce((xe,Ue)=>xe+(Ue.horasPorCurso[Ae]||0),0),"h"]})]}),i.jsx("ul",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400 space-y-1 ml-2",children:ge.asignaciones.filter(xe=>xe.horasPorCurso[Ae]).map(xe=>i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:xe.asignaturaOModulo||"Sin asignatura"}),i.jsxs("span",{children:[xe.horasPorCurso[Ae],"h"]})]},xe.id))})]},ge.id))})]})]},Ae)})})]}),c==="funciones"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Funciones Lectivas"}),(()=>{const Ae=[];return r.forEach(de=>{(de.funcionesLectivas||[]).forEach(ae=>{if(!ae.nombre)return;const fe=Ae.find(ge=>ge.nombre===ae.nombre);if(!fe)Ae.push({nombre:ae.nombre,docentes:[{id:de.docenteId,nombre:de.docenteNombre,horas:ae.horas}],totalHoras:ae.horas});else{const ge=fe.docentes.find(xe=>xe.id===de.docenteId);ge?ge.horas+=ae.horas:fe.docentes.push({id:de.docenteId,nombre:de.docenteNombre,horas:ae.horas}),fe.totalHoras+=ae.horas}})}),Ae.sort((de,ae)=>ae.totalHoras-de.totalHoras),Ae.length===0?i.jsx("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-750",children:i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"No hay funciones lectivas asignadas."})}):i.jsx("div",{className:"grid gap-4",children:Ae.map((de,ae)=>i.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:de.nombre}),i.jsxs("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-xs rounded-md",children:["Total: ",de.totalHoras,"h"]})]}),i.jsx("h5",{className:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Docentes asignados:"}),i.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:de.docentes.sort((fe,ge)=>ge.horas-fe.horas).map(fe=>i.jsxs("li",{className:"flex justify-between py-1 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[i.jsx("span",{children:fe.nombre}),i.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[fe.horas,"h"]})]},fe.id))})]},ae))})})()]}),c==="totales"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Resumen de Totales Generales"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[i.jsxs("div",{className:"p-6 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800 shadow-md",children:[i.jsx("h4",{className:"text-lg font-bold text-blue-800 dark:text-blue-300 mb-2",children:"Total de Horas Lectivas"}),i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsx("div",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:(()=>{let Ae=0;return r.forEach(de=>{de.horasPorCurso&&Object.values(de.horasPorCurso).forEach(ae=>typeof ae=="number"&&(Ae+=ae)),(de.funcionesLectivas||[]).forEach(ae=>typeof ae.horas=="number"&&(Ae+=ae.horas))}),Ae})()}),i.jsx("span",{className:"text-sm text-blue-500 dark:text-blue-300",children:"horas"})]}),i.jsx("p",{className:"mt-3 text-sm text-blue-600 dark:text-blue-400",children:"Total de horas lectivas asignadas (HA)"})]}),i.jsxs("div",{className:"p-6 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-900/20 rounded-xl border border-green-200 dark:border-green-800 shadow-md",children:[i.jsx("h4",{className:"text-lg font-bold text-green-800 dark:text-green-300 mb-2",children:"Total de Horas No Lectivas"}),i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsx("div",{className:"text-4xl font-bold text-green-600 dark:text-green-400",children:(()=>{let Ae=0;return e.forEach(de=>{const ae=typeof de.horasContrato=="number"?de.horasContrato:0;Ae+=w2(ae)}),Ae})()}),i.jsx("span",{className:"text-sm text-green-500 dark:text-green-300",children:"horas"})]}),i.jsx("p",{className:"mt-3 text-sm text-green-600 dark:text-green-400",children:"Total de horas no lectivas (HB)"})]}),i.jsxs("div",{className:"p-6 bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/30 dark:to-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 shadow-md",children:[i.jsx("h4",{className:"text-lg font-bold text-amber-800 dark:text-amber-300 mb-2",children:"Total de Horas Contrato"}),i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsx("div",{className:"text-4xl font-bold text-amber-600 dark:text-amber-400",children:e.reduce((de,ae)=>{const fe=typeof ae.horasContrato=="number"?ae.horasContrato:0;return de+fe},0)}),i.jsx("span",{className:"text-sm text-amber-500 dark:text-amber-300",children:"horas"})]}),i.jsx("p",{className:"mt-3 text-sm text-amber-600 dark:text-amber-400",children:"Total de horas contratadas (Lectivas + No lectivas)"})]})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-md",children:[i.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Distribucin de Horas"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Distribucin Porcentual"}),(()=>{let Ae=0,de=0;r.forEach(xe=>{xe.horasPorCurso&&Object.values(xe.horasPorCurso).forEach(Ue=>typeof Ue=="number"&&(Ae+=Ue)),(xe.funcionesLectivas||[]).forEach(Ue=>typeof Ue.horas=="number"&&(Ae+=Ue.horas))}),e.forEach(xe=>{const Ue=typeof xe.horasContrato=="number"?xe.horasContrato:0;de+=w2(Ue)});const ae=Ae+de,fe=ae>0?Math.round(Ae/ae*100):0,ge=ae>0?Math.round(de/ae*100):0;return i.jsxs("div",{children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[i.jsx("span",{className:"font-medium text-blue-700 dark:text-blue-300",children:"Horas Lectivas (HA)"}),i.jsxs("span",{className:"font-bold",children:[fe,"%"]})]}),i.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-blue-500 dark:bg-blue-600 rounded-full",style:{width:`${fe}%`}})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[i.jsx("span",{className:"font-medium text-green-700 dark:text-green-300",children:"Horas No Lectivas (HB)"}),i.jsxs("span",{className:"font-bold",children:[ge,"%"]})]}),i.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-green-500 dark:bg-green-600 rounded-full",style:{width:`${ge}%`}})})]}),i.jsxs("div",{className:"mt-4 p-3 bg-gray-100 dark:bg-gray-750 rounded-lg text-xs text-gray-700 dark:text-gray-300",children:[i.jsx("p",{children:i.jsx("strong",{children:"Distribucin Objetivo:"})}),i.jsx("p",{children:" Horas Lectivas (HA): 65% del contrato"}),i.jsx("p",{children:" Horas No Lectivas (HB): 35% del contrato"}),i.jsx("p",{children:" Horas Contrato Total = Horas Lectivas + Horas No Lectivas"}),i.jsx("div",{className:"mt-2",children:Math.abs(fe-65)<=5?i.jsx("p",{className:"text-green-600 dark:text-green-400 font-medium",children:" La distribucin est dentro de los parmetros recomendados"}):i.jsx("p",{className:"text-orange-600 dark:text-orange-400 font-medium",children:" La distribucin difiere de los parmetros recomendados"})})]})]})})()]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estadsticas Generales"}),i.jsxs("ul",{className:"space-y-3 text-sm",children:[i.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total de docentes:"}),i.jsx("span",{className:"font-semibold",children:e.length})]}),i.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total de asignaciones:"}),i.jsx("span",{className:"font-semibold",children:r.length})]}),i.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Promedio horas contrato:"}),i.jsxs("span",{className:"font-semibold",children:[e.length>0?(e.reduce((Ae,de)=>Ae+(typeof de.horasContrato=="number"?de.horasContrato:0),0)/e.length).toFixed(1):"0"," horas"]})]})]})]}),d.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsxs("h5",{className:"text-md font-medium text-red-700 dark:text-red-300 mb-2",children:["Advertencias (",d.length,")"]}),i.jsx("div",{className:"max-h-32 overflow-y-auto p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsxs("ul",{className:"text-xs space-y-1 text-red-600 dark:text-red-400",children:[d.slice(0,5).map((Ae,de)=>i.jsxs("li",{className:"flex items-center gap-1",children:[Ae.tipo==="error"?"":"",i.jsx("span",{children:Ae.mensaje})]},de)),d.length>5&&i.jsxs("li",{className:"italic",children:["Y ",d.length-5," ms..."]})]})})]})]})]})]})]})]})]})}),i.jsxs("div",{className:"mt-8 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",children:[i.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-700 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qo,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),i.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Generacin de Horario Semanal"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"relative",children:i.jsx("select",{className:"pl-3 pr-8 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm shadow-sm",value:I,onChange:Ae=>T(Ae.target.value),children:ja.map(Ae=>i.jsx("option",{value:Ae,children:Ae},Ae))})}),v&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:je,disabled:A,className:"px-3 py-2 bg-emerald-500 hover:bg-emerald-600 text-white text-sm rounded-lg transition-all duration-200 shadow-sm",children:"Guardar horario"}),i.jsx("button",{onClick:De,disabled:A,className:"px-3 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-100 text-sm rounded-lg transition-all duration-200",children:"Descartar"})]})]})]}),i.jsxs("div",{className:"p-5 space-y-4",children:[_&&i.jsxs("div",{className:`px-4 py-3 rounded-lg text-sm ${_==="IA"?"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300":"bg-amber-50 text-amber-700 dark:bg-amber-900/20 dark:text-amber-300"}`,children:["Fuente: ",_==="IA"?"Generado por IA":"Generado por algoritmo (fallback)"]}),N.length>0&&i.jsxs("div",{className:"px-4 py-3 rounded-lg bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 text-sm",children:[i.jsxs("div",{className:"font-medium mb-1",children:["Conflictos detectados (",N.length,"):"]}),i.jsx("ul",{className:"list-disc ml-5 space-y-1",children:N.map((Ae,de)=>i.jsx("li",{children:Ae},de))})]}),v||g?i.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:i.jsxs("table",{className:"w-full min-w-[800px] border-collapse",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-2 text-left text-xs uppercase tracking-wider text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:"Bloque"}),Kh.map(Ae=>i.jsx("th",{className:"px-3 py-2 text-center text-xs uppercase tracking-wider text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:Ae},Ae))]})}),i.jsx("tbody",{children:(()=>{const Ae=ae=>{const[fe,ge]=ae.split(":").map(Number);return fe*60+ge},de=[];for(let ae=0;ae<Hs.length;ae++){const fe=Hs[ae];de.push({type:"block",label:`Bloque ${fe.bloque}`,start:fe.inicio,end:fe.fin,bloque:fe.bloque});const ge=Hs[ae+1];if(ge&&Ae(ge.inicio)-Ae(fe.fin)>0){const Ue=fe.fin==="13:00"&&ge.inicio==="13:40";de.push({type:"break",label:Ue?"Almuerzo":"Recreo",start:fe.fin,end:ge.inicio})}}return de.map((ae,fe)=>{if(ae.type==="break")return i.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700",children:[i.jsxs("td",{className:`px-3 py-2 text-sm font-medium whitespace-nowrap ${ae.label==="Almuerzo"?"text-amber-700":"text-slate-600"}`,children:[ae.label," ",ae.start&&ae.end?`(${ae.start}  ${ae.end})`:""]}),Kh.map(xe=>i.jsx("td",{className:`px-3 py-2 align-top ${ae.label==="Almuerzo"?"bg-amber-50 dark:bg-amber-900/20":"bg-slate-50 dark:bg-slate-800/50"}`},`${xe}_break_${fe}`))]},`break_${fe}`);const ge=Hs.find(xe=>xe.bloque===ae.bloque);return i.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700",children:[i.jsxs("td",{className:"px-3 py-2 text-sm text-gray-700 dark:text-gray-300 whitespace-nowrap",children:[ae.bloque,". ",ae.start," - ",ae.end]}),Kh.map(xe=>{var Ze,We,me;const Ue=(me=(We=(Ze=v||g)==null?void 0:Ze[xe])==null?void 0:We[String(ae.bloque)])==null?void 0:me[I],qe=xe==="Viernes"&&ge&&ge.fin>"13:00";return i.jsx("td",{className:`px-3 py-2 align-top ${qe?"bg-red-50 dark:bg-red-900/20":""}`,title:qe?"No permitido (Viernes > 13:00)":"",children:Ue&&(Ue.asignatura||Ue.profesor)?i.jsxs("div",{className:`p-2 rounded border ${qe?"border-red-300 dark:border-red-700 bg-red-50/60 dark:bg-red-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-750"}`,children:[i.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:Ue.asignatura}),i.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:Ue.profesor})]}):i.jsx("div",{className:`h-10 rounded ${qe?"bg-red-50/60 dark:bg-red-900/10 border border-red-200 dark:border-red-800":"bg-white dark:bg-gray-800 border border-dashed border-gray-200 dark:border-gray-700"}`})},`${xe}_${ae.bloque}`)})]},`block_${ae.bloque}`)})})()})]})}):i.jsx("div",{className:"px-4 py-3 rounded-lg bg-gray-50 dark:bg-gray-750 text-gray-600 dark:text-gray-300 text-sm",children:'An no hay un horario guardado ni generado. Usa "Generar horario (IA)" para crear una propuesta.'})]})]}),i.jsxs("div",{className:"mt-8 p-0 bg-gradient-to-r from-blue-500/5 to-indigo-500/5 dark:from-blue-900/10 dark:to-indigo-900/10 rounded-xl overflow-hidden border border-blue-200 dark:border-blue-800 shadow-sm",children:[i.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(t1,{className:"w-5 h-5"}),i.jsx("h4",{className:"font-medium",children:"Informacin sobre Distribucin de Horas"})]})}),i.jsxs("div",{className:"p-6 grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-700 dark:text-blue-300 shrink-0",children:i.jsx(Ph,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Horas Lectivas (HA)"}),i.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Segn tabla oficial (ej: 44h  ",t_(44),"h, 30h  ",t_(30),"h)"]})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-700 dark:text-green-300 shrink-0",children:i.jsx(I1,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-green-900 dark:text-green-100",children:"Funciones Lectivas"}),i.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Las horas de las funciones se suman a las horas lectivas (HA)"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center text-amber-700 dark:text-amber-300 shrink-0",children:i.jsx(BG,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-amber-900 dark:text-amber-100",children:"Horas No Lectivas (HB)"}),i.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:["El resto del contrato (ej: 44h  ",w2(44),"h, 30h  ",w2(30),"h)"]})]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 mb-4",children:[i.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Frmulas de clculo"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs font-mono",children:"HA"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas Lectivas = 65% del Contrato"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"px-2 py-1 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 rounded text-xs font-mono",children:"HB"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas No Lectivas = 35% del Contrato"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"px-2 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-mono",children:"HC"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas Contrato = HA + HB"})]})]})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700",children:[i.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Gua de semforos"}),i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[i.jsx("div",{className:"w-5 h-5 rounded-full bg-green-500 mb-1"}),i.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Completo"})]}),i.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[i.jsx("div",{className:"w-5 h-5 rounded-full bg-yellow-500 mb-1"}),i.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Faltan horas"})]}),i.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[i.jsx("div",{className:"w-5 h-5 rounded-full bg-red-500 mb-1"}),i.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Excede lmites"})]})]})]})]})]})]}),i.jsx(we,{}),k&&i.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-lg overflow-hidden animate-scaleIn",children:[i.jsxs("div",{className:"p-5 bg-gradient-to-r from-cyan-500 to-sky-600 text-white flex items-center justify-between",children:[i.jsx("h2",{className:"text-lg font-semibold",children:"Reglas para generar horario"}),i.jsx("button",{onClick:()=>B(!1),className:"text-white/80 hover:text-white p-1 rounded-full hover:bg-white/20 transition-all duration-200",children:i.jsx(xo,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-6 space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Mximo de horas de mecnica juntas"}),i.jsx("select",{value:M.maxConsecutivasMecanica,onChange:Ae=>P(de=>({...de,maxConsecutivasMecanica:parseInt(Ae.target.value)})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:Array.from({length:10},(Ae,de)=>de+1).map(Ae=>i.jsx("option",{value:Ae,children:Ae},Ae))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Mximo de horas de plan general juntas"}),i.jsx("select",{value:M.maxConsecutivasPlanGeneral,onChange:Ae=>P(de=>({...de,maxConsecutivasPlanGeneral:parseInt(Ae.target.value)})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:[1,2,3].map(Ae=>i.jsx("option",{value:Ae,children:Ae},Ae))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Asignaturas prcticas en horario P.M."}),i.jsx("p",{className:"text-xs text-gray-500",children:"Ubica taller/prctica/laboratorio en bloques desde 13:40"})]}),i.jsx("input",{type:"checkbox",checked:!!M.practicasPM,onChange:Ae=>P(de=>({...de,practicasPM:Ae.target.checked})),className:"w-5 h-5"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"3 medio slo horas de plan general"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Para cursos 3*, restringe a asignaturas de plan general"})]}),i.jsx("input",{type:"checkbox",checked:!!M.terceroSoloPlanGeneral,onChange:Ae=>P(de=>({...de,terceroSoloPlanGeneral:Ae.target.checked})),className:"w-5 h-5"})]})]}),i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>B(!1),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200",children:"Cancelar"}),i.jsxs("button",{onClick:async()=>{B(!1),await X()},className:"px-4 py-2 rounded-lg bg-cyan-600 hover:bg-cyan-700 text-white flex items-center gap-2",children:[i.jsx(qh,{className:"w-4 h-4"})," Generar con estas reglas"]})]})]})}),A&&i.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-2xl flex flex-col items-center animate-pulse",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 dark:border-blue-800 border-solid rounded-full"}),i.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 dark:border-blue-400 border-t-transparent animate-spin rounded-full absolute top-0 left-0"})]}),i.jsx("p",{className:"mt-4 text-lg font-medium text-gray-700 dark:text-gray-300",children:"Procesando solicitud..."}),i.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Por favor, espere un momento"})]})})]})},B3="acciones_pedagogicas",$Ue=(e,t)=>{var a,s,o,l;if(t.dimension||t.subdimension||t.indicadores||t.avance!==void 0)return{id:e,fechaRegistro:t.fechaRegistro??"",responsable:t.responsable??"",dimension:t.dimension??"",subdimension:t.subdimension??"",descripcion:t.descripcion??"",objetivos:t.objetivos??"",indicadores:Array.isArray(t.indicadores)?t.indicadores:t.indicadores?String(t.indicadores).split(",").map(c=>c.trim()).filter(Boolean):[],cobertura:t.cobertura??"",fechaInicio:t.fechaInicio??"",fechaCumplimiento:t.fechaCumplimiento??"",estado:t.estado??"Pendiente",avance:typeof t.avance=="number"?t.avance:0,enlaces:Array.isArray(t.enlaces)?t.enlaces:t.enlaces?[String(t.enlaces)]:[],creadoTs:typeof t.creadoTs=="number"?t.creadoTs:((s=(a=t.creadoTs)==null?void 0:a.toMillis)==null?void 0:s.call(a))??Date.now()};const r=t,n=r.enlaceDocumento?[String(r.enlaceDocumento)]:[];return{id:e,fechaRegistro:r.fechaRegistro??"",responsable:r.responsable??"",dimension:r.area??"",subdimension:"",descripcion:r.descripcion??"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:r.fechaCumplimiento??"",estado:r.estado??"Pendiente",avance:0,enlaces:n,creadoTs:typeof r.creadoTs=="number"?r.creadoTs:((l=(o=r.creadoTs)==null?void 0:o.toMillis)==null?void 0:l.call(o))??Date.now()}};async function zUe(){const e=[];try{const t=Bt(ht(ut,B3),Xt("creadoTs","desc"));(await Ir(t)).docs.forEach(n=>e.push($Ue(n.id,n.data())))}catch{}return e.sort((t,r)=>(r.creadoTs??0)-(t.creadoTs??0))}async function GUe(e){const t={fechaRegistro:e.fechaRegistro??new Date().toISOString().slice(0,10),responsable:e.responsable??"",dimension:e.dimension??e.area??"",subdimension:e.subdimension??"",descripcion:e.descripcion??"",objetivos:e.objetivos??"",indicadores:Array.isArray(e.indicadores)?e.indicadores:e.indicadores?String(e.indicadores).split(",").map(r=>r.trim()).filter(Boolean):[],cobertura:e.cobertura??"",fechaInicio:e.fechaInicio??"",fechaCumplimiento:e.fechaCumplimiento??"",estado:e.estado??"Pendiente",avance:typeof e.avance=="number"?e.avance:0,enlaces:Array.isArray(e.enlaces)?e.enlaces:e.enlaces?[String(e.enlaces)]:e.enlaceDocumento?[String(e.enlaceDocumento)]:[],creadoTs:xr.now()};await ln(ht(ut,B3),t)}async function qUe(e,t){const r=Wt(ht(ut,B3),e),n={...t};n.area&&!n.dimension&&(n.dimension=n.area,delete n.area),n.enlaceDocumento&&(n.enlaces=[String(n.enlaceDocumento)],delete n.enlaceDocumento),Array.isArray(n.indicadores)===!1&&typeof n.indicadores=="string"&&(n.indicadores=String(n.indicadores).split(",").map(a=>a.trim()).filter(Boolean)),await qi(r,n)}async function KUe(e){const t=Wt(ht(ut,B3),e);await ca(t)}function Vce(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Vce(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function mn(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Vce(e))&&(n&&(n+=" "),n+=t);return n}var g6={},x6={},gK;function WUe(){return gK||(gK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(x6)),x6}var v6={},xK;function $ce(){return xK||(xK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(v6)),v6}var b6={},vK;function zce(){return vK||(vK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t}(b6)),b6}var y6={},bK;function F7(){return bK||(bK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],a=r.length;if(a===0)return n;let s=0,o="",l="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),s++);s<a;){const u=r[s];l?u==="\\"&&s+1<a?(s++,o+=r[s]):u===l?l="":o+=u:c?u==='"'||u==="'"?l=u:u==="]"?(c=!1,n.push(o),o=""):o+=u:u==="["?(c=!0,o&&(n.push(o),o="")):u==="."?o&&(n.push(o),o=""):o+=u,s++}return o&&n.push(o),n}e.toPath=t}(y6)),y6}var yK;function R7(){return yK||(yK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WUe(),r=$ce(),n=zce(),a=F7();function s(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?s(l,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=s}(g6)),g6}var w6,wK;function XUe(){return wK||(wK=1,w6=R7().get),w6}var YUe=XUe();const Tp=sc(YUe);var N6={exports:{}},fa={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NK;function JUe(){if(NK)return fa;NK=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,A=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,x=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,N=e?Symbol.for("react.scope"):60119;function C(j){if(typeof j=="object"&&j!==null){var I=j.$$typeof;switch(I){case t:switch(j=j.type,j){case c:case u:case n:case s:case a:case f:return j;default:switch(j=j&&j.$$typeof,j){case l:case d:case g:case m:case o:return j;default:return I}}case r:return I}}}function _(j){return C(j)===u}return fa.AsyncMode=c,fa.ConcurrentMode=u,fa.ContextConsumer=l,fa.ContextProvider=o,fa.Element=t,fa.ForwardRef=d,fa.Fragment=n,fa.Lazy=g,fa.Memo=m,fa.Portal=r,fa.Profiler=s,fa.StrictMode=a,fa.Suspense=f,fa.isAsyncMode=function(j){return _(j)||C(j)===c},fa.isConcurrentMode=_,fa.isContextConsumer=function(j){return C(j)===l},fa.isContextProvider=function(j){return C(j)===o},fa.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===t},fa.isForwardRef=function(j){return C(j)===d},fa.isFragment=function(j){return C(j)===n},fa.isLazy=function(j){return C(j)===g},fa.isMemo=function(j){return C(j)===m},fa.isPortal=function(j){return C(j)===r},fa.isProfiler=function(j){return C(j)===s},fa.isStrictMode=function(j){return C(j)===a},fa.isSuspense=function(j){return C(j)===f},fa.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===n||j===u||j===s||j===a||j===f||j===A||typeof j=="object"&&j!==null&&(j.$$typeof===g||j.$$typeof===m||j.$$typeof===o||j.$$typeof===l||j.$$typeof===d||j.$$typeof===v||j.$$typeof===y||j.$$typeof===N||j.$$typeof===x)},fa.typeOf=C,fa}var CK;function ZUe(){return CK||(CK=1,N6.exports=JUe()),N6.exports}var e9e=ZUe(),go=e=>e===0?0:e>0?1:-1,$c=e=>typeof e=="number"&&e!=+e,Wg=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ur=e=>(typeof e=="number"||e instanceof Number)&&!$c(e),n0=e=>ur(e)||typeof e=="string",t9e=0,sC=e=>{var t=++t9e;return"".concat(e||"").concat(t)},ac=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ur(t)&&typeof t!="string")return n;var s;if(Wg(t)){if(r==null)return n;var o=t.indexOf("%");s=r*parseFloat(t.slice(0,o))/100}else s=+t;return $c(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},Gce=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},Db=(e,t)=>ur(e)&&ur(t)?r=>e+r*(t-e):()=>t;function bd(e,t,r){return ur(e)&&ur(t)?e+r*(t-e):t}function qce(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Tp(n,t))===r)}var Ka=e=>e===null||typeof e>"u",nE=e=>Ka(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),r9e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function L7(e){if(typeof e!="string")return!1;var t=r9e;return t.includes(e)}var n9e=["viewBox","children"],EK=["points","pathLength"],C6={svg:n9e,polygon:EK,polyline:EK},M7=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(w.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{L7(a)&&(n[a]=s=>r[a](r,s))}),n},a9e=(e,t,r)=>n=>(e(t,r,n),null),ov=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];L7(a)&&typeof s=="function"&&(n||(n={}),n[a]=a9e(s,t,r))}),n},s9e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function Kce(e){if(typeof e!="string")return!1;var t=s9e;return t.includes(e)}function bo(e){var t=Object.entries(e).filter(r=>{var[n]=r;return Kce(n)});return Object.fromEntries(t)}var jK=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",kK=null,E6=null,Wce=e=>{if(e===kK&&Array.isArray(E6))return E6;var t=[];return w.Children.forEach(e,r=>{Ka(r)||(e9e.isFragment(r)?t=t.concat(Wce(r.props.children)):t.push(r))}),E6=t,kK=e,t};function aE(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>jK(a)):n=[jK(t)],Wce(e).forEach(a=>{var s=Tp(a,"type.displayName")||Tp(a,"type.name");n.indexOf(s)!==-1&&r.push(a)}),r}var Xce=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,i9e=(e,t,r,n)=>{var a;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(a=n&&(C6==null?void 0:C6[n]))!==null&&a!==void 0?a:[],o=t.startsWith("data-"),l=typeof e!="function"&&(!!n&&s.includes(t)||Kce(t)),c=!!r&&L7(t);return o||l||c},$n=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(w.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(s=>{var o;i9e((o=n)===null||o===void 0?void 0:o[s],s,t,r)&&(a[s]=n[s])}),a},o9e=["children","width","height","viewBox","className","style","title","desc"];function UF(){return UF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},UF.apply(null,arguments)}function l9e(e,t){if(e==null)return{};var r,n,a=c9e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function c9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var U7=w.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:s,className:o,style:l,title:c,desc:u}=e,d=l9e(e,o9e),f=s||{width:n,height:a,x:0,y:0},A=mn("recharts-surface",o);return w.createElement("svg",UF({},$n(d,!0,"svg"),{className:A,width:n,height:a,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),w.createElement("title",null,c),w.createElement("desc",null,u),r)}),u9e=["children","className"];function HF(){return HF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},HF.apply(null,arguments)}function d9e(e,t){if(e==null)return{};var r,n,a=f9e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function f9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Fa=w.forwardRef((e,t)=>{var{children:r,className:n}=e,a=d9e(e,u9e),s=mn("recharts-layer",n);return w.createElement("g",HF({className:s},$n(a,!0),{ref:t}),r)}),H7=Wne(),Yce=w.createContext(null),h9e=()=>w.useContext(Yce);function Ga(e){return function(){return e}}const Jce=Math.cos,a_=Math.sin,Uf=Math.sqrt,s_=Math.PI,I3=2*s_,QF=Math.PI,VF=2*QF,Ig=1e-6,A9e=VF-Ig;function Zce(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function m9e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Zce;const r=10**t;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class p9e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Zce:m9e(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,s,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(t,r,n,a,s){if(t=+t,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=n-t,u=a-r,d=o-t,f=l-r,A=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(A>Ig)if(!(Math.abs(f*c-u*d)>Ig)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-o,g=a-l,x=c*c+u*u,v=m*m+g*g,y=Math.sqrt(x),N=Math.sqrt(A),C=s*Math.tan((QF-Math.acos((x+A-v)/(2*y*N)))/2),_=C/N,j=C/y;Math.abs(_-1)>Ig&&this._append`L${t+_*d},${r+_*f}`,this._append`A${s},${s},0,0,${+(f*m>d*g)},${this._x1=t+j*c},${this._y1=r+j*u}`}}arc(t,r,n,a,s,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,d=r+c,f=1^o,A=o?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Ig||Math.abs(this._y1-d)>Ig)&&this._append`L${u},${d}`,n&&(A<0&&(A=A%VF+VF),A>A9e?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:A>Ig&&this._append`A${n},${n},0,${+(A>=QF)},${f},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function Q7(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new p9e(t)}function V7(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function eue(e){this._context=e}eue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function D3(e){return new eue(e)}function tue(e){return e[0]}function rue(e){return e[1]}function nue(e,t){var r=Ga(!0),n=null,a=D3,s=null,o=Q7(l);e=typeof e=="function"?e:e===void 0?tue:Ga(e),t=typeof t=="function"?t:t===void 0?rue:Ga(t);function l(c){var u,d=(c=V7(c)).length,f,A=!1,m;for(n==null&&(s=a(m=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===A&&((A=!A)?s.lineStart():s.lineEnd()),A&&s.point(+e(f,u,c),+t(f,u,c));if(m)return s=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Ga(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Ga(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Ga(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),l):n},l}function ck(e,t,r){var n=null,a=Ga(!0),s=null,o=D3,l=null,c=Q7(u);e=typeof e=="function"?e:e===void 0?tue:Ga(+e),t=typeof t=="function"?t:Ga(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?rue:Ga(+r);function u(f){var A,m,g,x=(f=V7(f)).length,v,y=!1,N,C=new Array(x),_=new Array(x);for(s==null&&(l=o(N=c())),A=0;A<=x;++A){if(!(A<x&&a(v=f[A],A,f))===y)if(y=!y)m=A,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=A-1;g>=m;--g)l.point(C[g],_[g]);l.lineEnd(),l.areaEnd()}y&&(C[A]=+e(v,A,f),_[A]=+t(v,A,f),l.point(n?+n(v,A,f):C[A],r?+r(v,A,f):_[A]))}if(N)return l=null,N+""||null}function d(){return nue().defined(a).curve(o).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ga(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Ga(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ga(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ga(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Ga(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ga(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Ga(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,s!=null&&(l=o(s)),u):o},u.context=function(f){return arguments.length?(f==null?s=l=null:l=o(s=f),u):s},u}class aue{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function g9e(e){return new aue(e,!0)}function x9e(e){return new aue(e,!1)}const $7={draw(e,t){const r=Uf(t/s_);e.moveTo(r,0),e.arc(0,0,r,0,I3)}},v9e={draw(e,t){const r=Uf(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},sue=Uf(1/3),b9e=sue*2,y9e={draw(e,t){const r=Uf(t/b9e),n=r*sue;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},w9e={draw(e,t){const r=Uf(t),n=-r/2;e.rect(n,n,r,r)}},N9e=.8908130915292852,iue=a_(s_/10)/a_(7*s_/10),C9e=a_(I3/10)*iue,E9e=-Jce(I3/10)*iue,j9e={draw(e,t){const r=Uf(t*N9e),n=C9e*r,a=E9e*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const o=I3*s/5,l=Jce(o),c=a_(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},j6=Uf(3),k9e={draw(e,t){const r=-Uf(t/(j6*3));e.moveTo(0,r*2),e.lineTo(-j6*r,-r),e.lineTo(j6*r,-r),e.closePath()}},od=-.5,ld=Uf(3)/2,$F=1/Uf(12),S9e=($F/2+1)*3,_9e={draw(e,t){const r=Uf(t/S9e),n=r/2,a=r*$F,s=n,o=r*$F+r,l=-s,c=o;e.moveTo(n,a),e.lineTo(s,o),e.lineTo(l,c),e.lineTo(od*n-ld*a,ld*n+od*a),e.lineTo(od*s-ld*o,ld*s+od*o),e.lineTo(od*l-ld*c,ld*l+od*c),e.lineTo(od*n+ld*a,od*a-ld*n),e.lineTo(od*s+ld*o,od*o-ld*s),e.lineTo(od*l+ld*c,od*c-ld*l),e.closePath()}};function T9e(e,t){let r=null,n=Q7(a);e=typeof e=="function"?e:Ga(e||$7),t=typeof t=="function"?t:Ga(t===void 0?64:+t);function a(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:Ga(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:Ga(+s),a):t},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function i_(){}function o_(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function oue(e){this._context=e}oue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:o_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:o_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function B9e(e){return new oue(e)}function lue(e){this._context=e}lue.prototype={areaStart:i_,areaEnd:i_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:o_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function I9e(e){return new lue(e)}function cue(e){this._context=e}cue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:o_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function D9e(e){return new cue(e)}function uue(e){this._context=e}uue.prototype={areaStart:i_,areaEnd:i_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function O9e(e){return new uue(e)}function SK(e){return e<0?-1:1}function _K(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),l=(s*a+o*n)/(n+a);return(SK(s)+SK(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function TK(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function k6(e,t,r){var n=e._x0,a=e._y0,s=e._x1,o=e._y1,l=(s-n)/3;e._context.bezierCurveTo(n+l,a+l*t,s-l,o-l*r,s,o)}function l_(e){this._context=e}l_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:k6(this,this._t0,TK(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,k6(this,TK(this,r=_K(this,e,t)),r);break;default:k6(this,this._t0,r=_K(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function due(e){this._context=new fue(e)}(due.prototype=Object.create(l_.prototype)).point=function(e,t){l_.prototype.point.call(this,t,e)};function fue(e){this._context=e}fue.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}};function P9e(e){return new l_(e)}function F9e(e){return new due(e)}function hue(e){this._context=e}hue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=BK(e),a=BK(t),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function BK(e){var t,r=e.length-1,n,a=new Array(r),s=new Array(r),o=new Array(r);for(a[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/s[t-1],s[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function R9e(e){return new hue(e)}function O3(e,t){this._context=e,this._t=t}O3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function L9e(e){return new O3(e,.5)}function M9e(e){return new O3(e,0)}function U9e(e){return new O3(e,1)}function M1(e,t){if((o=e.length)>1)for(var r=1,n,a,s=e[t[0]],o,l=s.length;r<o;++r)for(a=s,s=e[t[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function zF(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function H9e(e,t){return e[t]}function Q9e(e){const t=[];return t.key=e,t}function V9e(){var e=Ga([]),t=zF,r=M1,n=H9e;function a(s){var o=Array.from(e.apply(this,arguments),Q9e),l,c=o.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,s)]).data=f;for(l=0,d=V7(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Ga(Array.from(s)),a):e},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Ga(+s),a):n},a.order=function(s){return arguments.length?(t=s==null?zF:typeof s=="function"?s:Ga(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(r=s??M1,a):r},a}function $9e(e,t){if((n=e.length)>0){for(var r,n,a=0,s=e[0].length,o;a<s;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}M1(e,t)}}function z9e(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,s=n.length;r<s;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}M1(e,t)}}function G9e(e,t){if(!(!((o=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,s,o;n<s;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[n][1]||0,A=d[n-1][1]||0,m=(f-A)/2,g=0;g<l;++g){var x=e[t[g]],v=x[n][1]||0,y=x[n-1][1]||0;m+=v-y}c+=f,u+=m*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,M1(e,t)}}var q9e=["type","size","sizeType"];function GF(){return GF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},GF.apply(null,arguments)}function IK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function DK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IK(Object(r),!0).forEach(function(n){K9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function K9e(e,t,r){return(t=W9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W9e(e){var t=X9e(e,"string");return typeof t=="symbol"?t:t+""}function X9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Y9e(e,t){if(e==null)return{};var r,n,a=J9e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function J9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Aue={symbolCircle:$7,symbolCross:v9e,symbolDiamond:y9e,symbolSquare:w9e,symbolStar:j9e,symbolTriangle:k9e,symbolWye:_9e},Z9e=Math.PI/180,eHe=e=>{var t="symbol".concat(nE(e));return Aue[t]||$7},tHe=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*Z9e;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},rHe=(e,t)=>{Aue["symbol".concat(nE(e))]=t},z7=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=Y9e(e,q9e),s=DK(DK({},a),{},{type:t,size:r,sizeType:n}),o=()=>{var f=eHe(t),A=T9e().type(f).size(tHe(r,n,t));return A()},{className:l,cx:c,cy:u}=s,d=$n(s,!0);return c===+c&&u===+u&&r===+r?w.createElement("path",GF({},d,{className:mn("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:o()})):null};z7.registerSymbol=rHe;function qF(){return qF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qF.apply(null,arguments)}function OK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nHe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OK(Object(r),!0).forEach(function(n){G7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function G7(e,t,r){return(t=aHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aHe(e){var t=sHe(e,"string");return typeof t=="symbol"?t:t+""}function sHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cd=32;class q7 extends w.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,a=cd/2,s=cd/6,o=cd/3,l=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return w.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:a,x2:cd,y2:a,className:"recharts-legend-icon"});if(c==="line")return w.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(cd,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return w.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(cd/8,"h").concat(cd,"v").concat(cd*3/4,"h").concat(-cd,"z"),className:"recharts-legend-icon"});if(w.isValidElement(t.legendIcon)){var u=nHe({},t);return delete u.legendIcon,w.cloneElement(t.legendIcon,u)}return w.createElement(z7,{fill:l,cx:a,cy:a,size:cd,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:o}=this.props,l={x:0,y:0,width:cd,height:cd},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,f)=>{var A=d.formatter||a,m=mn({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var g=d.inactive?s:d.color,x=A?A(d.value,d,f):d.value;return w.createElement("li",qF({className:m,style:c,key:"legend-item-".concat(f)},ov(this.props,d,f)),w.createElement(U7,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(x," legend icon")},this.renderIcon(d,o)),w.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},x))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return w.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}G7(q7,"displayName","Legend");G7(q7,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var S6={},_6={},PK;function iHe(){return PK||(PK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let s=0;s<r.length;s++){const o=r[s],l=n(o);a.has(l)||a.set(l,o)}return Array.from(a.values())}e.uniqBy=t}(_6)),_6}var T6={},FK;function P3(){return FK||(FK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(T6)),T6}var B6={},I6={},D6={},RK;function oHe(){return RK||(RK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(D6)),D6}var LK;function K7(){return LK||(LK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oHe();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r}(I6)),I6}var O6={},MK;function lHe(){return MK||(MK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(O6)),O6}var UK;function cHe(){return UK||(UK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=K7(),r=lHe();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n}(B6)),B6}var P6={},F6={},HK;function uHe(){return HK||(HK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=R7();function r(n){return function(a){return t.get(a,n)}}e.property=r}(F6)),F6}var R6={},L6={},M6={},U6={},QK;function mue(){return QK||(QK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(U6)),U6}var H6={},VK;function pue(){return VK||(VK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(H6)),H6}var Q6={},$K;function W7(){return $K||($K=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t}(Q6)),Q6}var zK;function dHe(){return zK||(zK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=X7(),r=mue(),n=pue(),a=W7();function s(f,A,m){return typeof m!="function"?t.isMatch(f,A):o(f,A,function g(x,v,y,N,C,_){const j=m(x,v,y,N,C,_);return j!==void 0?!!j:o(x,v,g,_)},new Map)}function o(f,A,m,g){if(A===f)return!0;switch(typeof A){case"object":return l(f,A,m,g);case"function":return Object.keys(A).length>0?o(f,{...A},m,g):a.eq(f,A);default:return r.isObject(f)?typeof A=="string"?A==="":!0:a.eq(f,A)}}function l(f,A,m,g){if(A==null)return!0;if(Array.isArray(A))return u(f,A,m,g);if(A instanceof Map)return c(f,A,m,g);if(A instanceof Set)return d(f,A,m,g);const x=Object.keys(A);if(f==null)return x.length===0;if(x.length===0)return!0;if(g&&g.has(A))return g.get(A)===f;g&&g.set(A,f);try{for(let v=0;v<x.length;v++){const y=x[v];if(!n.isPrimitive(f)&&!(y in f)||A[y]===void 0&&f[y]!==void 0||A[y]===null&&f[y]!==null||!m(f[y],A[y],y,f,A,g))return!1}return!0}finally{g&&g.delete(A)}}function c(f,A,m,g){if(A.size===0)return!0;if(!(f instanceof Map))return!1;for(const[x,v]of A.entries()){const y=f.get(x);if(m(y,v,x,f,A,g)===!1)return!1}return!0}function u(f,A,m,g){if(A.length===0)return!0;if(!Array.isArray(f))return!1;const x=new Set;for(let v=0;v<A.length;v++){const y=A[v];let N=!1;for(let C=0;C<f.length;C++){if(x.has(C))continue;const _=f[C];let j=!1;if(m(_,y,v,f,A,g)&&(j=!0),j){x.add(C),N=!0;break}}if(!N)return!1}return!0}function d(f,A,m,g){return A.size===0?!0:f instanceof Set?u([...f],[...A],m,g):!1}e.isMatchWith=s,e.isSetMatch=d}(M6)),M6}var GK;function X7(){return GK||(GK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dHe();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r}(L6)),L6}var V6={},$6={},z6={},qK;function gue(){return qK||(qK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t}(z6)),z6}var G6={},KK;function Y7(){return KK||(KK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(G6)),G6}var q6={},WK;function J7(){return WK||(WK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",A="[object ArrayBuffer]",m="[object Object]",g="[object Error]",x="[object DataView]",v="[object Uint8Array]",y="[object Uint8ClampedArray]",N="[object Uint16Array]",C="[object Uint32Array]",_="[object BigUint64Array]",j="[object Int8Array]",I="[object Int16Array]",T="[object Int32Array]",k="[object BigInt64Array]",B="[object Float32Array]",M="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=A,e.arrayTag=d,e.bigInt64ArrayTag=k,e.bigUint64ArrayTag=_,e.booleanTag=a,e.dataViewTag=x,e.dateTag=l,e.errorTag=g,e.float32ArrayTag=B,e.float64ArrayTag=M,e.functionTag=f,e.int16ArrayTag=I,e.int32ArrayTag=T,e.int8ArrayTag=j,e.mapTag=c,e.numberTag=n,e.objectTag=m,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=N,e.uint32ArrayTag=C,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=y}(q6)),q6}var K6={},XK;function fHe(){return XK||(XK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(K6)),K6}var YK;function xue(){return YK||(YK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gue(),r=Y7(),n=J7(),a=pue(),s=fHe();function o(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,A,m=new Map,g=void 0){const x=g==null?void 0:g(d,f,A,m);if(x!=null)return x;if(a.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const v=new Array(d.length);m.set(d,v);for(let y=0;y<d.length;y++)v[y]=l(d[y],y,A,m,g);return Object.hasOwn(d,"index")&&(v.index=d.index),Object.hasOwn(d,"input")&&(v.input=d.input),v}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const v=new RegExp(d.source,d.flags);return v.lastIndex=d.lastIndex,v}if(d instanceof Map){const v=new Map;m.set(d,v);for(const[y,N]of d)v.set(y,l(N,y,A,m,g));return v}if(d instanceof Set){const v=new Set;m.set(d,v);for(const y of d)v.add(l(y,void 0,A,m,g));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const v=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,v);for(let y=0;y<d.length;y++)v[y]=l(d[y],y,A,m,g);return v}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const v=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,v),c(v,d,A,m,g),v}if(typeof File<"u"&&d instanceof File){const v=new File([d],d.name,{type:d.type});return m.set(d,v),c(v,d,A,m,g),v}if(d instanceof Blob){const v=new Blob([d],{type:d.type});return m.set(d,v),c(v,d,A,m,g),v}if(d instanceof Error){const v=new d.constructor;return m.set(d,v),v.message=d.message,v.name=d.name,v.stack=d.stack,v.cause=d.cause,c(v,d,A,m,g),v}if(typeof d=="object"&&u(d)){const v=Object.create(Object.getPrototypeOf(d));return m.set(d,v),c(v,d,A,m,g),v}return d}function c(d,f,A=d,m,g){const x=[...Object.keys(f),...t.getSymbols(f)];for(let v=0;v<x.length;v++){const y=x[v],N=Object.getOwnPropertyDescriptor(d,y);(N==null||N.writable)&&(d[y]=l(f[y],y,A,m,g))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c}($6)),$6}var JK;function hHe(){return JK||(JK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xue();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r}(V6)),V6}var ZK;function AHe(){return ZK||(ZK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=X7(),r=hHe();function n(a){return a=r.cloneDeep(a),s=>t.isMatch(s,a)}e.matches=n}(R6)),R6}var W6={},X6={},Y6={},eW;function mHe(){return eW||(eW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xue(),r=J7();function n(a,s){return t.cloneDeepWith(a,(o,l,c,u)=>{const d=s==null?void 0:s(o,l,c,u);if(d!=null)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n}(Y6)),Y6}var tW;function pHe(){return tW||(tW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mHe();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r}(X6)),X6}var J6={},Z6={},rW;function vue(){return rW||(rW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r}(Z6)),Z6}var eD={},nW;function gHe(){return nW||(nW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Y7();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r}(eD)),eD}var aW;function xHe(){return aW||(aW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$ce(),r=vue(),n=gHe(),a=F7();function s(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=a.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=s}(J6)),J6}var sW;function vHe(){return sW||(sW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=X7(),r=zce(),n=pHe(),a=R7(),s=xHe();function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,l);return d===void 0?s.has(u,l):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=o}(W6)),W6}var iW;function Z7(){return iW||(iW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P3(),r=uHe(),n=AHe(),a=vHe();function s(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=s}(P6)),P6}var oW;function bHe(){return oW||(oW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iHe(),r=P3(),n=cHe(),a=Z7();function s(o,l=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),a.iteratee(l)):[]}e.uniqBy=s}(S6)),S6}var tD,lW;function yHe(){return lW||(lW=1,tD=bHe().uniqBy),tD}var wHe=yHe();const cW=sc(wHe);function bue(e,t,r){return t===!0?cW(e,r):typeof t=="function"?cW(e,t):e}var rD={exports:{}},nD={},aD={exports:{}},sD={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uW;function NHe(){if(uW)return sD;uW=1;var e=ly();function t(f,A){return f===A&&(f!==0||1/f===1/A)||f!==f&&A!==A}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,s=e.useLayoutEffect,o=e.useDebugValue;function l(f,A){var m=A(),g=n({inst:{value:m,getSnapshot:A}}),x=g[0].inst,v=g[1];return s(function(){x.value=m,x.getSnapshot=A,c(x)&&v({inst:x})},[f,m,A]),a(function(){return c(x)&&v({inst:x}),f(function(){c(x)&&v({inst:x})})},[f]),o(m),m}function c(f){var A=f.getSnapshot;f=f.value;try{var m=A();return!r(f,m)}catch{return!0}}function u(f,A){return A()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return sD.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,sD}var dW;function CHe(){return dW||(dW=1,aD.exports=NHe()),aD.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fW;function EHe(){if(fW)return nD;fW=1;var e=ly(),t=CHe();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,s=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return nD.useSyncExternalStoreWithSelector=function(u,d,f,A,m){var g=s(null);if(g.current===null){var x={hasValue:!1,value:null};g.current=x}else x=g.current;g=l(function(){function y(I){if(!N){if(N=!0,C=I,I=A(I),m!==void 0&&x.hasValue){var T=x.value;if(m(T,I))return _=T}return _=I}if(T=_,n(C,I))return T;var k=A(I);return m!==void 0&&m(T,k)?(C=I,T):(C=I,_=k)}var N=!1,C,_,j=f===void 0?null:f;return[function(){return y(d())},j===null?void 0:function(){return y(j())}]},[d,f,A,m]);var v=a(u,g[0],g[1]);return o(function(){x.hasValue=!0,x.value=v},[v]),c(v),v},nD}var hW;function jHe(){return hW||(hW=1,rD.exports=EHe()),rD.exports}var yue=jHe();const kHe=sc(yue);var eU=w.createContext(null),SHe=e=>e,ss=()=>{var e=w.useContext(eU);return e?e.store.dispatch:SHe},OS=()=>{},_He=()=>OS,THe=(e,t)=>e===t;function fr(e){var t=w.useContext(eU);return yue.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:_He,t?t.store.getState:OS,t?t.store.getState:OS,t?e:OS,THe)}function BHe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function IHe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function DHe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var AW=e=>Array.isArray(e)?e:[e];function OHe(e){const t=Array.isArray(e[0])?e[0]:e;return DHe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function PHe(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var FHe=class{constructor(e){this.value=e}deref(){return this.value}},RHe=typeof WeakRef<"u"?WeakRef:FHe,LHe=0,mW=1;function uk(){return{s:LHe,v:void 0,o:null,p:null}}function wue(e,t={}){let r=uk();const{resultEqualityCheck:n}=t;let a,s=0;function o(){var f;let l=r;const{length:c}=arguments;for(let A=0,m=c;A<m;A++){const g=arguments[A];if(typeof g=="function"||typeof g=="object"&&g!==null){let x=l.o;x===null&&(l.o=x=new WeakMap);const v=x.get(g);v===void 0?(l=uk(),x.set(g,l)):l=v}else{let x=l.p;x===null&&(l.p=x=new Map);const v=x.get(g);v===void 0?(l=uk(),x.set(g,l)):l=v}}const u=l;let d;if(l.s===mW)d=l.v;else if(d=e.apply(null,arguments),s++,n){const A=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;A!=null&&n(A,d)&&(d=A,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new RHe(d):d}return u.s=mW,u.v=d,d}return o.clearCache=()=>{r=uk(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function MHe(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let s=0,o=0,l,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),BHe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:A=[],argsMemoize:m=wue,argsMemoizeOptions:g=[]}=d,x=AW(A),v=AW(g),y=OHe(a),N=f(function(){return s++,u.apply(null,arguments)},...x),C=m(function(){o++;const j=PHe(y,arguments);return l=N.apply(null,j),l},...v);return Object.assign(C,{resultFunc:u,memoizedResultFunc:N,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var vt=MHe(wue),UHe=Object.assign((e,t=vt)=>{IHe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>UHe}),iD={},oD={},lD={},pW;function HHe(){return pW||(pW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const o=t(n),l=t(a);if(o===l&&o===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?l-o:o-l}return 0};e.compareValues=r}(lD)),lD}var cD={},uD={},gW;function Nue(){return gW||(gW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(uD)),uD}var xW;function QHe(){return xW||(xW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nue(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||o!=null&&Object.hasOwn(o,s)}e.isKey=a}(cD)),cD}var vW;function VHe(){return vW||(vW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HHe(),r=QHe(),n=F7();function a(s,o,l,c){if(s==null)return[];l=c?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(m=>String(m));const u=(m,g)=>{let x=m;for(let v=0;v<g.length&&x!=null;++v)x=x[g[v]];return x},d=(m,g)=>g==null||m==null?g:typeof m=="object"&&"key"in m?Object.hasOwn(g,m.key)?g[m.key]:u(g,m.path):typeof m=="function"?m(g):Array.isArray(m)?u(g,m):typeof g=="object"?g[m]:g,f=o.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:n.toPath(m)}));return s.map(m=>({original:m,criteria:f.map(g=>d(g,m))})).slice().sort((m,g)=>{for(let x=0;x<f.length;x++){const v=t.compareValues(m.criteria[x],g.criteria[x],l[x]);if(v!==0)return v}return 0}).map(m=>m.original)}e.orderBy=a}(oD)),oD}var dD={},bW;function $He(){return bW||(bW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],s=Math.floor(n),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<s?o(d,c+1):a.push(d)}};return o(r,0),a}e.flatten=t}(dD)),dD}var fD={},yW;function Cue(){return yW||(yW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vue(),r=K7(),n=mue(),a=W7();function s(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?a.eq(c[l],o):!1}e.isIterateeCall=s}(fD)),fD}var wW;function zHe(){return wW||(wW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VHe(),r=$He(),n=Cue();function a(s,...o){const l=o.length;return l>1&&n.isIterateeCall(s,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(s,r.flatten(o),["asc"])}e.sortBy=a}(iD)),iD}var hD,NW;function GHe(){return NW||(NW=1,hD=zHe().sortBy),hD}var qHe=GHe();const F3=sc(qHe);var Eue=e=>e.legend.settings,KHe=e=>e.legend.size,WHe=e=>e.legend.payload,XHe=vt([WHe,Eue],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?F3(n,r):n});function YHe(){return fr(XHe)}var dk=1;function jue(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=w.useState({height:0,left:0,top:0,width:0}),n=w.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-t.height)>dk||Math.abs(o.left-t.left)>dk||Math.abs(o.top-t.top)>dk||Math.abs(o.width-t.width)>dk)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Po(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var JHe=typeof Symbol=="function"&&Symbol.observable||"@@observable",CW=JHe,AD=()=>Math.random().toString(36).substring(7).split("").join("."),ZHe={INIT:`@@redux/INIT${AD()}`,REPLACE:`@@redux/REPLACE${AD()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${AD()}`},c_=ZHe;function tU(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function kue(e,t,r){if(typeof e!="function")throw new Error(Po(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Po(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Po(1));return r(kue)(e,t)}let n=e,a=t,s=new Map,o=s,l=0,c=!1;function u(){o===s&&(o=new Map,s.forEach((v,y)=>{o.set(y,v)}))}function d(){if(c)throw new Error(Po(3));return a}function f(v){if(typeof v!="function")throw new Error(Po(4));if(c)throw new Error(Po(5));let y=!0;u();const N=l++;return o.set(N,v),function(){if(y){if(c)throw new Error(Po(6));y=!1,u(),o.delete(N),s=null}}}function A(v){if(!tU(v))throw new Error(Po(7));if(typeof v.type>"u")throw new Error(Po(8));if(typeof v.type!="string")throw new Error(Po(17));if(c)throw new Error(Po(9));try{c=!0,a=n(a,v)}finally{c=!1}return(s=o).forEach(N=>{N()}),v}function m(v){if(typeof v!="function")throw new Error(Po(10));n=v,A({type:c_.REPLACE})}function g(){const v=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Po(11));function N(){const _=y;_.next&&_.next(d())}return N(),{unsubscribe:v(N)}},[CW](){return this}}}return A({type:c_.INIT}),{dispatch:A,subscribe:f,getState:d,replaceReducer:m,[CW]:g}}function eQe(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:c_.INIT})>"u")throw new Error(Po(12));if(typeof r(void 0,{type:c_.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Po(13))})}function Sue(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let a;try{eQe(r)}catch(s){a=s}return function(o={},l){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],A=r[f],m=o[f],g=A(m,l);if(typeof g>"u")throw l&&l.type,new Error(Po(14));u[f]=g,c=c||g!==m}return c=c||n.length!==Object.keys(o).length,c?u:o}}function u_(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function tQe(...e){return t=>(r,n)=>{const a=t(r,n);let s=()=>{throw new Error(Po(15))};const o={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},l=e.map(c=>c(o));return s=u_(...l)(a.dispatch),{...a,dispatch:s}}}function _ue(e){return tU(e)&&"type"in e&&typeof e.type=="string"}var Tue=Symbol.for("immer-nothing"),EW=Symbol.for("immer-draftable"),Du=Symbol.for("immer-state");function pf(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var U1=Object.getPrototypeOf;function Lx(e){return!!e&&!!e[Du]}function NA(e){var t;return e?Bue(e)||Array.isArray(e)||!!e[EW]||!!((t=e.constructor)!=null&&t[EW])||L3(e)||M3(e):!1}var rQe=Object.prototype.constructor.toString();function Bue(e){if(!e||typeof e!="object")return!1;const t=U1(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===rQe}function d_(e,t){R3(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function R3(e){const t=e[Du];return t?t.type_:Array.isArray(e)?1:L3(e)?2:M3(e)?3:0}function KF(e,t){return R3(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Iue(e,t,r){const n=R3(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function nQe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function L3(e){return e instanceof Map}function M3(e){return e instanceof Set}function Dg(e){return e.copy_||e.base_}function WF(e,t){if(L3(e))return new Map(e);if(M3(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Bue(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Du];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(U1(e),n)}else{const n=U1(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function rU(e,t=!1){return U3(e)||Lx(e)||!NA(e)||(R3(e)>1&&(e.set=e.add=e.clear=e.delete=aQe),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>rU(n,!0))),e}function aQe(){pf(2)}function U3(e){return Object.isFrozen(e)}var sQe={};function Mx(e){const t=sQe[e];return t||pf(0,e),t}var iC;function Due(){return iC}function iQe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function jW(e,t){t&&(Mx("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function XF(e){YF(e),e.drafts_.forEach(oQe),e.drafts_=null}function YF(e){e===iC&&(iC=e.parent_)}function kW(e){return iC=iQe(iC,e)}function oQe(e){const t=e[Du];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function SW(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Du].modified_&&(XF(t),pf(4)),NA(e)&&(e=f_(t,e),t.parent_||h_(t,e)),t.patches_&&Mx("Patches").generateReplacementPatches_(r[Du].base_,e,t.patches_,t.inversePatches_)):e=f_(t,r,[]),XF(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Tue?e:void 0}function f_(e,t,r){if(U3(t))return t;const n=t[Du];if(!n)return d_(t,(a,s)=>_W(e,n,t,a,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return h_(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let s=a,o=!1;n.type_===3&&(s=new Set(a),a.clear(),o=!0),d_(s,(l,c)=>_W(e,n,a,l,c,r,o)),h_(e,a,!1),r&&e.patches_&&Mx("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function _W(e,t,r,n,a,s,o){if(Lx(a)){const l=s&&t&&t.type_!==3&&!KF(t.assigned_,n)?s.concat(n):void 0,c=f_(e,a,l);if(Iue(r,n,c),Lx(c))e.canAutoFreeze_=!1;else return}else o&&r.add(a);if(NA(a)&&!U3(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;f_(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&h_(e,a)}}function h_(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&rU(t,r)}function lQe(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Due(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=nU;r&&(a=[n],s=oC);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=o,l}var nU={get(e,t){if(t===Du)return e;const r=Dg(e);if(!KF(r,t))return cQe(e,r,t);const n=r[t];return e.finalized_||!NA(n)?n:n===mD(e.base_,t)?(pD(e),e.copy_[t]=ZF(n,e)):n},has(e,t){return t in Dg(e)},ownKeys(e){return Reflect.ownKeys(Dg(e))},set(e,t,r){const n=Oue(Dg(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=mD(Dg(e),t),s=a==null?void 0:a[Du];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(nQe(r,a)&&(r!==void 0||KF(e.base_,t)))return!0;pD(e),JF(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return mD(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,pD(e),JF(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Dg(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){pf(11)},getPrototypeOf(e){return U1(e.base_)},setPrototypeOf(){pf(12)}},oC={};d_(nU,(e,t)=>{oC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});oC.deleteProperty=function(e,t){return oC.set.call(this,e,t,void 0)};oC.set=function(e,t,r){return nU.set.call(this,e[0],t,r,e[0])};function mD(e,t){const r=e[Du];return(r?Dg(r):e)[t]}function cQe(e,t,r){var a;const n=Oue(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function Oue(e,t){if(!(t in e))return;let r=U1(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=U1(r)}}function JF(e){e.modified_||(e.modified_=!0,e.parent_&&JF(e.parent_))}function pD(e){e.copy_||(e.copy_=WF(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var uQe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const o=this;return function(c=s,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&pf(6),n!==void 0&&typeof n!="function"&&pf(7);let a;if(NA(t)){const s=kW(this),o=ZF(t,void 0);let l=!0;try{a=r(o),l=!1}finally{l?XF(s):YF(s)}return jW(s,n),SW(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===Tue&&(a=void 0),this.autoFreeze_&&rU(a,!0),n){const s=[],o=[];Mx("Patches").generateReplacementPatches_(t,a,s,o),n(s,o)}return a}else pf(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let n,a;return[this.produce(t,r,(o,l)=>{n=o,a=l}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){NA(e)||pf(8),Lx(e)&&(e=lA(e));const t=kW(this),r=ZF(e,void 0);return r[Du].isManual_=!0,YF(t),r}finishDraft(e,t){const r=e&&e[Du];(!r||!r.isManual_)&&pf(9);const{scope_:n}=r;return jW(n,t),SW(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=Mx("Patches").applyPatches_;return Lx(e)?n(e,t):this.produce(e,a=>n(a,t))}};function ZF(e,t){const r=L3(e)?Mx("MapSet").proxyMap_(e,t):M3(e)?Mx("MapSet").proxySet_(e,t):lQe(e,t);return(t?t.scope_:Due()).drafts_.push(r),r}function lA(e){return Lx(e)||pf(10,e),Pue(e)}function Pue(e){if(!NA(e)||U3(e))return e;const t=e[Du];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=WF(e,t.scope_.immer_.useStrictShallowCopy_)}else r=WF(e,!0);return d_(r,(n,a)=>{Iue(r,n,Pue(a))}),t&&(t.finalized_=!1),r}var Ou=new uQe,Fue=Ou.produce;Ou.produceWithPatches.bind(Ou);Ou.setAutoFreeze.bind(Ou);Ou.setUseStrictShallowCopy.bind(Ou);Ou.applyPatches.bind(Ou);Ou.createDraft.bind(Ou);Ou.finishDraft.bind(Ou);function Rue(e){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,e):a(s)}var dQe=Rue(),fQe=Rue,hQe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?u_:u_.apply(null,arguments)};function Id(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(_u(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>_ue(n)&&n.type===e,r}var Lue=class C2 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,C2.prototype)}static get[Symbol.species](){return C2}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new C2(...t[0].concat(this)):new C2(...t.concat(this))}};function TW(e){return NA(e)?Fue(e,()=>{}):e}function fk(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function AQe(e){return typeof e=="boolean"}var mQe=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let o=new Lue;return r&&(AQe(r)?o.push(dQe):o.push(fQe(r.extraArgument))),o},pQe="RTK_autoBatch",BW=e=>t=>{setTimeout(t,e)},gQe=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,s=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:BW(10):e.type==="callback"?e.queueNotification:BW(e.timeout),u=()=>{o=!1,s&&(s=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),A=n.subscribe(f);return l.add(d),()=>{A(),l.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[pQe]),s=!a,s&&(o||(o=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},xQe=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new Lue(e);return n&&a.push(gQe(typeof n=="object"?n:void 0)),a};function vQe(e){const t=mQe(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let l;if(typeof r=="function")l=r;else if(tU(r))l=Sue(r);else throw new Error(_u(1));let c;typeof n=="function"?c=n(t):c=t();let u=u_;a&&(u=hQe({trace:!1,...typeof a=="object"&&a}));const d=tQe(...c),f=xQe(d);let A=typeof o=="function"?o(f):f();const m=u(...A);return kue(l,s,m)}function Mue(e){const t={},r=[];let n;const a={addCase(s,o){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(_u(28));if(l in t)throw new Error(_u(29));return t[l]=o,a},addMatcher(s,o){return r.push({matcher:s,reducer:o}),a},addDefaultCase(s){return n=s,a}};return e(a),[t,r,n]}function bQe(e){return typeof e=="function"}function yQe(e,t){let[r,n,a]=Mue(t),s;if(bQe(e))s=()=>TW(e());else{const l=TW(e);s=()=>l}function o(l=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(Lx(d)){const m=f(d,c);return m===void 0?d:m}else{if(NA(d))return Fue(d,A=>f(A,c));{const A=f(d,c);if(A===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return A}}return d},l)}return o.getInitialState=s,o}var wQe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",NQe=(e=21)=>{let t="",r=e;for(;r--;)t+=wQe[Math.random()*64|0];return t},CQe=Symbol.for("rtk-slice-createasyncthunk");function EQe(e,t){return`${e}/${t}`}function jQe({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[CQe];return function(a){const{name:s,reducerPath:o=s}=a;if(!s)throw new Error(_u(11));const l=(typeof a.reducers=="function"?a.reducers(SQe()):a.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(_,j){const I=typeof _=="string"?_:_.type;if(!I)throw new Error(_u(12));if(I in u.sliceCaseReducersByType)throw new Error(_u(13));return u.sliceCaseReducersByType[I]=j,d},addMatcher(_,j){return u.sliceMatchers.push({matcher:_,reducer:j}),d},exposeAction(_,j){return u.actionCreators[_]=j,d},exposeCaseReducer(_,j){return u.sliceCaseReducersByName[_]=j,d}};c.forEach(_=>{const j=l[_],I={reducerName:_,type:EQe(s,_),createNotation:typeof a.reducers=="function"};TQe(j)?IQe(I,j,d,t):_Qe(I,j,d)});function f(){const[_={},j=[],I=void 0]=typeof a.extraReducers=="function"?Mue(a.extraReducers):[a.extraReducers],T={..._,...u.sliceCaseReducersByType};return yQe(a.initialState,k=>{for(let B in T)k.addCase(B,T[B]);for(let B of u.sliceMatchers)k.addMatcher(B.matcher,B.reducer);for(let B of j)k.addMatcher(B.matcher,B.reducer);I&&k.addDefaultCase(I)})}const A=_=>_,m=new Map,g=new WeakMap;let x;function v(_,j){return x||(x=f()),x(_,j)}function y(){return x||(x=f()),x.getInitialState()}function N(_,j=!1){function I(k){let B=k[_];return typeof B>"u"&&j&&(B=fk(g,I,y)),B}function T(k=A){const B=fk(m,j,()=>new WeakMap);return fk(B,k,()=>{const M={};for(const[P,S]of Object.entries(a.selectors??{}))M[P]=kQe(S,k,()=>fk(g,k,y),j);return M})}return{reducerPath:_,getSelectors:T,get selectors(){return T(I)},selectSlice:I}}const C={name:s,reducer:v,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,...N(o),injectInto(_,{reducerPath:j,...I}={}){const T=j??o;return _.inject({reducerPath:T,reducer:v},I),{...C,...N(T,!0)}}};return C}}function kQe(e,t,r,n){function a(s,...o){let l=t(s);return typeof l>"u"&&n&&(l=r()),e(l,...o)}return a.unwrapped=e,a}var Ru=jQe();function SQe(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function _Qe({type:e,reducerName:t,createNotation:r},n,a){let s,o;if("reducer"in n){if(r&&!BQe(n))throw new Error(_u(17));s=n.reducer,o=n.prepare}else s=n;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?Id(e,o):Id(e))}function TQe(e){return e._reducerDefinitionType==="asyncThunk"}function BQe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function IQe({type:e,reducerName:t},r,n,a){if(!a)throw new Error(_u(18));const{payloadCreator:s,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,f=a(e,s,d);n.exposeAction(t,f),o&&n.addCase(f.fulfilled,o),l&&n.addCase(f.pending,l),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:o||hk,pending:l||hk,rejected:c||hk,settled:u||hk})}function hk(){}var DQe="task",Uue="listener",Hue="completed",aU="cancelled",OQe=`task-${aU}`,PQe=`task-${Hue}`,eR=`${Uue}-${aU}`,FQe=`${Uue}-${Hue}`,H3=class{constructor(e){CI(this,"name","TaskAbortError");CI(this,"message");this.code=e,this.message=`${DQe} ${aU} (reason: ${e})`}},sU=(e,t)=>{if(typeof e!="function")throw new TypeError(_u(32))},A_=()=>{},Que=(e,t=A_)=>(e.catch(t),e),Vue=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Ax=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},mx=e=>{if(e.aborted){const{reason:t}=e;throw new H3(t)}};function $ue(e,t){let r=A_;return new Promise((n,a)=>{const s=()=>a(new H3(e.reason));if(e.aborted){s();return}r=Vue(e,s),t.finally(()=>r()).then(n,a)}).finally(()=>{r=A_})}var RQe=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof H3?"cancelled":"rejected",error:r}}finally{t==null||t()}},m_=e=>t=>Que($ue(e,t).then(r=>(mx(e),r))),zue=e=>{const t=m_(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:l1}=Object,IW={},Q3="listenerMiddleware",LQe=(e,t)=>{const r=n=>Vue(e,()=>Ax(n,e.reason));return(n,a)=>{sU(n);const s=new AbortController;r(s);const o=RQe(async()=>{mx(e),mx(s.signal);const l=await n({pause:m_(s.signal),delay:zue(s.signal),signal:s.signal});return mx(s.signal),l},()=>Ax(s,PQe));return a!=null&&a.autoJoin&&t.push(o.catch(A_)),{result:m_(e)(o),cancel(){Ax(s,OQe)}}}},MQe=(e,t)=>{const r=async(n,a)=>{mx(t);let s=()=>{};const l=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,A)=>{A.unsubscribe(),c([f,A.getState(),A.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&l.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await $ue(t,Promise.race(l));return mx(t),c}finally{s()}};return(n,a)=>Que(r(n,a))},Gue=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=Id(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(_u(21));return sU(s),{predicate:a,type:t,effect:s}},que=l1(e=>{const{type:t,predicate:r,effect:n}=Gue(e);return{id:NQe(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(_u(22))}}},{withTypes:()=>que}),DW=(e,t)=>{const{type:r,effect:n,predicate:a}=Gue(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},tR=e=>{e.pending.forEach(t=>{Ax(t,eR)})},UQe=e=>()=>{e.forEach(tR),e.clear()},OW=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Kue=l1(Id(`${Q3}/add`),{withTypes:()=>Kue}),HQe=Id(`${Q3}/removeAll`),Wue=l1(Id(`${Q3}/remove`),{withTypes:()=>Wue}),QQe=(...e)=>{console.error(`${Q3}/error`,...e)},sE=(e={})=>{const t=new Map,{extra:r,onError:n=QQe}=e;sU(n);const a=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&tR(d)}),s=d=>{const f=DW(t,d)??que(d);return a(f)};l1(s,{withTypes:()=>s});const o=d=>{const f=DW(t,d);return f&&(f.unsubscribe(),d.cancelActive&&tR(f)),!!f};l1(o,{withTypes:()=>o});const l=async(d,f,A,m)=>{const g=new AbortController,x=MQe(s,g.signal),v=[];try{d.pending.add(g),await Promise.resolve(d.effect(f,l1({},A,{getOriginalState:m,condition:(y,N)=>x(y,N).then(Boolean),take:x,delay:zue(g.signal),pause:m_(g.signal),extra:r,signal:g.signal,fork:LQe(g.signal,v),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((y,N,C)=>{y!==g&&(Ax(y,eR),C.delete(y))})},cancel:()=>{Ax(g,eR),d.pending.delete(g)},throwIfCancelled:()=>{mx(g.signal)}})))}catch(y){y instanceof H3||OW(n,y,{raisedBy:"effect"})}finally{await Promise.all(v),Ax(g,FQe),d.pending.delete(g)}},c=UQe(t);return{middleware:d=>f=>A=>{if(!_ue(A))return f(A);if(Kue.match(A))return s(A.payload);if(HQe.match(A)){c();return}if(Wue.match(A))return o(A.payload);let m=d.getState();const g=()=>{if(m===IW)throw new Error(_u(23));return m};let x;try{if(x=f(A),t.size>0){const v=d.getState(),y=Array.from(t.values());for(const N of y){let C=!1;try{C=N.predicate(A,v,m)}catch(_){C=!1,OW(n,_,{raisedBy:"predicate"})}C&&l(N,A,d,g)}}}finally{m=IW}return x},startListening:s,stopListening:o,clearListeners:c}};function _u(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var VQe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Xue=Ru({name:"chartLayout",initialState:VQe,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:$Qe,setLayout:zQe,setChartSize:GQe,setScale:qQe}=Xue.actions,KQe=Xue.reducer;function PW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function FW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PW(Object(r),!0).forEach(function(n){WQe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WQe(e,t,r){return(t=XQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XQe(e){var t=YQe(e,"string");return typeof t=="symbol"?t:t+""}function YQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var p_=Math.PI/180,JQe=e=>e*180/Math.PI,la=(e,t,r,n)=>({x:e+Math.cos(-p_*n)*r,y:t+Math.sin(-p_*n)*r}),Yue=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},ZQe=(e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)},eVe=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,o=ZQe({x:r,y:n},{x:a,y:s});if(o<=0)return{radius:o,angle:0};var l=(r-a)/o,c=Math.acos(l);return n>s&&(c=2*Math.PI-c),{radius:o,angle:JQe(c),angleInRadian:c}},tVe=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-s*360,endAngle:r-s*360}},rVe=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(a,s);return e+o*360},nVe=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:s}=eVe({x:r,y:n},t),{innerRadius:o,outerRadius:l}=t;if(a<o||a>l||a===0)return null;var{startAngle:c,endAngle:u}=tVe(t),d=s,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?FW(FW({},t),{},{radius:a,angle:rVe(d,t)}):null},Jue=e=>!w.isValidElement(e)&&typeof e!="function"&&typeof e!="boolean"&&e!=null?e.className:"";function Zue(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function RW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RW(Object(r),!0).forEach(function(n){aVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aVe(e,t,r){return(t=sVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sVe(e){var t=iVe(e,"string");return typeof t=="symbol"?t:t+""}function iVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sa(e,t,r){return Ka(e)||Ka(t)?r:n0(t)?Tp(e,t,r):typeof t=="function"?t(e):r}var oVe=(e,t,r,n,a)=>{var s,o=-1,l=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(l<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<l;c++){var u=c>0?r[c-1].coordinate:r[l-1].coordinate,d=r[c].coordinate,f=c>=l-1?r[0].coordinate:r[c+1].coordinate,A=void 0;if(go(d-u)!==go(f-d)){var m=[];if(go(f-d)===go(a[1]-a[0])){A=f;var g=d+a[1]-a[0];m[0]=Math.min(g,(g+u)/2),m[1]=Math.max(g,(g+u)/2)}else{A=u;var x=f+a[1]-a[0];m[0]=Math.min(d,(x+d)/2),m[1]=Math.max(d,(x+d)/2)}var v=[Math.min(d,(A+d)/2),Math.max(d,(A+d)/2)];if(e>v[0]&&e<=v[1]||e>=m[0]&&e<=m[1]){({index:o}=r[c]);break}}else{var y=Math.min(u,f),N=Math.max(u,f);if(e>(y+d)/2&&e<=(N+d)/2){({index:o}=r[c]);break}}}else if(t){for(var C=0;C<l;C++)if(C===0&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C>0&&C<l-1&&e>(t[C].coordinate+t[C-1].coordinate)/2&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C===l-1&&e>(t[C].coordinate+t[C-1].coordinate)/2){({index:o}=t[C]);break}}return o},lVe=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&s!=="center"&&ur(e[s]))return yd(yd({},e),{},{[s]:e[s]+(n||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&o!=="middle"&&ur(e[o]))return yd(yd({},e),{},{[o]:e[o]+(a||0)})}return e},o0=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",ede=(e,t,r,n)=>{if(n)return e.map(l=>l.coordinate);var a,s,o=e.map(l=>(l.coordinate===t&&(a=!0),l.coordinate===r&&(s=!0),l.coordinate));return a||o.push(t),s||o.push(r),o},tde=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:s,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:A,axisType:m}=e;if(!o)return null;var g=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,x=a==="category"&&o.bandwidth?o.bandwidth()/g:0;if(x=m==="angleAxis"&&s&&s.length>=2?go(s[0]-s[1])*2*x:x,f||A){var v=(f||A||[]).map((y,N)=>{var C=n?n.indexOf(y):y;return{coordinate:o(C)+x,value:y,offset:x,index:N}});return v.filter(y=>!$c(y.coordinate))}return c&&u?u.map((y,N)=>({coordinate:o(y)+x,value:y,index:N,offset:x})):o.ticks&&d!=null?o.ticks(d).map((y,N)=>({coordinate:o(y)+x,value:y,offset:x,index:N})):o.domain().map((y,N)=>({coordinate:o(y)+x,value:n?n[y]:y,index:N,offset:x}))},LW=1e-4,cVe=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-LW,s=Math.max(n[0],n[1])+LW,o=e(t[0]),l=e(t[r-1]);(o<a||o>s||l<a||l>s)&&e.domain([t[0],t[r-1]])}},uVe=(e,t)=>{if(!t||t.length!==2||!ur(t[0])||!ur(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!ur(e[0])||e[0]<r)&&(a[0]=r),(!ur(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},dVe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0,o=0;o<t;++o){var l=$c(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1]):(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1])}},fVe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0;s<t;++s){var o=$c(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},hVe={sign:dVe,expand:$9e,none:M1,silhouette:z9e,wiggle:G9e,positive:fVe},AVe=(e,t,r)=>{var n=hVe[r],a=V9e().keys(t).value((s,o)=>+Sa(s,o,0)).order(zF).offset(n);return a(e)};function rde(e){return e==null?void 0:String(e)}function MW(e){var{axis:t,ticks:r,bandSize:n,entry:a,index:s,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Ka(a[t.dataKey])){var l=qce(r,"value",a[t.dataKey]);if(l)return l.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var c=Sa(a,Ka(o)?t.dataKey:o);return Ka(c)?null:t.scale(c)}var UW=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:s,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+n:null;var l=Sa(s,t.dataKey,t.scale.domain()[o]);return Ka(l)?null:t.scale(l)-a/2+n},mVe=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},pVe=e=>{var t=e.flat(2).filter(ur);return[Math.min(...t),Math.max(...t)]},gVe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],xVe=(e,t,r)=>{if(e!=null)return gVe(Object.keys(e).reduce((n,a)=>{var s=e[a],{stackedData:o}=s,l=o.reduce((c,u)=>{var d=Zue(u,t,r),f=pVe(d);return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},HW=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,QW=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ux=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=F3(t,d=>d.coordinate),s=1/0,o=1,l=a.length;o<l;o++){var c=a[o],u=a[o-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function VW(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return yd(yd({},t),{},{dataKey:r,payload:n,value:a,name:s})}function qp(e,t){if(e)return String(e);if(typeof t=="string")return t}function vVe(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var s=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return s?{x:e,y:t}:null}return n?nVe({x:e,y:t},n):null}var bVe=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,{radius:o}=n;return yd(yd(yd({},n),la(n.cx,n.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,{angle:c}=n;return yd(yd(yd({},n),la(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},yVe=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,QA=e=>e.layout.width,VA=e=>e.layout.height,wVe=e=>e.layout.scale,nde=e=>e.layout.margin,iU=vt(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),oU=vt(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),ade="data-recharts-item-index",sde="data-recharts-item-data-key",V3=60;function $W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _m(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$W(Object(r),!0).forEach(function(n){NVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$W(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NVe(e,t,r){return(t=CVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CVe(e){var t=EVe(e,"string");return typeof t=="symbol"?t:t+""}function EVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jVe=e=>e.brush.height,Ki=vt([QA,VA,nde,jVe,iU,oU,Eue,KHe],(e,t,r,n,a,s,o,l)=>{var c=s.reduce((g,x)=>{var{orientation:v}=x;if(!x.mirror&&!x.hide){var y=typeof x.width=="number"?x.width:V3;return _m(_m({},g),{},{[v]:g[v]+y})}return g},{left:r.left||0,right:r.right||0}),u=a.reduce((g,x)=>{var{orientation:v}=x;return!x.mirror&&!x.hide?_m(_m({},g),{},{[v]:Tp(g,"".concat(v))+x.height}):g},{top:r.top||0,bottom:r.bottom||0}),d=_m(_m({},u),c),f=d.bottom;d.bottom+=n,d=lVe(d,o,l);var A=e-d.left-d.right,m=t-d.top-d.bottom;return _m(_m({brushBottom:f},d),{},{width:Math.max(A,0),height:Math.max(m,0)})}),kVe=vt(Ki,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),ide=vt(QA,VA,(e,t)=>({x:0,y:0,width:e,height:t})),SVe=w.createContext(null),Ul=()=>w.useContext(SVe)!=null,$3=e=>e.brush,z3=vt([$3,Ki,nde],(e,t,r)=>({height:e.height,x:ur(e.x)?e.x:t.left,y:ur(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:ur(e.width)?e.width:t.width})),lU=()=>{var e,t=Ul(),r=fr(kVe),n=fr(z3),a=(e=fr($3))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},_Ve={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},ode=()=>{var e;return(e=fr(Ki))!==null&&e!==void 0?e:_Ve},cU=()=>fr(QA),uU=()=>fr(VA),TVe={top:0,right:0,bottom:0,left:0},BVe=()=>{var e;return(e=fr(t=>t.layout.margin))!==null&&e!==void 0?e:TVe},yn=e=>e.layout.layoutType,G3=()=>fr(yn),IVe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},lde=Ru({name:"legend",initialState:IVe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=lA(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:zW,setLegendSettings:DVe,addLegendPayload:cde,removeLegendPayload:ude}=lde.actions,OVe=lde.reducer,PVe=["contextPayload"];function rR(){return rR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rR.apply(null,arguments)}function GW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function H1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GW(Object(r),!0).forEach(function(n){dU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dU(e,t,r){return(t=FVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FVe(e){var t=RVe(e,"string");return typeof t=="symbol"?t:t+""}function RVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LVe(e,t){if(e==null)return{};var r,n,a=MVe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function MVe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function UVe(e){return e.value}function HVe(e){var{contextPayload:t}=e,r=LVe(e,PVe),n=bue(t,e.payloadUniqBy,UVe),a=H1(H1({},r),{},{payload:n});return w.isValidElement(e.content)?w.cloneElement(e.content,a):typeof e.content=="function"?w.createElement(e.content,a):w.createElement(q7,a)}function QVe(e,t,r,n,a,s){var{layout:o,align:l,verticalAlign:c}=t,u,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?u={left:((n||0)-s.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),H1(H1({},u),d)}function VVe(e){var t=ss();return w.useEffect(()=>{t(DVe(e))},[t,e]),null}function $Ve(e){var t=ss();return w.useEffect(()=>(t(zW(e)),()=>{t(zW({width:0,height:0}))}),[t,e]),null}function zVe(e){var t=YHe(),r=h9e(),n=BVe(),{width:a,height:s,wrapperStyle:o,portal:l}=e,[c,u]=jue([t]),d=cU(),f=uU(),A=d-(n.left||0)-(n.right||0),m=Kp.getWidthOrHeight(e.layout,s,a,A),g=l?o:H1(H1({position:"absolute",width:(m==null?void 0:m.width)||a||"auto",height:(m==null?void 0:m.height)||s||"auto"},QVe(o,e,n,d,f,c)),o),x=l??r;if(x==null)return null;var v=w.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:u},w.createElement(VVe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),w.createElement($Ve,{width:c.width,height:c.height}),w.createElement(HVe,rR({},e,m,{margin:n,chartWidth:d,chartHeight:f,contextPayload:t})));return H7.createPortal(v,x)}class Kp extends w.PureComponent{static getWidthOrHeight(t,r,n,a){return t==="vertical"&&ur(r)?{height:r}:t==="horizontal"?{width:n||a}:null}render(){return w.createElement(zVe,this.props)}}dU(Kp,"displayName","Legend");dU(Kp,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function nR(){return nR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nR.apply(null,arguments)}function qW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qW(Object(r),!0).forEach(function(n){GVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GVe(e,t,r){return(t=qVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qVe(e){var t=KVe(e,"string");return typeof t=="symbol"?t:t+""}function KVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WVe(e){return Array.isArray(e)&&n0(e[0])&&n0(e[1])?e.join(" ~ "):e}var XVe=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:A=!1}=e,m=()=>{if(s&&s.length){var j={padding:0,margin:0},I=(l?F3(s,l):s).map((T,k)=>{if(T.type==="none")return null;var B=T.formatter||o||WVe,{value:M,name:P}=T,S=M,L=P;if(B){var H=B(M,P,T,k,s);if(Array.isArray(H))[S,L]=H;else if(H!=null)S=H;else return null}var q=gD({display:"block",paddingTop:4,paddingBottom:4,color:T.color||"#000"},n);return w.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(k),style:q},n0(L)?w.createElement("span",{className:"recharts-tooltip-item-name"},L):null,n0(L)?w.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,w.createElement("span",{className:"recharts-tooltip-item-value"},S),w.createElement("span",{className:"recharts-tooltip-item-unit"},T.unit||""))});return w.createElement("ul",{className:"recharts-tooltip-item-list",style:j},I)}return null},g=gD({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),x=gD({margin:0},a),v=!Ka(d),y=v?d:"",N=mn("recharts-default-tooltip",c),C=mn("recharts-tooltip-label",u);v&&f&&s!==void 0&&s!==null&&(y=f(d,s));var _=A?{role:"status","aria-live":"assertive"}:{};return w.createElement("div",nR({className:N,style:g},_),w.createElement("p",{className:C,style:x},w.isValidElement(y)?y:"".concat(y)),m())},Fw="recharts-tooltip-wrapper",YVe={visibility:"hidden"};function JVe(e){var{coordinate:t,translateX:r,translateY:n}=e;return mn(Fw,{["".concat(Fw,"-right")]:ur(r)&&t&&ur(t.x)&&r>=t.x,["".concat(Fw,"-left")]:ur(r)&&t&&ur(t.x)&&r<t.x,["".concat(Fw,"-bottom")]:ur(n)&&t&&ur(t.y)&&n>=t.y,["".concat(Fw,"-top")]:ur(n)&&t&&ur(t.y)&&n<t.y})}function KW(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=e;if(s&&ur(s[n]))return s[n];var d=r[n]-l-(a>0?a:0),f=r[n]+a;if(t[n])return o[n]?d:f;var A=c[n];if(A==null)return 0;if(o[n]){var m=d,g=A;return m<g?Math.max(f,A):Math.max(d,A)}if(u==null)return 0;var x=f+l,v=A+u;return x>v?Math.max(d,A):Math.max(f,A)}function ZVe(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function e$e(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,u,d,f;return o.height>0&&o.width>0&&r?(d=KW({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=KW({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=ZVe({translateX:d,translateY:f,useTranslate3d:l})):u=YVe,{cssProperties:u,cssClasses:JVe({translateX:d,translateY:f,coordinate:r})}}function WW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ak(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WW(Object(r),!0).forEach(function(n){aR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aR(e,t,r){return(t=t$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t$e(e){var t=r$e(e,"string");return typeof t=="symbol"?t:t+""}function r$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class n$e extends w.PureComponent{constructor(){super(...arguments),aR(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),aR(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:A,viewBox:m,wrapperStyle:g,lastBoundingBox:x,innerRef:v,hasPortalFromProps:y}=this.props,{cssClasses:N,cssProperties:C}=e$e({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:x.height,width:x.width},useTranslate3d:A,viewBox:m}),_=y?{}:Ak(Ak({transition:c&&t?"transform ".concat(n,"ms ").concat(a):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),j=Ak(Ak({},_),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},g);return w.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:N,style:j,ref:v},s)}}var a$e=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Wp={isSsr:a$e()},dde=()=>fr(e=>e.rootProps.accessibilityLayer);function Wo(e){return Number.isFinite(e)}function Q1(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function sR(){return sR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sR.apply(null,arguments)}function XW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function YW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XW(Object(r),!0).forEach(function(n){s$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function s$e(e,t,r){return(t=i$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i$e(e){var t=o$e(e,"string");return typeof t=="symbol"?t:t+""}function o$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JW={curveBasisClosed:I9e,curveBasisOpen:D9e,curveBasis:B9e,curveBumpX:g9e,curveBumpY:x9e,curveLinearClosed:O9e,curveLinear:D3,curveMonotoneX:P9e,curveMonotoneY:F9e,curveNatural:R9e,curveStep:L9e,curveStepAfter:U9e,curveStepBefore:M9e},mk=e=>Wo(e.x)&&Wo(e.y),Rw=e=>e.x,Lw=e=>e.y,l$e=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(nE(e));return(r==="curveMonotone"||r==="curveBump")&&t?JW["".concat(r).concat(t==="vertical"?"Y":"X")]:JW[r]||D3},c$e=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=e,o=l$e(t,a),l=s?r.filter(mk):r,c;if(Array.isArray(n)){var u=s?n.filter(f=>mk(f)):n,d=l.map((f,A)=>YW(YW({},f),{},{base:u[A]}));return a==="vertical"?c=ck().y(Lw).x1(Rw).x0(f=>f.base.x):c=ck().x(Rw).y1(Lw).y0(f=>f.base.y),c.defined(mk).curve(o),c(d)}return a==="vertical"&&ur(n)?c=ck().y(Lw).x1(Rw).x0(n):ur(n)?c=ck().x(Rw).y1(Lw).y0(n):c=nue().x(Rw).y(Lw),c.defined(mk).curve(o),c(l)},aN=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var s=r&&r.length?c$e(e):n;return w.createElement("path",sR({},bo(e),M7(e),{className:mn("recharts-curve",t),d:s===null?void 0:s,ref:a}))},u$e=["x","y","top","left","width","height","className"];function iR(){return iR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iR.apply(null,arguments)}function ZW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function d$e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZW(Object(r),!0).forEach(function(n){f$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f$e(e,t,r){return(t=h$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h$e(e){var t=A$e(e,"string");return typeof t=="symbol"?t:t+""}function A$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function m$e(e,t){if(e==null)return{};var r,n,a=p$e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function p$e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var g$e=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),x$e=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:s=0,height:o=0,className:l}=e,c=m$e(e,u$e),u=d$e({x:t,y:r,top:n,left:a,width:s,height:o},c);return!ur(t)||!ur(r)||!ur(s)||!ur(o)||!ur(n)||!ur(a)?null:w.createElement("path",iR({},$n(u,!0),{className:mn("recharts-cross",l),d:g$e(t,r,s,o,n,a)}))};function v$e(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function eX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function b$e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eX(Object(r),!0).forEach(function(n){y$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eX(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function y$e(e,t,r){return(t=w$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w$e(e){var t=N$e(e,"string");return typeof t=="symbol"?t:t+""}function N$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gc(e,t){var r=b$e({},e),n=t,a=Object.keys(t),s=a.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return s}var xD={},vD={},bD={},tX;function C$e(){return tX||(tX=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(bD)),bD}var rX;function E$e(){return rX||(rX=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C$e(),r=gue(),n=Y7(),a=J7(),s=W7();function o(u,d,f){return l(u,d,void 0,void 0,void 0,void 0,f)}function l(u,d,f,A,m,g,x){const v=x(u,d,f,A,m,g);if(v!==void 0)return v;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return c(u,d,g,x)}return c(u,d,g,x)}function c(u,d,f,A){if(Object.is(u,d))return!0;let m=n.getTag(u),g=n.getTag(d);if(m===a.argumentsTag&&(m=a.objectTag),g===a.argumentsTag&&(g=a.objectTag),m!==g)return!1;switch(m){case a.stringTag:return u.toString()===d.toString();case a.numberTag:{const y=u.valueOf(),N=d.valueOf();return s.eq(y,N)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(u.valueOf(),d.valueOf());case a.regexpTag:return u.source===d.source&&u.flags===d.flags;case a.functionTag:return u===d}f=f??new Map;const x=f.get(u),v=f.get(d);if(x!=null&&v!=null)return x===d;f.set(u,d),f.set(d,u);try{switch(m){case a.mapTag:{if(u.size!==d.size)return!1;for(const[y,N]of u.entries())if(!d.has(y)||!l(N,d.get(y),y,u,d,f,A))return!1;return!0}case a.setTag:{if(u.size!==d.size)return!1;const y=Array.from(u.values()),N=Array.from(d.values());for(let C=0;C<y.length;C++){const _=y[C],j=N.findIndex(I=>l(_,I,void 0,u,d,f,A));if(j===-1)return!1;N.splice(j,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let y=0;y<u.length;y++)if(!l(u[y],d[y],y,u,d,f,A))return!1;return!0}case a.arrayBufferTag:return u.byteLength!==d.byteLength?!1:c(new Uint8Array(u),new Uint8Array(d),f,A);case a.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:c(new Uint8Array(u),new Uint8Array(d),f,A);case a.errorTag:return u.name===d.name&&u.message===d.message;case a.objectTag:{if(!(c(u.constructor,d.constructor,f,A)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const N=[...Object.keys(u),...r.getSymbols(u)],C=[...Object.keys(d),...r.getSymbols(d)];if(N.length!==C.length)return!1;for(let _=0;_<N.length;_++){const j=N[_],I=u[j];if(!Object.hasOwn(d,j))return!1;const T=d[j];if(!l(I,T,j,u,d,f,A))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=o}(vD)),vD}var yD={},nX;function j$e(){return nX||(nX=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(yD)),yD}var aX;function k$e(){return aX||(aX=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E$e(),r=j$e();function n(a,s){return t.isEqualWith(a,s,r.noop)}e.isEqual=n}(xD)),xD}var wD,sX;function S$e(){return sX||(sX=1,wD=k$e().isEqual),wD}var _$e=S$e();const T$e=sc(_$e);var g_=1e-4,fde=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],hde=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),iX=(e,t)=>r=>{var n=fde(e,t);return hde(n,r)},B$e=(e,t)=>r=>{var n=fde(e,t),a=[...n.map((s,o)=>s*o).slice(1),0];return hde(a,r)},oX=function(){for(var t,r,n,a,s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,a]=c[1].split(")")[0].split(",").map(g=>parseFloat(g)))}}else o.length===4&&([t,n,r,a]=o);var u=iX(t,r),d=iX(n,a),f=B$e(t,r),A=g=>g>1?1:g<0?0:g,m=g=>{for(var x=g>1?1:g,v=x,y=0;y<8;++y){var N=u(v)-x,C=f(v);if(Math.abs(N-x)<g_||C<g_)return d(v);v=A(v-N/C)}return d(v)};return m.isStepper=!1,m},I$e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,s=(o,l,c)=>{var u=-(o-l)*r,d=c*n,f=c+(u-d)*a/1e3,A=c*a/1e3+o;return Math.abs(A-l)<g_&&Math.abs(f)<g_?[l,0]:[A,f]};return s.isStepper=!0,s.dt=a,s},Ade=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return oX(e);case"spring":return I$e();default:if(e.split("(")[0]==="cubic-bezier")return oX(e)}return typeof e=="function"?e:null};function lX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cX(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lX(Object(r),!0).forEach(function(n){D$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lX(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function D$e(e,t,r){return(t=O$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O$e(e){var t=P$e(e,"string");return typeof t=="symbol"?t:t+""}function P$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var F$e=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),R$e=(e,t,r)=>e.map(n=>"".concat(F$e(n)," ").concat(t,"ms ").concat(r)).join(","),L$e=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),lC=(e,t)=>Object.keys(t).reduce((r,n)=>cX(cX({},r),{},{[n]:e(n,t[n])}),{});function uX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Uo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uX(Object(r),!0).forEach(function(n){M$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uX(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M$e(e,t,r){return(t=U$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U$e(e){var t=H$e(e,"string");return typeof t=="symbol"?t:t+""}function H$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var x_=(e,t,r)=>e+(t-e)*r,oR=e=>{var{from:t,to:r}=e;return t!==r},mde=(e,t,r)=>{var n=lC((a,s)=>{if(oR(s)){var[o,l]=e(s.from,s.to,s.velocity);return Uo(Uo({},s),{},{from:o,velocity:l})}return s},t);return r<1?lC((a,s)=>oR(s)?Uo(Uo({},s),{},{velocity:x_(s.velocity,n[a].velocity,r),from:x_(s.from,n[a].from,r)}):s,t):mde(e,n,r-1)};function Q$e(e,t,r,n,a,s){var o,l=n.reduce((A,m)=>Uo(Uo({},A),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),c=()=>lC((A,m)=>m.from,l),u=()=>!Object.values(l).filter(oR).length,d=null,f=A=>{o||(o=A);var m=A-o,g=m/r.dt;l=mde(r,l,g),a(Uo(Uo(Uo({},e),t),c())),o=A,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{d()})}function V$e(e,t,r,n,a,s,o){var l=null,c=a.reduce((f,A)=>Uo(Uo({},f),{},{[A]:[e[A],t[A]]}),{}),u,d=f=>{u||(u=f);var A=(f-u)/n,m=lC((x,v)=>x_(...v,r(A)),c);if(s(Uo(Uo(Uo({},e),t),m)),A<1)l=o.setTimeout(d);else{var g=lC((x,v)=>x_(...v,r(1)),c);s(Uo(Uo(Uo({},e),t),g))}};return()=>(l=o.setTimeout(d),()=>{l()})}const pde=(e,t,r,n,a,s)=>{var o=L$e(e,t);return r.isStepper===!0?Q$e(e,t,r,o,a,s):V$e(e,t,r,n,o,a,s)};function $$e(e){var t,r=()=>null,n=!1,a=null,s=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){a=e.setTimeout(s.bind(null,u),c);return}s(c),a=e.setTimeout(s.bind(null,u));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,a&&(a(),a=null),s(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class z$e{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{cancelAnimationFrame(a)}}}function G$e(){return $$e(new z$e)}var q$e=w.createContext(G$e);function gde(e,t){var r=w.useContext(q$e);return w.useMemo(()=>t??r(e),[e,t,r])}var K$e=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function lR(){return lR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lR.apply(null,arguments)}function W$e(e,t){if(e==null)return{};var r,n,a=X$e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function X$e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function dX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Tm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dX(Object(r),!0).forEach(function(n){Xg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dX(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xg(e,t,r){return(t=Y$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y$e(e){var t=J$e(e,"string");return typeof t=="symbol"?t:t+""}function J$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class fU extends w.PureComponent{constructor(t,r){super(t,r),Xg(this,"mounted",!1),Xg(this,"manager",void 0),Xg(this,"stopJSAnimation",null),Xg(this,"unSubscribe",null);var{isActive:n,attributeName:a,from:s,to:o,children:l,duration:c,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||c<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:o});return}if(s){if(typeof l=="function"){this.state={style:s};return}this.state={style:a?{[a]:s}:s}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:a,shouldReAnimate:s,to:o,from:l}=this.props,{style:c}=this.state;if(n){if(!r){var u={style:a?{[a]:o}:o};this.state&&c&&(a&&c[a]!==o||!a&&c!==o)&&this.setState(u);return}if(!(T$e(t.to,o)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||s?l:t.to;if(this.state&&c){var A={style:a?{[a]:f}:f};(a&&c[a]!==f||!a&&c!==f)&&this.setState(A)}this.runAnimation(Tm(Tm({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:a,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:c}=t,u=pde(r,n,Ade(s),a,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([c,o,d,a,l])}runAnimation(t){var{begin:r,duration:n,attributeName:a,to:s,easing:o,onAnimationStart:l,onAnimationEnd:c,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof u=="function"||o==="spring"){this.runJSAnimation(t);return}var d=a?{[a]:s}:s,f=R$e(Object.keys(d),n,o);this.manager.start([l,r,Tm(Tm({},d),{},{transition:f}),n,c])}render(){var t=this.props,{children:r,begin:n,duration:a,attributeName:s,easing:o,isActive:l,from:c,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:A,onAnimationReStart:m,animationManager:g}=t,x=W$e(t,K$e),v=w.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!l||v===0||a<=0)return r;var N=C=>{var{style:_={},className:j}=C.props,I=w.cloneElement(C,Tm(Tm({},x),{},{style:Tm(Tm({},_),y),className:j}));return I};return v===1?N(w.Children.only(r)):w.createElement("div",null,w.Children.map(r,C=>N(C)))}}Xg(fU,"displayName","Animate");Xg(fU,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function v_(e){var t,r=gde((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return w.createElement(fU,lR({},e,{animationManager:r}))}function b_(){return b_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b_.apply(null,arguments)}var fX=(e,t,r,n,a)=>{var s=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(s>0&&a instanceof Array){for(var d=[0,0,0,0],f=0,A=4;f<A;f++)d[f]=a[f]>s?s:a[f];u="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),u+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+o*d[1])),u+="L ".concat(e+r,",").concat(t+n-o*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(t+n)),u+="L ".concat(e+l*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-o*d[3])),u+="Z"}else if(s>0&&a===+a&&a>0){var m=Math.min(s,a);u="M ".concat(e,",").concat(t+o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(t,`
            L `).concat(e+r-l*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*m,`
            L `).concat(e+r,",").concat(t+n-o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-l*m,",").concat(t+n,`
            L `).concat(e+l*m,",").concat(t+n,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*m," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},Z$e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},xde=e=>{var t=Gc(e,Z$e),r=w.useRef(null),[n,a]=w.useState(-1);w.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&a(y)}catch{}},[]);var{x:s,y:o,width:l,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:A,animationBegin:m,isAnimationActive:g,isUpdateAnimationActive:x}=t;if(s!==+s||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var v=mn("recharts-rectangle",d);return x?w.createElement(v_,{canBegin:n>0,from:{width:l,height:c,x:s,y:o},to:{width:l,height:c,x:s,y:o},duration:A,animationEasing:f,isActive:x},y=>{var{width:N,height:C,x:_,y:j}=y;return w.createElement(v_,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:A,isActive:g,easing:f},w.createElement("path",b_({},$n(t,!0),{className:v,d:fX(_,j,N,C,u),ref:r})))}):w.createElement("path",b_({},$n(t,!0),{className:v,d:fX(s,o,l,c,u)}))};function vde(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e,o=la(t,r,n,a),l=la(t,r,n,s);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function cR(){return cR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cR.apply(null,arguments)}var eze=(e,t)=>{var r=go(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},pk=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,u=l*(o?1:-1)+n,d=Math.asin(l/u)/p_,f=c?a:a+s*d,A=la(t,r,u,f),m=la(t,r,n,f),g=c?a-s*d:a,x=la(t,r,u*Math.cos(d*p_),g);return{center:A,circleTangency:m,lineTangency:x,theta:d}},bde=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:o}=e,l=eze(s,o),c=s+l,u=la(t,r,a,s),d=la(t,r,a,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var A=la(t,r,n,s),m=la(t,r,n,c);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=c),`,
            `).concat(A.x,",").concat(A.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},tze=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=e,d=go(u-c),{circleTangency:f,lineTangency:A,theta:m}=pk({cx:t,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),{circleTangency:g,lineTangency:x,theta:v}=pk({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),y=l?Math.abs(c-u):Math.abs(c-u)-m-v;if(y<0)return o?"M ".concat(A.x,",").concat(A.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):bde({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var N="M ".concat(A.x,",").concat(A.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
  `);if(n>0){var{circleTangency:C,lineTangency:_,theta:j}=pk({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:I,lineTangency:T,theta:k}=pk({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),B=l?Math.abs(c-u):Math.abs(c-u)-j-k;if(B<0&&s===0)return"".concat(N,"L").concat(t,",").concat(r,"Z");N+="L".concat(T.x,",").concat(T.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(B>180),",").concat(+(d>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(_.x,",").concat(_.y,"Z")}else N+="L".concat(t,",").concat(r,"Z");return N},rze={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},yde=e=>{var t=Gc(e,rze),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(s<a||u===d)return null;var A=mn("recharts-sector",f),m=s-a,g=ac(o,m,0,!0),x;return g>0&&Math.abs(u-d)<360?x=tze({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):x=bde({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),w.createElement("path",cR({},$n(t,!0),{className:A,d:x}))};function nze(e,t,r){var n,a,s,o;if(e==="horizontal")n=t.x,s=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,A=la(l,c,u,f),m=la(l,c,d,f);n=A.x,a=A.y,s=m.x,o=m.y}else return vde(t);return[{x:n,y:a},{x:s,y:o}]}var ND={},CD={},ED={},hX;function aze(){return hX||(hX=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nue();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r}(ED)),ED}var AX;function sze(){return AX||(AX=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aze();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r}(CD)),CD}var mX;function ize(){return mX||(mX=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Cue(),r=sze();function n(a,s,o){o&&typeof o!="number"&&t.isIterateeCall(a,s,o)&&(s=o=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),o=o===void 0?a<s?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((s-a)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=a,a+=o;return c}e.range=n}(ND)),ND}var jD,pX;function oze(){return pX||(pX=1,jD=ize().range),jD}var lze=oze();const wde=sc(lze);function hp(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function cze(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function hU(e){let t,r,n;e.length!==2?(t=hp,r=(l,c)=>hp(e(l),c),n=(l,c)=>e(l)-c):(t=e===hp||e===cze?e:uze,r=e,n=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:s}}function uze(){return 0}function Nde(e){return e===null?NaN:+e}function*dze(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const fze=hU(hp),iE=fze.right;hU(Nde).center;class gX extends Map{constructor(t,r=mze){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(xX(this,t))}has(t){return super.has(xX(this,t))}set(t,r){return super.set(hze(this,t),r)}delete(t){return super.delete(Aze(this,t))}}function xX({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function hze({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Aze({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function mze(e){return e!==null&&typeof e=="object"?e.valueOf():e}function pze(e=hp){if(e===hp)return Cde;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function Cde(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const gze=Math.sqrt(50),xze=Math.sqrt(10),vze=Math.sqrt(2);function y_(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),o=s>=gze?10:s>=xze?5:s>=vze?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?y_(e,t,r*2):[l,c,u]}function uR(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,s,o]=n?y_(t,e,r):y_(e,t,r);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function dR(e,t,r){return t=+t,e=+e,r=+r,y_(e,t,r)[2]}function fR(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?dR(t,e,r):dR(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function vX(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function bX(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Ede(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?Cde:pze(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),A=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*f/c+A)),g=Math.min(n,Math.floor(t+(c-u)*f/c+A));Ede(e,t,m,g,a)}const s=e[t];let o=r,l=n;for(Mw(e,r,t),a(e[n],s)>0&&Mw(e,r,n);o<l;){for(Mw(e,o,l),++o,--l;a(e[o],s)<0;)++o;for(;a(e[l],s)>0;)--l}a(e[r],s)===0?Mw(e,r,l):(++l,Mw(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function Mw(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function bze(e,t,r){if(e=Float64Array.from(dze(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return bX(e);if(t>=1)return vX(e);var n,a=(n-1)*t,s=Math.floor(a),o=vX(Ede(e,s).subarray(0,s+1)),l=bX(e.subarray(s+1));return o+(l-o)*(a-s)}}function yze(e,t,r=Nde){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),o=+r(e[s],s,e),l=+r(e[s+1],s+1,e);return o+(l-o)*(a-s)}}function wze(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(a);++n<a;)s[n]=e+n*r;return s}function Fd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function $A(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const hR=Symbol("implicit");function q3(){var e=new gX,t=[],r=[],n=hR;function a(s){let o=e.get(s);if(o===void 0){if(n!==hR)return n;e.set(s,o=t.push(s)-1)}return r[o%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new gX;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return q3(t,r).unknown(n)},Fd.apply(a,arguments),a}function AU(){var e=q3().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,s,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var A=t().length,m=a<n,g=m?a:n,x=m?n:a;s=(x-g)/Math.max(1,A-c+u*2),l&&(s=Math.floor(s)),g+=(x-g-s*(A-c))*d,o=s*(1-c),l&&(g=Math.round(g),o=Math.round(o));var v=wze(A).map(function(y){return g+s*y});return r(m?v.reverse():v)}return e.domain=function(A){return arguments.length?(t(A),f()):t()},e.range=function(A){return arguments.length?([n,a]=A,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(A){return[n,a]=A,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(A){return arguments.length?(l=!!A,f()):l},e.padding=function(A){return arguments.length?(c=Math.min(1,u=+A),f()):c},e.paddingInner=function(A){return arguments.length?(c=Math.min(1,A),f()):c},e.paddingOuter=function(A){return arguments.length?(u=+A,f()):u},e.align=function(A){return arguments.length?(d=Math.max(0,Math.min(1,A)),f()):d},e.copy=function(){return AU(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Fd.apply(f(),arguments)}function jde(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return jde(t())},e}function Nze(){return jde(AU.apply(null,arguments).paddingInner(1))}function mU(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function kde(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function oE(){}var cC=.7,w_=1/cC,c1="\\s*([+-]?\\d+)\\s*",uC="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Cze=/^#([0-9a-f]{3,8})$/,Eze=new RegExp(`^rgb\\(${c1},${c1},${c1}\\)$`),jze=new RegExp(`^rgb\\(${Wh},${Wh},${Wh}\\)$`),kze=new RegExp(`^rgba\\(${c1},${c1},${c1},${uC}\\)$`),Sze=new RegExp(`^rgba\\(${Wh},${Wh},${Wh},${uC}\\)$`),_ze=new RegExp(`^hsl\\(${uC},${Wh},${Wh}\\)$`),Tze=new RegExp(`^hsla\\(${uC},${Wh},${Wh},${uC}\\)$`),yX={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};mU(oE,Hx,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:wX,formatHex:wX,formatHex8:Bze,formatHsl:Ize,formatRgb:NX,toString:NX});function wX(){return this.rgb().formatHex()}function Bze(){return this.rgb().formatHex8()}function Ize(){return Sde(this).formatHsl()}function NX(){return this.rgb().formatRgb()}function Hx(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Cze.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?CX(t):r===3?new Fc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?gk(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?gk(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Eze.exec(e))?new Fc(t[1],t[2],t[3],1):(t=jze.exec(e))?new Fc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=kze.exec(e))?gk(t[1],t[2],t[3],t[4]):(t=Sze.exec(e))?gk(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=_ze.exec(e))?kX(t[1],t[2]/100,t[3]/100,1):(t=Tze.exec(e))?kX(t[1],t[2]/100,t[3]/100,t[4]):yX.hasOwnProperty(e)?CX(yX[e]):e==="transparent"?new Fc(NaN,NaN,NaN,0):null}function CX(e){return new Fc(e>>16&255,e>>8&255,e&255,1)}function gk(e,t,r,n){return n<=0&&(e=t=r=NaN),new Fc(e,t,r,n)}function Dze(e){return e instanceof oE||(e=Hx(e)),e?(e=e.rgb(),new Fc(e.r,e.g,e.b,e.opacity)):new Fc}function AR(e,t,r,n){return arguments.length===1?Dze(e):new Fc(e,t,r,n??1)}function Fc(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}mU(Fc,AR,kde(oE,{brighter(e){return e=e==null?w_:Math.pow(w_,e),new Fc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?cC:Math.pow(cC,e),new Fc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fc(px(this.r),px(this.g),px(this.b),N_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:EX,formatHex:EX,formatHex8:Oze,formatRgb:jX,toString:jX}));function EX(){return`#${Yg(this.r)}${Yg(this.g)}${Yg(this.b)}`}function Oze(){return`#${Yg(this.r)}${Yg(this.g)}${Yg(this.b)}${Yg((isNaN(this.opacity)?1:this.opacity)*255)}`}function jX(){const e=N_(this.opacity);return`${e===1?"rgb(":"rgba("}${px(this.r)}, ${px(this.g)}, ${px(this.b)}${e===1?")":`, ${e})`}`}function N_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function px(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Yg(e){return e=px(e),(e<16?"0":"")+e.toString(16)}function kX(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new gf(e,t,r,n)}function Sde(e){if(e instanceof gf)return new gf(e.h,e.s,e.l,e.opacity);if(e instanceof oE||(e=Hx(e)),!e)return new gf;if(e instanceof gf)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),o=NaN,l=s-a,c=(s+a)/2;return l?(t===s?o=(r-n)/l+(r<n)*6:r===s?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new gf(o,l,c,e.opacity)}function Pze(e,t,r,n){return arguments.length===1?Sde(e):new gf(e,t,r,n??1)}function gf(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}mU(gf,Pze,kde(oE,{brighter(e){return e=e==null?w_:Math.pow(w_,e),new gf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?cC:Math.pow(cC,e),new gf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Fc(kD(e>=240?e-240:e+120,a,n),kD(e,a,n),kD(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new gf(SX(this.h),xk(this.s),xk(this.l),N_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=N_(this.opacity);return`${e===1?"hsl(":"hsla("}${SX(this.h)}, ${xk(this.s)*100}%, ${xk(this.l)*100}%${e===1?")":`, ${e})`}`}}));function SX(e){return e=(e||0)%360,e<0?e+360:e}function xk(e){return Math.max(0,Math.min(1,e||0))}function kD(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const pU=e=>()=>e;function Fze(e,t){return function(r){return e+r*t}}function Rze(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Lze(e){return(e=+e)==1?_de:function(t,r){return r-t?Rze(t,r,e):pU(isNaN(t)?r:t)}}function _de(e,t){var r=t-e;return r?Fze(e,r):pU(isNaN(e)?t:e)}const C_=function e(t){var r=Lze(t);function n(a,s){var o=r((a=AR(a)).r,(s=AR(s)).r),l=r(a.g,s.g),c=r(a.b,s.b),u=_de(a.opacity,s.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function Mze(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=e[a]*(1-s)+t[a]*s;return n}}function Uze(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Hze(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)a[o]=Sy(e[o],t[o]);for(;o<r;++o)s[o]=t[o];return function(l){for(o=0;o<n;++o)s[o]=a[o](l);return s}}function Qze(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function mf(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Vze(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Sy(e[a],t[a]):n[a]=t[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var mR=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,SD=new RegExp(mR.source,"g");function $ze(e){return function(){return e}}function zze(e){return function(t){return e(t)+""}}function Tde(e,t){var r=mR.lastIndex=SD.lastIndex=0,n,a,s,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=mR.exec(e))&&(a=SD.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),l[o]?l[o]+=s:l[++o]=s),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:mf(n,a)})),r=SD.lastIndex;return r<t.length&&(s=t.slice(r),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?zze(c[0].x):$ze(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Sy(e,t){var r=typeof t,n;return t==null||r==="boolean"?pU(t):(r==="number"?mf:r==="string"?(n=Hx(t))?(t=n,C_):Tde:t instanceof Hx?C_:t instanceof Date?Qze:Uze(t)?Mze:Array.isArray(t)?Hze:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Vze:mf)(e,t)}function gU(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var _X=180/Math.PI,pR={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Bde(e,t,r,n,a,s){var o,l,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*r+t*n)&&(r-=e*c,n-=t*c),(l=Math.sqrt(r*r+n*n))&&(r/=l,n/=l,c/=l),e*n<t*r&&(e=-e,t=-t,c=-c,o=-o),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*_X,skewX:Math.atan(c)*_X,scaleX:o,scaleY:l}}var vk;function Gze(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?pR:Bde(t.a,t.b,t.c,t.d,t.e,t.f)}function qze(e){return e==null||(vk||(vk=document.createElementNS("http://www.w3.org/2000/svg","g")),vk.setAttribute("transform",e),!(e=vk.transform.baseVal.consolidate()))?pR:(e=e.matrix,Bde(e.a,e.b,e.c,e.d,e.e,e.f))}function Ide(e,t,r,n){function a(u){return u.length?u.pop()+" ":""}function s(u,d,f,A,m,g){if(u!==f||d!==A){var x=m.push("translate(",null,t,null,r);g.push({i:x-4,x:mf(u,f)},{i:x-2,x:mf(d,A)})}else(f||A)&&m.push("translate("+f+t+A+r)}function o(u,d,f,A){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),A.push({i:f.push(a(f)+"rotate(",null,n)-2,x:mf(u,d)})):d&&f.push(a(f)+"rotate("+d+n)}function l(u,d,f,A){u!==d?A.push({i:f.push(a(f)+"skewX(",null,n)-2,x:mf(u,d)}):d&&f.push(a(f)+"skewX("+d+n)}function c(u,d,f,A,m,g){if(u!==f||d!==A){var x=m.push(a(m)+"scale(",null,",",null,")");g.push({i:x-4,x:mf(u,f)},{i:x-2,x:mf(d,A)})}else(f!==1||A!==1)&&m.push(a(m)+"scale("+f+","+A+")")}return function(u,d){var f=[],A=[];return u=e(u),d=e(d),s(u.translateX,u.translateY,d.translateX,d.translateY,f,A),o(u.rotate,d.rotate,f,A),l(u.skewX,d.skewX,f,A),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,A),u=d=null,function(m){for(var g=-1,x=A.length,v;++g<x;)f[(v=A[g]).i]=v.x(m);return f.join("")}}}var Kze=Ide(Gze,"px, ","px)","deg)"),Wze=Ide(qze,", ",")",")"),Xze=1e-12;function TX(e){return((e=Math.exp(e))+1/e)/2}function Yze(e){return((e=Math.exp(e))-1/e)/2}function Jze(e){return((e=Math.exp(2*e))-1)/(e+1)}const Zze=function e(t,r,n){function a(s,o){var l=s[0],c=s[1],u=s[2],d=o[0],f=o[1],A=o[2],m=d-l,g=f-c,x=m*m+g*g,v,y;if(x<Xze)y=Math.log(A/u)/t,v=function(T){return[l+T*m,c+T*g,u*Math.exp(t*T*y)]};else{var N=Math.sqrt(x),C=(A*A-u*u+n*x)/(2*u*r*N),_=(A*A-u*u-n*x)/(2*A*r*N),j=Math.log(Math.sqrt(C*C+1)-C),I=Math.log(Math.sqrt(_*_+1)-_);y=(I-j)/t,v=function(T){var k=T*y,B=TX(j),M=u/(r*N)*(B*Jze(t*k+j)-Yze(j));return[l+M*m,c+M*g,u*B/TX(t*k+j)]}}return v.duration=y*1e3*t/Math.SQRT2,v}return a.rho=function(s){var o=Math.max(.001,+s),l=o*o,c=l*l;return e(o,l,c)},a}(Math.SQRT2,2,4);function eGe(e,t){t===void 0&&(t=e,e=Sy);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[l](o-l)}}function tGe(e){return function(){return e}}function E_(e){return+e}var BX=[0,1];function ec(e){return e}function gR(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:tGe(isNaN(t)?NaN:.5)}function rGe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function nGe(e,t,r){var n=e[0],a=e[1],s=t[0],o=t[1];return a<n?(n=gR(a,n),s=r(o,s)):(n=gR(n,a),s=r(s,o)),function(l){return s(n(l))}}function aGe(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=gR(e[o],e[o+1]),s[o]=r(t[o],t[o+1]);return function(l){var c=iE(e,l,1,n)-1;return s[c](a[c](l))}}function lE(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function K3(){var e=BX,t=BX,r=Sy,n,a,s,o=ec,l,c,u;function d(){var A=Math.min(e.length,t.length);return o!==ec&&(o=rGe(e[0],e[A-1])),l=A>2?aGe:nGe,c=u=null,f}function f(A){return A==null||isNaN(A=+A)?s:(c||(c=l(e.map(n),t,r)))(n(o(A)))}return f.invert=function(A){return o(a((u||(u=l(t,e.map(n),mf)))(A)))},f.domain=function(A){return arguments.length?(e=Array.from(A,E_),d()):e.slice()},f.range=function(A){return arguments.length?(t=Array.from(A),d()):t.slice()},f.rangeRound=function(A){return t=Array.from(A),r=gU,d()},f.clamp=function(A){return arguments.length?(o=A?!0:ec,d()):o!==ec},f.interpolate=function(A){return arguments.length?(r=A,d()):r},f.unknown=function(A){return arguments.length?(s=A,f):s},function(A,m){return n=A,a=m,d()}}function xU(){return K3()(ec,ec)}function sGe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function j_(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function V1(e){return e=j_(Math.abs(e)),e?e[1]:NaN}function iGe(e,t){return function(r,n){for(var a=r.length,s=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return s.reverse().join(t)}}function oGe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var lGe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function dC(e){if(!(t=lGe.exec(e)))throw new Error("invalid format: "+e);var t;return new vU({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}dC.prototype=vU.prototype;function vU(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}vU.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function cGe(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var Dde;function uGe(e,t){var r=j_(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(Dde=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+j_(e,Math.max(0,t+s-1))[0]}function IX(e,t){var r=j_(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const DX={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:sGe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>IX(e*100,t),r:IX,s:uGe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function OX(e){return e}var PX=Array.prototype.map,FX=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function dGe(e){var t=e.grouping===void 0||e.thousands===void 0?OX:iGe(PX.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?OX:oGe(PX.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=dC(f);var A=f.fill,m=f.align,g=f.sign,x=f.symbol,v=f.zero,y=f.width,N=f.comma,C=f.precision,_=f.trim,j=f.type;j==="n"?(N=!0,j="g"):DX[j]||(C===void 0&&(C=12),_=!0,j="g"),(v||A==="0"&&m==="=")&&(v=!0,A="0",m="=");var I=x==="$"?r:x==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",T=x==="$"?n:/[%p]/.test(j)?o:"",k=DX[j],B=/[defgprs%]/.test(j);C=C===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function M(P){var S=I,L=T,H,q,Q;if(j==="c")L=k(P)+L,P="";else{P=+P;var z=P<0||1/P<0;if(P=isNaN(P)?c:k(Math.abs(P),C),_&&(P=cGe(P)),z&&+P==0&&g!=="+"&&(z=!1),S=(z?g==="("?g:l:g==="-"||g==="("?"":g)+S,L=(j==="s"?FX[8+Dde/3]:"")+L+(z&&g==="("?")":""),B){for(H=-1,q=P.length;++H<q;)if(Q=P.charCodeAt(H),48>Q||Q>57){L=(Q===46?a+P.slice(H+1):P.slice(H))+L,P=P.slice(0,H);break}}}N&&!v&&(P=t(P,1/0));var K=S.length+P.length+L.length,Z=K<y?new Array(y-K+1).join(A):"";switch(N&&v&&(P=t(Z+P,Z.length?y-L.length:1/0),Z=""),m){case"<":P=S+P+L+Z;break;case"=":P=S+Z+P+L;break;case"^":P=Z.slice(0,K=Z.length>>1)+S+P+L+Z.slice(K);break;default:P=Z+S+P+L;break}return s(P)}return M.toString=function(){return f+""},M}function d(f,A){var m=u((f=dC(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(V1(A)/3)))*3,x=Math.pow(10,-g),v=FX[8+g/3];return function(y){return m(x*y)+v}}return{format:u,formatPrefix:d}}var bk,bU,Ode;fGe({thousands:",",grouping:[3],currency:["$",""]});function fGe(e){return bk=dGe(e),bU=bk.format,Ode=bk.formatPrefix,bk}function hGe(e){return Math.max(0,-V1(Math.abs(e)))}function AGe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(V1(t)/3)))*3-V1(Math.abs(e)))}function mGe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,V1(t)-V1(e))+1}function Pde(e,t,r,n){var a=fR(e,t,r),s;switch(n=dC(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=AGe(a,o))&&(n.precision=s),Ode(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=mGe(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=hGe(a))&&(n.precision=s-(n.type==="%")*2);break}}return bU(n)}function Xp(e){var t=e.domain;return e.ticks=function(r){var n=t();return uR(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return Pde(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,s=n.length-1,o=n[a],l=n[s],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=s,s=u);d-- >0;){if(u=dR(o,l,r),u===c)return n[a]=o,n[s]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Fde(){var e=xU();return e.copy=function(){return lE(e,Fde())},Fd.apply(e,arguments),Xp(e)}function Rde(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,E_),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return Rde(e).unknown(t)},e=arguments.length?Array.from(e,E_):[0,1],Xp(r)}function Lde(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],s=e[n],o;return s<a&&(o=r,r=n,n=o,o=a,a=s,s=o),e[r]=t.floor(a),e[n]=t.ceil(s),e}function RX(e){return Math.log(e)}function LX(e){return Math.exp(e)}function pGe(e){return-Math.log(-e)}function gGe(e){return-Math.exp(-e)}function xGe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function vGe(e){return e===10?xGe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function bGe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function MX(e){return(t,r)=>-e(-t,r)}function yU(e){const t=e(RX,LX),r=t.domain;let n=10,a,s;function o(){return a=bGe(n),s=vGe(n),r()[0]<0?(a=MX(a),s=MX(s),e(pGe,gGe)):e(RX,LX),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let A=a(u),m=a(d),g,x;const v=l==null?10:+l;let y=[];if(!(n%1)&&m-A<v){if(A=Math.floor(A),m=Math.ceil(m),u>0){for(;A<=m;++A)for(g=1;g<n;++g)if(x=A<0?g/s(-A):g*s(A),!(x<u)){if(x>d)break;y.push(x)}}else for(;A<=m;++A)for(g=n-1;g>=1;--g)if(x=A>0?g/s(-A):g*s(A),!(x<u)){if(x>d)break;y.push(x)}y.length*2<v&&(y=uR(u,d,v))}else y=uR(A,m,Math.min(m-A,v)).map(s);return f?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=dC(c)).precision==null&&(c.trim=!0),c=bU(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(Lde(r(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),t}function Mde(){const e=yU(K3()).domain([1,10]);return e.copy=()=>lE(e,Mde()).base(e.base()),Fd.apply(e,arguments),e}function UX(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function HX(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function wU(e){var t=1,r=e(UX(t),HX(t));return r.constant=function(n){return arguments.length?e(UX(t=+n),HX(t)):t},Xp(r)}function Ude(){var e=wU(K3());return e.copy=function(){return lE(e,Ude()).constant(e.constant())},Fd.apply(e,arguments)}function QX(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function yGe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function wGe(e){return e<0?-e*e:e*e}function NU(e){var t=e(ec,ec),r=1;function n(){return r===1?e(ec,ec):r===.5?e(yGe,wGe):e(QX(r),QX(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Xp(t)}function CU(){var e=NU(K3());return e.copy=function(){return lE(e,CU()).exponent(e.exponent())},Fd.apply(e,arguments),e}function NGe(){return CU.apply(null,arguments).exponent(.5)}function VX(e){return Math.sign(e)*e*e}function CGe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Hde(){var e=xU(),t=[0,1],r=!1,n;function a(s){var o=CGe(e(s));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(s){return e.invert(VX(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,E_)).map(VX)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Hde(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Fd.apply(a,arguments),Xp(a)}function Qde(){var e=[],t=[],r=[],n;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=yze(e,o/l);return s}function s(o){return o==null||isNaN(o=+o)?n:t[iE(r,o)]}return s.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(hp),a()},s.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return Qde().domain(e).range(t).unknown(n)},Fd.apply(s,arguments)}function Vde(){var e=0,t=1,r=1,n=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[iE(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return Vde().domain([e,t]).range(a).unknown(s)},Fd.apply(Xp(o),arguments)}function $de(){var e=[.5],t=[0,1],r,n=1;function a(s){return s!=null&&s<=s?t[iE(e,s,0,n)]:r}return a.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return $de().domain(e).range(t).unknown(r)},Fd.apply(a,arguments)}const _D=new Date,TD=new Date;function Wi(e,t,r,n){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),t(s,l),e(s);while(u<s&&s<o);return c},a.filter=s=>Wi(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!s(o););else for(;--l>=0;)for(;t(o,1),!s(o););}),r&&(a.count=(s,o)=>(_D.setTime(+s),TD.setTime(+o),e(_D),e(TD),Math.floor(r(_D,TD))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?o=>n(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const k_=Wi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);k_.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Wi(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):k_);k_.range;const Z0=1e3,Ed=Z0*60,eA=Ed*60,CA=eA*24,EU=CA*7,$X=CA*30,BD=CA*365,Jg=Wi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Z0)},(e,t)=>(t-e)/Z0,e=>e.getUTCSeconds());Jg.range;const jU=Wi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Z0)},(e,t)=>{e.setTime(+e+t*Ed)},(e,t)=>(t-e)/Ed,e=>e.getMinutes());jU.range;const kU=Wi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ed)},(e,t)=>(t-e)/Ed,e=>e.getUTCMinutes());kU.range;const SU=Wi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Z0-e.getMinutes()*Ed)},(e,t)=>{e.setTime(+e+t*eA)},(e,t)=>(t-e)/eA,e=>e.getHours());SU.range;const _U=Wi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*eA)},(e,t)=>(t-e)/eA,e=>e.getUTCHours());_U.range;const cE=Wi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ed)/CA,e=>e.getDate()-1);cE.range;const W3=Wi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/CA,e=>e.getUTCDate()-1);W3.range;const zde=Wi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/CA,e=>Math.floor(e/CA));zde.range;function lv(e){return Wi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Ed)/EU)}const X3=lv(0),S_=lv(1),EGe=lv(2),jGe=lv(3),$1=lv(4),kGe=lv(5),SGe=lv(6);X3.range;S_.range;EGe.range;jGe.range;$1.range;kGe.range;SGe.range;function cv(e){return Wi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/EU)}const Y3=cv(0),__=cv(1),_Ge=cv(2),TGe=cv(3),z1=cv(4),BGe=cv(5),IGe=cv(6);Y3.range;__.range;_Ge.range;TGe.range;z1.range;BGe.range;IGe.range;const TU=Wi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());TU.range;const BU=Wi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());BU.range;const EA=Wi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());EA.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Wi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});EA.range;const jA=Wi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());jA.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Wi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});jA.range;function Gde(e,t,r,n,a,s){const o=[[Jg,1,Z0],[Jg,5,5*Z0],[Jg,15,15*Z0],[Jg,30,30*Z0],[s,1,Ed],[s,5,5*Ed],[s,15,15*Ed],[s,30,30*Ed],[a,1,eA],[a,3,3*eA],[a,6,6*eA],[a,12,12*eA],[n,1,CA],[n,2,2*CA],[r,1,EU],[t,1,$X],[t,3,3*$X],[e,1,BD]];function l(u,d,f){const A=d<u;A&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),g=m?m.range(u,+d+1):[];return A?g.reverse():g}function c(u,d,f){const A=Math.abs(d-u)/f,m=hU(([,,v])=>v).right(o,A);if(m===o.length)return e.every(fR(u/BD,d/BD,f));if(m===0)return k_.every(Math.max(fR(u,d,f),1));const[g,x]=o[A/o[m-1][2]<o[m][2]/A?m-1:m];return g.every(x)}return[l,c]}const[DGe,OGe]=Gde(jA,BU,Y3,zde,_U,kU),[PGe,FGe]=Gde(EA,TU,X3,cE,SU,jU);function ID(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function DD(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Uw(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function RGe(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=Hw(a),d=Qw(a),f=Hw(s),A=Qw(s),m=Hw(o),g=Qw(o),x=Hw(l),v=Qw(l),y=Hw(c),N=Qw(c),C={a:z,A:K,b:Z,B:U,c:null,d:XX,e:XX,f:iqe,g:pqe,G:xqe,H:nqe,I:aqe,j:sqe,L:qde,m:oqe,M:lqe,p:Y,q:R,Q:ZX,s:eY,S:cqe,u:uqe,U:dqe,V:fqe,w:hqe,W:Aqe,x:null,X:null,y:mqe,Y:gqe,Z:vqe,"%":JX},_={a:D,A:W,b:J,B:le,c:null,d:YX,e:YX,f:Nqe,g:Dqe,G:Pqe,H:bqe,I:yqe,j:wqe,L:Wde,m:Cqe,M:Eqe,p:ie,q:re,Q:ZX,s:eY,S:jqe,u:kqe,U:Sqe,V:_qe,w:Tqe,W:Bqe,x:null,X:null,y:Iqe,Y:Oqe,Z:Fqe,"%":JX},j={a:M,A:P,b:S,B:L,c:H,d:KX,e:KX,f:ZGe,g:qX,G:GX,H:WX,I:WX,j:WGe,L:JGe,m:KGe,M:XGe,p:B,q:qGe,Q:tqe,s:rqe,S:YGe,u:QGe,U:VGe,V:$Ge,w:HGe,W:zGe,x:q,X:Q,y:qX,Y:GX,Z:GGe,"%":eqe};C.x=I(r,C),C.X=I(n,C),C.c=I(t,C),_.x=I(r,_),_.X=I(n,_),_.c=I(t,_);function I(ce,oe){return function(be){var X=[],je=-1,De=0,ke=ce.length,ue,we,Ae;for(be instanceof Date||(be=new Date(+be));++je<ke;)ce.charCodeAt(je)===37&&(X.push(ce.slice(De,je)),(we=zX[ue=ce.charAt(++je)])!=null?ue=ce.charAt(++je):we=ue==="e"?" ":"0",(Ae=oe[ue])&&(ue=Ae(be,we)),X.push(ue),De=je+1);return X.push(ce.slice(De,je)),X.join("")}}function T(ce,oe){return function(be){var X=Uw(1900,void 0,1),je=k(X,ce,be+="",0),De,ke;if(je!=be.length)return null;if("Q"in X)return new Date(X.Q);if("s"in X)return new Date(X.s*1e3+("L"in X?X.L:0));if(oe&&!("Z"in X)&&(X.Z=0),"p"in X&&(X.H=X.H%12+X.p*12),X.m===void 0&&(X.m="q"in X?X.q:0),"V"in X){if(X.V<1||X.V>53)return null;"w"in X||(X.w=1),"Z"in X?(De=DD(Uw(X.y,0,1)),ke=De.getUTCDay(),De=ke>4||ke===0?__.ceil(De):__(De),De=W3.offset(De,(X.V-1)*7),X.y=De.getUTCFullYear(),X.m=De.getUTCMonth(),X.d=De.getUTCDate()+(X.w+6)%7):(De=ID(Uw(X.y,0,1)),ke=De.getDay(),De=ke>4||ke===0?S_.ceil(De):S_(De),De=cE.offset(De,(X.V-1)*7),X.y=De.getFullYear(),X.m=De.getMonth(),X.d=De.getDate()+(X.w+6)%7)}else("W"in X||"U"in X)&&("w"in X||(X.w="u"in X?X.u%7:"W"in X?1:0),ke="Z"in X?DD(Uw(X.y,0,1)).getUTCDay():ID(Uw(X.y,0,1)).getDay(),X.m=0,X.d="W"in X?(X.w+6)%7+X.W*7-(ke+5)%7:X.w+X.U*7-(ke+6)%7);return"Z"in X?(X.H+=X.Z/100|0,X.M+=X.Z%100,DD(X)):ID(X)}}function k(ce,oe,be,X){for(var je=0,De=oe.length,ke=be.length,ue,we;je<De;){if(X>=ke)return-1;if(ue=oe.charCodeAt(je++),ue===37){if(ue=oe.charAt(je++),we=j[ue in zX?oe.charAt(je++):ue],!we||(X=we(ce,be,X))<0)return-1}else if(ue!=be.charCodeAt(X++))return-1}return X}function B(ce,oe,be){var X=u.exec(oe.slice(be));return X?(ce.p=d.get(X[0].toLowerCase()),be+X[0].length):-1}function M(ce,oe,be){var X=m.exec(oe.slice(be));return X?(ce.w=g.get(X[0].toLowerCase()),be+X[0].length):-1}function P(ce,oe,be){var X=f.exec(oe.slice(be));return X?(ce.w=A.get(X[0].toLowerCase()),be+X[0].length):-1}function S(ce,oe,be){var X=y.exec(oe.slice(be));return X?(ce.m=N.get(X[0].toLowerCase()),be+X[0].length):-1}function L(ce,oe,be){var X=x.exec(oe.slice(be));return X?(ce.m=v.get(X[0].toLowerCase()),be+X[0].length):-1}function H(ce,oe,be){return k(ce,t,oe,be)}function q(ce,oe,be){return k(ce,r,oe,be)}function Q(ce,oe,be){return k(ce,n,oe,be)}function z(ce){return o[ce.getDay()]}function K(ce){return s[ce.getDay()]}function Z(ce){return c[ce.getMonth()]}function U(ce){return l[ce.getMonth()]}function Y(ce){return a[+(ce.getHours()>=12)]}function R(ce){return 1+~~(ce.getMonth()/3)}function D(ce){return o[ce.getUTCDay()]}function W(ce){return s[ce.getUTCDay()]}function J(ce){return c[ce.getUTCMonth()]}function le(ce){return l[ce.getUTCMonth()]}function ie(ce){return a[+(ce.getUTCHours()>=12)]}function re(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var oe=I(ce+="",C);return oe.toString=function(){return ce},oe},parse:function(ce){var oe=T(ce+="",!1);return oe.toString=function(){return ce},oe},utcFormat:function(ce){var oe=I(ce+="",_);return oe.toString=function(){return ce},oe},utcParse:function(ce){var oe=T(ce+="",!0);return oe.toString=function(){return ce},oe}}}var zX={"-":"",_:" ",0:"0"},yo=/^\s*\d+/,LGe=/^%/,MGe=/[\\^$*+?|[\]().{}]/g;function na(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function UGe(e){return e.replace(MGe,"\\$&")}function Hw(e){return new RegExp("^(?:"+e.map(UGe).join("|")+")","i")}function Qw(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function HGe(e,t,r){var n=yo.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function QGe(e,t,r){var n=yo.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function VGe(e,t,r){var n=yo.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function $Ge(e,t,r){var n=yo.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function zGe(e,t,r){var n=yo.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function GX(e,t,r){var n=yo.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function qX(e,t,r){var n=yo.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function GGe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function qGe(e,t,r){var n=yo.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function KGe(e,t,r){var n=yo.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function KX(e,t,r){var n=yo.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function WGe(e,t,r){var n=yo.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function WX(e,t,r){var n=yo.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function XGe(e,t,r){var n=yo.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function YGe(e,t,r){var n=yo.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function JGe(e,t,r){var n=yo.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function ZGe(e,t,r){var n=yo.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function eqe(e,t,r){var n=LGe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function tqe(e,t,r){var n=yo.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function rqe(e,t,r){var n=yo.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function XX(e,t){return na(e.getDate(),t,2)}function nqe(e,t){return na(e.getHours(),t,2)}function aqe(e,t){return na(e.getHours()%12||12,t,2)}function sqe(e,t){return na(1+cE.count(EA(e),e),t,3)}function qde(e,t){return na(e.getMilliseconds(),t,3)}function iqe(e,t){return qde(e,t)+"000"}function oqe(e,t){return na(e.getMonth()+1,t,2)}function lqe(e,t){return na(e.getMinutes(),t,2)}function cqe(e,t){return na(e.getSeconds(),t,2)}function uqe(e){var t=e.getDay();return t===0?7:t}function dqe(e,t){return na(X3.count(EA(e)-1,e),t,2)}function Kde(e){var t=e.getDay();return t>=4||t===0?$1(e):$1.ceil(e)}function fqe(e,t){return e=Kde(e),na($1.count(EA(e),e)+(EA(e).getDay()===4),t,2)}function hqe(e){return e.getDay()}function Aqe(e,t){return na(S_.count(EA(e)-1,e),t,2)}function mqe(e,t){return na(e.getFullYear()%100,t,2)}function pqe(e,t){return e=Kde(e),na(e.getFullYear()%100,t,2)}function gqe(e,t){return na(e.getFullYear()%1e4,t,4)}function xqe(e,t){var r=e.getDay();return e=r>=4||r===0?$1(e):$1.ceil(e),na(e.getFullYear()%1e4,t,4)}function vqe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+na(t/60|0,"0",2)+na(t%60,"0",2)}function YX(e,t){return na(e.getUTCDate(),t,2)}function bqe(e,t){return na(e.getUTCHours(),t,2)}function yqe(e,t){return na(e.getUTCHours()%12||12,t,2)}function wqe(e,t){return na(1+W3.count(jA(e),e),t,3)}function Wde(e,t){return na(e.getUTCMilliseconds(),t,3)}function Nqe(e,t){return Wde(e,t)+"000"}function Cqe(e,t){return na(e.getUTCMonth()+1,t,2)}function Eqe(e,t){return na(e.getUTCMinutes(),t,2)}function jqe(e,t){return na(e.getUTCSeconds(),t,2)}function kqe(e){var t=e.getUTCDay();return t===0?7:t}function Sqe(e,t){return na(Y3.count(jA(e)-1,e),t,2)}function Xde(e){var t=e.getUTCDay();return t>=4||t===0?z1(e):z1.ceil(e)}function _qe(e,t){return e=Xde(e),na(z1.count(jA(e),e)+(jA(e).getUTCDay()===4),t,2)}function Tqe(e){return e.getUTCDay()}function Bqe(e,t){return na(__.count(jA(e)-1,e),t,2)}function Iqe(e,t){return na(e.getUTCFullYear()%100,t,2)}function Dqe(e,t){return e=Xde(e),na(e.getUTCFullYear()%100,t,2)}function Oqe(e,t){return na(e.getUTCFullYear()%1e4,t,4)}function Pqe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?z1(e):z1.ceil(e),na(e.getUTCFullYear()%1e4,t,4)}function Fqe(){return"+0000"}function JX(){return"%"}function ZX(e){return+e}function eY(e){return Math.floor(+e/1e3)}var Xv,Yde,Jde;Rqe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Rqe(e){return Xv=RGe(e),Yde=Xv.format,Xv.parse,Jde=Xv.utcFormat,Xv.utcParse,Xv}function Lqe(e){return new Date(e)}function Mqe(e){return e instanceof Date?+e:+new Date(+e)}function IU(e,t,r,n,a,s,o,l,c,u){var d=xU(),f=d.invert,A=d.domain,m=u(".%L"),g=u(":%S"),x=u("%I:%M"),v=u("%I %p"),y=u("%a %d"),N=u("%b %d"),C=u("%B"),_=u("%Y");function j(I){return(c(I)<I?m:l(I)<I?g:o(I)<I?x:s(I)<I?v:n(I)<I?a(I)<I?y:N:r(I)<I?C:_)(I)}return d.invert=function(I){return new Date(f(I))},d.domain=function(I){return arguments.length?A(Array.from(I,Mqe)):A().map(Lqe)},d.ticks=function(I){var T=A();return e(T[0],T[T.length-1],I??10)},d.tickFormat=function(I,T){return T==null?j:u(T)},d.nice=function(I){var T=A();return(!I||typeof I.range!="function")&&(I=t(T[0],T[T.length-1],I??10)),I?A(Lde(T,I)):d},d.copy=function(){return lE(d,IU(e,t,r,n,a,s,o,l,c,u))},d}function Uqe(){return Fd.apply(IU(PGe,FGe,EA,TU,X3,cE,SU,jU,Jg,Yde).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Hqe(){return Fd.apply(IU(DGe,OGe,jA,BU,Y3,W3,_U,kU,Jg,Jde).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function J3(){var e=0,t=1,r,n,a,s,o=ec,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(s(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=s(e=+e),n=s(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(A){var m,g;return arguments.length?([m,g]=A,o=f(m,g),u):[o(0),o(1)]}}return u.range=d(Sy),u.rangeRound=d(gU),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function Yp(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Zde(){var e=Xp(J3()(ec));return e.copy=function(){return Yp(e,Zde())},$A.apply(e,arguments)}function efe(){var e=yU(J3()).domain([1,10]);return e.copy=function(){return Yp(e,efe()).base(e.base())},$A.apply(e,arguments)}function tfe(){var e=wU(J3());return e.copy=function(){return Yp(e,tfe()).constant(e.constant())},$A.apply(e,arguments)}function DU(){var e=NU(J3());return e.copy=function(){return Yp(e,DU()).exponent(e.exponent())},$A.apply(e,arguments)}function Qqe(){return DU.apply(null,arguments).exponent(.5)}function rfe(){var e=[],t=ec;function r(n){if(n!=null&&!isNaN(n=+n))return t((iE(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(hp),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>bze(e,s/n))},r.copy=function(){return rfe(t).domain(e)},$A.apply(r,arguments)}function Z3(){var e=0,t=.5,r=1,n=1,a,s,o,l,c,u=ec,d,f=!1,A;function m(x){return isNaN(x=+x)?A:(x=.5+((x=+d(x))-s)*(n*x<n*s?l:c),u(f?Math.max(0,Math.min(1,x)):x))}m.domain=function(x){return arguments.length?([e,t,r]=x,a=d(e=+e),s=d(t=+t),o=d(r=+r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,m):[e,t,r]},m.clamp=function(x){return arguments.length?(f=!!x,m):f},m.interpolator=function(x){return arguments.length?(u=x,m):u};function g(x){return function(v){var y,N,C;return arguments.length?([y,N,C]=v,u=eGe(x,[y,N,C]),m):[u(0),u(.5),u(1)]}}return m.range=g(Sy),m.rangeRound=g(gU),m.unknown=function(x){return arguments.length?(A=x,m):A},function(x){return d=x,a=x(e),s=x(t),o=x(r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,m}}function nfe(){var e=Xp(Z3()(ec));return e.copy=function(){return Yp(e,nfe())},$A.apply(e,arguments)}function afe(){var e=yU(Z3()).domain([.1,1,10]);return e.copy=function(){return Yp(e,afe()).base(e.base())},$A.apply(e,arguments)}function sfe(){var e=wU(Z3());return e.copy=function(){return Yp(e,sfe()).constant(e.constant())},$A.apply(e,arguments)}function OU(){var e=NU(Z3());return e.copy=function(){return Yp(e,OU()).exponent(e.exponent())},$A.apply(e,arguments)}function Vqe(){return OU.apply(null,arguments).exponent(.5)}const E2=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:AU,scaleDiverging:nfe,scaleDivergingLog:afe,scaleDivergingPow:OU,scaleDivergingSqrt:Vqe,scaleDivergingSymlog:sfe,scaleIdentity:Rde,scaleImplicit:hR,scaleLinear:Fde,scaleLog:Mde,scaleOrdinal:q3,scalePoint:Nze,scalePow:CU,scaleQuantile:Qde,scaleQuantize:Vde,scaleRadial:Hde,scaleSequential:Zde,scaleSequentialLog:efe,scaleSequentialPow:DU,scaleSequentialQuantile:rfe,scaleSequentialSqrt:Qqe,scaleSequentialSymlog:tfe,scaleSqrt:NGe,scaleSymlog:Ude,scaleThreshold:$de,scaleTime:Uqe,scaleUtc:Hqe,tickFormat:Pde},Symbol.toStringTag,{value:"Module"}));var Jp=e=>e.chartData,eT=vt([Jp],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),tT=(e,t,r,n)=>n?eT(e):Jp(e);function G1(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Wo(t)&&Wo(r))return!0}return!1}function tY(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function $qe(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,s;if(Wo(r))a=r;else if(typeof r=="function")return;if(Wo(n))s=n;else if(typeof n=="function")return;var o=[a,s];if(G1(o))return o}}function zqe(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(G1(n))return tY(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,s]=e,o,l;if(a==="auto")t!=null&&(o=Math.min(...t));else if(ur(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&HW.test(a)){var c=HW.exec(a);if(c==null||t==null)o=void 0;else{var u=+c[1];o=t[0]-u}}else o=t==null?void 0:t[0];if(s==="auto")t!=null&&(l=Math.max(...t));else if(ur(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&QW.test(s)){var d=QW.exec(s);if(d==null||t==null)l=void 0;else{var f=+d[1];l=t[1]+f}}else l=t==null?void 0:t[1];var A=[o,l];if(G1(A))return t==null?A:tY(A,t,r)}}}var _y=1e9,Gqe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},FU,ms=!0,Dd="[DecimalError] ",gx=Dd+"Invalid argument: ",PU=Dd+"Exponent out of range: ",Ty=Math.floor,Og=Math.pow,qqe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Eu,fo=1e7,Za=7,ife=9007199254740991,T_=Ty(ife/Za),vr={};vr.absoluteValue=vr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};vr.comparedTo=vr.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};vr.decimalPlaces=vr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Za;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};vr.dividedBy=vr.div=function(e){return cA(this,new this.constructor(e))};vr.dividedToIntegerBy=vr.idiv=function(e){var t=this,r=t.constructor;return Ha(cA(t,new r(e),0,1),r.precision)};vr.equals=vr.eq=function(e){return!this.cmp(e)};vr.exponent=function(){return Ri(this)};vr.greaterThan=vr.gt=function(e){return this.cmp(e)>0};vr.greaterThanOrEqualTo=vr.gte=function(e){return this.cmp(e)>=0};vr.isInteger=vr.isint=function(){return this.e>this.d.length-2};vr.isNegative=vr.isneg=function(){return this.s<0};vr.isPositive=vr.ispos=function(){return this.s>0};vr.isZero=function(){return this.s===0};vr.lessThan=vr.lt=function(e){return this.cmp(e)<0};vr.lessThanOrEqualTo=vr.lte=function(e){return this.cmp(e)<1};vr.logarithm=vr.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Eu))throw Error(Dd+"NaN");if(r.s<1)throw Error(Dd+(r.s?"NaN":"-Infinity"));return r.eq(Eu)?new n(0):(ms=!1,t=cA(fC(r,s),fC(e,s),s),ms=!0,Ha(t,a))};vr.minus=vr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?cfe(t,e):ofe(t,(e.s=-e.s,e))};vr.modulo=vr.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Dd+"NaN");return r.s?(ms=!1,t=cA(r,e,0,1).times(e),ms=!0,r.minus(t)):Ha(new n(r),a)};vr.naturalExponential=vr.exp=function(){return lfe(this)};vr.naturalLogarithm=vr.ln=function(){return fC(this)};vr.negated=vr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};vr.plus=vr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?ofe(t,e):cfe(t,(e.s=-e.s,e))};vr.precision=vr.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(gx+e);if(t=Ri(a)+1,n=a.d.length-1,r=n*Za+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};vr.squareRoot=vr.sqrt=function(){var e,t,r,n,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Dd+"NaN")}for(e=Ri(l),ms=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=Rh(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Ty((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(s=n,n=s.plus(cA(l,s,o+2)).times(.5),Rh(s.d).slice(0,o)===(t=Rh(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Ha(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(t!="9999")break;o+=4}return ms=!0,Ha(n,r)};vr.times=vr.mul=function(e){var t,r,n,a,s,o,l,c,u,d=this,f=d.constructor,A=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=A.length,u=m.length,c<u&&(s=A,A=m,m=s,o=c,c=u,u=o),s=[],o=c+u,n=o;n--;)s.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=s[a]+m[n]*A[a-n-1]+t,s[a--]=l%fo|0,t=l/fo|0;s[a]=(s[a]+t)%fo|0}for(;!s[--o];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,ms?Ha(e,f.precision):e};vr.toDecimalPlaces=vr.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(a0(e,0,_y),t===void 0?t=n.rounding:a0(t,0,8),Ha(r,e+Ri(r)+1,t))};vr.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Qx(n,!0):(a0(e,0,_y),t===void 0?t=a.rounding:a0(t,0,8),n=Ha(new a(n),e+1,t),r=Qx(n,!0,e+1)),r};vr.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?Qx(a):(a0(e,0,_y),t===void 0?t=s.rounding:a0(t,0,8),n=Ha(new s(a),e+Ri(a)+1,t),r=Qx(n.abs(),!1,e+Ri(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};vr.toInteger=vr.toint=function(){var e=this,t=e.constructor;return Ha(new t(e),Ri(e)+1,t.rounding)};vr.toNumber=function(){return+this};vr.toPower=vr.pow=function(e){var t,r,n,a,s,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Eu);if(l=new c(l),!l.s){if(e.s<1)throw Error(Dd+"Infinity");return l}if(l.eq(Eu))return l;if(n=c.precision,e.eq(Eu))return Ha(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,s=l.s,o){if((r=d<0?-d:d)<=ife){for(a=new c(Eu),t=Math.ceil(n/Za+4),ms=!1;r%2&&(a=a.times(l),nY(a.d,t)),r=Ty(r/2),r!==0;)l=l.times(l),nY(l.d,t);return ms=!0,e.s<0?new c(Eu).div(a):Ha(a,n)}}else if(s<0)throw Error(Dd+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,ms=!1,a=e.times(fC(l,n+u)),ms=!0,a=lfe(a),a.s=s,a};vr.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?(r=Ri(a),n=Qx(a,r<=s.toExpNeg||r>=s.toExpPos)):(a0(e,1,_y),t===void 0?t=s.rounding:a0(t,0,8),a=Ha(new s(a),e,t),r=Ri(a),n=Qx(a,e<=r||r<=s.toExpNeg,e)),n};vr.toSignificantDigits=vr.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(a0(e,1,_y),t===void 0?t=n.rounding:a0(t,0,8)),Ha(new n(r),e,t)};vr.toString=vr.valueOf=vr.val=vr.toJSON=vr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ri(e),r=e.constructor;return Qx(e,t<=r.toExpNeg||t>=r.toExpPos)};function ofe(e,t){var r,n,a,s,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),ms?Ha(t,f):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),s=o-a,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(f/Za),l=o>l?o+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/fo|0,c[s]%=fo;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,ms?Ha(t,f):t}function a0(e,t,r){if(e!==~~e||e<t||e>r)throw Error(gx+e)}function Rh(e){var t,r,n,a=e.length-1,s="",o=e[0];if(a>0){for(s+=o,t=1;t<a;t++)n=e[t]+"",r=Za-n.length,r&&(s+=Hm(r)),s+=n;o=e[t],n=o+"",r=Za-n.length,r&&(s+=Hm(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var cA=function(){function e(n,a){var s,o=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+o,n[l]=s%fo|0,o=s/fo|0;return o&&n.unshift(o),n}function t(n,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,s){for(var o=0;s--;)n[s]-=o,o=n[s]<a[s]?1:0,n[s]=o*fo+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,o){var l,c,u,d,f,A,m,g,x,v,y,N,C,_,j,I,T,k,B=n.constructor,M=n.s==a.s?1:-1,P=n.d,S=a.d;if(!n.s)return new B(n);if(!a.s)throw Error(Dd+"Division by zero");for(c=n.e-a.e,T=S.length,j=P.length,m=new B(M),g=m.d=[],u=0;S[u]==(P[u]||0);)++u;if(S[u]>(P[u]||0)&&--c,s==null?N=s=B.precision:o?N=s+(Ri(n)-Ri(a))+1:N=s,N<0)return new B(0);if(N=N/Za+2|0,u=0,T==1)for(d=0,S=S[0],N++;(u<j||d)&&N--;u++)C=d*fo+(P[u]||0),g[u]=C/S|0,d=C%S|0;else{for(d=fo/(S[0]+1)|0,d>1&&(S=e(S,d),P=e(P,d),T=S.length,j=P.length),_=T,x=P.slice(0,T),v=x.length;v<T;)x[v++]=0;k=S.slice(),k.unshift(0),I=S[0],S[1]>=fo/2&&++I;do d=0,l=t(S,x,T,v),l<0?(y=x[0],T!=v&&(y=y*fo+(x[1]||0)),d=y/I|0,d>1?(d>=fo&&(d=fo-1),f=e(S,d),A=f.length,v=x.length,l=t(f,x,A,v),l==1&&(d--,r(f,T<A?k:S,A))):(d==0&&(l=d=1),f=S.slice()),A=f.length,A<v&&f.unshift(0),r(x,f,v),l==-1&&(v=x.length,l=t(S,x,T,v),l<1&&(d++,r(x,T<v?k:S,v))),v=x.length):l===0&&(d++,x=[0]),g[u++]=d,l&&x[0]?x[v++]=P[_]||0:(x=[P[_]],v=1);while((_++<j||x[0]!==void 0)&&N--)}return g[0]||g.shift(),m.e=c,Ha(m,o?s+Ri(m)+1:s)}}();function lfe(e,t){var r,n,a,s,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(Ri(e)>16)throw Error(PU+Ri(e));if(!e.s)return new d(Eu);for(ms=!1,l=f,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Og(2,u))/Math.LN10*2+5|0,l+=n,r=a=s=new d(Eu),d.precision=l;;){if(a=Ha(a.times(e),l),r=r.times(++c),o=s.plus(cA(a,r,l)),Rh(o.d).slice(0,l)===Rh(s.d).slice(0,l)){for(;u--;)s=Ha(s.times(s),l);return d.precision=f,t==null?(ms=!0,Ha(s,f)):s}s=o}}function Ri(e){for(var t=e.e*Za,r=e.d[0];r>=10;r/=10)t++;return t}function OD(e,t,r){if(t>e.LN10.sd())throw ms=!0,r&&(e.precision=r),Error(Dd+"LN10 precision limit exceeded");return Ha(new e(e.LN10),t)}function Hm(e){for(var t="";e--;)t+="0";return t}function fC(e,t){var r,n,a,s,o,l,c,u,d,f=1,A=10,m=e,g=m.d,x=m.constructor,v=x.precision;if(m.s<1)throw Error(Dd+(m.s?"NaN":"-Infinity"));if(m.eq(Eu))return new x(0);if(t==null?(ms=!1,u=v):u=t,m.eq(10))return t==null&&(ms=!0),OD(x,u);if(u+=A,x.precision=u,r=Rh(g),n=r.charAt(0),s=Ri(m),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=Rh(m.d),n=r.charAt(0),f++;s=Ri(m),n>1?(m=new x("0."+r),s++):m=new x(n+"."+r.slice(1))}else return c=OD(x,u+2,v).times(s+""),m=fC(new x(n+"."+r.slice(1)),u-A).plus(c),x.precision=v,t==null?(ms=!0,Ha(m,v)):m;for(l=o=m=cA(m.minus(Eu),m.plus(Eu),u),d=Ha(m.times(m),u),a=3;;){if(o=Ha(o.times(d),u),c=l.plus(cA(o,new x(a),u)),Rh(c.d).slice(0,u)===Rh(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(OD(x,u+2,v).times(s+""))),l=cA(l,new x(f),u),x.precision=v,t==null?(ms=!0,Ha(l,v)):l;l=c,a+=2}}function rY(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Ty(r/Za),e.d=[],n=(r+1)%Za,r<0&&(n+=Za),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Za;n<a;)e.d.push(+t.slice(n,n+=Za));t=t.slice(n),n=Za-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),ms&&(e.e>T_||e.e<-T_))throw Error(PU+r)}else e.s=0,e.e=0,e.d=[0];return e}function Ha(e,t,r){var n,a,s,o,l,c,u,d,f=e.d;for(o=1,s=f[0];s>=10;s/=10)o++;if(n=t-o,n<0)n+=Za,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Za),s=f.length,d>=s)return e;for(u=s=f[d],o=1;s>=10;s/=10)o++;n%=Za,a=n-Za+o}if(r!==void 0&&(s=Og(10,o-a-1),l=u/s%10|0,c=t<0||f[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/Og(10,o-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(s=Ri(e),f.length=1,t=t-s-1,f[0]=Og(10,(Za-t%Za)%Za),e.e=Ty(-t/Za)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=Og(10,Za-n),f[d]=a>0?(u/Og(10,o-a)%Og(10,a)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==fo&&(f[0]=1,++e.e);break}else{if(f[d]+=s,f[d]!=fo)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(ms&&(e.e>T_||e.e<-T_))throw Error(PU+Ri(e));return e}function cfe(e,t){var r,n,a,s,o,l,c,u,d,f,A=e.constructor,m=A.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new A(e),ms?Ha(t,m):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(m/Za),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=fo-1;--c[s],c[a]+=fo}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,ms?Ha(t,m):t):new A(0)}function Qx(e,t,r){var n,a=Ri(e),s=Rh(e.d),o=s.length;return t?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+Hm(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+Hm(-a-1)+s,r&&(n=r-o)>0&&(s+=Hm(n))):a>=o?(s+=Hm(a+1-o),r&&(n=r-a-1)>0&&(s=s+"."+Hm(n))):((n=a+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(s+="."),s+=Hm(n))),e.s<0?"-"+s:s}function nY(e,t){if(e.length>t)return e.length=t,!0}function ufe(e){var t,r,n;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(gx+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return rY(o,s.toString())}else if(typeof s!="string")throw Error(gx+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,qqe.test(s))rY(o,s);else throw Error(gx+s)}if(a.prototype=vr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=ufe,a.config=a.set=Kqe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function Kqe(e){if(!e||typeof e!="object")throw Error(Dd+"Object expected");var t,r,n,a=["precision",1,_y,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Ty(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(gx+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(gx+r+": "+n);return this}var FU=ufe(Gqe);Eu=new FU(1);const ka=FU;var Wqe=e=>e,dfe={},ffe=e=>e===dfe,aY=e=>function t(){return arguments.length===0||arguments.length===1&&ffe(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},hfe=(e,t)=>e===1?t:aY(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(o=>o!==dfe).length;return s>=e?t(...n):hfe(e-s,aY(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=n.map(d=>ffe(d)?l.shift():d);return t(...u,...l)}))}),rT=e=>hfe(e.length,e),xR=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},Xqe=rT((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),Yqe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return Wqe;var a=r.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce((l,c)=>c(l),s(...arguments))}},vR=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),Afe=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t&&a.every((o,l)=>{var c;return o===((c=t)===null||c===void 0?void 0:c[l])})||(t=a,r=e(...a)),r}};function mfe(e){var t;return e===0?t=1:t=Math.floor(new ka(e).abs().log(10).toNumber())+1,t}function pfe(e,t,r){for(var n=new ka(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}rT((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});rT((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});rT((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var gfe=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},xfe=(e,t,r)=>{if(e.lte(0))return new ka(0);var n=mfe(e.toNumber()),a=new ka(10).pow(n),s=e.div(a),o=n!==1?.05:.1,l=new ka(Math.ceil(s.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?new ka(c.toNumber()):new ka(Math.ceil(c.toNumber()))},Jqe=(e,t,r)=>{var n=new ka(1),a=new ka(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new ka(10).pow(mfe(e)-1),a=new ka(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new ka(Math.floor(e)))}else e===0?a=new ka(Math.floor((t-1)/2)):r||(a=new ka(Math.floor(e)));var o=Math.floor((t-1)/2),l=Yqe(Xqe(c=>a.add(new ka(c-o).mul(n)).toNumber()),xR);return l(0,t)},vfe=function(t,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ka(0),tickMin:new ka(0),tickMax:new ka(0)};var o=xfe(new ka(r).sub(t).div(n-1),a,s),l;t<=0&&r>=0?l=new ka(0):(l=new ka(t).add(r).div(2),l=l.sub(new ka(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),u=Math.ceil(new ka(r).sub(l).div(o).toNumber()),d=c+u+1;return d>n?vfe(t,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:o,tickMin:l.sub(new ka(c).mul(o)),tickMax:l.add(new ka(u).mul(o))})};function Zqe(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(n,2),[o,l]=gfe([t,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...xR(0,n-1).map(()=>1/0)]:[...xR(0,n-1).map(()=>-1/0),l];return t>r?vR(c):c}if(o===l)return Jqe(o,n,a);var{step:u,tickMin:d,tickMax:f}=vfe(o,l,s,a,0),A=pfe(d,f.add(new ka(.1).mul(u)),u);return t>r?vR(A):A}function eKe(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=gfe([r,n]);if(s===-1/0||o===1/0)return[r,n];if(s===o)return[s];var l=Math.max(t,2),c=xfe(new ka(o).sub(s).div(l-1),a,0),u=[...pfe(new ka(s),new ka(o),c),o];return a===!1&&(u=u.map(d=>Math.round(d))),r>n?vR(u):u}var tKe=Afe(Zqe),rKe=Afe(eKe),bfe=e=>e.rootProps.maxBarSize,nKe=e=>e.rootProps.barGap,yfe=e=>e.rootProps.barCategoryGap,aKe=e=>e.rootProps.barSize,uE=e=>e.rootProps.stackOffset,RU=e=>e.options.chartName,LU=e=>e.rootProps.syncId,wfe=e=>e.rootProps.syncMethod,MU=e=>e.options.eventEmitter,Ih={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},_c={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},nT=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},sKe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ih.angleAxisId,includeHidden:!1,name:void 0,reversed:Ih.reversed,scale:Ih.scale,tick:Ih.tick,tickCount:void 0,ticks:void 0,type:Ih.type,unit:void 0},iKe={allowDataOverflow:_c.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:_c.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:_c.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:_c.scale,tick:_c.tick,tickCount:_c.tickCount,ticks:void 0,type:_c.type,unit:void 0},oKe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ih.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ih.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ih.scale,tick:Ih.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},lKe={allowDataOverflow:_c.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:_c.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:_c.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:_c.scale,tick:_c.tick,tickCount:_c.tickCount,ticks:void 0,type:"category",unit:void 0},By=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?oKe:sKe,dE=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?lKe:iKe,aT=e=>e.polarOptions,UU=vt([QA,VA,Ki],Yue),Nfe=vt([aT,UU],(e,t)=>{if(e!=null)return ac(e.innerRadius,t,0)}),Cfe=vt([aT,UU],(e,t)=>{if(e!=null)return ac(e.outerRadius,t,t*.8)}),cKe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},Efe=vt([aT],cKe),uKe=vt([By,Efe],nT),jfe=vt([UU,Nfe,Cfe],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]}),dKe=vt([dE,jfe],nT),Iy=vt([yn,aT,Nfe,Cfe,QA,VA],(e,t,r,n,a,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=t;return{cx:ac(o,a,a/2),cy:ac(l,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Qa=(e,t)=>t,fE=(e,t,r)=>r;function sT(e){return e==null?void 0:e.id}var Xi=e=>{var t=yn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Dy=e=>e.tooltip.settings.axisId,Yi=e=>{var t=Xi(e),r=Dy(e);return Oy(e,t,r)};function kfe(e,t,r){var{chartData:n=[]}=t,a=r==null?void 0:r.dataKey,s=new Map;return e.forEach(o=>{var l,c=(l=o.data)!==null&&l!==void 0?l:n;if(!(c==null||c.length===0)){var u=sT(o);c.forEach((d,f)=>{var A=a==null?f:String(Sa(d,a,null)),m=Sa(d,o.dataKey,0),g;s.has(A)?g=s.get(A):g={},Object.assign(g,{[u]:m}),s.set(A,g)})}}),Array.from(s.values())}function iT(e){return e.stackId!=null&&e.dataKey!=null}function sY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function B_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sY(Object(r),!0).forEach(function(n){fKe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fKe(e,t,r){return(t=hKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hKe(e){var t=AKe(e,"string");return typeof t=="symbol"?t:t+""}function AKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bR=[0,"auto"],Au={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},zA=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Au},mu={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:bR,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:V3},Zp=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??mu},mKe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},HU=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??mKe},wi=(e,t,r)=>{switch(t){case"xAxis":return zA(e,r);case"yAxis":return Zp(e,r);case"zAxis":return HU(e,r);case"angleAxis":return By(e,r);case"radiusAxis":return dE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},pKe=(e,t,r)=>{switch(t){case"xAxis":return zA(e,r);case"yAxis":return Zp(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Oy=(e,t,r)=>{switch(t){case"xAxis":return zA(e,r);case"yAxis":return Zp(e,r);case"angleAxis":return By(e,r);case"radiusAxis":return dE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Sfe=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function QU(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var oT=e=>e.graphicalItems.cartesianItems,gKe=vt([Qa,fE],QU),VU=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),hE=vt([oT,wi,gKe],VU),_fe=vt([hE],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(iT)),Tfe=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Bfe=vt([hE],Tfe),$U=e=>e.map(t=>t.data).filter(Boolean).flat(1),xKe=vt([hE],$U),zU=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},GU=vt([xKe,tT],zU),qU=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Sa(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:Sa(a,n)}))):e.map(n=>({value:n})),lT=vt([GU,wi,hE],qU);function Ife(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function uv(e){return e.filter(t=>n0(t)||t instanceof Date).map(Number).filter(t=>$c(t)===!1)}function vKe(e,t,r){return!r||typeof t!="number"||$c(t)?[]:r.length?uv(r.flatMap(n=>{var a=Sa(e,n.dataKey),s,o;if(Array.isArray(a)?[s,o]=a:s=o=a,!(!Wo(s)||!Wo(o)))return[t-s,t+o]})):[]}var bKe=vt([_fe,tT,Yi],kfe),Dfe=(e,t,r)=>{var n={},a=t.reduce((s,o)=>(o.stackId==null||(s[o.stackId]==null&&(s[o.stackId]=[]),s[o.stackId].push(o)),s),n);return Object.fromEntries(Object.entries(a).map(s=>{var[o,l]=s,c=l.map(sT);return[o,{stackedData:AVe(e,c,r),graphicalItems:l}]}))},hC=vt([bKe,_fe,uE],Dfe),Ofe=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if(r!=="zAxis"){var s=xVe(e,n,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},yKe=vt([hC,Jp,Qa],Ofe),Pfe=(e,t,r,n,a)=>r.length>0?e.flatMap(s=>r.flatMap(o=>{var l,c,u=(l=n[o.id])===null||l===void 0?void 0:l.filter(f=>Ife(a,f)),d=Sa(s,(c=t.dataKey)!==null&&c!==void 0?c:o.dataKey);return{value:d,errorDomain:vKe(s,d,u)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Sa(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),cT=e=>e.errorBars,Ffe=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>Ife(r,n));vt([Bfe,cT,Qa],Ffe);var wKe=vt([GU,wi,Bfe,cT,Qa],Pfe);function NKe(e){var{value:t}=e;if(n0(t)||t instanceof Date)return t}var iY=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=uv(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},CKe=(e,t,r)=>{var n=e.map(NKe).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&Gce(n))?wde(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},KU=e=>{var t;if(e==null||!("domain"in e))return bR;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=uv(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:bR},I_=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),o=Math.min(...s),l=Math.max(...s);return[o,l]}},Rfe=e=>e.referenceElements.dots,Py=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),EKe=vt([Rfe,Qa,fE],Py),Lfe=e=>e.referenceElements.areas,jKe=vt([Lfe,Qa,fE],Py),Mfe=e=>e.referenceElements.lines,kKe=vt([Mfe,Qa,fE],Py),Ufe=(e,t)=>{var r=uv(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},SKe=vt(EKe,Qa,Ufe),Hfe=(e,t)=>{var r=uv(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},_Ke=vt([jKe,Qa],Hfe),Qfe=(e,t)=>{var r=uv(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},TKe=vt(kKe,Qa,Qfe),BKe=vt(SKe,TKe,_Ke,(e,t,r)=>I_(e,r,t)),Vfe=vt([wi],KU),WU=(e,t,r,n,a,s,o)=>{var l=$qe(t,e.allowDataOverflow);if(l!=null)return l;var c=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",u=c?I_(r,a,iY(n)):I_(a,iY(n));return zqe(t,u,e.allowDataOverflow)},IKe=vt([wi,Vfe,yKe,wKe,BKe,yn,Qa],WU),DKe=[0,1],XU=(e,t,r,n,a,s,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,u=o0(t,s);return u&&l==null?wde(0,r.length):c==="category"?CKe(n,e,u):a==="expand"?DKe:o}},YU=vt([wi,yn,GU,lT,uE,Qa,IKe],XU),$fe=(e,t,r,n,a)=>{if(e!=null){var{scale:s,type:o}=e;if(s==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(nE(s));return l in E2?l:"point"}}},eg=vt([wi,yn,Sfe,RU,Qa],$fe);function OKe(e){if(e!=null){if(e in E2)return E2[e]();var t="scale".concat(nE(e));if(t in E2)return E2[t]()}}function uT(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=OKe(t);if(a!=null){var s=a.domain(r).range(n);return cVe(s),s}}}var JU=(e,t,r)=>{var n=KU(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&G1(e))return tKe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&G1(e))return rKe(e,t.tickCount,t.allowDecimals)}},ZU=vt([YU,Oy,eg],JU),e9=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&G1(t)&&Array.isArray(r)&&r.length>0){var a=t[0],s=r[0],o=t[1],l=r[r.length-1];return[Math.min(a,s),Math.max(o,l)]}return t},PKe=vt([wi,YU,ZU,Qa],e9),FKe=vt(lT,wi,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(uv(e.map(l=>l.value))).sort((l,c)=>l-c);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var s=0;s<n.length-1;s++){var o=n[s+1]-n[s];r=Math.min(r,o)}return r/a}}),zfe=vt(FKe,yn,yfe,Ki,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!Wo(e))return 0;var s=t==="vertical"?n.height:n.width;if(a==="gap")return e*s/2;if(a==="no-gap"){var o=ac(r,e*s),l=e*s/2;return l-o-(l-o)/s*o}return 0}),RKe=(e,t)=>{var r=zA(e,t);return r==null||typeof r.padding!="string"?0:zfe(e,"xAxis",t,r.padding)},LKe=(e,t)=>{var r=Zp(e,t);return r==null||typeof r.padding!="string"?0:zfe(e,"yAxis",t,r.padding)},MKe=vt(zA,RKe,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),UKe=vt(Zp,LKe,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),HKe=vt([Ki,MKe,z3,$3,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),QKe=vt([Ki,yn,UKe,z3,$3,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:o}=a;return s?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),AE=(e,t,r,n)=>{var a;switch(t){case"xAxis":return HKe(e,r,n);case"yAxis":return QKe(e,r,n);case"zAxis":return(a=HU(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return Efe(e);case"radiusAxis":return jfe(e,r);default:return}},Gfe=vt([wi,AE],nT),Fy=vt([wi,eg,PKe,Gfe],uT);vt([hE,cT,Qa],Ffe);function qfe(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var dT=(e,t)=>t,fT=(e,t,r)=>r,VKe=vt(iU,dT,fT,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(qfe)),$Ke=vt(oU,dT,fT,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(qfe)),Kfe=(e,t)=>({width:e.width,height:t.height}),zKe=(e,t)=>{var r=typeof t.width=="number"?t.width:V3;return{width:r,height:e.height}},Wfe=vt(Ki,zA,Kfe),GKe=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},qKe=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},KKe=vt(VA,Ki,VKe,dT,fT,(e,t,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=Kfe(t,l);o==null&&(o=GKe(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;s[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),s}),WKe=vt(QA,Ki,$Ke,dT,fT,(e,t,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=zKe(t,l);o==null&&(o=qKe(t,n,e));var u=n==="left"&&!a||n==="right"&&a;s[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),s}),XKe=(e,t)=>{var r=Ki(e),n=zA(e,t);if(n!=null){var a=KKe(e,n.orientation,n.mirror),s=a[t];return s==null?{x:r.left,y:0}:{x:r.left,y:s}}},YKe=(e,t)=>{var r=Ki(e),n=Zp(e,t);if(n!=null){var a=WKe(e,n.orientation,n.mirror),s=a[t];return s==null?{x:0,y:r.top}:{x:s,y:r.top}}},Xfe=vt(Ki,Zp,(e,t)=>{var r=typeof t.width=="number"?t.width:V3;return{width:r,height:e.height}}),oY=(e,t,r)=>{switch(t){case"xAxis":return Wfe(e,r).width;case"yAxis":return Xfe(e,r).height;default:return}},Yfe=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:o}=r,l=o0(e,n),c=t.map(u=>u.value);if(o&&l&&s==="category"&&a&&Gce(c))return c}},mE=vt([yn,lT,wi,Qa],Yfe),t9=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,o=o0(e,n);if(o&&(a==="number"||s!=="auto"))return t.map(l=>l.value)}},r9=vt([yn,lT,Oy,Qa],t9),lY=vt([yn,pKe,eg,Fy,mE,r9,AE,ZU,Qa],(e,t,r,n,a,s,o,l,c)=>{if(t==null)return null;var u=o0(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:l,range:o,realScaleType:r,scale:n}}),Jfe=(e,t,r,n,a,s,o,l,c)=>{if(!(t==null||n==null)){var u=o0(e,c),{type:d,ticks:f,tickCount:A}=t,m=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/m:0;g=c==="angleAxis"&&s!=null&&s.length>=2?go(s[0]-s[1])*2*g:g;var x=f||a;if(x){var v=x.map((y,N)=>{var C=o?o.indexOf(y):y;return{index:N,coordinate:n(C)+g,value:y,offset:g}});return v.filter(y=>!$c(y.coordinate))}return u&&l?l.map((y,N)=>({coordinate:n(y)+g,value:y,index:N,offset:g})):n.ticks?n.ticks(A).map(y=>({coordinate:n(y)+g,value:y,offset:g})):n.domain().map((y,N)=>({coordinate:n(y)+g,value:o?o[y]:y,index:N,offset:g}))}},Zfe=vt([yn,Oy,eg,Fy,ZU,AE,mE,r9,Qa],Jfe),ehe=(e,t,r,n,a,s,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=o0(e,o),{tickCount:c}=t,u=0;return u=o==="angleAxis"&&(n==null?void 0:n.length)>=2?go(n[0]-n[1])*2*u:u,l&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},Bp=vt([yn,Oy,Fy,AE,mE,r9,Qa],ehe),Ip=vt(wi,Fy,(e,t)=>{if(!(e==null||t==null))return B_(B_({},e),{},{scale:t})}),JKe=vt([wi,eg,YU,Gfe],uT);vt((e,t,r)=>HU(e,r),JKe,(e,t)=>{if(!(e==null||t==null))return B_(B_({},e),{},{scale:t})});var ZKe=vt([yn,iU,oU],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),the=e=>e.options.defaultTooltipEventType,rhe=e=>e.options.validateTooltipEventTypes;function nhe(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function n9(e,t){var r=the(e),n=rhe(e);return nhe(t,r,n)}function eWe(e){return fr(t=>n9(t,e))}var ahe=(e,t)=>{var r,n=Number(t);if(!($c(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},tWe=e=>e.tooltip.settings,Km={active:!1,index:null,dataKey:void 0,coordinate:void 0},rWe={itemInteraction:{click:Km,hover:Km},axisInteraction:{click:Km,hover:Km},keyboardInteraction:Km,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},she=Ru({name:"tooltip",initialState:rWe,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=lA(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:nWe,removeTooltipEntrySettings:aWe,setTooltipSettingsState:sWe,setActiveMouseOverItemIndex:ihe,mouseLeaveItem:iWe,mouseLeaveChart:ohe,setActiveClickItemIndex:oWe,setMouseOverAxisIndex:lhe,setMouseClickAxisIndex:lWe,setSyncInteraction:yR,setKeyboardInteraction:wR}=she.actions,cWe=she.reducer;function cY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cY(Object(r),!0).forEach(function(n){uWe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uWe(e,t,r){return(t=dWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dWe(e){var t=fWe(e,"string");return typeof t=="symbol"?t:t+""}function fWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hWe(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function AWe(e){return e.index!=null}var che=(e,t,r,n)=>{if(t==null)return Km;var a=hWe(e,t,r);if(a==null)return Km;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(AWe(a)){if(s)return yk(yk({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return yk(yk({},Km),{},{coordinate:a.coordinate})},a9=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!Wo(n))return r;var a=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(a,Math.min(n,s)))},uhe=(e,t,r,n,a,s,o,l)=>{if(!(s==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},dhe=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.dataKey)===a})},pE=e=>e.options.tooltipPayloadSearcher,Ry=e=>e.tooltip;function uY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function dY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uY(Object(r),!0).forEach(function(n){mWe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mWe(e,t,r){return(t=pWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pWe(e){var t=gWe(e,"string");return typeof t=="symbol"?t:t+""}function gWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xWe(e,t){return e??t}var fhe=(e,t,r,n,a,s,o)=>{if(!(t==null||s==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((A,m)=>{var g,{dataDefinedOnItem:x,settings:v}=m,y=xWe(x,l),N=Array.isArray(y)?Zue(y,u,d):y,C=(g=v==null?void 0:v.dataKey)!==null&&g!==void 0?g:n==null?void 0:n.dataKey,_=v==null?void 0:v.nameKey,j;if(n!=null&&n.dataKey&&Array.isArray(N)&&!Array.isArray(N[0])&&o==="axis"?j=qce(N,n.dataKey,a):j=s(N,t,c,_),Array.isArray(j))j.forEach(T=>{var k=dY(dY({},v),{},{name:T.name,unit:T.unit,color:void 0,fill:void 0});A.push(VW({tooltipEntrySettings:k,dataKey:T.dataKey,payload:T.payload,value:Sa(T.payload,T.dataKey),name:T.name}))});else{var I;A.push(VW({tooltipEntrySettings:v,dataKey:C,payload:j,value:Sa(j,C),name:(I=Sa(j,_))!==null&&I!==void 0?I:v==null?void 0:v.name}))}return A},f)}},s9=vt([Yi,yn,Sfe,RU,Xi],$fe),vWe=vt([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),bWe=vt([Xi,Dy],QU),gE=vt([vWe,Yi,bWe],VU),yWe=vt([gE],e=>e.filter(iT)),wWe=vt([gE],$U),Ly=vt([wWe,Jp],zU),NWe=vt([yWe,Jp,Yi],kfe),i9=vt([Ly,Yi,gE],qU),CWe=vt([Yi],KU),EWe=vt([gE],e=>e.filter(iT)),jWe=vt([NWe,EWe,uE],Dfe),kWe=vt([jWe,Jp,Xi],Ofe),SWe=vt([gE],Tfe),_We=vt([Ly,Yi,SWe,cT,Xi],Pfe),TWe=vt([Rfe,Xi,Dy],Py),BWe=vt([TWe,Xi],Ufe),IWe=vt([Lfe,Xi,Dy],Py),DWe=vt([IWe,Xi],Hfe),OWe=vt([Mfe,Xi,Dy],Py),PWe=vt([OWe,Xi],Qfe),FWe=vt([BWe,PWe,DWe],I_),RWe=vt([Yi,CWe,kWe,_We,FWe,yn,Xi],WU),hhe=vt([Yi,yn,Ly,i9,uE,Xi,RWe],XU),LWe=vt([hhe,Yi,s9],JU),MWe=vt([Yi,hhe,LWe,Xi],e9),Ahe=e=>{var t=Xi(e),r=Dy(e),n=!1;return AE(e,t,r,n)},mhe=vt([Yi,Ahe],nT),phe=vt([Yi,s9,MWe,mhe],uT),UWe=vt([yn,i9,Yi,Xi],Yfe),HWe=vt([yn,i9,Yi,Xi],t9),QWe=(e,t,r,n,a,s,o,l)=>{if(t){var{type:c}=t,u=o0(e,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=l==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?go(a[0]-a[1])*2*f:f,u&&o?o.map((A,m)=>({coordinate:n(A)+f,value:A,index:m,offset:f})):n.domain().map((A,m)=>({coordinate:n(A)+f,value:s?s[A]:A,index:m,offset:f}))}}},GA=vt([yn,Yi,s9,phe,Ahe,UWe,HWe,Xi],QWe),o9=vt([the,rhe,tWe],(e,t,r)=>nhe(r.shared,e,t)),ghe=e=>e.tooltip.settings.trigger,l9=e=>e.tooltip.settings.defaultIndex,hT=vt([Ry,o9,ghe,l9],che),Dp=vt([hT,Ly],a9),xhe=vt([GA,Dp],ahe),vhe=vt([hT],e=>{if(e)return e.dataKey}),bhe=vt([Ry,o9,ghe,l9],dhe),VWe=vt([QA,VA,yn,Ki,GA,l9,bhe,pE],uhe),$We=vt([hT,VWe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),zWe=vt([hT],e=>e.active),GWe=vt([bhe,Dp,Jp,Yi,xhe,pE,o9],fhe),qWe=vt([GWe],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function fY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fY(Object(r),!0).forEach(function(n){KWe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KWe(e,t,r){return(t=WWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WWe(e){var t=XWe(e,"string");return typeof t=="symbol"?t:t+""}function XWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YWe=()=>fr(Yi),JWe=()=>{var e=YWe(),t=fr(GA),r=fr(phe);return Ux(hY(hY({},e),{},{scale:r}),t)},yhe=()=>fr(RU),c9=(e,t)=>t,whe=(e,t,r)=>r,u9=(e,t,r,n)=>n,ZWe=vt(GA,e=>F3(e,t=>t.coordinate)),d9=vt([Ry,c9,whe,u9],che),Nhe=vt([d9,Ly],a9),eXe=(e,t,r)=>{if(t!=null){var n=Ry(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},Che=vt([Ry,c9,whe,u9],dhe),D_=vt([QA,VA,yn,Ki,GA,u9,Che,pE],uhe),tXe=vt([d9,D_],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),Ehe=vt(GA,Nhe,ahe),rXe=vt([Che,Nhe,Jp,Yi,Ehe,pE,c9],fhe),nXe=vt([d9],e=>({isActive:e.active,activeIndex:e.index})),aXe=(e,t,r,n,a,s,o,l)=>{if(!(!e||!t||!n||!a||!s)){var c=vVe(e.chartX,e.chartY,t,r,l);if(c){var u=yVe(c,t),d=oVe(u,o,s,n,a),f=bVe(t,s,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function NR(){return NR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},NR.apply(null,arguments)}function AY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AY(Object(r),!0).forEach(function(n){sXe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sXe(e,t,r){return(t=iXe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iXe(e){var t=oXe(e,"string");return typeof t=="symbol"?t:t+""}function oXe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lXe(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:s,layout:o,cursor:l,tooltipEventType:c,chartName:u}=e,d=t,f=r,A=n;if(!l||!d||u!=="ScatterChart"&&c!=="axis")return null;var m,g;if(u==="ScatterChart")m=d,g=x$e;else if(u==="BarChart")m=v$e(o,d,a,s),g=xde;else if(o==="radial"){var{cx:x,cy:v,radius:y,startAngle:N,endAngle:C}=vde(d);m={cx:x,cy:v,startAngle:N,endAngle:C,innerRadius:y,outerRadius:y},g=yde}else m={points:nze(o,d,a)},g=aN;var _=typeof l=="object"&&"className"in l?l.className:void 0,j=wk(wk(wk(wk({stroke:"#ccc",pointerEvents:"none"},a),m),$n(l,!1)),{},{payload:f,payloadIndex:A,className:mn("recharts-tooltip-cursor",_)});return w.isValidElement(l)?w.cloneElement(l,j):w.createElement(g,j)}function cXe(e){var t=JWe(),r=ode(),n=G3(),a=yhe();return w.createElement(lXe,NR({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var jhe=w.createContext(null),uXe=()=>w.useContext(jhe),PD={exports:{}},mY;function dXe(){return mY||(mY=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,A){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,f||c,A),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var A=0,m=f.length,g=new Array(m);A<m;A++)g[A]=f[A].fn;return g},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,A,m,g){var x=r?r+u:u;if(!this._events[x])return!1;var v=this._events[x],y=arguments.length,N,C;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,A),!0;case 5:return v.fn.call(v.context,d,f,A,m),!0;case 6:return v.fn.call(v.context,d,f,A,m,g),!0}for(C=1,N=new Array(y-1);C<y;C++)N[C-1]=arguments[C];v.fn.apply(v.context,N)}else{var _=v.length,j;for(C=0;C<_;C++)switch(v[C].once&&this.removeListener(u,v[C].fn,void 0,!0),y){case 1:v[C].fn.call(v[C].context);break;case 2:v[C].fn.call(v[C].context,d);break;case 3:v[C].fn.call(v[C].context,d,f);break;case 4:v[C].fn.call(v[C].context,d,f,A);break;default:if(!N)for(j=1,N=new Array(y-1);j<y;j++)N[j-1]=arguments[j];v[C].fn.apply(v[C].context,N)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,A){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!A||g.once)&&(!f||g.context===f)&&o(this,m);else{for(var x=0,v=[],y=g.length;x<y;x++)(g[x].fn!==d||A&&!g[x].once||f&&g[x].context!==f)&&v.push(g[x]);v.length?this._events[m]=v.length===1?v[0]:v:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l}(PD)),PD.exports}var fXe=dXe();const hXe=sc(fXe);var AC=new hXe,CR="recharts.syncEvent.tooltip",pY="recharts.syncEvent.brush";function AT(e,t){if(t){var r=Number.parseInt(t,10);if(!$c(r))return e==null?void 0:e[r]}}var AXe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},khe=Ru({name:"options",initialState:AXe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),mXe=khe.reducer,{createEventEmitter:pXe}=khe.actions;function gXe(e){return e.tooltip.syncInteraction}var xXe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},She=Ru({name:"chartData",initialState:xXe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:gY,setDataStartEndIndexes:vXe,setComputedData:kSt}=She.actions,bXe=She.reducer,_he=()=>{};function yXe(){var e=fr(LU),t=fr(MU),r=ss(),n=fr(wfe),a=fr(GA),s=G3(),o=lU(),l=fr(c=>c.rootProps.className);w.useEffect(()=>{if(e==null)return _he;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){r(d);return}if(a!=null){var A;if(typeof n=="function"){var m={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},g=n(a,m);A=a[g]}else n==="value"&&(A=a.find(I=>String(I.value)===d.payload.label));var{coordinate:x}=d.payload;if(A==null||d.payload.active===!1||x==null||o==null){r(yR({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:v,y}=x,N=Math.min(v,o.x+o.width),C=Math.min(y,o.y+o.height),_={x:s==="horizontal"?A.coordinate:N,y:s==="horizontal"?C:A.coordinate},j=yR({active:d.payload.active,coordinate:_,dataKey:d.payload.dataKey,index:String(A.index),label:d.payload.label});r(j)}}};return AC.on(CR,c),()=>{AC.off(CR,c)}},[l,r,t,e,n,a,s,o])}function wXe(){var e=fr(LU),t=fr(MU),r=ss();w.useEffect(()=>{if(e==null)return _he;var n=(a,s,o)=>{t!==o&&e===a&&r(vXe(s))};return AC.on(pY,n),()=>{AC.off(pY,n)}},[r,t,e])}function NXe(){var e=ss();w.useEffect(()=>{e(pXe())},[e]),yXe(),wXe()}function CXe(e,t,r,n,a,s){var o=fr(A=>eXe(A,e,t)),l=fr(MU),c=fr(LU),u=fr(wfe),d=fr(gXe),f=d==null?void 0:d.active;w.useEffect(()=>{if(!f&&c!=null&&l!=null){var A=yR({active:s,coordinate:r,dataKey:o,index:a,label:typeof n=="number"?String(n):n});AC.emit(CR,c,A,l)}},[f,r,o,a,n,l,c,u,s])}function xY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xY(Object(r),!0).forEach(function(n){EXe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EXe(e,t,r){return(t=jXe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jXe(e){var t=kXe(e,"string");return typeof t=="symbol"?t:t+""}function kXe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SXe(e){return e.dataKey}function _Xe(e,t){return w.isValidElement(e)?w.cloneElement(e,t):typeof e=="function"?w.createElement(e,t):w.createElement(XVe,t)}var bY=[],TXe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Wp.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Vo(e){var t=Gc(e,TXe),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:s,content:o,filterNull:l,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:A,useTranslate3d:m,wrapperStyle:g,cursor:x,shared:v,trigger:y,defaultIndex:N,portal:C,axisId:_}=t,j=ss(),I=typeof N=="number"?String(N):N;w.useEffect(()=>{j(sWe({shared:v,trigger:y,axisId:_,active:r,defaultIndex:I}))},[j,v,y,_,r,I]);var T=lU(),k=dde(),B=eWe(v),{activeIndex:M,isActive:P}=fr(J=>nXe(J,B,y,I)),S=fr(J=>rXe(J,B,y,I)),L=fr(J=>Ehe(J,B,y,I)),H=fr(J=>tXe(J,B,y,I)),q=S,Q=uXe(),z=r??P,[K,Z]=jue([q,z]),U=B==="axis"?L:void 0;CXe(B,y,H,U,M,z);var Y=C??Q;if(Y==null)return null;var R=q??bY;z||(R=bY),l&&R.length&&(R=bue(q.filter(J=>J.value!=null&&(J.hide!==!0||t.includeHidden)),d,SXe));var D=R.length>0,W=w.createElement(n$e,{allowEscapeViewBox:n,animationDuration:a,animationEasing:s,isAnimationActive:c,active:z,coordinate:H,hasPayload:D,offset:u,position:f,reverseDirection:A,useTranslate3d:m,viewBox:T,wrapperStyle:g,lastBoundingBox:K,innerRef:Z,hasPortalFromProps:!!C},_Xe(o,vY(vY({},t),{},{payload:R,label:U,active:z,coordinate:H,accessibilityLayer:k})));return w.createElement(w.Fragment,null,H7.createPortal(W,Y),z&&w.createElement(cXe,{cursor:x,tooltipEventType:B,coordinate:H,payload:q,index:M}))}var FD={},RD={},LD={},yY;function BXe(){return yY||(yY=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:s}={}){let o,l=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},f=()=>{u&&d(),x()};let A=null;const m=()=>{A!=null&&clearTimeout(A),A=setTimeout(()=>{A=null,f()},n)},g=()=>{A!==null&&(clearTimeout(A),A=null)},x=()=>{g(),o=void 0,l=null},v=()=>{d()},y=function(...N){if(a!=null&&a.aborted)return;o=this,l=N;const C=A==null;m(),c&&C&&d()};return y.schedule=m,y.cancel=x,y.flush=v,a==null||a.addEventListener("abort",x,{once:!0}),y}e.debounce=t}(LD)),LD}var wY;function IXe(){return wY||(wY=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BXe();function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:l=!0,maxWait:c}=s,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,f=null;const A=t.debounce(function(...x){d=n.apply(this,x),f=null},a,{edges:u}),m=function(...x){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,x),f=Date.now(),A.cancel(),A.schedule(),d):(A.apply(this,x),d)},g=()=>(A.flush(),d);return m.cancel=A.cancel,m.flush=g,m}e.debounce=r}(RD)),RD}var NY;function DXe(){return NY||(NY=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IXe();function r(n,a=0,s={}){const{leading:o=!0,trailing:l=!0}=s;return t.debounce(n,a,{leading:o,maxWait:a,trailing:l})}e.throttle=r}(FD)),FD}var MD,CY;function OXe(){return CY||(CY=1,MD=DXe().throttle),MD}var PXe=OXe();const FXe=sc(PXe);var sN=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s]};function EY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function UD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EY(Object(r),!0).forEach(function(n){RXe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RXe(e,t,r){return(t=LXe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LXe(e){var t=MXe(e,"string");return typeof t=="symbol"?t:t+""}function MXe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $o=w.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a="100%",height:s="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:f,className:A,onResize:m,style:g={}}=e,x=w.useRef(null),v=w.useRef();v.current=m,w.useImperativeHandle(t,()=>x.current);var[y,N]=w.useState({containerWidth:n.width,containerHeight:n.height}),C=w.useCallback((j,I)=>{N(T=>{var k=Math.round(j),B=Math.round(I);return T.containerWidth===k&&T.containerHeight===B?T:{containerWidth:k,containerHeight:B}})},[]);w.useEffect(()=>{var j=B=>{var M,{width:P,height:S}=B[0].contentRect;C(P,S),(M=v.current)===null||M===void 0||M.call(v,P,S)};d>0&&(j=FXe(j,d,{trailing:!0,leading:!1}));var I=new ResizeObserver(j),{width:T,height:k}=x.current.getBoundingClientRect();return C(T,k),I.observe(x.current),()=>{I.disconnect()}},[C,d]);var _=w.useMemo(()=>{var{containerWidth:j,containerHeight:I}=y;if(j<0||I<0)return null;sN(Wg(a)||Wg(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,s),sN(!r||r>0,"The aspect(%s) must be greater than zero.",r);var T=Wg(a)?j:a,k=Wg(s)?I:s;return r&&r>0&&(T?k=T/r:k&&(T=k*r),c&&k>c&&(k=c)),sN(T>0||k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,k,a,s,o,l,r),w.Children.map(u,B=>w.cloneElement(B,{width:T,height:k,style:UD({width:T,height:k},B.props.style)}))},[r,u,s,c,l,o,y,a]);return w.createElement("div",{id:f?"".concat(f):void 0,className:mn("recharts-responsive-container",A),style:UD(UD({},g),{},{width:a,height:s,minWidth:o,minHeight:l,maxHeight:c}),ref:x},w.createElement("div",{style:{width:0,height:0,overflow:"visible"}},_))}),kA=e=>null;kA.displayName="Cell";function UXe(e,t,r){return(t=HXe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HXe(e){var t=QXe(e,"string");return typeof t=="symbol"?t:t+""}function QXe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class VXe{constructor(t){UXe(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function jY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $Xe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jY(Object(r),!0).forEach(function(n){zXe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zXe(e,t,r){return(t=GXe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GXe(e){var t=qXe(e,"string");return typeof t=="symbol"?t:t+""}function qXe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KXe={cacheSize:2e3,enableCache:!0},The=$Xe({},KXe),kY=new VXe(The.cacheSize),WXe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},SY="recharts_measurement_span";function XXe(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(o,"|").concat(l)}var _Y=(e,t)=>{try{var r=document.getElementById(SY);r||(r=document.createElement("span"),r.setAttribute("id",SY),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,WXe,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},iN=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Wp.isSsr)return{width:0,height:0};if(!The.enableCache)return _Y(t,r);var n=XXe(t,r),a=kY.get(n);if(a)return a;var s=_Y(t,r);return kY.set(n,s),s},TY=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,BY=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,YXe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,JXe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Bhe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},ZXe=Object.keys(Bhe),Ob="NaN";function eYe(e,t){return e*Bhe[t]}class jc{static parse(t){var r,[,n,a]=(r=JXe.exec(t))!==null&&r!==void 0?r:[];return new jc(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,$c(t)&&(this.unit=""),r!==""&&!YXe.test(r)&&(this.num=NaN,this.unit=""),ZXe.includes(r)&&(this.num=eYe(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new jc(NaN,""):new jc(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new jc(NaN,""):new jc(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new jc(NaN,""):new jc(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new jc(NaN,""):new jc(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return $c(this.num)}}function Ihe(e){if(e.includes(Ob))return Ob;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=(r=TY.exec(t))!==null&&r!==void 0?r:[],o=jc.parse(n??""),l=jc.parse(s??""),c=a==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return Ob;t=t.replace(TY,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,A]=(u=BY.exec(t))!==null&&u!==void 0?u:[],m=jc.parse(d??""),g=jc.parse(A??""),x=f==="+"?m.add(g):m.subtract(g);if(x.isNaN())return Ob;t=t.replace(BY,x.toString())}return t}var IY=/\(([^()]*)\)/;function tYe(e){for(var t=e,r;(r=IY.exec(t))!=null;){var[,n]=r;t=t.replace(IY,Ihe(n))}return t}function rYe(e){var t=e.replace(/\s+/g,"");return t=tYe(t),t=Ihe(t),t}function nYe(e){try{return rYe(e)}catch{return Ob}}function HD(e){var t=nYe(e.slice(5,-1));return t===Ob?"":t}var aYe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],sYe=["dx","dy","angle","className","breakAll"];function ER(){return ER=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ER.apply(null,arguments)}function DY(e,t){if(e==null)return{};var r,n,a=iYe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function iYe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Dhe=/[ \f\n\r\t\v\u2028\u2029]+/,Ohe=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];Ka(t)||(r?a=t.toString().split(""):a=t.toString().split(Dhe));var s=a.map(l=>({word:l,width:iN(l,n).width})),o=r?0:iN("",n).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},oYe=(e,t,r,n,a)=>{var{maxLines:s,children:o,style:l,breakAll:c}=e,u=ur(s),d=o,f=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P.reduce((S,L)=>{var{word:H,width:q}=L,Q=S[S.length-1];if(Q&&(n==null||a||Q.width+q+r<Number(n)))Q.words.push(H),Q.width+=q+r;else{var z={words:[H],width:q};S.push(z)}return S},[])},A=f(t),m=M=>M.reduce((P,S)=>P.width>S.width?P:S);if(!u||a)return A;var g=A.length>s||m(A).width>Number(n);if(!g)return A;for(var x="",v=M=>{var P=d.slice(0,M),S=Ohe({breakAll:c,style:l,children:P+x}).wordsWithComputedWidth,L=f(S),H=L.length>s||m(L).width>Number(n);return[H,L]},y=0,N=d.length-1,C=0,_;y<=N&&C<=d.length-1;){var j=Math.floor((y+N)/2),I=j-1,[T,k]=v(I),[B]=v(j);if(!T&&!B&&(y=j+1),T&&B&&(N=j-1),!T&&B){_=k;break}C++}return _||A},OY=e=>{var t=Ka(e)?[]:e.toString().split(Dhe);return[{words:t}]},lYe=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:o}=e;if((t||r)&&!Wp.isSsr){var l,c,u=Ohe({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;l=d,c=f}else return OY(n);return oYe({breakAll:s,children:n,maxLines:o,style:a},l,c,t,r)}return OY(n)},PY="#808080",My=w.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:s="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:u=PY}=e,d=DY(e,aYe),f=w.useMemo(()=>lYe({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:o,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,o,d.style,d.width]),{dx:A,dy:m,angle:g,className:x,breakAll:v}=d,y=DY(d,sYe);if(!n0(r)||!n0(n))return null;var N=r+(ur(A)?A:0),C=n+(ur(m)?m:0),_;switch(c){case"start":_=HD("calc(".concat(s,")"));break;case"middle":_=HD("calc(".concat((f.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:_=HD("calc(".concat(f.length-1," * -").concat(a,")"));break}var j=[];if(o){var I=f[0].width,{width:T}=d;j.push("scale(".concat(ur(T)?T/I:1,")"))}return g&&j.push("rotate(".concat(g,", ").concat(N,", ").concat(C,")")),j.length&&(y.transform=j.join(" ")),w.createElement("text",ER({},$n(y,!0),{ref:t,x:N,y:C,className:mn("recharts-text",x),textAnchor:l,fill:u.includes("url")?PY:u}),f.map((k,B)=>{var M=k.words.join(v?"":" ");return w.createElement("tspan",{x:N,dy:B===0?_:a,key:"".concat(M,"-").concat(B)},M)}))});My.displayName="Text";var cYe=["offset"],uYe=["labelRef"];function FY(e,t){if(e==null)return{};var r,n,a=dYe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function dYe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function RY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Rs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RY(Object(r),!0).forEach(function(n){fYe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fYe(e,t,r){return(t=hYe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hYe(e){var t=AYe(e,"string");return typeof t=="symbol"?t:t+""}function AYe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q0(){return q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},q0.apply(null,arguments)}var mYe=e=>{var{value:t,formatter:r}=e,n=Ka(e.children)?t:e.children;return typeof r=="function"?r(n):n},f9=e=>e!=null&&typeof e=="function",pYe=(e,t)=>{var r=go(t-e),n=Math.min(Math.abs(t-e),360);return r*n},gYe=(e,t,r,n)=>{var{position:a,offset:s,className:o}=e,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:A,clockWise:m}=n,g=(u+d)/2,x=pYe(f,A),v=x>=0?1:-1,y,N;a==="insideStart"?(y=f+v*s,N=m):a==="insideEnd"?(y=A-v*s,N=!m):a==="end"&&(y=A+v*s,N=m),N=x<=0?N:!N;var C=la(l,c,g,y),_=la(l,c,g,y+(N?1:-1)*359),j="M".concat(C.x,",").concat(C.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(N?0:1,`,
    `).concat(_.x,",").concat(_.y),I=Ka(e.id)?sC("recharts-radial-line-"):e.id;return w.createElement("text",q0({},r,{dominantBaseline:"central",className:mn("recharts-radial-bar-label",o)}),w.createElement("defs",null,w.createElement("path",{id:I,d:j})),w.createElement("textPath",{xlinkHref:"#".concat(I)},t))},xYe=(e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:o,startAngle:l,endAngle:c}=e,u=(l+c)/2;if(r==="outside"){var{x:d,y:f}=la(n,a,o+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var A=(s+o)/2,{x:m,y:g}=la(n,a,A,u);return{x:m,y:g,textAnchor:"middle",verticalAnchor:"middle"}},vYe=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,{x:s,y:o,width:l,height:c}=t,u=c>=0?1:-1,d=u*n,f=u>0?"end":"start",A=u>0?"start":"end",m=l>=0?1:-1,g=m*n,x=m>0?"end":"start",v=m>0?"start":"end";if(a==="top"){var y={x:s+l/2,y:o-u*n,textAnchor:"middle",verticalAnchor:f};return Rs(Rs({},y),r?{height:Math.max(o-r.y,0),width:l}:{})}if(a==="bottom"){var N={x:s+l/2,y:o+c+d,textAnchor:"middle",verticalAnchor:A};return Rs(Rs({},N),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{})}if(a==="left"){var C={x:s-g,y:o+c/2,textAnchor:x,verticalAnchor:"middle"};return Rs(Rs({},C),r?{width:Math.max(C.x-r.x,0),height:c}:{})}if(a==="right"){var _={x:s+l+g,y:o+c/2,textAnchor:v,verticalAnchor:"middle"};return Rs(Rs({},_),r?{width:Math.max(r.x+r.width-_.x,0),height:c}:{})}var j=r?{width:l,height:c}:{};return a==="insideLeft"?Rs({x:s+g,y:o+c/2,textAnchor:v,verticalAnchor:"middle"},j):a==="insideRight"?Rs({x:s+l-g,y:o+c/2,textAnchor:x,verticalAnchor:"middle"},j):a==="insideTop"?Rs({x:s+l/2,y:o+d,textAnchor:"middle",verticalAnchor:A},j):a==="insideBottom"?Rs({x:s+l/2,y:o+c-d,textAnchor:"middle",verticalAnchor:f},j):a==="insideTopLeft"?Rs({x:s+g,y:o+d,textAnchor:v,verticalAnchor:A},j):a==="insideTopRight"?Rs({x:s+l-g,y:o+d,textAnchor:x,verticalAnchor:A},j):a==="insideBottomLeft"?Rs({x:s+g,y:o+c-d,textAnchor:v,verticalAnchor:f},j):a==="insideBottomRight"?Rs({x:s+l-g,y:o+c-d,textAnchor:x,verticalAnchor:f},j):a&&typeof a=="object"&&(ur(a.x)||Wg(a.x))&&(ur(a.y)||Wg(a.y))?Rs({x:s+ac(a.x,l),y:o+ac(a.y,c),textAnchor:"end",verticalAnchor:"end"},j):Rs({x:s+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},j)},bYe=e=>"cx"in e&&ur(e.cx);function Bc(e){var{offset:t=5}=e,r=FY(e,cYe),n=Rs({offset:t},r),{viewBox:a,position:s,value:o,children:l,content:c,className:u="",textBreakAll:d,labelRef:f}=n,A=fr(Iy),m=lU(),g=s==="center"?m:A??m,x=a||g;if(!x||Ka(o)&&Ka(l)&&!w.isValidElement(c)&&typeof c!="function")return null;var v=Rs(Rs({},n),{},{viewBox:x});if(w.isValidElement(c)){var{labelRef:y}=v,N=FY(v,uYe);return w.cloneElement(c,N)}var C;if(typeof c=="function"){if(C=w.createElement(c,v),w.isValidElement(C))return C}else C=mYe(n);var _=bYe(x),j=$n(n,!0);if(_&&(s==="insideStart"||s==="insideEnd"||s==="end"))return gYe(n,C,j,x);var I=_?xYe(x,n.offset,n.position):vYe(n,x);return w.createElement(My,q0({ref:f,className:mn("recharts-label",u)},j,I,{breakAll:d}),C)}Bc.displayName="Label";var Phe=e=>{var{cx:t,cy:r,angle:n,startAngle:a,endAngle:s,r:o,radius:l,innerRadius:c,outerRadius:u,x:d,y:f,top:A,left:m,width:g,height:x,clockWise:v,labelViewBox:y}=e;if(y)return y;if(ur(g)&&ur(x)){if(ur(d)&&ur(f))return{x:d,y:f,width:g,height:x};if(ur(A)&&ur(m))return{x:A,y:m,width:g,height:x}}if(ur(d)&&ur(f))return{x:d,y:f,width:0,height:0};if(ur(t)&&ur(r))return{cx:t,cy:r,startAngle:a||n||0,endAngle:s||n||0,innerRadius:c||0,outerRadius:u||l||o||0,clockWise:v};if(e.viewBox)return e.viewBox},yYe=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?w.createElement(Bc,q0({key:"label-implicit"},n)):n0(e)?w.createElement(Bc,q0({key:"label-implicit",value:e},n)):w.isValidElement(e)?e.type===Bc?w.cloneElement(e,Rs({key:"label-implicit"},n)):w.createElement(Bc,q0({key:"label-implicit",content:e},n)):f9(e)?w.createElement(Bc,q0({key:"label-implicit",content:e},n)):e&&typeof e=="object"?w.createElement(Bc,q0({},e,{key:"label-implicit"},n)):null},wYe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:a,labelRef:s}=t,o=Phe(t),l=aE(a,Bc).map((u,d)=>w.cloneElement(u,{viewBox:r||o,key:"label-".concat(d)}));if(!n)return l;var c=yYe(t.label,r||o,s);return[c,...l]};Bc.parseViewBox=Phe;Bc.renderCallByParent=wYe;var QD={},VD={},LY;function NYe(){return LY||(LY=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(VD)),VD}var $D={},MY;function CYe(){return MY||(MY=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}($D)),$D}var UY;function EYe(){return UY||(UY=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NYe(),r=CYe(),n=K7();function a(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=a}(QD)),QD}var zD,HY;function jYe(){return HY||(HY=1,zD=EYe().last),zD}var kYe=jYe();const Fhe=sc(kYe);var SYe=["valueAccessor"],_Ye=["data","dataKey","clockWise","id","textBreakAll"];function O_(){return O_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O_.apply(null,arguments)}function QY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function VY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QY(Object(r),!0).forEach(function(n){TYe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TYe(e,t,r){return(t=BYe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BYe(e){var t=IYe(e,"string");return typeof t=="symbol"?t:t+""}function IYe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $Y(e,t){if(e==null)return{};var r,n,a=DYe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function DYe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var OYe=e=>Array.isArray(e.value)?Fhe(e.value):e.value;function uA(e){var{valueAccessor:t=OYe}=e,r=$Y(e,SYe),{data:n,dataKey:a,clockWise:s,id:o,textBreakAll:l}=r,c=$Y(r,_Ye);return!n||!n.length?null:w.createElement(Fa,{className:"recharts-label-list"},n.map((u,d)=>{var f=Ka(a)?t(u,d):Sa(u&&u.payload,a),A=Ka(o)?{}:{id:"".concat(o,"-").concat(d)};return w.createElement(Bc,O_({},$n(u,!0),c,A,{parentViewBox:u.parentViewBox,value:f,textBreakAll:l,viewBox:Bc.parseViewBox(Ka(s)?u:VY(VY({},u),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}uA.displayName="LabelList";function PYe(e,t){return e?e===!0?w.createElement(uA,{key:"labelList-implicit",data:t}):w.isValidElement(e)||f9(e)?w.createElement(uA,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?w.createElement(uA,O_({data:t},e,{key:"labelList-implicit"})):null:null}function FYe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,a=aE(n,uA).map((o,l)=>w.cloneElement(o,{data:t,key:"labelList-".concat(l)}));if(!r)return a;var s=PYe(e.label,t);return[s,...a]}uA.renderCallByParent=FYe;var RYe=["points","className","baseLinePoints","connectNulls"];function Pb(){return Pb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pb.apply(null,arguments)}function LYe(e,t){if(e==null)return{};var r,n,a=MYe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function MYe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var zY=e=>e&&e.x===+e.x&&e.y===+e.y,UYe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(n=>{zY(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),zY(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},oN=(e,t)=>{var r=UYe(e);t&&(r=[r.reduce((a,s)=>[...a,...s],[])]);var n=r.map(a=>a.reduce((s,o,l)=>"".concat(s).concat(l===0?"M":"L").concat(o.x,",").concat(o.y),"")).join("");return r.length===1?"".concat(n,"Z"):n},HYe=(e,t,r)=>{var n=oN(e,r);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(oN(t.reverse(),r).slice(1))},Rhe=e=>{var{points:t,className:r,baseLinePoints:n,connectNulls:a}=e,s=LYe(e,RYe);if(!t||!t.length)return null;var o=mn("recharts-polygon",r);if(n&&n.length){var l=s.stroke&&s.stroke!=="none",c=HYe(t,n,a);return w.createElement("g",{className:o},w.createElement("path",Pb({},$n(s,!0),{fill:c.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:c})),l?w.createElement("path",Pb({},$n(s,!0),{fill:"none",d:oN(t,a)})):null,l?w.createElement("path",Pb({},$n(s,!0),{fill:"none",d:oN(n,a)})):null)}var u=oN(t,a);return w.createElement("path",Pb({},$n(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",className:o,d:u}))};function jR(){return jR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jR.apply(null,arguments)}var mT=e=>{var{cx:t,cy:r,r:n,className:a}=e,s=mn("recharts-dot",a);return t===+t&&r===+r&&n===+n?w.createElement("circle",jR({},bo(e),M7(e),{className:s,cx:t,cy:r,r:n})):null},h9=e=>e.graphicalItems.polarItems,QYe=vt([Qa,fE],QU),A9=vt([h9,wi,QYe],VU),VYe=vt([A9],$U),m9=vt([VYe,eT],zU),Lhe=vt([m9,wi,A9],qU),$Ye=vt([m9,wi,A9],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var s,o=Sa(n,(s=t.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Sa(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]}))),GY=()=>{},zYe=vt([wi,Vfe,GY,$Ye,GY,yn,Qa],WU),Mhe=vt([wi,yn,m9,Lhe,uE,Qa,zYe],XU),Uhe=vt([Mhe,wi,eg],JU),GYe=vt([wi,Mhe,Uhe,Qa],e9),p9=(e,t,r)=>{switch(t){case"angleAxis":return By(e,r);case"radiusAxis":return dE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},g9=(e,t,r)=>{switch(t){case"angleAxis":return uKe(e,r);case"radiusAxis":return dKe(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Uy=vt([p9,eg,GYe,g9],uT),Hhe=vt([yn,Lhe,Oy,Qa],t9),Hy=vt([yn,p9,eg,Uy,Uhe,g9,mE,Hhe,Qa],Jfe);vt([yn,p9,Uy,g9,mE,Hhe,Qa],ehe);var qYe=(e,t)=>Hy(e,"angleAxis",t,!1),KYe=vt([qYe],e=>{if(e)return e.map(t=>t.coordinate)}),WYe=(e,t)=>Hy(e,"radiusAxis",t,!1),XYe=vt([WYe],e=>{if(e)return e.map(t=>t.coordinate)}),YYe=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius"];function JYe(e,t){if(e==null)return{};var r,n,a=ZYe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ZYe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function SA(){return SA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SA.apply(null,arguments)}function qY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function q1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qY(Object(r),!0).forEach(function(n){eJe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eJe(e,t,r){return(t=tJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tJe(e){var t=rJe(e,"string");return typeof t=="symbol"?t:t+""}function rJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nJe=(e,t,r,n)=>{var a="";return n.forEach((s,o)=>{var l=la(t,r,e,s);o?a+="L ".concat(l.x,",").concat(l.y):a+="M ".concat(l.x,",").concat(l.y)}),a+="Z",a},aJe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,polarAngles:s,radialLines:o}=e;if(!s||!s.length||!o)return null;var l=q1({stroke:"#ccc"},bo(e));return w.createElement("g",{className:"recharts-polar-grid-angle"},s.map(c=>{var u=la(t,r,n,c),d=la(t,r,a,c);return w.createElement("line",SA({},l,{key:"line-".concat(c),x1:u.x,y1:u.y,x2:d.x,y2:d.y}))}))},sJe=e=>{var{cx:t,cy:r,radius:n,index:a}=e,s=q1(q1({stroke:"#ccc"},bo(e)),{},{fill:"none"});return w.createElement("circle",SA({},s,{className:mn("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(a),cx:t,cy:r,r:n}))},iJe=e=>{var{radius:t,index:r}=e,n=q1(q1({stroke:"#ccc"},bo(e)),{},{fill:"none"});return w.createElement("path",SA({},n,{className:mn("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(r),d:nJe(t,e.cx,e.cy,e.polarAngles)}))},oJe=e=>{var{polarRadius:t,gridType:r}=e;return!t||!t.length?null:w.createElement("g",{className:"recharts-polar-grid-concentric"},t.map((n,a)=>{var s=a;return r==="circle"?w.createElement(sJe,SA({key:s},e,{radius:n,index:a})):w.createElement(iJe,SA({key:s},e,{radius:n,index:a}))}))},Qhe=e=>{var t,r,n,a,s,o,l,c,{gridType:u="polygon",radialLines:d=!0,angleAxisId:f=0,radiusAxisId:A=0,cx:m,cy:g,innerRadius:x,outerRadius:v}=e,y=JYe(e,YYe),N=fr(Iy),C=q1({cx:(t=(r=N==null?void 0:N.cx)!==null&&r!==void 0?r:m)!==null&&t!==void 0?t:0,cy:(n=(a=N==null?void 0:N.cy)!==null&&a!==void 0?a:g)!==null&&n!==void 0?n:0,innerRadius:(s=(o=N==null?void 0:N.innerRadius)!==null&&o!==void 0?o:x)!==null&&s!==void 0?s:0,outerRadius:(l=(c=N==null?void 0:N.outerRadius)!==null&&c!==void 0?c:v)!==null&&l!==void 0?l:0},y),{polarAngles:_,polarRadius:j,cx:I,cy:T,innerRadius:k,outerRadius:B}=C,M=fr(H=>KYe(H,f)),P=fr(H=>XYe(H,A)),S=Array.isArray(_)?_:M,L=Array.isArray(j)?j:P;return B<=0||S==null||L==null?null:w.createElement("g",{className:"recharts-polar-grid"},w.createElement(aJe,SA({cx:I,cy:T,innerRadius:k,outerRadius:B,gridType:u,radialLines:d},C,{polarAngles:S,polarRadius:L})),w.createElement(oJe,SA({cx:I,cy:T,innerRadius:k,outerRadius:B,gridType:u,radialLines:d},C,{polarAngles:S,polarRadius:L})))};Qhe.displayName="PolarGrid";var GD={},qD={},KY;function lJe(){return KY||(KY=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let o=1;o<r.length;o++){const l=r[o],c=n(l);c>s&&(s=c,a=l)}return a}e.maxBy=t}(qD)),qD}var WY;function cJe(){return WY||(WY=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lJe(),r=P3(),n=Z7();function a(s,o){if(s!=null)return t.maxBy(Array.from(s),n.iteratee(o??r.identity))}e.maxBy=a}(GD)),GD}var KD,XY;function uJe(){return XY||(XY=1,KD=cJe().maxBy),KD}var dJe=uJe();const fJe=sc(dJe);var WD={},XD={},YY;function hJe(){return YY||(YY=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let o=1;o<r.length;o++){const l=r[o],c=n(l);c<s&&(s=c,a=l)}return a}e.minBy=t}(XD)),XD}var JY;function AJe(){return JY||(JY=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hJe(),r=P3(),n=Z7();function a(s,o){if(s!=null)return t.minBy(Array.from(s),n.iteratee(o??r.identity))}e.minBy=a}(WD)),WD}var YD,ZY;function mJe(){return ZY||(ZY=1,YD=AJe().minBy),YD}var pJe=mJe();const gJe=sc(pJe);var xJe={radiusAxis:{},angleAxis:{}},Vhe=Ru({name:"polarAxis",initialState:xJe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:vJe,removeRadiusAxis:bJe,addAngleAxis:yJe,removeAngleAxis:wJe}=Vhe.actions,NJe=Vhe.reducer,CJe=["cx","cy","angle","axisLine"],EJe=["angle","tickFormatter","stroke","tick"];function mC(){return mC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mC.apply(null,arguments)}function eJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Lh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eJ(Object(r),!0).forEach(function(n){pT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pT(e,t,r){return(t=jJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jJe(e){var t=kJe(e,"string");return typeof t=="symbol"?t:t+""}function kJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $he(e,t){if(e==null)return{};var r,n,a=SJe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function SJe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var zhe="radiusAxis";function _Je(e){var t=ss();return w.useEffect(()=>(t(vJe(e)),()=>{t(bJe(e))})),null}var TJe=(e,t,r,n)=>{var{coordinate:a}=e;return la(r,n,a,t)},BJe=e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle";break}return t},IJe=(e,t,r,n)=>{var a=fJe(n,o=>o.coordinate||0),s=gJe(n,o=>o.coordinate||0);return{cx:t,cy:r,startAngle:e,endAngle:e,innerRadius:s.coordinate||0,outerRadius:a.coordinate||0}},DJe=(e,t)=>{var{cx:r,cy:n,angle:a,axisLine:s}=e,o=$he(e,CJe),l=t.reduce((f,A)=>[Math.min(f[0],A.coordinate),Math.max(f[1],A.coordinate)],[1/0,-1/0]),c=la(r,n,l[0],a),u=la(r,n,l[1],a),d=Lh(Lh(Lh({},bo(o)),{},{fill:"none"},$n(s,!1)),{},{x1:c.x,y1:c.y,x2:u.x,y2:u.y});return w.createElement("line",mC({className:"recharts-polar-radius-axis-line"},d))},OJe=(e,t,r)=>{var n;return w.isValidElement(e)?n=w.cloneElement(e,t):typeof e=="function"?n=e(t):n=w.createElement(My,mC({},t,{className:"recharts-polar-radius-axis-tick-value"}),r),n},PJe=(e,t)=>{var{angle:r,tickFormatter:n,stroke:a,tick:s}=e,o=$he(e,EJe),l=BJe(e.orientation),c=bo(o),u=$n(s,!1),d=t.map((f,A)=>{var m=TJe(f,e.angle,e.cx,e.cy),g=Lh(Lh(Lh(Lh({textAnchor:l,transform:"rotate(".concat(90-r,", ").concat(m.x,", ").concat(m.y,")")},c),{},{stroke:"none",fill:a},u),{},{index:A},m),{},{payload:f});return w.createElement(Fa,mC({className:mn("recharts-polar-radius-axis-tick",Jue(s)),key:"tick-".concat(f.coordinate)},ov(e,f,A)),OJe(s,g,n?n(f.value,A):f.value))});return w.createElement(Fa,{className:"recharts-polar-radius-axis-ticks"},d)},FJe=e=>{var{radiusAxisId:t}=e,r=fr(Iy),n=fr(c=>Uy(c,"radiusAxis",t)),a=fr(c=>Hy(c,"radiusAxis",t,!1));if(r==null||!a||!a.length)return null;var s=Lh(Lh(Lh({},e),{},{scale:n},r),{},{radius:r.outerRadius}),{tick:o,axisLine:l}=s;return w.createElement(Fa,{className:mn("recharts-polar-radius-axis",zhe,s.className)},l&&DJe(s,a),o&&PJe(s,a),Bc.renderCallByParent(s,IJe(s.angle,s.cx,s.cy,a)))};class gT extends w.PureComponent{render(){return w.createElement(w.Fragment,null,w.createElement(_Je,{domain:this.props.domain,id:this.props.radiusAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:this.props.allowDuplicatedCategory,allowDataOverflow:this.props.allowDataOverflow,reversed:this.props.reversed,includeHidden:this.props.includeHidden,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick}),w.createElement(FJe,this.props))}}pT(gT,"displayName","PolarRadiusAxis");pT(gT,"axisType",zhe);pT(gT,"defaultProps",_c);var RJe=["children"];function _A(){return _A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_A.apply(null,arguments)}function tJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Dh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tJ(Object(r),!0).forEach(function(n){xT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xT(e,t,r){return(t=LJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LJe(e){var t=MJe(e,"string");return typeof t=="symbol"?t:t+""}function MJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UJe(e,t){if(e==null)return{};var r,n,a=HJe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function HJe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var QJe=Math.PI/180,rJ=1e-5,Ghe="angleAxis";function VJe(e){var t=ss(),r=w.useMemo(()=>{var{children:s}=e,o=UJe(e,RJe);return o},[e]),n=fr(s=>By(s,r.id)),a=r===n;return w.useEffect(()=>(t(yJe(r)),()=>{t(wJe(r))}),[t,r]),a?e.children:null}var $Je=(e,t)=>{var{cx:r,cy:n,radius:a,orientation:s,tickSize:o}=t,l=o||8,c=la(r,n,a,e.coordinate),u=la(r,n,a+(s==="inner"?-1:1)*l,e.coordinate);return{x1:c.x,y1:c.y,x2:u.x,y2:u.y}},zJe=(e,t)=>{var r=Math.cos(-e.coordinate*QJe);return r>rJ?t==="outer"?"start":"end":r<-rJ?t==="outer"?"end":"start":"middle"},GJe=e=>{var{cx:t,cy:r,radius:n,axisLineType:a,axisLine:s,ticks:o}=e;if(!s)return null;var l=Dh(Dh({},bo(e)),{},{fill:"none"},$n(s,!1));if(a==="circle")return w.createElement(mT,_A({className:"recharts-polar-angle-axis-line"},l,{cx:t,cy:r,r:n}));var c=o.map(u=>la(t,r,n,u.coordinate));return w.createElement(Rhe,_A({className:"recharts-polar-angle-axis-line"},l,{points:c}))},qJe=e=>{var{tick:t,tickProps:r,value:n}=e;return t?w.isValidElement(t)?w.cloneElement(t,r):typeof t=="function"?t(r):w.createElement(My,_A({},r,{className:"recharts-polar-angle-axis-tick-value"}),n):null},KJe=e=>{var{tick:t,tickLine:r,tickFormatter:n,stroke:a,ticks:s}=e,o=bo(e),l=$n(t,!1),c=Dh(Dh({},o),{},{fill:"none"},$n(r,!1)),u=s.map((d,f)=>{var A=$Je(d,e),m=zJe(d,e.orientation),g=Dh(Dh(Dh({},o),{},{textAnchor:m,stroke:"none",fill:a},l),{},{index:f,payload:d,x:A.x2,y:A.y2});return w.createElement(Fa,_A({className:mn("recharts-polar-angle-axis-tick",Jue(t)),key:"tick-".concat(d.coordinate)},ov(e,d,f)),r&&w.createElement("line",_A({className:"recharts-polar-angle-axis-tick-line"},c,A)),w.createElement(qJe,{tick:t,tickProps:g,value:n?n(d.value,f):d.value}))});return w.createElement(Fa,{className:"recharts-polar-angle-axis-ticks"},u)},WJe=e=>{var{angleAxisId:t}=e,r=fr(Iy),n=fr(l=>Uy(l,"angleAxis",t)),a=Ul(),s=fr(l=>Hy(l,"angleAxis",t,a));if(r==null||!s||!s.length)return null;var o=Dh(Dh(Dh({},e),{},{scale:n},r),{},{radius:r.outerRadius});return w.createElement(Fa,{className:mn("recharts-polar-angle-axis",Ghe,o.className)},w.createElement(GJe,_A({},o,{ticks:s})),w.createElement(KJe,_A({},o,{ticks:s})))};class vT extends w.PureComponent{render(){return this.props.radius<=0?null:w.createElement(VJe,{id:this.props.angleAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:this.props.reversed,includeHidden:!1,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick,domain:this.props.domain},w.createElement(WJe,this.props))}}xT(vT,"displayName","PolarAngleAxis");xT(vT,"axisType",Ghe);xT(vT,"defaultProps",Ih);function nJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function aJ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nJ(Object(r),!0).forEach(function(n){XJe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XJe(e,t,r){return(t=YJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YJe(e){var t=JJe(e,"string");return typeof t=="symbol"?t:t+""}function JJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZJe=(e,t)=>t,x9=vt([h9,ZJe],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),eZe=[],v9=(e,t,r)=>(r==null?void 0:r.length)===0?eZe:r,qhe=vt([eT,x9,v9],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>aJ(aJ({},t.presentationProps),s.props))),a!=null)return a}}),tZe=vt([qhe,x9,v9],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var s,o=Sa(n,t.nameKey,t.name),l;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?l=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=t.fill,{value:qp(o,t.dataKey),color:l,payload:n,type:t.legendType}})}),rZe=vt([qhe,x9,v9,Ki],(e,t,r,n)=>{if(!(t==null||e==null))return qZe({offset:n,pieSettings:t,displayedData:e,cells:r})}),JD={},sJ;function nZe(){return sJ||(sJ=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t}(JD)),JD}var ZD,iJ;function aZe(){return iJ||(iJ=1,ZD=nZe().isPlainObject),ZD}var sZe=aZe();const iZe=sc(sZe);function P_(){return P_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P_.apply(null,arguments)}var oJ=(e,t,r,n,a)=>{var s=r-n,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-s/2,",").concat(t+a),o+="L ".concat(e+r-s/2-n,",").concat(t+a),o+="L ".concat(e,",").concat(t," Z"),o},oZe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},lZe=e=>{var t=Gc(e,oZe),r=w.useRef(),[n,a]=w.useState(-1);w.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var v=r.current.getTotalLength();v&&a(v)}catch{}},[]);var{x:s,y:o,upperWidth:l,lowerWidth:c,height:u,className:d}=t,{animationEasing:f,animationDuration:A,animationBegin:m,isUpdateAnimationActive:g}=t;if(s!==+s||o!==+o||l!==+l||c!==+c||u!==+u||l===0&&c===0||u===0)return null;var x=mn("recharts-trapezoid",d);return g?w.createElement(v_,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:u,x:s,y:o},to:{upperWidth:l,lowerWidth:c,height:u,x:s,y:o},duration:A,animationEasing:f,isActive:g},v=>{var{upperWidth:y,lowerWidth:N,height:C,x:_,y:j}=v;return w.createElement(v_,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:A,easing:f},w.createElement("path",P_({},$n(t,!0),{className:x,d:oJ(_,j,y,N,C),ref:r})))}):w.createElement("g",null,w.createElement("path",P_({},$n(t,!0),{className:x,d:oJ(s,o,l,c,u)})))},cZe=["option","shapeType","propTransformer","activeClassName","isActive"];function uZe(e,t){if(e==null)return{};var r,n,a=dZe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function dZe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function lJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function F_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lJ(Object(r),!0).forEach(function(n){fZe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fZe(e,t,r){return(t=hZe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hZe(e){var t=AZe(e,"string");return typeof t=="symbol"?t:t+""}function AZe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mZe(e,t){return F_(F_({},t),e)}function pZe(e,t){return e==="symbols"}function cJ(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return w.createElement(xde,r);case"trapezoid":return w.createElement(lZe,r);case"sector":return w.createElement(yde,r);case"symbols":if(pZe(t))return w.createElement(z7,r);break;default:return null}}function gZe(e){return w.isValidElement(e)?e.props:e}function Khe(e){var{option:t,shapeType:r,propTransformer:n=mZe,activeClassName:a="recharts-active-shape",isActive:s}=e,o=uZe(e,cZe),l;if(w.isValidElement(t))l=w.cloneElement(t,F_(F_({},o),gZe(t)));else if(typeof t=="function")l=t(o);else if(iZe(t)&&typeof t!="boolean"){var c=n(t,o);l=w.createElement(cJ,{shapeType:r,elementProps:c})}else{var u=o;l=w.createElement(cJ,{shapeType:r,elementProps:u})}return s?w.createElement(Fa,{className:a},l):l}var b9=(e,t)=>{var r=ss();return(n,a)=>s=>{e==null||e(n,a,s),r(ihe({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},y9=e=>{var t=ss();return(r,n)=>a=>{e==null||e(r,n,a),t(iWe())}},w9=(e,t)=>{var r=ss();return(n,a)=>s=>{e==null||e(n,a,s),r(oWe({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function bT(e){var{fn:t,args:r}=e,n=ss(),a=Ul();return w.useEffect(()=>{if(!a){var s=t(r);return n(nWe(s)),()=>{n(aWe(s))}}},[t,r,n,a]),null}var Whe=()=>{};function Xhe(e){var{legendPayload:t}=e,r=ss(),n=Ul();return w.useEffect(()=>n?Whe:(r(cde(t)),()=>{r(ude(t))}),[r,n,t]),null}function Yhe(e){var{legendPayload:t}=e,r=ss(),n=fr(yn);return w.useEffect(()=>n!=="centric"&&n!=="radial"?Whe:(r(cde(t)),()=>{r(ude(t))}),[r,n,t]),null}function yT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=w.useRef(sC(t)),n=w.useRef(e);return n.current!==e&&(r.current=sC(t),n.current=e),r.current}var eO,xZe=()=>{var[e]=w.useState(()=>sC("uid-"));return e},vZe=(eO=W1e.useId)!==null&&eO!==void 0?eO:xZe;function bZe(e,t){var r=vZe();return t||(e?"".concat(e,"-").concat(r):r)}var yZe=w.createContext(void 0),wT=e=>{var{id:t,type:r,children:n}=e,a=bZe("recharts-".concat(r),t);return w.createElement(yZe.Provider,{value:a},n(a))},wZe={cartesianItems:[],polarItems:[]},Jhe=Ru({name:"graphicalItems",initialState:wZe,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=lA(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=lA(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=lA(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:NZe,replaceCartesianGraphicalItem:CZe,removeCartesianGraphicalItem:EZe,addPolarGraphicalItem:jZe,removePolarGraphicalItem:kZe}=Jhe.actions,SZe=Jhe.reducer;function Zhe(e){var t=ss(),r=w.useRef(null);return w.useEffect(()=>{r.current===null?t(NZe(e)):r.current!==e&&t(CZe({prev:r.current,next:e})),r.current=e},[t,e]),w.useEffect(()=>()=>{r.current&&(t(EZe(r.current)),r.current=null)},[t]),null}function e0e(e){var t=ss();return w.useEffect(()=>(t(jZe(e)),()=>{t(kZe(e))}),[t,e]),null}function _Ze(){}var TZe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},uJ={t:0},tO={t:1};function NT(e){var t=Gc(e,TZe),{isActive:r,canBegin:n,duration:a,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:c,children:u}=t,d=gde("JavascriptAnimate",t.animationManager),[f,A]=w.useState(r?uJ:tO),m=w.useRef(null);return w.useEffect(()=>{r||A(tO)},[r]),w.useEffect(()=>{if(!r||!n)return _Ze;var g=pde(uJ,tO,Ade(s),a,A,d.getTimeoutController()),x=()=>{m.current=g()};return d.start([c,o,x,a,l]),()=>{d.stop(),m.current&&m.current(),l()}},[r,n,a,s,o,c,l,d]),u(f.t)}var BZe=["onMouseEnter","onClick","onMouseLeave"],IZe=["id"],DZe=["id"];function N9(e,t){if(e==null)return{};var r,n,a=OZe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function OZe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function dJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $s(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dJ(Object(r),!0).forEach(function(n){PZe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PZe(e,t,r){return(t=FZe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FZe(e){var t=RZe(e,"string");return typeof t=="symbol"?t:t+""}function RZe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TA(){return TA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},TA.apply(null,arguments)}function LZe(e){var t=w.useMemo(()=>aE(e.children,kA),[e.children]),r=fr(n=>tZe(n,e.id,t));return r==null?null:w.createElement(Yhe,{legendPayload:r})}function MZe(e){var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:o,name:l,hide:c,tooltipType:u}=e;return{dataDefinedOnItem:n==null?void 0:n.map(d=>d.tooltipPayload),positions:n==null?void 0:n.map(d=>d.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:o,dataKey:t,nameKey:r,name:qp(l,t),hide:c,type:u,color:o,unit:""}}}var UZe=(e,t)=>e>t?"start":e<t?"end":"middle",HZe=(e,t,r)=>typeof t=="function"?t(e):ac(t,r,r*.8),QZe=(e,t,r)=>{var{top:n,left:a,width:s,height:o}=t,l=Yue(s,o),c=a+ac(e.cx,s,s/2),u=n+ac(e.cy,o,o/2),d=ac(e.innerRadius,l,0),f=HZe(r,e.outerRadius,l),A=e.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:A}},VZe=(e,t)=>{var r=go(t-e),n=Math.min(Math.abs(t-e),360);return r*n},$Ze=(e,t)=>{if(w.isValidElement(e))return w.cloneElement(e,t);if(typeof e=="function")return e(t);var r=mn("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return w.createElement(aN,TA({},t,{type:"linear",className:r}))},zZe=(e,t,r)=>{if(w.isValidElement(e))return w.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),w.isValidElement(n)))return n;var a=mn("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return w.createElement(My,TA({},t,{alignmentBaseline:"middle",className:a}),n)};function GZe(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:s,dataKey:o}=r;if(!n||!a||!t)return null;var l=bo(r),c=$n(a,!1),u=$n(s,!1),d=typeof a=="object"&&"offsetRadius"in a&&a.offsetRadius||20,f=t.map((A,m)=>{var g=(A.startAngle+A.endAngle)/2,x=la(A.cx,A.cy,A.outerRadius+d,g),v=$s($s($s($s({},l),A),{},{stroke:"none"},c),{},{index:m,textAnchor:UZe(x.x,A.cx)},x),y=$s($s($s($s({},l),A),{},{fill:"none",stroke:A.fill},u),{},{index:m,points:[la(A.cx,A.cy,A.outerRadius,g),x],key:"line"});return w.createElement(Fa,{key:"label-".concat(A.startAngle,"-").concat(A.endAngle,"-").concat(A.midAngle,"-").concat(m)},s&&$Ze(s,y),zZe(a,v,Sa(A,o)))});return w.createElement(Fa,{className:"recharts-pie-labels"},f)}function t0e(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a,showLabels:s}=e,o=fr(Dp),{onMouseEnter:l,onClick:c,onMouseLeave:u}=a,d=N9(a,BZe),f=b9(l,a.dataKey),A=y9(u),m=w9(c,a.dataKey);return t==null?null:w.createElement(w.Fragment,null,t.map((g,x)=>{if((g==null?void 0:g.startAngle)===0&&(g==null?void 0:g.endAngle)===0&&t.length!==1)return null;var v=r&&String(x)===o,y=o?n:null,N=v?r:y,C=$s($s({},g),{},{stroke:g.stroke,tabIndex:-1,[ade]:x,[sde]:a.dataKey});return w.createElement(Fa,TA({tabIndex:-1,className:"recharts-pie-sector"},ov(d,g,x),{onMouseEnter:f(g,x),onMouseLeave:A(g,x),onClick:m(g,x),key:"sector-".concat(g==null?void 0:g.startAngle,"-").concat(g==null?void 0:g.endAngle,"-").concat(g.midAngle,"-").concat(x)}),w.createElement(Khe,TA({option:N,isActive:v,shapeType:"sector"},C)))}),w.createElement(GZe,{sectors:t,props:a,showLabels:s}))}function qZe(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:s}=e,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,A=Math.abs(r.minAngle),m=VZe(l,c),g=Math.abs(m),x=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,v=n.filter(I=>Sa(I,u,0)!==0).length,y=(g>=360?v:v-1)*x,N=g-v*A-y,C=n.reduce((I,T)=>{var k=Sa(T,u,0);return I+(ur(k)?k:0)},0),_;if(C>0){var j;_=n.map((I,T)=>{var k=Sa(I,u,0),B=Sa(I,d,T),M=QZe(r,s,I),P=(ur(k)?k:0)/C,S,L=$s($s({},I),a&&a[T]&&a[T].props);T?S=j.endAngle+go(m)*x*(k!==0?1:0):S=l;var H=S+go(m)*((k!==0?A:0)+P*N),q=(S+H)/2,Q=(M.innerRadius+M.outerRadius)/2,z=[{name:B,value:k,payload:L,dataKey:u,type:f}],K=la(M.cx,M.cy,Q,q);return j=$s($s($s($s({},r.presentationProps),{},{percent:P,cornerRadius:o,name:B,tooltipPayload:z,midAngle:q,middleRadius:Q,tooltipPosition:K},L),M),{},{value:Sa(I,u),startAngle:S,endAngle:H,payload:L,paddingAngle:go(m)*x}),j})}return _}function KZe(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:l,activeShape:c,inactiveShape:u,onAnimationStart:d,onAnimationEnd:f}=t,A=yT(t,"recharts-pie-"),m=r.current,[g,x]=w.useState(!0),v=w.useCallback(()=>{typeof f=="function"&&f(),x(!1)},[f]),y=w.useCallback(()=>{typeof d=="function"&&d(),x(!0)},[d]);return w.createElement(NT,{begin:s,duration:o,isActive:a,easing:l,onAnimationStart:y,onAnimationEnd:v,key:A},N=>{var C=[],_=n&&n[0],j=_.startAngle;return n.forEach((I,T)=>{var k=m&&m[T],B=T>0?Tp(I,"paddingAngle",0):0;if(k){var M=Db(k.endAngle-k.startAngle,I.endAngle-I.startAngle),P=$s($s({},I),{},{startAngle:j+B,endAngle:j+M(N)+B});C.push(P),j=P.endAngle}else{var{endAngle:S,startAngle:L}=I,H=Db(0,S-L),q=H(N),Q=$s($s({},I),{},{startAngle:j+B,endAngle:j+q+B});C.push(Q),j=Q.endAngle}}),r.current=C,w.createElement(Fa,null,w.createElement(t0e,{sectors:C,activeShape:c,inactiveShape:u,allOtherPieProps:t,showLabels:!g}))})}function WZe(e){var{sectors:t,isAnimationActive:r,activeShape:n,inactiveShape:a}=e,s=w.useRef(null),o=s.current;return r&&t&&t.length&&(!o||o!==t)?w.createElement(KZe,{props:e,previousSectorsRef:s}):w.createElement(t0e,{sectors:t,activeShape:n,inactiveShape:a,allOtherPieProps:e,showLabels:!0})}function XZe(e){var{hide:t,className:r,rootTabIndex:n}=e,a=mn("recharts-pie",r);return t?null:w.createElement(Fa,{tabIndex:n,className:a},w.createElement(WZe,e))}var YZe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Wp.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function JZe(e){var{id:t}=e,r=N9(e,IZe),n=w.useMemo(()=>aE(e.children,kA),[e.children]),a=fr(s=>rZe(s,t,n));return w.createElement(w.Fragment,null,w.createElement(bT,{fn:MZe,args:$s($s({},e),{},{sectors:a})}),w.createElement(XZe,TA({},r,{sectors:a})))}function xE(e){var t=Gc(e,YZe),{id:r}=t,n=N9(t,DZe),a=bo(n);return w.createElement(wT,{id:r,type:"pie"},s=>w.createElement(w.Fragment,null,w.createElement(e0e,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a}),w.createElement(LZe,TA({},n,{id:s})),w.createElement(JZe,TA({},n,{id:s})),n.children))}xE.displayName="Pie";var ZZe=vt([Ki],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),eet=vt([ZZe,QA,VA],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),C9=()=>fr(eet),tet=()=>fr(qWe);function fJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hJ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fJ(Object(r),!0).forEach(function(n){ret(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ret(e,t,r){return(t=net(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function net(e){var t=aet(e,"string");return typeof t=="symbol"?t:t+""}function aet(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var set=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:s}=e;if(a===!1||t.x==null||t.y==null)return null;var o=hJ(hJ({index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},$n(a,!1)),M7(a)),l;return w.isValidElement(a)?l=w.cloneElement(a,o):typeof a=="function"?l=a(o):l=w.createElement(mT,o),w.createElement(Fa,{className:"recharts-active-dot"},l)};function kR(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,s=fr(Dp),o=tet();if(t==null||o==null)return null;var l=t.find(c=>o.includes(c.payload));return Ka(l)?null:set({point:l,childIndex:Number(s),mainColor:r,dataKey:a,activeDot:n})}function AJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function R_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AJ(Object(r),!0).forEach(function(n){iet(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iet(e,t,r){return(t=oet(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oet(e){var t=cet(e,"string");return typeof t=="symbol"?t:t+""}function cet(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var r0e=(e,t)=>Uy(e,"radiusAxis",t),uet=vt([r0e],e=>{if(e!=null)return{scale:e}}),det=vt([dE,r0e],(e,t)=>{if(!(e==null||t==null))return R_(R_({},e),{},{scale:t})}),fet=(e,t,r,n)=>Hy(e,"radiusAxis",t,n),n0e=(e,t,r)=>By(e,r),a0e=(e,t,r)=>Uy(e,"angleAxis",r),het=vt([n0e,a0e],(e,t)=>{if(!(e==null||t==null))return R_(R_({},e),{},{scale:t})}),Aet=(e,t,r,n)=>Hy(e,"angleAxis",r,n),met=vt([n0e,a0e,Iy],(e,t,r)=>{if(!(r==null||t==null))return{scale:t,type:e.type,dataKey:e.dataKey,cx:r.cx,cy:r.cy}}),pet=(e,t,r,n,a)=>a,get=vt([yn,det,fet,het,Aet],(e,t,r,n,a)=>o0(e,"radiusAxis")?Ux(t,r,!1):Ux(n,a,!1)),xet=vt([h9,pet],(e,t)=>{if(e.some(r=>r.type==="radar"&&t===r.dataKey))return t}),vet=vt([uet,met,eT,xet,get],(e,t,r,n,a)=>{var{chartData:s,dataStartIndex:o,dataEndIndex:l}=r;if(!(e==null||t==null||s==null||a==null||n==null)){var c=s.slice(o,l+1);return _et({radiusAxis:e,angleAxis:t,displayedData:c,dataKey:n,bandSize:a})}}),bet=["id"];function yet(e,t){if(e==null)return{};var r,n,a=wet(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wet(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function mJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mJ(Object(r),!0).forEach(function(n){E9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function E9(e,t,r){return(t=Net(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Net(e){var t=Cet(e,"string");return typeof t=="symbol"?t:t+""}function Cet(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K1(){return K1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},K1.apply(null,arguments)}function j9(e,t){return e&&e!=="none"?e:t}var Eet=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:s,hide:o}=e;return[{inactive:o,dataKey:t,type:s,color:j9(n,a),value:qp(r,t),payload:e}]};function jet(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:o,tooltipType:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,nameKey:void 0,dataKey:t,name:qp(s,t),hide:o,type:l,color:j9(r,a),unit:""}}}function ket(e,t){var r;return w.isValidElement(e)?r=w.cloneElement(e,t):typeof e=="function"?r=e(t):r=w.createElement(mT,K1({},t,{className:mn("recharts-radar-dot",typeof e!="boolean"?e.className:"")})),r}function _et(e){var{radiusAxis:t,angleAxis:r,displayedData:n,dataKey:a,bandSize:s}=e,{cx:o,cy:l}=r,c=!1,u=[],d=r.type!=="number"?s??0:0;n.forEach((A,m)=>{var g=Sa(A,r.dataKey,m),x=Sa(A,a),v=r.scale(g)+d,y=Array.isArray(x)?Fhe(x):x,N=Ka(y)?void 0:t.scale(y);Array.isArray(x)&&x.length>=2&&(c=!0),u.push(tc(tc({},la(o,l,N,v)),{},{name:g,value:x,cx:o,cy:l,radius:N,angle:v,payload:A}))});var f=[];return c&&u.forEach(A=>{if(Array.isArray(A.value)){var m=A.value[0],g=Ka(m)?void 0:t.scale(m);f.push(tc(tc({},A),{},{radius:g},la(o,l,g,A.angle)))}else f.push(A)}),{points:u,isRange:c,baseLinePoints:f}}function Tet(e){var{points:t,props:r}=e,{dot:n,dataKey:a}=r;if(!n)return null;var{id:s}=r,o=yet(r,bet),l=bo(o),c=$n(n,!0),u=t.map((d,f)=>{var A=tc(tc(tc({key:"dot-".concat(f),r:3},l),c),{},{dataKey:a,cx:d.x,cy:d.y,index:f,payload:d});return ket(n,A)});return w.createElement(Fa,{className:"recharts-radar-dots"},u)}function s0e(e){var{points:t,props:r,showLabels:n}=e;if(t==null)return null;var{shape:a,isRange:s,baseLinePoints:o,connectNulls:l}=r,c=f=>{var{onMouseEnter:A}=r;A&&A(r,f)},u=f=>{var{onMouseLeave:A}=r;A&&A(r,f)},d;return w.isValidElement(a)?d=w.cloneElement(a,tc(tc({},r),{},{points:t})):typeof a=="function"?d=a(tc(tc({},r),{},{points:t})):d=w.createElement(Rhe,K1({},$n(r,!0),{onMouseEnter:c,onMouseLeave:u,points:t,baseLinePoints:s?o:null,connectNulls:l})),w.createElement(Fa,{className:"recharts-radar-polygon"},d,w.createElement(Tet,{props:r,points:t}),n&&uA.renderCallByParent(r,t))}function Bet(e){var{props:t,previousPointsRef:r}=e,{points:n,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:l,onAnimationEnd:c,onAnimationStart:u}=t,d=r.current,f=yT(t,"recharts-radar-"),[A,m]=w.useState(!0),g=w.useCallback(()=>{typeof c=="function"&&c(),m(!1)},[c]),x=w.useCallback(()=>{typeof u=="function"&&u(),m(!0)},[u]);return w.createElement(NT,{begin:s,duration:o,isActive:a,easing:l,key:"radar-".concat(f),onAnimationEnd:g,onAnimationStart:x},v=>{var y=d&&d.length/n.length,N=v===1?n:n.map((C,_)=>{var j=d&&d[Math.floor(_*y)];if(j){var I=Db(j.x,C.x),T=Db(j.y,C.y);return tc(tc({},C),{},{x:I(v),y:T(v)})}var k=Db(C.cx,C.x),B=Db(C.cy,C.y);return tc(tc({},C),{},{x:k(v),y:B(v)})});return v>0&&(r.current=N),w.createElement(s0e,{points:N,props:t,showLabels:!A})})}function Iet(e){var{points:t,isAnimationActive:r,isRange:n}=e,a=w.useRef(void 0),s=a.current;return r&&t&&t.length&&!n&&(!s||s!==t)?w.createElement(Bet,{props:e,previousPointsRef:a}):w.createElement(s0e,{points:t,props:e,showLabels:!0})}var Det={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Wp.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"};class Oet extends w.PureComponent{render(){var{hide:t,className:r,points:n}=this.props;if(t)return null;var a=mn("recharts-radar",r);return w.createElement(w.Fragment,null,w.createElement(Fa,{className:a},w.createElement(Iet,this.props)),w.createElement(kR,{points:n,mainColor:j9(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}function Pet(e){var t=Ul(),r=fr(n=>vet(n,e.radiusAxisId,e.angleAxisId,t,e.dataKey));return w.createElement(Oet,K1({},e,{points:r==null?void 0:r.points,baseLinePoints:r==null?void 0:r.baseLinePoints,isRange:r==null?void 0:r.isRange}))}class k9 extends w.PureComponent{render(){return w.createElement(wT,{id:this.props.id,type:"radar"},t=>w.createElement(w.Fragment,null,w.createElement(e0e,{type:"radar",id:t,data:void 0,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:this.props.angleAxisId,radiusAxisId:this.props.radiusAxisId}),w.createElement(Yhe,{legendPayload:Eet(this.props)}),w.createElement(bT,{fn:jet,args:this.props}),w.createElement(Pet,K1({},this.props,{id:t}))))}}E9(k9,"displayName","Radar");E9(k9,"defaultProps",Det);var Fet="Invariant failed";function Ret(e,t){throw new Error(Fet)}var Let=["x","y"];function SR(){return SR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SR.apply(null,arguments)}function pJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pJ(Object(r),!0).forEach(function(n){Met(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Met(e,t,r){return(t=Uet(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uet(e){var t=Het(e,"string");return typeof t=="symbol"?t:t+""}function Het(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qet(e,t){if(e==null)return{};var r,n,a=Vet(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Vet(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function $et(e,t){var{x:r,y:n}=e,a=Qet(e,Let),s="".concat(r),o=parseInt(s,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),A=parseInt(f,10);return Vw(Vw(Vw(Vw(Vw({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:A,name:t.name,radius:t.radius})}function i0e(e){return w.createElement(Khe,SR({shapeType:"rectangle",propTransformer:$et,activeClassName:"recharts-active-bar"},e))}var zet=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(ur(t))return t;var s=ur(n)||Ka(n);return s?t(n,a):(s||Ret(),r)}},Get={},o0e=Ru({name:"errorBars",initialState:Get,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:SSt,removeErrorBar:_St}=o0e.actions,qet=o0e.reducer,Ket=["children"];function Wet(e,t){if(e==null)return{};var r,n,a=Xet(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Xet(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Yet={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Jet=w.createContext(Yet);function Zet(e){var{children:t}=e,r=Wet(e,Ket);return w.createElement(Jet.Provider,{value:r},t)}function S9(e,t){var r,n,a=fr(u=>zA(u,e)),s=fr(u=>Zp(u,t)),o=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Au.allowDataOverflow,l=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:mu.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function l0e(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=C9(),{needClipX:s,needClipY:o,needClip:l}=S9(t,r);if(!l)return null;var{x:c,y:u,width:d,height:f}=a;return w.createElement("clipPath",{id:"clipPath-".concat(n)},w.createElement("rect",{x:s?c:c-d/2,y:o?u:u-f/2,width:s?d:d*2,height:o?f:f*2}))}var ett=["onMouseEnter","onMouseLeave","onClick"],ttt=["value","background","tooltipPosition"],rtt=["id"],ntt=["onMouseEnter","onClick","onMouseLeave"];function W1(){return W1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W1.apply(null,arguments)}function gJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gJ(Object(r),!0).forEach(function(n){att(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function att(e,t,r){return(t=stt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function stt(e){var t=itt(e,"string");return typeof t=="symbol"?t:t+""}function itt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function L_(e,t){if(e==null)return{};var r,n,a=ott(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ott(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ltt=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:qp(r,t),payload:e}]};function ctt(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:o,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:qp(s,t),hide:o,type:e.tooltipType,color:e.fill,unit:l}}}function utt(e){var t=fr(Dp),{data:r,dataKey:n,background:a,allOtherBarProps:s}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=s,u=L_(s,ett),d=b9(o,n),f=y9(l),A=w9(c,n);if(!a||r==null)return null;var m=$n(a,!1);return w.createElement(w.Fragment,null,r.map((g,x)=>{var{value:v,background:y,tooltipPosition:N}=g,C=L_(g,ttt);if(!y)return null;var _=d(g,x),j=f(g,x),I=A(g,x),T=Cl(Cl(Cl(Cl(Cl({option:a,isActive:String(x)===t},C),{},{fill:"#eee"},y),m),ov(u,g,x)),{},{onMouseEnter:_,onMouseLeave:j,onClick:I,dataKey:n,index:x,className:"recharts-bar-background-rectangle"});return w.createElement(i0e,W1({key:"background-bar-".concat(x)},T))}))}function c0e(e){var{data:t,props:r,showLabels:n}=e,a=bo(r),{id:s}=a,o=L_(a,rtt),{shape:l,dataKey:c,activeBar:u}=r,d=fr(Dp),f=fr(vhe),{onMouseEnter:A,onClick:m,onMouseLeave:g}=r,x=L_(r,ntt),v=b9(A,c),y=y9(g),N=w9(m,c);return t?w.createElement(w.Fragment,null,t.map((C,_)=>{var j=u&&String(_)===d&&(f==null||c===f),I=j?u:l,T=Cl(Cl(Cl({},o),C),{},{isActive:j,option:I,index:_,dataKey:c});return w.createElement(Fa,W1({className:"recharts-bar-rectangle"},ov(x,C,_),{onMouseEnter:v(C,_),onMouseLeave:y(C,_),onClick:N(C,_),key:"rectangle-".concat(C==null?void 0:C.x,"-").concat(C==null?void 0:C.y,"-").concat(C==null?void 0:C.value,"-").concat(_)}),w.createElement(i0e,T))}),n&&uA.renderCallByParent(r,t)):null}function dtt(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,A=yT(t,"recharts-bar-"),[m,g]=w.useState(!1),x=w.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),v=w.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return w.createElement(NT,{begin:o,duration:l,isActive:s,easing:c,onAnimationEnd:x,onAnimationStart:v,key:A},y=>{var N=y===1?n:n==null?void 0:n.map((C,_)=>{var j=f&&f[_];if(j)return Cl(Cl({},C),{},{x:bd(j.x,C.x,y),y:bd(j.y,C.y,y),width:bd(j.width,C.width,y),height:bd(j.height,C.height,y)});if(a==="horizontal"){var I=bd(0,C.height,y);return Cl(Cl({},C),{},{y:C.y+C.height-I,height:I})}var T=bd(0,C.width,y);return Cl(Cl({},C),{},{width:T})});return y>0&&(r.current=N??null),N==null?null:w.createElement(Fa,null,w.createElement(c0e,{props:t,data:N,showLabels:!m}))})}function ftt(e){var{data:t,isAnimationActive:r}=e,n=w.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?w.createElement(dtt,{previousRectanglesRef:n,props:e}):w.createElement(c0e,{props:e,data:t,showLabels:!0})}var u0e=0,htt=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Sa(e,t)}};class Att extends w.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:o,needClip:l,background:c,id:u}=this.props;if(t)return null;var d=mn("recharts-bar",a),f=u;return w.createElement(Fa,{className:d,id:u},l&&w.createElement("defs",null,w.createElement(l0e,{clipPathId:f,xAxisId:s,yAxisId:o})),w.createElement(Fa,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},w.createElement(utt,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),w.createElement(ftt,this.props)),this.props.children)}}var mtt={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Wp.isSsr,legendType:"rect",minPointSize:u0e,xAxisId:0,yAxisId:0};function ptt(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=S9(t,r),A=G3(),m=Ul(),g=aE(e.children,kA),x=fr(N=>Vtt(N,t,r,m,e.id,g));if(A!=="vertical"&&A!=="horizontal")return null;var v,y=x==null?void 0:x[0];return y==null||y.height==null||y.width==null?v=0:v=A==="vertical"?y.height/2:y.width/2,w.createElement(Zet,{xAxisId:t,yAxisId:r,data:x,dataPointFormatter:htt,errorBarOffset:v},w.createElement(Att,W1({},e,{layout:A,needClip:f,data:x,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function gtt(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:A,cells:m}=e,g=t==="horizontal"?l:o,x=d?g.scale.domain():null,v=mVe({numericAxis:g});return f.map((y,N)=>{var C,_,j,I,T,k;d?C=uVe(d[N],x):(C=Sa(y,r),Array.isArray(C)||(C=[v,C]));var B=zet(n,u0e)(C[1],N);if(t==="horizontal"){var M,[P,S]=[l.scale(C[0]),l.scale(C[1])];_=UW({axis:o,ticks:c,bandSize:s,offset:a.offset,entry:y,index:N}),j=(M=S??P)!==null&&M!==void 0?M:void 0,I=a.size;var L=P-S;if(T=$c(L)?0:L,k={x:_,y:A.top,width:I,height:A.height},Math.abs(B)>0&&Math.abs(T)<Math.abs(B)){var H=go(T||B)*(Math.abs(B)-Math.abs(T));j-=H,T+=H}}else{var[q,Q]=[o.scale(C[0]),o.scale(C[1])];if(_=q,j=UW({axis:l,ticks:u,bandSize:s,offset:a.offset,entry:y,index:N}),I=Q-q,T=a.size,k={x:A.left,y:j,width:A.width,height:T},Math.abs(B)>0&&Math.abs(I)<Math.abs(B)){var z=go(I||B)*(Math.abs(B)-Math.abs(I));I+=z}}if(_==null||j==null||I==null||T==null)return null;var K=Cl(Cl({},y),{},{x:_,y:j,width:I,height:T,value:d?C:C[1],payload:y,background:k,tooltipPosition:{x:_+I/2,y:j+T/2}},m&&m[N]&&m[N].props);return K}).filter(Boolean)}function jd(e){var t=Gc(e,mtt),r=Ul();return w.createElement(wT,{id:t.id,type:"bar"},n=>w.createElement(w.Fragment,null,w.createElement(Xhe,{legendPayload:ltt(t)}),w.createElement(bT,{fn:ctt,args:t}),w.createElement(Zhe,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:rde(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),w.createElement(ptt,W1({},t,{id:n}))))}jd.displayName="Bar";function xJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Nk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xJ(Object(r),!0).forEach(function(n){xtt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xtt(e,t,r){return(t=vtt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vtt(e){var t=btt(e,"string");return typeof t=="symbol"?t:t+""}function btt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ytt=(e,t)=>t,wtt=(e,t,r)=>r,Ntt=(e,t,r,n)=>n,Ctt=(e,t,r,n,a)=>a,vE=vt([oT,Ctt],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),Ett=vt([vE],e=>e==null?void 0:e.maxBarSize),jtt=(e,t,r,n,a,s)=>s,vJ=(e,t,r)=>{var n=r??e;if(!Ka(n))return ac(n,t,0)},ktt=vt([yn,oT,ytt,wtt,Ntt],(e,t,r,n,a)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Stt=(e,t,r,n)=>{var a=yn(e);return a==="horizontal"?hC(e,"yAxis",r,n):hC(e,"xAxis",t,n)},_tt=(e,t,r)=>{var n=yn(e);return n==="horizontal"?oY(e,"xAxis",t):oY(e,"yAxis",r)},Ttt=(e,t,r)=>{var n={},a=e.filter(iT),s=e.filter(u=>u.stackId==null),o=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(o).map(u=>{var[d,f]=u,A=f.map(g=>g.dataKey),m=vJ(t,r,f[0].barSize);return{stackId:d,dataKeys:A,barSize:m}}),c=s.map(u=>{var d=[u.dataKey].filter(A=>A!=null),f=vJ(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...l,...c]},Btt=vt([ktt,aKe,_tt],Ttt),Itt=(e,t,r,n,a)=>{var s,o,l=vE(e,t,r,n,a);if(l!=null){var c=yn(e),u=bfe(e),{maxBarSize:d}=l,f=Ka(d)?u:d,A,m;return c==="horizontal"?(A=Ip(e,"xAxis",t,n),m=Bp(e,"xAxis",t,n)):(A=Ip(e,"yAxis",r,n),m=Bp(e,"yAxis",r,n)),(s=(o=Ux(A,m,!0))!==null&&o!==void 0?o:f)!==null&&s!==void 0?s:0}},d0e=(e,t,r,n)=>{var a=yn(e),s,o;return a==="horizontal"?(s=Ip(e,"xAxis",t,n),o=Bp(e,"xAxis",t,n)):(s=Ip(e,"yAxis",r,n),o=Bp(e,"yAxis",r,n)),Ux(s,o)};function Dtt(e,t,r,n,a){var s=n.length;if(!(s<1)){var o=ac(e,r,0,!0),l,c=[];if(Wo(n[0].barSize)){var u=!1,d=r/s,f=n.reduce((y,N)=>y+(N.barSize||0),0);f+=(s-1)*o,f>=r&&(f-=(s-1)*o,o=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var A=(r-f)/2>>0,m={offset:A-o,size:0};l=n.reduce((y,N)=>{var C,_={stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:m.offset+m.size+o,size:u?d:(C=N.barSize)!==null&&C!==void 0?C:0}},j=[...y,_];return m=j[j.length-1].position,j},c)}else{var g=ac(t,r,0,!0);r-2*g-(s-1)*o<=0&&(o=0);var x=(r-2*g-(s-1)*o)/s;x>1&&(x>>=0);var v=Wo(a)?Math.min(x,a):x;l=n.reduce((y,N,C)=>[...y,{stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:g+(x+o)*C+(x-v)/2,size:v}}],c)}return l}}var Ott=(e,t,r,n,a,s,o)=>{var l=Ka(o)?t:o,c=Dtt(r,n,a!==s?a:s,e,l);return a!==s&&c!=null&&(c=c.map(u=>Nk(Nk({},u),{},{position:Nk(Nk({},u.position),{},{offset:u.position.offset-a/2})}))),c},Ptt=vt([Btt,bfe,nKe,yfe,Itt,d0e,Ett],Ott),Ftt=(e,t,r,n)=>Ip(e,"xAxis",t,n),Rtt=(e,t,r,n)=>Ip(e,"yAxis",r,n),Ltt=(e,t,r,n)=>Bp(e,"xAxis",t,n),Mtt=(e,t,r,n)=>Bp(e,"yAxis",r,n),Utt=vt([Ptt,vE],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),Htt=(e,t)=>{var r=sT(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:s}=a;if(s)return s.find(o=>o.key===r)}}}},Qtt=vt([Stt,vE],Htt),Vtt=vt([Ki,Ftt,Rtt,Ltt,Mtt,Utt,yn,tT,d0e,Qtt,vE,jtt],(e,t,r,n,a,s,o,l,c,u,d,f)=>{var{chartData:A,dataStartIndex:m,dataEndIndex:g}=l;if(!(d==null||s==null||o!=="horizontal"&&o!=="vertical"||t==null||r==null||n==null||a==null||c==null)){var{data:x}=d,v;if(x!=null&&x.length>0?v=x:v=A==null?void 0:A.slice(m,g+1),v!=null)return gtt({layout:o,barSettings:d,pos:s,bandSize:c,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,stackedData:u,displayedData:v,offset:e,cells:f})}}),f0e=e=>{var{chartData:t}=e,r=ss(),n=Ul();return w.useEffect(()=>n?()=>{}:(r(gY(t)),()=>{r(gY(void 0))}),[t,r,n]),null},bJ={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},h0e=Ru({name:"brush",initialState:bJ,reducers:{setBrushSettings(e,t){return t.payload==null?bJ:t.payload}}}),{setBrushSettings:TSt}=h0e.actions,$tt=h0e.reducer;function ztt(e,t,r){return(t=Gtt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gtt(e){var t=qtt(e,"string");return typeof t=="symbol"?t:t+""}function qtt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class _9{static create(t){return new _9(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}ztt(_9,"EPS",1e-4);function Ktt(e){return(e%180+180)%180}var Wtt=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Ktt(a),o=s*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Xtt={dots:[],areas:[],lines:[]},A0e=Ru({name:"referenceElements",initialState:Xtt,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=lA(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=lA(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=lA(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:BSt,removeDot:ISt,addArea:DSt,removeArea:OSt,addLine:PSt,removeLine:FSt}=A0e.actions,Ytt=A0e.reducer,Jtt=w.createContext(void 0),Ztt=e=>{var{children:t}=e,[r]=w.useState("".concat(sC("recharts"),"-clip")),n=C9();if(n==null)return null;var{x:a,y:s,width:o,height:l}=n;return w.createElement(Jtt.Provider,{value:r},w.createElement("defs",null,w.createElement("clipPath",{id:r},w.createElement("rect",{x:a,y:s,height:l,width:o}))),t)};function rO(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function m0e(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function ert(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Wtt(n,r)}function trt(e,t,r){var n=r==="width",{x:a,y:s,width:o,height:l}=e;return t===1?{start:n?a:s,end:n?a+o:s+l}:{start:n?a+o:s+l,end:n?a:s}}function M_(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function rrt(e,t){return m0e(e,t+1)}function nrt(e,t,r,n,a){for(var s=(n||[]).slice(),{start:o,end:l}=t,c=0,u=1,d=o,f=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:m0e(n,u)};var x=c,v,y=()=>(v===void 0&&(v=r(g,x)),v),N=g.coordinate,C=c===0||M_(e,N,y,d,l);C||(c=0,d=o,u+=1),C&&(d=N+e*(y()/2+a),c+=u)},A;u<=s.length;)if(A=f(),A)return A.v;return[]}function yJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ml(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yJ(Object(r),!0).forEach(function(n){art(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function art(e,t,r){return(t=srt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function srt(e){var t=irt(e,"string");return typeof t=="symbol"?t:t+""}function irt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ort(e,t,r,n,a){for(var s=(n||[]).slice(),o=s.length,{start:l}=t,{end:c}=t,u=function(A){var m=s[A],g,x=()=>(g===void 0&&(g=r(m,A)),g);if(A===o-1){var v=e*(m.coordinate+e*x()/2-c);s[A]=m=ml(ml({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate})}else s[A]=m=ml(ml({},m),{},{tickCoord:m.coordinate});var y=M_(e,m.tickCoord,x,l,c);y&&(c=m.tickCoord-e*(x()/2+a),s[A]=ml(ml({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return s}function lrt(e,t,r,n,a,s){var o=(n||[]).slice(),l=o.length,{start:c,end:u}=t;if(s){var d=n[l-1],f=r(d,l-1),A=e*(d.coordinate+e*f/2-u);o[l-1]=d=ml(ml({},d),{},{tickCoord:A>0?d.coordinate-A*e:d.coordinate});var m=M_(e,d.tickCoord,()=>f,c,u);m&&(u=d.tickCoord-e*(f/2+a),o[l-1]=ml(ml({},d),{},{isShow:!0}))}for(var g=s?l-1:l,x=function(N){var C=o[N],_,j=()=>(_===void 0&&(_=r(C,N)),_);if(N===0){var I=e*(C.coordinate-e*j()/2-c);o[N]=C=ml(ml({},C),{},{tickCoord:I<0?C.coordinate-I*e:C.coordinate})}else o[N]=C=ml(ml({},C),{},{tickCoord:C.coordinate});var T=M_(e,C.tickCoord,j,c,u);T&&(c=C.tickCoord+e*(j()/2+a),o[N]=ml(ml({},C),{},{isShow:!0}))},v=0;v<g;v++)x(v);return o}function T9(e,t,r){var{tick:n,ticks:a,viewBox:s,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!a||!a.length||!n)return[];if(ur(c)||Wp.isSsr){var A;return(A=rrt(a,ur(c)?c:0))!==null&&A!==void 0?A:[]}var m=[],g=l==="top"||l==="bottom"?"width":"height",x=d&&g==="width"?iN(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=(C,_)=>{var j=typeof u=="function"?u(C.value,_):C.value;return g==="width"?ert(iN(j,{fontSize:t,letterSpacing:r}),x,f):iN(j,{fontSize:t,letterSpacing:r})[g]},y=a.length>=2?go(a[1].coordinate-a[0].coordinate):1,N=trt(s,y,g);return c==="equidistantPreserveStart"?nrt(y,N,v,a,o):(c==="preserveStart"||c==="preserveStartEnd"?m=lrt(y,N,v,a,o,c==="preserveStartEnd"):m=ort(y,N,v,a,o),m.filter(C=>C.isShow))}var crt=["viewBox"],urt=["viewBox"];function Fb(){return Fb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fb.apply(null,arguments)}function wJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Hi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wJ(Object(r),!0).forEach(function(n){B9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NJ(e,t){if(e==null)return{};var r,n,a=drt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function drt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function B9(e,t,r){return(t=frt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function frt(e){var t=hrt(e,"string");return typeof t=="symbol"?t:t+""}function hrt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class tg extends w.Component{constructor(t){super(t),this.tickRefs=w.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,a=NJ(t,crt),s=this.props,{viewBox:o}=s,l=NJ(s,urt);return!rO(n,o)||!rO(a,l)||!rO(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:a,height:s,orientation:o,tickSize:l,mirror:c,tickMargin:u}=this.props,d,f,A,m,g,x,v=c?-1:1,y=t.tickSize||l,N=ur(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":d=f=t.coordinate,m=n+ +!c*s,A=m-v*y,x=A-v*u,g=N;break;case"left":A=m=t.coordinate,f=r+ +!c*a,d=f-v*y,g=d-v*u,x=N;break;case"right":A=m=t.coordinate,f=r+ +c*a,d=f+v*y,g=d+v*u,x=N;break;default:d=f=t.coordinate,m=n+ +c*s,A=m+v*y,x=A+v*u,g=N;break}return{line:{x1:d,y1:A,x2:f,y2:m},tick:{x:g,y:x}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:a,orientation:s,mirror:o,axisLine:l}=this.props,c=Hi(Hi(Hi({},$n(this.props,!1)),$n(l,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!o||s==="bottom"&&o);c=Hi(Hi({},c),{},{x1:t,y1:r+u*a,x2:t+n,y2:r+u*a})}else{var d=+(s==="left"&&!o||s==="right"&&o);c=Hi(Hi({},c),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+a})}return w.createElement("line",Fb({},c,{className:mn("recharts-cartesian-axis-line",Tp(l,"className"))}))}static renderTickItem(t,r,n){var a,s=mn(r.className,"recharts-cartesian-axis-tick-value");if(w.isValidElement(t))a=w.cloneElement(t,Hi(Hi({},r),{},{className:s}));else if(typeof t=="function")a=t(Hi(Hi({},r),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=mn(o,t.className)),a=w.createElement(My,Fb({},r,{className:o}),n)}return a}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:s,tick:o,tickFormatter:l,unit:c,padding:u}=this.props,d=T9(Hi(Hi({},this.props),{},{ticks:n}),t,r),f=this.getTickTextAnchor(),A=this.getTickVerticalAnchor(),m=bo(this.props),g=$n(o,!1),x=Hi(Hi({},m),{},{fill:"none"},$n(a,!1)),v=d.map((y,N)=>{var{line:C,tick:_}=this.getTickLineCoord(y),j=Hi(Hi(Hi(Hi({textAnchor:f,verticalAnchor:A},m),{},{stroke:"none",fill:s},g),_),{},{index:N,payload:y,visibleTicksCount:d.length,tickFormatter:l,padding:u});return w.createElement(Fa,Fb({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},ov(this.props,y,N)),a&&w.createElement("line",Fb({},x,C,{className:mn("recharts-cartesian-axis-tick-line",Tp(a,"className"))})),o&&tg.renderTickItem(o,j,"".concat(typeof l=="function"?l(y.value,N):y.value).concat(c||"")))});return v.length>0?w.createElement("g",{className:"recharts-cartesian-axis-ticks"},v):null}render(){var{axisLine:t,width:r,height:n,className:a,hide:s}=this.props;if(s)return null;var{ticks:o}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:w.createElement(Fa,{className:mn("recharts-cartesian-axis",a),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var u=c[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),Bc.renderCallByParent(this.props))}}B9(tg,"displayName","CartesianAxis");B9(tg,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Art=["x1","y1","x2","y2","key"],mrt=["offset"],prt=["xAxisId","yAxisId"],grt=["xAxisId","yAxisId"];function CJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function El(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CJ(Object(r),!0).forEach(function(n){xrt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xrt(e,t,r){return(t=vrt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vrt(e){var t=brt(e,"string");return typeof t=="symbol"?t:t+""}function brt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zg(){return Zg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zg.apply(null,arguments)}function U_(e,t){if(e==null)return{};var r,n,a=yrt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function yrt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var wrt=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:s,height:o,ry:l}=e;return w.createElement("rect",{x:n,y:a,ry:l,width:s,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function p0e(e,t){var r;if(w.isValidElement(e))r=w.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:s,y2:o,key:l}=t,c=U_(t,Art),u=bo(c),{offset:d}=u,f=U_(u,mrt);r=w.createElement("line",Zg({},f,{x1:n,y1:a,x2:s,y2:o,fill:"none",key:l}))}return r}function Nrt(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:o}=e,l=U_(e,prt),c=a.map((u,d)=>{var f=El(El({},l),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return p0e(n,f)});return w.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function Crt(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:o}=e,l=U_(e,grt),c=a.map((u,d)=>{var f=El(El({},l),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return p0e(n,f)});return w.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function Ert(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:s,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=l.map(f=>Math.round(f+a-a)).sort((f,A)=>f-A);a!==u[0]&&u.unshift(0);var d=u.map((f,A)=>{var m=!u[A+1],g=m?a+o-f:u[A+1]-f;if(g<=0)return null;var x=A%t.length;return w.createElement("rect",{key:"react-".concat(A),y:f,x:n,height:g,width:s,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function jrt(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:s,width:o,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+a-a)).sort((f,A)=>f-A);a!==u[0]&&u.unshift(0);var d=u.map((f,A)=>{var m=!u[A+1],g=m?a+o-f:u[A+1]-f;if(g<=0)return null;var x=A%r.length;return w.createElement("rect",{key:"react-".concat(A),x:f,y:s,width:g,height:l,stroke:"none",fill:r[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var krt=(e,t)=>{var{xAxis:r,width:n,height:a,offset:s}=e;return ede(T9(El(El(El({},tg.defaultProps),r),{},{ticks:tde(r),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},Srt=(e,t)=>{var{yAxis:r,width:n,height:a,offset:s}=e;return ede(T9(El(El(El({},tg.defaultProps),r),{},{ticks:tde(r),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},_rt={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function Mh(e){var t=cU(),r=uU(),n=ode(),a=El(El({},Gc(e,_rt)),{},{x:ur(e.x)?e.x:n.left,y:ur(e.y)?e.y:n.top,width:ur(e.width)?e.width:n.width,height:ur(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:o,x:l,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:A,verticalValues:m}=a,g=Ul(),x=fr(B=>lY(B,"xAxis",s,g)),v=fr(B=>lY(B,"yAxis",o,g));if(!ur(u)||u<=0||!ur(d)||d<=0||!ur(l)||l!==+l||!ur(c)||c!==+c)return null;var y=a.verticalCoordinatesGenerator||krt,N=a.horizontalCoordinatesGenerator||Srt,{horizontalPoints:C,verticalPoints:_}=a;if((!C||!C.length)&&typeof N=="function"){var j=A&&A.length,I=N({yAxis:v?El(El({},v),{},{ticks:j?A:v.ticks}):void 0,width:t,height:r,offset:n},j?!0:f);sN(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(C=I)}if((!_||!_.length)&&typeof y=="function"){var T=m&&m.length,k=y({xAxis:x?El(El({},x),{},{ticks:T?m:x.ticks}):void 0,width:t,height:r,offset:n},T?!0:f);sN(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(_=k)}return w.createElement("g",{className:"recharts-cartesian-grid"},w.createElement(wrt,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),w.createElement(Ert,Zg({},a,{horizontalPoints:C})),w.createElement(jrt,Zg({},a,{verticalPoints:_})),w.createElement(Nrt,Zg({},a,{offset:n,horizontalPoints:C,xAxis:x,yAxis:v})),w.createElement(Crt,Zg({},a,{offset:n,verticalPoints:_,xAxis:x,yAxis:v})))}Mh.displayName="CartesianGrid";var g0e=(e,t,r,n)=>Ip(e,"xAxis",t,n),x0e=(e,t,r,n)=>Bp(e,"xAxis",t,n),v0e=(e,t,r,n)=>Ip(e,"yAxis",r,n),b0e=(e,t,r,n)=>Bp(e,"yAxis",r,n),Trt=vt([yn,g0e,v0e,x0e,b0e],(e,t,r,n,a)=>o0(e,"xAxis")?Ux(t,n,!1):Ux(r,a,!1)),Brt=(e,t,r,n,a)=>a,y0e=vt([oT,Brt],(e,t)=>e.filter(r=>r.type==="area").find(r=>r.id===t)),Irt=(e,t,r,n,a)=>{var s,o=y0e(e,t,r,n,a);if(o!=null){var l=yn(e),c=o0(l,"xAxis"),u;if(c?u=hC(e,"yAxis",r,n):u=hC(e,"xAxis",t,n),u!=null){var{stackId:d}=o,f=sT(o);if(!(d==null||f==null)){var A=(s=u[d])===null||s===void 0?void 0:s.stackedData;return A==null?void 0:A.find(m=>m.key===f)}}}},Drt=vt([yn,g0e,v0e,x0e,b0e,Irt,tT,Trt,y0e],(e,t,r,n,a,s,o,l,c)=>{var{chartData:u,dataStartIndex:d,dataEndIndex:f}=o;if(!(c==null||e!=="horizontal"&&e!=="vertical"||t==null||r==null||n==null||a==null||n.length===0||a.length===0||l==null)){var{data:A}=c,m;if(A&&A.length>0?m=A:m=u==null?void 0:u.slice(d,f+1),m!=null){var g=void 0;return Zrt({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataStartIndex:d,areaSettings:c,stackedData:s,displayedData:m,chartBaseValue:g,bandSize:l})}}}),Ort=["id"],Prt=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function w0e(e,t){if(e==null)return{};var r,n,a=Frt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Frt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function EJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ex(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EJ(Object(r),!0).forEach(function(n){Rrt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rrt(e,t,r){return(t=Lrt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lrt(e){var t=Mrt(e,"string");return typeof t=="symbol"?t:t+""}function Mrt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dA(){return dA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dA.apply(null,arguments)}function H_(e,t){return e&&e!=="none"?e:t}var Urt=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:s,hide:o}=e;return[{inactive:o,dataKey:t,type:s,color:H_(n,a),value:qp(r,t),payload:e}]};function Hrt(e){var{dataKey:t,data:r,stroke:n,strokeWidth:a,fill:s,name:o,hide:l,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:s,dataKey:t,nameKey:void 0,name:qp(o,t),hide:l,type:e.tooltipType,color:H_(n,s),unit:c}}}var Qrt=(e,t)=>{var r;if(w.isValidElement(e))r=w.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=mn("recharts-area-dot",typeof e!="boolean"?e.className:"");r=w.createElement(mT,dA({},t,{className:n}))}return r};function Vrt(e,t){return e==null?!1:t?!0:e.length===1}function $rt(e){var{clipPathId:t,points:r,props:n}=e,{needClip:a,dot:s,dataKey:o}=n;if(!Vrt(r,s))return null;var l=Xce(s),c=bo(n),u=$n(s,!0),d=r.map((A,m)=>{var g=ex(ex(ex({key:"dot-".concat(m),r:3},c),u),{},{index:m,cx:A.x,cy:A.y,dataKey:o,value:A.value,payload:A.payload,points:r});return Qrt(s,g)}),f={clipPath:a?"url(#clipPath-".concat(l?"":"dots-").concat(t,")"):void 0};return w.createElement(Fa,dA({className:"recharts-area-dots"},f),d)}function _R(e){var{points:t,baseLine:r,needClip:n,clipPathId:a,props:s,showLabels:o}=e,{layout:l,type:c,stroke:u,connectNulls:d,isRange:f}=s,{id:A}=s,m=w0e(s,Ort),g=bo(m);return w.createElement(w.Fragment,null,(t==null?void 0:t.length)>1&&w.createElement(Fa,{clipPath:n?"url(#clipPath-".concat(a,")"):void 0},w.createElement(aN,dA({},g,{id:A,points:t,connectNulls:d,type:c,baseLine:r,layout:l,stroke:"none",className:"recharts-area-area"})),u!=="none"&&w.createElement(aN,dA({},g,{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:t})),u!=="none"&&f&&w.createElement(aN,dA({},g,{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:r}))),w.createElement($rt,{points:t,props:m,clipPathId:a}),o&&uA.renderCallByParent(m,t))}function zrt(e){var{alpha:t,baseLine:r,points:n,strokeWidth:a}=e,s=n[0].y,o=n[n.length-1].y;if(!Wo(s)||!Wo(o))return null;var l=t*Math.abs(s-o),c=Math.max(...n.map(u=>u.x||0));return ur(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(u=>u.x||0),c)),ur(c)?w.createElement("rect",{x:0,y:s<o?s:s-l,width:c+(a?parseInt("".concat(a),10):1),height:Math.floor(l)}):null}function Grt(e){var{alpha:t,baseLine:r,points:n,strokeWidth:a}=e,s=n[0].x,o=n[n.length-1].x;if(!Wo(s)||!Wo(o))return null;var l=t*Math.abs(s-o),c=Math.max(...n.map(u=>u.y||0));return ur(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(u=>u.y||0),c)),ur(c)?w.createElement("rect",{x:s<o?s:s-l,y:0,width:l,height:Math.floor(c+(a?parseInt("".concat(a),10):1))}):null}function qrt(e){var{alpha:t,layout:r,points:n,baseLine:a,strokeWidth:s}=e;return r==="vertical"?w.createElement(zrt,{alpha:t,points:n,baseLine:a,strokeWidth:s}):w.createElement(Grt,{alpha:t,points:n,baseLine:a,strokeWidth:s})}function Krt(e){var{needClip:t,clipPathId:r,props:n,previousPointsRef:a,previousBaselineRef:s}=e,{points:o,baseLine:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:f,onAnimationStart:A,onAnimationEnd:m}=n,g=yT(n,"recharts-area-"),[x,v]=w.useState(!0),y=w.useCallback(()=>{typeof m=="function"&&m(),v(!1)},[m]),N=w.useCallback(()=>{typeof A=="function"&&A(),v(!0)},[A]),C=a.current,_=s.current;return w.createElement(NT,{begin:u,duration:d,isActive:c,easing:f,onAnimationEnd:y,onAnimationStart:N,key:g},j=>{if(C){var I=C.length/o.length,T=j===1?o:o.map((B,M)=>{var P=Math.floor(M*I);if(C[P]){var S=C[P];return ex(ex({},B),{},{x:bd(S.x,B.x,j),y:bd(S.y,B.y,j)})}return B}),k;return ur(l)?k=bd(_,l,j):Ka(l)||$c(l)?k=bd(_,0,j):k=l.map((B,M)=>{var P=Math.floor(M*I);if(Array.isArray(_)&&_[P]){var S=_[P];return ex(ex({},B),{},{x:bd(S.x,B.x,j),y:bd(S.y,B.y,j)})}return B}),j>0&&(a.current=T,s.current=k),w.createElement(_R,{points:T,baseLine:k,needClip:t,clipPathId:r,props:n,showLabels:!x})}return j>0&&(a.current=o,s.current=l),w.createElement(Fa,null,w.createElement("defs",null,w.createElement("clipPath",{id:"animationClipPath-".concat(r)},w.createElement(qrt,{alpha:j,points:o,baseLine:l,layout:n.layout,strokeWidth:n.strokeWidth}))),w.createElement(Fa,{clipPath:"url(#animationClipPath-".concat(r,")")},w.createElement(_R,{points:o,baseLine:l,needClip:t,clipPathId:r,props:n,showLabels:!0})))})}function Wrt(e){var{needClip:t,clipPathId:r,props:n}=e,{points:a,baseLine:s,isAnimationActive:o}=n,l=w.useRef(null),c=w.useRef(),u=l.current,d=c.current;return o&&a&&a.length&&(u!==a||d!==s)?w.createElement(Krt,{needClip:t,clipPathId:r,props:n,previousPointsRef:l,previousBaselineRef:c}):w.createElement(_R,{points:a,baseLine:s,needClip:t,clipPathId:r,props:n,showLabels:!0})}class Xrt extends w.PureComponent{render(){var t,{hide:r,dot:n,points:a,className:s,top:o,left:l,needClip:c,xAxisId:u,yAxisId:d,width:f,height:A,id:m,baseLine:g}=this.props;if(r)return null;var x=mn("recharts-area",s),v=m,{r:y=3,strokeWidth:N=2}=(t=$n(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},C=Xce(n),_=y*2+N;return w.createElement(w.Fragment,null,w.createElement(Fa,{className:x},c&&w.createElement("defs",null,w.createElement(l0e,{clipPathId:v,xAxisId:u,yAxisId:d}),!C&&w.createElement("clipPath",{id:"clipPath-dots-".concat(v)},w.createElement("rect",{x:l-_/2,y:o-_/2,width:f+_,height:A+_}))),w.createElement(Wrt,{needClip:c,clipPathId:v,props:this.props})),w.createElement(kR,{points:a,mainColor:H_(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(g)&&w.createElement(kR,{points:g,mainColor:H_(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var N0e={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!Wp.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function Yrt(e){var t,r=Gc(e,N0e),{activeDot:n,animationBegin:a,animationDuration:s,animationEasing:o,connectNulls:l,dot:c,fill:u,fillOpacity:d,hide:f,isAnimationActive:A,legendType:m,stroke:g,xAxisId:x,yAxisId:v}=r,y=w0e(r,Prt),N=G3(),C=yhe(),{needClip:_}=S9(x,v),j=Ul(),{points:I,isRange:T,baseLine:k}=(t=fr(H=>Drt(H,x,v,j,e.id)))!==null&&t!==void 0?t:{},B=C9();if(N!=="horizontal"&&N!=="vertical"||B==null||C!=="AreaChart"&&C!=="ComposedChart")return null;var{height:M,width:P,x:S,y:L}=B;return!I||!I.length?null:w.createElement(Xrt,dA({},y,{activeDot:n,animationBegin:a,animationDuration:s,animationEasing:o,baseLine:k,connectNulls:l,dot:c,fill:u,fillOpacity:d,height:M,hide:f,layout:N,isAnimationActive:A,isRange:T,legendType:m,needClip:_,points:I,stroke:g,width:P,left:S,top:L,xAxisId:x,yAxisId:v}))}var Jrt=(e,t,r,n,a)=>{var s=r??t;if(ur(s))return s;var o=e==="horizontal"?a:n,l=o.scale.domain();if(o.type==="number"){var c=Math.max(l[0],l[1]),u=Math.min(l[0],l[1]);return s==="dataMin"?u:s==="dataMax"||c<0?c:Math.max(Math.min(l[0],l[1]),0)}return s==="dataMin"?l[0]:s==="dataMax"?l[1]:l[0]};function Zrt(e){var{areaSettings:{connectNulls:t,baseValue:r,dataKey:n},stackedData:a,layout:s,chartBaseValue:o,xAxis:l,yAxis:c,displayedData:u,dataStartIndex:d,xAxisTicks:f,yAxisTicks:A,bandSize:m}=e,g=a&&a.length,x=Jrt(s,o,r,l,c),v=s==="horizontal",y=!1,N=u.map((_,j)=>{var I;g?I=a[d+j]:(I=Sa(_,n),Array.isArray(I)?y=!0:I=[x,I]);var T=I[1]==null||g&&!t&&Sa(_,n)==null;return v?{x:MW({axis:l,ticks:f,bandSize:m,entry:_,index:j}),y:T?null:c.scale(I[1]),value:I,payload:_}:{x:T?null:l.scale(I[1]),y:MW({axis:c,ticks:A,bandSize:m,entry:_,index:j}),value:I,payload:_}}),C;return g||y?C=N.map(_=>{var j=Array.isArray(_.value)?_.value[0]:null;return v?{x:_.x,y:j!=null&&_.y!=null?c.scale(j):null,payload:_.payload}:{x:j!=null?l.scale(j):null,y:_.y,payload:_.payload}}):C=v?c.scale(x):l.scale(x),{points:N,baseLine:C,isRange:y}}function C0e(e){var t=Gc(e,N0e),r=Ul();return w.createElement(wT,{id:t.id,type:"area"},n=>w.createElement(w.Fragment,null,w.createElement(Xhe,{legendPayload:Urt(t)}),w.createElement(bT,{fn:Hrt,args:t}),w.createElement(Zhe,{type:"area",id:n,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:rde(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:r,connectNulls:t.connectNulls}),w.createElement(Yrt,dA({},t,{id:n}))))}C0e.displayName="Area";function jJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function kJ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jJ(Object(r),!0).forEach(function(n){ent(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ent(e,t,r){return(t=tnt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tnt(e){var t=rnt(e,"string");return typeof t=="symbol"?t:t+""}function rnt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nnt={xAxis:{},yAxis:{},zAxis:{}},E0e=Ru({name:"cartesianAxis",initialState:nnt,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=kJ(kJ({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:ant,removeXAxis:snt,addYAxis:int,removeYAxis:ont,addZAxis:RSt,removeZAxis:LSt,updateYAxisWidth:lnt}=E0e.actions,cnt=E0e.reducer,unt=["children"],dnt=["dangerouslySetInnerHTML","ticks"];function j0e(e,t,r){return(t=fnt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fnt(e){var t=hnt(e,"string");return typeof t=="symbol"?t:t+""}function hnt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TR(){return TR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},TR.apply(null,arguments)}function k0e(e,t){if(e==null)return{};var r,n,a=Ant(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ant(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function mnt(e){var t=ss(),r=w.useMemo(()=>{var{children:s}=e,o=k0e(e,unt);return o},[e]),n=fr(s=>zA(s,r.id)),a=r===n;return w.useEffect(()=>(t(ant(r)),()=>{t(snt(r))}),[r,t]),a?e.children:null}var pnt=e=>{var{xAxisId:t,className:r}=e,n=fr(ide),a=Ul(),s="xAxis",o=fr(m=>Fy(m,s,t,a)),l=fr(m=>Zfe(m,s,t,a)),c=fr(m=>Wfe(m,t)),u=fr(m=>XKe(m,t));if(c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f}=e,A=k0e(e,dnt);return w.createElement(tg,TR({},A,{scale:o,x:u.x,y:u.y,width:c.width,height:c.height,className:mn("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:l}))},gnt=e=>{var t,r,n,a,s;return w.createElement(mnt,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},w.createElement(pnt,e))};class Rc extends w.Component{render(){return w.createElement(gnt,this.props)}}j0e(Rc,"displayName","XAxis");j0e(Rc,"defaultProps",{allowDataOverflow:Au.allowDataOverflow,allowDecimals:Au.allowDecimals,allowDuplicatedCategory:Au.allowDuplicatedCategory,height:Au.height,hide:!1,mirror:Au.mirror,orientation:Au.orientation,padding:Au.padding,reversed:Au.reversed,scale:Au.scale,tickCount:Au.tickCount,type:Au.type,xAxisId:0});var xnt=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=e,o=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=r?r.getBoundingClientRect().width:0,c=a+s,u=o+c+l+(r?n:0);return Math.round(u)}return 0},vnt=["dangerouslySetInnerHTML","ticks"];function S0e(e,t,r){return(t=bnt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bnt(e){var t=ynt(e,"string");return typeof t=="symbol"?t:t+""}function ynt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BR(){return BR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BR.apply(null,arguments)}function wnt(e,t){if(e==null)return{};var r,n,a=Nnt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Nnt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Cnt(e){var t=ss();return w.useEffect(()=>(t(int(e)),()=>{t(ont(e))}),[e,t]),null}var Ent=e=>{var t,{yAxisId:r,className:n,width:a,label:s}=e,o=w.useRef(null),l=w.useRef(null),c=fr(ide),u=Ul(),d=ss(),f="yAxis",A=fr(C=>Fy(C,f,r,u)),m=fr(C=>Xfe(C,r)),g=fr(C=>YKe(C,r)),x=fr(C=>Zfe(C,f,r,u));if(w.useLayoutEffect(()=>{var C;if(!(a!=="auto"||!m||f9(s)||w.isValidElement(s))){var _=o.current,j=_==null||(C=_.tickRefs)===null||C===void 0?void 0:C.current,{tickSize:I,tickMargin:T}=_.props,k=xnt({ticks:j,label:l.current,labelGapWithTick:5,tickSize:I,tickMargin:T});Math.round(m.width)!==Math.round(k)&&d(lnt({id:r,width:k}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,m==null?void 0:m.width,m,d,s,r,a]),m==null||g==null)return null;var{dangerouslySetInnerHTML:v,ticks:y}=e,N=wnt(e,vnt);return w.createElement(tg,BR({},N,{ref:o,labelRef:l,scale:A,x:g.x,y:g.y,width:m.width,height:m.height,className:mn("recharts-".concat(f," ").concat(f),n),viewBox:c,ticks:x}))},jnt=e=>{var t,r,n,a,s;return w.createElement(w.Fragment,null,w.createElement(Cnt,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),w.createElement(Ent,e))},knt={allowDataOverflow:mu.allowDataOverflow,allowDecimals:mu.allowDecimals,allowDuplicatedCategory:mu.allowDuplicatedCategory,hide:!1,mirror:mu.mirror,orientation:mu.orientation,padding:mu.padding,reversed:mu.reversed,scale:mu.scale,tickCount:mu.tickCount,type:mu.type,width:mu.width,yAxisId:0};class Lc extends w.Component{render(){return w.createElement(jnt,this.props)}}S0e(Lc,"displayName","YAxis");S0e(Lc,"defaultProps",knt);var nO={exports:{}},aO={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SJ;function Snt(){if(SJ)return aO;SJ=1;var e=ly();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,s=e.useEffect,o=e.useMemo,l=e.useDebugValue;return aO.useSyncExternalStoreWithSelector=function(c,u,d,f,A){var m=a(null);if(m.current===null){var g={hasValue:!1,value:null};m.current=g}else g=m.current;m=o(function(){function v(j){if(!y){if(y=!0,N=j,j=f(j),A!==void 0&&g.hasValue){var I=g.value;if(A(I,j))return C=I}return C=j}if(I=C,r(N,j))return I;var T=f(j);return A!==void 0&&A(I,T)?(N=j,I):(N=j,C=T)}var y=!1,N,C,_=d===void 0?null:d;return[function(){return v(u())},_===null?void 0:function(){return v(_())}]},[u,d,f,A]);var x=n(c,m[0],m[1]);return s(function(){g.hasValue=!0,g.value=x},[x]),l(x),x},aO}var _J;function _nt(){return _J||(_J=1,nO.exports=Snt()),nO.exports}_nt();function Tnt(e){e()}function Bnt(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Tnt(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var TJ={notify(){},get:()=>[]};function Int(e,t){let r,n=TJ,a=0,s=!1;function o(x){d();const v=n.subscribe(x);let y=!1;return()=>{y||(y=!0,v(),f())}}function l(){n.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return s}function d(){a++,r||(r=e.subscribe(c),n=Bnt())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=TJ)}function A(){s||(s=!0,d())}function m(){s&&(s=!1,f())}const g={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:A,tryUnsubscribe:m,getListeners:()=>n};return g}var Dnt=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ont=Dnt(),Pnt=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Fnt=Pnt(),Rnt=()=>Ont||Fnt?w.useLayoutEffect:w.useEffect,Lnt=Rnt(),sO=Symbol.for("react-redux-context"),iO=typeof globalThis<"u"?globalThis:{};function Mnt(){if(!w.createContext)return{};const e=iO[sO]??(iO[sO]=new Map);let t=e.get(w.createContext);return t||(t=w.createContext(null),e.set(w.createContext,t)),t}var Unt=Mnt();function Hnt(e){const{children:t,context:r,serverState:n,store:a}=e,s=w.useMemo(()=>{const c=Int(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),o=w.useMemo(()=>a.getState(),[a]);Lnt(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,o]);const l=r||Unt;return w.createElement(l.Provider,{value:s},t)}var Qnt=Hnt,Vnt=(e,t)=>t,I9=vt([Vnt,yn,Iy,Xi,mhe,GA,ZWe,Ki],aXe),D9=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},_0e=Id("mouseClick"),T0e=sE();T0e.startListening({actionCreator:_0e,effect:(e,t)=>{var r=e.payload,n=I9(t.getState(),D9(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(lWe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var IR=Id("mouseMove"),B0e=sE();B0e.startListening({actionCreator:IR,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=n9(n,n.tooltip.settings.shared),s=I9(n,D9(r));a==="axis"&&((s==null?void 0:s.activeIndex)!=null?t.dispatch(lhe({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(ohe()))}});function $nt(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var BJ={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},I0e=Ru({name:"rootProps",initialState:BJ,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:BJ.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),znt=I0e.reducer,{updateOptions:Gnt}=I0e.actions,D0e=Ru({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:qnt}=D0e.actions,Knt=D0e.reducer,O0e=Id("keyDown"),P0e=Id("focus"),O9=sE();O9.startListening({actionCreator:O0e,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=Number(a9(a,Ly(r))),l=GA(r);if(s==="Enter"){var c=D_(r,"axis","hover",String(a.index));t.dispatch(wR({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:c}));return}var u=ZKe(r),d=u==="left-to-right"?1:-1,f=s==="ArrowRight"?1:-1,A=o+f*d;if(!(l==null||A>=l.length||A<0)){var m=D_(r,"axis","hover",String(A));t.dispatch(wR({active:!0,activeIndex:A.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});O9.startListening({actionCreator:P0e,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",o=D_(r,"axis","hover",String(s));t.dispatch(wR({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:o}))}}}});var md=Id("externalEvent"),F0e=sE();F0e.startListening({actionCreator:md,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:$We(r),activeDataKey:vhe(r),activeIndex:Dp(r),activeLabel:xhe(r),activeTooltipIndex:Dp(r),isTooltipActive:zWe(r)};e.payload.handler(n,e.payload.reactEvent)}}});var Wnt=vt([Ry],e=>e.tooltipItemPayloads),Xnt=vt([Wnt,pE,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(l=>l.settings.dataKey===n);if(a!=null){var{positions:s}=a;if(s!=null){var o=t(s,r);return o}}}),R0e=Id("touchMove"),L0e=sE();L0e.startListening({actionCreator:R0e,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=n9(n,n.tooltip.settings.shared);if(a==="axis"){var s=I9(n,D9({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(lhe({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(a==="item"){var o,l=r.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(ade),d=(o=c.getAttribute(sde))!==null&&o!==void 0?o:void 0,f=Xnt(t.getState(),u,d);t.dispatch(ihe({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var Ynt=Sue({brush:$tt,cartesianAxis:cnt,chartData:bXe,errorBars:qet,graphicalItems:SZe,layout:KQe,legend:OVe,options:mXe,polarAxis:NJe,polarOptions:Knt,referenceElements:Ytt,rootProps:znt,tooltip:cWe}),Jnt=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return vQe({reducer:Ynt,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([T0e.middleware,B0e.middleware,O9.middleware,F0e.middleware,L0e.middleware]),devTools:{serialize:{replacer:$nt},name:"recharts-".concat(r)}})};function M0e(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=Ul(),s=w.useRef(null);if(a)return r;s.current==null&&(s.current=Jnt(t,n));var o=eU;return w.createElement(Qnt,{context:o,store:s.current},r)}function U0e(e){var{layout:t,width:r,height:n,margin:a}=e,s=ss(),o=Ul();return w.useEffect(()=>{o||(s(zQe(t)),s(GQe({width:r,height:n})),s($Qe(a)))},[s,o,t,r,n,a]),null}function H0e(e){var t=ss();return w.useEffect(()=>{t(Gnt(e))},[t,e]),null}var Znt=["children"];function eat(e,t){if(e==null)return{};var r,n,a=tat(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function tat(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Q_(){return Q_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q_.apply(null,arguments)}var rat={width:"100%",height:"100%"},nat=w.forwardRef((e,t)=>{var r=cU(),n=uU(),a=dde();if(!Q1(r)||!Q1(n))return null;var{children:s,otherAttributes:o,title:l,desc:c}=e,u,d;return typeof o.tabIndex=="number"?u=o.tabIndex:u=a?0:void 0,typeof o.role=="string"?d=o.role:d=a?"application":void 0,w.createElement(U7,Q_({},o,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:rat,ref:t}),s)}),aat=e=>{var{children:t}=e,r=fr(z3);if(!r)return null;var{width:n,height:a,y:s,x:o}=r;return w.createElement(U7,{width:n,height:a,x:o,y:s},t)},IJ=w.forwardRef((e,t)=>{var{children:r}=e,n=eat(e,Znt),a=Ul();return a?w.createElement(aat,null,r):w.createElement(nat,Q_({ref:t},n),r)});function sat(){var e=ss(),[t,r]=w.useState(null),n=fr(wVe);return w.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),s=a.width/t.offsetWidth;Wo(s)&&s!==n&&e(qQe(s))}},[t,e,n]),r}function DJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function iat(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DJ(Object(r),!0).forEach(function(n){oat(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oat(e,t,r){return(t=lat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lat(e){var t=cat(e,"string");return typeof t=="symbol"?t:t+""}function cat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uat=w.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:A,onTouchEnd:m,onTouchMove:g,onTouchStart:x,style:v,width:y}=e,N=ss(),[C,_]=w.useState(null),[j,I]=w.useState(null);NXe();var T=sat(),k=w.useCallback(R=>{T(R),typeof t=="function"&&t(R),_(R),I(R)},[T,t,_,I]),B=w.useCallback(R=>{N(_0e(R)),N(md({handler:s,reactEvent:R}))},[N,s]),M=w.useCallback(R=>{N(IR(R)),N(md({handler:u,reactEvent:R}))},[N,u]),P=w.useCallback(R=>{N(ohe()),N(md({handler:d,reactEvent:R}))},[N,d]),S=w.useCallback(R=>{N(IR(R)),N(md({handler:f,reactEvent:R}))},[N,f]),L=w.useCallback(()=>{N(P0e())},[N]),H=w.useCallback(R=>{N(O0e(R.key))},[N]),q=w.useCallback(R=>{N(md({handler:o,reactEvent:R}))},[N,o]),Q=w.useCallback(R=>{N(md({handler:l,reactEvent:R}))},[N,l]),z=w.useCallback(R=>{N(md({handler:c,reactEvent:R}))},[N,c]),K=w.useCallback(R=>{N(md({handler:A,reactEvent:R}))},[N,A]),Z=w.useCallback(R=>{N(md({handler:x,reactEvent:R}))},[N,x]),U=w.useCallback(R=>{N(R0e(R)),N(md({handler:g,reactEvent:R}))},[N,g]),Y=w.useCallback(R=>{N(md({handler:m,reactEvent:R}))},[N,m]);return w.createElement(jhe.Provider,{value:C},w.createElement(Yce.Provider,{value:j},w.createElement("div",{className:mn("recharts-wrapper",n),style:iat({position:"relative",cursor:"default",width:y,height:a},v),onClick:B,onContextMenu:q,onDoubleClick:Q,onFocus:L,onKeyDown:H,onMouseDown:z,onMouseEnter:M,onMouseLeave:P,onMouseMove:S,onMouseUp:K,onTouchEnd:Y,onTouchMove:U,onTouchStart:Z,ref:k},r)))}),dat=["children","className","width","height","style","compact","title","desc"];function fat(e,t){if(e==null)return{};var r,n,a=hat(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function hat(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Q0e=w.forwardRef((e,t)=>{var{children:r,className:n,width:a,height:s,style:o,compact:l,title:c,desc:u}=e,d=fat(e,dat),f=bo(d);return l?w.createElement(IJ,{otherAttributes:f,title:c,desc:u},r):w.createElement(uat,{className:n,style:o,width:a,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},w.createElement(IJ,{otherAttributes:f,title:c,desc:u,ref:t},w.createElement(Ztt,null,r)))}),Aat=["width","height"];function DR(){return DR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DR.apply(null,arguments)}function mat(e,t){if(e==null)return{};var r,n,a=pat(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pat(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var gat={top:5,right:5,bottom:5,left:5},xat={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:gat,reverseStackOrder:!1,syncMethod:"index"},V0e=w.forwardRef(function(t,r){var n,a=Gc(t.categoricalChartProps,xat),{width:s,height:o}=a,l=mat(a,Aat);if(!Q1(s)||!Q1(o))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:A}=t,m={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return w.createElement(M0e,{preloadedState:{options:m},reduxStoreName:(n=A.id)!==null&&n!==void 0?n:c},w.createElement(f0e,{chartData:A.data}),w.createElement(U0e,{width:s,height:o,layout:a.layout,margin:a.margin}),w.createElement(H0e,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),w.createElement(Q0e,DR({},l,{width:s,height:o,ref:r})))}),vat=["axis","item"],Nf=w.forwardRef((e,t)=>w.createElement(V0e,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:vat,tooltipPayloadSearcher:AT,categoricalChartProps:e,ref:t}));function bat(e){var t=ss();return w.useEffect(()=>{t(qnt(e))},[t,e]),null}var yat=["width","height","layout"];function OR(){return OR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},OR.apply(null,arguments)}function wat(e,t){if(e==null)return{};var r,n,a=Nat(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Nat(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Cat={top:5,right:5,bottom:5,left:5},Eat={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Cat,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},$0e=w.forwardRef(function(t,r){var n,a=Gc(t.categoricalChartProps,Eat),{width:s,height:o,layout:l}=a,c=wat(a,yat);if(!Q1(s)||!Q1(o))return null;var{chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:A}=t,m={chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:A,eventEmitter:void 0};return w.createElement(M0e,{preloadedState:{options:m},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:u},w.createElement(f0e,{chartData:a.data}),w.createElement(U0e,{width:s,height:o,layout:l,margin:a.margin}),w.createElement(H0e,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),w.createElement(bat,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),w.createElement(Q0e,OR({width:s,height:o},c,{ref:r})))}),jat=["item"],kat={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},CT=w.forwardRef((e,t)=>{var r=Gc(e,kat);return w.createElement($0e,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:jat,tooltipPayloadSearcher:AT,categoricalChartProps:r,ref:t})}),Sat=["axis"],_at={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Tat=w.forwardRef((e,t)=>{var r=Gc(e,_at);return w.createElement($0e,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Sat,tooltipPayloadSearcher:AT,categoricalChartProps:r,ref:t})}),Bat=["axis"],Iat=w.forwardRef((e,t)=>w.createElement(V0e,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Bat,tooltipPayloadSearcher:AT,categoricalChartProps:e,ref:t}));const Bm=["#0ea5e9","#22c55e","#f59e0b","#ef4444","#8b5cf6","#14b8a6","#a3e635","#f472b6"],OJ={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",dimension:"",subdimension:"",descripcion:"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:"",estado:"Pendiente",avance:0,enlaces:[]},$w="rounded-2xl border border-slate-100 dark:border-slate-800 bg-white/80 dark:bg-slate-900/60 shadow-sm backdrop-blur",Do="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-fuchsia-500/70 focus:border-fuchsia-500/70 transition",uu="block text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-400 mb-2",oO="inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition",lO="bg-gradient-to-r from-fuchsia-600 to-rose-500 text-white shadow-sm",cO="bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200 hover:bg-slate-200/80 dark:hover:bg-slate-700",Ck="rounded-2xl p-5 text-white shadow-md bg-gradient-to-br",Dat="from-sky-500 to-indigo-500",Oat="from-emerald-500 to-lime-500",Pat="from-amber-500 to-rose-500",Fat="from-fuchsia-500 to-purple-600",uO={Pendiente:{badge:"bg-rose-50 text-rose-700 ring-1 ring-rose-200 dark:bg-rose-900/30 dark:text-rose-200 dark:ring-rose-800",icon:Uc,dot:"bg-rose-500"},"En Proceso":{badge:"bg-amber-50 text-amber-700 ring-1 ring-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:ring-amber-800",icon:foe,dot:"bg-amber-500"},Cumplida:{badge:"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-200 dark:ring-emerald-800",icon:pa,dot:"bg-emerald-500"}},Rat=e=>{const t=uO[e].icon;return i.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold ${uO[e].badge}`,children:[i.jsx("span",{className:`h-2 w-2 rounded-full ${uO[e].dot}`}),i.jsx(t,{className:"h-4 w-4"})," ",e]})},Lat=()=>{var Z,U;const[e,t]=w.useState("registro"),[r,n]=w.useState([]),[a,s]=w.useState(OJ),[o,l]=w.useState(null),[c,u]=w.useState(null),[d,f]=w.useState(!1),[A,m]=w.useState(""),[g,x]=w.useState(""),[v,y]=w.useState(""),[N,C]=w.useState(""),_=w.useMemo(()=>G0[a.dimension]??[],[a.dimension]),j=w.useCallback(async()=>{f(!0);try{const Y=await zUe();n(Y)}catch(Y){console.error(Y),u("No se pudieron cargar las acciones.")}finally{f(!1)}},[]);w.useEffect(()=>{j()},[j]);const I=Y=>{const{name:R,value:D}=Y.target;s(W=>({...W,[R]:D}))},T=Y=>{const R=Y.split(",").map(D=>D.trim()).filter(Boolean);s(D=>({...D,indicadores:R}))},k=Y=>{const R=Y.split(",").map(D=>D.trim()).filter(Boolean);s(D=>({...D,enlaces:R}))},B=()=>{s(OJ),l(null),u(null)},M=async Y=>{if(Y.preventDefault(),!a.responsable||!a.dimension||!a.subdimension||!a.descripcion||!a.fechaCumplimiento){u("Responsable, dimensin, subdimensin, descripcin y fecha de cumplimiento son obligatorios.");return}try{o?await qUe(o,a):await GUe(a),await j(),B(),t("seguimiento")}catch(R){console.error(R),u("Error al guardar la accin.")}},P=Y=>{l(Y.id),s({...Y,enlaces:Y.enlaces??[],indicadores:Y.indicadores??[]}),window.scrollTo({top:0,behavior:"smooth"}),t("registro")},S=async Y=>{confirm("Eliminar esta accin?")&&(await KUe(Y),await j())},L=w.useMemo(()=>r.filter(Y=>{const R=!A||Y.responsable.toLowerCase().includes(A.toLowerCase())||Y.descripcion.toLowerCase().includes(A.toLowerCase())||Y.subdimension.toLowerCase().includes(A.toLowerCase()),D=!g||Y.dimension===g,W=!v||Y.subdimension===v,J=!N||Y.estado===N;return R&&D&&W&&J}),[r,A,g,v,N]),H=w.useMemo(()=>{const Y=new Map;return r.forEach(R=>Y.set(R.dimension,(Y.get(R.dimension)??0)+1)),Array.from(Y.entries()).map(([R,D])=>({name:R,value:D}))},[r]),q=w.useMemo(()=>{const Y=new Map;return r.forEach(R=>Y.set(R.estado,(Y.get(R.estado)??0)+1)),Array.from(Y.entries()).map(([R,D])=>({name:R,value:D}))},[r]),Q=w.useMemo(()=>{const Y=r.map(R=>R.avance??0);return Y.length?Math.round(Y.reduce((R,D)=>R+D,0)/Y.length):0},[r]),z=w.useMemo(()=>{const Y=new Map;return r.forEach(R=>Y.set(R.subdimension,(Y.get(R.subdimension)??0)+1)),Array.from(Y.entries()).map(([R,D])=>({name:R,value:D})).sort((R,D)=>D.value-R.value).slice(0,6)},[r]),K=()=>{const Y=["id","fechaRegistro","responsable","dimension","subdimension","descripcion","objetivos","indicadores","cobertura","fechaInicio","fechaCumplimiento","estado","avance","enlaces"],R=r.map(ie=>[ie.id,ie.fechaRegistro,ie.responsable,ie.dimension,ie.subdimension,ie.descripcion.replace(/\n/g," "),ie.objetivos??"",(ie.indicadores??[]).join("|"),ie.cobertura??"",ie.fechaInicio??"",ie.fechaCumplimiento,ie.estado,ie.avance??0,(ie.enlaces??[]).join("|")]),D=[Y.join(","),...R.map(ie=>ie.map(re=>`"${String(re).replace(/"/g,'""')}"`).join(","))].join(`
`),W=new Blob([D],{type:"text/csv;charset=utf-8"}),J=URL.createObjectURL(W),le=document.createElement("a");le.href=J,le.download=`pme_acciones_${new Date().toISOString().slice(0,10)}.csv`,le.click(),URL.revokeObjectURL(J)};return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-fuchsia-200/60 dark:border-fuchsia-700/30",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-fuchsia-500/20 via-rose-500/20 to-amber-400/20 blur-3xl"}),i.jsxs("div",{className:"relative p-6 md:p-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 bg-white/60 dark:bg-slate-900/40 backdrop-blur",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl md:text-3xl font-black bg-gradient-to-r from-fuchsia-600 via-rose-600 to-amber-600 bg-clip-text text-transparent flex items-center gap-3",children:[i.jsx(lx,{className:"h-6 w-6 text-fuchsia-600"})," Seguimiento de Acciones (PME)"]}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(V4e,{className:"h-4 w-4"})," Registro, seguimiento y dashboard por Dimensin/Subdimensin."]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:j,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white/70 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:bg-white",children:[i.jsx(TS,{className:"h-4 w-4"})," Refrescar"]}),i.jsxs("button",{onClick:K,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 to-rose-500 hover:opacity-90",children:[i.jsx(Pf,{className:"h-4 w-4"})," CSV"]})]})]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs("button",{onClick:()=>t("registro"),className:`${oO} ${e==="registro"?lO:cO}`,children:[i.jsx(r0,{className:"h-4 w-4"})," Registro"]}),i.jsxs("button",{onClick:()=>t("seguimiento"),className:`${oO} ${e==="seguimiento"?lO:cO}`,children:[i.jsx(r1,{className:"h-4 w-4"})," Seguimiento"]}),i.jsxs("button",{onClick:()=>t("dashboard"),className:`${oO} ${e==="dashboard"?lO:cO}`,children:[i.jsx(f_e,{className:"h-4 w-4"})," Dashboard"]})]}),e==="registro"&&i.jsx("div",{className:$w,children:i.jsxs("form",{onSubmit:M,className:"p-6 md:p-8 space-y-6",children:[c&&i.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-rose-200 bg-rose-50 p-3 text-rose-700 dark:bg-rose-900/30 dark:text-rose-200 dark:border-rose-800",children:[i.jsx(Uc,{className:"h-5 w-5"}),i.jsx("span",{children:c})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:uu,children:"Fecha de Registro"}),i.jsxs("div",{className:"relative",children:[i.jsx(qo,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-500"}),i.jsx("input",{type:"date",name:"fechaRegistro",value:a.fechaRegistro,onChange:I,className:Do+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:uu,children:"Responsable"}),i.jsxs("div",{className:"relative",children:[i.jsx(cx,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-rose-500"}),i.jsx("input",{type:"text",name:"responsable",placeholder:"Nombre",value:a.responsable,onChange:I,className:Do+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:uu,children:"Cobertura (niveles/cursos)"}),i.jsxs("div",{className:"relative",children:[i.jsx(D1,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-amber-500"}),i.jsx("input",{type:"text",name:"cobertura",placeholder:"2A, 2B, 3Mecnica...",value:a.cobertura??"",onChange:I,className:Do+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:uu,children:"Dimensin PME"}),i.jsxs("div",{className:"relative",children:[i.jsx(w4e,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),i.jsxs("select",{name:"dimension",value:a.dimension,onChange:I,className:Do+" pl-10",children:[i.jsx("option",{value:"",children:"Selecciona una dimensin"}),Object.keys(G0).map(Y=>i.jsx("option",{value:Y,children:Y},Y))]})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:uu,children:"Subdimensin"}),i.jsxs("div",{className:"relative",children:[i.jsx(qC,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-sky-500"}),i.jsxs("select",{name:"subdimension",value:a.subdimension,onChange:I,className:Do+" pl-10",disabled:!a.dimension,children:[i.jsx("option",{value:"",children:a.dimension?"Selecciona una subdimensin":"Primero elige una dimensin"}),_.map(Y=>i.jsx("option",{value:Y,children:Y},Y))]})]})]}),i.jsxs("div",{className:"md:col-span-3",children:[i.jsx("label",{className:uu,children:"Descripcin de la Accin"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ko,{className:"absolute left-3 top-3 h-4 w-4 text-fuchsia-500"}),i.jsx("textarea",{name:"descripcion",value:a.descripcion,onChange:I,rows:3,placeholder:"Qu se har? Dnde y con quin?",className:Do+" pl-10"})]})]}),i.jsxs("div",{className:"md:col-span-3",children:[i.jsx("label",{className:uu,children:"Objetivos (opcional)"}),i.jsx("textarea",{name:"objetivos",value:a.objetivos??"",onChange:I,rows:2,placeholder:"Propsitos pedaggicos",className:Do})]}),i.jsxs("div",{children:[i.jsx("label",{className:uu,children:"Indicadores (separados por coma)"}),i.jsx("input",{type:"text",value:(a.indicadores??[]).join(", "),onChange:Y=>T(Y.target.value),placeholder:"Cobertura OA, asistencia, resultados...",className:Do})]}),i.jsxs("div",{children:[i.jsx("label",{className:uu,children:"Fecha de Inicio"}),i.jsxs("div",{className:"relative",children:[i.jsx(qo,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-violet-500"}),i.jsx("input",{type:"date",name:"fechaInicio",value:a.fechaInicio??"",onChange:I,className:Do+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:uu,children:"Fecha de Cumplimiento"}),i.jsxs("div",{className:"relative",children:[i.jsx(qo,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),i.jsx("input",{type:"date",name:"fechaCumplimiento",value:a.fechaCumplimiento,onChange:I,className:Do+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:uu,children:"Estado"}),i.jsx("select",{name:"estado",value:a.estado,onChange:I,className:Do,children:PG.map(Y=>i.jsx("option",{value:Y,children:Y},Y))})]}),i.jsxs("div",{children:[i.jsx("label",{className:uu,children:"Avance (%)"}),i.jsxs("div",{className:"relative",children:[i.jsx(F5,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),i.jsx("input",{type:"number",min:0,max:100,name:"avance",value:a.avance??0,onChange:I,className:Do+" pl-10"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:uu,children:"Enlaces de evidencia (separados por coma)"}),i.jsxs("div",{className:"relative",children:[i.jsx(SG,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),i.jsx("input",{type:"text",value:(a.enlaces??[]).join(", "),onChange:Y=>k(Y.target.value),placeholder:"https://..., https://...",className:Do+" pl-10"})]})]})]}),i.jsxs("div",{className:"flex items-center justify-end gap-3",children:[o&&i.jsx("button",{type:"button",onClick:B,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white border border-slate-200 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700",children:"Cancelar"}),i.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 via-rose-500 to-amber-500 hover:opacity-90",children:[o?i.jsx(Fl,{className:"h-4 w-4"}):i.jsx(gi,{className:"h-4 w-4"}),o?"Guardar cambios":"Registrar accin"]})]})]})}),e==="seguimiento"&&i.jsx("div",{className:$w,children:i.jsxs("div",{className:"p-4 md:p-6 space-y-5",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"relative md:col-span-2",children:[i.jsx(wy,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-600"}),i.jsx("input",{className:Do+" pl-10",placeholder:"Buscar por responsable, descripcin o subdimensin...",value:A,onChange:Y=>m(Y.target.value)})]}),i.jsxs("select",{value:g,onChange:Y=>{x(Y.target.value),y("")},className:Do,children:[i.jsx("option",{value:"",children:"Todas las dimensiones"}),Object.keys(G0).map(Y=>i.jsx("option",{value:Y,children:Y},Y))]}),i.jsxs("select",{value:v,onChange:Y=>y(Y.target.value),className:Do,children:[i.jsx("option",{value:"",children:"Todas las subdimensiones"}),(G0[g]??Object.values(G0).flat()).map(Y=>i.jsx("option",{value:Y,children:Y},Y))]}),i.jsxs("select",{value:N,onChange:Y=>C(Y.target.value),className:Do,children:[i.jsx("option",{value:"",children:"Todos los estados"}),PG.map(Y=>i.jsx("option",{value:Y,children:Y},Y))]})]}),i.jsx("div",{className:"overflow-x-auto rounded-xl border border-slate-100 dark:border-slate-800",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[i.jsx("thead",{className:"bg-gradient-to-r from-fuchsia-50 to-rose-50 dark:from-slate-800 dark:to-slate-800",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-fuchsia-700 dark:text-fuchsia-300",children:"Responsable"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-rose-700 dark:text-rose-300",children:"Dimensin / Subdimensin"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-indigo-700 dark:text-indigo-300",children:"Descripcin"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-amber-700 dark:text-amber-300",children:"Fechas"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-emerald-700 dark:text-emerald-300",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-sky-700 dark:text-sky-300",children:"Avance"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Acciones"})]})}),i.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800 bg-white dark:bg-slate-900/40",children:[L.map(Y=>{var R,D;return i.jsxs("tr",{className:"hover:bg-fuchsia-50/50 dark:hover:bg-slate-800/60 transition",children:[i.jsx("td",{className:"px-4 py-4 align-top text-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-fuchsia-500 to-rose-500 text-white flex items-center justify-center font-bold shadow-sm",children:((D=(R=Y.responsable)==null?void 0:R.slice(0,1))==null?void 0:D.toUpperCase())||"?"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:Y.responsable}),i.jsx("div",{className:"text-xs text-slate-500",children:Y.cobertura})]})]})}),i.jsxs("td",{className:"px-4 py-4 align-top text-sm",children:[i.jsx("div",{className:"font-semibold text-indigo-700 dark:text-indigo-300",children:Y.dimension}),i.jsx("div",{className:"text-xs text-slate-500",children:Y.subdimension})]}),i.jsxs("td",{className:"px-4 py-4 align-top text-sm max-w-md",children:[i.jsx("div",{className:"text-slate-700 dark:text-slate-200",children:Y.descripcion}),Y.enlaces&&Y.enlaces.length>0&&i.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Y.enlaces.map((W,J)=>i.jsxs("a",{href:W,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-fuchsia-700 hover:text-fuchsia-900 dark:text-fuchsia-300",children:[i.jsx(SG,{className:"h-3.5 w-3.5"})," Evidencia ",J+1]},J))})]}),i.jsxs("td",{className:"px-4 py-4 align-top text-sm whitespace-nowrap",children:[i.jsxs("div",{className:"text-xs text-slate-500",children:["Reg: ",Y.fechaRegistro||"-"]}),i.jsxs("div",{className:"text-xs text-slate-500",children:["Ini: ",Y.fechaInicio||"-"]}),i.jsxs("div",{className:"text-xs font-semibold text-emerald-700 dark:text-emerald-300",children:["Fin: ",Y.fechaCumplimiento]})]}),i.jsx("td",{className:"px-4 py-4 align-top text-center",children:Rat(Y.estado)}),i.jsxs("td",{className:"px-4 py-4 align-top",children:[i.jsx("div",{className:"w-28 h-2.5 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-fuchsia-500 via-rose-500 to-amber-500",style:{width:`${Math.min(Math.max(Y.avance??0,0),100)}%`}})}),i.jsxs("div",{className:"text-xs text-center mt-1",children:[Y.avance??0,"%"]})]}),i.jsx("td",{className:"px-4 py-4 align-top text-center",children:i.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[i.jsx("button",{onClick:()=>P(Y),className:"p-2 rounded-lg hover:bg-amber-50 dark:hover:bg-slate-800",title:"Editar",children:i.jsx(x3,{className:"h-5 w-5 text-amber-600"})}),i.jsx("button",{onClick:()=>S(Y.id),className:"p-2 rounded-lg hover:bg-rose-50 dark:hover:bg-slate-800",title:"Eliminar",children:i.jsx(Vn,{className:"h-5 w-5 text-rose-600"})})]})})]},Y.id)}),L.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"px-4 py-12 text-center text-slate-500",children:"Sin registros"})})]})]})})]})}),e==="dashboard"&&i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"xl:col-span-3 grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:`${Ck} ${Dat}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Tl,{className:"h-10 w-10 opacity-90"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase/relaxed",children:"Acciones totales"}),i.jsx("div",{className:"text-2xl font-black",children:r.length})]})]})}),i.jsx("div",{className:`${Ck} ${Oat}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(pa,{className:"h-10 w-10 opacity-90"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase/relaxed",children:"Cumplidas"}),i.jsx("div",{className:"text-2xl font-black",children:((Z=q.find(Y=>Y.name==="Cumplida"))==null?void 0:Z.value)??0})]})]})}),i.jsx("div",{className:`${Ck} ${Pat}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(foe,{className:"h-10 w-10 opacity-90"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase/relaxed",children:"En proceso"}),i.jsx("div",{className:"text-2xl font-black",children:((U=q.find(Y=>Y.name==="En Proceso"))==null?void 0:U.value)??0})]})]})}),i.jsx("div",{className:`${Ck} ${Fat}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(F5,{className:"h-10 w-10 opacity-90"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase/relaxed",children:"Avance promedio"}),i.jsxs("div",{className:"text-2xl font-black",children:[Q,"%"]})]})]})})]}),i.jsxs("div",{className:$w+" p-5",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-100",children:"Acciones por dimensin"})}),i.jsx("div",{className:"h-64",children:i.jsx($o,{width:"100%",height:"100%",children:i.jsxs(Nf,{data:H,children:[i.jsx(Mh,{strokeDasharray:"3 3"}),i.jsx(Rc,{dataKey:"name",hide:!0}),i.jsx(Lc,{allowDecimals:!1}),i.jsx(Vo,{}),i.jsx(jd,{dataKey:"value",children:H.map((Y,R)=>i.jsx(kA,{fill:Bm[R%Bm.length]},R))})]})})}),i.jsx("div",{className:"mt-2 grid grid-cols-1 gap-1",children:H.map((Y,R)=>i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("span",{className:"inline-block h-3 w-3 rounded-sm",style:{background:Bm[R%Bm.length]}}),i.jsx("span",{className:"flex-1",children:Y.name}),i.jsx("span",{className:"font-semibold",children:Y.value})]},R))})]}),i.jsxs("div",{className:$w+" p-5",children:[i.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Distribucin por estado"}),i.jsx("div",{className:"h-64",children:i.jsx($o,{width:"100%",height:"100%",children:i.jsxs(CT,{children:[i.jsx(xE,{data:q,dataKey:"value",nameKey:"name",outerRadius:90,label:!0,children:q.map((Y,R)=>i.jsx(kA,{fill:Bm[R%Bm.length]},R))}),i.jsx(Kp,{}),i.jsx(Vo,{})]})})})]}),i.jsxs("div",{className:$w+" p-5",children:[i.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Subdimensiones ms trabajadas"}),i.jsxs("ul",{className:"space-y-2",children:[z.map((Y,R)=>i.jsxs("li",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{background:Bm[R%Bm.length]}}),Y.name]}),i.jsx("span",{className:"font-semibold",children:Y.value})]},R)),z.length===0&&i.jsx("li",{className:"text-slate-500",children:"Sin datos"})]})]})]})]})},Mat="modulepreload",Uat=function(e){return"/"+e},PJ={},Ss=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let o=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=o(r.map(u=>{if(u=Uat(u),u in PJ)return;PJ[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const A=document.createElement("link");if(A.rel=d?"stylesheet":Mat,d||(A.as="script"),A.crossOrigin="",A.href=u,c&&A.setAttribute("nonce",c),document.head.appendChild(A),d)return new Promise((m,g)=>{A.addEventListener("load",m),A.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},ET="presentacionesDidacticas",Hat=async(e,t)=>{const r=Wt(ht(Ar,ET)),n={...e,id:r.id,userId:t,fechaCreacion:new Date().toISOString(),estado:"generando"};return await bi(r,n),r.id},FJ=async(e,t)=>{const r=Wt(Ar,ET,e);await qi(r,t)},Qat=async e=>{await ca(Wt(Ar,ET,e))},Vat=(e,t)=>{const r=Bt(ht(Ar,ET),sr("userId","==",e),Xt("fechaCreacion","desc"));return lr(r,n=>{const a=n.docs.map(s=>s.data());t(a)})},$at=async e=>{let t=null;try{const r=oa.currentUser;if(!r)throw new Error("Usuario no autenticado. Debe iniciar sesin para generar presentaciones.");console.log("Estado de autenticacin:",{isLoggedIn:!!r,uid:r.uid,email:r.email});const n=await r.getIdToken(!0);console.log("Token actualizado correctamente, longitud:",n.length);const a=vl(Tx,"generateSlides"),s={tema:e.tema,asignatura:e.asignatura,objetivosAprendizaje:e.objetivosAprendizaje,curso:e.curso,numDiapositivas:e.numDiapositivas,estilo:e.estilo,incluirImagenes:e.incluirImagenes,contenidoFuente:e.contenidoFuente||"",enlaces:e.enlaces||[],planificacionId:e.planificacionId,incluirActividades:!0,incluirEvaluacion:!0,formatoPedagogico:!0,userId:r.uid};t=await Hat({...e,userId:r.uid,fechaCreacion:new Date().toISOString(),estado:"generando",urlPresentacion:""},r.uid),console.log("Presentacin guardada con ID:",t),console.log("Enviando solicitud a generateSlides con usuario:",r.uid),console.log("Datos enviados:",s);const o=await a(s);console.log("Respuesta de funcin:",o);const l=o.data;if(l.presentacionId&&l.url)try{const c={estado:"completada",urlPresentacion:l.url};l.demoMode&&(c.mensajeError="NOTA: Esta es una versin de demostracin. La presentacin no existe realmente."),await FJ(t,c)}catch(c){console.warn("Error al actualizar la presentacin en Firestore:",c)}return l}catch(r){if(console.error("Error al generar presentacin:",r),console.error("Cdigo:",r==null?void 0:r.code,"Mensaje:",r==null?void 0:r.message,"Detalles:",r==null?void 0:r.details),t)try{await FJ(t,{estado:"error",mensajeError:(r==null?void 0:r.message)||"Error desconocido al generar la presentacin"}),console.warn(`Presentacin ${t} marcada como fallida`)}catch(n){console.error("Error al actualizar el estado de la presentacin:",n)}throw r}},dO=async()=>{var t,r,n,a;const e=oa.currentUser;if(!e)throw new Error("Usuario no autenticado. Debe iniciar sesin para verificar la autorizacin.");try{const s=await e.getIdToken(),o=await fetch("https://us-central1-plania-clase.cloudfunctions.net/checkGoogleSlidesAuth",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({})});if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);const l=await o.json();return{isAuthorized:l.isAuthorized||!1,message:l.message||"Estado de autorizacin desconocido"}}catch(s){if(console.error("Error al verificar autorizacin de Google Slides:",s),(t=s.message)!=null&&t.includes("cors")||(r=s.message)!=null&&r.includes("blocked")||(n=s.message)!=null&&n.includes("CORS")||(a=s.message)!=null&&a.includes("fetch")){console.warn("Error de red detectado, usando mtodo alternativo para verificar autorizacin");try{const o=Bt(ht(Ar,"userTokens"),sr("userId","==",e.uid)),l=await Ir(o);return{isAuthorized:!l.empty,message:l.empty?"Usuario no ha autorizado Google Slides (verificacin directa)":"Usuario autorizado para Google Slides (verificacin directa)"}}catch(o){return console.error("Error en verificacin alternativa:",o),{isAuthorized:!1,message:"Error al verificar autorizacin"}}}return{isAuthorized:!1,message:`Error al verificar autorizacin: ${s.message||"Error desconocido"}`}}},zat=()=>{const[e,t]=w.useState(!1),[r,n]=w.useState(null),a=async()=>{t(!0);try{const o=await vl(Tx,"testGemini")();n(o.data)}catch(s){console.error("Error calling testGemini:",s),n({success:!1,error:s.message||"Error desconocido",type:"client_error"})}t(!1)};return i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md max-w-2xl mx-auto",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Prueba de Gemini AI"}),i.jsx("button",{onClick:a,disabled:e,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50 mb-4",children:e?"Probando...":"Probar Gemini 1.5 Pro"}),r&&i.jsxs("div",{className:"bg-gray-100 p-4 rounded",children:[i.jsx("h4",{className:"font-semibold mb-2",children:"Resultado:"}),i.jsx("pre",{className:"text-sm overflow-auto max-h-96",children:JSON.stringify(r,null,2)}),r.success?i.jsx("div",{className:"mt-2 text-green-600",children:" Gemini AI est funcionando correctamente"}):i.jsxs("div",{className:"mt-2 text-red-600",children:[" Problema detectado: ",r.error]})]})]})},Gat=({estilo:e,tema:t="Ejemplo de Presentacin"})=>{const n=(()=>{switch(e){case"sobrio":return{colores:{fondo:"bg-slate-100",fondoDiapo:"bg-white",titulo:"text-slate-800",texto:"text-slate-600",acento:"bg-slate-200"},fuentes:{titulo:"font-serif",texto:"font-sans"},iconos:"",descripcion:"Elegante y minimalista, balanceando profesionalismo con claridad pedaggica",ejemplo:["Ttulo principal en fuente serif","Contenido organizado y claro","Paleta de colores neutros"]};case"visual":return{colores:{fondo:"bg-blue-50",fondoDiapo:"bg-white",titulo:"text-blue-800",texto:"text-slate-600",acento:"bg-blue-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"",descripcion:"Dinmico y colorido, con nfasis en elementos grficos e infografas",ejemplo:["Mayor uso de elementos visuales","Diagramas y representaciones grficas","Paleta de colores vibrantes"]};case"academico":return{colores:{fondo:"bg-amber-50",fondoDiapo:"bg-white",titulo:"text-amber-800",texto:"text-slate-700",acento:"bg-amber-100"},fuentes:{titulo:"font-serif",texto:"font-serif"},iconos:"",descripcion:"Formal y riguroso, con nfasis en conceptos tericos",ejemplo:["Estructura acadmica formal","Referencias y citas bibliogrficas","nfasis en conceptos tericos"]};case"interactivo":return{colores:{fondo:"bg-green-50",fondoDiapo:"bg-white",titulo:"text-green-800",texto:"text-slate-600",acento:"bg-green-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"",descripcion:"Participativo y colaborativo, con mltiples actividades",ejemplo:["Preguntas y actividades prcticas","Espacios para participacin","Dinmicas grupales sugeridas"]};case"profesional":return{colores:{fondo:"bg-indigo-50",fondoDiapo:"bg-white",titulo:"text-indigo-800",texto:"text-slate-600",acento:"bg-indigo-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"",descripcion:"Corporativo y prctico, enfocado en aplicaciones reales",ejemplo:["Diseo corporativo y estructurado","Casos de estudio prcticos","Aplicaciones en contexto laboral"]};case"creativo":return{colores:{fondo:"bg-purple-50",fondoDiapo:"bg-white",titulo:"text-purple-800",texto:"text-slate-600",acento:"bg-purple-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"",descripcion:"Innovador y atractivo, estimula la imaginacin",ejemplo:["Diseo creativo no convencional","Elementos visuales llamativos","Enfoque innovador del contenido"]};case"minimalista":return{colores:{fondo:"bg-gray-50",fondoDiapo:"bg-white",titulo:"text-gray-800",texto:"text-gray-600",acento:"bg-gray-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"",descripcion:"Simple y esencial, centrado en lo ms importante",ejemplo:["Diseo muy simplificado","Amplio espacio en blanco","Solo informacin esencial"]};default:return{colores:{fondo:"bg-slate-100",fondoDiapo:"bg-white",titulo:"text-slate-800",texto:"text-slate-600",acento:"bg-slate-200"},fuentes:{titulo:"font-serif",texto:"font-sans"},iconos:"",descripcion:"Elegante y minimalista, balanceando profesionalismo con claridad pedaggica",ejemplo:["Ttulo principal en fuente serif","Contenido organizado y claro","Paleta de colores neutros"]}}})();return i.jsxs("div",{className:`p-4 rounded-lg ${n.colores.fondo} transition-all`,children:[i.jsxs("h3",{className:"text-lg font-medium mb-2",children:["Vista previa: Estilo ",e]}),i.jsx("p",{className:"text-sm text-gray-500 mb-3",children:n.descripcion}),i.jsxs("div",{className:"shadow-md rounded-lg overflow-hidden",children:[i.jsxs("div",{className:`p-4 ${n.colores.fondoDiapo} border-b border-gray-200`,children:[i.jsx("h4",{className:`${n.fuentes.titulo} ${n.colores.titulo} text-lg font-bold mb-2`,children:t}),i.jsxs("div",{className:`${n.fuentes.texto} ${n.colores.texto} text-sm space-y-2`,children:[i.jsx("p",{children:"Diapositiva de ttulo con subttulo"}),i.jsx("div",{className:`w-2/3 h-2 ${n.colores.acento} rounded mt-2`})]})]}),i.jsxs("div",{className:`p-4 ${n.colores.fondoDiapo}`,children:[i.jsx("h4",{className:`${n.fuentes.titulo} ${n.colores.titulo} text-md font-bold mb-2`,children:"Caractersticas principales"}),i.jsx("ul",{className:`${n.fuentes.texto} ${n.colores.texto} text-xs space-y-1 list-disc pl-4`,children:n.ejemplo.map((a,s)=>i.jsx("li",{children:a},s))}),i.jsx("div",{className:"flex justify-end mt-2",children:i.jsx("span",{className:"text-lg",children:n.iconos})})]})]})]})},qat=({userId:e,planificaciones:t})=>{const[r,n]=w.useState("presentaciones"),[a,s]=w.useState(null),[o,l]=w.useState({tema:"",objetivosAprendizaje:[],numDiapositivas:8,estilo:"sobrio",incluirImagenes:!0,incluirActividades:!0,incluirEvaluacion:!0,formatoPedagogico:!0,contenidoFuente:"",enlaces:""}),[c,u]=w.useState(!1),[d,f]=w.useState([]),[A,m]=w.useState(!1),[g,x]=w.useState(!1),[v,y]=w.useState(null),[N,C]=w.useState({isAuthorized:!1,message:"Verificando autorizacin...",checking:!0});w.useEffect(()=>e?Vat(e,L=>{f(L)}):void 0,[e]),w.useEffect(()=>{const S=async()=>{if(e)try{C(z=>({...z,checking:!0}));const Q=await dO();C({isAuthorized:Q.isAuthorized,message:Q.message,checking:!1})}catch(Q){C({isAuthorized:!1,message:`Error: ${Q.message||"No se pudo verificar la autorizacin"}`,checking:!1})}};S();const L=setTimeout(()=>{C(Q=>Q.checking?{isAuthorized:!1,message:"Timeout al verificar autorizacin",checking:!1}:Q)},1e4);if(new URLSearchParams(window.location.search).get("auth")==="success"){const Q=setTimeout(()=>{S()},2e3);return()=>{clearTimeout(Q),clearTimeout(L)}}return()=>clearTimeout(L)},[e]),w.useEffect(()=>{const S=async()=>{if(new URLSearchParams(window.location.search).get("auth")==="success"&&!N.isAuthorized)try{C(Q=>({...Q,checking:!0}));const q=await dO();C({isAuthorized:q.isAuthorized,message:q.message,checking:!1})}catch(q){C({isAuthorized:!1,message:`Error: ${q.message||"No se pudo verificar la autorizacin"}`,checking:!1})}};return window.addEventListener("popstate",S),()=>window.removeEventListener("popstate",S)},[N.isAuthorized]),w.useEffect(()=>{a&&("nombreUnidad"in a?l(S=>({...S,tema:a.nombreUnidad})):"nombreClase"in a&&l(S=>({...S,tema:a.nombreClase})))},[a]);const _=()=>{var S;if(!a)return[];if("lecciones"in a){const L=[];return(S=a.lecciones)==null||S.forEach(H=>{H.objetivosAprendizaje&&!L.includes(H.objetivosAprendizaje)&&L.push(H.objetivosAprendizaje)}),L}else if(a.detalleLeccionOrigen)return[a.detalleLeccionOrigen.objetivosAprendizaje];return[]},j=S=>{const{name:L,value:H,type:q}=S.target;if(q==="checkbox"){const Q=S.target.checked;l(z=>({...z,[L]:Q}))}else l(Q=>({...Q,[L]:H}))},I=S=>{const L=Array.from(S.target.selectedOptions,H=>H.value);l(H=>({...H,objetivosAprendizaje:L}))},T=async S=>{if(S.preventDefault(),!a){y("Debes seleccionar una planificacin");return}if(o.objetivosAprendizaje.length===0){y("Debes seleccionar al menos un objetivo de aprendizaje");return}y(null),x(!0);try{const L={planificacionId:a.id,tema:o.tema,curso:a.nivel,asignatura:a.asignatura,objetivosAprendizaje:o.objetivosAprendizaje,numDiapositivas:o.numDiapositivas,estilo:o.estilo,incluirImagenes:o.incluirImagenes,contenidoFuente:o.contenidoFuente,enlaces:o.enlaces?o.enlaces.split(/[\s,]+/).filter(Boolean):[]};console.log("Datos para presentacin:",L);const H=await $at({...L,userId:e});console.log("Resultado de la funcin:",H),H&&H.url&&console.log("Presentacin generada:",H.url)}catch(L){console.error("Error al generar presentacin:",L);const H=(L==null?void 0:L.message)||"Error desconocido",q=(L==null?void 0:L.code)||"unknown";y(`Error (${q}): ${H}`)}finally{x(!1)}},k=async S=>{if(window.confirm("Ests seguro de que deseas eliminar esta presentacin?"))try{m(!0),await Qat(S)}catch(L){console.error("Error al eliminar presentacin:",L),y("Error al eliminar la presentacin")}finally{m(!1)}},B=()=>i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Generar Presentacin con IA"}),i.jsxs("form",{onSubmit:T,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Seleccionar Planificacin"}),i.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",value:(a==null?void 0:a.id)||"",onChange:S=>{const L=t.find(H=>H.id===S.target.value);s(L||null)},required:!0,children:[i.jsx("option",{value:"",children:"Seleccione una planificacin"}),i.jsx("optgroup",{label:"Unidades",children:t.filter(S=>S.tipo==="Unidad").map(S=>i.jsxs("option",{value:S.id,children:[S.tipo==="Unidad"?S.nombreUnidad:""," - ",S.asignatura," (",S.nivel,")"]},S.id))}),i.jsx("optgroup",{label:"Clases",children:t.filter(S=>S.tipo==="Clase").map(S=>i.jsxs("option",{value:S.id,children:[S.tipo==="Clase"?S.nombreClase:""," - ",S.asignatura," (",S.nivel,")"]},S.id))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tema"}),i.jsx("input",{type:"text",name:"tema",value:o.tema,onChange:j,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Objetivos de Aprendizaje (selecciona al menos uno)"}),i.jsx("select",{multiple:!0,name:"objetivosAprendizaje",value:o.objetivosAprendizaje,onChange:I,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",size:3,required:!0,children:_().map((S,L)=>i.jsx("option",{value:S,children:S},L))}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Mantn presionado Ctrl (o Cmd) para seleccionar mltiples opciones"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"N de diapositivas"}),i.jsx("input",{type:"number",name:"numDiapositivas",value:o.numDiapositivas,onChange:j,min:4,max:20,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Estilo de Presentacin"}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 mt-2",children:[i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="sobrio"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"sobrio"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsx("span",{className:"font-medium",children:"Sobrio"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Elegante y minimalista"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="visual"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"visual"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsx("span",{className:"font-medium",children:"Visual"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Colorido y grfico"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="academico"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"academico"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsx("span",{className:"font-medium",children:"Acadmico"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Formal y riguroso"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="interactivo"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"interactivo"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsx("span",{className:"font-medium",children:"Interactivo"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Participativo y dinmico"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="profesional"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"profesional"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsx("span",{className:"font-medium",children:"Profesional"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Corporativo y prctico"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="creativo"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"creativo"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsx("span",{className:"font-medium",children:"Creativo"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Innovador y atractivo"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="minimalista"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"minimalista"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsx("span",{className:"font-medium",children:"Minimalista"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Simple y esencial"})]})})]}),i.jsxs("button",{type:"button",onClick:()=>u(!0),className:"mt-3 w-full flex items-center justify-center gap-2 py-2 text-sm font-medium text-indigo-700 bg-indigo-100 rounded-md hover:bg-indigo-200 dark:bg-indigo-900/30 dark:text-indigo-300 dark:hover:bg-indigo-800/40 transition-colors",children:[i.jsx(ox,{className:"w-4 h-4"}),i.jsx("span",{children:"Ver ejemplo del estilo seleccionado"})]}),c&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-auto",children:[i.jsxs("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[i.jsxs("h3",{className:"text-lg font-medium",children:["Vista previa de estilo: ",o.estilo]}),i.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:i.jsx(xo,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-5",children:[i.jsx(Gat,{estilo:o.estilo,tema:o.tema||"Tema de la presentacin"}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("h4",{className:"font-medium mb-2",children:["Caractersticas del estilo ",o.estilo]}),i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[o.estilo==="sobrio"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseo elegante y profesional"}),i.jsx("li",{children:"Colores neutros y tipografa clsica"}),i.jsx("li",{children:"nfasis en la claridad y simplicidad"}),i.jsx("li",{children:"Ideal para presentaciones formales"})]}),o.estilo==="visual"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseo colorido y dinmico"}),i.jsx("li",{children:"Mayor uso de grficos e imgenes"}),i.jsx("li",{children:"nfasis en elementos visuales e infografas"}),i.jsx("li",{children:"Ideal para mantener la atencin visual"})]}),o.estilo==="academico"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseo formal y riguroso"}),i.jsx("li",{children:"Espacio para citas y referencias"}),i.jsx("li",{children:"nfasis en conceptos tericos"}),i.jsx("li",{children:"Ideal para contenido acadmico complejo"})]}),o.estilo==="interactivo"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseo participativo"}),i.jsx("li",{children:"Incluye actividades y preguntas"}),i.jsx("li",{children:"nfasis en la participacin activa"}),i.jsx("li",{children:"Ideal para clases dinmicas"})]}),o.estilo==="profesional"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseo corporativo"}),i.jsx("li",{children:"Elementos de casos prcticos"}),i.jsx("li",{children:"nfasis en aplicaciones reales"}),i.jsx("li",{children:"Ideal para formacin profesional"})]}),o.estilo==="creativo"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseo no convencional y llamativo"}),i.jsx("li",{children:"Elementos visuales originales"}),i.jsx("li",{children:"nfasis en despertar la imaginacin"}),i.jsx("li",{children:"Ideal para temas creativos o artsticos"})]}),o.estilo==="minimalista"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseo extremadamente simplificado"}),i.jsx("li",{children:"Amplio espacio en blanco"}),i.jsx("li",{children:"nfasis en lo esencial"}),i.jsx("li",{children:"Ideal para conceptos claros y concisos"})]})]})]})]}),i.jsx("div",{className:"p-4 bg-gray-100 dark:bg-slate-700 flex justify-end",children:i.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Cerrar vista previa"})})]})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"incluirImagenes",name:"incluirImagenes",checked:o.incluirImagenes,onChange:S=>l(L=>({...L,incluirImagenes:S.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"incluirImagenes",className:"text-sm text-gray-700 dark:text-gray-300",children:" Incluir sugerencias para imgenes educativas"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"incluirActividades",name:"incluirActividades",checked:o.incluirActividades||!1,onChange:S=>l(L=>({...L,incluirActividades:S.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"incluirActividades",className:"text-sm text-gray-700 dark:text-gray-300",children:" Incluir actividades y ejercicios prcticos"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"incluirEvaluacion",name:"incluirEvaluacion",checked:o.incluirEvaluacion||!1,onChange:S=>l(L=>({...L,incluirEvaluacion:S.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"incluirEvaluacion",className:"text-sm text-gray-700 dark:text-gray-300",children:" Incluir diapositiva de evaluacin/reflexin"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"formatoPedagogico",name:"formatoPedagogico",checked:o.formatoPedagogico||!0,onChange:S=>l(L=>({...L,formatoPedagogico:S.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"formatoPedagogico",className:"text-sm text-gray-700 dark:text-gray-300",children:" Aplicar estructura pedaggica avanzada"})]})]}),i.jsxs("div",{className:"hidden",children:[i.jsx("input",{type:"checkbox",id:"incluirImagenesOld",name:"incluirImagenesOld",checked:o.incluirImagenes,onChange:S=>l(L=>({...L,incluirImagenes:S.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"incluirImagenesOld",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Incluir imgenes libres de derechos"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Texto/recursos fuente (opcional)"}),i.jsx("textarea",{name:"contenidoFuente",value:o.contenidoFuente,onChange:j,rows:3,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",placeholder:"Pega aqu cualquier contenido de referencia para la presentacin..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Enlaces (opcional)"}),i.jsx("input",{type:"text",name:"enlaces",value:o.enlaces,onChange:j,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",placeholder:"URLs separadas por comas o espacios"})]}),v&&i.jsx("div",{className:"text-red-500 text-sm p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:v}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:g||!a,className:"w-full flex items-center justify-center gap-2 p-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:g?i.jsxs(i.Fragment,{children:[i.jsx(pi,{className:"w-4 h-4 animate-spin"}),"Generando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(NF,{className:"w-4 h-4"}),"Generar Presentacin"]})})})]})]})}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[i.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Mis Presentaciones"}),i.jsx("div",{className:"space-y-4",children:A?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(pi,{className:"w-8 h-8 animate-spin text-indigo-500"})}):d.length===0?i.jsxs("div",{className:"text-center py-8 space-y-4",children:[i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No has generado presentaciones todava"}),i.jsx("div",{className:"text-sm",children:N.checking?i.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[i.jsx(pi,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Verificando autorizacin..."})]}):i.jsxs("div",{className:`flex items-center justify-center gap-2 ${N.isAuthorized?"text-green-600 dark:text-green-400":"text-amber-600 dark:text-amber-400"}`,children:[i.jsx("span",{children:N.isAuthorized?"":""}),i.jsx("span",{children:N.message})]})}),!N.checking&&!N.isAuthorized&&i.jsx("div",{className:"flex justify-center",children:i.jsxs("button",{onClick:()=>{const S=`https://us-central1-plania-clase.cloudfunctions.net/slidesAuthorize?userId=${e}`;window.location.href=S},className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-green-600 hover:bg-green-700 text-white",children:[i.jsx(ix,{className:"w-4 h-4"}),i.jsx("span",{children:"Autorizar Google Slides"})]})}),i.jsx("div",{className:"flex justify-center",children:i.jsxs("button",{onClick:async()=>{try{C(L=>({...L,checking:!0}));const S=await dO();C({isAuthorized:S.isAuthorized,message:S.message,checking:!1})}catch(S){C({isAuthorized:!1,message:`Error: ${S.message||"No se pudo verificar la autorizacin"}`,checking:!1})}},disabled:N.checking,className:`flex items-center gap-2 px-3 py-1 text-sm rounded-lg transition-colors ${N.isAuthorized?"text-green-600 hover:text-green-800 border border-green-300 hover:bg-green-50":"text-gray-600 hover:text-gray-800 border border-gray-300 hover:bg-gray-50"}`,children:[N.checking?i.jsx(pi,{className:"w-3 h-3 animate-spin"}):i.jsx("span",{children:""}),i.jsx("span",{children:"Verificar estado"})]})})]}):d.map(S=>i.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200",children:S.tema}),S.estado==="generando"?i.jsxs("span",{className:"flex items-center text-amber-500 text-xs gap-1",children:[i.jsx(pi,{className:"w-3 h-3 animate-spin"}),"Generando"]}):S.estado==="error"?i.jsxs("span",{className:"flex items-center text-red-500 text-xs gap-1",children:[i.jsx(xo,{className:"w-3 h-3"}),"Error"]}):i.jsxs("span",{className:"flex items-center text-green-500 text-xs gap-1",children:[i.jsx(pa,{className:"w-3 h-3"}),"Lista"]})]}),i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[S.asignatura," - ",S.curso]}),i.jsxs("div",{className:"flex items-center text-xs text-gray-500 space-x-4 mt-2 flex-wrap",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(qo,{className:"w-3 h-3"}),new Date(S.fechaCreacion).toLocaleDateString()]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(XI,{className:"w-3 h-3"}),S.numDiapositivas," diapositivas"]}),i.jsxs("span",{className:`flex items-center gap-1 px-1.5 py-0.5 rounded-full ${S.estilo==="sobrio"?"bg-slate-100 text-slate-700":S.estilo==="visual"?"bg-blue-100 text-blue-700":S.estilo==="academico"?"bg-amber-100 text-amber-700":S.estilo==="interactivo"?"bg-green-100 text-green-700":S.estilo==="profesional"?"bg-indigo-100 text-indigo-700":S.estilo==="creativo"?"bg-purple-100 text-purple-700":(S.estilo==="minimalista","bg-gray-100 text-gray-700")}`,children:[S.estilo==="sobrio"&&"",S.estilo==="visual"&&"",S.estilo==="academico"&&"",S.estilo==="interactivo"&&"",S.estilo==="profesional"&&"",S.estilo==="creativo"&&"",S.estilo==="minimalista"&&"",S.estilo]})]}),i.jsxs("div",{className:"mt-3",children:[i.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-300",children:"Objetivos de Aprendizaje:"}),i.jsx("ul",{className:"list-disc list-inside text-xs text-gray-600 dark:text-gray-400",children:S.objetivosAprendizaje.map((L,H)=>i.jsx("li",{className:"truncate",children:L.length>60?L.substring(0,57)+"...":L},H))})]}),S.mensajeError&&i.jsx("div",{className:"mt-2 text-xs italic text-amber-600 dark:text-amber-400",children:S.mensajeError}),i.jsxs("div",{className:"mt-3 flex justify-between",children:[S.estado==="completada"?i.jsxs(i.Fragment,{children:[i.jsxs("a",{href:S.esDemoMode||S.urlPresentacion.includes("example.com")?"#":S.urlPresentacion,onClick:L=>{(S.esDemoMode||S.urlPresentacion.includes("example.com"))&&(L.preventDefault(),alert("Esta es una versin de demostracin. En la versin final, aqu vers una presentacin real de Google Slides."))},target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center gap-1 text-sm ${S.esDemoMode||S.urlPresentacion.includes("example.com")?"text-amber-600 hover:text-amber-800":"text-blue-600 hover:text-blue-800"}`,children:[i.jsx(ix,{className:"w-3 h-3"}),S.esDemoMode||S.urlPresentacion.includes("example.com")?"Ver Demo":"Abrir en Google Slides"]}),S.esDemoMode&&S.urlAutorizacion&&i.jsxs("a",{href:S.urlAutorizacion,target:"_blank",rel:"noopener noreferrer",className:"ml-4 inline-flex items-center gap-1 text-sm text-green-600 hover:text-green-800",children:[i.jsx(ix,{className:"w-3 h-3"}),"Autorizar Google Slides"]})]}):i.jsx("span",{className:"text-gray-400 text-sm italic",children:"En progreso..."}),i.jsx("button",{onClick:()=>k(S.id),className:"text-red-500 hover:text-red-700",children:i.jsx(Vn,{className:"w-4 h-4"})})]})]},S.id))})]})})]}),M=()=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-10 rounded-xl shadow-md text-center",children:[i.jsx(NG,{className:"w-16 h-16 mx-auto text-gray-400"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-300 mt-4",children:"Seccin de Guas Didcticas"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Esta funcin estar disponible prximamente."})]}),P=()=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-10 rounded-xl shadow-md text-center",children:[i.jsx(XI,{className:"w-16 h-16 mx-auto text-gray-400"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-300 mt-4",children:"Repositorio de Recursos"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Esta funcin estar disponible prximamente."})]});return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm p-1",children:i.jsxs("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[i.jsxs("button",{onClick:()=>n("presentaciones"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="presentaciones"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(NF,{className:"w-4 h-4"}),i.jsx("span",{children:"Presentaciones"})]}),i.jsxs("button",{onClick:()=>n("guias"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="guias"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(NG,{className:"w-4 h-4"}),i.jsx("span",{children:"Guas"})]}),i.jsxs("button",{onClick:()=>n("recursos"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="recursos"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(XI,{className:"w-4 h-4"}),i.jsx("span",{children:"Recursos"})]})]})}),i.jsx("div",{className:"mb-6",children:i.jsx(zat,{})}),i.jsxs("div",{children:[r==="presentaciones"&&B(),r==="guias"&&M(),r==="recursos"&&P()]})]})},bE="planificaciones",z0e="actividades_calendario",P9=e=>{var r,n,a;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:a.toISOString())||t.fechaCreacion,...t.detallesLeccion?{detallesLeccion:Array.isArray(t.detallesLeccion)?t.detallesLeccion:[]}:{}}},G0e=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:xr.fromDate(new Date),fechaActualizacion:xr.fromDate(new Date)};return(await ln(ht(ut,bE),r)).id}catch(r){throw console.error("Error al guardar planificacin:",r),new Error("No se pudo guardar la planificacin")}},q0e=async(e,t,r)=>{try{const n=Wt(ut,bE,e),a=await bA(n);if(!a.exists()||a.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificacin");await qi(n,{...t,fechaActualizacion:xr.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificacin:",n),new Error("No se pudo actualizar la planificacin")}},K0e=async(e,t)=>{try{const r=Wt(ut,bE,e),n=await bA(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar esta planificacin");await ca(r)}catch(r){throw console.error("Error al eliminar planificacin:",r),new Error("No se pudo eliminar la planificacin")}},Kat=async e=>{try{const t=Bt(ht(ut,bE),sr("userId","==",e),Xt("fechaCreacion","desc"));return(await Ir(t)).docs.map(P9)}catch(t){return console.error("Error al obtener planificaciones:",t),[]}},W0e=(e,t)=>{const r=Bt(ht(ut,bE),sr("userId","==",e),Xt("fechaCreacion","desc"));return lr(r,n=>{try{const a=n.docs.map(P9);console.log(`Recibiendo ${a.length} planificaciones del usuario ${e}`);const s=a.map(o=>o.tipo==="Unidad"&&!Array.isArray(o.detallesLeccion)?(console.warn(`Planificacin ${o.id} tiene detallesLeccion invlidos, corrigiendo.`),{...o,detallesLeccion:[]}):o);t(s)}catch(a){console.error("Error procesando datos de planificaciones:",a),t([])}},n=>{console.error("Error en suscripcin a planificaciones:",n)})},X0e=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:xr.fromDate(new Date),fechaActualizacion:xr.fromDate(new Date)};return(await ln(ht(ut,z0e),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},Y0e=(e,t)=>{const r=Bt(ht(ut,z0e),sr("userId","==",e),Xt("fecha","desc"));return lr(r,n=>{const a=n.docs.map(P9);t(a)},n=>{console.error("Error en suscripcin a actividades:",n)})},PR=Object.freeze(Object.defineProperty({__proto__:null,deletePlanificacion:K0e,getPlanificacionesByUser:Kat,saveActividad:X0e,savePlanificacion:G0e,subscribeToActividades:Y0e,subscribeToPlanificaciones:W0e,updatePlanificacion:q0e},Symbol.toStringTag,{value:"Module"})),F9="documentacion_docs";function J0e(e){const t=Bt(ht(Ar,F9),Xt("createdAt","desc"));return lr(t,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));e(n)})}async function Z0e(e,t,r){const n=Wt(ht(Ar,F9)),a={title:e,description:t||"",tags:r||[],createdAt:zn()};return await bi(n,a,{merge:!0}),n.id}async function eAe(e,t){const r=`documentacion/${e}/${t.name}`,n=Od(Zx,r);await by(n,t,{contentType:t.type});const a=await LA(n);return{storagePath:r,downloadURL:a,contentType:t.type}}async function V_(e,t,r,n,a,s){return(await vl(Tx,"indexDocumentacionDoc")({docId:e,storagePath:t,title:r,description:n,tags:a,contentType:s})).data}async function Wat(e,t=3,r,n){return(await vl(Tx,"documentacionQuery")({question:e,topK:t,tags:r,history:n})).data}async function tAe(e){await ca(Wt(Ar,F9,e))}const Xat=(e,t)=>{const[r,n]=w.useState([]),[a,s]=w.useState(!0),[o,l]=w.useState(null),c=w.useCallback(async()=>{if(!e){console.warn(" cargarPlanificacionesDirectamente: userId nulo, no se pueden cargar planificaciones"),s(!1),l("No se pudo determinar la identidad del usuario"),n([]);return}try{console.log(` Cargando planificaciones directamente para ${e}`);const{getPlanificacionesByUser:m}=await Ss(async()=>{const{getPlanificacionesByUser:v}=await Promise.resolve().then(()=>PR);return{getPlanificacionesByUser:v}},void 0),g=await m(e);console.log(` Obtenidas ${g.length} planificaciones directamente de Firestore`);const x=g.map(v=>v.tipo==="Unidad"&&!Array.isArray(v.detallesLeccion)?(console.log(` Corrigiendo datos de planificacin ${v.id}`),{...v,detallesLeccion:[]}):v);n(x),s(!1)}catch(m){console.error(" Error cargando planificaciones directamente:",m),l(m instanceof Error?m.message:"Error al cargar planificaciones directamente"),s(!1)}},[e]);w.useEffect(()=>{if(!e){console.log(" usePlanificaciones: userId nulo o vaco, no se cargarn planificaciones"),s(!1),l("ID de usuario no disponible"),n([]);return}console.log(` usePlanificaciones: Cargando planificaciones para usuario ${e}`),s(!0),l(null);let m=null;try{m=W0e(e,x=>{if(console.log(` usePlanificaciones: Recibidos ${x.length} documentos por suscripcin`),x.length===0){c();return}const v=x.map(y=>y.tipo==="Unidad"&&!Array.isArray(y.detallesLeccion)?(console.log(` Corrigiendo datos de planificacin ${y.id}`),{...y,detallesLeccion:[]}):y);n(v),s(!1)})}catch(x){console.error(" Error en hook usePlanificaciones:",x),l(x instanceof Error?x.message:"Error al cargar planificaciones"),c()}const g=setTimeout(()=>{a&&r.length===0&&(console.log(" Timeout: cargando planificaciones directamente como respaldo"),c())},5e3);return()=>{m&&m(),clearTimeout(g)}},[e,c]);const u=async m=>{try{return l(null),await G0e(m,e)}catch(g){throw l(g.message||"Error al guardar planificacin"),g}},d=async(m,g)=>{try{l(null),await q0e(m,g,e)}catch(x){throw l(x.message||"Error al actualizar planificacin"),x}},f=async m=>{try{l(null),await K0e(m,e)}catch(g){throw l(g.message||"Error al eliminar planificacin"),g}},A=w.useCallback(async()=>{try{if(!e)return{status:"error",message:"No hay usuario identificado. Datos del usuario no disponibles."};console.log(" Diagnstico - ID de usuario:",e);const{getPlanificacionesByUser:m}=await Ss(async()=>{const{getPlanificacionesByUser:y}=await Promise.resolve().then(()=>PR);return{getPlanificacionesByUser:y}},void 0),g=await m(e),x=g.filter(y=>y.tipo==="Unidad"),v=x.filter(y=>!Array.isArray(y.detallesLeccion)||y.detallesLeccion===void 0);if(console.log(` Diagnstico - Total planificaciones: ${g.length}, Unidades: ${x.length}, Invlidas: ${v.length}`),v.length>0){const{updateDoc:y,doc:N}=await Ss(async()=>{const{updateDoc:_,doc:j}=await Promise.resolve().then(()=>T1);return{updateDoc:_,doc:j}},void 0),{db:C}=await Ss(async()=>{const{db:_}=await Promise.resolve().then(()=>zM);return{db:_}},void 0);for(const _ of v)await y(N(C,"planificaciones",_.id),{detallesLeccion:[]});return{status:"repaired",message:`Se repararon ${v.length} planificaciones de ${x.length} totales.`}}else if(x.length===0)return{status:"empty",message:`No se encontraron planificaciones de unidad para el usuario ${e}. Cree una nueva planificacin.`};return{status:"ok",message:`Todo correcto. ${x.length} planificaciones de unidad encontradas.`}}catch(m){return console.error(" Error en diagnstico:",m),{status:"error",message:`Error: ${m instanceof Error?m.message:"Desconocido"}`}}},[e]);return{planificaciones:r,loading:a,error:o,save:u,update:d,remove:f,diagnosticarYReparar:A}},FR=e=>{const t=new Date().toISOString();console.log(`[${t}] API Call: ${e}`)},Yat=e=>{const[t,r]=w.useState([]),[n,a]=w.useState(!0),[s,o]=w.useState(null);w.useEffect(()=>{if(!e){a(!1);return}a(!0);try{return Y0e(e,u=>{r(u),a(!1)})}catch(c){o(c instanceof Error?c.message:"Error al cargar actividades"),a(!1)}},[e]);const l=w.useCallback(async c=>{try{return o(null),await X0e(c,e)}catch(u){throw o(u instanceof Error?u.message:"Error al guardar actividad"),u}},[e]);return{actividades:t,loading:n,error:s,save:l}},Jat=({lesson:e,onClose:t,onSave:r,isLoading:n=!1})=>{const[a,s]=w.useState(e),o=c=>{s({...a,[c.target.name]:c.target.value})},l=async()=>{try{await r(a),t()}catch(c){console.error("Error al guardar leccin:",c)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Leccin"}),i.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(a).map(([c,u])=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:c.replace(/([A-Z])/g," $1")}),i.jsx("textarea",{name:c,value:u,onChange:o,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},c))}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[i.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),i.jsxs("button",{onClick:l,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},Zat=({plan:e,onEditLesson:t,onUseLesson:r,isLoading:n=!1,onUpdatePlan:a})=>{var M,P,S;const[s,o]=w.useState(e.progreso??0),[l,c]=w.useState(!1),[u,d]=w.useState(((M=e.reflexionUnidad)==null?void 0:M.fortalezas)||""),[f,A]=w.useState(((P=e.reflexionUnidad)==null?void 0:P.mejoras)||""),[m,g]=w.useState(((S=e.reflexionUnidad)==null?void 0:S.debilidades)||""),x=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],v=(()=>{var H;const L=Object.fromEntries(x.map(q=>[q,""]));return(((H=e.reflexionUnidad)==null?void 0:H.ordenHabilidades)||[]).forEach((q,Q)=>{x.includes(q)&&(L[q]=Q+1)}),L})(),[y,N]=w.useState(v),[C,_]=w.useState(!1);w.useEffect(()=>{var H,q,Q,z;d(((H=e.reflexionUnidad)==null?void 0:H.fortalezas)||""),A(((q=e.reflexionUnidad)==null?void 0:q.mejoras)||""),g(((Q=e.reflexionUnidad)==null?void 0:Q.debilidades)||"");const L=Object.fromEntries(x.map(K=>[K,""]));(((z=e.reflexionUnidad)==null?void 0:z.ordenHabilidades)||[]).forEach((K,Z)=>{x.includes(K)&&(L[K]=Z+1)}),N(L)},[e.id]);const j=()=>{const L=u.trim().length>0&&f.trim().length>0&&m.trim().length>0,q=Object.entries(y).filter(([,Q])=>Q!=="").sort((Q,z)=>Q[1]-z[1]).map(([Q])=>Q).length>=1;return L&&q},I=async L=>{const H=parseInt(L.target.value,10);if(H===100&&!j()){alert("Para marcar la unidad como 100% completada, primero debes completar y guardar la Reflexin Docente (fortalezas, mejoras, desafos y priorizacin de habilidades).");return}o(H),c(!0);try{e.id&&a&&(await a(e.id,{progreso:H}),console.log(" Progreso actualizado exitosamente"))}catch(q){console.error(" Error completo:",q),alert(`Error al guardar el avance: ${q.message}`),o(e.progreso??0)}finally{c(!1)}},T=(L,H)=>{N(q=>{const Q={...q};if(H!==""){const z=Object.keys(Q).find(K=>K!==L&&Q[K]===H);z&&(Q[z]="")}return Q[L]=H,Q})},k=()=>Object.entries(y).filter(([,L])=>L!=="").sort((L,H)=>L[1]-H[1]).map(([L])=>L),B=async()=>{if(!(!a||!e.id)){if(!j()){alert("La Reflexin Docente es obligatoria: completa Fortalezas, Mejoras, Desafos y prioriza al menos una habilidad de Bloom.");return}_(!0);try{const L=k();await a(e.id,{reflexionUnidad:{fortalezas:u.trim(),mejoras:f.trim(),debilidades:m.trim(),ordenHabilidades:L}})}catch(L){console.error(" Error al guardar reflexin:",L),alert(`Error al guardar la reflexin: ${L.message}`)}finally{_(!1)}}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Indicadores de Evaluacin:"})," ",e.indicadoresEvaluacion]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"range",min:0,max:100,value:s,onChange:I,disabled:l||n}),i.jsxs("span",{className:"font-bold w-12",children:[s,"%"]}),l&&i.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),i.jsx("div",{className:"space-y-4",children:e.detallesLeccion.map((L,H)=>i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[i.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",H+1,": ",L.actividades]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Objetivo:"})," ",L.objetivosAprendizaje]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Contenidos:"})," ",L.contenidosConceptuales]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Habilidad (Bloom):"})," ",L.habilidadesBloom]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Perfil de Egreso:"})," ",L.perfilEgreso]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Interdisciplinariedad:"})," ",L.asignaturasInterdisciplinariedad]})]}),i.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 rounded-md",children:i.jsxs("p",{className:"font-medium",children:[i.jsx("strong",{children:"Actividades sugeridas:"})," ",L.actividades]})}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx("button",{onClick:()=>t(H,L),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),i.jsx("button",{onClick:()=>r(L,e),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},H))}),i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-3",children:"Reflexin Docente"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:'Obligatoria. Se usa en el mdulo "Seguimiento Curricular" para anlisis y visualizacin.'}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Fortalezas ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{value:u,onChange:L=>d(L.target.value),rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Mejoras ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{value:f,onChange:L=>A(L.target.value),rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Desafos ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{value:m,onChange:L=>g(L.target.value),rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Habilidades Bloom priorizadas (1 = mayor prioridad) ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:x.map(L=>i.jsxs("div",{className:"flex items-center justify-between gap-3 p-2 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-200",children:L}),i.jsxs("select",{value:y[L]===""?"":String(y[L]),onChange:H=>T(L,H.target.value===""?"":parseInt(H.target.value,10)),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:""}),[1,2,3,4,5,6].map(H=>i.jsx("option",{value:H,children:H},H))]})]},L))}),i.jsx("div",{className:"mt-3 text-xs text-slate-500 dark:text-slate-400",children:"Selecciona nmeros sin repetir. Solo se guardan las habilidades con nmero asignado."})]})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsxs("button",{onClick:B,disabled:C||n,className:"inline-flex items-center gap-2 bg-amber-500 hover:bg-amber-600 text-white font-semibold py-2 px-4 rounded-md disabled:opacity-50",children:[C?i.jsx("span",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin inline-block"}):i.jsx(Fl,{className:"w-4 h-4"}),i.jsx("span",{children:"Guardar reflexin"})]})})]})]})},est=({plan:e,onBack:t,onSave:r,onDelete:n,isLoading:a=!1})=>{const[s,o]=w.useState(e),[l,c]=w.useState(!1);w.useEffect(()=>{console.log("Plan inicial:",e.momentosClase);const A=v=>{if(typeof v=="object"&&v!==null)return JSON.stringify(v);if(typeof v=="string")try{if(v.trim().startsWith("{")){const y=JSON.parse(v);return JSON.stringify(y)}}catch(y){console.log("No es JSON vlido:",y)}return String(v)},m=A(e.momentosClase.inicio),g=A(e.momentosClase.desarrollo),x=A(e.momentosClase.cierre);console.log("Contenido procesado - inicio:",m),o(v=>({...v,momentosClase:{inicio:m,desarrollo:g,cierre:x}}))},[e]);const u=A=>{const{name:m,value:g}=A.target,[x,v]=m.split(".");o(x==="momentosClase"?y=>({...y,momentosClase:{...y.momentosClase,[v]:g}}):y=>({...y,[m]:g}))},d=async()=>{c(!0);try{await r((()=>{const m={...s};return Object.keys(m.momentosClase).forEach(g=>{const x=m.momentosClase[g];if(typeof x=="string"&&(x.includes("TIEMPO:")||x.includes("OBJETIVO:")||x.includes("ACTIVIDADES:")))try{const v=x.match(/TIEMPO:\s*(.*?)(?:\n\n|\n$)/s),y=x.match(/OBJETIVO:\s*(.*?)(?:\n\nACTIVIDADES:|\n$)/s);(v||y)&&console.log("Manteniendo formato para visualizacin")}catch(v){console.error("Error al procesar plan para guardar:",v)}}),m})())}catch(A){console.error("Error al guardar plan de clase:",A)}finally{c(!1)}},f=A=>{if(console.log("Formateando contenido:",typeof A,A!=null&&A.substring?A.substring(0,50):A),typeof A=="string")try{A.trim().startsWith("{")&&(A=JSON.parse(A),console.log("Contenido parseado a objeto:",A))}catch(m){console.log("Error al parsear JSON:",m)}if(typeof A=="object"&&A!==null)try{let m="";if(A.actividades&&Array.isArray(A.actividades)){m=`${A.tiempo?"TIEMPO: "+A.tiempo+`

`:""}`,m+=`${A.objetivo?`OBJETIVO:
`+A.objetivo+`

`:""}`,m+=`ACTIVIDADES:

`,A.actividades.forEach((x,v)=>{m+=`ACTIVIDAD ${v+1}: ${x.nombre||"Sin nombre"}
`,m+=`${x.descripcion||"Sin descripcin"}

`;let y="";x.tipo&&(y+=` Tipo: ${x.tipo}
`),x.recursos&&(y+=` Recursos: ${x.recursos}
`),x.evaluacion&&(y+=` Evaluacin: ${x.evaluacion}
`),y&&(m+=`${y}
`)});let g="";return Object.keys(A).forEach(x=>{x!=="tiempo"&&x!=="objetivo"&&x!=="actividades"&&(g+=` ${x.charAt(0).toUpperCase()+x.slice(1)}: ${typeof A[x]=="object"?JSON.stringify(A[x]):A[x]}
`)}),g&&(m+=`
INFORMACIN ADICIONAL:
${g}`),m}else{if(typeof A=="string")try{const y=JSON.parse(A);if(y.actividades||y.tiempo||y.objetivo)return f(y)}catch{}const x=JSON.stringify(A,null,2).replace(/[{}"]/g,"").replace(/,$/gm,"").replace(/^\s*\n/gm,"").split(`
`);let v="";return x.forEach(y=>{if(y.trim().startsWith("["))v+=`
`+y.trim()+`
`;else if(y.trim().startsWith("-"))v+=" "+y.trim().substring(1)+`
`;else if(y.includes(":")){const N=y.split(":");if(N.length>=2){const C=N[0].trim(),_=N.slice(1).join(":").trim();["tiempo","duracin","objetivo","actividad","tipo","recursos","evaluacin"].includes(C.toLowerCase())?v+=`${C.toUpperCase()}: ${_}
`:v+=`${C}: ${_}
`}else v+=y+`
`}else v+=y+`
`}),v}}catch(m){return console.error("Error al formatear contenido:",m),String(A)}return String(A)};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreClase}),i.jsx("button",{onClick:t,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:a||l,children:" Volver"})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-transparent dark:from-blue-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-blue-400 dark:border-blue-600",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"bg-blue-100 dark:bg-blue-800 p-1.5 rounded-lg",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-blue-600 dark:text-blue-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),i.jsx("label",{className:"font-bold text-lg text-blue-700 dark:text-blue-300",children:"Inicio de la Clase"})]}),i.jsx("textarea",{name:"momentosClase.inicio",value:f(s.momentosClase.inicio),onChange:u,rows:5,placeholder:"Describe las actividades iniciales, activacin de conocimientos previos, motivacin y presentacin del objetivo de la clase...",className:"w-full p-3 border border-blue-200 dark:border-blue-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-blue-300 dark:focus:ring-blue-700 focus:border-blue-300 focus:outline-none transition-all",disabled:a||l})]}),i.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-transparent dark:from-green-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-green-400 dark:border-green-600",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"bg-green-100 dark:bg-green-800 p-1.5 rounded-lg",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-green-600 dark:text-green-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),i.jsx("label",{className:"font-bold text-lg text-green-700 dark:text-green-300",children:"Desarrollo de la Clase"})]}),i.jsx("textarea",{name:"momentosClase.desarrollo",value:f(s.momentosClase.desarrollo),onChange:u,rows:8,placeholder:"Describe las actividades principales de aprendizaje, secuencia didctica, estrategias de enseanza, actividades prcticas...",className:"w-full p-3 border border-green-200 dark:border-green-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-green-300 dark:focus:ring-green-700 focus:border-green-300 focus:outline-none transition-all",disabled:a||l})]}),i.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-transparent dark:from-amber-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-amber-400 dark:border-amber-600",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"bg-amber-100 dark:bg-amber-800 p-1.5 rounded-lg",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-amber-600 dark:text-amber-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),i.jsx("label",{className:"font-bold text-lg text-amber-700 dark:text-amber-300",children:"Cierre de la Clase"})]}),i.jsx("textarea",{name:"momentosClase.cierre",value:f(s.momentosClase.cierre),onChange:u,rows:5,placeholder:"Describe las actividades de cierre, sntesis, metacognicin, evaluacin formativa y retroalimentacin...",className:"w-full p-3 border border-amber-200 dark:border-amber-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-amber-300 dark:focus:ring-amber-700 focus:border-amber-300 focus:outline-none transition-all",disabled:a||l})]})]}),i.jsx("div",{className:"text-right mt-6",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("button",{onClick:()=>n(e.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:a||l,children:" Eliminar Plan"}),i.jsxs("button",{onClick:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:a||l,children:[l&&i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},tst=({userId:e})=>{const{actividades:t,save:r}=Yat(e),[n,a]=w.useState("list"),[s,o]=w.useState(null),[l,c]=w.useState(!1),[u,d]=w.useState(!1),f={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[A,m]=w.useState(f);w.useEffect(()=>{n==="summary"&&s&&g()},[n,s,e]);const g=async()=>{if(s)try{d(!1)}catch(I){console.error("Error al verificar evento en calendario:",I)}},x=I=>{const{name:T,value:k}=I.target;m(B=>({...B,[T]:k}))},v=(I,T,k)=>{m(B=>({...B,tareas:B.tareas.map(M=>M.id===I?{...M,[T]:k}:M)}))},y=()=>{m(I=>({...I,tareas:[...I.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},N=I=>{m(T=>({...T,tareas:T.tareas.filter(k=>k.id!==I)}))},C=async I=>{I.preventDefault(),c(!0);const T=`Eres un especialista en objetivos educacionales segn el currculum nacional chileno. Basado en la siguiente informacin de una actividad pedaggica, genera un objetivo claro y conciso para esta.
    - Nombre: ${A.nombre}
    - Descripcin: ${A.descripcion}
    - Tareas: ${A.tareas.map(k=>k.descripcion).join(", ")}
    
    El objetivo debe:
    - Ser breve y conciso (mximo 120 caracteres)
    - Empezar con un verbo en infinitivo (como establece el MINEDUC)
    - Enfocarse en el propsito principal de la actividad
    - Estar alineado con los aprendizajes esperados del currculum nacional
    - Ser medible y observable`;try{FR("Planificacin - Actividad Calendario");const k=oa.currentUser,B=k?await k.getIdToken():null;if(!B)throw new Error("No se pudo obtener el token de autenticacin");const M=await fetch("/api/generarObjetivoActividad",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${B}`},body:JSON.stringify({prompt:T,formData:A})});let P="No generado";M.ok?P=(await M.json()).objetivo||P:(console.error("Error al generar objetivo con IA:",await M.text()),alert("Hubo un error al generar el objetivo. La actividad se guardar sin l."));const S={...A,objetivo:P},L=await r(S),H={...S,id:L};o(H),a("summary")}catch(k){console.error("Error al guardar actividad:",k),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}finally{c(!1)}},_=I=>{console.log("Agregando al calendario:",I),d(!0)},j="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return n==="form"?i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:i.jsxs("form",{onSubmit:C,className:"space-y-6",children:[i.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:"Detalles de la Actividad"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("input",{name:"nombre",value:A.nombre,onChange:x,placeholder:"Nombre de la Actividad",className:j,required:!0,disabled:l}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("input",{name:"fecha",type:"date",value:A.fecha,onChange:x,className:j,required:!0,disabled:l}),i.jsx("input",{name:"hora",type:"time",value:A.hora,onChange:x,className:j,required:!0,disabled:l})]}),i.jsx("textarea",{name:"descripcion",value:A.descripcion,onChange:x,placeholder:"Descripcin (objetivos, contenidos, metodologa)",rows:4,className:j,required:!0,disabled:l}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("input",{name:"ubicacion",value:A.ubicacion,onChange:x,placeholder:"Ubicacin",className:j,required:!0,disabled:l}),i.jsx("input",{name:"participantes",value:A.participantes,onChange:x,placeholder:"Participantes",className:j,required:!0,disabled:l})]}),i.jsx("textarea",{name:"recursosGenerales",value:A.recursosGenerales,onChange:x,placeholder:"Recursos Generales Necesarios",rows:2,className:j,disabled:l})]})]}),i.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),i.jsx("button",{type:"button",onClick:y,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:l,children:"+ Agregar Tarea"})]}),i.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:A.tareas.map((I,T)=>i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[i.jsx("button",{type:"button",onClick:()=>N(I.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:l,children:""}),i.jsx("textarea",{value:I.descripcion,onChange:k=>v(I.id,"descripcion",k.target.value),placeholder:`Descripcin de la Tarea ${T+1}`,rows:2,className:j,required:!0,disabled:l}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[i.jsx("input",{value:I.responsable,onChange:k=>v(I.id,"responsable",k.target.value),placeholder:"Responsable",className:j,required:!0,disabled:l}),i.jsx("input",{value:I.recursos,onChange:k=>v(I.id,"recursos",k.target.value),placeholder:"Recursos Necesarios",className:j,disabled:l})]})]},I.id))})]}),i.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[i.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),i.jsx("p",{className:"text-sm",children:"Este objetivo se generar automticamente a partir de la descripcin y las tareas ingresadas. Una vez guardada la actividad, podr revisar y ajustar el objetivo propuesto por el sistema."})]}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx("button",{type:"button",onClick:()=>a("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:l,children:"Cancelar"}),i.jsx("button",{type:"submit",disabled:l,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:l?i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&s?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-bold text-lg",children:"Actividad Planificada con xito!"}),i.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuacin."})]})]}),i.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),i.jsxs("div",{className:"space-y-4 text-sm",children:[i.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[i.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),i.jsx("span",{children:s.nombre})]}),i.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[i.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),i.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),i.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[i.jsx("p",{className:"font-bold text-slate-500",children:"Descripcin:"}),i.jsx("p",{children:s.descripcion})]}),i.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[i.jsx("strong",{className:"text-slate-500",children:"Ubicacin:"}),i.jsx("span",{children:s.ubicacion})]}),i.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[i.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),i.jsx("span",{children:s.participantes})]}),i.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[i.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),i.jsx("p",{children:s.recursosGenerales})]}),i.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[i.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),i.jsx("p",{children:s.objetivo})]})]}),i.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[i.jsx("p",{className:"text-sm",children:"Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),i.jsx("button",{onClick:()=>_(s),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?" Aadido al Calendario":"Aadir al Calendario"})]})]}),i.jsx("button",{onClick:()=>{a("list"),o(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),i.jsx("button",{onClick:()=>{a("form"),m(f)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),i.jsx("div",{className:"space-y-3",children:t.length>0?t.map(I=>i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:I.nombre}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(I.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",I.ubicacion]})]},I.id)):i.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},RJ=({currentUser:e})=>{const t=(e==null?void 0:e.uid)||(e==null?void 0:e.id)||(e==null?void 0:e.email)||"";console.log(" PlanificacionDocente - Usuario actual:",{uid:e==null?void 0:e.uid,id:e==null?void 0:e.id,email:e==null?void 0:e.email,nombreCompleto:e==null?void 0:e.nombreCompleto,usuarioSeleccionado:t});const r=t&&t.length>0;console.log(" ID de usuario vlido:",r);const{planificaciones:n,save:a,update:s,remove:o,loading:l,diagnosticarYReparar:c}=Xat(r?t:null),u={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[d,f]=w.useState(u),[A,m]=w.useState(null),[g,x]=w.useState(!1),[v,y]=w.useState(null),[N,C]=w.useState("unidad"),[_,j]=w.useState(null),[I,T]=w.useState(null),[k,B]=w.useState([]),[M,P]=w.useState([]),[S,L]=w.useState(""),[H,q]=w.useState(""),[Q,z]=w.useState("planificacion"),[K,Z]=w.useState(null),[U,Y]=w.useState(!1),R=(ge,xe)=>{A&&T({planId:A.id,lessonIndex:ge,lessonData:xe})},D=ge=>{m(ge),f({asignatura:ge.asignatura,nivel:ge.nivel,nombreUnidad:ge.nombreUnidad,contenidos:ge.contenidos,cantidadClases:ge.cantidadClases,observaciones:ge.observaciones,ideasParaUnidad:ge.ideasParaUnidad})},W=async ge=>{if(window.confirm("Ests seguro de que quieres eliminar esta planificacin?"))try{await o(ge),(A==null?void 0:A.id)===ge&&m(null)}catch(xe){console.error("Error al eliminar planificacin:",xe),alert("No se pudo eliminar la planificacin.")}},J=async ge=>{if(window.confirm("Ests seguro de que quieres eliminar este plan de clase?"))try{await o(ge),j(null)}catch(xe){console.error("Error al eliminar plan de clase:",xe),alert("No se pudo eliminar el plan de clase.")}},le=w.useMemo(()=>e.asignaturas||[],[e.asignaturas]),ie=w.useMemo(()=>{const ge=e.cursos||[],xe=new Set;return ge.forEach(Ue=>{Ue.startsWith("1")?xe.add("1 Medio"):Ue.startsWith("2")?xe.add("2 Medio"):Ue.startsWith("3")?xe.add("3 Medio"):Ue.startsWith("4")&&xe.add("4 Medio")}),Array.from(xe)},[e.cursos]);w.useEffect(()=>{f(ge=>({...ge,asignatura:le[0]||"",nivel:ie[0]||""}))},[le,ie]);const re=ge=>{const{name:xe,value:Ue}=ge.target;f(qe=>({...qe,[xe]:xe==="cantidadClases"?parseInt(Ue,10):Ue}))};w.useEffect(()=>{const ge=J0e(xe=>{const Ue=xe.filter(qe=>Array.isArray(qe.tags)&&qe.tags.includes("planificacion"));B(Ue)});return()=>{try{typeof ge=="function"&&ge()}catch{}}},[]);const ce=ge=>{P(xe=>xe.includes(ge)?xe.filter(Ue=>Ue!==ge):[...xe,ge])},oe=()=>{const{asignatura:ge,nivel:xe,nombreUnidad:Ue,contenidos:qe,cantidadClases:Ze,observaciones:We,ideasParaUnidad:me}=d,Ve=k.filter(Ie=>M.includes(Ie.id)),Xe=Ve.length>0?`

Documentos institucionales a considerar (Subdireccin):
${Ve.map(Ie=>`- ${Ie.title}${Ie.description?`: ${Ie.description}`:""}`).join(`
`)}

Usa estas referencias para alinear la planificacin con los lineamientos institucionales.`:"";return`Eres un experto diseador curricular para la educacin media tcnico profesional en Chile. Tu tarea es generar una planificacin de unidad didctica siguiendo fielmente las bases curriculares y los objetivos de aprendizaje del Currculum Nacional Chileno (MINEDUC) para ${ge} en ${xe}. La planificacin debe presentarse en formato JSON estructurado.

    **Informacin Base:**
    - Asignatura: ${ge}
    - Nivel: ${xe}
    - Nombre de la Unidad: "${Ue}"
    - Contenidos clave a trabajar (insumo principal): "${qe}"
    - Cantidad de clases para la unidad: ${Ze}
    - Ideas y perspectiva del docente para la unidad: "${me||"Ninguna. S creativo."}"
    - Observaciones y nfasis del docente: "${We||"Ninguna"}"
    
    **Orientaciones Curriculares Nacionales:**
    - Asegrate que los objetivos estn alineados con las Bases Curriculares del MINEDUC para ${ge} en ${xe}.
    - Contempla los Objetivos de Aprendizaje (OA) oficiales del currculum en lnea chileno.
    - Incorpora los Objetivos de Aprendizaje Transversales (OAT) cuando sea apropiado.
    - Para niveles tcnico-profesionales, considera los perfiles de egreso de cada especialidad.

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluacin general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${Ze} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje especfico para la leccin, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarn en la leccin.
        - **habilidadesBloom**: La habilidad principal de la Taxonoma de Bloom que se trabajar (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la leccin con una habilidad del perfil de egreso (ej: "Pensamiento crtico", "Colaboracin").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el nmero de clase entre parntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podra realizar un trabajo interdisciplinario.

    Asegrate de que el contenido generado sea coherente, pedaggicamente slido y est directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.${Xe}`},be=async ge=>{ge.preventDefault(),x(!0),y(null);try{FR("Planificacin - Unidad");const xe=oe(),Ue=oa.currentUser,qe=Ue?await Ue.getIdToken():null;if(!qe)throw new Error("No se pudo obtener el token de autenticacin");const Ze=await fetch("/api/generarUnidadPlanificacion",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${qe}`},body:JSON.stringify({prompt:xe,unidadFormData:d})});if(!Ze.ok){const Ve=await Ze.text();throw console.error("Error response from backend:",Ve),new Error(`Error al generar la unidad con IA: ${Ze.statusText}`)}const We=await Ze.json(),me={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Unidad",asignatura:d.asignatura,nivel:d.nivel,nombreUnidad:d.nombreUnidad,contenidos:d.contenidos,cantidadClases:d.cantidadClases,observaciones:d.observaciones,ideasParaUnidad:d.ideasParaUnidad,objetivosAprendizaje:We.objetivosAprendizaje,indicadoresEvaluacion:We.indicadoresEvaluacion,detallesLeccion:We.detallesLeccion,documentosInstitucionales:k.filter(Ve=>M.includes(Ve.id)).map(Ve=>({id:Ve.id,title:Ve.title}))};if(A)await s(A.id,me),m({...me,id:A.id});else{const Ve=await a(me);m({...me,id:Ve})}}catch(xe){console.error("Error al generar planificacin con IA",xe),y("Ocurri un error al contactar con la IA. Verifique la configuracin y reintente.")}finally{x(!1)}},X=async(ge,xe)=>{x(!0),y(null);const Ue=()=>`Eres un experto pedagogo chileno especialista en diseo de planes de clase alineados con el currculum nacional. A partir de la siguiente informacin de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${xe.asignatura}
    - Nivel: ${xe.nivel}
    - Objetivo de la clase: ${ge.objetivosAprendizaje}
    - Contenidos: ${ge.contenidosConceptuales}
    - Actividades sugeridas: ${ge.actividades}
    
    **Orientaciones didcticas**:
    - El plan debe seguir el modelo de diseo instruccional del Ministerio de Educacin de Chile.
    - Incluir estrategias de aprendizaje activo y centrado en el estudiante.
    - Incorporar metodologas que desarrollen habilidades del siglo XXI segn el currculum chileno.
    - Considerar momentos para activacin de conocimientos previos, desarrollo de aprendizajes y metacognicin/evaluacin.
    
    Responde SLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{FR("Planificacin - Utilizar Clase");const qe=Ue(),Ze=oa.currentUser,We=Ze?await Ze.getIdToken():null;if(!We)throw new Error("No se pudo obtener el token de autenticacin");const me=await fetch("/api/generarClasePlanificacion",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${We}`},body:JSON.stringify({prompt:qe,unitPlan:xe,lessonDetail:ge,currentUser:e})});if(!me.ok){const Ie=await me.text();throw console.error("Error response from backend:",Ie),new Error(`Error al generar el plan de clase con IA: ${me.statusText}`)}const Ve=await me.json(),Xe={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Clase",asignatura:xe.asignatura,nivel:xe.nivel,contenidos:ge.contenidosConceptuales,observaciones:"",nombreClase:ge.actividades,duracionClase:80,momentosClase:Ve,detalleLeccionOrigen:ge};await a(Xe),alert('Plan de clase generado y guardado en la pestaa "Clase"!'),C("clase")}catch(qe){console.error("Error al generar plan de clase con IA",qe),y("No se pudo generar el plan de clase. Intntelo de nuevo.")}finally{x(!1)}},je=async ge=>{if(I)try{const{planId:xe,lessonIndex:Ue}=I,qe=n.find(me=>me.id===xe&&me.tipo==="Unidad");if(!qe)return;const Ze=[...qe.detallesLeccion];Ze[Ue]=ge;const We={...qe,detallesLeccion:Ze};await s(xe,We),m(We),T(null)}catch(xe){console.error("Error al actualizar leccin:",xe),alert("Error al actualizar la leccin. Por favor, intente nuevamente.")}},De="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",ke=async()=>{try{console.log(" Recargando planificaciones manualmente...");const{getPlanificacionesByUser:ge}=await Ss(async()=>{const{getPlanificacionesByUser:Ue}=await Promise.resolve().then(()=>PR);return{getPlanificacionesByUser:Ue}},void 0);if(!t){console.warn(" No hay userId para recargar planificaciones");return}const xe=await ge(t);console.log(` Obtenidas ${xe.length} planificaciones frescas`),alert(`Se han encontrado ${xe.length} planificaciones en la base de datos. Recargue la pgina para ver los cambios.`),window.location.reload()}catch(ge){console.error(" Error recargando planificaciones:",ge),alert("Hubo un error al recargar las planificaciones. Intente recargar la pgina manualmente.")}},[ue,we]=w.useState({visible:!1,ejecutando:!1,resultado:null}),Ae=async()=>{we(xe=>({...xe,ejecutando:!0,resultado:null}));const ge=await c();we(xe=>({...xe,ejecutando:!1,resultado:ge}))},de=()=>{var ge;return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Complete los campos y use la IA para crear una planificacin de unidad estructurada."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>we(xe=>({...xe,visible:!xe.visible})),className:"bg-slate-600 hover:bg-slate-700 text-white px-3 py-1 rounded-md text-sm",children:"Diagnstico"}),i.jsxs("button",{onClick:ke,className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-md text-sm flex items-center gap-1",children:[i.jsx(TS,{className:"w-4 h-4"}),i.jsx("span",{children:"Recargar"})]})]})]}),ue.visible&&i.jsxs("div",{className:"mb-6 p-4 border border-slate-300 dark:border-slate-600 rounded-lg",children:[i.jsx("h3",{className:"font-bold text-lg mb-2",children:"Herramienta de Diagnstico"}),i.jsx("p",{className:"text-sm text-slate-500 mb-3",children:"Esta herramienta intentar resolver problemas con las planificaciones que no aparecen en el historial."}),ue.resultado&&i.jsx("div",{className:`p-3 mb-3 rounded-md ${ue.resultado.status==="ok"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200":ue.resultado.status==="repaired"?"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200"}`,children:ue.resultado.message}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:Ae,disabled:ue.ejecutando,className:"bg-slate-700 hover:bg-slate-800 text-white px-4 py-2 rounded-md flex items-center gap-2 disabled:opacity-50",children:ue.ejecutando?i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):i.jsx("span",{children:"Ejecutar diagnstico"})}),((ge=ue.resultado)==null?void 0:ge.status)==="repaired"&&i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-md",children:"Recargar pgina"})]})]}),l?i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):i.jsxs("form",{onSubmit:be,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsx("select",{name:"asignatura",value:d.asignatura,onChange:re,className:De,required:!0,disabled:g,children:le.map(xe=>i.jsx("option",{value:xe,children:xe},xe))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),i.jsx("select",{name:"nivel",value:d.nivel,onChange:re,className:De,required:!0,disabled:g,children:ie.map(xe=>i.jsx("option",{value:xe,children:xe},xe))})]}),i.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[i.jsx("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre de la Unidad"}),i.jsx("input",{type:"text",name:"nombreUnidad",value:d.nombreUnidad,onChange:re,className:De,placeholder:"Ej: Introduccin a la Programacin",required:!0,disabled:g})]}),i.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[i.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenidos Clave"}),i.jsx("textarea",{name:"contenidos",value:d.contenidos,onChange:re,rows:3,placeholder:"Describe los temas, conceptos y habilidades principales que se deben abordar en la unidad. S lo ms especfico posible.",className:De,required:!0,disabled:g})]}),i.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[i.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),i.jsx("textarea",{name:"ideasParaUnidad",value:d.ideasParaUnidad,onChange:re,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificacin (ej: enfocar en trabajo colaborativo, usar casos prcticos, conectar con la actualidad).",className:De,disabled:g})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),i.jsx("input",{type:"number",name:"cantidadClases",value:d.cantidadClases,onChange:re,className:De,min:"1",max:"20",disabled:g})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (nfasis)"}),i.jsx("textarea",{name:"observaciones",value:d.observaciones,onChange:re,rows:1,placeholder:"Ej: clase prctica, modelo ABP, juego, reforzamiento...",className:De,disabled:g})]})]}),i.jsx("div",{className:"pt-4 text-right",children:i.jsx("button",{type:"submit",disabled:g||l,className:"bg-gradient-to-r from-indigo-600 to-indigo-700 text-white font-semibold py-3 px-6 rounded-lg hover:from-indigo-700 hover:to-indigo-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[180px] shadow-md hover:shadow-lg transition-all",children:g?i.jsx(TS,{className:"w-5 h-5 animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(lx,{className:"w-5 h-5"}),i.jsx("span",{children:A?"Regenerar Plan":"Generar con IA"})]})})}),v&&i.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:v})]})]}),A&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisin y Edicin"}),i.jsx(Zat,{plan:A,onEditLesson:R,onUseLesson:X,onUpdatePlan:s,isLoading:g})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),l?i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):i.jsxs("div",{className:"space-y-4",children:[console.log(" RENDERIZANDO HISTORIAL - Cantidad de planificaciones:",n.length),console.log(" RENDERIZANDO HISTORIAL - Cantidad de unidades:",n.filter(xe=>xe.tipo==="Unidad").length),n.length>0?n.filter(xe=>xe.tipo==="Unidad").map(xe=>i.jsx("div",{className:`p-5 border rounded-xl transition-all ${(A==null?void 0:A.id)===xe.id?"bg-indigo-50/50 border-indigo-200 dark:bg-indigo-900/20 dark:border-indigo-500/30 shadow-lg shadow-indigo-100/20 dark:shadow-indigo-900/10":"bg-white hover:bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:hover:bg-slate-700/50"}`,children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:xe.nombreUnidad}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(xe.fechaCreacion).toLocaleString("es-CL")]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",xe.contenidos]}),i.jsx("div",{className:"mt-2 flex items-center gap-2",children:xe.reflexionUnidad&&xe.reflexionUnidad.fortalezas&&xe.reflexionUnidad.mejoras&&xe.reflexionUnidad.debilidades?i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300",children:"Reflexin completa"}):i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300",children:"Reflexin pendiente"})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>D(xe),className:"inline-flex items-center gap-1 px-3 py-1.5 text-indigo-700 bg-indigo-50 hover:bg-indigo-100 dark:text-indigo-300 dark:bg-indigo-900/30 dark:hover:bg-indigo-900/50 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",disabled:g,children:[i.jsx(jG,{className:"w-4 h-4"}),i.jsx("span",{children:"Editar"})]}),i.jsxs("button",{onClick:()=>W(xe.id),title:"Eliminar",className:"inline-flex items-center gap-1 px-3 py-1.5 text-red-700 bg-red-50 hover:bg-red-100 dark:text-red-300 dark:bg-red-900/30 dark:hover:bg-red-900/50 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",disabled:g,children:[i.jsx(Vn,{className:"w-4 h-4"}),i.jsx("span",{children:"Eliminar"})]})]})]})},xe.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})]})]})]})},ae=()=>{const ge=n.filter(xe=>xe.tipo==="Clase").sort((xe,Ue)=>new Date(Ue.fechaCreacion).getTime()-new Date(xe.fechaCreacion).getTime());return _?i.jsx(est,{plan:_,onBack:()=>j(null),onDelete:J,onSave:async xe=>{try{await s(xe.id,xe),j(xe)}catch(Ue){console.error("Error al actualizar plan de clase:",Ue),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:g}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-lg border border-slate-100 dark:border-slate-700/50",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(K5e,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Planes de Clase"})]}),l?i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):i.jsx("div",{className:"space-y-4",children:ge.length>0?ge.map(xe=>i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:xe.nombreClase}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(xe.fechaCreacion).toLocaleString("es-CL")]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",xe.contenidos]})]}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("button",{onClick:()=>j(xe),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},xe.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaa 'Unidad'."})})]})},fe=()=>{if(!((e==null?void 0:e.profile)==="SUBDIRECCION"))return i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Esta seccin est disponible solo para Subdireccin."})});const xe=me=>{var Xe;const Ve=((Xe=me.target.files)==null?void 0:Xe[0])||null;Z(Ve)},Ue=async me=>{if(me.preventDefault(),!(!K||!S.trim())){Y(!0);try{const Ve=Q.split(",").map(et=>et.trim()).filter(Boolean);Ve.includes("planificacion")||Ve.push("planificacion");const Xe=await Z0e(S.trim(),H.trim(),Ve),{storagePath:Ie,contentType:Be}=await eAe(Xe,K);await V_(Xe,Ie,S.trim(),H.trim(),Ve,Be),L(""),q(""),z("planificacion"),Z(null),alert("Documento subido e indexado correctamente.")}catch(Ve){console.error("Error subiendo documento de planificacin:",Ve),alert("No se pudo subir/indexar el documento.")}finally{Y(!1)}}},qe=async me=>{try{if(!me.storagePath)return alert("El documento no tiene archivo asociado.");await V_(me.id,me.storagePath,me.title,me.description||"",me.tags||["planificacion"],me.contentType),alert("Reindexacin encolada.")}catch(Ve){console.error("Error reindexando:",Ve),alert("Error reindexando el documento.")}},Ze=async me=>{try{if(!me.storagePath)return alert("No hay archivo asociado.");const Ve=await LA(Od(Zx,me.storagePath));window.open(Ve,"_blank")}catch(Ve){console.error("Error obteniendo URL:",Ve),alert("No se pudo abrir el documento.")}},We=async me=>{if(confirm(`Eliminar "${me.title}"? Esta accin no se puede deshacer.`))try{await tAe(me.id)}catch(Ve){console.error("Error eliminando documento:",Ve),alert("No se pudo eliminar el documento.")}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Repositorio institucional para Planificacin"}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:["Suba documentos (PDF/TXT/DOCX) que el profesorado podr seleccionar al planificar. Se etiquetarn con ",i.jsx("strong",{children:"planificacion"}),"."]}),i.jsxs("form",{onSubmit:Ue,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-1",children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Ttulo"}),i.jsx("input",{value:S,onChange:me=>L(me.target.value),className:De,placeholder:"Ej: PEI 2025",required:!0})]}),i.jsxs("div",{className:"md:col-span-1",children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tags (coma)"}),i.jsx("input",{value:Q,onChange:me=>z(me.target.value),className:De})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),i.jsx("textarea",{value:H,onChange:me=>q(me.target.value),rows:2,className:De,placeholder:"Breve descripcin"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Archivo"}),i.jsx("input",{type:"file",accept:".pdf,.txt,.docx,application/pdf,text/plain,application/vnd.openxmlformats-officedocument.wordprocessingml.document",onChange:xe,className:"block w-full"})]}),i.jsx("div",{className:"md:col-span-2 flex justify-end",children:i.jsxs("button",{disabled:U||!K||!S.trim(),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg disabled:opacity-50 flex items-center gap-2",children:[U?i.jsx(TS,{className:"w-4 h-4 animate-spin"}):i.jsx(gi,{className:"w-4 h-4"}),i.jsx("span",{children:"Subir e indexar"})]})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Documentos disponibles"}),k.length===0?i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'An no hay documentos institucionales con la etiqueta "planificacion".'}):i.jsx("div",{className:"space-y-3",children:k.map(me=>i.jsxs("div",{className:"p-4 rounded-lg border dark:border-slate-700 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-100",children:me.title}),me.description&&i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:me.description}),Array.isArray(me.tags)&&me.tags.length>0&&i.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:me.tags.map(Ve=>i.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300",children:Ve},Ve))})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>Ze(me),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm",children:"Abrir"}),i.jsx("button",{onClick:()=>qe(me),className:"text-amber-600 hover:text-amber-800 dark:text-amber-400 dark:hover:text-amber-300 text-sm",children:"Reindexar"}),i.jsx("button",{onClick:()=>We(me),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 text-sm",children:"Eliminar"})]})]},me.id))})]})]})};return w.useEffect(()=>{if((async()=>{try{if(console.log(" Diagnstico de planificaciones - Inicio"),console.log(`userId: ${t}`),!t){console.warn(" Sin userId, no se pueden obtener planificaciones");return}const{collection:xe,query:Ue,where:qe,getDocs:Ze}=await Ss(async()=>{const{collection:Xe,query:Ie,where:Be,getDocs:et}=await Promise.resolve().then(()=>T1);return{collection:Xe,query:Ie,where:Be,getDocs:et}},void 0),{db:We}=await Ss(async()=>{const{db:Xe}=await Promise.resolve().then(()=>zM);return{db:Xe}},void 0),me=Ue(xe(We,"planificaciones"),qe("userId","==",t)),Ve=await Ze(me);if(console.log(` Documentos en Firestore: ${Ve.docs.length}`),Ve.docs.length>0){console.log(" Primer documento:",Ve.docs[0].data());const Xe=Ve.docs.filter(Be=>Be.data().tipo==="Unidad");console.log(` Documentos de tipo Unidad: ${Xe.length}`);const Ie=Xe.filter(Be=>Array.isArray(Be.data().detallesLeccion)&&Be.data().detallesLeccion!==void 0);if(console.log(` Unidades con detallesLeccion vlidos: ${Ie.length}`),Xe.length>Ie.length){console.log(` Intentando corregir ${Xe.length-Ie.length} unidades invlidas...`);for(const Be of Xe){const et=Be.data();if(!Array.isArray(et.detallesLeccion)||et.detallesLeccion===void 0)try{console.log(` Corrigiendo documento ${Be.id}...`);const{doc:bt,updateDoc:jt}=await Ss(async()=>{const{doc:qt,updateDoc:ir}=await Promise.resolve().then(()=>T1);return{doc:qt,updateDoc:ir}},void 0);await jt(bt(We,"planificaciones",Be.id),{detallesLeccion:[]}),console.log(` Documento ${Be.id} corregido con xito`)}catch(bt){console.error(` Error al corregir documento ${Be.id}:`,bt)}}}}console.log(" Diagnstico de planificaciones - Finalizado")}catch(xe){console.error(" Error en diagnstico de planificaciones:",xe)}})(),!l){console.log(` Verificando ${n.length} planificaciones recibidas...`),console.log(" Tipos de planificaciones:",n.map(Ue=>Ue.tipo));const xe=n.filter(Ue=>Ue.tipo==="Unidad"&&(!Array.isArray(Ue.detallesLeccion)||Ue.detallesLeccion===void 0));xe.length>0&&(console.warn(` Encontradas ${xe.length} unidades con formato invlido`),xe.forEach(async Ue=>{try{await s(Ue.id,{...Ue,detallesLeccion:[]}),console.log(` Reparada planificacin ${Ue.id}`)}catch(qe){console.error(` Error al reparar planificacin ${Ue.id}:`,qe)}}))}},[t,n,l,s]),e?r?i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[i.jsx(hoe,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificacin Docente"})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-2",children:i.jsxs("nav",{className:"flex gap-2 overflow-x-auto","aria-label":"Tabs",children:[i.jsxs("button",{onClick:()=>C("unidad"),className:`shrink-0 flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${N==="unidad"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(ps,{className:"w-4 h-4"}),i.jsx("span",{children:"Unidad"})]}),i.jsxs("button",{onClick:()=>C("clase"),className:`shrink-0 flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${N==="clase"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(B3e,{className:"w-4 h-4"}),i.jsx("span",{children:"Clase"})]}),i.jsxs("button",{onClick:()=>C("calendario"),className:`shrink-0 flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${N==="calendario"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(qo,{className:"w-4 h-4"}),i.jsx("span",{children:"Actividades Calendario"})]}),i.jsxs("button",{onClick:()=>C("materiales"),className:`shrink-0 flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${N==="materiales"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(NF,{className:"w-4 h-4"}),i.jsx("span",{children:"Mis Materiales"})]}),(e==null?void 0:e.profile)==="SUBDIRECCION"&&i.jsxs("button",{onClick:()=>C("config"),className:`shrink-0 flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${N==="config"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(jG,{className:"w-4 h-4"}),i.jsx("span",{children:"Configuracin"})]})]})}),N==="unidad"&&i.jsxs("div",{className:"space-y-6",children:[(e==null?void 0:e.profile)==="SUBDIRECCION"&&i.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4 flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-amber-800 dark:text-amber-200",children:["Puede cargar o gestionar documentos institucionales desde la pestaa ",i.jsx("strong",{children:"Configuracin"}),"."]}),i.jsx("button",{onClick:()=>C("config"),className:"text-sm px-3 py-1.5 rounded-lg bg-amber-600 hover:bg-amber-700 text-white",children:"Ir a Configuracin"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Documentacin institucional (opcional)"}),k.length===0?i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Subdireccin an no ha cargado documentos. Cuando existan, podrs seleccionarlos aqu para considerar en la generacin."}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:k.map(ge=>i.jsxs("label",{className:"flex items-start gap-2 p-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/30 cursor-pointer",children:[i.jsx("input",{type:"checkbox",className:"mt-1",checked:M.includes(ge.id),onChange:()=>ce(ge.id)}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-100",children:ge.title}),ge.description&&i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:ge.description})]})]},ge.id))})]}),de()]}),N==="clase"&&ae(),N==="calendario"&&i.jsx(tst,{userId:t}),N==="materiales"&&i.jsx(qat,{userId:t,planificaciones:n}),N==="config"&&fe(),I&&i.jsx(Jat,{lesson:I.lessonData,onClose:()=>T(null),onSave:je,isLoading:g})]}):i.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-700 rounded-lg p-8 max-w-2xl mx-auto my-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-amber-800 dark:text-amber-300 mb-4",children:"Error de identificacin de usuario"}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-md p-4 mb-4 overflow-auto max-h-40",children:i.jsx("pre",{className:"text-xs text-slate-600 dark:text-slate-300 whitespace-pre-wrap",children:JSON.stringify(e,null,2)})}),i.jsx("p",{className:"text-amber-700 dark:text-amber-400 mb-4",children:"No se pudo determinar su identificador de usuario para cargar las planificaciones. Este problema puede deberse a:"}),i.jsxs("ul",{className:"list-disc pl-5 text-amber-700 dark:text-amber-400 mb-6 space-y-2",children:[i.jsx("li",{children:"La sesin no se ha inicializado correctamente"}),i.jsx("li",{children:"Su cuenta no tiene asignado un ID vlido"}),i.jsx("li",{children:"Hay un problema en la sincronizacin con la base de datos"})]}),i.jsx("div",{className:"flex justify-center",children:i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-600 hover:bg-amber-700 text-white py-2 px-6 rounded-md transition-colors",children:"Recargar aplicacin"})})]}):i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),i.jsx("p",{className:"text-sm text-slate-400",children:"No se recibieron datos de usuario"})]})})},jT="events",rst=async()=>{try{const e=Bt(ht(Ar,jT),Xt("date","asc"));return(await Ir(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener eventos:",e),new Error("No se pudieron cargar los eventos del calendario")}},nst=async e=>{try{return{id:(await ln(ht(Ar,jT),{...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear evento:",t),new Error("No se pudo crear el evento del calendario")}},ast=async(e,t)=>{try{const r=Wt(Ar,jT,e);await qi(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",e),new Error("No se pudo actualizar el evento del calendario")}},sst=async e=>{try{const t=Wt(Ar,jT,e);await ca(t)}catch(t){throw console.error("Error al eliminar evento:",t,"ID:",e),new Error("No se pudo eliminar el evento del calendario")}},ist=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],LJ={[An.EVALUACION]:i.jsx(ps,{className:"h-4 w-4"}),[An.ACTO]:i.jsx(moe,{className:"h-4 w-4"}),[An.ACTIVIDAD_FOCALIZADA]:i.jsx(D1,{className:"h-4 w-4"}),[An.SALIDA_PEDAGOGICA]:i.jsx(c3e,{className:"h-4 w-4"})},ost=e=>{switch(e.type){case An.EVALUACION:return`${e.subtype} - ${e.asignatura}`;case An.ACTO:return`Acto: ${e.ubicacion}`;case An.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case An.SALIDA_PEDAGOGICA:return`Salida: ${e.ubicacion}`;default:return"Evento"}},lst=({isOpen:e,onClose:t,onSave:r,onDelete:n,event:a,date:s,isLoading:o})=>{const[l,c]=w.useState({});w.useEffect(()=>{c(a||{type:An.EVALUACION,subtype:Mg.PRUEBA_PARCIAL,asignatura:ma[0],curso:ja[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[a,e]);const u="w-full rounded-md border border-white/30 bg-white/10 dark:bg-white/5 text-slate-800 dark:text-slate-100 placeholder-slate-400 backdrop-blur-md shadow-sm focus:outline-none focus:ring-4 focus:ring-yellow-400/30 focus:border-blue-300 dark:border-white/10 dark:focus:border-blue-400",d=x=>{const{name:v,value:y}=x.target;c(N=>({...N,[v]:y}))},f=x=>{c(v=>{if(v.type===An.SALIDA_PEDAGOGICA){const y=v.cursos||[],N=y.includes(x)?y.filter(C=>C!==x):[...y,x];return{...v,cursos:N.sort()}}return v})},A=x=>{var y;x.preventDefault();let v;switch(l.type){case An.EVALUACION:{const N={date:s,type:An.EVALUACION,subtype:l.subtype,asignatura:l.asignatura,curso:l.curso,contenidos:l.contenidos};(l.subtype===Mg.RUBRICA||l.subtype===Mg.PAUTA_COTEJO)&&((y=l.enlace)!=null&&y.trim())&&(N.enlace=l.enlace.trim()),v=N;break}case An.ACTO:v={date:s,type:An.ACTO,responsables:l.responsables,ubicacion:l.ubicacion,horario:l.horario};break;case An.ACTIVIDAD_FOCALIZADA:v={date:s,type:An.ACTIVIDAD_FOCALIZADA,responsables:l.responsables,ubicacion:l.ubicacion,horario:l.horario};break;case An.SALIDA_PEDAGOGICA:v={date:s,type:An.SALIDA_PEDAGOGICA,responsable:l.responsable,ubicacion:l.ubicacion,cursos:l.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(v)};if(!e)return null;const m=new Date(`${s}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),g=()=>{switch(l.type){case An.EVALUACION:return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Subtipo"}),i.jsx("select",{id:"subtype",name:"subtype",value:l.subtype,onChange:d,required:!0,className:u,children:uTe.map(x=>i.jsx("option",{value:x,children:x},x))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsx("select",{id:"asignatura",name:"asignatura",value:l.asignatura,onChange:d,required:!0,className:u,children:ma.map(x=>i.jsx("option",{value:x,children:x},x))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Curso"}),i.jsx("select",{id:"curso",name:"curso",value:l.curso,onChange:d,required:!0,className:u,children:ja.map(x=>i.jsx("option",{value:x,children:x},x))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contenidos"}),i.jsx("textarea",{id:"contenidos",name:"contenidos",value:l.contenidos||"",onChange:d,required:!0,rows:3,className:u})]}),(l.subtype===Mg.RUBRICA||l.subtype===Mg.PAUTA_COTEJO)&&i.jsxs("div",{children:[i.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),i.jsx("input",{id:"enlace",name:"enlace",type:"url",value:l.enlace||"",onChange:d,placeholder:"https://...",className:u})]})]});case An.ACTO:case An.ACTIVIDAD_FOCALIZADA:return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsables"}),i.jsx("input",{id:"responsables",name:"responsables",type:"text",value:l.responsables||"",onChange:d,required:!0,className:u})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicacin"}),i.jsxs("div",{className:"relative",children:[i.jsx(LN,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),i.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:l.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Horario"}),i.jsxs("div",{className:"relative",children:[i.jsx(Dc,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),i.jsx("input",{id:"horario",name:"horario",type:"text",value:l.horario||"",onChange:d,required:!0,className:`${u} pl-9`})]})]})]});case An.SALIDA_PEDAGOGICA:return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsable"}),i.jsx("input",{id:"responsable",name:"responsable",type:"text",value:l.responsable||"",onChange:d,required:!0,className:u})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicacin/Destino"}),i.jsxs("div",{className:"relative",children:[i.jsx(LN,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),i.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:l.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),i.jsxs("fieldset",{children:[i.jsx("legend",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),i.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border border-white/30 dark:border-white/10 p-2 rounded-md text-slate-700 dark:text-slate-300 bg-white/5 backdrop-blur-md",children:ja.map(x=>i.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:(l.cursos||[]).includes(x),onChange:()=>f(x),className:"h-4 w-4 rounded text-yellow-500 focus:ring-yellow-400"}),i.jsx("span",{children:x})]},x))})]})]});default:return null}};return i.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center p-4",onClick:t,style:{background:"rgba(2, 6, 23, 0.55)"},children:i.jsx("div",{className:"relative w-full max-w-lg overflow-hidden rounded-2xl border border-white/20 bg-gradient-to-br from-blue-50/70 via-white/50 to-yellow-50/70 dark:from-slate-900/70 dark:via-slate-900/60 dark:to-slate-900/70 backdrop-blur-2xl shadow-2xl",onClick:x=>x.stopPropagation(),children:i.jsxs("form",{onSubmit:A,children:[i.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:a?"Editar Evento":"Agregar Evento"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-300/90 font-semibold",children:m})]}),i.jsx("button",{type:"button",onClick:t,className:"rounded-full p-2 hover:bg-white/20 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:i.jsx(xo,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),i.jsx("select",{id:"type",name:"type",value:l.type,onChange:d,className:u,children:Object.values(An).map(x=>i.jsx("option",{value:x,children:x},x))})]}),g()]})]}),i.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-t border-white/20 flex justify-between items-center",children:[i.jsx("div",{children:a&&n&&i.jsxs("button",{type:"button",onClick:n,disabled:o,className:"inline-flex items-center gap-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:[i.jsx(Vn,{className:"h-4 w-4"}),o?"Eliminando...":"Eliminar"]})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{type:"button",onClick:t,disabled:o,className:"inline-flex items-center gap-2 rounded-lg bg-white/20 px-4 py-2 font-semibold text-slate-800 hover:bg-white/30 backdrop-blur-md dark:bg-white/10 dark:text-slate-100 dark:hover:bg-white/20 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:[i.jsx(xo,{className:"h-4 w-4"}),"Cancelar"]}),i.jsxs("button",{type:"submit",disabled:o,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-yellow-500 px-4 py-2 font-bold text-white hover:opacity-95 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-300/40",children:[i.jsx(Fl,{className:"h-4 w-4"}),o?"Guardando...":"Guardar"]})]})]})]})})})},cst=({profile:e})=>{const[t,r]=w.useState(new Date),[n,a]=w.useState([]),[s,o]=w.useState(!1),[l,c]=w.useState(null),[u,d]=w.useState(!1),[f,A]=w.useState(Object.values(An)),[m,g]=w.useState(!1),[x,v]=w.useState(null),[y,N]=w.useState(null),C=w.useCallback(async()=>{o(!0);try{const P=await rst();a(P),c(null)}catch(P){console.error("Error al cargar eventos desde Firestore",P),c("No se pudieron cargar los eventos desde la nube.")}finally{o(!1)}},[]);w.useEffect(()=>{C()},[C]);const _=w.useMemo(()=>{const P=t.getFullYear(),S=t.getMonth(),L=new Date(P,S,1).getDay(),H=new Date(P,S+1,0).getDate(),q=[];let Q=1;for(let z=0;z<6;z++){const K=[];for(let Z=0;Z<7;Z++)z===0&&Z<L||Q>H?K.push(null):(K.push(new Date(P,S,Q)),Q++);if(q.push(K),Q>H)break}return q},[t]),j=P=>{A(S=>S.includes(P)?S.filter(L=>L!==P):[...S,P])},I=()=>{f.length===Object.values(An).length?A([]):A(Object.values(An))},T=P=>{e!==It.ESTUDIANTE&&(v(P.toISOString().split("T")[0]),N(null),g(!0))},k=(P,S)=>{S.stopPropagation(),e!==It.ESTUDIANTE&&(v(P.date),N(P),g(!0))},B=async P=>{d(!0);try{y?await ast(y.id,P):await nst(P),await C(),g(!1)}catch(S){console.error("Error al guardar evento:",S);const L=S instanceof Error?S.message:"Error desconocido";c(`Error al guardar el evento: ${L}`)}finally{d(!1)}},M=async()=>{if(y){d(!0);try{await sst(y.id),await C(),g(!1)}catch(P){console.error("Error al eliminar evento:",P);const S=P instanceof Error?P.message:"Error desconocido";c(`No se pudo eliminar el evento: ${S}`)}finally{d(!1)}}};return i.jsxs("div",{className:`relative overflow-hidden rounded-xl p-6 md:p-8 shadow-md space-y-6 animate-fade-in
                    bg-gradient-to-br from-blue-50 via-white to-yellow-50 dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[i.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[i.jsx("div",{className:"absolute -top-20 -left-16 h-64 w-64 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-yellow-300 to-yellow-200 dark:from-yellow-500/15 dark:to-yellow-400/10"}),i.jsx("div",{className:"absolute bottom-0 right-0 h-72 w-72 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-sky-300 to-blue-300 dark:from-sky-500/15 dark:to-blue-500/15"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 drop-shadow-sm",children:"Calendario Acadmico"}),i.jsx("div",{className:"text-slate-600 dark:text-slate-300 text-sm",children:s&&i.jsx("span",{className:"px-2 py-1 rounded bg-white/30 dark:bg-white/10 backdrop-blur-md",children:"Cargando"})})]}),l&&i.jsx("div",{className:"text-red-700 dark:text-red-400 bg-red-100/70 dark:bg-red-900/30 border border-red-300/50 dark:border-red-800/40 p-3 rounded-lg",children:l}),!s&&n.length===0&&i.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-yellow-400/40 bg-yellow-50/70 p-4 text-yellow-900 dark:bg-yellow-900/20 dark:text-yellow-300 backdrop-blur-md",children:[i.jsx(x4e,{className:"h-5 w-5 mt-0.5"}),i.jsx("p",{children:"No hay eventos registrados en la nube."})]}),i.jsxs("div",{className:"mb-2 rounded-xl border border-white/30 bg-white/30 dark:bg-white/10 backdrop-blur-xl p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-200 mb-2",children:[i.jsx(qC,{className:"h-4 w-4"}),i.jsx("h2",{className:"text-lg font-semibold",children:"Filtrar por tipo de evento:"})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[i.jsx("button",{onClick:I,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-600 to-yellow-500 text-white hover:opacity-95 transition-colors",children:f.length===Object.values(An).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(An).map(P=>i.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2
                ${f.includes(P)?`shadow-sm ${n1[P].color}`:"bg-white/40 text-slate-700 hover:bg-white/60 dark:bg-white/10 dark:text-slate-300 dark:hover:bg-white/20"}`,children:[i.jsx("input",{type:"checkbox",checked:f.includes(P),onChange:()=>j(P),className:"hidden"}),i.jsx("span",{className:"shrink-0",children:LJ[P]}),i.jsx("span",{children:n1[P].label})]},P))]})]}),i.jsxs("div",{className:"rounded-xl overflow-hidden border border-white/30 dark:border-white/10 backdrop-blur-xl bg-white/30 dark:bg-white/5",children:[i.jsxs("header",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-b border-white/20",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()-1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:i.jsx(RN,{className:"h-5 w-5"})}),i.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()+1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:i.jsx(m3,{className:"h-5 w-5"})})]}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 capitalize",children:t.toLocaleString("es-CL",{month:"long",year:"numeric"})}),i.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-gradient-to-r from-blue-600 to-yellow-500 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:opacity-95",children:"Hoy"})]}),i.jsx("div",{className:"grid grid-cols-7 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:ist.map(P=>i.jsx("div",{className:`text-center font-semibold text-slate-600 dark:text-slate-300 text-sm py-3
                         bg-white/40 dark:bg-white/10
                         border-b border-r border-slate-200/80 dark:border-slate-700/70`,children:P},P))}),i.jsx("div",{className:"grid grid-cols-7 grid-rows-6 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:_.flat().map((P,S)=>{const L=P&&P.toDateString()===new Date().toDateString(),H=P==null?void 0:P.toISOString().split("T")[0],q=H?n.filter(Q=>Q.date===H&&f.includes(Q.type)):[];return i.jsx("div",{onClick:()=>P&&T(P),className:`border-b border-r border-slate-200/80 dark:border-slate-700/70
                            p-2 h-36 flex flex-col overflow-hidden relative group 
                            ${P?e!==It.ESTUDIANTE?"cursor-pointer hover:bg-white/40 dark:hover:bg-white/10":"":"bg-white/30 dark:bg-white/5"}`,children:P&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:`self-end text-sm font-semibold ${L?"bg-gradient-to-r from-blue-600 to-yellow-500 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-700 dark:text-slate-300"}`,children:P.getDate()}),i.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:q.map(Q=>i.jsxs("div",{onClick:z=>k(Q,z),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${n1[Q.type].color}`,children:[i.jsx("span",{className:"shrink-0",children:LJ[Q.type]}),i.jsx("span",{className:"truncate",children:ost(Q)})]},Q.id))}),e!==It.ESTUDIANTE&&i.jsx("button",{className:`absolute bottom-1 right-1 rounded-full h-7 w-7 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity 
                                   bg-gradient-to-r from-blue-600 to-yellow-500 text-white shadow`,"aria-label":"Agregar evento",children:i.jsx(gi,{className:"h-4 w-4"})})]})},S)})})]}),m&&i.jsx(lst,{isOpen:m,onClose:()=>g(!1),onSave:B,onDelete:M,event:y,date:x,isLoading:u})]})},R9="evaluaciones_pruebas",L9="rubricas_estaticas",M9="rubricas_interactivas",ust="usuarios",kT=e=>{var a,s,o;const t=e.data()||{},r=t.fechaCreacion,n=((o=(s=(a=r==null?void 0:r.toDate)==null?void 0:a.call(r))==null?void 0:s.toISOString)==null?void 0:o.call(s))??(typeof r=="string"?r:void 0);return{id:e.id,...t,fechaCreacion:n}},dst=e=>{const t=Bt(ht(ut,R9),Xt("fechaCreacion","desc"));return lr(t,n=>e(n.docs.map(a=>kT(a))),n=>{console.error("[subscribeToPruebas]",n),e([])})},fst=async e=>{const{id:t,fechaCreacion:r,...n}=e,a=Wt(ut,R9,t),s={...n,fechaCreacion:r?xr.fromDate(new Date(r)):zn()};await bi(a,s,{merge:!0})},hst=async e=>{await ca(Wt(ut,R9,e))},Ast=e=>{const t=Bt(ht(ut,L9),Xt("fechaCreacion","desc"));return lr(t,r=>e(r.docs.map(n=>kT(n))),r=>{console.error("[subscribeToRubricasEstaticas]",r),e([])})},RR=async e=>{const{id:t,fechaCreacion:r,...n}=e,a=Wt(ut,L9,t),s={...n,fechaCreacion:r?xr.fromDate(new Date(r)):zn()};await bi(a,s,{merge:!0})},mst=async e=>{await ca(Wt(ut,L9,e))},pst=e=>{const t=Bt(ht(ut,M9),Xt("curso","asc"));return lr(t,r=>e(r.docs.map(n=>kT(n))),r=>{console.error("[subscribeToRubricasInteractivas]",r),e([])})},gst=async e=>{const t={...e,fechaCreacion:zn()};return(await ln(ht(ut,M9),t)).id},xst=async(e,t)=>{const r=Wt(ut,M9,e);await bi(r,t,{merge:!0})},vst=e=>{const t=Bt(ht(ut,ust),Xt("nombreCompleto","asc"));return lr(t,r=>e(r.docs.map(n=>kT(n))),r=>{console.error("[subscribeToAllUsers]",r),e([])})},yE=()=>{const[e,t]=w.useState(null),[r,n]=w.useState(!0);return w.useEffect(()=>{const a=Tae(HN,async s=>{if(console.log("[useAuth] FirebaseUser:",s),s&&s.email)try{const o=await ioe(s.email);console.log("[useAuth] Perfil Firestore:",o),t(o?{...o,uid:s.uid}:null)}catch(o){console.error("Error al obtener el perfil del usuario:",o),t(null)}else t(null);n(!1)});return()=>a()},[]),{currentUser:e,loading:r}};function Ta(e){"@babel/helpers - typeof";return Ta=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ta(e)}var Sl=Uint8Array,ku=Uint16Array,U9=Int32Array,ST=new Sl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),_T=new Sl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),LR=new Sl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rAe=function(e,t){for(var r=new ku(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new U9(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},nAe=rAe(ST,2),aAe=nAe.b,MR=nAe.r;aAe[28]=258,MR[258]=28;var sAe=rAe(_T,0),bst=sAe.b,MJ=sAe.r,UR=new ku(32768);for(var ts=0;ts<32768;++ts){var Im=(ts&43690)>>1|(ts&21845)<<1;Im=(Im&52428)>>2|(Im&13107)<<2,Im=(Im&61680)>>4|(Im&3855)<<4,UR[ts]=((Im&65280)>>8|(Im&255)<<8)>>1}var Xh=function(e,t,r){for(var n=e.length,a=0,s=new ku(t);a<n;++a)e[a]&&++s[e[a]-1];var o=new ku(t);for(a=1;a<t;++a)o[a]=o[a-1]+s[a-1]<<1;var l;if(r){l=new ku(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],f=o[e[a]-1]++<<d,A=f|(1<<d)-1;f<=A;++f)l[UR[f]>>c]=u}else for(l=new ku(n),a=0;a<n;++a)e[a]&&(l[a]=UR[o[e[a]-1]++]>>15-e[a]);return l},Op=new Sl(288);for(var ts=0;ts<144;++ts)Op[ts]=8;for(var ts=144;ts<256;++ts)Op[ts]=9;for(var ts=256;ts<280;++ts)Op[ts]=7;for(var ts=280;ts<288;++ts)Op[ts]=8;var pC=new Sl(32);for(var ts=0;ts<32;++ts)pC[ts]=5;var yst=Xh(Op,9,0),wst=Xh(Op,9,1),Nst=Xh(pC,5,0),Cst=Xh(pC,5,1),fO=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},uf=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},hO=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},H9=function(e){return(e+7)/8|0},iAe=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Sl(e.subarray(t,r))},Est=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Af=function(e,t,r){var n=new Error(t||Est[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,Af),!r)throw n;return n},jst=function(e,t,r,n){var a=e.length,s=0;if(!a||t.f&&!t.l)return r||new Sl(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new Sl(a*3));var u=function(be){var X=r.length;if(be>X){var je=new Sl(Math.max(X*2,be));je.set(r),r=je}},d=t.f||0,f=t.p||0,A=t.b||0,m=t.l,g=t.d,x=t.m,v=t.n,y=a*8;do{if(!m){d=uf(e,f,1);var N=uf(e,f+1,3);if(f+=3,N)if(N==1)m=wst,g=Cst,x=9,v=5;else if(N==2){var I=uf(e,f,31)+257,T=uf(e,f+10,15)+4,k=I+uf(e,f+5,31)+1;f+=14;for(var B=new Sl(k),M=new Sl(19),P=0;P<T;++P)M[LR[P]]=uf(e,f+P*3,7);f+=T*3;for(var S=fO(M),L=(1<<S)-1,H=Xh(M,S,1),P=0;P<k;){var q=H[uf(e,f,L)];f+=q&15;var C=q>>4;if(C<16)B[P++]=C;else{var Q=0,z=0;for(C==16?(z=3+uf(e,f,3),f+=2,Q=B[P-1]):C==17?(z=3+uf(e,f,7),f+=3):C==18&&(z=11+uf(e,f,127),f+=7);z--;)B[P++]=Q}}var K=B.subarray(0,I),Z=B.subarray(I);x=fO(K),v=fO(Z),m=Xh(K,x,1),g=Xh(Z,v,1)}else Af(1);else{var C=H9(f)+4,_=e[C-4]|e[C-3]<<8,j=C+_;if(j>a){c&&Af(0);break}l&&u(A+_),r.set(e.subarray(C,j),A),t.b=A+=_,t.p=f=j*8,t.f=d;continue}if(f>y){c&&Af(0);break}}l&&u(A+131072);for(var U=(1<<x)-1,Y=(1<<v)-1,R=f;;R=f){var Q=m[hO(e,f)&U],D=Q>>4;if(f+=Q&15,f>y){c&&Af(0);break}if(Q||Af(2),D<256)r[A++]=D;else if(D==256){R=f,m=null;break}else{var W=D-254;if(D>264){var P=D-257,J=ST[P];W=uf(e,f,(1<<J)-1)+aAe[P],f+=J}var le=g[hO(e,f)&Y],ie=le>>4;le||Af(3),f+=le&15;var Z=bst[ie];if(ie>3){var J=_T[ie];Z+=hO(e,f)&(1<<J)-1,f+=J}if(f>y){c&&Af(0);break}l&&u(A+131072);var re=A+W;if(A<Z){var ce=s-Z,oe=Math.min(Z,re);for(ce+A<0&&Af(3);A<oe;++A)r[A]=n[ce+A]}for(;A<re;++A)r[A]=r[A-Z]}}t.l=m,t.p=R,t.b=A,t.f=d,m&&(d=1,t.m=x,t.d=g,t.n=v)}while(!d);return A!=r.length&&o?iAe(r,0,A):r.subarray(0,A)},L0=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},zw=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},AO=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,s=r.slice();if(!a)return{t:lAe,l:0};if(a==1){var o=new Sl(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(j,I){return j.f-I.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var A=s[0].s,n=1;n<a;++n)s[n].s>A&&(A=s[n].s);var m=new ku(A+1),g=HR(r[d-1],m,0);if(g>t){var n=0,x=0,v=g-t,y=1<<v;for(s.sort(function(I,T){return m[T.s]-m[I.s]||I.f-T.f});n<a;++n){var N=s[n].s;if(m[N]>t)x+=y-(1<<g-m[N]),m[N]=t;else break}for(x>>=v;x>0;){var C=s[n].s;m[C]<t?x-=1<<t-m[C]++-1:++n}for(;n>=0&&x;--n){var _=s[n].s;m[_]==t&&(--m[_],++x)}g=t}return{t:new Sl(m),l:g}},HR=function(e,t,r){return e.s==-1?Math.max(HR(e.l,t,r+1),HR(e.r,t,r+1)):t[e.s]=r},UJ=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new ku(++t),n=0,a=e[0],s=1,o=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==a&&l!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=e[l]}return{c:r.subarray(0,n),n:t}},Gw=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},oAe=function(e,t,r){var n=r.length,a=H9(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<n;++s)e[a+s+4]=r[s];return(a+4+n)*8},HJ=function(e,t,r,n,a,s,o,l,c,u,d){L0(t,d++,r),++a[256];for(var f=AO(a,15),A=f.t,m=f.l,g=AO(s,15),x=g.t,v=g.l,y=UJ(A),N=y.c,C=y.n,_=UJ(x),j=_.c,I=_.n,T=new ku(19),k=0;k<N.length;++k)++T[N[k]&31];for(var k=0;k<j.length;++k)++T[j[k]&31];for(var B=AO(T,7),M=B.t,P=B.l,S=19;S>4&&!M[LR[S-1]];--S);var L=u+5<<3,H=Gw(a,Op)+Gw(s,pC)+o,q=Gw(a,A)+Gw(s,x)+o+14+3*S+Gw(T,M)+2*T[16]+3*T[17]+7*T[18];if(c>=0&&L<=H&&L<=q)return oAe(t,d,e.subarray(c,c+u));var Q,z,K,Z;if(L0(t,d,1+(q<H)),d+=2,q<H){Q=Xh(A,m,0),z=A,K=Xh(x,v,0),Z=x;var U=Xh(M,P,0);L0(t,d,C-257),L0(t,d+5,I-1),L0(t,d+10,S-4),d+=14;for(var k=0;k<S;++k)L0(t,d+3*k,M[LR[k]]);d+=3*S;for(var Y=[N,j],R=0;R<2;++R)for(var D=Y[R],k=0;k<D.length;++k){var W=D[k]&31;L0(t,d,U[W]),d+=M[W],W>15&&(L0(t,d,D[k]>>5&127),d+=D[k]>>12)}}else Q=yst,z=Op,K=Nst,Z=pC;for(var k=0;k<l;++k){var J=n[k];if(J>255){var W=J>>18&31;zw(t,d,Q[W+257]),d+=z[W+257],W>7&&(L0(t,d,J>>23&31),d+=ST[W]);var le=J&31;zw(t,d,K[le]),d+=Z[le],le>3&&(zw(t,d,J>>5&8191),d+=_T[le])}else zw(t,d,Q[J]),d+=z[J]}return zw(t,d,Q[256]),d+z[256]},kst=new U9([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),lAe=new Sl(0),Sst=function(e,t,r,n,a,s){var o=s.z||e.length,l=new Sl(n+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(n,l.length-a),u=s.l,d=(s.r||0)&7;if(t){d&&(c[0]=s.r>>3);for(var f=kst[t-1],A=f>>13,m=f&8191,g=(1<<r)-1,x=s.p||new ku(32768),v=s.h||new ku(g+1),y=Math.ceil(r/3),N=2*y,C=function(De){return(e[De]^e[De+1]<<y^e[De+2]<<N)&g},_=new U9(25e3),j=new ku(288),I=new ku(32),T=0,k=0,B=s.i||0,M=0,P=s.w||0,S=0;B+2<o;++B){var L=C(B),H=B&32767,q=v[L];if(x[H]=q,v[L]=H,P<=B){var Q=o-B;if((T>7e3||M>24576)&&(Q>423||!u)){d=HJ(e,c,0,_,j,I,k,M,S,B-S,d),M=T=k=0,S=B;for(var z=0;z<286;++z)j[z]=0;for(var z=0;z<30;++z)I[z]=0}var K=2,Z=0,U=m,Y=H-q&32767;if(Q>2&&L==C(B-Y))for(var R=Math.min(A,Q)-1,D=Math.min(32767,B),W=Math.min(258,Q);Y<=D&&--U&&H!=q;){if(e[B+K]==e[B+K-Y]){for(var J=0;J<W&&e[B+J]==e[B+J-Y];++J);if(J>K){if(K=J,Z=Y,J>R)break;for(var le=Math.min(Y,J-2),ie=0,z=0;z<le;++z){var re=B-Y+z&32767,ce=x[re],oe=re-ce&32767;oe>ie&&(ie=oe,q=re)}}}H=q,q=x[H],Y+=H-q&32767}if(Z){_[M++]=268435456|MR[K]<<18|MJ[Z];var be=MR[K]&31,X=MJ[Z]&31;k+=ST[be]+_T[X],++j[257+be],++I[X],P=B+K,++T}else _[M++]=e[B],++j[e[B]]}}for(B=Math.max(B,P);B<o;++B)_[M++]=e[B],++j[e[B]];d=HJ(e,c,u,_,j,I,k,M,S,B-S,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=v,s.p=x,s.i=B,s.w=P)}else{for(var B=s.w||0;B<o+u;B+=65535){var je=B+65535;je>=o&&(c[d/8|0]=u,je=o),d=oAe(c,d+1,e.subarray(B,je))}s.i=o}return iAe(l,0,n+H9(d)+a)},cAe=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,s=r.length|0,o=0;o!=s;){for(var l=Math.min(o+2655,s);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},_st=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),o=new Sl(s.length+e.length);o.set(s),o.set(e,s.length),e=o,a.w=s.length}return Sst(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},uAe=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},Tst=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=cAe();a.p(t.dictionary),uAe(e,2,a.d())}},Bst=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Af(6,"invalid zlib data"),(e[1]>>5&1)==1&&Af(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function QR(e,t){t||(t={});var r=cAe();r.p(e);var n=_st(e,t,t.dictionary?6:2,4);return Tst(n,t),uAe(n,n.length-4,r.d()),n}function Ist(e,t){return jst(e.subarray(Bst(e),-4),{i:2},t,t)}var Dst=typeof TextDecoder<"u"&&new TextDecoder,Ost=0;try{Dst.decode(lAe,{stream:!0}),Ost=1}catch{}var $r=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function mO(){$r.console&&typeof $r.console.log=="function"&&$r.console.log.apply($r.console,arguments)}var Ma={log:mO,warn:function(e){$r.console&&(typeof $r.console.warn=="function"?$r.console.warn.apply($r.console,arguments):mO.call(null,arguments))},error:function(e){$r.console&&(typeof $r.console.error=="function"?$r.console.error.apply($r.console,arguments):mO(e))}};function pO(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){Pg(n.response,t,r)},n.onerror=function(){Ma.error("could not download file")},n.send()}function QJ(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Ek(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var lN,VR,Pg=$r.saveAs||((typeof window>"u"?"undefined":Ta(window))!=="object"||window!==$r?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=$r.URL||$r.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?QJ(a.href)?pO(e,t,r):Ek(a,a.target="_blank"):Ek(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){Ek(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(QJ(e))pO(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){Ek(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:Ta(s)!=="object"&&(Ma.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return pO(e,t,r);var a=e.type==="application/octet-stream",s=/constructor/i.test($r.HTMLElement)||$r.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&s)&&(typeof FileReader>"u"?"undefined":Ta(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(e)}else{var c=$r.URL||$r.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function dAe(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,o=a.exec(e);o&&(t=s(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function gO(e,t){var r=e[0],n=e[1],a=e[2],s=e[3];r=cl(r,n,a,s,t[0],7,-680876936),s=cl(s,r,n,a,t[1],12,-389564586),a=cl(a,s,r,n,t[2],17,606105819),n=cl(n,a,s,r,t[3],22,-1044525330),r=cl(r,n,a,s,t[4],7,-176418897),s=cl(s,r,n,a,t[5],12,1200080426),a=cl(a,s,r,n,t[6],17,-1473231341),n=cl(n,a,s,r,t[7],22,-45705983),r=cl(r,n,a,s,t[8],7,1770035416),s=cl(s,r,n,a,t[9],12,-1958414417),a=cl(a,s,r,n,t[10],17,-42063),n=cl(n,a,s,r,t[11],22,-1990404162),r=cl(r,n,a,s,t[12],7,1804603682),s=cl(s,r,n,a,t[13],12,-40341101),a=cl(a,s,r,n,t[14],17,-1502002290),r=ul(r,n=cl(n,a,s,r,t[15],22,1236535329),a,s,t[1],5,-165796510),s=ul(s,r,n,a,t[6],9,-1069501632),a=ul(a,s,r,n,t[11],14,643717713),n=ul(n,a,s,r,t[0],20,-373897302),r=ul(r,n,a,s,t[5],5,-701558691),s=ul(s,r,n,a,t[10],9,38016083),a=ul(a,s,r,n,t[15],14,-660478335),n=ul(n,a,s,r,t[4],20,-405537848),r=ul(r,n,a,s,t[9],5,568446438),s=ul(s,r,n,a,t[14],9,-1019803690),a=ul(a,s,r,n,t[3],14,-187363961),n=ul(n,a,s,r,t[8],20,1163531501),r=ul(r,n,a,s,t[13],5,-1444681467),s=ul(s,r,n,a,t[2],9,-51403784),a=ul(a,s,r,n,t[7],14,1735328473),r=dl(r,n=ul(n,a,s,r,t[12],20,-1926607734),a,s,t[5],4,-378558),s=dl(s,r,n,a,t[8],11,-2022574463),a=dl(a,s,r,n,t[11],16,1839030562),n=dl(n,a,s,r,t[14],23,-35309556),r=dl(r,n,a,s,t[1],4,-1530992060),s=dl(s,r,n,a,t[4],11,1272893353),a=dl(a,s,r,n,t[7],16,-155497632),n=dl(n,a,s,r,t[10],23,-1094730640),r=dl(r,n,a,s,t[13],4,681279174),s=dl(s,r,n,a,t[0],11,-358537222),a=dl(a,s,r,n,t[3],16,-722521979),n=dl(n,a,s,r,t[6],23,76029189),r=dl(r,n,a,s,t[9],4,-640364487),s=dl(s,r,n,a,t[12],11,-421815835),a=dl(a,s,r,n,t[15],16,530742520),r=fl(r,n=dl(n,a,s,r,t[2],23,-995338651),a,s,t[0],6,-198630844),s=fl(s,r,n,a,t[7],10,1126891415),a=fl(a,s,r,n,t[14],15,-1416354905),n=fl(n,a,s,r,t[5],21,-57434055),r=fl(r,n,a,s,t[12],6,1700485571),s=fl(s,r,n,a,t[3],10,-1894986606),a=fl(a,s,r,n,t[10],15,-1051523),n=fl(n,a,s,r,t[1],21,-2054922799),r=fl(r,n,a,s,t[8],6,1873313359),s=fl(s,r,n,a,t[15],10,-30611744),a=fl(a,s,r,n,t[6],15,-1560198380),n=fl(n,a,s,r,t[13],21,1309151649),r=fl(r,n,a,s,t[4],6,-145523070),s=fl(s,r,n,a,t[11],10,-1120210379),a=fl(a,s,r,n,t[2],15,718787259),n=fl(n,a,s,r,t[9],21,-343485551),e[0]=tp(r,e[0]),e[1]=tp(n,e[1]),e[2]=tp(a,e[2]),e[3]=tp(s,e[3])}function TT(e,t,r,n,a,s){return t=tp(tp(t,e),tp(n,s)),tp(t<<a|t>>>32-a,r)}function cl(e,t,r,n,a,s,o){return TT(t&r|~t&n,e,t,a,s,o)}function ul(e,t,r,n,a,s,o){return TT(t&n|r&~n,e,t,a,s,o)}function dl(e,t,r,n,a,s,o){return TT(t^r^n,e,t,a,s,o)}function fl(e,t,r,n,a,s,o){return TT(r^(t|~n),e,t,a,s,o)}function fAe(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)gO(n,Pst(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(gO(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,gO(n,a),n}function Pst(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}lN=$r.atob.bind($r),VR=$r.btoa.bind($r);var VJ="0123456789abcdef".split("");function Fst(e){for(var t="",r=0;r<4;r++)t+=VJ[e>>8*r+4&15]+VJ[e>>8*r&15];return t}function Rst(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function $R(e){return fAe(e).map(Rst).join("")}var Lst=function(e){for(var t=0;t<e.length;t++)e[t]=Fst(e[t]);return e.join("")}(fAe("hello"))!="5d41402abc4b2a76b9719d911017c592";function tp(e,t){if(Lst){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function zR(e,t){var r,n,a,s;if(e!==r){for(var o=(a=e,s=1+(256/e.length>>0),new Array(s+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+o.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=e,n=l}else l=n;var f=t.length,A=0,m=0,g="";for(c=0;c<f;c++)m=(m+(d=l[A=(A+1)%256]))%256,l[A]=l[m],l[m]=d,o=l[(l[A]+l[m])%256],g+=String.fromCharCode(t.charCodeAt(c)^o);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var $J={print:4,modify:8,copy:16,"annot-forms":32};function Cb(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(l){if($J.perm!==void 0)throw new Error("Invalid permission: "+l);a+=$J[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^a)),this.encryptionKey=$R(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=zR(this.encryptionKey,this.padding)}function Eb(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function zJ(e){if(Ta(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[r]){var o=t[r][s];try{o[0].apply(e,n)}catch(l){$r.console&&Ma.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function $_(e){if(!(this instanceof $_))return new $_(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function hAe(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Qg(e,t,r,n,a){if(!(this instanceof Qg))return new Qg(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,hAe.call(this,n,a)}function Rb(e,t,r,n,a){if(!(this instanceof Rb))return new Rb(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,hAe.call(this,n,a)}function wr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],o=[],l=1,c=16,u="S",d=null;Ta(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,s=e.compress||e.compressPdf||s,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),o=e.filters||(s===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,A={},m={internal:{},__private__:{}};m.__private__.PubSub=zJ;var g="1.3",x=m.__private__.getPdfVersion=function(){return g};m.__private__.setPdfVersion=function(te){g=te};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return v};var y=m.__private__.getPageFormat=function(te){return v[te]};a=a||"a4";var N={COMPAT:"compat",ADVANCED:"advanced"},C=N.COMPAT;function _(){this.saveGraphicsState(),ue(new rr(Ie,0,0,-Ie,0,ro()*Ie).toString()+" cm"),this.setFontSize(this.getFontSize()/Ie),u="n",C=N.ADVANCED}function j(){this.restoreGraphicsState(),u="S",C=N.COMPAT}var I=m.__private__.combineFontStyleAndFontWeight=function(te,Ee){if(te=="bold"&&Ee=="normal"||te=="bold"&&Ee==400||te=="normal"&&Ee=="italic"||te=="bold"&&Ee=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ee&&(te=Ee==400||Ee==="normal"?te==="italic"?"italic":"normal":Ee!=700&&Ee!=="bold"||te!=="normal"?(Ee==700?"bold":Ee)+""+te:"bold"),te};m.advancedAPI=function(te){var Ee=C===N.COMPAT;return Ee&&_.call(this),typeof te!="function"||(te(this),Ee&&j.call(this)),this},m.compatAPI=function(te){var Ee=C===N.ADVANCED;return Ee&&j.call(this),typeof te!="function"||(te(this),Ee&&_.call(this)),this},m.isAdvancedAPI=function(){return C===N.ADVANCED};var T,k=function(te){if(C!==N.ADVANCED)throw new Error(te+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},B=m.roundToPrecision=m.__private__.roundToPrecision=function(te,Ee){var Ke=t||Ee;if(isNaN(te)||isNaN(Ke))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return te.toFixed(Ke).replace(/0+$/,"")};T=m.hpf=m.__private__.hpf=typeof c=="number"?function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.hpf");return B(te,c)}:c==="smart"?function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.hpf");return B(te,te>-1&&te<1?16:5)}:function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.hpf");return B(te,16)};var M=m.f2=m.__private__.f2=function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.f2");return B(te,2)},P=m.__private__.f3=function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.f3");return B(te,3)},S=m.scale=m.__private__.scale=function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.scale");return C===N.COMPAT?te*Ie:C===N.ADVANCED?te:void 0},L=function(te){return C===N.COMPAT?ro()-te:C===N.ADVANCED?te:void 0},H=function(te){return S(L(te))};m.__private__.setPrecision=m.setPrecision=function(te){typeof parseInt(te,10)=="number"&&(t=parseInt(te,10))};var q,Q="00000000000000000000000000000000",z=m.__private__.getFileId=function(){return Q},K=m.__private__.setFileId=function(te){return Q=te!==void 0&&/^[a-fA-F0-9]{32}$/.test(te)?te.toUpperCase():Q.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ba=new Cb(d.userPermissions,d.userPassword,d.ownerPassword,Q)),Q};m.setFileId=function(te){return K(te),this},m.getFileId=function(){return z()};var Z=m.__private__.convertDateToPDFDate=function(te){var Ee=te.getTimezoneOffset(),Ke=Ee<0?"+":"-",tt=Math.floor(Math.abs(Ee/60)),lt=Math.abs(Ee%60),kt=[Ke,W(tt),"'",W(lt),"'"].join("");return["D:",te.getFullYear(),W(te.getMonth()+1),W(te.getDate()),W(te.getHours()),W(te.getMinutes()),W(te.getSeconds()),kt].join("")},U=m.__private__.convertPDFDateToDate=function(te){var Ee=parseInt(te.substr(2,4),10),Ke=parseInt(te.substr(6,2),10)-1,tt=parseInt(te.substr(8,2),10),lt=parseInt(te.substr(10,2),10),kt=parseInt(te.substr(12,2),10),zt=parseInt(te.substr(14,2),10);return new Date(Ee,Ke,tt,lt,kt,zt,0)},Y=m.__private__.setCreationDate=function(te){var Ee;if(te===void 0&&(te=new Date),te instanceof Date)Ee=Z(te);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(te))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ee=te}return q=Ee},R=m.__private__.getCreationDate=function(te){var Ee=q;return te==="jsDate"&&(Ee=U(q)),Ee};m.setCreationDate=function(te){return Y(te),this},m.getCreationDate=function(te){return R(te)};var D,W=m.__private__.padd2=function(te){return("0"+parseInt(te)).slice(-2)},J=m.__private__.padd2Hex=function(te){return("00"+(te=te.toString())).substr(te.length)},le=0,ie=[],re=[],ce=0,oe=[],be=[],X=!1,je=re,De=function(){le=0,ce=0,re=[],ie=[],oe=[],Me=sa(),Qe=sa()};m.__private__.setCustomOutputDestination=function(te){X=!0,je=te};var ke=function(te){X||(je=te)};m.__private__.resetCustomOutputDestination=function(){X=!1,je=re};var ue=m.__private__.out=function(te){return te=te.toString(),ce+=te.length+1,je.push(te),je},we=m.__private__.write=function(te){return ue(arguments.length===1?te.toString():Array.prototype.join.call(arguments," "))},Ae=m.__private__.getArrayBuffer=function(te){for(var Ee=te.length,Ke=new ArrayBuffer(Ee),tt=new Uint8Array(Ke);Ee--;)tt[Ee]=te.charCodeAt(Ee);return Ke},de=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return de};var ae=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(te){return ae=C===N.ADVANCED?te/Ie:te,this};var fe,ge=m.__private__.getFontSize=m.getFontSize=function(){return C===N.COMPAT?ae:ae*Ie},xe=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(te){return xe=te,this},m.__private__.getR2L=m.getR2L=function(){return xe};var Ue,qe=m.__private__.setZoomMode=function(te){var Ee=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(te))fe=te;else if(isNaN(te)){if(Ee.indexOf(te)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+te+'" is not recognized.');fe=te}else fe=parseInt(te,10)};m.__private__.getZoomMode=function(){return fe};var Ze,We=m.__private__.setPageMode=function(te){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(te)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+te+'" is not recognized.');Ue=te};m.__private__.getPageMode=function(){return Ue};var me=m.__private__.setLayoutMode=function(te){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(te)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+te+'" is not recognized.');Ze=te};m.__private__.getLayoutMode=function(){return Ze},m.__private__.setDisplayMode=m.setDisplayMode=function(te,Ee,Ke){return qe(te),me(Ee),We(Ke),this};var Ve={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(te){if(Object.keys(Ve).indexOf(te)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ve[te]},m.__private__.getDocumentProperties=function(){return Ve},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(te){for(var Ee in Ve)Ve.hasOwnProperty(Ee)&&te[Ee]&&(Ve[Ee]=te[Ee]);return this},m.__private__.setDocumentProperty=function(te,Ee){if(Object.keys(Ve).indexOf(te)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ve[te]=Ee};var Xe,Ie,Be,et,bt,jt={},qt={},ir=[],Ut={},Nr={},tr={},Xr={},hr=null,Dr=0,or=[],Yr=new zJ(m),Xa=e.hotfixes||[],aa={},Gn={},is=[],rr=function te(Ee,Ke,tt,lt,kt,zt){if(!(this instanceof te))return new te(Ee,Ke,tt,lt,kt,zt);isNaN(Ee)&&(Ee=1),isNaN(Ke)&&(Ke=0),isNaN(tt)&&(tt=0),isNaN(lt)&&(lt=1),isNaN(kt)&&(kt=0),isNaN(zt)&&(zt=0),this._matrix=[Ee,Ke,tt,lt,kt,zt]};Object.defineProperty(rr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(te){this._matrix[0]=te}}),Object.defineProperty(rr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(te){this._matrix[1]=te}}),Object.defineProperty(rr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(te){this._matrix[2]=te}}),Object.defineProperty(rr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(te){this._matrix[3]=te}}),Object.defineProperty(rr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(te){this._matrix[4]=te}}),Object.defineProperty(rr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(te){this._matrix[5]=te}}),Object.defineProperty(rr.prototype,"a",{get:function(){return this._matrix[0]},set:function(te){this._matrix[0]=te}}),Object.defineProperty(rr.prototype,"b",{get:function(){return this._matrix[1]},set:function(te){this._matrix[1]=te}}),Object.defineProperty(rr.prototype,"c",{get:function(){return this._matrix[2]},set:function(te){this._matrix[2]=te}}),Object.defineProperty(rr.prototype,"d",{get:function(){return this._matrix[3]},set:function(te){this._matrix[3]=te}}),Object.defineProperty(rr.prototype,"e",{get:function(){return this._matrix[4]},set:function(te){this._matrix[4]=te}}),Object.defineProperty(rr.prototype,"f",{get:function(){return this._matrix[5]},set:function(te){this._matrix[5]=te}}),Object.defineProperty(rr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(rr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(rr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(rr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),rr.prototype.join=function(te){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(T).join(te)},rr.prototype.multiply=function(te){var Ee=te.sx*this.sx+te.shy*this.shx,Ke=te.sx*this.shy+te.shy*this.sy,tt=te.shx*this.sx+te.sy*this.shx,lt=te.shx*this.shy+te.sy*this.sy,kt=te.tx*this.sx+te.ty*this.shx+this.tx,zt=te.tx*this.shy+te.ty*this.sy+this.ty;return new rr(Ee,Ke,tt,lt,kt,zt)},rr.prototype.decompose=function(){var te=this.sx,Ee=this.shy,Ke=this.shx,tt=this.sy,lt=this.tx,kt=this.ty,zt=Math.sqrt(te*te+Ee*Ee),nr=(te/=zt)*Ke+(Ee/=zt)*tt;Ke-=te*nr,tt-=Ee*nr;var F=Math.sqrt(Ke*Ke+tt*tt);return nr/=F,te*(tt/=F)<Ee*(Ke/=F)&&(te=-te,Ee=-Ee,nr=-nr,zt=-zt),{scale:new rr(zt,0,0,F,0,0),translate:new rr(1,0,0,1,lt,kt),rotate:new rr(te,Ee,-Ee,te,0,0),skew:new rr(1,0,nr,1,0,0)}},rr.prototype.toString=function(te){return this.join(" ")},rr.prototype.inversed=function(){var te=this.sx,Ee=this.shy,Ke=this.shx,tt=this.sy,lt=this.tx,kt=this.ty,zt=1/(te*tt-Ee*Ke),nr=tt*zt,F=-Ee*zt,se=-Ke*zt,pe=te*zt;return new rr(nr,F,se,pe,-nr*lt-se*kt,-F*lt-pe*kt)},rr.prototype.applyToPoint=function(te){var Ee=te.x*this.sx+te.y*this.shx+this.tx,Ke=te.x*this.shy+te.y*this.sy+this.ty;return new Vd(Ee,Ke)},rr.prototype.applyToRectangle=function(te){var Ee=this.applyToPoint(te),Ke=this.applyToPoint(new Vd(te.x+te.w,te.y+te.h));return new Kf(Ee.x,Ee.y,Ke.x-Ee.x,Ke.y-Ee.y)},rr.prototype.clone=function(){var te=this.sx,Ee=this.shy,Ke=this.shx,tt=this.sy,lt=this.tx,kt=this.ty;return new rr(te,Ee,Ke,tt,lt,kt)},m.Matrix=rr;var wn=m.matrixMult=function(te,Ee){return Ee.multiply(te)},cn=new rr(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=cn;var On=function(te,Ee){if(!Nr[te]){var Ke=(Ee instanceof Qg?"Sh":"P")+(Object.keys(Ut).length+1).toString(10);Ee.id=Ke,Nr[te]=Ke,Ut[Ke]=Ee,Yr.publish("addPattern",Ee)}};m.ShadingPattern=Qg,m.TilingPattern=Rb,m.addShadingPattern=function(te,Ee){return k("addShadingPattern()"),On(te,Ee),this},m.beginTilingPattern=function(te){k("beginTilingPattern()"),Gu(te.boundingBox[0],te.boundingBox[1],te.boundingBox[2]-te.boundingBox[0],te.boundingBox[3]-te.boundingBox[1],te.matrix)},m.endTilingPattern=function(te,Ee){k("endTilingPattern()"),Ee.stream=be[D].join(`
`),On(te,Ee),Yr.publish("endTilingPattern",Ee),is.pop().restore()};var Fn=m.__private__.newObject=function(){var te=sa();return Se(te,!0),te},sa=m.__private__.newObjectDeferred=function(){return le++,ie[le]=function(){return ce},le},Se=function(te,Ee){return Ee=typeof Ee=="boolean"&&Ee,ie[te]=ce,Ee&&ue(te+" 0 obj"),te},Ge=m.__private__.newAdditionalObject=function(){var te={objId:sa(),content:""};return oe.push(te),te},Me=sa(),Qe=sa(),Ne=m.__private__.decodeColorString=function(te){var Ee=te.split(" ");if(Ee.length!==2||Ee[1]!=="g"&&Ee[1]!=="G")Ee.length===5&&(Ee[4]==="k"||Ee[4]==="K")&&(Ee=[(1-Ee[0])*(1-Ee[3]),(1-Ee[1])*(1-Ee[3]),(1-Ee[2])*(1-Ee[3]),"r"]);else{var Ke=parseFloat(Ee[0]);Ee=[Ke,Ke,Ke,"r"]}for(var tt="#",lt=0;lt<3;lt++)tt+=("0"+Math.floor(255*parseFloat(Ee[lt])).toString(16)).slice(-2);return tt},ve=m.__private__.encodeColorString=function(te){var Ee;typeof te=="string"&&(te={ch1:te});var Ke=te.ch1,tt=te.ch2,lt=te.ch3,kt=te.ch4,zt=te.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ke=="string"&&Ke.charAt(0)!=="#"){var nr=new dAe(Ke);if(nr.ok)Ke=nr.toHex();else if(!/^\d*\.?\d*$/.test(Ke))throw new Error('Invalid color "'+Ke+'" passed to jsPDF.encodeColorString.')}if(typeof Ke=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ke)&&(Ke="#"+Ke[1]+Ke[1]+Ke[2]+Ke[2]+Ke[3]+Ke[3]),typeof Ke=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ke)){var F=parseInt(Ke.substr(1),16);Ke=F>>16&255,tt=F>>8&255,lt=255&F}if(tt===void 0||kt===void 0&&Ke===tt&&tt===lt)if(typeof Ke=="string")Ee=Ke+" "+zt[0];else switch(te.precision){case 2:Ee=M(Ke/255)+" "+zt[0];break;case 3:default:Ee=P(Ke/255)+" "+zt[0]}else if(kt===void 0||Ta(kt)==="object"){if(kt&&!isNaN(kt.a)&&kt.a===0)return Ee=["1.","1.","1.",zt[1]].join(" ");if(typeof Ke=="string")Ee=[Ke,tt,lt,zt[1]].join(" ");else switch(te.precision){case 2:Ee=[M(Ke/255),M(tt/255),M(lt/255),zt[1]].join(" ");break;default:case 3:Ee=[P(Ke/255),P(tt/255),P(lt/255),zt[1]].join(" ")}}else if(typeof Ke=="string")Ee=[Ke,tt,lt,kt,zt[2]].join(" ");else switch(te.precision){case 2:Ee=[M(Ke),M(tt),M(lt),M(kt),zt[2]].join(" ");break;case 3:default:Ee=[P(Ke),P(tt),P(lt),P(kt),zt[2]].join(" ")}return Ee},Fe=m.__private__.getFilters=function(){return o},ze=m.__private__.putStream=function(te){var Ee=(te=te||{}).data||"",Ke=te.filters||Fe(),tt=te.alreadyAppliedFilters||[],lt=te.addLength1||!1,kt=Ee.length,zt=te.objectId,nr=function(Rr){return Rr};if(d!==null&&zt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(nr=ba.encryptor(zt,0));var F={};Ke===!0&&(Ke=["FlateEncode"]);var se=te.additionalKeyValues||[],pe=(F=wr.API.processDataByFilters!==void 0?wr.API.processDataByFilters(Ee,Ke):{data:Ee,reverseChain:[]}).reverseChain+(Array.isArray(tt)?tt.join(" "):tt.toString());if(F.data.length!==0&&(se.push({key:"Length",value:F.data.length}),lt===!0&&se.push({key:"Length1",value:kt})),pe.length!=0)if(pe.split("/").length-1==1)se.push({key:"Filter",value:pe});else{se.push({key:"Filter",value:"["+pe+"]"});for(var Pe=0;Pe<se.length;Pe+=1)if(se[Pe].key==="DecodeParms"){for(var ot=[],gt=0;gt<F.reverseChain.split("/").length-1;gt+=1)ot.push("null");ot.push(se[Pe].value),se[Pe].value="["+ot.join(" ")+"]"}}ue("<<");for(var Gt=0;Gt<se.length;Gt++)ue("/"+se[Gt].key+" "+se[Gt].value);ue(">>"),F.data.length!==0&&(ue("stream"),ue(nr(F.data)),ue("endstream"))},He=m.__private__.putPage=function(te){var Ee=te.number,Ke=te.data,tt=te.objId,lt=te.contentsObjId;Se(tt,!0),ue("<</Type /Page"),ue("/Parent "+te.rootDictionaryObjId+" 0 R"),ue("/Resources "+te.resourceDictionaryObjId+" 0 R"),ue("/MediaBox ["+parseFloat(T(te.mediaBox.bottomLeftX))+" "+parseFloat(T(te.mediaBox.bottomLeftY))+" "+T(te.mediaBox.topRightX)+" "+T(te.mediaBox.topRightY)+"]"),te.cropBox!==null&&ue("/CropBox ["+T(te.cropBox.bottomLeftX)+" "+T(te.cropBox.bottomLeftY)+" "+T(te.cropBox.topRightX)+" "+T(te.cropBox.topRightY)+"]"),te.bleedBox!==null&&ue("/BleedBox ["+T(te.bleedBox.bottomLeftX)+" "+T(te.bleedBox.bottomLeftY)+" "+T(te.bleedBox.topRightX)+" "+T(te.bleedBox.topRightY)+"]"),te.trimBox!==null&&ue("/TrimBox ["+T(te.trimBox.bottomLeftX)+" "+T(te.trimBox.bottomLeftY)+" "+T(te.trimBox.topRightX)+" "+T(te.trimBox.topRightY)+"]"),te.artBox!==null&&ue("/ArtBox ["+T(te.artBox.bottomLeftX)+" "+T(te.artBox.bottomLeftY)+" "+T(te.artBox.topRightX)+" "+T(te.artBox.topRightY)+"]"),typeof te.userUnit=="number"&&te.userUnit!==1&&ue("/UserUnit "+te.userUnit),Yr.publish("putPage",{objId:tt,pageContext:or[Ee],pageNumber:Ee,page:Ke}),ue("/Contents "+lt+" 0 R"),ue(">>"),ue("endobj");var kt=Ke.join(`
`);return C===N.ADVANCED&&(kt+=`
Q`),Se(lt,!0),ze({data:kt,filters:Fe(),objectId:lt}),ue("endobj"),tt},Ye=m.__private__.putPages=function(){var te,Ee,Ke=[];for(te=1;te<=Dr;te++)or[te].objId=sa(),or[te].contentsObjId=sa();for(te=1;te<=Dr;te++)Ke.push(He({number:te,data:be[te],objId:or[te].objId,contentsObjId:or[te].contentsObjId,mediaBox:or[te].mediaBox,cropBox:or[te].cropBox,bleedBox:or[te].bleedBox,trimBox:or[te].trimBox,artBox:or[te].artBox,userUnit:or[te].userUnit,rootDictionaryObjId:Me,resourceDictionaryObjId:Qe}));Se(Me,!0),ue("<</Type /Pages");var tt="/Kids [";for(Ee=0;Ee<Dr;Ee++)tt+=Ke[Ee]+" 0 R ";ue(tt+"]"),ue("/Count "+Dr),ue(">>"),ue("endobj"),Yr.publish("postPutPages")},rt=function(te){Yr.publish("putFont",{font:te,out:ue,newObject:Fn,putStream:ze}),te.isAlreadyPutted!==!0&&(te.objectNumber=Fn(),ue("<<"),ue("/Type /Font"),ue("/BaseFont /"+Eb(te.postScriptName)),ue("/Subtype /Type1"),typeof te.encoding=="string"&&ue("/Encoding /"+te.encoding),ue("/FirstChar 32"),ue("/LastChar 255"),ue(">>"),ue("endobj"))},Ct=function(){for(var te in jt)jt.hasOwnProperty(te)&&(f===!1||f===!0&&A.hasOwnProperty(te))&&rt(jt[te])},Et=function(te){te.objectNumber=Fn();var Ee=[];Ee.push({key:"Type",value:"/XObject"}),Ee.push({key:"Subtype",value:"/Form"}),Ee.push({key:"BBox",value:"["+[T(te.x),T(te.y),T(te.x+te.width),T(te.y+te.height)].join(" ")+"]"}),Ee.push({key:"Matrix",value:"["+te.matrix.toString()+"]"});var Ke=te.pages[1].join(`
`);ze({data:Ke,additionalKeyValues:Ee,objectId:te.objectNumber}),ue("endobj")},Qt=function(){for(var te in aa)aa.hasOwnProperty(te)&&Et(aa[te])},Ot=function(te,Ee){var Ke,tt=[],lt=1/(Ee-1);for(Ke=0;Ke<1;Ke+=lt)tt.push(Ke);if(tt.push(1),te[0].offset!=0){var kt={offset:0,color:te[0].color};te.unshift(kt)}if(te[te.length-1].offset!=1){var zt={offset:1,color:te[te.length-1].color};te.push(zt)}for(var nr="",F=0,se=0;se<tt.length;se++){for(Ke=tt[se];Ke>te[F+1].offset;)F++;var pe=te[F].offset,Pe=(Ke-pe)/(te[F+1].offset-pe),ot=te[F].color,gt=te[F+1].color;nr+=J(Math.round((1-Pe)*ot[0]+Pe*gt[0]).toString(16))+J(Math.round((1-Pe)*ot[1]+Pe*gt[1]).toString(16))+J(Math.round((1-Pe)*ot[2]+Pe*gt[2]).toString(16))}return nr.trim()},Kt=function(te,Ee){Ee||(Ee=21);var Ke=Fn(),tt=Ot(te.colors,Ee),lt=[];lt.push({key:"FunctionType",value:"0"}),lt.push({key:"Domain",value:"[0.0 1.0]"}),lt.push({key:"Size",value:"["+Ee+"]"}),lt.push({key:"BitsPerSample",value:"8"}),lt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),lt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ze({data:tt,additionalKeyValues:lt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ke}),ue("endobj"),te.objectNumber=Fn(),ue("<< /ShadingType "+te.type),ue("/ColorSpace /DeviceRGB");var kt="/Coords ["+T(parseFloat(te.coords[0]))+" "+T(parseFloat(te.coords[1]))+" ";te.type===2?kt+=T(parseFloat(te.coords[2]))+" "+T(parseFloat(te.coords[3])):kt+=T(parseFloat(te.coords[2]))+" "+T(parseFloat(te.coords[3]))+" "+T(parseFloat(te.coords[4]))+" "+T(parseFloat(te.coords[5])),ue(kt+="]"),te.matrix&&ue("/Matrix ["+te.matrix.toString()+"]"),ue("/Function "+Ke+" 0 R"),ue("/Extend [true true]"),ue(">>"),ue("endobj")},Cr=function(te,Ee){var Ke=sa(),tt=Fn();Ee.push({resourcesOid:Ke,objectOid:tt}),te.objectNumber=tt;var lt=[];lt.push({key:"Type",value:"/Pattern"}),lt.push({key:"PatternType",value:"1"}),lt.push({key:"PaintType",value:"1"}),lt.push({key:"TilingType",value:"1"}),lt.push({key:"BBox",value:"["+te.boundingBox.map(T).join(" ")+"]"}),lt.push({key:"XStep",value:T(te.xStep)}),lt.push({key:"YStep",value:T(te.yStep)}),lt.push({key:"Resources",value:Ke+" 0 R"}),te.matrix&&lt.push({key:"Matrix",value:"["+te.matrix.toString()+"]"}),ze({data:te.stream,additionalKeyValues:lt,objectId:te.objectNumber}),ue("endobj")},rn=function(te){var Ee;for(Ee in Ut)Ut.hasOwnProperty(Ee)&&(Ut[Ee]instanceof Qg?Kt(Ut[Ee]):Ut[Ee]instanceof Rb&&Cr(Ut[Ee],te))},Jr=function(te){for(var Ee in te.objectNumber=Fn(),ue("<<"),te)switch(Ee){case"opacity":ue("/ca "+M(te[Ee]));break;case"stroke-opacity":ue("/CA "+M(te[Ee]))}ue(">>"),ue("endobj")},an=function(){var te;for(te in tr)tr.hasOwnProperty(te)&&Jr(tr[te])},va=function(){for(var te in ue("/XObject <<"),aa)aa.hasOwnProperty(te)&&aa[te].objectNumber>=0&&ue("/"+te+" "+aa[te].objectNumber+" 0 R");Yr.publish("putXobjectDict"),ue(">>")},Ys=function(){ba.oid=Fn(),ue("<<"),ue("/Filter /Standard"),ue("/V "+ba.v),ue("/R "+ba.r),ue("/U <"+ba.toHexString(ba.U)+">"),ue("/O <"+ba.toHexString(ba.O)+">"),ue("/P "+ba.P),ue(">>"),ue("endobj")},Ya=function(){for(var te in ue("/Font <<"),jt)jt.hasOwnProperty(te)&&(f===!1||f===!0&&A.hasOwnProperty(te))&&ue("/"+te+" "+jt[te].objectNumber+" 0 R");ue(">>")},os=function(){if(Object.keys(Ut).length>0){for(var te in ue("/Shading <<"),Ut)Ut.hasOwnProperty(te)&&Ut[te]instanceof Qg&&Ut[te].objectNumber>=0&&ue("/"+te+" "+Ut[te].objectNumber+" 0 R");Yr.publish("putShadingPatternDict"),ue(">>")}},xs=function(te){if(Object.keys(Ut).length>0){for(var Ee in ue("/Pattern <<"),Ut)Ut.hasOwnProperty(Ee)&&Ut[Ee]instanceof m.TilingPattern&&Ut[Ee].objectNumber>=0&&Ut[Ee].objectNumber<te&&ue("/"+Ee+" "+Ut[Ee].objectNumber+" 0 R");Yr.publish("putTilingPatternDict"),ue(">>")}},Tr=function(){if(Object.keys(tr).length>0){var te;for(te in ue("/ExtGState <<"),tr)tr.hasOwnProperty(te)&&tr[te].objectNumber>=0&&ue("/"+te+" "+tr[te].objectNumber+" 0 R");Yr.publish("putGStateDict"),ue(">>")}},Zr=function(te){Se(te.resourcesOid,!0),ue("<<"),ue("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ya(),os(),xs(te.objectOid),Tr(),va(),ue(">>"),ue("endobj")},Rn=function(){var te=[];Ct(),an(),Qt(),rn(te),Yr.publish("putResources"),te.forEach(Zr),Zr({resourcesOid:Qe,objectOid:Number.MAX_SAFE_INTEGER}),Yr.publish("postPutResources")},Ji=function(){Yr.publish("putAdditionalObjects");for(var te=0;te<oe.length;te++){var Ee=oe[te];Se(Ee.objId,!0),ue(Ee.content),ue("endobj")}Yr.publish("postPutAdditionalObjects")},Kc=function(te){qt[te.fontName]=qt[te.fontName]||{},qt[te.fontName][te.fontStyle]=te.id},oc=function(te,Ee,Ke,tt,lt){var kt={id:"F"+(Object.keys(jt).length+1).toString(10),postScriptName:te,fontName:Ee,fontStyle:Ke,encoding:tt,isStandardFont:lt||!1,metadata:{}};return Yr.publish("addFont",{font:kt,instance:this}),jt[kt.id]=kt,Kc(kt),kt.id},Rd=function(te){for(var Ee=0,Ke=de.length;Ee<Ke;Ee++){var tt=oc.call(this,te[Ee][0],te[Ee][1],te[Ee][2],de[Ee][3],!0);f===!1&&(A[tt]=!0);var lt=te[Ee][0].split("-");Kc({id:tt,fontName:lt[0],fontStyle:lt[1]||""})}Yr.publish("addFonts",{fonts:jt,dictionary:qt})},Js=function(te){return te.foo=function(){try{return te.apply(this,arguments)}catch(tt){var Ee=tt.stack||"";~Ee.indexOf(" at ")&&(Ee=Ee.split(" at ")[1]);var Ke="Error in function "+Ee.split(`
`)[0].split("<")[0]+": "+tt.message;if(!$r.console)throw new Error(Ke);$r.console.error(Ke,tt),$r.alert&&alert(Ke)}},te.foo.bar=te,te.foo},Lu=function(te,Ee){var Ke,tt,lt,kt,zt,nr,F,se,pe;if(lt=(Ee=Ee||{}).sourceEncoding||"Unicode",zt=Ee.outputEncoding,(Ee.autoencode||zt)&&jt[Xe].metadata&&jt[Xe].metadata[lt]&&jt[Xe].metadata[lt].encoding&&(kt=jt[Xe].metadata[lt].encoding,!zt&&jt[Xe].encoding&&(zt=jt[Xe].encoding),!zt&&kt.codePages&&(zt=kt.codePages[0]),typeof zt=="string"&&(zt=kt[zt]),zt)){for(F=!1,nr=[],Ke=0,tt=te.length;Ke<tt;Ke++)(se=zt[te.charCodeAt(Ke)])?nr.push(String.fromCharCode(se)):nr.push(te[Ke]),nr[Ke].charCodeAt(0)>>8&&(F=!0);te=nr.join("")}for(Ke=te.length;F===void 0&&Ke!==0;)te.charCodeAt(Ke-1)>>8&&(F=!0),Ke--;if(!F)return te;for(nr=Ee.noBOM?[]:[254,255],Ke=0,tt=te.length;Ke<tt;Ke++){if((pe=(se=te.charCodeAt(Ke))>>8)>>8)throw new Error("Character at position "+Ke+" of string '"+te+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");nr.push(pe),nr.push(se-(pe<<8))}return String.fromCharCode.apply(void 0,nr)},gn=m.__private__.pdfEscape=m.pdfEscape=function(te,Ee){return Lu(te,Ee).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zs=m.__private__.beginPage=function(te){be[++Dr]=[],or[Dr]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(te[0]),topRightY:Number(te[1])}},Co(Dr),ke(be[D])},Hl=function(te,Ee){var Ke,tt,lt;switch(r=Ee||r,typeof te=="string"&&(Ke=y(te.toLowerCase()),Array.isArray(Ke)&&(tt=Ke[0],lt=Ke[1])),Array.isArray(te)&&(tt=te[0]*Ie,lt=te[1]*Ie),isNaN(tt)&&(tt=a[0],lt=a[1]),(tt>14400||lt>14400)&&(Ma.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),tt=Math.min(14400,tt),lt=Math.min(14400,lt)),a=[tt,lt],r.substr(0,1)){case"l":lt>tt&&(a=[lt,tt]);break;case"p":tt>lt&&(a=[lt,tt])}Zs(a),h0(Qu),ue(Li),A0!==0&&ue(A0+" J"),Qd!==0&&ue(Qd+" j"),Yr.publish("addPage",{pageNumber:Dr})},lc=function(te){te>0&&te<=Dr&&(be.splice(te,1),or.splice(te,1),Dr--,D>Dr&&(D=Dr),this.setPage(D))},Co=function(te){te>0&&te<=Dr&&(D=te)},Ln=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return be.length-1},cc=function(te,Ee,Ke){var tt,lt=void 0;return Ke=Ke||{},te=te!==void 0?te:jt[Xe].fontName,Ee=Ee!==void 0?Ee:jt[Xe].fontStyle,tt=te.toLowerCase(),qt[tt]!==void 0&&qt[tt][Ee]!==void 0?lt=qt[tt][Ee]:qt[te]!==void 0&&qt[te][Ee]!==void 0?lt=qt[te][Ee]:Ke.disableWarning===!1&&Ma.warn("Unable to look up font label for font '"+te+"', '"+Ee+"'. Refer to getFontList() for available fonts."),lt||Ke.noFallback||(lt=qt.times[Ee])==null&&(lt=qt.times.normal),lt},Eo=m.__private__.putInfo=function(){var te=Fn(),Ee=function(tt){return tt};for(var Ke in d!==null&&(Ee=ba.encryptor(te,0)),ue("<<"),ue("/Producer ("+gn(Ee("jsPDF "+wr.version))+")"),Ve)Ve.hasOwnProperty(Ke)&&Ve[Ke]&&ue("/"+Ke.substr(0,1).toUpperCase()+Ke.substr(1)+" ("+gn(Ee(Ve[Ke]))+")");ue("/CreationDate ("+gn(Ee(q))+")"),ue(">>"),ue("endobj")},Xo=m.__private__.putCatalog=function(te){var Ee=(te=te||{}).rootDictionaryObjId||Me;switch(Fn(),ue("<<"),ue("/Type /Catalog"),ue("/Pages "+Ee+" 0 R"),fe||(fe="fullwidth"),fe){case"fullwidth":ue("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ue("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ue("/OpenAction [3 0 R /Fit]");break;case"original":ue("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ke=""+fe;Ke.substr(Ke.length-1)==="%"&&(fe=parseInt(fe)/100),typeof fe=="number"&&ue("/OpenAction [3 0 R /XYZ null null "+M(fe)+"]")}switch(Ze||(Ze="continuous"),Ze){case"continuous":ue("/PageLayout /OneColumn");break;case"single":ue("/PageLayout /SinglePage");break;case"two":case"twoleft":ue("/PageLayout /TwoColumnLeft");break;case"tworight":ue("/PageLayout /TwoColumnRight")}Ue&&ue("/PageMode /"+Ue),Yr.publish("putCatalog"),ue(">>"),ue("endobj")},Ld=m.__private__.putTrailer=function(){ue("trailer"),ue("<<"),ue("/Size "+(le+1)),ue("/Root "+le+" 0 R"),ue("/Info "+(le-1)+" 0 R"),d!==null&&ue("/Encrypt "+ba.oid+" 0 R"),ue("/ID [ <"+Q+"> <"+Q+"> ]"),ue(">>")},Mu=m.__private__.putHeader=function(){ue("%PDF-"+g),ue("%")},Uu=m.__private__.putXRef=function(){var te="0000000000";ue("xref"),ue("0 "+(le+1)),ue("0000000000 65535 f ");for(var Ee=1;Ee<=le;Ee++)typeof ie[Ee]=="function"?ue((te+ie[Ee]()).slice(-10)+" 00000 n "):ie[Ee]!==void 0?ue((te+ie[Ee]).slice(-10)+" 00000 n "):ue("0000000000 00000 n ")},Ql=m.__private__.buildDocument=function(){De(),ke(re),Yr.publish("buildDocument"),Mu(),Ye(),Ji(),Rn(),d!==null&&Ys(),Eo(),Xo();var te=ce;return Uu(),Ld(),ue("startxref"),ue(""+te),ue("%%EOF"),ke(be[D]),re.join(`
`)},zf=m.__private__.getBlob=function(te){return new Blob([Ae(te)],{type:"application/pdf"})},Wc=m.output=m.__private__.output=Js(function(te,Ee){switch(typeof(Ee=Ee||{})=="string"?Ee={filename:Ee}:Ee.filename=Ee.filename||"generated.pdf",te){case void 0:return Ql();case"save":m.save(Ee.filename);break;case"arraybuffer":return Ae(Ql());case"blob":return zf(Ql());case"bloburi":case"bloburl":if($r.URL!==void 0&&typeof $r.URL.createObjectURL=="function")return $r.URL&&$r.URL.createObjectURL(zf(Ql()))||void 0;Ma.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ke="",tt=Ql();try{Ke=VR(tt)}catch{Ke=VR(unescape(encodeURIComponent(tt)))}return"data:application/pdf;filename="+Ee.filename+";base64,"+Ke;case"pdfobjectnewwindow":if(Object.prototype.toString.call($r)==="[object Window]"){var lt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",kt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ee.pdfObjectUrl&&(lt=Ee.pdfObjectUrl,kt="");var zt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+lt+'"'+kt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ee)+");<\/script></body></html>",nr=$r.open();return nr!==null&&nr.document.write(zt),nr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call($r)==="[object Window]"){var F='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ee.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ee.filename+'" width="500px" height="400px" /></body></html>',se=$r.open();if(se!==null){se.document.write(F);var pe=this;se.document.documentElement.querySelector("#pdfViewer").onload=function(){se.document.title=Ee.filename,se.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(pe.output("bloburl"))}}return se}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call($r)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Pe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ee)+'"></iframe></body></html>',ot=$r.open();if(ot!==null&&(ot.document.write(Pe),ot.document.title=Ee.filename),ot||typeof safari>"u")return ot;break;case"datauri":case"dataurl":return $r.document.location.href=this.output("datauristring",Ee);default:return null}}),uc=function(te){return Array.isArray(Xa)===!0&&Xa.indexOf(te)>-1};switch(n){case"pt":Ie=1;break;case"mm":Ie=72/25.4;break;case"cm":Ie=72/2.54;break;case"in":Ie=72;break;case"px":Ie=uc("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ie=12;break;case"ex":Ie=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Ie=n}var ba=null;Y(),K();var Xc=function(te){return d!==null?ba.encryptor(te,0):function(Ee){return Ee}},dc=m.__private__.getPageInfo=m.getPageInfo=function(te){if(isNaN(te)||te%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:or[te].objId,pageNumber:te,pageContext:or[te]}},Fr=m.__private__.getPageInfoByObjId=function(te){if(isNaN(te)||te%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ee in or)if(or[Ee].objId===te)break;return dc(Ee)},fc=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:or[D].objId,pageNumber:D,pageContext:or[D]}};m.addPage=function(){return Hl.apply(this,arguments),this},m.setPage=function(){return Co.apply(this,arguments),ke.call(this,be[D]),this},m.insertPage=function(te){return this.addPage(),this.movePage(D,te),this},m.movePage=function(te,Ee){var Ke,tt;if(te>Ee){Ke=be[te],tt=or[te];for(var lt=te;lt>Ee;lt--)be[lt]=be[lt-1],or[lt]=or[lt-1];be[Ee]=Ke,or[Ee]=tt,this.setPage(Ee)}else if(te<Ee){Ke=be[te],tt=or[te];for(var kt=te;kt<Ee;kt++)be[kt]=be[kt+1],or[kt]=or[kt+1];be[Ee]=Ke,or[Ee]=tt,this.setPage(Ee)}return this},m.deletePage=function(){return lc.apply(this,arguments),this},m.__private__.text=m.text=function(te,Ee,Ke,tt,lt){var kt,zt,nr,F,se,pe,Pe,ot,gt,Gt=(tt=tt||{}).scope||this;if(typeof te=="number"&&typeof Ee=="number"&&(typeof Ke=="string"||Array.isArray(Ke))){var Rr=Ke;Ke=Ee,Ee=te,te=Rr}if(arguments[3]instanceof rr?(k("The transform parameter of text() with a Matrix value"),gt=lt):(nr=arguments[4],F=arguments[5],Ta(Pe=arguments[3])==="object"&&Pe!==null||(typeof nr=="string"&&(F=nr,nr=null),typeof Pe=="string"&&(F=Pe,Pe=null),typeof Pe=="number"&&(nr=Pe,Pe=null),tt={flags:Pe,angle:nr,align:F})),isNaN(Ee)||isNaN(Ke)||te==null)throw new Error("Invalid arguments passed to jsPDF.text");if(te.length===0)return Gt;var Cn="",en=!1,Yn=typeof tt.lineHeightFactor=="number"?tt.lineHeightFactor:Nn,ua=Gt.internal.scaleFactor;function pc(xn){return xn=xn.split("	").join(Array(tt.TabLen||9).join(" ")),gn(xn,Pe)}function vs(xn){for(var vn,Ba=xn.concat(),bs=[],xc=Ba.length;xc--;)typeof(vn=Ba.shift())=="string"?bs.push(vn):Array.isArray(xn)&&(vn.length===1||vn[1]===void 0&&vn[2]===void 0)?bs.push(vn[0]):bs.push([vn[0],vn[1],vn[2]]);return bs}function el(xn,vn){var Ba;if(typeof xn=="string")Ba=vn(xn)[0];else if(Array.isArray(xn)){for(var bs,xc,sh=xn.concat(),ih=[],Kd=sh.length;Kd--;)typeof(bs=sh.shift())=="string"?ih.push(vn(bs)[0]):Array.isArray(bs)&&typeof bs[0]=="string"&&(xc=vn(bs[0],bs[1],bs[2]),ih.push([xc[0],xc[1],xc[2]]));Ba=ih}return Ba}var Ku=!1,Xf=!0;if(typeof te=="string")Ku=!0;else if(Array.isArray(te)){var XA=te.concat();zt=[];for(var m0,ei=XA.length;ei--;)(typeof(m0=XA.shift())!="string"||Array.isArray(m0)&&typeof m0[0]!="string")&&(Xf=!1);Ku=Xf}if(Ku===!1)throw new Error('Type of text must be string or Array. "'+te+'" is not recognized.');typeof te=="string"&&(te=te.match(/[\r?\n]/)?te.split(/\r\n|\r|\n/g):[te]);var Yf=ae/Gt.internal.scaleFactor,p0=Yf*(Yn-1);switch(tt.baseline){case"bottom":Ke-=p0;break;case"top":Ke+=Yf-p0;break;case"hanging":Ke+=Yf-2*p0;break;case"middle":Ke+=Yf/2-p0}if((pe=tt.maxWidth||0)>0&&(typeof te=="string"?te=Gt.splitTextToSize(te,pe):Object.prototype.toString.call(te)==="[object Array]"&&(te=te.reduce(function(xn,vn){return xn.concat(Gt.splitTextToSize(vn,pe))},[]))),kt={text:te,x:Ee,y:Ke,options:tt,mutex:{pdfEscape:gn,activeFontKey:Xe,fonts:jt,activeFontSize:ae}},Yr.publish("preProcessText",kt),te=kt.text,nr=(tt=kt.options).angle,!(gt instanceof rr)&&nr&&typeof nr=="number"){nr*=Math.PI/180,tt.rotationDirection===0&&(nr=-nr),C===N.ADVANCED&&(nr=-nr);var g0=Math.cos(nr),YA=Math.sin(nr);gt=new rr(g0,YA,-YA,g0,0,0)}else nr&&nr instanceof rr&&(gt=nr);C!==N.ADVANCED||gt||(gt=cn),(se=tt.charSpace||Hd)!==void 0&&(Cn+=T(S(se))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ot=tt.horizontalScale)!==void 0&&(Cn+=T(100*ot)+` Tz
`),tt.lang;var tl=-1,Ky=tt.renderingMode!==void 0?tt.renderingMode:tt.stroke,ng=Gt.internal.getCurrentPageInfo().pageContext;switch(Ky){case 0:case!1:case"fill":tl=0;break;case 1:case!0:case"stroke":tl=1;break;case 2:case"fillThenStroke":tl=2;break;case 3:case"invisible":tl=3;break;case 4:case"fillAndAddForClipping":tl=4;break;case 5:case"strokeAndAddPathForClipping":tl=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":tl=6;break;case 7:case"addToPathForClipping":tl=7}var Av=ng.usedRenderingMode!==void 0?ng.usedRenderingMode:-1;tl!==-1?Cn+=tl+` Tr
`:Av!==-1&&(Cn+=`0 Tr
`),tl!==-1&&(ng.usedRenderingMode=tl),F=tt.align||"left";var gc,Ni=ae*Yn,Jf=Gt.internal.pageSize.getWidth(),ag=jt[Xe];se=tt.charSpace||Hd,pe=tt.maxWidth||0,Pe=Object.assign({autoencode:!0,noBOM:!0},tt.flags);var Gd=[],Zf=function(xn){return Gt.getStringUnitWidth(xn,{font:ag,charSpace:se,fontSize:ae,doKerning:!1})*ae/ua};if(Object.prototype.toString.call(te)==="[object Array]"){var ko;zt=vs(te),F!=="left"&&(gc=zt.map(Zf));var Mi,eh=0;if(F==="right"){Ee-=gc[0],te=[],ei=zt.length;for(var rl=0;rl<ei;rl++)rl===0?(Mi=to(Ee),ko=Is(Ke)):(Mi=S(eh-gc[rl]),ko=-Ni),te.push([zt[rl],Mi,ko]),eh=gc[rl]}else if(F==="center"){Ee-=gc[0]/2,te=[],ei=zt.length;for(var eu=0;eu<ei;eu++)eu===0?(Mi=to(Ee),ko=Is(Ke)):(Mi=S((eh-gc[eu])/2),ko=-Ni),te.push([zt[eu],Mi,ko]),eh=gc[eu]}else if(F==="left"){te=[],ei=zt.length;for(var Wu=0;Wu<ei;Wu++)te.push(zt[Wu])}else if(F==="justify"&&ag.encoding==="Identity-H"){te=[],ei=zt.length,pe=pe!==0?pe:Jf;for(var tu=0,ls=0;ls<ei;ls++)if(ko=ls===0?Is(Ke):-Ni,Mi=ls===0?to(Ee):tu,ls<ei-1){var ru=S((pe-gc[ls])/(zt[ls].split(" ").length-1)),Ds=zt[ls].split(" ");te.push([Ds[0]+" ",Mi,ko]),tu=0;for(var nl=1;nl<Ds.length;nl++){var x0=(Zf(Ds[nl-1]+" "+Ds[nl])-Zf(Ds[nl]))*ua+ru;nl==Ds.length-1?te.push([Ds[nl],x0,0]):te.push([Ds[nl]+" ",x0,0]),tu-=x0}}else te.push([zt[ls],Mi,ko]);te.push(["",tu,0])}else{if(F!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(te=[],ei=zt.length,pe=pe!==0?pe:Jf,ls=0;ls<ei;ls++)ko=ls===0?Is(Ke):-Ni,Mi=ls===0?to(Ee):0,ls<ei-1?Gd.push(T(S((pe-gc[ls])/(zt[ls].split(" ").length-1)))):Gd.push(0),te.push([zt[ls],Mi,ko])}}var Xu=typeof tt.R2L=="boolean"?tt.R2L:xe;Xu===!0&&(te=el(te,function(xn,vn,Ba){return[xn.split("").reverse().join(""),vn,Ba]})),kt={text:te,x:Ee,y:Ke,options:tt,mutex:{pdfEscape:gn,activeFontKey:Xe,fonts:jt,activeFontSize:ae}},Yr.publish("postProcessText",kt),te=kt.text,en=kt.mutex.isHex||!1;var JA=jt[Xe].encoding;JA!=="WinAnsiEncoding"&&JA!=="StandardEncoding"||(te=el(te,function(xn,vn,Ba){return[pc(xn),vn,Ba]})),zt=vs(te),te=[];for(var th,rh,nh,v0=0,ZA=1,ah=Array.isArray(zt[0])?ZA:v0,qd="",b0=function(xn,vn,Ba){var bs="";return Ba instanceof rr?(Ba=typeof tt.angle=="number"?wn(Ba,new rr(1,0,0,1,xn,vn)):wn(new rr(1,0,0,1,xn,vn),Ba),C===N.ADVANCED&&(Ba=wn(new rr(1,0,0,-1,0,0),Ba)),bs=Ba.join(" ")+` Tm
`):bs=T(xn)+" "+T(vn)+` Td
`,bs},cs=0;cs<zt.length;cs++){switch(qd="",ah){case ZA:nh=(en?"<":"(")+zt[cs][0]+(en?">":")"),th=parseFloat(zt[cs][1]),rh=parseFloat(zt[cs][2]);break;case v0:nh=(en?"<":"(")+zt[cs]+(en?">":")"),th=to(Ee),rh=Is(Ke)}Gd!==void 0&&Gd[cs]!==void 0&&(qd=Gd[cs]+` Tw
`),cs===0?te.push(qd+b0(th,rh,gt)+nh):ah===v0?te.push(qd+nh):ah===ZA&&te.push(qd+b0(th,rh,gt)+nh)}te=ah===v0?te.join(` Tj
T* `):te.join(` Tj
`),te+=` Tj
`;var $l=`BT
/`;return $l+=Xe+" "+ae+` Tf
`,$l+=T(ae*Yn)+` TL
`,$l+=Jc+`
`,$l+=Cn,$l+=te,ue($l+="ET"),A[Xe]=!0,Gt};var qA=m.__private__.clip=m.clip=function(te){return ue(te==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return qA("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ue("n"),this};var Zi=m.__private__.isValidStyle=function(te){var Ee=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(te)!==-1&&(Ee=!0),Ee};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(te){return Zi(te)&&(u=te),this};var Yo=m.__private__.getStyle=m.getStyle=function(te){var Ee=u;switch(te){case"D":case"S":Ee="S";break;case"F":Ee="f";break;case"FD":case"DF":Ee="B";break;case"f":case"f*":case"B":case"B*":Ee=te}return Ee},jo=m.close=function(){return ue("h"),this};m.stroke=function(){return ue("S"),this},m.fill=function(te){return hc("f",te),this},m.fillEvenOdd=function(te){return hc("f*",te),this},m.fillStroke=function(te){return hc("B",te),this},m.fillStrokeEvenOdd=function(te){return hc("B*",te),this};var hc=function(te,Ee){Ta(Ee)==="object"?Yc(Ee,te):ue(te)},Jo=function(te){te===null||C===N.ADVANCED&&te===void 0||(te=Yo(te),ue(te))};function Hu(te,Ee,Ke,tt,lt){var kt=new Rb(Ee||this.boundingBox,Ke||this.xStep,tt||this.yStep,this.gState,lt||this.matrix);kt.stream=this.stream;var zt=te+"$$"+this.cloneIndex+++"$$";return On(zt,kt),kt}var Yc=function(te,Ee){var Ke=Nr[te.key],tt=Ut[Ke];if(tt instanceof Qg)ue("q"),ue(f0(Ee)),tt.gState&&m.setGState(tt.gState),ue(te.matrix.toString()+" cm"),ue("/"+Ke+" sh"),ue("Q");else if(tt instanceof Rb){var lt=new rr(1,0,0,-1,0,ro());te.matrix&&(lt=lt.multiply(te.matrix||cn),Ke=Hu.call(tt,te.key,te.boundingBox,te.xStep,te.yStep,lt).id),ue("q"),ue("/Pattern cs"),ue("/"+Ke+" scn"),tt.gState&&m.setGState(tt.gState),ue(Ee),ue("Q")}},f0=function(te){switch(te){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Zo=m.moveTo=function(te,Ee){return ue(T(S(te))+" "+T(H(Ee))+" m"),this},eo=m.lineTo=function(te,Ee){return ue(T(S(te))+" "+T(H(Ee))+" l"),this},Ac=m.curveTo=function(te,Ee,Ke,tt,lt,kt){return ue([T(S(te)),T(H(Ee)),T(S(Ke)),T(H(tt)),T(S(lt)),T(H(kt)),"c"].join(" ")),this};m.__private__.line=m.line=function(te,Ee,Ke,tt,lt){if(isNaN(te)||isNaN(Ee)||isNaN(Ke)||isNaN(tt)||!Zi(lt))throw new Error("Invalid arguments passed to jsPDF.line");return C===N.COMPAT?this.lines([[Ke-te,tt-Ee]],te,Ee,[1,1],lt||"S"):this.lines([[Ke-te,tt-Ee]],te,Ee,[1,1]).stroke()},m.__private__.lines=m.lines=function(te,Ee,Ke,tt,lt,kt){var zt,nr,F,se,pe,Pe,ot,gt,Gt,Rr,Cn,en;if(typeof te=="number"&&(en=Ke,Ke=Ee,Ee=te,te=en),tt=tt||[1,1],kt=kt||!1,isNaN(Ee)||isNaN(Ke)||!Array.isArray(te)||!Array.isArray(tt)||!Zi(lt)||typeof kt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Zo(Ee,Ke),zt=tt[0],nr=tt[1],se=te.length,Rr=Ee,Cn=Ke,F=0;F<se;F++)(pe=te[F]).length===2?(Rr=pe[0]*zt+Rr,Cn=pe[1]*nr+Cn,eo(Rr,Cn)):(Pe=pe[0]*zt+Rr,ot=pe[1]*nr+Cn,gt=pe[2]*zt+Rr,Gt=pe[3]*nr+Cn,Rr=pe[4]*zt+Rr,Cn=pe[5]*nr+Cn,Ac(Pe,ot,gt,Gt,Rr,Cn));return kt&&jo(),Jo(lt),this},m.path=function(te){for(var Ee=0;Ee<te.length;Ee++){var Ke=te[Ee],tt=Ke.c;switch(Ke.op){case"m":Zo(tt[0],tt[1]);break;case"l":eo(tt[0],tt[1]);break;case"c":Ac.apply(this,tt);break;case"h":jo()}}return this},m.__private__.rect=m.rect=function(te,Ee,Ke,tt,lt){if(isNaN(te)||isNaN(Ee)||isNaN(Ke)||isNaN(tt)||!Zi(lt))throw new Error("Invalid arguments passed to jsPDF.rect");return C===N.COMPAT&&(tt=-tt),ue([T(S(te)),T(H(Ee)),T(S(Ke)),T(S(tt)),"re"].join(" ")),Jo(lt),this},m.__private__.triangle=m.triangle=function(te,Ee,Ke,tt,lt,kt,zt){if(isNaN(te)||isNaN(Ee)||isNaN(Ke)||isNaN(tt)||isNaN(lt)||isNaN(kt)||!Zi(zt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ke-te,tt-Ee],[lt-Ke,kt-tt],[te-lt,Ee-kt]],te,Ee,[1,1],zt,!0),this},m.__private__.roundedRect=m.roundedRect=function(te,Ee,Ke,tt,lt,kt,zt){if(isNaN(te)||isNaN(Ee)||isNaN(Ke)||isNaN(tt)||isNaN(lt)||isNaN(kt)||!Zi(zt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var nr=4/3*(Math.SQRT2-1);return lt=Math.min(lt,.5*Ke),kt=Math.min(kt,.5*tt),this.lines([[Ke-2*lt,0],[lt*nr,0,lt,kt-kt*nr,lt,kt],[0,tt-2*kt],[0,kt*nr,-lt*nr,kt,-lt,kt],[2*lt-Ke,0],[-lt*nr,0,-lt,-kt*nr,-lt,-kt],[0,2*kt-tt],[0,-kt*nr,lt*nr,-kt,lt,-kt]],te+lt,Ee,[1,1],zt,!0),this},m.__private__.ellipse=m.ellipse=function(te,Ee,Ke,tt,lt){if(isNaN(te)||isNaN(Ee)||isNaN(Ke)||isNaN(tt)||!Zi(lt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var kt=4/3*(Math.SQRT2-1)*Ke,zt=4/3*(Math.SQRT2-1)*tt;return Zo(te+Ke,Ee),Ac(te+Ke,Ee-zt,te+kt,Ee-tt,te,Ee-tt),Ac(te-kt,Ee-tt,te-Ke,Ee-zt,te-Ke,Ee),Ac(te-Ke,Ee+zt,te-kt,Ee+tt,te,Ee+tt),Ac(te+kt,Ee+tt,te+Ke,Ee+zt,te+Ke,Ee),Jo(lt),this},m.__private__.circle=m.circle=function(te,Ee,Ke,tt){if(isNaN(te)||isNaN(Ee)||isNaN(Ke)||!Zi(tt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(te,Ee,Ke,Ke,tt)},m.setFont=function(te,Ee,Ke){return Ke&&(Ee=I(Ee,Ke)),Xe=cc(te,Ee,{disableWarning:!1}),this};var Bs=m.__private__.getFont=m.getFont=function(){return jt[cc.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var te,Ee,Ke={};for(te in qt)if(qt.hasOwnProperty(te))for(Ee in Ke[te]=[],qt[te])qt[te].hasOwnProperty(Ee)&&Ke[te].push(Ee);return Ke},m.addFont=function(te,Ee,Ke,tt,lt){var kt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&kt.indexOf(arguments[3])!==-1?lt=arguments[3]:arguments[3]&&kt.indexOf(arguments[3])==-1&&(Ke=I(Ke,tt)),lt=lt||"Identity-H",oc.call(this,te,Ee,Ke,lt)};var Nn,Qu=e.lineWidth||.200025,mc=m.__private__.getLineWidth=m.getLineWidth=function(){return Qu},h0=m.__private__.setLineWidth=m.setLineWidth=function(te){return Qu=te,ue(T(S(te))+" w"),this};m.__private__.setLineDash=wr.API.setLineDash=wr.API.setLineDashPattern=function(te,Ee){if(te=te||[],Ee=Ee||0,isNaN(Ee)||!Array.isArray(te))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return te=te.map(function(Ke){return T(S(Ke))}).join(" "),Ee=T(S(Ee)),ue("["+te+"] "+Ee+" d"),this};var Md=m.__private__.getLineHeight=m.getLineHeight=function(){return ae*Nn};m.__private__.getLineHeight=m.getLineHeight=function(){return ae*Nn};var Ud=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(te){return typeof(te=te||1.15)=="number"&&(Nn=te),this},Vl=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Nn};Ud(e.lineHeight);var to=m.__private__.getHorizontalCoordinate=function(te){return S(te)},Is=m.__private__.getVerticalCoordinate=function(te){return C===N.ADVANCED?te:or[D].mediaBox.topRightY-or[D].mediaBox.bottomLeftY-S(te)},KA=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(te){return T(to(te))},Vu=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(te){return T(Is(te))},Li=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Ne(Li)},m.__private__.setStrokeColor=m.setDrawColor=function(te,Ee,Ke,tt){return Li=ve({ch1:te,ch2:Ee,ch3:Ke,ch4:tt,pdfColorType:"draw",precision:2}),ue(Li),this};var $u=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Ne($u)},m.__private__.setFillColor=m.setFillColor=function(te,Ee,Ke,tt){return $u=ve({ch1:te,ch2:Ee,ch3:Ke,ch4:tt,pdfColorType:"fill",precision:2}),ue($u),this};var Jc=e.textColor||"0 g",Gf=m.__private__.getTextColor=m.getTextColor=function(){return Ne(Jc)};m.__private__.setTextColor=m.setTextColor=function(te,Ee,Ke,tt){return Jc=ve({ch1:te,ch2:Ee,ch3:Ke,ch4:tt,pdfColorType:"text",precision:3}),this};var Hd=e.charSpace,qf=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Hd||0)};m.__private__.setCharSpace=m.setCharSpace=function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Hd=te,this};var A0=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(te){var Ee=m.CapJoinStyles[te];if(Ee===void 0)throw new Error("Line cap style of '"+te+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return A0=Ee,ue(Ee+" J"),this};var Qd=0;m.__private__.setLineJoin=m.setLineJoin=function(te){var Ee=m.CapJoinStyles[te];if(Ee===void 0)throw new Error("Line join style of '"+te+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qd=Ee,ue(Ee+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(te){if(te=te||0,isNaN(te))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ue(T(S(te))+" M"),this},m.GState=$_,m.setGState=function(te){(te=typeof te=="string"?tr[Xr[te]]:zu(null,te)).equals(hr)||(ue("/"+te.id+" gs"),hr=te)};var zu=function(te,Ee){if(!te||!Xr[te]){var Ke=!1;for(var tt in tr)if(tr.hasOwnProperty(tt)&&tr[tt].equals(Ee)){Ke=!0;break}if(Ke)Ee=tr[tt];else{var lt="GS"+(Object.keys(tr).length+1).toString(10);tr[lt]=Ee,Ee.id=lt}return te&&(Xr[te]=Ee.id),Yr.publish("addGState",Ee),Ee}};m.addGState=function(te,Ee){return zu(te,Ee),this},m.saveGraphicsState=function(){return ue("q"),ir.push({key:Xe,size:ae,color:Jc}),this},m.restoreGraphicsState=function(){ue("Q");var te=ir.pop();return Xe=te.key,ae=te.size,Jc=te.color,hr=null,this},m.setCurrentTransformationMatrix=function(te){return ue(te.toString()+" cm"),this},m.comment=function(te){return ue("#"+te),this};var Vd=function(te,Ee){var Ke=te||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ke},set:function(kt){isNaN(kt)||(Ke=parseFloat(kt))}});var tt=Ee||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return tt},set:function(kt){isNaN(kt)||(tt=parseFloat(kt))}});var lt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return lt},set:function(kt){lt=kt.toString()}}),this},Kf=function(te,Ee,Ke,tt){Vd.call(this,te,Ee),this.type="rect";var lt=Ke||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return lt},set:function(zt){isNaN(zt)||(lt=parseFloat(zt))}});var kt=tt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return kt},set:function(zt){isNaN(zt)||(kt=parseFloat(zt))}}),this},$d=function(){this.page=Dr,this.currentPage=D,this.pages=be.slice(0),this.pagesContext=or.slice(0),this.x=Be,this.y=et,this.matrix=bt,this.width=qu(D),this.height=ro(D),this.outputDestination=je,this.id="",this.objectNumber=-1};$d.prototype.restore=function(){Dr=this.page,D=this.currentPage,or=this.pagesContext,be=this.pages,Be=this.x,et=this.y,bt=this.matrix,zd(D,this.width),Wf(D,this.height),je=this.outputDestination};var Gu=function(te,Ee,Ke,tt,lt){is.push(new $d),Dr=D=0,be=[],Be=te,et=Ee,bt=lt,Zs([Ke,tt])},WA=function(te){if(Gn[te])is.pop().restore();else{var Ee=new $d,Ke="Xo"+(Object.keys(aa).length+1).toString(10);Ee.id=Ke,Gn[te]=Ke,aa[Ke]=Ee,Yr.publish("addFormObject",Ee),is.pop().restore()}};for(var Zc in m.beginFormObject=function(te,Ee,Ke,tt,lt){return Gu(te,Ee,Ke,tt,lt),this},m.endFormObject=function(te){return WA(te),this},m.doFormObject=function(te,Ee){var Ke=aa[Gn[te]];return ue("q"),ue(Ee.toString()+" cm"),ue("/"+Ke.id+" Do"),ue("Q"),this},m.getFormObject=function(te){var Ee=aa[Gn[te]];return{x:Ee.x,y:Ee.y,width:Ee.width,height:Ee.height,matrix:Ee.matrix}},m.save=function(te,Ee){return te=te||"generated.pdf",(Ee=Ee||{}).returnPromise=Ee.returnPromise||!1,Ee.returnPromise===!1?(Pg(zf(Ql()),te),typeof Pg.unload=="function"&&$r.setTimeout&&setTimeout(Pg.unload,911),this):new Promise(function(Ke,tt){try{var lt=Pg(zf(Ql()),te);typeof Pg.unload=="function"&&$r.setTimeout&&setTimeout(Pg.unload,911),Ke(lt)}catch(kt){tt(kt.message)}})},wr.API)wr.API.hasOwnProperty(Zc)&&(Zc==="events"&&wr.API.events.length?function(te,Ee){var Ke,tt,lt;for(lt=Ee.length-1;lt!==-1;lt--)Ke=Ee[lt][0],tt=Ee[lt][1],te.subscribe.apply(te,[Ke].concat(typeof tt=="function"?[tt]:tt))}(Yr,wr.API.events):m[Zc]=wr.API[Zc]);var qu=m.getPageWidth=function(te){return(or[te=te||D].mediaBox.topRightX-or[te].mediaBox.bottomLeftX)/Ie},zd=m.setPageWidth=function(te,Ee){or[te].mediaBox.topRightX=Ee*Ie+or[te].mediaBox.bottomLeftX},ro=m.getPageHeight=function(te){return(or[te=te||D].mediaBox.topRightY-or[te].mediaBox.bottomLeftY)/Ie},Wf=m.setPageHeight=function(te,Ee){or[te].mediaBox.topRightY=Ee*Ie+or[te].mediaBox.bottomLeftY};return m.internal={pdfEscape:gn,getStyle:Yo,getFont:Bs,getFontSize:ge,getCharSpace:qf,getTextColor:Gf,getLineHeight:Md,getLineHeightFactor:Vl,getLineWidth:mc,write:we,getHorizontalCoordinate:to,getVerticalCoordinate:Is,getCoordinateString:KA,getVerticalCoordinateString:Vu,collections:{},newObject:Fn,newAdditionalObject:Ge,newObjectDeferred:sa,newObjectDeferredBegin:Se,getFilters:Fe,putStream:ze,events:Yr,scaleFactor:Ie,pageSize:{getWidth:function(){return qu(D)},setWidth:function(te){zd(D,te)},getHeight:function(){return ro(D)},setHeight:function(te){Wf(D,te)}},encryptionOptions:d,encryption:ba,getEncryptor:Xc,output:Wc,getNumberOfPages:Ln,pages:be,out:ue,f2:M,f3:P,getPageInfo:dc,getPageInfoByObjId:Fr,getCurrentPageInfo:fc,getPDFVersion:x,Point:Vd,Rectangle:Kf,Matrix:rr,hasHotfix:uc},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return qu(D)},set:function(te){zd(D,te)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return ro(D)},set:function(te){Wf(D,te)},enumerable:!0,configurable:!0}),Rd.call(m,de),Xe="F1",Hl(a,r),Yr.publish("initialized"),m}Cb.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Cb.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Cb.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Cb.prototype.processOwnerPassword=function(e,t){return zR($R(t).substr(0,5),e)},Cb.prototype.encryptor=function(e,t){var r=$R(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return zR(r,n)}},$_.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Ta(e)!==Ta(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},wr.API={events:[]},wr.version="2.5.2";var Ms=wr.API,Q9=1,dv=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Yv=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},sn=function(e){return e.toFixed(2)},Dm=function(e){return e.toFixed(5)};Ms.__acroform__={};var qc=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},GJ=function(e){return e*Q9},Ch=function(e){var t=new mAe,r=yr.internal.getHeight(e)||0,n=yr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(sn(n)),Number(sn(r))],t},Mst=Ms.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},Ust=Ms.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},Hst=Ms.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},hi=Ms.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Hst(e,t-1)},Ai=Ms.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Mst(e,t-1)},mi=Ms.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Ust(e,t-1)},Qst=Ms.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],s=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=n(s)||0,[Number(sn(c.lowerLeft_X)),Number(sn(c.lowerLeft_Y)),Number(sn(c.upperRight_X)),Number(sn(c.upperRight_Y))]},Vst=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=GR(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+sn(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=Ch(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},GR=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(P){return P.split(`
`)}):a.map(function(P){return[P]});var s=r,o=yr.internal.getHeight(e)||0;o=o<0?-o:o;var l=yr.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(P,S,L){if(P+1<a.length){var H=S+" "+a[P+1][0];return jk(H,e,L).width<=l-4}return!1};s++;e:for(;s>0;){t="",s--;var u,d,f=jk("3",e,s).height,A=e.multiline?o-s:(o-f)/2,m=A+=2,g=0,x=0,v=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+jk(t,e,s=12).width+", FieldWidth:"+l+`
`;break}for(var y="",N=0,C=0;C<a.length;C++)if(a.hasOwnProperty(C)){var _=!1;if(a[C].length!==1&&v!==a[C].length-1){if((f+2)*(N+2)+2>o)continue e;y+=a[C][v],_=!0,x=C,C--}else{y=(y+=a[C][v]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var j=parseInt(C),I=c(j,y,s),T=C>=a.length-1;if(I&&!T){y+=" ",v=0;continue}if(I||T){if(T)x=j;else if(e.multiline&&(f+2)*(N+2)+2>o)continue e}else{if(!e.multiline||(f+2)*(N+2)+2>o)continue e;x=j}}for(var k="",B=g;B<=x;B++){var M=a[B];if(e.multiline){if(B===x){k+=M[v]+" ",v=(v+1)%M.length;continue}if(B===g){k+=M[M.length-1]+" ";continue}}k+=M[0]+" "}switch(k=k.substr(k.length-1)==" "?k.substr(0,k.length-1):k,d=jk(k,e,s).width,e.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;case"left":default:u=2}t+=sn(u)+" "+sn(m)+` Td
`,t+="("+dv(k)+`) Tj
`,t+=-sn(u)+` 0 Td
`,m=-(s+2),d=0,g=_?x:x+1,N++,y=""}break}return n.text=t,n.fontSize=s,n},jk=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},$st={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},zst=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},Gst=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),Ta(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},qst=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Hf.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify($st)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Q9=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new pAe,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&zst(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=Qst(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=yr.createDefaultAppearanceStream(l),Ta(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=Vst(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var A in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(A)){var m=l.appearanceStreamContent[A];if(f+="/"+A+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var g=m[o];typeof g=="function"&&(g=g.call(a,l)),f+="/"+o+" "+g+" ",a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g)}}else typeof(g=m)=="function"&&(g=g.call(a,l)),f+="/"+o+" "+g,a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}s&&Gst(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},AAe=Ms.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(s!==0&&(a+=" "),Ta(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+dv(n(e[s].toString()))+")"):a+=e[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},xO=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+dv(n(e))+")"},Uh=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Uh.prototype.toString=function(){return this.objId+" 0 R"},Uh.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Uh.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:AAe(a,this.objId,this.scope)}):a instanceof Uh?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var mAe=function(){Uh.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};qc(mAe,Uh);var pAe=function(){Uh.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+dv(r(e))+")"}},set:function(r){e=r}})};qc(pAe,Uh);var Hf=function e(){Uh.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!hi(t,3)},set:function(y){y?this.F=Ai(t,3):this.F=mi(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof z_)return;s="FieldObject"+e.FieldNum++}var y=function(N){return N};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+dv(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/Q9:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof z_||this instanceof xx))return xO(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var A=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof ho?A:xO(A,this.objId,this.scope)},set:function(y){y=y.toString(),A=this instanceof ho?y:y.substr(0,1)==="("?Yv(y.substr(1,y.length-2)):Yv(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ho?Yv(A.substr(1,A.length-1)):A},set:function(y){y=y.toString(),A=this instanceof ho?"/"+y:y}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof ho?m:xO(m,this.objId,this.scope)},set:function(y){y=y.toString(),m=this instanceof ho?y:y.substr(0,1)==="("?Yv(y.substr(1,y.length-2)):Yv(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ho?Yv(m.substr(1,m.length-1)):m},set:function(y){y=y.toString(),m=this instanceof ho?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(y){y=!!y,x=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,1)},set:function(y){y?this.Ff=Ai(this.Ff,1):this.Ff=mi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,2)},set:function(y){y?this.Ff=Ai(this.Ff,2):this.Ff=mi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,3)},set:function(y){y?this.Ff=Ai(this.Ff,3):this.Ff=mi(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');v=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(v){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:v=2;break;case"center":case 1:v=1;break;case"left":case 0:default:v=0}}})};qc(Hf,Uh);var u1=function(){Hf.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return AAe(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,o,l){l||(l=1);for(var c,u=[];c=o.exec(s);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,18)},set:function(r){r?this.Ff=Ai(this.Ff,18):this.Ff=mi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Ai(this.Ff,19):this.Ff=mi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,20)},set:function(r){r?(this.Ff=Ai(this.Ff,20),t.sort()):this.Ff=mi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,22)},set:function(r){r?this.Ff=Ai(this.Ff,22):this.Ff=mi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,23)},set:function(r){r?this.Ff=Ai(this.Ff,23):this.Ff=mi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,27)},set:function(r){r?this.Ff=Ai(this.Ff,27):this.Ff=mi(this.Ff,27)}}),this.hasAppearanceStream=!1};qc(u1,Hf);var d1=function(){u1.call(this),this.fontName="helvetica",this.combo=!1};qc(d1,u1);var f1=function(){d1.call(this),this.combo=!0};qc(f1,d1);var PS=function(){f1.call(this),this.edit=!0};qc(PS,f1);var ho=function(){Hf.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,15)},set:function(r){r?this.Ff=Ai(this.Ff,15):this.Ff=mi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,16)},set:function(r){r?this.Ff=Ai(this.Ff,16):this.Ff=mi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,17)},set:function(r){r?this.Ff=Ai(this.Ff,17):this.Ff=mi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,26)},set:function(r){r?this.Ff=Ai(this.Ff,26):this.Ff=mi(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+dv(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Ta(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};qc(ho,Hf);var FS=function(){ho.call(this),this.pushButton=!0};qc(FS,ho);var h1=function(){ho.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};qc(h1,ho);var z_=function(){var e,t;Hf.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),n)o.push("/"+s+" ("+dv(a(n[s]))+")");return o.push(">>"),o.join(`
`)},set:function(a){Ta(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=yr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};qc(z_,Hf),h1.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},h1.prototype.createOption=function(e){var t=new z_;return t.Parent=this,t.optionName=e,this.Kids.push(t),Kst.call(this.scope,t),t};var RS=function(){ho.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=yr.CheckBox.createAppearanceStream()};qc(RS,ho);var xx=function(){Hf.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,13)},set:function(t){t?this.Ff=Ai(this.Ff,13):this.Ff=mi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,21)},set:function(t){t?this.Ff=Ai(this.Ff,21):this.Ff=mi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,23)},set:function(t){t?this.Ff=Ai(this.Ff,23):this.Ff=mi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,24)},set:function(t){t?this.Ff=Ai(this.Ff,24):this.Ff=mi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,25)},set:function(t){t?this.Ff=Ai(this.Ff,25):this.Ff=mi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,26)},set:function(t){t?this.Ff=Ai(this.Ff,26):this.Ff=mi(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};qc(xx,Hf);var LS=function(){xx.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,14)},set:function(e){e?this.Ff=Ai(this.Ff,14):this.Ff=mi(this.Ff,14)}}),this.password=!0};qc(LS,xx);var yr={CheckBox:{createAppearanceStream:function(){return{N:{On:yr.CheckBox.YesNormal},D:{On:yr.CheckBox.YesPushDown,Off:yr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Ch(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=GR(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+sn(yr.internal.getWidth(e))+" "+sn(yr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+sn(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Ch(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],s=yr.internal.getHeight(e),o=yr.internal.getWidth(e),l=GR(e,e.caption);return a.push("1 g"),a.push("0 0 "+sn(o)+" "+sn(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+sn(o-1)+" "+sn(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+sn(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Ch(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+sn(yr.internal.getWidth(e))+" "+sn(yr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:yr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=yr.RadioButton.Circle.YesNormal,t.D[e]=yr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Ch(e);t.scope=e.scope;var r=[],n=yr.internal.getWidth(e)<=yr.internal.getHeight(e)?yr.internal.getWidth(e)/4:yr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=yr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Dm(yr.internal.getWidth(e)/2)+" "+Dm(yr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Ch(e);t.scope=e.scope;var r=[],n=yr.internal.getWidth(e)<=yr.internal.getHeight(e)?yr.internal.getWidth(e)/4:yr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*yr.internal.Bezier_C).toFixed(5)),o=Number((n*yr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Dm(yr.internal.getWidth(e)/2)+" "+Dm(yr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Dm(yr.internal.getWidth(e)/2)+" "+Dm(yr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Ch(e);t.scope=e.scope;var r=[],n=yr.internal.getWidth(e)<=yr.internal.getHeight(e)?yr.internal.getWidth(e)/4:yr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*yr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Dm(yr.internal.getWidth(e)/2)+" "+Dm(yr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:yr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=yr.RadioButton.Cross.YesNormal,t.D[e]=yr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Ch(e);t.scope=e.scope;var r=[],n=yr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+sn(yr.internal.getWidth(e)-2)+" "+sn(yr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(sn(n.x1.x)+" "+sn(n.x1.y)+" m"),r.push(sn(n.x2.x)+" "+sn(n.x2.y)+" l"),r.push(sn(n.x4.x)+" "+sn(n.x4.y)+" m"),r.push(sn(n.x3.x)+" "+sn(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Ch(e);t.scope=e.scope;var r=yr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+sn(yr.internal.getWidth(e))+" "+sn(yr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+sn(yr.internal.getWidth(e)-2)+" "+sn(yr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(sn(r.x1.x)+" "+sn(r.x1.y)+" m"),n.push(sn(r.x2.x)+" "+sn(r.x2.y)+" l"),n.push(sn(r.x4.x)+" "+sn(r.x4.y)+" m"),n.push(sn(r.x3.x)+" "+sn(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Ch(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+sn(yr.internal.getWidth(e))+" "+sn(yr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};yr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=yr.internal.getWidth(e),r=yr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},yr.internal.getWidth=function(e){var t=0;return Ta(e)==="object"&&(t=GJ(e.Rect[2])),t},yr.internal.getHeight=function(e){var t=0;return Ta(e)==="object"&&(t=GJ(e.Rect[3])),t};var Kst=Ms.addField=function(e){if(qst(this,e),!(e instanceof Hf))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Ms.AcroFormChoiceField=u1,Ms.AcroFormListBox=d1,Ms.AcroFormComboBox=f1,Ms.AcroFormEditBox=PS,Ms.AcroFormButton=ho,Ms.AcroFormPushButton=FS,Ms.AcroFormRadioButton=h1,Ms.AcroFormCheckBox=RS,Ms.AcroFormTextField=xx,Ms.AcroFormPasswordField=LS,Ms.AcroFormAppearance=yr,Ms.AcroForm={ChoiceField:u1,ListBox:d1,ComboBox:f1,EditBox:PS,Button:ho,PushButton:FS,RadioButton:h1,CheckBox:RS,TextField:xx,PasswordField:LS,Appearance:yr},wr.AcroForm={ChoiceField:u1,ListBox:d1,ComboBox:f1,EditBox:PS,Button:ho,PushButton:FS,RadioButton:h1,CheckBox:RS,TextField:xx,PasswordField:LS,Appearance:yr};wr.AcroForm;function gAe(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(P,S){var L,H,q,Q,z,K=t;if((S=S||t)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(I(P))for(z in r)for(q=r[z],L=0;L<q.length;L+=1){for(Q=!0,H=0;H<q[L].length;H+=1)if(q[L][H]!==void 0&&q[L][H]!==P[H]){Q=!1;break}if(Q===!0){K=z;break}}else for(z in r)for(q=r[z],L=0;L<q.length;L+=1){for(Q=!0,H=0;H<q[L].length;H+=1)if(q[L][H]!==void 0&&q[L][H]!==P.charCodeAt(H)){Q=!1;break}if(Q===!0){K=z;break}}return K===t&&S!==t&&(K=S),K},a=function P(S){for(var L=this.internal.write,H=this.internal.putStream,q=(0,this.internal.getFilters)();q.indexOf("FlateEncode")!==-1;)q.splice(q.indexOf("FlateEncode"),1);S.objectId=this.internal.newObject();var Q=[];if(Q.push({key:"Type",value:"/XObject"}),Q.push({key:"Subtype",value:"/Image"}),Q.push({key:"Width",value:S.width}),Q.push({key:"Height",value:S.height}),S.colorSpace===v.INDEXED?Q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(S.palette.length/3-1)+" "+("sMask"in S&&S.sMask!==void 0?S.objectId+2:S.objectId+1)+" 0 R]"}):(Q.push({key:"ColorSpace",value:"/"+S.colorSpace}),S.colorSpace===v.DEVICE_CMYK&&Q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Q.push({key:"BitsPerComponent",value:S.bitsPerComponent}),"decodeParameters"in S&&S.decodeParameters!==void 0&&Q.push({key:"DecodeParms",value:"<<"+S.decodeParameters+">>"}),"transparency"in S&&Array.isArray(S.transparency)){for(var z="",K=0,Z=S.transparency.length;K<Z;K++)z+=S.transparency[K]+" "+S.transparency[K]+" ";Q.push({key:"Mask",value:"["+z+"]"})}S.sMask!==void 0&&Q.push({key:"SMask",value:S.objectId+1+" 0 R"});var U=S.filter!==void 0?["/"+S.filter]:void 0;if(H({data:S.data,additionalKeyValues:Q,alreadyAppliedFilters:U,objectId:S.objectId}),L("endobj"),"sMask"in S&&S.sMask!==void 0){var Y="/Predictor "+S.predictor+" /Colors 1 /BitsPerComponent "+S.bitsPerComponent+" /Columns "+S.width,R={width:S.width,height:S.height,colorSpace:"DeviceGray",bitsPerComponent:S.bitsPerComponent,decodeParameters:Y,data:S.sMask};"filter"in S&&(R.filter=S.filter),P.call(this,R)}if(S.colorSpace===v.INDEXED){var D=this.internal.newObject();H({data:k(new Uint8Array(S.palette)),objectId:D}),L("endobj")}},s=function(){var P=this.internal.collections.addImage_images;for(var S in P)a.call(this,P[S])},o=function(){var P,S=this.internal.collections.addImage_images,L=this.internal.write;for(var H in S)L("/I"+(P=S[H]).index,P.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var P=this.internal.collections.addImage_images;return l.call(this),P},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(P){return typeof e["process"+P.toUpperCase()]=="function"},f=function(P){return Ta(P)==="object"&&P.nodeType===1},A=function(P,S){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var L=""+P.getAttribute("src");if(L.indexOf("data:image/")===0)return lN(unescape(L).split("base64,").pop());var H=e.loadFile(L,!0);if(H!==void 0)return H}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var q;switch(S){case"PNG":q="image/png";break;case"WEBP":q="image/webp";break;case"JPEG":case"JPG":default:q="image/jpeg"}return lN(P.toDataURL(q,1).split("base64,").pop())}},m=function(P){var S=this.internal.collections.addImage_images;if(S){for(var L in S)if(P===S[L].alias)return S[L]}},g=function(P,S,L){return P||S||(P=-96,S=-96),P<0&&(P=-1*L.width*72/P/this.internal.scaleFactor),S<0&&(S=-1*L.height*72/S/this.internal.scaleFactor),P===0&&(P=S*L.width/L.height),S===0&&(S=P*L.height/L.width),[P,S]},x=function(P,S,L,H,q,Q){var z=g.call(this,L,H,q),K=this.internal.getCoordinateString,Z=this.internal.getVerticalCoordinateString,U=c.call(this);if(L=z[0],H=z[1],U[q.index]=q,Q){Q*=Math.PI/180;var Y=Math.cos(Q),R=Math.sin(Q),D=function(J){return J.toFixed(4)},W=[D(Y),D(R),D(-1*R),D(Y),0,0,"cm"]}this.internal.write("q"),Q?(this.internal.write([1,"0","0",1,K(P),Z(S+H),"cm"].join(" ")),this.internal.write(W.join(" ")),this.internal.write([K(L),"0","0",K(H),"0","0","cm"].join(" "))):this.internal.write([K(L),"0","0",K(H),K(P),Z(S+H),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+q.index+" Do"),this.internal.write("Q")},v=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=e.__addimage__.sHashCode=function(P){var S,L,H=0;if(typeof P=="string")for(L=P.length,S=0;S<L;S++)H=(H<<5)-H+P.charCodeAt(S),H|=0;else if(I(P))for(L=P.byteLength/2,S=0;S<L;S++)H=(H<<5)-H+P[S],H|=0;return H},C=e.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var S=!0;return P.length===0&&(S=!1),P.length%4!=0&&(S=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(S=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(S=!1),S},_=e.__addimage__.extractImageFromDataUrl=function(P){var S=(P=P||"").split("base64,"),L=null;if(S.length===2){var H=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(S[0]);Array.isArray(H)&&(L={mimeType:H[1],charset:H[2],data:S[1]})}return L},j=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(P){return j()&&P instanceof ArrayBuffer};var I=e.__addimage__.isArrayBufferView=function(P){return j()&&typeof Uint32Array<"u"&&(P instanceof Int8Array||P instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array)},T=e.__addimage__.binaryStringToUint8Array=function(P){for(var S=P.length,L=new Uint8Array(S),H=0;H<S;H++)L[H]=P.charCodeAt(H);return L},k=e.__addimage__.arrayBufferToBinaryString=function(P){for(var S="",L=I(P)?P:new Uint8Array(P),H=0;H<L.length;H+=8192)S+=String.fromCharCode.apply(null,L.subarray(H,H+8192));return S};e.addImage=function(){var P,S,L,H,q,Q,z,K,Z;if(typeof arguments[1]=="number"?(S=t,L=arguments[1],H=arguments[2],q=arguments[3],Q=arguments[4],z=arguments[5],K=arguments[6],Z=arguments[7]):(S=arguments[1],L=arguments[2],H=arguments[3],q=arguments[4],Q=arguments[5],z=arguments[6],K=arguments[7],Z=arguments[8]),Ta(P=arguments[0])==="object"&&!f(P)&&"imageData"in P){var U=P;P=U.imageData,S=U.format||S||t,L=U.x||L||0,H=U.y||H||0,q=U.w||U.width||q,Q=U.h||U.height||Q,z=U.alias||z,K=U.compression||K,Z=U.rotation||U.angle||Z}var Y=this.internal.getFilters();if(K===void 0&&Y.indexOf("FlateEncode")!==-1&&(K="SLOW"),isNaN(L)||isNaN(H))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var R=B.call(this,P,S,z,K);return x.call(this,L,H,q,Q,R,Z),this};var B=function(P,S,L,H){var q,Q,z;if(typeof P=="string"&&n(P)===t){P=unescape(P);var K=M(P,!1);(K!==""||(K=e.loadFile(P,!0))!==void 0)&&(P=K)}if(f(P)&&(P=A(P,S)),S=n(P,S),!d(S))throw new Error("addImage does not support files of type '"+S+"', please ensure that a plugin for '"+S+"' support is added.");if(((z=L)==null||z.length===0)&&(L=function(Z){return typeof Z=="string"||I(Z)?N(Z):I(Z.data)?N(Z.data):null}(P)),(q=m.call(this,L))||(j()&&(P instanceof Uint8Array||S==="RGBA"||(Q=P,P=T(P))),q=this["process"+S.toUpperCase()](P,u.call(this),L,function(Z){return Z&&typeof Z=="string"&&(Z=Z.toUpperCase()),Z in e.image_compression?Z:y.NONE}(H),Q)),!q)throw new Error("An unknown error occurred whilst processing the image.");return q},M=e.__addimage__.convertBase64ToBinaryString=function(P,S){var L;S=typeof S!="boolean"||S;var H,q="";if(typeof P=="string"){H=(L=_(P))!==null?L.data:P;try{q=lN(H)}catch(Q){if(S)throw C(H)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return q};e.getImageProperties=function(P){var S,L,H="";if(f(P)&&(P=A(P)),typeof P=="string"&&n(P)===t&&((H=M(P,!1))===""&&(H=e.loadFile(P)||""),P=H),L=n(P),!d(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(!j()||P instanceof Uint8Array||(P=T(P)),!(S=this["process"+L.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return S.fileType=L,S}})(wr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};wr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,s,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var A=0;A<u.length;A++){n=u[A];var m=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(x.objId),N=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+m(y(n.contents))+")",s+=" /Popup "+v.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+m(y(N))+") >>",x.content=s;var C=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+C,n.open&&(s+=" /Open true"),s+=" >>",v.content=s,this.internal.write(x.objId,"0 R",v.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var _=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+m(g(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+_+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var j=this.annotations._nameMap[n.options.name];n.options.pageNumber=j.page,n.options.top=j.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+m(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var I=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+I+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,s,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:o,type:"link"})},e.textWithLink=function(r,n,a,s){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(r,l).length;o=Math.ceil(u*d)}else l=c,o=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,l,o,s),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(wr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(x){return t[x.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},l=e.__arabicParser__.isArabicEndLetter=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(x){return o(x)&&a.indexOf(x.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(x){var v=0,y=r,N="",C=0;for(v=0;v<x.length;v+=1)y[x.charCodeAt(v)]!==void 0?(C++,typeof(y=y[x.charCodeAt(v)])=="number"&&(N+=String.fromCharCode(y),y=r,C=0),v===x.length-1&&(y=r,N+=x.charAt(v-(C-1)),v-=C-1,C=0)):(y=r,N+=x.charAt(v-C),v-=C,C=0);return N};e.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&n[x.charCodeAt(0)]!==void 0};var A=e.__arabicParser__.getCorrectForm=function(x,v,y){return o(x)?s(x)===!1?-1:!u(x)||!o(v)&&!o(y)||!o(y)&&l(v)||l(x)&&!o(v)||l(x)&&c(v)||l(x)&&l(v)?0:d(x)&&o(v)&&!l(v)&&o(y)&&u(y)?3:l(x)||!o(y)?1:2:-1},m=function(x){var v=0,y=0,N=0,C="",_="",j="",I=(x=x||"").split("\\s+"),T=[];for(v=0;v<I.length;v+=1){for(T.push(""),y=0;y<I[v].length;y+=1)C=I[v][y],_=I[v][y-1],j=I[v][y+1],o(C)?(N=A(C,_,j),T[v]+=N!==-1?String.fromCharCode(t[C.charCodeAt(0)][N]):C):T[v]+=C;T[v]=f(T[v])}return T.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var x,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(v)){var N=0;for(y=[],N=0;N<v.length;N+=1)Array.isArray(v[N])?y.push([m(v[N][0]),v[N][1],v[N][2]]):y.push([m(v[N])]);x=y}else x=m(v);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};e.events.push(["preProcessText",g])}(wr.API),wr.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(wr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var A=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return A},set:function(x){A=x}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(x){m=x}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(x){g=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),A=u.scaleFactor||this.internal.scaleFactor,m=0,g=0,x=0,v=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=u.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(C,_){return C.concat(v.splitTextToSize(_,y))},[])):c=Array.isArray(c)?c:[c];for(var N=0;N<c.length;N++)m<(x=this.getStringUnitWidth(c[N],{font:f})*d)&&(m=x);return m!==0&&(g=c.length),{w:m/=A,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/A,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,A=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,m&&A&&(this.printHeaderRow(c.lineNumber,!0),c.y+=A[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,f,A){if(n.call(this),!d)throw new Error("No data for PDF table.");var m,g,x,v,y=[],N=[],C=[],_={},j={},I=[],T=[],k=(A=A||{}).autoSize||!1,B=A.printHeaders!==!1,M=A.css&&A.css["font-size"]!==void 0?16*A.css["font-size"]:A.fontSize||12,P=A.margins||Object.assign({width:this.getPageWidth()},t),S=typeof A.padding=="number"?A.padding:3,L=A.headerBackgroundColor||"#c8c8c8",H=A.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=M,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=L,this.internal.__cell__.headerTextColor=H,this.setFontSize(M),f==null)N=y=Object.keys(d[0]),C=y.map(function(){return"left"});else if(Array.isArray(f)&&Ta(f[0])==="object")for(y=f.map(function(U){return U.name}),N=f.map(function(U){return U.prompt||U.name||""}),C=f.map(function(U){return U.align||"left"}),m=0;m<f.length;m+=1)j[f[m].name]=f[m].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(N=y=f,C=y.map(function(){return"left"}));if(k||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<y.length;m+=1){for(_[v=y[m]]=d.map(function(U){return U[v]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(N[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=_[v],this.setFont(void 0,"normal"),x=0;x<g.length;x+=1)I.push(this.getTextDimensions(g[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);j[v]=Math.max.apply(null,I)+S+S,I=[]}if(B){var q={};for(m=0;m<y.length;m+=1)q[y[m]]={},q[y[m]].text=N[m],q[y[m]].align=C[m];var Q=l.call(this,q,j);T=y.map(function(U){return new s(c,u,j[U],Q,q[U].text,void 0,q[U].align)}),this.setTableHeaderRow(T),this.printHeaderRow(1,!1)}var z=f.reduce(function(U,Y){return U[Y.name]=Y.align,U},{});for(m=0;m<d.length;m+=1){"rowStart"in A&&A.rowStart instanceof Function&&A.rowStart({row:m,data:d[m]},this);var K=l.call(this,d[m],j);for(x=0;x<y.length;x+=1){var Z=d[m][y[x]];"cellStart"in A&&A.cellStart instanceof Function&&A.cellStart({row:m,col:x,data:Z},this),o.call(this,new s(c,u,j[y[x]],K,Z,m+2,z[y[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,A=this.internal.scaleFactor;return Object.keys(c).map(function(m){var g=c[m];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*f/A+d+d},this).reduce(function(m,g){return Math.max(m,g)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var A=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,A.push(d)),d.lineNumber=c;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(g)}A.length>0&&this.setTableHeaderRow(A),this.setFont(void 0,"normal"),r=!1}}(wr.API);var xAe={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},vAe=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],qR=gAe(vAe),bAe=[100,200,300,400,500,600,700,800,900],Wst=gAe(bAe);function KR(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return xAe[s=s||"normal"]?s:"normal"}(e.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(s){return typeof qR[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function qJ(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var Xst={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},KJ={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function WJ(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Yst(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},Xst,r.genericFontFamilies||{}),s=null,o=null,l=0;l<t.length;++l)if(a[(s=KR(t[l])).family]&&(s.family=a[s.family]),e.hasOwnProperty(s.family)){o=e[s.family];break}if(!(o=o||e[n]))throw new Error("Could not find a font-family for the rule '"+WJ(s)+"' and default family '"+n+"'.");if(o=function(c,u){if(u[c])return u[c];var d=qR[c],f=d<=qR.normal?-1:1,A=qJ(u,vAe,d,f);if(!A)throw new Error("Could not find a matching font-stretch value for "+c);return A}(s.stretch,o),o=function(c,u){if(u[c])return u[c];for(var d=xAe[c],f=0;f<d.length;++f)if(u[d[f]])return u[d[f]];throw new Error("Could not find a matching font-style for "+c)}(s.style,o),!(o=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var d=Wst[c],f=qJ(u,bAe,d,c<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+c);return f}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+WJ(s)+"'.");return o}function XJ(e){return e.trimLeft()}function Jst(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function Zst(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var kk,YJ,JJ,vO=["times"];(function(e){var t,r,n,a,s,o,l,c,u,d=function(R){return R=R||{},this.isStrokeTransparent=R.isStrokeTransparent||!1,this.strokeOpacity=R.strokeOpacity||1,this.strokeStyle=R.strokeStyle||"#000000",this.fillStyle=R.fillStyle||"#000000",this.isFillTransparent=R.isFillTransparent||!1,this.fillOpacity=R.fillOpacity||1,this.font=R.font||"10px sans-serif",this.textBaseline=R.textBaseline||"alphabetic",this.textAlign=R.textAlign||"left",this.lineWidth=R.lineWidth||1,this.lineJoin=R.lineJoin||"miter",this.lineCap=R.lineCap||"butt",this.path=R.path||[],this.transform=R.transform!==void 0?R.transform.clone():new c,this.globalCompositeOperation=R.globalCompositeOperation||"normal",this.globalAlpha=R.globalAlpha||1,this.clip_path=R.clip_path||[],this.currentPoint=R.currentPoint||new o,this.miterLimit=R.miterLimit||10,this.lastPoint=R.lastPoint||new o,this.lineDashOffset=R.lineDashOffset||0,this.lineDash=R.lineDash||[],this.margin=R.margin||[0,0,0,0],this.prevPageLastElemOffset=R.prevPageLastElemOffset||0,this.ignoreClearRect=typeof R.ignoreClearRect!="boolean"||R.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(R){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var D=R;Object.defineProperty(this,"pdf",{get:function(){return D}});var W=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return W},set:function(ke){W=!!ke}});var J=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return J},set:function(ke){J=!!ke}});var le=0;Object.defineProperty(this,"posX",{get:function(){return le},set:function(ke){isNaN(ke)||(le=ke)}});var ie=0;Object.defineProperty(this,"posY",{get:function(){return ie},set:function(ke){isNaN(ke)||(ie=ke)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(ke){var ue;typeof ke=="number"?ue=[ke,ke,ke,ke]:((ue=new Array(4))[0]=ke[0],ue[1]=ke.length>=2?ke[1]:ue[0],ue[2]=ke.length>=3?ke[2]:ue[0],ue[3]=ke.length>=4?ke[3]:ue[1]),u.margin=ue}});var re=!1;Object.defineProperty(this,"autoPaging",{get:function(){return re},set:function(ke){re=ke}});var ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return ce},set:function(ke){ce=ke}});var oe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return oe},set:function(ke){oe=ke}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(ke){ke instanceof d&&(u=ke)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(ke){u.path=ke}});var be=[];Object.defineProperty(this,"ctxStack",{get:function(){return be},set:function(ke){be=ke}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ke){var ue;ue=A(ke),this.ctx.fillStyle=ue.style,this.ctx.isFillTransparent=ue.a===0,this.ctx.fillOpacity=ue.a,this.pdf.setFillColor(ue.r,ue.g,ue.b,{a:ue.a}),this.pdf.setTextColor(ue.r,ue.g,ue.b,{a:ue.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ke){var ue=A(ke);this.ctx.strokeStyle=ue.style,this.ctx.isStrokeTransparent=ue.a===0,this.ctx.strokeOpacity=ue.a,ue.a===0?this.pdf.setDrawColor(255,255,255):(ue.a,this.pdf.setDrawColor(ue.r,ue.g,ue.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ke){["butt","round","square"].indexOf(ke)!==-1&&(this.ctx.lineCap=ke,this.pdf.setLineCap(ke))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ke){isNaN(ke)||(this.ctx.lineWidth=ke,this.pdf.setLineWidth(ke))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ke){["bevel","round","miter"].indexOf(ke)!==-1&&(this.ctx.lineJoin=ke,this.pdf.setLineJoin(ke))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ke){isNaN(ke)||(this.ctx.miterLimit=ke,this.pdf.setMiterLimit(ke))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ke){this.ctx.textBaseline=ke}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ke){["right","end","center","left","start"].indexOf(ke)!==-1&&(this.ctx.textAlign=ke)}});var X=null;function je(ke,ue){if(X===null){var we=function(Ae){var de=[];return Object.keys(Ae).forEach(function(ae){Ae[ae].forEach(function(fe){var ge=null;switch(fe){case"bold":ge={family:ae,weight:"bold"};break;case"italic":ge={family:ae,style:"italic"};break;case"bolditalic":ge={family:ae,weight:"bold",style:"italic"};break;case"":case"normal":ge={family:ae}}ge!==null&&(ge.ref={name:ae,style:fe},de.push(ge))})}),de}(ke.getFontList());X=function(Ae){for(var de={},ae=0;ae<Ae.length;++ae){var fe=KR(Ae[ae]),ge=fe.family,xe=fe.stretch,Ue=fe.style,qe=fe.weight;de[ge]=de[ge]||{},de[ge][xe]=de[ge][xe]||{},de[ge][xe][Ue]=de[ge][xe][Ue]||{},de[ge][xe][Ue][qe]=fe}return de}(we.concat(ue))}return X}var De=null;Object.defineProperty(this,"fontFaces",{get:function(){return De},set:function(ke){X=null,De=ke}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ke){var ue;if(this.ctx.font=ke,(ue=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ke))!==null){var we=ue[1],Ae=(ue[2],ue[3]),de=ue[4],ae=(ue[5],ue[6]),fe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(de)[2];de=Math.floor(fe==="px"?parseFloat(de)*this.pdf.internal.scaleFactor:fe==="em"?parseFloat(de)*this.pdf.getFontSize():parseFloat(de)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(de);var ge=function(Ve){var Xe,Ie,Be=[],et=Ve.trim();if(et==="")return vO;if(et in KJ)return[KJ[et]];for(;et!=="";){switch(Ie=null,Xe=(et=XJ(et)).charAt(0)){case'"':case"'":Ie=Jst(et.substring(1),Xe);break;default:Ie=Zst(et)}if(Ie===null||(Be.push(Ie[0]),(et=XJ(Ie[1]))!==""&&et.charAt(0)!==","))return vO;et=et.replace(/^,/,"")}return Be}(ae);if(this.fontFaces){var xe=Yst(je(this.pdf,this.fontFaces),ge.map(function(Ve){return{family:Ve,stretch:"normal",weight:Ae,style:we}}));this.pdf.setFont(xe.ref.name,xe.ref.style)}else{var Ue="";(Ae==="bold"||parseInt(Ae,10)>=700||we==="bold")&&(Ue="bold"),we==="italic"&&(Ue+="italic"),Ue.length===0&&(Ue="normal");for(var qe="",Ze={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},We=0;We<ge.length;We++){if(this.pdf.internal.getFont(ge[We],Ue,{noFallback:!0,disableWarning:!0})!==void 0){qe=ge[We];break}if(Ue==="bolditalic"&&this.pdf.internal.getFont(ge[We],"bold",{noFallback:!0,disableWarning:!0})!==void 0)qe=ge[We],Ue="bold";else if(this.pdf.internal.getFont(ge[We],"normal",{noFallback:!0,disableWarning:!0})!==void 0){qe=ge[We],Ue="normal";break}}if(qe===""){for(var me=0;me<ge.length;me++)if(Ze[ge[me]]){qe=Ze[ge[me]];break}}qe=qe===""?"Times":qe,this.pdf.setFont(qe,Ue)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ke){this.ctx.globalCompositeOperation=ke}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ke){this.ctx.globalAlpha=ke}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ke){this.ctx.lineDashOffset=ke,Y.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ke){this.ctx.lineDash=ke,Y.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ke){this.ctx.ignoreClearRect=!!ke}})};f.prototype.setLineDash=function(R){this.lineDash=R},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){_.call(this,"fill",!1)},f.prototype.stroke=function(){_.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(R,D){if(isNaN(R)||isNaN(D))throw Ma.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var W=this.ctx.transform.applyToPoint(new o(R,D));this.path.push({type:"mt",x:W.x,y:W.y}),this.ctx.lastPoint=new o(R,D)},f.prototype.closePath=function(){var R=new o(0,0),D=0;for(D=this.path.length-1;D!==-1;D--)if(this.path[D].type==="begin"&&Ta(this.path[D+1])==="object"&&typeof this.path[D+1].x=="number"){R=new o(this.path[D+1].x,this.path[D+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(R.x,R.y)},f.prototype.lineTo=function(R,D){if(isNaN(R)||isNaN(D))throw Ma.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var W=this.ctx.transform.applyToPoint(new o(R,D));this.path.push({type:"lt",x:W.x,y:W.y}),this.ctx.lastPoint=new o(W.x,W.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),_.call(this,null,!0)},f.prototype.quadraticCurveTo=function(R,D,W,J){if(isNaN(W)||isNaN(J)||isNaN(R)||isNaN(D))throw Ma.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var le=this.ctx.transform.applyToPoint(new o(W,J)),ie=this.ctx.transform.applyToPoint(new o(R,D));this.path.push({type:"qct",x1:ie.x,y1:ie.y,x:le.x,y:le.y}),this.ctx.lastPoint=new o(le.x,le.y)},f.prototype.bezierCurveTo=function(R,D,W,J,le,ie){if(isNaN(le)||isNaN(ie)||isNaN(R)||isNaN(D)||isNaN(W)||isNaN(J))throw Ma.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var re=this.ctx.transform.applyToPoint(new o(le,ie)),ce=this.ctx.transform.applyToPoint(new o(R,D)),oe=this.ctx.transform.applyToPoint(new o(W,J));this.path.push({type:"bct",x1:ce.x,y1:ce.y,x2:oe.x,y2:oe.y,x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},f.prototype.arc=function(R,D,W,J,le,ie){if(isNaN(R)||isNaN(D)||isNaN(W)||isNaN(J)||isNaN(le))throw Ma.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ie=!!ie,!this.ctx.transform.isIdentity){var re=this.ctx.transform.applyToPoint(new o(R,D));R=re.x,D=re.y;var ce=this.ctx.transform.applyToPoint(new o(0,W)),oe=this.ctx.transform.applyToPoint(new o(0,0));W=Math.sqrt(Math.pow(ce.x-oe.x,2)+Math.pow(ce.y-oe.y,2))}Math.abs(le-J)>=2*Math.PI&&(J=0,le=2*Math.PI),this.path.push({type:"arc",x:R,y:D,radius:W,startAngle:J,endAngle:le,counterclockwise:ie})},f.prototype.arcTo=function(R,D,W,J,le){throw new Error("arcTo not implemented.")},f.prototype.rect=function(R,D,W,J){if(isNaN(R)||isNaN(D)||isNaN(W)||isNaN(J))throw Ma.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(R,D),this.lineTo(R+W,D),this.lineTo(R+W,D+J),this.lineTo(R,D+J),this.lineTo(R,D),this.lineTo(R+W,D),this.lineTo(R,D)},f.prototype.fillRect=function(R,D,W,J){if(isNaN(R)||isNaN(D)||isNaN(W)||isNaN(J))throw Ma.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var le={};this.lineCap!=="butt"&&(le.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(le.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(R,D,W,J),this.fill(),le.hasOwnProperty("lineCap")&&(this.lineCap=le.lineCap),le.hasOwnProperty("lineJoin")&&(this.lineJoin=le.lineJoin)}},f.prototype.strokeRect=function(R,D,W,J){if(isNaN(R)||isNaN(D)||isNaN(W)||isNaN(J))throw Ma.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(R,D,W,J),this.stroke())},f.prototype.clearRect=function(R,D,W,J){if(isNaN(R)||isNaN(D)||isNaN(W)||isNaN(J))throw Ma.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(R,D,W,J))},f.prototype.save=function(R){R=typeof R!="boolean"||R;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("q");if(this.pdf.setPage(D),R){this.ctx.fontSize=this.pdf.internal.getFontSize();var J=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=J}},f.prototype.restore=function(R){R=typeof R!="boolean"||R;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("Q");this.pdf.setPage(D),R&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var A=function(R){var D,W,J,le;if(R.isCanvasGradient===!0&&(R=R.getColor()),!R)return{r:0,g:0,b:0,a:0,style:R};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(R))D=0,W=0,J=0,le=0;else{var ie=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(R);if(ie!==null)D=parseInt(ie[1]),W=parseInt(ie[2]),J=parseInt(ie[3]),le=1;else if((ie=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(R))!==null)D=parseInt(ie[1]),W=parseInt(ie[2]),J=parseInt(ie[3]),le=parseFloat(ie[4]);else{if(le=1,typeof R=="string"&&R.charAt(0)!=="#"){var re=new dAe(R);R=re.ok?re.toHex():"#000000"}R.length===4?(D=R.substring(1,2),D+=D,W=R.substring(2,3),W+=W,J=R.substring(3,4),J+=J):(D=R.substring(1,3),W=R.substring(3,5),J=R.substring(5,7)),D=parseInt(D,16),W=parseInt(W,16),J=parseInt(J,16)}}return{r:D,g:W,b:J,a:le,style:R}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(R,D,W,J){if(isNaN(D)||isNaN(W)||typeof R!="string")throw Ma.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(J=isNaN(J)?void 0:J,!m.call(this)){var le=K(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;S.call(this,{text:R,x:D,y:W,scale:ie,angle:le,align:this.textAlign,maxWidth:J})}},f.prototype.strokeText=function(R,D,W,J){if(isNaN(D)||isNaN(W)||typeof R!="string")throw Ma.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){J=isNaN(J)?void 0:J;var le=K(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;S.call(this,{text:R,x:D,y:W,scale:ie,renderingMode:"stroke",angle:le,align:this.textAlign,maxWidth:J})}},f.prototype.measureText=function(R){if(typeof R!="string")throw Ma.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var D=this.pdf,W=this.pdf.internal.scaleFactor,J=D.internal.getFontSize(),le=D.getStringUnitWidth(R)*J/D.internal.scaleFactor,ie=function(re){var ce=(re=re||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ce}}),this};return new ie({width:le*=Math.round(96*W/72*1e4)/1e4})},f.prototype.scale=function(R,D){if(isNaN(R)||isNaN(D))throw Ma.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var W=new c(R,0,0,D,0,0);this.ctx.transform=this.ctx.transform.multiply(W)},f.prototype.rotate=function(R){if(isNaN(R))throw Ma.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var D=new c(Math.cos(R),Math.sin(R),-Math.sin(R),Math.cos(R),0,0);this.ctx.transform=this.ctx.transform.multiply(D)},f.prototype.translate=function(R,D){if(isNaN(R)||isNaN(D))throw Ma.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var W=new c(1,0,0,1,R,D);this.ctx.transform=this.ctx.transform.multiply(W)},f.prototype.transform=function(R,D,W,J,le,ie){if(isNaN(R)||isNaN(D)||isNaN(W)||isNaN(J)||isNaN(le)||isNaN(ie))throw Ma.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var re=new c(R,D,W,J,le,ie);this.ctx.transform=this.ctx.transform.multiply(re)},f.prototype.setTransform=function(R,D,W,J,le,ie){R=isNaN(R)?1:R,D=isNaN(D)?0:D,W=isNaN(W)?0:W,J=isNaN(J)?1:J,le=isNaN(le)?0:le,ie=isNaN(ie)?0:ie,this.ctx.transform=new c(R,D,W,J,le,ie)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(R,D,W,J,le,ie,re,ce,oe){var be=this.pdf.getImageProperties(R),X=1,je=1,De=1,ke=1;J!==void 0&&ce!==void 0&&(De=ce/J,ke=oe/le,X=be.width/J*ce/J,je=be.height/le*oe/le),ie===void 0&&(ie=D,re=W,D=0,W=0),J!==void 0&&ce===void 0&&(ce=J,oe=le),J===void 0&&ce===void 0&&(ce=be.width,oe=be.height);for(var ue,we=this.ctx.transform.decompose(),Ae=K(we.rotate.shx),de=new c,ae=(de=(de=(de=de.multiply(we.translate)).multiply(we.skew)).multiply(we.scale)).applyToRectangle(new l(ie-D*De,re-W*ke,J*X,le*je)),fe=v.call(this,ae),ge=[],xe=0;xe<fe.length;xe+=1)ge.indexOf(fe[xe])===-1&&ge.push(fe[xe]);if(C(ge),this.autoPaging)for(var Ue=ge[0],qe=ge[ge.length-1],Ze=Ue;Ze<qe+1;Ze++){this.pdf.setPage(Ze);var We=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],me=Ze===1?this.posY+this.margin[0]:this.margin[0],Ve=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Xe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ie=Ze===1?0:Ve+(Ze-2)*Xe;if(this.ctx.clip_path.length!==0){var Be=this.path;ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(ue,this.posX+this.margin[3],-Ie+me+this.ctx.prevPageLastElemOffset),j.call(this,"fill",!0),this.path=Be}var et=JSON.parse(JSON.stringify(ae));et=N([et],this.posX+this.margin[3],-Ie+me+this.ctx.prevPageLastElemOffset)[0];var bt=(Ze>Ue||Ze<qe)&&x.call(this);bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],We,Xe,null).clip().discardPath()),this.pdf.addImage(R,"JPEG",et.x,et.y,et.w,et.h,null,null,Ae),bt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(R,"JPEG",ae.x,ae.y,ae.w,ae.h,null,null,Ae)};var v=function(R,D,W){var J=[];D=D||this.pdf.internal.pageSize.width,W=W||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var le=this.posY+this.ctx.prevPageLastElemOffset;switch(R.type){default:case"mt":case"lt":J.push(Math.floor((R.y+le)/W)+1);break;case"arc":J.push(Math.floor((R.y+le-R.radius)/W)+1),J.push(Math.floor((R.y+le+R.radius)/W)+1);break;case"qct":var ie=Z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x,R.y);J.push(Math.floor((ie.y+le)/W)+1),J.push(Math.floor((ie.y+ie.h+le)/W)+1);break;case"bct":var re=U(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x2,R.y2,R.x,R.y);J.push(Math.floor((re.y+le)/W)+1),J.push(Math.floor((re.y+re.h+le)/W)+1);break;case"rect":J.push(Math.floor((R.y+le)/W)+1),J.push(Math.floor((R.y+R.h+le)/W)+1)}for(var ce=0;ce<J.length;ce+=1)for(;this.pdf.internal.getNumberOfPages()<J[ce];)y.call(this);return J},y=function(){var R=this.fillStyle,D=this.strokeStyle,W=this.font,J=this.lineCap,le=this.lineWidth,ie=this.lineJoin;this.pdf.addPage(),this.fillStyle=R,this.strokeStyle=D,this.font=W,this.lineCap=J,this.lineWidth=le,this.lineJoin=ie},N=function(R,D,W){for(var J=0;J<R.length;J++)switch(R[J].type){case"bct":R[J].x2+=D,R[J].y2+=W;case"qct":R[J].x1+=D,R[J].y1+=W;case"mt":case"lt":case"arc":default:R[J].x+=D,R[J].y+=W}return R},C=function(R){return R.sort(function(D,W){return D-W})},_=function(R,D){for(var W,J,le=this.fillStyle,ie=this.strokeStyle,re=this.lineCap,ce=this.lineWidth,oe=Math.abs(ce*this.ctx.transform.scaleX),be=this.lineJoin,X=JSON.parse(JSON.stringify(this.path)),je=JSON.parse(JSON.stringify(this.path)),De=[],ke=0;ke<je.length;ke++)if(je[ke].x!==void 0)for(var ue=v.call(this,je[ke]),we=0;we<ue.length;we+=1)De.indexOf(ue[we])===-1&&De.push(ue[we]);for(var Ae=0;Ae<De.length;Ae++)for(;this.pdf.internal.getNumberOfPages()<De[Ae];)y.call(this);if(C(De),this.autoPaging)for(var de=De[0],ae=De[De.length-1],fe=de;fe<ae+1;fe++){this.pdf.setPage(fe),this.fillStyle=le,this.strokeStyle=ie,this.lineCap=re,this.lineWidth=oe,this.lineJoin=be;var ge=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],xe=fe===1?this.posY+this.margin[0]:this.margin[0],Ue=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ze=fe===1?0:Ue+(fe-2)*qe;if(this.ctx.clip_path.length!==0){var We=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(W,this.posX+this.margin[3],-Ze+xe+this.ctx.prevPageLastElemOffset),j.call(this,R,!0),this.path=We}if(J=JSON.parse(JSON.stringify(X)),this.path=N(J,this.posX+this.margin[3],-Ze+xe+this.ctx.prevPageLastElemOffset),D===!1||fe===0){var me=(fe>de||fe<ae)&&x.call(this);me&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ge,qe,null).clip().discardPath()),j.call(this,R,D),me&&this.pdf.restoreGraphicsState()}this.lineWidth=ce}else this.lineWidth=oe,j.call(this,R,D),this.lineWidth=ce;this.path=X},j=function(R,D){if((R!=="stroke"||D||!g.call(this))&&(R==="stroke"||D||!m.call(this))){for(var W,J,le=[],ie=this.path,re=0;re<ie.length;re++){var ce=ie[re];switch(ce.type){case"begin":le.push({begin:!0});break;case"close":le.push({close:!0});break;case"mt":le.push({start:ce,deltas:[],abs:[]});break;case"lt":var oe=le.length;if(ie[re-1]&&!isNaN(ie[re-1].x)&&(W=[ce.x-ie[re-1].x,ce.y-ie[re-1].y],oe>0)){for(;oe>=0;oe--)if(le[oe-1].close!==!0&&le[oe-1].begin!==!0){le[oe-1].deltas.push(W),le[oe-1].abs.push(ce);break}}break;case"bct":W=[ce.x1-ie[re-1].x,ce.y1-ie[re-1].y,ce.x2-ie[re-1].x,ce.y2-ie[re-1].y,ce.x-ie[re-1].x,ce.y-ie[re-1].y],le[le.length-1].deltas.push(W);break;case"qct":var be=ie[re-1].x+2/3*(ce.x1-ie[re-1].x),X=ie[re-1].y+2/3*(ce.y1-ie[re-1].y),je=ce.x+2/3*(ce.x1-ce.x),De=ce.y+2/3*(ce.y1-ce.y),ke=ce.x,ue=ce.y;W=[be-ie[re-1].x,X-ie[re-1].y,je-ie[re-1].x,De-ie[re-1].y,ke-ie[re-1].x,ue-ie[re-1].y],le[le.length-1].deltas.push(W);break;case"arc":le.push({deltas:[],abs:[],arc:!0}),Array.isArray(le[le.length-1].abs)&&le[le.length-1].abs.push(ce)}}J=D?null:R==="stroke"?"stroke":"fill";for(var we=!1,Ae=0;Ae<le.length;Ae++)if(le[Ae].arc)for(var de=le[Ae].abs,ae=0;ae<de.length;ae++){var fe=de[ae];fe.type==="arc"?k.call(this,fe.x,fe.y,fe.radius,fe.startAngle,fe.endAngle,fe.counterclockwise,void 0,D,!we):L.call(this,fe.x,fe.y),we=!0}else if(le[Ae].close===!0)this.pdf.internal.out("h"),we=!1;else if(le[Ae].begin!==!0){var ge=le[Ae].start.x,xe=le[Ae].start.y;H.call(this,le[Ae].deltas,ge,xe),we=!0}J&&B.call(this,J),D&&M.call(this)}},I=function(R){var D=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,W=D*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return R-W;case"top":return R+D-W;case"hanging":return R+D-2*W;case"middle":return R+D/2-W;case"ideographic":return R;case"alphabetic":default:return R}},T=function(R){return R+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var R=function(){};return R.colorStops=[],R.addColorStop=function(D,W){this.colorStops.push([D,W])},R.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},R.isCanvasGradient=!0,R},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var k=function(R,D,W,J,le,ie,re,ce,oe){for(var be=Q.call(this,W,J,le,ie),X=0;X<be.length;X++){var je=be[X];X===0&&(oe?P.call(this,je.x1+R,je.y1+D):L.call(this,je.x1+R,je.y1+D)),q.call(this,R,D,je.x2,je.y2,je.x3,je.y3,je.x4,je.y4)}ce?M.call(this):B.call(this,re)},B=function(R){switch(R){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},M=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(R,D){this.pdf.internal.out(r(R)+" "+n(D)+" m")},S=function(R){var D;switch(R.align){case"right":case"end":D="right";break;case"center":D="center";break;case"left":case"start":default:D="left"}var W=this.pdf.getTextDimensions(R.text),J=I.call(this,R.y),le=T.call(this,J)-W.h,ie=this.ctx.transform.applyToPoint(new o(R.x,J)),re=this.ctx.transform.decompose(),ce=new c;ce=(ce=(ce=ce.multiply(re.translate)).multiply(re.skew)).multiply(re.scale);for(var oe,be,X,je=this.ctx.transform.applyToRectangle(new l(R.x,J,W.w,W.h)),De=ce.applyToRectangle(new l(R.x,le,W.w,W.h)),ke=v.call(this,De),ue=[],we=0;we<ke.length;we+=1)ue.indexOf(ke[we])===-1&&ue.push(ke[we]);if(C(ue),this.autoPaging)for(var Ae=ue[0],de=ue[ue.length-1],ae=Ae;ae<de+1;ae++){this.pdf.setPage(ae);var fe=ae===1?this.posY+this.margin[0]:this.margin[0],ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xe=this.pdf.internal.pageSize.height-this.margin[2],Ue=xe-this.margin[0],qe=this.pdf.internal.pageSize.width-this.margin[1],Ze=qe-this.margin[3],We=ae===1?0:ge+(ae-2)*Ue;if(this.ctx.clip_path.length!==0){var me=this.path;oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(oe,this.posX+this.margin[3],-1*We+fe),j.call(this,"fill",!0),this.path=me}var Ve=N([JSON.parse(JSON.stringify(De))],this.posX+this.margin[3],-We+fe+this.ctx.prevPageLastElemOffset)[0];R.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*R.scale),X=this.lineWidth,this.lineWidth=X*R.scale);var Xe=this.autoPaging!=="text";if(Xe||Ve.y+Ve.h<=xe){if(Xe||Ve.y>=fe&&Ve.x<=qe){var Ie=Xe?R.text:this.pdf.splitTextToSize(R.text,R.maxWidth||qe-Ve.x)[0],Be=N([JSON.parse(JSON.stringify(je))],this.posX+this.margin[3],-We+fe+this.ctx.prevPageLastElemOffset)[0],et=Xe&&(ae>Ae||ae<de)&&x.call(this);et&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ze,Ue,null).clip().discardPath()),this.pdf.text(Ie,Be.x,Be.y,{angle:R.angle,align:D,renderingMode:R.renderingMode}),et&&this.pdf.restoreGraphicsState()}}else Ve.y<xe&&(this.ctx.prevPageLastElemOffset+=xe-Ve.y);R.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=X)}else R.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*R.scale),X=this.lineWidth,this.lineWidth=X*R.scale),this.pdf.text(R.text,ie.x+this.posX,ie.y+this.posY,{angle:R.angle,align:D,renderingMode:R.renderingMode,maxWidth:R.maxWidth}),R.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=X)},L=function(R,D,W,J){W=W||0,J=J||0,this.pdf.internal.out(r(R+W)+" "+n(D+J)+" l")},H=function(R,D,W){return this.pdf.lines(R,D,W,null,null)},q=function(R,D,W,J,le,ie,re,ce){this.pdf.internal.out([t(a(W+R)),t(s(J+D)),t(a(le+R)),t(s(ie+D)),t(a(re+R)),t(s(ce+D)),"c"].join(" "))},Q=function(R,D,W,J){for(var le=2*Math.PI,ie=Math.PI/2;D>W;)D-=le;var re=Math.abs(W-D);re<le&&J&&(re=le-re);for(var ce=[],oe=J?-1:1,be=D;re>1e-5;){var X=be+oe*Math.min(re,ie);ce.push(z.call(this,R,be,X)),re-=Math.abs(X-be),be=X}return ce},z=function(R,D,W){var J=(W-D)/2,le=R*Math.cos(J),ie=R*Math.sin(J),re=le,ce=-ie,oe=re*re+ce*ce,be=oe+re*le+ce*ie,X=4/3*(Math.sqrt(2*oe*be)-be)/(re*ie-ce*le),je=re-X*ce,De=ce+X*re,ke=je,ue=-De,we=J+D,Ae=Math.cos(we),de=Math.sin(we);return{x1:R*Math.cos(D),y1:R*Math.sin(D),x2:je*Ae-De*de,y2:je*de+De*Ae,x3:ke*Ae-ue*de,y3:ke*de+ue*Ae,x4:R*Math.cos(W),y4:R*Math.sin(W)}},K=function(R){return 180*R/Math.PI},Z=function(R,D,W,J,le,ie){var re=R+.5*(W-R),ce=D+.5*(J-D),oe=le+.5*(W-le),be=ie+.5*(J-ie),X=Math.min(R,le,re,oe),je=Math.max(R,le,re,oe),De=Math.min(D,ie,ce,be),ke=Math.max(D,ie,ce,be);return new l(X,De,je-X,ke-De)},U=function(R,D,W,J,le,ie,re,ce){var oe,be,X,je,De,ke,ue,we,Ae,de,ae,fe,ge,xe,Ue=W-R,qe=J-D,Ze=le-W,We=ie-J,me=re-le,Ve=ce-ie;for(be=0;be<41;be++)Ae=(ue=(X=R+(oe=be/40)*Ue)+oe*((De=W+oe*Ze)-X))+oe*(De+oe*(le+oe*me-De)-ue),de=(we=(je=D+oe*qe)+oe*((ke=J+oe*We)-je))+oe*(ke+oe*(ie+oe*Ve-ke)-we),be==0?(ae=Ae,fe=de,ge=Ae,xe=de):(ae=Math.min(ae,Ae),fe=Math.min(fe,de),ge=Math.max(ge,Ae),xe=Math.max(xe,de));return new l(Math.round(ae),Math.round(fe),Math.round(ge-ae),Math.round(xe-fe))},Y=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var R,D,W=(R=this.ctx.lineDash,D=this.ctx.lineDashOffset,JSON.stringify({lineDash:R,lineDashOffset:D}));this.prevLineDash!==W&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=W)}}})(wr.API),function(e){var t=function(s){var o,l,c,u,d,f,A,m,g,x;for(l=[],c=0,u=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(d=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(f=(d=((d=((d=((d=(d-(x=d%85))/85)-(g=d%85))/85)-(m=d%85))/85)-(A=d%85))/85)%85,l.push(f+33,A+33,m+33,g+33,x+33)):l.push(122);return function(v,y){for(var N=y;N>0;N--)v.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(s){var o,l,c,u,d,f=String,A="length",m=255,g="charCodeAt",x="slice",v="replace";for(s[x](-2),s=s[x](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),c=[],u=0,d=(s+=o="uuuuu"[x](s[A]%5||5))[A];d>u;u+=5)l=52200625*(s[g](u)-33)+614125*(s[g](u+1)-33)+7225*(s[g](u+2)-33)+85*(s[g](u+3)-33)+(s[g](u+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(y,N){for(var C=N;C>0;C--)y.pop()}(c,o[A]),f.fromCharCode.apply(f,c)},n=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var l="",c=0;c<s.length;c+=2)l+=String.fromCharCode("0x"+(s[c]+s[c+1]));return l},a=function(s){for(var o=new Uint8Array(s.length),l=s.length;l--;)o[l]=s.charCodeAt(l);return s=(o=QR(o)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};e.processDataByFilters=function(s,o){var l=0,c=s||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(wr.API),function(e){e.loadFile=function(t,r,n){return function(a,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,u,d){var f=new XMLHttpRequest,A=0,m=function(g){var x=g.length,v=[],y=String.fromCharCode;for(A=0;A<x;A+=1)v.push(y(255&g.charCodeAt(A)));return v.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(m(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return m(f.responseText)}(a,s,o)}catch{}return l}(t,r,n)},e.loadImageFile=e.loadFile}(wr.API),function(e){function t(){return($r.html2canvas?Promise.resolve($r.html2canvas):Ss(()=>Promise.resolve().then(()=>Gwt),void 0)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return($r.DOMPurify?Promise.resolve($r.DOMPurify):Ss(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=Ta(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},a=function(o,l){var c=document.createElement(o);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},s=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,o,1,[o])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,l){return o.__proto__=l||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(u,d){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),A=u.firstChild;A;A=A.nextSibling)d!==!0&&A.nodeType===1&&A.nodeName==="SCRIPT"||f.appendChild(c(A,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var A=0;A<u.length;++A){var m=u[A],g=m.src.find(function(x){return x.format==="truetype"});g&&c.addFont(g.url,m.ref.name,m.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,c.context2d.save(!0),l(this.prop.container,f)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},s.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(o,l){return this.then(function(){var c=o in s.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},s.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function l(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(o=o||wr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,l,c,u){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,l,c,u){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return c.updateProgress(null,u),f}).then(u,d).then(function(f){return c.updateProgress(1),f})})},s.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=c.call(u,o,l);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},s.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},s.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return s.convert(l,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,wr.getPageSize=function(o,l,c){if(Ta(o)==="object"){var u=o;o=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var d,f=(""+c).toLowerCase(),A={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var m,g=0,x=0;if(A.hasOwnProperty(f))g=A[f][1]/d,x=A[f][0]/d;else try{g=c[1],x=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",x>g&&(m=x,x=g,g=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",g>x&&(m=x,x=g,g=m)}return{width:x,height:g,unit:l,k:d,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(KR):null;var c=new s(l);return l.worker?c:c.from(o).doCallback()}}(wr.API),wr.API.addJS=function(e){return JJ=e,this.internal.events.subscribe("postPutResources",function(){kk=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(kk+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),YJ=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+JJ+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){kk!==void 0&&YJ!==void 0&&this.internal.out("/Names <</JavaScript "+kk+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var o=a[s],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var A=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+A.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var o={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var o=n.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(wr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,s,o,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(f){for(var A,m=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,x={width:0,height:0,numcomponents:1},v=4;v<g;v+=2){if(v+=m,t.indexOf(f.charCodeAt(v+1))!==-1){A=256*f.charCodeAt(v+5)+f.charCodeAt(v+6),x={width:256*f.charCodeAt(v+7)+f.charCodeAt(v+8),height:A,numcomponents:f.charCodeAt(v+9)};break}m=256*f.charCodeAt(v+2)+f.charCodeAt(v+3)}return x}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(wr.API);var Jv,Sk,ZJ,eZ,tZ,eit=function(){var e,t,r;function n(s){var o,l,c,u,d,f,A,m,g,x,v,y,N,C;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(o=this.readUInt32(),g=(function(){var _,j;for(j=[],_=0;_<4;++_)j.push(String.fromCharCode(this.data[this.pos++]));return j}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*d/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,o-=4),s=(f!=null?f.data:void 0)||this.imgData,y=0;0<=o?y<o:y>o;0<=o?++y:--y)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((x=c-this.transparency.indexed.length)>0)for(N=0;0<=x?N<x:N>x;0<=x?++N:--N)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":A=(v=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,v.slice(0,A)),this.text[m]=String.fromCharCode.apply(String,v.slice(A+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(C=this.colorType)===4||C===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var o,l;for(l=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)l.push(this.data[this.pos++]);return l},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(f,A,m,g){var x,v,y,N,C,_,j,I,T,k,B,M,P,S,L,H,q,Q,z,K,Z,U=Math.ceil((u.width-f)/m),Y=Math.ceil((u.height-A)/g),R=u.width==U&&u.height==Y;for(S=o*U,M=R?l:new Uint8Array(S*Y),_=s.length,P=0,v=0;P<Y&&c<_;){switch(s[c++]){case 0:for(N=q=0;q<S;N=q+=1)M[v++]=s[c++];break;case 1:for(N=Q=0;Q<S;N=Q+=1)x=s[c++],C=N<o?0:M[v-o],M[v++]=(x+C)%256;break;case 2:for(N=z=0;z<S;N=z+=1)x=s[c++],y=(N-N%o)/o,L=P&&M[(P-1)*S+y*o+N%o],M[v++]=(L+x)%256;break;case 3:for(N=K=0;K<S;N=K+=1)x=s[c++],y=(N-N%o)/o,C=N<o?0:M[v-o],L=P&&M[(P-1)*S+y*o+N%o],M[v++]=(x+Math.floor((C+L)/2))%256;break;case 4:for(N=Z=0;Z<S;N=Z+=1)x=s[c++],y=(N-N%o)/o,C=N<o?0:M[v-o],P===0?L=H=0:(L=M[(P-1)*S+y*o+N%o],H=y&&M[(P-1)*S+(y-1)*o+N%o]),j=C+L-H,I=Math.abs(j-C),k=Math.abs(j-L),B=Math.abs(j-H),T=I<=k&&I<=B?C:k<=B?L:H,M[v++]=(x+T)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!R){var D=((A+P*g)*u.width+f)*o,W=P*S;for(N=0;N<U;N+=1){for(var J=0;J<o;J+=1)l[D++]=M[W++];D+=(m-1)*o}}P++}}return s=Ist(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),l},n.prototype.decodePalette=function(){var s,o,l,c,u,d,f,A,m;for(l=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+l.length),c=0,s=0,o=f=0,A=l.length;f<A;o=f+=3)u[c++]=l[o],u[c++]=l[o+1],u[c++]=l[o+2],u[c++]=(m=d[s++])!=null?m:255;return u},n.prototype.copyToImageData=function(s,o){var l,c,u,d,f,A,m,g,x,v,y;if(c=this.colors,x=null,l=this.hasAlphaChannel,this.palette.length&&(x=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),c=4,l=!0),g=(u=s.data||s).length,f=x||o,d=A=0,c===1)for(;d<g;)m=x?4*o[d/4]:A,v=f[m++],u[d++]=v,u[d++]=v,u[d++]=v,u[d++]=l?f[m++]:255,A=m;else for(;d<g;)m=x?4*o[d/4]:A,u[d++]=f[m++],u[d++]=f[m++],u[d++]=f[m++],u[d++]=l?f[m++]:255,A=m},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call($r)==="[object Window]"){try{t=$r.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(s){var o;if(a()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var o,l,c,u,d,f,A,m;if(this.animation){for(m=[],l=d=0,f=(A=this.animation.frames).length;d<f;l=++d)o=A[l],c=s.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,u),o.imageData=c,m.push(o.image=e(c));return m}},n.prototype.renderFrame=function(s,o){var l,c,u;return l=(c=this.animation.frames)[o],u=c[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),l.blendOp===0&&s.clearRect(l.xOffset,l.yOffset,l.width,l.height),s.drawImage(l.image,l.xOffset,l.yOffset)},n.prototype.animate=function(s){var o,l,c,u,d,f,A=this;return l=0,f=this.animation,u=f.numFrames,c=f.frames,d=f.numPlays,(o=function(){var m,g;if(m=l++%u,g=c[m],A.renderFrame(s,m),u>1&&l/u<d)return A.animation._timeout=setTimeout(o,g.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var o,l;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function tit(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,o=1<<(7&a)+1;e[t++],e[t++];var l=null,c=null;s&&(l=t,c=o,t+=3*o);var u=!0,d=[],f=0,A=null,m=0,g=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var x=e[t++];f=e[t++]|e[t++]<<8,A=e[t++],(1&x)==0&&(A=null),m=x>>2&7,t++;break;case 254:for(;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var v=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,C=e[t++]|e[t++]<<8,_=e[t++],j=_>>6&1,I=1<<(7&_)+1,T=l,k=c,B=!1;_>>7&&(B=!0,T=t,k=I,t+=3*I);var M=t;for(t++;;){var P;if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}d.push({x:v,y,width:N,height:C,has_local_palette:B,palette_offset:T,palette_size:k,data_offset:M,data_length:t-M,transparent_index:A,interlaced:!!j,delay:f,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(S){if(S<0||S>=d.length)throw new Error("Frame index out of range.");return d[S]},this.decodeAndBlitFrameBGRA=function(S,L){var H=this.frameInfo(S),q=H.width*H.height,Q=new Uint8Array(q);rZ(e,H.data_offset,Q,q);var z=H.palette_offset,K=H.transparent_index;K===null&&(K=256);var Z=H.width,U=r-Z,Y=Z,R=4*(H.y*r+H.x),D=4*((H.y+H.height)*r+H.x),W=R,J=4*U;H.interlaced===!0&&(J+=4*r*7);for(var le=8,ie=0,re=Q.length;ie<re;++ie){var ce=Q[ie];if(Y===0&&(Y=Z,(W+=J)>=D&&(J=4*U+4*r*(le-1),W=R+(Z+U)*(le<<1),le>>=1)),ce===K)W+=4;else{var oe=e[z+3*ce],be=e[z+3*ce+1],X=e[z+3*ce+2];L[W++]=X,L[W++]=be,L[W++]=oe,L[W++]=255}--Y}},this.decodeAndBlitFrameRGBA=function(S,L){var H=this.frameInfo(S),q=H.width*H.height,Q=new Uint8Array(q);rZ(e,H.data_offset,Q,q);var z=H.palette_offset,K=H.transparent_index;K===null&&(K=256);var Z=H.width,U=r-Z,Y=Z,R=4*(H.y*r+H.x),D=4*((H.y+H.height)*r+H.x),W=R,J=4*U;H.interlaced===!0&&(J+=4*r*7);for(var le=8,ie=0,re=Q.length;ie<re;++ie){var ce=Q[ie];if(Y===0&&(Y=Z,(W+=J)>=D&&(J=4*U+4*r*(le-1),W=R+(Z+U)*(le<<1),le>>=1)),ce===K)W+=4;else{var oe=e[z+3*ce],be=e[z+3*ce+1],X=e[z+3*ce+2];L[W++]=oe,L[W++]=be,L[W++]=X,L[W++]=255}--Y}}}function rZ(e,t,r,n){for(var a=e[t++],s=1<<a,o=s+1,l=o+1,c=a+1,u=(1<<c)-1,d=0,f=0,A=0,m=e[t++],g=new Int32Array(4096),x=null;;){for(;d<16&&m!==0;)f|=e[t++]<<d,d+=8,m===1?m=e[t++]:--m;if(d<c)break;var v=f&u;if(f>>=c,d-=c,v!==s){if(v===o)break;for(var y=v<l?v:x,N=0,C=y;C>s;)C=g[C]>>8,++N;var _=C;if(A+N+(y!==v?1:0)>n)return void Ma.log("Warning, gif stream longer than expected.");r[A++]=_;var j=A+=N;for(y!==v&&(r[A++]=_),C=y;N--;)C=g[C],r[--j]=255&C,C>>=8;x!==null&&l<4096&&(g[l++]=x<<8|_,l>=u+1&&c<12&&(++c,u=u<<1|1)),x=v}else l=o+1,u=(1<<(c=a+1))-1,x=null}return A!==n&&Ma.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function bO(e){var t,r,n,a,s,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),A=new Array(65535),m=new Array(64),g=new Array(64),x=[],v=0,y=7,N=new Array(64),C=new Array(64),_=new Array(64),j=new Array(256),I=new Array(2048),T=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],k=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],S=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Q(R,D){for(var W=0,J=0,le=new Array,ie=1;ie<=16;ie++){for(var re=1;re<=R[ie];re++)le[D[J]]=[],le[D[J]][0]=W,le[D[J]][1]=ie,J++,W++;W*=2}return le}function z(R){for(var D=R[0],W=R[1]-1;W>=0;)D&1<<W&&(v|=1<<y),W--,--y<0&&(v==255?(K(255),K(0)):K(v),y=7,v=0)}function K(R){x.push(R)}function Z(R){K(R>>8&255),K(255&R)}function U(R,D,W,J,le){for(var ie,re=le[0],ce=le[240],oe=function(de,ae){var fe,ge,xe,Ue,qe,Ze,We,me,Ve,Xe,Ie=0;for(Ve=0;Ve<8;++Ve){fe=de[Ie],ge=de[Ie+1],xe=de[Ie+2],Ue=de[Ie+3],qe=de[Ie+4],Ze=de[Ie+5],We=de[Ie+6];var Be=fe+(me=de[Ie+7]),et=fe-me,bt=ge+We,jt=ge-We,qt=xe+Ze,ir=xe-Ze,Ut=Ue+qe,Nr=Ue-qe,tr=Be+Ut,Xr=Be-Ut,hr=bt+qt,Dr=bt-qt;de[Ie]=tr+hr,de[Ie+4]=tr-hr;var or=.707106781*(Dr+Xr);de[Ie+2]=Xr+or,de[Ie+6]=Xr-or;var Yr=.382683433*((tr=Nr+ir)-(Dr=jt+et)),Xa=.5411961*tr+Yr,aa=1.306562965*Dr+Yr,Gn=.707106781*(hr=ir+jt),is=et+Gn,rr=et-Gn;de[Ie+5]=rr+Xa,de[Ie+3]=rr-Xa,de[Ie+1]=is+aa,de[Ie+7]=is-aa,Ie+=8}for(Ie=0,Ve=0;Ve<8;++Ve){fe=de[Ie],ge=de[Ie+8],xe=de[Ie+16],Ue=de[Ie+24],qe=de[Ie+32],Ze=de[Ie+40],We=de[Ie+48];var wn=fe+(me=de[Ie+56]),cn=fe-me,On=ge+We,Fn=ge-We,sa=xe+Ze,Se=xe-Ze,Ge=Ue+qe,Me=Ue-qe,Qe=wn+Ge,Ne=wn-Ge,ve=On+sa,Fe=On-sa;de[Ie]=Qe+ve,de[Ie+32]=Qe-ve;var ze=.707106781*(Fe+Ne);de[Ie+16]=Ne+ze,de[Ie+48]=Ne-ze;var He=.382683433*((Qe=Me+Se)-(Fe=Fn+cn)),Ye=.5411961*Qe+He,rt=1.306562965*Fe+He,Ct=.707106781*(ve=Se+Fn),Et=cn+Ct,Qt=cn-Ct;de[Ie+40]=Qt+Ye,de[Ie+24]=Qt-Ye,de[Ie+8]=Et+rt,de[Ie+56]=Et-rt,Ie++}for(Ve=0;Ve<64;++Ve)Xe=de[Ve]*ae[Ve],m[Ve]=Xe>0?Xe+.5|0:Xe-.5|0;return m}(R,D),be=0;be<64;++be)g[T[be]]=oe[be];var X=g[0]-W;W=g[0],X==0?z(J[0]):(z(J[A[ie=32767+X]]),z(f[ie]));for(var je=63;je>0&&g[je]==0;)je--;if(je==0)return z(re),W;for(var De,ke=1;ke<=je;){for(var ue=ke;g[ke]==0&&ke<=je;)++ke;var we=ke-ue;if(we>=16){De=we>>4;for(var Ae=1;Ae<=De;++Ae)z(ce);we&=15}ie=32767+g[ke],z(le[(we<<4)+A[ie]]),z(f[ie]),ke++}return je!=63&&z(re),W}function Y(R){R=Math.min(Math.max(R,1),100),s!=R&&(function(D){for(var W=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],J=0;J<64;J++){var le=o((W[J]*D+50)/100);le=Math.min(Math.max(le,1),255),l[T[J]]=le}for(var ie=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],re=0;re<64;re++){var ce=o((ie[re]*D+50)/100);ce=Math.min(Math.max(ce,1),255),c[T[re]]=ce}for(var oe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],be=0,X=0;X<8;X++)for(var je=0;je<8;je++)u[be]=1/(l[T[be]]*oe[X]*oe[je]*8),d[be]=1/(c[T[be]]*oe[X]*oe[je]*8),be++}(R<50?Math.floor(5e3/R):Math.floor(200-2*R)),s=R)}this.encode=function(R,D){D&&Y(D),x=new Array,v=0,y=7,Z(65496),Z(65504),Z(16),K(74),K(70),K(73),K(70),K(0),K(1),K(1),K(0),Z(1),Z(1),K(0),K(0),function(){Z(65499),Z(132),K(0);for(var ge=0;ge<64;ge++)K(l[ge]);K(1);for(var xe=0;xe<64;xe++)K(c[xe])}(),function(ge,xe){Z(65472),Z(17),K(8),Z(xe),Z(ge),K(3),K(1),K(17),K(0),K(2),K(17),K(1),K(3),K(17),K(1)}(R.width,R.height),function(){Z(65476),Z(418),K(0);for(var ge=0;ge<16;ge++)K(k[ge+1]);for(var xe=0;xe<=11;xe++)K(B[xe]);K(16);for(var Ue=0;Ue<16;Ue++)K(M[Ue+1]);for(var qe=0;qe<=161;qe++)K(P[qe]);K(1);for(var Ze=0;Ze<16;Ze++)K(S[Ze+1]);for(var We=0;We<=11;We++)K(L[We]);K(17);for(var me=0;me<16;me++)K(H[me+1]);for(var Ve=0;Ve<=161;Ve++)K(q[Ve])}(),Z(65498),Z(12),K(3),K(1),K(0),K(2),K(17),K(3),K(17),K(0),K(63),K(0);var W=0,J=0,le=0;v=0,y=7,this.encode.displayName="_encode_";for(var ie,re,ce,oe,be,X,je,De,ke,ue=R.data,we=R.width,Ae=R.height,de=4*we,ae=0;ae<Ae;){for(ie=0;ie<de;){for(be=de*ae+ie,je=-1,De=0,ke=0;ke<64;ke++)X=be+(De=ke>>3)*de+(je=4*(7&ke)),ae+De>=Ae&&(X-=de*(ae+1+De-Ae)),ie+je>=de&&(X-=ie+je-de+4),re=ue[X++],ce=ue[X++],oe=ue[X++],N[ke]=(I[re]+I[ce+256>>0]+I[oe+512>>0]>>16)-128,C[ke]=(I[re+768>>0]+I[ce+1024>>0]+I[oe+1280>>0]>>16)-128,_[ke]=(I[re+1280>>0]+I[ce+1536>>0]+I[oe+1792>>0]>>16)-128;W=U(N,u,W,t,n),J=U(C,d,J,r,a),le=U(_,d,le,r,a),ie+=32}ae+=8}if(y>=0){var fe=[];fe[1]=y+1,fe[0]=(1<<y+1)-1,z(fe)}return Z(65497),new Uint8Array(x)},e=e||50,function(){for(var R=String.fromCharCode,D=0;D<256;D++)j[D]=R(D)}(),t=Q(k,B),r=Q(S,L),n=Q(M,P),a=Q(H,q),function(){for(var R=1,D=2,W=1;W<=15;W++){for(var J=R;J<D;J++)A[32767+J]=W,f[32767+J]=[],f[32767+J][1]=W,f[32767+J][0]=J;for(var le=-(D-1);le<=-R;le++)A[32767+le]=W,f[32767+le]=[],f[32767+le][1]=W,f[32767+le][0]=D-1+le;R<<=1,D<<=1}}(),function(){for(var R=0;R<256;R++)I[R]=19595*R,I[R+256>>0]=38470*R,I[R+512>>0]=7471*R+32768,I[R+768>>0]=-11059*R,I[R+1024>>0]=-21709*R,I[R+1280>>0]=32768*R+8421375,I[R+1536>>0]=-27439*R,I[R+1792>>0]=-5329*R}(),Y(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function df(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function nZ(e){function t(k){if(!k)throw Error("assert :P")}function r(k,B,M){for(var P=0;4>P;P++)if(k[B+P]!=M.charCodeAt(P))return!0;return!1}function n(k,B,M,P,S){for(var L=0;L<S;L++)k[B+L]=M[P+L]}function a(k,B,M,P){for(var S=0;S<P;S++)k[B+S]=M}function s(k){return new Int32Array(k)}function o(k,B){for(var M=[],P=0;P<k;P++)M.push(new B);return M}function l(k,B){var M=[];return function P(S,L,H){for(var q=H[L],Q=0;Q<q&&(S.push(H.length>L+1?[]:new B),!(H.length<L+1));Q++)P(S[Q],L+1,H)}(M,0,k),M}var c=function(){var k=this;function B(O,G){for(var ne=1<<G-1>>>0;O&ne;)ne>>>=1;return ne?(O&ne-1)+ne:O}function M(O,G,ne,he,Ce){t(!(he%ne));do O[G+(he-=ne)]=Ce;while(0<he)}function P(O,G,ne,he,Ce){if(t(2328>=Ce),512>=Ce)var _e=s(512);else if((_e=s(Ce))==null)return 0;return function(Te,Oe,Le,$e,nt,pt){var At,ct,Lt=Oe,Nt=1<<Le,at=s(16),it=s(16);for(t(nt!=0),t($e!=null),t(Te!=null),t(0<Le),ct=0;ct<nt;++ct){if(15<$e[ct])return 0;++at[$e[ct]]}if(at[0]==nt)return 0;for(it[1]=0,At=1;15>At;++At){if(at[At]>1<<At)return 0;it[At+1]=it[At]+at[At]}for(ct=0;ct<nt;++ct)At=$e[ct],0<$e[ct]&&(pt[it[At]++]=ct);if(it[15]==1)return($e=new S).g=0,$e.value=pt[0],M(Te,Lt,1,Nt,$e),Nt;var Dt,Mt=-1,Ft=Nt-1,cr=0,er=1,Er=1,ar=1<<Le;for(ct=0,At=1,nt=2;At<=Le;++At,nt<<=1){if(er+=Er<<=1,0>(Er-=at[At]))return 0;for(;0<at[At];--at[At])($e=new S).g=At,$e.value=pt[ct++],M(Te,Lt+cr,nt,ar,$e),cr=B(cr,At)}for(At=Le+1,nt=2;15>=At;++At,nt<<=1){if(er+=Er<<=1,0>(Er-=at[At]))return 0;for(;0<at[At];--at[At]){if($e=new S,(cr&Ft)!=Mt){for(Lt+=ar,Dt=1<<(Mt=At)-Le;15>Mt&&!(0>=(Dt-=at[Mt]));)++Mt,Dt<<=1;Nt+=ar=1<<(Dt=Mt-Le),Te[Oe+(Mt=cr&Ft)].g=Dt+Le,Te[Oe+Mt].value=Lt-Oe-Mt}$e.g=At-Le,$e.value=pt[ct++],M(Te,Lt+(cr>>Le),nt,ar,$e),cr=B(cr,At)}}return er!=2*it[15]-1?0:Nt}(O,G,ne,he,Ce,_e)}function S(){this.value=this.g=0}function L(){this.value=this.g=0}function H(){this.G=o(5,S),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ei,L)}function q(O,G,ne,he){t(O!=null),t(G!=null),t(2147483648>he),O.Ca=254,O.I=0,O.b=-8,O.Ka=0,O.oa=G,O.pa=ne,O.Jd=G,O.Yc=ne+he,O.Zc=4<=he?ne+he-4+1:ne,ie(O)}function Q(O,G){for(var ne=0;0<G--;)ne|=ce(O,128)<<G;return ne}function z(O,G){var ne=Q(O,G);return re(O)?-ne:ne}function K(O,G,ne,he){var Ce,_e=0;for(t(O!=null),t(G!=null),t(4294967288>he),O.Sb=he,O.Ra=0,O.u=0,O.h=0,4<he&&(he=4),Ce=0;Ce<he;++Ce)_e+=G[ne+Ce]<<8*Ce;O.Ra=_e,O.bb=he,O.oa=G,O.pa=ne}function Z(O){for(;8<=O.u&&O.bb<O.Sb;)O.Ra>>>=8,O.Ra+=O.oa[O.pa+O.bb]<<g0-8>>>0,++O.bb,O.u-=8;W(O)&&(O.h=1,O.u=0)}function U(O,G){if(t(0<=G),!O.h&&G<=p0){var ne=D(O)&Yf[G];return O.u+=G,Z(O),ne}return O.h=1,O.u=0}function Y(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function R(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function D(O){return O.Ra>>>(O.u&g0-1)>>>0}function W(O){return t(O.bb<=O.Sb),O.h||O.bb==O.Sb&&O.u>g0}function J(O,G){O.u=G,O.h=W(O)}function le(O){O.u>=YA&&(t(O.u>=YA),Z(O))}function ie(O){t(O!=null&&O.oa!=null),O.pa<O.Zc?(O.I=(O.oa[O.pa++]|O.I<<8)>>>0,O.b+=8):(t(O!=null&&O.oa!=null),O.pa<O.Yc?(O.b+=8,O.I=O.oa[O.pa++]|O.I<<8):O.Ka?O.b=0:(O.I<<=8,O.b+=8,O.Ka=1))}function re(O){return Q(O,1)}function ce(O,G){var ne=O.Ca;0>O.b&&ie(O);var he=O.b,Ce=ne*G>>>8,_e=(O.I>>>he>Ce)+0;for(_e?(ne-=Ce,O.I-=Ce+1<<he>>>0):ne=Ce+1,he=ne,Ce=0;256<=he;)Ce+=8,he>>=8;return he=7^Ce+tl[he],O.b-=he,O.Ca=(ne<<he)-1,_e}function oe(O,G,ne){O[G+0]=ne>>24&255,O[G+1]=ne>>16&255,O[G+2]=ne>>8&255,O[G+3]=ne>>0&255}function be(O,G){return O[G+0]<<0|O[G+1]<<8}function X(O,G){return be(O,G)|O[G+2]<<16}function je(O,G){return be(O,G)|be(O,G+2)<<16}function De(O,G){var ne=1<<G;return t(O!=null),t(0<G),O.X=s(ne),O.X==null?0:(O.Mb=32-G,O.Xa=G,1)}function ke(O,G){t(O!=null),t(G!=null),t(O.Xa==G.Xa),n(G.X,0,O.X,0,1<<G.Xa)}function ue(){this.X=[],this.Xa=this.Mb=0}function we(O,G,ne,he){t(ne!=null),t(he!=null);var Ce=ne[0],_e=he[0];return Ce==0&&(Ce=(O*_e+G/2)/G),_e==0&&(_e=(G*Ce+O/2)/O),0>=Ce||0>=_e?0:(ne[0]=Ce,he[0]=_e,1)}function Ae(O,G){return O+(1<<G)-1>>>G}function de(O,G){return((4278255360&O)+(4278255360&G)>>>0&4278255360)+((16711935&O)+(16711935&G)>>>0&16711935)>>>0}function ae(O,G){k[G]=function(ne,he,Ce,_e,Te,Oe,Le){var $e;for($e=0;$e<Te;++$e){var nt=k[O](Oe[Le+$e-1],Ce,_e+$e);Oe[Le+$e]=de(ne[he+$e],nt)}}}function fe(){this.ud=this.hd=this.jd=0}function ge(O,G){return((4278124286&(O^G))>>>1)+(O&G)>>>0}function xe(O){return 0<=O&&256>O?O:0>O?0:255<O?255:void 0}function Ue(O,G){return xe(O+(O-G+.5>>1))}function qe(O,G,ne){return Math.abs(G-ne)-Math.abs(O-ne)}function Ze(O,G,ne,he,Ce,_e,Te){for(he=_e[Te-1],ne=0;ne<Ce;++ne)_e[Te+ne]=he=de(O[G+ne],he)}function We(O,G,ne,he,Ce){var _e;for(_e=0;_e<ne;++_e){var Te=O[G+_e],Oe=Te>>8&255,Le=16711935&(Le=(Le=16711935&Te)+((Oe<<16)+Oe));he[Ce+_e]=(4278255360&Te)+Le>>>0}}function me(O,G){G.jd=O>>0&255,G.hd=O>>8&255,G.ud=O>>16&255}function Ve(O,G,ne,he,Ce,_e){var Te;for(Te=0;Te<he;++Te){var Oe=G[ne+Te],Le=Oe>>>8,$e=Oe,nt=255&(nt=(nt=Oe>>>16)+((O.jd<<24>>24)*(Le<<24>>24)>>>5));$e=255&($e=($e=$e+((O.hd<<24>>24)*(Le<<24>>24)>>>5))+((O.ud<<24>>24)*(nt<<24>>24)>>>5)),Ce[_e+Te]=(4278255360&Oe)+(nt<<16)+$e}}function Xe(O,G,ne,he,Ce){k[G]=function(_e,Te,Oe,Le,$e,nt,pt,At,ct){for(Le=pt;Le<At;++Le)for(pt=0;pt<ct;++pt)$e[nt++]=Ce(Oe[he(_e[Te++])])},k[O]=function(_e,Te,Oe,Le,$e,nt,pt){var At=8>>_e.b,ct=_e.Ea,Lt=_e.K[0],Nt=_e.w;if(8>At)for(_e=(1<<_e.b)-1,Nt=(1<<At)-1;Te<Oe;++Te){var at,it=0;for(at=0;at<ct;++at)at&_e||(it=he(Le[$e++])),nt[pt++]=Ce(Lt[it&Nt]),it>>=At}else k["VP8LMapColor"+ne](Le,$e,Lt,Nt,nt,pt,Te,Oe,ct)}}function Ie(O,G,ne,he,Ce){for(ne=G+ne;G<ne;){var _e=O[G++];he[Ce++]=_e>>16&255,he[Ce++]=_e>>8&255,he[Ce++]=_e>>0&255}}function Be(O,G,ne,he,Ce){for(ne=G+ne;G<ne;){var _e=O[G++];he[Ce++]=_e>>16&255,he[Ce++]=_e>>8&255,he[Ce++]=_e>>0&255,he[Ce++]=_e>>24&255}}function et(O,G,ne,he,Ce){for(ne=G+ne;G<ne;){var _e=(Te=O[G++])>>16&240|Te>>12&15,Te=Te>>0&240|Te>>28&15;he[Ce++]=_e,he[Ce++]=Te}}function bt(O,G,ne,he,Ce){for(ne=G+ne;G<ne;){var _e=(Te=O[G++])>>16&248|Te>>13&7,Te=Te>>5&224|Te>>3&31;he[Ce++]=_e,he[Ce++]=Te}}function jt(O,G,ne,he,Ce){for(ne=G+ne;G<ne;){var _e=O[G++];he[Ce++]=_e>>0&255,he[Ce++]=_e>>8&255,he[Ce++]=_e>>16&255}}function qt(O,G,ne,he,Ce,_e){if(_e==0)for(ne=G+ne;G<ne;)oe(he,((_e=O[G++])[0]>>24|_e[1]>>8&65280|_e[2]<<8&16711680|_e[3]<<24)>>>0),Ce+=32;else n(he,Ce,O,G,ne)}function ir(O,G){k[G][0]=k[O+"0"],k[G][1]=k[O+"1"],k[G][2]=k[O+"2"],k[G][3]=k[O+"3"],k[G][4]=k[O+"4"],k[G][5]=k[O+"5"],k[G][6]=k[O+"6"],k[G][7]=k[O+"7"],k[G][8]=k[O+"8"],k[G][9]=k[O+"9"],k[G][10]=k[O+"10"],k[G][11]=k[O+"11"],k[G][12]=k[O+"12"],k[G][13]=k[O+"13"],k[G][14]=k[O+"0"],k[G][15]=k[O+"0"]}function Ut(O){return O==ig||O==oh||O==Xd||O==tm}function Nr(){this.eb=[],this.size=this.A=this.fb=0}function tr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Xr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Nr,this.f.kb=new tr,this.sd=null}function hr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Dr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function or(O){return alert("todo:WebPSamplerProcessPlane"),O.T}function Yr(O,G){var ne=O.T,he=G.ba.f.RGBA,Ce=he.eb,_e=he.fb+O.ka*he.A,Te=Ei[G.ba.S],Oe=O.y,Le=O.O,$e=O.f,nt=O.N,pt=O.ea,At=O.W,ct=G.cc,Lt=G.dc,Nt=G.Mc,at=G.Nc,it=O.ka,Dt=O.ka+O.T,Mt=O.U,Ft=Mt+1>>1;for(it==0?Te(Oe,Le,null,null,$e,nt,pt,At,$e,nt,pt,At,Ce,_e,null,null,Mt):(Te(G.ec,G.fc,Oe,Le,ct,Lt,Nt,at,$e,nt,pt,At,Ce,_e-he.A,Ce,_e,Mt),++ne);it+2<Dt;it+=2)ct=$e,Lt=nt,Nt=pt,at=At,nt+=O.Rc,At+=O.Rc,_e+=2*he.A,Te(Oe,(Le+=2*O.fa)-O.fa,Oe,Le,ct,Lt,Nt,at,$e,nt,pt,At,Ce,_e-he.A,Ce,_e,Mt);return Le+=O.fa,O.j+Dt<O.o?(n(G.ec,G.fc,Oe,Le,Mt),n(G.cc,G.dc,$e,nt,Ft),n(G.Mc,G.Nc,pt,At,Ft),ne--):1&Dt||Te(Oe,Le,null,null,$e,nt,pt,At,$e,nt,pt,At,Ce,_e+he.A,null,null,Mt),ne}function Xa(O,G,ne){var he=O.F,Ce=[O.J];if(he!=null){var _e=O.U,Te=G.ba.S,Oe=Te==w0||Te==Xd;G=G.ba.f.RGBA;var Le=[0],$e=O.ka;Le[0]=O.T,O.Kb&&($e==0?--Le[0]:(--$e,Ce[0]-=O.width),O.j+O.ka+O.T==O.o&&(Le[0]=O.o-O.j-$e));var nt=G.eb;$e=G.fb+$e*G.A,O=vn(he,Ce[0],O.width,_e,Le,nt,$e+(Oe?0:3),G.A),t(ne==Le),O&&Ut(Te)&&$l(nt,$e,Oe,_e,Le,G.A)}return 0}function aa(O){var G=O.ma,ne=G.ba.S,he=11>ne,Ce=ne==em||ne==sg||ne==w0||ne==Wd||ne==12||Ut(ne);if(G.memory=null,G.Ib=null,G.Jb=null,G.Nd=null,!Xf(G.Oa,O,Ce?11:12))return 0;if(Ce&&Ut(ne)&&zt(),O.da)alert("todo:use_scaling");else{if(he){if(G.Ib=or,O.Kb){if(ne=O.U+1>>1,G.memory=s(O.U+2*ne),G.memory==null)return 0;G.ec=G.memory,G.fc=0,G.cc=G.ec,G.dc=G.fc+O.U,G.Mc=G.cc,G.Nc=G.dc+ne,G.Ib=Yr,zt()}}else alert("todo:EmitYUV");Ce&&(G.Jb=Xa,he&&lt())}if(he&&!LE){for(O=0;256>O;++O)bB[O]=89858*(O-128)+ri>>td,cg[O]=-22014*(O-128)+ri,Xy[O]=-45773*(O-128),ni[O]=113618*(O-128)+ri>>td;for(O=uh;O<yv;++O)G=76283*(O-16)+ri>>td,ug[O-uh]=Yn(G,255),Yy[O-uh]=Yn(G+8>>4,15);LE=1}return 1}function Gn(O){var G=O.ma,ne=O.U,he=O.T;return t(!(1&O.ka)),0>=ne||0>=he?0:(ne=G.Ib(O,G),G.Jb!=null&&G.Jb(O,G,ne),G.Dc+=ne,1)}function is(O){O.ma.memory=null}function rr(O,G,ne,he){return U(O,8)!=47?0:(G[0]=U(O,14)+1,ne[0]=U(O,14)+1,he[0]=U(O,1),U(O,3)!=0?0:!O.h)}function wn(O,G){if(4>O)return O+1;var ne=O-2>>1;return(2+(1&O)<<ne)+U(G,ne)+1}function cn(O,G){return 120<G?G-120:1<=(ne=((ne=Jd[G-1])>>4)*O+(8-(15&ne)))?ne:1;var ne}function On(O,G,ne){var he=D(ne),Ce=O[G+=255&he].g-8;return 0<Ce&&(J(ne,ne.u+8),he=D(ne),G+=O[G].value,G+=he&(1<<Ce)-1),J(ne,ne.u+O[G].g),O[G].value}function Fn(O,G,ne){return ne.g+=O.g,ne.value+=O.value<<G>>>0,t(8>=ne.g),O.g}function sa(O,G,ne){var he=O.xc;return t((G=he==0?0:O.vc[O.md*(ne>>he)+(G>>he)])<O.Wb),O.Ya[G]}function Se(O,G,ne,he){var Ce=O.ab,_e=O.c*G,Te=O.C;G=Te+G;var Oe=ne,Le=he;for(he=O.Ta,ne=O.Ua;0<Ce--;){var $e=O.gc[Ce],nt=Te,pt=G,At=Oe,ct=Le,Lt=(Le=he,Oe=ne,$e.Ea);switch(t(nt<pt),t(pt<=$e.nc),$e.hc){case 2:Av(At,ct,(pt-nt)*Lt,Le,Oe);break;case 0:var Nt=nt,at=pt,it=Le,Dt=Oe,Mt=(ar=$e).Ea;Nt==0&&(Ky(At,ct,null,null,1,it,Dt),Ze(At,ct+1,0,0,Mt-1,it,Dt+1),ct+=Mt,Dt+=Mt,++Nt);for(var Ft=1<<ar.b,cr=Ft-1,er=Ae(Mt,ar.b),Er=ar.K,ar=ar.w+(Nt>>ar.b)*er;Nt<at;){var Mn=Er,Jn=ar,pn=1;for(ng(At,ct,it,Dt-Mt,1,it,Dt);pn<Mt;){var dn=(pn&~cr)+Ft;dn>Mt&&(dn=Mt),(0,Gd[Mn[Jn++]>>8&15])(At,ct+ +pn,it,Dt+pn-Mt,dn-pn,it,Dt+pn),pn=dn}ct+=Mt,Dt+=Mt,++Nt&cr||(ar+=er)}pt!=$e.nc&&n(Le,Oe-Lt,Le,Oe+(pt-nt-1)*Lt,Lt);break;case 1:for(Lt=At,at=ct,Mt=(At=$e.Ea)-(Dt=At&~(it=(ct=1<<$e.b)-1)),Nt=Ae(At,$e.b),Ft=$e.K,$e=$e.w+(nt>>$e.b)*Nt;nt<pt;){for(cr=Ft,er=$e,Er=new fe,ar=at+Dt,Mn=at+At;at<ar;)me(cr[er++],Er),Zf(Er,Lt,at,ct,Le,Oe),at+=ct,Oe+=ct;at<Mn&&(me(cr[er++],Er),Zf(Er,Lt,at,Mt,Le,Oe),at+=Mt,Oe+=Mt),++nt&it||($e+=Nt)}break;case 3:if(At==Le&&ct==Oe&&0<$e.b){for(at=Le,At=Lt=Oe+(pt-nt)*Lt-(Dt=(pt-nt)*Ae($e.Ea,$e.b)),ct=Le,it=Oe,Nt=[],Dt=(Mt=Dt)-1;0<=Dt;--Dt)Nt[Dt]=ct[it+Dt];for(Dt=Mt-1;0<=Dt;--Dt)at[At+Dt]=Nt[Dt];gc($e,nt,pt,Le,Lt,Le,Oe)}else gc($e,nt,pt,At,ct,Le,Oe)}Oe=he,Le=ne}Le!=ne&&n(he,ne,Oe,Le,_e)}function Ge(O,G){var ne=O.V,he=O.Ba+O.c*O.C,Ce=G-O.C;if(t(G<=O.l.o),t(16>=Ce),0<Ce){var _e=O.l,Te=O.Ta,Oe=O.Ua,Le=_e.width;if(Se(O,Ce,ne,he),Ce=Oe=[Oe],t((ne=O.C)<(he=G)),t(_e.v<_e.va),he>_e.o&&(he=_e.o),ne<_e.j){var $e=_e.j-ne;ne=_e.j,Ce[0]+=$e*Le}if(ne>=he?ne=0:(Ce[0]+=4*_e.v,_e.ka=ne-_e.j,_e.U=_e.va-_e.v,_e.T=he-ne,ne=1),ne){if(Oe=Oe[0],11>(ne=O.ca).S){var nt=ne.f.RGBA,pt=(he=ne.S,Ce=_e.U,_e=_e.T,$e=nt.eb,nt.A),At=_e;for(nt=nt.fb+O.Ma*nt.A;0<At--;){var ct=Te,Lt=Oe,Nt=Ce,at=$e,it=nt;switch(he){case no:ko(ct,Lt,Nt,at,it);break;case em:Mi(ct,Lt,Nt,at,it);break;case ig:Mi(ct,Lt,Nt,at,it),$l(at,it,0,Nt,1,0);break;case Yu:eu(ct,Lt,Nt,at,it);break;case sg:qt(ct,Lt,Nt,at,it,1);break;case oh:qt(ct,Lt,Nt,at,it,1),$l(at,it,0,Nt,1,0);break;case w0:qt(ct,Lt,Nt,at,it,0);break;case Xd:qt(ct,Lt,Nt,at,it,0),$l(at,it,1,Nt,1,0);break;case Wd:eh(ct,Lt,Nt,at,it);break;case tm:eh(ct,Lt,Nt,at,it),xn(at,it,Nt,1,0);break;case pv:rl(ct,Lt,Nt,at,it);break;default:t(0)}Oe+=Le,nt+=pt}O.Ma+=_e}else alert("todo:EmitRescaledRowsYUVA");t(O.Ma<=ne.height)}}O.C=G,t(O.C<=O.i)}function Me(O){var G;if(0<O.ua)return 0;for(G=0;G<O.Wb;++G){var ne=O.Ya[G].G,he=O.Ya[G].H;if(0<ne[1][he[1]+0].g||0<ne[2][he[2]+0].g||0<ne[3][he[3]+0].g)return 0}return 1}function Qe(O,G,ne,he,Ce,_e){if(O.Z!=0){var Te=O.qd,Oe=O.rd;for(t(Zu[O.Z]!=null);G<ne;++G)Zu[O.Z](Te,Oe,he,Ce,he,Ce,_e),Te=he,Oe=Ce,Ce+=_e;O.qd=Te,O.rd=Oe}}function Ne(O,G){var ne=O.l.ma,he=ne.Z==0||ne.Z==1?O.l.j:O.C;if(he=O.C<he?he:O.C,t(G<=O.l.o),G>he){var Ce=O.l.width,_e=ne.ca,Te=ne.tb+Ce*he,Oe=O.V,Le=O.Ba+O.c*he,$e=O.gc;t(O.ab==1),t($e[0].hc==3),Jf($e[0],he,G,Oe,Le,_e,Te),Qe(ne,he,G,_e,Te,Ce)}O.C=O.Ma=G}function ve(O,G,ne,he,Ce,_e,Te){var Oe=O.$/he,Le=O.$%he,$e=O.m,nt=O.s,pt=ne+O.$,At=pt;Ce=ne+he*Ce;var ct=ne+he*_e,Lt=280+nt.ua,Nt=O.Pb?Oe:16777216,at=0<nt.ua?nt.Wa:null,it=nt.wc,Dt=pt<ct?sa(nt,Le,Oe):null;t(O.C<_e),t(ct<=Ce);var Mt=!1;e:for(;;){for(;Mt||pt<ct;){var Ft=0;if(Oe>=Nt){var cr=pt-ne;t((Nt=O).Pb),Nt.wd=Nt.m,Nt.xd=cr,0<Nt.s.ua&&ke(Nt.s.Wa,Nt.s.vb),Nt=Oe+PE}if(Le&it||(Dt=sa(nt,Le,Oe)),t(Dt!=null),Dt.Qb&&(G[pt]=Dt.qb,Mt=!0),!Mt)if(le($e),Dt.jc){Ft=$e,cr=G;var er=pt,Er=Dt.pd[D(Ft)&ei-1];t(Dt.jc),256>Er.g?(J(Ft,Ft.u+Er.g),cr[er]=Er.value,Ft=0):(J(Ft,Ft.u+Er.g-256),t(256<=Er.value),Ft=Er.value),Ft==0&&(Mt=!0)}else Ft=On(Dt.G[0],Dt.H[0],$e);if($e.h)break;if(Mt||256>Ft){if(!Mt)if(Dt.nd)G[pt]=(Dt.qb|Ft<<8)>>>0;else{if(le($e),Mt=On(Dt.G[1],Dt.H[1],$e),le($e),cr=On(Dt.G[2],Dt.H[2],$e),er=On(Dt.G[3],Dt.H[3],$e),$e.h)break;G[pt]=(er<<24|Mt<<16|Ft<<8|cr)>>>0}if(Mt=!1,++pt,++Le>=he&&(Le=0,++Oe,Te!=null&&Oe<=_e&&!(Oe%16)&&Te(O,Oe),at!=null))for(;At<pt;)Ft=G[At++],at.X[(506832829*Ft&4294967295)>>>at.Mb]=Ft}else if(280>Ft){if(Ft=wn(Ft-256,$e),cr=On(Dt.G[4],Dt.H[4],$e),le($e),cr=cn(he,cr=wn(cr,$e)),$e.h)break;if(pt-ne<cr||Ce-pt<Ft)break e;for(er=0;er<Ft;++er)G[pt+er]=G[pt+er-cr];for(pt+=Ft,Le+=Ft;Le>=he;)Le-=he,++Oe,Te!=null&&Oe<=_e&&!(Oe%16)&&Te(O,Oe);if(t(pt<=Ce),Le&it&&(Dt=sa(nt,Le,Oe)),at!=null)for(;At<pt;)Ft=G[At++],at.X[(506832829*Ft&4294967295)>>>at.Mb]=Ft}else{if(!(Ft<Lt))break e;for(Mt=Ft-280,t(at!=null);At<pt;)Ft=G[At++],at.X[(506832829*Ft&4294967295)>>>at.Mb]=Ft;Ft=pt,t(!(Mt>>>(cr=at).Xa)),G[Ft]=cr.X[Mt],Mt=!0}Mt||t($e.h==W($e))}if(O.Pb&&$e.h&&pt<Ce)t(O.m.h),O.a=5,O.m=O.wd,O.$=O.xd,0<O.s.ua&&ke(O.s.vb,O.s.Wa);else{if($e.h)break e;Te!=null&&Te(O,Oe>_e?_e:Oe),O.a=0,O.$=pt-ne}return 1}return O.a=3,0}function Fe(O){t(O!=null),O.vc=null,O.yc=null,O.Ya=null;var G=O.Wa;G!=null&&(G.X=null),O.vb=null,t(O!=null)}function ze(){var O=new WA;return O==null?null:(O.a=0,O.xb=rm,ir("Predictor","VP8LPredictors"),ir("Predictor","VP8LPredictors_C"),ir("PredictorAdd","VP8LPredictorsAdd"),ir("PredictorAdd","VP8LPredictorsAdd_C"),Av=We,Zf=Ve,ko=Ie,Mi=Be,eh=et,rl=bt,eu=jt,k.VP8LMapColor32b=Ni,k.VP8LMapColor8b=ag,O)}function He(O,G,ne,he,Ce){var _e=1,Te=[O],Oe=[G],Le=he.m,$e=he.s,nt=null,pt=0;e:for(;;){if(ne)for(;_e&&U(Le,1);){var At=Te,ct=Oe,Lt=he,Nt=1,at=Lt.m,it=Lt.gc[Lt.ab],Dt=U(at,2);if(Lt.Oc&1<<Dt)_e=0;else{switch(Lt.Oc|=1<<Dt,it.hc=Dt,it.Ea=At[0],it.nc=ct[0],it.K=[null],++Lt.ab,t(4>=Lt.ab),Dt){case 0:case 1:it.b=U(at,3)+2,Nt=He(Ae(it.Ea,it.b),Ae(it.nc,it.b),0,Lt,it.K),it.K=it.K[0];break;case 3:var Mt,Ft=U(at,8)+1,cr=16<Ft?0:4<Ft?1:2<Ft?2:3;if(At[0]=Ae(it.Ea,cr),it.b=cr,Mt=Nt=He(Ft,1,0,Lt,it.K)){var er,Er=Ft,ar=it,Mn=1<<(8>>ar.b),Jn=s(Mn);if(Jn==null)Mt=0;else{var pn=ar.K[0],dn=ar.w;for(Jn[0]=ar.K[0][0],er=1;er<1*Er;++er)Jn[er]=de(pn[dn+er],Jn[er-1]);for(;er<4*Mn;++er)Jn[er]=0;ar.K[0]=null,ar.K[0]=Jn,Mt=1}}Nt=Mt;break;case 2:break;default:t(0)}_e=Nt}}if(Te=Te[0],Oe=Oe[0],_e&&U(Le,1)&&!(_e=1<=(pt=U(Le,4))&&11>=pt)){he.a=3;break e}var da;if(da=_e)t:{var Zn,tn,ya,Or=he,Vr=Te,Pn=Oe,Un=pt,ji=ne,ai=Or.m,ys=Or.s,ws=[null],Os=1,yc=0,ea=C0[Un];r:for(;;){if(ji&&U(ai,1)){var Ps=U(ai,3)+2,nu=Ae(Vr,Ps),dh=Ae(Pn,Ps),k0=nu*dh;if(!He(nu,dh,0,Or,ws))break r;for(ws=ws[0],ys.xc=Ps,Zn=0;Zn<k0;++Zn){var fh=ws[Zn]>>8&65535;ws[Zn]=fh,fh>=Os&&(Os=fh+1)}}if(ai.h)break r;for(tn=0;5>tn;++tn){var Va=zl[tn];!tn&&0<Un&&(Va+=1<<Un),yc<Va&&(yc=Va)}var dg=o(Os*ea,S),wv=Os,_o=o(wv,H);if(_o==null)var Ja=null;else t(65536>=wv),Ja=_o;var S0=s(yc);if(Ja==null||S0==null||dg==null){Or.a=1;break r}var hh=dg;for(Zn=ya=0;Zn<Os;++Zn){var al=Ja[Zn],Ah=al.G,sl=al.H,fg=0,am=1,Nv=0;for(tn=0;5>tn;++tn){Va=zl[tn],Ah[tn]=hh,sl[tn]=ya,!tn&&0<Un&&(Va+=1<<Un);a:{var hg,Cv=Va,Ag=Or,sm=S0,HE=hh,QE=ya,mg=0,rf=Ag.m,wB=U(rf,1);if(a(sm,0,0,Cv),wB){var VE=U(rf,1)+1,$E=U(rf,1),Jy=U(rf,$E==0?1:8);sm[Jy]=1,VE==2&&(sm[Jy=U(rf,8)]=1);var im=1}else{var Zy=s(19),ew=U(rf,4)+4;if(19<ew){Ag.a=3;var pg=0;break a}for(hg=0;hg<ew;++hg)Zy[Yd[hg]]=U(rf,3);var Ev=void 0,om=void 0,zE=Ag,GE=Zy,nf=Cv,gg=sm,jv=0,au=zE.m,lm=8,tw=o(128,S);n:for(;P(tw,0,7,GE,19);){if(U(au,1)){var qE=2+2*U(au,3);if((Ev=2+U(au,qE))>nf)break n}else Ev=nf;for(om=0;om<nf&&Ev--;){le(au);var rw=tw[0+(127&D(au))];J(au,au.u+rw.g);var _0=rw.value;if(16>_0)gg[om++]=_0,_0!=0&&(lm=_0);else{var KE=_0==16,nw=_0-16,aw=bc[nw],sw=U(au,gv[nw])+aw;if(om+sw>nf)break n;for(var WE=KE?lm:0;0<sw--;)gg[om++]=WE}}jv=1;break n}jv||(zE.a=3),im=jv}(im=im&&!rf.h)&&(mg=P(HE,QE,8,sm,Cv)),im&&mg!=0?pg=mg:(Ag.a=3,pg=0)}if(pg==0)break r;if(am&&N0[tn]==1&&(am=hh[ya].g==0),fg+=hh[ya].g,ya+=pg,3>=tn){var T0,kv=S0[0];for(T0=1;T0<Va;++T0)S0[T0]>kv&&(kv=S0[T0]);Nv+=kv}}if(al.nd=am,al.Qb=0,am&&(al.qb=(Ah[3][sl[3]+0].value<<24|Ah[1][sl[1]+0].value<<16|Ah[2][sl[2]+0].value)>>>0,fg==0&&256>Ah[0][sl[0]+0].value&&(al.Qb=1,al.qb+=Ah[0][sl[0]+0].value<<8)),al.jc=!al.Qb&&6>Nv,al.jc){var xg,af=al;for(xg=0;xg<ei;++xg){var rd=xg,sf=af.pd[rd],vg=af.G[0][af.H[0]+rd];256<=vg.value?(sf.g=vg.g+256,sf.value=vg.value):(sf.g=0,sf.value=0,rd>>=Fn(vg,8,sf),rd>>=Fn(af.G[1][af.H[1]+rd],16,sf),rd>>=Fn(af.G[2][af.H[2]+rd],0,sf),Fn(af.G[3][af.H[3]+rd],24,sf))}}}ys.vc=ws,ys.Wb=Os,ys.Ya=Ja,ys.yc=dg,da=1;break t}da=0}if(!(_e=da)){he.a=3;break e}if(0<pt){if($e.ua=1<<pt,!De($e.Wa,pt)){he.a=1,_e=0;break e}}else $e.ua=0;var bg=he,iw=Te,XE=Oe,ow=bg.s,lw=ow.xc;if(bg.c=iw,bg.i=XE,ow.md=Ae(iw,lw),ow.wc=lw==0?-1:(1<<lw)-1,ne){he.xb=RE;break e}if((nt=s(Te*Oe))==null){he.a=1,_e=0;break e}_e=(_e=ve(he,nt,0,Te,Oe,Oe,null))&&!Le.h;break e}return _e?(Ce!=null?Ce[0]=nt:(t(nt==null),t(ne)),he.$=0,ne||Fe($e)):Fe($e),_e}function Ye(O,G){var ne=O.c*O.i,he=ne+G+16*G;return t(O.c<=G),O.V=s(he),O.V==null?(O.Ta=null,O.Ua=0,O.a=1,0):(O.Ta=O.V,O.Ua=O.Ba+ne+G,1)}function rt(O,G){var ne=O.C,he=G-ne,Ce=O.V,_e=O.Ba+O.c*ne;for(t(G<=O.l.o);0<he;){var Te=16<he?16:he,Oe=O.l.ma,Le=O.l.width,$e=Le*Te,nt=Oe.ca,pt=Oe.tb+Le*ne,At=O.Ta,ct=O.Ua;Se(O,Te,Ce,_e),Ba(At,ct,nt,pt,$e),Qe(Oe,ne,ne+Te,nt,pt,Le),he-=Te,Ce+=Te*O.c,ne+=Te}t(ne==G),O.C=O.Ma=G}function Ct(){this.ub=this.yd=this.td=this.Rb=0}function Et(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Qt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ot(){this.Yb=function(){var O=[];return function G(ne,he,Ce){for(var _e=Ce[he],Te=0;Te<_e&&(ne.push(Ce.length>he+1?[]:0),!(Ce.length<he+1));Te++)G(ne[Te],he+1,Ce)}(O,0,[3,11]),O}()}function Kt(){this.jb=s(3),this.Wc=l([4,8],Ot),this.Xc=l([4,17],Ot)}function Cr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function rn(){this.ld=this.La=this.dd=this.tc=0}function Jr(){this.Na=this.la=0}function an(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function va(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ys(){this.uc=this.M=this.Nb=0,this.wa=Array(new rn),this.Y=0,this.ya=Array(new va),this.aa=0,this.l=new xs}function Ya(){this.y=s(16),this.f=s(8),this.ea=s(8)}function os(){this.cb=this.a=0,this.sc="",this.m=new Y,this.Od=new Ct,this.Kc=new Et,this.ed=new Cr,this.Qa=new Qt,this.Ic=this.$c=this.Aa=0,this.D=new Ys,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Y),this.ia=0,this.pb=o(4,an),this.Pa=new Kt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ya),this.Hd=0,this.rb=Array(new Jr),this.sb=0,this.wa=Array(new rn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new va),this.L=this.aa=0,this.gd=l([4,2],rn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function xs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Tr(){var O=new os;return O!=null&&(O.a=0,O.sc="OK",O.cb=0,O.Xb=0,ti||(ti=Kc)),O}function Zr(O,G,ne){return O.a==0&&(O.a=G,O.sc=ne,O.cb=0),0}function Rn(O,G,ne){return 3<=ne&&O[G+0]==157&&O[G+1]==1&&O[G+2]==42}function Ji(O,G){if(O==null)return 0;if(O.a=0,O.sc="OK",G==null)return Zr(O,2,"null VP8Io passed to VP8GetHeaders()");var ne=G.data,he=G.w,Ce=G.ha;if(4>Ce)return Zr(O,7,"Truncated header.");var _e=ne[he+0]|ne[he+1]<<8|ne[he+2]<<16,Te=O.Od;if(Te.Rb=!(1&_e),Te.td=_e>>1&7,Te.yd=_e>>4&1,Te.ub=_e>>5,3<Te.td)return Zr(O,3,"Incorrect keyframe parameters.");if(!Te.yd)return Zr(O,4,"Frame not displayable.");he+=3,Ce-=3;var Oe=O.Kc;if(Te.Rb){if(7>Ce)return Zr(O,7,"cannot parse picture header");if(!Rn(ne,he,Ce))return Zr(O,3,"Bad code word");Oe.c=16383&(ne[he+4]<<8|ne[he+3]),Oe.Td=ne[he+4]>>6,Oe.i=16383&(ne[he+6]<<8|ne[he+5]),Oe.Ud=ne[he+6]>>6,he+=7,Ce-=7,O.za=Oe.c+15>>4,O.Ub=Oe.i+15>>4,G.width=Oe.c,G.height=Oe.i,G.Da=0,G.j=0,G.v=0,G.va=G.width,G.o=G.height,G.da=0,G.ib=G.width,G.hb=G.height,G.U=G.width,G.T=G.height,a((_e=O.Pa).jb,0,255,_e.jb.length),t((_e=O.Qa)!=null),_e.Cb=0,_e.Bb=0,_e.Fb=1,a(_e.Zb,0,0,_e.Zb.length),a(_e.Lb,0,0,_e.Lb)}if(Te.ub>Ce)return Zr(O,7,"bad partition length");q(_e=O.m,ne,he,Te.ub),he+=Te.ub,Ce-=Te.ub,Te.Rb&&(Oe.Ld=re(_e),Oe.Kd=re(_e)),Oe=O.Qa;var Le,$e=O.Pa;if(t(_e!=null),t(Oe!=null),Oe.Cb=re(_e),Oe.Cb){if(Oe.Bb=re(_e),re(_e)){for(Oe.Fb=re(_e),Le=0;4>Le;++Le)Oe.Zb[Le]=re(_e)?z(_e,7):0;for(Le=0;4>Le;++Le)Oe.Lb[Le]=re(_e)?z(_e,6):0}if(Oe.Bb)for(Le=0;3>Le;++Le)$e.jb[Le]=re(_e)?Q(_e,8):255}else Oe.Bb=0;if(_e.Ka)return Zr(O,3,"cannot parse segment header");if((Oe=O.ed).zd=re(_e),Oe.Tb=Q(_e,6),Oe.wb=Q(_e,3),Oe.Pc=re(_e),Oe.Pc&&re(_e)){for($e=0;4>$e;++$e)re(_e)&&(Oe.vd[$e]=z(_e,6));for($e=0;4>$e;++$e)re(_e)&&(Oe.od[$e]=z(_e,6))}if(O.L=Oe.Tb==0?0:Oe.zd?1:2,_e.Ka)return Zr(O,3,"cannot parse filter header");var nt=Ce;if(Ce=Le=he,he=Le+nt,Oe=nt,O.Xb=(1<<Q(O.m,2))-1,nt<3*($e=O.Xb))ne=7;else{for(Le+=3*$e,Oe-=3*$e,nt=0;nt<$e;++nt){var pt=ne[Ce+0]|ne[Ce+1]<<8|ne[Ce+2]<<16;pt>Oe&&(pt=Oe),q(O.Jc[+nt],ne,Le,pt),Le+=pt,Oe-=pt,Ce+=3}q(O.Jc[+$e],ne,Le,Oe),ne=Le<he?0:5}if(ne!=0)return Zr(O,ne,"cannot parse partitions");for(ne=Q(Le=O.m,7),Ce=re(Le)?z(Le,4):0,he=re(Le)?z(Le,4):0,Oe=re(Le)?z(Le,4):0,$e=re(Le)?z(Le,4):0,Le=re(Le)?z(Le,4):0,nt=O.Qa,pt=0;4>pt;++pt){if(nt.Cb){var At=nt.Zb[pt];nt.Fb||(At+=ne)}else{if(0<pt){O.pb[pt]=O.pb[0];continue}At=ne}var ct=O.pb[pt];ct.Sc[0]=og[Yn(At+Ce,127)],ct.Sc[1]=lg[Yn(At+0,127)],ct.Eb[0]=2*og[Yn(At+he,127)],ct.Eb[1]=101581*lg[Yn(At+Oe,127)]>>16,8>ct.Eb[1]&&(ct.Eb[1]=8),ct.Qc[0]=og[Yn(At+$e,117)],ct.Qc[1]=lg[Yn(At+Le,127)],ct.lc=At+Le}if(!Te.Rb)return Zr(O,4,"Not a key frame.");for(re(_e),Te=O.Pa,ne=0;4>ne;++ne){for(Ce=0;8>Ce;++Ce)for(he=0;3>he;++he)for(Oe=0;11>Oe;++Oe)$e=ce(_e,E0[ne][Ce][he][Oe])?Q(_e,8):Ju[ne][Ce][he][Oe],Te.Wc[ne][Ce].Yb[he][Oe]=$e;for(Ce=0;17>Ce;++Ce)Te.Xc[ne][Ce]=Te.Wc[ne][FE[Ce]]}return O.kc=re(_e),O.kc&&(O.Bd=Q(_e,8)),O.cb=1}function Kc(O,G,ne,he,Ce,_e,Te){var Oe=G[Ce].Yb[ne];for(ne=0;16>Ce;++Ce){if(!ce(O,Oe[ne+0]))return Ce;for(;!ce(O,Oe[ne+1]);)if(Oe=G[++Ce].Yb[0],ne=0,Ce==16)return 16;var Le=G[Ce+1].Yb;if(ce(O,Oe[ne+2])){var $e=O,nt=0;if(ce($e,(At=Oe)[(pt=ne)+3]))if(ce($e,At[pt+6])){for(Oe=0,pt=2*(nt=ce($e,At[pt+8]))+(At=ce($e,At[pt+9+nt])),nt=0,At=us[pt];At[Oe];++Oe)nt+=nt+ce($e,At[Oe]);nt+=3+(8<<pt)}else ce($e,At[pt+7])?(nt=7+2*ce($e,165),nt+=ce($e,145)):nt=5+ce($e,159);else nt=ce($e,At[pt+4])?3+ce($e,At[pt+5]):2;Oe=Le[2]}else nt=1,Oe=Le[1];Le=Te+qn[Ce],0>($e=O).b&&ie($e);var pt,At=$e.b,ct=(pt=$e.Ca>>1)-($e.I>>At)>>31;--$e.b,$e.Ca+=ct,$e.Ca|=1,$e.I-=(pt+1&ct)<<At,_e[Le]=((nt^ct)-ct)*he[(0<Ce)+0]}return 16}function oc(O){var G=O.rb[O.sb-1];G.la=0,G.Na=0,a(O.zc,0,0,O.zc.length),O.ja=0}function Rd(O,G){if(O==null)return 0;if(G==null)return Zr(O,2,"NULL VP8Io parameter in VP8Decode().");if(!O.cb&&!Ji(O,G))return 0;if(t(O.cb),G.ac==null||G.ac(G)){G.ob&&(O.L=0);var ne=tf[O.L];if(O.L==2?(O.yb=0,O.zb=0):(O.yb=G.v-ne>>4,O.zb=G.j-ne>>4,0>O.yb&&(O.yb=0),0>O.zb&&(O.zb=0)),O.Va=G.o+15+ne>>4,O.Hb=G.va+15+ne>>4,O.Hb>O.za&&(O.Hb=O.za),O.Va>O.Ub&&(O.Va=O.Ub),0<O.L){var he=O.ed;for(ne=0;4>ne;++ne){var Ce;if(O.Qa.Cb){var _e=O.Qa.Lb[ne];O.Qa.Fb||(_e+=he.Tb)}else _e=he.Tb;for(Ce=0;1>=Ce;++Ce){var Te=O.gd[ne][Ce],Oe=_e;if(he.Pc&&(Oe+=he.vd[0],Ce&&(Oe+=he.od[0])),0<(Oe=0>Oe?0:63<Oe?63:Oe)){var Le=Oe;0<he.wb&&(Le=4<he.wb?Le>>2:Le>>1)>9-he.wb&&(Le=9-he.wb),1>Le&&(Le=1),Te.dd=Le,Te.tc=2*Oe+Le,Te.ld=40<=Oe?2:15<=Oe?1:0}else Te.tc=0;Te.La=Ce}}}ne=0}else Zr(O,6,"Frame setup failed"),ne=O.a;if(ne=ne==0){if(ne){O.$c=0,0<O.Aa||(O.Ic=ME);e:{ne=O.Ic,he=4*(Le=O.za);var $e=32*Le,nt=Le+1,pt=0<O.L?Le*(0<O.Aa?2:1):0,At=(O.Aa==2?2:1)*Le;if((Te=he+832+(Ce=3*(16*ne+tf[O.L])/2*$e)+(_e=O.Fa!=null&&0<O.Fa.length?O.Kc.c*O.Kc.i:0))!=Te)ne=0;else{if(Te>O.Vb){if(O.Vb=0,O.Ec=s(Te),O.Fc=0,O.Ec==null){ne=Zr(O,1,"no memory during frame initialization.");break e}O.Vb=Te}Te=O.Ec,Oe=O.Fc,O.Ac=Te,O.Bc=Oe,Oe+=he,O.Gd=o($e,Ya),O.Hd=0,O.rb=o(nt+1,Jr),O.sb=1,O.wa=pt?o(pt,rn):null,O.Y=0,O.D.Nb=0,O.D.wa=O.wa,O.D.Y=O.Y,0<O.Aa&&(O.D.Y+=Le),t(!0),O.oc=Te,O.pc=Oe,Oe+=832,O.ya=o(At,va),O.aa=0,O.D.ya=O.ya,O.D.aa=O.aa,O.Aa==2&&(O.D.aa+=Le),O.R=16*Le,O.B=8*Le,Le=($e=tf[O.L])*O.R,$e=$e/2*O.B,O.sa=Te,O.ta=Oe+Le,O.qa=O.sa,O.ra=O.ta+16*ne*O.R+$e,O.Ha=O.qa,O.Ia=O.ra+8*ne*O.B+$e,O.$c=0,Oe+=Ce,O.mb=_e?Te:null,O.nb=_e?Oe:null,t(Oe+_e<=O.Fc+O.Vb),oc(O),a(O.Ac,O.Bc,0,he),ne=1}}if(ne){if(G.ka=0,G.y=O.sa,G.O=O.ta,G.f=O.qa,G.N=O.ra,G.ea=O.Ha,G.Vd=O.Ia,G.fa=O.R,G.Rc=O.B,G.F=null,G.J=0,!Kd){for(ne=-255;255>=ne;++ne)bs[255+ne]=0>ne?-ne:ne;for(ne=-1020;1020>=ne;++ne)xc[1020+ne]=-128>ne?-128:127<ne?127:ne;for(ne=-112;112>=ne;++ne)sh[112+ne]=-16>ne?-16:15<ne?15:ne;for(ne=-255;510>=ne;++ne)ih[255+ne]=0>ne?0:255<ne?255:ne;Kd=1}Wu=Eo,tu=lc,ru=Co,Ds=Ln,nl=cc,ls=Hl,x0=$u,Xu=Jc,JA=qf,th=A0,rh=Gf,nh=Hd,v0=Qd,ZA=zu,ah=Vl,qd=to,b0=Is,cs=KA,So[0]=Zi,So[1]=Ld,So[2]=fc,So[3]=qA,So[4]=Yo,So[5]=hc,So[6]=jo,So[7]=Jo,So[8]=Yc,So[9]=Hu,Zd[0]=uc,Zd[1]=Uu,Zd[2]=Ql,Zd[3]=zf,Zd[4]=ba,Zd[5]=Xc,Zd[6]=dc,Gl[0]=Ac,Gl[1]=Mu,Gl[2]=f0,Gl[3]=Zo,Gl[4]=Nn,Gl[5]=Bs,Gl[6]=Qu,ne=1}else ne=0}ne&&(ne=function(ct,Lt){for(ct.M=0;ct.M<ct.Va;++ct.M){var Nt,at=ct.Jc[ct.M&ct.Xb],it=ct.m,Dt=ct;for(Nt=0;Nt<Dt.za;++Nt){var Mt=it,Ft=Dt,cr=Ft.Ac,er=Ft.Bc+4*Nt,Er=Ft.zc,ar=Ft.ya[Ft.aa+Nt];if(Ft.Qa.Bb?ar.$b=ce(Mt,Ft.Pa.jb[0])?2+ce(Mt,Ft.Pa.jb[2]):ce(Mt,Ft.Pa.jb[1]):ar.$b=0,Ft.kc&&(ar.Ad=ce(Mt,Ft.Bd)),ar.Za=!ce(Mt,145)+0,ar.Za){var Mn=ar.Ob,Jn=0;for(Ft=0;4>Ft;++Ft){var pn,dn=Er[0+Ft];for(pn=0;4>pn;++pn){dn=Wy[cr[er+pn]][dn];for(var da=lh[ce(Mt,dn[0])];0<da;)da=lh[2*da+ce(Mt,dn[da])];dn=-da,cr[er+pn]=dn}n(Mn,Jn,cr,er,4),Jn+=4,Er[0+Ft]=dn}}else dn=ce(Mt,156)?ce(Mt,128)?1:3:ce(Mt,163)?2:0,ar.Ob[0]=dn,a(cr,er,dn,4),a(Er,0,dn,4);ar.Dd=ce(Mt,142)?ce(Mt,114)?ce(Mt,183)?1:3:2:0}if(Dt.m.Ka)return Zr(ct,7,"Premature end-of-partition0 encountered.");for(;ct.ja<ct.za;++ct.ja){if(Dt=at,Mt=(it=ct).rb[it.sb-1],cr=it.rb[it.sb+it.ja],Nt=it.ya[it.aa+it.ja],er=it.kc?Nt.Ad:0)Mt.la=cr.la=0,Nt.Za||(Mt.Na=cr.Na=0),Nt.Hc=0,Nt.Gc=0,Nt.ia=0;else{var Zn,tn;if(Mt=cr,cr=Dt,er=it.Pa.Xc,Er=it.ya[it.aa+it.ja],ar=it.pb[Er.$b],Ft=Er.ad,Mn=0,Jn=it.rb[it.sb-1],dn=pn=0,a(Ft,Mn,0,384),Er.Za)var ya=0,Or=er[3];else{da=s(16);var Vr=Mt.Na+Jn.Na;if(Vr=ti(cr,er[1],Vr,ar.Eb,0,da,0),Mt.Na=Jn.Na=(0<Vr)+0,1<Vr)Wu(da,0,Ft,Mn);else{var Pn=da[0]+3>>3;for(da=0;256>da;da+=16)Ft[Mn+da]=Pn}ya=1,Or=er[0]}var Un=15&Mt.la,ji=15&Jn.la;for(da=0;4>da;++da){var ai=1&ji;for(Pn=tn=0;4>Pn;++Pn)Un=Un>>1|(ai=(Vr=ti(cr,Or,Vr=ai+(1&Un),ar.Sc,ya,Ft,Mn))>ya)<<7,tn=tn<<2|(3<Vr?3:1<Vr?2:Ft[Mn+0]!=0),Mn+=16;Un>>=4,ji=ji>>1|ai<<7,pn=(pn<<8|tn)>>>0}for(Or=Un,ya=ji>>4,Zn=0;4>Zn;Zn+=2){for(tn=0,Un=Mt.la>>4+Zn,ji=Jn.la>>4+Zn,da=0;2>da;++da){for(ai=1&ji,Pn=0;2>Pn;++Pn)Vr=ai+(1&Un),Un=Un>>1|(ai=0<(Vr=ti(cr,er[2],Vr,ar.Qc,0,Ft,Mn)))<<3,tn=tn<<2|(3<Vr?3:1<Vr?2:Ft[Mn+0]!=0),Mn+=16;Un>>=2,ji=ji>>1|ai<<5}dn|=tn<<4*Zn,Or|=Un<<4<<Zn,ya|=(240&ji)<<Zn}Mt.la=Or,Jn.la=ya,Er.Hc=pn,Er.Gc=dn,Er.ia=43690&dn?0:ar.ia,er=!(pn|dn)}if(0<it.L&&(it.wa[it.Y+it.ja]=it.gd[Nt.$b][Nt.Za],it.wa[it.Y+it.ja].La|=!er),Dt.Ka)return Zr(ct,7,"Premature end-of-file encountered.")}if(oc(ct),it=Lt,Dt=1,Nt=(at=ct).D,Mt=0<at.L&&at.M>=at.zb&&at.M<=at.Va,at.Aa==0)e:{if(Nt.M=at.M,Nt.uc=Mt,el(at,Nt),Dt=1,Nt=(tn=at.D).Nb,Mt=(dn=tf[at.L])*at.R,cr=dn/2*at.B,da=16*Nt*at.R,Pn=8*Nt*at.B,er=at.sa,Er=at.ta-Mt+da,ar=at.qa,Ft=at.ra-cr+Pn,Mn=at.Ha,Jn=at.Ia-cr+Pn,ji=(Un=tn.M)==0,pn=Un>=at.Va-1,at.Aa==2&&el(at,tn),tn.uc)for(ai=(Vr=at).D.M,t(Vr.D.uc),tn=Vr.yb;tn<Vr.Hb;++tn){ya=tn,Or=ai;var ys=(ws=(Va=Vr).D).Nb;Zn=Va.R;var ws=ws.wa[ws.Y+ya],Os=Va.sa,yc=Va.ta+16*ys*Zn+16*ya,ea=ws.dd,Ps=ws.tc;if(Ps!=0)if(t(3<=Ps),Va.L==1)0<ya&&qd(Os,yc,Zn,Ps+4),ws.La&&cs(Os,yc,Zn,Ps),0<Or&&ah(Os,yc,Zn,Ps+4),ws.La&&b0(Os,yc,Zn,Ps);else{var nu=Va.B,dh=Va.qa,k0=Va.ra+8*ys*nu+8*ya,fh=Va.Ha,Va=Va.Ia+8*ys*nu+8*ya;ys=ws.ld,0<ya&&(Xu(Os,yc,Zn,Ps+4,ea,ys),th(dh,k0,fh,Va,nu,Ps+4,ea,ys)),ws.La&&(nh(Os,yc,Zn,Ps,ea,ys),ZA(dh,k0,fh,Va,nu,Ps,ea,ys)),0<Or&&(x0(Os,yc,Zn,Ps+4,ea,ys),JA(dh,k0,fh,Va,nu,Ps+4,ea,ys)),ws.La&&(rh(Os,yc,Zn,Ps,ea,ys),v0(dh,k0,fh,Va,nu,Ps,ea,ys))}}if(at.ia&&alert("todo:DitherRow"),it.put!=null){if(tn=16*Un,Un=16*(Un+1),ji?(it.y=at.sa,it.O=at.ta+da,it.f=at.qa,it.N=at.ra+Pn,it.ea=at.Ha,it.W=at.Ia+Pn):(tn-=dn,it.y=er,it.O=Er,it.f=ar,it.N=Ft,it.ea=Mn,it.W=Jn),pn||(Un-=dn),Un>it.o&&(Un=it.o),it.F=null,it.J=null,at.Fa!=null&&0<at.Fa.length&&tn<Un&&(it.J=Wf(at,it,tn,Un-tn),it.F=at.mb,it.F==null&&it.F.length==0)){Dt=Zr(at,3,"Could not decode alpha data.");break e}tn<it.j&&(dn=it.j-tn,tn=it.j,t(!(1&dn)),it.O+=at.R*dn,it.N+=at.B*(dn>>1),it.W+=at.B*(dn>>1),it.F!=null&&(it.J+=it.width*dn)),tn<Un&&(it.O+=it.v,it.N+=it.v>>1,it.W+=it.v>>1,it.F!=null&&(it.J+=it.v),it.ka=tn-it.j,it.U=it.va-it.v,it.T=Un-tn,Dt=it.put(it))}Nt+1!=at.Ic||pn||(n(at.sa,at.ta-Mt,er,Er+16*at.R,Mt),n(at.qa,at.ra-cr,ar,Ft+8*at.B,cr),n(at.Ha,at.Ia-cr,Mn,Jn+8*at.B,cr))}if(!Dt)return Zr(ct,6,"Output aborted.")}return 1}(O,G)),G.bc!=null&&G.bc(G),ne&=1}return ne?(O.cb=0,ne):0}function Js(O,G,ne,he,Ce){Ce=O[G+ne+32*he]+(Ce>>3),O[G+ne+32*he]=-256&Ce?0>Ce?0:255:Ce}function Lu(O,G,ne,he,Ce,_e){Js(O,G,0,ne,he+Ce),Js(O,G,1,ne,he+_e),Js(O,G,2,ne,he-_e),Js(O,G,3,ne,he-Ce)}function gn(O){return(20091*O>>16)+O}function Zs(O,G,ne,he){var Ce,_e=0,Te=s(16);for(Ce=0;4>Ce;++Ce){var Oe=O[G+0]+O[G+8],Le=O[G+0]-O[G+8],$e=(35468*O[G+4]>>16)-gn(O[G+12]),nt=gn(O[G+4])+(35468*O[G+12]>>16);Te[_e+0]=Oe+nt,Te[_e+1]=Le+$e,Te[_e+2]=Le-$e,Te[_e+3]=Oe-nt,_e+=4,G++}for(Ce=_e=0;4>Ce;++Ce)Oe=(O=Te[_e+0]+4)+Te[_e+8],Le=O-Te[_e+8],$e=(35468*Te[_e+4]>>16)-gn(Te[_e+12]),Js(ne,he,0,0,Oe+(nt=gn(Te[_e+4])+(35468*Te[_e+12]>>16))),Js(ne,he,1,0,Le+$e),Js(ne,he,2,0,Le-$e),Js(ne,he,3,0,Oe-nt),_e++,he+=32}function Hl(O,G,ne,he){var Ce=O[G+0]+4,_e=35468*O[G+4]>>16,Te=gn(O[G+4]),Oe=35468*O[G+1]>>16;Lu(ne,he,0,Ce+Te,O=gn(O[G+1]),Oe),Lu(ne,he,1,Ce+_e,O,Oe),Lu(ne,he,2,Ce-_e,O,Oe),Lu(ne,he,3,Ce-Te,O,Oe)}function lc(O,G,ne,he,Ce){Zs(O,G,ne,he),Ce&&Zs(O,G+16,ne,he+4)}function Co(O,G,ne,he){tu(O,G+0,ne,he,1),tu(O,G+32,ne,he+128,1)}function Ln(O,G,ne,he){var Ce;for(O=O[G+0]+4,Ce=0;4>Ce;++Ce)for(G=0;4>G;++G)Js(ne,he,G,Ce,O)}function cc(O,G,ne,he){O[G+0]&&Ds(O,G+0,ne,he),O[G+16]&&Ds(O,G+16,ne,he+4),O[G+32]&&Ds(O,G+32,ne,he+128),O[G+48]&&Ds(O,G+48,ne,he+128+4)}function Eo(O,G,ne,he){var Ce,_e=s(16);for(Ce=0;4>Ce;++Ce){var Te=O[G+0+Ce]+O[G+12+Ce],Oe=O[G+4+Ce]+O[G+8+Ce],Le=O[G+4+Ce]-O[G+8+Ce],$e=O[G+0+Ce]-O[G+12+Ce];_e[0+Ce]=Te+Oe,_e[8+Ce]=Te-Oe,_e[4+Ce]=$e+Le,_e[12+Ce]=$e-Le}for(Ce=0;4>Ce;++Ce)Te=(O=_e[0+4*Ce]+3)+_e[3+4*Ce],Oe=_e[1+4*Ce]+_e[2+4*Ce],Le=_e[1+4*Ce]-_e[2+4*Ce],$e=O-_e[3+4*Ce],ne[he+0]=Te+Oe>>3,ne[he+16]=$e+Le>>3,ne[he+32]=Te-Oe>>3,ne[he+48]=$e-Le>>3,he+=64}function Xo(O,G,ne){var he,Ce=G-32,_e=Ci,Te=255-O[Ce-1];for(he=0;he<ne;++he){var Oe,Le=_e,$e=Te+O[G-1];for(Oe=0;Oe<ne;++Oe)O[G+Oe]=Le[$e+O[Ce+Oe]];G+=32}}function Ld(O,G){Xo(O,G,4)}function Mu(O,G){Xo(O,G,8)}function Uu(O,G){Xo(O,G,16)}function Ql(O,G){var ne;for(ne=0;16>ne;++ne)n(O,G+32*ne,O,G-32,16)}function zf(O,G){var ne;for(ne=16;0<ne;--ne)a(O,G,O[G-1],16),G+=32}function Wc(O,G,ne){var he;for(he=0;16>he;++he)a(G,ne+32*he,O,16)}function uc(O,G){var ne,he=16;for(ne=0;16>ne;++ne)he+=O[G-1+32*ne]+O[G+ne-32];Wc(he>>5,O,G)}function ba(O,G){var ne,he=8;for(ne=0;16>ne;++ne)he+=O[G-1+32*ne];Wc(he>>4,O,G)}function Xc(O,G){var ne,he=8;for(ne=0;16>ne;++ne)he+=O[G+ne-32];Wc(he>>4,O,G)}function dc(O,G){Wc(128,O,G)}function Fr(O,G,ne){return O+2*G+ne+2>>2}function fc(O,G){var ne,he=G-32;for(he=new Uint8Array([Fr(O[he-1],O[he+0],O[he+1]),Fr(O[he+0],O[he+1],O[he+2]),Fr(O[he+1],O[he+2],O[he+3]),Fr(O[he+2],O[he+3],O[he+4])]),ne=0;4>ne;++ne)n(O,G+32*ne,he,0,he.length)}function qA(O,G){var ne=O[G-1],he=O[G-1+32],Ce=O[G-1+64],_e=O[G-1+96];oe(O,G+0,16843009*Fr(O[G-1-32],ne,he)),oe(O,G+32,16843009*Fr(ne,he,Ce)),oe(O,G+64,16843009*Fr(he,Ce,_e)),oe(O,G+96,16843009*Fr(Ce,_e,_e))}function Zi(O,G){var ne,he=4;for(ne=0;4>ne;++ne)he+=O[G+ne-32]+O[G-1+32*ne];for(he>>=3,ne=0;4>ne;++ne)a(O,G+32*ne,he,4)}function Yo(O,G){var ne=O[G-1+0],he=O[G-1+32],Ce=O[G-1+64],_e=O[G-1-32],Te=O[G+0-32],Oe=O[G+1-32],Le=O[G+2-32],$e=O[G+3-32];O[G+0+96]=Fr(he,Ce,O[G-1+96]),O[G+1+96]=O[G+0+64]=Fr(ne,he,Ce),O[G+2+96]=O[G+1+64]=O[G+0+32]=Fr(_e,ne,he),O[G+3+96]=O[G+2+64]=O[G+1+32]=O[G+0+0]=Fr(Te,_e,ne),O[G+3+64]=O[G+2+32]=O[G+1+0]=Fr(Oe,Te,_e),O[G+3+32]=O[G+2+0]=Fr(Le,Oe,Te),O[G+3+0]=Fr($e,Le,Oe)}function jo(O,G){var ne=O[G+1-32],he=O[G+2-32],Ce=O[G+3-32],_e=O[G+4-32],Te=O[G+5-32],Oe=O[G+6-32],Le=O[G+7-32];O[G+0+0]=Fr(O[G+0-32],ne,he),O[G+1+0]=O[G+0+32]=Fr(ne,he,Ce),O[G+2+0]=O[G+1+32]=O[G+0+64]=Fr(he,Ce,_e),O[G+3+0]=O[G+2+32]=O[G+1+64]=O[G+0+96]=Fr(Ce,_e,Te),O[G+3+32]=O[G+2+64]=O[G+1+96]=Fr(_e,Te,Oe),O[G+3+64]=O[G+2+96]=Fr(Te,Oe,Le),O[G+3+96]=Fr(Oe,Le,Le)}function hc(O,G){var ne=O[G-1+0],he=O[G-1+32],Ce=O[G-1+64],_e=O[G-1-32],Te=O[G+0-32],Oe=O[G+1-32],Le=O[G+2-32],$e=O[G+3-32];O[G+0+0]=O[G+1+64]=_e+Te+1>>1,O[G+1+0]=O[G+2+64]=Te+Oe+1>>1,O[G+2+0]=O[G+3+64]=Oe+Le+1>>1,O[G+3+0]=Le+$e+1>>1,O[G+0+96]=Fr(Ce,he,ne),O[G+0+64]=Fr(he,ne,_e),O[G+0+32]=O[G+1+96]=Fr(ne,_e,Te),O[G+1+32]=O[G+2+96]=Fr(_e,Te,Oe),O[G+2+32]=O[G+3+96]=Fr(Te,Oe,Le),O[G+3+32]=Fr(Oe,Le,$e)}function Jo(O,G){var ne=O[G+0-32],he=O[G+1-32],Ce=O[G+2-32],_e=O[G+3-32],Te=O[G+4-32],Oe=O[G+5-32],Le=O[G+6-32],$e=O[G+7-32];O[G+0+0]=ne+he+1>>1,O[G+1+0]=O[G+0+64]=he+Ce+1>>1,O[G+2+0]=O[G+1+64]=Ce+_e+1>>1,O[G+3+0]=O[G+2+64]=_e+Te+1>>1,O[G+0+32]=Fr(ne,he,Ce),O[G+1+32]=O[G+0+96]=Fr(he,Ce,_e),O[G+2+32]=O[G+1+96]=Fr(Ce,_e,Te),O[G+3+32]=O[G+2+96]=Fr(_e,Te,Oe),O[G+3+64]=Fr(Te,Oe,Le),O[G+3+96]=Fr(Oe,Le,$e)}function Hu(O,G){var ne=O[G-1+0],he=O[G-1+32],Ce=O[G-1+64],_e=O[G-1+96];O[G+0+0]=ne+he+1>>1,O[G+2+0]=O[G+0+32]=he+Ce+1>>1,O[G+2+32]=O[G+0+64]=Ce+_e+1>>1,O[G+1+0]=Fr(ne,he,Ce),O[G+3+0]=O[G+1+32]=Fr(he,Ce,_e),O[G+3+32]=O[G+1+64]=Fr(Ce,_e,_e),O[G+3+64]=O[G+2+64]=O[G+0+96]=O[G+1+96]=O[G+2+96]=O[G+3+96]=_e}function Yc(O,G){var ne=O[G-1+0],he=O[G-1+32],Ce=O[G-1+64],_e=O[G-1+96],Te=O[G-1-32],Oe=O[G+0-32],Le=O[G+1-32],$e=O[G+2-32];O[G+0+0]=O[G+2+32]=ne+Te+1>>1,O[G+0+32]=O[G+2+64]=he+ne+1>>1,O[G+0+64]=O[G+2+96]=Ce+he+1>>1,O[G+0+96]=_e+Ce+1>>1,O[G+3+0]=Fr(Oe,Le,$e),O[G+2+0]=Fr(Te,Oe,Le),O[G+1+0]=O[G+3+32]=Fr(ne,Te,Oe),O[G+1+32]=O[G+3+64]=Fr(he,ne,Te),O[G+1+64]=O[G+3+96]=Fr(Ce,he,ne),O[G+1+96]=Fr(_e,Ce,he)}function f0(O,G){var ne;for(ne=0;8>ne;++ne)n(O,G+32*ne,O,G-32,8)}function Zo(O,G){var ne;for(ne=0;8>ne;++ne)a(O,G,O[G-1],8),G+=32}function eo(O,G,ne){var he;for(he=0;8>he;++he)a(G,ne+32*he,O,8)}function Ac(O,G){var ne,he=8;for(ne=0;8>ne;++ne)he+=O[G+ne-32]+O[G-1+32*ne];eo(he>>4,O,G)}function Bs(O,G){var ne,he=4;for(ne=0;8>ne;++ne)he+=O[G+ne-32];eo(he>>3,O,G)}function Nn(O,G){var ne,he=4;for(ne=0;8>ne;++ne)he+=O[G-1+32*ne];eo(he>>3,O,G)}function Qu(O,G){eo(128,O,G)}function mc(O,G,ne){var he=O[G-ne],Ce=O[G+0],_e=3*(Ce-he)+mv[1020+O[G-2*ne]-O[G+ne]],Te=y0[112+(_e+4>>3)];O[G-ne]=Ci[255+he+y0[112+(_e+3>>3)]],O[G+0]=Ci[255+Ce-Te]}function h0(O,G,ne,he){var Ce=O[G+0],_e=O[G+ne];return vc[255+O[G-2*ne]-O[G-ne]]>he||vc[255+_e-Ce]>he}function Md(O,G,ne,he){return 4*vc[255+O[G-ne]-O[G+0]]+vc[255+O[G-2*ne]-O[G+ne]]<=he}function Ud(O,G,ne,he,Ce){var _e=O[G-3*ne],Te=O[G-2*ne],Oe=O[G-ne],Le=O[G+0],$e=O[G+ne],nt=O[G+2*ne],pt=O[G+3*ne];return 4*vc[255+Oe-Le]+vc[255+Te-$e]>he?0:vc[255+O[G-4*ne]-_e]<=Ce&&vc[255+_e-Te]<=Ce&&vc[255+Te-Oe]<=Ce&&vc[255+pt-nt]<=Ce&&vc[255+nt-$e]<=Ce&&vc[255+$e-Le]<=Ce}function Vl(O,G,ne,he){var Ce=2*he+1;for(he=0;16>he;++he)Md(O,G+he,ne,Ce)&&mc(O,G+he,ne)}function to(O,G,ne,he){var Ce=2*he+1;for(he=0;16>he;++he)Md(O,G+he*ne,1,Ce)&&mc(O,G+he*ne,1)}function Is(O,G,ne,he){var Ce;for(Ce=3;0<Ce;--Ce)Vl(O,G+=4*ne,ne,he)}function KA(O,G,ne,he){var Ce;for(Ce=3;0<Ce;--Ce)to(O,G+=4,ne,he)}function Vu(O,G,ne,he,Ce,_e,Te,Oe){for(_e=2*_e+1;0<Ce--;){if(Ud(O,G,ne,_e,Te))if(h0(O,G,ne,Oe))mc(O,G,ne);else{var Le=O,$e=G,nt=ne,pt=Le[$e-2*nt],At=Le[$e-nt],ct=Le[$e+0],Lt=Le[$e+nt],Nt=Le[$e+2*nt],at=27*(Dt=mv[1020+3*(ct-At)+mv[1020+pt-Lt]])+63>>7,it=18*Dt+63>>7,Dt=9*Dt+63>>7;Le[$e-3*nt]=Ci[255+Le[$e-3*nt]+Dt],Le[$e-2*nt]=Ci[255+pt+it],Le[$e-nt]=Ci[255+At+at],Le[$e+0]=Ci[255+ct-at],Le[$e+nt]=Ci[255+Lt-it],Le[$e+2*nt]=Ci[255+Nt-Dt]}G+=he}}function Li(O,G,ne,he,Ce,_e,Te,Oe){for(_e=2*_e+1;0<Ce--;){if(Ud(O,G,ne,_e,Te))if(h0(O,G,ne,Oe))mc(O,G,ne);else{var Le=O,$e=G,nt=ne,pt=Le[$e-nt],At=Le[$e+0],ct=Le[$e+nt],Lt=y0[112+((Nt=3*(At-pt))+4>>3)],Nt=y0[112+(Nt+3>>3)],at=Lt+1>>1;Le[$e-2*nt]=Ci[255+Le[$e-2*nt]+at],Le[$e-nt]=Ci[255+pt+Nt],Le[$e+0]=Ci[255+At-Lt],Le[$e+nt]=Ci[255+ct-at]}G+=he}}function $u(O,G,ne,he,Ce,_e){Vu(O,G,ne,1,16,he,Ce,_e)}function Jc(O,G,ne,he,Ce,_e){Vu(O,G,1,ne,16,he,Ce,_e)}function Gf(O,G,ne,he,Ce,_e){var Te;for(Te=3;0<Te;--Te)Li(O,G+=4*ne,ne,1,16,he,Ce,_e)}function Hd(O,G,ne,he,Ce,_e){var Te;for(Te=3;0<Te;--Te)Li(O,G+=4,1,ne,16,he,Ce,_e)}function qf(O,G,ne,he,Ce,_e,Te,Oe){Vu(O,G,Ce,1,8,_e,Te,Oe),Vu(ne,he,Ce,1,8,_e,Te,Oe)}function A0(O,G,ne,he,Ce,_e,Te,Oe){Vu(O,G,1,Ce,8,_e,Te,Oe),Vu(ne,he,1,Ce,8,_e,Te,Oe)}function Qd(O,G,ne,he,Ce,_e,Te,Oe){Li(O,G+4*Ce,Ce,1,8,_e,Te,Oe),Li(ne,he+4*Ce,Ce,1,8,_e,Te,Oe)}function zu(O,G,ne,he,Ce,_e,Te,Oe){Li(O,G+4,1,Ce,8,_e,Te,Oe),Li(ne,he+4,1,Ce,8,_e,Te,Oe)}function Vd(){this.ba=new Xr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Dr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Kf(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function $d(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Gu(){this.ua=0,this.Wa=new ue,this.vb=new ue,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new H,this.yc=new S}function WA(){this.xb=this.a=0,this.l=new xs,this.ca=new Xr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new R,this.Pb=0,this.wd=new R,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Gu,this.ab=0,this.gc=o(4,$d),this.Oc=0}function Zc(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new xs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function qu(O,G,ne,he,Ce,_e,Te){for(O=O==null?0:O[G+0],G=0;G<Te;++G)Ce[_e+G]=O+ne[he+G]&255,O=Ce[_e+G]}function zd(O,G,ne,he,Ce,_e,Te){var Oe;if(O==null)qu(null,null,ne,he,Ce,_e,Te);else for(Oe=0;Oe<Te;++Oe)Ce[_e+Oe]=O[G+Oe]+ne[he+Oe]&255}function ro(O,G,ne,he,Ce,_e,Te){if(O==null)qu(null,null,ne,he,Ce,_e,Te);else{var Oe,Le=O[G+0],$e=Le,nt=Le;for(Oe=0;Oe<Te;++Oe)$e=nt+(Le=O[G+Oe])-$e,nt=ne[he+Oe]+(-256&$e?0>$e?0:255:$e)&255,$e=Le,Ce[_e+Oe]=nt}}function Wf(O,G,ne,he){var Ce=G.width,_e=G.o;if(t(O!=null&&G!=null),0>ne||0>=he||ne+he>_e)return null;if(!O.Cc){if(O.ga==null){var Te;if(O.ga=new Zc,(Te=O.ga==null)||(Te=G.width*G.o,t(O.Gb.length==0),O.Gb=s(Te),O.Uc=0,O.Gb==null?Te=0:(O.mb=O.Gb,O.nb=O.Uc,O.rc=null,Te=1),Te=!Te),!Te){Te=O.ga;var Oe=O.Fa,Le=O.P,$e=O.qc,nt=O.mb,pt=O.nb,At=Le+1,ct=$e-1,Lt=Te.l;if(t(Oe!=null&&nt!=null&&G!=null),Zu[0]=null,Zu[1]=qu,Zu[2]=zd,Zu[3]=ro,Te.ca=nt,Te.tb=pt,Te.c=G.width,Te.i=G.height,t(0<Te.c&&0<Te.i),1>=$e)G=0;else if(Te.$a=Oe[Le+0]>>0&3,Te.Z=Oe[Le+0]>>2&3,Te.Lc=Oe[Le+0]>>4&3,Le=Oe[Le+0]>>6&3,0>Te.$a||1<Te.$a||4<=Te.Z||1<Te.Lc||Le)G=0;else if(Lt.put=Gn,Lt.ac=aa,Lt.bc=is,Lt.ma=Te,Lt.width=G.width,Lt.height=G.height,Lt.Da=G.Da,Lt.v=G.v,Lt.va=G.va,Lt.j=G.j,Lt.o=G.o,Te.$a)e:{t(Te.$a==1),G=ze();t:for(;;){if(G==null){G=0;break e}if(t(Te!=null),Te.mc=G,G.c=Te.c,G.i=Te.i,G.l=Te.l,G.l.ma=Te,G.l.width=Te.c,G.l.height=Te.i,G.a=0,K(G.m,Oe,At,ct),!He(Te.c,Te.i,1,G,null)||(G.ab==1&&G.gc[0].hc==3&&Me(G.s)?(Te.ic=1,Oe=G.c*G.i,G.Ta=null,G.Ua=0,G.V=s(Oe),G.Ba=0,G.V==null?(G.a=1,G=0):G=1):(Te.ic=0,G=Ye(G,Te.c)),!G))break t;G=1;break e}Te.mc=null,G=0}else G=ct>=Te.c*Te.i;Te=!G}if(Te)return null;O.ga.Lc!=1?O.Ga=0:he=_e-ne}t(O.ga!=null),t(ne+he<=_e);e:{if(G=(Oe=O.ga).c,_e=Oe.l.o,Oe.$a==0){if(At=O.rc,ct=O.Vc,Lt=O.Fa,Le=O.P+1+ne*G,$e=O.mb,nt=O.nb+ne*G,t(Le<=O.P+O.qc),Oe.Z!=0)for(t(Zu[Oe.Z]!=null),Te=0;Te<he;++Te)Zu[Oe.Z](At,ct,Lt,Le,$e,nt,G),At=$e,ct=nt,nt+=G,Le+=G;else for(Te=0;Te<he;++Te)n($e,nt,Lt,Le,G),At=$e,ct=nt,nt+=G,Le+=G;O.rc=At,O.Vc=ct}else{if(t(Oe.mc!=null),G=ne+he,t((Te=Oe.mc)!=null),t(G<=Te.i),Te.C>=G)G=1;else if(Oe.ic||lt(),Oe.ic){Oe=Te.V,At=Te.Ba,ct=Te.c;var Nt=Te.i,at=(Lt=1,Le=Te.$/ct,$e=Te.$%ct,nt=Te.m,pt=Te.s,Te.$),it=ct*Nt,Dt=ct*G,Mt=pt.wc,Ft=at<Dt?sa(pt,$e,Le):null;t(at<=it),t(G<=Nt),t(Me(pt));t:for(;;){for(;!nt.h&&at<Dt;){if($e&Mt||(Ft=sa(pt,$e,Le)),t(Ft!=null),le(nt),256>(Nt=On(Ft.G[0],Ft.H[0],nt)))Oe[At+at]=Nt,++at,++$e>=ct&&($e=0,++Le<=G&&!(Le%16)&&Ne(Te,Le));else{if(!(280>Nt)){Lt=0;break t}Nt=wn(Nt-256,nt);var cr,er=On(Ft.G[4],Ft.H[4],nt);if(le(nt),!(at>=(er=cn(ct,er=wn(er,nt)))&&it-at>=Nt)){Lt=0;break t}for(cr=0;cr<Nt;++cr)Oe[At+at+cr]=Oe[At+at+cr-er];for(at+=Nt,$e+=Nt;$e>=ct;)$e-=ct,++Le<=G&&!(Le%16)&&Ne(Te,Le);at<Dt&&$e&Mt&&(Ft=sa(pt,$e,Le))}t(nt.h==W(nt))}Ne(Te,Le>G?G:Le);break t}!Lt||nt.h&&at<it?(Lt=0,Te.a=nt.h?5:3):Te.$=at,G=Lt}else G=ve(Te,Te.V,Te.Ba,Te.c,Te.i,G,rt);if(!G){he=0;break e}}ne+he>=_e&&(O.Cc=1),he=1}if(!he)return null;if(O.Cc&&((he=O.ga)!=null&&(he.mc=null),O.ga=null,0<O.Ga))return alert("todo:WebPDequantizeLevels"),null}return O.nb+ne*Ce}function te(O,G,ne,he,Ce,_e){for(;0<Ce--;){var Te,Oe=O,Le=G+(ne?1:0),$e=O,nt=G+(ne?0:3);for(Te=0;Te<he;++Te){var pt=$e[nt+4*Te];pt!=255&&(pt*=32897,Oe[Le+4*Te+0]=Oe[Le+4*Te+0]*pt>>23,Oe[Le+4*Te+1]=Oe[Le+4*Te+1]*pt>>23,Oe[Le+4*Te+2]=Oe[Le+4*Te+2]*pt>>23)}G+=_e}}function Ee(O,G,ne,he,Ce){for(;0<he--;){var _e;for(_e=0;_e<ne;++_e){var Te=O[G+2*_e+0],Oe=15&($e=O[G+2*_e+1]),Le=4369*Oe,$e=(240&$e|$e>>4)*Le>>16;O[G+2*_e+0]=(240&Te|Te>>4)*Le>>16&240|(15&Te|Te<<4)*Le>>16>>4&15,O[G+2*_e+1]=240&$e|Oe}G+=Ce}}function Ke(O,G,ne,he,Ce,_e,Te,Oe){var Le,$e,nt=255;for($e=0;$e<Ce;++$e){for(Le=0;Le<he;++Le){var pt=O[G+Le];_e[Te+4*Le]=pt,nt&=pt}G+=ne,Te+=Oe}return nt!=255}function tt(O,G,ne,he,Ce){var _e;for(_e=0;_e<Ce;++_e)ne[he+_e]=O[G+_e]>>8}function lt(){$l=te,xn=Ee,vn=Ke,Ba=tt}function kt(O,G,ne){k[O]=function(he,Ce,_e,Te,Oe,Le,$e,nt,pt,At,ct,Lt,Nt,at,it,Dt,Mt){var Ft,cr=Mt-1>>1,er=Oe[Le+0]|$e[nt+0]<<16,Er=pt[At+0]|ct[Lt+0]<<16;t(he!=null);var ar=3*er+Er+131074>>2;for(G(he[Ce+0],255&ar,ar>>16,Nt,at),_e!=null&&(ar=3*Er+er+131074>>2,G(_e[Te+0],255&ar,ar>>16,it,Dt)),Ft=1;Ft<=cr;++Ft){var Mn=Oe[Le+Ft]|$e[nt+Ft]<<16,Jn=pt[At+Ft]|ct[Lt+Ft]<<16,pn=er+Mn+Er+Jn+524296,dn=pn+2*(Mn+Er)>>3;ar=dn+er>>1,er=(pn=pn+2*(er+Jn)>>3)+Mn>>1,G(he[Ce+2*Ft-1],255&ar,ar>>16,Nt,at+(2*Ft-1)*ne),G(he[Ce+2*Ft-0],255&er,er>>16,Nt,at+(2*Ft-0)*ne),_e!=null&&(ar=pn+Er>>1,er=dn+Jn>>1,G(_e[Te+2*Ft-1],255&ar,ar>>16,it,Dt+(2*Ft-1)*ne),G(_e[Te+2*Ft+0],255&er,er>>16,it,Dt+(2*Ft+0)*ne)),er=Mn,Er=Jn}1&Mt||(ar=3*er+Er+131074>>2,G(he[Ce+Mt-1],255&ar,ar>>16,Nt,at+(Mt-1)*ne),_e!=null&&(ar=3*Er+er+131074>>2,G(_e[Te+Mt-1],255&ar,ar>>16,it,Dt+(Mt-1)*ne)))}}function zt(){Ei[no]=ef,Ei[em]=ed,Ei[Yu]=ch,Ei[sg]=xv,Ei[w0]=vv,Ei[Wd]=nm,Ei[pv]=bv,Ei[ig]=ed,Ei[oh]=xv,Ei[Xd]=vv,Ei[tm]=nm}function nr(O){return O&-16384?0>O?0:255:O>>vB}function F(O,G){return nr((19077*O>>8)+(26149*G>>8)-14234)}function se(O,G,ne){return nr((19077*O>>8)-(6419*G>>8)-(13320*ne>>8)+8708)}function pe(O,G){return nr((19077*O>>8)+(33050*G>>8)-17685)}function Pe(O,G,ne,he,Ce){he[Ce+0]=F(O,ne),he[Ce+1]=se(O,G,ne),he[Ce+2]=pe(O,G)}function ot(O,G,ne,he,Ce){he[Ce+0]=pe(O,G),he[Ce+1]=se(O,G,ne),he[Ce+2]=F(O,ne)}function gt(O,G,ne,he,Ce){var _e=se(O,G,ne);G=_e<<3&224|pe(O,G)>>3,he[Ce+0]=248&F(O,ne)|_e>>5,he[Ce+1]=G}function Gt(O,G,ne,he,Ce){var _e=240&pe(O,G)|15;he[Ce+0]=240&F(O,ne)|se(O,G,ne)>>4,he[Ce+1]=_e}function Rr(O,G,ne,he,Ce){he[Ce+0]=255,Pe(O,G,ne,he,Ce+1)}function Cn(O,G,ne,he,Ce){ot(O,G,ne,he,Ce),he[Ce+3]=255}function en(O,G,ne,he,Ce){Pe(O,G,ne,he,Ce),he[Ce+3]=255}function Yn(O,G){return 0>O?0:O>G?G:O}function ua(O,G,ne){k[O]=function(he,Ce,_e,Te,Oe,Le,$e,nt,pt){for(var At=nt+(-2&pt)*ne;nt!=At;)G(he[Ce+0],_e[Te+0],Oe[Le+0],$e,nt),G(he[Ce+1],_e[Te+0],Oe[Le+0],$e,nt+ne),Ce+=2,++Te,++Le,nt+=2*ne;1&pt&&G(he[Ce+0],_e[Te+0],Oe[Le+0],$e,nt)}}function pc(O,G,ne){return ne==0?O==0?G==0?6:5:G==0?4:0:ne}function vs(O,G,ne,he,Ce){switch(O>>>30){case 3:tu(G,ne,he,Ce,0);break;case 2:ls(G,ne,he,Ce);break;case 1:Ds(G,ne,he,Ce)}}function el(O,G){var ne,he,Ce=G.M,_e=G.Nb,Te=O.oc,Oe=O.pc+40,Le=O.oc,$e=O.pc+584,nt=O.oc,pt=O.pc+600;for(ne=0;16>ne;++ne)Te[Oe+32*ne-1]=129;for(ne=0;8>ne;++ne)Le[$e+32*ne-1]=129,nt[pt+32*ne-1]=129;for(0<Ce?Te[Oe-1-32]=Le[$e-1-32]=nt[pt-1-32]=129:(a(Te,Oe-32-1,127,21),a(Le,$e-32-1,127,9),a(nt,pt-32-1,127,9)),he=0;he<O.za;++he){var At=G.ya[G.aa+he];if(0<he){for(ne=-1;16>ne;++ne)n(Te,Oe+32*ne-4,Te,Oe+32*ne+12,4);for(ne=-1;8>ne;++ne)n(Le,$e+32*ne-4,Le,$e+32*ne+4,4),n(nt,pt+32*ne-4,nt,pt+32*ne+4,4)}var ct=O.Gd,Lt=O.Hd+he,Nt=At.ad,at=At.Hc;if(0<Ce&&(n(Te,Oe-32,ct[Lt].y,0,16),n(Le,$e-32,ct[Lt].f,0,8),n(nt,pt-32,ct[Lt].ea,0,8)),At.Za){var it=Te,Dt=Oe-32+16;for(0<Ce&&(he>=O.za-1?a(it,Dt,ct[Lt].y[15],4):n(it,Dt,ct[Lt+1].y,0,4)),ne=0;4>ne;ne++)it[Dt+128+ne]=it[Dt+256+ne]=it[Dt+384+ne]=it[Dt+0+ne];for(ne=0;16>ne;++ne,at<<=2)it=Te,Dt=Oe+j0[ne],So[At.Ob[ne]](it,Dt),vs(at,Nt,16*+ne,it,Dt)}else if(it=pc(he,Ce,At.Ob[0]),Zd[it](Te,Oe),at!=0)for(ne=0;16>ne;++ne,at<<=2)vs(at,Nt,16*+ne,Te,Oe+j0[ne]);for(ne=At.Gc,it=pc(he,Ce,At.Dd),Gl[it](Le,$e),Gl[it](nt,pt),at=Nt,it=Le,Dt=$e,255&(At=ne>>0)&&(170&At?ru(at,256,it,Dt):nl(at,256,it,Dt)),At=nt,at=pt,255&(ne>>=8)&&(170&ne?ru(Nt,320,At,at):nl(Nt,320,At,at)),Ce<O.Ub-1&&(n(ct[Lt].y,0,Te,Oe+480,16),n(ct[Lt].f,0,Le,$e+224,8),n(ct[Lt].ea,0,nt,pt+224,8)),ne=8*_e*O.B,ct=O.sa,Lt=O.ta+16*he+16*_e*O.R,Nt=O.qa,At=O.ra+8*he+ne,at=O.Ha,it=O.Ia+8*he+ne,ne=0;16>ne;++ne)n(ct,Lt+ne*O.R,Te,Oe+32*ne,16);for(ne=0;8>ne;++ne)n(Nt,At+ne*O.B,Le,$e+32*ne,8),n(at,it+ne*O.B,nt,pt+32*ne,8)}}function Ku(O,G,ne,he,Ce,_e,Te,Oe,Le){var $e=[0],nt=[0],pt=0,At=Le!=null?Le.kd:0,ct=Le??new Kf;if(O==null||12>ne)return 7;ct.data=O,ct.w=G,ct.ha=ne,G=[G],ne=[ne],ct.gb=[ct.gb];e:{var Lt=G,Nt=ne,at=ct.gb;if(t(O!=null),t(Nt!=null),t(at!=null),at[0]=0,12<=Nt[0]&&!r(O,Lt[0],"RIFF")){if(r(O,Lt[0]+8,"WEBP")){at=3;break e}var it=je(O,Lt[0]+4);if(12>it||4294967286<it){at=3;break e}if(At&&it>Nt[0]-8){at=7;break e}at[0]=it,Lt[0]+=12,Nt[0]-=12}at=0}if(at!=0)return at;for(it=0<ct.gb[0],ne=ne[0];;){e:{var Dt=O;Nt=G,at=ne;var Mt=$e,Ft=nt,cr=Lt=[0];if((ar=pt=[pt])[0]=0,8>at[0])at=7;else{if(!r(Dt,Nt[0],"VP8X")){if(je(Dt,Nt[0]+4)!=10){at=3;break e}if(18>at[0]){at=7;break e}var er=je(Dt,Nt[0]+8),Er=1+X(Dt,Nt[0]+12);if(2147483648<=Er*(Dt=1+X(Dt,Nt[0]+15))){at=3;break e}cr!=null&&(cr[0]=er),Mt!=null&&(Mt[0]=Er),Ft!=null&&(Ft[0]=Dt),Nt[0]+=18,at[0]-=18,ar[0]=1}at=0}}if(pt=pt[0],Lt=Lt[0],at!=0)return at;if(Nt=!!(2&Lt),!it&&pt)return 3;if(_e!=null&&(_e[0]=!!(16&Lt)),Te!=null&&(Te[0]=Nt),Oe!=null&&(Oe[0]=0),Te=$e[0],Lt=nt[0],pt&&Nt&&Le==null){at=0;break}if(4>ne){at=7;break}if(it&&pt||!it&&!pt&&!r(O,G[0],"ALPH")){ne=[ne],ct.na=[ct.na],ct.P=[ct.P],ct.Sa=[ct.Sa];e:{er=O,at=G,it=ne;var ar=ct.gb;Mt=ct.na,Ft=ct.P,cr=ct.Sa,Er=22,t(er!=null),t(it!=null),Dt=at[0];var Mn=it[0];for(t(Mt!=null),t(cr!=null),Mt[0]=null,Ft[0]=null,cr[0]=0;;){if(at[0]=Dt,it[0]=Mn,8>Mn){at=7;break e}var Jn=je(er,Dt+4);if(4294967286<Jn){at=3;break e}var pn=8+Jn+1&-2;if(Er+=pn,0<ar&&Er>ar){at=3;break e}if(!r(er,Dt,"VP8 ")||!r(er,Dt,"VP8L")){at=0;break e}if(Mn[0]<pn){at=7;break e}r(er,Dt,"ALPH")||(Mt[0]=er,Ft[0]=Dt+8,cr[0]=Jn),Dt+=pn,Mn-=pn}}if(ne=ne[0],ct.na=ct.na[0],ct.P=ct.P[0],ct.Sa=ct.Sa[0],at!=0)break}ne=[ne],ct.Ja=[ct.Ja],ct.xa=[ct.xa];e:if(ar=O,at=G,it=ne,Mt=ct.gb[0],Ft=ct.Ja,cr=ct.xa,er=at[0],Dt=!r(ar,er,"VP8 "),Er=!r(ar,er,"VP8L"),t(ar!=null),t(it!=null),t(Ft!=null),t(cr!=null),8>it[0])at=7;else{if(Dt||Er){if(ar=je(ar,er+4),12<=Mt&&ar>Mt-12){at=3;break e}if(At&&ar>it[0]-8){at=7;break e}Ft[0]=ar,at[0]+=8,it[0]-=8,cr[0]=Er}else cr[0]=5<=it[0]&&ar[er+0]==47&&!(ar[er+4]>>5),Ft[0]=it[0];at=0}if(ne=ne[0],ct.Ja=ct.Ja[0],ct.xa=ct.xa[0],G=G[0],at!=0)break;if(4294967286<ct.Ja)return 3;if(Oe==null||Nt||(Oe[0]=ct.xa?2:1),Te=[Te],Lt=[Lt],ct.xa){if(5>ne){at=7;break}Oe=Te,At=Lt,Nt=_e,O==null||5>ne?O=0:5<=ne&&O[G+0]==47&&!(O[G+4]>>5)?(it=[0],ar=[0],Mt=[0],K(Ft=new R,O,G,ne),rr(Ft,it,ar,Mt)?(Oe!=null&&(Oe[0]=it[0]),At!=null&&(At[0]=ar[0]),Nt!=null&&(Nt[0]=Mt[0]),O=1):O=0):O=0}else{if(10>ne){at=7;break}Oe=Lt,O==null||10>ne||!Rn(O,G+3,ne-3)?O=0:(At=O[G+0]|O[G+1]<<8|O[G+2]<<16,Nt=16383&(O[G+7]<<8|O[G+6]),O=16383&(O[G+9]<<8|O[G+8]),1&At||3<(At>>1&7)||!(At>>4&1)||At>>5>=ct.Ja||!Nt||!O?O=0:(Te&&(Te[0]=Nt),Oe&&(Oe[0]=O),O=1))}if(!O||(Te=Te[0],Lt=Lt[0],pt&&($e[0]!=Te||nt[0]!=Lt)))return 3;Le!=null&&(Le[0]=ct,Le.offset=G-Le.w,t(4294967286>G-Le.w),t(Le.offset==Le.ha-ne));break}return at==0||at==7&&pt&&Le==null?(_e!=null&&(_e[0]|=ct.na!=null&&0<ct.na.length),he!=null&&(he[0]=Te),Ce!=null&&(Ce[0]=Lt),0):at}function Xf(O,G,ne){var he=G.width,Ce=G.height,_e=0,Te=0,Oe=he,Le=Ce;if(G.Da=O!=null&&0<O.Da,G.Da&&(Oe=O.cd,Le=O.bd,_e=O.v,Te=O.j,11>ne||(_e&=-2,Te&=-2),0>_e||0>Te||0>=Oe||0>=Le||_e+Oe>he||Te+Le>Ce))return 0;if(G.v=_e,G.j=Te,G.va=_e+Oe,G.o=Te+Le,G.U=Oe,G.T=Le,G.da=O!=null&&0<O.da,G.da){if(!we(Oe,Le,ne=[O.ib],_e=[O.hb]))return 0;G.ib=ne[0],G.hb=_e[0]}return G.ob=O!=null&&O.ob,G.Kb=O==null||!O.Sd,G.da&&(G.ob=G.ib<3*he/4&&G.hb<3*Ce/4,G.Kb=0),1}function XA(O){if(O==null)return 2;if(11>O.S){var G=O.f.RGBA;G.fb+=(O.height-1)*G.A,G.A=-G.A}else G=O.f.kb,O=O.height,G.O+=(O-1)*G.fa,G.fa=-G.fa,G.N+=(O-1>>1)*G.Ab,G.Ab=-G.Ab,G.W+=(O-1>>1)*G.Db,G.Db=-G.Db,G.F!=null&&(G.J+=(O-1)*G.lb,G.lb=-G.lb);return 0}function m0(O,G,ne,he){if(he==null||0>=O||0>=G)return 2;if(ne!=null){if(ne.Da){var Ce=ne.cd,_e=ne.bd,Te=-2&ne.v,Oe=-2&ne.j;if(0>Te||0>Oe||0>=Ce||0>=_e||Te+Ce>O||Oe+_e>G)return 2;O=Ce,G=_e}if(ne.da){if(!we(O,G,Ce=[ne.ib],_e=[ne.hb]))return 2;O=Ce[0],G=_e[0]}}he.width=O,he.height=G;e:{var Le=he.width,$e=he.height;if(O=he.S,0>=Le||0>=$e||!(O>=no&&13>O))O=2;else{if(0>=he.Rd&&he.sd==null){Te=_e=Ce=G=0;var nt=(Oe=Le*UE[O])*$e;if(11>O||(_e=($e+1)/2*(G=(Le+1)/2),O==12&&(Te=(Ce=Le)*$e)),($e=s(nt+2*_e+Te))==null){O=1;break e}he.sd=$e,11>O?((Le=he.f.RGBA).eb=$e,Le.fb=0,Le.A=Oe,Le.size=nt):((Le=he.f.kb).y=$e,Le.O=0,Le.fa=Oe,Le.Fd=nt,Le.f=$e,Le.N=0+nt,Le.Ab=G,Le.Cd=_e,Le.ea=$e,Le.W=0+nt+_e,Le.Db=G,Le.Ed=_e,O==12&&(Le.F=$e,Le.J=0+nt+2*_e),Le.Tc=Te,Le.lb=Ce)}if(G=1,Ce=he.S,_e=he.width,Te=he.height,Ce>=no&&13>Ce)if(11>Ce)O=he.f.RGBA,G&=(Oe=Math.abs(O.A))*(Te-1)+_e<=O.size,G&=Oe>=_e*UE[Ce],G&=O.eb!=null;else{O=he.f.kb,Oe=(_e+1)/2,nt=(Te+1)/2,Le=Math.abs(O.fa),$e=Math.abs(O.Ab);var pt=Math.abs(O.Db),At=Math.abs(O.lb),ct=At*(Te-1)+_e;G&=Le*(Te-1)+_e<=O.Fd,G&=$e*(nt-1)+Oe<=O.Cd,G=(G&=pt*(nt-1)+Oe<=O.Ed)&Le>=_e&$e>=Oe&pt>=Oe,G&=O.y!=null,G&=O.f!=null,G&=O.ea!=null,Ce==12&&(G&=At>=_e,G&=ct<=O.Tc,G&=O.F!=null)}else G=0;O=G?0:2}}return O!=0||ne!=null&&ne.fd&&(O=XA(he)),O}var ei=64,Yf=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],p0=24,g0=32,YA=8,tl=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ae("Predictor0","PredictorAdd0"),k.Predictor0=function(){return 4278190080},k.Predictor1=function(O){return O},k.Predictor2=function(O,G,ne){return G[ne+0]},k.Predictor3=function(O,G,ne){return G[ne+1]},k.Predictor4=function(O,G,ne){return G[ne-1]},k.Predictor5=function(O,G,ne){return ge(ge(O,G[ne+1]),G[ne+0])},k.Predictor6=function(O,G,ne){return ge(O,G[ne-1])},k.Predictor7=function(O,G,ne){return ge(O,G[ne+0])},k.Predictor8=function(O,G,ne){return ge(G[ne-1],G[ne+0])},k.Predictor9=function(O,G,ne){return ge(G[ne+0],G[ne+1])},k.Predictor10=function(O,G,ne){return ge(ge(O,G[ne-1]),ge(G[ne+0],G[ne+1]))},k.Predictor11=function(O,G,ne){var he=G[ne+0];return 0>=qe(he>>24&255,O>>24&255,(G=G[ne-1])>>24&255)+qe(he>>16&255,O>>16&255,G>>16&255)+qe(he>>8&255,O>>8&255,G>>8&255)+qe(255&he,255&O,255&G)?he:O},k.Predictor12=function(O,G,ne){var he=G[ne+0];return(xe((O>>24&255)+(he>>24&255)-((G=G[ne-1])>>24&255))<<24|xe((O>>16&255)+(he>>16&255)-(G>>16&255))<<16|xe((O>>8&255)+(he>>8&255)-(G>>8&255))<<8|xe((255&O)+(255&he)-(255&G)))>>>0},k.Predictor13=function(O,G,ne){var he=G[ne-1];return(Ue((O=ge(O,G[ne+0]))>>24&255,he>>24&255)<<24|Ue(O>>16&255,he>>16&255)<<16|Ue(O>>8&255,he>>8&255)<<8|Ue(O>>0&255,he>>0&255))>>>0};var Ky=k.PredictorAdd0;k.PredictorAdd1=Ze,ae("Predictor2","PredictorAdd2"),ae("Predictor3","PredictorAdd3"),ae("Predictor4","PredictorAdd4"),ae("Predictor5","PredictorAdd5"),ae("Predictor6","PredictorAdd6"),ae("Predictor7","PredictorAdd7"),ae("Predictor8","PredictorAdd8"),ae("Predictor9","PredictorAdd9"),ae("Predictor10","PredictorAdd10"),ae("Predictor11","PredictorAdd11"),ae("Predictor12","PredictorAdd12"),ae("Predictor13","PredictorAdd13");var ng=k.PredictorAdd2;Xe("ColorIndexInverseTransform","MapARGB","32b",function(O){return O>>8&255},function(O){return O}),Xe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(O){return O},function(O){return O>>8&255});var Av,gc=k.ColorIndexInverseTransform,Ni=k.MapARGB,Jf=k.VP8LColorIndexInverseTransformAlpha,ag=k.MapAlpha,Gd=k.VP8LPredictorsAdd=[];Gd.length=16,(k.VP8LPredictors=[]).length=16,(k.VP8LPredictorsAdd_C=[]).length=16,(k.VP8LPredictors_C=[]).length=16;var Zf,ko,Mi,eh,rl,eu,Wu,tu,ls,ru,Ds,nl,x0,Xu,JA,th,rh,nh,v0,ZA,ah,qd,b0,cs,$l,xn,vn,Ba,bs=s(511),xc=s(2041),sh=s(225),ih=s(767),Kd=0,mv=xc,y0=sh,Ci=ih,vc=bs,no=0,em=1,Yu=2,sg=3,w0=4,Wd=5,pv=6,ig=7,oh=8,Xd=9,tm=10,gv=[2,3,7],bc=[3,3,11],zl=[280,256,256,256,40],N0=[0,1,1,1,0],Yd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Jd=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],C0=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],PE=8,og=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],lg=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ti=null,us=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],qn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],lh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ju=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Wy=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],E0=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],FE=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Zd=[],So=[],Gl=[],RE=1,rm=2,Zu=[],Ei=[];kt("UpsampleRgbLinePair",Pe,3),kt("UpsampleBgrLinePair",ot,3),kt("UpsampleRgbaLinePair",en,4),kt("UpsampleBgraLinePair",Cn,4),kt("UpsampleArgbLinePair",Rr,4),kt("UpsampleRgba4444LinePair",Gt,2),kt("UpsampleRgb565LinePair",gt,2);var ef=k.UpsampleRgbLinePair,ch=k.UpsampleBgrLinePair,ed=k.UpsampleRgbaLinePair,xv=k.UpsampleBgraLinePair,vv=k.UpsampleArgbLinePair,nm=k.UpsampleRgba4444LinePair,bv=k.UpsampleRgb565LinePair,td=16,ri=1<<td-1,uh=-227,yv=482,vB=6,LE=0,bB=s(256),ni=s(256),Xy=s(256),cg=s(256),ug=s(yv-uh),Yy=s(yv-uh);ua("YuvToRgbRow",Pe,3),ua("YuvToBgrRow",ot,3),ua("YuvToRgbaRow",en,4),ua("YuvToBgraRow",Cn,4),ua("YuvToArgbRow",Rr,4),ua("YuvToRgba4444Row",Gt,2),ua("YuvToRgb565Row",gt,2);var j0=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],tf=[0,2,8],yB=[8,7,6,4,4,2,2,2,1,1,1,1],ME=1;this.WebPDecodeRGBA=function(O,G,ne,he,Ce){var _e=em,Te=new Vd,Oe=new Xr;Te.ba=Oe,Oe.S=_e,Oe.width=[Oe.width],Oe.height=[Oe.height];var Le=Oe.width,$e=Oe.height,nt=new hr;if(nt==null||O==null)var pt=2;else t(nt!=null),pt=Ku(O,G,ne,nt.width,nt.height,nt.Pd,nt.Qd,nt.format,null);if(pt!=0?Le=0:(Le!=null&&(Le[0]=nt.width[0]),$e!=null&&($e[0]=nt.height[0]),Le=1),Le){Oe.width=Oe.width[0],Oe.height=Oe.height[0],he!=null&&(he[0]=Oe.width),Ce!=null&&(Ce[0]=Oe.height);e:{if(he=new xs,(Ce=new Kf).data=O,Ce.w=G,Ce.ha=ne,Ce.kd=1,G=[0],t(Ce!=null),((O=Ku(Ce.data,Ce.w,Ce.ha,null,null,null,G,null,Ce))==0||O==7)&&G[0]&&(O=4),(G=O)==0){if(t(Te!=null),he.data=Ce.data,he.w=Ce.w+Ce.offset,he.ha=Ce.ha-Ce.offset,he.put=Gn,he.ac=aa,he.bc=is,he.ma=Te,Ce.xa){if((O=ze())==null){Te=1;break e}if(function(At,ct){var Lt=[0],Nt=[0],at=[0];t:for(;;){if(At==null)return 0;if(ct==null)return At.a=2,0;if(At.l=ct,At.a=0,K(At.m,ct.data,ct.w,ct.ha),!rr(At.m,Lt,Nt,at)){At.a=3;break t}if(At.xb=rm,ct.width=Lt[0],ct.height=Nt[0],!He(Lt[0],Nt[0],1,At,null))break t;return 1}return t(At.a!=0),0}(O,he)){if(he=(G=m0(he.width,he.height,Te.Oa,Te.ba))==0){t:{he=O;r:for(;;){if(he==null){he=0;break t}if(t(he.s.yc!=null),t(he.s.Ya!=null),t(0<he.s.Wb),t((ne=he.l)!=null),t((Ce=ne.ma)!=null),he.xb!=0){if(he.ca=Ce.ba,he.tb=Ce.tb,t(he.ca!=null),!Xf(Ce.Oa,ne,sg)){he.a=2;break r}if(!Ye(he,ne.width)||ne.da)break r;if((ne.da||Ut(he.ca.S))&&lt(),11>he.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),he.ca.f.kb.F!=null&&lt()),he.Pb&&0<he.s.ua&&he.s.vb.X==null&&!De(he.s.vb,he.s.Wa.Xa)){he.a=1;break r}he.xb=0}if(!ve(he,he.V,he.Ba,he.c,he.i,ne.o,Ge))break r;Ce.Dc=he.Ma,he=1;break t}t(he.a!=0),he=0}he=!he}he&&(G=O.a)}else G=O.a}else{if((O=new Tr)==null){Te=1;break e}if(O.Fa=Ce.na,O.P=Ce.P,O.qc=Ce.Sa,Ji(O,he)){if((G=m0(he.width,he.height,Te.Oa,Te.ba))==0){if(O.Aa=0,ne=Te.Oa,t((Ce=O)!=null),ne!=null){if(0<(Le=0>(Le=ne.Md)?0:100<Le?255:255*Le/100)){for($e=nt=0;4>$e;++$e)12>(pt=Ce.pb[$e]).lc&&(pt.ia=Le*yB[0>pt.lc?0:pt.lc]>>3),nt|=pt.ia;nt&&(alert("todo:VP8InitRandom"),Ce.ia=1)}Ce.Ga=ne.Id,100<Ce.Ga?Ce.Ga=100:0>Ce.Ga&&(Ce.Ga=0)}Rd(O,he)||(G=O.a)}}else G=O.a}G==0&&Te.Oa!=null&&Te.Oa.fd&&(G=XA(Te.ba))}Te=G}_e=Te!=0?null:11>_e?Oe.f.RGBA.eb:Oe.f.kb.y}else _e=null;return _e};var UE=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(k,B){for(var M="",P=0;P<4;P++)M+=String.fromCharCode(k[B++]);return M}function d(k,B){return(k[B+0]<<0|k[B+1]<<8|k[B+2]<<16)>>>0}function f(k,B){return(k[B+0]<<0|k[B+1]<<8|k[B+2]<<16|k[B+3]<<24)>>>0}new c;var A=[0],m=[0],g=[],x=new c,v=e,y=function(k,B){var M={},P=0,S=!1,L=0,H=0;if(M.frames=[],!function(D,W,J,le){for(var ie=0;ie<le;ie++)if(D[W+ie]!=J.charCodeAt(ie))return!0;return!1}(k,B,"RIFF",4)){var q,Q;for(f(k,B+=4),B+=8;B<k.length;){var z=u(k,B),K=f(k,B+=4);B+=4;var Z=K+(1&K);switch(z){case"VP8 ":case"VP8L":M.frames[P]===void 0&&(M.frames[P]={}),(R=M.frames[P]).src_off=S?H:B-8,R.src_size=L+K+8,P++,S&&(S=!1,L=0,H=0);break;case"VP8X":(R=M.header={}).feature_flags=k[B];var U=B+4;R.canvas_width=1+d(k,U),U+=3,R.canvas_height=1+d(k,U),U+=3;break;case"ALPH":S=!0,L=Z+8,H=B-8;break;case"ANIM":(R=M.header).bgcolor=f(k,B),U=B+4,R.loop_count=(q=k)[(Q=U)+0]<<0|q[Q+1]<<8,U+=2;break;case"ANMF":var Y,R;(R=M.frames[P]={}).offset_x=2*d(k,B),B+=3,R.offset_y=2*d(k,B),B+=3,R.width=1+d(k,B),B+=3,R.height=1+d(k,B),B+=3,R.duration=d(k,B),B+=3,Y=k[B++],R.dispose=1&Y,R.blend=Y>>1&1}z!="ANMF"&&(B+=Z)}return M}}(v,0);y.response=v,y.rgbaoutput=!0,y.dataurl=!1;var N=y.header?y.header:null,C=y.frames?y.frames:null;if(N){N.loop_counter=N.loop_count,A=[N.canvas_height],m=[N.canvas_width];for(var _=0;_<C.length&&C[_].blend!=0;_++);}var j=C[0],I=x.WebPDecodeRGBA(v,j.src_off,j.src_size,m,A);j.rgba=I,j.imgwidth=m[0],j.imgheight=A[0];for(var T=0;T<m[0]*A[0]*4;T++)g[T]=I[T];return this.width=m,this.height=A,this.data=g,this}(function(e){var t=function(){return typeof QR=="function"},r=function(A,m,g,x){var v=4,y=o;switch(x){case e.image_compression.FAST:v=1,y=s;break;case e.image_compression.MEDIUM:v=6,y=l;break;case e.image_compression.SLOW:v=9,y=c}A=n(A,m,g,y);var N=QR(A,{level:v});return e.__addimage__.arrayBufferToBinaryString(N)},n=function(A,m,g,x){for(var v,y,N,C=A.length/m,_=new Uint8Array(A.length+C),j=d(),I=0;I<C;I+=1){if(N=I*m,v=A.subarray(N,N+m),x)_.set(x(v,g,y),N+I);else{for(var T,k=j.length,B=[];T<k;T+=1)B[T]=j[T](v,g,y);var M=f(B.concat());_.set(B[M],N+I)}y=v}return _},a=function(A){var m=Array.apply([],A);return m.unshift(0),m},s=function(A,m){var g,x=[],v=A.length;x[0]=1;for(var y=0;y<v;y+=1)g=A[y-m]||0,x[y+1]=A[y]-g+256&255;return x},o=function(A,m,g){var x,v=[],y=A.length;v[0]=2;for(var N=0;N<y;N+=1)x=g&&g[N]||0,v[N+1]=A[N]-x+256&255;return v},l=function(A,m,g){var x,v,y=[],N=A.length;y[0]=3;for(var C=0;C<N;C+=1)x=A[C-m]||0,v=g&&g[C]||0,y[C+1]=A[C]+256-(x+v>>>1)&255;return y},c=function(A,m,g){var x,v,y,N,C=[],_=A.length;C[0]=4;for(var j=0;j<_;j+=1)x=A[j-m]||0,v=g&&g[j]||0,y=g&&g[j-m]||0,N=u(x,v,y),C[j+1]=A[j]-N+256&255;return C},u=function(A,m,g){if(A===m&&m===g)return A;var x=Math.abs(m-g),v=Math.abs(A-g),y=Math.abs(A+m-g-g);return x<=v&&x<=y?A:v<=y?m:g},d=function(){return[a,s,o,l,c]},f=function(A){var m=A.map(function(g){return g.reduce(function(x,v){return x+Math.abs(v)},0)});return m.indexOf(Math.min.apply(null,m))};e.processPNG=function(A,m,g,x){var v,y,N,C,_,j,I,T,k,B,M,P,S,L,H,q=this.decode.FLATE_DECODE,Q="";if(this.__addimage__.isArrayBuffer(A)&&(A=new Uint8Array(A)),this.__addimage__.isArrayBufferView(A)){if(A=(N=new eit(A)).imgData,y=N.bits,v=N.colorSpace,_=N.colors,[4,6].indexOf(N.colorType)!==-1){if(N.bits===8){k=(T=N.pixelBitlength==32?new Uint32Array(N.decodePixels().buffer):N.pixelBitlength==16?new Uint16Array(N.decodePixels().buffer):new Uint8Array(N.decodePixels().buffer)).length,M=new Uint8Array(k*N.colors),B=new Uint8Array(k);var z,K=N.pixelBitlength-N.bits;for(L=0,H=0;L<k;L++){for(S=T[L],z=0;z<K;)M[H++]=S>>>z&255,z+=N.bits;B[L]=S>>>z&255}}if(N.bits===16){k=(T=new Uint32Array(N.decodePixels().buffer)).length,M=new Uint8Array(k*(32/N.pixelBitlength)*N.colors),B=new Uint8Array(k*(32/N.pixelBitlength)),P=N.colors>1,L=0,H=0;for(var Z=0;L<k;)S=T[L++],M[H++]=S>>>0&255,P&&(M[H++]=S>>>16&255,S=T[L++],M[H++]=S>>>0&255),B[Z++]=S>>>16&255;y=8}x!==e.image_compression.NONE&&t()?(A=r(M,N.width*N.colors,N.colors,x),I=r(B,N.width,1,x)):(A=M,I=B,q=void 0)}if(N.colorType===3&&(v=this.color_spaces.INDEXED,j=N.palette,N.transparency.indexed)){var U=N.transparency.indexed,Y=0;for(L=0,k=U.length;L<k;++L)Y+=U[L];if((Y/=255)===k-1&&U.indexOf(0)!==-1)C=[U.indexOf(0)];else if(Y!==k){for(T=N.decodePixels(),B=new Uint8Array(T.length),L=0,k=T.length;L<k;L++)B[L]=U[T[L]];I=r(B,N.width,1)}}var R=function(D){var W;switch(D){case e.image_compression.FAST:W=11;break;case e.image_compression.MEDIUM:W=13;break;case e.image_compression.SLOW:W=14;break;default:W=12}return W}(x);return q===this.decode.FLATE_DECODE&&(Q="/Predictor "+R+" "),Q+="/Colors "+_+" /BitsPerComponent "+y+" /Columns "+N.width,(this.__addimage__.isArrayBuffer(A)||this.__addimage__.isArrayBufferView(A))&&(A=this.__addimage__.arrayBufferToBinaryString(A)),(I&&this.__addimage__.isArrayBuffer(I)||this.__addimage__.isArrayBufferView(I))&&(I=this.__addimage__.arrayBufferToBinaryString(I)),{alias:g,data:A,index:m,filter:q,decodeParameters:Q,transparency:C,palette:j,sMask:I,predictor:R,width:N.width,height:N.height,bitsPerComponent:y,colorSpace:v}}}})(wr.API),function(e){e.processGIF89A=function(t,r,n,a){var s=new tit(t),o=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},d=new bO(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(wr.API),df.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},df.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Ma.log("bit decode error:"+r)}},df.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},df.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},df.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},df.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,l=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=u}this.pos+=e}},df.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/t*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=e}},df.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},df.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},df.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var s=new df(t,!1),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new bO(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(wr.API),nZ.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var s=new nZ(t),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new bO(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(wr.API),wr.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,s=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],A=n[u+2],m=n[u+3];s[l++]=d,s[l++]=f,s[l++]=A,o[c++]=m}var g=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},wr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Jv=wr.API,Sk=Jv.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,A=0,m=e.length,g=0,x=l[0]||c,v=[];for(r=0;r<m;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?v.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/s)||0)/1e3):(A=f&&Ta(u[n])==="object"&&!isNaN(parseInt(u[n][g],10))?u[n][g]/d:0,v.push((l[n]||x)/c+A)),g=n;return v},ZJ=Jv.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return Jv.processArabic&&(e=Jv.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:Sk.apply(this,arguments).reduce(function(s,o){return s+o},0)},eZ=function(e,t,r,n){for(var a=[],s=0,o=e.length,l=0;s!==o&&l+t[s]<r;)l+=t[s],s++;a.push(e.slice(0,s));var c=s;for(l=0;s!==o;)l+t[s]>n&&(a.push(e.slice(c,s)),l=0,c=s),l+=t[s],s++;return c!==s&&a.push(e.slice(c,s)),a},tZ=function(e,t,r){r||(r={});var n,a,s,o,l,c,u,d=[],f=[d],A=r.textIndent||0,m=0,g=0,x=e.split(" "),v=Sk.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?x[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),N=[];x.map(function(_){(_=_.split(/\s*\n/)).length>1?N=N.concat(_.map(function(j,I){return(I&&j.length?`
`:"")+j})):N.push(_[0])}),x=N,c=ZJ.apply(this,[y,r])}for(s=0,o=x.length;s<o;s++){var C=0;if(n=x[s],c&&n[0]==`
`&&(n=n.substr(1),C=1),A+m+(g=(a=Sk.apply(this,[n,r])).reduce(function(_,j){return _+j},0))>t||C){if(g>t){for(l=eZ.apply(this,[n,a,t-(A+m),t]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);g=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(_,j){return _+j},0)}else d=[n];f.push(d),A=g+c,m=v}else d.push(n),A+=m+g,m=v}return u=c?function(_,j){return(j?y:"")+_.join(" ")}:function(_){return _.join(" ")},f.map(u)},Jv.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(tZ.apply(this,[n[l],o,s]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var s=function(f){return"0x"+parseInt(f,10).toString(16)},o=e.__fontmetrics__.compress=function(f){var A,m,g,x,v=["{"];for(var y in f){if(A=f[y],isNaN(parseInt(y,10))?m="'"+y+"'":(y=parseInt(y,10),m=(m=s(y).slice(2)).slice(0,-1)+n[m.slice(-1)]),typeof A=="number")A<0?(g=s(A).slice(3),x="-"):(g=s(A).slice(2),x=""),g=x+g.slice(0,-1)+n[g.slice(-1)];else{if(Ta(A)!=="object")throw new Error("Don't know what to do with value type "+Ta(A)+".");g=o(A)}v.push(m+g)}return v.push("}"),v.join("")},l=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var A,m,g,x,v={},y=1,N=v,C=[],_="",j="",I=f.length-1,T=1;T<I;T+=1)(x=f[T])=="'"?A?(g=A.join(""),A=void 0):A=[]:A?A.push(x):x=="{"?(C.push([N,g]),N={},g=void 0):x=="}"?((m=C.pop())[0][m[1]]=N,g=void 0,N=m[0]):x=="-"?y=-1:g===void 0?r.hasOwnProperty(x)?(_+=r[x],g=parseInt(_,16)*y,y=1,_=""):_+=x:r.hasOwnProperty(x)?(j+=r[x],N[g]=parseInt(j,16)*y,y=1,g=void 0,j=""):j+=x;return v},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var A=f.font,m=d.Unicode[A.postScriptName];m&&(A.metadata.Unicode={},A.metadata.Unicode.widths=m.widths,A.metadata.Unicode.kerning=m.kerning);var g=u.Unicode[A.postScriptName];g&&(A.metadata.Unicode.encoding=g,A.encoding=g.codePages[0])}])}(wr.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(lN(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}(wr),function(e){function t(){return($r.canvg?Promise.resolve($r.canvg):Ss(()=>import("./index.es-qUqsk2I3.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}wr.API.addSvgAsImage=function(r,n,a,s,o,l,c,u){if(isNaN(n)||isNaN(a))throw Ma.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Ma.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=o;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var A={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then(function(g){return g.fromString(f,r,A)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(A)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),n,a,s,o,c,u)})}}(),wr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},wr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,f=0;function A(g,x){var v,y=!1;for(v=0;v<g.length;v+=1)g[v]===x&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(f=0;f<m;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(Ta(e)==="object"){for(a in e)if(s=e[a],A(l,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&A(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,x=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?x.push("/"+g+" /"+r[g].value):x.push("/"+g+" "+r[g].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(wr.API),function(e){var t=e.API,r=t.pdfEscape16=function(s,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,A=s.length;f<A;++f){if(l=o.metadata.characterToGlyph(s.charCodeAt(f)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=s.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(s){var o,l,c,u,d,f,A;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,A=(l=Object.keys(s).sort(function(m,g){return m-g})).length;f<A;f++)o=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,A=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",g=0;g<A.length;g++)m+=String.fromCharCode(A[g]);var x=u();d({data:m,addLength1:!0,objectId:x}),c("endobj");var v=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var y=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Eb(l.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var N=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Eb(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+v+" 0 R"),c("/BaseFont /"+Eb(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+N+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,A="",m=0;m<f.length;m++)A+=String.fromCharCode(f[m]);var g=u();d({data:A,addLength1:!0,objectId:g}),c("endobj");var x=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var v=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+g+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Eb(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+Eb(l.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var a=function(s){var o,l=s.text||"",c=s.x,u=s.y,d=s.options||{},f=s.mutex||{},A=f.pdfEscape,m=f.activeFontKey,g=f.fonts,x=m,v="",y=0,N="",C=g[x].encoding;if(g[x].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(N=l,x=m,Array.isArray(l)&&(N=l[0]),y=0;y<N.length;y+=1)g[x].metadata.hasOwnProperty("cmap")&&(o=g[x].metadata.cmap.unicode.codeMap[N[y].charCodeAt(0)]),o||N[y].charCodeAt(0)<256&&g[x].metadata.hasOwnProperty("Unicode")?v+=N[y]:v+="";var _="";return parseInt(x.slice(1))<14||C==="WinAnsiEncoding"?_=A(v,x).split("").map(function(j){return j.charCodeAt(0).toString(16)}).join(""):C==="Identity-H"&&(_=r(v,g[x])),f.isHex=!0,{text:_,x:c,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(s){var o=s.text||"",l=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([a(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(a(Object.assign({},c,{text:o[u]})).text);s.text=l}else s.text=a(Object.assign({},c,{text:o})).text}])}(wr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(wr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,s,o,l,c,u,d,f=t,A=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),N=!1,C=0;this.__bidiEngine__={};var _=function(P){var S=P.charCodeAt(),L=S>>8,H=x[L];return H!==void 0?f[256*H+(255&S)]:L===252||L===253?"AL":y.test(L)?"L":L===8?"R":"N"},j=function(P){for(var S,L=0;L<P.length;L++){if((S=_(P.charAt(L)))==="L")return!1;if(S==="R")return!0}return!1},I=function(P,S,L,H){var q,Q,z,K,Z=S[H];switch(Z){case"L":case"R":N=!1;break;case"N":case"AN":break;case"EN":N&&(Z="AN");break;case"AL":N=!0,Z="R";break;case"WS":Z="N";break;case"CS":H<1||H+1>=S.length||(q=L[H-1])!=="EN"&&q!=="AN"||(Q=S[H+1])!=="EN"&&Q!=="AN"?Z="N":N&&(Q="AN"),Z=Q===q?Q:"N";break;case"ES":Z=(q=H>0?L[H-1]:"B")==="EN"&&H+1<S.length&&S[H+1]==="EN"?"EN":"N";break;case"ET":if(H>0&&L[H-1]==="EN"){Z="EN";break}if(N){Z="N";break}for(z=H+1,K=S.length;z<K&&S[z]==="ET";)z++;Z=z<K&&S[z]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(K=S.length,z=H+1;z<K&&S[z]==="NSM";)z++;if(z<K){var U=P[H],Y=U>=1425&&U<=2303||U===64286;if(q=S[z],Y&&(q==="R"||q==="AL")){Z="R";break}}}Z=H<1||(q=S[H-1])==="B"?"N":L[H-1];break;case"B":N=!1,a=!0,Z=C;break;case"S":s=!0,Z="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":N=!1;break;case"BN":Z="N"}return Z},T=function(P,S,L){var H=P.split("");return L&&k(H,L,{hiLevel:C}),H.reverse(),S&&S.reverse(),H.join("")},k=function(P,S,L){var H,q,Q,z,K,Z=-1,U=P.length,Y=0,R=[],D=C?m:A,W=[];for(N=!1,a=!1,s=!1,q=0;q<U;q++)W[q]=_(P[q]);for(Q=0;Q<U;Q++){if(K=Y,R[Q]=I(P,W,R,Q),H=240&(Y=D[K][g[R[Q]]]),Y&=15,S[Q]=z=D[Y][5],H>0)if(H===16){for(q=Z;q<Q;q++)S[q]=1;Z=-1}else Z=-1;if(D[Y][6])Z===-1&&(Z=Q);else if(Z>-1){for(q=Z;q<Q;q++)S[q]=z;Z=-1}W[Q]==="B"&&(S[Q]=0),L.hiLevel|=z}s&&function(J,le,ie){for(var re=0;re<ie;re++)if(J[re]==="S"){le[re]=C;for(var ce=re-1;ce>=0&&J[ce]==="WS";ce--)le[ce]=C}}(W,S,U)},B=function(P,S,L,H,q){if(!(q.hiLevel<P)){if(P===1&&C===1&&!a)return S.reverse(),void(L&&L.reverse());for(var Q,z,K,Z,U=S.length,Y=0;Y<U;){if(H[Y]>=P){for(K=Y+1;K<U&&H[K]>=P;)K++;for(Z=Y,z=K-1;Z<z;Z++,z--)Q=S[Z],S[Z]=S[z],S[z]=Q,L&&(Q=L[Z],L[Z]=L[z],L[z]=Q);Y=K}Y++}}},M=function(P,S,L){var H=P.split(""),q={hiLevel:C};return L||(L=[]),k(H,L,q),function(Q,z,K){if(K.hiLevel!==0&&d)for(var Z,U=0;U<Q.length;U++)z[U]===1&&(Z=v.indexOf(Q[U]))>=0&&(Q[U]=v[Z+1])}(H,L,q),B(2,H,S,L,q),B(1,H,S,L,q),H.join("")};return this.__bidiEngine__.doBidiReorder=function(P,S,L){if(function(q,Q){if(Q)for(var z=0;z<q.length;z++)Q[z]=z;l===void 0&&(l=j(q)),u===void 0&&(u=j(q))}(P,S),o||!c||u)if(o&&c&&l^u)C=l?1:0,P=T(P,S,L);else if(!o&&c&&u)C=l?1:0,P=M(P,S,L),P=T(P,S);else if(!o||l||c||u){if(o&&!c&&l^u)P=T(P,S),l?(C=0,P=M(P,S,L)):(C=1,P=M(P,S,L),P=T(P,S));else if(o&&l&&!c&&u)C=1,P=M(P,S,L),P=T(P,S);else if(!o&&!c&&l^u){var H=d;l?(C=1,P=M(P,S,L),C=0,d=!1,P=M(P,S,L),d=H):(C=0,P=M(P,S,L),P=T(P,S),C=1,d=!1,P=M(P,S,L),d=H,P=T(P,S))}}else C=0,P=M(P,S,L);else C=l?1:0,P=M(P,S,L);return P},this.__bidiEngine__.setOptions=function(P){P&&(o=P.isInputVisual,c=P.isOutputVisual,l=P.isInputRtl,u=P.isOutputRtl,d=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text,s=(n.x,n.y,n.options||{}),o=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(wr),wr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Pp(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new pit(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new rit(this.contents),this.head=new ait(this),this.name=new cit(this),this.cmap=new yAe(this),this.toUnicode={},this.hhea=new sit(this),this.maxp=new uit(this),this.hmtx=new dit(this),this.post=new oit(this),this.os2=new iit(this),this.loca=new mit(this),this.glyf=new fit(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,s,o,l;for(o=0,s=0,l=(t=""+t).length;0<=l?s<l:s>l;s=0<=l?++s:--s)a=t.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var Qf,Pp=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,s,o,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,s;for(s=[],n=0,a=t.length;n<a;n++)r=t[n],s.push(this.writeByte(r));return s},e}(),rit=function(){var e;function t(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,s,o,l,c,u,d,f,A,m,g,x;for(x in m=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(m)/c),o=Math.floor(f/c),d=16*m-f,(a=new Pp).writeInt(this.scalarType),a.writeShort(m),a.writeShort(f),a.writeShort(o),a.writeShort(d),s=16*m,u=a.pos+s,l=null,g=[],r)for(A=r[x],a.writeString(x),a.writeInt(e(A)),a.writeInt(u),a.writeInt(A.length),g=g.concat(A),x==="head"&&(l=u),u+=A.length;u%4;)g.push(0),u++;return a.write(g),n=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(n),a.data},e=function(r){var n,a,s,o;for(r=wAe.call(r);r.length%4;)r.push(0);for(s=new Pp(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=s.readUInt32();return 4294967295&a},t}(),nit={}.hasOwnProperty,l0=function(e,t){for(var r in t)nit.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Qf=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var ait=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l0(t,Qf),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new Pp).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),aZ=function(){function e(t,r){var n,a,s,o,l,c,u,d,f,A,m,g,x,v,y,N,C;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),A=m/2,t.pos+=6,s=function(){var _,j;for(j=[],c=_=0;0<=A?_<A:_>A;c=0<=A?++_:--_)j.push(t.readUInt16());return j}(),t.pos+=2,x=function(){var _,j;for(j=[],c=_=0;0<=A?_<A:_>A;c=0<=A?++_:--_)j.push(t.readUInt16());return j}(),u=function(){var _,j;for(j=[],c=_=0;0<=A?_<A:_>A;c=0<=A?++_:--_)j.push(t.readUInt16());return j}(),d=function(){var _,j;for(j=[],c=_=0;0<=A?_<A:_>A;c=0<=A?++_:--_)j.push(t.readUInt16());return j}(),a=(this.length-t.pos+this.offset)/2,l=function(){var _,j;for(j=[],c=_=0;0<=a?_<a:_>a;c=0<=a?++_:--_)j.push(t.readUInt16());return j}(),c=y=0,C=s.length;y<C;c=++y)for(v=s[c],n=N=g=x[c];g<=v?N<=v:N>=v;n=g<=v?++N:--N)d[c]===0?o=n+u[c]:(o=l[d[c]/2+(n-g)-(A-c)]||0)!==0&&(o+=u[c]),this.codeMap[n]=65535&o}t.pos=f}return e.encode=function(t,r){var n,a,s,o,l,c,u,d,f,A,m,g,x,v,y,N,C,_,j,I,T,k,B,M,P,S,L,H,q,Q,z,K,Z,U,Y,R,D,W,J,le,ie,re,ce,oe,be,X;switch(H=new Pp,o=Object.keys(t).sort(function(je,De){return je-De}),r){case"macroman":for(x=0,v=function(){var je=[];for(g=0;g<256;++g)je.push(0);return je}(),N={0:0},s={},q=0,Z=o.length;q<Z;q++)N[ce=t[a=o[q]]]==null&&(N[ce]=++x),s[a]={old:t[a],new:N[t[a]]},v[a]=N[t[a]];return H.writeUInt16(1),H.writeUInt16(0),H.writeUInt32(12),H.writeUInt16(0),H.writeUInt16(262),H.writeUInt16(0),H.write(v),{charMap:s,subtable:H.data,maxGlyphID:x+1};case"unicode":for(S=[],f=[],C=0,N={},n={},y=u=null,Q=0,U=o.length;Q<U;Q++)N[j=t[a=o[Q]]]==null&&(N[j]=++C),n[a]={old:j,new:N[j]},l=N[j]-a,y!=null&&l===u||(y&&f.push(y),S.push(a),u=l),y=a;for(y&&f.push(y),f.push(65535),S.push(65535),M=2*(B=S.length),k=2*Math.pow(Math.log(B)/Math.LN2,2),A=Math.log(k/2)/Math.LN2,T=2*B-k,c=[],I=[],m=[],g=z=0,Y=S.length;z<Y;g=++z){if(P=S[g],d=f[g],P===65535){c.push(0),I.push(0);break}if(P-(L=n[P].new)>=32768)for(c.push(0),I.push(2*(m.length+B-g)),a=K=P;P<=d?K<=d:K>=d;a=P<=d?++K:--K)m.push(n[a].new);else c.push(L-P),I.push(0)}for(H.writeUInt16(3),H.writeUInt16(1),H.writeUInt32(12),H.writeUInt16(4),H.writeUInt16(16+8*B+2*m.length),H.writeUInt16(0),H.writeUInt16(M),H.writeUInt16(k),H.writeUInt16(A),H.writeUInt16(T),ie=0,R=f.length;ie<R;ie++)a=f[ie],H.writeUInt16(a);for(H.writeUInt16(0),re=0,D=S.length;re<D;re++)a=S[re],H.writeUInt16(a);for(oe=0,W=c.length;oe<W;oe++)l=c[oe],H.writeUInt16(l);for(be=0,J=I.length;be<J;be++)_=I[be],H.writeUInt16(_);for(X=0,le=m.length;X<le;X++)x=m[X],H.writeUInt16(x);return{charMap:n,subtable:H.data,maxGlyphID:C+1}}},e}(),yAe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l0(t,Qf),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)n=new aZ(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,s;return n==null&&(n="macroman"),a=aZ.encode(r,n),(s=new Pp).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},t}(),sit=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l0(t,Qf),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),iit=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l0(t,Qf),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),oit=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l0(t,Qf),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(a=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)n=r.readByte(),s.push(this.names.push(r.readString(n)));return s;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var l,c,u;for(u=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)u.push(r.readUInt32());return u}).call(this)}},t}(),lit=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},cit=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l0(t,Qf),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,s,o,l,c,u,d,f,A,m;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),a=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(u={},o=f=0,A=a.length;f<A;o=++f)s=a[o],r.pos=s.offset,d=r.readString(s.length),l=new lit(d,s),u[m=s.nameID]==null&&(u[m]=[]),u[s.nameID].push(l);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),uit=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l0(t,Qf),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),dit=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l0(t,Qf),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,s,o,l,c,u;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],n=d=0;0<=s?d<s:d>s;n=0<=s?++d:--d)f.push(r.readInt16());return f}(),this.widths=(function(){var d,f,A,m;for(m=[],d=0,f=(A=this.metrics).length;d<f;d++)o=A[d],m.push(o.advance);return m}).call(this),a=this.widths[this.widths.length-1],u=[],n=l=0;0<=s?l<s:l>s;n=0<=s?++l:--l)u.push(this.widths.push(a));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),wAe=[].slice,fit=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l0(t,Qf),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,s,o,l,c,u,d,f,A;return r in this.cache?this.cache[r]:(o=this.file.loca,n=this.file.contents,a=o.indexOf(r),(s=o.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,l=(c=new Pp(n.read(s))).readShort(),d=c.readShort(),A=c.readShort(),u=c.readShort(),f=c.readShort(),this.cache[r]=l===-1?new Ait(c,d,A,u,f):new hit(c,l,d,A,u,f),this.cache[r]))},t.prototype.encode=function(r,n,a){var s,o,l,c,u;for(l=[],o=[],c=0,u=n.length;c<u;c++)s=r[n[c]],o.push(l.length),s&&(l=l.concat(s.encode(a)));return o.push(l.length),{table:l,offsets:o}},t}(),hit=function(){function e(t,r,n,a,s,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Ait=function(){function e(t,r,n,a,s){var o,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Pp(wAe.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),mit=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l0(t,Qf),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,o;for(o=[],a=0,s=this.length;a<s;a+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],a=0,s=this.length;a<s;a+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),s=0,o=0,l=0;l<a.length;++l)if(a[l]=s,o<n.length&&n[o]==l){++o,a[l]=s;var c=this.offsets[l],u=this.offsets[l+1]-c;u>0&&(s+=u)}for(var d=new Array(4*a.length),f=0;f<a.length;++f)d[4*f+3]=255&a[f],d[4*f+2]=(65280&a[f])>>8,d[4*f+1]=(16711680&a[f])>>16,d[4*f]=(4278190080&a[f])>>24;return d},t}(),pit=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,s,o,l,c;for(a={},o=0,l=t.length;o<l;o++)a[s=t[o]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},e.prototype.encode=function(t,r){var n,a,s,o,l,c,u,d,f,A,m,g,x,v,y;for(a in n=yAe.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),m={0:0},y=n.charMap)m[(c=y[a]).old]=c.new;for(g in A=n.maxGlyphID,o)g in m||(m[g]=A++);return d=function(N){var C,_;for(C in _={},N)_[N[C]]=C;return _}(m),f=Object.keys(d).sort(function(N,C){return N-C}),x=function(){var N,C,_;for(_=[],N=0,C=f.length;N<C;N++)l=f[N],_.push(d[l]);return _}(),s=this.font.glyf.encode(o,x,m),u=this.font.loca.encode(s.offsets,x),v={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},e}();wr.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,s,o;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)o=r[a],s.push("/"+a+" "+t.convert(o));return s.push(">>"),s.join(`
`)}return""+r},t}();function NAe(e,t,r,n,a){n=n||{};var s=1.15,o=a.internal.scaleFactor,l=a.internal.getFontSize()/o,c=a.getLineHeightFactor?a.getLineHeightFactor():s,u=l*c,d=/\r\n|\r|\n/g,f="",A=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,A=f.length||1),r+=l*(2-s),n.valign==="middle"?r-=A/2*u:n.valign==="bottom"&&(r-=A*u),n.halign==="center"||n.halign==="right"){var m=l;if(n.halign==="center"&&(m*=.5),f&&A>=1){for(var g=0;g<f.length;g++)a.text(f[g],t-a.getStringUnitWidth(f[g])*m,r),r+=u;return a}t-=a.getStringUnitWidth(e)*m}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var sZ={},A1=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:sZ=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,s;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(t.font&&(c=t.font),t.fontStyle){l=t.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(c,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,s){return this.jsPDFDocument.rect(t,r,n,a,s)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return sZ||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),WR=function(e,t){return WR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},WR(e,t)};function CAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");WR(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var EAe=function(e){CAe(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function git(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function xit(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function G_(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,o){return Math.max(s,o)},0);return a}function jAe(e,t,r,n){var a=t.settings.tableLineWidth,s=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:s});var o=kAe(a,!1);o&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,o)}function kAe(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function BT(e,t){var r,n,a,s;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(s=e.bottom)!==null&&s!==void 0?s:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function SAe(e,t){var r=BT(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function vit(e,t,r,n,a){var s={},o=1.3333333333333333,l=yO(t,function(C){return a.getComputedStyle(C).backgroundColor});l!=null&&(s.fillColor=l);var c=yO(t,function(C){return a.getComputedStyle(C).color});c!=null&&(s.textColor=c);var u=yit(n,r);u&&(s.cellPadding=u);var d="borderTopColor",f=o*r,A=n.borderTopWidth;if(n.borderBottomWidth===A&&n.borderRightWidth===A&&n.borderLeftWidth===A){var m=(parseFloat(A)||0)/f;m&&(s.lineWidth=m)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var g=yO(t,function(C){return a.getComputedStyle(C)[d]});g!=null&&(s.lineColor=g);var x=["left","right","center","justify"];x.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),x=["middle","bottom","top"],x.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var v=parseInt(n.fontSize||"");isNaN(v)||(s.fontSize=v/o);var y=bit(n);y&&(s.fontStyle=y);var N=(n.fontFamily||"").toLowerCase();return e.indexOf(N)!==-1&&(s.font=N),s}function bit(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function yO(e,t){var r=_Ae(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function _Ae(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:_Ae(e.parentElement,t):r}function yit(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,s=r.map(function(l){return parseInt(l||"0")/n}),o=BT(s,0);return a>o.top&&(o.top=a),a>o.bottom&&(o.bottom=a),o}function TAe(e,t,r,n,a){var s,o;n===void 0&&(n=!1),a===void 0&&(a=!1);var l;typeof t=="string"?l=r.document.querySelector(t):l=t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],A=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:A};for(var m=0;m<l.rows.length;m++){var g=l.rows[m],x=(o=(s=g==null?void 0:g.parentElement)===null||s===void 0?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase(),v=wit(c,u,r,g,n,a);v&&(x==="thead"?d.push(v):x==="tfoot"?A.push(v):f.push(v))}return{head:d,body:f,foot:A}}function wit(e,t,r,n,a,s){for(var o=new EAe(n),l=0;l<n.cells.length;l++){var c=n.cells[l],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;s&&(d=vit(e,c,t,u,r)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:Nit(c)})}}var f=r.getComputedStyle(n);if(o.length>0&&(a||f.display!=="none"))return o}function Nit(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function Cit(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function tA(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(s[c]=l[c])}return s}function BAe(e,t){var r=new A1(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();Cit(a,n,t);var s=tA({},a,n,t),o;typeof window<"u"&&(o=window);var l=Eit(a,n,t),c=jit(a,n,t),u=kit(r,s),d=_it(r,s,o);return{id:t.tableId,content:d,hooks:c,styles:l,settings:u}}function Eit(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=e[c],d=t[c],f=r[c];n.columnStyles=tA({},u,d,f)}else{var A=[e,t,r],m=A.map(function(g){return g[c]||{}});n[c]=tA({},m[0],m[1],m[2])}},s=0,o=Object.keys(n);s<o.length;s++){var l=o[s];a(l)}return n}function jit(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,o=n;s<o.length;s++){var l=o[s];l.didParseCell&&a.didParseCell.push(l.didParseCell),l.willDrawCell&&a.willDrawCell.push(l.willDrawCell),l.didDrawCell&&a.didDrawCell.push(l.didDrawCell),l.willDrawPage&&a.willDrawPage.push(l.willDrawPage),l.didDrawPage&&a.didDrawPage.push(l.didDrawPage)}return a}function kit(e,t){var r,n,a,s,o,l,c,u,d,f,A,m,g=BT(t.margin,40/e.scaleFactor()),x=(r=Sit(e,t.startY))!==null&&r!==void 0?r:g.top,v;t.showFoot===!0?v="everyPage":t.showFoot===!1?v="never":v=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var N=(s=t.useCss)!==null&&s!==void 0?s:!1,C=t.theme||(N?"plain":"striped"),_=!!t.horizontalPageBreak,j=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:N,theme:C,startY:x,margin:g,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:v,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(A=t.tableLineColor)!==null&&A!==void 0?A:200,horizontalPageBreak:_,horizontalPageBreakRepeat:j,horizontalPageBreakBehaviour:(m=t.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function Sit(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),s=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;s=o===a}return typeof t=="number"?t:(t==null||t===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function _it(e,t,r){var n=t.head||[],a=t.body||[],s=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(r){var l=TAe(e,t.html,r,o,t.useCss)||{};n=l.head||n,a=l.body||n,s=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||Tit(n,a,s);return{columns:c,head:n,body:a,foot:s}}function Tit(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var o=1,l;Array.isArray(n)?l=n[parseInt(s)]:l=n[s],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var XR=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),Bit=function(e){CAe(t,e);function t(r,n,a,s,o,l){var c=e.call(this,r,n,l)||this;return c.cell=a,c.row=s,c.column=o,c.section=s.section,c}return t}(XR),Iit=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,s,o){for(var l=0,c=r;l<c.length;l++){var u=c[l],d=new Bit(t,this,n,a,s,o),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new XR(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new XR(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),IAe=function(){function e(t,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=t,t instanceof EAe&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,s){var o=n.cells[s.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),u=c+l;return u>a?u:a},0)},e}(),DAe=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var s=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,s=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=s!=null?""+s:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=BT(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),Dit=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var s=a[n],o=s.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},e}();function Oit(e,t){Pit(e,t);var r=[],n=0;t.columns.forEach(function(s){var o=s.getMaxCustomCellWidth(t);o?s.width=o:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=YR(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=YR(r,a,function(s){return s.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),Rit(t),Lit(t,e),Fit(t)}function Pit(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=SAe(e,t);t.allRows().forEach(function(s){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,s,c,null);var f=u.padding("horizontal");u.contentWidth=G_(u.text,u.styles,e)+f;var A=G_(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=A+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var m=10/r;u.minWidth=u.styles.minCellWidth||m,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(s){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function YR(e,t,r){for(var n=t,a=e.reduce(function(m,g){return m+g.wrappedWidth},0),s=0;s<e.length;s++){var o=e[s],l=o.wrappedWidth/a,c=n*l,u=o.width+c,d=r(o),f=u<d?d:u;t-=f-o.width,o.width=f}if(t=Math.round(t*1e10)/1e10,t){var A=e.filter(function(m){return t<0?m.width>r(m):!0});A.length&&(t=YR(A,t,r))}return t}function Fit(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var s=n[a],o=0,l=e.columns;o<l.length;o++){var c=l[o],u=t[c.index];if(r>1)r--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete t[c.index];else{var d=s.cells[c.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var f=n.length-a,A=d.rowSpan>f?f:d.rowSpan;t[c.index]={cell:d,left:A,row:s}}}}}function Rit(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,s=0,o=0,l=0;l<e.columns.length;l++){var c=e.columns[l];if(o-=1,o>1&&e.columns[l+1])s+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+s}else{var u=n.cells[c.index];if(!u)continue;if(o=u.colSpan,s=0,u.colSpan>1){a=u,s+=c.width;continue}u.width=c.width+s}}}function Lit(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var s=a[n],o=0,l=e.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=iZ(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=iZ(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var A=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<A*u.rowSpan?r={height:A,count:u.rowSpan}:r&&r.count>0&&r.height>A&&(A=r.height),A>s.height&&(s.height=A)}}r.count--}}function iZ(e,t,r,n,a){return e.map(function(s){return Mit(s,t,r,n,a)})}function Mit(e,t,r,n,a){var s=1e4*n.scaleFactor();if(t=Math.ceil(t*s)/s,t>=G_(e,r,n))return e;for(;t<G_(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function OAe(e,t){var r=new A1(e),n=Uit(t,r.scaleFactor()),a=new Iit(t,n);return Oit(r,a),r.applyStyles(r.userStyles),a}function Uit(e,t){var r=e.content,n=Qit(r.columns);if(r.head.length===0){var a=oZ(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=oZ(n,"foot");a&&r.foot.push(a)}var s=e.settings.theme,o=e.styles;return{columns:n,head:wO("head",r.head,n,o,s,t),body:wO("body",r.body,n,o,s,t),foot:wO("foot",r.foot,n,o,s,t)}}function wO(e,t,r,n,a,s){var o={},l=t.map(function(c,u){for(var d=0,f={},A=0,m=0,g=0,x=r;g<x.length;g++){var v=x[g];if(o[v.index]==null||o[v.index].left===0)if(m===0){var y=void 0;Array.isArray(c)?y=c[v.index-A-d]:y=c[v.dataKey];var N={};typeof y=="object"&&!Array.isArray(y)&&(N=(y==null?void 0:y.styles)||{});var C=Vit(e,v,u,a,n,s,N),_=new DAe(y,C,e);f[v.dataKey]=_,f[v.index]=_,m=_.colSpan-1,o[v.index]={left:_.rowSpan-1,times:m}}else m--,A++;else o[v.index].left--,m=o[v.index].times,d++}return new IAe(c,u,e,f)});return l}function oZ(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=Hit(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function Hit(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function Qit(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new Dit(a,t,r)})}function Vit(e,t,r,n,a,s,o){var l=xit(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var u=tA({},l.table,l[e],a.styles,c),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=e==="body"?d:{},A=e==="body"&&r%2===0?tA({},l.alternateRow,a.alternateRowStyles):{},m=git(s),g=tA({},m,u,A,f);return tA(g,o)}function $it(e,t,r){var n;r===void 0&&(r={});var a=SAe(e,t),s=new Map,o=[],l=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(A){var m=t.columns.find(function(g){return g.dataKey===A||g.index===A});m&&!s.has(m.index)&&(s.set(m.index,!0),o.push(m.index),l.push(t.columns[m.index]),a-=m.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(s.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||a>=f)u=!1,o.push(d),l.push(t.columns[d]),a-=f;else break;d++}return{colIndexes:o,columns:l,lastIndex:d-1}}function zit(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=$it(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function PAe(e,t){var r=t.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=n+a.bottom+o;if(r.pageBreak==="avoid"){var c=t.body,u=c.reduce(function(A,m){return A+m.height},0);l+=u}var d=new A1(e);(r.pageBreak==="always"||r.startY!=null&&l>d.pageSize().height)&&(RAe(d),s.y=a.top),t.callWillDrawPageHooks(d,s);var f=tA({},s);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?Git(d,t,f,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(A){return BA(d,t,A,s,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(A,m){var g=m===t.body.length-1;q_(d,t,A,g,f,s,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(A){return BA(d,t,A,s,t.columns)})),jAe(d,t,f,s),t.callEndPageHooks(d,s),t.finalY=s.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function Git(e,t,r,n){var a=zit(e,t),s=t.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?cN(e,t,r,n,u.columns,!0):lZ(e,t,n,u.columns),qit(e,t,r,n,u.columns),NO(e,t,n,u.columns)});else for(var o=-1,l=a[0],c=function(){var u=o;if(l){e.applyStyles(e.userStyles);var d=l.columns;o>=0?cN(e,t,r,n,d,!0):lZ(e,t,n,d),u=cZ(e,t,o+1,n,d),NO(e,t,n,d)}var f=u-o;a.slice(1).forEach(function(A){e.applyStyles(e.userStyles),cN(e,t,r,n,A.columns,!0),cZ(e,t,o+1,n,A.columns,f),NO(e,t,n,A.columns)}),o=u};o<t.body.length-1;)c()}function lZ(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(s){return BA(e,t,s,r,n)})}function qit(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(s,o){var l=o===t.body.length-1;q_(e,t,s,l,r,n,a)})}function cZ(e,t,r,n,a,s){e.applyStyles(e.userStyles),s=s??t.body.length;var o=Math.min(r+s,t.body.length),l=-1;return t.body.slice(r,o).forEach(function(c,u){var d=r+u===t.body.length-1,f=FAe(e,t,d,n);c.canEntireRowFit(f,a)&&(BA(e,t,c,n,a),l=r+u)}),l}function NO(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(s){return BA(e,t,s,r,n)})}function Kit(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),s=Math.floor((t-a)/n);return Math.max(0,s)}function Wit(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var s=0,o=0,l=r.columns;o<l.length;o++){var c=l[o],u=e.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new DAe(u.raw,u.styles,u.section);d=tA(d,u),d.text=[];var f=Kit(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var A=n.scaleFactor(),m=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(A,m),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(A,m),d.contentHeight>s&&(s=d.contentHeight),a[c.index]=d}}var g=new IAe(e.raw,-1,e.section,a,!0);g.height=s;for(var x=0,v=r.columns;x<v.length;x++){var c=v[x],d=g.cells[c.index];d&&(d.height=g.height);var u=e.cells[c.index];u&&(u.height=e.height)}return g}function Xit(e,t,r,n){var a=e.pageSize().height,s=n.settings.margin,o=s.top+s.bottom,l=a-o;t.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),u=c<r;if(c>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>l;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function q_(e,t,r,n,a,s,o){var l=FAe(e,t,n,s);if(r.canEntireRowFit(l,o))BA(e,t,r,s,o);else if(Xit(e,r,l,t)){var c=Wit(r,l,t,e);BA(e,t,r,s,o),cN(e,t,a,s,o),q_(e,t,c,n,a,s,o)}else cN(e,t,a,s,o),q_(e,t,r,n,a,s,o)}function BA(e,t,r,n,a){n.x=t.settings.margin.left;for(var s=0,o=a;s<o.length;s++){var l=o[s],c=r.cells[l.index];if(!c){n.x+=l.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,c,r,l,n);if(u===!1){n.x+=l.width;continue}Yit(e,c,n);var d=c.getTextPos();NAe(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,l,n),n.x+=l.width}n.y+=r.height}function Yit(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=kAe(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),Jit(e,t,r,n.lineWidth))}function Jit(e,t,r,n){var a,s,o,l;n.top&&(a=r.x,s=r.y,o=r.x+t.width,l=r.y,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,s,o,l)),n.bottom&&(a=r.x,s=r.y+t.height,o=r.x+t.width,l=r.y+t.height,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,s,o,l)),n.left&&(a=r.x,s=r.y,o=r.x,l=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,a,s,o,l)),n.right&&(a=r.x+t.width,s=r.y,o=r.x+t.width,l=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,a,s,o,l));function c(u,d,f,A,m){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,A,m,"S")}}function FAe(e,t,r,n){var a=t.settings.margin.bottom,s=t.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function cN(e,t,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!s&&t.foot.forEach(function(l){return BA(e,t,l,n,a)}),t.callEndPageHooks(e,n);var o=t.settings.margin;jAe(e,t,r,n),RAe(e),t.pageNumber++,n.x=o.left,n.y=o.top,r.y=o.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return BA(e,t,l,n,a)}),e.applyStyles(e.userStyles))}function RAe(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function Zit(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=BAe(this,n),s=OAe(this,a);return PAe(this,s),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){NAe(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return A1.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){A1.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new A1(this),s=TAe(a,t,window,r,!1),o=s.head,l=s.body,c=((n=o[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:l,data:l}}}var CO;function Pi(e,t){var r=BAe(e,t),n=OAe(e,r);PAe(e,n)}try{if(typeof window<"u"&&window){var uZ=window,dZ=uZ.jsPDF||((CO=uZ.jspdf)===null||CO===void 0?void 0:CO.jsPDF);dZ&&Zit(dZ)}}catch(e){console.error("Could not apply autoTable plugin",e)}const LAe="api_logs",eot=async(e,t)=>{try{const r={module:e,userId:t.id,userEmail:t.email,userName:t.nombreCompleto,timestamp:xr.fromDate(new Date)};await ln(ht(ut,LAe),r)}catch(r){console.error("Error al registrar la llamada a la API en Firestore:",r)}},tot=e=>{const t=Bt(ht(ut,LAe),Xt("timestamp","desc"));return lr(t,n=>{const a=n.docs.map(s=>{var l,c;const o=s.data();return{id:s.id,...o,timestamp:((c=(l=o.timestamp)==null?void 0:l.toDate)==null?void 0:c.call(l).toISOString())||o.timestamp}});e(a)},n=>{console.error("Error al suscribirse a los logs de API:",n),e([])})},V9=(e,t)=>{if(!t||!t.id||!t.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es invlido o no est en sesin.");return}eot(e,t)},rot=["Localizar informacin explcita","Realizar inferencias a partir del texto","Interpretar y relacionar informacin del texto","Reflexionar sobre el texto y evaluarlo","Analizar aspectos formales del texto","Reconocer tipos de texto segn su propsito comunicativo","Comprender vocabulario en contexto"],not=["Nmeros y operaciones","lgebra y funciones","Geometra","Probabilidad y estadstica","Resolucin de problemas","Modelamiento matemtico","Argumentacin y comunicacin matemtica"],fZ=ht(ut,"usuarios");async function fv(){try{console.log(" [DEBUG] Obteniendo usuarios de Firestore..."),console.log(" [DEBUG] Collection ref:",fZ);const e=await Ir(fZ);if(console.log(` [DEBUG] Encontrados ${e.docs.length} documentos en la coleccin usuarios`),e.empty)return console.log("  [DEBUG] La coleccin usuarios est vaca"),[];const t=e.docs.map(n=>{const a=n.data();return!a.curso||typeof a.curso!="string"||!a.curso.trim()?console.warn(" [ASIGNACION] Usuario sin curso asignado o curso invlido:",{id:n.id,...a}):console.log(" [ASIGNACION] Usuario con curso:",{id:n.id,curso:a.curso,nombre:a.nombreCompleto}),{id:n.id,...a}}),r=Array.from(new Set(t.map(n=>n.curso).filter(Boolean)));return console.log(" [ASIGNACION] Cursos nicos encontrados en usuarios:",r),console.log(" [DEBUG] Usuarios procesados correctamente:",t.length),console.log(" [DEBUG] Lista completa de usuarios:",t),t}catch(e){throw console.error(" [DEBUG] Error al obtener usuarios:",e),console.error(" [DEBUG] Error details:",{code:e.code,message:e.message,stack:e.stack}),e}}const aot=e=>{try{if(!e)return new Date().toISOString();if(typeof(e==null?void 0:e.toDate)=="function")return e.toDate().toISOString();if(e instanceof Date)return e.toISOString();const t=new Date(e);if(!isNaN(t.getTime()))return t.toISOString()}catch{}return new Date().toISOString()},Cf="simce_sets",wE="simce_resultados";async function sot(e){try{return(await ln(ht(ut,Cf),e)).id}catch(t){throw console.error("Error al crear set de preguntas:",t),new Error("No se pudo crear el set de preguntas")}}async function iot(e,t){try{await qi(Wt(ut,Cf,e),t)}catch(r){throw console.error("Error al actualizar set de preguntas:",r),new Error("No se pudo actualizar el set de preguntas")}}async function MAe(e){var t,r;console.log(`[DEBUG] obtenerSetPreguntas - Buscando set con ID: ${e}`);try{const n=await bA(Wt(ut,"simce_evaluaciones",e));if(n.exists()){const a=n.data();if(console.log(`[DEBUG] obtenerSetPreguntas - Encontrado en simce_evaluaciones: ${a.titulo||"Sin ttulo"}`),console.log(`[DEBUG] obtenerSetPreguntas - Preguntas: ${((t=a.preguntas)==null?void 0:t.length)||0}`),a.preguntas&&a.preguntas.length>0){for(let s=0;s<a.preguntas.length;s++)if(a.preguntas[s].textoBase){console.log(`[DEBUG] obtenerSetPreguntas - Texto base (eval) en pregunta ${s+1}`);break}}return{id:n.id,...a}}}catch(n){console.warn("[DEBUG] obtenerSetPreguntas - Error al leer simce_evaluaciones, intentando simce_sets:",n)}try{const n=await bA(Wt(ut,Cf,e));if(n.exists()){const a=n.data();if(console.log(`[DEBUG] obtenerSetPreguntas - Encontrado en ${Cf}: ${a.titulo||"Sin ttulo"}`),console.log(`[DEBUG] obtenerSetPreguntas - Preguntas: ${((r=a.preguntas)==null?void 0:r.length)||0}`),a.preguntas&&a.preguntas.length>0){for(let s=0;s<a.preguntas.length;s++)if(a.preguntas[s].textoBase){console.log(`[DEBUG] obtenerSetPreguntas - Texto base (set) en pregunta ${s+1}`);break}}return{id:n.id,...a}}}catch(n){console.warn("[DEBUG] obtenerSetPreguntas - Error al leer simce_sets:",n)}throw console.log(`[DEBUG] obtenerSetPreguntas - No se encontr set con ID: ${e} en ninguna coleccin o sin permisos`),new Error("No se pudo obtener el set de preguntas")}async function $9(e){try{const t=Bt(ht(ut,Cf),sr("creadorId","==",e),Xt("fechaCreacion","desc")),n=(await Ir(t)).docs.map(l=>({id:l.id,...l.data()})),a=Bt(ht(ut,"simce_evaluaciones"),sr("creadorId","==",e),Xt("fechaCreacion","desc")),o=(await Ir(a)).docs.map(l=>({id:l.id,...l.data(),preguntas:l.data().preguntas||[]}));return[...n,...o]}catch(t){throw console.error("Error al obtener sets de preguntas:",t),new Error("No se pudieron obtener los sets de preguntas")}}async function UAe(e){try{if(console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Buscando sets para curso ${e}`),!e)return console.error("[DEBUG] obtenerSetsPreguntasPorCurso - Error: cursoId es undefined o vaco"),[];const t=Bt(ht(ut,Cf),sr("cursosAsignados","array-contains",e),Xt("fechaCreacion","desc"));console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Query ejecutando en ${Cf}:`,t);const r=await Ir(t);console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Resultados encontrados en ${Cf}: ${r.docs.length}`);const n=Bt(ht(ut,"simce_evaluaciones"),sr("cursosAsignados","array-contains",e),Xt("fechaCreacion","desc"));console.log("[DEBUG] obtenerSetsPreguntasPorCurso - Query ejecutando en simce_evaluaciones:",n);const a=await Ir(n);console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Resultados encontrados en simce_evaluaciones: ${a.docs.length}`);let s=[...r.docs.map(o=>{const l=o.data();return console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Set encontrado en ${Cf}: ${o.id}, cursosAsignados:`,l.cursosAsignados),{id:o.id,...l}}),...a.docs.map(o=>{const l=o.data();return console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Set encontrado en simce_evaluaciones: ${o.id}, cursosAsignados:`,l.cursosAsignados),{id:o.id,...l,preguntas:l.preguntas||[]}})];return console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Total sets combinados: ${s.length}`),s}catch(t){throw console.error("Error al obtener sets de preguntas por curso:",t),new Error("No se pudieron obtener los sets de preguntas")}}async function HAe(e){try{if(!e)return[];const t=Bt(ht(ut,Cf),sr("estudiantesAsignados","array-contains",e),Xt("fechaCreacion","desc")),r=await Ir(t),n=Bt(ht(ut,"simce_evaluaciones"),sr("estudiantesAsignados","array-contains",e),Xt("fechaCreacion","desc")),a=await Ir(n);return[...r.docs.map(s=>({id:s.id,...s.data()})),...a.docs.map(s=>({id:s.id,...s.data(),preguntas:s.data().preguntas||[]}))]}catch(t){return console.error("Error al obtener sets por estudiante:",t),[]}}async function QAe(e){try{await ca(Wt(ut,Cf,e))}catch(t){throw console.error("Error al eliminar set de preguntas:",t),new Error("No se pudo eliminar el set de preguntas")}}async function VAe(e){try{return(await ln(ht(ut,wE),e)).id}catch(t){throw console.error("Error al guardar resultado de intento:",t),new Error("No se pudo guardar el resultado")}}async function $Ae(e){try{const t=Bt(ht(ut,wE),sr("setId","==",e),Xt("fechaEnvio","desc"));return(await Ir(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener resultados por set:",t),new Error("No se pudieron obtener los resultados")}}async function zAe(e,t){try{if(!t||t.length===0)return[];const r=10,n=[];for(let o=0;o<t.length;o+=r)n.push(t.slice(o,o+r));const a=[];for(const o of n){const l=Bt(ht(ut,wE),sr("setId","==",e),sr("estudianteId","in",o)),c=await Ir(l);a.push(...c.docs.map(u=>({id:u.id,...u.data()})))}const s=new Map;for(const o of a)s.set(o.id,o);return Array.from(s.values())}catch(r){throw console.error("Error al obtener resultados por curso:",r),new Error("No se pudieron obtener los resultados del curso")}}async function GAe(e){try{const t=Bt(ht(ut,wE),sr("estudianteId","==",e),Xt("fechaEnvio","desc"));return(await Ir(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener resultados por estudiante:",t),new Error("No se pudieron obtener los resultados del estudiante")}}async function oot(e){try{await ca(Wt(ut,wE,e))}catch(t){throw console.error("Error al eliminar resultado:",t),new Error("No se pudo eliminar el resultado")}}async function lot(e,t){try{console.log(`[DEBUG] obtenerEvaluacionesEstudiante - Buscando evaluaciones para estudiante ${e} en curso ${t}`);const n=(u=>{if(!u)return"";let d=u.trim().toLowerCase();return d=d.replace(//g,""),d=d.replace(/\s+(medio|bsico|basico)/g,""),d=d.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),d=d.replace(/^(\d)(?![])/,"$1"),d=d.replace(/\s+/g,"").toUpperCase(),d})(t),[a,s]=await Promise.all([UAe(n),HAe(e)]),o=new Map;[...a,...s].forEach(u=>o.set(u.id,u));const l=Array.from(o.values());console.log(`[DEBUG] obtenerEvaluacionesEstudiante - Encontradas ${l.length} evaluaciones asignadas al curso ${t}`);const c=l.map(u=>{const d={id:u.id,titulo:u.titulo,descripcion:u.descripcion||"",asignatura:(()=>{const A=String(u.asignatura||"").toLowerCase();return A.includes("lect")?"Competencia Lectora":A.includes("lg")||A.includes("log")||A.includes("mat")?"Pensamiento Lgico":u.asignatura})(),preguntas:[...u.preguntas],fechaAsignacion:u.fechaCreacion||new Date().toISOString(),textoBase:""};if(String(d.asignatura||"").toLowerCase().includes("lect")){let A="";for(const m of u.preguntas)if(m.textoBase&&m.textoBase.trim()){A=m.textoBase.trim(),console.log(`[DEBUG] Texto base encontrado en pregunta ${m.id}:`,A.substring(0,50)+"...");break}A&&d.preguntas.length>0&&(console.log(`[DEBUG] Asignando texto base a la evaluacin y primera pregunta: ${u.id}`),d.textoBase=A,d.preguntas[0].textoBase=A)}return d});return console.log(`[DEBUG] obtenerEvaluacionesEstudiante - Evaluaciones mapeadas: ${c.length}`),c}catch(r){return console.error("Error en obtenerEvaluacionesEstudiante:",r),[]}}async function uN(e){var t,r;try{console.log(`[DEBUG] obtenerEvaluacionPorId - Buscando evaluacin con ID: ${e}`);const n=await MAe(e);if(n){console.log(`[DEBUG] obtenerEvaluacionPorId - Evaluacin encontrada: ${n.titulo}`),console.log(`[DEBUG] obtenerEvaluacionPorId - Asignatura: ${n.asignatura}`),console.log(`[DEBUG] obtenerEvaluacionPorId - Cantidad de preguntas: ${((t=n.preguntas)==null?void 0:t.length)||0}`);const a=n.preguntas.some(s=>s.textoBase);if(console.log(`[DEBUG] obtenerEvaluacionPorId - Tiene texto base?: ${a}`),a){const s=n.preguntas.find(o=>o.textoBase);console.log(`[DEBUG] obtenerEvaluacionPorId - Texto base encontrado en pregunta: ${s==null?void 0:s.id}`),console.log(`[DEBUG] obtenerEvaluacionPorId - Texto base (primeros 50 caracteres): ${(r=s==null?void 0:s.textoBase)==null?void 0:r.substring(0,50)}...`)}}else console.log(`[DEBUG] obtenerEvaluacionPorId - No se encontr evaluacin con ID: ${e}`);return n||null}catch(n){return console.error("Error en obtenerEvaluacionPorId:",n),null}}async function qAe(e){try{const t={...e,setId:e.evaluacionId||e.setId||null,respuestas:e.respuestas||[],porcentajeAciertos:e.porcentajeAciertos??e.porcentajeLogro??0,porcentajeLogro:e.porcentajeLogro??e.porcentajeAciertos??0,nivelLogro:e.nivelLogro||"Insuficiente",fechaEnvio:e.fechaRealizacion||new Date().toISOString(),tiempoRealizacion:e.tiempoRealizacion??e.duracionSegundos??null};return await VAe(t)}catch(t){throw console.error("Error en guardarIntentoEvaluacion:",t),t}}async function KAe(e,t){try{return(await GAe(e)).filter(a=>a.setId===t)}catch(r){return console.error("Error en verificarIntentoExistente:",r),[]}}async function WAe(e){try{let t=[];try{t=await $9(e)}catch(r){console.warn("[DEBUG] obtenerEvaluacionesPorProfesor - Falla query directa, intento fallback:",r)}return t.map(r=>({id:r.id,titulo:r.titulo,descripcion:r.descripcion||"",asignatura:r.asignatura,preguntas:Array.isArray(r.preguntas)?r.preguntas:[],fechaCreacion:aot(r.fechaCreacion),cursosAsignados:r.cursosAsignados||[]}))}catch(t){return console.error("Error en obtenerEvaluacionesPorProfesor:",t),[]}}async function JR(e){try{return await $Ae(e)}catch(t){return console.error("Error en obtenerIntentosPorEvaluacion:",t),[]}}async function XAe(e,t){try{const r=v=>{if(!v)return"";let y=v.trim().toLowerCase();return y=y.replace(//g,""),y=y.replace(/\s+(medio|bsico|basico)/g,""),y=y.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),y=y.replace(/^(\d)(?![])/,"$1"),y=y.replace(/\s+/g,"").toUpperCase(),y},n=r(t),s=(await fv()).filter(v=>v.profile==="ESTUDIANTE"&&r(v.curso||"")===n).map(v=>v.id);if(s.length===0)return{totalEstudiantes:0,promedioLogro:0,nivelPredominante:"Insuficiente",porcentajeAdecuado:0,porcentajeElemental:0,porcentajeInsuficiente:0,porEjeTematico:[],porPregunta:[]};const o=await zAe(e,s),l=o.length;if(l===0)return{totalEstudiantes:0,promedioLogro:0,nivelPredominante:"Insuficiente",porcentajeAdecuado:0,porcentajeElemental:0,porcentajeInsuficiente:0,porEjeTematico:[],porPregunta:[]};const c=o.map(v=>v.porcentajeAciertos||v.porcentajeLogro||0),u=c.reduce((v,y)=>v+y,0)/l;let d=0,f=0,A=0;c.forEach(v=>{v>=80?d++:v>=50?f++:A++});const m=d/l*100,g=f/l*100,x=A/l*100;return{totalEstudiantes:l,promedioLogro:u,nivelPredominante:m>=Math.max(g,x)?"Adecuado":g>=x?"Elemental":"Insuficiente",porcentajeAdecuado:m,porcentajeElemental:g,porcentajeInsuficiente:x,porEjeTematico:[],porPregunta:[]}}catch(r){return console.error("Error en obtenerEstadisticasPorCurso:",r),null}}const ZR=Object.freeze(Object.defineProperty({__proto__:null,actualizarSetPreguntas:iot,crearSetPreguntas:sot,eliminarResultado:oot,eliminarSetPreguntas:QAe,guardarIntentoEvaluacion:qAe,guardarResultadoIntento:VAe,obtenerEstadisticasPorCurso:XAe,obtenerEvaluacionPorId:uN,obtenerEvaluacionesEstudiante:lot,obtenerEvaluacionesPorProfesor:WAe,obtenerIntentosPorEvaluacion:JR,obtenerResultadosPorCurso:zAe,obtenerResultadosPorEstudiante:GAe,obtenerResultadosPorSet:$Ae,obtenerSetPreguntas:MAe,obtenerSetsPreguntasPorCurso:UAe,obtenerSetsPreguntasPorEstudiante:HAe,obtenerSetsPreguntasPorProfesor:$9,verificarIntentoExistente:KAe},Symbol.toStringTag,{value:"Module"}));function cot(e){if(!e)return;let t=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`).replace(/\n{3,}/g,`

`).replace(/\t/g,"  ").trim();const r=4e3;return t.length>r&&(console.log(`Texto proporcionado truncado de ${t.length} a ${r} caracteres`),t=t.substring(0,r)+`

[Texto truncado por lmite de tamao]`),t}async function uot(e,t){try{let r;if(typeof e=="string"?r={asignatura:e,cantidad:t??5}:(r=e,r.textoProporcionado&&(r.textoProporcionado=cot(r.textoProporcionado))),r.asignatura){const l=r.asignatura.toLowerCase();l.includes("lectora")||l.includes("lectura")?r.asignatura="Lectura":(l.includes("lg")||l.includes("log")||l.includes("matem"))&&(r.asignatura="Matemtica")}const n=r.cantidad??4,a=4;r.nivel&&!["1M","2M"].includes(r.nivel)&&(r.nivel=r.nivel==="1"?"1M":r.nivel==="2"?"2M":r.nivel),console.log(`Generando ${n} preguntas de ${r.asignatura}, nivel ${r.nivel||"1M"}`);const s=dot(r,n,a);console.log("Enviando prompt a la IA (usando modelo Pro para mejor calidad)...");const o=await O7(s,2,!0);if(!o)throw console.error("La IA no devolvi respuesta"),new Error("No se recibi respuesta del modelo de IA. Por favor, intente nuevamente.");return console.log("Procesando respuesta de la IA..."),hot(o,n,r)}catch(r){throw console.error("Error en generarPreguntasSimce:",r),r instanceof Error?r:new Error("Ocurri un error al generar las preguntas SIMCE. Por favor, intente nuevamente.")}}function dot(e,t,r){const n=e.asignatura,s=(e.nivel||"1M")==="1M"?"1 medio":"2 medio",o=e.dificultad||"media",l={baja:"facil",media:"media",alta:"dificil"},c=[];if(c.push("Eres un generador pedaggico especializado en preguntas tipo SIMCE para Chile."),c.push(`Tu tarea es crear exactamente ${t} preguntas de alta calidad de la asignatura "${n}" para nivel ${s} (Chile).`),n==="Lectura"){c.push(`
ESPECIFICACIONES PARA LECTURA:`);const u=e.habilidadesLectura&&e.habilidadesLectura.length>0?e.habilidadesLectura:["Localizar informacin","Relacionar informacin","Interpretar","Reflexionar y evaluar"];c.push(`- Habilidades a evaluar: ${u.join(", ")}`),c.push("- Cada pregunta debe evaluar especficamente UNA de estas habilidades."),c.push("- Distribuye las preguntas entre las habilidades seleccionadas.");const d=e.textoProporcionado&&e.textoProporcionado.trim().length>0,f=e.textoBaseLectura&&e.textoBaseLectura.trim().length>0;d?(c.push(`
- IMPORTANTE: Utilizars EXCLUSIVAMENTE el texto proporcionado por el usuario para generar preguntas.`),c.push("- NO generes un texto adicional, usa nicamente el texto que se proporciona ms adelante."),c.push("- Todas las preguntas deben estar directamente basadas en este texto.")):f?(c.push(`
- Utilizars el texto base proporcionado para generar preguntas.`),c.push("- Todas las preguntas deben estar directamente basadas en este texto.")):(c.push(`
- Como no se ha proporcionado un texto base, DEBES CREAR un texto original:`),c.push("  * Extensin: 200-350 palabras"),c.push("  * Apropiado para estudiantes de "+s),c.push("  * Culturalmente relevante para Chile, pero neutro (sin controversias)"),c.push("  * Sin marcas comerciales ni contenido con derechos de autor"),c.push('  * El texto debe incluirse en la propiedad "textoBase" del primer tem solamente'))}else if(n==="Matemtica"){c.push(`
ESPECIFICACIONES PARA MATEMTICA:`);const u=e.ejesMatematica&&e.ejesMatematica.length>0?e.ejesMatematica:["Nmeros","lgebra","Probabilidad y estadstica","Geometra"];c.push(`- Ejes temticos a evaluar: ${u.join(", ")}`),c.push("- Cada pregunta debe evaluar especficamente UNO de estos ejes."),c.push("- Distribuye las preguntas entre los ejes seleccionados."),c.push("- Usa contextos matemticos realistas y escolares, relevantes para la vida diaria de estudiantes chilenos."),e.textoProporcionado&&(c.push(`
- IMPORTANTE: Utilizars el texto proporcionado por el usuario como contexto o referencia para generar problemas matemticos.`),c.push("- Las preguntas pueden incluir datos o situaciones mencionadas en el texto."))}if(c.push(`
REGLAS DE FORMATO DE SALIDA:`),c.push("- Devuelve UN NICO bloque JSON (sin texto adicional antes o despus)."),c.push("- El JSON debe ser un arreglo de objetos; cada objeto representa una pregunta con este esquema EXACTO:"),c.push("  {"),c.push('    "id": "p1",'),c.push('    "enunciado": "Texto del enunciado...",'),c.push('    "alternativas": ['),c.push('      {"id": "A", "texto": "...", "esCorrecta": true, "explicacion": "Justificacin detallada..."},'),c.push('      {"id": "B", "texto": "...", "esCorrecta": false},'),c.push('      {"id": "C", "texto": "...", "esCorrecta": false},'),c.push('      {"id": "D", "texto": "...", "esCorrecta": false}'),c.push("    ],"),n==="Lectura"?(c.push('    "habilidad": "Una de las habilidades especificadas",'),e.textoBaseLectura||c.push('    "textoBase": "El texto completo aqu (solo en el primer tem)",')):c.push('    "eje": "Uno de los ejes especificados",'),c.push('    "estandarAprendizaje": "Estndar curricular especfico",'),c.push(`    "dificultad": "${l[o]}"`),c.push("  }"),c.push(`
REGLAS DE CALIDAD:`),c.push("1. Enunciados claros y directos, sin ambigedades."),c.push(`2. EXACTAMENTE ${r} alternativas por pregunta (etiquetadas A, B, C, D).`),c.push("3. Solo UNA alternativa correcta por pregunta."),c.push('4. La alternativa correcta debe tener "esCorrecta": true y debe incluir una "explicacion" pedaggica.'),c.push("5. Distractores (alternativas incorrectas) deben representar errores tpicos (conceptuales o procedimentales)."),c.push("6. Las preguntas deben estar alineadas rigurosamente con el currculum chileno para "+s+"."),c.push(`7. Ajusta el nivel de dificultad a "${o}" (${l[o]}).`),c.push("8. Usa lenguaje claro, inclusivo y espaol chileno estndar."),c.push("9. Evita contenido con derechos de autor, marcas comerciales y temas sensibles."),e.contextoCurricular&&(c.push(`
CONTEXTO CURRICULAR ESPECFICO:`),c.push(e.contextoCurricular),c.push("- Alinea tus tems al contexto curricular provisto.")),e.textoProporcionado||e.textoBaseLectura&&n==="Lectura"){const u=!!e.textoProporcionado,d=u?`
TEXTO PROPORCIONADO POR EL USUARIO:`:`
TEXTO BASE PARA LECTURA:`;c.push(d);const f=e.textoProporcionado||e.textoBaseLectura;c.push('"""'),c.push(f),c.push('"""'),c.push(`
- Formula las preguntas NICAMENTE sobre este texto.`),c.push("- IMPORTANTE: NO incluyas el texto en la propiedad textoBase del JSON, ya fue provisto externamente."),u&&(c.push("- Este es un texto proporcionado por el usuario, asegrate de formular preguntas relevantes y precisas."),n==="Matemtica"&&(c.push("- Para matemticas, extrae datos numricos y situaciones del texto para formular problemas matemticos relacionados."),c.push("- Cuando sea relevante, inventa datos numricos coherentes con la situacin para completar los problemas.")))}return c.push(`
IMPORTANTE: Produce SOLO el arreglo JSON, sin texto introductorio ni comentarios adicionales.`),c.join(`
`)}function hZ(e){if(!e)return e;try{const t=["como","as","tambin","segn","vase","ejemplo"];let r=e;return t.forEach(n=>{const a=new RegExp(`"([^"]*)"${n}"([^"]*)"`,"g");r=r.replace(a,`"$1\\"${n}\\"$2"`)}),r=r.replace(/(\s*)(\w+)(\s*):(\s*)/g,'$1"$2"$3:$4'),r=r.replace(/,(\s*[\]}])/g,"$1"),r}catch(t){return console.log("Error al corregir problemas comunes:",t),e}}function fot(e){if(!e||typeof e!="string")return console.error("Texto de entrada invlido:",e),null;console.log("Iniciando extraccin JSON con algoritmo mejorado..."),e=e.replace(/^\uFEFF/,"");try{e=hZ(e)}catch(t){console.log("Error durante pre-procesamiento de palabras problemticas:",t)}try{const t=e.match(/```(?:json)?\s*([\s\S]*?)\s*```/ig);if(t&&t.length>0){console.log(`Encontrados ${t.length} bloques de cdigo potenciales`);for(const r of t){const n=r.replace(/```(?:json)?|```/ig,"").trim();console.log(`Probando bloque de cdigo: ${n.substring(0,50)}...`);const a=hZ(n),s=Zv(a);try{return JSON.parse(s),console.log("JSON vlido extrado del bloque de cdigo"),s}catch{console.log("JSON en este bloque de cdigo es invlido, continuando con siguiente bloque...")}}}}catch(t){console.log("Error procesando bloques de cdigo:",t)}try{const t=/(\[\s*\{[\s\S]*?\}\s*\])/i.exec(e);if(t&&t[1]){const r=Zv(t[1].trim());try{return JSON.parse(r),console.log("JSON completo vlido encontrado directamente"),r}catch{console.log("JSON completo parece invlido, continuando...")}}}catch(t){console.log("Error buscando JSON completo:",t)}try{const t=e.indexOf("[");if(t>=0&&e.indexOf('"id":',t)>t){console.log("Analizando estructura desde el inicio del array...");const n=e.lastIndexOf("]");let a;if(n>t)a=e.substring(t,n+1);else{const o=/"id"\s*:\s*"p\d+"/g;let l,c=-1,u="";for(;(l=o.exec(e))!==null;)c=l.index,u=l[0];if(console.log(`ltima pregunta encontrada: ${u} en posicin ${c}`),c>0){let d=e.indexOf('"id":',c+u.length);d===-1?d=e.length:(d=e.lastIndexOf("}",d),d===-1?d=e.length:d+=1),a=e.substring(t,d)+"]"}else a=e.substring(t)+"]"}const s=Zv(a);try{return JSON.parse(s),console.log("JSON reconstruido desde inicio del array"),s}catch{console.log("JSON reconstruido invlido, continuando...")}}}catch(t){console.log("Error en estrategia de reconstruccin desde inicio:",t)}try{console.log("Buscando primera pregunta completa...");const r=/\{[\s\S]*?"id"\s*:\s*"p1"[\s\S]*?"enunciado"[\s\S]*?"alternativas"[\s\S]*?\}/.exec(e);if(r){let n=r[0];if(n.includes('"alternativas"')&&n.includes('"id": "A"')){const a=["A","B","C","D"],s=[];for(const o of a)n.includes(`"id": "${o}"`)&&s.push(o);if(console.log(`Alternativas encontradas en p1: ${s.join(", ")}`),s.length>0){const o=n.indexOf('"alternativas"');if(!n.substring(o).includes("]}")){console.log("Estructura de alternativas incompleta, reconstruyendo...");let d=-1,f="";for(const A of s){const m=n.lastIndexOf(`"id": "${A}"`);m>d&&(d=m,f=A)}if(d!==-1){console.log(`ltima alternativa completa: ${f}`);const A=n.indexOf("}",d);A!==-1&&(n=n.substring(0,A+1),n.includes("]}")||(n+="]}"))}}let c=`[${n}]`;const u=Zv(c);try{return JSON.parse(u),console.log("Primera pregunta reconstruida con xito"),u}catch(d){console.log("Error al parsear primera pregunta reconstruida:",d)}}}}}catch(t){console.log("Error buscando primera pregunta:",t)}try{console.log("Intentando extraccin quirrgica del enunciado...");const t=e.match(/"enunciado"\s*:\s*"([^"]+)"/);if(t&&t[1]){const r=t[1].replace(/"/g,'\\"');console.log("Enunciado encontrado:",r.substring(0,30)+"...");let n="A";const a=e.match(/"respuesta"\s*:\s*"([A-D])"/);a&&a[1]&&(n=a[1]);let s="No disponible";const o=e.match(/"explicacion"\s*:\s*"([^"]+)"/);o&&o[1]&&(s=o[1].replace(/"/g,'\\"'));const l=`[{
        "id": "p1",
        "enunciado": "${r}",
        "alternativas": [
          {"id": "A", "texto": "Opcin recuperada parcialmente", "esCorrecta": ${n==="A"}, "explicacion": "${n==="A"?s:""}"},
          {"id": "B", "texto": "Opcin recuperada parcialmente", "esCorrecta": ${n==="B"}, "explicacion": "${n==="B"?s:""}"},
          {"id": "C", "texto": "Opcin recuperada parcialmente", "esCorrecta": ${n==="C"}, "explicacion": "${n==="C"?s:""}"},
          {"id": "D", "texto": "Opcin recuperada parcialmente", "esCorrecta": ${n==="D"}, "explicacion": "${n==="D"?s:""}"}
        ],
        "respuesta": "${n}",
        "explicacion": "${s}",
        "habilidad": "Recuperacin parcial",
        "estandarAprendizaje": "Contenido recuperado parcialmente"
      }]`;try{const c=Zv(l);return JSON.parse(c),console.log("Generado JSON de emergencia con enunciado recuperado"),c}catch(c){console.log("Error al parsear JSON de emergencia:",c)}}}catch(t){console.log("Error en extraccin quirrgica:",t)}try{return console.log("Construyendo JSON mnimo de respaldo..."),Zv(`[{
      "id": "p1",
      "enunciado": "La respuesta de la IA no pudo ser procesada correctamente. Por favor, intente nuevamente.",
      "alternativas": [
        {"id": "A", "texto": "Volver a generar preguntas", "esCorrecta": true, "explicacion": "El sistema detect un formato incorrecto en la respuesta de la IA y no pudo procesarla."},
        {"id": "B", "texto": "Opcin no disponible", "esCorrecta": false},
        {"id": "C", "texto": "Opcin no disponible", "esCorrecta": false},
        {"id": "D", "texto": "Opcin no disponible", "esCorrecta": false}
      ],
      "respuesta": "A",
      "explicacion": "Se recomienda intentar generar nuevamente o con diferentes parmetros."
    }]`)}catch(t){console.error("Error final en construccin de JSON de respaldo:",t)}return console.error("Todos los mtodos de extraccin JSON fallaron"),null}function Zv(e){const t=e;console.log(`Limpiando JSON (primeros 50 caracteres): ${e.substring(0,50).replace(/\n/g,"\\n")}...`);const r=()=>{if(e.includes('"alternativas"')&&e.lastIndexOf('"alternativas"')>e.lastIndexOf("]"))return console.log("JSON truncado detectado en array de alternativas"),!0;const A=e.lastIndexOf("{"),m=e.lastIndexOf("}");if(A>m)return console.log("JSON truncado con objeto incompleto al final"),!0;const g=(C,_)=>(C.match(new RegExp("\\"+_,"g"))||[]).length,x=g(e,"{"),v=g(e,"}"),y=g(e,"["),N=g(e,"]");return x!==v||y!==N?(console.log("JSON con estructura desbalanceada",{llaveAbiertas:x,llaveCerradas:v,corcheteAbiertos:y,corcheteCerrados:N}),!0):!1},n=[];for(let A=0;A<e.length;A++){const m=e.charCodeAt(A);m<32&&m!==9&&m!==10&&m!==13&&n.push({posicion:A,codigo:m,contexto:e.substring(Math.max(0,A-15),A)+"|PROBLEMA|"+e.substring(A+1,A+15)})}n.length>0&&(console.log(`Detectados ${n.length} caracteres de control problemticos`),n.slice(0,3).forEach(A=>{console.log(`Carcter de control en posicin ${A.posicion}, cdigo U+${A.codigo.toString(16).padStart(4,"0")}`),console.log(`Contexto: ${A.contexto}`)})),e=e.replace(/^\uFEFF/,"");let a="";for(let A=0;A<e.length;A++){const m=e.charCodeAt(A);m>=32&&m<=126||m>=128&&m<=255||m===9||m===10||m===13?a+=e[A]:a+=" "}if(e=a,e=e.replace(/\/\/.*/g,""),e=e.replace(/\/\*[\s\S]*?\*\//g,""),e=e.replace(/(\s*)(\w+)(\s*):(\s*)/g,'$1"$2"$3:$4'),e=e.replace(/,(\s*[\]}])/g,"$1"),r()){console.log("Intentando reparar JSON truncado...");const A=e.match(/\{\s*"id"\s*:\s*"p1"[\s\S]*?(?="id"|$)/);if(A){let m=A[0];if(m.includes('"enunciado"')&&m.includes('"alternativas"')&&!m.includes('"}]}')&&(m.match(/"id"\s*:\s*"[A-D]"/g)||[]).length>0){let x=-1,v=-1,y=0;for(;(v=m.indexOf(`"id": "${String.fromCharCode(65+y)}"`,v+1))!==-1&&(x=v,y++,!(y>=4)););if(x!==-1){const N=m.indexOf("}",x);if(N!==-1){let C=m.substring(0,N+1);C+=" ] }",e=`[ ${C} ]`,console.log("JSON reconstruido desde alternativa incompleta")}}}}}let s="",o=!1,l=!1;for(let A=0;A<e.length;A++){const m=e[A],g=e.charCodeAt(A);o?l?(s+=m,l=!1):m==="\\"?(s+=m,l=!0):m==='"'?(s+=m,o=!1):g<32?(s+="\\u"+("0000"+g.toString(16)).slice(-4),console.log(`Escapado carcter de control en posicin ${A}: U+${g.toString(16).padStart(4,"0")}`)):m==='"'&&e[A-1]!=="\\"?(s+='\\"',console.log(`Escapada comilla sin escapar en posicin ${A}`)):s+=m:(m==='"'&&!o&&(o=!0),s+=m)}e=s,e=e.replace(/:(\s*)(true|false)(\s*[,}])/g,(A,m,g,x)=>": "+g+x),["explicacion","explanation","texto","textoBase","enunciado","habilidad","eje","estandarAprendizaje"].forEach(A=>{const m=new RegExp(`"${A}"\\s*:\\s*"([^"]*)"`,"g");e=e.replace(m,(g,x)=>{const v=x.replace(/"/g,'\\"');return`"${A}": "${v}"`})}),e=e.replace(/"([^"]*)"([^"]*)"([^"]*)"/g,(A,m,g,x)=>g.trim().length<15&&(g.includes("como")||g.includes("as")||g.includes("tambin")||g.includes("segn"))?`"${m}\\"${g}\\"${x}"`:A),e=e.replace(/[ \t]+/g," ").trim(),!e.startsWith("[")&&e.includes('"id": "p1"')&&(e=`[${e}]`,console.log("Encapsulando objeto en array")),!(e.endsWith("}]")||e.endsWith('"]'))&&e.includes('"id": "p1"')&&(e.lastIndexOf("{")>e.lastIndexOf("}")&&(e+="}",console.log("Cerrando objeto abierto")),e.lastIndexOf("[")>e.lastIndexOf("]")&&(e+="]",console.log("Cerrando array abierto"))),e.includes('"alternativas"')&&!e.includes("]")&&(e+="]",console.log("Cerrando array de alternativas truncado"));const d=e.match(/"alternativas"\s*:\s*\[\s*{\s*"id"\s*:\s*"A".*?"explicacion"\s*:\s*"[^"]*"(?!\s*})/);if(d){const A=e.indexOf(d[0])+d[0].length;e=e.substring(0,A)+" }"+e.substring(A),console.log("Reparado cierre de alternativa")}const f=A=>{if(e.length>=A+10){const m=e.substring(Math.max(0,A-20),Math.min(e.length,A+20));console.log(`Verificando contexto alrededor de posicin ${A}: "${m}"`);const g=[];for(let x=Math.max(0,A-5);x<Math.min(e.length,A+5);x++)g.push({pos:x,char:e[x],code:e.charCodeAt(x),hex:e.charCodeAt(x).toString(16).padStart(4,"0")});console.log("Anlisis de caracteres alrededor de posicin especfica:"),g.forEach(x=>{console.log(`Pos ${x.pos}: "${x.char}" (U+${x.hex})`)})}};f(392);try{e.includes("textoBase")&&(e=e.replace(/"textoBase"\s*:\s*"([^"]*)"/g,(A,m)=>`"textoBase": "${m.replace(/[\n\r\t\f\v]/g," ").replace(/\s+/g," ")}"`),console.log("Aplicada normalizacin especial para campo textoBase")),e.includes('"explicacion"')&&(e=e.replace(/"explicacion"\s*:\s*"([^"]*)"/g,(A,m)=>`"explicacion": "${m.replace(/[\n\r\t\f\v]/g," ").replace(/\s+/g," ")}"`),console.log("Aplicada normalizacin especial para campos explicacion")),JSON.parse(e),console.log("JSON limpio vlido")}catch(A){console.log("JSON sigue siendo invlido despus de limpieza, intentando reparacin ms agresiva"),console.error("Error especfico:",A.message);try{if(A.message&&A.message.includes("position")){const x=A.message.match(/position (\d+)/);if(x){const v=parseInt(x[1]);console.log(`Error en posicin especfica: ${v}`);const y=e.substring(Math.max(0,v-30),Math.min(e.length,v+30));if(console.log(`Contexto del error: "${y}"`),v===392||v>380&&v<400){console.log("Detectado el error tpico en posicin ~392! Aplicando correccin especfica..."),f(v);try{const N=e.lastIndexOf('"',v),C=e.indexOf('"',v);if(N!==-1&&C!==-1){const _=e.substring(0,N+1),j=e.substring(C);e=_+"Contenido reemplazado debido a caracteres de control"+j,console.log("Aplicada correccin especfica para error en posicin 392");try{return JSON.parse(e),console.log("Correccin especfica exitosa"),e}catch{console.log("La correccin especfica fall, continuando...")}}}catch(N){console.log("Error durante correccin especfica:",N)}}if(y.includes('"textoBase"')||y.includes('"explicacion"')){const N=e.lastIndexOf('"',v)+1,C=e.indexOf('"',v);if(N>=0&&C>=0){const _=e.substring(N,C),j=_.substring(0,Math.min(100,_.length));e=e.substring(0,N)+j+e.substring(C),console.log("Aplicada reparacin de campo con truncado de contenido");try{return JSON.parse(e),console.log("Reparacin exitosa por truncado de contenido"),e}catch{console.log("Reparacin por truncado fall, continuando con reconstruccin completa")}}}}}const m=e.match(/"id"\s*:\s*"([^"]*)"/),g=e.match(/"enunciado"\s*:\s*"([^"]*)"/);if(m&&g){const x=m[1],v=g[1],y=v.length>150?v.substring(0,150)+"...":v;console.log(`Reconstruyendo con id="${x}" y enunciado="${y.substring(0,30)}..."`);const N=`[{
          "id": "${x}",
          "enunciado": "${y}",
          "alternativas": [
            {"id": "A", "texto": "Alternativa A (reconstruida)", "esCorrecta": true, "explicacion": "Alternativa reconstruida automticamente debido a problemas en el formato JSON."},
            {"id": "B", "texto": "Alternativa B", "esCorrecta": false},
            {"id": "C", "texto": "Alternativa C", "esCorrecta": false},
            {"id": "D", "texto": "Alternativa D", "esCorrecta": false}
          ],
          "estandarAprendizaje": "Contenido reconstruido debido a problemas en el formato JSON"
        }]`;try{JSON.parse(N),console.log("Generada versin de emergencia del JSON"),e=N}catch{console.log("Error al parsear JSON de emergencia, creando versin bsica"),e=`[{
            "id": "p1",
            "enunciado": "No fue posible procesar la respuesta. Por favor, intente nuevamente.",
            "alternativas": [
              {"id": "A", "texto": "Intentar nuevamente", "esCorrecta": true, "explicacion": "Se recomienda volver a intentar la generacin."},
              {"id": "B", "texto": "Opcin B", "esCorrecta": false},
              {"id": "C", "texto": "Opcin C", "esCorrecta": false},
              {"id": "D", "texto": "Opcin D", "esCorrecta": false}
            ],
            "habilidad": "Diagnstico",
            "estandarAprendizaje": "Error en generacin"
          }]`}}else console.log("No se encontraron datos mnimos para reconstruccin, usando JSON de fallback mnimo"),e=`[{
          "id": "p1",
          "enunciado": "No fue posible procesar la respuesta de la IA. Por favor, intente nuevamente.",
          "alternativas": [
            {"id": "A", "texto": "Volver a intentar", "esCorrecta": true, "explicacion": "El sistema detect un formato incorrecto en la respuesta de la IA."},
            {"id": "B", "texto": "Modificar parmetros", "esCorrecta": false},
            {"id": "C", "texto": "Usar menos preguntas", "esCorrecta": false},
            {"id": "D", "texto": "Contactar soporte", "esCorrecta": false}
          ],
          "habilidad": "Diagnstico",
          "estandarAprendizaje": "Error en formato de respuesta"
        }]`}catch(m){console.log("Error durante la reconstruccin manual:",m),e=`[{
        "id": "p1",
        "enunciado": "Error crtico en el procesamiento de la respuesta.",
        "alternativas": [
          {"id": "A", "texto": "Intentar nuevamente", "esCorrecta": true, "explicacion": "Error tcnico en el procesamiento de la respuesta."},
          {"id": "B", "texto": "Opcin B", "esCorrecta": false},
          {"id": "C", "texto": "Opcin C", "esCorrecta": false},
          {"id": "D", "texto": "Opcin D", "esCorrecta": false}
        ]
      }]`}}if(t!==e){console.log("Se realizaron modificaciones al JSON original");try{JSON.parse(e)}catch(A){console.error("JSON final sigue siendo invlido:",A),console.log("JSON limpiado (primeros 100 caracteres):",e.substring(0,100))}}return e}function hot(e,t,r){if(!e||typeof e!="string")throw console.error("Respuesta de IA invlida:",e),new Error("No se recibi una respuesta vlida de la IA");console.log("Procesando respuesta de la IA...");try{console.log(`Respuesta recibida: ${e.length} caracteres. Primeros 100:`,e.substring(0,100).replace(/\n/g,"\\n"));const n=fot(e);if(!n)return console.error("No se pudo extraer JSON de la respuesta despus de mltiples intentos"),qw(1,"La IA gener una respuesta en un formato que no se pudo procesar. Por favor, intente nuevamente.");console.log("JSON extrado correctamente, intentando parsear...");let a;try{a=JSON.parse(n),console.log("JSON parseado correctamente:",typeof a,Array.isArray(a)?a.length:"no es array")}catch(l){console.error("Error al parsear el JSON final:",l,"JSON parcial:",n.substring(0,200)),console.log("Intentando reparacin de emergencia del JSON...");try{const c=n.match(/\[\s*\{.*?\}\s*(?:\]|$)/s);if(c){const u=c[0].endsWith("]")?c[0]:c[0]+"]";a=JSON.parse(u),console.log("Reparacin parcial exitosa")}else throw new Error("No se pudo reparar el JSON")}catch{return console.log("Creando objeto de respaldo despus de error de parseo final"),qw(1,"La IA gener una respuesta en formato incorrecto. Por favor, intente nuevamente con diferentes parmetros.")}}if(!Array.isArray(a))if(console.log("La respuesta no es un array, encapsulndola"),typeof a=="object"&&a!==null)a=[a];else return console.error("La respuesta no es un objeto que podamos encapsular:",typeof a),qw(1,"La respuesta recibida no tiene el formato esperado. Por favor, intente nuevamente.");if(a=a.filter(l=>l&&typeof l=="object"),a.length===0)return console.error("No se encontraron preguntas vlidas despus de filtrar"),qw(1,"No se pudieron extraer preguntas vlidas de la respuesta. Por favor, intente nuevamente.");console.log(`Se encontraron ${a.length} preguntas para procesar`),a.length<t&&(console.warn(` Solo se generaron ${a.length} preguntas de ${t} solicitadas. Intentando re-generacin automtica.`),a.length===1&&t>1&&r&&r.asignatura&&console.log("Detectado problema de generacin parcial. Intentando recuperar ms preguntas..."));let s;r!=null&&r.textoProporcionado?(s=r.textoProporcionado,console.log("Usando texto proporcionado por el usuario como textoBase")):a.length>0&&a[0].textoBase?(s=a[0].textoBase,console.log("Se encontr textoBase generado por la IA para preguntas de Lectura")):r!=null&&r.textoBaseLectura&&(s=r.textoBaseLectura,console.log("Usando textoBaseLectura de las opciones"));const o=a.slice(0,t).map((l,c)=>{try{if(console.log(`Procesando pregunta ${c+1}...`),!l||typeof l!="object")throw new Error(`La pregunta ${c+1} no es un objeto vlido`);if(!l.enunciado&&!l.pregunta&&!l.texto){console.warn(`La pregunta ${c+1} no tiene enunciado, buscando alternativas...`);const g=Object.entries(l).find(([x,v])=>typeof v=="string"&&v.length>20&&["contenido","stem","question","statement"].includes(x.toLowerCase()));if(g)l.enunciado=g[1],console.log(`Usando '${g[0]}' como enunciado`);else throw new Error(`No se encontr enunciado para la pregunta ${c+1}`)}let u=Array.isArray(l.alternativas)?l.alternativas:[];u.length===0&&(l.A||l.a||l.opciones||l.options)&&(console.log("Detectado formato alternativo de alternativas"),l.opciones&&Array.isArray(l.opciones)?u=l.opciones:l.options&&Array.isArray(l.options)?u=l.options:u=["A","B","C","D"].map(g=>{const x=l[g],v=l[g.toLowerCase()],y=x!==void 0?x:v;if(y){if(typeof y=="string")return{id:g,texto:y,esCorrecta:l.respuesta===g||l.correcta===g};if(typeof y=="object")return{id:g,...y}}return{id:g,texto:`Alternativa ${g}`,esCorrecta:!1}})),u.length===0&&(console.log("No se encontraron alternativas, creando alternativas por defecto"),u=[{id:"A",texto:"Opcin A (generada automticamente)",esCorrecta:!0},{id:"B",texto:"Opcin B (generada automticamente)",esCorrecta:!1},{id:"C",texto:"Opcin C (generada automticamente)",esCorrecta:!1},{id:"D",texto:"Opcin D (generada automticamente)",esCorrecta:!1}]);const d=u.map((g,x)=>{if(!g)return console.warn(`Alternativa ${x} es nula o indefinida, creando alternativa por defecto`),{id:String.fromCharCode(65+x),texto:`Alternativa ${String.fromCharCode(65+x)} (generada por defecto)`,esCorrecta:!1};if(typeof g=="string")return{id:String.fromCharCode(65+x),texto:g,esCorrecta:l.respuesta===String.fromCharCode(65+x)||l.correcta===String.fromCharCode(65+x)||l.respuesta===x||l.respuesta===(x+1).toString()};const v=(g==null?void 0:g.texto)||(g==null?void 0:g.text)||(g==null?void 0:g.contenido)||(g==null?void 0:g.content)||`Alternativa ${String.fromCharCode(65+x)}`;let y=(g==null?void 0:g.id)||String.fromCharCode(65+x);typeof y=="number"&&(y=String.fromCharCode(64+y));let N=!1;((g==null?void 0:g.esCorrecta)===!0||(g==null?void 0:g.isCorrect)===!0||(g==null?void 0:g.correct)===!0)&&(N=!0);const C=l.respuesta||l.correcta||l.respuestaCorrecta||l.correct;return C&&(C===y||C===x||C===x+1||C===(x+1).toString())&&(N=!0),{id:y,texto:v,esCorrecta:N,explicacion:(g==null?void 0:g.explicacion)||(g==null?void 0:g.explanation)||""}}).filter(g=>g&&g.texto);for(d.length===0&&(console.warn("No hay alternativas vlidas despus de filtrar, creando por defecto"),d.push({id:"A",texto:"Alternativa A (por defecto)",esCorrecta:!0},{id:"B",texto:"Alternativa B (por defecto)",esCorrecta:!1},{id:"C",texto:"Alternativa C (por defecto)",esCorrecta:!1},{id:"D",texto:"Alternativa D (por defecto)",esCorrecta:!1}));d.length<4;){const g=String.fromCharCode(65+d.length);console.log(`Agregando alternativa ${g} faltante`),d.push({id:g,texto:`Alternativa ${g} (agregada automticamente)`,esCorrecta:!1})}d.length>4&&(console.log(`Demasiadas alternativas (${d.length}), conservando solo 4`),d.splice(4)),d.some(g=>g.esCorrecta)||(console.log("No se encontr alternativa marcada como correcta, marcando la primera"),d[0].esCorrecta=!0);const f=d.find(g=>g.esCorrecta),A=(f==null?void 0:f.explicacion)||l.explicacion||l.explanation||"";return A&&f&&!f.explicacion&&(f.explicacion=A),f&&!f.explicacion&&(f.explicacion=`La respuesta correcta es la alternativa ${f.id}`),{id:l.id||`p${c+1}`,enunciado:l.enunciado||l.pregunta||l.texto||`Pregunta ${c+1}`,alternativas:d,estandarAprendizaje:l.estandarAprendizaje||l.estandar||l.standard||"",habilidad:l.habilidad||l.eje||l.skill||l.axis||"",textoBase:c===0?s:void 0,createdAt:zn(),dificultad:l.dificultad||l.difficulty||"media"}}catch(u){return console.error(`Error procesando pregunta ${c+1}:`,u),AZ(c+1)}});if(console.log(`Procesamiento completado: ${o.length} preguntas procesadas`),o.length<t){const l=t-o.length;console.warn(`Rellenando ${l} pregunta(s) para alcanzar la cantidad solicitada (${t})`);for(let c=0;c<l;c++)o.push(AZ(o.length+1))}return o}catch(n){return console.error("Error general en procesarRespuestaIA:",n),qw(t,"Ocurri un error al procesar la respuesta de la IA. Por favor, intente nuevamente.")}}function AZ(e){return{id:`p${e}`,enunciado:`Pregunta ${e} (no se pudo generar correctamente)`,alternativas:[{id:"A",texto:"Intentar nuevamente",esCorrecta:!0,explicacion:"Se recomienda volver a intentar la generacin con el modelo Pro."},{id:"B",texto:"Modificar parmetros",esCorrecta:!1},{id:"C",texto:"Reducir complejidad",esCorrecta:!1},{id:"D",texto:"Contactar soporte",esCorrecta:!1}],habilidad:"No disponible",estandarAprendizaje:"No disponible",createdAt:zn(),dificultad:"media"}}function qw(e,t){const r=[];for(let n=0;n<e;n++)r.push({id:`p${n+1}`,enunciado:n===0?t:`Pregunta ${n+1} (no disponible)`,alternativas:[{id:"A",texto:"Intentar nuevamente",esCorrecta:!0,explicacion:"Se recomienda volver a intentar la generacin."},{id:"B",texto:"Modificar parmetros de generacin",esCorrecta:!1},{id:"C",texto:"Usar menos cantidad de preguntas",esCorrecta:!1},{id:"D",texto:"Revisar el contexto proporcionado",esCorrecta:!1}],habilidad:"Diagnstico",estandarAprendizaje:"Error en generacin",createdAt:zn(),dificultad:"media"});return r}async function Aot(e){try{const t=$0(),r=vl(t,"generarPreguntasSimce");console.log("Llamando a Cloud Function para generar preguntas SIMCE...");const n=await r({options:e}),{preguntas:a,textoBase:s}=n.data;if(!a||!Array.isArray(a)||a.length===0)throw new Error("La respuesta no contiene preguntas vlidas");return console.log(`Se generaron ${a.length} preguntas correctamente mediante Cloud Function`),s&&a.length>0&&(a[0].textoBase=s),a}catch(t){throw console.error("Error al generar preguntas SIMCE mediante Cloud Function:",t),t}}const NE=({content:e,context:t="unknown"})=>{if(typeof e=="string")return/<[a-z][\s\S]*>/i.test(e)?i.jsx("span",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:e}}):i.jsx("span",{className:"whitespace-pre-wrap",children:e});if(ft.isValidElement(e))return e;try{return i.jsx("span",{children:JSON.stringify(e)})}catch{return i.jsx("span",{children:"[Sin contenido disponible]"})}},gu=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},mot=e=>{for(const t of e)if(t.textoBase&&t.textoBase.trim())return t.textoBase.trim();return null},pot=(e,t)=>t.trim()?e.map((r,n)=>n===0?{...r,textoBase:t.trim()}:r):e,got=({currentUser:e})=>{const[t,r]=w.useState([]),[n,a]=w.useState(!0),[s,o]=w.useState("lista"),[l,c]=w.useState(null),[u,d]=w.useState(""),[f,A]=w.useState("todas"),[m,g]=w.useState(!1),[x,v]=w.useState({titulo:"",descripcion:"",asignatura:"Competencia Lectora",preguntas:[],cursosAsignados:[],barajarPreguntas:!0,barajarAlternativas:!0}),[y,N]=w.useState(!1),[C,_]=w.useState(null),[j,I]=w.useState([]),[T,k]=w.useState([]),[B,M]=w.useState(""),[P,S]=w.useState(!1),[L,H]=w.useState(null),[q,Q]=w.useState(null),[z,K]=w.useState([]);w.useEffect(()=>{(async()=>{try{a(!0);const we=await $9(e.id||"");r(we);const Ae=await fv();K(Ae);const de=new Set;e.cursos&&e.cursos.length>0?e.cursos.forEach(fe=>de.add(gu(fe))):ja.forEach(fe=>de.add(gu(fe))),Ae.filter(fe=>fe.profile==="ESTUDIANTE"&&fe.curso).forEach(fe=>{fe.curso&&(fe.curso=gu(fe.curso),de.add(fe.curso))});const ae=Array.from(de).sort().map(fe=>({id:fe,nombre:Z(fe)}));I(ae)}catch(we){console.error("Error al cargar datos iniciales:",we),_("No se pudieron cargar los datos necesarios")}finally{a(!1)}})()},[e]);const Z=ue=>{const we=ue.match(/^(\d+)?([A-E])$/i);if(we){const Ae=we[1],de=we[2].toUpperCase();return`${Ae} Medio ${de}`}return ue};w.useEffect(()=>{k(B?j.filter(ue=>ue.nombre.toLowerCase().includes(B.toLowerCase())):[])},[B,j]);const U=()=>t.filter(ue=>{const we=ue.titulo.toLowerCase().includes(u.toLowerCase()),Ae=f==="todas"||ue.asignatura===f;return we&&Ae}),Y=()=>{g(!0),c(null),v({titulo:"",descripcion:"",asignatura:"Competencia Lectora",preguntas:[],cursosAsignados:[],barajarPreguntas:!0,barajarAlternativas:!0}),H(null),Q(null),le(ue=>({...ue,textoProporcionado:""})),o("detalle")},R=ue=>{g(!0),c(ue),v({...ue}),o("detalle")},D=async ue=>{if(window.confirm(`Ests seguro de eliminar el set "${ue.titulo}"? Esta accin no se puede deshacer.`))try{await QAe(ue.id),r(we=>we.filter(Ae=>Ae.id!==ue.id))}catch(we){console.error("Error al eliminar set:",we),_("No se pudo eliminar el set de preguntas")}},W=async()=>{try{if(!x.titulo){_("El ttulo de la evaluacin es obligatorio");return}if(!x.preguntas||x.preguntas.length===0){_("Debes agregar al menos una pregunta");return}const ue=(x.cursosAsignados||[]).map(gu),we=ue.length>0;a(!0);let Ae=[];we&&(Ae=z.filter(Be=>Be.profile==="ESTUDIANTE"&&Be.curso&&ue.includes(gu(Be.curso))).map(Be=>Be.id));const de=new Date().toISOString(),ae=e.id||"",fe=e.nombreCompleto||e.displayName||e.email||"Docente",ge={...x,cursosAsignados:ue,estudiantesAsignados:Ae,creadorId:l&&l.creadorId||ae,creadorNombre:l&&l.creadorNombre||fe,fechaCreacion:l&&l.fechaCreacion||de},xe=(ge.preguntas||[]).map(Be=>{var bt;const et=((bt=Be.alternativas.find(jt=>jt.esCorrecta))==null?void 0:bt.id)||Be.respuestaCorrecta;return{...Be,respuestaCorrecta:et}});ge.preguntas=xe;let Ue="";const{collection:qe,addDoc:Ze,updateDoc:We,doc:me}=await Ss(async()=>{const{collection:Be,addDoc:et,updateDoc:bt,doc:jt}=await Promise.resolve().then(()=>T1);return{collection:Be,addDoc:et,updateDoc:bt,doc:jt}},void 0),{db:Ve}=await Ss(async()=>{const{db:Be}=await Promise.resolve().then(()=>zM);return{db:Be}},void 0),Xe="simce_evaluaciones";console.log("[DEBUG] Guardando evaluacin:",ge);try{if(l&&l.id){const Be=me(Ve,Xe,l.id),{getDoc:et,deleteDoc:bt}=await Ss(async()=>{const{getDoc:qt,deleteDoc:ir}=await Promise.resolve().then(()=>T1);return{getDoc:qt,deleteDoc:ir}},void 0),jt=await et(Be);if(console.log("[DEBUG] Documento a editar existe en simce_evaluaciones:",jt.exists()),jt.exists())await We(Be,ge),Ue=l.id,console.log("[DEBUG] Evaluacin actualizada en simce_evaluaciones:",Ue);else{Ue=(await Ze(qe(Ve,Xe),ge)).id,console.log("[DEBUG] Evaluacin migrada a simce_evaluaciones:",Ue);const ir=me(Ve,"simce_sets",l.id),Ut=await et(ir);console.log("[DEBUG] Documento antiguo existe en simce_sets:",Ut.exists()),Ut.exists()&&(await bt(ir),console.log("[DEBUG] Documento antiguo eliminado de simce_sets:",l.id))}}else Ue=(await Ze(qe(Ve,Xe),ge)).id,console.log("[DEBUG] Evaluacin nueva creada en simce_evaluaciones:",Ue)}catch(Be){throw console.error("[ERROR] Guardando evaluacin:",Be),Be}const Ie={id:Ue,...ge};r(Be=>{const et=Be.findIndex(bt=>bt.id===Ue);if(et>=0){const bt=[...Be];return bt[et]=Ie,bt}return[Ie,...Be]}),re({tipo:"success",mensaje:we?`Evaluacin guardada y asignada a ${ue.length} curso${ue.length!==1?"s":""} correctamente`:"Evaluacin guardada correctamente"}),setTimeout(()=>{re({tipo:"",mensaje:""})},3e3),g(!1),o("lista"),_(null)}catch(ue){console.error("Error al guardar evaluacin:",ue),_("No se pudo guardar la evaluacin"),re({tipo:"error",mensaje:"Ocurri un error al guardar la evaluacin"}),setTimeout(()=>{re({tipo:"",mensaje:""})},3e3)}finally{a(!1)}},[J,le]=w.useState({cantidadPreguntas:"4",dificultad:"media",textoProporcionado:"",habilidadesLectura:{"Localizar informacin":!0,"Relacionar informacin":!0,Interpretar:!0,"Reflexionar y evaluar":!0},ejesMatematica:{Nmeros:!0,lgebra:!0,"Probabilidad y estadstica":!0,Geometra:!0}}),[ie,re]=w.useState({tipo:"",mensaje:""}),ce=async()=>{var ue,we,Ae,de,ae;try{if(!x.asignatura){_("Seleccione una asignatura para generar preguntas");return}N(!0),_(null),re({tipo:"",mensaje:""});let fe,ge;x.asignatura==="Competencia Lectora"?(fe=Object.entries(J.habilidadesLectura).filter(([We,me])=>me).map(([We])=>We),fe.length===0&&(fe=["Localizar informacin","Relacionar informacin","Interpretar","Reflexionar y evaluar"])):x.asignatura==="Pensamiento Lgico"&&(ge=Object.entries(J.ejesMatematica).filter(([We,me])=>me).map(([We])=>We),ge.length===0&&(ge=["Nmeros","lgebra","Probabilidad y estadstica","Geometra"])),re({tipo:"warning",mensaje:`Generando ${J.cantidadPreguntas} preguntas de ${x.asignatura}. Este proceso puede tardar unos segundos...`});const Ue={asignatura:(()=>{const We=(x.asignatura||"").toLowerCase();if(We.includes("lectora")||We.includes("lectura"))return"Lectura";if(We.includes("lg")||We.includes("log")||We.includes("matem"))return"Matemtica";const me=x.asignatura||"Lectura";return me==="Lectura"||me==="Matemtica"?me:"Lectura"})(),cantidad:parseInt(J.cantidadPreguntas),opcionesPorPregunta:4,habilidadesLectura:fe,ejesMatematica:ge,dificultad:J.dificultad,contextoCurricular:x.descripcion,textoProporcionado:((ue=J.textoProporcionado)==null?void 0:ue.trim())||void 0};let qe,Ze=[];try{if(console.log("Intentando generar preguntas usando Cloud Function..."),Ze.push("Cloud Function"),qe=await Aot(Ue),!Array.isArray(qe)||qe.length===0)throw new Error("La respuesta de Cloud Function no es vlida");qe.forEach((We,me)=>{if(!We.enunciado||!Array.isArray(We.alternativas)||We.alternativas.length!==4)throw new Error(`Pregunta ${me+1} tiene estructura invlida`)})}catch(We){console.error("Error con Cloud Function:",We);try{if(console.log("Usando generacin local como respaldo..."),Ze.push("Local"),re({tipo:"warning",mensaje:"Usando generacin local como respaldo. Procesando..."}),qe=await uot(Ue),!Array.isArray(qe)||qe.length===0)throw new Error("La generacin local no produjo resultados vlidos");qe.forEach((me,Ve)=>{if(!me.enunciado||!Array.isArray(me.alternativas)||me.alternativas.length!==4)throw new Error(`Pregunta ${Ve+1} generada localmente tiene estructura invlida`)})}catch(me){console.error("Error con generacin local:",me);const Ve=[];throw(we=We.message)!=null&&we.includes("JSON")&&Ve.push("Problema de formato en servidor remoto"),(Ae=me.message)!=null&&Ae.includes("JSON")&&Ve.push("Problema de formato en generacin local"),new Error(`No se pudieron generar preguntas con ningn mtodo (intentos: ${Ze.join(", ")}). Errores: ${Ve.join(", ")||"Problemas de conexin o formato"}. Por favor, intente nuevamente o genere preguntas manualmente.`)}}if(!qe||qe.length===0)throw new Error("No se generaron preguntas vlidas despus de todos los intentos");if(x.asignatura==="Competencia Lectora"){let We=(de=J.textoProporcionado)==null?void 0:de.trim();We||(We=(ae=qe[0].textoBase)==null?void 0:ae.trim()),We||(We="Texto de comprensin generado automticamente."),qe[0].textoBase=We,console.log("[DEBUG] Texto base final asignado a la primera pregunta:",We.substring(0,50)+"...")}v(We=>({...We,preguntas:[...We.preguntas||[],...qe]})),re({tipo:"success",mensaje:`Se generaron ${qe.length} preguntas correctamente usando ${Ze[Ze.length-1]}!`}),setTimeout(()=>{re({tipo:"",mensaje:""})},5e3)}catch(fe){console.error("Error general al generar preguntas:",fe);let ge="No se pudieron generar las preguntas.";fe instanceof Error&&(fe.message.includes("JSON")?ge="Hubo un problema con el formato de las respuestas del servidor. Esto puede deberse a sobrecarga del sistema de IA. Intente nuevamente en unos minutos.":fe.message.includes("red")||fe.message.includes("network")?ge="Problema de conexin. Verifique su conexin a internet e intente nuevamente.":fe.message.length>10&&(ge=fe.message)),_(ge),re({tipo:"error",mensaje:ge+" Puede agregar preguntas manualmente como alternativa."}),setTimeout(()=>{re({tipo:"",mensaje:""})},8e3)}finally{N(!1)}},oe=ue=>{Q({...ue})},be=()=>{var de,ae;if(!q)return;if(!q.enunciado){_("El enunciado de la pregunta es obligatorio");return}if(!q.alternativas.find(fe=>fe.esCorrecta)){_("Debe marcar una alternativa como correcta");return}if(q.alternativas.filter(fe=>!fe.texto).length>0){_("Todas las alternativas deben tener texto");return}const Ae=q.textoBase&&x.asignatura==="Competencia Lectora";if(q.id.startsWith("p"))if(Ae){console.log("Nueva pregunta con texto base detectado:",q.textoBase);const fe=[...x.preguntas||[]];v(ge=>({...ge,preguntas:[q,...fe]}))}else v(fe=>({...fe,preguntas:[...fe.preguntas||[],q]}));else if(Ae){console.log("Actualizando pregunta con texto base:",q.textoBase);const fe=((de=x.preguntas)==null?void 0:de.map(ge=>ge.id===q.id?q:ge))||[];if(q===((ae=x.preguntas)==null?void 0:ae[0])){const ge=q.textoBase||"",xe=pot(fe,ge);v(Ue=>({...Ue,preguntas:xe}))}else v(ge=>({...ge,preguntas:fe}))}else v(fe=>{var ge;return{...fe,preguntas:((ge=fe.preguntas)==null?void 0:ge.map(xe=>xe.id===q.id?q:xe))||[]}});Q(null),_(null)},X=ue=>{v(we=>{var Ae;return{...we,preguntas:((Ae=we.preguntas)==null?void 0:Ae.filter(de=>de.id!==ue))||[]}})},je=ue=>{const we=gu(ue);v(Ae=>{const de=(Ae.cursosAsignados||[]).map(gu);return de.includes(we)?{...Ae,cursosAsignados:de.filter(ae=>ae!==we)}:{...Ae,cursosAsignados:[...de,we]}})},De=()=>{const ue=U();return n?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(qh,{className:"w-8 h-8 text-indigo-500 animate-spin mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando evaluaciones..."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx(wy,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4"}),i.jsx("input",{type:"text",placeholder:"Buscar evaluaciones...",className:"pl-9 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:u,onChange:we=>d(we.target.value)})]}),i.jsxs("select",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:f,onChange:we=>A(we.target.value),children:[i.jsx("option",{value:"todas",children:"Todas las asignaturas"}),i.jsx("option",{value:"Competencia Lectora",children:"Competencia Lectora"}),i.jsx("option",{value:"Pensamiento Lgico",children:"Pensamiento Lgico"})]})]}),i.jsxs("button",{onClick:Y,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md",children:[i.jsx(gi,{className:"w-4 h-4"}),"Nueva evaluacin"]})]}),i.jsx("div",{className:"space-y-4",children:ue.length===0?i.jsxs("div",{className:"text-center py-8 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx(p3,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:u||f!=="todas"?"No se encontraron evaluaciones con los filtros seleccionados":"No hay evaluaciones creadas an. Crea tu primera evaluacin SIMCE."}),(u||f!=="todas")&&i.jsx("button",{onClick:()=>{d(""),A("todas")},className:"mt-4 text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 hover:dark:text-indigo-300 text-sm font-medium",children:"Limpiar filtros"})]}):ue.map(we=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"p-4 flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:`p-2 rounded-md mr-3 ${we.asignatura==="Competencia Lectora"?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"}`,children:we.asignatura==="Competencia Lectora"?i.jsx(ps,{className:"w-5 h-5"}):i.jsx(UM,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-800 dark:text-slate-200",children:we.titulo}),we.descripcion&&i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm mt-1",children:we.descripcion}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[i.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs",children:[we.preguntas.length," preguntas"]}),i.jsx("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs",children:we.asignatura}),we.cursosAsignados&&we.cursosAsignados.length>0&&i.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs flex items-center gap-1",children:[i.jsx(qs,{className:"w-3 h-3"}),we.cursosAsignados.length," ",we.cursosAsignados.length===1?"curso":"cursos"]}),i.jsx("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs",children:we.fechaCreacion?new Date(we.fechaCreacion).toLocaleDateString():"-"})]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>c(we),className:"p-2 text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 rounded-full hover:bg-slate-100 hover:dark:bg-slate-700",title:"Ver detalles",children:i.jsx(ox,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>R(we),className:"p-2 text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 rounded-full hover:bg-slate-100 hover:dark:bg-slate-700",title:"Editar evaluacin",children:i.jsx(X0,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>D(we),className:"p-2 text-red-500 hover:text-red-700 dark:text-red-400 hover:dark:text-red-300 rounded-full hover:bg-red-50 hover:dark:bg-red-900/20",title:"Eliminar evaluacin",children:i.jsx(Vn,{className:"w-4 h-4"})})]})]}),(l==null?void 0:l.id)===we.id&&i.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 p-4",children:[we.asignatura==="Competencia Lectora"&&(()=>{const Ae=mot(we.preguntas);return Ae?i.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-700 shadow-sm",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg mr-3",children:i.jsx(ps,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-blue-800 dark:text-blue-200 text-lg",children:" Texto de Comprensin Lectora"}),i.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-sm",children:"Lee atentamente el siguiente texto antes de responder las preguntas"})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-md border border-blue-100 dark:border-blue-800",children:i.jsx(NE,{content:Ae,context:"simce-texto-base"})})]}):null})(),i.jsxs("h4",{className:"font-medium mb-3 flex items-center",children:[i.jsx("span",{className:"mr-2",children:""}),"Preguntas (",we.preguntas.length,")"]}),i.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto pr-2",children:we.preguntas.map((Ae,de)=>{var ae,fe;return i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("p",{className:"font-medium",children:[i.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 py-1 px-2 rounded-md text-sm mr-2 font-semibold",children:de+1}),Ae.enunciado]}),i.jsx("div",{className:"mt-3 ml-6 space-y-2",children:Ae.alternativas.map(ge=>i.jsxs("div",{className:`flex items-start p-2 rounded-md transition-colors ${ge.esCorrecta?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 font-medium border border-green-200 dark:border-green-800":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[i.jsxs("span",{className:"font-semibold mr-2 min-w-[20px]",children:[ge.id,")"]}),i.jsx("span",{className:"flex-1",children:ge.texto}),ge.esCorrecta&&i.jsx(pa,{className:"ml-2 w-4 h-4 text-green-600 dark:text-green-400 flex-shrink-0"})]},ge.id))}),i.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200 dark:border-slate-700 text-xs text-slate-500 dark:text-slate-400",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:" Estndar:"})," ",Ae.estandarAprendizaje]}),Ae.habilidad&&i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:" Habilidad:"})," ",Ae.habilidad]}),((ae=Ae.alternativas.find(ge=>ge.esCorrecta))==null?void 0:ae.explicacion)&&i.jsxs("div",{className:"mt-2 bg-green-50 dark:bg-green-900/20 p-2 rounded-md border border-green-100 dark:border-green-800",children:[i.jsx("span",{className:"font-semibold text-green-800 dark:text-green-300",children:" Explicacin:"}),i.jsx("span",{className:"text-green-700 dark:text-green-300 ml-1",children:(fe=Ae.alternativas.find(ge=>ge.esCorrecta))==null?void 0:fe.explicacion})]})]})]},Ae.id)})}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{onClick:()=>c(null),className:"text-sm text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 px-3 py-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700",children:" Cerrar vista detallada"})})]})]},we.id))})]})},ke=()=>{var ue,we,Ae,de;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-semibold",children:l?"Editar evaluacin":"Nueva evaluacin"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{g(!1),o("lista"),_(null)},className:"px-3 py-1.5 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-md text-sm",children:"Cancelar"}),i.jsxs("button",{onClick:W,className:"px-4 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm flex items-center gap-1.5",disabled:n,children:[i.jsx(Fl,{className:"w-4 h-4"}),(x.cursosAsignados||[]).length>0?"Guardar y asignar":"Guardar evaluacin"]})]})]}),C&&i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-300 p-3 rounded-md flex items-center gap-2",children:[i.jsx(O1,{className:"w-5 h-5 flex-shrink-0"}),i.jsx("span",{children:C})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 border border-slate-200 dark:border-slate-700 rounded-lg",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ttulo de la evaluacin *"}),i.jsx("input",{type:"text",value:x.titulo,onChange:ae=>v({...x,titulo:ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Ej: Evaluacin SIMCE 4 Bsico - Competencia Lectora"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Asignatura"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>v({...x,asignatura:"Competencia Lectora"}),className:`flex-1 px-3 py-2 rounded-md border text-sm transition-colors ${x.asignatura==="Competencia Lectora"?"bg-blue-100 text-blue-700 border-blue-300 dark:bg-blue-900/40 dark:text-blue-300 dark:border-blue-700":"bg-slate-100 text-slate-700 border-slate-300 dark:bg-slate-700 dark:text-slate-200 dark:border-slate-600"}`,children:"Competencia Lectora"}),i.jsx("button",{type:"button",onClick:()=>v({...x,asignatura:"Pensamiento Lgico"}),className:`flex-1 px-3 py-2 rounded-md border text-sm transition-colors ${x.asignatura==="Pensamiento Lgico"?"bg-purple-100 text-purple-700 border-purple-300 dark:bg-purple-900/40 dark:text-purple-300 dark:border-purple-700":"bg-slate-100 text-slate-700 border-slate-300 dark:bg-slate-700 dark:text-slate-200 dark:border-slate-600"}`,children:"Pensamiento Lgico"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripcin (opcional)"}),i.jsx("textarea",{value:x.descripcion,onChange:ae=>v({...x,descripcion:ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Breve descripcin de la evaluacin",rows:3})]})]}),i.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[i.jsxs("label",{className:"flex items-center mb-2 text-sm font-medium text-slate-700 dark:text-slate-300",children:[i.jsx(qs,{className:"w-4 h-4 mr-1.5"}),"Asignar a cursos",(x.cursosAsignados||[]).length>0&&i.jsxs("span",{className:"ml-2 text-xs bg-indigo-100 dark:bg-indigo-900/50 text-indigo-700 dark:text-indigo-300 py-0.5 px-1.5 rounded-full",children:[(x.cursosAsignados||[]).length," seleccionado",(x.cursosAsignados||[]).length!==1?"s":""]})]}),i.jsx("p",{className:"mb-2 text-xs text-slate-500 dark:text-slate-400",children:"Seleccione los cursos a los que estar asignada esta evaluacin. Estar disponible para los estudiantes en cuanto guarde."}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",value:B,onChange:ae=>{M(ae.target.value),S(!0)},onFocus:()=>S(!0),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Buscar curso..."}),P&&(T.length>0||B)&&i.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-md max-h-60 overflow-y-auto",children:T.length===0&&B?i.jsx("div",{className:"p-3 text-center text-slate-500 dark:text-slate-400",children:"No se encontraron cursos"}):T.map(ae=>i.jsxs("div",{className:"px-3 py-2 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center",onClick:()=>{je(ae.id),M("")},children:[i.jsx("div",{className:`w-4 h-4 border rounded mr-2 flex items-center justify-center ${(x.cursosAsignados||[]).includes(ae.id)?"bg-indigo-600 border-indigo-600":"border-slate-400 dark:border-slate-500"}`,children:(x.cursosAsignados||[]).includes(ae.id)&&i.jsx(coe,{className:"w-3 h-3 text-white"})}),i.jsx("span",{children:ae.nombre})]},ae.id))})]}),(x.cursosAsignados||[]).length>0&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:(x.cursosAsignados||[]).map(ae=>{const fe=j.find(ge=>ge.id===ae);return i.jsxs("div",{className:"flex items-center bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-md text-sm",children:[i.jsx("span",{children:(fe==null?void 0:fe.nombre)||ae}),i.jsx("button",{onClick:()=>je(ae),className:"ml-1 text-slate-500 hover:text-slate-700 dark:text-slate-400 hover:dark:text-slate-200",children:i.jsx(xo,{className:"w-3 h-3"})})]},ae)})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Estudiantes asignados"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md p-3 max-h-40 overflow-y-auto text-sm",children:(()=>{const ae=z.filter(fe=>{if(fe.profile!=="ESTUDIANTE"||!fe.curso)return!1;const ge=gu(fe.curso);return(x.cursosAsignados||[]).includes(ge)});return ae.length===0?i.jsx("span",{className:"text-slate-500",children:"No hay estudiantes asignados a los cursos seleccionados."}):i.jsx("ul",{className:"list-disc pl-4",children:ae.map(fe=>i.jsxs("li",{className:"mb-1",children:[fe.nombreCompleto||fe.nombre||fe.id," ",i.jsxs("span",{className:"text-xs text-slate-400",children:["(",Z(gu(fe.curso)),")"]})]},fe.id))})})()})]})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Configuracin de presentacin"})}),i.jsx("div",{className:"flex space-x-6",children:i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:x.barajarAlternativas,onChange:ae=>v({...x,barajarAlternativas:ae.target.checked}),className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Barajar alternativas"})]})})]})]}),i.jsxs("div",{className:"mb-5 bg-slate-50 dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-md font-semibold mb-3",children:"Opciones de generacin con IA"}),ie.mensaje&&i.jsxs("div",{className:`mb-4 p-3 rounded-md flex items-center gap-2 ${ie.tipo==="error"?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-300":ie.tipo==="warning"?"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 text-amber-800 dark:text-amber-300":"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-800 dark:text-green-300"}`,children:[ie.tipo==="error"&&i.jsx(O1,{className:"w-5 h-5 flex-shrink-0"}),ie.tipo==="warning"&&i.jsx(qh,{className:"w-5 h-5 flex-shrink-0 animate-spin"}),ie.tipo==="success"&&i.jsx(pa,{className:"w-5 h-5 flex-shrink-0"}),i.jsx("span",{children:ie.mensaje})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Texto base (opcional)"}),i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:"Si proporciona un texto, las preguntas se generarn basadas en l. Si lo deja vaco, la IA generar automticamente un texto adecuado."}),i.jsx("textarea",{className:"w-full rounded-md border-slate-300 dark:border-slate-700 dark:bg-slate-800 text-sm focus:border-indigo-500 focus:ring-indigo-500 resize-y",value:J.textoProporcionado||"",onChange:ae=>le({...J,textoProporcionado:ae.target.value}),placeholder:x.asignatura==="Competencia Lectora"?"Ingrese aqu un texto para generar preguntas de comprensin lectora...":"Ingrese aqu un texto para crear problemas de pensamiento lgico relacionados...",rows:6})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cantidad de preguntas"}),i.jsxs("select",{className:"w-full rounded-md border-slate-300 dark:border-slate-700 dark:bg-slate-800 text-sm focus:border-indigo-500 focus:ring-indigo-500",value:J.cantidadPreguntas,onChange:ae=>le({...J,cantidadPreguntas:ae.target.value}),children:[i.jsx("option",{value:"2",children:"2 preguntas"}),i.jsx("option",{value:"4",children:"4 preguntas"}),i.jsx("option",{value:"6",children:"6 preguntas"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Dificultad"}),i.jsxs("select",{className:"w-full rounded-md border-slate-300 dark:border-slate-700 dark:bg-slate-800 text-sm focus:border-indigo-500 focus:ring-indigo-500",value:J.dificultad,onChange:ae=>le({...J,dificultad:ae.target.value}),children:[i.jsx("option",{value:"baja",children:"Baja"}),i.jsx("option",{value:"media",children:"Media"}),i.jsx("option",{value:"alta",children:"Alta"})]})]})]}),x.asignatura==="Competencia Lectora"&&i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades de Competencia Lectora"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(J.habilidadesLectura).map(([ae,fe])=>i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:fe,onChange:()=>{le({...J,habilidadesLectura:{...J.habilidadesLectura,[ae]:!fe}})},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 mr-2"}),i.jsx("span",{className:"text-sm",children:ae})]},ae))})]}),x.asignatura==="Pensamiento Lgico"&&i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ejes de Pensamiento Lgico"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(J.ejesMatematica).map(([ae,fe])=>i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:fe,onChange:()=>{le({...J,ejesMatematica:{...J.ejesMatematica,[ae]:!fe}})},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 mr-2"}),i.jsx("span",{className:"text-sm",children:ae})]},ae))})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{onClick:ce,disabled:y,className:`px-4 py-2 text-white rounded-md text-sm flex items-center gap-2 ${y?"bg-amber-500 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:y?i.jsxs(i.Fragment,{children:[i.jsx(qh,{className:"w-4 h-4 animate-spin"}),"Generando preguntas..."]}):i.jsxs(i.Fragment,{children:[i.jsx(gi,{className:"w-4 h-4"}),"Generar preguntas automticamente"]})})}),q?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 border border-slate-200 dark:border-slate-700 rounded-lg",children:[x.asignatura==="Competencia Lectora"&&((ue=x.preguntas[0])==null?void 0:ue.id)===q.id&&i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Texto base para preguntas de comprensin"}),i.jsx("textarea",{value:q.textoBase||"",onChange:ae=>Q({...q,textoBase:ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Texto de lectura para las preguntas...",rows:5})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Enunciado de la pregunta *"}),i.jsx("textarea",{value:q.enunciado,onChange:ae=>Q({...q,enunciado:ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Escribe el enunciado de la pregunta...",rows:3})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Estndar de aprendizaje *"}),i.jsx("select",{value:q.estandarAprendizaje,onChange:ae=>Q({...q,estandarAprendizaje:ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",children:x.asignatura==="Competencia Lectora"?rot.map((ae,fe)=>i.jsx("option",{value:ae,children:ae},fe)):not.map((ae,fe)=>i.jsx("option",{value:ae,children:ae},fe))})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Habilidad (opcional)"}),i.jsx("input",{value:q.habilidad||"",onChange:ae=>Q({...q,habilidad:ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Ej: Interpretar, Analizar, Resolver problemas..."})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block mb-3 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Alternativas * (marca una como correcta)"}),i.jsx("div",{className:"space-y-3",children:q.alternativas.map((ae,fe)=>i.jsxs("div",{className:"flex items-start",children:[i.jsxs("div",{className:"flex items-center mt-1 mr-2",children:[i.jsx("input",{type:"radio",checked:ae.esCorrecta,onChange:()=>{Q({...q,alternativas:q.alternativas.map(ge=>({...ge,esCorrecta:ge.id===ae.id}))})},className:"rounded-full border-slate-300 text-indigo-600 focus:ring-indigo-500"}),i.jsxs("span",{className:"ml-1 font-semibold",children:[ae.id,")"]})]}),i.jsx("div",{className:"flex-1",children:i.jsx("textarea",{value:ae.texto,onChange:ge=>{Q({...q,alternativas:q.alternativas.map(xe=>xe.id===ae.id?{...xe,texto:ge.target.value}:xe)})},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:`Texto de la alternativa ${ae.id}...`,rows:2})})]},ae.id))})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Explicacin para alternativa correcta (recomendado)"}),i.jsx("textarea",{value:((we=q.alternativas.find(ae=>ae.esCorrecta))==null?void 0:we.explicacion)||"",onChange:ae=>{Q({...q,alternativas:q.alternativas.map(fe=>fe.esCorrecta?{...fe,explicacion:ae.target.value}:fe)})},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Explica por qu esta es la respuesta correcta...",rows:2})]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>{Q(null),_(null)},className:"px-3 py-1.5 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-md text-sm",children:"Cancelar"}),i.jsxs("button",{onClick:be,className:"px-4 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm flex items-center gap-1.5",children:[i.jsx(Fl,{className:"w-4 h-4"}),"Guardar pregunta"]})]})]}):i.jsx("div",{className:"space-y-4",children:(x.preguntas||[]).length===0?i.jsxs("div",{className:"text-center py-8 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx(uoe,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No hay preguntas agregadas an. Puedes generar preguntas automticamente o agregarlas manualmente."})]}):i.jsxs(i.Fragment,{children:[x.asignatura==="Competencia Lectora"&&((de=(Ae=x.preguntas)==null?void 0:Ae[0])==null?void 0:de.textoBase)&&i.jsxs("div",{className:"p-5 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-700 shadow-sm mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg mr-3",children:i.jsx(ps,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-blue-800 dark:text-blue-200 text-lg",children:"Texto Base de Comprensin Lectora"}),i.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-sm",children:"Este texto acompaar a todas las preguntas de lectura"})]})]}),i.jsx("button",{onClick:()=>{var fe;const ae=(fe=x.preguntas)==null?void 0:fe[0];ae&&oe(ae)},className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 hover:dark:text-blue-200 rounded-full hover:bg-blue-100 dark:hover:bg-blue-800/50",title:"Editar texto base",children:i.jsx(X0,{className:"w-4 h-4"})})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-md border border-blue-100 dark:border-blue-800 shadow-inner",children:i.jsx("div",{className:"prose prose-sm max-w-none text-slate-800 dark:text-slate-200",children:i.jsx("p",{className:"whitespace-pre-wrap leading-relaxed text-base",children:x.preguntas[0].textoBase})})})]}),(x.preguntas||[]).map((ae,fe)=>{var ge,xe;return i.jsx("div",{className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"font-medium",children:[i.jsxs("span",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 py-1 px-2.5 rounded-md mr-2 text-sm font-semibold",children:["Pregunta ",fe+1]}),ae.enunciado]}),i.jsx("div",{className:"mt-3 ml-6 space-y-2",children:ae.alternativas.map(Ue=>i.jsxs("div",{className:`flex items-start p-2 rounded-md transition-colors ${Ue.esCorrecta?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 font-medium border border-green-200 dark:border-green-800":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[i.jsxs("span",{className:"font-semibold mr-2 min-w-[20px]",children:[Ue.id,")"]}),i.jsx("span",{className:"flex-1",children:Ue.texto}),Ue.esCorrecta&&i.jsx(pa,{className:"ml-2 w-4 h-4 text-green-600 dark:text-green-400"})]},Ue.id))}),i.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200 dark:border-slate-700 text-xs text-slate-500 dark:text-slate-400",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Estndar:"})," ",ae.estandarAprendizaje]}),ae.habilidad&&i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Habilidad:"})," ",ae.habilidad]}),((ge=ae.alternativas.find(Ue=>Ue.esCorrecta))==null?void 0:ge.explicacion)&&i.jsxs("div",{className:"mt-2 bg-green-50 dark:bg-green-900/20 p-2 rounded-md border border-green-100 dark:border-green-800",children:[i.jsx("span",{className:"font-semibold text-green-800 dark:text-green-300",children:"Explicacin:"}),i.jsx("span",{className:"text-green-700 dark:text-green-300 ml-1",children:(xe=ae.alternativas.find(Ue=>Ue.esCorrecta))==null?void 0:xe.explicacion})]})]})]}),i.jsxs("div",{className:"flex gap-1 ml-3",children:[i.jsx("button",{onClick:()=>oe(ae),className:"p-1.5 text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 rounded hover:bg-slate-100 hover:dark:bg-slate-700",title:"Editar pregunta",children:i.jsx(X0,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>X(ae.id),className:"p-1.5 text-red-500 hover:text-red-700 dark:text-red-400 hover:dark:text-red-300 rounded hover:bg-red-50 hover:dark:bg-red-900/20",title:"Eliminar pregunta",children:i.jsx(Vn,{className:"w-4 h-4"})})]})]})},ae.id)})]})})]})]})};return i.jsxs(i.Fragment,{children:[s==="lista"&&!m&&De(),(s==="detalle"||m)&&ke()]})},xot=e=>(console.log("Google Sans Code font would be added here"),e);var mZ={};const vot=({className:e})=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[i.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8Z"}),i.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),pZ=["Seleccin mltiple","Verdadero o Falso","Trminos pareados","Desarrollo","Comprensin de lectura"],YAe=$0(Jx),bot=vl(YAe,"generarRubricaConGemini"),yot=vl(YAe,"generarDescriptorDimensionConGemini"),EO={"Seleccin mltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Trminos pareados":[5,10,15],Desarrollo:[5,10,15],"Comprensin de lectura":[5,10,15]},wot=({item:e,showAnswers:t=!1,shuffledDefinitions:r=[]})=>{var o;const n=e.puntaje??1,a=l=>{const c=Array.isArray(l)?l.slice(0,4):[];for(;c.length<4;)c.push("");return c},s=l=>l.length<=1?l:[...l.slice(1),l[0]];return i.jsxs("div",{className:"p-3 border rounded-lg bg-white dark:bg-slate-800 dark:border-slate-700",children:[i.jsxs("div",{className:"mb-2 flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-200",children:e.tipo}),i.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:e.pregunta||(e.tipo==="Comprensin de lectura"?"Comprensin de lectura":"")})]}),i.jsxs("div",{className:"flex items-center gap-2",children:["habilidadBloom"in e&&e.habilidadBloom&&i.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-200",children:["Bloom: ",e.habilidadBloom]}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[n," pts"]})]})]}),e.tipo==="Seleccin mltiple"&&i.jsxs("div",{className:"ml-1 mt-2 space-y-2",children:[i.jsx("div",{className:"text-xs italic text-slate-500 dark:text-slate-400 mb-1",children:"Marca la alternativa correcta."}),a(e.opciones).map((l,c)=>{const u=t&&c===e.respuestaCorrecta;return i.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/30":""}`,children:[i.jsx("div",{className:"w-5 h-5 border rounded-full flex-shrink-0"}),i.jsxs("span",{children:[String.fromCharCode(65+c),") ",l]})]},c)})]}),e.tipo==="Verdadero o Falso"&&i.jsxs("div",{className:"ml-1 mt-2 flex items-center gap-6",children:[i.jsx("div",{className:"text-xs italic text-slate-500 dark:text-slate-400",children:"Indica si la afirmacin es verdadera (V) o falsa (F)."}),i.jsx("div",{className:"flex-1"}),i.jsx("div",{className:`px-3 py-1 rounded ${t&&e.respuestaCorrecta===!0?"bg-green-100 dark:bg-green-900/30":"bg-slate-100 dark:bg-slate-700"}`,children:"V"}),i.jsx("div",{className:`px-3 py-1 rounded ${t&&e.respuestaCorrecta===!1?"bg-green-100 dark:bg-green-900/30":"bg-slate-100 dark:bg-slate-700"}`,children:"F"})]}),e.tipo==="Desarrollo"&&i.jsx("div",{className:"mt-3 border rounded-md h-24 bg-slate-50 dark:bg-slate-700/40"}),e.tipo==="Trminos pareados"&&(()=>{const l=e.pares||[],c=l.map(f=>f.concepto),u=s(l.map(f=>f.definicion)),d="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");return i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-xs italic text-slate-500 dark:text-slate-400 mb-2",children:"Une cada concepto (columna izquierda) con su definicin (columna derecha)."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold mb-1",children:"Columna A: Conceptos"}),i.jsx("div",{className:"space-y-1",children:c.map((f,A)=>i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("span",{className:"font-semibold w-6 text-right",children:[A+1,"."]}),i.jsx("span",{children:f})]},A))})]}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold mb-1",children:"Columna B: Definiciones"}),i.jsx("div",{className:"space-y-1",children:u.map((f,A)=>i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("span",{className:"font-semibold w-6 text-right",children:[d[A]||"?","."]}),i.jsx("span",{children:f})]},A))})]})]})]})})(),e.tipo==="Comprensin de lectura"&&i.jsxs("div",{className:"mt-2 space-y-3",children:[i.jsx("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/40 rounded-md whitespace-pre-wrap",children:e.texto}),i.jsx("div",{className:"space-y-3",children:(o=e.preguntas)==null?void 0:o.map((l,c)=>{var u;return i.jsxs("div",{className:"p-3 border rounded-md bg-white dark:bg-slate-800 dark:border-slate-700",children:[i.jsxs("div",{className:"mb-1 flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-200",children:["CL-",c+1]}),i.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-200",children:l.tipo}),i.jsx("div",{className:"font-medium",children:l.pregunta})]}),i.jsxs("div",{className:"flex items-center gap-2",children:["habilidadBloom"in l&&l.habilidadBloom&&i.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-200",children:["Bloom: ",l.habilidadBloom]}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[l.puntaje??1," pts"]})]})]}),l.tipo==="Seleccin mltiple"?i.jsx("div",{className:"ml-1 mt-1 space-y-1",children:(u=l.opciones)==null?void 0:u.map((d,f)=>{const A=t&&f===l.respuestaCorrecta;return i.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${A?"bg-green-100 dark:bg-green-900/30":""}`,children:[i.jsx("div",{className:"w-4 h-4 border rounded-full flex-shrink-0"}),i.jsxs("span",{children:[String.fromCharCode(65+f),") ",d]})]},f)})}):i.jsx("div",{className:"mt-2 border rounded-md h-16 bg-slate-50 dark:bg-slate-700/40"})]},c)})})]})]})},Not=()=>{const e=w.useMemo(()=>pZ.reduce((U,Y)=>(U[Y]=0,U),{}),[]),t=w.useMemo(()=>({nombre:"",asignatura:(ma==null?void 0:ma[0])||"",nivel:(Y0==null?void 0:Y0[0])||"",contenido:"",tiposActividad:e,dificultad:"Intermedio",isNee:!1,selectedNee:[]}),[e]),[r,n]=w.useState(t),[a,s]=w.useState(!1),[o,l]=w.useState(null),[c,u]=w.useState(null),[d,f]=w.useState([]),[A,m]=w.useState(!1),[g,x]=w.useState(!1),[v,y]=w.useState(!1),{currentUser:N}=yE();w.useEffect(()=>{if(N){const U=dst(f);return()=>U()}},[N]);const C=U=>{const{name:Y,value:R}=U.target;n(D=>({...D,[Y]:R}))},_=U=>{n(Y=>{var D;const R={...Y.tiposActividad};return R[U]>0?R[U]=0:R[U]=((D=EO[U])==null?void 0:D[0])||1,{...Y,tiposActividad:R}})},j=(U,Y)=>{n(R=>({...R,tiposActividad:{...R.tiposActividad,[U]:Y}}))},I=U=>{n(Y=>{const R=Y.selectedNee.includes(U)?Y.selectedNee.filter(D=>D!==U):[...Y.selectedNee,U];return{...Y,selectedNee:R}})},T=U=>{const Y=String(U||"").trim().toLowerCase();if(Y){if(Y.includes("record"))return"Recordar";if(Y.includes("comprend")||Y.includes("entend"))return"Comprender";if(Y.includes("aplic"))return"Aplicar";if(Y.includes("analiz"))return"Analizar";if(Y.includes("evalu"))return"Evaluar";if(Y.includes("crea")||Y.includes("sintet"))return"Crear"}},k=U=>{switch(U){case"Seleccin mltiple":return"Comprender";case"Verdadero o Falso":return"Recordar";case"Desarrollo":return"Analizar";case"Trminos pareados":return"Comprender";case"Comprensin de lectura":return"Comprender";default:return"Comprender"}},B=U=>{const R=(Array.isArray(U)?U.map(D=>typeof D=="string"?D:(D==null?void 0:D.texto)??""):[]).slice(0,4);for(;R.length<4;)R.push("");return R},M=U=>{if(typeof(U==null?void 0:U.respuestaCorrecta)=="number")return Math.max(0,Math.min(3,U.respuestaCorrecta));if(Array.isArray(U==null?void 0:U.alternativas)){const D=U.alternativas.findIndex(W=>W&&(W.esCorrecta===!0||W.correcta===!0));if(D>=0&&D<4)return D}const Y=String((U==null?void 0:U.correcta)||(U==null?void 0:U.respuesta)||(U==null?void 0:U.respuestaCorrecta)||"").trim().toUpperCase(),R={A:0,B:1,C:2,D:3};return Y in R?R[Y]:0},P=U=>{const Y=B(U.opciones??U.alternativas),R=M(U),D=T(U.habilidadBloom)||k("Seleccin mltiple");return{id:U.id||crypto.randomUUID(),tipo:"Seleccin mltiple",pregunta:U.pregunta||U.enunciado||"Pregunta",puntaje:U.puntaje??1,opciones:Y,respuestaCorrecta:R,habilidadBloom:D}},S=U=>{let Y=!1;typeof(U==null?void 0:U.respuestaCorrecta)=="boolean"?Y=U.respuestaCorrecta:typeof(U==null?void 0:U.esVerdadero)=="boolean"?Y=U.esVerdadero:U!=null&&U.correcta&&(Y=String(U.correcta).toUpperCase().startsWith("V"));const R=T(U.habilidadBloom)||k("Verdadero o Falso");return{id:U.id||crypto.randomUUID(),tipo:"Verdadero o Falso",pregunta:U.pregunta||U.enunciado||"Afirmacin",puntaje:U.puntaje??1,respuestaCorrecta:Y,habilidadBloom:R}},L=U=>{const Y=T(U.habilidadBloom)||k("Desarrollo");return{id:U.id||crypto.randomUUID(),tipo:"Desarrollo",pregunta:U.pregunta||U.enunciado||"Pregunta abierta",puntaje:U.puntaje??1,habilidadBloom:Y}},H=U=>{let Y=Array.isArray(U==null?void 0:U.pares)?U.pares:[];if((!Y||Y.length===0)&&Array.isArray(U==null?void 0:U.conceptos)&&Array.isArray(U==null?void 0:U.definiciones)){const D=Math.min(U.conceptos.length,U.definiciones.length);Y=Array.from({length:D},(W,J)=>({concepto:U.conceptos[J],definicion:U.definiciones[J]}))}Y=(Y||[]).map(D=>({concepto:(D==null?void 0:D.concepto)??"",definicion:(D==null?void 0:D.definicion)??""}));const R=T(U.habilidadBloom)||k("Trminos pareados");return{id:U.id||crypto.randomUUID(),tipo:"Trminos pareados",pregunta:U.pregunta||U.enunciado||"Relaciona los trminos",puntaje:U.puntaje??1,pares:Y,habilidadBloom:R}},q=U=>{const Y=typeof(U==null?void 0:U.texto)=="string"?U.texto:Array.isArray(U==null?void 0:U.texto)?U.texto.join(`
`):(U==null?void 0:U.lectura)||"",D=(Array.isArray(U==null?void 0:U.preguntas)?U.preguntas:[]).map(J=>{const le=T(J==null?void 0:J.habilidadBloom),ie=((J==null?void 0:J.tipo)||"").toLowerCase();if(ie.includes("multiple")||ie.includes("seleccion")){const re=P(J);return re.habilidadBloom||(re.habilidadBloom=le||k("Seleccin mltiple")),re}if(ie.includes("desarrollo")||ie.includes("abierta")){const re=L(J);return re.habilidadBloom||(re.habilidadBloom=le||k("Desarrollo")),re}if(J!=null&&J.alternativas||J!=null&&J.opciones){const re=P(J);return re.habilidadBloom||(re.habilidadBloom=le||k("Seleccin mltiple")),re}return null}).filter(Boolean),W=T(U.habilidadBloom)||k("Comprensin de lectura");return{id:U.id||crypto.randomUUID(),tipo:"Comprensin de lectura",pregunta:U.pregunta||U.enunciado||"Comprensin de lectura",puntaje:U.puntaje??Math.max(1,D.reduce((J,le)=>J+(le.puntaje??1),0)),texto:Y,preguntas:D,habilidadBloom:W}},Q=async U=>{var R;if(U.preventDefault(),!N||!N.uid||!N.email||!N.id){l("Debes iniciar sesin para generar una evaluacin.");return}const Y=Object.values(r.tiposActividad||{}).reduce((D,W)=>D+(Number(W)||0),0);if(!r.nombre.trim()||!r.contenido.trim()||Y===0){l("Nombre, Contenido y al menos un tipo con cantidad (> 0) son obligatorios.");return}s(!0),l(null);try{V9("Evaluacin - Pruebas",N);const W={objetivo:"",cantidadesPorTipo:Object.entries(r.tiposActividad).reduce((me,[Ve,Xe])=>{const Ie=Number(Xe)||0;return Ie>0&&(me[Ve]=Ie),me},{}),metadata:{nombre:r.nombre,asignatura:r.asignatura,nivel:r.nivel,contenido:r.contenido,dificultad:r.dificultad,nee:r.isNee?r.selectedNee:[]},contextoAdicional:"Directrices: vocabulario y contexto adecuados al nivel educativo en Chile. Si hay NEE, usar lenguaje claro, reducir complejidad, textos ms cortos y distractores no ambiguos."},le=`${mZ.REACT_APP_FUNCTIONS_BASE_URL||"https://us-central1-plania-clase.cloudfunctions.net"}/generarPruebaConGeminiHttp`,ie=await((R=oa.currentUser)==null?void 0:R.getIdToken());if(!ie)throw new Error("No se pudo obtener token de autenticacin.");const re=await fetch(le,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ie}`},body:JSON.stringify(W)});if(!re.ok){const me=await re.text();throw new Error(`Error en funcin: ${re.status} ${me}`)}const ce=await re.json(),oe=ce.prueba||ce.data&&ce.data.prueba,be=me=>me.normalize("NFD").replace(/[\u0300-\u036f]/g,""),X=me=>be((me||"").toLowerCase()),je=me=>{const Ve=X(String(me||""));return Ve?Ve.includes("comprension")||Ve.includes("lectura")||Ve.includes("reading")?"Comprensin de lectura":Ve.includes("multiple")||Ve.includes("seleccion")||Ve.includes("mcq")?"Seleccin mltiple":Ve.includes("verdadero")||Ve.includes("falso")||Ve==="vf"||Ve.includes("true")||Ve.includes("false")?"Verdadero o Falso":Ve.includes("paread")||Ve.includes("matching")||Ve.includes("emparejar")?"Trminos pareados":Ve.includes("desarrollo")||Ve.includes("respuesta corta")||Ve.includes("abierta")?"Desarrollo":null:null},De=me=>{const Xe=(Array.isArray(me)?me.map(Ie=>typeof Ie=="string"?Ie:(Ie==null?void 0:Ie.texto)??""):[]).slice(0,4);for(;Xe.length<4;)Xe.push("");return Xe},ke=me=>{if(typeof(me==null?void 0:me.respuestaCorrecta)=="number")return Math.max(0,Math.min(3,me.respuestaCorrecta));if(Array.isArray(me==null?void 0:me.alternativas)){const Ie=me.alternativas.findIndex(Be=>Be&&(Be.esCorrecta===!0||Be.correcta===!0));if(Ie>=0&&Ie<4)return Ie}const Ve=String((me==null?void 0:me.correcta)||(me==null?void 0:me.respuesta)||"").trim().toUpperCase(),Xe={A:0,B:1,C:2,D:3};return Ve in Xe?Xe[Ve]:0},ue=me=>{const Ve=String(me||"").trim().toLowerCase();if(Ve){if(Ve.includes("record"))return"Recordar";if(Ve.includes("comprend")||Ve.includes("entend"))return"Comprender";if(Ve.includes("aplic"))return"Aplicar";if(Ve.includes("analiz"))return"Analizar";if(Ve.includes("evalu"))return"Evaluar";if(Ve.includes("crea")||Ve.includes("sintet"))return"Crear"}},we=me=>{switch(me){case"Seleccin mltiple":return"Comprender";case"Verdadero o Falso":return"Recordar";case"Desarrollo":return"Analizar";case"Trminos pareados":return"Comprender";case"Comprensin de lectura":return"Comprender";default:return"Comprender"}},Ae=P,de=S,ae=L,fe=H,ge=q,xe=me=>{switch(je(me.tipo)||(me!=null&&me.alternativas||me!=null&&me.opciones?"Seleccin mltiple":null)){case"Seleccin mltiple":return Ae(me);case"Verdadero o Falso":return de(me);case"Desarrollo":return ae(me);case"Trminos pareados":return fe(me);case"Comprensin de lectura":return ge(me);default:return me!=null&&me.alternativas||me!=null&&me.opciones?Ae(me):me!=null&&me.pares||me!=null&&me.conceptos&&(me!=null&&me.definiciones)?fe(me):(me!=null&&me.texto||me!=null&&me.lectura)&&Array.isArray(me==null?void 0:me.preguntas)?ge(me):typeof(me==null?void 0:me.respuestaCorrecta)=="boolean"||typeof(me==null?void 0:me.esVerdadero)=="boolean"||/^(v|f)$/i.test(String((me==null?void 0:me.correcta)||""))?de(me):ae(me)}},Ue=(Array.isArray(oe==null?void 0:oe.preguntas)?oe.preguntas:[]).map((me,Ve)=>{const Xe=xe(me);return Xe?{...Xe,id:Xe.id||crypto.randomUUID(),pregunta:Xe.pregunta||`tem ${Ve+1}`,puntaje:Xe.puntaje??1}:null}).filter(Boolean),qe=oe.instruccionesGenerales&&oe.instruccionesGenerales.trim().length>0?oe.instruccionesGenerales:"Lee atentamente y responde cada tem segn se indique. Marca solo una alternativa cuando corresponda. Justifica tus respuestas en los tems de desarrollo.",Ze=(Ue||[]).reduce((me,Ve)=>{if(Ve.tipo==="Comprensin de lectura"&&Array.isArray(Ve.preguntas)){const Xe=Ve.preguntas.reduce((Ie,Be)=>Ie+(Be.puntaje??1),0);return me+Xe}return me+(Ve.puntaje??1)},0),We={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:r.nombre,asignatura:r.asignatura,nivel:r.nivel,contenidoOriginal:r.contenido,tiposActividadOriginal:r.tiposActividad,objetivo:oe.objetivo||"",instruccionesGenerales:qe,puntajeIdeal:Ze,actividades:[{id:crypto.randomUUID(),titulo:r.nombre,instrucciones:qe,items:Ue}],dificultad:r.dificultad,...r.isNee&&{adaptacionNEE:r.selectedNee}};u(We),m(!1)}catch(D){console.error(D),l("Error al generar la prueba con IA. Revisa la consola para ms detalles.")}finally{s(!1)}},z=async()=>{if(c)try{await fst(c),alert("Prueba guardada con xito.")}catch(U){console.error(U),alert("No se pudo guardar la prueba.")}},K=async U=>{if(window.confirm("Eliminar esta prueba?"))try{await hst(U),(c==null?void 0:c.id)===U&&u(null)}catch(Y){console.error(Y),alert("No se pudo eliminar la prueba.")}},Z=async U=>{try{x(!0);const Y=new wr({unit:"pt",format:"letter"});try{xot(Y),Y.setFont("GoogleSansCode","normal")}catch{}const R=40;let D=R;Y.setFontSize(12),Y.text("LICEO INDUSTRIAL DE RECOLETA",R,D),Y.text("SUBDIRECCIN DE GESTIN PEDAGGICA",Y.internal.pageSize.getWidth()-R,D,{align:"right"}),D+=24,Y.setFont(void 0,"bold"),Y.setFontSize(18),Y.text(U.nombre,Y.internal.pageSize.getWidth()/2,D,{align:"center"}),Y.setFont(void 0,"normal"),D+=18,Pi(Y,{startY:D+6,theme:"grid",styles:{fontSize:10,cellPadding:6},head:[["Campo","Valor"]],body:[["Fecha",new Date(U.fechaCreacion).toLocaleDateString()],["Asignatura",U.asignatura],["Nivel",U.nivel],["Puntaje Ideal",String(U.puntajeIdeal)],["Objetivo",U.objetivo],["Instrucciones Generales",U.instruccionesGenerales]]}),D=Y.lastAutoTable.finalY+16,U.actividades.forEach((le,ie)=>{D>Y.internal.pageSize.getHeight()-120&&(Y.addPage(),D=R),Y.setFontSize(13),Y.setFont(void 0,"bold"),Y.text(`Actividad ${ie+1}: ${le.titulo}`,R,D),D+=14,Y.setFont(void 0,"normal"),Y.setFontSize(10);const re=Y.splitTextToSize(le.instrucciones,Y.internal.pageSize.getWidth()-R*2);Y.text(re,R,D),D+=re.length*12+6,le.items.forEach((ce,oe)=>{const be=ce.habilidadBloom?` [Bloom: ${ce.habilidadBloom}]`:"",X=`${oe+1}. ${ce.pregunta} (${ce.puntaje} pts)${be}`,je=Y.splitTextToSize(X,Y.internal.pageSize.getWidth()-R*2);switch(D>Y.internal.pageSize.getHeight()-100&&(Y.addPage(),D=R),Y.setFont(void 0,"bold"),Y.text(je,R,D),D+=je.length*12+4,Y.setFont(void 0,"normal"),ce.tipo){case"Seleccin mltiple":{ce.opciones.forEach((De,ke)=>{const ue=`${String.fromCharCode(65+ke)}) ${De}`,we=Y.splitTextToSize(ue,Y.internal.pageSize.getWidth()-R*2-16);Y.text(we,R+16,D),D+=we.length*12}),D+=8;break}case"Verdadero o Falso":{Y.text("V ____    F ____",R+16,D),D+=18;break}case"Desarrollo":{Y.rect(R,D-10,Y.internal.pageSize.getWidth()-R*2,60),D+=70;break}case"Trminos pareados":{const De=ce.pares;Pi(Y,{startY:D,theme:"grid",styles:{fontSize:10,cellPadding:6},head:[["Columna A: Concepto","Columna B: Definicin"]],body:De.map((ke,ue)=>[`${ue+1}. ${ke.concepto}`,ke.definicion])}),D=Y.lastAutoTable.finalY+8;break}case"Comprensin de lectura":{const De=ce,ke=Y.splitTextToSize(De.texto,Y.internal.pageSize.getWidth()-R*2);Y.text(ke,R,D),D+=ke.length*12+8,De.preguntas.forEach((ue,we)=>{const Ae=ue.habilidadBloom?` [Bloom: ${ue.habilidadBloom}]`:"",de=`CL-${we+1}. ${ue.pregunta} (${ue.puntaje} pts)${Ae}`,ae=Y.splitTextToSize(de,Y.internal.pageSize.getWidth()-R*2);D>Y.internal.pageSize.getHeight()-100&&(Y.addPage(),D=R),Y.setFont(void 0,"bold"),Y.text(ae,R+8,D),D+=ae.length*12+4,Y.setFont(void 0,"normal"),ue.tipo==="Seleccin mltiple"?(ue.opciones.forEach((fe,ge)=>{const xe=`${String.fromCharCode(65+ge)}) ${fe}`,Ue=Y.splitTextToSize(xe,Y.internal.pageSize.getWidth()-R*2-24);Y.text(Ue,R+24,D),D+=Ue.length*12}),D+=6):(Y.rect(R+8,D-10,Y.internal.pageSize.getWidth()-R*2-16,50),D+=58)});break}}})});const W=new Date().toISOString().split("T")[0],J=`${U.nombre.replace(/\s/g,"_")}_${U.asignatura.replace(/\s/g,"_")}_${W}.pdf`;Y.save(J),x(!1),alert(`PDF generado y descargado como "${J}"`)}catch(Y){console.error(Y),x(!1),alert("No se pudo generar el PDF.")}};if(c){const U=async(Y,R)=>{var D,W;try{const J=c.actividades.findIndex(xe=>xe.id===Y);if(J<0)return;const le=c.actividades[J],ie=le.items.findIndex(xe=>xe.id===R);if(ie<0)return;const re=le.items[ie],ce=xe=>xe,oe=c.objetivo&&c.objetivo.trim().length>0?c.objetivo:"",be={[ce(re.tipo)]:1},X={objetivo:oe,cantidadesPorTipo:be,metadata:{nombre:c.nombre,asignatura:c.asignatura,nivel:c.nivel,contenido:c.contenidoOriginal,dificultad:c.dificultad||"Intermedio",nee:c.adaptacionNEE||[]},contextoAdicional:`Regenerar 1 tem del tipo ${re.tipo} manteniendo nivel y asignatura indicados.`},De=`${mZ.REACT_APP_FUNCTIONS_BASE_URL||"https://us-central1-plania-clase.cloudfunctions.net"}/generarPruebaConGeminiHttp`,ke=await((D=oa.currentUser)==null?void 0:D.getIdToken());if(!ke)throw new Error("No se pudo obtener token de autenticacin.");const ue=await fetch(De,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ke}`},body:JSON.stringify(X)});if(!ue.ok)throw new Error(await ue.text());const we=await ue.json(),Ae=Array.isArray((W=we==null?void 0:we.prueba)==null?void 0:W.preguntas)?we.prueba.preguntas:[];if(Ae.length===0)throw new Error("La IA no devolvi tems nuevos.");const de=Ae[0],ae=(()=>{const xe=((de==null?void 0:de.tipo)||"").toLowerCase();return xe.includes("mltiple")||xe.includes("multiple")||xe.includes("seleccion")?"Seleccin mltiple":xe.includes("verdadero")||xe.includes("falso")||xe==="vf"?"Verdadero o Falso":xe.includes("paread")||xe.includes("matching")||xe.includes("emparejar")?"Trminos pareados":xe.includes("comprension")||xe.includes("lectura")?"Comprensin de lectura":xe.includes("desarrollo")||xe.includes("respuesta corta")||xe.includes("abierta")?"Desarrollo":null})();let fe=null;if(ae==="Seleccin mltiple"?fe=P(de):ae==="Verdadero o Falso"?fe=S(de):ae==="Desarrollo"?fe=L(de):ae==="Trminos pareados"?fe=H(de):ae==="Comprensin de lectura"?fe=q(de):(de!=null&&de.opciones||de!=null&&de.alternativas)&&(fe=P(de)),!fe)throw new Error("No se pudo normalizar el tem generado.");const ge={...c};ge.actividades=c.actividades.map((xe,Ue)=>Ue!==J?xe:{...xe,items:xe.items.map((qe,Ze)=>Ze===ie?{...fe,id:qe.id}:qe)}),u(ge)}catch(J){console.error("No se pudo regenerar el tem:",J),alert("No se pudo regenerar el tem. Intenta de nuevo.")}};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("button",{onClick:()=>u(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>m(!A),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[i.jsx(vot,{open:!A})," ",i.jsxs("span",{children:[A?"Ocultar":"Mostrar"," Respuestas"]})]}),i.jsx("button",{onClick:()=>y(Y=>!Y),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:v?"Orden original":"Ordenar por tipo"}),i.jsx("button",{onClick:z,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),i.jsxs("button",{onClick:()=>c&&Z(c),disabled:g,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[g?"...":i.jsx(xoe,{})," PDF"]})]})]}),i.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[i.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[i.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),i.jsx("span",{children:"SUBDIRECCIN DE GESTIN PEDAGGICA"})]}),i.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:c.nombre}),i.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Asignatura:"})," ",c.asignatura]}),i.jsxs("p",{className:"text-right",children:[i.jsx("strong",{children:"Puntaje Ideal:"})," ",c.puntajeIdeal]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Nivel:"})," ",c.nivel]})]}),i.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[i.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",c.dificultad||"Intermedio"]}),c.adaptacionNEE&&c.adaptacionNEE.length>0&&i.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",c.adaptacionNEE.join(", ")]})]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",c.objetivo]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Instrucciones Generales:"})," ",c.instruccionesGenerales]})]}),c.actividades.map(Y=>i.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:Y.titulo}),i.jsx("p",{className:"italic text-sm mb-4",children:Y.instrucciones}),i.jsx("div",{className:"space-y-6",children:(()=>{const R={"Comprensin de lectura":0,"Seleccin mltiple":1,"Verdadero o Falso":2,"Trminos pareados":3,Desarrollo:4};return(v?[...Y.items||[]].sort((W,J)=>(R[W.tipo]??99)-(R[J.tipo]??99)):Y.items||[]).map(W=>i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"button",onClick:()=>U(Y.id,W.id),className:"text-xs bg-sky-600 text-white px-3 py-1 rounded hover:bg-sky-700",children:"Regenerar tem"})}),i.jsx(wot,{item:W,showAnswers:A})]},W.id))})()})]},Y.id))]})]})}return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Gua"}),i.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Gua ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",name:"nombre",value:r.nombre,onChange:C,placeholder:"Ej: Gua N1 - La Clula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:"Asignatura"}),i.jsx("select",{name:"asignatura",value:r.asignatura,onChange:C,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:ma.map(U=>i.jsx("option",{children:U},U))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:"Nivel"}),i.jsx("select",{name:"nivel",value:r.nivel,onChange:C,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:Y0.map(U=>i.jsx("option",{children:U},U))})]}),i.jsx("div",{})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),i.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fcil","Intermedio","Avanzado"].map((U,Y)=>i.jsx("button",{type:"button",onClick:()=>n(R=>({...R,dificultad:U})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50 ${Y===0?"rounded-l-lg":""} ${Y===2?"rounded-r-lg":""} ${r.dificultad===U?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:U},U))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:r.isNee,onChange:U=>n(Y=>({...Y,isNee:U.target.checked,selectedNee:U.target.checked?Y.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),r.isNee&&i.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:H5.map(U=>i.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:r.selectedNee.includes(U),onChange:()=>I(U),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:U})]},U))})]})]})]}),i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:"Contenido a evaluar"}),i.jsx("textarea",{name:"contenido",value:r.contenido,onChange:C,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("div",{className:"space-y-3",children:pZ.map(U=>{var Y;return i.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:!!r.tiposActividad[U],onChange:()=>_(U),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:U})]}),r.tiposActividad[U]&&EO[U]&&i.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),(Y=EO[U])==null?void 0:Y.map(R=>i.jsx("button",{type:"button",onClick:()=>j(U,R),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${r.tiposActividad[U]===R?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:R},R))]})]},U)})}),o&&i.jsx("p",{className:"text-red-500 text-sm",children:o}),i.jsx("div",{className:"text-right",children:i.jsx("button",{type:"submit",disabled:a,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:a?"Generando...":"Generar Prueba"})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),i.jsx("div",{className:"space-y-2",children:d.length>0?d.map(U=>i.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:U.nombre}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[U.asignatura," - ",U.nivel," (",new Date(U.fechaCreacion).toLocaleDateString(),")"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>u(U),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),i.jsx("button",{onClick:()=>K(U.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},U.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},Cot=({rubricas:e,onSave:t,onDelete:r,onCreate:n,allUsers:a,onCreatedInteractiva:s})=>{const[o,l]=w.useState(null),[c,u]=w.useState("list"),[d,f]=w.useState(!1),[A,m]=w.useState(""),{currentUser:g}=yE(),[x,v]=w.useState(!1),[y,N]=w.useState(""),[C,_]=w.useState(""),j=w.useMemo(()=>Array.from(new Set(a.filter(q=>q.profile===It.ESTUDIANTE&&q.curso).map(q=>gu(q.curso)))).sort(),[a]),I=async(q,Q,z)=>{try{q.id||(q.id=crypto.randomUUID()),await RR(q);const K=a.filter(R=>R.profile===It.ESTUDIANTE&&gu(R.curso||"")===Q),Z={};K.forEach(R=>{Z[R.id]={puntajes:{},feedback:""}});const U={nombre:q.titulo,curso:Q,asignatura:z,rubricaEstaticaId:q.id,resultados:Z},Y=await gst(U);v(!1),alert("Rbrica interactiva creada."),s==null||s(Y)}catch(K){console.error(K),alert("No se pudo crear la rbrica interactiva.")}},T=async(q,Q)=>{if(!q.trim()||!Q.trim()){alert("El ttulo y la descripcin son obligatorios.");return}f(!0);try{V9("Evaluacin - Rbricas",g);const K=(await bot({objetivo:q,niveles:["Insuficiente","Suficiente","Competente","Avanzado"],dimensiones:[],contextoAdicional:`El propsito de la rbrica es: "${Q}". Por favor, genera entre 3 y 5 dimensiones de evaluacin relevantes.`})).data.rubrica,Z={id:crypto.randomUUID(),titulo:K.nombre,descripcion:K.descripcion,fechaCreacion:new Date().toISOString(),dimensiones:K.dimensiones.map(U=>({id:crypto.randomUUID(),nombre:U.nombre,niveles:U.descriptores.reduce((Y,R)=>{const W={Insuficiente:"insuficiente",Suficiente:"suficiente",Competente:"competente",Avanzado:"avanzado"}[R.nivel]||R.nivel.toLowerCase().replace(/\s/g,"");return W&&(Y[W]=R.descripcion),Y},{insuficiente:"",suficiente:"",competente:"",avanzado:""})}))};await n(Z),l(Z),u("form"),v(!0)}catch(z){console.error(z),alert("Error al generar la rbrica con IA.")}finally{f(!1)}},k=()=>{l({id:"",titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),u("form")},B=q=>{l(q),u("form")},M=async()=>{if(!o||!A.trim())return;const q=A;m("");const Q=`temp-${crypto.randomUUID()}`;l(z=>z?{...z,dimensiones:[...z.dimensiones,{id:Q,nombre:q,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0}]}:null);try{const K=(await yot({objetivo:o.titulo,dimension:q,nivel:"todos",contextoAdicional:'Genera descriptores para los 4 niveles: Insuficiente, Suficiente, Competente y Avanzado. La respuesta debe ser un objeto JSON con claves "insuficiente", "suficiente", "competente", "avanzado".'})).data.descriptores;l(Z=>Z?{...Z,dimensiones:Z.dimensiones.map(U=>U.id===Q?{...U,niveles:K,isLoading:!1}:U)}:null)}catch(z){console.error(z),alert("No se pudo generar la dimensin con IA."),l(K=>K?{...K,dimensiones:K.dimensiones.filter(Z=>Z.id!==Q)}:null)}},P=(q,Q,z)=>{o&&l(K=>K?{...K,dimensiones:K.dimensiones.map(Z=>Z.id!==q?Z:Q==="nombre"?{...Z,nombre:z}:{...Z,niveles:{...Z.niveles,[Q]:z}})}:null)},S=(q,Q)=>{l(z=>z?{...z,[q]:Q}:null)},L=q=>{o&&l(Q=>Q?{...Q,dimensiones:Q.dimensiones.filter(z=>z.id!==q)}:null)},H=()=>{if(!o)return null;const q="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",Q=`${q} resize-none text-sm`;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rbrica de Aprendizaje"}),i.jsx("button",{onClick:()=>u("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ttulo de la Rbrica"}),i.jsx("input",{value:o.titulo,onChange:z=>S("titulo",z.target.value),placeholder:"Ej. Rbrica de Presentaciones Orales",className:`${q} mt-1`})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripcin de la Rbrica"}),i.jsx("textarea",{value:o.descripcion,onChange:z=>S("descripcion",z.target.value),placeholder:"Describe el propsito y los criterios de evaluacin de esta rbrica.",rows:3,className:`${q} mt-1`})]})]}),o.dimensiones.length===0&&i.jsx("div",{className:"text-center py-4",children:i.jsx("button",{onClick:()=>T(o.titulo,o.descripcion),disabled:d||!o.titulo||!o.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:d?"Generando...":" Generar Rbrica con IA"})}),o.dimensiones.length>0&&i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),i.jsx("button",{type:"button",onClick:()=>v(!0),className:"bg-emerald-600 text-white font-semibold py-2 px-4 rounded-lg",children:"Usar como Rbrica Interactiva"})]}),i.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:i.jsx("tr",{children:["Dimensin","Insuficiente","Suficiente","Competente","Avanzado",""].map(z=>i.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:z},z))})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:o.dimensiones.map(z=>i.jsxs("tr",{children:[i.jsx("td",{className:"p-2 w-1/5",children:i.jsx("textarea",{value:z.nombre,onChange:K=>P(z.id,"nombre",K.target.value),rows:4,className:Q})}),Object.keys(z.niveles).map(K=>i.jsx("td",{className:"p-2 w-1/5",children:"isLoading"in z&&z.isLoading?i.jsx("div",{className:"flex justify-center items-center h-full",children:i.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):i.jsx("textarea",{value:z.niveles[K],onChange:Z=>P(z.id,K,Z.target.value),rows:4,className:Q})},K)),i.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:i.jsx("button",{onClick:()=>L(z.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:""})})]},z.id))})]})}),i.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx("label",{className:"text-sm font-medium",children:"Aadir Dimensin"}),i.jsx("input",{value:A,onChange:z=>m(z.target.value),placeholder:"Escribe el nombre de la nueva dimensin...",className:`${q} mt-1`})]}),i.jsx("button",{onClick:M,disabled:!A.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]}),x&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg w-full max-w-md space-y-4",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Asignar a Curso"}),i.jsx("label",{className:"text-sm font-medium",children:"Curso"}),i.jsxs("select",{value:y,onChange:z=>N(z.target.value),className:"w-full border rounded p-2 dark:bg-slate-700",children:[i.jsx("option",{value:"",children:"Selecciona un curso..."}),j.map(z=>i.jsx("option",{value:z,children:z},z))]}),i.jsx("label",{className:"text-sm font-medium",children:"Asignatura"}),i.jsxs("select",{value:C,onChange:z=>_(z.target.value),className:"w-full border rounded p-2 dark:bg-slate-700",children:[i.jsx("option",{value:"",children:"Selecciona una asignatura..."}),ma.map(z=>i.jsx("option",{value:z,children:z},z))]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2",children:"Cancelar"}),i.jsx("button",{disabled:!y||!o||!C,onClick:()=>o&&I(o,y,C),className:"bg-emerald-600 text-white px-4 py-2 rounded",children:"Crear Interactiva"})]})]})})]})};return c==="list"?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rbricas"}),i.jsx("button",{onClick:k,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),e.length>0?e.map(q=>i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:q.titulo}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:q.descripcion})]}),i.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[i.jsx("button",{onClick:()=>B(q),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),i.jsx("button",{onClick:()=>r(q.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},q.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rbricas guardadas."})]}):H()},Eot=({allUsers:e,rubricasEstaticas:t})=>{const[r,n]=w.useState([]),[a,s]=w.useState(null);w.useEffect(()=>{const f=pst(n);return()=>f()},[]);const o=w.useMemo(()=>r.find(f=>f.id===a)||null,[r,a]),l=w.useMemo(()=>o&&t.find(f=>f.id===o.rubricaEstaticaId)||null,[o,t]),c=w.useMemo(()=>o?e.filter(f=>f.profile===It.ESTUDIANTE&&gu(f.curso||"")===gu(o.curso)):[],[o,e]),u=async(f,A,m)=>{if(!o)return;const g=o.resultados[f]||{puntajes:{},feedback:""},x={...o.resultados,[f]:{...g,puntajes:{...g.puntajes,[A]:m}}};await xst(o.id,{resultados:x})},d=f=>{if(!l)return 1;const A=l.dimensiones.map(N=>N.nombre),m=o==null?void 0:o.resultados[f];if(!m)return 1;const g=A.reduce((N,C)=>N+(m.puntajes[C]||0),0),x=A.length*4,y=1+6*(x>0?g/x:0);return Math.round(y*10)/10};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Rbricas Interactivas"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"w-1/3 space-y-2",children:[r.map(f=>i.jsxs("button",{onClick:()=>s(f.id),className:`w-full text-left p-3 rounded border ${a===f.id?"bg-amber-100 dark:bg-amber-900/30":"bg-slate-50 dark:bg-slate-700/50"}`,children:[i.jsx("div",{className:"font-semibold",children:f.nombre}),i.jsxs("div",{className:"text-xs text-slate-500",children:["Curso: ",f.curso,"  Asignatura: ",f.asignatura]})]},f.id)),r.length===0&&i.jsx("p",{className:"text-slate-500 text-sm",children:"No hay rbricas interactivas."})]}),i.jsx("div",{className:"flex-1",children:o&&l?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"text-lg font-bold",children:[o.nombre,"  ",o.curso]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 text-left",children:"Estudiante"}),l.dimensiones.map(f=>i.jsx("th",{className:"p-2 text-left",children:f.nombre},f.id)),i.jsx("th",{className:"p-2 text-left",children:"Nota"})]})}),i.jsx("tbody",{children:c.map(f=>i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-2",children:f.nombreCompleto}),l.dimensiones.map(A=>{var g,x;const m=((x=(g=o.resultados[f.id])==null?void 0:g.puntajes)==null?void 0:x[A.nombre])||0;return i.jsx("td",{className:"p-2",children:i.jsxs("select",{value:m,onChange:v=>u(f.id,A.nombre,Number(v.target.value)),className:"border rounded p-1 dark:bg-slate-700",children:[i.jsx("option",{value:0,children:""}),i.jsx("option",{value:1,children:"1 - Insuficiente"}),i.jsx("option",{value:2,children:"2 - Suficiente"}),i.jsx("option",{value:3,children:"3 - Competente"}),i.jsx("option",{value:4,children:"4 - Avanzado"})]})},A.id)}),i.jsx("td",{className:"p-2 font-semibold",children:d(f.id).toFixed(1)})]},f.id))})]})})]}):i.jsx("p",{className:"text-slate-500",children:"Selecciona una rbrica interactiva para calificar."})})]})]})},jot=()=>{const[e,t]=w.useState("pruebas"),[r,n]=w.useState([]),[a,s]=w.useState([]),[o,l]=w.useState(!0);return w.useEffect(()=>{l(!0);const c=vst(n),u=Ast(d=>{s(d),l(!1)});return()=>{c(),u()}},[]),o?i.jsx("div",{className:"text-center py-10 text-lg",children:"Cargando datos..."}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx("button",{className:`px-4 py-2 rounded-lg font-semibold ${e==="pruebas"?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700 dark:text-slate-200"}`,onClick:()=>t("pruebas"),children:"Pruebas"}),i.jsx("button",{className:`px-4 py-2 rounded-lg font-semibold ${e==="rubricas"?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700 dark:text-slate-200"}`,onClick:()=>t("rubricas"),children:"Rbricas"}),i.jsx("button",{className:`px-4 py-2 rounded-lg font-semibold ${e==="rubricasInteractivas"?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700 dark:text-slate-200"}`,onClick:()=>t("rubricasInteractivas"),children:"Rbricas Interactivas"})]}),e==="pruebas"&&i.jsx(Not,{}),e==="rubricas"&&i.jsx(Cot,{rubricas:a,onSave:RR,onDelete:mst,onCreate:RR,allUsers:r,onCreatedInteractiva:()=>t("rubricasInteractivas")}),e==="rubricasInteractivas"&&i.jsx(Eot,{allUsers:r,rubricasEstaticas:a})]})},kot=async()=>{try{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,a=0;const s=[];for(const c of r)try{const u=ht(Ar,c),d=await Ir(u),f=d.size;n+=f,s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:f});let A=0;d.docs.forEach(m=>{const g=m.data();g.createdAt&&new Date(g.createdAt)>=t&&A++}),a+=A}catch(u){console.warn(`Error accediendo a coleccin ${c}:`,u),s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:0})}const o=[];try{const c=ht(Ar,"apiLogs"),u=new Date(e.getTime()-10080*60*1e3),d=Bt(c,sr("timestamp",">=",u.toISOString()),Xt("timestamp","desc")),f=await Ir(d),A={};f.docs.forEach(m=>{const g=m.data(),x=new Date(g.timestamp).toLocaleDateString("es-CL");A[x]=(A[x]||0)+1}),Object.entries(A).sort(([m],[g])=>new Date(m).getTime()-new Date(g).getTime()).forEach(([m,g])=>{o.push({label:m,value:g})})}catch(c){console.warn("Error calculando actividad diaria:",c)}const l=Math.floor(a*2.5);return{documentsCreatedToday:a,readsToday:l,writesToday:a,totalDocuments:n,collectionsActivity:s.sort((c,u)=>u.value-c.value),dailyActivity:o}}catch(e){return console.error("Error al obtener estadsticas de Firestore:",e),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},gZ=500,eb=({title:e,value:t,description:r,alert:n})=>i.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),i.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:t}),r&&i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),jO=({title:e,data:t,colorClass:r})=>{const n=w.useMemo(()=>Math.max(...t.map(a=>a.value),1),[t]);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),i.jsx("div",{className:"space-y-4",children:t.length>0?t.map(a=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:a.label}),i.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a.value})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:i.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${a.value/n*100}%`}})})]},a.label)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},Sot=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!0),[a,s]=w.useState(null),[o,l]=w.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});w.useEffect(()=>{n(!0);const f=tot(g=>{t(g),n(!1)}),A=async()=>{try{const g=await kot();l(g)}catch(g){console.error("Error al cargar estadsticas de Firestore:",g)}};A();const m=setInterval(A,300*1e3);return()=>{f(),clearInterval(m)}},[]);const{stats:c,userStats:u,moduleStats:d}=w.useMemo(()=>{const f=new Date,A=new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),m=A-f.getDay()*24*60*60*1e3,g=new Date(f.getFullYear(),f.getMonth(),1).getTime(),x={today:0,week:0,month:0},v={},y={};e.forEach(_=>{const j=new Date(_.timestamp).getTime();j>=A&&x.today++,j>=m&&x.week++,j>=g&&x.month++;const I=_.userEmail||"Desconocido";v[I]||(v[I]={email:I,today:0,month:0,total:0}),v[I].total++,j>=A&&v[I].today++,j>=g&&v[I].month++,y[_.module]=(y[_.module]||0)+1});const N=Object.values(v).sort((_,j)=>j.total-_.total),C=Object.entries(y).map(([_,j])=>({label:_,value:j})).sort((_,j)=>j.value-_.value);return{stats:x,userStats:N,moduleStats:C}},[e]);return i.jsxs("div",{className:"space-y-8",children:[a&&i.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),r&&i.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadsticas..."}),!r&&e.length===0&&i.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsx(eb,{title:"Llamadas Hoy",value:r?"--":c.today,description:`Lmite recomendado: ${gZ}`,alert:c.today>gZ}),i.jsx(eb,{title:"Llamadas esta Semana",value:r?"--":c.week}),i.jsx(eb,{title:"Llamadas este Mes",value:r?"--":c.month})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[i.jsx(jO,{title:"Uso por Mdulo",data:d,colorClass:"bg-sky-500"}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),i.jsx("div",{className:"overflow-x-auto max-h-96",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),i.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),i.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),i.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&u.length>0?u.map(f=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:f.email}),i.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.today}),i.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.month}),i.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:f.total})]},f.email)):i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadsticas de uso de Firestore (simuladas)."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(eb,{title:"Documentos Creados (Hoy)",value:o.documentsCreatedToday,description:"Nuevos documentos"}),i.jsx(eb,{title:"Lecturas de Firestore (Hoy)",value:o.readsToday,description:"Operaciones de lectura"}),i.jsx(eb,{title:"Total de Documentos",value:o.totalDocuments,description:"En todas las colecciones"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[i.jsx(jO,{title:"Actividad por Coleccin",data:o.collectionsActivity,colorClass:"bg-green-500"}),i.jsx(jO,{title:"Actividad Diaria (ltimos 7 das)",data:o.dailyActivity,colorClass:"bg-purple-500"})]})]})]})},kO=Object.values(It),SO=e=>e?e.trim().toLowerCase().replace(//g,"").replace(/\s+(medio|bsico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1").replace(/^(\d)(?![])/,"$1").replace(/\s+/g,"").toUpperCase():"",_ot=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!1),[a,s]=w.useState("Usuarios"),[o,l]=w.useState(""),[c,u]=w.useState(""),[d,f]=w.useState(""),[A,m]=w.useState(null),[g,x]=w.useState(!1),[v,y]=w.useState(null),[N,C]=w.useState({nombreCompleto:"",email:"",rut:"",profile:It.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[_,j]=w.useState(null),[I,T]=w.useState(""),[k,B]=w.useState(""),[M,P]=w.useState(""),[S,L]=w.useState(null),[H,q]=w.useState(null),[Q,z]=w.useState(null),K=w.useCallback(async()=>{n(!0);try{const oe=await fv();t(oe)}catch(oe){console.error("Error al cargar usuarios",oe),L("No se pudieron cargar los usuarios.")}finally{n(!1)}},[]);w.useEffect(()=>{K()},[K]);const Z=w.useCallback(oe=>{const{name:be,value:X}=oe.target;C(je=>({...je,[be]:X,curso:be==="profile"&&X!==It.ESTUDIANTE?"":je.curso,cursos:be==="profile"&&X!==It.PROFESORADO?[]:je.cursos,asignaturas:be==="profile"&&X!==It.PROFESORADO?[]:je.asignaturas}))},[]),U=w.useCallback((oe,be)=>{C(X=>{const je=X[oe]||[],De=je.includes(be)?je.filter(ke=>ke!==be):[...je,be];return{...X,[oe]:De}})},[]),Y=w.useCallback(()=>{C({nombreCompleto:"",email:"",rut:"",profile:It.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),j(null),L(null)},[]),R=w.useCallback(async oe=>{oe.preventDefault(),L(null);const{nombreCompleto:be,email:X,profile:je,curso:De,password:ke}=N;if(!be.trim()||!X.trim()){L("Nombre Completo y Email son obligatorios.");return}if(je===It.ESTUDIANTE&&!De){L('El campo "Curso" es obligatorio para Estudiantes.');return}if(!_&&!(ke!=null&&ke.trim())){L("La contrasea es obligatoria al crear un nuevo usuario.");return}const ue=$0();try{if(_){const we=vl(ue,"updateUser"),Ae={...N,password:(ke==null?void 0:ke.trim())||void 0,curso:je===It.ESTUDIANTE?SO(De||""):void 0};await we(Ae)}else{const we=vl(ue,"createUser"),Ae={...N,curso:je===It.ESTUDIANTE?SO(De||""):void 0};await we(Ae)}await K(),Y()}catch(we){console.error("Error al guardar usuario:",we),L(we.message||"Error al guardar el usuario.")}},[N,_,K,Y]),D=w.useCallback(oe=>{j(oe.email),C({nombreCompleto:oe.nombreCompleto,email:oe.email,rut:oe.rut||"",profile:oe.profile,password:"",curso:oe.curso||"",cursos:oe.cursos||[],asignaturas:oe.asignaturas||[]}),setTimeout(()=>{const be=document.querySelector("form");be&&be.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),W=w.useCallback(async oe=>{if(window.confirm(`Est seguro de que desea eliminar al usuario ${oe}? Esta accin es irreversible.`))try{const be=$0();await vl(be,"deleteUser")({email:oe}),await K()}catch(be){console.error("Error al eliminar usuario:",be),L(be.message||"No se pudo borrar el usuario.")}},[K]),J=async oe=>{var ke;const be=(ke=oe.target.files)==null?void 0:ke[0];if(!be)return;q({message:"Procesando archivo...",isError:!1});const X=$0(),je=vl(X,"createUser"),De=new FileReader;De.onload=async ue=>{var we;try{const Ae=new Uint8Array((we=ue.target)==null?void 0:we.result),de=L1(Ae,{type:"array"}),ae=de.Sheets[de.SheetNames[0]],fe=zs.sheet_to_json(ae);if(fe.length===0){q({message:"El archivo est vaco o no tiene el formato correcto.",isError:!0});return}const ge=fe.map(We=>{const me=We.Nombre||We.nombre,Ve=We.Correo||We.correo||We.Email||We.email,Xe=We.Curso||We.curso,Ie=We.RUT||We.rut;return!me||!Ve||!Xe?Promise.resolve({email:Ve||"Sin email",error:"Datos incompletos"}):je({nombreCompleto:String(me).trim(),email:String(Ve).trim(),profile:It.ESTUDIANTE,curso:SO(String(Xe).trim()),rut:Ie?String(Ie).trim():"",password:"recoleta"}).catch(Be=>({email:Ve,error:Be.message}))}),xe=await Promise.all(ge),Ue=xe.filter(We=>!We.error).length,qe=xe.filter(We=>We.error);let Ze=`Carga completada. ${Ue} estudiantes agregados.`;qe.length>0&&(Ze+=` ${qe.length} fallaron.`,console.error("Errores en carga masiva:",qe)),q({message:Ze,isError:qe.length>0}),await K()}catch(Ae){q({message:`Error: ${Ae.message}`,isError:!0})}},De.readAsArrayBuffer(be),oe.target.value=""},le=async oe=>{var ke;const be=(ke=oe.target.files)==null?void 0:ke[0];if(!be)return;z({message:"Procesando archivo...",isError:!1});const X=$0(),je=vl(X,"createUser"),De=new FileReader;De.onload=async ue=>{var we;try{const Ae=new Uint8Array((we=ue.target)==null?void 0:we.result),de=L1(Ae,{type:"array"}),ae=de.Sheets[de.SheetNames[0]],fe=zs.sheet_to_json(ae);if(fe.length===0){z({message:"El archivo est vaco o no tiene el formato correcto.",isError:!0});return}const ge=fe.map(We=>{const me=We.Nombre||We.nombre,Ve=We.Correo||We.correo||We.Email||We.email,Xe=We.Perfil||We.perfil||We.Profile||We.profile,Ie=We.RUT||We.rut;return!me||!Ve||!Xe?Promise.resolve({email:Ve||"Sin email",error:"Datos incompletos"}):je({nombreCompleto:String(me).trim(),email:String(Ve).trim(),profile:Xe,rut:Ie?String(Ie).trim():"",password:"recoleta"}).catch(Be=>({email:Ve,error:Be.message}))}),xe=await Promise.all(ge),Ue=xe.filter(We=>!We.error).length,qe=xe.filter(We=>We.error);let Ze=`Carga completada. ${Ue} usuarios agregados.`;qe.length>0&&(Ze+=` ${qe.length} fallaron.`,console.error("Errores en carga masiva:",qe)),z({message:Ze,isError:qe.length>0}),await K()}catch(Ae){z({message:`Error: ${Ae.message}`,isError:!0})}},De.readAsArrayBuffer(be),oe.target.value=""},ie="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",re=w.useMemo(()=>Array.from(new Set(e.filter(oe=>oe.profile===It.ESTUDIANTE&&oe.curso).map(oe=>oe.curso))).sort(),[e]),ce=w.useMemo(()=>e.filter(oe=>(I===""||oe.nombreCompleto.toLowerCase().includes(I.toLowerCase())||oe.email.toLowerCase().includes(I.toLowerCase()))&&(k===""||oe.profile===k)&&(M===""||oe.curso===M)),[e,I,k,M]);return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administracin"}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>s("Usuarios"),className:`${a==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestin de Usuarios"}),i.jsx("button",{onClick:()=>s("Monitor de Uso"),className:`${a==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),a==="Usuarios"&&i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cambio masivo de contraseas"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nueva contrasea"}),i.jsx("input",{type:"password",value:o,onChange:oe=>l(oe.target.value),placeholder:"Mnimo 6 caracteres",className:ie})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil"}),i.jsxs("select",{value:c,onChange:oe=>{u(oe.target.value),oe.target.value!==It.ESTUDIANTE&&f("")},className:ie,children:[i.jsx("option",{value:"",children:"Selecciona un perfil"}),kO.map(oe=>i.jsx("option",{value:oe,children:oe},oe))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso (solo estudiantes)"}),i.jsxs("select",{value:d,onChange:oe=>f(oe.target.value),className:ie,disabled:c!==It.ESTUDIANTE,children:[i.jsx("option",{value:"",children:"Todos los cursos"}),re.map(oe=>i.jsx("option",{value:oe,children:oe},oe))]})]})]}),i.jsx("div",{className:"flex items-center justify-end gap-3",children:i.jsx("button",{type:"button",onClick:async()=>{if(m(null),y(null),!o||o.length<6){m({message:"La contrasea debe tener al menos 6 caracteres.",isError:!0});return}if(!c){m({message:"Debes seleccionar un perfil.",isError:!0});return}const oe=c===It.ESTUDIANTE&&!d?"Se cambiarn contraseas de TODOS los estudiantes. Deseas continuar?":`Se cambiarn contraseas para ${c}${c===It.ESTUDIANTE&&d?" del curso "+d:""}. Confirmas?`;if(window.confirm(oe))try{x(!0);const be=$0(),X=vl(be,"bulkUpdatePasswords"),je={newPassword:o,profile:c};c===It.ESTUDIANTE&&d&&(je.curso=d);const De=await X(je),ke=(De==null?void 0:De.data)||De,ue=`Coincidieron: ${ke.matched??0} | Procesados: ${ke.processed??0} | Actualizados: ${ke.updated??0} | Fallidos: ${ke.failed??0}`;m({message:ue,isError:(ke.failed??0)>0}),y(ke),await K()}catch(be){console.error("Error en cambio masivo:",be),m({message:(be==null?void 0:be.message)||"Error al ejecutar cambio masivo",isError:!0})}finally{x(!1)}},disabled:g||!c||!o||o.length<6,className:`bg-amber-600 text-white font-bold py-2 px-6 rounded-lg ${g||!c||!o||o.length<6?"opacity-60 cursor-not-allowed":"hover:bg-amber-700"}`,children:g?"Procesando":"Cambiar contraseas"})}),A&&i.jsxs("div",{className:"mt-3",children:[i.jsx("p",{className:`text-sm ${A.isError?"text-red-600":"text-green-600"}`,children:A.message}),(v==null?void 0:v.failed)&&v.failed>0&&i.jsxs("details",{className:"mt-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded p-3",children:[i.jsxs("summary",{className:"cursor-pointer text-red-700 dark:text-red-300 text-sm font-medium",children:["Ver errores (",v.failed,")"]}),i.jsx("div",{className:"mt-2 max-h-56 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-xs",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"text-left text-slate-600 dark:text-slate-300",children:[i.jsx("th",{className:"pr-4 py-1",children:"Email"}),i.jsx("th",{className:"py-1",children:"Error"})]})}),i.jsx("tbody",{children:(v.errors||[]).map((oe,be)=>i.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700",children:[i.jsx("td",{className:"pr-4 py-1 text-slate-800 dark:text-slate-200 whitespace-nowrap",children:oe.email}),i.jsx("td",{className:"py-1 text-slate-700 dark:text-slate-300",children:oe.error})]},be))})]})})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),i.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:J,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),H&&i.jsx("p",{className:`text-sm mt-2 ${H.isError?"text-red-600":"text-green-600"}`,children:H.message})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),i.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:le,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),Q&&i.jsx("p",{className:`text-sm mt-2 ${Q.isError?"text-red-600":"text-green-600"}`,children:Q.message})]})]})]}),i.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:_?"Editando usuario":"Agregar nuevo usuario"}),i.jsxs("form",{onSubmit:R,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),i.jsx("input",{type:"text",name:"nombreCompleto",value:N.nombreCompleto,onChange:Z,className:ie,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),i.jsx("input",{type:"email",name:"email",value:N.email,onChange:Z,className:ie,required:!0,readOnly:!!_})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contrasea"}),i.jsx("input",{type:"password",name:"password",value:N.password||"",onChange:Z,placeholder:_?"Dejar en blanco para no cambiar":"Contrasea temporal",className:ie})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),i.jsx("input",{type:"text",name:"rut",value:N.rut||"",onChange:Z,placeholder:"12.345.678-9",className:ie})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),i.jsx("select",{name:"profile",value:N.profile,onChange:Z,className:ie,required:!0,children:kO.map(oe=>i.jsx("option",{value:oe,children:oe},oe))})]}),N.profile===It.ESTUDIANTE&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),i.jsxs("select",{name:"curso",value:N.curso,onChange:Z,className:ie,required:!0,children:[i.jsx("option",{value:"",children:"Seleccione un curso"}),ja.map(oe=>i.jsx("option",{value:oe,children:oe},oe))]})]})]}),N.profile===It.PROFESORADO&&i.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[i.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[i.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:""}),"Asignacin de Cursos"]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:ja.map(oe=>{var be;return i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[i.jsx("input",{type:"checkbox",checked:((be=N.cursos)==null?void 0:be.includes(oe))||!1,onChange:()=>U("cursos",oe),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:oe})]},oe)})})]}),N.profile===It.PROFESORADO&&i.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[i.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[i.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:""}),"Asignacin de Asignaturas"]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:ma.map(oe=>{var be;return i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[i.jsx("input",{type:"checkbox",checked:((be=N.asignaturas)==null?void 0:be.includes(oe))||!1,onChange:()=>U("asignaturas",oe),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:oe})]},oe)})})]}),S&&i.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:S}),i.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[_&&i.jsx("button",{type:"button",onClick:Y,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),i.jsx("button",{type:"button",onClick:async()=>{try{console.log(" Agregando custom claim...");const oe=$0(),X=await vl(oe,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log(" Custom claim agregado:",X),L(" Custom claim agregado exitosamente")}catch(oe){console.error(" Error al agregar custom claim:",oe),L(`Error: ${oe.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:" Claim"}),i.jsx("button",{type:"button",onClick:async()=>{var oe,be,X,je,De;try{const{auth:ke}=await Ss(async()=>{const{auth:Ae}=await Promise.resolve().then(()=>MM);return{auth:Ae}},void 0);console.log(" Usuario actual:",(oe=ke.currentUser)==null?void 0:oe.email);const ue=await((be=ke.currentUser)==null?void 0:be.getIdToken(!0));console.log(" Token refreshed:",!!ue);const we=await((X=ke.currentUser)==null?void 0:X.getIdTokenResult());console.log(" Claims completos:",we==null?void 0:we.claims),console.log(" Profile claim:",(je=we==null?void 0:we.claims)==null?void 0:je.profile),((De=we==null?void 0:we.claims)==null?void 0:De.profile)==="SUBDIRECCION"?L(" Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):L(` Custom claim faltante. Claims: ${JSON.stringify(we==null?void 0:we.claims)}`)}catch(ke){console.error(" Error verificando token:",ke),L(`Error verificando token: ${ke.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:" Token"}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:_?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[i.jsx("div",{children:i.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:I,onChange:oe=>T(oe.target.value),className:ie})}),i.jsx("div",{children:i.jsxs("select",{value:k,onChange:oe=>B(oe.target.value),className:ie,children:[i.jsx("option",{value:"",children:"Todos los perfiles"}),kO.map(oe=>i.jsx("option",{value:oe,children:oe},oe))]})}),i.jsx("div",{children:i.jsxs("select",{value:M,onChange:oe=>P(oe.target.value),className:ie,children:[i.jsx("option",{value:"",children:"Todos los cursos"}),re.map(oe=>i.jsx("option",{value:oe,children:oe},oe))]})})]}),r?i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:ce.map(oe=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:oe.nombreCompleto}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:oe.email}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:i.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${oe.profile===It.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":oe.profile===It.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:oe.profile})}),i.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[oe.profile===It.ESTUDIANTE&&i.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:oe.curso||"Sin curso"}),oe.profile===It.PROFESORADO&&i.jsxs("div",{className:"space-y-1",children:[oe.cursos&&oe.cursos.length>0&&i.jsxs("div",{children:[i.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),i.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[oe.cursos.slice(0,3).map(be=>i.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:be},be)),oe.cursos.length>3&&i.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",oe.cursos.length-3]})]})]}),oe.asignaturas&&oe.asignaturas.length>0&&i.jsxs("div",{children:[i.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),i.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[oe.asignaturas.slice(0,2).map(be=>i.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:be},be)),oe.asignaturas.length>2&&i.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",oe.asignaturas.length-2]})]})]}),(!oe.cursos||oe.cursos.length===0)&&(!oe.asignaturas||oe.asignaturas.length===0)&&i.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),oe.profile!==It.ESTUDIANTE&&oe.profile!==It.PROFESORADO&&i.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[i.jsx("button",{onClick:()=>D(oe),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:""}),i.jsx("button",{onClick:()=>W(oe.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:""})]})]},oe.email))})]}),ce.length===0&&i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:e.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),a==="Monitor de Uso"&&i.jsx(Sot,{})]})},X1="seguimiento_dual_records",Tot=e=>{const t=e.data(),r=n=>n&&typeof n.toDate=="function"?n.toDate().toISOString().split("T")[0]:n;return{id:e.id,...t,fechaDesvinculacion:r(t.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(t.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(t.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(t.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(t.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(t.fechaSupervisionExcepcional)}},Bot=e=>{const t=Bt(ht(ut,X1),Xt("nombreEstudiante","asc"));return lr(t,n=>{const a=n.docs.map(s=>Tot(s));e(a)},n=>{console.error("Error al suscribirse a los registros de seguimiento:",n),e([])})},K_=e=>{const t={...e};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(n=>{t[n]&&typeof t[n]=="string"&&(t[n]=xr.fromDate(new Date(t[n]+"T00:00:00")))}),t},Iot=async e=>{try{const t=K_(e);return(await ln(ht(ut,X1),t)).id}catch(t){throw console.error("Error al crear el registro:",t),new Error("No se pudo crear el registro de seguimiento.")}},xZ=async(e,t)=>{try{const r=Wt(ut,X1,e),n=K_(t);await bi(r,n,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},Dot=async e=>{try{const t=Wt(ut,X1,e);await ca(t)}catch(t){throw console.error("Error al eliminar el registro:",t),new Error("No se pudo eliminar el registro.")}},Oot=async e=>{const t=Qp(ut),r=ht(ut,X1);let n=0,a=0;for(const s of e){const o=Bt(r,sr("rutEstudiante","==",s.rutEstudiante)),l=await Ir(o);if(l.empty){const c=Wt(r);t.set(c,K_(s)),a++}else{const c=l.docs[0].id,u=Wt(ut,X1,c);t.set(u,K_(s),{merge:!0}),n++}}return await t.commit(),{updated:n,created:a}},Pot={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},Fot=e=>{if(!e||e===""||e==="N/A"||e==="Pendiente")return null;try{if(typeof e=="number"){const t=new Date(1900,0,1),r=new Date(t.getTime()+(e-2)*24*60*60*1e3);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}if(e instanceof Date)return isNaN(e.getTime())?null:e.toISOString().split("T")[0];if(typeof e=="string"){const t=e.trim();if(t==="")return null;const r=new Date(t);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}return null}catch(t){return console.warn("Error parsing date:",e,t),null}},Rot=e=>{if(typeof e=="boolean")return e;if(typeof e=="string"){const t=e.toLowerCase().trim();return["true","verdadero","s","si","yes","1","x"].includes(t)}return typeof e=="number"?e===1:!1},Lot=({record:e,onSave:t,onClose:r})=>{const[n,a]=w.useState(e),s="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",o=c=>{const{name:u,value:d,type:f,checked:A}=c.target;a(m=>({...m,[u]:f==="checkbox"?A:d}))},l=()=>{t(n)};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisin"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:e.nombreEstudiante})]})]}),i.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[i.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[i.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`f1s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisin"}),i.jsx("input",{id:`f1s1-${e.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`f2s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisin"}),i.jsx("input",{id:`f2s1-${e.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]})]})]}),i.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[i.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`f1s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisin"}),i.jsx("input",{id:`f1s2-${e.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`f2s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisin"}),i.jsx("input",{id:`f2s2-${e.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]})]})]}),i.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[i.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisin Excepcional"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`fex-${e.id}`,className:"text-sm font-medium",children:"Fecha Supervisin"}),i.jsx("input",{id:`fex-${e.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]})]})]}),i.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[i.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Gua (Empresa)"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:`mg-nombre-${e.id}`,className:"text-sm font-medium",children:"Nombre Maestro Gua"}),i.jsx("input",{id:`mg-nombre-${e.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:o,className:s+" mt-1"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:`mg-contacto-${e.id}`,className:"text-sm font-medium",children:"Contacto (Email/Telfono)"}),i.jsx("input",{id:`mg-contacto-${e.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:o,className:s+" mt-1"})]})]})]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),i.jsx("button",{type:"button",onClick:l,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},Mot=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!0),a=w.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:dp[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:ZI[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[s,o]=w.useState(a),[l,c]=w.useState(null),[u,d]=w.useState(""),[f,A]=w.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[m,g]=w.useState(null),[x,v]=w.useState(null),[y,N]=w.useState(!1),[C,_]=w.useState(null);w.useEffect(()=>{n(!0);const K=Bot(Z=>{t(Z),n(!1)});return()=>K()},[]);const j=w.useCallback(K=>{const{name:Z,value:U}=K.target;o(Y=>({...Y,[Z]:U}))},[]),I=w.useCallback(K=>{const{name:Z,value:U}=K.target;A(Y=>({...Y,[Z]:U}))},[]),T=w.useCallback(()=>{o(a),c(null),g(null)},[a]),k=async K=>{K.preventDefault(),g(null);const U=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(Y=>{var R;return!((R=s[Y])!=null&&R.trim())});if(U){g(`El campo '${U}' es obligatorio.`);return}try{l?await xZ(l,s):await Iot(s),T()}catch(Y){console.error(Y),g("No se pudo guardar el registro.")}},B=w.useCallback(K=>{window.scrollTo({top:0,behavior:"smooth"}),c(K.id),o(K)},[]),M=async K=>{if(window.confirm("Est seguro de que desea eliminar este registro?"))try{await Dot(K)}catch(Z){console.error(Z),g("No se pudo eliminar el registro.")}},P=K=>{_(K),N(!0)},S=()=>{_(null),N(!1)},L=async K=>{try{await xZ(K.id,K),S()}catch(Z){console.error(Z),alert("No se pudieron guardar los cambios de supervisin.")}},H=()=>{const K=["Nombre","RUT","Curso 2025","Profesor Tutor","1 Visita 1 Semestre","Realizada 1 Visita S1","2 Visita 1 Semestre","Realizada 2 Visita S1","Visita Emergencia 1 Semestre","3 Visita","Realizada 3 Visita S2","4 Visita","Realizada 4 Visita S2","Empresa","RUT-Empresa","Direccin","Comuna","Estado","Fecha de Desvinculacin","Motivo Desvinculacin","Maestro Gua","Correo maestro gua"],Z=zs.aoa_to_sheet([K]),U=zs.book_new();zs.book_append_sheet(U,Z,"Plantilla"),ky(U,"Plantilla_Seguimiento_Dual.xlsx")},q=K=>{var Y;const Z=(Y=K.target.files)==null?void 0:Y[0];if(!Z)return;v({message:"Procesando archivo...",isError:!1});const U=new FileReader;U.onload=async R=>{var D;try{const W=new Uint8Array((D=R.target)==null?void 0:D.result),J=L1(W,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),le=J.SheetNames[0],ie=J.Sheets[le],re=zs.sheet_to_json(ie,{raw:!1,dateNF:"yyyy-mm-dd"});if(re.length===0)throw new Error("El archivo est vaco.");const ce={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1 visita 1 semestre":"fecha1raSupervision1erSemestre","realizada 1 visita s1":"realizada1raSupervision1erSemestre","2 visita 1 semestre":"fecha2daSupervision1erSemestre","realizada 2 visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1 semestre":"fechaSupervisionExcepcional","3 visita":"fecha1raSupervision2doSemestre","realizada 3 visita s2":"realizada1raSupervision2doSemestre","4 visita":"fecha2daSupervision2doSemestre","realizada 4 visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",direccin:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculacin":"fechaDesvinculacion","motivo desvinculacin":"motivoDesvinculacion","maestro gua":"nombreMaestroGuia","correo maestro gua":"contactoMaestroGuia"},oe=Object.keys(re[0]).map(De=>De.trim().toLowerCase()),X=["nombre","rut","curso 2025","empresa","estado"].find(De=>!oe.includes(De));if(X)throw new Error(`Falta la columna requerida: '${X}'`);const je=re.map((De,ke)=>{try{const ue={};for(const we in De){const Ae=ce[we.trim().toLowerCase()];if(Ae){let de=De[we];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(Ae)?(de=Fot(de),de&&(ue[Ae]=de)):Ae.includes("realizada")?ue[Ae]=Rot(de):de!=null&&de!==""&&(ue[Ae]=String(de).trim())}}return!ue.nombreEstudiante||!ue.rutEstudiante?(console.warn(`Fila ${ke+2}: Faltan campos requeridos`),null):ue}catch(ue){return console.error(`Error procesando fila ${ke+2}:`,ue),null}}).filter(De=>De!==null);if(console.log("Registros procesados:",je),je.length>0){const{updated:De,created:ke}=await Oot(je);v({message:`Carga exitosa. ${ke} registros creados, ${De} actualizados.`,isError:!1})}else v({message:"No se encontraron registros vlidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(W){console.error("Error completo:",W),v({message:`Error al procesar el archivo: ${W.message}. Verifique que las fechas estn en formato correcto.`,isError:!0})}},U.readAsArrayBuffer(Z)},Q="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",z=w.useMemo(()=>e.filter(K=>(u===""||K.nombreEstudiante.toLowerCase().includes(u.toLowerCase())||K.nombreEmpresa.toLowerCase().includes(u.toLowerCase())||K.rutEstudiante.includes(u))&&(f.curso===""||K.curso===f.curso)&&(f.empresa===""||K.nombreEmpresa===f.empresa)&&(f.estado===""||K.estado===f.estado)&&(f.comuna===""||K.comuna===f.comuna)&&(f.profesor===""||K.profesorTutorEmpresa===f.profesor)).sort((K,Z)=>K.nombreEstudiante.localeCompare(Z.nombreEstudiante)),[e,u,f]);return w.useMemo(()=>{const K=new Set,Z=new Set;return e.forEach(U=>{U.nombreEmpresa&&K.add(U.nombreEmpresa),U.comuna&&Z.add(U.comuna)}),{empresas:Array.from(K).sort(),comunas:Array.from(Z).sort()}},[e]),r?i.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestin Pedaggica LIR",className:"w-12 h-12 object-contain"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Prctica Dual"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:l?"Editando registro existente.":"Registre un nuevo estudiante en prctica."})]})]}),i.jsxs("form",{onSubmit:k,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),i.jsx("input",{type:"text",name:"nombreEstudiante",value:s.nombreEstudiante,onChange:j,className:Q,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),i.jsx("input",{type:"text",name:"rutEstudiante",value:s.rutEstudiante,onChange:j,className:Q,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),i.jsx("select",{name:"curso",value:s.curso,onChange:j,className:Q,required:!0,children:dp.map(K=>i.jsx("option",{value:K,children:K},K))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),i.jsxs("select",{name:"profesorTutorEmpresa",value:s.profesorTutorEmpresa,onChange:j,className:Q,children:[i.jsx("option",{value:"",children:"Seleccione un profesor"}),EF.map(K=>i.jsx("option",{value:K,children:K},K))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),i.jsx("input",{type:"text",name:"nombreEmpresa",value:s.nombreEmpresa,onChange:j,className:Q,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),i.jsx("input",{type:"text",name:"rutEmpresa",value:s.rutEmpresa,onChange:j,className:Q})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Direccin Empresa"}),i.jsx("input",{type:"text",name:"direccionEmpresa",value:s.direccionEmpresa,onChange:j,className:Q})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),i.jsx("input",{type:"text",name:"comuna",value:s.comuna,onChange:j,className:Q})]}),i.jsxs("div",{className:"lg:col-span-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),i.jsx("select",{name:"estado",value:s.estado,onChange:j,className:Q,children:ZI.map(K=>i.jsx("option",{value:K,children:K},K))})]})]}),s.estado==="Desvinculado"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculacin"}),i.jsx("input",{type:"date",name:"fechaDesvinculacion",value:s.fechaDesvinculacion||"",onChange:j,className:`${Q} border-red-300`})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculacin"}),i.jsx("input",{type:"text",name:"motivoDesvinculacion",value:s.motivoDesvinculacion||"",onChange:j,className:`${Q} border-red-300`})]})]}),m&&i.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:m}),i.jsxs("div",{className:"flex justify-end items-center gap-4",children:[l&&i.jsx("button",{type:"button",onClick:T,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:l?"Actualizar":"Agregar"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[i.jsx("button",{onClick:H,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),i.jsx("input",{type:"file",onChange:q,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),x&&i.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${x.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:x.message})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[i.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:u,onChange:K=>d(K.target.value),className:`${Q} md:col-span-2 lg:col-span-1`}),i.jsxs("select",{name:"curso",value:f.curso,onChange:I,className:Q,children:[i.jsx("option",{value:"",children:"Todos los Cursos"}),dp.map(K=>i.jsx("option",{children:K},K))]}),i.jsxs("select",{name:"estado",value:f.estado,onChange:I,className:Q,children:[i.jsx("option",{value:"",children:"Todos los Estados"}),ZI.map(K=>i.jsx("option",{children:K},K))]}),i.jsxs("select",{name:"profesor",value:f.profesor,onChange:I,className:Q,children:[i.jsx("option",{value:"",children:"Todos los Profesores"}),EF.map(K=>i.jsx("option",{children:K},K))]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:z.map(K=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[i.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:K.nombreEstudiante}),i.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:K.curso})]}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:K.nombreEmpresa}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:K.profesorTutorEmpresa}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Pot[K.estado]}`,children:K.estado})}),i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[i.jsx("button",{onClick:()=>P(K),className:"text-blue-600 hover:underline",children:"Supervisin"}),i.jsx("button",{onClick:()=>B(K),className:"text-yellow-600 hover:underline",children:"Editar"}),i.jsx("button",{onClick:()=>M(K.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},K.id))})]})})]}),y&&C&&i.jsx(Lot,{record:C,onClose:S,onSave:L})]})},z9="actividades_remotas",JAe="respuestas_actividades",ZAe="pruebas_estandarizadas",Uot="usuarios",eme=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(typeof e=="object"){if(typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if("seconds"in e&&"nanoseconds"in e){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}}return null},G9=e=>{const t=eme(e);return t?t.toISOString():void 0},W_=e=>{const t=eme(e);return t?t.toISOString().split("T")[0]:void 0},q9=e=>{if(!e)return null;const t=new Date(`${e}T00:00:00`);return isNaN(t.getTime())?null:xr.fromDate(t)},K9=e=>xr.fromDate(new Date(e||new Date().toISOString())),Hot=e=>!!e&&/^data:/.test(e),Y1=e=>{if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(Y1);const t={};return Object.entries(e).forEach(([r,n])=>{n!==void 0&&(t[r]=Y1(n))}),t},Qot=e=>{const t=e.match(/^data:(.*?);base64,(.*)$/);if(!t)throw new Error("Data URL invlida");const r=t[1]||"application/octet-stream",n=t[2];let a="";if(typeof atob=="function")a=atob(n);else{const l=typeof Buffer<"u"?Buffer:null;if(l)a=l.from(n,"base64").toString("binary");else throw new Error("No hay decodificador base64 disponible")}const s=a.length,o=new Uint8Array(s);for(let l=0;l<s;l++)o[l]=a.charCodeAt(l);return{bytes:o,contentType:r}},Vot=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:G9(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:W_(t.plazoEntrega)||W_(new Date)}},$ot=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCompletado:G9(t.fechaCompletado)||new Date().toISOString()}},zot=e=>{const t=e.data()||{};return{id:e.id,...t}},Got=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:G9(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:W_(t.plazoEntrega)||W_(new Date)}},qot=e=>{const t=Bt(ht(ut,z9),Xt("fechaCreacion","desc"));return lr(t,r=>e(r.docs.map(Vot)),r=>{console.error("subscribeToActividades error:",r),e([])})},Kot=(e,t)=>{const r=ht(ut,JAe),n=Bt(r,Xt("fechaCompletado","desc"));return lr(n,a=>e(a.docs.map($ot)),a=>{console.error("subscribeToRespuestas error:",a),e([])})},Wot=e=>{const t=Bt(ht(ut,Uot),Xt("nombreCompleto","asc"));return lr(t,r=>e(r.docs.map(zot)),r=>{console.error("subscribeToAllUsers error:",r),e([])})},Xot=e=>{const t=Bt(ht(ut,ZAe),Xt("fechaCreacion","desc"));return lr(t,r=>e(r.docs.map(Got)),r=>{console.error("subscribeToPruebasEstandarizadas error:",r),e([])})},Yot=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=Y1({...a,fechaCreacion:K9(r),plazoEntrega:q9(n)});return(await ln(ht(ut,z9),s)).id},Jot=async(e,t)=>{const{fechaCreacion:r,plazoEntrega:n,...a}=t||{},s=Y1({...a});r!==void 0&&(s.fechaCreacion=K9(r)),n!==void 0&&(s.plazoEntrega=q9(n)),await qi(Wt(ut,z9,e),s)},Zot=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=Y1({...a,fechaCreacion:K9(r),plazoEntrega:q9(n)});return(await ln(ht(ut,ZAe),s)).id},elt=async(e,t)=>{const r=Y1(t);await qi(Wt(ut,JAe,e),r)},tlt=(e,t)=>{if(!t||t<=0)return"1.0";const n=t*.6;let a;return e>=n?a=4+3*(e-n)/(t-n+1e-9):a=1+3*e/(n+1e-9),a=Math.max(1,Math.min(7,a)),a.toFixed(1)},rlt=async(e,t,r)=>{const{bytes:n,contentType:a}=Qot(e),s=Date.now(),o=t.replace(/\s+/g,"_"),c=`recursos/${r!==""?r:"general"}/${s}/${o}`,u=Od(b3,c);await by(u,n,{contentType:a});const d=await LA(u);return{nombre:t,url:d}},nlt=async e=>{var s;const t=e.nivel||"general",r=((s=e.recursos)==null?void 0:s.archivos)||[],n=await Promise.all(r.map(async(o,l)=>{if(Hot(o==null?void 0:o.url)){const c=(o==null?void 0:o.nombre)||`archivo_${l}.bin`;return rlt(o.url,c,t)}return{nombre:(o==null?void 0:o.nombre)||`archivo_${l}`,url:o==null?void 0:o.url}})),a={...e,recursos:{...e.recursos||{},archivos:n}};return Yot(a)},Kw=e=>e?new Date(e).toLocaleDateString("es-CL"):"",vZ=e=>e?new Date(e).toLocaleString("es-CL"):"",alt=e=>new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(String(n.result)),n.onerror=a=>r(a)}),tme=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>n.includes("punto")||n.includes("Punto")||n.includes("Factor")||n.includes("factor")||n.includes("Criterio")||n.includes("criterio")||n.includes("Aspecto")||n.includes("aspecto"))&&(console.warn(` OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},_i=(e,t)=>{if(t&&tme(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>_i(a,`${t}-array-item`)).join(", ");if(Object.keys(e).some(a=>a.includes("punto")||a.includes("Punto")||a.includes("Factor")||a.includes("factor")||a.includes("Criterio")||a.includes("criterio")))return"[Rbrica de evaluacin]";const n=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of n)if(e[a]&&typeof e[a]=="string")return e[a];try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},Cc=(e,t,...r)=>{if(tme(e,`extractTextSafely-${t}`),!e)return"";for(const n of r)if(e[n]){const a=_i(e[n],`${t}-${n}`);if(a&&a!=="[Objeto complejo]"&&a!=="[Objeto no serializable]")return a}return typeof e=="string"?e:"[Sin contenido disponible]"},La=({content:e,context:t="unknown"})=>{try{const r=_i(e,`UltraSafeRenderer-${t}`);return i.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),i.jsx("span",{children:"[Error al mostrar contenido]"})}},_O={Quiz:[5,10,15],"Trminos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensin de Lectura":[1,2,3,4,5]},TO=["Localizar informacin","Interpretar y relacionar","Reflexionar","Extraer informacin explcita","Realizar inferencias","Interpretar el sentido global del texto","Evaluar contenido y forma"],slt=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[a,s]=w.useState([]),[o,l]=w.useState([]),[c,u]=w.useState(null),[d,f]=w.useState(null),[A,m]=w.useState(!1),[g,x]=w.useState(!1),[v,y]=w.useState(!1),[N,C]=w.useState(!1),[_,j]=w.useState(!1),[I,T]=w.useState(!0),[k,B]=w.useState(null),[M,P]=w.useState(""),[S,L]=w.useState(null),[H,q]=w.useState(null),[Q,z]=w.useState([]),[K,Z]=w.useState("carpetas"),[U,Y]=w.useState("Todas"),[R,D]=w.useState("Todos"),[W,J]=w.useState(null),[le,ie]=w.useState([]),[re,ce]=w.useState(!1),[oe,be]=w.useState(null),[X,je]=w.useState(null),[De,ke]=w.useState([]),[ue,we]=w.useState(""),Ae={asignatura:ma[0],nivel:"",contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[de,ae]=w.useState(Ae),fe={asignatura:ma[0],nivel:"",contenido:"",objetivosAprendizaje:"",plazoEntrega:new Date().toISOString().split("T")[0],cursosDestino:[],estudiantesDestino:[],duracionMinutos:90},[ge,xe]=w.useState(fe);w.useEffect(()=>{T(!0);const Ne=qot(t),ve=Xot(n),Fe=Kot(s),ze=Wot(He=>{l(He),T(!1)});return()=>{Ne(),ve(),Fe(),ze()}},[]);const Ue=Ne=>{ae(ve=>({...ve,[Ne.target.name]:Ne.target.value}))},qe=Ne=>{xe(ve=>({...ve,[Ne.target.name]:Ne.target.value}))},Ze=Ne=>{ae(ve=>({...ve,recursos:{...ve.recursos,[Ne.target.name]:Ne.target.value}}))},We=Ne=>{Ne.target.files&&z(Array.from(Ne.target.files))},me=Ne=>{ae(ve=>{const Fe=ve.tipos.includes(Ne)?ve.tipos.filter(He=>He!==Ne):[...ve.tipos,Ne],ze={...ve.cantidadPreguntas};return Fe.includes(Ne)?ze[Ne]||(ze[Ne]=_O[Ne][0]):delete ze[Ne],{...ve,tipos:Fe,cantidadPreguntas:ze}})},Ve=(Ne,ve)=>{ae(Fe=>({...Fe,cantidadPreguntas:{...Fe.cantidadPreguntas,[Ne]:ve}}))},Xe=(Ne,ve=!1)=>{(ve?xe:ae)(ze=>{const He=ze.estudiantesDestino||[],Ye=He.includes(Ne)?He.filter(rt=>rt!==Ne):[...He,Ne];return{...ze,estudiantesDestino:Ye}})},Ie=()=>{const{tipos:Ne,contenido:ve,asignatura:Fe,nivel:ze,cantidadPreguntas:He}=de;let Ye=`Eres un experto diseador de actividades pedaggicas con nfasis en la Taxonoma de Bloom y metodologas activas de aprendizaje. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${ve}"
Asignatura: ${Fe}
Nivel educativo: ${ze}

REQUISITOS PEDAGGICOS:
1. Asegura que las preguntas sean claras, concisas y libres de ambigedades
2. Distribuye las preguntas segn Taxonoma de Bloom: 20% conocimiento, 30% comprensin, 30% aplicacin, 20% anlisis/evaluacin 
3. Evita preguntas demasiado simples o demasiado complejas para el nivel educativo
4. Incluye contextos reales y aplicaciones prcticas cuando sea posible
5. Para mltiple opcin, todas las opciones deben ser plausibles (no incluir opciones obviamente incorrectas)
6. Las rbricas de desarrollo deben incluir criterios especficos y niveles de desempeo claros
7. En comprensin lectora, genera textos originales y preguntas de distinta complejidad cognitiva

Genera los siguientes elementos:
- introduccion: breve y motivadora que contextualice el aprendizaje
- panelDidactico: Un objeto JSON con la siguiente estructura:
  {
    "titulo": "Ttulo descriptivo del tema central",
    "subtitulos": [
      {
        "titulo": "Primer subttulo",
        "texto": "Explicacin detallada (80-120 palabras) con ejemplos y definiciones"
      },
      {
        "titulo": "Segundo subttulo",
        "texto": "Explicacin detallada (80-120 palabras) con ejemplos y definiciones"
      },
      {
        "titulo": "Tercer subttulo (opcional)",
        "texto": "Explicacin detallada (80-120 palabras) con ejemplos y definiciones"
      }
    ],
    "conceptosClave": [
      "Concepto 1: breve definicin",
      "Concepto 2: breve definicin",
      "Concepto 3: breve definicin"
    ]
  }
  En total debe tener entre 300-500 palabras con contenido educativo detallado que explique los conceptos clave del tema, incluya ejemplos claros y conocimiento esencial que el estudiante necesita para responder las actividades.
- actividades: objeto con propiedades por tipo:
`;return Ne.forEach(rt=>{const Ct=He[rt]||_O[rt][0];switch(rt){case"Quiz":Ye+=`- "Quiz": Array de ${Ct} objetos { 
  pregunta: clara y contextualizada,
  opciones: array de 4 alternativas plausibles con opciones de distinta dificultad,
  respuestaCorrecta: la opcin correcta (no ambigua),
  puntaje: 1 para cada pregunta
}
`;break;case"Comprensin de Lectura":Ye+=`- "Comprensin de Lectura": Objeto { 
  texto: texto original de 200-300 palabras adaptado al nivel con informacin relevante,
  preguntas: Array de ${Ct} objetos {
    pregunta: enfocadas en distintos niveles de comprensin (literal, inferencial y crtica),
    opciones: array de 4 alternativas plausibles sin pistas obvias,
    respuestaCorrecta: la opcin correcta basada en el texto,
    puntaje: 1 para cada pregunta
  }
}
`;break;case"Trminos Pareados":Ye+=`- "Trminos Pareados": Array de ${Ct} objetos {
  concepto: trmino clave del contenido, claro y especfico,
  definicion: explicacin precisa y nica que no sea ambigua
}
`;break;case"Desarrollo":Ye+=`- "Desarrollo": Array de ${Ct} objetos {
  pregunta: pregunta que fomente el pensamiento crtico y la aplicacin de conocimientos,
  rubrica: criterios de evaluacin detallados con niveles de desempeo especficos (sobresaliente, adecuado, en desarrollo, inicial)
}
`;break}}),Ye+=`
EJEMPLOS DE ALTA CALIDAD POR TIPO:
`,Ne.includes("Quiz")&&(Ye+=`
Quiz de ejemplo: {
  "pregunta": "En el contexto de la funcin fotosinttica de las plantas, qu ocurrira si una planta se expone a luz con longitudes de onda exclusivamente verdes?",
  "opciones": [
    "La planta aumentara su tasa fotosinttica debido a la mayor disponibilidad de luz",
    "La planta morira inmediatamente por exceso de radiacin",
    "La tasa fotosinttica disminuira significativamente ya que el pigmento clorofila refleja la luz verde",
    "No habra cambios en la fotosntesis porque las plantas no dependen del espectro luminoso"
  ],
  "respuestaCorrecta": "La tasa fotosinttica disminuira significativamente ya que el pigmento clorofila refleja la luz verde",
  "puntaje": 1
}
`),Ne.includes("Comprensin de Lectura")&&(Ye+=`
Comprensin de Lectura de ejemplo: {
  "texto": "La revolucin industrial transform profundamente las estructuras sociales y econmicas de Europa durante el siglo XIX. El paso de una economa agraria y artesanal a una dominada por la industria y la manufactura mecanizada signific cambios sin precedentes en las condiciones laborales. Las jornadas extenuantes de 14-16 horas, el trabajo infantil y la falta de seguridad caracterizaron los primeros aos de industrializacin. No obstante, este periodo tambin represent un aumento en la produccin de bienes, mejoras en el transporte y comunicaciones, y eventualmente, el surgimiento de una clase media con mayor acceso a productos manufacturados. Estos cambios sentaron las bases para movimientos obreros que, con el tiempo, lograron mejoras significativas en los derechos laborales que persisten hasta la actualidad.",
  "preguntas": [
    {
      "pregunta": "Segn el texto, cul fue una consecuencia negativa inmediata de la revolucin industrial?",
      "opciones": [
        "El desplome de los sistemas de transporte",
        "Las extenuantes jornadas laborales de 14-16 horas",
        "La disminucin en la produccin de bienes manufacturados",
        "La eliminacin de la clase media europea"
      ],
      "respuestaCorrecta": "Las extenuantes jornadas laborales de 14-16 horas",
      "puntaje": 1
    }
  ]
}
`),Ye},Be=()=>{const{contenido:Ne,objetivosAprendizaje:ve,asignatura:Fe,nivel:ze}=ge;return`Eres un experto pedagogo especializado en evaluacin educativa y diseo de pruebas estandarizadas tipo SIMCE.
Responde EXCLUSIVAMENTE con JSON vlido segn la estructura solicitada.

INFORMACIN CURRICULAR:
- Asignatura: ${Fe}
- Nivel educativo: ${ze}
- Contenido principal: ${Ne}
- Objetivos de Aprendizaje: ${ve}

REQUISITOS PEDAGGICOS:
1. Genera preguntas equilibradas en dificultad: 25% bsicas, 50% intermedias, 25% avanzadas
2. Usa contextos reales y significativos para los estudiantes
3. Distribuye las habilidades cognitivas de manera equilibrada segn taxonoma SIMCE
4. Las preguntas deben evaluar aprendizajes significativos, no memorizacin de detalles irrelevantes
5. Los distractores (opciones incorrectas) deben ser plausibles y revelar concepciones errneas comunes
6. Los textos deben ser originales, apropiados para el nivel, y con complejidad adecuada
7. Las preguntas deben evaluar distintos niveles de comprensin y aplicacin

FORMATO REQUERIDO:
{
  "titulo": "Ttulo descriptivo de la prueba",
  "instrucciones": "Instrucciones claras y detalladas para los estudiantes",
  "textos": [
    {
      "id": 1,
      "titulo": "Ttulo representativo del texto",
      "contenido": "Texto original y apropiado de 250-350 palabras con complejidad adecuada al nivel",
      "tipo": "narrativo/informativo/argumentativo/poetico",
      "palabras": 300
    }
  ],
  "preguntas": [
    {
      "numero": 1,
      "pregunta": "Enunciado claro que evale una habilidad especfica",
      "opciones": ["Alternativa correcta", "Distractor plausible 1", "Distractor plausible 2", "Distractor plausible 3"],
      "respuestaCorrecta": "A",
      "habilidad": "Habilidad SIMCE especfica que evala",
      "justificacion": "Explicacin pedaggica de por qu es correcta y los errores conceptuales en los distractores",
      "textoId": 1
    }
  ]
}

REQUISITOS ESPECFICOS:
- ${Fe==="Lenguaje y Comunicacin"||Fe==="Lengua y Literatura"?"3-4 textos de distintos tipos (narrativo, informativo, argumentativo y/o potico) con temticas complementarias":"2-3 textos informativos con contenido relevante para el objetivo de aprendizaje"}
- Exactamente 30 preguntas numeradas del 1 al 30
- 4 opciones por pregunta (A-D) con una nica respuesta correcta
- Habilidades a evaluar segn SIMCE: ${TO.join(", ")}
- Para preguntas basadas en textos: incluir el "textoId" correspondiente
- Sin comentarios, explicaciones ni marcas fuera de la estructura JSON

IMPORTANTE: Generar un instrumento de evaluacin de ALTA CALIDAD que pueda ser usado directamente en un contexto escolar real.`};function et(Ne,ve){if(Ne==="Desarrollo"&&Array.isArray(ve))return ve.map((Fe,ze)=>{if(typeof Fe=="string"){const He=Fe.match(/^(.*?)(?:R[u]brica:|RUBRICA:|Rubrica:)(.*)$/is);return He?{pregunta:Cc(He[1],`desarrollo-pregunta-${ze}`),rubrica:Cc(He[2],`desarrollo-rubrica-${ze}`)}:{pregunta:Cc(Fe,`desarrollo-pregunta-simple-${ze}`),rubrica:""}}if(Fe&&typeof Fe=="object"){const He=Cc(Fe,`desarrollo-obj-pregunta-${ze}`,"pregunta","Pregunta","texto");let Ye="";if(Fe.rubrica||Fe.Rubrica||Fe.rbrica||Fe.Rbrica){const rt=Fe.rubrica||Fe.Rubrica||Fe.rbrica||Fe.Rbrica;Ye=_i(rt,`desarrollo-rubrica-${ze}`)}return{pregunta:He,rubrica:Ye}}return{pregunta:_i(Fe,`desarrollo-fallback-${ze}`),rubrica:""}});if(Ne==="Trminos Pareados"&&Array.isArray(ve))return ve.map((Fe,ze)=>{if(typeof Fe=="string"){const He=Fe.match(/^(.+?)[\s:-]+(.+)$/);return He?{id:ze,concepto:Cc(He[1],`pareados-concepto-${ze}`),definicion:Cc(He[2],`pareados-definicion-${ze}`)}:{id:ze,concepto:Cc(Fe,`pareados-concepto-simple-${ze}`),definicion:""}}return Fe&&typeof Fe=="object"?{id:ze,concepto:Cc(Fe,`pareados-obj-concepto-${ze}`,"concepto","termino"),definicion:Cc(Fe,`pareados-obj-definicion-${ze}`,"definicion","significado")}:{id:ze,concepto:_i(Fe,`pareados-fallback-${ze}`),definicion:""}});if(Ne==="Comprensin de Lectura"){if(ve&&typeof ve=="object"&&!Array.isArray(ve)&&Array.isArray(ve.preguntas))return{texto:Cc(ve,"comprension-texto","texto"),preguntas:ve.preguntas.map((Fe,ze)=>({pregunta:Cc(Fe,`comprension-pregunta-${ze}`,"pregunta"),opciones:Array.isArray(Fe.opciones)?Fe.opciones.map(He=>_i(He,`comprension-opcion-${ze}`)):[],respuestaCorrecta:_i(Fe.respuestaCorrecta,`comprension-respuesta-${ze}`),puntaje:typeof Fe.puntaje=="number"?Fe.puntaje:1}))};if(Array.isArray(ve)){const Fe=ve.map((He,Ye)=>Cc(He,`comprension-bloque-${Ye}`,"texto")).join(`

---

`),ze=ve.flatMap(He=>Array.isArray(He.preguntas)?He.preguntas:[]);return{texto:Fe,preguntas:ze.map((He,Ye)=>({pregunta:Cc(He,`comprension-combined-pregunta-${Ye}`,"pregunta"),opciones:Array.isArray(He.opciones)?He.opciones.map(rt=>_i(rt,`comprension-combined-opcion-${Ye}`)):[],respuestaCorrecta:_i(He.respuestaCorrecta,`comprension-combined-respuesta-${Ye}`),puntaje:typeof He.puntaje=="number"?He.puntaje:1}))}}}return Ne==="Quiz"&&Array.isArray(ve)?ve.map((Fe,ze)=>({pregunta:Cc(Fe,`quiz-pregunta-${ze}`,"pregunta"),opciones:Array.isArray(Fe.opciones)?Fe.opciones.map(He=>_i(He,`quiz-opcion-${ze}`)):[],respuestaCorrecta:_i(Fe.respuestaCorrecta,`quiz-respuesta-${ze}`),puntaje:typeof Fe.puntaje=="number"?Fe.puntaje:1})):ve}const bt=async Ne=>{var ve;if(Ne.preventDefault(),!de.contenido.trim()||de.tipos.length===0){B("Contenido y al menos un tipo de actividad son obligatorios.");return}y(!0),B(null);try{const Fe=await Promise.all(Q.map(async Ot=>({nombre:Ot.name,url:await alt(Ot)}))),ze=Ie(),He=await oa.currentUser.getIdToken(),Ye=await fetch("/api/generarActividadRemota",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${He}`},body:JSON.stringify({prompt:ze,formData:de,selectedFiles:Q})});if(!Ye.ok)throw new Error("Error al generar la actividad con IA");const rt=await Ye.json(),Ct={};for(const Ot of de.tipos){const Kt=(ve=rt.actividades)==null?void 0:ve[Ot];Ct[Ot]=et(Ot,Kt)}let Et="";rt.panelDidactico&&(Et=typeof rt.panelDidactico=="string"?rt.panelDidactico:JSON.stringify(rt.panelDidactico));const Qt={id:"",fechaCreacion:new Date().toISOString(),...de,recursos:{...de.recursos,archivos:Fe},introduccion:_i(rt.introduccion,"introduccion")||"Actividad generada para reforzar el aprendizaje.",panelDidactico:Et,generatedContent:Ct};L(Qt)}catch(Fe){B(`Error al generar la actividad: ${(Fe==null?void 0:Fe.message)||Fe}`)}finally{y(!1)}},jt=async Ne=>{if(Ne.preventDefault(),!ge.contenido.trim()||!ge.objetivosAprendizaje.trim()){B("Contenido y objetivos de aprendizaje son obligatorios.");return}y(!0),B(null);try{const ve=Be(),Fe=await oa.currentUser.getIdToken(),ze=await fetch("/api/generarPruebaRemota",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Fe}`},body:JSON.stringify({prompt:ve,pruebaFormData:ge})});if(!ze.ok)throw new Error("Error al generar la prueba con IA");const He=await ze.json();if(!He.preguntas||!Array.isArray(He.preguntas))throw new Error("La respuesta de la IA no contiene un array de preguntas vlido");const Ye=(He.textos||[]).map((Et,Qt)=>({id:Et.id||Qt+1,titulo:_i(Et.titulo,`texto-titulo-${Qt}`)||`Texto ${Qt+1}`,contenido:_i(Et.contenido,`texto-contenido-${Qt}`)||"Contenido no disponible",tipo:["narrativo","informativo","argumentativo","poetico"].includes(Et.tipo)?Et.tipo:"informativo",palabras:Et.palabras||(Et.contenido?String(Et.contenido).split(" ").length:0)})),rt=He.preguntas.slice(0,30).map((Et,Qt)=>({numero:Et.numero||Qt+1,pregunta:_i(Et.pregunta,`pregunta-${Qt}`)||`Pregunta ${Qt+1}`,opciones:Array.isArray(Et.opciones)&&Et.opciones.length>=4?Et.opciones.slice(0,4).map((Ot,Kt)=>_i(Ot,`pregunta-opcion-${Qt}-${Kt}`)):["A","B","C","D"],respuestaCorrecta:["A","B","C","D"].includes(Et.respuestaCorrecta)?Et.respuestaCorrecta:"A",habilidad:TO.includes(Et.habilidad)?Et.habilidad:TO[0],justificacion:_i(Et.justificacion,`justificacion-${Qt}`)||"Justificacin no disponible",...Et.textoId&&typeof Et.textoId=="number"?{textoId:Et.textoId}:{}})),Ct={id:"",fechaCreacion:new Date().toISOString(),...ge,titulo:_i(He.titulo,"prueba-titulo")||`Prueba ${ge.asignatura}`,instrucciones:_i(He.instrucciones,"prueba-instrucciones")||"Lee y responde.",textos:Ye,preguntas:rt};q(Ct)}catch(ve){B(`Error al generar la prueba: ${(ve==null?void 0:ve.message)||ve}`)}finally{y(!1)}},qt=async()=>{if(S)try{C(!0),await nlt(S),ae(Ae),z([]),m(!1),L(null)}catch(Ne){console.error("Error al guardar la actividad con archivos:",Ne),B("No se pudo guardar la actividad. Revisa los archivos adjuntos.")}finally{C(!1)}},ir=async()=>{if(H)try{C(!0);const Ne={...H,cursosDestino:H.cursosDestino||[],estudiantesDestino:H.estudiantesDestino||[],textos:H.textos||[],preguntas:H.preguntas.map(ve=>({...ve,textoId:ve.textoId||null}))};await Zot(Ne),xe(fe),x(!1),q(null)}catch(Ne){console.error("Error al guardar la prueba:",Ne),B("No se pudo guardar la prueba.")}finally{C(!1)}},Ut=w.useMemo(()=>{var Fe,ze,He;const Ne=c||d;if(!Ne||!o.length)return[];const ve=new Map;return!((Fe=Ne.cursosDestino)!=null&&Fe.length)&&!((ze=Ne.estudiantesDestino)!=null&&ze.length)?[]:((He=Ne.estudiantesDestino)!=null&&He.length&&o.filter(Ye=>Ye.profile===It.ESTUDIANTE&&Ne.estudiantesDestino.includes(Ye.nombreCompleto)).forEach(Ye=>ve.set(Ye.id,Ye)),Array.from(ve.values()).sort((Ye,rt)=>Ye.nombreCompleto.localeCompare(rt.nombreCompleto)))},[c,d,o]),Nr=w.useMemo(()=>{const Ne=(c==null?void 0:c.id)||(d==null?void 0:d.id);return a.filter(ve=>ve.actividadId===Ne)},[a,c,d]),tr=w.useMemo(()=>o.filter(Ne=>Ne.profile===It.ESTUDIANTE).sort((Ne,ve)=>Ne.nombreCompleto.localeCompare(ve.nombreCompleto)),[o]),Xr=w.useMemo(()=>M.trim()?tr.filter(Ne=>Ne.nombreCompleto.toLowerCase().includes(M.toLowerCase())):tr,[tr,M]),hr=w.useMemo(()=>{const Ne=new Set;return e.forEach(ve=>{(ve.estudiantesDestino||[]).forEach(Fe=>{const ze=o.find(He=>He.profile===It.ESTUDIANTE&&He.nombreCompleto===Fe);ze&&Ne.add(ze.id)})}),r.forEach(ve=>{(ve.estudiantesDestino||[]).forEach(Fe=>{const ze=o.find(He=>He.profile===It.ESTUDIANTE&&He.nombreCompleto===Fe);ze&&Ne.add(ze.id)})}),a.forEach(ve=>Ne.add(ve.estudianteId)),o.filter(ve=>ve.profile===It.ESTUDIANTE&&Ne.has(ve.id)).sort((ve,Fe)=>ve.nombreCompleto.localeCompare(Fe.nombreCompleto))},[e,r,a,o]),Dr=w.useMemo(()=>o.find(Ne=>Ne.id===oe)||null,[o,oe]),or=w.useMemo(()=>{if(!Dr)return{asignadas:[],respuestas:[]};const Ne=[...e.filter(Fe=>(Fe.estudiantesDestino||[]).includes(Dr.nombreCompleto)).map(Fe=>({tipo:"Actividad",item:Fe})),...r.filter(Fe=>(Fe.estudiantesDestino||[]).includes(Dr.nombreCompleto)).map(Fe=>({tipo:"Prueba",item:Fe}))],ve=a.filter(Fe=>Fe.estudianteId===Dr.id);return{asignadas:Ne,respuestas:ve}},[Dr,e,r,a]),Yr=()=>i.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[["carpetas","actividades","pruebas","gestion"].map(Ne=>i.jsxs("button",{onClick:()=>{Z(Ne),u(null),f(null),be(null)},className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition
            ${K===Ne?"bg-amber-500 text-white shadow":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:[Ne==="carpetas"&&i.jsx(kG,{size:18}),Ne==="actividades"&&i.jsx(Ko,{size:18}),Ne==="pruebas"&&i.jsx(loe,{size:18}),Ne==="carpetas"?"Carpetas de Estudiantes":Ne==="actividades"?"Actividades Remotas":Ne==="pruebas"?"Pruebas Estandarizadas":"Gestin de Trabajos"]},Ne)),i.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx(wy,{className:"absolute left-3 top-1/2 -translate-y-1/2 opacity-60",size:18}),i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:M,onChange:Ne=>P(Ne.target.value),className:"pl-10 pr-3 py-2 rounded-xl bg-white border border-slate-200 focus:outline-none focus:ring-2 focus:ring-amber-400"})]}),K==="actividades"&&!S&&!c&&i.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[i.jsx(Vj,{size:18})," Nueva"]}),K==="pruebas"&&!H&&!d&&i.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[i.jsx(Vj,{size:18})," Nueva"]})]})]}),Xa=w.useMemo(()=>{const Ne=new Set;return e.forEach(ve=>(ve==null?void 0:ve.asignatura)&&Ne.add(ve.asignatura)),["Todas",...Array.from(Ne).sort()]},[e]),aa=w.useMemo(()=>{const Ne=new Set;return e.forEach(Fe=>(Fe==null?void 0:Fe.nivel)&&Ne.add(Fe.nivel)),["Todos","",...Array.from(Ne).filter(Fe=>!!Fe&&Fe!=="").sort()]},[e]),Gn=w.useMemo(()=>{const Ne=[];for(const ve of e){const Fe=ve.estudiantesDestino||[];for(const ze of Fe){const He=o.find(rt=>rt.profile===It.ESTUDIANTE&&rt.nombreCompleto===ze)||null,Ye=He?a.find(rt=>rt.estudianteId===He.id&&rt.actividadId===ve.id):void 0;Ne.push({actividad:ve,estudiante:He,estado:Ye?"Completado":"Pendiente",respuesta:Ye})}}return Ne},[e,o,a]),is=w.useMemo(()=>Gn.filter(Ne=>{const ve=U==="Todas"||Ne.actividad.asignatura===U,Fe=R==="Todos"||Ne.actividad.nivel===R;return ve&&Fe}),[Gn,U,R]),rr=()=>{var Ne;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Gestin de Trabajos"}),i.jsx("p",{className:"text-slate-500",children:"Organiza envos y realizados por asignatura y nivel. Reasigna actividades ya creadas sin consumir tokens."})]}),i.jsxs("div",{className:"md:ml-auto flex flex-wrap gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Asignatura"}),i.jsx("select",{value:U,onChange:ve=>Y(ve.target.value),className:"border-slate-300 rounded-md",children:Xa.map(ve=>i.jsx("option",{value:ve,children:ve},ve))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Nivel"}),i.jsx("select",{value:R,onChange:ve=>D(ve.target.value),className:"border-slate-300 rounded-md",children:aa.map(ve=>i.jsx("option",{value:ve,children:ve},ve))})]})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Asignatura"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nivel"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Tipos"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha"}),i.jsx("th",{className:"px-4 py-3"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:is.map((ve,Fe)=>{var ze,He,Ye;return i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:i.jsx(La,{content:ve.actividad.asignatura,context:"gestion-asig"})}),i.jsx("td",{className:"px-4 py-3 text-sm",children:ve.actividad.nivel||""}),i.jsx("td",{className:"px-4 py-3 text-sm",children:((ze=ve.estudiante)==null?void 0:ze.nombreCompleto)||""}),i.jsx("td",{className:"px-4 py-3 text-sm",children:(He=ve.actividad.tipos)==null?void 0:He.join(", ")}),i.jsx("td",{className:"px-4 py-3 text-sm",children:ve.estado==="Completado"?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[i.jsx(pa,{size:14})," Completado"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:[i.jsx(Dc,{size:14})," Pendiente"]})}),i.jsx("td",{className:"px-4 py-3 text-sm",children:ve.respuesta?`${ve.respuesta.puntaje}/${ve.respuesta.puntajeMaximo}`:""}),i.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:ve.respuesta?ve.respuesta.nota:""}),i.jsx("td",{className:"px-4 py-3 text-sm",children:ve.respuesta?vZ(ve.respuesta.fechaCompletado):""}),i.jsx("td",{className:"px-4 py-3 text-sm text-right",children:i.jsx("button",{onClick:()=>{J(ve.actividad),ie([])},className:"text-blue-600 hover:text-blue-800 font-semibold",title:"Reasignar a nuevos estudiantes",children:"Reasignar"})})]},`${ve.actividad.id}-${((Ye=ve.estudiante)==null?void 0:Ye.id)||Fe}`)})})]})}),W&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 shadow-xl",children:[i.jsx("h3",{className:"text-xl font-bold mb-2",children:"Reasignar Actividad"}),i.jsxs("p",{className:"text-sm text-slate-600 mb-4",children:["Selecciona estudiantes adicionales para la actividad de ",i.jsx("strong",{children:W.asignatura}),"  ",(Ne=W.tipos)==null?void 0:Ne.join(", "),"."]}),i.jsx("div",{className:"mb-3",children:i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:M,onChange:ve=>P(ve.target.value),className:"w-full border-slate-300 rounded-md shadow-sm"})}),i.jsx("div",{className:"max-h-64 overflow-y-auto border rounded-md p-2 bg-slate-50",children:(M?Xr:tr).map(ve=>{const Fe=(W.estudiantesDestino||[]).includes(ve.nombreCompleto);return i.jsxs("label",{className:`flex items-center gap-2 p-2 rounded cursor-pointer ${Fe?"opacity-50":"hover:bg-slate-100"}`,children:[i.jsx("input",{type:"checkbox",disabled:Fe,checked:le.includes(ve.nombreCompleto),onChange:()=>{ie(ze=>ze.includes(ve.nombreCompleto)?ze.filter(He=>He!==ve.nombreCompleto):[...ze,ve.nombreCompleto])},className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:ve.nombreCompleto,children:ve.nombreCompleto}),Fe&&i.jsx("span",{className:"ml-auto text-xs text-slate-400",children:"Ya asignado"})]},ve.id)})}),i.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>{J(null),ie([])},className:"px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),i.jsx("button",{disabled:re||le.length===0,onClick:async()=>{if(W)try{ce(!0);const ve=W.estudiantesDestino||[],Fe=Array.from(new Set([...ve,...le]));await Jot(W.id,{estudiantesDestino:Fe}),J(null),ie([])}catch(ve){console.error("Error reasignando actividad:",ve),B("No se pudo reasignar la actividad.")}finally{ce(!1)}},className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400",children:re?"Guardando...":"Confirmar reasignacin"})]})]})})]})},wn=()=>{const Ne=M?Xr:hr;return Ne.length?i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4",children:Ne.map(ve=>{const Fe=a.filter(Ye=>Ye.estudianteId===ve.id),ze=Fe.length,He=e.filter(Ye=>(Ye.estudiantesDestino||[]).includes(ve.nombreCompleto)).length+r.filter(Ye=>(Ye.estudiantesDestino||[]).includes(ve.nombreCompleto)).length;return i.jsxs("button",{onClick:()=>be(ve.id),className:"group text-left rounded-2xl border border-slate-200 bg-white hover:shadow-md transition overflow-hidden",children:[i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gradient-to-br from-amber-50 to-white",children:[i.jsx("div",{className:"rounded-xl p-3 bg-amber-100 text-amber-700",children:i.jsx(kG,{})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"font-semibold text-slate-800 truncate",children:ve.nombreCompleto}),i.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[i.jsx(cx,{size:14})," ",ve.curso||""]})]})]}),i.jsxs("div",{className:"p-4 grid grid-cols-3 text-center text-sm text-slate-600",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:He}),i.jsx("p",{className:"text-xs",children:"Asignadas"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:ze}),i.jsx("p",{className:"text-xs",children:"Entregas"})]}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(Dc,{size:16,className:"opacity-70"}),i.jsx("span",{className:"text-xs mt-1",children:Fe.length?Kw(Fe.sort((Ye,rt)=>(Ye.fechaCompletado||"").localeCompare(rt.fechaCompletado||"")).slice(-1)[0].fechaCompletado):""})]})]})]},ve.id)})}):i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow text-center text-slate-500",children:"No hay estudiantes asignados an."})},cn=()=>{if(!Dr)return null;const{asignadas:Ne,respuestas:ve}=or;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsxs("button",{onClick:()=>be(null),className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900",children:[i.jsx(Qj,{size:18})," Volver"]}),i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Historial  ",Dr.nombreCompleto]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Tipo"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Ttulo / Asignatura"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Plazo"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Ne.map(({tipo:Fe,item:ze})=>{var Ct;const He=ve.find(Et=>Et.actividadId===ze.id),Ye=Fe==="Actividad"?`${ze.asignatura}  ${(Ct=ze.tipos)==null?void 0:Ct.join(", ")}`:ze.titulo,rt=ze.plazoEntrega?Kw(ze.plazoEntrega):"";return i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"px-4 py-3 text-sm",children:Fe}),i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:i.jsx(La,{content:Ye,context:"hist-titulo"})}),i.jsx("td",{className:"px-4 py-3 text-sm",children:rt}),i.jsx("td",{className:"px-4 py-3 text-sm",children:He?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[i.jsx(pa,{size:14})," Completado"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:[i.jsx(Dc,{size:14})," Pendiente"]})}),i.jsx("td",{className:"px-4 py-3 text-sm",children:He?`${He.puntaje}/${He.puntajeMaximo}`:""}),i.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:He?He.nota:""})]},ze.id)})})]})})]})},On=()=>{var Ne,ve,Fe;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c?i.jsxs(i.Fragment,{children:[i.jsx(La,{content:c.asignatura,context:"actividad-asignatura"})," - ",c.tipos.join(", ")]}):i.jsx(La,{content:(d==null?void 0:d.titulo)||"Prueba Estandarizada",context:"prueba-titulo"})}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Plazo:"," ",Kw((c==null?void 0:c.plazoEntrega)||(d==null?void 0:d.plazoEntrega)),d&&` | Duracin: ${d.duracionMinutos} min`]})]}),i.jsxs("button",{onClick:()=>{u(null),f(null)},className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[i.jsx(Qj,{size:18})," Volver al listado"]})]}),i.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"}),((Ne=c==null?void 0:c.tipos)==null?void 0:Ne.includes("Desarrollo"))&&i.jsx("th",{className:"px-4 py-3"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Ut.map(ze=>{var Ye;const He=Nr.find(rt=>rt.estudianteId===ze.id);return i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:ze.nombreCompleto}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:He?i.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):i.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:He?`${He.puntaje}/${He.puntajeMaximo}`:"-"}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-bold",children:He?i.jsx("span",{className:parseFloat(He.nota)>=4?"text-green-600":"text-red-600",children:He.nota}):"-"}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:He?vZ(He.fechaCompletado):"-"}),((Ye=c==null?void 0:c.tipos)==null?void 0:Ye.includes("Desarrollo"))&&i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:He?i.jsx("button",{onClick:()=>{var Ct,Et,Qt;je(He);const rt=Array.from({length:((Et=(Ct=c.generatedContent)==null?void 0:Ct.Desarrollo)==null?void 0:Et.length)||0},(Ot,Kt)=>({index:Kt,puntaje:0,observacion:""}));ke(rt),we(((Qt=He==null?void 0:He.revisionDocente)==null?void 0:Qt.observacionesGenerales)||"")},className:"text-blue-600 hover:text-blue-800 font-semibold",children:"Revisar Desarrollo"}):i.jsx("span",{className:"text-slate-400",children:"-"})})]},ze.id)})})]})})]}),X&&((ve=c==null?void 0:c.tipos)==null?void 0:ve.includes("Desarrollo"))&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 shadow-xl",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Revisin de Desarrollo  ",(X==null?void 0:X.estudianteNombre)||""]}),i.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto",children:(((Fe=c.generatedContent)==null?void 0:Fe.Desarrollo)||[]).map((ze,He)=>{var Ye,rt;return i.jsxs("div",{className:"p-3 border rounded-lg",children:[i.jsxs("p",{className:"font-semibold",children:[He+1,". ",i.jsx(La,{content:ze.pregunta,context:`revision-pregunta-${He}`})]}),ze.rubrica&&i.jsxs("p",{className:"text-xs text-slate-600 mt-2 bg-slate-50 p-2 rounded",children:[i.jsx("strong",{children:"Rbrica:"})," ",i.jsx(La,{content:ze.rubrica,context:`revision-rubrica-${He}`})]}),i.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[i.jsx("label",{className:"text-sm text-slate-700",children:"Puntaje:"}),i.jsx("input",{type:"number",min:0,step:.5,value:((Ye=De[He])==null?void 0:Ye.puntaje)??0,onChange:Ct=>{const Et=Number(Ct.target.value)||0;ke(Qt=>{const Ot=[...Qt];return Ot[He]={...Ot[He]||{index:He,puntaje:0},puntaje:Et},Ot})},className:"w-24 border-slate-300 rounded-md"}),i.jsx("input",{type:"text",placeholder:"Observacin (opcional)",value:((rt=De[He])==null?void 0:rt.observacion)||"",onChange:Ct=>{const Et=Ct.target.value;ke(Qt=>{const Ot=[...Qt];return Ot[He]={...Ot[He]||{index:He,puntaje:0},observacion:Et},Ot})},className:"flex-1 border-slate-300 rounded-md"})]})]},He)})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Observaciones Generales"}),i.jsx("textarea",{rows:3,value:ue,onChange:ze=>we(ze.target.value),className:"w-full border-slate-300 rounded-md"})]}),i.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>{je(null),ke([]),we("")},className:"px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),i.jsx("button",{onClick:async()=>{if(X)try{j(!0);const ze=Number(X.puntaje)||0,He=Number(X.puntajeMaximo)||0,Ye=(De||[]).reduce((Et,Qt)=>Et+(Number(Qt.puntaje)||0),0),rt=ze+Ye,Ct=tlt(rt,He);await elt(X.id,{puntaje:rt,puntajeMaximo:He,nota:Ct,revisionDocente:{completada:!0,observacionesGenerales:ue||"",detalle:De||[],puntajeDocente:Ye}}),je(null),ke([]),we("")}catch(ze){console.error("Error guardando revisin:",ze),B("No se pudo guardar la revisin del docente.")}finally{j(!1)}},disabled:_,className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400",children:_?"Guardando...":"Guardar Revisin"})]})]})})]})},Fn=()=>{var Ne,ve;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),i.jsxs("button",{onClick:()=>m(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[i.jsx(Qj,{size:18})," Volver"]})]}),i.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generar una actividad."}),i.jsxs("form",{onSubmit:bt,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),i.jsx("select",{name:"asignatura",value:de.asignatura,onChange:Ue,className:"w-full border-slate-300 rounded-md shadow-sm",children:ma.map(Fe=>i.jsx("option",{value:Fe,children:Fe},Fe))})]}),i.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos (Opcional)"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones"}),i.jsx("textarea",{name:"instrucciones",value:(Ne=de.recursos)==null?void 0:Ne.instrucciones,onChange:Ze,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Ej: Lee y luego responde..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces"}),i.jsx("textarea",{name:"enlaces",value:(ve=de.recursos)==null?void 0:ve.enlaces,onChange:Ze,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Pega un enlace por lnea..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos"}),i.jsx("input",{type:"file",multiple:!0,onChange:We,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),i.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Slo estudiantes)"}),i.jsxs("div",{children:[i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:M,onChange:Fe=>P(Fe.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(M?Xr:tr).map(Fe=>{var ze;return i.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(ze=de.estudiantesDestino)==null?void 0:ze.includes(Fe.nombreCompleto),onChange:()=>Xe(Fe.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Fe.nombreCompleto,children:Fe.nombreCompleto})]},Fe.id)})})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{name:"contenido",value:de.contenido,onChange:Ue,required:!0,rows:4,placeholder:"Temas, conceptos clave o texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),i.jsx("input",{type:"date",name:"plazoEntrega",value:de.plazoEntrega,onChange:Ue,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),i.jsx("div",{className:"space-y-3",children:dTe.map(Fe=>i.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:de.tipos.includes(Fe),onChange:()=>me(Fe),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:Fe})]}),de.tipos.includes(Fe)&&i.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),_O[Fe].map(ze=>i.jsx("button",{type:"button",onClick:()=>Ve(Fe,ze),className:`px-3 py-1 rounded-full font-semibold text-xs ${de.cantidadPreguntas[Fe]===ze?"bg-amber-500 text-white":"bg-slate-200"}`,children:ze},ze))]})]},Fe))})]})]}),k&&i.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-2",children:k}),i.jsx("div",{className:"pt-2 text-right",children:i.jsxs("button",{type:"submit",disabled:v,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center justify-center gap-2",children:[v?i.jsx(Dc,{className:"animate-spin",size:18}):null,v?"Generando...":"Generar y Previsualizar"]})})]})]})},sa=()=>{var Ne;return i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualizacin de la Actividad"}),i.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo est correcto, confirma para asignar."}),i.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[i.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[i.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introduccin para el Estudiante"}),i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(La,{content:S==null?void 0:S.introduccion,context:"preview-introduccion"})})]}),(S==null?void 0:S.panelDidactico)&&i.jsxs("div",{className:"p-5 bg-emerald-50 border-l-4 border-emerald-500 rounded-r-lg shadow-md",children:[i.jsxs("h3",{className:"font-bold text-emerald-800 text-lg mb-3 flex items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Panel Didctico - Material de Apoyo"]}),i.jsx("div",{className:"prose prose-emerald max-w-none text-slate-700",children:(()=>{try{if(typeof S.panelDidactico=="string"&&S.panelDidactico.trim().startsWith("{")){const ve=JSON.parse(S.panelDidactico);return i.jsxs("div",{className:"space-y-4",children:[ve.titulo&&i.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:ve.titulo}),Array.isArray(ve.subtitulos)&&ve.subtitulos.map((Fe,ze)=>i.jsxs("div",{className:"mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:Fe.titulo}),i.jsx("p",{className:"whitespace-pre-line",children:Fe.texto})]},ze)),Array.isArray(ve.conceptosClave)&&ve.conceptosClave.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:"Conceptos Clave"}),i.jsx("ul",{className:"list-disc pl-5 space-y-1",children:ve.conceptosClave.map((Fe,ze)=>i.jsx("li",{className:"text-emerald-800",children:Fe},ze))})]}),!ve.subtitulos&&!ve.conceptosClave&&i.jsx("div",{className:"whitespace-pre-line",children:JSON.stringify(ve,null,2)})]})}return i.jsx("p",{className:"whitespace-pre-wrap",children:S.panelDidactico})}catch{return i.jsx("p",{className:"whitespace-pre-wrap",children:S.panelDidactico})}})()})]}),(S==null?void 0:S.recursos)&&(S.recursos.instrucciones||S.recursos.enlaces||((Ne=S.recursos.archivos)==null?void 0:Ne.length))&&i.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[i.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),i.jsxs("div",{className:"space-y-3",children:[S.recursos.instrucciones&&i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(La,{content:S.recursos.instrucciones,context:"preview-instrucciones"})}),S.recursos.enlaces&&i.jsx("div",{children:S.recursos.enlaces.split(`
`).map((ve,Fe)=>ve.trim()&&i.jsx("a",{href:ve,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:ve},Fe))}),S.recursos.archivos&&S.recursos.archivos.length>0&&i.jsx("ul",{className:"list-disc list-inside",children:S.recursos.archivos.map(ve=>i.jsx("li",{className:"text-slate-700",children:ve.nombre},ve.nombre))})]})]}),S==null?void 0:S.tipos.map(ve=>{const Fe=S.generatedContent[ve];return Fe?i.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:ve}),i.jsxs("div",{className:"space-y-4 text-sm",children:[ve==="Quiz"&&Array.isArray(Fe)&&Fe.map((ze,He)=>i.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[i.jsxs("p",{className:"font-semibold",children:[He+1,". ",i.jsx(La,{content:ze.pregunta,context:`preview-quiz-pregunta-${He}`})]}),i.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:ze.opciones.map((Ye,rt)=>i.jsxs("li",{children:[i.jsxs("strong",{children:[String.fromCharCode(65+rt),"."]})," ",i.jsx(La,{content:Ye,context:`preview-quiz-opcion-${He}-${rt}`})]},rt))}),i.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",i.jsx(La,{content:ze.respuestaCorrecta,context:`preview-quiz-respuesta-${He}`})]})]},He)),ve==="Comprensin de Lectura"&&Fe&&typeof Fe=="object"&&"preguntas"in Fe&&Array.isArray(Fe.preguntas)&&i.jsxs("div",{children:[i.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:i.jsx(La,{content:Fe.texto,context:"preview-lectura-texto"})}),Fe.preguntas.map((ze,He)=>i.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[i.jsxs("p",{className:"font-semibold",children:[He+1,". ",i.jsx(La,{content:ze.pregunta,context:`preview-lectura-pregunta-${He}`})]}),i.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:ze.opciones.map((Ye,rt)=>i.jsxs("li",{children:[i.jsxs("strong",{children:[String.fromCharCode(65+rt),"."]})," ",i.jsx(La,{content:Ye,context:`preview-lectura-opcion-${He}-${rt}`})]},rt))}),i.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",i.jsx(La,{content:ze.respuestaCorrecta,context:`preview-lectura-respuesta-${He}`})]})]},He))]}),ve==="Trminos Pareados"&&Array.isArray(Fe)&&i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border border-slate-200",children:[i.jsx("thead",{className:"bg-slate-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),i.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definicin"})]})}),i.jsx("tbody",{children:Fe.map((ze,He)=>i.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[i.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:i.jsx(La,{content:ze.concepto,context:`preview-pareado-concepto-${He}`})}),i.jsx("td",{className:"p-2 align-top text-slate-700",children:i.jsx(La,{content:ze.definicion,context:`preview-pareado-definicion-${He}`})})]},ze.id))})]})}),ve==="Desarrollo"&&Array.isArray(Fe)&&Fe.map((ze,He)=>i.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[i.jsxs("p",{className:"font-semibold",children:[He+1,". ",i.jsx(La,{content:ze.pregunta,context:`preview-desarrollo-pregunta-${He}`})]}),i.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[i.jsx("strong",{className:"font-semibold",children:"Rbrica:"})," ",i.jsx(La,{content:ze.rubrica,context:`preview-desarrollo-rubrica-${He}`})]})]},He))]})]},ve):null})]}),i.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>L(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),i.jsx("button",{onClick:qt,disabled:N,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:N?"Guardando...":"Confirmar y Asignar"})]})]})},Se=()=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify_between items-start",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Prueba Estandarizada"}),i.jsxs("button",{onClick:()=>x(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[i.jsx(Qj,{size:18})," Volver"]})]}),i.jsxs("form",{onSubmit:jt,className:"space-y-6 mt-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),i.jsx("select",{name:"asignatura",value:ge.asignatura,onChange:qe,className:"w-full border-slate-300 rounded-md shadow-sm",children:ma.map(Ne=>i.jsx("option",{value:Ne,children:Ne},Ne))})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Objetivos de Aprendizaje"}),i.jsx("textarea",{name:"objetivosAprendizaje",value:ge.objetivosAprendizaje,onChange:qe,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Describe OA o contenidos evaluados..."})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Contenido Base"}),i.jsx("textarea",{name:"contenido",value:ge.contenido,onChange:qe,rows:4,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),i.jsx("input",{type:"date",name:"plazoEntrega",value:ge.plazoEntrega,onChange:qe,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),i.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Slo estudiantes)"}),i.jsxs("div",{children:[i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:M,onChange:Ne=>P(Ne.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(M?Xr:tr).map(Ne=>{var ve;return i.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(ve=ge.estudiantesDestino)==null?void 0:ve.includes(Ne.nombreCompleto),onChange:()=>Xe(Ne.nombreCompleto,!0),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Ne.nombreCompleto,children:Ne.nombreCompleto})]},Ne.id)})})]})]})]}),k&&i.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:k}),i.jsx("div",{className:"text-right",children:i.jsxs("button",{type:"submit",disabled:v,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center gap-2",children:[v?i.jsx(Dc,{className:"animate-spin",size:18}):null,v?"Generando...":"Generar y Previsualizar"]})})]})]}),Ge=()=>{var Ne,ve;return i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualizacin Prueba"}),i.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa y confirma."}),i.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[i.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[i.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:i.jsx(La,{content:H==null?void 0:H.titulo,context:"preview-prueba-titulo"})}),i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(La,{content:H==null?void 0:H.instrucciones,context:"preview-prueba-instrucciones"})})]}),(Ne=H==null?void 0:H.textos)!=null&&Ne.length?i.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[i.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Textos"}),i.jsx("ol",{className:"space-y-2 list-decimal list-inside",children:H.textos.map((Fe,ze)=>i.jsxs("li",{children:[i.jsxs("p",{className:"font-semibold",children:[i.jsx(La,{content:Fe.titulo,context:`preview-texto-titulo-${ze}`}),i.jsxs("span",{className:"text-xs text-slate-500",children:["(",Fe.tipo,")"]})]}),i.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap mt-1",children:i.jsx(La,{content:Fe.contenido,context:`preview-texto-contenido-${ze}`})})]},Fe.id))})]}):null,(ve=H==null?void 0:H.preguntas)!=null&&ve.length?i.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Preguntas (muestra)"}),H.preguntas.slice(0,10).map((Fe,ze)=>i.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[i.jsxs("p",{className:"font-semibold",children:[Fe.numero,". ",i.jsx(La,{content:Fe.pregunta,context:`preview-pregunta-texto-${ze}`})]}),i.jsx("ul",{className:"list-disc pl-6 text-sm mt-1",children:Fe.opciones.map((He,Ye)=>i.jsx("li",{children:i.jsx(La,{content:He,context:`preview-pregunta-opcion-${ze}-${Ye}`})},Ye))}),i.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-1",children:["Correcta: ",Fe.respuestaCorrecta]})]},Fe.numero))]}):null]}),i.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>q(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),i.jsx("button",{onClick:ir,disabled:N,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:N?"Guardando...":"Confirmar y Asignar"})]})]})},Me=()=>i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),i.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[i.jsx(Vj,{size:18})," Crear Nueva"]})]}),i.jsx("div",{className:"space-y-4",children:e.length>0?e.map(Ne=>{var ze;const ve=[];(ze=Ne.estudiantesDestino)!=null&&ze.length&&ve.push(`Estudiantes: ${Ne.estudiantesDestino.length}`);const Fe=ve.length?ve.join(" | "):"Estudiantes seleccionados";return i.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-800",children:[i.jsx(La,{content:Ne.asignatura,context:`lista-asignatura-${Ne.id}`}),"  ",Ne.tipos.join(", ")]}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",Fe," | Creado: ",Kw(Ne.fechaCreacion)]})]}),i.jsx("button",{onClick:()=>u(Ne),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},Ne.id)}):i.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Use "Crear Nueva".'})})]}),Qe=()=>i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Pruebas Estandarizadas"}),i.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[i.jsx(Vj,{size:18})," Crear Nueva"]})]}),i.jsx("div",{className:"space-y-4",children:r.length>0?r.map(Ne=>i.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800",children:i.jsx(La,{content:Ne.titulo,context:`lista-prueba-titulo-${Ne.id}`})}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Creado: ",Kw(Ne.fechaCreacion)]})]}),i.jsx("button",{onClick:()=>f(Ne),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},Ne.id)):i.jsx("p",{className:"text-slate-500 text-center py-6",children:"No hay pruebas creadas."})})]});return I?i.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):i.jsxs("div",{className:"animate-fade-in",children:[Yr(),oe?cn():H?Ge():S?sa():c||d?On():K==="gestion"?rr():K==="pruebas"?g?Se():Qe():K==="actividades"?A?Fn():Me():wn()]})},dN="actividades_remotas",Vg="respuestas_actividades",rme=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(e&&typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if(e&&typeof e.seconds=="number"&&typeof e.nanoseconds=="number"){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}return null},bZ=e=>{const t=rme(e);return t?t.toISOString():void 0},ilt=e=>{const t=rme(e);return t?t.toISOString().split("T")[0]:void 0},$g=e=>{const t=e.data();return{id:e.id,...t,fechaCreacion:bZ(t.fechaCreacion)||t.fechaCreacion,plazoEntrega:ilt(t.plazoEntrega)||t.plazoEntrega,fechaCompletado:bZ(t.fechaCompletado)||t.fechaCompletado}},m1=(e,t)=>{var n,a;console.error(` Error en ${t}:`,e);const r={name:"FirestoreError",message:e.message||"Error desconocido",code:e.code};return e.code==="failed-precondition"&&((n=e.message)!=null&&n.includes("requires an index"))?(r.message="Se requiere configurar un ndice en la base de datos. Contacta al administrador.",console.log(" Enlace para crear ndice:",(a=e.message.match(/https:\/\/[^\s]+/))==null?void 0:a[0])):e.code==="permission-denied"?r.message="No tienes permisos para acceder a estos datos.":e.code==="unavailable"&&(r.message="Servicio temporalmente no disponible. Intenta nuevamente."),r},olt=e=>new Promise(t=>setTimeout(t,e)),nme=async(e,t=3,r="operacin")=>{for(let n=1;n<=t;n++)try{return await e()}catch(a){if(console.log(` Intento ${n} fall en ${r}:`,a.code||a.message),n===t)throw a;if(["unavailable","deadline-exceeded","internal"].includes(a.code)){const s=Math.pow(2,n)*1e3;console.log(` Reintentando en ${s}ms...`),await olt(s)}else throw a}throw new Error("Max retries exceeded")},llt=(e,t,r)=>{var o;console.log(" Suscribindose a actividades disponibles para:",e.nombreCompleto);const n=[],a=new Map,s=l=>{for(const u of l){const d=$g(u);a.set(d.id,d)}const c=Array.from(a.values());c.sort((u,d)=>new Date(d.fechaCreacion||"").getTime()-new Date(u.fechaCreacion||"").getTime()),console.log(" Actividades combinadas para el estudiante:",c.length),t(c)};try{const l=e.curso||"";if(l){const A=Bt(ht(ut,dN),sr("cursosDestino","array-contains",l)),m=lr(A,{next:g=>{console.log(" Actividades por curso:",g.docs.length),s(g.docs)},error:g=>{if((g==null?void 0:g.code)==="permission-denied")console.warn(" Sin permisos para actividades por curso; verificando doc usuarios/{email} y campo curso.",g);else{const x=m1(g,"suscripcin a actividades por curso");r==null||r(x)}}});n.push(m)}const c=(o=oa.currentUser)==null?void 0:o.uid,u=e.email,d=e.nombreCompleto,f=[u,c,d].filter(Boolean);if(f.length){const A=Bt(ht(ut,dN),sr("estudiantesDestino","array-contains-any",f)),m=lr(A,{next:g=>{console.log(" Actividades por estudiante:",g.docs.length),s(g.docs)},error:g=>{if((g==null?void 0:g.code)==="permission-denied")console.warn(" Sin permisos para actividades por estudiante; continuando con filtro por curso.",g);else{const x=m1(g,"suscripcin a actividades por estudiante");r==null||r(x)}}});n.push(m)}n.length===0&&(console.warn(" Usuario sin curso ni identificadores para filtrar actividades."),t([]))}catch(l){const c=m1(l,"configuracin de suscripciones de actividades");r==null||r(c)}return()=>n.forEach(l=>l&&l())},clt=(e,t,r)=>{var d,f;console.log(" Suscribindose a respuestas del estudiante:",e);const n=(d=oa.currentUser)==null?void 0:d.uid,a=(f=oa.currentUser)==null?void 0:f.email,s=Array.from(new Set([e,n,a].filter(Boolean)));if(s.length===0)return console.warn(" Sin identificadores vlidos para suscripcin de respuestas."),t([]),()=>{};const o=[],l=new Map;let c=0;const u=()=>{const A=Array.from(l.values()).sort((m,g)=>new Date(g.fechaCompletado).getTime()-new Date(m.fechaCompletado).getTime());console.log(" Enviando respuestas procesadas al componente (combinadas):",A.length),t(A)};for(const A of s){const m=Bt(ht(ut,Vg),sr("estudianteId","==",A)),g=lr(m,{next:x=>{try{console.log(` Respuestas recibidas para identificador ${A}:`,x.docs.length);for(const v of x.docs){const y=$g(v);l.set(y.id,y)}u()}catch(v){console.error(" Error procesando respuestas:",v);const y=m1(v,"procesamiento de respuestas");r==null||r(y)}},error:x=>{if((x==null?void 0:x.code)==="permission-denied"){if(console.warn(` Sin permisos para suscripcin de respuestas con identificador ${A}. Continuando con otras.`,x),c++,c===s.length){const y=m1(x,"suscripcin a respuestas (todas fallaron)");r==null||r(y)}return}const v=m1(x,"suscripcin a respuestas");r==null||r(v)}});o.push(g)}return()=>{for(const A of o)try{A()}catch{}}},ult=async e=>nme(async()=>{var s;console.log(" Guardando respuesta de actividad:",{actividadId:e.actividadId,estudianteId:e.estudianteId,puntaje:e.puntaje,calificacion:e.calificacion});const r=((s=oa.currentUser)==null?void 0:s.uid)||e.estudianteId,n={...e,estudianteId:r,fechaCompletado:xr.fromDate(new Date(e.fechaCompletado))},a=await ln(ht(ut,Vg),n);return console.log(" Respuesta guardada exitosamente con ID:",a.id),a.id},3,"guardado de respuesta"),dlt=async(e,t)=>nme(async()=>{var a,s,o,l;const r=["actividadId","idActividad","actividadID"];for(const c of r)try{const u=Bt(ht(ut,Vg),sr(c,"==",e),sr("estudianteId","==",t)),d=await Ir(u);if(d.docs.length>0)return $g(d.docs[0])}catch(u){(u==null?void 0:u.code)==="failed-precondition"&&((a=u==null?void 0:u.message)!=null&&a.includes("requires an index"))?console.warn(` Falta ndice para ${c}+estudianteId; probando otras variantes...`):console.debug(` Consulta por ${c} no retorn resultados o fall:`,(u==null?void 0:u.code)||"")}try{const c=Wt(ut,dN,e);try{const u=Bt(ht(ut,Vg),sr("actividadRef","==",c),sr("estudianteId","==",t)),d=await Ir(u);if(d.docs.length>0)return $g(d.docs[0])}catch(u){if((u==null?void 0:u.code)==="failed-precondition"&&((s=u==null?void 0:u.message)!=null&&s.includes("requires an index"))){console.warn(" Falta ndice para actividadRef+estudianteId; usando fallback con filtro en memoria.");const d=Bt(ht(ut,Vg),sr("actividadRef","==",c)),A=(await Ir(d)).docs.map(m=>$g(m)).find(m=>m.estudianteId===t);if(A)return A}}}catch{}try{const c=Bt(ht(ut,Vg),sr("actividad.id","==",e),sr("estudianteId","==",t)),u=await Ir(c);if(u.docs.length>0)return $g(u.docs[0])}catch(c){(c==null?void 0:c.code)==="failed-precondition"&&((o=c==null?void 0:c.message)!=null&&o.includes("requires an index"))&&console.warn(" Falta ndice para actividad.id+estudianteId; omitiendo este intento.")}const n=[`${dN}/${e}`,`/${dN}/${e}`];for(const c of n)try{const u=Bt(ht(ut,Vg),sr("actividadPath","==",c),sr("estudianteId","==",t)),d=await Ir(u);if(d.docs.length>0)return $g(d.docs[0])}catch(u){(u==null?void 0:u.code)==="failed-precondition"&&((l=u==null?void 0:u.message)!=null&&l.includes("requires an index"))&&console.warn(" Falta ndice para actividadPath+estudianteId; probando siguiente variante...")}return null},2,`verificacin de actividad completada ${e}`),flt=.6,eL=(e,t,r=flt,n=2)=>{if(!t||t<=0)return n.toFixed(1);const a=t*r;let s;return e>=a?s=4+3*(e-a)/(t-a+1e-9):s=1+3*e/(a+1e-9),s=Math.max(n,Math.min(7,s)),s.toFixed(1)},tL=({className:e="w-5 h-5"})=>i.jsxs("svg",{className:`animate-spin ${e}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),hlt=async(e,t,r,n=3)=>{try{for(let a=1;a<=n;a++)try{const s=oa.currentUser;if(!s)throw new Error("Usuario no autenticado.");const o=await s.getIdToken(),l=await fetch("/api/generarFeedbackAutoaprendizaje",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({actividad:e,respuestas:t,estudianteId:r||s.uid})});if(!l.ok){const d=await l.json();throw new Error(d.error||`Error del servidor: ${l.status}`)}const u=(await l.json()).feedback;if(u)return u;throw new Error("La respuesta de la IA no tiene el formato esperado.")}catch(s){if(console.error(`Error en intento ${a} de generar feedback:`,s),a===n)return null}}catch(a){return console.error("Error al generar feedback con IA:",a),null}},Alt=async(e,t,r)=>{console.log(" Iniciando guardado de respuesta...");try{const n=await ult(e);console.log(" Respuesta base guardada con ID:",n);const a={id:n,...e};try{const s=await hlt(t,r);if(s){const{updateDoc:o,doc:l}=await Ss(async()=>{const{updateDoc:u,doc:d}=await Promise.resolve().then(()=>T1);return{updateDoc:u,doc:d}},void 0),{db:c}=await Ss(async()=>{const{db:u}=await Promise.resolve().then(()=>MM);return{db:u}},void 0);return await o(l(c,"respuestas_actividades",n),{retroalimentacionAI:s}),console.log(" Feedback de IA agregado exitosamente"),{...a,retroalimentacionAI:s}}return a}catch(s){return console.warn(" No se pudo generar feedback de IA, pero la respuesta fue guardada:",s),a}}catch(n){throw console.error(" Error crtico al guardar respuesta:",n),n}},zo=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>["comprension","analisis","argumentacion","creatividad","claridad","precision","organizacion"].includes(n))&&(console.warn(` OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},Sc=(e,t)=>{if(t&&zo(e,t),t==="panelDidactico"||t!=null&&t.includes("panelDidactico")){if(typeof e=="string")return e;if(e==null)return"";try{return typeof e=="object"?typeof e.texto=="string"?e.texto:typeof e.contenido=="string"?e.contenido:JSON.stringify(e):String(e)}catch{return"[Error al procesar el panel didctico]"}}if(e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>Sc(a,`${t}-array-item`)).join(", ");const r=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of r)if(e[a]&&typeof e[a]=="string")return e[a];if(Object.keys(e).some(a=>["comprension","analisis","argumentacion","creatividad","claridad","precision"].includes(a)))return"[Criterios de evaluacin]";try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},Ef=(e,t,...r)=>{if(zo(e,`extractTextSafely-${t}`),!e)return"";for(const a of r)if(e[a]){const s=Sc(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}const n=["texto","pregunta","enunciado","contenido","descripcion","value","label"];for(const a of n)if(e[a]){const s=Sc(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}return typeof e=="string"?e:"[Sin contenido disponible]"},Us=({content:e,context:t="unknown"})=>{try{const r=Sc(e,`UltraSafeRenderer-${t}`);return i.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),i.jsx("span",{children:"[Error al mostrar contenido]"})}};function _k(e){var t,r;try{const n=s=>{if(s==null)return null;const o=String(s).trim();return o?(o.includes("/")?o.split("/").filter(Boolean).pop():o).toLowerCase():null},a=[e==null?void 0:e.actividadId,e==null?void 0:e.actividadID,e==null?void 0:e.idActividad,(t=e==null?void 0:e.actividad)==null?void 0:t.id,(r=e==null?void 0:e.actividadRef)==null?void 0:r.id,e==null?void 0:e.actividadPath];for(const s of a){const o=n(s);if(o)return o}}catch{}return null}function yZ(e){if(console.log(" Normalizando lectura:",e),zo(e,"normalizeLectura-input"),!e)return{texto:"",preguntas:[]};const t=(r,n)=>{zo(r,`normalizeQuestion-${n}`);const a=Array.isArray(r==null?void 0:r.opciones)?r.opciones.map((s,o)=>Sc(s,`opcion-${n}-${o}`)).filter(Boolean):[];return{pregunta:Ef(r,`pregunta-${n}`,"pregunta","texto"),opciones:a,respuestaCorrecta:Sc(r==null?void 0:r.respuestaCorrecta,`respuestaCorrecta-${n}`),puntaje:typeof(r==null?void 0:r.puntaje)=="number"?r.puntaje:1}};if(!Array.isArray(e)&&Array.isArray(e.preguntas)){const r=e;return{texto:Ef(r,"lectura-texto","texto"),preguntas:(r.preguntas||[]).map(t)}}if(Array.isArray(e)){const r=e.map((a,s)=>Ef(a,`lectura-bloque-${s}`,"texto")).filter(Boolean).join(`

---

`),n=e.flatMap((a,s)=>(zo(a,`lectura-bloque-preguntas-${s}`),Array.isArray(a==null?void 0:a.preguntas)?a.preguntas:[])).map(t);return{texto:r,preguntas:n}}return{texto:"",preguntas:[]}}function wZ(e){return console.log(" Normalizando pareados:",e),zo(e,"normalizePareados-input"),e?!Array.isArray(e)&&Array.isArray(e.pares)?e.pares.map((t,r)=>(zo(t,`pareado-${r}`),{izquierda:Ef(t,`pareado-izq-${r}`,"izquierda","concepto"),derecha:Ef(t,`pareado-der-${r}`,"derecha","definicion"),puntaje:typeof(t==null?void 0:t.puntaje)=="number"?t.puntaje:1})):Array.isArray(e)?e.map((t,r)=>(zo(t,`pareado-array-${r}`),{izquierda:Ef(t,`pareado-concepto-${r}`,"concepto","izquierda"),derecha:Ef(t,`pareado-definicion-${r}`,"definicion","derecha"),puntaje:1})):[]:[]}function NZ(e){return console.log(" Normalizando desarrollo:",e),zo(e,"normalizeDesarrollo-input"),e?!Array.isArray(e)&&Array.isArray(e.preguntas)?e.preguntas.map((t,r)=>(zo(t,`desarrollo-pregunta-${r}`),{enunciado:Ef(t,`desarrollo-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):Array.isArray(e)?e.map((t,r)=>(zo(t,`desarrollo-array-${r}`),t!=null&&t.rubrica&&typeof t.rubrica=="object"&&console.warn(` Rubrica detectada como objeto en item ${r}, ignorando`,t.rubrica),{enunciado:Ef(t,`desarrollo-array-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):[]:[]}const mlt=({actividad:e,onComplete:t,currentUser:r})=>{const[n,a]=w.useState({}),[s,o]=w.useState(!1),l=(u,d)=>{const f={...n,[u]:d};a(f)},c=async()=>{o(!0);let u=0,d=0;const f={items:[]};e.tipos.forEach(m=>{const g=e.generatedContent[m],x=n[m];if(console.log(` Procesando tipo: ${m}`,g),zo(g,`handleSubmit-${m}`),!!g){if((m==="Quiz"||m==="Comprensin de Lectura")&&(m==="Quiz"?Array.isArray(g)?g.map((y,N)=>(zo(y,`quiz-question-${N}`),{pregunta:Ef(y,`quiz-pregunta-${N}`,"pregunta"),opciones:Array.isArray(y==null?void 0:y.opciones)?y.opciones.map((C,_)=>Sc(C,`quiz-opcion-${N}-${_}`)):[],respuestaCorrecta:Sc(y==null?void 0:y.respuestaCorrecta,`quiz-respuesta-${N}`),puntaje:typeof(y==null?void 0:y.puntaje)=="number"?y.puntaje:1})):[]:yZ(g).preguntas).forEach((y,N)=>{const C=x==null?void 0:x[N],_=C===y.respuestaCorrecta,j=y.puntaje??1;_&&(u+=j),d+=j,f.items.push({pregunta:y.pregunta,respuestaUsuario:Sc(C,`feedback-respuesta-${N}`)||"No respondida",respuestaCorrecta:y.respuestaCorrecta,esCorrecta:_,puntajeObtenido:_?j:0,tipo:m})}),m==="Trminos Pareados"){const v=wZ(g),y=x||{};v.forEach((N,C)=>{const _=y[C],j=_===N.derecha,I=N.puntaje??1;j&&(u+=I),d+=I,f.items.push({pregunta:`${N.izquierda}  ?`,respuestaUsuario:Sc(_,`pareado-feedback-${C}`)||"No respondida",respuestaCorrecta:N.derecha,esCorrecta:j,puntajeObtenido:j?I:0,tipo:m})})}if(m==="Desarrollo"){const v=NZ(g),y=x||{};v.forEach((N,C)=>{const _=Sc(y[C],`desarrollo-feedback-${C}`).trim();f.items.push({pregunta:N.enunciado,respuestaUsuario:_||"No respondida",respuestaCorrecta:"Revisin docente",esCorrecta:null,puntajeObtenido:0,tipo:m})})}}});const A={puntaje:u,puntajeMaximo:d,respuestas:n,nota:eL(u,d),requiereRevisionDocente:e.tipos.includes("Desarrollo")};t(A,f)};return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[i.jsx("h2",{className:"text-2xl font-bold text-sky-800 mb-2",children:i.jsx(Us,{content:e.asignatura,context:"actividad-asignatura"})}),i.jsx("div",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(Us,{content:e.introduccion,context:"actividad-introduccion"})}),e.panelDidactico&&i.jsxs("div",{className:"mt-5 p-5 bg-emerald-50 border-l-4 border-emerald-500 rounded-r-lg shadow-md",children:[i.jsxs("h3",{className:"font-bold text-emerald-800 text-lg mb-3 flex items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Material de Estudio - Lee con Atencin"]}),i.jsx("div",{className:"prose prose-emerald max-w-none text-slate-700",children:(()=>{try{if(typeof e.panelDidactico=="string"&&e.panelDidactico.trim().startsWith("{")){const u=JSON.parse(e.panelDidactico);return i.jsxs("div",{className:"space-y-4",children:[u.titulo&&i.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:u.titulo}),Array.isArray(u.subtitulos)&&u.subtitulos.map((d,f)=>i.jsxs("div",{className:"mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:d.titulo}),i.jsx("p",{className:"whitespace-pre-line",children:d.texto})]},f)),Array.isArray(u.conceptosClave)&&u.conceptosClave.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:"Conceptos Clave"}),i.jsx("ul",{className:"list-disc pl-5 space-y-1",children:u.conceptosClave.map((d,f)=>i.jsx("li",{className:"text-emerald-800",children:d},f))})]}),!u.subtitulos&&!u.conceptosClave&&i.jsx("div",{className:"whitespace-pre-line",children:JSON.stringify(u,null,2)})]})}return i.jsx("p",{className:"whitespace-pre-wrap",children:e.panelDidactico})}catch{return i.jsx("p",{className:"whitespace-pre-wrap",children:e.panelDidactico})}})()})]}),e.recursos&&i.jsxs("div",{className:"mt-4 pt-4 border-t border-sky-200",children:[e.recursos.instrucciones&&i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Instrucciones adicionales:"}),i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(Us,{content:e.recursos.instrucciones,context:"actividad-instrucciones"})})]}),e.recursos.enlaces&&i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Enlaces complementarios:"}),i.jsx("div",{className:"space-y-1 mt-1",children:e.recursos.enlaces.split(`
`).filter(Boolean).map((u,d)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sky-500 mr-2",children:""}),i.jsx("a",{href:u.startsWith("http")?u:`https://${u}`,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline break-all",children:u})]},d))})]}),e.recursos.archivos&&e.recursos.archivos.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Archivos complementarios:"}),i.jsx("div",{className:"space-y-1 mt-1",children:e.recursos.archivos.map((u,d)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sky-500 mr-2",children:""}),i.jsx("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline",children:u.nombre||`Archivo ${d+1}`})]},d))})]})]})]}),e.tipos.map(u=>{const d=e.generatedContent[u];if(console.log(` Renderizando tipo: ${u}`,d),zo(d,`render-${u}`),!d)return null;switch(u){case"Quiz":{const f=Array.isArray(d)?d.map((A,m)=>(zo(A,`render-quiz-question-${m}`),{pregunta:Ef(A,`render-quiz-pregunta-${m}`,"pregunta"),opciones:Array.isArray(A==null?void 0:A.opciones)?A.opciones.map((g,x)=>Sc(g,`render-quiz-opcion-${m}-${x}`)):[],respuestaCorrecta:Sc(A==null?void 0:A.respuestaCorrecta,`render-quiz-respuesta-${m}`),puntaje:typeof(A==null?void 0:A.puntaje)=="number"?A.puntaje:1})):[];return i.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Quiz"}),i.jsx("div",{className:"space-y-6",children:f.map((A,m)=>i.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[i.jsxs("p",{className:"font-semibold text-slate-800",children:[m+1,". ",i.jsx(Us,{content:A.pregunta,context:`quiz-pregunta-${m}`})]}),i.jsx("div",{className:"mt-2 space-y-2",children:A.opciones.map((g,x)=>{var v;return i.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[i.jsx("input",{type:"radio",name:`q-${u}-${m}`,value:g,checked:((v=n[u])==null?void 0:v[m])===g,onChange:()=>l(u,{...n[u]||{},[m]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),i.jsx("span",{children:i.jsx(Us,{content:g,context:`quiz-opcion-${m}-${x}`})})]},x)})})]},m))})]},u)}case"Comprensin de Lectura":{const f=yZ(d);return i.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Comprensin de Lectura"}),i.jsx("div",{className:"mb-6 p-4 rounded bg-slate-50 border whitespace-pre-wrap",children:i.jsx(Us,{content:f.texto,context:"lectura-texto"})}),i.jsx("div",{className:"space-y-6",children:f.preguntas.map((A,m)=>i.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[i.jsxs("p",{className:"font-semibold text-slate-800",children:[m+1,". ",i.jsx(Us,{content:A.pregunta,context:`lectura-pregunta-${m}`})]}),i.jsx("div",{className:"mt-2 space-y-2",children:A.opciones.map((g,x)=>{var v;return i.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[i.jsx("input",{type:"radio",name:`q-${u}-${m}`,value:g,checked:((v=n[u])==null?void 0:v[m])===g,onChange:()=>l(u,{...n[u]||{},[m]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),i.jsx("span",{children:i.jsx(Us,{content:g,context:`lectura-opcion-${m}-${x}`})})]},x)})})]},m))})]},u)}case"Trminos Pareados":{const f=wZ(d),A=n[u]||{},m=[...new Set(f.map(g=>g.derecha))];for(let g=m.length-1;g>0;g--){const x=Math.floor(Math.random()*(g+1));[m[g],m[x]]=[m[x],m[g]]}return i.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Trminos Pareados"}),i.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:f.map((g,x)=>i.jsxs("div",{className:"p-3 rounded border bg-slate-50",children:[i.jsxs("p",{className:"font-semibold text-slate-800 mb-2",children:[x+1,". ",i.jsx(Us,{content:g.izquierda,context:`pareado-izq-${x}`})]}),i.jsxs("select",{className:"w-full border rounded p-2 bg-white",value:A[x]??"",onChange:v=>l(u,{...A,[x]:v.target.value}),children:[i.jsx("option",{value:"",children:" Selecciona la pareja "}),m.map((v,y)=>i.jsx("option",{value:v,children:Sc(v,`pareado-opcion-${x}-${y}`)},y))]})]},`${g.izquierda}-${x}`))})]},u)}case"Desarrollo":{const f=NZ(d),A=n[u]||{};return i.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Preguntas de Desarrollo"}),i.jsx("div",{className:"space-y-6",children:f.map((m,g)=>i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"font-semibold text-slate-800",children:[g+1,". ",i.jsx(Us,{content:m.enunciado,context:`desarrollo-enunciado-${g}`})]}),i.jsx("textarea",{className:"w-full min-h-[120px] border rounded p-3",placeholder:"Escribe tu respuesta",value:A[g]??"",onChange:x=>l(u,{...A,[g]:x.target.value})})]},g))}),i.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Este apartado ser revisado y calificado por tu profesor/a."})]},u)}default:return null}}),i.jsx("div",{className:"text-right mt-8 flex justify-end gap-4",children:i.jsxs("button",{onClick:c,disabled:s,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:[s?i.jsx(tL,{className:"w-5 h-5 mr-2"}):null,s?"Evaluando...":"Entregar Actividad"]})})]})},plt=({currentUser:e})=>{var z,K,Z;const[t,r]=w.useState(!0),[n,a]=w.useState("list"),[s,o]=w.useState("actividades"),[l,c]=w.useState(!1),[u,d]=w.useState([]),[f,A]=w.useState([]),[m,g]=w.useState(null),[x,v]=w.useState(null),[y,N]=w.useState(null),[C,_]=w.useState("connecting"),[j,I]=w.useState(!1);w.useEffect(()=>{var re,ce;console.log(" Iniciando carga de datos para usuario:",e.nombreCompleto);let U=!1,Y=!1,R=!1,D=!1;const W=()=>{(U||R)&&(Y||D)&&(R&&D?(_("error"),N("Error al cargar datos. Verifica tu conexin e intenta nuevamente.")):_("connected"),r(!1),console.log(" Carga completada - Actividades:",U,"Respuestas:",Y))},J=llt(e,oe=>{console.log(" Actividades recibidas:",oe.length),oe.forEach((be,X)=>{console.log(`  ${X+1}. ${be.asignatura} (ID: ${be.id})`),zo(be,`actividad-${X}`)}),d(oe),U=!0,W()},oe=>{console.error(" Error en suscripcin de actividades:",oe),R=!0,W()}),le=((re=oa.currentUser)==null?void 0:re.uid)||((ce=oa.currentUser)==null?void 0:ce.email)||e.email||e.id,ie=clt(le,oe=>{console.log(" Respuestas del estudiante recibidas:",oe.length),oe.forEach((be,X)=>{var je;console.log(`  ${X+1}. Actividad ${be.actividadId} - Fecha: ${be.fechaCompletado}`),be.nota&&console.log(`    Nota: ${be.nota}`),(je=be.revisionDocente)!=null&&je.completada&&console.log("     Con revisin docente completada"),zo(be,`respuesta-${X}`)}),A(oe),Y=!0,W()},oe=>{var be;console.error(" Error en suscripcin de respuestas:",oe),(be=oe.message)!=null&&be.includes("requires an index")&&(console.log(" Detectado error de ndice, intentando consulta alternativa..."),N("Se detect un problema de configuracin. Las actividades completadas pueden no mostrarse correctamente hasta que se resuelva.")),D=!0,W()});return()=>{console.log(" Limpiando subscripciones"),J==null||J(),ie==null||ie()}},[e]),w.useEffect(()=>{t||console.log(" ESTADO ACTUALIZADO:",{actividades:u.length,respuestas:f.length,vista:n,conexion:C})},[u.length,f.length,n,C,t]);const T=U=>{console.log(" Iniciando actividad:",U.asignatura);const Y=String(U.id).trim().toLowerCase();if(M.has(Y)){N("Esta actividad ya ha sido completada. No es posible realizarla nuevamente.");return}g(U),a("activity"),N(null)},k=U=>{console.log(" Viendo resultado:",U.actividadId);const Y=_k(U),R=u.find(D=>String(D.id).trim().toLowerCase()===(Y||String(U.actividadId).trim().toLowerCase()));R?(g(R),v(U),a("result"),N(null)):N("No se pudieron cargar los detalles de esta actividad completada.")},B=w.useCallback(async(U,Y)=>{var W,J,le,ie;if(!m)return;const R=((W=oa.currentUser)==null?void 0:W.uid)||((J=oa.currentUser)==null?void 0:J.email)||e.email||e.id;console.log(" COMPLETANDO ACTIVIDAD:",{actividadId:m.id,estudianteId:R,puntaje:U.puntaje,nota:U.nota});try{const re=Array.from(new Set([(le=oa.currentUser)==null?void 0:le.uid,(ie=oa.currentUser)==null?void 0:ie.email,e.email,e.id].filter(Boolean)));for(const ce of re){const oe=await dlt(String(m.id),String(ce));if(oe){console.warn(" Intento de repetir actividad detectado. Redirigiendo a resultados existentes."),N("Esta actividad ya fue respondida anteriormente. Te mostramos tus resultados."),v(oe),a("result");return}}}catch(re){console.warn(" No se pudo verificar si la actividad ya estaba respondida. Continuando con precaucin.",re)}a("result"),c(!0),N(null);const D={actividadId:m.id,estudianteId:R,fechaCompletado:new Date().toISOString(),...U,retroalimentacionDetallada:Y};console.log(" Guardando respuesta...");try{const re=await Alt(D,m,Y);console.log(" Respuesta completada con ID:",re.id),v(re),setTimeout(()=>{console.log(" Datos sincronizados")},1500)}catch(re){console.error(" Error crtico al completar actividad:",re),N("Ocurri un error al guardar tu actividad. Por favor, intenta nuevamente. Si el problema persiste, contacta a tu profesor."),v({id:"error-temp",...D,retroalimentacionAI:{logros:"Tu actividad fue completada pero hubo un problema tcnico al generar el resumen.",desafios:[],comentariosDesarrollo:[]}})}finally{c(!1)}},[m,e.id]),M=w.useMemo(()=>{if(f.length===0)return new Set;const U=new Set;for(const Y of f){const R=_k(Y);R&&U.add(R)}return console.log(" IDs completados calculados (normalizados):",U.size),U},[f]),P=w.useMemo(()=>{if(u.length===0)return[];try{const Y=u.slice(0,5).map(D=>String(D.id).trim()),R=Array.from(M).slice(0,5);console.log(" Diagnstico IDs - Actividades:",Y,"Completadas:",R)}catch{}const U=u.filter(Y=>!M.has(String(Y.id).trim().toLowerCase()));return console.log(" Actividades pendientes:",U.length),U},[u,M]),S=w.useMemo(()=>{if(f.length===0)return[];const U=f.map(Y=>{const R=_k(Y),D=u.find(W=>String(W.id).trim().toLowerCase()===(R||String(Y.actividadId).trim().toLowerCase()));return{...Y,asignatura:(D==null?void 0:D.asignatura)||"Actividad no disponible",tipos:(D==null?void 0:D.tipos)||[]}}).sort((Y,R)=>new Date(R.fechaCompletado).getTime()-new Date(Y.fechaCompletado).getTime());return console.log(" Historial preparado:",U.length),U},[f,u]),L=w.useMemo(()=>{const U=new Map;for(const Y of f){const R=_k(Y);R&&U.set(R,Y)}return U},[f]),H=w.useMemo(()=>j?P:u,[u,P,j]),q=w.useMemo(()=>{const U=u.length,Y=M.size,R=Math.max(U-Y,0);return{total:U,comp:Y,pend:R}},[u.length,M]),Q=w.useMemo(()=>{if(S.length===0)return[];const U=new Map;for(const R of S){const D=R.asignatura||"Sin asignatura";let W;if(R.nota!=null){const le=parseFloat(R.nota);isNaN(le)||(W=le)}if(W==null&&typeof R.puntaje=="number"&&typeof R.puntajeMaximo=="number"&&R.puntajeMaximo>0){const le=eL(R.puntaje,R.puntajeMaximo),ie=parseFloat(le);isNaN(ie)||(W=ie)}if(W==null||isNaN(W))continue;const J=U.get(D)||{suma:0,cantidad:0};U.set(D,{suma:J.suma+W,cantidad:J.cantidad+1})}const Y=Array.from(U.entries()).map(([R,D])=>({asignatura:R,promedio:Math.round(D.suma/D.cantidad*100)/100,cantidad:D.cantidad}));return Y.sort((R,D)=>D.promedio-R.promedio),Y},[S]);return t?i.jsxs("div",{className:"flex flex-col justify-center items-center h-64 space-y-4",children:[i.jsx(tL,{className:"w-8 h-8 text-slate-500"}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-slate-500",children:"Cargando actividades..."}),i.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Estado: ",C==="connecting"?"Conectando...":C==="connected"?"Conectado":"Error de conexin"]})]})]}):C==="error"&&u.length===0&&f.length===0?i.jsxs("div",{className:"text-center py-12 border-2 border-red-200 rounded-lg bg-red-50",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-semibold text-red-700 mb-2",children:"Error de Conexin"}),i.jsx("p",{className:"text-red-600 mb-4",children:"No se pudieron cargar las actividades."}),i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700",children:"Reintentar"})]}):n==="activity"&&m?i.jsx(mlt,{actividad:m,onComplete:B,currentUser:e}):n==="result"&&x?(console.log(" Renderizando resultado:",x),i.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Resultados de la Actividad"}),i.jsxs("div",{className:"flex items-baseline gap-4 mb-6 p-4 bg-slate-50 rounded-lg border",children:[i.jsxs("p",{className:"text-lg text-slate-600",children:["Puntaje: ",i.jsxs("span",{className:"font-bold text-2xl text-slate-800",children:[x.puntaje," / ",x.puntajeMaximo]})]}),i.jsxs("p",{className:"text-lg text-slate-600",children:["Nota: ",i.jsx("span",{className:`font-bold text-2xl ${parseFloat(x.nota)>=4?"text-green-600":"text-red-600"}`,children:x.nota})]})]}),(m==null?void 0:m.recursos)&&i.jsxs("div",{className:"mb-6 p-4 bg-sky-50 border border-sky-200 rounded-lg",children:[i.jsx("h2",{className:"text-lg font-bold text-sky-800 mb-2",children:"Material complementario"}),m.recursos.instrucciones&&i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Instrucciones adicionales:"}),i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(Us,{content:m.recursos.instrucciones,context:"resultado-instrucciones"})})]}),m.recursos.enlaces&&i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Enlaces complementarios:"}),i.jsx("div",{className:"space-y-1 mt-1",children:m.recursos.enlaces.split(`
`).filter(Boolean).map((U,Y)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sky-500 mr-2",children:""}),i.jsx("a",{href:U.startsWith("http")?U:`https://${U}`,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline break-all",children:U})]},Y))})]}),m.recursos.archivos&&m.recursos.archivos.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Archivos complementarios:"}),i.jsx("div",{className:"space-y-1 mt-1",children:m.recursos.archivos.map((U,Y)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sky-500 mr-2",children:""}),i.jsx("a",{href:U.url,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline",children:U.nombre||`Archivo ${Y+1}`})]},Y))})]})]}),y&&i.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:i.jsxs("p",{className:"text-red-700 font-medium",children:[" ",y]})}),l&&i.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-blue-50 border border-blue-200 rounded-lg text-center mb-6",children:[i.jsx(tL,{className:"w-8 h-8 text-blue-500"}),i.jsx("p",{className:"mt-3 font-semibold text-blue-700",children:"Generando resumen personalizado..."}),i.jsx("p",{className:"mt-1 text-sm text-blue-600",children:"Esto puede tomar unos segundos"})]}),x.retroalimentacionAI&&!l&&i.jsxs("div",{className:"p-6 bg-blue-50 border border-blue-200 rounded-lg space-y-4 mb-6",children:[i.jsx("h2",{className:"text-2xl font-semibold text-blue-800",children:"Resumen de tu Desempeo "}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-green-700",children:" Principales Logros"}),i.jsx("p",{className:"text-slate-700 mt-1",children:i.jsx(Us,{content:x.retroalimentacionAI.logros,context:"feedback-logros"})})]}),((z=x.retroalimentacionAI.desafios)==null?void 0:z.length)>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-amber-700",children:" reas de Mejora"}),i.jsx("div",{className:"space-y-3 mt-2",children:x.retroalimentacionAI.desafios.map((U,Y)=>i.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[i.jsx("p",{className:"font-semibold text-slate-800",children:i.jsx(Us,{content:U.pregunta,context:`feedback-desafio-pregunta-${Y}`})}),i.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:i.jsx(Us,{content:U.explicacionDelError,context:`feedback-desafio-explicacion-${Y}`})})]},Y))})]}),((Z=(K=x.retroalimentacionAI)==null?void 0:K.comentariosDesarrollo)==null?void 0:Z.length)>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-sky-700",children:" Retroalimentacin de Desarrollo"}),i.jsx("div",{className:"space-y-3 mt-2",children:x.retroalimentacionAI.comentariosDesarrollo.map((U,Y)=>i.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[i.jsx("p",{className:"font-semibold text-slate-800",children:i.jsx(Us,{content:U.pregunta,context:`feedback-desarrollo-pregunta-${Y}`})}),i.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:i.jsx(Us,{content:U.retroalimentacionBreve,context:`feedback-desarrollo-retro-${Y}`})})]},Y))})]})]}),x.retroalimentacionDetallada&&i.jsxs("div",{className:"space-y-4 mb-6",children:[i.jsx("h2",{className:"text-2xl font-semibold text-slate-700",children:"Revisin Detallada"}),x.retroalimentacionDetallada.items.map((U,Y)=>{const R=U.esCorrecta===null,D=R?"border-slate-400 bg-slate-50":U.esCorrecta?"border-green-500 bg-green-50":"border-red-500 bg-red-50",W=R?"":U.esCorrecta?"":"";return i.jsxs("div",{className:`p-4 border-l-4 rounded-r-lg ${D}`,children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("p",{className:"font-semibold text-slate-800 flex-1 pr-4",children:[Y+1,". ",i.jsx(Us,{content:U.pregunta,context:`feedback-item-pregunta-${Y}`})]}),i.jsx("span",{className:"font-bold text-lg",children:W})]}),i.jsxs("div",{className:"mt-2 text-sm pl-4",children:[i.jsxs("p",{className:"text-slate-700",children:["Tu respuesta: ",i.jsx("span",{className:"font-medium",children:i.jsx(Us,{content:U.respuestaUsuario,context:`feedback-item-respuesta-${Y}`})})]}),!R&&!U.esCorrecta&&i.jsxs("p",{className:"text-slate-700",children:["Respuesta correcta: ",i.jsx("span",{className:"font-medium text-green-700",children:i.jsx(Us,{content:U.respuestaCorrecta,context:`feedback-item-correcta-${Y}`})})]}),R&&i.jsx("p",{className:"text-slate-600 italic",children:"Pendiente de revisin docente."})]})]},Y)})]}),i.jsx("div",{className:"flex gap-4",children:i.jsx("button",{onClick:()=>{a("list"),g(null),v(null),N(null)},className:"w-full bg-slate-800 text-white font-bold py-3 rounded-lg hover:bg-slate-700 transition-colors",children:"Volver a Actividades"})})]})):i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[y&&i.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:i.jsxs("p",{className:"text-amber-800",children:[" ",y]})}),i.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"actividades",label:"Actividades Pendientes"},{key:"historial",label:"Historial"},{key:"promedios",label:"Promedios Remotos"}].map(U=>i.jsx("button",{onClick:()=>o(U.key),className:`px-4 py-2 rounded-lg border transition-colors ${s===U.key?"bg-slate-800 text-white border-slate-800":"bg-white text-slate-700 hover:bg-slate-50 border-slate-200"}`,children:U.label},U.key))}),s==="actividades"&&i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-1",children:"Actividades"}),i.jsxs("p",{className:"text-slate-500",children:[q.total," en total  ",q.comp," completadas, ",q.pend," pendientes"]})]}),i.jsxs("label",{className:"inline-flex items-center gap-2 text-sm select-none",children:[i.jsx("input",{type:"checkbox",checked:j,onChange:U=>I(U.target.checked),className:"h-4 w-4 accent-slate-700"}),"Mostrar solo pendientes"]})]}),i.jsx("p",{className:"text-slate-500 mt-2",children:"Completa las actividades asignadas por tus profesores."}),i.jsx("p",{className:"text-amber-600 text-sm font-medium mb-6",children:i.jsxs("span",{className:"bg-amber-100 p-1 rounded inline-flex items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Importante: Cada actividad solo puede ser respondida una vez."]})}),i.jsx("div",{className:"space-y-4",children:H.length>0?H.map(U=>{const Y=String(U.id).trim().toLowerCase(),R=M.has(Y),D=L.get(Y);return i.jsxs("div",{className:`p-4 border rounded-lg flex flex-col sm:flex-row justify-between sm:items-center gap-4 transition-colors ${R?"bg-green-50 hover:bg-green-100 border-green-200":"bg-slate-50 hover:bg-slate-100 border-slate-200"}`,children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-800 flex items-center gap-2",children:[i.jsxs("span",{children:[i.jsx(Us,{content:U.asignatura,context:`actividad-asignatura-${U.id}`})," - ",U.tipos.join(", ")]}),i.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full inline-block ${R?"bg-green-100 text-green-700 border border-green-200":"bg-slate-100 text-slate-700 border border-slate-200"}`,title:R?"Esta actividad ya fue realizada":"Actividad pendiente",children:R?"Completada":"Pendiente"})]}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",i.jsx(Us,{content:typeof U.plazoEntrega=="string"?U.plazoEntrega:"",context:`actividad-plazo-${U.id}`})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[i.jsx("button",{onClick:()=>T(U),disabled:R,className:`font-bold py-2 px-6 rounded-lg w-full sm:w-auto transition-colors ${R?"bg-slate-300 text-slate-600 cursor-not-allowed":"bg-amber-500 text-white hover:bg-amber-600"}`,children:R?"Ya realizada":"Comenzar"}),R&&D&&i.jsx("button",{onClick:()=>k(D),className:"bg-sky-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-sky-700 w-full sm:w-auto transition-colors",children:"Ver resultados"})]})]},U.id)}):i.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:j?"Todo al da!":"Sin actividades disponibles"}),i.jsx("p",{className:"text-slate-500 mt-1",children:j?"No tienes actividades pendientes.":"Revisa ms tarde o consulta con tu profesor(a)."})]})})]})}),s==="historial"&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Historial de Actividades"}),i.jsx("p",{className:"text-slate-500 mb-6",children:"Revisa tus resultados y la retroalimentacin de las actividades completadas."}),i.jsx("div",{className:"space-y-4",children:S.length>0?S.map(U=>i.jsxs("div",{className:"p-4 border rounded-lg bg-white flex flex-col sm:flex-row justify-between sm:items-center gap-4 shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-800",children:[i.jsx(Us,{content:U.asignatura,context:`completada-asignatura-${U.id}`})," - ",U.tipos.join(", ")]}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Completado: ",new Date(U.fechaCompletado).toLocaleDateString("es-CL")]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("p",{className:"text-sm font-semibold",children:["Nota: ",i.jsx("span",{className:`font-bold text-lg ${(parseFloat(U.nota)||0)>=4?"text-green-600":"text-red-600"}`,children:U.nota??eL(U.puntaje,U.puntajeMaximo)})]}),i.jsx("button",{onClick:()=>k(U),className:"bg-sky-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-sky-700 w-full sm:w-auto transition-colors",children:"Ver Resultados"})]})]},U.id)):i.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"An no hay historial"}),i.jsx("p",{className:"text-slate-500 mt-1",children:"Tus actividades completadas aparecern aqu."})]})})]}),s==="promedios"&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Promedios Remotos"}),i.jsx("p",{className:"text-slate-500 mb-6",children:"Promedio de tus calificaciones por asignatura en actividades remotas."}),Q.length>0?i.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Q.map(U=>i.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 shadow-sm",children:[i.jsx("p",{className:"font-bold text-slate-800 mb-1",children:U.asignatura}),i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:`text-2xl font-extrabold ${U.promedio>=4?"text-green-600":"text-red-600"}`,children:U.promedio.toFixed(2)}),i.jsx("p",{className:"text-xs text-slate-500",children:"Promedio (1-7)"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-slate-700 font-semibold",children:U.cantidad}),i.jsx("p",{className:"text-xs text-slate-500",children:"actividades"})]})]})]},U.asignatura))}):i.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Sin datos an"}),i.jsx("p",{className:"text-slate-500 mt-1",children:"Completa actividades para ver tus promedios por asignatura."})]})]})]})},IT="estudiantes_inclusion",glt="usuarios",ame=e=>{const t=e.data();return{id:e.id,...t}},xlt=e=>{const t=Bt(ht(ut,IT));return lr(t,n=>{const a=n.docs.map(s=>ame(s));e(a)},n=>{console.error("Error al suscribirse a estudiantes de inclusin:",n),e([])})},vlt=e=>{const t=Bt(ht(ut,glt));return lr(t,n=>{const a=n.docs.map(s=>ame(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},blt=async e=>{try{return(await ln(ht(ut,IT),e)).id}catch(t){throw console.error("Error al agregar estudiante a inclusin:",t),new Error("No se pudo agregar al estudiante.")}},ylt=async(e,t)=>{try{const{id:r,...n}=t,a=Wt(ut,IT,e);await bi(a,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusin:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},wlt=async e=>{try{const t=Wt(ut,IT,e);await ca(t)}catch(t){throw console.error("Error al eliminar estudiante de inclusin:",t),new Error("No se pudo eliminar al estudiante.")}},Nlt=({estudiantes:e})=>{const t=w.useMemo(()=>{const l=e.reduce((c,u)=>(c[u.curso]=(c[u.curso]||0)+1,c),{});return Object.entries(l).map(([c,u])=>({curso:c,cantidad:u})).sort((c,u)=>c.curso.localeCompare(u.curso))},[e]),r=w.useMemo(()=>{const l=e.reduce((c,u)=>{var f;const d=((f=u.curso.match(/\d+/))==null?void 0:f[0])||"Sin nivel";return c[d]=(c[d]||0)+1,c},{});return Object.entries(l).map(([c,u])=>({nivel:c,cantidad:u})).sort((c,u)=>c.nivel==="Sin nivel"?1:u.nivel==="Sin nivel"?-1:parseInt(c.nivel)-parseInt(u.nivel))},[e]),n=w.useMemo(()=>{const l=e.reduce((c,u)=>(c[u.dificultad]=(c[u.dificultad]||0)+1,c),{});return Object.entries(l).map(([c,u])=>({diagnostico:c,cantidad:u})).sort((c,u)=>u.cantidad-c.cantidad)},[e]),a=w.useMemo(()=>{const l=e.reduce((u,d)=>{var f;return u+(((f=d.intervenciones)==null?void 0:f.length)||0)},0),c=e.length>0?(l/e.length).toFixed(1):"0";return{total:l,promedio:c}},[e]),s=w.useMemo(()=>e.reduce((l,c)=>l+(c.alertas||[]).filter(u=>!u.resuelta).length,0),[e]),o=Math.max(0,...t.map(l=>l.cantidad),...r.map(l=>l.cantidad),...n.map(l=>l.cantidad));return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Dashboard PIE"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.length}),i.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Total Estudiantes"})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:a.total}),i.jsx("div",{className:"text-sm text-green-800 dark:text-green-300",children:"Intervenciones"})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:s}),i.jsx("div",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:"Alertas Pendientes"})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:a.promedio}),i.jsx("div",{className:"text-sm text-purple-800 dark:text-purple-300",children:"Promedio Intervenciones"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Curso"}),i.jsx("div",{className:"space-y-2",children:t.map(({curso:l,cantidad:c})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:l}),i.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:i.jsx("div",{className:"bg-blue-500 h-full transition-all duration-500",style:{width:`${o?c/o*100:0}%`}})}),i.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Nivel"}),i.jsx("div",{className:"space-y-2",children:r.map(({nivel:l,cantidad:c})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:[l,""]}),i.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:i.jsx("div",{className:"bg-green-500 h-full transition-all duration-500",style:{width:`${o?c/o*100:0}%`}})}),i.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Diagnstico"}),i.jsx("div",{className:"space-y-2",children:n.map(({diagnostico:l,cantidad:c})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-16 text-right truncate",title:l,children:l}),i.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:i.jsx("div",{className:"bg-purple-500 h-full transition-all duration-500",style:{width:`${o?c/o*100:0}%`}})}),i.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]})]})]})},CZ=({estudiantesDisponibles:e,onSelect:t})=>{const[r,n]=w.useState(""),[a,s]=w.useState(""),[o,l]=w.useState(!1),c=w.useMemo(()=>e.filter(f=>{const A=f.nombreCompleto.toLowerCase().includes(r.toLowerCase()),m=a===""||f.curso===a;return A&&m}).sort((f,A)=>f.nombreCompleto.localeCompare(A.nombreCompleto)),[e,r,a]),u=w.useMemo(()=>[...new Set(e.map(A=>A.curso).filter(Boolean))].sort(),[e]),d=f=>{t(f),n(""),s(""),l(!1)};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante al PIE"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Buscar por nombre"}),i.jsx("input",{type:"text",placeholder:"Escriba el nombre del estudiante...",value:r,onChange:f=>{n(f.target.value),l(f.target.value.length>0||a!=="")},onFocus:()=>l(r.length>0||a!==""),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filtrar por curso"}),i.jsxs("select",{value:a,onChange:f=>{s(f.target.value),l(r.length>0||f.target.value!=="")},className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todos los cursos"}),u.map(f=>i.jsx("option",{value:f,children:f},f))]})]})]}),i.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("span",{children:["Estudiantes disponibles: ",e.length]}),i.jsxs("span",{children:["Resultados filtrados: ",c.length]})]}),i.jsx("button",{onClick:()=>l(!o),className:"w-full bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200 py-2 px-4 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:o?"Ocultar resultados":`Ver ${c.length} estudiantes disponibles`}),o&&i.jsx("div",{className:"border dark:border-slate-600 rounded-lg max-h-80 overflow-y-auto",children:c.length===0?i.jsx("div",{className:"p-4 text-center text-slate-500 dark:text-slate-400",children:r||a?"No se encontraron estudiantes con los criterios de bsqueda.":"No hay estudiantes disponibles."}):i.jsx("div",{className:"divide-y dark:divide-slate-600",children:c.map(f=>i.jsx("div",{className:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>d(f),children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:f.nombreCompleto}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:f.curso})]}),i.jsx("button",{className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 text-xl",children:""})]})},f.id))})}),r&&c.length===1&&i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-2",children:" Solo hay un resultado! Haga clic para agregarlo directamente:"}),i.jsxs("button",{onClick:()=>d(c[0]),className:"text-sm bg-blue-500 text-white px-3 py-1.5 rounded-md hover:bg-blue-600 transition-colors",children:["Agregar a ",c[0].nombreCompleto]})]})]})]})},Clt=({student:e,onClose:t,onConfirm:r})=>{const[n,a]=w.useState(H5[0]),s=()=>r(e,n);return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:o=>o.stopPropagation(),children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",e.nombreCompleto," al PIE"]}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),i.jsx("select",{id:"dificultad",value:n,onChange:o=>a(o.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:H5.map(o=>i.jsx("option",{value:o,children:o},o))})]}),i.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),i.jsx("button",{type:"button",onClick:s,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Confirmar e Ingresar"})]})]})})},Elt=({student:e,onClose:t,onSave:r,profesores:n,getDocenteEmail:a})=>{const[s,o]=w.useState("intervenciones"),[l,c]=w.useState(e);w.useEffect(()=>c(e),[e]);const[u,d]=w.useState(null),f={responsable:"",accion:"",observaciones:""},[A,m]=w.useState(f),[g,x]=w.useState({trimestre:"T1",meta:""}),[v,y]=w.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[N,C]=w.useState(null),[_,j]=w.useState(!1),I={motivo:"",acuerdos:"",asistentes:""},[T,k]=w.useState(I),B=()=>{r(l),t()},M=async()=>{var ke;if(!A.responsable||!A.accion){alert("Responsable y Accin son campos obligatorios.");return}let X,je=!1;u?X=(l.intervenciones||[]).map(ue=>ue.id===u.id?{...ue,...A}:ue):(je=!0,X=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...A},...l.intervenciones||[]]);const De=X.sort((ue,we)=>new Date(we.fecha).getTime()-new Date(ue.fecha).getTime());if(c(ue=>({...ue,intervenciones:De})),je)try{await boe({docenteNombre:A.responsable,docenteEmail:a?a(A.responsable):void 0,docenteEmailLower:(ke=a?a(A.responsable):void 0)==null?void 0:ke.toLowerCase(),tipo:"nueva_intervencion",titulo:" Nueva Intervencin Asignada",mensaje:`Se te ha asignado una nueva intervencin para el estudiante ${l.nombre}. Accin: ${A.accion}`,estudianteNombre:l.nombre,estudianteId:l.id,accionRequerida:A.accion}),alert(` Intervencin registrada y notificacin enviada a ${A.responsable}`)}catch(ue){console.error("Error al crear notificacin:",ue),alert(" Intervencin guardada, pero no se pudo enviar la notificacin al docente.")}m(f),d(null)},P=X=>{d(X),m({responsable:X.responsable,accion:X.accion,observaciones:X.observaciones})},S=X=>{window.confirm("Eliminar esta intervencin?")&&c(je=>({...je,intervenciones:(je.intervenciones||[]).filter(De=>De.id!==X)}))},L=X=>{const{name:je,value:De}=X.target;c(ke=>({...ke,[je]:De,fechaActualizacionApoyos:new Date().toISOString()}))},H=()=>{if(!g.meta.trim())return;const X={...g,id:crypto.randomUUID(),cumplida:!1};c(je=>({...je,metasProgreso:[...je.metasProgreso||[],X]})),x({trimestre:"T1",meta:""})},q=X=>{c(je=>({...je,metasProgreso:(je.metasProgreso||[]).map(De=>De.id===X?{...De,cumplida:!De.cumplida}:De)}))},Q=X=>{c(je=>({...je,metasProgreso:(je.metasProgreso||[]).filter(De=>De.id!==X)}))},z=w.useMemo(()=>{const X=l.metasProgreso||[];if(X.length===0)return{percent:0,color:"bg-slate-300"};const je=X.filter(ue=>ue.cumplida).length,De=Math.round(je/X.length*100),ke=De<40?"bg-red-500":De<75?"bg-yellow-500":"bg-green-500";return{percent:De,color:ke}},[l.metasProgreso]),K=w.useMemo(()=>{if(!l.fechaActualizacionApoyos)return!0;const X=new Date(l.fechaActualizacionApoyos),je=new Date;return je.setMonth(je.getMonth()-3),X<je},[l.fechaActualizacionApoyos]),Z=()=>{if(!v.titulo.trim()||!v.fecha)return;const X={...v,id:crypto.randomUUID(),resuelta:!1};c(je=>({...je,alertas:[...je.alertas||[],X].sort((De,ke)=>new Date(De.fecha).getTime()-new Date(ke.fecha).getTime())})),y({titulo:"",fecha:new Date().toISOString()})},U=X=>{c(je=>({...je,alertas:(je.alertas||[]).map(De=>De.id===X?{...De,resuelta:!De.resuelta}:De)}))},Y=X=>{c(je=>({...je,alertas:(je.alertas||[]).filter(De=>De.id!==X)}))},R=X=>{X.target.files&&X.target.files[0]&&C(X.target.files[0])},D=()=>{if(!N)return;j(!0);const X=new FileReader;X.readAsDataURL(N),X.onloadend=()=>{const je={id:crypto.randomUUID(),nombre:N.name,url:X.result,fechaSubida:new Date().toISOString()};c(De=>({...De,archivos:[je,...De.archivos||[]]})),C(null),j(!1)},X.onerror=()=>{alert("Error al leer el archivo."),j(!1)}},W=X=>{window.confirm("Eliminar este archivo?")&&c(je=>({...je,archivos:(je.archivos||[]).filter(De=>De.id!==X)}))},J=()=>{if(!T.motivo.trim()||!T.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const X={...T,id:crypto.randomUUID(),fecha:new Date().toISOString()};c(je=>({...je,reuniones:[X,...je.reuniones||[]].sort((De,ke)=>new Date(ke.fecha).getTime()-new Date(De.fecha).getTime())})),k(I)},le=X=>{window.confirm("Eliminar este registro de reunin?")&&c(je=>({...je,reuniones:(je.reuniones||[]).filter(De=>De.id!==X)}))},ie=()=>{var ae,fe,ge;const X=new wr("p","mm","a4"),je=20,De=X.internal.pageSize.getWidth(),ke=X.internal.pageSize.getHeight();let ue=je;const we=xe=>{xe.setFontSize(10),xe.setTextColor(100),xe.text("Ficha de Seguimiento - Mdulo Inclusin",je,15)};we(X),X.setFontSize(18),X.setFont("helvetica","bold"),X.setTextColor(40),X.text(l.nombre,je,ue+10),ue+=15,X.setFontSize(11),X.setFont("helvetica","normal"),X.setTextColor(80),X.text(`Curso: ${l.curso}`,je,ue),X.text(`Dificultad: ${l.dificultad}`,je,ue+6),ue+=15;const Ae=xe=>{ue+xe>ke-je&&(X.addPage(),we(X),ue=je)},de=xe=>{Ae(15),X.setFontSize(14),X.setFont("helvetica","bold"),X.text(xe,je,ue),ue+=10};if((ae=l.intervenciones)!=null&&ae.length&&(de("Historial de Intervenciones"),Pi(X,{startY:ue,head:[["Fecha","Responsable","Accin","Observaciones"]],body:l.intervenciones.map(xe=>[new Date(xe.fecha).toLocaleDateString("es-CL"),xe.responsable,xe.accion,xe.observaciones||""]),theme:"grid",didDrawPage:()=>we(X)}),ue=X.lastAutoTable.finalY+10),l.adaptacionesCurriculares||l.apoyosRecibidos){Ae(30),de("Seguimiento y Apoyos"),X.setFontSize(11),X.setFont("helvetica","normal");const xe=`Adaptaciones: ${l.adaptacionesCurriculares||"No registradas."}
Apoyos: ${l.apoyosRecibidos||"No registrados."}`,Ue=X.splitTextToSize(xe,De-je*2);X.text(Ue,je,ue),ue+=Ue.length*5+10}(fe=l.metasProgreso)!=null&&fe.length&&(Ae(30),de("Metas de Progreso"),Pi(X,{startY:ue,head:[["Trimestre","Meta","Estado"]],body:l.metasProgreso.map(xe=>[xe.trimestre,xe.meta,xe.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:()=>we(X)}),ue=X.lastAutoTable.finalY+10),(ge=l.reuniones)!=null&&ge.length&&(de("Reuniones con Apoderados"),Pi(X,{startY:ue,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:l.reuniones.map(xe=>[new Date(xe.fecha).toLocaleDateString("es-CL"),xe.motivo,xe.acuerdos||"",xe.asistentes]),theme:"grid",didDrawPage:()=>we(X)})),X.save(`Ficha_Inclusion_${l.nombre.replace(/\s/g,"_")}.pdf`)},re=()=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:u?"Editando Intervencin":"Registrar Nueva Intervencin"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Responsable ",!u&&"(Se enviar notificacin automtica)"]}),i.jsxs("select",{value:A.responsable,onChange:X=>m(je=>({...je,responsable:X.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(X=>i.jsx("option",{value:X,children:X},X))]}),A.responsable&&!u&&i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-sm text-blue-800 dark:text-blue-200",children:[" Se enviar una notificacin a ",A.responsable," cuando se guarde la intervencin"]})]}),i.jsx("textarea",{value:A.accion,onChange:X=>m(je=>({...je,accion:X.target.value})),placeholder:"Accin realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("textarea",{value:A.observaciones,onChange:X=>m(je=>({...je,observaciones:X.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsxs("div",{className:"flex justify-end gap-2",children:[u&&i.jsx("button",{onClick:()=>{d(null),m(f)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar Edicin"}),i.jsx("button",{onClick:M,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!A.responsable||!A.accion,children:u?"Actualizar":"Guardar y Notificar"})]})]}),i.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(l.intervenciones||[]).map(X=>i.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:X.accion}),X.observaciones&&i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:X.observaciones}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[new Date(X.fecha).toLocaleString("es-CL")," - ",X.responsable]}),i.jsx("span",{className:"text-xs bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300 px-2 py-1 rounded-full",children:" Notificado"})]})]}),i.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[i.jsx("button",{onClick:()=>P(X),className:"text-blue-500 hover:text-blue-700 p-1 rounded transition-colors",title:"Editar intervencin",children:""}),i.jsx("button",{onClick:()=>S(X.id),className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar intervencin",children:""})]})]})},X.id)),(!l.intervenciones||l.intervenciones.length===0)&&i.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-4xl mb-2",children:""}),i.jsx("p",{children:"No hay intervenciones registradas"}),i.jsx("p",{className:"text-sm",children:"Registra la primera intervencin arriba"})]})]})]}),ce=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),K&&i.jsx("span",{title:"Informacin no actualizada en los ltimos 3 meses",className:"text-yellow-500 text-xl cursor-help",children:""})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),i.jsx("textarea",{name:"adaptacionesCurriculares",value:l.adaptacionesCurriculares||"",onChange:L,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe las adaptaciones curriculares implementadas..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),i.jsx("textarea",{name:"apoyosRecibidos",value:l.apoyosRecibidos||"",onChange:L,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe los apoyos que recibe el estudiante..."})]})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",z.percent,"%"]}),i.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:i.jsx("div",{className:`${z.color} h-4 rounded-full transition-all duration-500`,style:{width:`${z.percent}%`}})})]}),i.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[i.jsxs("select",{value:g.trimestre,onChange:X=>x(je=>({...je,trimestre:X.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"T1",children:"T1"}),i.jsx("option",{value:"T2",children:"T2"}),i.jsx("option",{value:"T3",children:"T3"})]}),i.jsx("input",{value:g.meta,onChange:X=>x(je=>({...je,meta:X.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{onClick:H,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",disabled:!g.meta.trim(),children:"Agregar"})]}),i.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[(l.metasProgreso||[]).map(X=>i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[i.jsx("input",{type:"checkbox",checked:X.cumplida,onChange:()=>q(X.id),className:"h-5 w-5 rounded text-amber-500"}),i.jsxs("span",{className:`flex-grow text-sm ${X.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[i.jsxs("strong",{children:[X.trimestre,":"]})," ",X.meta]}),i.jsx("button",{onClick:()=>Q(X.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar meta",children:""})]},X.id)),(!l.metasProgreso||l.metasProgreso.length===0)&&i.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-3xl mb-2",children:""}),i.jsx("p",{children:"No hay metas definidas"}),i.jsx("p",{className:"text-sm",children:"Agrega la primera meta trimestral"})]})]})]})]}),oe=()=>i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),i.jsx("input",{type:"text",value:v.titulo,onChange:X=>y(je=>({...je,titulo:X.target.value})),placeholder:"Ttulo de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),i.jsx("input",{type:"date",value:new Date(v.fecha).toISOString().slice(0,10),onChange:X=>y(je=>({...je,fecha:X.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),i.jsx("button",{onClick:Z,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md hover:bg-amber-600 transition-colors",disabled:!v.titulo.trim()||!v.fecha,children:"Agendar"})]}),i.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(l.alertas||[]).map(X=>i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[i.jsx("input",{type:"checkbox",checked:X.resuelta,onChange:()=>U(X.id),className:"h-5 w-5 rounded text-amber-500"}),i.jsxs("span",{className:`flex-grow text-sm ${X.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[X.titulo," (",new Date(X.fecha+"T12:00:00").toLocaleDateString("es-CL"),")"]}),i.jsx("button",{onClick:()=>Y(X.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar alerta",children:""})]},X.id)),(!l.alertas||l.alertas.length===0)&&i.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-3xl mb-2",children:""}),i.jsx("p",{children:"No hay alertas programadas"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),i.jsx("input",{type:"file",onChange:R,className:"w-full text-sm",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt"}),i.jsx("button",{onClick:D,disabled:!N||_,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400 hover:bg-blue-600 transition-colors",children:_?"Subiendo...":"Subir"}),N&&i.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Archivo seleccionado: ",N.name]})]}),i.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(l.archivos||[]).map(X=>i.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[i.jsxs("a",{href:X.url,download:X.nombre,className:"text-sm text-blue-600 hover:underline truncate flex-grow",title:X.nombre,children:[" ",X.nombre]}),i.jsx("button",{onClick:()=>W(X.id),className:"text-red-500 text-sm ml-2 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar archivo",children:""})]},X.id)),(!l.archivos||l.archivos.length===0)&&i.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-3xl mb-2",children:""}),i.jsx("p",{children:"No hay archivos adjuntos"})]})]})]})]}),be=()=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunin"}),i.jsx("input",{value:T.motivo,onChange:X=>k(je=>({...je,motivo:X.target.value})),placeholder:"Motivo de la reunin...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("textarea",{value:T.acuerdos,onChange:X=>k(je=>({...je,acuerdos:X.target.value})),placeholder:"Acuerdos tomados en la reunin...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("input",{value:T.asistentes,onChange:X=>k(je=>({...je,asistentes:X.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("div",{className:"text-right",children:i.jsx("button",{onClick:J,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!T.motivo.trim()||!T.asistentes.trim(),children:"Guardar Reunin"})})]}),i.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(l.reuniones||[]).map(X=>i.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:X.motivo}),X.acuerdos&&i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:[i.jsx("strong",{children:"Acuerdos:"})," ",X.acuerdos]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(X.fecha).toLocaleString("es-CL")," - Asistentes: ",X.asistentes]})]}),i.jsx("button",{onClick:()=>le(X.id),className:"text-red-500 flex-shrink-0 ml-4 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar reunin",children:""})]})},X.id)),(!l.reuniones||l.reuniones.length===0)&&i.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-4xl mb-2",children:""}),i.jsx("p",{children:"No hay reuniones registradas"}),i.jsx("p",{className:"text-sm",children:"Registra la primera reunin con apoderados"})]})]})]});return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:X=>X.stopPropagation(),children:[i.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",e.nombre]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.curso," - ",e.dificultad]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:ie,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200 transition-colors",children:" Exportar PDF"}),i.jsx("button",{onClick:t,className:"text-2xl text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 transition-colors",children:""})]})]}),i.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:i.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(X=>i.jsx("button",{onClick:()=>o(X),className:`${s===X?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize transition-colors`,children:X==="alertas"?"Alertas y Archivos":X==="seguimiento"?"Seguimiento y Metas":X},X))})}),i.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&re(),s==="seguimiento"&&ce(),s==="reuniones"&&be(),s==="alertas"&&oe()]}),i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[i.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors",children:"Cerrar"}),i.jsx("button",{onClick:B,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Guardar Cambios y Cerrar"})]})]})})},EZ=({currentUser:e})=>{const[t,r]=w.useState([]),[n,a]=w.useState([]),[s,o]=w.useState(!0),[l,c]=w.useState(null),[u,d]=w.useState(null),[f,A]=w.useState(""),[m,g]=w.useState(""),[x,v]=w.useState(""),[y,N]=w.useState("dashboard");w.useEffect(()=>{o(!0);const M=xlt(S=>{r(S),o(!1)}),P=vlt(S=>a(S));return()=>{M(),P()}},[]);const C=async(M,P)=>{if(t.some(L=>L.nombre===M.nombreCompleto)){alert("Este estudiante ya est en el programa de inclusin.");return}const S={nombre:M.nombreCompleto,curso:M.curso||"",dificultad:P,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await blt(S),alert(` ${M.nombreCompleto} ha sido agregado exitosamente al programa PIE`)}catch(L){console.error("Error al agregar estudiante:",L),alert("Hubo un error al agregar al estudiante al programa.")}},_=async M=>{try{await ylt(M.id,M)}catch(P){console.error("Error al actualizar la ficha:",P),alert("Hubo un error al guardar los cambios en la ficha.")}},j=async M=>{if(window.confirm("Est seguro de que desea eliminar a este estudiante del programa de inclusin? Esta accin es irreversible."))try{await wlt(M),(l==null?void 0:l.id)===M&&c(null),alert(" Estudiante eliminado del programa PIE")}catch(P){console.error("Error al eliminar estudiante:",P),alert("Hubo un error al eliminar al estudiante.")}},I=M=>{const P=k;if(P.length===0){alert("No hay datos para exportar.");return}const S=P.map(L=>{var H;return{Nombre:L.nombre,Curso:L.curso,Dificultad:L.dificultad,"N Intervenciones":((H=L.intervenciones)==null?void 0:H.length)||0,"Alertas Pendientes":(L.alertas||[]).filter(q=>!q.resuelta).length,"Metas Cumplidas":(L.metasProgreso||[]).filter(q=>q.cumplida).length,"Total Metas":(L.metasProgreso||[]).length,"ltima Actualizacin":L.fechaActualizacionApoyos?new Date(L.fechaActualizacionApoyos).toLocaleDateString("es-CL"):"No registrada"}});if(M==="xlsx"){const L=zs.json_to_sheet(S),H=zs.book_new();zs.book_append_sheet(H,L,"Estudiantes_Inclusion"),ky(H,"Estudiantes_Inclusion.xlsx"),alert(" Archivo Excel exportado exitosamente")}else{const L=new wr;L.text("Listado de Estudiantes - Programa de Inclusin",14,15),Pi(L,{startY:20,head:[Object.keys(S[0])],body:S.map(Object.values)}),L.save("Estudiantes_Inclusion.pdf"),alert(" Archivo PDF exportado exitosamente")}},T=w.useMemo(()=>n.filter(M=>{var P;return M.profile===It.ESTUDIANTE&&(((P=e.cursos)==null?void 0:P.includes(M.curso||""))||e.profile===It.SUBDIRECCION)}).filter(M=>!t.some(P=>P.nombre===M.nombreCompleto)),[n,t,e]),k=w.useMemo(()=>t.filter(M=>M.nombre.toLowerCase().includes(f.toLowerCase())&&(m===""||M.curso===m)&&(x===""||M.dificultad===x)).sort((M,P)=>M.nombre.localeCompare(P.nombre)),[t,f,m,x]),B=w.useMemo(()=>n.filter(M=>M.profile===It.PROFESORADO).map(M=>M.nombreCompleto).sort(),[n]);return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusin Escolar (PIE)"}),i.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[i.jsx("button",{onClick:()=>N("dashboard"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="dashboard"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:" Dashboard"}),i.jsx("button",{onClick:()=>N("lista"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="lista"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:" Lista de Estudiantes"})]})]}),s?i.jsxs("div",{className:"text-center py-10",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"}),i.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando datos del programa..."})]}):i.jsxs(i.Fragment,{children:[y==="dashboard"&&i.jsxs("div",{className:"space-y-8",children:[i.jsx(Nlt,{estudiantes:t}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes Recientes (",Math.min(5,t.length),")"]}),i.jsx("button",{onClick:()=>N("lista"),className:"text-sm text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Ver todos "})]}),i.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(M=>i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center hover:shadow-sm transition-shadow",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:M.nombre}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[M.curso," - ",M.dificultad]})]}),i.jsx("button",{onClick:()=>c(M),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm transition-colors",children:"Ver Ficha"})]},M.id)),t.length===0&&i.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("p",{className:"text-lg font-medium mb-2",children:"No hay estudiantes en el programa PIE"}),i.jsx("p",{className:"text-sm",children:"Comienza agregando estudiantes desde la nmina"})]})]})]}),i.jsx(CZ,{estudiantesDisponibles:T,onSelect:M=>d(M)})]})]}),y==="lista"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",k.length,")"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>I("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg hover:bg-green-200 transition-colors",children:" Excel"}),i.jsx("button",{onClick:()=>I("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg hover:bg-red-200 transition-colors",children:" PDF"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Buscar estudiante"}),i.jsx("input",{type:"text",placeholder:"Nombre del estudiante...",value:f,onChange:M=>A(M.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por curso"}),i.jsxs("select",{value:m,onChange:M=>g(M.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todos los Cursos"}),ja.map(M=>i.jsx("option",{value:M,children:M},M))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por diagnstico"}),i.jsxs("select",{value:x,onChange:M=>v(M.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todas las Dificultades"}),H5.map(M=>i.jsx("option",{value:M,children:M},M))]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 text-xs",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-center",children:[i.jsx("div",{className:"font-bold text-blue-600",children:k.length}),i.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:"Mostrando"})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded text-center",children:[i.jsx("div",{className:"font-bold text-green-600",children:t.length}),i.jsx("div",{className:"text-green-800 dark:text-green-300",children:"Total"})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded text-center",children:[i.jsx("div",{className:"font-bold text-yellow-600",children:t.reduce((M,P)=>M+(P.alertas||[]).filter(S=>!S.resuelta).length,0)}),i.jsx("div",{className:"text-yellow-800 dark:text-yellow-300",children:"Alertas"})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-2 rounded text-center",children:[i.jsx("div",{className:"font-bold text-purple-600",children:new Set(t.map(M=>M.curso)).size}),i.jsx("div",{className:"text-purple-800 dark:text-purple-300",children:"Cursos"})]})]}),i.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:[k.map(M=>{var P;return i.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:M.nombre}),(M.alertas||[]).filter(S=>!S.resuelta).length>0&&i.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:[(M.alertas||[]).filter(S=>!S.resuelta).length," alertas"]})]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:[M.curso," - ",M.dificultad]}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-600 dark:text-slate-300",children:[i.jsxs("span",{children:[((P=M.intervenciones)==null?void 0:P.length)||0," intervenciones"]}),i.jsxs("span",{children:[(M.metasProgreso||[]).filter(S=>S.cumplida).length," metas cumplidas"]}),M.fechaActualizacionApoyos&&i.jsxs("span",{children:["lt. actualizacin: ",new Date(M.fechaActualizacionApoyos).toLocaleDateString("es-CL")]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[i.jsx("button",{onClick:()=>c(M),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm px-3 py-1 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:"Ver Ficha"}),i.jsx("button",{onClick:()=>j(M.id),title:"Eliminar del programa",className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:""})]})]})},M.id)}),k.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400 mb-2",children:f||m||x?"No se encontraron estudiantes con esos criterios":"No hay estudiantes en el programa PIE"}),(f||m||x)&&i.jsx("button",{onClick:()=>{A(""),g(""),v("")},className:"text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Limpiar filtros"})]})]})]}),i.jsx(CZ,{estudiantesDisponibles:T,onSelect:M=>d(M)})]})]}),u&&i.jsx(Clt,{student:u,onClose:()=>d(null),onConfirm:(M,P)=>{C(M,P),d(null)}}),l&&i.jsx(Elt,{student:l,onClose:()=>c(null),onSave:_,profesores:B})]})},rL="asistencia_dual",jZ=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaHora:((n=(r=t.fechaHora)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaHora}},jlt=(e,t)=>{var l;const r=(l=oa.currentUser)==null?void 0:l.uid,n=[],a=new Map,s=()=>t(Array.from(a.values())),o=Bt(ht(Ar,rL),sr("emailEstudiante","==",e),Xt("fechaHora","desc"));if(n.push(lr(o,c=>{c.docs.forEach(u=>a.set(u.id,jZ(u))),s()},c=>{(c==null?void 0:c.code)!=="permission-denied"&&console.error("Error subscribing to personal attendance (email):",c)})),r){const c=Bt(ht(Ar,rL),sr("estudianteId","==",r),Xt("fechaHora","desc"));n.push(lr(c,u=>{u.docs.forEach(d=>a.set(d.id,jZ(d))),s()},u=>{(u==null?void 0:u.code)!=="permission-denied"&&console.error("Error subscribing to personal attendance (uid):",u)}))}return()=>n.forEach(c=>c())},klt=async e=>{try{const t={...e,fechaHora:xr.fromDate(new Date(e.fechaHora))};await ln(ht(Ar,rL),t)}catch(t){throw console.error("Error adding attendance record:",t),new Error("Could not save the attendance record.")}},Slt=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),_lt=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),Tlt=({currentUser:e})=>{const[t,r]=w.useState(e.curso||""),[n,a]=w.useState([]),[s,o]=w.useState(!1),[l,c]=w.useState(!0),[u,d]=w.useState(null),[f,A]=w.useState(null),[m,g]=w.useState(null),[x,v]=w.useState(()=>{try{return sessionStorage.getItem("geo-requested")==="1"}catch{return!1}});w.useEffect(()=>{if(!e.email){c(!1);return}c(!0);const _=jlt(e.email,j=>{a(j),c(!1)});return()=>_()},[e.email]),w.useEffect(()=>{var j;if(!window.isSecureContext){A("insecure");return}if(!("geolocation"in navigator)){A("unsupported");return}const _=navigator;(j=_==null?void 0:_.permissions)!=null&&j.query?_.permissions.query({name:"geolocation"}).then(I=>{const T=()=>{const k=I.state;A(k==="denied"&&!x?"prompt":k)};T(),I.onchange=T}).catch(()=>A(null)):A(null)},[x]);const y={enableHighAccuracy:!0,timeout:15e3,maximumAge:0},N=w.useCallback(()=>{if(o(!0),d(null),!window.isSecureContext){A("insecure"),d({text:"El sitio no est en un contexto seguro (HTTPS). La ubicacin est bloqueada por el navegador.",type:"error"}),o(!1);return}if(!("geolocation"in navigator)){A("unsupported"),d({text:"Tu navegador no soporta geolocalizacin.",type:"error"}),o(!1);return}try{sessionStorage.setItem("geo-requested","1")}catch{}v(!0),navigator.geolocation.getCurrentPosition(_=>{A("granted"),g(typeof _.coords.accuracy=="number"?_.coords.accuracy:null),d({text:"Ubicacin habilitada. Ya puedes marcar tu asistencia.",type:"success"}),o(!1)},_=>{let j="No se pudo obtener la ubicacin.";_.code===_.PERMISSION_DENIED?(A("denied"),j="Permiso de ubicacin denegado. Habiltalo en la configuracin del navegador."):_.code===_.POSITION_UNAVAILABLE?j="La informacin de ubicacin no est disponible. Revisa tu conexin y GPS.":_.code===_.TIMEOUT&&(j="La solicitud de ubicacin expir. Intntalo de nuevo con mejor seal."),d({text:j,type:"error"}),o(!1)},y)},[]),C=_=>{if(!t){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}if(f==="insecure"){d({text:"La ubicacin est bloqueada porque el sitio no est bajo HTTPS.",type:"error"});return}if(f==="unsupported"){d({text:"Tu navegador no soporta geolocalizacin.",type:"error"});return}if(f==="denied"&&!x){try{sessionStorage.setItem("geo-requested","1")}catch{}v(!0)}o(!0),d(null),navigator.geolocation.getCurrentPosition(async j=>{const I={nombreEstudiante:e.nombreCompleto,emailEstudiante:e.email,curso:t,tipo:_,fechaHora:new Date().toISOString(),ubicacion:{latitud:j.coords.latitude,longitud:j.coords.longitude,precision:typeof j.coords.accuracy=="number"?j.coords.accuracy:void 0}};try{await klt(I),d({text:`Marca de ${_} registrada con xito!`,type:"success"}),g(typeof j.coords.accuracy=="number"?j.coords.accuracy:null)}catch(T){console.error("Error saving record to Firestore:",T),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{o(!1)}},j=>{console.error("Geolocation error:",j);let I="No se pudo obtener la ubicacin.";switch(j.code){case j.PERMISSION_DENIED:I="Permiso de ubicacin denegado. Por favor, habilite la ubicacin en su navegador y dispositivo.",A("denied");break;case j.POSITION_UNAVAILABLE:I="La informacin de ubicacin no est disponible en este momento. Verifique su conexin y GPS.";break;case j.TIMEOUT:I="La solicitud de ubicacin ha tardado demasiado. Intntelo de nuevo en un lugar con mejor seal.";break;default:I=`Ocurri un error desconocido al obtener la ubicacin (cdigo: ${j.code}).`;break}d({text:I,type:"error"}),o(!1)},y)};return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de prctica."}),f==="insecure"&&i.jsx("div",{className:"mb-4 p-3 rounded-md bg-red-50 text-red-800 border border-red-200",children:"La ubicacin est bloqueada porque el sitio no est bajo HTTPS. Usa la URL segura (https://) o contacta soporte."}),f==="unsupported"&&i.jsx("div",{className:"mb-4 p-3 rounded-md bg-amber-50 text-amber-800 border border-amber-200",children:"Tu navegador no soporta geolocalizacin. Prueba con otro navegador actualizado."}),f==="denied"&&i.jsxs("div",{className:"mb-4 p-3 rounded-md bg-red-50 text-red-800 border border-red-200",children:["Permiso de ubicacin denegado. Habiltalo en los ajustes del navegador:",i.jsxs("ul",{className:"list-disc pl-6 mt-2 text-sm",children:[i.jsxs("li",{children:[i.jsx("b",{children:"Android (Chrome)"}),": Icono de candado  Permisos  Ubicacin  Permitir."]}),i.jsxs("li",{children:[i.jsx("b",{children:"iOS (Safari)"}),": Ajustes  Safari  Ubicacin  Permitir al usar."]})]}),i.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[i.jsx("button",{type:"button",onClick:N,disabled:s,className:"px-3 py-2 rounded-md bg-sky-600 text-white hover:bg-sky-700 disabled:bg-slate-400",children:"Reintentar solicitud"}),i.jsx("span",{className:"text-xs text-slate-500",children:"Si no se abre la solicitud, ajusta los permisos del sitio."})]})]}),(f==="prompt"||f===null)&&i.jsxs("div",{className:"mb-4 p-3 rounded-md bg-sky-50 text-sky-800 border border-sky-200 flex items-center justify-between gap-3",children:[i.jsx("div",{children:"Para marcar asistencia, permite el acceso a tu ubicacin."}),i.jsx("button",{type:"button",onClick:N,disabled:s,className:"px-3 py-2 rounded-md bg-sky-600 text-white hover:bg-sky-700 disabled:bg-slate-400",children:"Habilitar ubicacin"})]}),i.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),i.jsxs("select",{id:"curso",value:t,onChange:_=>r(_.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"-- Mi curso --"}),dp.map(_=>i.jsx("option",{value:_,children:_},_))]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[i.jsx("button",{onClick:()=>C("Entrada"),disabled:s||!t,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),i.jsx("button",{onClick:()=>C("Salida"),disabled:s||!t,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),s&&i.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[i.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i.jsx("span",{children:"Obteniendo ubicacin..."})]}),m!=null&&!s&&i.jsxs("div",{className:"text-center text-slate-500 text-sm",children:["Precisin GPS ~ ",Math.round(m)," m"]}),u&&i.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),i.jsx("div",{className:"overflow-x-auto max-h-96",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:l?i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):n.length>0?n.map(_=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(_.fechaHora).toLocaleString("es-CL")}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:i.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${_.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[_.tipo==="Entrada"?i.jsx(Slt,{}):i.jsx(_lt,{}),_.tipo]})}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:_.curso})]},_.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},tb=e=>e?typeof e=="string"?new Date(e):e!=null&&e.toDate?e.toDate():e instanceof Date?e:new Date(e):new Date(NaN),Blt=async()=>{try{console.log(" Debugging users collection...");const e=ht(Ar,"usuarios"),t=Bt(e,Dl(10)),r=await Ir(t),n={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},a=new Set;return r.forEach(s=>{const o=s.data(),l={id:s.id,data:o,fields:Object.keys(o)};n.sampleDocs.push(l),Object.keys(o).forEach(c=>a.add(c))}),n.fieldAnalysis={allFields:Array.from(a),commonFields:Array.from(a).filter(s=>n.sampleDocs.filter(l=>s in l.data).length>n.sampleDocs.length*.5)},console.log("Users collection debug result:",n),n}catch(e){return console.error("Error debugging users collection:",e),{exists:!1,error:e instanceof Error?e.message:"Unknown error"}}},Ilt=async(e,t)=>{var c,u,d;const r=new Date(e,t,1),n=new Date(e,t+1,0,23,59,59,999),a=xr.fromDate(r),s=xr.fromDate(n),o=["asistencia_dual","asistencia_empresa","asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],l={};for(const f of o)try{const A=ht(Ar,f);try{const m=Bt(A,sr("fechaHora",">=",a),sr("fechaHora","<=",s)),g=await Ir(m);l[f]={exists:!0,hasDateField:!0,count:g.size,totalDocs:(await Ir(Bt(A,Dl(5)))).size,sampleDoc:((c=g.docs[0])==null?void 0:c.data())||null}}catch{const g=["fecha","timestamp","createdAt"];let x=!1;for(const v of g)try{const y=Bt(A,sr(v,">=",a),sr(v,"<=",s)),N=await Ir(y);l[f]={exists:!0,hasDateField:v,count:N.size,totalDocs:(await Ir(Bt(A,Dl(5)))).size,sampleDoc:((u=N.docs[0])==null?void 0:u.data())||null},x=!0;break}catch{continue}if(!x){const v=Bt(A,Xt("__name__"),Dl(5)),y=await Ir(v);l[f]={exists:!0,hasDateField:!1,count:y.size,totalDocs:y.size,sampleDoc:((d=y.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(A){l[f]={exists:!1,error:A instanceof Error?A.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",l),l},Dlt=(e,t,r,n,a)=>{try{const s=new Date(e,t,1);s.setHours(0,0,0,0);const o=new Date(e,t+1,0);o.setHours(23,59,59,999),console.log(` Buscando registros entre: ${s.toISOString()} y ${o.toISOString()}`),console.log(` Mes actual: ${e}-${(t+1).toString().padStart(2,"0")}`);const l=xr.fromDate(s),c=xr.fromDate(o),u=[],d=new Map,f=(a==null?void 0:a.includeAll)===!0,A=(a==null?void 0:a.limit)??1e3,m=()=>{const x=Array.from(d.values());console.log(` Total registros encontrados: ${x.length}`),x.length>0&&console.log(" Registros por da:",x.reduce((v,y)=>{const C=tb(y.fechaHora).getDate();return v[C]=(v[C]||0)+1,v},{})),r(x)};return["asistencia_dual"].forEach(x=>{try{console.log(` Configurando suscripcin para: ${x}`);const v=ht(Ar,x);if(f){const C=Bt(v,Xt("fechaHora","desc"),Dl(A)),_=lr(C,j=>{console.log(` ${x} (histrico): ${j.size} documentos`),Array.from(d.keys()).filter(T=>T.startsWith(`${x}_`)).forEach(T=>d.delete(T)),j.forEach(T=>{const k=T.data(),B=tb(k.fechaHora),M=isNaN(B.getTime())?new Date().toISOString():B.toISOString(),P={id:T.id,emailEstudiante:k.emailEstudiante||k.email||"",nombreEstudiante:k.nombreEstudiante||k.nombre||"",curso:k.curso||"",fechaHora:M,tipo:k.tipo||"Entrada",ubicacion:k.ubicacion||{latitud:null,longitud:null},origen:x},S=`${x}_${T.id}`;d.set(S,P)}),m()},j=>{console.warn(` Error en histrico ${x} con orderBy fechaHora:`,j);const I=Bt(v,Dl(A)),T=lr(I,k=>{console.log(` ${x} (histrico sin orderBy): ${k.size} documentos`),Array.from(d.keys()).filter(M=>M.startsWith(`${x}_`)).forEach(M=>d.delete(M)),k.forEach(M=>{const P=M.data(),S=tb(P.fechaHora),L=isNaN(S.getTime())?new Date().toISOString():S.toISOString(),H={id:M.id,emailEstudiante:P.emailEstudiante||P.email||"",nombreEstudiante:P.nombreEstudiante||P.nombre||"",curso:P.curso||"",fechaHora:L,tipo:P.tipo||"Entrada",ubicacion:P.ubicacion||{latitud:null,longitud:null},origen:x},q=`${x}_${M.id}`;d.set(q,H)}),m()});u.push(T)});u.push(_);return}const y=Bt(v,sr("fechaHora",">=",l),sr("fechaHora","<=",c),Xt("fechaHora","desc")),N=lr(y,C=>{console.log(` ${x}: ${C.size} documentos encontrados con filtro`),C.size>0?(console.log(` Registros encontrados en ${x}:`),Array.from(d.keys()).filter(j=>j.startsWith(`${x}_`)).forEach(j=>d.delete(j)),C.docs.forEach((j,I)=>{var T;if(I<5){const k=j.data();let B;(T=k.fechaHora)!=null&&T.toDate?B=k.fechaHora.toDate():typeof k.fechaHora=="string"?B=new Date(k.fechaHora):B=new Date,console.log(`   ${I+1}. ${k.emailEstudiante} - ${B.toLocaleString()} - ${k.tipo}`),console.log(`       Fecha original: ${k.fechaHora} (tipo: ${typeof k.fechaHora})`)}}),C.forEach(j=>{const I=j.data(),T=tb(I.fechaHora),k=isNaN(T.getTime())?new Date().toISOString():T.toISOString(),B={id:j.id,emailEstudiante:I.emailEstudiante||I.email||"",nombreEstudiante:I.nombreEstudiante||I.nombre||"",curso:I.curso||"",fechaHora:k,tipo:I.tipo||"Entrada",ubicacion:I.ubicacion||{latitud:null,longitud:null},origen:x},M=`${x}_${j.id}`;d.set(M,B)}),m()):(console.log(` ${x}: sin registros en el perodo, limpiando y notificando vaco`),Array.from(d.keys()).filter(j=>j.startsWith(`${x}_`)).forEach(j=>d.delete(j)),m())},C=>{console.warn(` Error con filtro en ${x}:`,C),console.log(` Intentando estrategia alternativa en ${x}...`);const _=Bt(v,Dl(A)),j=lr(_,T=>{if(console.log(` ${x} (sin filtro): ${T.size} documentos`),T.size>0){const M=T.docs[0].data();console.log(` Estructura en ${x}:`,Object.keys(M)),console.log(" Primer documento:",M)}const k=T.docs.filter(M=>{const P=M.data();if(!P.fechaHora)return!1;const S=tb(P.fechaHora);return S>=s&&S<=o});console.log(` ${x}: ${k.length} registros despus de filtro manual`),Array.from(d.keys()).filter(M=>M.startsWith(`${x}_`)).forEach(M=>d.delete(M)),k.length>0&&k.forEach(M=>{const P=M.data(),S=tb(P.fechaHora),L=isNaN(S.getTime())?new Date().toISOString():S.toISOString(),H={id:M.id,emailEstudiante:P.emailEstudiante||P.email||"",nombreEstudiante:P.nombreEstudiante||P.nombre||"",curso:P.curso||"",fechaHora:L,tipo:P.tipo||"Entrada",ubicacion:P.ubicacion||null},q=`${x}_${M.id}`;d.set(q,H)}),m()}),I=u.findIndex(T=>T===N);I>=0?u[I]=j:u.push(j)});u.push(N)}catch(v){console.warn(` Error configurando ${x}:`,v)}}),()=>{u.forEach(x=>{try{x()}catch(v){console.warn("Error unsubscribing:",v)}})}}catch(s){return console.error("Error setting up subscribeToAsistenciaByMonth:",s),n&&n(new Error(`Error al configurar suscripcin: ${s instanceof Error?s.message:"Error desconocido"}`)),()=>{}}},Olt=(e,t)=>{try{console.log(" Buscando usuarios en mltiples colecciones...");const r=["usuarios"],n=[],a=new Map,s=()=>{const l=Array.from(a.values());console.log(` Total usuarios encontrados: ${l.length}`);const c=l.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log(" Usuarios por perfil:",c);const u=l.filter(d=>d.profile===It.ESTUDIANTE);console.log(` Estudiantes encontrados: ${u.length}`),u.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),e(l)};let o=!1;return r.forEach(l=>{try{const c=ht(Ar,l),u=Bt(c),d=lr(u,f=>{Array.from(a.keys()).filter(m=>m.startsWith(`${l}_`)).forEach(m=>a.delete(m)),f.size>0?(console.log(` Encontrados ${f.size} usuarios en coleccin: ${l}`),o=!0,f.forEach(m=>{try{const g=m.data(),x=g.email||g.userEmail||g.mail||g.correo||"",v=g.nombreCompleto||g.displayName||g.name||g.nombre||g.fullName||"",y=g.curso||g.course||g.class||g.grade||"";let N=g.profile||g.role||g.tipo||g.userType||It.ESTUDIANTE;if(typeof N=="string"){const j=N.toLowerCase();j.includes("estudiante")||j.includes("student")||j.includes("alumno")?N=It.ESTUDIANTE:j.includes("coordinador")||j.includes("coordinator")?N=It.COORDINACION_TP:j.includes("profesor")||j.includes("teacher")||j.includes("docente")?N=It.PROFESORADO:(j.includes("subdireccion")||j.includes("subdir"))&&(N=It.COORDINACION_TP)}const C={id:m.id,email:x,nombreCompleto:v,curso:y,profile:N},_=`${l}_${m.id}`;a.set(_,C)}catch(g){console.warn(`Error procesando documento ${m.id} en ${l}:`,g)}})):console.log(` Coleccin ${l}: vaca`),s()},f=>{console.warn(` Error en coleccin ${l}:`,f)});n.push(d)}catch(c){console.warn(` Error configurando ${l}:`,c)}}),setTimeout(()=>{o||(console.error(" No se encontraron usuarios en ninguna coleccin"),t&&t(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{n.forEach(l=>{try{l()}catch(c){console.warn("Error unsubscribing:",c)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),t&&t(new Error(`Error al configurar suscripcin multi-coleccin: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},Plt=(e,t)=>{try{console.log("Setting up users subscription...");const r=ht(Ar,"usuarios"),n=Bt(r);return lr(n,s=>{console.log(`Raw users snapshot size: ${s.size}`);const o=[];s.forEach(d=>{try{const f=d.data();console.log(`Processing user doc ${d.id}:`,f);const A=f.email||f.userEmail||f.mail||"",m=f.nombreCompleto||f.displayName||f.name||f.nombre||"",g=f.curso||f.course||f.class||"";let x=f.profile||f.role||f.tipo||It.ESTUDIANTE;if(typeof x=="string"){const y=x.toLowerCase();y.includes("estudiante")||y.includes("student")||y.includes("alumno")?x=It.ESTUDIANTE:y.includes("coordinador")||y.includes("coordinator")?x=It.COORDINACION_TP:y.includes("profesor")||y.includes("teacher")||y.includes("docente")?x=It.PROFESORADO:(y.includes("subdireccion")||y.includes("subdir"))&&(x=It.COORDINACION_TP)}const v={id:d.id,email:A,nombreCompleto:m,curso:g,profile:x};o.push(v)}catch(f){console.warn(`Error processing user document ${d.id}:`,f)}}),o.sort((d,f)=>d.nombreCompleto.localeCompare(f.nombreCompleto)),console.log(`Processed ${o.length} users successfully`);const l=o.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("Users by profile:",l);const c=o.filter(d=>d.profile===It.ESTUDIANTE);console.log(`Estudiantes: ${c.length}`);const u=c.filter(d=>d.curso);console.log(`Estudiantes con curso: ${u.length}`),e(o)},s=>{console.error("Error in subscribeToAllUsers:",s),t&&t(new Error(`Error al cargar usuarios: ${s.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),t&&t(new Error(`Error al configurar suscripcin de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},X_="empresas_practicas",nL="usuarios",W9="rutas_supervision",DT=e=>{const t=e.data();return{id:e.id,...t}};async function Flt(e){const r=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=AIzaSyDjpSq97TvCxx7jIY7fEapTysmiZ1H30bg&region=CL`;try{const a=await(await fetch(r)).json();return a.status==="OK"&&a.results[0]?a.results[0].geometry.location:null}catch(n){return console.error("Error en la llamada a la API de Geocodificacin:",n),null}}const sme=e=>{const t=Bt(ht(ut,X_),Xt("nombre","asc"));return lr(t,r=>{const n=r.docs.map(a=>DT(a));e(n)},r=>console.error("Error al suscribirse a empresas:",r))},Ww=async e=>{const t=e.calificaciones.reduce((n,a)=>n+(a.score||0),0),r={...e,puntajeTotal:t};if(e.direccion){const n=await Flt(e.direccion);n&&(r.coordenadas=n)}if("id"in e&&e.id){const{id:n,...a}=r,s=Wt(ut,X_,n);return await bi(s,a,{merge:!0}),n}else return(await ln(ht(ut,X_),{...r,createdAt:zn()})).id},Rlt=async e=>{const t=Wt(ut,X_,e);await ca(t)},Llt=e=>{const t=Bt(ht(ut,nL),sr("profile","==",It.ESTUDIANTE),Xt("nombreCompleto","asc"));return lr(t,r=>{const n=r.docs.map(a=>DT(a));e(n)},r=>console.error("Error al suscribirse a estudiantes:",r))},Mlt=e=>{const t=Bt(ht(ut,nL),sr("profile","==",It.PROFESORADO),Xt("nombreCompleto","asc")),r=Bt(ht(ut,nL),sr("profile","==",It.COORDINACION_TP),Xt("nombreCompleto","asc")),n=new Map,a=()=>{const c=Array.from(n.values()).sort((u,d)=>(u.nombreCompleto||"").localeCompare(d.nombreCompleto||"","es"));e(c)},s=c=>{c.docChanges().forEach(u=>{const d=u.doc.id;u.type==="removed"?n.delete(d):n.set(d,DT(u.doc))}),a()},o=lr(t,s,c=>console.error("Error al suscribirse a profesores:",c)),l=lr(r,s,c=>console.error("Error al suscribirse a coordinacin:",c));return()=>{o(),l()}},Ult=async e=>(await ln(ht(ut,W9),{...e,createdAt:zn()})).id,Hlt=e=>{const t=Bt(ht(ut,W9),Xt("createdAt","desc"));return lr(t,r=>{const n=r.docs.map(a=>DT(a));e(n)},r=>console.error("Error al suscribirse a rutas guardadas:",r))},Qlt=async e=>{const t=Wt(ut,W9,e);await ca(t)},Tk=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},Vlt=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),$lt=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),zlt=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[a,s]=w.useState([]),[o,l]=w.useState(!0),[c,u]=w.useState(null),[d,f]=w.useState(new Date),[A,m]=w.useState("todos"),[g,x]=w.useState(""),[v,y]=w.useState(!1),{currentUser:N}=yE(),C=ie=>`asistenciaDual.threshold.${ie||"default"}`,[_,j]=w.useState(()=>{try{const ie=localStorage.getItem(C(null)),re=ie?parseInt(ie,10):NaN;return Number.isFinite(re)&&re>0?re:200}catch{return 200}});w.useEffect(()=>{try{const ie=C(N==null?void 0:N.email),re=localStorage.getItem(ie);if(re){const ce=parseInt(re,10);Number.isFinite(ce)&&ce>0&&j(ce)}}catch{}},[N==null?void 0:N.email]),w.useEffect(()=>{try{const ie=C(N==null?void 0:N.email);localStorage.setItem(ie,String(_))}catch{}},[_,N==null?void 0:N.email]);const[I,T]=w.useState("tabla");w.useEffect(()=>{l(!0),u(null);const ie=d.getFullYear(),re=d.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Ao:",ie,"Mes:",re);let ce=!1,oe=!1;const be=()=>{ce&&oe&&(console.log("=== CARGA COMPLETA ==="),l(!1))};(async()=>{console.log(" INICIANDO PRUEBA DIRECTA SIMPLE...");try{const je=ht(Ar,"asistencia_dual"),De=Bt(je,Dl(5)),ke=await Ir(De);if(console.log(` asistencia_dual - Documentos encontrados: ${ke.size}`),ke.size>0)ke.docs.forEach((ue,we)=>{const Ae=ue.data();console.log(`   ${we+1}. ${ue.id.slice(0,8)} - ${Ae.emailEstudiante} - ${Ae.tipo}`),console.log("      Fecha original:",Ae.fechaHora),console.log("      Todos los campos:",Object.keys(Ae))});else{console.log(" No se encontraron documentos en asistencia_dual");const ue=["asistenciaEmpresa","asistencia_empresa"];for(const we of ue)try{const Ae=ht(Ar,we),de=Bt(Ae,Dl(3)),ae=await Ir(de);if(console.log(` ${we}: ${ae.size} documentos`),ae.size>0){const fe=ae.docs[0].data();console.log("   Estructura:",Object.keys(fe)),console.log("   Email:",fe.emailEstudiante||fe.email),console.log("   Fecha:",fe.fechaHora||fe.fecha)}}catch(Ae){console.log(` ${we}: ${Ae instanceof Error?Ae.message:"Error"}`)}}}catch(je){console.error(" Error en prueba directa:",je),je.code==="permission-denied"?(console.log(" PROBLEMA: Permisos de Firestore denegados"),console.log(" Ve a Firebase Console  Firestore  Rules y verifica los permisos")):je.code==="failed-precondition"&&(console.log(" PROBLEMA: Faltan ndices en Firestore"),console.log(" Ve a Firebase Console  Firestore  Indexes"))}})(),Ilt(ie,re).then(je=>{console.log(" Debug info for collections:",je),Object.entries(je).forEach(([De,ke])=>{if(ke.exists&&ke.totalDocs>0){if(console.log(`
 COLECCIN ${De.toUpperCase()}:`),console.log(`    Total documentos: ${ke.totalDocs}`),console.log(`    Documentos del perodo: ${ke.count}`),console.log(`    Campo de fecha: ${ke.hasDateField}`),ke.sampleDoc){console.log("    Documento ejemplo:",ke.sampleDoc);const ue=ke.sampleDoc,we=ue.emailEstudiante||ue.email||ue.userEmail||ue.correo||"NO ENCONTRADO",Ae=ue.tipo||ue.type||ue.action||ue.tipoRegistro||"NO ENCONTRADO",de=ue.fechaHora||ue.fecha||ue.timestamp||ue.createdAt||"NO ENCONTRADO";console.log(`    Email estudiante: ${we}`),console.log(`    Tipo registro: ${Ae}`),console.log(`    Fecha: ${de}`),console.log("    Todos los campos:",Object.keys(ue))}ke.filteredDocs&&ke.filteredDocs.length>0&&(console.log("    Registros del perodo encontrados:",ke.filteredDocs.length),ke.filteredDocs.forEach((ue,we)=>{we<3&&console.log(`      ${we+1}. ID: ${ue.id}`,ue.data)}))}else ke.exists?console.log(` Coleccin ${De}: vaca`):console.log(` Coleccin ${De}: no existe`)})}).catch(je=>{console.error("Debug error:",je)}),Blt().then(je=>{console.log(" Debug info for users:",je),(!je.exists||"totalDocs"in je&&je.totalDocs===0)&&(console.log(' Coleccin "users" vaca o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async ke=>{var ue;try{const we=ht(Ar,ke),Ae=Bt(we,Dl(5)),de=await Ir(Ae);de.size>0?(console.log(` Encontrada coleccin alternativa: ${ke} con ${de.size} documentos`),console.log("Documento muestra:",(ue=de.docs[0])==null?void 0:ue.data())):console.log(` Coleccin ${ke}: vaca`)}catch{console.log(` Coleccin ${ke}: no existe`)}}))}).catch(je=>{console.error("Users debug error:",je)});try{console.log("Configurando suscripcin a asistencia...");let je=Dlt(ie,re,ue=>{if(console.log(" Received registros:",ue.length),ue.length>0){console.log(" ANLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",ue[0]);const we=[...new Set(ue.map(xe=>xe.emailEstudiante).filter(Boolean))];console.log(" Emails de estudiantes en registros:",we);const Ae=[...new Set(ue.map(xe=>xe.tipo).filter(Boolean))];console.log(" Tipos de registro encontrados:",Ae);const de=ue.reduce((xe,Ue)=>{const qe=new Date(Ue.fechaHora).getDate();return xe[qe]||(xe[qe]=[]),xe[qe].push(Ue),xe},{});console.log(" Registros por da del mes:",Object.keys(de).map(xe=>({dia:parseInt(xe),cantidad:de[parseInt(xe)].length})));const ae=r.map(xe=>xe.email).filter(Boolean);console.log(" Emails de estudiantes cargados:",ae);const fe=we.filter(xe=>ae.includes(xe)),ge=we.filter(xe=>!ae.includes(xe));console.log(" Emails que coinciden:",fe),console.log(" Emails que NO coinciden:",ge)}else console.log(" No se encontraron registros de asistencia para el perodo");t(ue),ce=!0,be()},ue=>{console.error(" Error fetching asistencia:",ue),u("Error al cargar datos de asistencia: "+ue.message),ce=!0,be()},{includeAll:v});console.log("Configurando suscripcin a usuarios...");let De=null,ke=null;return De=Olt(ue=>{if(console.log(" Received users (multi-collection):",ue.length),ue.length>0){console.log("Sample user:",ue[0]);const we=ue.filter(Ae=>Ae.profile===It.ESTUDIANTE&&Ae.curso);console.log("Dual students found:",we.length),we.forEach(Ae=>{console.log(`- ${Ae.nombreCompleto} (${Ae.curso}) - ${Ae.email}`)})}n(ue),oe=!0,be()},ue=>{console.error(" Error fetching users (multi-collection):",ue),console.log(" Intentando con funcin original de usuarios..."),ke=Plt(we=>{console.log(" Received users (fallback):",we.length),n(we),oe=!0,be()},we=>{console.error(" Error en fallback tambin:",we),u("Error al cargar estudiantes: "+ue.message),oe=!0,be()})}),setTimeout(async()=>{if(!oe&&r.length===0)try{console.log(" Timeout de usuarios: aplicando fallback getAllUsersFromAlt()...");const ue=await fv();ue.length>0?(console.log(` Fallback carg ${ue.length} usuarios desde coleccin "usuarios"`),n(ue),oe=!0,be()):(console.warn(' Fallback no encontr usuarios en "usuarios"'),oe=!0,be())}catch(ue){console.error(" Error en fallback getAllUsersFromAlt:",ue),oe=!0,be()}},4e3),()=>{console.log("Limpiando suscripciones..."),je&&je(),De&&De(),ke&&ke()}}catch(je){console.error(" Error setting up subscriptions:",je),u("Error al inicializar conexiones: "+(je instanceof Error?je.message:"Error desconocido")),l(!1)}},[d,v]),w.useEffect(()=>{const ie=sme(s);return()=>ie&&ie()},[]);const{monthDays:k,monthName:B,year:M}=w.useMemo(()=>{const ie=d.getFullYear(),re=d.getMonth();return{monthDays:new Date(ie,re+1,0).getDate(),monthName:d.toLocaleString("es-CL",{month:"long"}),year:ie}},[d]),P=w.useMemo(()=>{let ie=r.filter(re=>re.profile===It.ESTUDIANTE&&re.curso&&dp.includes(Tk(re.curso)));if(A!=="todos"&&(ie=ie.filter(re=>Tk(re.curso||"")===A)),g&&(ie=ie.filter(re=>re.nombreCompleto.toLowerCase().includes(g.toLowerCase()))),e.length>0){const re=[...new Set(e.map(be=>be.emailEstudiante).filter(be=>!!be))],ce=ie.map(be=>be.email),oe=re.filter(be=>!ce.includes(be));if(oe.length>0){console.log(" Agregando estudiantes faltantes con registros:",oe);const X=oe.map(je=>{const De=e.find(ke=>ke.emailEstudiante===je);return{id:je,email:je,nombreCompleto:(De==null?void 0:De.nombreEstudiante)||je.split("@")[0],curso:(De==null?void 0:De.curso)||"3C",profile:It.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(je=>{const De=A==="todos"||Tk(je.curso)===A,ke=!g||je.nombreCompleto.toLowerCase().includes(g.toLowerCase());return De&&ke&&dp.includes(Tk(je.curso))});ie=[...ie,...X]}}return console.log(` Estudiantes filtrados para mostrar: ${ie.length}`),ie.forEach(re=>{console.log(`   - ${re.nombreCompleto} (${re.curso}) - ${re.email}`)}),ie.sort((re,ce)=>re.nombreCompleto.localeCompare(ce.nombreCompleto))},[r,A,g,e]),S=w.useMemo(()=>{console.log(" Procesando datos de asistencia para la tabla..."),console.log(` Total registros a procesar: ${e.length}`),console.log(` Estudiantes disponibles: ${P.length}`);const ie=new Map;return e.length===0?(console.log(" No hay registros para procesar an"),ie):(e.forEach((re,ce)=>{const oe=re.emailEstudiante;if(!oe)return;let be;if(re.fechaHora instanceof Date)be=re.fechaHora;else if(re.fechaHora&&typeof re.fechaHora=="object"&&"toDate"in re.fechaHora)be=re.fechaHora.toDate();else if(typeof re.fechaHora=="string")be=new Date(re.fechaHora);else{console.warn("Fecha no vlida en registro:",re);return}const X=be.getDate(),je=be.getMonth(),De=be.getFullYear();ce<3&&console.log(` Registro ${ce+1}:`,{email:oe,tipo:re.tipo,fechaOriginal:re.fechaHora,fechaProcesada:be.toLocaleString(),ao:De,mes:je,da:X}),ie.has(oe)||ie.set(oe,new Map);const ke=ie.get(oe);ke.has(X)||ke.set(X,{});const ue=ke.get(X);re.tipo==="Entrada"?(!ue.entrada||be<new Date(ue.entrada.fechaHora))&&(ue.entrada=re):re.tipo==="Salida"&&(!ue.salida||be>new Date(ue.salida.fechaHora))&&(ue.salida=re)}),console.log(" Datos de asistencia procesados:",{estudiantesConRegistros:ie.size,estudiantes:Array.from(ie.keys()),registrosPorEstudiante:Array.from(ie.entries()).map(([re,ce])=>({email:re,dias:Array.from(ce.keys()),totalRegistros:Array.from(ce.values()).reduce((oe,be)=>oe+(be.entrada?1:0)+(be.salida?1:0),0)}))}),ie)},[e]),L=w.useMemo(()=>{if(!e.length)return 0;const ie=d.getFullYear(),re=d.getMonth();return e.reduce((ce,oe)=>{let be=null;return oe.fechaHora instanceof Date?be=oe.fechaHora:oe.fechaHora&&typeof oe.fechaHora=="object"&&"toDate"in oe.fechaHora?be=oe.fechaHora.toDate():typeof oe.fechaHora=="string"&&(be=new Date(oe.fechaHora)),!be||isNaN(be.getTime())?ce:be.getFullYear()===ie&&be.getMonth()===re?ce+1:ce},0)},[e,d]),H=ie=>{f(re=>{const ce=new Date(re);return ce.setMonth(ce.getMonth()+ie),ce})},q=ie=>{ie!=null&&ie.latitud&&(ie!=null&&ie.longitud)&&window.open(`https://www.google.com/maps?q=${ie.latitud},${ie.longitud}`,"_blank")},Q=["D","L","M","M","J","V","S"],z=w.useMemo(()=>{const ie=new Map;return a.forEach(re=>{(re.estudiantesAsignados||[]).forEach(ce=>{ce&&ie.set(ce,re)})}),ie},[a]),K=(ie,re,ce,oe)=>{const be=we=>we*Math.PI/180,je=be(ce-ie),De=be(oe-re),ke=Math.sin(je/2)**2+Math.cos(be(ie))*Math.cos(be(ce))*Math.sin(De/2)**2;return 6371e3*(2*Math.atan2(Math.sqrt(ke),Math.sqrt(1-ke)))},Z=ie=>{const re=ie.email,ce=S.get(re),oe=z.get(ie.id),be=oe==null?void 0:oe.coordenadas;if(!ce||!be||be.lat==null||be.lng==null)return{hasData:!!ce,undetermined:!0,anyDeviation:!1,count:0,max:0};let X=0,je=0;for(let De=1;De<=k;De++){const ke=ce.get(De);if(!ke)continue;const ue=we=>{if(!we||we.latitud==null||we.longitud==null)return;const Ae=K(we.latitud,we.longitud,be.lat,be.lng);Ae>_&&(X+=1),Ae>je&&(je=Ae)};ke.entrada&&ue(ke.entrada.ubicacion),ke.salida&&ue(ke.salida.ubicacion)}return{hasData:!0,undetermined:!1,anyDeviation:X>0,count:X,max:je}},[U,Y]=w.useState(()=>{try{return localStorage.getItem("asistenciaDual.onlyDeviations.default")==="1"}catch{return!1}});w.useEffect(()=>{try{const ie=`asistenciaDual.onlyDeviations.${(N==null?void 0:N.email)||"default"}`,re=localStorage.getItem(ie);re!=null&&Y(re==="1")}catch{}},[N==null?void 0:N.email]),w.useEffect(()=>{try{const ie=`asistenciaDual.onlyDeviations.${(N==null?void 0:N.email)||"default"}`;localStorage.setItem(ie,U?"1":"0")}catch{}},[U,N==null?void 0:N.email]);const R=w.useMemo(()=>U?P.filter(ie=>{const re=Z(ie);return re.hasData&&!re.undetermined&&re.anyDeviation}):P,[P,U,S,z,k]),D=w.useMemo(()=>{const ie=R,re=new Set(ie.map(Ae=>Ae.email)),ce=[];for(let Ae=1;Ae<=k;Ae++){let de=0;re.forEach(ae=>{var ge;const fe=(ge=S.get(ae))==null?void 0:ge.get(Ae);fe!=null&&fe.entrada&&(de+=1)}),ce.push({day:Ae,entradas:de})}const oe={0:0,1:0,2:0,3:0,4:0,5:0,6:0};ce.forEach(({day:Ae,entradas:de})=>{const fe=new Date(M,d.getMonth(),Ae).getDay();oe[fe]+=de});const be=[0,1,2,3,4,5,6].map(Ae=>({nombre:Q[Ae],registros:oe[Ae]}));let X=0;ie.forEach(Ae=>{var fe;const de=S.get(Ae.email);if(!de)return;let ae=0;for(let ge=1;ge<=k;ge++)(fe=de.get(ge))!=null&&fe.entrada&&(ae+=1);X+=ae});const je=ie.length?X/ie.length:0,De=ie.map(Ae=>{const de=Z(Ae);return{id:Ae.id,nombre:Ae.nombreCompleto,count:de.count,any:de.anyDeviation}}),ke=De.reduce((Ae,de)=>Ae+(de.count||0),0),ue=De.filter(Ae=>Ae.count>0).sort((Ae,de)=>de.count-Ae.count).slice(0,5);let we=[];if(A==="todos"){const Ae=new Map;ie.forEach(de=>{const ae=de.curso||"";Ae.has(ae)||Ae.set(ae,[]),Ae.get(ae).push(de)}),we=Array.from(Ae.entries()).map(([de,ae])=>{let fe=0;ae.forEach(xe=>{var Ze;const Ue=S.get(xe.email);if(!Ue)return;let qe=0;for(let We=1;We<=k;We++)(Ze=Ue.get(We))!=null&&Ze.entrada&&(qe+=1);fe+=qe});const ge=ae.length?fe/ae.length:0;return{curso:de,promedioDias:ge,estudiantes:ae.length}}).sort((de,ae)=>de.curso.localeCompare(ae.curso,"es"))}return{estudiantesCount:ie.length,dailyEntries:ce,weekdaySeries:be,avgDiasConEntrada:je,totalDesviaciones:ke,topDesviadores:ue,porCurso:we}},[R,S,k,M,d,A]),W=ie=>{if(ie==null)return"";let re=String(ie);const ce=/[",\n]/.test(re);return re=re.replace(/"/g,'""'),ce?`"${re}"`:re},J=(ie,re)=>{const ce=re.map(je=>je.map(W).join(",")).join(`
`),oe=new Blob([ce],{type:"text/csv;charset=utf-8;"}),be=URL.createObjectURL(oe),X=document.createElement("a");X.href=be,X.setAttribute("download",ie),document.body.appendChild(X),X.click(),document.body.removeChild(X),URL.revokeObjectURL(be)},le=()=>{try{const ie=["Estudiante","Curso"];for(let je=1;je<=k;je++)ie.push(String(je));ie.push("Ingresos","Salidas","Desv","DesvEventos","DesvMax(m)");const re=[ie];R.forEach(je=>{const De=S.get(je.email);let ke=0,ue=0;const we=[];for(let ae=1;ae<=k;ae++){const fe=De==null?void 0:De.get(ae),ge=!!(fe!=null&&fe.entrada),xe=!!(fe!=null&&fe.salida);ge&&(ke+=1),xe&&(ue+=1),ge&&xe?we.push("E/S"):ge?we.push("E"):xe?we.push("S"):we.push("")}const Ae=Z(je),de=Ae.hasData?Ae.undetermined?"N/D":Ae.anyDeviation?"S":"No":"";re.push([je.nombreCompleto||"",je.curso||"",...we,String(ke),String(ue),de,Ae.hasData&&!Ae.undetermined?String(Ae.count):"",Ae.hasData&&!Ae.undetermined?String(Math.round(Ae.max)):""])});const oe=d.toLocaleString("es-CL",{month:"long"}).normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/\s+/g,"_"),X=`asistencia_dual_${A==="todos"?"Todos":A.replace(/[^A-Za-z0-9]/g,"_")}_${oe}_${M}${U?"_solo_desv":""}.csv`;J(X,re)}catch(ie){console.error("Error al exportar CSV:",ie),alert("No se pudo generar el informe. Intenta nuevamente.")}};return c?i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:i.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:c})}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[i.jsx("button",{onClick:()=>H(-1),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors","aria-label":"Mes anterior",children:""}),i.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${B} ${M}`}),i.jsx("button",{onClick:()=>H(1),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors","aria-label":"Mes siguiente",children:""})]}),i.jsxs("label",{className:"flex items-center gap-2 justify-center md:justify-start",children:[i.jsx("input",{type:"checkbox",checked:v,onChange:ie=>y(ie.target.checked),disabled:o}),i.jsx("span",{className:"text-slate-700 dark:text-slate-200 text-sm",children:"Mostrar todo"})]}),i.jsxs("select",{value:A,onChange:ie=>m(ie.target.value),disabled:o,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"todos",children:"Todos los Cursos"}),dp.map(ie=>i.jsx("option",{value:ie,children:ie},ie))]}),i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:g,onChange:ie=>x(ie.target.value),disabled:o,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),i.jsxs("div",{className:"text-center md:text-right text-sm text-slate-600 dark:text-slate-300",children:[i.jsxs("span",{className:"inline-block px-2 py-1 rounded bg-slate-100 dark:bg-slate-600/50 mr-2",children:["Estudiantes: ",P.length]}),i.jsxs("span",{className:"inline-block px-2 py-1 rounded bg-slate-100 dark:bg-slate-600/50",children:["Registros del perodo: ",L]})]}),i.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-end gap-2",children:[i.jsx("button",{onClick:()=>T(ie=>ie==="tabla"?"dashboard":"tabla"),className:"px-4 py-2 rounded-md bg-emerald-600 text-white font-medium hover:bg-emerald-700 w-full sm:w-auto min-w-[140px]",title:"Alternar entre Tabla y Dashboard",children:I==="tabla"?"Ver Dashboard":"Ver Tabla"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm text-slate-600 dark:text-slate-300",title:"Umbral de desviacin geogrfica",children:"Umbral"}),i.jsxs("select",{value:_,onChange:ie=>j(parseInt(ie.target.value)||200),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm px-2 py-1 w-full sm:w-[120px]",children:[i.jsx("option",{value:100,children:"100 m"}),i.jsx("option",{value:200,children:"200 m"}),i.jsx("option",{value:300,children:"300 m"}),i.jsx("option",{value:500,children:"500 m"})]})]}),i.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200",children:[i.jsx("input",{type:"checkbox",checked:U,onChange:ie=>Y(ie.target.checked)}),"Solo con desviaciones"]}),i.jsx("button",{onClick:le,disabled:o||R.length===0,title:"Descargar informe mensual (CSV)",className:"px-4 py-2 rounded-md bg-blue-600 text-white font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed w-full sm:w-auto min-w-[160px]",children:"Descargar informe"})]})]}),o?i.jsxs("div",{className:"text-center text-amber-600 py-10",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),i.jsx("div",{children:"Cargando datos de asistencia..."})]}):I==="dashboard"?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-tr from-indigo-500 to-indigo-400 text-white shadow-md",children:[i.jsx("div",{className:"text-xs opacity-90",children:"Estudiantes"}),i.jsx("div",{className:"text-2xl font-bold",children:D.estudiantesCount})]}),i.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-tr from-cyan-500 to-cyan-400 text-white shadow-md",children:[i.jsx("div",{className:"text-xs opacity-90",children:"Registros (mes)"}),i.jsx("div",{className:"text-2xl font-bold",children:L})]}),i.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-tr from-emerald-500 to-emerald-400 text-white shadow-md",children:[i.jsx("div",{className:"text-xs opacity-90",children:"Promedio das con entrada"}),i.jsx("div",{className:"text-2xl font-bold",children:D.avgDiasConEntrada.toFixed(1)})]}),i.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-tr from-amber-500 to-amber-400 text-white shadow-md",children:[i.jsx("div",{className:"text-xs opacity-90",children:"Desviaciones (mes)"}),i.jsx("div",{className:"text-2xl font-bold",children:D.totalDesviaciones})]})]}),i.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900",children:[i.jsx("h3",{className:"font-bold mb-3",children:"Entradas por da del mes"}),i.jsx($o,{width:"100%",height:260,children:i.jsxs(Iat,{data:D.dailyEntries,margin:{left:8,right:8,top:8,bottom:8},children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"gradEntradas",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:"#22C55E",stopOpacity:.8}),i.jsx("stop",{offset:"100%",stopColor:"#22C55E",stopOpacity:.1})]})}),i.jsx(Mh,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),i.jsx(Rc,{dataKey:"day",tick:{fill:"#64748b",fontSize:12}}),i.jsx(Lc,{allowDecimals:!1,tick:{fill:"#64748b",fontSize:12}}),i.jsx(Vo,{}),i.jsx(C0e,{dataKey:"entradas",name:"Entradas",type:"monotone",stroke:"#22C55E",fill:"url(#gradEntradas)"})]})})]}),i.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900",children:[i.jsx("h3",{className:"font-bold mb-3",children:"Registros por da de semana"}),i.jsx($o,{width:"100%",height:260,children:i.jsxs(Nf,{data:D.weekdaySeries,margin:{left:8,right:8,top:8,bottom:8},children:[i.jsx(Mh,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),i.jsx(Rc,{dataKey:"nombre",tick:{fill:"#64748b",fontSize:12}}),i.jsx(Lc,{allowDecimals:!1,tick:{fill:"#64748b",fontSize:12}}),i.jsx(Vo,{}),i.jsx(jd,{dataKey:"registros",name:"Entradas",fill:"#6366F1",radius:[6,6,0,0]}),i.jsx(Kp,{})]})})]}),i.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900",children:[i.jsx("h3",{className:"font-bold mb-3",children:"Top 5 con ms desviaciones"}),D.topDesviadores.length===0?i.jsx("div",{className:"text-sm text-slate-500",children:"Sin desviaciones registradas en el mes."}):i.jsx("ul",{className:"divide-y",children:D.topDesviadores.map((ie,re)=>i.jsxs("li",{className:"py-2 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-sm font-semibold text-slate-600",children:re+1}),i.jsx("span",{className:"font-medium",children:ie.nombre})]}),i.jsx("span",{className:"font-bold text-red-600",children:ie.count})]},ie.id))})]}),A==="todos"&&i.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900",children:[i.jsx("h3",{className:"font-bold mb-3",children:"Promedio de das con entrada por curso"}),i.jsx($o,{width:"100%",height:260,children:i.jsxs(Nf,{data:D.porCurso,margin:{left:8,right:8,top:8,bottom:8},children:[i.jsx(Mh,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),i.jsx(Rc,{dataKey:"curso",tick:{fill:"#64748b",fontSize:12}}),i.jsx(Lc,{allowDecimals:!1,tick:{fill:"#64748b",fontSize:12}}),i.jsx(Vo,{}),i.jsx(jd,{dataKey:"promedioDias",name:"Prom. das con entrada",fill:"#0ea5e9",radius:[6,6,0,0]})]})}),i.jsxs("div",{className:"text-xs text-slate-500 mt-2",children:["Entre 0 y ",k," das posibles"]})]})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:k},(ie,re)=>{const oe=new Date(M,d.getMonth(),re+1).getDay(),be=oe===0||oe===6;return i.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${be?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[i.jsx("div",{className:"font-semibold",children:Q[oe]}),i.jsx("div",{children:re+1})]},re)}),i.jsx("th",{className:"p-2 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-20 text-center",children:"Ingresos"}),i.jsx("th",{className:"p-2 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-20 text-center",children:"Salidas"}),i.jsx("th",{className:"p-2 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-24 text-center",title:`Marcajes fuera de ${_} m de la empresa`,children:"Desv."})]})}),i.jsx("tbody",{children:R.length>0?R.map(ie=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[i.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:ie.nombreCompleto}),Array.from({length:k},(re,ce)=>{var De;const oe=ce+1,be=(De=S.get(ie.email))==null?void 0:De.get(oe),X=new Date(M,d.getMonth(),ce+1),je=X.getDay()===0||X.getDay()===6;return ie.email==="alexis.robles@industrialderecoleta.cl"&&oe===2&&console.log(" Verificando da 2 para Alexis:",{email:ie.email,day:oe,hasDataForStudent:S.has(ie.email),studentDayRecords:be,allAttendanceKeys:Array.from(S.keys()),daysForStudent:S.get(ie.email)?Array.from(S.get(ie.email).keys()):[]}),i.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${je?"bg-slate-100 dark:bg-slate-700/50":""}`,children:i.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(()=>{var de,ae;if(!(be!=null&&be.entrada))return null;const ke=z.get(ie.id),ue=ke==null?void 0:ke.coordenadas;let we=null,Ae=!1;return ue&&((de=be.entrada.ubicacion)==null?void 0:de.latitud)!=null&&((ae=be.entrada.ubicacion)==null?void 0:ae.longitud)!=null&&(we=K(be.entrada.ubicacion.latitud,be.entrada.ubicacion.longitud,ue.lat,ue.lng),Ae=we>_),i.jsxs("div",{className:`group relative cursor-pointer ${Ae?"ring-2 ring-red-400 rounded-full":""}`,onClick:()=>{var fe;return q((fe=be.entrada)==null?void 0:fe.ubicacion)},children:[i.jsx(Vlt,{}),i.jsxs("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:[new Date(be.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"}),we!=null?`  ${Math.round(we)} m`:""]})]})})(),(()=>{var de,ae;if(!(be!=null&&be.salida))return null;const ke=z.get(ie.id),ue=ke==null?void 0:ke.coordenadas;let we=null,Ae=!1;return ue&&((de=be.salida.ubicacion)==null?void 0:de.latitud)!=null&&((ae=be.salida.ubicacion)==null?void 0:ae.longitud)!=null&&(we=K(be.salida.ubicacion.latitud,be.salida.ubicacion.longitud,ue.lat,ue.lng),Ae=we>_),i.jsxs("div",{className:`group relative cursor-pointer ${Ae?"ring-2 ring-red-400 rounded-full":""}`,onClick:()=>{var fe;return q((fe=be.salida)==null?void 0:fe.ubicacion)},children:[i.jsx($lt,{}),i.jsxs("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:[new Date(be.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"}),we!=null?`  ${Math.round(we)} m`:""]})]})})()]})},oe)}),i.jsx("td",{className:"p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle font-semibold",children:(()=>{const re=S.get(ie.email);if(!re)return 0;let ce=0;for(let oe=1;oe<=k;oe++){const be=re.get(oe);be&&be.entrada&&(ce+=1)}return ce})()}),i.jsx("td",{className:"p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle font-semibold",children:(()=>{const re=S.get(ie.email);if(!re)return 0;let ce=0;for(let oe=1;oe<=k;oe++){const be=re.get(oe);be&&be.salida&&(ce+=1)}return ce})()}),i.jsx("td",{className:"p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle",children:(()=>{const re=Z(ie);if(!re.hasData)return"";if(re.undetermined)return i.jsx("span",{className:"text-xs text-slate-500",title:"Sin empresa asignada o sin coordenadas",children:"N/D"});const ce=re.anyDeviation?"S":"No",oe=re.anyDeviation?"text-red-600":"text-emerald-600";return i.jsx("span",{className:`text-sm font-semibold ${oe}`,title:`Eventos fuera de umbral: ${re.count}
Distancia mxima: ${Math.round(re.max)} m`,children:ce})})()})]},ie.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:k+4,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la bsqueda."})})})]})})]})},OT="evaluaciones_formativas",PT="calificaciones_formativas",X9="trabajos_grupales_formativos",Glt="usuarios",Y9=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},qlt=(e,t,r)=>{const n=Bt(ht(ut,OT),sr("curso","==",e),sr("asignatura","==",t),Xt("fecha","asc"));return lr(n,a=>{r(a.docs.map(s=>Y9(s)))},a=>{console.error("Error al suscribirse a evaluaciones:",a),r([])})},Klt=async(e,t)=>{const r=Qp(ut),n=Wt(ht(ut,OT));r.set(n,{...e,fecha:xr.fromDate(new Date(e.fecha+"T00:00:00"))});const a=Wt(ut,PT,n.id);return r.set(a,t),await r.commit(),n.id},Wlt=async(e,t)=>{const r=Wt(ut,OT,e);await bi(r,t,{merge:!0})},Xlt=async e=>{const t=Qp(ut);t.delete(Wt(ut,OT,e)),t.delete(Wt(ut,PT,e)),await t.commit()},Ylt=(e,t)=>{if(e.length===0)return t({}),()=>{};const r=e.map(n=>{const a=Wt(ut,PT,n);return lr(a,s=>{s.exists()&&t({[n]:s.data()})})});return()=>r.forEach(n=>n())},Jlt=async(e,t)=>{const r=Wt(ut,PT,e);await bi(r,t,{merge:!0})},Zlt=(e,t,r)=>{const n=Bt(ht(ut,X9),sr("curso","==",e),sr("asignatura","==",t),Xt("fechaPresentacion","desc"));return lr(n,a=>{r(a.docs.map(s=>Y9(s)))},a=>{console.error("Error al suscribirse a trabajos grupales:",a),r([])})},ect=async e=>{const t={...e,fechaPresentacion:xr.fromDate(new Date(e.fechaPresentacion+"T00:00:00"))};await ln(ht(ut,X9),t)},tct=async(e,t)=>{const r=Wt(ut,X9,e);await bi(r,t,{merge:!0})},rct=e=>{const t=Bt(ht(ut,Glt));return lr(t,r=>{e(r.docs.map(n=>Y9(n)))},r=>{console.error("Error al suscribirse a usuarios:",r),e([])})},ime=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},Lb={"Lengua y Literatura":"",Matemtica:"",Ingls:"",Filosofa:"","Historia y Geografa":"","Educacin Ciudadana":"",Ciencias:"","Ciencias para la Ciudadana":"",Artes:"",Msica:"","Educacin Fsica":"",Orientacin:"","Mecnica Industrial":"","Mecnica Automotriz":"",Emprendimiento:"",Tecnologa:"","Pensamiento Lgico":"","Competencia Lectora":"",Default:""},ome=e=>e.startsWith("1")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:e.startsWith("2")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:e.startsWith("3")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:e.startsWith("4")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},nct=({cursos:e,onSelect:t})=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),e.length>0?i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:e.map(r=>{const n=ome(r);return i.jsxs("div",{className:"space-y-2 text-center",children:[i.jsxs("button",{onClick:()=>t(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[i.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),i.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[i.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),i.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),i.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):i.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[i.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),i.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),act=({curso:e,asignaturas:t,onSelect:r,onBack:n})=>{const a=ome(e);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[i.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:" Volver a Cursos"}),i.jsxs("div",{className:`p-2 rounded-md ${a.bg} ${a.text} font-bold`,children:["Libro de Clases: ",e]})]}),i.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),t.length>0?i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:t.map(s=>i.jsxs("button",{onClick:()=>r(s),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[i.jsx("span",{className:"text-2xl",children:Lb[s]||Lb.Default}),i.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:s})]},s))}):i.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[i.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),i.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},sct=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=w.useState([]),[o,l]=w.useState({}),[c,u]=w.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,f]=w.useState(null),[A,m]=w.useState(null),[g,x]=w.useState(!0),v=w.useMemo(()=>r.filter(k=>k.profile===It.ESTUDIANTE&&ime(k.curso||"")===e).map(k=>k.nombreCompleto).sort((k,B)=>k.localeCompare(B)),[r,e]);w.useEffect(()=>{x(!0);const k=qlt(e,t,B=>{s(B);const M=B.map(S=>S.id),P=Ylt(M,S=>{l(L=>({...L,...S}))});return x(!1),()=>P()});return()=>k()},[e,t]);const y=k=>{const{name:B,value:M}=k.target;d?f(P=>P?{...P,[B]:M}:null):u(P=>({...P,[B]:M}))},N=async k=>{if(k.preventDefault(),m(null),!c.nombreActividad.trim()){m("El nombre de la actividad es obligatorio.");return}const B={asignatura:t,curso:e,...c},M=v.reduce((P,S)=>(P[S]="trabajado",P),{});try{await Klt(B,M),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(P){console.error(P),m("No se pudo crear la evaluacin.")}},C=(k,B)=>{var L;const M=((L=o[k])==null?void 0:L[B])||"trabajado";let P;M==="trabajado"?P="no trabajado":M==="no trabajado"?P="ausente":P="trabajado";const S={...o,[k]:{...o[k]||{},[B]:P}};l(S),Jlt(k,{[B]:P}).catch(H=>{console.error("Error updating grade:",H)})},_=k=>f(k),j=async()=>{if(d)try{await Wlt(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),f(null)}catch(k){console.error(k),m("No se pudo guardar la edicin.")}},I=async k=>{if(window.confirm("Eliminar esta evaluacin y todas sus calificaciones?"))try{await Xlt(k)}catch(B){console.error(B),m("No se pudo eliminar la evaluacin.")}},T=w.useCallback(k=>{if(a.length===0)return"-";let B=0,M=0;return a.forEach(P=>{var L;const S=(L=o[P.id])==null?void 0:L[k];S==="trabajado"?(B+=7,M++):S==="no trabajado"&&(B+=2,M++)}),M===0?"-":(B/M).toFixed(1)},[o,a]);return g?i.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:" Volver a Asignaturas"}),i.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),i.jsxs("form",{onSubmit:N,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluacin"}),i.jsxs("div",{className:"w-full",children:[i.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),i.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:c.nombreActividad,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{className:"w-full",children:[i.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),i.jsx("input",{id:"fecha",type:"date",name:"fecha",value:c.fecha,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsx("div",{className:"w-full",children:i.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),A&&i.jsx("p",{className:"text-red-500 text-sm col-span-full",children:A})]}),i.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),a.map(k=>i.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===k.id?i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),i.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),i.jsx("button",{onClick:j,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:""})]}):i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("span",{className:"font-semibold",children:k.nombreActividad}),i.jsx("span",{className:"font-normal text-slate-500",children:k.fecha}),i.jsxs("div",{className:"flex gap-2 mt-1",children:[i.jsx("button",{onClick:()=>_(k),className:"text-blue-500 hover:text-blue-700",children:""}),i.jsx("button",{onClick:()=>I(k.id),className:"text-red-500 hover:text-red-700",children:""})]})]})},k.id)),i.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:v.map(k=>i.jsxs("tr",{children:[i.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:k}),a.map(B=>{var S;const M=(S=o[B.id])==null?void 0:S[k];let P;return M==="trabajado"?P=Lb[t]||Lb.Default:M==="no trabajado"?P="":M==="ausente"?P="A":P=Lb[t]||Lb.Default,i.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:i.jsx("button",{onClick:()=>C(B.id,k),className:`text-3xl transition-opacity duration-200 ${M==="trabajado"?"opacity-100":M==="no trabajado"?"opacity-40":M==="ausente"?"opacity-100 text-red-500 font-bold":"opacity-100"}`,children:P})},B.id)}),i.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:T(k)})]},k))})]})})]})},ict=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=w.useState([]),[o,l]=w.useState(null),[c,u]=w.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,f]=w.useState({}),[A,m]=w.useState(2),g=w.useMemo(()=>r.filter(_=>_.profile===It.ESTUDIANTE&&ime(_.curso||"")===e).sort((_,j)=>_.nombreCompleto.localeCompare(j.nombreCompleto)),[r,e]);w.useEffect(()=>{const _=Zlt(e,t,s);return()=>_()},[e,t]),w.useEffect(()=>{if(o){const _={};o.grupos.forEach(j=>{j.integrantes.forEach(I=>{_[I.nombre]={groupNumber:String(j.numero),role:I.rol||""}})}),f(_)}else f({})},[o]);const x=async _=>{if(_.preventDefault(),!c.nombre.trim())return;const j={curso:e,asignatura:t,nombreActividad:c.nombre,fechaPresentacion:c.fecha,grupos:[]};try{await ect(j),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(I){console.error(I),alert("No se pudo crear la actividad grupal.")}},v=async()=>{if(!o)return;const _=new Map;for(const I of g){const T=d[I.nombreCompleto];if(T&&T.groupNumber){const k=parseInt(T.groupNumber,10);isNaN(k)||(_.has(k)||_.set(k,[]),_.get(k).push({nombre:I.nombreCompleto,rol:T.role||""}))}}const j=Array.from(_.entries()).map(([I,T])=>({numero:I,integrantes:T})).sort((I,T)=>I.numero-T.numero);try{await tct(o.id,{grupos:j}),alert("Grupos guardados con xito.")}catch(I){console.error(I),alert("No se pudieron guardar los grupos.")}},y=()=>{if(A<2){alert("Debe haber al menos 2 grupos.");return}const _=[...g].sort(()=>Math.random()-.5),j={};_.forEach((I,T)=>{var k;j[I.nombreCompleto]={groupNumber:String(T%A+1),role:((k=d[I.nombreCompleto])==null?void 0:k.role)||""}}),f(j)},N=(_,j,I)=>{f(T=>({...T,[_]:{...T[_]||{groupNumber:"",role:""},[j]:I}}))},C=w.useMemo(()=>{const _=new Map;return Object.entries(d).forEach(([j,I])=>{I.groupNumber&&(_.has(I.groupNumber)||_.set(I.groupNumber,[]),_.get(I.groupNumber).push({nombre:j,rol:I.role}))}),Array.from(_.entries()).sort((j,I)=>parseInt(j[0])-parseInt(I[0]))},[d]);return o?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:" Volver a Actividades"}),i.jsx("h2",{className:"text-2xl font-bold",children:o.nombreActividad})]}),i.jsx("button",{onClick:v,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"md:col-span-1 space-y-4",children:[i.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignacin"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"number",value:A,onChange:_=>m(parseInt(_.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),i.jsx("button",{onClick:y,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),i.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Nmina del Curso"}),i.jsx("table",{className:"w-full text-sm",children:i.jsx("tbody",{children:g.map(_=>{var j;return i.jsxs("tr",{children:[i.jsx("td",{className:"py-1 pr-2",children:_.nombreCompleto}),i.jsx("td",{className:"py-1",children:i.jsx("input",{type:"number",value:((j=d[_.nombreCompleto])==null?void 0:j.groupNumber)||"",onChange:I=>N(_.nombreCompleto,"groupNumber",I.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N"})})]},_.id)})})})]})]}),i.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:C.map(([_,j])=>i.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[i.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",_]}),i.jsx("ul",{className:"space-y-2",children:j.map(I=>i.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[i.jsx("span",{className:"flex-1 truncate",children:I.nombre}),i.jsxs("select",{value:I.rol||"",onChange:T=>N(I.nombre,"role",T.target.value),className:"p-1 border rounded text-xs w-32",children:[i.jsx("option",{value:"",children:"-- Asignar Rol --"}),voe.map(T=>i.jsx("option",{value:T,children:T},T))]})]},I.nombre))})]},_))})]})]})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:" Volver a Asignaturas"}),i.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),i.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),i.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[i.jsx("input",{value:c.nombre,onChange:_=>u({...c,nombre:_.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),i.jsx("input",{type:"date",value:c.fecha,onChange:_=>u({...c,fecha:_.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),a.map(_=>i.jsxs("button",{onClick:()=>l(_),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[i.jsx("p",{className:"font-bold",children:_.nombreActividad}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",_.fechaPresentacion]})]},_.id))]})]})},oct=({currentUser:e})=>{const[t,r]=w.useState("calificaciones"),[n,a]=w.useState(null),[s,o]=w.useState(null),[l,c]=w.useState([]),[u,d]=w.useState(!0);w.useEffect(()=>{d(!0);const x=rct(v=>{c(v),d(!1)});return()=>x()},[]);const f=w.useMemo(()=>e.cursos||[],[e.cursos]),A=w.useMemo(()=>e.asignaturas||[],[e.asignaturas]),m=({tab:x,label:v})=>i.jsx("button",{onClick:()=>r(x),className:`${t===x?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:v}),g=()=>{if(u)return i.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!n)return i.jsx(nct,{cursos:f,onSelect:a});if(!s)return i.jsx(act,{curso:n,asignaturas:A,onSelect:o,onBack:()=>a(null)});if(t==="calificaciones")return i.jsx(sct,{curso:n,asignatura:s,allUsers:l,onBack:()=>o(null)});if(t==="grupos")return i.jsx(ict,{curso:n,asignatura:s,allUsers:l,onBack:()=>o(null)})};return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[i.jsx(m,{tab:"calificaciones",label:"Calificaciones"}),i.jsx(m,{tab:"grupos",label:"Trabajos Grupales"})]})}),i.jsx("div",{className:"mt-6",children:g()})]})};function lct(e){return e.map(t=>{const[r,n]=t.minuto.split("-").map(Number),a=t.accionesEstudiantes.length>0?t.accionesEstudiantes.split(" ").length/(n-r):0;return{minuto:r,participacion:Math.min(100,a*10)}})}function cct(e){const t=new Map,r={preguntas_abiertas:/(?:pregunt[a]|cu[a]l|qu[e]|c[o]mo|por qu[e]|explica)/gi,interrogacion_sucesiva:/(?:entonces|y luego|qu[e] m[a]s|profundiza|explica mejor)/gi,ejemplos_contextualizados:/(?:ejemplo|caso|situaci[o]n|contexto real|en la vida)/gi,feedback_inmediato:/(?:bien|correcto|exacto|muy bien|as[i] es|mejorar[i]a)/gi};for(const[n,a]of Object.entries(r)){const s=e.match(a);t.set(n,s?s.length:0)}return t}async function uct(e,t){var o;const r={stats:{docenteId:e.docenteInfo||"",curso:e.cursoInfo||"",asignatura:e.asignaturaInfo||"",conteo_observaciones:1,uso_preguntas_abiertas_pct:0,uso_interrogacion_sucesiva_pct:0,uso_ejemplos_contextualizados_pct:0,feedback_inmediato_pct:0,min_interaccion:0,min_explicacion:0,participacion_promedio:0},charts:{participacion_por_minuto:[],estrategias_frecuencia:[],indicadores_cumplimiento:[],nube_palabras:[]},summary:{fortalezas:[],mejoras:[],recomendaciones:[]},alerts:[],traza:{modelo:"gemini-2.5-flash-lite",version_prompt:"v1"}};if(e.detallesObservacion){r.charts.participacion_por_minuto=lct(e.detallesObservacion);let l=0,c=0;e.detallesObservacion.forEach(u=>{const[d,f]=u.minuto.split("-").map(Number),A=f-d;u.accionesEstudiantes.length>u.accionesDocente.length?l+=A:c+=A}),r.stats.min_interaccion=l,r.stats.min_explicacion=c}const n=new Map;let a=0;(o=e.detallesObservacion)==null||o.forEach(l=>{cct(l.accionesDocente).forEach((u,d)=>{n.set(d,(n.get(d)||0)+u)}),a+=l.accionesDocente.length}),n.forEach((l,c)=>{const u=a>0?l/a*100:0;switch(r.charts.estrategias_frecuencia.push({estrategia:c,porcentaje:Math.round(u*100)/100,conteo:l}),c){case"preguntas_abiertas":r.stats.uso_preguntas_abiertas_pct=u;break;case"interrogacion_sucesiva":r.stats.uso_interrogacion_sucesiva_pct=u;break;case"ejemplos_contextualizados":r.stats.uso_ejemplos_contextualizados_pct=u;break;case"feedback_inmediato":r.stats.feedback_inmediato_pct=u;break}}),r.charts.participacion_por_minuto.length>0&&(r.stats.participacion_promedio=r.charts.participacion_por_minuto.reduce((l,c)=>l+c.participacion,0)/r.charts.participacion_por_minuto.length);const s=[...n.entries()].sort(([,l],[,c])=>c-l);return r.summary.fortalezas=s.slice(0,3).map(([l])=>{switch(l){case"preguntas_abiertas":return"Uso efectivo de preguntas abiertas para promover el pensamiento crtico";case"interrogacion_sucesiva":return"Buena secuencia de preguntas para profundizar la comprensin";case"ejemplos_contextualizados":return"Excelente uso de ejemplos contextualizados";case"feedback_inmediato":return"Retroalimentacin inmediata y efectiva";default:return`Buen uso de ${l.replace(/_/g," ")}`}}),r.summary.mejoras=s.slice(-3).map(([l])=>{switch(l){case"preguntas_abiertas":return"Aumentar el uso de preguntas abiertas";case"interrogacion_sucesiva":return"Desarrollar ms secuencias de preguntas";case"ejemplos_contextualizados":return"Incorporar ms ejemplos contextualizados";case"feedback_inmediato":return"Proporcionar ms retroalimentacin inmediata";default:return`Incrementar el uso de ${l.replace(/_/g," ")}`}}),r.summary.recomendaciones=r.summary.mejoras.map(l=>l.includes("preguntas abiertas")?"Preparar 2-3 preguntas desafiantes por segmento de clase":l.includes("secuencias de preguntas")?'Implementar la tcnica de "Por qu?" en cascada':l.includes("ejemplos contextualizados")?"Vincular cada concepto con situaciones de la vida real":"Establecer puntos de verificacin cada 10-15 minutos"),r.stats.participacion_promedio<30&&r.alerts.push("Baja participacin estudiantil detectada"),r.stats.min_explicacion>r.stats.min_interaccion*2&&r.alerts.push("Alto tiempo de explicacin vs. interaccin"),r}const dct=({acompanamientos:e,ciclosOPR:t,standaloneCiclos:r})=>{const[n,a]=w.useState(null),[s,o]=w.useState(null),[l,c]=w.useState(!1),u=e.length,d=Object.values(t).reduce((y,N)=>y+N.length,0)+r.length,f=[...Object.values(t).flat(),...r],A=new Set([...e.map(y=>y.docente),...f.map(y=>y.docenteInfo)]).size,m=f.reduce((y,N)=>{const C=new Date(N.fecha).toLocaleDateString("es-ES",{month:"long"});return y[C]=(y[C]||0)+1,y},{}),g=f.reduce((y,N)=>(N.asignaturaInfo&&(y[N.asignaturaInfo]=(y[N.asignaturaInfo]||0)+1),y),{}),x=Object.entries(g).sort(([,y],[,N])=>N-y).slice(0,5);f.reduce((y,N)=>{if(!N.horaInicio||!N.horaTermino)return y;const C=new Date("2000/01/01 "+N.horaInicio),j=(new Date("2000/01/01 "+N.horaTermino).getTime()-C.getTime())/(1e3*60);return y+j},0)/f.length;const v=f.filter(y=>{var N,C,_;return((N=y.retroalimentacion)==null?void 0:N.exito)&&((C=y.retroalimentacion)==null?void 0:C.modelo)&&((_=y.retroalimentacion)==null?void 0:_.foco)}).length;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg",children:i.jsx(Ko,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Acompaamientos"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/50 rounded-lg",children:i.jsx(wu,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Ciclos OPR"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:d})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:i.jsx(qs,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docentes Observados"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:A})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:i.jsx(pa,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Retroalimentacin Completa"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:v})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(qo,{className:"w-5 h-5 text-indigo-600"}),"Ciclos por Mes"]}),i.jsx("div",{className:"space-y-2",children:Object.entries(m).map(([y,N])=>i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 capitalize",children:y}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:N})]}),i.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-2 bg-indigo-600 dark:bg-indigo-500 rounded-full",style:{width:`${N/d*100}%`}})})]})},y))})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(FN,{className:"w-5 h-5 text-purple-600"}),"Anlisis Inteligente"]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Seleccionar Ciclo OPR para Anlisis"}),i.jsxs("select",{className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",value:(s==null?void 0:s.id)||"",onChange:y=>{const N=f.find(C=>C.id===y.target.value);o(N||null)},children:[i.jsx("option",{value:"",children:"Seleccione un ciclo..."}),f.map(y=>i.jsxs("option",{value:y.id,children:[y.docenteInfo," - ",new Date(y.fecha).toLocaleDateString()]},y.id))]})]}),s&&!n&&i.jsx("button",{onClick:async()=>{c(!0);try{const y=f.filter(C=>C.docenteInfo===s.docenteInfo&&C.id!==s.id),N=await uct(s,y);a(N)}catch(y){console.error("Error al analizar ciclo:",y)}finally{c(!1)}},className:"w-full py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",disabled:l,children:l?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Analizando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(FN,{className:"w-4 h-4"}),"Analizar Ciclo"]})}),n&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[i.jsx("h4",{className:"text-sm font-medium text-purple-700 dark:text-purple-300 mb-2",children:"Participacin"}),i.jsxs("div",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:[n.stats.participacion_promedio.toFixed(1),"%"]})]}),i.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[i.jsx("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2",children:"Interaccin vs Explicacin"}),i.jsxs("div",{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:[n.stats.min_interaccion,"min / ",n.stats.min_explicacion,"min"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-medium text-green-700 dark:text-green-300 mb-2 flex items-center gap-1",children:[i.jsx(pa,{className:"w-4 h-4"})," Fortalezas"]}),i.jsx("ul",{className:"space-y-2",children:n.summary.fortalezas.map((y,N)=>i.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),y]},N))})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-medium text-amber-700 dark:text-amber-300 mb-2 flex items-center gap-1",children:[i.jsx(D1,{className:"w-4 h-4"})," reas de Mejora"]}),i.jsx("ul",{className:"space-y-2",children:n.summary.mejoras.map((y,N)=>i.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full"}),y]},N))})]})]}),n.alerts.length>0&&i.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[i.jsxs("h4",{className:"text-sm font-medium text-red-700 dark:text-red-300 mb-2 flex items-center gap-1",children:[i.jsx(Uc,{className:"w-4 h-4"})," Alertas"]}),i.jsx("ul",{className:"space-y-2",children:n.alerts.map((y,N)=>i.jsxs("li",{className:"text-sm text-red-600 dark:text-red-300 flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"}),y]},N))})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2 flex items-center gap-1",children:[i.jsx(M5,{className:"w-4 h-4"})," Recomendaciones"]}),i.jsx("ul",{className:"space-y-2",children:n.summary.recomendaciones.map((y,N)=>i.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),y]},N))})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(ps,{className:"w-5 h-5 text-amber-600"}),"Asignaturas Ms Observadas"]}),i.jsx("div",{className:"space-y-2",children:x.map(([y,N])=>i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:y}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:N})]}),i.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-2 bg-amber-600 dark:bg-amber-500 rounded-full",style:{width:`${N/Math.max(...Object.values(g))*100}%`}})})]})},y))})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(M5,{className:"w-5 h-5 text-blue-600"}),"ltimos Ciclos OPR"]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docente"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Fecha"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Asignatura"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estado"})]})}),i.jsx("tbody",{children:f.sort((y,N)=>new Date(N.fecha).getTime()-new Date(y.fecha).getTime()).slice(0,5).map(y=>{var N;return i.jsxs("tr",{className:"border-t dark:border-slate-700",children:[i.jsx("td",{className:"py-2 px-3 text-sm text-slate-900 dark:text-slate-300",children:y.docenteInfo}),i.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:new Date(y.fecha).toLocaleDateString()}),i.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:y.asignaturaInfo}),i.jsx("td",{className:"py-2 px-3",children:(N=y.retroalimentacion)!=null&&N.exito?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded",children:[i.jsx(pa,{className:"w-3 h-3"})," Completado"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded",children:[i.jsx(D1,{className:"w-3 h-3"})," En proceso"]})})]},y.id)})})]})})]})]})},lme=A3(),Qy="acompanamientos",Ff="ciclos_opr",Rf=e=>{if(!e)return new Date().toISOString().split("T")[0];if(typeof e=="string")return e.includes("T")?e.split("T")[0]:e;if(typeof(e==null?void 0:e.toDate)=="function")return e.toDate().toISOString().split("T")[0];try{return new Date(e).toISOString().split("T")[0]}catch{return new Date().toISOString().split("T")[0]}},cme=e=>{const t=e.lastIndexOf("."),r=t>0?e.substring(0,t):e,n=t>0?e.substring(t):"";return r.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"").substring(0,50)+n.toLowerCase()},fct=(e,t,r)=>{const n=(e||"general").replace(/[^a-zA-Z0-9-]/g,"_"),a=(t||"temp").replace(/[^a-zA-Z0-9-]/g,"_"),s=cme(r);return`videos_opr/${n}/${a}/${s}`},hct=async(e,t,r)=>{try{if(!HN.currentUser)throw new Error("Usuario no autenticado. Por favor, inicia sesin nuevamente.");if(!e)throw new Error("No se proporcion un archivo vlido.");const n=["video/mp4","video/quicktime","video/x-msvideo","video/x-m4v"],a=500*1024*1024;if(e.size>a)throw new Error(`El archivo es demasiado grande. Mximo permitido: ${(a/1024/1024).toFixed(0)}MB`);if(!n.includes(e.type))throw new Error("Tipo de archivo no permitido. Solo se aceptan MP4, MOV, AVI o M4V.");let s="";const o=(t||"").split("/");if(o.length>=4&&o[0]==="videos_opr"){const d=o[1],f=o[2],A=o.slice(3).join("/");s=fct(d,f,A)}else{const d=Date.now(),f=cme(e.name);s=`videos_opr/general/${d}_${f}`}const l=Od(lme,s),c={contentType:e.type,cacheControl:"public, max-age=31536000",customMetadata:{originalName:e.name,uploadedBy:HN.currentUser.uid,uploadDate:new Date().toISOString(),fileSize:String(e.size)}},u=RM(l,e,c);return new Promise((d,f)=>{let A=-1;u.on("state_changed",m=>{const g=m.bytesTransferred/m.totalBytes*100,x=Math.floor(g);r&&x!==A&&(A=x,r(x))},m=>{let g="Error desconocido durante la subida.";switch(m==null?void 0:m.code){case"storage/unauthorized":g="No tienes permisos para subir archivos. Verifica las reglas de Firebase Storage.";break;case"storage/canceled":g="La subida fue cancelada por el usuario.";break;case"storage/quota-exceeded":g="Se agot el espacio de almacenamiento disponible.";break;case"storage/retry-limit-exceeded":g="Se agotaron los reintentos. Verifica tu conexin a internet.";break;default:m!=null&&m.message&&(g=m.message);break}f(new Error(g))},async()=>{try{const m=await LA(u.snapshot.ref);d(m)}catch{f(new Error("El archivo se subi, pero no se pudo obtener la URL de descarga."))}})})}catch(n){const a=(n==null?void 0:n.message)||"Error inesperado al procesar el archivo.";throw new Error(a)}},J9=async e=>{try{const t=Od(lme,e),{items:r,prefixes:n}=await roe(t);await Promise.all(r.map(a=>h3(a))),await Promise.all(n.map(a=>J9(a.fullPath)))}catch{}},Act=async()=>{try{const e=Bt(ht(ut,Qy),Xt("fecha","desc"));return(await Ir(e)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:Rf(a==null?void 0:a.fecha)}}).sort((n,a)=>n.fecha<a.fecha?1:n.fecha>a.fecha?-1:0)}catch{throw new Error("No se pudieron cargar los acompaamientos")}},mct=async e=>{var t,r;try{const n=e.docenteEmailLower||((r=(t=HN.currentUser)==null?void 0:t.email)==null?void 0:r.toLowerCase())||void 0,a={...e,docenteEmailLower:n,fecha:xr.fromDate(new Date(e.fecha)),fechaCreacion:xr.now()},s=await ln(ht(ut,Qy),a);return{...e,id:s.id,fecha:Rf(e.fecha)}}catch{throw new Error("No se pudo crear el acompaamiento")}},kZ=async(e,t)=>{try{const r={...t,...t.fecha?{fecha:xr.fromDate(new Date(t.fecha))}:{},fechaModificacion:xr.now()};await qi(Wt(ut,Qy,e),r)}catch{throw new Error("No se pudo actualizar el acompaamiento")}},pct=async e=>{try{const t=Bt(ht(ut,Ff),sr("acompanamientoId","==",e)),r=await Ir(t),n=Qp(ut);r.forEach(a=>n.delete(Wt(ut,Ff,a.id))),await n.commit(),await J9(`videos_opr/${e}`),await ca(Wt(ut,Qy,e))}catch{throw new Error("No se pudo eliminar el acompaamiento y sus datos asociados")}},SZ=async e=>{var t;try{if(!(e!=null&&e.fecha))throw new Error("Falta fecha al crear ciclo OPR.");const r={...e,acompanamientoId:String(e.acompanamientoId||""),fecha:xr.fromDate(new Date(e.fecha)),fechaCreacion:xr.now(),...e.docenteEmailLower?{docenteEmailLower:e.docenteEmailLower}:{}};(t=e==null?void 0:e.seguimiento)!=null&&t.fecha&&(r.seguimiento={...e.seguimiento,fecha:xr.fromDate(new Date(e.seguimiento.fecha))});const n=await ln(ht(ut,Ff),r);return{...e,id:n.id,acompanamientoId:String(e.acompanamientoId||""),fecha:Rf(e.fecha)}}catch{throw new Error("No se pudo crear el ciclo OPR")}},gct=async(e,t)=>{var r;try{const n={...t};t.fecha&&(n.fecha=xr.fromDate(new Date(t.fecha))),(r=t.seguimiento)!=null&&r.fecha&&(n.seguimiento={...t.seguimiento,fecha:xr.fromDate(new Date(t.seguimiento.fecha))}),n.fechaModificacion=xr.now(),await qi(Wt(ut,Ff,e),n)}catch{throw new Error("No se pudo actualizar el ciclo OPR")}},aL=async e=>{try{const t=Bt(ht(ut,Ff),sr("acompanamientoId","==",e),Xt("fecha","desc"));return(await Ir(t)).docs.map(a=>{var l;const s=a.data(),o={id:a.id,...s,fecha:Rf(s==null?void 0:s.fecha)};return(l=s==null?void 0:s.seguimiento)!=null&&l.fecha&&(o.seguimiento={...s.seguimiento,fecha:Rf(s.seguimiento.fecha)}),o})}catch{throw new Error("No se pudieron cargar los ciclos OPR. Revisa el ndice compuesto (acompanamientoId + fecha).")}},ume=async()=>{try{const e=Bt(ht(ut,Ff),sr("acompanamientoId","==",""),Xt("fecha","desc"));return(await Ir(e)).docs.map(n=>{var o;const a=n.data(),s={id:n.id,...a,fecha:Rf(a==null?void 0:a.fecha)};return(o=a==null?void 0:a.seguimiento)!=null&&o.fecha&&(s.seguimiento={...a.seguimiento,fecha:Rf(a.seguimiento.fecha)}),s})}catch(e){throw console.error("Error fetching standalone OPR cycles:",e),new Error("No se pudieron cargar los ciclos OPR independientes.")}},xct=(e,t,r)=>{const n=Bt(ht(ut,Ff),sr("acompanamientoId","==",e),Xt("fecha","desc"));return lr(n,a=>{const s=a.docs.map(o=>{var u;const l=o.data(),c={id:o.id,...l,fecha:Rf(l==null?void 0:l.fecha)};return(u=l==null?void 0:l.seguimiento)!=null&&u.fecha&&(c.seguimiento={...l.seguimiento,fecha:Rf(l.seguimiento.fecha)}),c});t(s)},a=>r==null?void 0:r(a))},sL=async e=>{try{const t=await bA(Wt(ut,Ff,e));if(!t.exists())return;const r=t.data(),n=(r==null?void 0:r.acompanamientoId)||"general";await J9(`videos_opr/${n}/${e}`),await ca(Wt(ut,Ff,e))}catch{throw new Error("No se pudo eliminar el ciclo OPR")}},vct=async e=>{const t=e.id;if(!t)return{updated:0,total:0};const r=Bt(ht(ut,Ff),sr("acompanamientoId","==",t)),n=await Ir(r);if(n.empty)return{updated:0,total:0};const a=Qp(ut);let s=0;return n.forEach(o=>{const l=o.data(),c={};!l.docenteEmailLower&&e.docenteEmailLower&&(c.docenteEmailLower=e.docenteEmailLower),!l.docenteInfo&&e.docente&&(c.docenteInfo=e.docente),!l.docente&&e.docente&&(c.docente=e.docente),!l.cursoInfo&&e.curso&&(c.cursoInfo=e.curso),!l.asignaturaInfo&&e.asignatura&&(c.asignaturaInfo=e.asignatura),Object.keys(c).length>0&&(s++,a.update(Wt(ut,Ff,o.id),c))}),s>0&&await a.commit(),{updated:s,total:n.size}},_Z=async e=>{try{const t=Bt(ht(ut,Qy),sr("docente","==",e),Xt("fecha","desc"));return(await Ir(t)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:Rf(a==null?void 0:a.fecha)}})}catch{throw new Error("No se pudieron cargar los acompaamientos del docente")}},bct=async e=>{try{const t=Bt(ht(ut,Qy),sr("docenteEmailLower","==",e),Xt("fecha","desc"));return(await Ir(t)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:Rf(a==null?void 0:a.fecha)}})}catch{throw new Error("No se pudieron cargar los acompaamientos del docente")}},yct=async e=>{try{const t=Bt(ht(ut,"rubricas_personalizadas"),sr("docente","==",e)),r=await Ir(t);if(r.empty)return null;const n=r.docs[0].data();return(n==null?void 0:n.rubrica)??null}catch{return null}},wct=async()=>await fv(),Nct=({label:e,onFileChange:t,onLinkChange:r,uploadedUrl:n,onRemove:a,isUploading:s,accept:o="video/mp4,video/quicktime,video/avi,video/mov",error:l,progress:c=0,allowLink:u=!1})=>{const[d,f]=w.useState(!1),[A,m]=w.useState(!1),[g,x]=w.useState(""),v=`file-upload-${e.replace(/\s+/g,"-")}`,y=T=>{T.preventDefault(),T.stopPropagation(),T.type==="dragenter"||T.type==="dragover"?f(!0):T.type==="dragleave"&&f(!1)},N=T=>{if(T.preventDefault(),T.stopPropagation(),f(!1),T.dataTransfer.files&&T.dataTransfer.files[0]&&!s){const k=T.dataTransfer.files[0];_(k)}},C=T=>{if(T.target.files&&T.target.files[0]&&!s){const k=T.target.files[0];_(k)}},_=T=>{if(T.size>524288e3){alert(`El archivo es demasiado grande. Tamao mximo: ${524288e3/1024/1024}MB`);return}if(!["video/mp4","video/quicktime","video/avi","video/mov"].includes(T.type)){alert("Solo se aceptan archivos de video (MP4, MOV, AVI, QuickTime)");return}t(T)},j=()=>l?"bg-red-500":c===100?"bg-green-500":"bg-blue-500",I=()=>{if(!(!g||!r)){if(!g.startsWith("http://")&&!g.startsWith("https://")){alert("Por favor ingresa una URL vlida que comience con http:// o https://");return}r(g),m(!1),x("")}};return i.jsxs("div",{className:"w-full",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300",children:e}),u&&!n&&!s&&i.jsx("button",{type:"button",onClick:()=>m(!A),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400",children:A?"Cancelar":"Insertar enlace"})]}),A&&i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx("input",{type:"url",value:g,onChange:T=>x(T.target.value),placeholder:"https://...",className:"flex-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{type:"button",onClick:I,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Guardar"})]}),n?i.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-md bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700",children:[i.jsx(pa,{className:"w-5 h-5 text-green-600"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-700 dark:text-green-300 hover:underline font-medium",children:n.startsWith("http")?"Ver video enlazado":"Ver video cargado"}),i.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:n.startsWith("http")?"Enlace guardado exitosamente":"Video subido exitosamente"})]}),i.jsx("button",{type:"button",onClick:a,className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar video",children:i.jsx(Vn,{className:"w-4 h-4"})})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:`relative border-2 border-dashed rounded-lg transition-colors ${d?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":s?"border-amber-400 bg-amber-50 dark:bg-amber-900/20":l?"border-red-400 bg-red-50 dark:bg-red-900/20":"border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500"} ${s?"cursor-not-allowed":"cursor-pointer"}`,onDragEnter:y,onDragLeave:y,onDragOver:y,onDrop:N,onClick:()=>{var T;return!s&&((T=document.getElementById(v))==null?void 0:T.click())},children:[i.jsx("div",{className:"flex flex-col items-center justify-center p-6",children:s?i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:"Subiendo video..."}),i.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:[c.toFixed(1),"% completado"]})]}):l?i.jsxs("div",{className:"text-center",children:[i.jsx(Uc,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:"Error al subir"}),i.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Haz clic para intentar nuevamente"})]}):i.jsxs("div",{className:"text-center",children:[i.jsx(ev,{className:"h-8 w-8 text-slate-400 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:"Arrastra un video aqu"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"o haz clic para seleccionar"}),i.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-2",children:"MP4, MOV, AVI (mx. 500MB)"})]})}),i.jsx("input",{id:v,type:"file",onChange:C,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:s,accept:o,style:{display:"none"}})]}),s&&i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:i.jsx("div",{className:`${j()} h-2 rounded-full transition-all duration-300`,style:{width:`${c}%`}})}),l&&i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[i.jsx(Uc,{className:"w-4 h-4 text-red-500"}),i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:l})]})]})]})},Cct=({acompanamiento:e,cicloToEdit:t,onSave:r,onCancel:n,profesores:a})=>{const[s,o]=w.useState(!1),[l,c]=w.useState({}),[u,d]=w.useState({}),[f,A]=w.useState({}),[m,g]=w.useState({docente:e.docente||"",curso:e.curso||"",asignatura:e.asignatura||""}),x=w.useMemo(()=>({registroN:1,nombreCiclo:"",fecha:new Date().toISOString().split("T")[0],horaInicio:"",horaTermino:"",videoObservacionUrl:"",detallesObservacion:[{id:`row_${Date.now()}`,minuto:"0-5",accionesDocente:"",accionesEstudiantes:"",actividades:""}],retroalimentacion:{exito:"",foco:"",elementosIdentificar:""},planificacion:{preparacion:"",objetivo:"",actividad:"",tiempo:""},seguimiento:{fecha:"",curso:m.curso||"",profesor:m.docente||"",firma:""},acompanamientoId:e.id&&!e.id.startsWith("temp-")?e.id:""}),[e,m]),[v,y]=w.useState(t||x);w.useEffect(()=>{t&&(y(t),(t.acompanamientoId===""||!t.acompanamientoId)&&g({docente:t.docenteInfo||"",curso:t.cursoInfo||"",asignatura:t.asignaturaInfo||""}))},[t]);const N=S=>{const{name:L,value:H}=S.target,q=L.split(".");q.length>1?y(Q=>{const z=JSON.parse(JSON.stringify(Q));let K=z;for(let Z=0;Z<q.length-1;Z++)K=K[q[Z]];return K[q[q.length-1]]=H,z}):y(Q=>({...Q,[L]:H}))},C=(S,L,H)=>{y(q=>({...q,detallesObservacion:q.detallesObservacion.map(Q=>Q.id===S?{...Q,[L]:H}:Q)}))},_=()=>{const S=v.detallesObservacion[v.detallesObservacion.length-1],L=S&&parseInt(S.minuto.split("-")[1],10)||0,H=`${L+1}-${L+5}`;y(q=>({...q,detallesObservacion:[...q.detallesObservacion,{id:`row_${Date.now()}`,minuto:H,accionesDocente:"",accionesEstudiantes:"",actividades:""}]}))},j=S=>{y(L=>({...L,detallesObservacion:L.detallesObservacion.filter(H=>H.id!==S)}))},I=async(S,L)=>{A(H=>({...H,[S]:null})),c(H=>({...H,[S]:!0})),d(H=>({...H,[S]:0}));try{const H=Date.now(),q=L.name.toLowerCase().replace(/[^a-z0-9.]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),Q=e.id&&!e.id.startsWith("temp-")?e.id.replace(/[^a-zA-Z0-9-]/g,"_"):"general",z=v.id?v.id.replace(/[^a-zA-Z0-9-]/g,"_"):"temp",K=`videos_opr/${Q}/${z}/${H}_${q}`,Z=await hct(L,K,U=>{d(Y=>({...Y,[S]:U}))});T(S,Z),d(U=>({...U,[S]:100}))}catch(H){const q=(H==null?void 0:H.message)||"Error desconocido al subir el archivo";A(Q=>({...Q,[S]:q})),alert(`Error al subir el video: ${q}`)}finally{c(H=>({...H,[S]:!1})),setTimeout(()=>{d(H=>({...H,[S]:0}))},2e3)}},T=(S,L)=>{const H=S.split(".");H.length>1?y(q=>{const Q=JSON.parse(JSON.stringify(q));let z=Q;for(let K=0;K<H.length-1;K++)z=z[H[K]];return z[H[H.length-1]]=L,Q}):y(q=>({...q,[S]:L}))},k=S=>{const L=S.split(".");L.length>1?y(H=>{const q=JSON.parse(JSON.stringify(H));let Q=q;for(let z=0;z<L.length-1;z++)Q=Q[L[z]];return Q[L[L.length-1]]="",q}):y(H=>({...H,[S]:""})),A(H=>({...H,[S]:null})),d(H=>({...H,[S]:0}))},B=async()=>{o(!0);try{const S=oa.currentUser;if(!S){alert("No se pudo obtener el token de autenticacin. Inicia sesin nuevamente."),o(!1);return}const L=await S.getIdToken(),H=await fetch("/api/mejorarTextoOPR",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${L}`},body:JSON.stringify({formData:v})});if(!H.ok){const Q=await H.json();throw new Error(Q.error||"Error al mejorar el texto con IA")}const{retroalimentacion:q}=await H.json();y(Q=>({...Q,retroalimentacion:{...Q.retroalimentacion,...q}})),alert("Textos mejorados exitosamente con IA")}catch(S){console.error(S),alert(S.message||"No se pudo mejorar la redaccin. Intenta nuevamente.")}finally{o(!1)}},M=()=>{const S=new wr,L=S.internal.pageSize.getWidth(),H=S.internal.pageSize.getHeight(),q=15,Q="https://res.cloudinary.com/dwncmu1wu/image/upload/v1753209432/LIR_fpq2lc.png",z=15,K=15;let Z=25;const U=()=>{const re="Liceo Industrial de Recoleta";S.setFontSize(8),S.setFont("helvetica","normal"),S.text(re,L/2,H-10,{align:"center"}),S.setFontSize(10),S.setFont("helvetica","normal");const ce=H-25;S.line(q,ce,q+70,ce),S.text("Firma Docente",q+15,ce+5),S.line(L-q-70,ce,L-q,ce),S.text("Firma Observador",L-q-55,ce+5)},Y=()=>{try{S.addImage(Q,"PNG",L-K-10,10,K,z)}catch(re){console.error("Error al cargar el logo:",re)}};Y();const R=S.addPage;S.addPage=function(){return R.apply(this,arguments),Y(),U(),this};const D=re=>{Z>240&&(S.addPage(),Z=25),S.setFontSize(14),S.setFont("helvetica","bold"),S.text(re,q,Z),Z+=12};S.setFontSize(18),S.setFont("helvetica","bold"),S.text("Informe de Ciclo OPR",L/2,Z,{align:"center"}),Z+=18,D("1. Datos Generales");const W=[["Docente:",m.docente],["Curso:",m.curso],["Asignatura:",m.asignatura],["Fecha:",new Date(v.fecha).toLocaleDateString("es-CL")],["Hora:",`${v.horaInicio} - ${v.horaTermino}`],["Ciclo:",v.nombreCiclo]];Pi(S,{body:W,startY:Z,theme:"plain",styles:{fontSize:10,cellPadding:3,lineWidth:.1,lineColor:[220,220,220]},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:q,right:q}}),Z=S.lastAutoTable.finalY+15,D("2. Registro Detallado de Observacin");const J=v.detallesObservacion.map(re=>[re.minuto,re.accionesDocente,re.accionesEstudiantes,re.actividades]);Pi(S,{head:[["Minuto","Acciones del Docente","Acciones de Estudiantes","Actividades"]],body:J,startY:Z,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255,fontSize:10,cellPadding:4,halign:"center"},styles:{fontSize:9,cellPadding:4,overflow:"linebreak",lineWidth:.1},columnStyles:{0:{cellWidth:15,halign:"center"},1:{cellWidth:"auto"},2:{cellWidth:"auto"},3:{cellWidth:"auto"}},margin:{left:q,right:q},didDrawPage:re=>{var ce;Z=((ce=re.cursor)==null?void 0:ce.y)||25}}),Z=S.lastAutoTable.finalY+15,D("3. Retroalimentacin Docente");const le=[];if(v.retroalimentacion.exito&&le.push(["xito:",v.retroalimentacion.exito]),v.retroalimentacion.modelo&&le.push(["Modelo:",v.retroalimentacion.modelo]),v.retroalimentacion.foco&&le.push(["Foco:",v.retroalimentacion.foco]),v.retroalimentacion.elementosIdentificar&&le.push(["Elementos a Identificar:",v.retroalimentacion.elementosIdentificar]),le.length>0&&(Pi(S,{body:le,startY:Z,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:40},1:{cellWidth:"auto"}},margin:{left:q,right:q}}),Z=S.lastAutoTable.finalY+10),v.retroalimentacion.brecha){Z>240&&(S.addPage(),Z=40),S.setFontSize(12),S.setFont("helvetica","bold"),S.text("Anlisis de Brecha",q,Z),Z+=8;const re=[],ce=v.retroalimentacion.brecha.minutoInicial,oe=v.retroalimentacion.brecha.minutoFinal;ce&&oe&&re.push(["Minutos:",`${ce} a ${oe}`]),v.retroalimentacion.brecha.preguntas&&re.push(["Preguntas:",v.retroalimentacion.brecha.preguntas]),v.retroalimentacion.brecha.indicadores&&re.push(["Indicadores:",v.retroalimentacion.brecha.indicadores]),re.length>0&&(Pi(S,{body:re,startY:Z,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:q+5,right:q}}),Z=S.lastAutoTable.finalY+10)}D("4. Planificacin de Prctica");const ie=[];v.planificacion.preparacion&&ie.push(["Preparacin:",v.planificacion.preparacion]),v.planificacion.objetivo&&ie.push(["Objetivo:",v.planificacion.objetivo]),v.planificacion.actividad&&ie.push(["Actividad:",v.planificacion.actividad]),v.planificacion.tiempo&&ie.push(["Tiempo:",v.planificacion.tiempo]),ie.length>0&&(Pi(S,{body:ie,startY:Z,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:q,right:q}}),Z=S.lastAutoTable.finalY+10),U(),S.save(`Informe_OPR_${m.docente}_${v.fecha}.pdf`)},P=async S=>{if(S.preventDefault(),!m.docente||!m.curso||!m.asignatura){alert("Por favor, complete Docente, Curso y Asignatura");return}if(!v.nombreCiclo||!v.fecha){alert("Por favor, complete el nombre del ciclo y la fecha");return}const L={...v,docenteInfo:m.docente,cursoInfo:m.curso,asignaturaInfo:m.asignatura,seguimiento:{...v.seguimiento,profesor:m.docente,curso:m.curso}};try{await r(L)}catch(H){console.error("Error al guardar ciclo OPR:",H),alert("Error al guardar el ciclo OPR. Intenta nuevamente.")}};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg animate-fade-in",children:[(!e.id||e.id.startsWith("temp-"))&&i.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-slate-50 dark:bg-slate-900/30",children:[i.jsx("h4",{className:"text-lg font-semibold mb-3 text-slate-700 dark:text-slate-300",children:"Datos Bsicos del Ciclo OPR"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),i.jsxs("select",{value:m.docente,onChange:S=>g(L=>({...L,docente:S.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[i.jsx("option",{value:"",children:"Seleccione un docente"}),a.map(S=>i.jsx("option",{value:S,children:S},S))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),i.jsxs("select",{value:m.curso,onChange:S=>g(L=>({...L,curso:S.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[i.jsx("option",{value:"",children:"Seleccione un curso"}),ja.map(S=>i.jsx("option",{value:S,children:S},S))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsxs("select",{value:m.asignatura,onChange:S=>g(L=>({...L,asignatura:S.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[i.jsx("option",{value:"",children:"Seleccione una asignatura"}),ma.map(S=>i.jsx("option",{value:S,children:S},S))]})]})]})]}),i.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-blue-50 dark:bg-blue-900/30",children:[i.jsx("h4",{className:"text-lg font-semibold mb-2 text-blue-700 dark:text-blue-300",children:"Asistente IA del Ciclo OPR"}),i.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[i.jsxs("button",{type:"button",onClick:B,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:s,children:[i.jsx(x3,{className:"w-4 h-4"}),s?"Mejorando redaccin...":"Mejorar Redaccin del Ciclo"]}),i.jsxs("button",{type:"button",onClick:M,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[i.jsx(Pf,{className:"w-4 h-4"}),"Descargar Informe PDF"]})]}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Usa la IA para mejorar la redaccin de los textos ya escritos. Luego, descarga el informe completo en PDF."})]}),i.jsxs("form",{onSubmit:P,className:"space-y-8",children:[i.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:[t?"Editando":"Nuevo"," Ciclo OPR"]}),i.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[i.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[i.jsx(wu,{className:"w-5 h-5 text-amber-500"})," Datos Generales"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx("input",{type:"text",name:"nombreCiclo",value:v.nombreCiclo,onChange:N,placeholder:"Nombre o N del Ciclo",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),i.jsx("input",{type:"date",name:"fecha",value:v.fecha,onChange:N,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),i.jsx("input",{type:"number",name:"registroN",value:v.registroN,onChange:N,placeholder:"Registro de Observacin N",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",min:1}),i.jsx("input",{type:"time",name:"horaInicio",value:v.horaInicio,onChange:N,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("input",{type:"time",name:"horaTermino",value:v.horaTermino,onChange:N,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsx(Nct,{label:"Video de observacin de clase",onFileChange:S=>I("videoObservacionUrl",S),onLinkChange:S=>T("videoObservacionUrl",S),uploadedUrl:v.videoObservacionUrl,onRemove:()=>k("videoObservacionUrl"),isUploading:!!l.videoObservacionUrl,error:f.videoObservacionUrl,progress:u.videoObservacionUrl||0,allowLink:!0})]}),i.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[i.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[i.jsx(r0,{className:"w-5 h-5 text-blue-500"})," Registro Detallado de Observacin"]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b dark:border-slate-600",children:[i.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Minuto"}),i.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones del Docente"}),i.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones de Estudiantes"}),i.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Actividades"}),i.jsx("th",{className:"p-2"})]})}),i.jsx("tbody",{children:v.detallesObservacion.map(S=>i.jsxs("tr",{className:"border-b dark:border-slate-700",children:[i.jsx("td",{className:"p-2",children:i.jsx("input",{type:"text",value:S.minuto,onChange:L=>C(S.id,"minuto",L.target.value),className:"w-24 border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"0-5"})}),i.jsx("td",{className:"p-2",children:i.jsx("textarea",{value:S.accionesDocente,onChange:L=>C(S.id,"accionesDocente",L.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones del docente..."})}),i.jsx("td",{className:"p-2",children:i.jsx("textarea",{value:S.accionesEstudiantes,onChange:L=>C(S.id,"accionesEstudiantes",L.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones de estudiantes..."})}),i.jsx("td",{className:"p-2",children:i.jsx("textarea",{value:S.actividades,onChange:L=>C(S.id,"actividades",L.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir actividades realizadas..."})}),i.jsx("td",{className:"p-2",children:v.detallesObservacion.length>1&&i.jsx("button",{type:"button",onClick:()=>j(S.id),className:"text-red-500 hover:text-red-700 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar fila",children:i.jsx(Vn,{className:"w-4 h-4"})})})]},S.id))})]})}),i.jsxs("button",{type:"button",onClick:_,className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 flex items-center gap-1 transition-colors",children:[i.jsx(CF,{className:"w-4 h-4"})," Agregar Fila"]})]}),i.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[i.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[i.jsx(yy,{className:"w-5 h-5 text-green-600"})," Retroalimentacin Docente"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"xito"}),i.jsx("textarea",{name:"retroalimentacion.exito",value:v.retroalimentacion.exito,onChange:N,placeholder:"Describir los aspectos exitosos observados en la clase...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Modelo"}),i.jsx("textarea",{name:"retroalimentacion.modelo",value:v.retroalimentacion.modelo,onChange:N,placeholder:"Modelo pedaggico o metodologa observada...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Foco"}),i.jsx("textarea",{name:"retroalimentacion.foco",value:v.retroalimentacion.foco,onChange:N,placeholder:"Foco principal de la observacin y retroalimentacin...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Elementos a Identificar"}),i.jsx("textarea",{name:"retroalimentacion.elementosIdentificar",value:v.retroalimentacion.elementosIdentificar,onChange:N,placeholder:"Elementos especficos que el docente debe identificar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),i.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[i.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[i.jsx(HM,{className:"w-5 h-5 text-purple-600"})," Planificacin de Prctica y Seguimiento"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Preparacin"}),i.jsx("textarea",{name:"planificacion.preparacion",value:v.planificacion.preparacion,onChange:N,placeholder:"Aspectos de preparacin para la prxima prctica...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Objetivo"}),i.jsx("textarea",{name:"planificacion.objetivo",value:v.planificacion.objetivo,onChange:N,placeholder:"Objetivo especfico para la siguiente observacin...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Actividad"}),i.jsx("textarea",{name:"planificacion.actividad",value:v.planificacion.actividad,onChange:N,placeholder:"Actividades especficas a implementar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tiempo"}),i.jsx("input",{type:"text",name:"planificacion.tiempo",value:v.planificacion.tiempo,onChange:N,placeholder:"Tiempo estimado o cronograma...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{className:"p-4 border rounded-md dark:border-slate-600 bg-slate-50 dark:bg-slate-800/50 space-y-3",children:[i.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(qs,{className:"w-4 h-4 text-purple-500"}),"Seguimiento"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de seguimiento"}),i.jsx("input",{type:"date",name:"seguimiento.fecha",value:v.seguimiento.fecha,onChange:N,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Registrado por"}),i.jsx("input",{type:"text",name:"seguimiento.firma",value:v.seguimiento.firma,onChange:N,placeholder:"Nombre de quien registra el seguimiento...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-4 mt-8 pt-6 border-t dark:border-slate-700",children:[i.jsx("button",{type:"button",onClick:n,className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),i.jsxs("button",{type:"submit",className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-amber-400 transition-colors flex items-center gap-2",disabled:Object.values(l).some(Boolean),children:[Object.values(l).some(Boolean)&&i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Guardar Ciclo OPR"]})]})]})]})},Ect=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[a,s]=w.useState({}),[o,l]=w.useState(!0),[c,u]=w.useState(!0),[d,f]=w.useState(null),[A,m]=w.useState("list"),[g,x]=w.useState(null),[v,y]=w.useState(null),[N,C]=w.useState("general"),[_,j]=w.useState(!1),[I,T]=w.useState({}),[k,B]=w.useState([]),M=K2,P=w.useMemo(()=>({fecha:new Date().toISOString().split("T")[0],docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[S,L]=w.useState(P),H=w.useCallback(async()=>{l(!0),f(null);try{const re=await Act();t(re)}catch(re){f("No se pudieron cargar los registros de acompaamiento."),console.error(" Error al cargar acompaamientos:",re)}finally{l(!1)}},[]),q=w.useCallback(async()=>{u(!0);try{const ce=(await wct()).filter(X=>X.profile==="PROFESORADO").map(X=>({nombre:X.nombreCompleto,email:(X.email||"").toLowerCase()})),oe=ce.map(X=>X.nombre).sort(),be={};ce.forEach(X=>{X.nombre&&X.email&&(be[X.nombre]=X.email)}),n(oe),s(be)}catch(re){f("No se pudo cargar la lista de profesores."),console.error(" Error al cargar profesores:",re)}finally{u(!1)}},[]),Q=w.useCallback(async()=>{try{const re={};for(const ce of e)if(ce.id)try{const oe=await aL(ce.id);oe.length>0&&(re[ce.id]=oe)}catch(oe){console.error(`Error loading OPR cycles for ${ce.id}:`,oe)}try{const ce=await ume();B(ce)}catch(ce){console.error("Error loading standalone OPR cycles:",ce),B([])}T(re)}catch(re){console.error("Error fetching OPR cycles:",re)}},[e]);w.useEffect(()=>{H(),q()},[H,q]),w.useEffect(()=>{e.length>0&&Q()},[e,Q]);const z=(re,ce)=>{if(y(re),ce)L(ce),x(ce.id);else{const oe={id:"temp-"+Date.now(),fecha:re.fecha,docente:re.docenteInfo||"",curso:re.cursoInfo||"",asignatura:re.asignaturaInfo||"",rubricaResultados:{},planificacionFutura:"",createdAt:new Date().toISOString(),observacionesGenerales:"",retroalimentacionConsolidada:""};L(oe),x(null)}m("form"),C("opr"),f(null)},K=async()=>{if(!("docente"in S)||!S.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar la retroalimentacin.');return}j(!0),f(null);try{const re=oa.currentUser;if(!re){alert("No se pudo obtener el token de autenticacin. Inicia sesin nuevamente."),j(!1);return}const ce=await re.getIdToken(),oe=await fetch("/api/generarFeedbackAcompanamientoDocente",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ce}`},body:JSON.stringify({formData:S})});if(!oe.ok)throw new Error("Error al generar la retroalimentacin con IA");const{feedback:be}=await oe.json();L(X=>({...X,retroalimentacionConsolidada:be})),alert("Retroalimentacin generada exitosamente con IA.")}catch{f("No se pudo generar la retroalimentacin automtica."),alert("Error: No se pudo generar la retroalimentacin automtica.")}finally{j(!1)}},Z=async re=>{var ce;if(re.preventDefault(),!("docente"in S)||!S.docente||!S.curso||!S.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}f(null);try{const oe=(ce=a[S.docente])==null?void 0:ce.toLowerCase();if(g)await kZ(g,{...S,docenteEmailLower:oe}),alert("Acompaamiento actualizado correctamente!");else{const be=await mct({...S,docenteEmailLower:oe});x(be.id),L(be),alert("Acompaamiento guardado correctamente! Ahora puedes agregar Ciclos OPR.")}await H()}catch(oe){const be=(oe==null?void 0:oe.message)??"Error al guardar el registro de acompaamiento.";f(be),console.error(" Error al guardar:",oe),alert(`Error: ${be}`)}},U=()=>{L(P),x(null),y(null),m("form"),C("general"),f(null)},Y=re=>{L(re),x(re.id),y(null),m("form"),C("general"),f(null)},R=async re=>{if(window.confirm("Est seguro de que desea eliminar este registro? Esta accin no se puede deshacer."))try{await pct(re),await H(),alert("Registro eliminado exitosamente.")}catch(ce){const oe="No se pudo eliminar el registro.";f(oe),console.error(" Error al eliminar:",ce),alert(`Error: ${oe}`)}},D=(re,ce)=>{L(oe=>({...oe,rubricaResultados:{...oe.rubricaResultados||{},[re]:ce}}))},W=()=>{var re;if(!("docente"in S)||!S.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar el PDF.');return}try{const ce=new wr,oe=ce.internal.pageSize.getWidth(),be=ce.internal.pageSize.getHeight(),X=20,je=oe-X*2,De=(de,ae)=>ae+de>be-X,ke=()=>{const de=ce.getNumberOfPages();for(let ae=1;ae<=de;ae++)ce.setPage(ae),ce.setFontSize(9),ce.setTextColor(128),ce.text(`pg. ${ae} de ${de}`,oe-X,be-10,{align:"right"})};let ue=X;ce.setFontSize(16),ce.setFont("helvetica","bold"),ce.text("INFORME DE ACOMPAAMIENTO DOCENTE",oe/2,ue,{align:"center"}),ue+=15;const we=40;if(Pi(ce,{startY:ue,head:[],body:[["Docente:",S.docente],["Curso:",S.curso],["Asignatura:",S.asignatura],["Fecha:",new Date(S.fecha).toLocaleDateString("es-CL")],["Bloques:",S.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:4},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:120}},margin:{left:X,right:X}}),ue=ce.lastAutoTable.finalY+10,Object.keys(S.rubricaResultados||{}).length>0){ce.setFontSize(14),ce.setFont("helvetica","bold"),ce.text("Evaluacin por Indicadores",X,ue),ue+=10;const de=Object.entries(S.rubricaResultados).map(([ae,fe])=>{let ge;switch(fe){case 1:ge="Dbil";break;case 2:ge="Incipiente";break;case 3:ge="Satisfactorio";break;case 4:ge="Avanzado";break;default:ge="No evaluado"}return[ae,ge,fe]});Pi(ce,{startY:ue,head:[["Indicador","Nivel de Logro","Puntuacin"]],body:de,theme:"grid",styles:{fontSize:10,cellPadding:6,lineColor:[200,200,200],lineWidth:.1,valign:"middle"},headStyles:{fillColor:[41,128,185],textColor:255,fontSize:11,fontStyle:"bold",halign:"left"},columnStyles:{0:{cellWidth:100},1:{cellWidth:40},2:{cellWidth:30,halign:"center"}},alternateRowStyles:{fillColor:[245,247,250]},margin:{left:X,right:X}})}ce.addPage(),ue=X,ce.setFontSize(14),ce.setFont("helvetica","bold"),ce.text("Observaciones Generales y Sugerencias de Mejora",X,ue),ue+=15,S.observacionesGenerales&&(ce.setFontSize(12),ce.setFont("helvetica","bold"),ce.text("Fortalezas:",X,ue),ue+=10,ce.setFont("helvetica","normal"),ce.setFontSize(11),ce.splitTextToSize(S.observacionesGenerales,je).forEach(ae=>{De(7,ue)&&(ce.addPage(),ue=X),ce.text(ae,X,ue,{align:"justify"}),ue+=7}),ue+=10),S.retroalimentacionConsolidada&&(De(50,ue)&&(ce.addPage(),ue=X),ce.setFontSize(12),ce.setFont("helvetica","bold"),ce.text("Sugerencias de mejora:",X,ue),ue+=10,ce.setFont("helvetica","normal"),ce.setFontSize(11),ce.splitTextToSize(S.retroalimentacionConsolidada,je).forEach(ae=>{De(7,ue)&&(ce.addPage(),ue=X),ce.text(ae,X,ue,{align:"justify"}),ue+=7})),ke();const Ae=`Informe_Acompanamiento_${(re=S.docente)==null?void 0:re.replace(/\s+/g,"_")}_${S.curso}_${new Date().toISOString().split("T")[0]}.pdf`;ce.save(Ae)}catch(ce){console.error(" Error al generar PDF:",ce),alert("Error al generar el PDF. Intenta nuevamente.")}},J=re=>{const{name:ce,value:oe}=re.target;L(be=>({...be,[ce]:oe}))},le=()=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mdulo de Acompaamiento Docente"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:async()=>{var re;try{const ce=e.filter(be=>be.id);let oe=0;for(const be of ce){const X=(re=a[be.docente||""])==null?void 0:re.toLowerCase();X&&be.docenteEmailLower!==X&&(await kZ(be.id,{...be,docenteEmailLower:X}),oe++)}await H(),alert(`Reparacin completada: ${oe} acompaamiento(s) actualizados`)}catch(ce){console.error("Error reparando acompaamientos:",ce),alert("No se pudo reparar docenteEmailLower en algunos acompaamientos.")}},className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 flex items-center gap-2 transition-colors",title:"Backfill docenteEmailLower desde el nombre del docente",children:"Reparar Acompaamientos"}),i.jsxs("button",{onClick:()=>{U(),C("general")},className:"bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 flex items-center gap-2 transition-colors",children:[i.jsx(CF,{className:"w-5 h-5"})," Acompaamiento General"]}),i.jsxs("button",{onClick:()=>{L(P),x(null),y(null),m("form"),C("opr"),f(null)},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 flex items-center gap-2 transition-colors",children:[i.jsx(CF,{className:"w-5 h-5"})," Ciclo OPR Independiente"]})]})]}),d&&i.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Uc,{className:"w-5 h-5 text-red-500"}),i.jsx("p",{className:"text-red-700 dark:text-red-300",children:d})]})}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[i.jsx(Tl,{className:"w-6 h-6 text-amber-500"})," Acompaamientos Generales"]}),i.jsxs("div",{className:"space-y-3",children:[o&&i.jsxs("div",{className:"flex items-center justify-center p-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600"}),i.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando registros..."})]}),!o&&e.filter(re=>re.id).length>0?i.jsx("div",{className:"grid gap-3",children:e.filter(re=>re.id).map(re=>i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(qs,{className:"w-4 h-4 text-amber-500"}),i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:re.docente})]}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Curso:"})," ",re.curso," "," ",i.jsx("span",{className:"font-medium",children:"Asignatura:"})," ",re.asignatura]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(re.fecha).toLocaleDateString("es-CL")]}),re.bloques&&i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Bloques:"})," ",re.bloques]}),re.retroalimentacionConsolidada&&i.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[i.jsx(pa,{className:"w-3 h-3"}),"Con retroalimentacin IA"]}),I[re.id]&&I[re.id].length>0&&i.jsxs("p",{className:"text-blue-600 dark:text-blue-400 flex items-center gap-1",children:[i.jsx(wu,{className:"w-3 h-3"}),I[re.id].length," Ciclo",I[re.id].length>1?"s":""," OPR"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[i.jsx("button",{onClick:()=>{Y(re),C("general")},className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm px-3 py-1 rounded border border-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors",children:"Ver/Editar"}),i.jsx("button",{onClick:()=>{Y(re),C("opr")},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"+ Ciclo OPR"}),i.jsx("button",{onClick:async()=>{try{const ce=await vct(re);await Q(),alert(`Reparacin completada: ${ce.updated}/${ce.total} ciclos actualizados`)}catch(ce){console.error("Error reparando ciclos:",ce),alert("No se pudo ejecutar la reparacin de ciclos.")}},title:"Reparar visibilidad de ciclos (backfill)",className:"text-amber-700 hover:text-amber-900 dark:text-amber-400 dark:hover:text-amber-300 font-semibold text-sm px-3 py-1 rounded border border-amber-300 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:"Reparar Ciclos"}),i.jsx("button",{onClick:()=>R(re.id),title:"Eliminar registro",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:i.jsx(Vn,{className:"w-4 h-4"})})]})]}),I[re.id]&&I[re.id].length>0&&i.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-600",children:[i.jsxs("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2 flex items-center gap-1",children:[i.jsx(wu,{className:"w-4 h-4 text-blue-500"}),"Ciclos OPR Asociados"]}),i.jsx("div",{className:"space-y-2",children:I[re.id].map(ce=>i.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:ce.nombreCiclo||`Registro N ${ce.registroN}`}),i.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[new Date(ce.fecha).toLocaleDateString("es-CL"),ce.horaInicio&&ce.horaTermino&&i.jsxs("span",{children:["  ",ce.horaInicio," - ",ce.horaTermino]})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:()=>{const oe=e.find(be=>be.id===re.id);z(ce,oe)},className:"text-blue-600 hover:text-blue-800 text-xs px-2 py-1 rounded border border-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:"Editar"}),i.jsx("button",{onClick:async()=>{if(window.confirm("Seguro que desea eliminar este Ciclo OPR?"))try{await sL(ce.id),await Q(),alert("Ciclo OPR eliminado exitosamente")}catch(oe){console.error("Error deleting OPR cycle:",oe),alert("Error al eliminar el ciclo OPR")}},className:"text-red-600 hover:text-red-800 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",title:"Eliminar ciclo OPR",children:i.jsx(Vn,{className:"w-3 h-3"})})]})]},ce.id))})]})]},re.id))}):!o&&i.jsxs("div",{className:"text-center p-12 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[i.jsx(Ko,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium",children:"No hay acompaamientos generales registrados"}),i.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-sm mt-2",children:"Crea tu primer acompaamiento usando el botn superior"})]})]})]}),k.length>0&&i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[i.jsx(wu,{className:"w-6 h-6 text-blue-500"})," Ciclos OPR Independientes"]}),i.jsx("div",{className:"space-y-3",children:k.map(re=>i.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(wu,{className:"w-4 h-4 text-blue-500"}),i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:re.nombreCiclo||`Registro N ${re.registroN}`})]}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Docente:"})," ",re.docenteInfo||"No especificado"," "," ",i.jsx("span",{className:"font-medium",children:"Curso:"})," ",re.cursoInfo||"No especificado"]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(re.fecha).toLocaleDateString("es-CL"),re.horaInicio&&re.horaTermino&&i.jsxs("span",{children:["  ",re.horaInicio," - ",re.horaTermino]})]}),re.videoObservacionUrl&&i.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[i.jsx(pa,{className:"w-3 h-3"}),"Con video de observacin"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[i.jsx("button",{onClick:()=>{z(re)},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"Ver/Editar"}),i.jsx("button",{onClick:async()=>{if(window.confirm("Seguro que desea eliminar este Ciclo OPR?"))try{await sL(re.id),await Q(),alert("Ciclo OPR eliminado exitosamente")}catch(ce){console.error("Error deleting standalone OPR cycle:",ce),alert("Error al eliminar el ciclo OPR")}},title:"Eliminar ciclo OPR",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:i.jsx(Vn,{className:"w-4 h-4"})})]})]})},re.id))})]})]}),ie=()=>{const re=g?e.find(oe=>oe.id===g):null,ce={id:"temp-"+Date.now(),fecha:new Date().toISOString(),docente:"docente"in S&&S.docente||"",curso:"curso"in S&&S.curso||"",asignatura:"asignatura"in S&&S.asignatura||"",planificacionFutura:"",createdAt:new Date().toISOString(),rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""};return i.jsxs("div",{className:"animate-fade-in",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:N==="general"?g?"Editando Acompaamiento General":"Nuevo Acompaamiento General":v?"Editando Ciclo OPR":"Nuevo Ciclo OPR"}),i.jsx("button",{type:"button",onClick:()=>{m("list"),y(null)},className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex items-center gap-2 px-4 py-2 rounded-lg border hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:" Volver al listado"})]}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:i.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>C("general"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${N==="general"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Ko,{className:"w-4 h-4"}),"Acompaamiento General"]})}),i.jsx("button",{onClick:()=>C("opr"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${N==="opr"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(wu,{className:"w-4 h-4"}),"Ciclos OPR"]})}),i.jsx("button",{onClick:()=>C("dashboard"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${N==="dashboard"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Tl,{className:"w-4 h-4"}),"Dashboard"]})})]})}),d&&i.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Uc,{className:"w-5 h-5 text-red-500"}),i.jsx("p",{className:"text-red-700 dark:text-red-300",children:d})]})}),N==="dashboard"&&i.jsx("div",{className:"animate-fade-in",children:i.jsx(dct,{acompanamientos:e,ciclosOPR:I,standaloneCiclos:k})}),N==="general"&&i.jsxs("form",{onSubmit:Z,className:"space-y-8",children:[i.jsxs("div",{className:"p-4 border rounded-lg bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800",children:[i.jsxs("h4",{className:"text-lg font-semibold mb-3 text-green-700 dark:text-green-300 flex items-center gap-2",children:[i.jsx(q2,{className:"w-5 h-5"}),"Asistente IA - Informe General"]}),i.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[i.jsxs("button",{type:"button",onClick:K,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:_,children:[i.jsx(x3,{className:"w-4 h-4"}),_?"Generando...":"Generar Retroalimentacin con IA"]}),i.jsxs("button",{type:"button",onClick:W,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[i.jsx(Pf,{className:"w-4 h-4"}),"Crear Informe PDF"]})]}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Completa la observacin y rbrica, luego genera automticamente la retroalimentacin. Finalmente, crea el informe en PDF."}),"retroalimentacionConsolidada"in S&&S.retroalimentacionConsolidada&&i.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-slate-800 rounded-md shadow-sm border",children:[i.jsxs("h5",{className:"font-semibold text-sm mb-2 text-green-700 dark:text-green-300 flex items-center gap-2",children:[i.jsx(pa,{className:"w-4 h-4"}),"Retroalimentacin Consolidada Generada:"]}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 rounded p-3",children:i.jsx("textarea",{readOnly:!0,rows:8,value:S.retroalimentacionConsolidada,className:"w-full text-sm text-slate-700 dark:text-slate-300 bg-transparent border-none p-0 resize-none focus:ring-0"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-800/50 dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente *"}),i.jsxs("select",{name:"docente",value:"docente"in S?S.docente:"",onChange:J,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:c,children:[i.jsx("option",{value:"",children:c?"Cargando profesores...":"Seleccione un docente"}),r.map(oe=>i.jsx("option",{value:oe,children:oe},oe))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso *"}),i.jsxs("select",{name:"curso",value:"curso"in S?S.curso:"",onChange:J,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione un curso"}),ja.map(oe=>i.jsx("option",{value:oe,children:oe},oe))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura *"}),i.jsxs("select",{name:"asignatura",value:"asignatura"in S?S.asignatura:"",onChange:J,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione una asignatura"}),ma.map(oe=>i.jsx("option",{value:oe,children:oe},oe))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),i.jsx("input",{type:"text",name:"bloques",value:"bloques"in S?S.bloques:"",onChange:J,placeholder:"Ej: 3-4, 1-2",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Observaciones Generales"}),i.jsx("textarea",{name:"observacionesGenerales",value:"observacionesGenerales"in S?S.observacionesGenerales:"",onChange:J,rows:4,placeholder:"Ingrese sus observaciones sobre la clase, metodologa utilizada, participacin de estudiantes, recursos empleados, etc...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-lg font-semibold mb-4 text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(Tl,{className:"w-5 h-5 text-amber-500"}),"Pauta de Observacin - Rbrica de Evaluacin"]}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Haga clic en el nivel correspondiente para cada criterio observado durante la clase."}),i.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Dbil (1)"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:M.map(oe=>i.jsx(ft.Fragment,{children:oe.criteria.map((be,X)=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[X===0&&i.jsx("td",{rowSpan:oe.criteria.length,className:"px-4 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600 bg-slate-50 dark:bg-slate-800",children:oe.domain}),i.jsx("td",{className:"px-4 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:be.name}),be.levels.map((je,De)=>{const ke=De+1,ue="rubricaResultados"in S&&S.rubricaResultados[be.name]===ke,we=ue?"bg-amber-100 dark:bg-amber-900/30 border-amber-300 dark:border-amber-700":"hover:bg-amber-50 dark:hover:bg-slate-700";return i.jsx("td",{onClick:()=>D(be.name,ke),className:`px-4 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${we} ${ue?"ring-1 ring-amber-400":""}`,title:`Seleccionar nivel ${ke} para ${be.name}`,children:i.jsxs("div",{className:"text-xs leading-relaxed",children:[ue&&i.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[i.jsx(pa,{className:"w-3 h-3 text-amber-600"}),i.jsx("span",{className:"font-semibold text-amber-700 dark:text-amber-400",children:"Seleccionado"})]}),je]})},ke)})]},be.name))},oe.domain))})]})}),Object.keys(S.rubricaResultados||{}).length>0&&i.jsxs("div",{className:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:[i.jsxs("h5",{className:"font-semibold text-amber-800 dark:text-amber-300 mb-2 flex items-center gap-2",children:[i.jsx(Tl,{className:"w-4 h-4"}),"Resumen de Evaluacin (",Object.keys(S.rubricaResultados).length," criterios evaluados)"]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:Object.entries(S.rubricaResultados).map(([oe,be])=>i.jsxs("div",{className:"flex justify-between items-center py-1",children:[i.jsxs("span",{className:"text-slate-700 dark:text-slate-300 truncate pr-2",children:[oe,":"]}),i.jsxs("span",{className:`font-semibold px-2 py-1 rounded text-xs ${be===1?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":be===2?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":be===3?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:["Nivel ",be]})]},oe))})]})]}),i.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t dark:border-slate-700",children:[i.jsx("button",{type:"button",onClick:()=>m("list"),className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),i.jsxs("button",{type:"submit",className:"bg-amber-500 hover:bg-amber-600 disabled:bg-amber-400 text-white font-bold py-2 px-6 rounded-lg transition-colors flex items-center gap-2",disabled:_,children:[_&&i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),g?"Actualizar":"Guardar"," Acompaamiento"]})]})]}),N==="opr"&&i.jsx(Cct,{acompanamiento:re||ce,cicloToEdit:v,profesores:r,onSave:async oe=>{var be;try{const X=(re==null?void 0:re.id)||typeof oe.acompanamientoId=="string"&&oe.acompanamientoId||void 0,je=(re==null?void 0:re.docente)||oe.docenteInfo||"",De=(be=a[je])==null?void 0:be.toLowerCase();if(v&&v.id)await gct(v.id,{...oe,docenteEmailLower:De}),alert("Ciclo OPR actualizado exitosamente");else{if(!X||String(X).startsWith("temp-")){const ke={...oe,docenteEmailLower:De,acompanamientoId:""};await SZ(ke)}else{const ke={...oe,docenteEmailLower:De,acompanamientoId:String(X)};await SZ(ke)}alert("Ciclo OPR guardado exitosamente")}y(null),await H(),await Q(),m("list")}catch(X){console.error(" Error al guardar ciclo OPR:",X);const je=X.message||"Error desconocido al guardar el ciclo OPR";f(je),alert(`Error al guardar el ciclo OPR: ${je}`)}},onCancel:()=>{y(null),m("list")}})]})};return o||c?i.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Cargando mdulo de acompaamiento..."}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-500 text-sm mt-2",children:[o&&"Cargando registros...",c&&" Cargando profesores..."]})]})})}):i.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:A==="list"?le():ie()})})},FT="proyectos_interdisciplinarios",Z9="entregas_interdisciplinarias",jct="usuarios",eH=e=>{const t=e.data();return{id:e.id,...t}},kct=e=>({...e,contenidosPorAsignatura:Array.isArray(e==null?void 0:e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e==null?void 0:e.actividades)?e.actividades:[],fechasClave:Array.isArray(e==null?void 0:e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e==null?void 0:e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e==null?void 0:e.docentesResponsables)?e.docentesResponsables:[e==null?void 0:e.docentesResponsables].filter(Boolean)}),Sct=e=>{const t=Bt(ht(ut,FT),Xt("nombreProyecto","asc"));return lr(t,n=>{try{const a=n.docs.map(s=>kct(eH(s)));e(a)}catch(a){console.error("Error parseando planificaciones:",a),e([])}},n=>{console.error("Error al suscribirse a las planificaciones:",n),e([])})},_ct=async e=>{const t={...e,contenidosPorAsignatura:Array.isArray(e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e.actividades)?e.actividades:[],fechasClave:Array.isArray(e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e.docentesResponsables)?e.docentesResponsables:[e.docentesResponsables].filter(Boolean),createdAt:xr.now(),updatedAt:xr.now()};return(await ln(ht(ut,FT),t)).id},TZ=async(e,t)=>{const{id:r,...n}=t,a=Wt(ut,FT,e);await bi(a,{...n,contenidosPorAsignatura:Array.isArray(n==null?void 0:n.contenidosPorAsignatura)?n.contenidosPorAsignatura:(n==null?void 0:n.contenidosPorAsignatura)===void 0?void 0:[],actividades:Array.isArray(n==null?void 0:n.actividades)?n.actividades:(n==null?void 0:n.actividades)===void 0?void 0:[],fechasClave:Array.isArray(n==null?void 0:n.fechasClave)?n.fechasClave:(n==null?void 0:n.fechasClave)===void 0?void 0:[],tareas:Array.isArray(n==null?void 0:n.tareas)?n.tareas:(n==null?void 0:n.tareas)===void 0?void 0:[],docentesResponsables:Array.isArray(n==null?void 0:n.docentesResponsables)?n.docentesResponsables:(n==null?void 0:n.docentesResponsables)===void 0?void 0:[n==null?void 0:n.docentesResponsables].filter(Boolean),updatedAt:xr.now()},{merge:!0})},Tct=async e=>{const t=Wt(ut,FT,e),r=Bt(ht(ut,Z9),sr("planificacionId","==",e)),n=await Ir(r),a=Qp(ut);n.forEach(s=>a.delete(s.ref)),a.delete(t),await a.commit()},Bct=(e,t)=>{const r=Bt(ht(ut,Z9),sr("planificacionId","==",e));return lr(r,a=>{const s=a.docs.map(o=>eH(o));t(s)},a=>{console.error("Error al suscribirse a las entregas:",a),t([])})},Ict=async(e,t)=>{const r=Wt(ut,Z9,e);await bi(r,{feedbackProfesor:t,fechaFeedback:xr.fromDate(new Date)},{merge:!0})},dme=e=>{const t=Bt(ht(ut,jct));return lr(t,n=>{const a=n.docs.map(s=>eH(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},BO={},iL={Recordar:["Enumerar","Definir","Identificar","Nombrar","Reconocer","Reproducir"],Comprender:["Explicar","Interpretar","Resumir","Parafrasear","Ejemplificar","Clasificar"],Aplicar:["Ejecutar","Implementar","Usar","Demostrar","Operar","Programar"],Analizar:["Diferenciar","Organizar","Atribuir","Comparar","Deconstruir","Delinear"],Evaluar:["Comprobar","Criticar","Revisar","Formular hiptesis","Experimentar","Juzgar"],Crear:["Generar","Planificar","Producir","Disear","Construir","Idear"]},fN=({href:e})=>{if(!e)return i.jsx("span",{className:"text-slate-400",children:""});const t=e.startsWith("http")?e:`https://${e}`;return i.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[i.jsx(L5,{className:"w-4 h-4"}),i.jsx("span",{className:"truncate max-w-[180px] md:max-w-[260px]",children:e})]})},jg=({icon:e,label:t,children:r,aiButton:n,className:a=""})=>i.jsxs("div",{className:`bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 ${a}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg",children:e}),i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:t})]}),n]}),r]}),Dct=({planificaciones:e,onActivityUpdate:t})=>{const[r,n]=w.useState(null),a=w.useMemo(()=>e.map(c=>{const u=[];return(c.actividades||[]).forEach(d=>u.push({...d,planId:c.id,type:"activity"})),(c.fechasClave||[]).forEach(d=>u.push({id:d.id,planId:c.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:c.docentesResponsables.join(", "),asignaturaPrincipal:"Milestone",recursoUrl:d.recursoUrl})),u.sort((d,f)=>new Date(d.fechaInicio).getTime()-new Date(f.fechaInicio).getTime()),{plan:c,items:u}}),[e]),s=w.useCallback(c=>{if(c.type==="keyDate")return{text:"Fecha Clave",color:"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${c.fechaInicio}T00:00:00`),f=new Date(`${c.fechaFin}T00:00:00`);return f<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&f>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300"}},[]),o=({name:c})=>{const u=(c||"").split(" ").map(d=>d[0]).join("").toUpperCase();return i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 text-white flex items-center justify-center font-semibold text-sm ring-2 ring-white dark:ring-slate-800 shadow-sm",children:u.slice(0,2)})},l=({data:c,onClose:u,onSave:d})=>{const[f,A]=w.useState(c.activity),m=x=>A({...f,[x.target.name]:x.target.value}),g=()=>{d(c.planId,f),u()};return i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl p-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:i.jsx(X0,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Editar Actividad"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Nombre"}),i.jsx("input",{name:"nombre",value:f.nombre,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Responsables"}),i.jsx("input",{name:"responsables",value:f.responsables,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Inicio"}),i.jsx("input",{type:"date",name:"fechaInicio",value:f.fechaInicio,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Fin"}),i.jsx("input",{type:"date",name:"fechaFin",value:f.fechaFin,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Recurso (enlace)"}),i.jsx("input",{name:"recursoUrl",placeholder:"https://...",value:f.recursoUrl||"",onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[i.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 rounded-lg",children:"Cancelar"}),i.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Guardar"})]})]})})};return!a.length||a.every(c=>c.items.length===0)?i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Uc,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay actividades para mostrar"})]})}):i.jsxs("div",{className:"space-y-8",children:[a.map(({plan:c,items:u})=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/50 rounded-xl",children:i.jsx(Dc,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-200",children:c.nombreProyecto}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cronograma del proyecto"})]})]})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b-2 border-slate-200 dark:border-slate-700",children:[i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Tarea"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Estado"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Inicio"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Fin"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Recurso"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Asignado"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:u.map(d=>{const f=s(d),A=d.type==="activity";return i.jsxs("tr",{className:`${A?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>A&&n({planId:d.planId,activity:d}),children:[i.jsx("td",{className:"px-6 py-4 font-semibold",children:d.nombre}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`px-3 py-1 inline-flex text-sm font-semibold rounded-full ${f.color}`,children:f.text})}),i.jsx("td",{className:"px-6 py-4",children:d.fechaInicio}),i.jsx("td",{className:"px-6 py-4",children:d.fechaFin}),i.jsx("td",{className:"px-6 py-4",children:i.jsx(fN,{href:d.recursoUrl})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx(o,{name:d.responsables||"Sin asignar"})})]},d.id)})})]})})]},c.id)),r&&i.jsx(l,{data:r,onClose:()=>n(null),onSave:t})]})},Oct=({planificaciones:e,onBack:t})=>{const r=w.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;(f=d.contenidosPorAsignatura)==null||f.forEach(A=>{var m;(m=A.habilidades)==null||m.forEach(g=>{c[g]=(c[g]||0)+1,Object.entries(iL).forEach(([x,v])=>{v.includes(g)&&(u[x]=(u[x]||0)+1)})})})}),{habilidadesCount:c,categoriaCount:u}},[e]),n=w.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;d.asignaturas.forEach(A=>{u[A]=(u[A]||0)+1}),(f=d.contenidosPorAsignatura)==null||f.forEach(A=>{A.contenidos&&A.contenidos.toLowerCase().split(/[\s,.-]+/).filter(g=>g.length>3).filter(g=>!["para","con","por","las","los","una","del","que","este","esta","son","como","ms","desde","hasta","entre"].includes(g)).forEach(g=>{c[g]=(c[g]||0)+1})})}),{palabrasCount:c,asignaturasCount:u}},[e]),a=w.useMemo(()=>{const c=e.length,u=e.reduce((A,m)=>{var g;return A+(((g=m.actividades)==null?void 0:g.length)||0)},0),d=e.reduce((A,m)=>{var g;return A+(((g=m.tareas)==null?void 0:g.length)||0)},0),f=new Set(e.flatMap(A=>A.asignaturas)).size;return{totalProyectos:c,totalActividades:u,totalTareas:d,asignaturasUnicas:f}},[e]),s=({data:c,title:u})=>{const d=Object.entries(c);if(!d.length)return null;const f=d.sort((m,g)=>g[1]-m[1]).slice(0,20),A=Math.max(...f.map(([,m])=>m));return A?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:u}),i.jsx("div",{className:"flex flex-wrap gap-2 justify-center min-h-[100px]",children:f.map(([m,g])=>{const x=Math.max(.8,g/A*2),v=Math.max(.6,g/A);return i.jsx("span",{className:"inline-block px-3 py-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full font-semibold transition-transform hover:scale-110",style:{fontSize:`${x}rem`,opacity:v},title:`${m}: ${g} veces`,children:m},m)})})]}):null},o=({data:c})=>{const u=Object.values(c),d=u.length?Math.max(...u):0,f={Recordar:"bg-red-500",Comprender:"bg-orange-500",Aplicar:"bg-yellow-500",Analizar:"bg-green-500",Evaluar:"bg-blue-500",Crear:"bg-purple-500"};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/50 rounded-lg",children:i.jsx(FN,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Taxonoma de Bloom"})]}),i.jsx("div",{className:"space-y-4",children:Object.keys(iL).map(A=>{const m=c[A]||0,g=d>0?m/d*100:0,x=f[A]||"bg-slate-400";return i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:A}),i.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[m," habilidades"]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:i.jsx("div",{className:`h-3 rounded-full ${x} transition-all duration-500`,style:{width:`${g}%`}})})]},A)})})]})},l=({icon:c,title:u,value:d,description:f,color:A})=>i.jsxs("div",{className:`bg-gradient-to-br ${A} p-6 rounded-2xl shadow-lg text-white`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:c}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-bold",children:d}),i.jsx("div",{className:"text-white/80 text-sm",children:u})]})]}),i.jsx("p",{className:"text-white/90 text-sm",children:f})]});return i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-teal-600 rounded-xl",children:i.jsx(M5,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent",children:"Dashboard Analtico"})]}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Anlisis de habilidades y contenidos desarrollados"})]}),i.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[i.jsx(RN,{className:"w-4 h-4"})," Volver a Proyectos"]})]})}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(l,{icon:i.jsx(yA,{className:"w-8 h-8"}),title:"Proyectos",value:a.totalProyectos,description:"Proyectos interdisciplinarios creados",color:"from-blue-500 to-blue-600"}),i.jsx(l,{icon:i.jsx(R5e,{className:"w-8 h-8"}),title:"Actividades",value:a.totalActividades,description:"Actividades planificadas en total",color:"from-green-500 to-green-600"}),i.jsx(l,{icon:i.jsx(Ko,{className:"w-8 h-8"}),title:"Tareas",value:a.totalTareas,description:"Tareas asignadas a estudiantes",color:"from-purple-500 to-purple-600"}),i.jsx(l,{icon:i.jsx(ps,{className:"w-8 h-8"}),title:"Asignaturas",value:a.asignaturasUnicas,description:"Asignaturas involucradas",color:"from-orange-500 to-orange-600"})]}),i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[i.jsx(o,{data:r.categoriaCount}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:i.jsx(t1,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Distribucin de Asignaturas"})]}),i.jsx("div",{className:"space-y-3",children:Object.entries(n.asignaturasCount).sort(([,c],[,u])=>u-c).map(([c,u])=>{const d=Math.max(...Object.values(n.asignaturasCount)),f=d>0?u/d*100:0;return i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:c}),i.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[u," proyecto",u!==1?"s":""]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:i.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 transition-all duration-500",style:{width:`${f}%`}})})]},c)})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[i.jsx(s,{data:n.palabrasCount,title:"Contenidos Ms Frecuentes"}),i.jsx(s,{data:r.habilidadesCount,title:"Habilidades Ms Desarrolladas"})]})]})},Pct=({plan:e,onBack:t,availableTeachers:r})=>{var g,x;const[n,a]=w.useState([]),[s,o]=w.useState([]),[l,c]=w.useState(((g=e.tareas)==null?void 0:g[0])||null),[u,d]=w.useState(null);w.useEffect(()=>{const v=dme(a),y=Bct(e.id,o);return()=>{v(),y()}},[e.id]);const f=w.useMemo(()=>n.filter(v=>v.profile===It.ESTUDIANTE&&e.cursos.includes(v.curso||"")).sort((v,y)=>(v.nombreCompleto||"").localeCompare(y.nombreCompleto||"")),[n,e.cursos]),A=async v=>{d(v.id);{alert("La API Key de Gemini no est configurada."),d(null);return}},m=v=>v.map(y=>{var N;return((N=r.find(C=>C.id===y))==null?void 0:N.nombreCompleto)||y}).join(", ");return l?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Entregas de Tareas"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:e.nombreProyecto}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:["Profesores: ",m(e.docentesResponsables)]})]}),i.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[i.jsx(RN,{className:"w-4 h-4"})," Volver a Proyectos"]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Seleccionar Tarea:"}),i.jsx("select",{value:l.id,onChange:v=>{var y;return c(((y=e.tareas)==null?void 0:y.find(N=>N.id===v.target.value))||null)},className:"w-full sm:w-auto p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:(x=e.tareas)==null?void 0:x.map(v=>i.jsxs("option",{value:v.id,children:["Tarea ",v.numero,": ",v.instrucciones]},v.id))})]}),i.jsx("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:f.map(v=>{const y=s.find(N=>N.tareaId===l.id&&N.estudianteId===v.id);return i.jsxs("div",{className:"p-6 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:(v.nombreCompleto||"NA").split(" ").map(N=>N[0]).join("").toUpperCase().slice(0,2)}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:v.nombreCompleto}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:v.curso})]})]}),i.jsx("div",{className:"flex items-center gap-2",children:y!=null&&y.completada?i.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 rounded-full text-sm font-semibold",children:[i.jsx(GC,{className:"w-4 h-4"})," Entregado"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-300 rounded-full text-sm font-semibold",children:[i.jsx(Uc,{className:"w-4 h-4"})," Pendiente"]})})]}),y?i.jsxs("div",{className:"space-y-4",children:[y.observacionesEstudiante&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Comentario del estudiante:"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 bg-white dark:bg-slate-800 p-3 rounded-md border border-slate-200 dark:border-slate-600",children:y.observacionesEstudiante})]}),y.enlaceUrl&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Enlace entregado:"}),i.jsx(fN,{href:y.enlaceUrl})]}),y.archivoAdjunto&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Archivo adjunto:"}),i.jsxs("a",{href:y.archivoAdjunto.url,download:y.archivoAdjunto.nombre,className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium",children:[i.jsx(Pf,{className:"w-4 h-4"})," ",y.archivoAdjunto.nombre]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Retroalimentacin del profesor:"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("textarea",{placeholder:"Escribir retroalimentacin...",defaultValue:y.feedbackProfesor||"",onBlur:N=>Ict(y.id,N.target.value),rows:3,className:"flex-1 p-3 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm resize-none"},y.id),i.jsx("button",{onClick:()=>A(y),disabled:u===y.id,className:"p-3 rounded-md bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar Feedback con IA",children:u===y.id?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):i.jsx(lx,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})]})]})]}):i.jsxs("div",{className:"text-center py-6",children:[i.jsx(Uc,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"El estudiante an no ha realizado la entrega"})]})]},v.id)})})]}):i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Uc,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Este proyecto no tiene tareas asignadas"}),i.jsxs("button",{onClick:t,className:"mt-4 inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold",children:[i.jsx(RN,{className:"w-4 h-4"})," Volver a Proyectos"]})]})})},Fct=({descripcion:e,asignaturas:t,docentes:r,onObjetivos:n,onIndicadores:a,onEstructura:s,availableTeachers:o})=>{const[l,c]=w.useState(null),u=BO==null?void 0:BO.VITE_GEMINI_API_KEY,d=A=>A.map(m=>{var g;return((g=o.find(x=>x.id===m))==null?void 0:g.nombreCompleto)||m}).join(", "),f=async A=>{var m,g,x;if(!u){alert("La API Key de Gemini no est configurada.");return}if(!e.trim()){alert("Ingrese una descripcin del proyecto.");return}c(A);try{const y=new r_(u).getGenerativeModel({model:"gemini-1.5-flash-latest"});if(A==="obj"){const N=`Genera 3 a 5 objetivos de aprendizaje claros y medibles.
Descripcin: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,C=await y.generateContent(N);n(C.response.text().replace(/(\*\*|\*)/g,""))}else if(A==="ind"){const N=`Genera 5 a 7 indicadores de logro observables.
Descripcin: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,C=await y.generateContent(N);a(C.response.text().replace(/(\*\*|\*)/g,""))}else{const N=`Devuelve SOLO un JSON vlido (sin backticks) con claves: actividades, fechasClave y tareas para un proyecto escolar.
Descripcin: "${e}"
Docentes responsables: "${d(r)}"
Asignaturas: "${t.join(", ")}"
Estructura:
- actividades: 3 a 5 objetos { "nombre", "fechaInicio" (YYYY-MM-DD), "fechaFin" (YYYY-MM-DD), "responsables", "recursoUrl" }
- fechasClave: 2 a 3 objetos { "nombre", "fecha" (YYYY-MM-DD), "recursoUrl" }
- tareas: 2 a 3 objetos { "instrucciones", "fechaEntrega" (YYYY-MM-DD), "recursoUrl" }`,_=(await y.generateContent(N)).response.text().replace(/^```json\s*|```\s*$/g,""),j=JSON.parse(_);s({actividades:(m=j.actividades)==null?void 0:m.map(I=>({...I,id:crypto.randomUUID()})),fechasClave:(g=j.fechasClave)==null?void 0:g.map(I=>({id:crypto.randomUUID(),nombre:I.nombre,fecha:I.fecha,recursoUrl:I.recursoUrl})),tareas:(x=j.tareas)==null?void 0:x.map((I,T)=>({...I,id:crypto.randomUUID(),numero:T+1}))})}}catch(v){console.error(v),alert("No se pudo completar la generacin con IA.")}finally{c(null)}};return i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>f("obj"),disabled:l!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar objetivos con IA",children:l==="obj"?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):i.jsx(lx,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),i.jsx("button",{type:"button",onClick:()=>f("ind"),disabled:l!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar indicadores con IA",children:l==="ind"?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):i.jsx(lx,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),i.jsx("button",{type:"button",onClick:()=>f("est"),disabled:l!==null,className:"inline-flex items-center gap-2 bg-gradient-to-r from-sky-500 to-blue-600 text-white font-semibold py-2 px-3 rounded-lg disabled:from-slate-400 disabled:to-slate-500 disabled:cursor-not-allowed hover:from-sky-600 hover:to-blue-700 transition-all duration-200 shadow-lg",children:l==="est"?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})," ",i.jsx("span",{children:"Generando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(lx,{className:"w-4 h-4"})," ",i.jsx("span",{children:"Estructura IA"})]})})]})},Rct=({initialPlan:e,onSave:t,onCancel:r,availableTeachers:n})=>{const[a,s]=w.useState(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[o,l]=w.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""}),[c,u]=w.useState(null),[d,f]=w.useState({nombre:"",fecha:"",recursoUrl:""}),[A,m]=w.useState(null),[g,x]=w.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[v,y]=w.useState(null);w.useEffect(()=>{s(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[e]);const N=z=>s(K=>({...K,[z.target.name]:z.target.value})),C=z=>{s(K=>{const Z=K.asignaturas,U=Z.includes(z)?Z.filter(R=>R!==z):[...Z,z];let Y=K.contenidosPorAsignatura;return U.includes(z)&&!Z.includes(z)&&(Y=[...Y,{asignatura:z,contenidos:"",habilidades:[]}]),!U.includes(z)&&Z.includes(z)&&(Y=Y.filter(R=>R.asignatura!==z)),{...K,asignaturas:U,contenidosPorAsignatura:Y}})},_=z=>s(K=>({...K,cursos:K.cursos.includes(z)?K.cursos.filter(Z=>Z!==z):[...K.cursos,z]})),j=z=>s(K=>({...K,docentesResponsables:K.docentesResponsables.includes(z)?K.docentesResponsables.filter(Z=>Z!==z):[...K.docentesResponsables,z]})),I=(z,K,Z)=>s(U=>({...U,contenidosPorAsignatura:U.contenidosPorAsignatura.map(Y=>Y.asignatura===z?{...Y,[K]:Z}:Y)})),T=(z,K)=>s(Z=>({...Z,contenidosPorAsignatura:Z.contenidosPorAsignatura.map(U=>U.asignatura===z?{...U,habilidades:U.habilidades.includes(K)?U.habilidades.filter(Y=>Y!==K):[...U.habilidades,K]}:U)})),k=()=>{if(!o.nombre||!o.fechaInicio||!o.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}c?(s(z=>({...z,actividades:z.actividades.map(K=>K.id===c?{...o,id:c}:K)})),u(null)):s(z=>({...z,actividades:[...z.actividades||[],{...o,id:crypto.randomUUID()}]})),l({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""})},B=z=>{u(z.id),l(z)},M=z=>{window.confirm("Eliminar esta actividad?")&&s(K=>({...K,actividades:K.actividades.filter(Z=>Z.id!==z)}))},P=()=>{if(!d.nombre||!d.fecha){alert("Nombre y fecha son obligatorios para el hito.");return}A?(s(z=>({...z,fechasClave:z.fechasClave.map(K=>K.id===A?{...d,id:A}:K)})),m(null)):s(z=>({...z,fechasClave:[...z.fechasClave||[],{...d,id:crypto.randomUUID()}]})),f({nombre:"",fecha:"",recursoUrl:""})},S=z=>{m(z.id),f(z)},L=z=>{window.confirm("Eliminar este hito?")&&s(K=>({...K,fechasClave:K.fechasClave.filter(Z=>Z.id!==z)}))},H=()=>{var z,K;if(!g.instrucciones||!g.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}if(v){const Z={...g,id:v,numero:((z=a.tareas.find(U=>U.id===v))==null?void 0:z.numero)||0};s(U=>({...U,tareas:U.tareas.map(Y=>Y.id===v?Z:Y)})),y(null)}else{const Z={id:crypto.randomUUID(),numero:(((K=a.tareas)==null?void 0:K.length)||0)+1,...g};s(U=>({...U,tareas:[...U.tareas||[],Z]}))}x({instrucciones:"",fechaEntrega:"",recursoUrl:""})},q=z=>{y(z.id),x({instrucciones:z.instrucciones,fechaEntrega:z.fechaEntrega,recursoUrl:z.recursoUrl||""})},Q=z=>{window.confirm("Eliminar esta tarea?")&&s(K=>({...K,tareas:K.tareas.filter(Z=>Z.id!==z)}))};return i.jsxs("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl",children:i.jsx(yA,{className:"w-10 h-10 text-white"})}),i.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:e?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})]}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Disee experiencias de aprendizaje colaborativo e innovador"})]}),i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsx(jg,{icon:i.jsx(Ko,{className:"w-6 h-6 text-slate-600"}),label:"Informacin del Proyecto",aiButton:i.jsx(Fct,{descripcion:a.descripcionProyecto,asignaturas:a.asignaturas,docentes:a.docentesResponsables,availableTeachers:[],onObjetivos:z=>s(K=>({...K,objetivos:z})),onIndicadores:z=>s(K=>({...K,indicadoresLogro:z})),onEstructura:z=>s(K=>{var Z,U,Y;return{...K,actividades:(Z=z.actividades)!=null&&Z.length?z.actividades:K.actividades,fechasClave:(U=z.fechasClave)!=null&&U.length?z.fechasClave:K.fechasClave,tareas:(Y=z.tareas)!=null&&Y.length?z.tareas:K.tareas}})}),children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Nombre del Proyecto"}),i.jsx("input",{name:"nombreProyecto",value:a.nombreProyecto,onChange:N,placeholder:"Ingrese el nombre del proyecto...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-lg font-semibold"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Descripcin del Proyecto"}),i.jsx("textarea",{name:"descripcionProyecto",value:a.descripcionProyecto,onChange:N,placeholder:"Detalle metodologa, producto final y propsito...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})]})]})}),i.jsx(jg,{icon:i.jsx(qs,{className:"w-6 h-6 text-slate-600"}),label:"Profesores Responsables",children:i.jsx("div",{className:"space-y-3",children:i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-60 overflow-y-auto",children:n.map(z=>i.jsx("button",{type:"button",onClick:()=>j(z.id),className:`p-3 rounded-lg text-left transition-all duration-200 ${a.docentesResponsables.includes(z.id)?"bg-blue-100 border-2 border-blue-500 text-blue-800 dark:bg-blue-900/50 dark:border-blue-400 dark:text-blue-300":"bg-slate-50 border-2 border-slate-200 hover:border-slate-300 dark:bg-slate-700 dark:border-slate-600 dark:hover:border-slate-500"}`,children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm ${a.docentesResponsables.includes(z.id)?"bg-blue-500 text-white":"bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-300"}`,children:i.jsx(cx,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-sm",children:z.nombreCompleto}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:z.email})]})]})},z.id))})})}),i.jsx(jg,{icon:i.jsx(e1,{className:"w-6 h-6 text-slate-600"}),label:"Cursos Participantes",children:i.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3",children:ja.map(z=>i.jsx("button",{type:"button",onClick:()=>_(z),className:`p-3 rounded-lg text-center text-sm font-semibold transition-all duration-200 ${a.cursos.includes(z)?"bg-amber-500 text-white shadow-lg scale-105":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:z},z))})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx(jg,{icon:i.jsx(ps,{className:"w-6 h-6 text-slate-600"}),label:"Asignaturas y Contenidos",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Seleccionar Asignaturas:"}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:ma.map(z=>i.jsx("button",{type:"button",onClick:()=>C(z),className:`p-2 rounded-lg text-left text-sm font-medium transition-all duration-200 ${a.asignaturas.includes(z)?"bg-green-500 text-white shadow-md":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:z},z))})]}),a.contenidosPorAsignatura.length>0&&i.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Contenidos y Habilidades por Asignatura:"}),a.contenidosPorAsignatura.map(z=>i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("h5",{className:"font-bold text-slate-800 dark:text-slate-200 mb-3 flex items-center gap-2",children:[i.jsx(ps,{className:"w-4 h-4"})," ",z.asignatura]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Contenidos a trabajar:"}),i.jsx("textarea",{value:z.contenidos,onChange:K=>I(z.asignatura,"contenidos",K.target.value),placeholder:`Detalle los contenidos especficos de ${z.asignatura}...`,className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm min-h-[80px] resize-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Habilidades segn Taxonoma de Bloom:"}),i.jsx("div",{className:"space-y-2",children:Object.entries(iL).map(([K,Z])=>i.jsxs("div",{className:"border border-slate-200 dark:border-slate-600 rounded-md p-2",children:[i.jsxs("h6",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 mb-1",children:[K,":"]}),i.jsx("div",{className:"flex flex-wrap gap-1",children:Z.map(U=>i.jsx("button",{type:"button",onClick:()=>T(z.asignatura,U),className:`px-2 py-1 rounded-md text-xs font-medium transition-colors ${z.habilidades.includes(U)?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-500"}`,children:U},U))})]},K))}),z.habilidades.length>0&&i.jsxs("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:[i.jsx("p",{className:"text-xs font-semibold text-blue-800 dark:text-blue-300 mb-1",children:"Habilidades seleccionadas:"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:z.habilidades.map(K=>i.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded text-xs",children:K},K))})]})]})]})]},z.asignatura))]})]})}),i.jsx(jg,{icon:i.jsx(D1,{className:"w-6 h-6 text-slate-600"}),label:"Objetivos de Aprendizaje",children:i.jsx("textarea",{name:"objetivos",value:a.objetivos,onChange:N,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),i.jsx(jg,{icon:i.jsx(Tl,{className:"w-6 h-6 text-slate-600"}),label:"Indicadores de xito",children:i.jsx("textarea",{name:"indicadoresLogro",value:a.indicadoresLogro,onChange:N,placeholder:"Liste los indicadores de logro...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),i.jsxs(jg,{icon:i.jsx(qo,{className:"w-6 h-6 text-slate-600"}),label:"Planificacin y Cronograma",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(Dc,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),i.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Proyecto"})]}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[i.jsxs("div",{className:"lg:col-span-3",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre"}),i.jsx("input",{value:o.nombre,onChange:z=>l({...o,nombre:z.target.value}),placeholder:"Nombre de la actividad",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-2",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Inicio"}),i.jsx("input",{type:"date",value:o.fechaInicio,onChange:z=>l({...o,fechaInicio:z.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-2",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fin"}),i.jsx("input",{type:"date",value:o.fechaFin,onChange:z=>l({...o,fechaFin:z.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-3",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),i.jsx("input",{value:o.recursoUrl||"",onChange:z=>l({...o,recursoUrl:z.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsx("div",{className:"lg:col-span-2",children:i.jsx("button",{type:"button",onClick:k,className:"w-full bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:c?"Actualizar":i.jsxs(i.Fragment,{children:[i.jsx(gi,{className:"w-4 h-4"})," Agregar"]})})})]}),!!a.actividades.length&&i.jsx("div",{className:"mt-4 space-y-2",children:a.actividades.map(z=>i.jsxs("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm flex justify-between items-center gap-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:z.nombre})," ",i.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:["(",z.fechaInicio," - ",z.fechaFin,")"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(fN,{href:z.recursoUrl}),i.jsx("button",{onClick:()=>B(z),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-md",children:i.jsx(X0,{className:"w-3 h-3"})}),i.jsx("button",{onClick:()=>M(z.id),className:"p-1 text-red-600 hover:bg-red-100 rounded-md",children:i.jsx(Vn,{className:"w-3 h-3"})})]})]},z.id))})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(GC,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),i.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Fechas Clave (Hitos)"})]}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-3 items-end",children:[i.jsxs("div",{className:"sm:col-span-2",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre del Hito"}),i.jsx("input",{value:d.nombre,onChange:z=>f({...d,nombre:z.target.value}),placeholder:"Nombre del hito",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha"}),i.jsx("input",{type:"date",value:d.fecha,onChange:z=>f({...d,fecha:z.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"sm:col-span-1",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),i.jsx("input",{value:d.recursoUrl||"",onChange:z=>f({...d,recursoUrl:z.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsx("button",{type:"button",onClick:P,className:"bg-green-600 hover:bg-green-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:A?"Actualizar":i.jsxs(i.Fragment,{children:[i.jsx(gi,{className:"w-4 h-4"})," Agregar"]})})]}),!!a.fechasClave.length&&i.jsx("div",{className:"mt-4 space-y-2",children:a.fechasClave.map(z=>i.jsxs("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm flex justify-between items-center gap-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:z.nombre})," ",i.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:["(",z.fecha,")"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(fN,{href:z.recursoUrl}),i.jsx("button",{onClick:()=>S(z),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-md",children:i.jsx(X0,{className:"w-3 h-3"})}),i.jsx("button",{onClick:()=>L(z.id),className:"p-1 text-red-600 hover:bg-red-100 rounded-md",children:i.jsx(Vn,{className:"w-3 h-3"})})]})]},z.id))})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(FN,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),i.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Tareas para Estudiantes"})]}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[i.jsxs("div",{className:"lg:col-span-5",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Instrucciones"}),i.jsx("input",{value:g.instrucciones,onChange:z=>x({...g,instrucciones:z.target.value}),placeholder:"Descripcin de la tarea",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-3",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de Entrega"}),i.jsx("input",{type:"date",value:g.fechaEntrega,onChange:z=>x({...g,fechaEntrega:z.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-3",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),i.jsx("input",{value:g.recursoUrl||"",onChange:z=>x({...g,recursoUrl:z.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsx("button",{type:"button",onClick:H,className:"w-full bg-purple-600 hover:bg-purple-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:v?i.jsx(X0,{className:"w-4 h-4"}):i.jsx(gi,{className:"w-4 h-4"})})})]}),!!a.tareas.length&&i.jsx("div",{className:"mt-4 space-y-2",children:a.tareas.map(z=>i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 flex justify-between items-start gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("span",{className:"inline-block bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-300 text-xs font-bold px-2 py-1 rounded mb-1",children:["Tarea #",z.numero]}),i.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:z.instrucciones})]}),i.jsxs("div",{className:"text-right space-y-1",children:[i.jsx("span",{className:"block text-slate-500 dark:text-slate-400 text-xs",children:z.fechaEntrega}),"recursoUrl"in z?i.jsx(fN,{href:z.recursoUrl}):i.jsx("span",{className:"text-slate-400 text-xs",children:""})]}),i.jsxs("div",{className:"flex flex-col items-center gap-2 pl-2 border-l ml-2",children:[i.jsx("button",{onClick:()=>q(z),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-md",children:i.jsx(X0,{className:"w-3 h-3"})}),i.jsx("button",{onClick:()=>Q(z.id),className:"p-1 text-red-600 hover:bg-red-100 rounded-md",children:i.jsx(Vn,{className:"w-3 h-3"})})]})]},z.id))})]})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-8 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors order-2 sm:order-1",children:"Cancelar"}),i.jsx("button",{onClick:()=>t(a),className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg order-1 sm:order-2",children:e?"Guardar Cambios":"Crear Proyecto"})]})]})]})]})]})},BZ=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[a,s]=w.useState(!0),[o,l]=w.useState("list"),[c,u]=w.useState(null),[d,f]=w.useState(null),[A,m]=w.useState(null),[g,x]=w.useState("all"),v=w.useMemo(()=>g==="all"?e:e.filter(k=>k.id===g),[e,g]);w.useEffect(()=>{s(!0);const k=dme(M=>{const P=M.filter(S=>S.profile===It.PROFESORADO);n(P)}),B=Sct(M=>{const P=M.map(S=>({...S,docentesResponsables:Array.isArray(S.docentesResponsables)?S.docentesResponsables:[S.docentesResponsables].filter(Boolean),contenidosPorAsignatura:S.contenidosPorAsignatura||[],actividades:S.actividades||[],fechasClave:S.fechasClave||[]}));t(P),s(!1)});return()=>{k(),B()}},[]);const y=w.useCallback(async(k,B)=>{const M=e.find(S=>S.id===k);if(!M)return;const P={...M,actividades:(M.actividades||[]).map(S=>S.id===B.id?B:S)};await TZ(k,P)},[e]),N=async k=>{try{const B=k.id&&String(k.id).length>0,M={...k};if(B){const{id:P,...S}=M;await TZ(k.id,S)}else delete M.id,await _ct(M);l("list"),u(null)}catch(B){console.error("Error al guardar la planificacin:",B),alert("No se pudo guardar la planificacin.")}},C=k=>{u(k),l("form")},_=async k=>{if(!k){alert("Error: ID invlido.");return}if(window.confirm("Est seguro de eliminar esta planificacin?"))try{await Tct(k)}catch(B){console.error(B),alert("No se pudo eliminar la planificacin.")}},j=()=>{u(null),l("form")},I=async k=>{f(k.id);try{const B=new wr("p","mm","a4"),M=B.internal.pageSize.getHeight(),P=B.internal.pageSize.getWidth(),S=15,L=P-S*2;let H=S,q=1;const K=await(await fetch("https://res.cloudinary.com/dwncmu1wu/image/upload/v1756260600/Captura_de_pantalla_2025-08-26_a_la_s_10.09.17_p._m._aakgkt.png")).blob(),Z=await new Promise((re,ce)=>{const oe=new FileReader;oe.onloadend=()=>re(oe.result),oe.onerror=ce,oe.readAsDataURL(K)}),U=()=>{B.addImage(Z,"PNG",S,H,L,20),H+=25},Y=()=>{B.setFont("helvetica","normal"),B.setFontSize(9),B.setTextColor(149,165,166);const re=`Pgina ${q}`,ce=B.getStringUnitWidth(re)*B.getFontSize()/B.internal.scaleFactor;B.text(re,(P-ce)/2,M-10)},R=re=>H+re>M-S?(Y(),B.addPage(),q++,H=S,U(),!0):!1,D=re=>{R(15),B.setFont("helvetica","bold"),B.setFontSize(14),B.setTextColor(44,62,80),B.text(re,S,H),H+=8},W=re=>{if(!re||!re.trim())return;B.setFont("helvetica","normal"),B.setFontSize(11),B.setTextColor(86,101,115);const ce=B.splitTextToSize(re,L);R(ce.length*5+5),B.text(ce,S,H),H+=ce.length*5+8};U(),B.setFont("helvetica","bold"),B.setFontSize(22),B.setTextColor(41,128,185);const J=B.splitTextToSize(k.nombreProyecto,L);R(J.length*10+10),B.text(J,S,H),H+=J.length*9+10,Pi(B,{startY:H,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},(re=>re.map(ce=>{var oe;return((oe=r.find(be=>be.id===ce))==null?void 0:oe.nombreCompleto)||ce}).join(", "))(k.docentesResponsables)],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},k.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},k.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:11,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold",fillColor:[245,245,245]}},didDrawPage:re=>{re.pageNumber>1&&(H=S,U())}}),H=B.lastAutoTable.finalY+10,D("Descripcin del Proyecto"),W(k.descripcionProyecto),D("Objetivos de Aprendizaje"),W(k.objetivos),D("Indicadores de Logro"),W(k.indicadoresLogro),k.contenidosPorAsignatura&&k.contenidosPorAsignatura.length>0&&(D("Contenidos y Habilidades por Asignatura"),k.contenidosPorAsignatura.forEach(re=>{var ce;R(15),B.setFont("helvetica","bold"),B.setFontSize(12),B.setTextColor(52,73,94),B.text(`${re.asignatura}:`,S,H),H+=7,re.contenidos&&W(`Contenidos: ${re.contenidos}`),(ce=re.habilidades)!=null&&ce.length&&W(`Habilidades: ${re.habilidades.join(", ")}`)}));const ie={theme:"striped",headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},styles:{fontSize:10,cellPadding:2.5,halign:"left"},didDrawPage:re=>{re.pageNumber>q&&(q=re.pageNumber,Y()),re.pageNumber>1&&(H=S,U())}};if(k.actividades&&k.actividades.length>0&&(D("Cronograma de Actividades"),Pi(B,{...ie,startY:H,head:[["Actividad","Inicio","Fin","Recurso"]],body:k.actividades.map(re=>[re.nombre,re.fechaInicio,re.fechaFin,re.recursoUrl||""])}),H=B.lastAutoTable.finalY+10),k.fechasClave&&k.fechasClave.length>0&&(D("Hitos y Fechas Clave"),Pi(B,{...ie,startY:H,head:[["Hito","Fecha","Recurso"]],body:k.fechasClave.map(re=>[re.nombre,re.fecha,re.recursoUrl||""])}),H=B.lastAutoTable.finalY+10),k.tareas&&k.tareas.length>0){D("Tareas para Estudiantes");const re=k.tareas.map(ce=>[String(ce.numero||""),ce.instrucciones,ce.fechaEntrega,ce.recursoUrl||""]);Pi(B,{...ie,startY:H,head:[["#","Instrucciones","Entrega","Recurso"]],body:re}),H=B.lastAutoTable.finalY+10}Y(),B.save(`Proyecto_${k.nombreProyecto.replace(/\s/g,"_")}.pdf`)}catch(B){console.error("Error al generar PDF:",B),alert("No se pudo generar el PDF. Verifique la consola para ms detalles.")}finally{f(null)}},T=k=>k.map(B=>{var M;return((M=r.find(P=>P.id===B))==null?void 0:M.nombreCompleto)||B}).join(", ");return a?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Cargando proyectos..."})]})}):A?i.jsx(Pct,{plan:A,onBack:()=>m(null),availableTeachers:r}):o==="dashboard"?i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>l("list"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),i.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-green-600 to-teal-600 text-white shadow",children:"Dashboard"})]})}),i.jsx(Oct,{planificaciones:e,onBack:()=>l("list")})]}):o==="form"?i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>{l("list"),u(null)},className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),i.jsx("button",{type:"button",onClick:()=>l("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),i.jsx(Rct,{initialPlan:c,onSave:N,onCancel:()=>{l("list"),u(null)},availableTeachers:r})]}):i.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow",children:"Proyectos"}),i.jsx("button",{type:"button",onClick:()=>l("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:i.jsx(yA,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Proyectos Interdisciplinarios"})]}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Gestione experiencias de aprendizaje colaborativo e innovador"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("button",{type:"button",onClick:()=>l("dashboard"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-green-600 to-teal-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-200 shadow-lg",children:[i.jsx(M5,{className:"w-5 h-5"})," Ver Dashboard"]}),i.jsxs("button",{type:"button",onClick:j,className:"inline-flex items-center gap-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg",children:[i.jsx(gi,{className:"w-5 h-5"})," Crear Nuevo Proyecto"]})]})]}),e.length===0?i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:i.jsx(yA,{className:"w-12 h-12 text-slate-400"})}),i.jsx("h3",{className:"text-xl font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"No hay proyectos creados"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-500 mb-6",children:"Comience creando su primer proyecto interdisciplinario"}),i.jsxs("button",{type:"button",onClick:j,className:"inline-flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(gi,{className:"w-4 h-4"})," Crear Primer Proyecto"]})]}):i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:e.map(k=>i.jsxs("div",{className:"group bg-slate-50 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 hover:border-blue-300 dark:hover:border-blue-600",children:[i.jsx("div",{className:"flex justify-between items-start mb-4",children:i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-slate-200 mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:k.nombreProyecto}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[i.jsx(e1,{className:"w-4 h-4"}),i.jsxs("span",{children:["Cursos: ",k.cursos.join(", ")]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[i.jsx(qs,{className:"w-4 h-4"}),i.jsxs("span",{children:["Profesores: ",T(k.docentesResponsables)]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[i.jsx(ps,{className:"w-4 h-4"}),i.jsxs("span",{children:["Asignaturas: ",k.asignaturas.length]})]})]})]})}),!!k.descripcionProyecto&&i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4 line-clamp-3",children:k.descripcionProyecto}),i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{type:"button",onClick:()=>m(k),className:"inline-flex items-center gap-1 text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm transition-colors",title:"Ver entregas de estudiantes",children:[i.jsx(GC,{className:"w-4 h-4"})," Entregas"]}),i.jsxs("button",{type:"button",onClick:()=>I(k),disabled:d===k.id,className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm transition-colors disabled:opacity-50",title:"Exportar a PDF",children:[d===k.id?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):i.jsx(Pf,{className:"w-4 h-4"}),"PDF"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",onClick:()=>C(k),className:"p-2 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-lg transition-colors",title:"Editar proyecto",children:i.jsx(X0,{className:"w-4 h-4"})}),i.jsx("button",{type:"button",onClick:()=>_(k.id),className:"p-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-lg transition-colors",title:"Eliminar proyecto",children:i.jsx(Vn,{className:"w-4 h-4"})})]})]})]},k.id))})]}),e.length>0&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(C4e,{className:"w-5 h-5 text-slate-600"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Cronograma (Gantt)"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Proyecto:"}),i.jsxs("select",{value:g,onChange:k=>x(k.target.value),className:"p-2 border border-slate-300 rounded-lg bg-white dark:bg-slate-700 text-sm",children:[i.jsx("option",{value:"all",children:"Todos"}),e.map(k=>i.jsx("option",{value:k.id,children:k.nombreProyecto},k.id))]})]})]}),i.jsx("div",{id:"gantt-container-vertical",children:i.jsx(Dct,{planificaciones:v,onActivityUpdate:y})})]})]})},J1="panol_maquinas",CE="panol_registros",Lct=e=>{const t=Bt(ht(ut,J1),Xt("nombre","asc"));return lr(t,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));e(n)})},Mct=e=>{const t=Bt(ht(ut,CE),Xt("fecha","desc"));return lr(t,r=>{const n=r.docs.map(a=>{const s=a.data();return{id:a.id,fecha:s.fecha,curso:s.curso,profesorResponsable:s.profesorResponsable,maquinaId:s.maquinaId,totalHoras:s.totalHoras,observaciones:s.observaciones||""}});e(n)})},Uct=async e=>(await ln(ht(ut,J1),{...e,createdAt:zn(),updatedAt:zn()})).id,Hct=async(e,t)=>{await qi(Wt(ut,J1,e),{...t,updatedAt:zn()})},Qct=async e=>{const t=Bt(ht(ut,CE),sr("maquinaId","==",e));if(!(await Ir(t)).empty)throw new Error("No se puede eliminar una mquina con registros de uso. Elimine los registros primero.");await ca(Wt(ut,J1,e))},Vct=async e=>(await ln(ht(ut,CE),{...e,createdAt:zn(),updatedAt:zn()})).id,$ct=async(e,t)=>{await qi(Wt(ut,CE,e),{...t,updatedAt:zn()})},zct=async e=>{await ca(Wt(ut,CE,e))},Gct=async()=>{if(!(await Ir(ht(ut,J1))).empty)return;const t=Qp(ut);[{nombre:"Torno",especialidad:"Industrial"},{nombre:"Fresadora",especialidad:"Industrial"},{nombre:"Rectificadora",especialidad:"Industrial"},{nombre:"Soldadora MIG",especialidad:"Industrial"},{nombre:"Soldadora TIG",especialidad:"Industrial"},{nombre:"Torno CNC",especialidad:"Industrial"},{nombre:"Elevador",especialidad:"Automotriz"},{nombre:"Compresor",especialidad:"Automotriz"},{nombre:"Rectificadora",especialidad:"Automotriz"},{nombre:"Maqueta de motor",especialidad:"Automotriz"},{nombre:"Maqueta hidrulica",especialidad:"Automotriz"}].forEach(n=>{const a=Wt(ht(ut,J1));t.set(a,{...n,createdAt:zn(),updatedAt:zn()})}),await t.commit()},qct=()=>{var q;const[e,t]=w.useState([]),[r,n]=w.useState([]),a={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[s,o]=w.useState(a),[l,c]=w.useState(null),u={nombre:"",especialidad:"Industrial"},[d,f]=w.useState(u),[A,m]=w.useState(null),[g,x]=w.useState({maquinaId:"",curso:"",profesor:"",fecha:""});w.useEffect(()=>{Gct().catch(console.error);const Q=Lct(t),z=Mct(n);return()=>{Q&&Q(),z&&z()}},[]);const v=async Q=>{if(Q.preventDefault(),!!d.nombre.trim())try{A?await Hct(A.id,{...d}):await Uct({...d}),f(u),m(null)}catch(z){alert(z.message||"Error al guardar mquina")}},y=w.useCallback(async Q=>{try{await Qct(Q)}catch(z){alert(z.message||"Error al eliminar mquina")}},[]),N=async Q=>{Q.preventDefault();const z=l||s;if(!z.curso||!z.profesorResponsable.trim()||!z.maquinaId||Number(z.totalHoras)<=0){alert("Curso, Profesor, Mquina y un Total de Horas mayor a cero son obligatorios.");return}try{if(l){const{id:K,...Z}=l;await $ct(K,Z)}else await Vct({...s});o(a),c(null)}catch(K){alert(K.message||"Error al guardar registro")}},C=w.useCallback(async Q=>{try{await zct(Q)}catch(z){alert(z.message||"Error al eliminar registro")}},[]),_=w.useMemo(()=>r.filter(Q=>(g.maquinaId===""||Q.maquinaId===g.maquinaId)&&(g.curso===""||Q.curso===g.curso)&&(g.profesor===""||Q.profesorResponsable.toLowerCase().includes(g.profesor.toLowerCase()))&&(g.fecha===""||Q.fecha===g.fecha)).sort((Q,z)=>new Date(z.fecha).getTime()-new Date(Q.fecha).getTime()),[r,g]),j=w.useMemo(()=>new Map(e.map(Q=>[Q.id,Q])),[e]),I=w.useMemo(()=>_.reduce((Q,z)=>Q+(Number(z.totalHoras)||0),0),[_]),T=w.useMemo(()=>{const Q=new Map;_.forEach(K=>{var U;const Z=((U=j.get(K.maquinaId))==null?void 0:U.nombre)||"N/A";Q.set(Z,(Q.get(Z)||0)+(Number(K.totalHoras)||0))});const z=Array.from(Q.entries()).map(([K,Z])=>({maquina:K,horas:Number(Z.toFixed(2))}));return z.sort((K,Z)=>Z.horas-K.horas),z},[_,j]),k=()=>{const Q=_.map(Z=>{var U,Y;return{Fecha:Z.fecha,Curso:Z.curso,Profesor:Z.profesorResponsable,Mquina:((U=j.get(Z.maquinaId))==null?void 0:U.nombre)||"N/A",Especialidad:((Y=j.get(Z.maquinaId))==null?void 0:Y.especialidad)||"N/A","Total Horas":Z.totalHoras,Observaciones:Z.observaciones}}),z=zs.json_to_sheet(Q),K=zs.book_new();zs.book_append_sheet(K,z,"RegistrosPaol"),ky(K,"Registros_Paol.xlsx")},B=()=>{const Q=new wr;Pi(Q,{head:[["Fecha","Curso","Profesor","Mquina","Especialidad","Total Horas","Observaciones"]],body:_.map(z=>{var K,Z;return[z.fecha,z.curso,z.profesorResponsable,((K=j.get(z.maquinaId))==null?void 0:K.nombre)||"N/A",((Z=j.get(z.maquinaId))==null?void 0:Z.especialidad)||"N/A",z.totalHoras,z.observaciones]}),margin:{top:24,right:10,bottom:20,left:10},didDrawPage:z=>{Q.setFontSize(12),Q.setFont("helvetica","bold"),Q.text("LICEO INDUSTRIAL DE RECOLETA",z.settings.margin.left,14),Q.setFontSize(10),Q.setFont("helvetica","normal"),Q.text("Informe de Registros de Paol",z.settings.margin.left,20)}}),Q.save("Registros_Paol.pdf")},M="w-full border border-slate-300 rounded-xl px-3 py-2 shadow-sm focus:ring-2 focus:ring-indigo-500/30 focus:border-indigo-400 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-400",P=(Q,z)=>i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${z}`,children:Q}),S=({icon:Q,label:z,value:K,accent:Z="from-indigo-500 to-sky-500"})=>i.jsxs("div",{className:"relative rounded-2xl p-4 shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[i.jsx("div",{className:`absolute inset-0 bg-gradient-to-tr ${Z} opacity-10`}),i.jsxs("div",{className:"relative flex items-center gap-3 bg-white/70 dark:bg-slate-800/60 rounded-xl p-3",children:[i.jsx("div",{className:"p-2 rounded-xl bg-white dark:bg-slate-700 shadow",children:Q}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:z}),i.jsx("div",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:K})]})]})]}),L=({title:Q,icon:z,children:K,right:Z,accent:U="from-indigo-600/10 via-sky-500/10 to-emerald-500/10"})=>i.jsxs("section",{className:"rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 relative overflow-hidden",children:[i.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${U}`}),i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"flex items-center gap-2 text-lg font-bold text-slate-800 dark:text-slate-100",children:[z," ",i.jsx("span",{children:Q})]}),Z]}),K]})]}),H=()=>{const Q=l||s,z=l?c:o;return i.jsxs("form",{onSubmit:N,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4 items-end",children:[i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(qo,{size:16})," Fecha"]}),i.jsx("input",{name:"fecha",type:"date",value:Q.fecha,onChange:K=>z({...Q,fecha:K.target.value}),className:M,required:!0})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(qs,{size:16})," Curso"]}),i.jsxs("select",{name:"curso",value:Q.curso,onChange:K=>z({...Q,curso:K.target.value}),className:M,required:!0,children:[i.jsx("option",{value:"",children:"Curso"}),ja.map(K=>i.jsx("option",{children:K},K))]})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(ps,{size:16})," Profesor"]}),i.jsxs("select",{name:"profesorResponsable",value:Q.profesorResponsable,onChange:K=>z({...Q,profesorResponsable:K.target.value}),className:M,required:!0,children:[i.jsx("option",{value:"",children:"Profesor Responsable"}),EF.map(K=>i.jsx("option",{value:K,children:K},K))]})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(q2,{size:16})," Mquina"]}),i.jsxs("select",{name:"maquinaId",value:Q.maquinaId,onChange:K=>z({...Q,maquinaId:K.target.value}),className:M,required:!0,children:[i.jsx("option",{value:"",children:"Mquina"}),e.map(K=>i.jsx("option",{value:K.id,children:K.nombre},K.id))]})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(F5,{size:16})," Total de Horas"]}),i.jsx("input",{name:"totalHoras",type:"number",value:Q.totalHoras,onChange:K=>z({...Q,totalHoras:Number(K.target.value)}),className:M,required:!0,min:.5,step:.5})]}),i.jsxs("div",{className:"lg:col-span-6",children:[i.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),i.jsx("textarea",{name:"observaciones",value:Q.observaciones,onChange:K=>z({...Q,observaciones:K.target.value}),placeholder:"Observaciones...",className:M+" min-h-[40px]",rows:2})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[l&&i.jsxs("button",{type:"button",onClick:()=>c(null),className:"inline-flex items-center gap-2 bg-white text-slate-700 border border-slate-200 dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700 font-medium py-2 px-4 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[i.jsx(xo,{size:16})," Cancelar"]}),i.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-4 rounded-xl hover:bg-indigo-500 transition",children:[l?i.jsx(Fl,{size:16}):i.jsx(gi,{size:16}),l?"Actualizar":"Registrar"]})]})]})};return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("header",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 via-sky-500 to-emerald-500",children:"Paol: Registro de Uso de Mquinas"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Administra mquinas, registra usos y exporta informes (Firestore)."})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:k,className:"inline-flex items-center gap-2 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100 border border-slate-200 dark:border-slate-800 px-3 py-2 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",title:"Exportar a Excel",children:[i.jsx(p3,{size:18})," Excel"]}),i.jsxs("button",{onClick:B,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-2 rounded-xl hover:bg-emerald-500 transition",title:"Exportar a PDF",children:[i.jsx(Ko,{size:18})," PDF"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(S,{icon:i.jsx(q2,{className:"w-5 h-5 text-indigo-600"}),label:"Mquinas registradas",value:e.length,accent:"from-indigo-500 to-sky-500"}),i.jsx(S,{icon:i.jsx(Ko,{className:"w-5 h-5 text-sky-600"}),label:"Registros",value:_.length,accent:"from-sky-500 to-cyan-500"}),i.jsx(S,{icon:i.jsx(F5,{className:"w-5 h-5 text-emerald-600"}),label:"Horas totales (filtradas)",value:I.toFixed(1),accent:"from-emerald-500 to-lime-500"}),i.jsx(S,{icon:i.jsx(qo,{className:"w-5 h-5 text-amber-600"}),label:"ltima actualizacin",value:(q=r[0])!=null&&q.fecha?new Date(r[0].fecha).toLocaleDateString():"",accent:"from-amber-500 to-rose-400"})]}),i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[i.jsx("div",{className:"xl:col-span-3",children:i.jsx(L,{title:l?`Editando registro #${l.id.slice(0,4)}`:"Nuevo registro de uso",icon:i.jsx($_e,{size:18}),children:i.jsx(H,{})})}),i.jsx("div",{className:"xl:col-span-2 order-1 xl:order-none",children:i.jsx(L,{title:"Uso por mquina (horas)",icon:i.jsx(Tl,{size:18}),accent:"from-indigo-600/10 via-sky-500/10 to-amber-500/10",right:i.jsx("div",{className:"flex gap-2 items-center",children:P(`${T.length} mquinas`,"bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200")}),children:i.jsx("div",{className:"h-[320px] w-full",children:i.jsx($o,{width:"100%",height:"100%",children:i.jsxs(Nf,{data:T,margin:{top:8,right:16,bottom:8,left:0},children:[i.jsx(Mh,{strokeDasharray:"3 3"}),i.jsx(Rc,{dataKey:"maquina",tick:{fontSize:12},interval:0,angle:0,height:50}),i.jsx(Lc,{}),i.jsx(Vo,{}),i.jsx(Kp,{}),i.jsx(jd,{dataKey:"horas",name:"Horas",fill:"#6366F1",radius:[6,6,0,0]})]})})})})}),i.jsx("div",{className:"xl:col-span-1 order-2 xl:order-none",children:i.jsxs(L,{title:"Administrar mquinas",icon:i.jsx(q2,{size:18}),accent:"from-emerald-600/10 via-sky-500/10 to-indigo-600/10",children:[i.jsxs("form",{onSubmit:v,className:"grid grid-cols-1 md:grid-cols-5 gap-2 mb-4",children:[i.jsx("input",{value:d.nombre,onChange:Q=>f({...d,nombre:Q.target.value}),placeholder:"Nombre mquina",className:M+" md:col-span-2"}),i.jsxs("select",{value:d.especialidad,onChange:Q=>f({...d,especialidad:Q.target.value}),className:M+" md:col-span-2",children:[i.jsx("option",{value:"Industrial",children:"Industrial"}),i.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),i.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-3 rounded-xl hover:bg-indigo-500 transition md:col-span-1",children:[A?i.jsx(Fl,{size:16}):i.jsx(gi,{size:16}),A?"Guardar":"Agregar"]})]}),i.jsx("ul",{className:"space-y-2 max-h-72 overflow-y-auto pr-1",children:e.map(Q=>i.jsxs("li",{className:"flex justify-between items-center bg-gradient-to-r from-slate-50 to-white dark:from-slate-800/60 dark:to-slate-800/30 border border-slate-200 dark:border-slate-700 p-3 rounded-xl",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-100",children:Q.nombre}),i.jsx("div",{className:"text-xs",children:Q.especialidad==="Industrial"?P("Industrial","bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200"):P("Automotriz","bg-emerald-50 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200")})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>{m(Q),f(Q)},className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Editar",children:i.jsx(MN,{size:16,className:"text-blue-600"})}),i.jsx("button",{onClick:()=>y(Q.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Eliminar",children:i.jsx(Vn,{size:16,className:"text-red-600"})})]})]},Q.id))})]})}),i.jsx("div",{className:"xl:col-span-2 order-3",children:i.jsxs(L,{title:"Historial de uso",icon:i.jsx(Ko,{size:18}),accent:"from-rose-500/10 via-amber-400/10 to-indigo-500/10",right:i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(qC,{size:16,className:"text-slate-600"})}),children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[i.jsx("input",{type:"date",value:g.fecha,onChange:Q=>x({...g,fecha:Q.target.value}),className:M,placeholder:"Fecha"}),i.jsxs("select",{value:g.curso,onChange:Q=>x({...g,curso:Q.target.value}),className:M,children:[i.jsx("option",{value:"",children:"Todos los Cursos"}),ja.map(Q=>i.jsx("option",{children:Q},Q))]}),i.jsxs("select",{value:g.maquinaId,onChange:Q=>x({...g,maquinaId:Q.target.value}),className:M,children:[i.jsx("option",{value:"",children:"Todas las Mquinas"}),e.map(Q=>i.jsx("option",{value:Q.id,children:Q.nombre},Q.id))]}),i.jsxs("div",{className:"relative",children:[i.jsx(wy,{size:16,className:"absolute left-3 top-2.5 text-slate-400"}),i.jsx("input",{value:g.profesor,onChange:Q=>x({...g,profesor:Q.target.value}),placeholder:"Buscar profesor...",className:M+" pl-9"})]})]}),i.jsx("div",{className:"max-h-[420px] overflow-y-auto border border-slate-200 dark:border-slate-800 rounded-xl",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Fecha"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Mquina"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Profesor / Curso"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Total Horas"}),i.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-600 uppercase",children:"Acciones"})]})}),i.jsxs("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-800",children:[_.map(Q=>{var z;return i.jsxs("tr",{className:"hover:bg-slate-50/60 dark:hover:bg-slate-800/50 transition",children:[i.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:Q.fecha}),i.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((z=j.get(Q.maquinaId))==null?void 0:z.nombre)||"N/A"}),i.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[Q.profesorResponsable," ",i.jsxs("span",{className:"text-slate-400",children:["(",Q.curso,")"]})]}),i.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:Q.totalHoras}),i.jsxs("td",{className:"px-3 py-2 text-center",children:[i.jsx("button",{onClick:()=>c(Q),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Editar",children:i.jsx(MN,{size:16,className:"text-blue-600"})}),i.jsx("button",{onClick:()=>C(Q.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Eliminar",children:i.jsx(Vn,{size:16,className:"text-red-600"})})]})]},Q.id)}),_.length===0&&i.jsx("tr",{children:i.jsx("td",{className:"px-3 py-6 text-center text-sm text-slate-500",colSpan:5,children:"No hay registros que coincidan con los filtros."})})]})]})})]})})]})]})};function ic(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=ic(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}const Kct={},IZ=e=>{let t;const r=new Set,n=(d,f)=>{const A=typeof d=="function"?d(t):d;if(!Object.is(A,t)){const m=t;t=f??(typeof A!="object"||A===null)?A:Object.assign({},t,A),r.forEach(g=>g(t,m))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(Kct?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,a,c);return c},Wct=e=>e?IZ(e):IZ,{useDebugValue:Xct}=ft,{useSyncExternalStoreWithSelector:Yct}=kHe,Jct=e=>e;function fme(e,t=Jct,r){const n=Yct(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return Xct(n),n}const DZ=(e,t)=>{const r=Wct(e),n=(a,s=t)=>fme(r,a,s);return Object.assign(n,r),n},Zct=(e,t)=>e?DZ(e,t):DZ;function Ll(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var eut={value:()=>{}};function RT(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new MS(r)}function MS(e){this._=e}function tut(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}MS.prototype=RT.prototype={constructor:MS,on:function(e,t){var r=this._,n=tut(e+"",r),a,s=-1,o=n.length;if(arguments.length<2){for(;++s<o;)if((a=(e=n[s]).type)&&(a=rut(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(a=(e=n[s]).type)r[a]=OZ(r[a],e.name,t);else if(t==null)for(a in r)r[a]=OZ(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new MS(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function rut(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function OZ(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=eut,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var oL="http://www.w3.org/1999/xhtml";const PZ={svg:"http://www.w3.org/2000/svg",xhtml:oL,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function LT(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),PZ.hasOwnProperty(t)?{space:PZ[t],local:e}:e}function nut(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===oL&&t.documentElement.namespaceURI===oL?t.createElement(e):t.createElementNS(r,e)}}function aut(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function hme(e){var t=LT(e);return(t.local?aut:nut)(t)}function sut(){}function tH(e){return e==null?sut:function(){return this.querySelector(e)}}function iut(e){typeof e!="function"&&(e=tH(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],o=s.length,l=n[a]=new Array(o),c,u,d=0;d<o;++d)(c=s[d])&&(u=e.call(c,c.__data__,d,s))&&("__data__"in c&&(u.__data__=c.__data__),l[d]=u);return new Pu(n,this._parents)}function out(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function lut(){return[]}function Ame(e){return e==null?lut:function(){return this.querySelectorAll(e)}}function cut(e){return function(){return out(e.apply(this,arguments))}}function uut(e){typeof e=="function"?e=cut(e):e=Ame(e);for(var t=this._groups,r=t.length,n=[],a=[],s=0;s<r;++s)for(var o=t[s],l=o.length,c,u=0;u<l;++u)(c=o[u])&&(n.push(e.call(c,c.__data__,u,o)),a.push(c));return new Pu(n,a)}function mme(e){return function(){return this.matches(e)}}function pme(e){return function(t){return t.matches(e)}}var dut=Array.prototype.find;function fut(e){return function(){return dut.call(this.children,e)}}function hut(){return this.firstElementChild}function Aut(e){return this.select(e==null?hut:fut(typeof e=="function"?e:pme(e)))}var mut=Array.prototype.filter;function put(){return Array.from(this.children)}function gut(e){return function(){return mut.call(this.children,e)}}function xut(e){return this.selectAll(e==null?put:gut(typeof e=="function"?e:pme(e)))}function vut(e){typeof e!="function"&&(e=mme(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],o=s.length,l=n[a]=[],c,u=0;u<o;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&l.push(c);return new Pu(n,this._parents)}function gme(e){return new Array(e.length)}function but(){return new Pu(this._enter||this._groups.map(gme),this._parents)}function Y_(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Y_.prototype={constructor:Y_,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function yut(e){return function(){return e}}function wut(e,t,r,n,a,s){for(var o=0,l,c=t.length,u=s.length;o<u;++o)(l=t[o])?(l.__data__=s[o],n[o]=l):r[o]=new Y_(e,s[o]);for(;o<c;++o)(l=t[o])&&(a[o]=l)}function Nut(e,t,r,n,a,s,o){var l,c,u=new Map,d=t.length,f=s.length,A=new Array(d),m;for(l=0;l<d;++l)(c=t[l])&&(A[l]=m=o.call(c,c.__data__,l,t)+"",u.has(m)?a[l]=c:u.set(m,c));for(l=0;l<f;++l)m=o.call(e,s[l],l,s)+"",(c=u.get(m))?(n[l]=c,c.__data__=s[l],u.delete(m)):r[l]=new Y_(e,s[l]);for(l=0;l<d;++l)(c=t[l])&&u.get(A[l])===c&&(a[l]=c)}function Cut(e){return e.__data__}function Eut(e,t){if(!arguments.length)return Array.from(this,Cut);var r=t?Nut:wut,n=this._parents,a=this._groups;typeof e!="function"&&(e=yut(e));for(var s=a.length,o=new Array(s),l=new Array(s),c=new Array(s),u=0;u<s;++u){var d=n[u],f=a[u],A=f.length,m=jut(e.call(d,d&&d.__data__,u,n)),g=m.length,x=l[u]=new Array(g),v=o[u]=new Array(g),y=c[u]=new Array(A);r(d,f,x,v,y,m,t);for(var N=0,C=0,_,j;N<g;++N)if(_=x[N]){for(N>=C&&(C=N+1);!(j=v[C])&&++C<g;);_._next=j||null}}return o=new Pu(o,n),o._enter=l,o._exit=c,o}function jut(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function kut(){return new Pu(this._exit||this._groups.map(gme),this._parents)}function Sut(e,t,r){var n=this.enter(),a=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?s.remove():r(s),n&&a?n.merge(a).order():a}function _ut(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,a=r.length,s=n.length,o=Math.min(a,s),l=new Array(a),c=0;c<o;++c)for(var u=r[c],d=n[c],f=u.length,A=l[c]=new Array(f),m,g=0;g<f;++g)(m=u[g]||d[g])&&(A[g]=m);for(;c<a;++c)l[c]=r[c];return new Pu(l,this._parents)}function Tut(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],a=n.length-1,s=n[a],o;--a>=0;)(o=n[a])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function But(e){e||(e=Iut);function t(f,A){return f&&A?e(f.__data__,A.__data__):!f-!A}for(var r=this._groups,n=r.length,a=new Array(n),s=0;s<n;++s){for(var o=r[s],l=o.length,c=a[s]=new Array(l),u,d=0;d<l;++d)(u=o[d])&&(c[d]=u);c.sort(t)}return new Pu(a,this._parents).order()}function Iut(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Dut(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Out(){return Array.from(this)}function Put(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length;a<s;++a){var o=n[a];if(o)return o}return null}function Fut(){let e=0;for(const t of this)++e;return e}function Rut(){return!this.node()}function Lut(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],s=0,o=a.length,l;s<o;++s)(l=a[s])&&e.call(l,l.__data__,s,a);return this}function Mut(e){return function(){this.removeAttribute(e)}}function Uut(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Hut(e,t){return function(){this.setAttribute(e,t)}}function Qut(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Vut(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function $ut(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function zut(e,t){var r=LT(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?Uut:Mut:typeof t=="function"?r.local?$ut:Vut:r.local?Qut:Hut)(r,t))}function xme(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Gut(e){return function(){this.style.removeProperty(e)}}function qut(e,t,r){return function(){this.style.setProperty(e,t,r)}}function Kut(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function Wut(e,t,r){return arguments.length>1?this.each((t==null?Gut:typeof t=="function"?Kut:qut)(e,t,r??"")):Z1(this.node(),e)}function Z1(e,t){return e.style.getPropertyValue(t)||xme(e).getComputedStyle(e,null).getPropertyValue(t)}function Xut(e){return function(){delete this[e]}}function Yut(e,t){return function(){this[e]=t}}function Jut(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Zut(e,t){return arguments.length>1?this.each((t==null?Xut:typeof t=="function"?Jut:Yut)(e,t)):this.node()[e]}function vme(e){return e.trim().split(/^|\s+/)}function rH(e){return e.classList||new bme(e)}function bme(e){this._node=e,this._names=vme(e.getAttribute("class")||"")}bme.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function yme(e,t){for(var r=rH(e),n=-1,a=t.length;++n<a;)r.add(t[n])}function wme(e,t){for(var r=rH(e),n=-1,a=t.length;++n<a;)r.remove(t[n])}function edt(e){return function(){yme(this,e)}}function tdt(e){return function(){wme(this,e)}}function rdt(e,t){return function(){(t.apply(this,arguments)?yme:wme)(this,e)}}function ndt(e,t){var r=vme(e+"");if(arguments.length<2){for(var n=rH(this.node()),a=-1,s=r.length;++a<s;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?rdt:t?edt:tdt)(r,t))}function adt(){this.textContent=""}function sdt(e){return function(){this.textContent=e}}function idt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function odt(e){return arguments.length?this.each(e==null?adt:(typeof e=="function"?idt:sdt)(e)):this.node().textContent}function ldt(){this.innerHTML=""}function cdt(e){return function(){this.innerHTML=e}}function udt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ddt(e){return arguments.length?this.each(e==null?ldt:(typeof e=="function"?udt:cdt)(e)):this.node().innerHTML}function fdt(){this.nextSibling&&this.parentNode.appendChild(this)}function hdt(){return this.each(fdt)}function Adt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mdt(){return this.each(Adt)}function pdt(e){var t=typeof e=="function"?e:hme(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function gdt(){return null}function xdt(e,t){var r=typeof e=="function"?e:hme(e),n=t==null?gdt:typeof t=="function"?t:tH(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function vdt(){var e=this.parentNode;e&&e.removeChild(this)}function bdt(){return this.each(vdt)}function ydt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function wdt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ndt(e){return this.select(e?wdt:ydt)}function Cdt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Edt(e){return function(t){e.call(this,t,this.__data__)}}function jdt(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function kdt(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,a=t.length,s;r<a;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function Sdt(e,t,r){return function(){var n=this.__on,a,s=Edt(t);if(n){for(var o=0,l=n.length;o<l;++o)if((a=n[o]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=r),a.value=t;return}}this.addEventListener(e.type,s,r),a={type:e.type,name:e.name,value:t,listener:s,options:r},n?n.push(a):this.__on=[a]}}function _dt(e,t,r){var n=jdt(e+""),a,s=n.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,d;c<u;++c)for(a=0,d=l[c];a<s;++a)if((o=n[a]).type===d.type&&o.name===d.name)return d.value}return}for(l=t?Sdt:kdt,a=0;a<s;++a)this.each(l(n[a],t,r));return this}function Nme(e,t,r){var n=xme(e),a=n.CustomEvent;typeof a=="function"?a=new a(t,r):(a=n.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function Tdt(e,t){return function(){return Nme(this,e,t)}}function Bdt(e,t){return function(){return Nme(this,e,t.apply(this,arguments))}}function Idt(e,t){return this.each((typeof t=="function"?Bdt:Tdt)(e,t))}function*Ddt(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length,o;a<s;++a)(o=n[a])&&(yield o)}var Cme=[null];function Pu(e,t){this._groups=e,this._parents=t}function EE(){return new Pu([[document.documentElement]],Cme)}function Odt(){return this}Pu.prototype=EE.prototype={constructor:Pu,select:iut,selectAll:uut,selectChild:Aut,selectChildren:xut,filter:vut,data:Eut,enter:but,exit:kut,join:Sut,merge:_ut,selection:Odt,order:Tut,sort:But,call:Dut,nodes:Out,node:Put,size:Fut,empty:Rut,each:Lut,attr:zut,style:Wut,property:Zut,classed:ndt,text:odt,html:ddt,raise:hdt,lower:mdt,append:pdt,insert:xdt,remove:bdt,clone:Ndt,datum:Cdt,on:_dt,dispatch:Idt,[Symbol.iterator]:Ddt};function Nd(e){return typeof e=="string"?new Pu([[document.querySelector(e)]],[document.documentElement]):new Pu([[e]],Cme)}function Pdt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function jh(e,t){if(e=Pdt(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const Fdt={passive:!1},gC={capture:!0,passive:!1};function IO(e){e.stopImmediatePropagation()}function p1(e){e.preventDefault(),e.stopImmediatePropagation()}function Eme(e){var t=e.document.documentElement,r=Nd(e).on("dragstart.drag",p1,gC);"onselectstart"in t?r.on("selectstart.drag",p1,gC):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function jme(e,t){var r=e.document.documentElement,n=Nd(e).on("dragstart.drag",null);t&&(n.on("click.drag",p1,gC),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Bk=e=>()=>e;function lL(e,{sourceEvent:t,subject:r,target:n,identifier:a,active:s,x:o,y:l,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}lL.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Rdt(e){return!e.ctrlKey&&!e.button}function Ldt(){return this.parentNode}function Mdt(e,t){return t??{x:e.x,y:e.y}}function Udt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Hdt(){var e=Rdt,t=Ldt,r=Mdt,n=Udt,a={},s=RT("start","drag","end"),o=0,l,c,u,d,f=0;function A(_){_.on("mousedown.drag",m).filter(n).on("touchstart.drag",v).on("touchmove.drag",y,Fdt).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(_,j){if(!(d||!e.call(this,_,j))){var I=C(this,t.call(this,_,j),_,j,"mouse");I&&(Nd(_.view).on("mousemove.drag",g,gC).on("mouseup.drag",x,gC),Eme(_.view),IO(_),u=!1,l=_.clientX,c=_.clientY,I("start",_))}}function g(_){if(p1(_),!u){var j=_.clientX-l,I=_.clientY-c;u=j*j+I*I>f}a.mouse("drag",_)}function x(_){Nd(_.view).on("mousemove.drag mouseup.drag",null),jme(_.view,u),p1(_),a.mouse("end",_)}function v(_,j){if(e.call(this,_,j)){var I=_.changedTouches,T=t.call(this,_,j),k=I.length,B,M;for(B=0;B<k;++B)(M=C(this,T,_,j,I[B].identifier,I[B]))&&(IO(_),M("start",_,I[B]))}}function y(_){var j=_.changedTouches,I=j.length,T,k;for(T=0;T<I;++T)(k=a[j[T].identifier])&&(p1(_),k("drag",_,j[T]))}function N(_){var j=_.changedTouches,I=j.length,T,k;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),T=0;T<I;++T)(k=a[j[T].identifier])&&(IO(_),k("end",_,j[T]))}function C(_,j,I,T,k,B){var M=s.copy(),P=jh(B||I,j),S,L,H;if((H=r.call(_,new lL("beforestart",{sourceEvent:I,target:A,identifier:k,active:o,x:P[0],y:P[1],dx:0,dy:0,dispatch:M}),T))!=null)return S=H.x-P[0]||0,L=H.y-P[1]||0,function q(Q,z,K){var Z=P,U;switch(Q){case"start":a[k]=q,U=o++;break;case"end":delete a[k],--o;case"drag":P=jh(K||z,j),U=o;break}M.call(Q,_,new lL(Q,{sourceEvent:z,subject:H,target:A,identifier:k,active:U,x:P[0]+S,y:P[1]+L,dx:P[0]-Z[0],dy:P[1]-Z[1],dispatch:M}),T)}}return A.filter=function(_){return arguments.length?(e=typeof _=="function"?_:Bk(!!_),A):e},A.container=function(_){return arguments.length?(t=typeof _=="function"?_:Bk(_),A):t},A.subject=function(_){return arguments.length?(r=typeof _=="function"?_:Bk(_),A):r},A.touchable=function(_){return arguments.length?(n=typeof _=="function"?_:Bk(!!_),A):n},A.on=function(){var _=s.on.apply(s,arguments);return _===s?A:_},A.clickDistance=function(_){return arguments.length?(f=(_=+_)*_,A):Math.sqrt(f)},A}var ey=0,j2=0,Xw=0,kme=1e3,J_,k2,Z_=0,Vx=0,MT=0,xC=typeof performance=="object"&&performance.now?performance:Date,Sme=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function nH(){return Vx||(Sme(Qdt),Vx=xC.now()+MT)}function Qdt(){Vx=0}function e4(){this._call=this._time=this._next=null}e4.prototype=_me.prototype={constructor:e4,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?nH():+r)+(t==null?0:+t),!this._next&&k2!==this&&(k2?k2._next=this:J_=this,k2=this),this._call=e,this._time=r,cL()},stop:function(){this._call&&(this._call=null,this._time=1/0,cL())}};function _me(e,t,r){var n=new e4;return n.restart(e,t,r),n}function Vdt(){nH(),++ey;for(var e=J_,t;e;)(t=Vx-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ey}function FZ(){Vx=(Z_=xC.now())+MT,ey=j2=0;try{Vdt()}finally{ey=0,zdt(),Vx=0}}function $dt(){var e=xC.now(),t=e-Z_;t>kme&&(MT-=t,Z_=e)}function zdt(){for(var e,t=J_,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:J_=r);k2=e,cL(n)}function cL(e){if(!ey){j2&&(j2=clearTimeout(j2));var t=e-Vx;t>24?(e<1/0&&(j2=setTimeout(FZ,e-xC.now()-MT)),Xw&&(Xw=clearInterval(Xw))):(Xw||(Z_=xC.now(),Xw=setInterval($dt,kme)),ey=1,Sme(FZ))}}function RZ(e,t,r){var n=new e4;return t=t==null?0:+t,n.restart(a=>{n.stop(),e(a+t)},t,r),n}var Gdt=RT("start","end","cancel","interrupt"),qdt=[],Tme=0,LZ=1,uL=2,US=3,MZ=4,dL=5,HS=6;function UT(e,t,r,n,a,s){var o=e.__transition;if(!o)e.__transition={};else if(r in o)return;Kdt(e,r,{name:t,index:n,group:a,on:Gdt,tween:qdt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Tme})}function aH(e,t){var r=Vf(e,t);if(r.state>Tme)throw new Error("too late; already scheduled");return r}function c0(e,t){var r=Vf(e,t);if(r.state>US)throw new Error("too late; already running");return r}function Vf(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function Kdt(e,t,r){var n=e.__transition,a;n[t]=r,r.timer=_me(s,0,r.time);function s(u){r.state=LZ,r.timer.restart(o,r.delay,r.time),r.delay<=u&&o(u-r.delay)}function o(u){var d,f,A,m;if(r.state!==LZ)return c();for(d in n)if(m=n[d],m.name===r.name){if(m.state===US)return RZ(o);m.state===MZ?(m.state=HS,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete n[d]):+d<t&&(m.state=HS,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete n[d])}if(RZ(function(){r.state===US&&(r.state=MZ,r.timer.restart(l,r.delay,r.time),l(u))}),r.state=uL,r.on.call("start",e,e.__data__,r.index,r.group),r.state===uL){for(r.state=US,a=new Array(A=r.tween.length),d=0,f=-1;d<A;++d)(m=r.tween[d].value.call(e,e.__data__,r.index,r.group))&&(a[++f]=m);a.length=f+1}}function l(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=dL,1),f=-1,A=a.length;++f<A;)a[f].call(e,d);r.state===dL&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=HS,r.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function QS(e,t){var r=e.__transition,n,a,s=!0,o;if(r){t=t==null?null:t+"";for(o in r){if((n=r[o]).name!==t){s=!1;continue}a=n.state>uL&&n.state<dL,n.state=HS,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[o]}s&&delete e.__transition}}function Wdt(e){return this.each(function(){QS(this,e)})}function Xdt(e,t){var r,n;return function(){var a=c0(this,e),s=a.tween;if(s!==r){n=r=s;for(var o=0,l=n.length;o<l;++o)if(n[o].name===t){n=n.slice(),n.splice(o,1);break}}a.tween=n}}function Ydt(e,t,r){var n,a;if(typeof r!="function")throw new Error;return function(){var s=c0(this,e),o=s.tween;if(o!==n){a=(n=o).slice();for(var l={name:t,value:r},c=0,u=a.length;c<u;++c)if(a[c].name===t){a[c]=l;break}c===u&&a.push(l)}s.tween=a}}function Jdt(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=Vf(this.node(),r).tween,a=0,s=n.length,o;a<s;++a)if((o=n[a]).name===e)return o.value;return null}return this.each((t==null?Xdt:Ydt)(r,e,t))}function sH(e,t,r){var n=e._id;return e.each(function(){var a=c0(this,n);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return Vf(a,n).value[t]}}function Bme(e,t){var r;return(typeof t=="number"?mf:t instanceof Hx?C_:(r=Hx(t))?(t=r,C_):Tde)(e,t)}function Zdt(e){return function(){this.removeAttribute(e)}}function eft(e){return function(){this.removeAttributeNS(e.space,e.local)}}function tft(e,t,r){var n,a=r+"",s;return function(){var o=this.getAttribute(e);return o===a?null:o===n?s:s=t(n=o,r)}}function rft(e,t,r){var n,a=r+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===n?s:s=t(n=o,r)}}function nft(e,t,r){var n,a,s;return function(){var o,l=r(this),c;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=l+"",o===c?null:o===n&&c===a?s:(a=c,s=t(n=o,l)))}}function aft(e,t,r){var n,a,s;return function(){var o,l=r(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=l+"",o===c?null:o===n&&c===a?s:(a=c,s=t(n=o,l)))}}function sft(e,t){var r=LT(e),n=r==="transform"?Wze:Bme;return this.attrTween(e,typeof t=="function"?(r.local?aft:nft)(r,n,sH(this,"attr."+e,t)):t==null?(r.local?eft:Zdt)(r):(r.local?rft:tft)(r,n,t))}function ift(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function oft(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function lft(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&oft(e,s)),r}return a._value=t,a}function cft(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&ift(e,s)),r}return a._value=t,a}function uft(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=LT(e);return this.tween(r,(n.local?lft:cft)(n,t))}function dft(e,t){return function(){aH(this,e).delay=+t.apply(this,arguments)}}function fft(e,t){return t=+t,function(){aH(this,e).delay=t}}function hft(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?dft:fft)(t,e)):Vf(this.node(),t).delay}function Aft(e,t){return function(){c0(this,e).duration=+t.apply(this,arguments)}}function mft(e,t){return t=+t,function(){c0(this,e).duration=t}}function pft(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Aft:mft)(t,e)):Vf(this.node(),t).duration}function gft(e,t){if(typeof t!="function")throw new Error;return function(){c0(this,e).ease=t}}function xft(e){var t=this._id;return arguments.length?this.each(gft(t,e)):Vf(this.node(),t).ease}function vft(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;c0(this,e).ease=r}}function bft(e){if(typeof e!="function")throw new Error;return this.each(vft(this._id,e))}function yft(e){typeof e!="function"&&(e=mme(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],o=s.length,l=n[a]=[],c,u=0;u<o;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&l.push(c);return new IA(n,this._parents,this._name,this._id)}function wft(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,a=r.length,s=Math.min(n,a),o=new Array(n),l=0;l<s;++l)for(var c=t[l],u=r[l],d=c.length,f=o[l]=new Array(d),A,m=0;m<d;++m)(A=c[m]||u[m])&&(f[m]=A);for(;l<n;++l)o[l]=t[l];return new IA(o,this._parents,this._name,this._id)}function Nft(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function Cft(e,t,r){var n,a,s=Nft(t)?aH:c0;return function(){var o=s(this,e),l=o.on;l!==n&&(a=(n=l).copy()).on(t,r),o.on=a}}function Eft(e,t){var r=this._id;return arguments.length<2?Vf(this.node(),r).on.on(e):this.each(Cft(r,e,t))}function jft(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function kft(){return this.on("end.remove",jft(this._id))}function Sft(e){var t=this._name,r=this._id;typeof e!="function"&&(e=tH(e));for(var n=this._groups,a=n.length,s=new Array(a),o=0;o<a;++o)for(var l=n[o],c=l.length,u=s[o]=new Array(c),d,f,A=0;A<c;++A)(d=l[A])&&(f=e.call(d,d.__data__,A,l))&&("__data__"in d&&(f.__data__=d.__data__),u[A]=f,UT(u[A],t,r,A,u,Vf(d,r)));return new IA(s,this._parents,t,r)}function _ft(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Ame(e));for(var n=this._groups,a=n.length,s=[],o=[],l=0;l<a;++l)for(var c=n[l],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var A=e.call(d,d.__data__,f,c),m,g=Vf(d,r),x=0,v=A.length;x<v;++x)(m=A[x])&&UT(m,t,r,x,A,g);s.push(A),o.push(d)}return new IA(s,o,t,r)}var Tft=EE.prototype.constructor;function Bft(){return new Tft(this._groups,this._parents)}function Ift(e,t){var r,n,a;return function(){var s=Z1(this,e),o=(this.style.removeProperty(e),Z1(this,e));return s===o?null:s===r&&o===n?a:a=t(r=s,n=o)}}function Ime(e){return function(){this.style.removeProperty(e)}}function Dft(e,t,r){var n,a=r+"",s;return function(){var o=Z1(this,e);return o===a?null:o===n?s:s=t(n=o,r)}}function Oft(e,t,r){var n,a,s;return function(){var o=Z1(this,e),l=r(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),Z1(this,e))),o===c?null:o===n&&c===a?s:(a=c,s=t(n=o,l))}}function Pft(e,t){var r,n,a,s="style."+t,o="end."+s,l;return function(){var c=c0(this,e),u=c.on,d=c.value[s]==null?l||(l=Ime(t)):void 0;(u!==r||a!==d)&&(n=(r=u).copy()).on(o,a=d),c.on=n}}function Fft(e,t,r){var n=(e+="")=="transform"?Kze:Bme;return t==null?this.styleTween(e,Ift(e,n)).on("end.style."+e,Ime(e)):typeof t=="function"?this.styleTween(e,Oft(e,n,sH(this,"style."+e,t))).each(Pft(this._id,e)):this.styleTween(e,Dft(e,n,t),r).on("end.style."+e,null)}function Rft(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function Lft(e,t,r){var n,a;function s(){var o=t.apply(this,arguments);return o!==a&&(n=(a=o)&&Rft(e,o,r)),n}return s._value=t,s}function Mft(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Lft(e,t,r??""))}function Uft(e){return function(){this.textContent=e}}function Hft(e){return function(){var t=e(this);this.textContent=t??""}}function Qft(e){return this.tween("text",typeof e=="function"?Hft(sH(this,"text",e)):Uft(e==null?"":e+""))}function Vft(e){return function(t){this.textContent=e.call(this,t)}}function $ft(e){var t,r;function n(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&Vft(a)),t}return n._value=e,n}function zft(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,$ft(e))}function Gft(){for(var e=this._name,t=this._id,r=Dme(),n=this._groups,a=n.length,s=0;s<a;++s)for(var o=n[s],l=o.length,c,u=0;u<l;++u)if(c=o[u]){var d=Vf(c,t);UT(c,e,r,u,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new IA(n,this._parents,e,r)}function qft(){var e,t,r=this,n=r._id,a=r.size();return new Promise(function(s,o){var l={value:o},c={value:function(){--a===0&&s()}};r.each(function(){var u=c0(this,n),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),u.on=t}),a===0&&s()})}var Kft=0;function IA(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function Dme(){return++Kft}var M0=EE.prototype;IA.prototype={constructor:IA,select:Sft,selectAll:_ft,selectChild:M0.selectChild,selectChildren:M0.selectChildren,filter:yft,merge:wft,selection:Bft,transition:Gft,call:M0.call,nodes:M0.nodes,node:M0.node,size:M0.size,empty:M0.empty,each:M0.each,on:Eft,attr:sft,attrTween:uft,style:Fft,styleTween:Mft,text:Qft,textTween:zft,remove:kft,tween:Jdt,delay:hft,duration:pft,ease:xft,easeVarying:bft,end:qft,[Symbol.iterator]:M0[Symbol.iterator]};function Wft(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Xft={time:null,delay:0,duration:250,ease:Wft};function Yft(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function Jft(e){var t,r;e instanceof IA?(t=e._id,e=e._name):(t=Dme(),(r=Xft).time=nH(),e=e==null?null:e+"");for(var n=this._groups,a=n.length,s=0;s<a;++s)for(var o=n[s],l=o.length,c,u=0;u<l;++u)(c=o[u])&&UT(c,e,t,u,o,r||Yft(c,t));return new IA(n,this._parents,e,t)}EE.prototype.interrupt=Wdt;EE.prototype.transition=Jft;const Ik=e=>()=>e;function Zft(e,{sourceEvent:t,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function rA(e,t,r){this.k=e,this.x=t,this.y=r}rA.prototype={constructor:rA,scale:function(e){return e===1?this:new rA(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new rA(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ap=new rA(1,0,0);rA.prototype;function DO(e){e.stopImmediatePropagation()}function Yw(e){e.preventDefault(),e.stopImmediatePropagation()}function eht(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function tht(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function UZ(){return this.__zoom||Ap}function rht(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function nht(){return navigator.maxTouchPoints||"ontouchstart"in this}function aht(e,t,r){var n=e.invertX(t[0][0])-r[0][0],a=e.invertX(t[1][0])-r[1][0],s=e.invertY(t[0][1])-r[0][1],o=e.invertY(t[1][1])-r[1][1];return e.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function sht(){var e=eht,t=tht,r=aht,n=rht,a=nht,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,c=Zze,u=RT("start","zoom","end"),d,f,A,m=500,g=150,x=0,v=10;function y(H){H.property("__zoom",UZ).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",M).filter(a).on("touchstart.zoom",P).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(H,q,Q,z){var K=H.selection?H.selection():H;K.property("__zoom",UZ),H!==K?j(H,q,Q,z):K.interrupt().each(function(){I(this,arguments).event(z).start().zoom(null,typeof q=="function"?q.apply(this,arguments):q).end()})},y.scaleBy=function(H,q,Q,z){y.scaleTo(H,function(){var K=this.__zoom.k,Z=typeof q=="function"?q.apply(this,arguments):q;return K*Z},Q,z)},y.scaleTo=function(H,q,Q,z){y.transform(H,function(){var K=t.apply(this,arguments),Z=this.__zoom,U=Q==null?_(K):typeof Q=="function"?Q.apply(this,arguments):Q,Y=Z.invert(U),R=typeof q=="function"?q.apply(this,arguments):q;return r(C(N(Z,R),U,Y),K,o)},Q,z)},y.translateBy=function(H,q,Q,z){y.transform(H,function(){return r(this.__zoom.translate(typeof q=="function"?q.apply(this,arguments):q,typeof Q=="function"?Q.apply(this,arguments):Q),t.apply(this,arguments),o)},null,z)},y.translateTo=function(H,q,Q,z,K){y.transform(H,function(){var Z=t.apply(this,arguments),U=this.__zoom,Y=z==null?_(Z):typeof z=="function"?z.apply(this,arguments):z;return r(Ap.translate(Y[0],Y[1]).scale(U.k).translate(typeof q=="function"?-q.apply(this,arguments):-q,typeof Q=="function"?-Q.apply(this,arguments):-Q),Z,o)},z,K)};function N(H,q){return q=Math.max(s[0],Math.min(s[1],q)),q===H.k?H:new rA(q,H.x,H.y)}function C(H,q,Q){var z=q[0]-Q[0]*H.k,K=q[1]-Q[1]*H.k;return z===H.x&&K===H.y?H:new rA(H.k,z,K)}function _(H){return[(+H[0][0]+ +H[1][0])/2,(+H[0][1]+ +H[1][1])/2]}function j(H,q,Q,z){H.on("start.zoom",function(){I(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(z).end()}).tween("zoom",function(){var K=this,Z=arguments,U=I(K,Z).event(z),Y=t.apply(K,Z),R=Q==null?_(Y):typeof Q=="function"?Q.apply(K,Z):Q,D=Math.max(Y[1][0]-Y[0][0],Y[1][1]-Y[0][1]),W=K.__zoom,J=typeof q=="function"?q.apply(K,Z):q,le=c(W.invert(R).concat(D/W.k),J.invert(R).concat(D/J.k));return function(ie){if(ie===1)ie=J;else{var re=le(ie),ce=D/re[2];ie=new rA(ce,R[0]-re[0]*ce,R[1]-re[1]*ce)}U.zoom(null,ie)}})}function I(H,q,Q){return!Q&&H.__zooming||new T(H,q)}function T(H,q){this.that=H,this.args=q,this.active=0,this.sourceEvent=null,this.extent=t.apply(H,q),this.taps=0}T.prototype={event:function(H){return H&&(this.sourceEvent=H),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(H,q){return this.mouse&&H!=="mouse"&&(this.mouse[1]=q.invert(this.mouse[0])),this.touch0&&H!=="touch"&&(this.touch0[1]=q.invert(this.touch0[0])),this.touch1&&H!=="touch"&&(this.touch1[1]=q.invert(this.touch1[0])),this.that.__zoom=q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(H){var q=Nd(this.that).datum();u.call(H,this.that,new Zft(H,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),q)}};function k(H,...q){if(!e.apply(this,arguments))return;var Q=I(this,q).event(H),z=this.__zoom,K=Math.max(s[0],Math.min(s[1],z.k*Math.pow(2,n.apply(this,arguments)))),Z=jh(H);if(Q.wheel)(Q.mouse[0][0]!==Z[0]||Q.mouse[0][1]!==Z[1])&&(Q.mouse[1]=z.invert(Q.mouse[0]=Z)),clearTimeout(Q.wheel);else{if(z.k===K)return;Q.mouse=[Z,z.invert(Z)],QS(this),Q.start()}Yw(H),Q.wheel=setTimeout(U,g),Q.zoom("mouse",r(C(N(z,K),Q.mouse[0],Q.mouse[1]),Q.extent,o));function U(){Q.wheel=null,Q.end()}}function B(H,...q){if(A||!e.apply(this,arguments))return;var Q=H.currentTarget,z=I(this,q,!0).event(H),K=Nd(H.view).on("mousemove.zoom",R,!0).on("mouseup.zoom",D,!0),Z=jh(H,Q),U=H.clientX,Y=H.clientY;Eme(H.view),DO(H),z.mouse=[Z,this.__zoom.invert(Z)],QS(this),z.start();function R(W){if(Yw(W),!z.moved){var J=W.clientX-U,le=W.clientY-Y;z.moved=J*J+le*le>x}z.event(W).zoom("mouse",r(C(z.that.__zoom,z.mouse[0]=jh(W,Q),z.mouse[1]),z.extent,o))}function D(W){K.on("mousemove.zoom mouseup.zoom",null),jme(W.view,z.moved),Yw(W),z.event(W).end()}}function M(H,...q){if(e.apply(this,arguments)){var Q=this.__zoom,z=jh(H.changedTouches?H.changedTouches[0]:H,this),K=Q.invert(z),Z=Q.k*(H.shiftKey?.5:2),U=r(C(N(Q,Z),z,K),t.apply(this,q),o);Yw(H),l>0?Nd(this).transition().duration(l).call(j,U,z,H):Nd(this).call(y.transform,U,z,H)}}function P(H,...q){if(e.apply(this,arguments)){var Q=H.touches,z=Q.length,K=I(this,q,H.changedTouches.length===z).event(H),Z,U,Y,R;for(DO(H),U=0;U<z;++U)Y=Q[U],R=jh(Y,this),R=[R,this.__zoom.invert(R),Y.identifier],K.touch0?!K.touch1&&K.touch0[2]!==R[2]&&(K.touch1=R,K.taps=0):(K.touch0=R,Z=!0,K.taps=1+!!d);d&&(d=clearTimeout(d)),Z&&(K.taps<2&&(f=R[0],d=setTimeout(function(){d=null},m)),QS(this),K.start())}}function S(H,...q){if(this.__zooming){var Q=I(this,q).event(H),z=H.changedTouches,K=z.length,Z,U,Y,R;for(Yw(H),Z=0;Z<K;++Z)U=z[Z],Y=jh(U,this),Q.touch0&&Q.touch0[2]===U.identifier?Q.touch0[0]=Y:Q.touch1&&Q.touch1[2]===U.identifier&&(Q.touch1[0]=Y);if(U=Q.that.__zoom,Q.touch1){var D=Q.touch0[0],W=Q.touch0[1],J=Q.touch1[0],le=Q.touch1[1],ie=(ie=J[0]-D[0])*ie+(ie=J[1]-D[1])*ie,re=(re=le[0]-W[0])*re+(re=le[1]-W[1])*re;U=N(U,Math.sqrt(ie/re)),Y=[(D[0]+J[0])/2,(D[1]+J[1])/2],R=[(W[0]+le[0])/2,(W[1]+le[1])/2]}else if(Q.touch0)Y=Q.touch0[0],R=Q.touch0[1];else return;Q.zoom("touch",r(C(U,Y,R),Q.extent,o))}}function L(H,...q){if(this.__zooming){var Q=I(this,q).event(H),z=H.changedTouches,K=z.length,Z,U;for(DO(H),A&&clearTimeout(A),A=setTimeout(function(){A=null},m),Z=0;Z<K;++Z)U=z[Z],Q.touch0&&Q.touch0[2]===U.identifier?delete Q.touch0:Q.touch1&&Q.touch1[2]===U.identifier&&delete Q.touch1;if(Q.touch1&&!Q.touch0&&(Q.touch0=Q.touch1,delete Q.touch1),Q.touch0)Q.touch0[1]=this.__zoom.invert(Q.touch0[0]);else if(Q.end(),Q.taps===2&&(U=jh(U,this),Math.hypot(f[0]-U[0],f[1]-U[1])<v)){var Y=Nd(this).on("dblclick.zoom");Y&&Y.apply(this,arguments)}}}return y.wheelDelta=function(H){return arguments.length?(n=typeof H=="function"?H:Ik(+H),y):n},y.filter=function(H){return arguments.length?(e=typeof H=="function"?H:Ik(!!H),y):e},y.touchable=function(H){return arguments.length?(a=typeof H=="function"?H:Ik(!!H),y):a},y.extent=function(H){return arguments.length?(t=typeof H=="function"?H:Ik([[+H[0][0],+H[0][1]],[+H[1][0],+H[1][1]]]),y):t},y.scaleExtent=function(H){return arguments.length?(s[0]=+H[0],s[1]=+H[1],y):[s[0],s[1]]},y.translateExtent=function(H){return arguments.length?(o[0][0]=+H[0][0],o[1][0]=+H[1][0],o[0][1]=+H[0][1],o[1][1]=+H[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(H){return arguments.length?(r=H,y):r},y.duration=function(H){return arguments.length?(l=+H,y):l},y.interpolate=function(H){return arguments.length?(c=H,y):c},y.on=function(){var H=u.on.apply(u,arguments);return H===u?y:H},y.clickDistance=function(H){return arguments.length?(x=(H=+H)*H,y):Math.sqrt(x)},y.tapDistance=function(H){return arguments.length?(v=+H,y):v},y}const HT=w.createContext(null),iht=HT.Provider,DA={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Ome=DA.error001();function Ts(e,t){const r=w.useContext(HT);if(r===null)throw new Error(Ome);return fme(r,e,t)}const wo=()=>{const e=w.useContext(HT);if(e===null)throw new Error(Ome);return w.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},oht=e=>e.userSelectionActive?"none":"all";function Pme({position:e,children:t,className:r,style:n,...a}){const s=Ts(oht),o=`${e}`.split("-");return ft.createElement("div",{className:ic(["react-flow__panel",r,...o]),style:{...n,pointerEvents:s},...a},t)}function lht({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:ft.createElement(Pme,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},ft.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const cht=({x:e,y:t,label:r,labelStyle:n={},labelShowBg:a=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:c,className:u,...d})=>{const f=w.useRef(null),[A,m]=w.useState({x:0,y:0,width:0,height:0}),g=ic(["react-flow__edge-textwrapper",u]);return w.useEffect(()=>{if(f.current){const x=f.current.getBBox();m({x:x.x,y:x.y,width:x.width,height:x.height})}},[r]),typeof r>"u"||!r?null:ft.createElement("g",{transform:`translate(${e-A.width/2} ${t-A.height/2})`,className:g,visibility:A.width?"visible":"hidden",...d},a&&ft.createElement("rect",{width:A.width+2*o[0],x:-o[0],y:-o[1],height:A.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),ft.createElement("text",{className:"react-flow__edge-text",y:A.height/2,dy:"0.3em",ref:f,style:n},r),c)};var uht=w.memo(cht);const iH=e=>({width:e.offsetWidth,height:e.offsetHeight}),ty=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),oH=(e={x:0,y:0},t)=>({x:ty(e.x,t[0][0],t[1][0]),y:ty(e.y,t[0][1],t[1][1])}),HZ=(e,t,r)=>e<t?ty(Math.abs(e-t),1,50)/50:e>r?-ty(Math.abs(e-r),1,50)/50:0,Fme=(e,t)=>{const r=HZ(e.x,35,t.width-35)*20,n=HZ(e.y,35,t.height-35)*20;return[r,n]},Rme=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},dht=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),lH=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),fht=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),QZ=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),fL=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},hht=e=>kd(e.width)&&kd(e.height)&&kd(e.x)&&kd(e.y),kd=e=>!isNaN(e)&&isFinite(e),Gs=Symbol.for("internals"),Lme=["Enter"," ","Escape"],Aht=(e,t)=>{},mht=e=>"nativeEvent"in e;function hL(e){var a,s;const t=mht(e)?e.nativeEvent:e,r=((s=(a=t.composedPath)==null?void 0:a.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const Mme=e=>"clientX"in e,mp=(e,t)=>{var s,o;const r=Mme(e),n=r?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,a=r?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:n-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},t4=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},jE=({id:e,path:t,labelX:r,labelY:n,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:A,interactionWidth:m=20})=>ft.createElement(ft.Fragment,null,ft.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:A}),m&&ft.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),a&&kd(r)&&kd(n)?ft.createElement(uht,{x:r,y:n,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u}):null);jE.displayName="BaseEdge";function Jw(e,t,r){return r===void 0?r:n=>{const a=t().edges.find(s=>s.id===e);a&&r(n,{...a})}}function Ume({sourceX:e,sourceY:t,targetX:r,targetY:n}){const a=Math.abs(r-e)/2,s=r<e?r+a:r-a,o=Math.abs(n-t)/2,l=n<t?n+o:n-o;return[s,l,a,o]}function Hme({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:a,sourceControlY:s,targetControlX:o,targetControlY:l}){const c=e*.125+a*.375+o*.375+r*.125,u=t*.125+s*.375+l*.375+n*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var $x;(function(e){e.Strict="strict",e.Loose="loose"})($x||($x={}));var tx;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(tx||(tx={}));var vC;(function(e){e.Partial="partial",e.Full="full"})(vC||(vC={}));var Wm;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Wm||(Wm={}));var r4;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(r4||(r4={}));var _r;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(_r||(_r={}));function VZ({pos:e,x1:t,y1:r,x2:n,y2:a}){return e===_r.Left||e===_r.Right?[.5*(t+n),r]:[t,.5*(r+a)]}function Qme({sourceX:e,sourceY:t,sourcePosition:r=_r.Bottom,targetX:n,targetY:a,targetPosition:s=_r.Top}){const[o,l]=VZ({pos:r,x1:e,y1:t,x2:n,y2:a}),[c,u]=VZ({pos:s,x1:n,y1:a,x2:e,y2:t}),[d,f,A,m]=Hme({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:o,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${o},${l} ${c},${u} ${n},${a}`,d,f,A,m]}const cH=w.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=_r.Bottom,targetPosition:s=_r.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:A,markerEnd:m,markerStart:g,interactionWidth:x})=>{const[v,y,N]=Qme({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s});return ft.createElement(jE,{path:v,labelX:y,labelY:N,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:A,markerEnd:m,markerStart:g,interactionWidth:x})});cH.displayName="SimpleBezierEdge";const $Z={[_r.Left]:{x:-1,y:0},[_r.Right]:{x:1,y:0},[_r.Top]:{x:0,y:-1},[_r.Bottom]:{x:0,y:1}},pht=({source:e,sourcePosition:t=_r.Bottom,target:r})=>t===_r.Left||t===_r.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},zZ=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function ght({source:e,sourcePosition:t=_r.Bottom,target:r,targetPosition:n=_r.Top,center:a,offset:s}){const o=$Z[t],l=$Z[n],c={x:e.x+o.x*s,y:e.y+o.y*s},u={x:r.x+l.x*s,y:r.y+l.y*s},d=pht({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",A=d[f];let m=[],g,x;const v={x:0,y:0},y={x:0,y:0},[N,C,_,j]=Ume({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(o[f]*l[f]===-1){g=a.x??N,x=a.y??C;const T=[{x:g,y:c.y},{x:g,y:u.y}],k=[{x:c.x,y:x},{x:u.x,y:x}];o[f]===A?m=f==="x"?T:k:m=f==="x"?k:T}else{const T=[{x:c.x,y:u.y}],k=[{x:u.x,y:c.y}];if(f==="x"?m=o.x===A?k:T:m=o.y===A?T:k,t===n){const L=Math.abs(e[f]-r[f]);if(L<=s){const H=Math.min(s-1,s-L);o[f]===A?v[f]=(c[f]>e[f]?-1:1)*H:y[f]=(u[f]>r[f]?-1:1)*H}}if(t!==n){const L=f==="x"?"y":"x",H=o[f]===l[L],q=c[L]>u[L],Q=c[L]<u[L];(o[f]===1&&(!H&&q||H&&Q)||o[f]!==1&&(!H&&Q||H&&q))&&(m=f==="x"?T:k)}const B={x:c.x+v.x,y:c.y+v.y},M={x:u.x+y.x,y:u.y+y.y},P=Math.max(Math.abs(B.x-m[0].x),Math.abs(M.x-m[0].x)),S=Math.max(Math.abs(B.y-m[0].y),Math.abs(M.y-m[0].y));P>=S?(g=(B.x+M.x)/2,x=m[0].y):(g=m[0].x,x=(B.y+M.y)/2)}return[[e,{x:c.x+v.x,y:c.y+v.y},...m,{x:u.x+y.x,y:u.y+y.y},r],g,x,_,j]}function xht(e,t,r,n){const a=Math.min(zZ(e,t)/2,zZ(t,r)/2,n),{x:s,y:o}=t;if(e.x===s&&s===r.x||e.y===o&&o===r.y)return`L${s} ${o}`;if(e.y===o){const u=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${s+a*u},${o}Q ${s},${o} ${s},${o+a*d}`}const l=e.x<r.x?1:-1,c=e.y<r.y?-1:1;return`L ${s},${o+a*c}Q ${s},${o} ${s+a*l},${o}`}function AL({sourceX:e,sourceY:t,sourcePosition:r=_r.Bottom,targetX:n,targetY:a,targetPosition:s=_r.Top,borderRadius:o=5,centerX:l,centerY:c,offset:u=20}){const[d,f,A,m,g]=ght({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:a},targetPosition:s,center:{x:l,y:c},offset:u});return[d.reduce((v,y,N)=>{let C="";return N>0&&N<d.length-1?C=xht(d[N-1],y,d[N+1],o):C=`${N===0?"M":"L"}${y.x} ${y.y}`,v+=C,v},""),f,A,m,g]}const QT=w.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=_r.Bottom,targetPosition:A=_r.Top,markerEnd:m,markerStart:g,pathOptions:x,interactionWidth:v})=>{const[y,N,C]=AL({sourceX:e,sourceY:t,sourcePosition:f,targetX:r,targetY:n,targetPosition:A,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset});return ft.createElement(jE,{path:y,labelX:N,labelY:C,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:m,markerStart:g,interactionWidth:v})});QT.displayName="SmoothStepEdge";const uH=w.memo(e=>{var t;return ft.createElement(QT,{...e,pathOptions:w.useMemo(()=>{var r;return{borderRadius:0,offset:(r=e.pathOptions)==null?void 0:r.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});uH.displayName="StepEdge";function vht({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[a,s,o,l]=Ume({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,a,s,o,l]}const dH=w.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:A,interactionWidth:m})=>{const[g,x,v]=vht({sourceX:e,sourceY:t,targetX:r,targetY:n});return ft.createElement(jE,{path:g,labelX:x,labelY:v,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:A,interactionWidth:m})});dH.displayName="StraightEdge";function Dk(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function GZ({pos:e,x1:t,y1:r,x2:n,y2:a,c:s}){switch(e){case _r.Left:return[t-Dk(t-n,s),r];case _r.Right:return[t+Dk(n-t,s),r];case _r.Top:return[t,r-Dk(r-a,s)];case _r.Bottom:return[t,r+Dk(a-r,s)]}}function Vme({sourceX:e,sourceY:t,sourcePosition:r=_r.Bottom,targetX:n,targetY:a,targetPosition:s=_r.Top,curvature:o=.25}){const[l,c]=GZ({pos:r,x1:e,y1:t,x2:n,y2:a,c:o}),[u,d]=GZ({pos:s,x1:n,y1:a,x2:e,y2:t,c:o}),[f,A,m,g]=Hme({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:l,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${l},${c} ${u},${d} ${n},${a}`,f,A,m,g]}const n4=w.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=_r.Bottom,targetPosition:s=_r.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:A,markerEnd:m,markerStart:g,pathOptions:x,interactionWidth:v})=>{const[y,N,C]=Vme({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s,curvature:x==null?void 0:x.curvature});return ft.createElement(jE,{path:y,labelX:N,labelY:C,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:A,markerEnd:m,markerStart:g,interactionWidth:v})});n4.displayName="BezierEdge";const fH=w.createContext(null),bht=fH.Provider;fH.Consumer;const yht=()=>w.useContext(fH),wht=e=>"id"in e&&"source"in e&&"target"in e,Nht=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`reactflow__edge-${e}${t||""}-${r}${n||""}`,mL=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`,Cht=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),Eht=(e,t)=>{if(!e.source||!e.target)return t;let r;return wht(e)?r={...e}:r={...e,id:Nht(e)},Cht(r,t)?t:t.concat(r)},pL=({x:e,y:t},[r,n,a],s,[o,l])=>{const c={x:(e-r)/a,y:(t-n)/a};return s?{x:o*Math.round(c.x/o),y:l*Math.round(c.y/l)}:c},$me=({x:e,y:t},[r,n,a])=>({x:e*a+r,y:t*a+n}),g1=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*t[0],n=(e.height??0)*t[1],a={x:e.position.x-r,y:e.position.y-n};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-n}:a}},hH=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,a)=>{const{x:s,y:o}=g1(a,t).positionAbsolute;return dht(n,lH({x:s,y:o,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return fht(r)},zme=(e,t,[r,n,a]=[0,0,1],s=!1,o=!1,l=[0,0])=>{const c={x:(t.x-r)/a,y:(t.y-n)/a,width:t.width/a,height:t.height/a},u=[];return e.forEach(d=>{const{width:f,height:A,selectable:m=!0,hidden:g=!1}=d;if(o&&!m||g)return!1;const{positionAbsolute:x}=g1(d,l),v={x:x.x,y:x.y,width:f||0,height:A||0},y=fL(c,v),N=typeof f>"u"||typeof A>"u"||f===null||A===null,C=s&&y>0,_=(f||0)*(A||0);(N||C||y>=_||d.dragging)&&u.push(d)}),u},Gme=(e,t)=>{const r=e.map(n=>n.id);return t.filter(n=>r.includes(n.source)||r.includes(n.target))},qme=(e,t,r,n,a,s=.1)=>{const o=t/(e.width*(1+s)),l=r/(e.height*(1+s)),c=Math.min(o,l),u=ty(c,n,a),d=e.x+e.width/2,f=e.y+e.height/2,A=t/2-d*u,m=r/2-f*u;return{x:A,y:m,zoom:u}},Fg=(e,t=0)=>e.transition().duration(t);function qZ(e,t,r,n){return(t[r]||[]).reduce((a,s)=>{var o,l;return`${e.id}-${s.id}-${r}`!==n&&a.push({id:s.id||null,type:r,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+s.x+s.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+s.y+s.height/2}),a},[])}function jht(e,t,r,n,a,s){const{x:o,y:l}=mp(e),u=t.elementsFromPoint(o,l).find(g=>g.classList.contains("react-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const x=AH(void 0,u),v=u.getAttribute("data-handleid"),y=s({nodeId:g,id:v,type:x});if(y){const N=a.find(C=>C.nodeId===g&&C.type===x&&C.id===v);return{handle:{id:v,type:x,nodeId:g,x:(N==null?void 0:N.x)||r.x,y:(N==null?void 0:N.y)||r.y},validHandleResult:y}}}}let d=[],f=1/0;if(a.forEach(g=>{const x=Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);if(x<=n){const v=s(g);x<=f&&(x<f?d=[{handle:g,validHandleResult:v}]:x===f&&d.push({handle:g,validHandleResult:v}),f=x)}}),!d.length)return{handle:null,validHandleResult:Kme()};if(d.length===1)return d[0];const A=d.some(({validHandleResult:g})=>g.isValid),m=d.some(({handle:g})=>g.type==="target");return d.find(({handle:g,validHandleResult:x})=>m?g.type==="target":A?x.isValid:!0)||d[0]}const kht={source:null,target:null,sourceHandle:null,targetHandle:null},Kme=()=>({handleDomNode:null,isValid:!1,connection:kht,endHandle:null});function Wme(e,t,r,n,a,s,o){const l=a==="target",c=o.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...Kme(),handleDomNode:c};if(c){const d=AH(void 0,c),f=c.getAttribute("data-nodeid"),A=c.getAttribute("data-handleid"),m=c.classList.contains("connectable"),g=c.classList.contains("connectableend"),x={source:l?f:r,sourceHandle:l?A:n,target:l?r:f,targetHandle:l?n:A};u.connection=x,m&&g&&(t===$x.Strict?l&&d==="source"||!l&&d==="target":f!==r||A!==n)&&(u.endHandle={nodeId:f,handleId:A,type:d},u.isValid=s(x))}return u}function Sht({nodes:e,nodeId:t,handleId:r,handleType:n}){return e.reduce((a,s)=>{if(s[Gs]){const{handleBounds:o}=s[Gs];let l=[],c=[];o&&(l=qZ(s,o,"source",`${t}-${r}-${n}`),c=qZ(s,o,"target",`${t}-${r}-${n}`)),a.push(...l,...c)}return a},[])}function AH(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function OO(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function _ht(e,t){let r=null;return t?r="valid":e&&!t&&(r="invalid"),r}function Xme({event:e,handleId:t,nodeId:r,onConnect:n,isTarget:a,getState:s,setState:o,isValidConnection:l,edgeUpdaterType:c,onReconnectEnd:u}){const d=Rme(e.target),{connectionMode:f,domNode:A,autoPanOnConnect:m,connectionRadius:g,onConnectStart:x,panBy:v,getNodes:y,cancelConnection:N}=s();let C=0,_;const{x:j,y:I}=mp(e),T=d==null?void 0:d.elementFromPoint(j,I),k=AH(c,T),B=A==null?void 0:A.getBoundingClientRect();if(!B||!k)return;let M,P=mp(e,B),S=!1,L=null,H=!1,q=null;const Q=Sht({nodes:y(),nodeId:r,handleId:t,handleType:k}),z=()=>{if(!m)return;const[U,Y]=Fme(P,B);v({x:U,y:Y}),C=requestAnimationFrame(z)};o({connectionPosition:P,connectionStatus:null,connectionNodeId:r,connectionHandleId:t,connectionHandleType:k,connectionStartHandle:{nodeId:r,handleId:t,type:k},connectionEndHandle:null}),x==null||x(e,{nodeId:r,handleId:t,handleType:k});function K(U){const{transform:Y}=s();P=mp(U,B);const{handle:R,validHandleResult:D}=jht(U,d,pL(P,Y,!1,[1,1]),g,Q,W=>Wme(W,f,r,t,a?"target":"source",l,d));if(_=R,S||(z(),S=!0),q=D.handleDomNode,L=D.connection,H=D.isValid,o({connectionPosition:_&&H?$me({x:_.x,y:_.y},Y):P,connectionStatus:_ht(!!_,H),connectionEndHandle:D.endHandle}),!_&&!H&&!q)return OO(M);L.source!==L.target&&q&&(OO(M),M=q,q.classList.add("connecting","react-flow__handle-connecting"),q.classList.toggle("valid",H),q.classList.toggle("react-flow__handle-valid",H))}function Z(U){var Y,R;(_||q)&&L&&H&&(n==null||n(L)),(R=(Y=s()).onConnectEnd)==null||R.call(Y,U),c&&(u==null||u(U)),OO(M),N(),cancelAnimationFrame(C),S=!1,H=!1,L=null,q=null,d.removeEventListener("mousemove",K),d.removeEventListener("mouseup",Z),d.removeEventListener("touchmove",K),d.removeEventListener("touchend",Z)}d.addEventListener("mousemove",K),d.addEventListener("mouseup",Z),d.addEventListener("touchmove",K),d.addEventListener("touchend",Z)}const KZ=()=>!0,Tht=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Bht=(e,t,r)=>n=>{const{connectionStartHandle:a,connectionEndHandle:s,connectionClickStartHandle:o}=n;return{connecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===r||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===r,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===r}},Yme=w.forwardRef(({type:e="source",position:t=_r.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:c,className:u,onMouseDown:d,onTouchStart:f,...A},m)=>{var B,M;const g=o||null,x=e==="target",v=wo(),y=yht(),{connectOnClick:N,noPanClassName:C}=Ts(Tht,Ll),{connecting:_,clickConnecting:j}=Ts(Bht(y,g,e),Ll);y||(M=(B=v.getState()).onError)==null||M.call(B,"010",DA.error010());const I=P=>{const{defaultEdgeOptions:S,onConnect:L,hasDefaultEdges:H}=v.getState(),q={...S,...P};if(H){const{edges:Q,setEdges:z}=v.getState();z(Eht(q,Q))}L==null||L(q),l==null||l(q)},T=P=>{if(!y)return;const S=Mme(P);a&&(S&&P.button===0||!S)&&Xme({event:P,handleId:g,nodeId:y,onConnect:I,isTarget:x,getState:v.getState,setState:v.setState,isValidConnection:r||v.getState().isValidConnection||KZ}),S?d==null||d(P):f==null||f(P)},k=P=>{const{onClickConnectStart:S,onClickConnectEnd:L,connectionClickStartHandle:H,connectionMode:q,isValidConnection:Q}=v.getState();if(!y||!H&&!a)return;if(!H){S==null||S(P,{nodeId:y,handleId:g,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:g}});return}const z=Rme(P.target),K=r||Q||KZ,{connection:Z,isValid:U}=Wme({nodeId:y,id:g,type:e},q,H.nodeId,H.handleId||null,H.type,K,z);U&&I(Z),L==null||L(P),v.setState({connectionClickStartHandle:null})};return ft.createElement("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":t,"data-id":`${y}-${g}-${e}`,className:ic(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",C,u,{source:!x,target:x,connectable:n,connectablestart:a,connectableend:s,connecting:j,connectionindicator:n&&(a&&!_||s&&_)}]),onMouseDown:T,onTouchStart:T,onClick:N?k:void 0,ref:m,...A},c)});Yme.displayName="Handle";var ry=w.memo(Yme);const Jme=({data:e,isConnectable:t,targetPosition:r=_r.Top,sourcePosition:n=_r.Bottom})=>ft.createElement(ft.Fragment,null,ft.createElement(ry,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,ft.createElement(ry,{type:"source",position:n,isConnectable:t}));Jme.displayName="DefaultNode";var gL=w.memo(Jme);const Zme=({data:e,isConnectable:t,sourcePosition:r=_r.Bottom})=>ft.createElement(ft.Fragment,null,e==null?void 0:e.label,ft.createElement(ry,{type:"source",position:r,isConnectable:t}));Zme.displayName="InputNode";var epe=w.memo(Zme);const tpe=({data:e,isConnectable:t,targetPosition:r=_r.Top})=>ft.createElement(ft.Fragment,null,ft.createElement(ry,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label);tpe.displayName="OutputNode";var rpe=w.memo(tpe);const mH=()=>null;mH.displayName="GroupNode";const Iht=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Ok=e=>e.id;function Dht(e,t){return Ll(e.selectedNodes.map(Ok),t.selectedNodes.map(Ok))&&Ll(e.selectedEdges.map(Ok),t.selectedEdges.map(Ok))}const npe=w.memo(({onSelectionChange:e})=>{const t=wo(),{selectedNodes:r,selectedEdges:n}=Ts(Iht,Dht);return w.useEffect(()=>{const a={nodes:r,edges:n};e==null||e(a),t.getState().onSelectionChange.forEach(s=>s(a))},[r,n,e]),null});npe.displayName="SelectionListener";const Oht=e=>!!e.onSelectionChange;function Pht({onSelectionChange:e}){const t=Ts(Oht);return e||t?ft.createElement(npe,{onSelectionChange:e}):null}const Fht=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function rb(e,t){w.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function jn(e,t,r){w.useEffect(()=>{typeof t<"u"&&r({[e]:t})},[t])}const Rht=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:a,onConnectStart:s,onConnectEnd:o,onClickConnectStart:l,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:A,edgesUpdatable:m,elevateNodesOnSelect:g,minZoom:x,maxZoom:v,nodeExtent:y,onNodesChange:N,onEdgesChange:C,elementsSelectable:_,connectionMode:j,snapGrid:I,snapToGrid:T,translateExtent:k,connectOnClick:B,defaultEdgeOptions:M,fitView:P,fitViewOptions:S,onNodesDelete:L,onEdgesDelete:H,onNodeDrag:q,onNodeDragStart:Q,onNodeDragStop:z,onSelectionDrag:K,onSelectionDragStart:Z,onSelectionDragStop:U,noPanClassName:Y,nodeOrigin:R,rfId:D,autoPanOnConnect:W,autoPanOnNodeDrag:J,onError:le,connectionRadius:ie,isValidConnection:re,nodeDragThreshold:ce})=>{const{setNodes:oe,setEdges:be,setDefaultNodesAndEdges:X,setMinZoom:je,setMaxZoom:De,setTranslateExtent:ke,setNodeExtent:ue,reset:we}=Ts(Fht,Ll),Ae=wo();return w.useEffect(()=>{const de=n==null?void 0:n.map(ae=>({...ae,...M}));return X(r,de),()=>{we()}},[]),jn("defaultEdgeOptions",M,Ae.setState),jn("connectionMode",j,Ae.setState),jn("onConnect",a,Ae.setState),jn("onConnectStart",s,Ae.setState),jn("onConnectEnd",o,Ae.setState),jn("onClickConnectStart",l,Ae.setState),jn("onClickConnectEnd",c,Ae.setState),jn("nodesDraggable",u,Ae.setState),jn("nodesConnectable",d,Ae.setState),jn("nodesFocusable",f,Ae.setState),jn("edgesFocusable",A,Ae.setState),jn("edgesUpdatable",m,Ae.setState),jn("elementsSelectable",_,Ae.setState),jn("elevateNodesOnSelect",g,Ae.setState),jn("snapToGrid",T,Ae.setState),jn("snapGrid",I,Ae.setState),jn("onNodesChange",N,Ae.setState),jn("onEdgesChange",C,Ae.setState),jn("connectOnClick",B,Ae.setState),jn("fitViewOnInit",P,Ae.setState),jn("fitViewOnInitOptions",S,Ae.setState),jn("onNodesDelete",L,Ae.setState),jn("onEdgesDelete",H,Ae.setState),jn("onNodeDrag",q,Ae.setState),jn("onNodeDragStart",Q,Ae.setState),jn("onNodeDragStop",z,Ae.setState),jn("onSelectionDrag",K,Ae.setState),jn("onSelectionDragStart",Z,Ae.setState),jn("onSelectionDragStop",U,Ae.setState),jn("noPanClassName",Y,Ae.setState),jn("nodeOrigin",R,Ae.setState),jn("rfId",D,Ae.setState),jn("autoPanOnConnect",W,Ae.setState),jn("autoPanOnNodeDrag",J,Ae.setState),jn("onError",le,Ae.setState),jn("connectionRadius",ie,Ae.setState),jn("isValidConnection",re,Ae.setState),jn("nodeDragThreshold",ce,Ae.setState),rb(e,oe),rb(t,be),rb(x,je),rb(v,De),rb(k,ke),rb(y,ue),null},WZ={display:"none"},Lht={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ape="react-flow__node-desc",spe="react-flow__edge-desc",Mht="react-flow__aria-live",Uht=e=>e.ariaLiveMessage;function Hht({rfId:e}){const t=Ts(Uht);return ft.createElement("div",{id:`${Mht}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Lht},t)}function Qht({rfId:e,disableKeyboardA11y:t}){return ft.createElement(ft.Fragment,null,ft.createElement("div",{id:`${ape}-${e}`,style:WZ},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),ft.createElement("div",{id:`${spe}-${e}`,style:WZ},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&ft.createElement(Hht,{rfId:e}))}var bC=(e=null,t={actInsideInputWithModifier:!0})=>{const[r,n]=w.useState(!1),a=w.useRef(!1),s=w.useRef(new Set([])),[o,l]=w.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,A)=>f.concat(...A),[]);return[u,d]}return[[],[]]},[e]);return w.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=m=>{if(a.current=m.ctrlKey||m.metaKey||m.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&hL(m))return!1;const x=YZ(m.code,l);s.current.add(m[x]),XZ(o,s.current,!1)&&(m.preventDefault(),n(!0))},f=m=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&hL(m))return!1;const x=YZ(m.code,l);XZ(o,s.current,!0)?(n(!1),s.current.clear()):s.current.delete(m[x]),m.key==="Meta"&&s.current.clear(),a.current=!1},A=()=>{s.current.clear(),n(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",A),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",A)}}},[e,n]),r};function XZ(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(a=>t.has(a)))}function YZ(e,t){return t.includes(e)?"code":"key"}function ipe(e,t,r,n){var l,c;const a=e.parentNode||e.parentId;if(!a)return r;const s=t.get(a),o=g1(s,n);return ipe(s,t,{x:(r.x??0)+o.x,y:(r.y??0)+o.y,z:(((l=s[Gs])==null?void 0:l.z)??0)>(r.z??0)?((c=s[Gs])==null?void 0:c.z)??0:r.z??0},n)}function ope(e,t,r){e.forEach(n=>{var s;const a=n.parentNode||n.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||r!=null&&r[n.id]){const{x:o,y:l,z:c}=ipe(n,e,{...n.position,z:((s=n[Gs])==null?void 0:s.z)??0},t);n.positionAbsolute={x:o,y:l},n[Gs].z=c,r!=null&&r[n.id]&&(n[Gs].isParent=!0)}})}function PO(e,t,r,n){const a=new Map,s={},o=n?1e3:0;return e.forEach(l=>{var m;const c=(kd(l.zIndex)?l.zIndex:0)+(l.selected?o:0),u=t.get(l.id),d={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},f=l.parentNode||l.parentId;f&&(s[f]=!0);const A=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==l.type;Object.defineProperty(d,Gs,{enumerable:!1,value:{handleBounds:A||(m=u==null?void 0:u[Gs])==null?void 0:m.handleBounds,z:c}}),a.set(l.id,d)}),ope(a,r,s),a}function lpe(e,t={}){const{getNodes:r,width:n,height:a,minZoom:s,maxZoom:o,d3Zoom:l,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),A=t.initial&&!u&&d;if(l&&c&&(A||!t.initial)){const g=r().filter(v=>{var N;const y=t.includeHiddenNodes?v.width&&v.height:!v.hidden;return(N=t.nodes)!=null&&N.length?y&&t.nodes.some(C=>C.id===v.id):y}),x=g.every(v=>v.width&&v.height);if(g.length>0&&x){const v=hH(g,f),{x:y,y:N,zoom:C}=qme(v,n,a,t.minZoom??s,t.maxZoom??o,t.padding??.1),_=Ap.translate(y,N).scale(C);return typeof t.duration=="number"&&t.duration>0?l.transform(Fg(c,t.duration),_):l.transform(c,_),!0}}return!1}function Vht(e,t){return e.forEach(r=>{const n=t.get(r.id);n&&t.set(n.id,{...n,[Gs]:n[Gs],selected:r.selected})}),new Map(t)}function $ht(e,t){return t.map(r=>{const n=e.find(a=>a.id===r.id);return n&&(r.selected=n.selected),r})}function Pk({changedNodes:e,changedEdges:t,get:r,set:n}){const{nodeInternals:a,edges:s,onNodesChange:o,onEdgesChange:l,hasDefaultNodes:c,hasDefaultEdges:u}=r();e!=null&&e.length&&(c&&n({nodeInternals:Vht(e,a)}),o==null||o(e)),t!=null&&t.length&&(u&&n({edges:$ht(t,s)}),l==null||l(t))}const nb=()=>{},zht={zoomIn:nb,zoomOut:nb,zoomTo:nb,getZoom:()=>1,setViewport:nb,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:nb,fitBounds:nb,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Ght=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),qht=()=>{const e=wo(),{d3Zoom:t,d3Selection:r}=Ts(Ght,Ll);return w.useMemo(()=>r&&t?{zoomIn:a=>t.scaleBy(Fg(r,a==null?void 0:a.duration),1.2),zoomOut:a=>t.scaleBy(Fg(r,a==null?void 0:a.duration),1/1.2),zoomTo:(a,s)=>t.scaleTo(Fg(r,s==null?void 0:s.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,s)=>{const[o,l,c]=e.getState().transform,u=Ap.translate(a.x??o,a.y??l).scale(a.zoom??c);t.transform(Fg(r,s==null?void 0:s.duration),u)},getViewport:()=>{const[a,s,o]=e.getState().transform;return{x:a,y:s,zoom:o}},fitView:a=>lpe(e.getState,a),setCenter:(a,s,o)=>{const{width:l,height:c,maxZoom:u}=e.getState(),d=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:u,f=l/2-a*d,A=c/2-s*d,m=Ap.translate(f,A).scale(d);t.transform(Fg(r,o==null?void 0:o.duration),m)},fitBounds:(a,s)=>{const{width:o,height:l,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:A}=qme(a,o,l,c,u,(s==null?void 0:s.padding)??.1),m=Ap.translate(d,f).scale(A);t.transform(Fg(r,s==null?void 0:s.duration),m)},project:a=>{const{transform:s,snapToGrid:o,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),pL(a,s,o,l)},screenToFlowPosition:a=>{const{transform:s,snapToGrid:o,snapGrid:l,domNode:c}=e.getState();if(!c)return a;const{x:u,y:d}=c.getBoundingClientRect(),f={x:a.x-u,y:a.y-d};return pL(f,s,o,l)},flowToScreenPosition:a=>{const{transform:s,domNode:o}=e.getState();if(!o)return a;const{x:l,y:c}=o.getBoundingClientRect(),u=$me(a,s);return{x:u.x+l,y:u.y+c}},viewportInitialized:!0}:zht,[t,r])};function VT(){const e=qht(),t=wo(),r=w.useCallback(()=>t.getState().getNodes().map(x=>({...x})),[]),n=w.useCallback(x=>t.getState().nodeInternals.get(x),[]),a=w.useCallback(()=>{const{edges:x=[]}=t.getState();return x.map(v=>({...v}))},[]),s=w.useCallback(x=>{const{edges:v=[]}=t.getState();return v.find(y=>y.id===x)},[]),o=w.useCallback(x=>{const{getNodes:v,setNodes:y,hasDefaultNodes:N,onNodesChange:C}=t.getState(),_=v(),j=typeof x=="function"?x(_):x;if(N)y(j);else if(C){const I=j.length===0?_.map(T=>({type:"remove",id:T.id})):j.map(T=>({item:T,type:"reset"}));C(I)}},[]),l=w.useCallback(x=>{const{edges:v=[],setEdges:y,hasDefaultEdges:N,onEdgesChange:C}=t.getState(),_=typeof x=="function"?x(v):x;if(N)y(_);else if(C){const j=_.length===0?v.map(I=>({type:"remove",id:I.id})):_.map(I=>({item:I,type:"reset"}));C(j)}},[]),c=w.useCallback(x=>{const v=Array.isArray(x)?x:[x],{getNodes:y,setNodes:N,hasDefaultNodes:C,onNodesChange:_}=t.getState();if(C){const I=[...y(),...v];N(I)}else if(_){const j=v.map(I=>({item:I,type:"add"}));_(j)}},[]),u=w.useCallback(x=>{const v=Array.isArray(x)?x:[x],{edges:y=[],setEdges:N,hasDefaultEdges:C,onEdgesChange:_}=t.getState();if(C)N([...y,...v]);else if(_){const j=v.map(I=>({item:I,type:"add"}));_(j)}},[]),d=w.useCallback(()=>{const{getNodes:x,edges:v=[],transform:y}=t.getState(),[N,C,_]=y;return{nodes:x().map(j=>({...j})),edges:v.map(j=>({...j})),viewport:{x:N,y:C,zoom:_}}},[]),f=w.useCallback(({nodes:x,edges:v})=>{const{nodeInternals:y,getNodes:N,edges:C,hasDefaultNodes:_,hasDefaultEdges:j,onNodesDelete:I,onEdgesDelete:T,onNodesChange:k,onEdgesChange:B}=t.getState(),M=(x||[]).map(q=>q.id),P=(v||[]).map(q=>q.id),S=N().reduce((q,Q)=>{const z=Q.parentNode||Q.parentId,K=!M.includes(Q.id)&&z&&q.find(U=>U.id===z);return(typeof Q.deletable=="boolean"?Q.deletable:!0)&&(M.includes(Q.id)||K)&&q.push(Q),q},[]),L=C.filter(q=>typeof q.deletable=="boolean"?q.deletable:!0),H=L.filter(q=>P.includes(q.id));if(S||H){const q=Gme(S,L),Q=[...H,...q],z=Q.reduce((K,Z)=>(K.includes(Z.id)||K.push(Z.id),K),[]);if((j||_)&&(j&&t.setState({edges:C.filter(K=>!z.includes(K.id))}),_&&(S.forEach(K=>{y.delete(K.id)}),t.setState({nodeInternals:new Map(y)}))),z.length>0&&(T==null||T(Q),B&&B(z.map(K=>({id:K,type:"remove"})))),S.length>0&&(I==null||I(S),k)){const K=S.map(Z=>({id:Z.id,type:"remove"}));k(K)}}},[]),A=w.useCallback(x=>{const v=hht(x),y=v?null:t.getState().nodeInternals.get(x.id);return!v&&!y?[null,null,v]:[v?x:QZ(y),y,v]},[]),m=w.useCallback((x,v=!0,y)=>{const[N,C,_]=A(x);return N?(y||t.getState().getNodes()).filter(j=>{if(!_&&(j.id===C.id||!j.positionAbsolute))return!1;const I=QZ(j),T=fL(I,N);return v&&T>0||T>=N.width*N.height}):[]},[]),g=w.useCallback((x,v,y=!0)=>{const[N]=A(x);if(!N)return!1;const C=fL(N,v);return y&&C>0||C>=N.width*N.height},[]);return w.useMemo(()=>({...e,getNodes:r,getNode:n,getEdges:a,getEdge:s,setNodes:o,setEdges:l,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:m,isNodeIntersecting:g}),[e,r,n,a,s,o,l,c,u,d,f,m,g])}const Kht={actInsideInputWithModifier:!1};var Wht=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const r=wo(),{deleteElements:n}=VT(),a=bC(e,Kht),s=bC(t);w.useEffect(()=>{if(a){const{edges:o,getNodes:l}=r.getState(),c=l().filter(d=>d.selected),u=o.filter(d=>d.selected);n({nodes:c,edges:u}),r.setState({nodesSelectionActive:!1})}},[a]),w.useEffect(()=>{r.setState({multiSelectionActive:s})},[s])};function Xht(e){const t=wo();w.useEffect(()=>{let r;const n=()=>{var s,o;if(!e.current)return;const a=iH(e.current);(a.height===0||a.width===0)&&((o=(s=t.getState()).onError)==null||o.call(s,"004",DA.error004())),t.setState({width:a.width||500,height:a.height||500})};return n(),window.addEventListener("resize",n),e.current&&(r=new ResizeObserver(()=>n()),r.observe(e.current)),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}},[])}const pH={position:"absolute",width:"100%",height:"100%",top:0,left:0},Yht=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Fk=e=>({x:e.x,y:e.y,zoom:e.k}),ab=(e,t)=>e.target.closest(`.${t}`),JZ=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),ZZ=e=>{const t=e.ctrlKey&&t4()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Jht=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Zht=({onMove:e,onMoveStart:t,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:o=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=tx.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:A,translateExtent:m,minZoom:g,maxZoom:x,zoomActivationKeyCode:v,preventScrolling:y=!0,children:N,noWheelClassName:C,noPanClassName:_})=>{const j=w.useRef(),I=wo(),T=w.useRef(!1),k=w.useRef(!1),B=w.useRef(null),M=w.useRef({x:0,y:0,zoom:0}),{d3Zoom:P,d3Selection:S,d3ZoomHandler:L,userSelectionActive:H}=Ts(Jht,Ll),q=bC(v),Q=w.useRef(0),z=w.useRef(!1),K=w.useRef();return Xht(B),w.useEffect(()=>{if(B.current){const Z=B.current.getBoundingClientRect(),U=sht().scaleExtent([g,x]).translateExtent(m),Y=Nd(B.current).call(U),R=Ap.translate(A.x,A.y).scale(ty(A.zoom,g,x)),D=[[0,0],[Z.width,Z.height]],W=U.constrain()(R,D,m);U.transform(Y,W),U.wheelDelta(ZZ),I.setState({d3Zoom:U,d3Selection:Y,d3ZoomHandler:Y.on("wheel.zoom"),transform:[W.x,W.y,W.k],domNode:B.current.closest(".react-flow")})}},[]),w.useEffect(()=>{S&&P&&(o&&!q&&!H?S.on("wheel.zoom",Z=>{if(ab(Z,C))return!1;Z.preventDefault(),Z.stopImmediatePropagation();const U=S.property("__zoom").k||1;if(Z.ctrlKey&&s){const re=jh(Z),ce=ZZ(Z),oe=U*Math.pow(2,ce);P.scaleTo(S,oe,re,Z);return}const Y=Z.deltaMode===1?20:1;let R=c===tx.Vertical?0:Z.deltaX*Y,D=c===tx.Horizontal?0:Z.deltaY*Y;!t4()&&Z.shiftKey&&c!==tx.Vertical&&(R=Z.deltaY*Y,D=0),P.translateBy(S,-(R/U)*l,-(D/U)*l,{internal:!0});const W=Fk(S.property("__zoom")),{onViewportChangeStart:J,onViewportChange:le,onViewportChangeEnd:ie}=I.getState();clearTimeout(K.current),z.current||(z.current=!0,t==null||t(Z,W),J==null||J(W)),z.current&&(e==null||e(Z,W),le==null||le(W),K.current=setTimeout(()=>{r==null||r(Z,W),ie==null||ie(W),z.current=!1},150))},{passive:!1}):typeof L<"u"&&S.on("wheel.zoom",function(Z,U){if(!y&&Z.type==="wheel"&&!Z.ctrlKey||ab(Z,C))return null;Z.preventDefault(),L.call(this,Z,U)},{passive:!1}))},[H,o,c,S,P,L,q,s,y,C,t,e,r]),w.useEffect(()=>{P&&P.on("start",Z=>{var R,D;if(!Z.sourceEvent||Z.sourceEvent.internal)return null;Q.current=(R=Z.sourceEvent)==null?void 0:R.button;const{onViewportChangeStart:U}=I.getState(),Y=Fk(Z.transform);T.current=!0,M.current=Y,((D=Z.sourceEvent)==null?void 0:D.type)==="mousedown"&&I.setState({paneDragging:!0}),U==null||U(Y),t==null||t(Z.sourceEvent,Y)})},[P,t]),w.useEffect(()=>{P&&(H&&!T.current?P.on("zoom",null):H||P.on("zoom",Z=>{var Y;const{onViewportChange:U}=I.getState();if(I.setState({transform:[Z.transform.x,Z.transform.y,Z.transform.k]}),k.current=!!(n&&JZ(f,Q.current??0)),(e||U)&&!((Y=Z.sourceEvent)!=null&&Y.internal)){const R=Fk(Z.transform);U==null||U(R),e==null||e(Z.sourceEvent,R)}}))},[H,P,e,f,n]),w.useEffect(()=>{P&&P.on("end",Z=>{if(!Z.sourceEvent||Z.sourceEvent.internal)return null;const{onViewportChangeEnd:U}=I.getState();if(T.current=!1,I.setState({paneDragging:!1}),n&&JZ(f,Q.current??0)&&!k.current&&n(Z.sourceEvent),k.current=!1,(r||U)&&Yht(M.current,Z.transform)){const Y=Fk(Z.transform);M.current=Y,clearTimeout(j.current),j.current=setTimeout(()=>{U==null||U(Y),r==null||r(Z.sourceEvent,Y)},o?150:0)}})},[P,o,f,r,n]),w.useEffect(()=>{P&&P.filter(Z=>{const U=q||a,Y=s&&Z.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&Z.button===1&&Z.type==="mousedown"&&(ab(Z,"react-flow__node")||ab(Z,"react-flow__edge")))return!0;if(!f&&!U&&!o&&!u&&!s||H||!u&&Z.type==="dblclick"||ab(Z,C)&&Z.type==="wheel"||ab(Z,_)&&(Z.type!=="wheel"||o&&Z.type==="wheel"&&!q)||!s&&Z.ctrlKey&&Z.type==="wheel"||!U&&!o&&!Y&&Z.type==="wheel"||!f&&(Z.type==="mousedown"||Z.type==="touchstart")||Array.isArray(f)&&!f.includes(Z.button)&&Z.type==="mousedown")return!1;const R=Array.isArray(f)&&f.includes(Z.button)||!Z.button||Z.button<=1;return(!Z.ctrlKey||Z.type==="wheel")&&R})},[H,P,a,s,o,u,f,d,q]),ft.createElement("div",{className:"react-flow__renderer",ref:B,style:pH},N)},e0t=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function t0t(){const{userSelectionActive:e,userSelectionRect:t}=Ts(e0t,Ll);return e&&t?ft.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function eee(e,t){const r=t.parentNode||t.parentId,n=e.find(a=>a.id===r);if(n){const a=t.position.x+t.width-n.width,s=t.position.y+t.height-n.height;if(a>0||s>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),s>0&&(n.style.height+=s),t.position.x<0){const o=Math.abs(t.position.x);n.position.x=n.position.x-o,n.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);n.position.y=n.position.y-o,n.style.height+=o,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function cpe(e,t){if(e.some(n=>n.type==="reset"))return e.filter(n=>n.type==="reset").map(n=>n.item);const r=e.filter(n=>n.type==="add").map(n=>n.item);return t.reduce((n,a)=>{const s=e.filter(l=>l.id===a.id);if(s.length===0)return n.push(a),n;const o={...a};for(const l of s)if(l)switch(l.type){case"select":{o.selected=l.selected;break}case"position":{typeof l.position<"u"&&(o.position=l.position),typeof l.positionAbsolute<"u"&&(o.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(o.dragging=l.dragging),o.expandParent&&eee(n,o);break}case"dimensions":{typeof l.dimensions<"u"&&(o.width=l.dimensions.width,o.height=l.dimensions.height),typeof l.updateStyle<"u"&&(o.style={...o.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(o.resizing=l.resizing),o.expandParent&&eee(n,o);break}case"remove":return n}return n.push(o),n},r)}function upe(e,t){return cpe(e,t)}function r0t(e,t){return cpe(e,t)}const Qm=(e,t)=>({id:e,type:"select",selected:t});function Mb(e,t){return e.reduce((r,n)=>{const a=t.includes(n.id);return!n.selected&&a?(n.selected=!0,r.push(Qm(n.id,!0))):n.selected&&!a&&(n.selected=!1,r.push(Qm(n.id,!1))),r},[])}const FO=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},n0t=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),dpe=w.memo(({isSelecting:e,selectionMode:t=vC.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:o,onPaneScroll:l,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const A=w.useRef(null),m=wo(),g=w.useRef(0),x=w.useRef(0),v=w.useRef(),{userSelectionActive:y,elementsSelectable:N,dragging:C}=Ts(n0t,Ll),_=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,x.current=0},j=L=>{s==null||s(L),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},I=L=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){L.preventDefault();return}o==null||o(L)},T=l?L=>l(L):void 0,k=L=>{const{resetSelectedElements:H,domNode:q}=m.getState();if(v.current=q==null?void 0:q.getBoundingClientRect(),!N||!e||L.button!==0||L.target!==A.current||!v.current)return;const{x:Q,y:z}=mp(L,v.current);H(),m.setState({userSelectionRect:{width:0,height:0,startX:Q,startY:z,x:Q,y:z}}),n==null||n(L)},B=L=>{const{userSelectionRect:H,nodeInternals:q,edges:Q,transform:z,onNodesChange:K,onEdgesChange:Z,nodeOrigin:U,getNodes:Y}=m.getState();if(!e||!v.current||!H)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const R=mp(L,v.current),D=H.startX??0,W=H.startY??0,J={...H,x:R.x<D?R.x:D,y:R.y<W?R.y:W,width:Math.abs(R.x-D),height:Math.abs(R.y-W)},le=Y(),ie=zme(q,J,z,t===vC.Partial,!0,U),re=Gme(ie,Q).map(oe=>oe.id),ce=ie.map(oe=>oe.id);if(g.current!==ce.length){g.current=ce.length;const oe=Mb(le,ce);oe.length&&(K==null||K(oe))}if(x.current!==re.length){x.current=re.length;const oe=Mb(Q,re);oe.length&&(Z==null||Z(oe))}m.setState({userSelectionRect:J})},M=L=>{if(L.button!==0)return;const{userSelectionRect:H}=m.getState();!y&&H&&L.target===A.current&&(j==null||j(L)),m.setState({nodesSelectionActive:g.current>0}),_(),a==null||a(L)},P=L=>{y&&(m.setState({nodesSelectionActive:g.current>0}),a==null||a(L)),_()},S=N&&(e||y);return ft.createElement("div",{className:ic(["react-flow__pane",{dragging:C,selection:e}]),onClick:S?void 0:FO(j,A),onContextMenu:FO(I,A),onWheel:FO(T,A),onMouseEnter:S?void 0:c,onMouseDown:S?k:void 0,onMouseMove:S?B:u,onMouseUp:S?M:void 0,onMouseLeave:S?P:d,ref:A,style:pH},f,ft.createElement(t0t,null))});dpe.displayName="Pane";function fpe(e,t){const r=e.parentNode||e.parentId;if(!r)return!1;const n=t.get(r);return n?n.selected?!0:fpe(n,t):!1}function tee(e,t,r){let n=e;do{if(n!=null&&n.matches(t))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function a0t(e,t,r,n){return Array.from(e.values()).filter(a=>(a.selected||a.id===n)&&(!a.parentNode||a.parentId||!fpe(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var s,o;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((s=a.positionAbsolute)==null?void 0:s.x)??0),y:r.y-(((o=a.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function s0t(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function hpe(e,t,r,n,a=[0,0],s){const o=s0t(e,e.extent||n);let l=o;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=r.get(c),{x:A,y:m}=g1(f,a).positionAbsolute;l=f&&kd(A)&&kd(m)&&kd(f.width)&&kd(f.height)?[[A+e.width*a[0],m+e.height*a[1]],[A+f.width-e.width+e.width*a[0],m+f.height-e.height+e.height*a[1]]]:l}else s==null||s("005",DA.error005()),l=o;else if(e.extent&&c&&e.extent!=="parent"){const f=r.get(c),{x:A,y:m}=g1(f,a).positionAbsolute;l=[[e.extent[0][0]+A,e.extent[0][1]+m],[e.extent[1][0]+A,e.extent[1][1]+m]]}let u={x:0,y:0};if(c){const f=r.get(c);u=g1(f,a).positionAbsolute}const d=l&&l!=="parent"?oH(t,l):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function RO({nodeId:e,dragItems:t,nodeInternals:r}){const n=t.map(a=>({...r.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?n.find(a=>a.id===e):n[0],n]}const ree=(e,t,r,n)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const s=Array.from(a),o=t.getBoundingClientRect(),l={x:o.width*n[0],y:o.height*n[1]};return s.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-o.left-l.x)/r,y:(u.top-o.top-l.y)/r,...iH(c)}})};function Zw(e,t,r){return r===void 0?r:n=>{const a=t().nodeInternals.get(e);a&&r(n,{...a})}}function xL({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:o,nodeInternals:l,onError:c}=t.getState(),u=l.get(e);if(!u){c==null||c("012",DA.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&o)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):a([e])}function i0t(){const e=wo();return w.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:a,snapToGrid:s}=e.getState(),o=r.touches?r.touches[0].clientX:r.clientX,l=r.touches?r.touches[0].clientY:r.clientY,c={x:(o-n[0])/n[2],y:(l-n[1])/n[2]};return{xSnapped:s?a[0]*Math.round(c.x/a[0]):c.x,ySnapped:s?a[1]*Math.round(c.y/a[1]):c.y,...c}},[])}function LO(e){return(t,r,n)=>e==null?void 0:e(t,n)}function Ape({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:a,isSelectable:s,selectNodesOnDrag:o}){const l=wo(),[c,u]=w.useState(!1),d=w.useRef([]),f=w.useRef({x:null,y:null}),A=w.useRef(0),m=w.useRef(null),g=w.useRef({x:0,y:0}),x=w.useRef(null),v=w.useRef(!1),y=w.useRef(!1),N=w.useRef(!1),C=i0t();return w.useEffect(()=>{if(e!=null&&e.current){const _=Nd(e.current),j=({x:k,y:B})=>{const{nodeInternals:M,onNodeDrag:P,onSelectionDrag:S,updateNodePositions:L,nodeExtent:H,snapGrid:q,snapToGrid:Q,nodeOrigin:z,onError:K}=l.getState();f.current={x:k,y:B};let Z=!1,U={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&H){const R=hH(d.current,z);U=lH(R)}if(d.current=d.current.map(R=>{const D={x:k-R.distance.x,y:B-R.distance.y};Q&&(D.x=q[0]*Math.round(D.x/q[0]),D.y=q[1]*Math.round(D.y/q[1]));const W=[[H[0][0],H[0][1]],[H[1][0],H[1][1]]];d.current.length>1&&H&&!R.extent&&(W[0][0]=R.positionAbsolute.x-U.x+H[0][0],W[1][0]=R.positionAbsolute.x+(R.width??0)-U.x2+H[1][0],W[0][1]=R.positionAbsolute.y-U.y+H[0][1],W[1][1]=R.positionAbsolute.y+(R.height??0)-U.y2+H[1][1]);const J=hpe(R,D,M,W,z,K);return Z=Z||R.position.x!==J.position.x||R.position.y!==J.position.y,R.position=J.position,R.positionAbsolute=J.positionAbsolute,R}),!Z)return;L(d.current,!0,!0),u(!0);const Y=a?P:LO(S);if(Y&&x.current){const[R,D]=RO({nodeId:a,dragItems:d.current,nodeInternals:M});Y(x.current,R,D)}},I=()=>{if(!m.current)return;const[k,B]=Fme(g.current,m.current);if(k!==0||B!==0){const{transform:M,panBy:P}=l.getState();f.current.x=(f.current.x??0)-k/M[2],f.current.y=(f.current.y??0)-B/M[2],P({x:k,y:B})&&j(f.current)}A.current=requestAnimationFrame(I)},T=k=>{var z;const{nodeInternals:B,multiSelectionActive:M,nodesDraggable:P,unselectNodesAndEdges:S,onNodeDragStart:L,onSelectionDragStart:H}=l.getState();y.current=!0;const q=a?L:LO(H);(!o||!s)&&!M&&a&&((z=B.get(a))!=null&&z.selected||S()),a&&s&&o&&xL({id:a,store:l,nodeRef:e});const Q=C(k);if(f.current=Q,d.current=a0t(B,P,Q,a),q&&d.current){const[K,Z]=RO({nodeId:a,dragItems:d.current,nodeInternals:B});q(k.sourceEvent,K,Z)}};if(t)_.on(".drag",null);else{const k=Hdt().on("start",B=>{const{domNode:M,nodeDragThreshold:P}=l.getState();P===0&&T(B),N.current=!1;const S=C(B);f.current=S,m.current=(M==null?void 0:M.getBoundingClientRect())||null,g.current=mp(B.sourceEvent,m.current)}).on("drag",B=>{var L,H;const M=C(B),{autoPanOnNodeDrag:P,nodeDragThreshold:S}=l.getState();if(B.sourceEvent.type==="touchmove"&&B.sourceEvent.touches.length>1&&(N.current=!0),!N.current){if(!v.current&&y.current&&P&&(v.current=!0,I()),!y.current){const q=M.xSnapped-(((L=f==null?void 0:f.current)==null?void 0:L.x)??0),Q=M.ySnapped-(((H=f==null?void 0:f.current)==null?void 0:H.y)??0);Math.sqrt(q*q+Q*Q)>S&&T(B)}(f.current.x!==M.xSnapped||f.current.y!==M.ySnapped)&&d.current&&y.current&&(x.current=B.sourceEvent,g.current=mp(B.sourceEvent,m.current),j(M))}}).on("end",B=>{if(!(!y.current||N.current)&&(u(!1),v.current=!1,y.current=!1,cancelAnimationFrame(A.current),d.current)){const{updateNodePositions:M,nodeInternals:P,onNodeDragStop:S,onSelectionDragStop:L}=l.getState(),H=a?S:LO(L);if(M(d.current,!1,!1),H){const[q,Q]=RO({nodeId:a,dragItems:d.current,nodeInternals:P});H(B.sourceEvent,q,Q)}}}).filter(B=>{const M=B.target;return!B.button&&(!r||!tee(M,`.${r}`,e))&&(!n||tee(M,n,e))});return _.call(k),()=>{_.on(".drag",null)}}}},[e,t,r,n,s,l,a,o,C]),c}function mpe(){const e=wo();return w.useCallback(r=>{const{nodeInternals:n,nodeExtent:a,updateNodePositions:s,getNodes:o,snapToGrid:l,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=o().filter(N=>N.selected&&(N.draggable||d&&typeof N.draggable>"u")),A=l?c[0]:5,m=l?c[1]:5,g=r.isShiftPressed?4:1,x=r.x*A*g,v=r.y*m*g,y=f.map(N=>{if(N.positionAbsolute){const C={x:N.positionAbsolute.x+x,y:N.positionAbsolute.y+v};l&&(C.x=c[0]*Math.round(C.x/c[0]),C.y=c[1]*Math.round(C.y/c[1]));const{positionAbsolute:_,position:j}=hpe(N,C,n,a,void 0,u);N.position=j,N.positionAbsolute=_}return N});s(y,!0,!1)},[])}const x1={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var e2=e=>{const t=({id:r,type:n,data:a,xPos:s,yPos:o,xPosOrigin:l,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:A,onMouseLeave:m,onContextMenu:g,onDoubleClick:x,style:v,className:y,isDraggable:N,isSelectable:C,isConnectable:_,isFocusable:j,selectNodesOnDrag:I,sourcePosition:T,targetPosition:k,hidden:B,resizeObserver:M,dragHandle:P,zIndex:S,isParent:L,noDragClassName:H,noPanClassName:q,initialized:Q,disableKeyboardA11y:z,ariaLabel:K,rfId:Z,hasHandleBounds:U})=>{const Y=wo(),R=w.useRef(null),D=w.useRef(null),W=w.useRef(T),J=w.useRef(k),le=w.useRef(n),ie=C||N||d||f||A||m,re=mpe(),ce=Zw(r,Y.getState,f),oe=Zw(r,Y.getState,A),be=Zw(r,Y.getState,m),X=Zw(r,Y.getState,g),je=Zw(r,Y.getState,x),De=we=>{const{nodeDragThreshold:Ae}=Y.getState();if(C&&(!I||!N||Ae>0)&&xL({id:r,store:Y,nodeRef:R}),d){const de=Y.getState().nodeInternals.get(r);de&&d(we,{...de})}},ke=we=>{if(!hL(we)&&!z)if(Lme.includes(we.key)&&C){const Ae=we.key==="Escape";xL({id:r,store:Y,unselect:Ae,nodeRef:R})}else N&&u&&Object.prototype.hasOwnProperty.call(x1,we.key)&&(Y.setState({ariaLiveMessage:`Moved selected node ${we.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~o}`}),re({x:x1[we.key].x,y:x1[we.key].y,isShiftPressed:we.shiftKey}))};w.useEffect(()=>()=>{D.current&&(M==null||M.unobserve(D.current),D.current=null)},[]),w.useEffect(()=>{if(R.current&&!B){const we=R.current;(!Q||!U||D.current!==we)&&(D.current&&(M==null||M.unobserve(D.current)),M==null||M.observe(we),D.current=we)}},[B,Q,U]),w.useEffect(()=>{const we=le.current!==n,Ae=W.current!==T,de=J.current!==k;R.current&&(we||Ae||de)&&(we&&(le.current=n),Ae&&(W.current=T),de&&(J.current=k),Y.getState().updateNodeDimensions([{id:r,nodeElement:R.current,forceUpdate:!0}]))},[r,n,T,k]);const ue=Ape({nodeRef:R,disabled:B||!N,noDragClassName:H,handleSelector:P,nodeId:r,isSelectable:C,selectNodesOnDrag:I});return B?null:ft.createElement("div",{className:ic(["react-flow__node",`react-flow__node-${n}`,{[q]:N},y,{selected:u,selectable:C,parent:L,dragging:ue}]),ref:R,style:{zIndex:S,transform:`translate(${l}px,${c}px)`,pointerEvents:ie?"all":"none",visibility:Q?"visible":"hidden",...v},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:ce,onMouseMove:oe,onMouseLeave:be,onContextMenu:X,onClick:De,onDoubleClick:je,onKeyDown:j?ke:void 0,tabIndex:j?0:void 0,role:j?"button":void 0,"aria-describedby":z?void 0:`${ape}-${Z}`,"aria-label":K},ft.createElement(bht,{value:r},ft.createElement(e,{id:r,data:a,type:n,xPos:s,yPos:o,selected:u,isConnectable:_,sourcePosition:T,targetPosition:k,dragging:ue,dragHandle:P,zIndex:S})))};return t.displayName="NodeWrapper",w.memo(t)};const o0t=e=>{const t=e.getNodes().filter(r=>r.selected);return{...hH(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function l0t({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=wo(),{width:a,height:s,x:o,y:l,transformString:c,userSelectionActive:u}=Ts(o0t,Ll),d=mpe(),f=w.useRef(null);if(w.useEffect(()=>{var g;r||(g=f.current)==null||g.focus({preventScroll:!0})},[r]),Ape({nodeRef:f}),u||!a||!s)return null;const A=e?g=>{const x=n.getState().getNodes().filter(v=>v.selected);e(g,x)}:void 0,m=g=>{Object.prototype.hasOwnProperty.call(x1,g.key)&&d({x:x1[g.key].x,y:x1[g.key].y,isShiftPressed:g.shiftKey})};return ft.createElement("div",{className:ic(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},ft.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:A,tabIndex:r?void 0:-1,onKeyDown:r?void 0:m,style:{width:a,height:s,top:l,left:o}}))}var c0t=w.memo(l0t);const u0t=e=>e.nodesSelectionActive,ppe=({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:o,deleteKeyCode:l,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:A,selectionMode:m,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:v,panActivationKeyCode:y,zoomActivationKeyCode:N,elementsSelectable:C,zoomOnScroll:_,zoomOnPinch:j,panOnScroll:I,panOnScrollSpeed:T,panOnScrollMode:k,zoomOnDoubleClick:B,panOnDrag:M,defaultViewport:P,translateExtent:S,minZoom:L,maxZoom:H,preventScrolling:q,onSelectionContextMenu:Q,noWheelClassName:z,noPanClassName:K,disableKeyboardA11y:Z})=>{const U=Ts(u0t),Y=bC(f),R=bC(y),D=R||M,W=R||I,J=Y||A&&D!==!0;return Wht({deleteKeyCode:l,multiSelectionKeyCode:v}),ft.createElement(Zht,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:C,zoomOnScroll:_,zoomOnPinch:j,panOnScroll:W,panOnScrollSpeed:T,panOnScrollMode:k,zoomOnDoubleClick:B,panOnDrag:!Y&&D,defaultViewport:P,translateExtent:S,minZoom:L,maxZoom:H,zoomActivationKeyCode:N,preventScrolling:q,noWheelClassName:z,noPanClassName:K},ft.createElement(dpe,{onSelectionStart:g,onSelectionEnd:x,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:D,isSelecting:!!J,selectionMode:m},e,U&&ft.createElement(c0t,{onSelectionContextMenu:Q,noPanClassName:K,disableKeyboardA11y:Z})))};ppe.displayName="FlowRenderer";var d0t=w.memo(ppe);function f0t(e){return Ts(w.useCallback(r=>e?zme(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function h0t(e){const t={input:e2(e.input||epe),default:e2(e.default||gL),output:e2(e.output||rpe),group:e2(e.group||mH)},r={},n=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,s)=>(a[s]=e2(e[s]||gL),a),r);return{...t,...n}}const A0t=({x:e,y:t,width:r,height:n,origin:a})=>!r||!n?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-r*a[0],y:t-n*a[1]},m0t=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),gpe=e=>{const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:a,updateNodeDimensions:s,onError:o}=Ts(m0t,Ll),l=f0t(e.onlyRenderVisibleElements),c=w.useRef(),u=w.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const A=f.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));s(A)});return c.current=d,d},[]);return w.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),ft.createElement("div",{className:"react-flow__nodes",style:pH},l.map(d=>{var j,I,T;let f=d.type||"default";e.nodeTypes[f]||(o==null||o("003",DA.error003(f)),f="default");const A=e.nodeTypes[f]||e.nodeTypes.default,m=!!(d.draggable||t&&typeof d.draggable>"u"),g=!!(d.selectable||a&&typeof d.selectable>"u"),x=!!(d.connectable||r&&typeof d.connectable>"u"),v=!!(d.focusable||n&&typeof d.focusable>"u"),y=e.nodeExtent?oH(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,N=(y==null?void 0:y.x)??0,C=(y==null?void 0:y.y)??0,_=A0t({x:N,y:C,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return ft.createElement(A,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||_r.Bottom,targetPosition:d.targetPosition||_r.Top,hidden:d.hidden,xPos:N,yPos:C,xPosOrigin:_.x,yPosOrigin:_.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:m,isSelectable:g,isConnectable:x,isFocusable:v,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((j=d[Gs])==null?void 0:j.z)??0,isParent:!!((I=d[Gs])!=null&&I.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((T=d[Gs])!=null&&T.handleBounds)})}))};gpe.displayName="NodeRenderer";var p0t=w.memo(gpe);const g0t=(e,t,r)=>r===_r.Left?e-t:r===_r.Right?e+t:e,x0t=(e,t,r)=>r===_r.Top?e-t:r===_r.Bottom?e+t:e,nee="react-flow__edgeupdater",aee=({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:a,onMouseEnter:s,onMouseOut:o,type:l})=>ft.createElement("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:o,className:ic([nee,`${nee}-${l}`]),cx:g0t(t,n,e),cy:x0t(r,n,e),r:n,stroke:"transparent",fill:"transparent"}),v0t=()=>!0;var sb=e=>{const t=({id:r,className:n,type:a,data:s,onClick:o,onEdgeDoubleClick:l,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:A,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,style:v,source:y,target:N,sourceX:C,sourceY:_,targetX:j,targetY:I,sourcePosition:T,targetPosition:k,elementsSelectable:B,hidden:M,sourceHandleId:P,targetHandleId:S,onContextMenu:L,onMouseEnter:H,onMouseMove:q,onMouseLeave:Q,reconnectRadius:z,onReconnect:K,onReconnectStart:Z,onReconnectEnd:U,markerEnd:Y,markerStart:R,rfId:D,ariaLabel:W,isFocusable:J,isReconnectable:le,pathOptions:ie,interactionWidth:re,disableKeyboardA11y:ce})=>{const oe=w.useRef(null),[be,X]=w.useState(!1),[je,De]=w.useState(!1),ke=wo(),ue=w.useMemo(()=>`url('#${mL(R,D)}')`,[R,D]),we=w.useMemo(()=>`url('#${mL(Y,D)}')`,[Y,D]);if(M)return null;const Ae=Ie=>{var ir;const{edges:Be,addSelectedEdges:et,unselectNodesAndEdges:bt,multiSelectionActive:jt}=ke.getState(),qt=Be.find(Ut=>Ut.id===r);qt&&(B&&(ke.setState({nodesSelectionActive:!1}),qt.selected&&jt?(bt({nodes:[],edges:[qt]}),(ir=oe.current)==null||ir.blur()):et([r])),o&&o(Ie,qt))},de=Jw(r,ke.getState,l),ae=Jw(r,ke.getState,L),fe=Jw(r,ke.getState,H),ge=Jw(r,ke.getState,q),xe=Jw(r,ke.getState,Q),Ue=(Ie,Be)=>{if(Ie.button!==0)return;const{edges:et,isValidConnection:bt}=ke.getState(),jt=Be?N:y,qt=(Be?S:P)||null,ir=Be?"target":"source",Ut=bt||v0t,Nr=Be,tr=et.find(Dr=>Dr.id===r);De(!0),Z==null||Z(Ie,tr,ir);const Xr=Dr=>{De(!1),U==null||U(Dr,tr,ir)};Xme({event:Ie,handleId:qt,nodeId:jt,onConnect:Dr=>K==null?void 0:K(tr,Dr),isTarget:Nr,getState:ke.getState,setState:ke.setState,isValidConnection:Ut,edgeUpdaterType:ir,onReconnectEnd:Xr})},qe=Ie=>Ue(Ie,!0),Ze=Ie=>Ue(Ie,!1),We=()=>X(!0),me=()=>X(!1),Ve=!B&&!o,Xe=Ie=>{var Be;if(!ce&&Lme.includes(Ie.key)&&B){const{unselectNodesAndEdges:et,addSelectedEdges:bt,edges:jt}=ke.getState();Ie.key==="Escape"?((Be=oe.current)==null||Be.blur(),et({edges:[jt.find(ir=>ir.id===r)]})):bt([r])}};return ft.createElement("g",{className:ic(["react-flow__edge",`react-flow__edge-${a}`,n,{selected:c,animated:u,inactive:Ve,updating:be}]),onClick:Ae,onDoubleClick:de,onContextMenu:ae,onMouseEnter:fe,onMouseMove:ge,onMouseLeave:xe,onKeyDown:J?Xe:void 0,tabIndex:J?0:void 0,role:J?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":W===null?void 0:W||`Edge from ${y} to ${N}`,"aria-describedby":J?`${spe}-${D}`:void 0,ref:oe},!je&&ft.createElement(e,{id:r,source:y,target:N,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:A,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,data:s,style:v,sourceX:C,sourceY:_,targetX:j,targetY:I,sourcePosition:T,targetPosition:k,sourceHandleId:P,targetHandleId:S,markerStart:ue,markerEnd:we,pathOptions:ie,interactionWidth:re}),le&&ft.createElement(ft.Fragment,null,(le==="source"||le===!0)&&ft.createElement(aee,{position:T,centerX:C,centerY:_,radius:z,onMouseDown:qe,onMouseEnter:We,onMouseOut:me,type:"source"}),(le==="target"||le===!0)&&ft.createElement(aee,{position:k,centerX:j,centerY:I,radius:z,onMouseDown:Ze,onMouseEnter:We,onMouseOut:me,type:"target"})))};return t.displayName="EdgeWrapper",w.memo(t)};function b0t(e){const t={default:sb(e.default||n4),straight:sb(e.bezier||dH),step:sb(e.step||uH),smoothstep:sb(e.step||QT),simplebezier:sb(e.simplebezier||cH)},r={},n=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,s)=>(a[s]=sb(e[s]||n4),a),r);return{...t,...n}}function see(e,t,r=null){const n=((r==null?void 0:r.x)||0)+t.x,a=((r==null?void 0:r.y)||0)+t.y,s=(r==null?void 0:r.width)||t.width,o=(r==null?void 0:r.height)||t.height;switch(e){case _r.Top:return{x:n+s/2,y:a};case _r.Right:return{x:n+s,y:a+o/2};case _r.Bottom:return{x:n+s/2,y:a+o};case _r.Left:return{x:n,y:a+o/2}}}function iee(e,t){return e?e.length===1||!t?e[0]:t&&e.find(r=>r.id===t)||null:null}const y0t=(e,t,r,n,a,s)=>{const o=see(r,e,t),l=see(s,n,a);return{sourceX:o.x,sourceY:o.y,targetX:l.x,targetY:l.y}};function w0t({sourcePos:e,targetPos:t,sourceWidth:r,sourceHeight:n,targetWidth:a,targetHeight:s,width:o,height:l,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+r,t.x+a),y2:Math.max(e.y+n,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=lH({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:o/c[2],height:l/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),A=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*A)>0}function oee(e){var n,a,s,o,l;const t=((n=e==null?void 0:e[Gs])==null?void 0:n.handleBounds)||null,r=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!r]}const N0t=[{level:0,isMaxLevel:!0,edges:[]}];function C0t(e,t,r=!1){let n=-1;const a=e.reduce((o,l)=>{var d,f;const c=kd(l.zIndex);let u=c?l.zIndex:0;if(r){const A=t.get(l.target),m=t.get(l.source),g=l.selected||(A==null?void 0:A.selected)||(m==null?void 0:m.selected),x=Math.max(((d=m==null?void 0:m[Gs])==null?void 0:d.z)||0,((f=A==null?void 0:A[Gs])==null?void 0:f.z)||0,1e3);u=(c?l.zIndex:0)+(g?x:0)}return o[u]?o[u].push(l):o[u]=[l],n=u>n?u:n,o},{}),s=Object.entries(a).map(([o,l])=>{const c=+o;return{edges:l,level:c,isMaxLevel:c===n}});return s.length===0?N0t:s}function E0t(e,t,r){const n=Ts(w.useCallback(a=>e?a.edges.filter(s=>{const o=t.get(s.source),l=t.get(s.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&w0t({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:l.width,targetHeight:l.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return C0t(n,t,r)}const j0t=({color:e="none",strokeWidth:t=1})=>ft.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),k0t=({color:e="none",strokeWidth:t=1})=>ft.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),lee={[r4.Arrow]:j0t,[r4.ArrowClosed]:k0t};function S0t(e){const t=wo();return w.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(lee,e)?lee[e]:((s=(a=t.getState()).onError)==null||s.call(a,"009",DA.error009(e)),null)},[e])}const _0t=({id:e,type:t,color:r,width:n=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const c=S0t(t);return c?ft.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0"},ft.createElement(c,{color:r,strokeWidth:o})):null},T0t=({defaultColor:e,rfId:t})=>r=>{const n=[];return r.edges.reduce((a,s)=>([s.markerStart,s.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const l=mL(o,t);n.includes(l)||(a.push({id:l,color:o.color||e,...o}),n.push(l))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))},xpe=({defaultColor:e,rfId:t})=>{const r=Ts(w.useCallback(T0t({defaultColor:e,rfId:t}),[e,t]),(n,a)=>!(n.length!==a.length||n.some((s,o)=>s.id!==a[o].id)));return ft.createElement("defs",null,r.map(n=>ft.createElement(_0t,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};xpe.displayName="MarkerDefinitions";var B0t=w.memo(xpe);const I0t=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),vpe=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:r,rfId:n,edgeTypes:a,noPanClassName:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:A,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:x,children:v,disableKeyboardA11y:y})=>{const{edgesFocusable:N,edgesUpdatable:C,elementsSelectable:_,width:j,height:I,connectionMode:T,nodeInternals:k,onError:B}=Ts(I0t,Ll),M=E0t(t,k,r);return j?ft.createElement(ft.Fragment,null,M.map(({level:P,edges:S,isMaxLevel:L})=>ft.createElement("svg",{key:P,style:{zIndex:P},width:j,height:I,className:"react-flow__edges react-flow__container"},L&&ft.createElement(B0t,{defaultColor:e,rfId:n}),ft.createElement("g",null,S.map(H=>{const[q,Q,z]=oee(k.get(H.source)),[K,Z,U]=oee(k.get(H.target));if(!z||!U)return null;let Y=H.type||"default";a[Y]||(B==null||B("011",DA.error011(Y)),Y="default");const R=a[Y]||a.default,D=T===$x.Strict?Z.target:(Z.target??[]).concat(Z.source??[]),W=iee(Q.source,H.sourceHandle),J=iee(D,H.targetHandle),le=(W==null?void 0:W.position)||_r.Bottom,ie=(J==null?void 0:J.position)||_r.Top,re=!!(H.focusable||N&&typeof H.focusable>"u"),ce=H.reconnectable||H.updatable,oe=typeof A<"u"&&(ce||C&&typeof ce>"u");if(!W||!J)return B==null||B("008",DA.error008(W,H)),null;const{sourceX:be,sourceY:X,targetX:je,targetY:De}=y0t(q,W,le,K,J,ie);return ft.createElement(R,{key:H.id,id:H.id,className:ic([H.className,s]),type:Y,data:H.data,selected:!!H.selected,animated:!!H.animated,hidden:!!H.hidden,label:H.label,labelStyle:H.labelStyle,labelShowBg:H.labelShowBg,labelBgStyle:H.labelBgStyle,labelBgPadding:H.labelBgPadding,labelBgBorderRadius:H.labelBgBorderRadius,style:H.style,source:H.source,target:H.target,sourceHandleId:H.sourceHandle,targetHandleId:H.targetHandle,markerEnd:H.markerEnd,markerStart:H.markerStart,sourceX:be,sourceY:X,targetX:je,targetY:De,sourcePosition:le,targetPosition:ie,elementsSelectable:_,onContextMenu:o,onMouseEnter:l,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:A,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:x,rfId:n,ariaLabel:H.ariaLabel,isFocusable:re,isReconnectable:oe,pathOptions:"pathOptions"in H?H.pathOptions:void 0,interactionWidth:H.interactionWidth,disableKeyboardA11y:y})})))),v):null};vpe.displayName="EdgeRenderer";var D0t=w.memo(vpe);const O0t=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function P0t({children:e}){const t=Ts(O0t);return ft.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function F0t(e){const t=VT(),r=w.useRef(!1);w.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const R0t={[_r.Left]:_r.Right,[_r.Right]:_r.Left,[_r.Top]:_r.Bottom,[_r.Bottom]:_r.Top},bpe=({nodeId:e,handleType:t,style:r,type:n=Wm.Bezier,CustomComponent:a,connectionStatus:s})=>{var I,T,k;const{fromNode:o,handleId:l,toX:c,toY:u,connectionMode:d}=Ts(w.useCallback(B=>({fromNode:B.nodeInternals.get(e),handleId:B.connectionHandleId,toX:(B.connectionPosition.x-B.transform[0])/B.transform[2],toY:(B.connectionPosition.y-B.transform[1])/B.transform[2],connectionMode:B.connectionMode}),[e]),Ll),f=(I=o==null?void 0:o[Gs])==null?void 0:I.handleBounds;let A=f==null?void 0:f[t];if(d===$x.Loose&&(A=A||(f==null?void 0:f[t==="source"?"target":"source"])),!o||!A)return null;const m=l?A.find(B=>B.id===l):A[0],g=m?m.x+m.width/2:(o.width??0)/2,x=m?m.y+m.height/2:o.height??0,v=(((T=o.positionAbsolute)==null?void 0:T.x)??0)+g,y=(((k=o.positionAbsolute)==null?void 0:k.y)??0)+x,N=m==null?void 0:m.position,C=N?R0t[N]:null;if(!N||!C)return null;if(a)return ft.createElement(a,{connectionLineType:n,connectionLineStyle:r,fromNode:o,fromHandle:m,fromX:v,fromY:y,toX:c,toY:u,fromPosition:N,toPosition:C,connectionStatus:s});let _="";const j={sourceX:v,sourceY:y,sourcePosition:N,targetX:c,targetY:u,targetPosition:C};return n===Wm.Bezier?[_]=Vme(j):n===Wm.Step?[_]=AL({...j,borderRadius:0}):n===Wm.SmoothStep?[_]=AL(j):n===Wm.SimpleBezier?[_]=Qme(j):_=`M${v},${y} ${c},${u}`,ft.createElement("path",{d:_,fill:"none",className:"react-flow__connection-path",style:r})};bpe.displayName="ConnectionLine";const L0t=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function M0t({containerStyle:e,style:t,type:r,component:n}){const{nodeId:a,handleType:s,nodesConnectable:o,width:l,height:c,connectionStatus:u}=Ts(L0t,Ll);return!(a&&s&&l&&o)?null:ft.createElement("svg",{style:e,width:l,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},ft.createElement("g",{className:ic(["react-flow__connection",u])},ft.createElement(bpe,{nodeId:a,handleType:s,style:t,type:r,CustomComponent:n,connectionStatus:u})))}function cee(e,t){return w.useRef(null),wo(),w.useMemo(()=>t(e),[e])}const ype=({nodeTypes:e,edgeTypes:t,onMove:r,onMoveStart:n,onMoveEnd:a,onInit:s,onNodeClick:o,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:A,onNodeContextMenu:m,onSelectionContextMenu:g,onSelectionStart:x,onSelectionEnd:v,connectionLineType:y,connectionLineStyle:N,connectionLineComponent:C,connectionLineContainerStyle:_,selectionKeyCode:j,selectionOnDrag:I,selectionMode:T,multiSelectionKeyCode:k,panActivationKeyCode:B,zoomActivationKeyCode:M,deleteKeyCode:P,onlyRenderVisibleElements:S,elementsSelectable:L,selectNodesOnDrag:H,defaultViewport:q,translateExtent:Q,minZoom:z,maxZoom:K,preventScrolling:Z,defaultMarkerColor:U,zoomOnScroll:Y,zoomOnPinch:R,panOnScroll:D,panOnScrollSpeed:W,panOnScrollMode:J,zoomOnDoubleClick:le,panOnDrag:ie,onPaneClick:re,onPaneMouseEnter:ce,onPaneMouseMove:oe,onPaneMouseLeave:be,onPaneScroll:X,onPaneContextMenu:je,onEdgeContextMenu:De,onEdgeMouseEnter:ke,onEdgeMouseMove:ue,onEdgeMouseLeave:we,onReconnect:Ae,onReconnectStart:de,onReconnectEnd:ae,reconnectRadius:fe,noDragClassName:ge,noWheelClassName:xe,noPanClassName:Ue,elevateEdgesOnSelect:qe,disableKeyboardA11y:Ze,nodeOrigin:We,nodeExtent:me,rfId:Ve})=>{const Xe=cee(e,h0t),Ie=cee(t,b0t);return F0t(s),ft.createElement(d0t,{onPaneClick:re,onPaneMouseEnter:ce,onPaneMouseMove:oe,onPaneMouseLeave:be,onPaneContextMenu:je,onPaneScroll:X,deleteKeyCode:P,selectionKeyCode:j,selectionOnDrag:I,selectionMode:T,onSelectionStart:x,onSelectionEnd:v,multiSelectionKeyCode:k,panActivationKeyCode:B,zoomActivationKeyCode:M,elementsSelectable:L,onMove:r,onMoveStart:n,onMoveEnd:a,zoomOnScroll:Y,zoomOnPinch:R,zoomOnDoubleClick:le,panOnScroll:D,panOnScrollSpeed:W,panOnScrollMode:J,panOnDrag:ie,defaultViewport:q,translateExtent:Q,minZoom:z,maxZoom:K,onSelectionContextMenu:g,preventScrolling:Z,noDragClassName:ge,noWheelClassName:xe,noPanClassName:Ue,disableKeyboardA11y:Ze},ft.createElement(P0t,null,ft.createElement(D0t,{edgeTypes:Ie,onEdgeClick:l,onEdgeDoubleClick:u,onlyRenderVisibleElements:S,onEdgeContextMenu:De,onEdgeMouseEnter:ke,onEdgeMouseMove:ue,onEdgeMouseLeave:we,onReconnect:Ae,onReconnectStart:de,onReconnectEnd:ae,reconnectRadius:fe,defaultMarkerColor:U,noPanClassName:Ue,elevateEdgesOnSelect:!!qe,disableKeyboardA11y:Ze,rfId:Ve},ft.createElement(M0t,{style:N,type:y,component:C,containerStyle:_})),ft.createElement("div",{className:"react-flow__edgelabel-renderer"}),ft.createElement(p0t,{nodeTypes:Xe,onNodeClick:o,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:A,onNodeContextMenu:m,selectNodesOnDrag:H,onlyRenderVisibleElements:S,noPanClassName:Ue,noDragClassName:ge,disableKeyboardA11y:Ze,nodeOrigin:We,nodeExtent:me,rfId:Ve})))};ype.displayName="GraphView";var U0t=w.memo(ype);const vL=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Om={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:vL,nodeExtent:vL,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:$x.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Aht,isValidConnection:void 0},H0t=()=>Zct((e,t)=>({...Om,setNodes:r=>{const{nodeInternals:n,nodeOrigin:a,elevateNodesOnSelect:s}=t();e({nodeInternals:PO(r,n,a,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=t();e({edges:r.map(a=>({...n,...a}))})},setDefaultNodesAndEdges:(r,n)=>{const a=typeof r<"u",s=typeof n<"u",o=a?PO(r,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:s?n:[],hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:a,fitViewOnInit:s,fitViewOnInitDone:o,fitViewOnInitOptions:l,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:A}=new window.DOMMatrixReadOnly(f.transform),m=r.reduce((x,v)=>{const y=a.get(v.id);if(y!=null&&y.hidden)a.set(y.id,{...y,[Gs]:{...y[Gs],handleBounds:void 0}});else if(y){const N=iH(v.nodeElement);!!(N.width&&N.height&&(y.width!==N.width||y.height!==N.height||v.forceUpdate))&&(a.set(y.id,{...y,[Gs]:{...y[Gs],handleBounds:{source:ree(".source",v.nodeElement,A,u),target:ree(".target",v.nodeElement,A,u)}},...N}),x.push({id:y.id,type:"dimensions",dimensions:N}))}return x},[]);ope(a,u);const g=o||s&&!o&&lpe(t,{initial:!0,...l});e({nodeInternals:new Map(a),fitViewOnInitDone:g}),(m==null?void 0:m.length)>0&&(n==null||n(m))},updateNodePositions:(r,n=!0,a=!1)=>{const{triggerNodeChanges:s}=t(),o=r.map(l=>{const c={id:l.id,type:"position",dragging:a};return n&&(c.positionAbsolute=l.positionAbsolute,c.position=l.position),c});s(o)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:a,hasDefaultNodes:s,nodeOrigin:o,getNodes:l,elevateNodesOnSelect:c}=t();if(r!=null&&r.length){if(s){const u=upe(r,l()),d=PO(u,a,o,c);e({nodeInternals:d})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let o,l=null;n?o=r.map(c=>Qm(c,!0)):(o=Mb(s(),r),l=Mb(a,[])),Pk({changedNodes:o,changedEdges:l,get:t,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let o,l=null;n?o=r.map(c=>Qm(c,!0)):(o=Mb(a,r),l=Mb(s(),[])),Pk({changedNodes:l,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:a,getNodes:s}=t(),o=r||s(),l=n||a,c=o.map(d=>(d.selected=!1,Qm(d.id,!1))),u=l.map(d=>Qm(d.id,!1));Pk({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:a}=t();n==null||n.scaleExtent([r,a]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:a}=t();n==null||n.scaleExtent([a,r]),e({maxZoom:r})},setTranslateExtent:r=>{var n;(n=t().d3Zoom)==null||n.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=t(),s=n().filter(l=>l.selected).map(l=>Qm(l.id,!1)),o=r.filter(l=>l.selected).map(l=>Qm(l.id,!1));Pk({changedNodes:s,changedEdges:o,get:t,set:e})},setNodeExtent:r=>{const{nodeInternals:n}=t();n.forEach(a=>{a.positionAbsolute=oH(a.position,r)}),e({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:a,height:s,d3Zoom:o,d3Selection:l,translateExtent:c}=t();if(!o||!l||!r.x&&!r.y)return!1;const u=Ap.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),d=[[0,0],[a,s]],f=o==null?void 0:o.constrain()(u,d,c);return o.transform(l,f),n[0]!==f.x||n[1]!==f.y||n[2]!==f.k},cancelConnection:()=>e({connectionNodeId:Om.connectionNodeId,connectionHandleId:Om.connectionHandleId,connectionHandleType:Om.connectionHandleType,connectionStatus:Om.connectionStatus,connectionStartHandle:Om.connectionStartHandle,connectionEndHandle:Om.connectionEndHandle}),reset:()=>e({...Om})}),Object.is),gH=({children:e})=>{const t=w.useRef(null);return t.current||(t.current=H0t()),ft.createElement(iht,{value:t.current},e)};gH.displayName="ReactFlowProvider";const wpe=({children:e})=>w.useContext(HT)?ft.createElement(ft.Fragment,null,e):ft.createElement(gH,null,e);wpe.displayName="ReactFlowWrapper";const Q0t={input:epe,default:gL,output:rpe,group:mH},V0t={default:n4,straight:dH,step:uH,smoothstep:QT,simplebezier:cH},$0t=[0,0],z0t=[15,15],G0t={x:0,y:0,zoom:1},q0t={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Npe=w.forwardRef(({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:a,nodeTypes:s=Q0t,edgeTypes:o=V0t,onNodeClick:l,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:A,onConnect:m,onConnectStart:g,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:y,onNodeMouseEnter:N,onNodeMouseMove:C,onNodeMouseLeave:_,onNodeContextMenu:j,onNodeDoubleClick:I,onNodeDragStart:T,onNodeDrag:k,onNodeDragStop:B,onNodesDelete:M,onEdgesDelete:P,onSelectionChange:S,onSelectionDragStart:L,onSelectionDrag:H,onSelectionDragStop:q,onSelectionContextMenu:Q,onSelectionStart:z,onSelectionEnd:K,connectionMode:Z=$x.Strict,connectionLineType:U=Wm.Bezier,connectionLineStyle:Y,connectionLineComponent:R,connectionLineContainerStyle:D,deleteKeyCode:W="Backspace",selectionKeyCode:J="Shift",selectionOnDrag:le=!1,selectionMode:ie=vC.Full,panActivationKeyCode:re="Space",multiSelectionKeyCode:ce=t4()?"Meta":"Control",zoomActivationKeyCode:oe=t4()?"Meta":"Control",snapToGrid:be=!1,snapGrid:X=z0t,onlyRenderVisibleElements:je=!1,selectNodesOnDrag:De=!0,nodesDraggable:ke,nodesConnectable:ue,nodesFocusable:we,nodeOrigin:Ae=$0t,edgesFocusable:de,edgesUpdatable:ae,elementsSelectable:fe,defaultViewport:ge=G0t,minZoom:xe=.5,maxZoom:Ue=2,translateExtent:qe=vL,preventScrolling:Ze=!0,nodeExtent:We,defaultMarkerColor:me="#b1b1b7",zoomOnScroll:Ve=!0,zoomOnPinch:Xe=!0,panOnScroll:Ie=!1,panOnScrollSpeed:Be=.5,panOnScrollMode:et=tx.Free,zoomOnDoubleClick:bt=!0,panOnDrag:jt=!0,onPaneClick:qt,onPaneMouseEnter:ir,onPaneMouseMove:Ut,onPaneMouseLeave:Nr,onPaneScroll:tr,onPaneContextMenu:Xr,children:hr,onEdgeContextMenu:Dr,onEdgeDoubleClick:or,onEdgeMouseEnter:Yr,onEdgeMouseMove:Xa,onEdgeMouseLeave:aa,onEdgeUpdate:Gn,onEdgeUpdateStart:is,onEdgeUpdateEnd:rr,onReconnect:wn,onReconnectStart:cn,onReconnectEnd:On,reconnectRadius:Fn=10,edgeUpdaterRadius:sa=10,onNodesChange:Se,onEdgesChange:Ge,noDragClassName:Me="nodrag",noWheelClassName:Qe="nowheel",noPanClassName:Ne="nopan",fitView:ve=!1,fitViewOptions:Fe,connectOnClick:ze=!0,attributionPosition:He,proOptions:Ye,defaultEdgeOptions:rt,elevateNodesOnSelect:Ct=!0,elevateEdgesOnSelect:Et=!1,disableKeyboardA11y:Qt=!1,autoPanOnConnect:Ot=!0,autoPanOnNodeDrag:Kt=!0,connectionRadius:Cr=20,isValidConnection:rn,onError:Jr,style:an,id:va,nodeDragThreshold:Ys,...Ya},os)=>{const xs=va||"1";return ft.createElement("div",{...Ya,style:{...an,...q0t},ref:os,className:ic(["react-flow",a]),"data-testid":"rf__wrapper",id:va},ft.createElement(wpe,null,ft.createElement(U0t,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:A,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:N,onNodeMouseMove:C,onNodeMouseLeave:_,onNodeContextMenu:j,onNodeDoubleClick:I,nodeTypes:s,edgeTypes:o,connectionLineType:U,connectionLineStyle:Y,connectionLineComponent:R,connectionLineContainerStyle:D,selectionKeyCode:J,selectionOnDrag:le,selectionMode:ie,deleteKeyCode:W,multiSelectionKeyCode:ce,panActivationKeyCode:re,zoomActivationKeyCode:oe,onlyRenderVisibleElements:je,selectNodesOnDrag:De,defaultViewport:ge,translateExtent:qe,minZoom:xe,maxZoom:Ue,preventScrolling:Ze,zoomOnScroll:Ve,zoomOnPinch:Xe,zoomOnDoubleClick:bt,panOnScroll:Ie,panOnScrollSpeed:Be,panOnScrollMode:et,panOnDrag:jt,onPaneClick:qt,onPaneMouseEnter:ir,onPaneMouseMove:Ut,onPaneMouseLeave:Nr,onPaneScroll:tr,onPaneContextMenu:Xr,onSelectionContextMenu:Q,onSelectionStart:z,onSelectionEnd:K,onEdgeContextMenu:Dr,onEdgeDoubleClick:or,onEdgeMouseEnter:Yr,onEdgeMouseMove:Xa,onEdgeMouseLeave:aa,onReconnect:wn??Gn,onReconnectStart:cn??is,onReconnectEnd:On??rr,reconnectRadius:Fn??sa,defaultMarkerColor:me,noDragClassName:Me,noWheelClassName:Qe,noPanClassName:Ne,elevateEdgesOnSelect:Et,rfId:xs,disableKeyboardA11y:Qt,nodeOrigin:Ae,nodeExtent:We}),ft.createElement(Rht,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:m,onConnectStart:g,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:y,nodesDraggable:ke,nodesConnectable:ue,nodesFocusable:we,edgesFocusable:de,edgesUpdatable:ae,elementsSelectable:fe,elevateNodesOnSelect:Ct,minZoom:xe,maxZoom:Ue,nodeExtent:We,onNodesChange:Se,onEdgesChange:Ge,snapToGrid:be,snapGrid:X,connectionMode:Z,translateExtent:qe,connectOnClick:ze,defaultEdgeOptions:rt,fitView:ve,fitViewOptions:Fe,onNodesDelete:M,onEdgesDelete:P,onNodeDragStart:T,onNodeDrag:k,onNodeDragStop:B,onSelectionDrag:H,onSelectionDragStart:L,onSelectionDragStop:q,noPanClassName:Ne,nodeOrigin:Ae,rfId:xs,autoPanOnConnect:Ot,autoPanOnNodeDrag:Kt,onError:Jr,connectionRadius:Cr,isValidConnection:rn,nodeDragThreshold:Ys}),ft.createElement(Pht,{onSelectionChange:S}),hr,ft.createElement(lht,{proOptions:Ye,position:He}),ft.createElement(Qht,{rfId:xs,disableKeyboardA11y:Qt})))});Npe.displayName="ReactFlow";function Cpe(e){return t=>{const[r,n]=w.useState(t),a=w.useCallback(s=>n(o=>e(s,o)),[]);return[r,n,a]}}const K0t=Cpe(upe),W0t=Cpe(r0t);function X0t(){return ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},ft.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Y0t(){return ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},ft.createElement("path",{d:"M0 0h32v4.2H0z"}))}function J0t(){return ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},ft.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Z0t(){return ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ft.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function eAt(){return ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ft.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const S2=({children:e,className:t,...r})=>ft.createElement("button",{type:"button",className:ic(["react-flow__controls-button",t]),...r},e);S2.displayName="ControlButton";const tAt=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Epe=({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const A=wo(),[m,g]=w.useState(!1),{isInteractive:x,minZoomReached:v,maxZoomReached:y}=Ts(tAt,Ll),{zoomIn:N,zoomOut:C,fitView:_}=VT();if(w.useEffect(()=>{g(!0)},[]),!m)return null;const j=()=>{N(),s==null||s()},I=()=>{C(),o==null||o()},T=()=>{_(a),l==null||l()},k=()=>{A.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c==null||c(!x)};return ft.createElement(Pme,{className:ic(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&ft.createElement(ft.Fragment,null,ft.createElement(S2,{onClick:j,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},ft.createElement(X0t,null)),ft.createElement(S2,{onClick:I,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v},ft.createElement(Y0t,null))),r&&ft.createElement(S2,{className:"react-flow__controls-fitview",onClick:T,title:"fit view","aria-label":"fit view"},ft.createElement(J0t,null)),n&&ft.createElement(S2,{className:"react-flow__controls-interactive",onClick:k,title:"toggle interactivity","aria-label":"toggle interactivity"},x?ft.createElement(eAt,null):ft.createElement(Z0t,null)),d)};Epe.displayName="Controls";var rAt=w.memo(Epe),Tf;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Tf||(Tf={}));function nAt({color:e,dimensions:t,lineWidth:r}){return ft.createElement("path",{stroke:e,strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function aAt({color:e,radius:t}){return ft.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const sAt={[Tf.Dots]:"#91919a",[Tf.Lines]:"#eee",[Tf.Cross]:"#e2e2e2"},iAt={[Tf.Dots]:1,[Tf.Lines]:1,[Tf.Cross]:6},oAt=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function jpe({id:e,variant:t=Tf.Dots,gap:r=20,size:n,lineWidth:a=1,offset:s=2,color:o,style:l,className:c}){const u=w.useRef(null),{transform:d,patternId:f}=Ts(oAt,Ll),A=o||sAt[t],m=n||iAt[t],g=t===Tf.Dots,x=t===Tf.Cross,v=Array.isArray(r)?r:[r,r],y=[v[0]*d[2]||1,v[1]*d[2]||1],N=m*d[2],C=x?[N,N]:y,_=g?[N/s,N/s]:[C[0]/s,C[1]/s];return ft.createElement("svg",{className:ic(["react-flow__background",c]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},ft.createElement("pattern",{id:f+e,x:d[0]%y[0],y:d[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`},g?ft.createElement(aAt,{color:A,radius:N/s}):ft.createElement(nAt,{dimensions:C,color:A,lineWidth:a})),ft.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}jpe.displayName="Background";var lAt=w.memo(jpe);function cAt(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(a),t&&(n.href=t),a.href=e,a.href}const uAt=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function pp(e){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r]);return t}let ib=null;function kpe(e={}){return ib||(e.includeStyleProperties?(ib=e.includeStyleProperties,ib):(ib=pp(window.getComputedStyle(document.documentElement)),ib))}function a4(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function dAt(e){const t=a4(e,"border-left-width"),r=a4(e,"border-right-width");return e.clientWidth+t+r}function fAt(e){const t=a4(e,"border-top-width"),r=a4(e,"border-bottom-width");return e.clientHeight+t+r}function Spe(e,t={}){const r=t.width||dAt(e),n=t.height||fAt(e);return{width:r,height:n}}function hAt(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const du=16384;function AAt(e){(e.width>du||e.height>du)&&(e.width>du&&e.height>du?e.width>e.height?(e.height*=du/e.width,e.width=du):(e.width*=du/e.height,e.height=du):e.width>du?(e.height*=du/e.width,e.width=du):(e.width*=du/e.height,e.height=du))}function s4(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>t(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function mAt(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function pAt(e,t,r){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),s=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${t} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),a.appendChild(s),s.appendChild(e),mAt(a)}const Qc=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||Qc(r,t)};function gAt(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function xAt(e,t){return kpe(t).map(r=>{const n=e.getPropertyValue(r),a=e.getPropertyPriority(r);return`${r}: ${n}${a?" !important":""};`}).join(" ")}function vAt(e,t,r,n){const a=`.${e}:${t}`,s=r.cssText?gAt(r):xAt(r,n);return document.createTextNode(`${a}{${s}}`)}function uee(e,t,r,n){const a=window.getComputedStyle(e,r),s=a.getPropertyValue("content");if(s===""||s==="none")return;const o=uAt();try{t.className=`${t.className} ${o}`}catch{return}const l=document.createElement("style");l.appendChild(vAt(o,r,a,n)),t.appendChild(l)}function bAt(e,t,r){uee(e,t,":before",r),uee(e,t,":after",r)}const dee="application/font-woff",fee="image/jpeg",yAt={woff:dee,woff2:dee,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:fee,jpeg:fee,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function wAt(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function xH(e){const t=wAt(e).toLowerCase();return yAt[t]||""}function NAt(e){return e.split(/,/)[1]}function bL(e){return e.search(/^(data:)/)!==-1}function CAt(e,t){return`data:${t};base64,${e}`}async function _pe(e,t,r){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((s,o)=>{const l=new FileReader;l.onerror=o,l.onloadend=()=>{try{s(r({res:n,result:l.result}))}catch(c){o(c)}},l.readAsDataURL(a)})}const MO={};function EAt(e,t,r){let n=e.replace(/\?.*/,"");return r&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function vH(e,t,r){const n=EAt(e,t,r.includeQueryParams);if(MO[n]!=null)return MO[n];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const s=await _pe(e,r.fetchRequestInit,({res:o,result:l})=>(t||(t=o.headers.get("Content-Type")||""),NAt(l)));a=CAt(s,t)}catch(s){a=r.imagePlaceholder||"";let o=`Failed to fetch resource: ${e}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return MO[n]=a,a}async function jAt(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):s4(t)}async function kAt(e,t){if(e.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,o==null||o.drawImage(e,0,0,s.width,s.height);const l=s.toDataURL();return s4(l)}const r=e.poster,n=xH(r),a=await vH(r,n,t);return s4(a)}async function SAt(e,t){var r;try{if(!((r=e==null?void 0:e.contentDocument)===null||r===void 0)&&r.body)return await $T(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function _At(e,t){return Qc(e,HTMLCanvasElement)?jAt(e):Qc(e,HTMLVideoElement)?kAt(e,t):Qc(e,HTMLIFrameElement)?SAt(e,t):e.cloneNode(Tpe(e))}const TAt=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",Tpe=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function BAt(e,t,r){var n,a;if(Tpe(t))return t;let s=[];return TAt(e)&&e.assignedNodes?s=pp(e.assignedNodes()):Qc(e,HTMLIFrameElement)&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?s=pp(e.contentDocument.body.childNodes):s=pp(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),s.length===0||Qc(e,HTMLVideoElement)||await s.reduce((o,l)=>o.then(()=>$T(l,r)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function IAt(e,t,r){const n=t.style;if(!n)return;const a=window.getComputedStyle(e);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):kpe(r).forEach(s=>{let o=a.getPropertyValue(s);s==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),Qc(e,HTMLIFrameElement)&&s==="display"&&o==="inline"&&(o="block"),s==="d"&&t.getAttribute("d")&&(o=`path(${t.getAttribute("d")})`),n.setProperty(s,o,a.getPropertyPriority(s))})}function DAt(e,t){Qc(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Qc(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function OAt(e,t){if(Qc(e,HTMLSelectElement)){const r=t,n=Array.from(r.children).find(a=>e.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function PAt(e,t,r){return Qc(t,Element)&&(IAt(e,t,r),bAt(e,t,r),DAt(e,t),OAt(e,t)),t}async function FAt(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const n={};for(let s=0;s<r.length;s++){const l=r[s].getAttribute("xlink:href");if(l){const c=e.querySelector(l),u=document.querySelector(l);!c&&u&&!n[l]&&(n[l]=await $T(u,t,!0))}}const a=Object.values(n);if(a.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const l=document.createElementNS(s,"defs");o.appendChild(l);for(let c=0;c<a.length;c++)l.appendChild(a[c]);e.appendChild(o)}return e}async function $T(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>_At(n,t)).then(n=>BAt(e,n,t)).then(n=>PAt(e,n,t)).then(n=>FAt(n,t))}const Bpe=/url\((['"]?)([^'"]+?)\1\)/g,RAt=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,LAt=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function MAt(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function UAt(e){const t=[];return e.replace(Bpe,(r,n,a)=>(t.push(a),r)),t.filter(r=>!bL(r))}async function HAt(e,t,r,n,a){try{const s=r?cAt(t,r):t,o=xH(t);let l;return a||(l=await vH(s,o,n)),e.replace(MAt(t),`$1${l}$3`)}catch{}return e}function QAt(e,{preferredFontFormat:t}){return t?e.replace(LAt,r=>{for(;;){const[n,,a]=RAt.exec(r)||[];if(!a)return"";if(a===t)return`src: ${n};`}}):e}function Ipe(e){return e.search(Bpe)!==-1}async function Dpe(e,t,r){if(!Ipe(e))return e;const n=QAt(e,r);return UAt(n).reduce((s,o)=>s.then(l=>HAt(l,o,t,r)),Promise.resolve(n))}async function ob(e,t,r){var n;const a=(n=t.style)===null||n===void 0?void 0:n.getPropertyValue(e);if(a){const s=await Dpe(a,null,r);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function VAt(e,t){await ob("background",e,t)||await ob("background-image",e,t),await ob("mask",e,t)||await ob("-webkit-mask",e,t)||await ob("mask-image",e,t)||await ob("-webkit-mask-image",e,t)}async function $At(e,t){const r=Qc(e,HTMLImageElement);if(!(r&&!bL(e.src))&&!(Qc(e,SVGImageElement)&&!bL(e.href.baseVal)))return;const n=r?e.src:e.href.baseVal,a=await vH(n,xH(n),t);await new Promise((s,o)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...c)=>{try{s(t.onImageErrorHandler(...c))}catch(u){o(u)}}:o;const l=e;l.decode&&(l.decode=s),l.loading==="lazy"&&(l.loading="eager"),r?(e.srcset="",e.src=a):e.href.baseVal=a})}async function zAt(e,t){const n=pp(e.childNodes).map(a=>Ope(a,t));await Promise.all(n).then(()=>e)}async function Ope(e,t){Qc(e,Element)&&(await VAt(e,t),await $At(e,t),await zAt(e,t))}function GAt(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(a=>{r[a]=n[a]}),e}const hee={};async function Aee(e){let t=hee[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},hee[e]=t,t}async function mee(e,t){let r=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async o=>{let l=o.replace(n,"$1");return l.startsWith("https://")||(l=new URL(l,e.url).href),_pe(l,t.fetchRequestInit,({result:c})=>(r=r.replace(o,`url(${c})`),[o,c]))});return Promise.all(s).then(()=>r)}function pee(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=a.exec(n);if(c===null)break;t.push(c[0])}n=n.replace(a,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(o,"gi");for(;;){let c=s.exec(n);if(c===null){if(c=l.exec(n),c===null)break;s.lastIndex=l.lastIndex}else l.lastIndex=s.lastIndex;t.push(c[0])}return t}async function qAt(e,t){const r=[],n=[];return e.forEach(a=>{if("cssRules"in a)try{pp(a.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let l=o+1;const c=s.href,u=Aee(c).then(d=>mee(d,t)).then(d=>pee(d).forEach(f=>{try{a.insertRule(f,f.startsWith("@import")?l+=1:a.cssRules.length)}catch(A){console.error("Error inserting rule from remote css",{rule:f,error:A})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(u)}})}catch(s){const o=e.find(l=>l.href==null)||document.styleSheets[0];a.href!=null&&n.push(Aee(a.href).then(l=>mee(l,t)).then(l=>pee(l).forEach(c=>{o.insertRule(c,o.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",s)}}),Promise.all(n).then(()=>(e.forEach(a=>{if("cssRules"in a)try{pp(a.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${a.href}`,s)}}),r))}function KAt(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Ipe(t.style.getPropertyValue("src")))}async function WAt(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=pp(e.ownerDocument.styleSheets),n=await qAt(r,t);return KAt(n)}function Ppe(e){return e.trim().replace(/["']/g,"")}function XAt(e){const t=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(s=>{t.add(Ppe(s))}),Array.from(n.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(e),t}async function YAt(e,t){const r=await WAt(e,t),n=XAt(e);return(await Promise.all(r.filter(s=>n.has(Ppe(s.style.fontFamily))).map(s=>{const o=s.parentStyleSheet?s.parentStyleSheet.href:null;return Dpe(s.cssText,o,t)}))).join(`
`)}async function JAt(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await YAt(e,t);if(r){const n=document.createElement("style"),a=document.createTextNode(r);n.appendChild(a),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function ZAt(e,t={}){const{width:r,height:n}=Spe(e,t),a=await $T(e,t,!0);return await JAt(a,t),await Ope(a,t),GAt(a,t),await pAt(a,r,n)}async function emt(e,t={}){const{width:r,height:n}=Spe(e,t),a=await ZAt(e,t),s=await s4(a),o=document.createElement("canvas"),l=o.getContext("2d"),c=t.pixelRatio||hAt(),u=t.canvasWidth||r,d=t.canvasHeight||n;return o.width=u*c,o.height=d*c,t.skipAutoScale||AAt(o),o.style.width=`${u}`,o.style.height=`${d}`,t.backgroundColor&&(l.fillStyle=t.backgroundColor,l.fillRect(0,0,o.width,o.height)),l.drawImage(s,0,0,o.width,o.height),o}async function zT(e,t={}){return(await emt(e,t)).toDataURL()}const Fpe="recursos_crucigramas",bH="recursos_lineas_de_tiempo",yH="recursos_mapas_mentales",Rpe="recursos_sopas_de_letras",GT=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,createdAt:((s=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.createdAt}},tmt=e=>{const t=Bt(ht(ut,Fpe),Xt("fechaCreacion","desc"));return lr(t,r=>{const n=r.docs.map(a=>GT(a));e(n)},r=>{console.error("Error al suscribirse a los crucigramas:",r),e([])})},rmt=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:xr.fromDate(new Date)};return(await ln(ht(ut,Fpe),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},nmt=e=>{const t=Bt(ht(ut,bH),Xt("createdAt","desc"));return lr(t,r=>{const n=r.docs.map(a=>GT(a));e(n)},r=>{console.error("Error al suscribirse a las lneas de tiempo:",r),e([])})},amt=async(e,t)=>{try{const{id:r,...n}=e,a=Wt(ut,bH,r);await bi(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:xr.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la lnea de tiempo:",r),new Error("No se pudo guardar la lnea de tiempo.")}},smt=async e=>{try{const t=Wt(ut,bH,e);await ca(t)}catch(t){throw console.error("Error al eliminar la lnea de tiempo:",t),new Error("No se pudo eliminar la lnea de tiempo.")}},imt=e=>{const t=Bt(ht(ut,yH),Xt("createdAt","desc"));return lr(t,r=>{const n=r.docs.map(a=>GT(a));e(n)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),e([])})},omt=async(e,t)=>{try{const{id:r,...n}=e,a=Wt(ut,yH,r);await bi(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:xr.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},lmt=async e=>{try{const t=Wt(ut,yH,e);await ca(t)}catch(t){throw console.error("Error al eliminar el mapa mental:",t),new Error("No se pudo eliminar el mapa mental.")}},cmt=e=>{const t=Bt(ht(ut,Rpe),Xt("createdAt","desc"));return lr(t,r=>{const n=r.docs.map(a=>GT(a));e(n)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),e([])})},umt=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:xr.fromDate(new Date)};return(await ln(ht(ut,Rpe),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},dmt=()=>i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),fmt=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),hmt=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),Amt=({data:e})=>{const t={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Prctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},r=t[e.type||"default"]||t.default;return i.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${r} flex items-center gap-3 min-w-[180px]`,children:[i.jsx(ry,{type:"target",position:_r.Left,className:"w-2 h-2 !bg-slate-400"}),i.jsx("span",{className:"text-xl",children:e.icon||""}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:e.label}),e.type&&i.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.type})]}),i.jsx(ry,{type:"source",position:_r.Right,className:"w-2 h-2 !bg-slate-400"})]})},yL=(e,t)=>!e.children||e.children.length===0?t:e.children.reduce((r,n)=>r+yL(n,t),0),gee=(e,t="tree")=>{const r=[],n=[];if(t==="tree"){const o=(l,c,u)=>{r.push({id:l.id,position:{x:c*280,y:u},data:{label:l.label,icon:l.icon,type:l.type},type:"custom"});const d=yL(l,100);let f=u-d/2+100/2;(l.children||[]).forEach(A=>{const m=yL(A,100),g=f+m/2-100/2;n.push({id:`e-${l.id}-${A.id}`,source:l.id,target:A.id,type:"smoothstep",animated:!0}),o(A,c+1,g),f+=m})};o(e,0,0)}else{r.push({id:e.id,position:{x:0,y:0},data:{label:e.label,icon:e.icon,type:e.type},type:"custom"});const o=300,l=500;(e.children||[]).forEach((c,u)=>{const d=u/e.children.length*2*Math.PI;r.push({id:c.id,position:{x:o*Math.cos(d),y:o*Math.sin(d)},data:{label:c.label,icon:c.icon,type:c.type},type:"custom"}),n.push({id:`e-${e.id}-${c.id}`,source:e.id,target:c.id,type:"smoothstep"}),(c.children||[]).forEach((f,A)=>{const m=d+(A-(c.children.length-1)/2)*.25;r.push({id:f.id,position:{x:l*Math.cos(m),y:l*Math.sin(m)},data:{label:f.label,icon:f.icon,type:f.type},type:"custom"}),n.push({id:`e-${c.id}-${f.id}`,source:c.id,target:f.id,type:"smoothstep"})})})}return{nodes:r,edges:n}},Lpe=({node:e,onUpdate:t,onAddChild:r,onDelete:n,level:a=0})=>{const s=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],o=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return i.jsxs("div",{className:`pl-4 ${a>0?"border-l "+o[a-1%o.length]:""}`,children:[i.jsx("div",{className:`p-2 rounded-lg my-1 ${s[a%s.length]}`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"text",value:e.label,onChange:l=>t(e.id,l.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),i.jsx("button",{onClick:()=>r(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:""}),a>0&&i.jsx("button",{onClick:()=>n(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:""})]})}),(e.children||[]).map(l=>i.jsx(Lpe,{node:l,onUpdate:t,onAddChild:r,onDelete:n,level:a+1},l.id))]})},mmt={custom:Amt},pmt=({mapData:e,onBack:t,onSave:r})=>{const[n,a]=w.useState(e.treeData),[s,o]=w.useState("tree"),[l,c]=w.useState(!1),[u,d,f]=K0t([]),[A,m,g]=W0t([]),{fitView:x}=VT();w.useEffect(()=>{const{nodes:j,edges:I}=gee(n,s);d(j),m(I),setTimeout(()=>x({duration:300}),50)},[n,s,d,m,x]);const v=(j,I)=>{const T=JSON.parse(JSON.stringify(n)),k=B=>B.id===j?(B.label=I,!0):(B.children||[]).some(k);k(T),a(T)},y=j=>{const I=JSON.parse(JSON.stringify(n)),T=k=>k.id===j?(k.children||(k.children=[]),k.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(k.children||[]).some(T);T(I),a(I)},N=j=>{const I=JSON.parse(JSON.stringify(n)),T=k=>{const B=(k.children||[]).findIndex(M=>M.id===j);return B!==-1?(k.children.splice(B,1),!0):(k.children||[]).some(T)};T(I),a(I)},C=()=>{c(!0);const{nodes:j,edges:I}=gee(n,s);r({...e,treeData:n,nodes:j,edges:I}),setTimeout(()=>c(!1),1e3)},_=async j=>{const I=document.querySelector(".react-flow");I&&zT(I,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(T=>{{const k=document.createElement("a");k.download=`${e.tema}.png`,k.href=T,k.click()}}).catch(T=>console.error("oops, something went wrong!",T))};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:e.tema}),i.jsx("button",{onClick:t,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:" Volver a la lista"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:i.jsxs(Npe,{nodes:u,edges:A,onNodesChange:f,onEdgesChange:g,fitView:!0,nodeTypes:mmt,children:[i.jsx(rAt,{}),i.jsx(lAt,{})]})}),i.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),i.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[i.jsxs("button",{onClick:()=>o("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[i.jsx(fmt,{})," Vista en rbol"]}),i.jsxs("button",{onClick:()=>o("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[i.jsx(hmt,{})," Vista central"]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:i.jsx(Lpe,{node:n,onUpdate:v,onAddChild:y,onDelete:N})}),i.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>_(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),i.jsx("button",{onClick:C,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:l?"Guardado!":"Guardar"})]})]})]})]})},gmt=({onBack:e,currentUser:t})=>{const[r,n]=w.useState("list"),[a,s]=w.useState([]),[o,l]=w.useState(null),[c,u]=w.useState(!1),[d,f]=w.useState(!0),[A,m]=w.useState(""),[g,x]=w.useState(""),[v,y]=w.useState("");w.useEffect(()=>{f(!0);const T=imt(k=>{s(k),f(!1)});return()=>T()},[]);const N=async T=>{if(T.preventDefault(),!A.trim()){alert("El tema es obligatorio.");return}u(!0);{alert("La API Key de Gemini no est configurada."),u(!1);return}},C=async T=>{try{await omt(T,t)}catch(k){console.error("Error saving mind map:",k),alert("No se pudo guardar el mapa mental.")}},_=T=>{l(T),n("editor")},j=async T=>{if(window.confirm("Eliminar este mapa mental?"))try{await lmt(T)}catch(k){console.error("Error deleting mind map:",k),alert("No se pudo eliminar el mapa mental.")}},I=()=>{switch(r){case"editor":return o?i.jsx(gH,{children:i.jsx(pmt,{mapData:o,onBack:()=>n("list"),onSave:C})}):null;case"config":return i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),i.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:" Volver"})]}),i.jsxs("form",{onSubmit:N,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",id:"tema",value:A,onChange:T=>m(T.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),i.jsx("textarea",{id:"contenido",value:v,onChange:T=>y(T.target.value),rows:4,placeholder:"Aade ms detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),i.jsx("div",{className:"flex justify-end pt-4",children:i.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:c?i.jsx(dmt,{}):"Generar Mapa con IA"})})]})]});case"list":default:return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),i.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length>0?a.map(T=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[i.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:T.tema}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(T.createdAt).toLocaleDateString("es-CL")]}),i.jsxs("div",{className:"mt-4 flex gap-2",children:[i.jsx("button",{onClick:()=>_(T),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),i.jsx("button",{onClick:()=>j(T.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},T.id)):i.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningn mapa mental todava."})})]})}};return d?i.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("span",{className:"text-4xl",children:""}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),i.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),I()]})},xmt=()=>i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),vmt=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),bmt=({onBack:e,currentUser:t})=>{const[r,n]=w.useState([]),[a,s]=w.useState("Media"),[o,l]=w.useState(10),[c,u]=w.useState(!1),[d,f]=w.useState(Array(10).fill("")),[A,m]=w.useState(""),[g,x]=w.useState(null),[v,y]=w.useState({ai:!1,puzzle:!1,data:!0}),N=w.useRef(null);w.useEffect(()=>{y(P=>({...P,data:!0}));const M=cmt(P=>{n(P),y(S=>({...S,data:!1}))});return()=>M()},[]),w.useEffect(()=>{f(M=>{const P=Array(o).fill("");for(let S=0;S<Math.min(M.length,o);S++)P[S]=M[S];return P})},[o]);const C=(M,P)=>{const S=[...d];S[M]=P,f(S)},_=async()=>{if(A.trim()){y(M=>({...M,ai:!0}));try{alert("La API Key de Gemini no est configurada."),y(Y=>({...Y,ai:!1}));return}catch(M){console.error("Error generating words with AI:",M),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Intntelo de nuevo.")}finally{y(M=>({...M,ai:!1}))}}},j=(M,P,S,L,H,q)=>{for(let Q=0;Q<M.length;Q++){const z=S+Q*H.y,K=L+Q*H.x;if(z<0||z>=q||K<0||K>=q||P[z][K]&&P[z][K]!==M[Q])return!1}return!0},I=(M,P,S,L,H)=>{for(let q=0;q<M.length;q++)P[S+q*H.y][L+q*H.x]=M[q]},T=async()=>{y(z=>({...z,puzzle:!0})),x(null),await new Promise(z=>setTimeout(z,100));const M=d.map(z=>z.toUpperCase().replace(/[^A-Z]/g,"")).filter(Boolean);if(M.length===0){alert("Por favor, ingrese al menos una palabra vlida."),y(z=>({...z,puzzle:!1}));return}const P=Math.max(...M.map(z=>z.length));let S=Math.max(P,M.length)+2;a==="Media"&&(S+=3),a==="Difcil"&&(S+=5),S=Math.min(Math.max(S,10),25);const L=Array(S).fill(null).map(()=>Array(S).fill(null)),H=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];a!=="Fcil"&&H.push({x:1,y:-1}),a==="Difcil"&&H.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const z of M.sort((K,Z)=>Z.length-K.length)){let K=!1;for(let Z=0;Z<100;Z++){const U=H[Math.floor(Math.random()*H.length)],Y=Math.floor(Math.random()*S),R=Math.floor(Math.random()*S);if(j(z,L,Y,R,U,S)){I(z,L,Y,R,U),K=!0;break}}K||console.warn(`No se pudo colocar la palabra: ${z}`)}const q=L.map(z=>z.map(K=>K||"ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(Math.random()*27)])),Q={tema:A||"Personalizado",grid:q.map(z=>z.join("")),words:M.sort()};try{const z=await umt(Q,t);x({...Q,id:z,createdAt:new Date().toISOString()})}catch(z){console.error("Error saving puzzle:",z),alert("No se pudo guardar la sopa de letras.")}finally{y(z=>({...z,puzzle:!1}))}},k=()=>{N.current&&zT(N.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(M=>{const P=document.createElement("a");P.download="sopa-de-letras.png",P.href=M,P.click()}).catch(M=>{console.error("oops, something went wrong!",M),alert("No se pudo generar la imagen. Intntelo de nuevo.")})},B=()=>{var S;if(!g)return null;const M=((S=g.grid[0])==null?void 0:S.length)||1,P=g.grid.join("").split("");return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{ref:N,className:"p-6 bg-white",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[i.jsx("div",{className:"md:col-span-2",children:i.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${M}, minmax(0, 1fr))`},children:P.map((L,H)=>i.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:L},H))})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),i.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:g.words.map(L=>i.jsx("li",{children:L},L))})]})]})}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),i.jsx("button",{onClick:k,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return v.data?i.jsx("div",{className:"text-center py-10",children:"Cargando..."}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-4xl",children:""}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),i.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),!g&&i.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),i.jsxs("select",{value:a,onChange:M=>s(M.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{children:"Fcil"}),i.jsx("option",{children:"Media"}),i.jsx("option",{children:"Difcil"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nmero de palabras"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(M=>i.jsx("button",{onClick:()=>{l(M),u(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!c&&o===M?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:M},M)),i.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${c?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),c&&i.jsx("input",{type:"number",value:o,onChange:M=>l(parseInt(M.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{id:"ai-theme",type:"text",value:A,onChange:M=>m(M.target.value),placeholder:"Enva un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{onClick:_,disabled:v.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:v.ai?i.jsx(xmt,{}):i.jsxs(i.Fragment,{children:[i.jsx(vmt,{}),i.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((M,P)=>i.jsx("input",{type:"text",value:M,onChange:S=>C(P,S.target.value),placeholder:`Palabra ${P+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},P))})]}),i.jsx("div",{className:"text-right pt-4",children:i.jsx("button",{onClick:T,disabled:v.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:v.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),g&&B()]})},ymt=()=>i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),wmt=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Nmt=({timeline:e,onSave:t,onBack:r})=>{const[n,a]=w.useState(e),[s,o]=w.useState(null),l=w.useRef(null),c=(m,g,x)=>{a(v=>({...v,events:v.events.map(y=>y.id===m?{...y,[g]:x}:y)}))},u=()=>{const m={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:""},g=[...n.events,m].sort((x,v)=>parseInt(x.date)-parseInt(v.date));a(x=>({...x,events:g}))},d=m=>{a(g=>({...g,events:g.events.filter(x=>x.id!==m)}))},f=async m=>{if(!m.description.trim()){alert("Escribe al menos una idea en la descripcin para que la IA la complete.");return}o(m.id);{alert("La API Key de Gemini no est configurada."),o(null);return}},A=()=>{l.current&&zT(l.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(m=>{const g=document.createElement("a");g.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,g.href=m,g.click()}).catch(m=>{console.error("Error al generar la imagen:",m),alert("No se pudo generar la imagen. Intntelo de nuevo.")})};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),i.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver a la lista"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:i.jsxs("div",{ref:l,className:"relative p-10",children:[i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),i.jsx("div",{className:"relative",children:n.events.sort((m,g)=>parseInt(m.date)-parseInt(g.date)).map((m,g)=>{const x=g%2===0;return i.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[i.jsx("div",{className:"w-1/2",children:x&&i.jsx("div",{className:"text-right pr-8",children:i.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[i.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})}),i.jsx("div",{className:"z-10 flex-shrink-0",children:i.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),i.jsx("div",{className:"w-1/2",children:!x&&i.jsx("div",{className:"text-left pl-8",children:i.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[i.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})})]},m.id)})})]})}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),i.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(m=>i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[i.jsx("input",{type:"text",value:m.date,onChange:g=>c(m.id,"date",g.target.value),placeholder:"Ao/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("textarea",{value:m.description,onChange:g=>c(m.id,"description",g.target.value),placeholder:"Descripcin",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),i.jsx("button",{onClick:()=>f(m),disabled:s===m.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:s===m.id?i.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):i.jsx(wmt,{})})]}),i.jsx("button",{onClick:()=>d(m.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},m.id))}),i.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[i.jsx("button",{onClick:u,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Aadir Hito"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:A,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),i.jsx("button",{onClick:()=>t(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},Cmt=({onBack:e,currentUser:t})=>{const[r,n]=w.useState("list"),[a,s]=w.useState([]),[o,l]=w.useState(null),[c,u]=w.useState(!1),[d,f]=w.useState(!0),[A,m]=w.useState(""),[g,x]=w.useState(""),[v,y]=w.useState("");w.useEffect(()=>{f(!0);const j=nmt(I=>{s(I),f(!1)});return()=>j()},[]);const N=async j=>{if(j.preventDefault(),!A.trim()){alert("El tema es obligatorio.");return}u(!0);{alert("La API Key de Gemini no est configurada."),u(!1);return}},C=async j=>{try{await amt(j,t),n("list"),l(null)}catch(I){console.error("Error saving timeline:",I),alert("No se pudo guardar la lnea de tiempo.")}},_=async j=>{if(window.confirm("Eliminar esta lnea de tiempo?"))try{await smt(j)}catch(I){console.error("Error deleting timeline:",I),alert("No se pudo eliminar la lnea de tiempo.")}};return r==="editor"&&o?i.jsx(Nmt,{timeline:o,onSave:C,onBack:()=>n("list")}):d?i.jsx("div",{className:"text-center py-10",children:"Cargando lneas de tiempo..."}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-4xl",children:""}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Lneas de Tiempo"}),i.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Lnea de Tiempo"}),i.jsxs("form",{onSubmit:N,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",id:"tema",value:A,onChange:j=>m(j.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),i.jsx("input",{type:"text",id:"fechaInicio",value:g,onChange:j=>x(j.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Trmino (Opcional)"}),i.jsx("input",{type:"text",id:"fechaFin",value:v,onChange:j=>y(j.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),i.jsx("div",{className:"text-right",children:i.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:c?i.jsx(ymt,{}):"Generar con IA"})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Lneas de Tiempo Guardadas"}),a.length>0?a.map(j=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:j.tema}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(j.createdAt).toLocaleDateString("es-CL")]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{l(j),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),i.jsx("button",{onClick:()=>_(j.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},j.id)):i.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay lneas de tiempo guardadas."})]})]})},Emt=()=>i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),xee=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),jmt=({onBack:e,currentUser:t})=>{const[r,n]=w.useState([]),[a,s]=w.useState(10),[o,l]=w.useState(!1),[c,u]=w.useState(Array(10).fill("")),[d,f]=w.useState(Array(10).fill("")),[A,m]=w.useState(""),[g,x]=w.useState(null),[v,y]=w.useState(!1),[N,C]=w.useState({ai:!1,puzzle:!1,data:!0}),[_,j]=w.useState(null),I=w.useRef(null);w.useEffect(()=>{C(q=>({...q,data:!0}));const H=tmt(q=>{const Q=q.map(z=>{const{grid_flat:K,grid_width:Z,...U}=z,Y=[];if(K&&Z>0)for(let R=0;R<K.length;R+=Z)Y.push(K.slice(R,R+Z));return{...U,grid:Y}});n(Q),C(z=>({...z,data:!1}))});return()=>H()},[]),w.useEffect(()=>{const H=a;u(q=>Array.from({length:H},(Q,z)=>q[z]||"")),f(q=>Array.from({length:H},(Q,z)=>q[z]||""))},[a]);const T=(H,q)=>{const Q=[...c];Q[H]=q,u(Q)},k=(H,q)=>{const Q=[...d];Q[H]=q,f(Q)},B=async()=>{if(A.trim()){C(H=>({...H,ai:!0}));try{alert("La API Key de Gemini no est configurada."),C(ie=>({...ie,ai:!1}));return}catch(H){console.error("Error generating words/clues with AI:",H),alert("No se pudieron generar las palabras y pistas. Intntelo de nuevo.")}finally{C(H=>({...H,ai:!1}))}}},M=async H=>{const q=c[H];if(!q||!q.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}j(H);try{alert("La API Key de Gemini no est configurada."),j(null);return}catch(Q){console.error("Error generating clue with AI:",Q),alert("No se pudo generar la pista.")}finally{j(null)}},P=w.useCallback(()=>{try{const H=c.map((we,Ae)=>({word:we.toUpperCase().replace(/[^A-Z]/g,""),clue:d[Ae]})).filter(we=>we.word.length>0);if(H.length===0)return alert("Por favor, ingrese al menos una palabra vlida."),null;H.sort((we,Ae)=>Ae.word.length-we.word.length);const q=H[0].word.length,Q=Math.max(q,H.length)*2;let z=Array.from({length:Q},()=>Array(Q).fill(null));const K=[],Z=H.shift(),U=Math.floor(Q/2),Y=Math.floor((Q-Z.word.length)/2);for(let we=0;we<Z.word.length;we++)z[U][Y+we]=Z.word[we];K.push({word:Z.word,clue:Z.clue,direction:"across",row:U,col:Y});for(const we of H){let Ae={score:-1,row:-1,col:-1,direction:"across"};for(const de of K)for(let ae=0;ae<de.word.length;ae++)for(let fe=0;fe<we.word.length;fe++)if(de.word[ae]===we.word[fe]){let ge=0,xe,Ue,qe;de.direction==="across"?(qe="down",xe=de.row-fe,Ue=de.col+ae):(qe="across",xe=de.row+ae,Ue=de.col-fe);let Ze=!0;for(let We=0;We<we.word.length;We++){const me=xe+(qe==="down"?We:0),Ve=Ue+(qe==="across"?We:0);if(me<0||me>=Q||Ve<0||Ve>=Q){Ze=!1;break}const Xe=z[me][Ve],Ie=me===de.row+(de.direction==="down"?ae:0)&&Ve===de.col+(de.direction==="across"?ae:0);if(Xe&&!Ie){Ze=!1;break}if(Xe&&Ie&&Xe!==we.word[fe]){Ze=!1;break}if(!Ie){if(qe==="across"&&(me>0&&z[me-1][Ve]||me<Q-1&&z[me+1][Ve])){Ze=!1;break}if(qe==="down"&&(Ve>0&&z[me][Ve-1]||Ve<Q-1&&z[me][Ve+1])){Ze=!1;break}}Xe&&ge++}Ze&&ge>Ae.score&&(Ae={score:ge,row:xe,col:Ue,direction:qe})}if(Ae.score>-1){for(let de=0;de<we.word.length;de++){const ae=Ae.row+(Ae.direction==="down"?de:0),fe=Ae.col+(Ae.direction==="across"?de:0);z[ae][fe]=we.word[de]}K.push({word:we.word,clue:we.clue,direction:Ae.direction,row:Ae.row,col:Ae.col})}}let R=Q,D=-1,W=Q,J=-1;K.forEach(we=>{R=Math.min(R,we.row),D=Math.max(D,we.row+(we.direction==="down"?we.word.length-1:0)),W=Math.min(W,we.col),J=Math.max(J,we.col+(we.direction==="across"?we.word.length-1:0))}),D===-1&&(R=K[0].row,D=K[0].row,W=K[0].col,J=K[0].col+K[0].word.length-1);const le=1,ie=Math.max(0,R-le),re=Math.min(Q,D+1+le),ce=Math.max(0,W-le),oe=Math.min(Q,J+1+le),be=z.slice(ie,re).map(we=>we.slice(ce,oe)),X=K.map(we=>({...we,row:we.row-ie,col:we.col-ce})).sort((we,Ae)=>we.row-Ae.row||we.col-Ae.col);let je=1;const De=[],ke=new Map;X.forEach(we=>{const Ae=`${we.row},${we.col}`;ke.has(Ae)||ke.set(Ae,je++),De.push({...we,number:ke.get(Ae)})});const ue=be.map(we=>we.map(Ae=>({char:Ae,number:null})));return De.forEach(we=>{const Ae=`${we.row},${we.col}`;ue[we.row]&&ue[we.row][we.col]!==void 0&&(ue[we.row][we.col].number=ke.get(Ae))}),{grid:ue,clues:{across:De.filter(we=>we.direction==="across").sort((we,Ae)=>we.number-Ae.number),down:De.filter(we=>we.direction==="down").sort((we,Ae)=>we.number-Ae.number)}}}catch(H){return console.error("Error generating crossword grid:",H),alert("Ocurri un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[c,d]),S=async()=>{var q;C(Q=>({...Q,puzzle:!0})),x(null),await new Promise(Q=>setTimeout(Q,100));const H=P();if(H){const Q={creadorId:t.id,creadorNombre:t.nombreCompleto,tema:A||"Personalizado",grid:H.grid,clues:H.clues},{grid:z,...K}=Q,Z={...K,grid_flat:z.flat().map(U=>U.char||""),grid_width:((q=z[0])==null?void 0:q.length)||0};try{const U=await rmt(Z,t);x({...Q,id:U,fechaCreacion:new Date().toISOString()})}catch(U){console.error("Error saving puzzle:",U),alert("No se pudo guardar el crucigrama en la base de datos.")}}C(Q=>({...Q,puzzle:!1}))},L=()=>{I.current&&(y(!1),setTimeout(()=>{zT(I.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(H=>{const q=document.createElement("a");q.download="crucigrama.png",q.href=H,q.click()}).catch(H=>console.error("Error generating image",H))},100))};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-4xl",children:""}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),i.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),g?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{ref:I,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[i.jsx("div",{children:i.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${g.grid[0].length}, 2rem)`},children:g.grid.flat().map((H,q)=>i.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:H.char?"white":"black"},children:[H.number&&i.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:H.number}),v&&H.char&&i.jsx("span",{children:H.char})]},q))})}),i.jsxs("div",{className:"text-sm",children:[i.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),i.jsx("ul",{className:"space-y-1",children:g.clues.across.map(H=>i.jsxs("li",{children:[i.jsxs("strong",{children:[H.number,"."]})," ",H.clue]},`${H.word}-${H.clue}`))}),i.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),i.jsx("ul",{className:"space-y-1",children:g.clues.down.map(H=>i.jsxs("li",{children:[i.jsxs("strong",{children:[H.number,"."]})," ",H.clue]},`${H.word}-${H.clue}`))})]})]})}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:v,onChange:()=>y(!v),className:"h-5 w-5 rounded"}),i.jsx("span",{children:"Mostrar Solucin"})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),i.jsx("button",{onClick:L,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):i.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nmero de palabras"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(H=>i.jsx("button",{onClick:()=>{s(H),l(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!o&&a===H?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:H},H)),i.jsx("button",{onClick:()=>l(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${o?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),o&&i.jsx("input",{type:"number",value:a,onChange:H=>s(parseInt(H.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{id:"ai-theme",type:"text",value:A,onChange:H=>m(H.target.value),placeholder:"Enva un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{onClick:B,disabled:N.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:N.ai?i.jsx(Emt,{}):i.jsxs(i.Fragment,{children:[i.jsx(xee,{}),i.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),i.jsx("div",{className:"space-y-3",children:Array.from({length:a}).map((H,q)=>i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsx("input",{type:"text",value:c[q],onChange:Q=>T(q,Q.target.value),placeholder:`Palabra ${q+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[i.jsx("textarea",{value:d[q],onChange:Q=>k(q,Q.target.value),placeholder:`Pista ${q+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{onClick:()=>M(q),disabled:_===q,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:_===q?i.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):i.jsx(xee,{})})]})]},q))}),i.jsx("div",{className:"text-right pt-4",children:i.jsx("button",{onClick:S,disabled:N.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:N.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},kmt=[{id:"sopaDeLetras",icon:"",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"",nombre:"Lneas de Tiempo",descripcion:"Construye lneas de tiempo para comprender procesos, hechos histricos o secuencias."}],Smt=({recurso:e,onClick:t})=>i.jsxs("button",{onClick:t,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[i.jsx("div",{className:"text-6xl mb-4",children:e.icon}),i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:e.nombre}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:e.descripcion})]}),_mt=()=>{const[e,t]=w.useState("menu"),{currentUser:r}=yE(),n=()=>e!=="menu"&&!r?i.jsx("div",{className:"text-center p-8",children:"Cargando informacin de usuario..."}):e==="mapasMentales"?i.jsx(gmt,{onBack:()=>t("menu"),currentUser:r}):e==="sopaDeLetras"?i.jsx(bmt,{onBack:()=>t("menu"),currentUser:r}):e==="lineasDeTiempo"?i.jsx(Cmt,{onBack:()=>t("menu"),currentUser:r}):e==="crucigramas"?i.jsx(jmt,{onBack:()=>t("menu"),currentUser:r}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:kmt.map(a=>i.jsx(Smt,{recurso:a,onClick:()=>t(a.id)},a.id))})]});return i.jsx("div",{className:"animate-fade-in space-y-6",children:n()})},Tmt="evaluaciones_formativas",Bmt="calificaciones_formativas",Mpe="trabajos_grupales_formativos",Upe=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},Imt=(e,t)=>{const r=Bt(ht(ut,Tmt),sr("curso","==",e));return lr(r,n=>{t(n.docs.map(a=>Upe(a)))},n=>{console.error("Error subscribing to student evaluations:",n),t([])})},Dmt=(e,t)=>{if(!e||e.length===0)return()=>{};const r=e.map(n=>{const a=Wt(ut,Bmt,n);return lr(a,s=>{s.exists()?t({[n]:s.data()}):t({[n]:{}})},s=>{(s==null?void 0:s.code)!=="permission-denied"&&console.error(`Error subscribing to grade doc ${n}:`,s)})});return()=>r.forEach(n=>n())},Omt=(e,t)=>{const r=Bt(ht(ut,Mpe),sr("curso","==",e));return lr(r,n=>{t(n.docs.map(a=>Upe(a)))},n=>{console.error("Error subscribing to group projects:",n),t([])})},Pmt=async e=>{try{const{id:t,...r}=e,n=Wt(ut,Mpe,t);await bi(n,r)}catch(t){throw console.error("Error updating group project:",t),new Error("Could not update group project.")}},Fmt=({currentUser:e})=>{const[t,r]=w.useState([]),[n,a]=w.useState({}),[s,o]=w.useState([]),[l,c]=w.useState(!0),[u,d]=w.useState(null),[f,A]=w.useState(!1),[m,g]=w.useState(null),x=w.useRef(null);w.useEffect(()=>{if(!e.curso){c(!1);return}c(!0);const _=Imt(e.curso,r),j=Omt(e.curso,I=>{o(I),c(!1)});return()=>{_(),j()}},[e.curso]),w.useEffect(()=>{if(t.length===0){a({});return}const _=t.map(k=>k.id);let j={};const T=Dmt(_,k=>{j={...j,...k},a(j)});return()=>{T()}},[t]);const v=w.useMemo(()=>{if(!e.curso)return[];const j=t.filter(T=>T.curso===e.curso).reduce((T,k)=>((T[k.asignatura]=T[k.asignatura]||[]).push(k),T),{});return Object.entries(j).map(([T,k])=>{let B=0,M=0;const P=k.map(L=>{var Q;const H=(Q=n[L.id])==null?void 0:Q[e.nombreCompleto];let q="No Trabajado";return H==="trabajado"?(B+=7,M++,q="Trabajado"):H==="no trabajado"&&(B+=2,M++,q="No Trabajado"),{id:L.id,nombreActividad:L.nombreActividad,fecha:L.fecha,estado:q}}).filter(L=>{var H;return(H=n[L.id])==null?void 0:H[e.nombreCompleto]}),S=M>0?(B/M).toFixed(1):"N/A";return{asignatura:T,promedio:S,actividades:P.sort((L,H)=>new Date(H.fecha).getTime()-new Date(L.fecha).getTime())}}).filter(T=>T.actividades.length>0).sort((T,k)=>T.asignatura.localeCompare(k.asignatura))},[t,n,e]);w.useEffect(()=>{if(v.reduce((B,M)=>B+M.actividades.length,0)===0){d(null);return}const j=v.reduce((B,M)=>{const P=parseFloat(M.promedio);return isNaN(P)?B:B+P},0),I=v.length>0?j/v.length:0,T=Xj.find(B=>I>=B.promedioMin&&I<=B.promedioMax)||null,k=Xj.filter(B=>I>=B.promedioMin);if(d({puntajeTotal:0,promedio:I,rangoActual:T,insigniasGanadas:k}),x.current!==null){const B=Xj.find(M=>x.current>=M.promedioMin&&x.current<=M.promedioMax)||null;T&&(!B||T.nombre!==B.nombre)&&g(T)}x.current=I},[v]);const y=w.useMemo(()=>e.curso?s.filter(_=>_.curso===e.curso).map(_=>{const j=_.grupos.find(I=>I.integrantes.some(T=>T.nombre===e.nombreCompleto));return j?{..._,miGrupo:j}:null}).filter(_=>_!==null).sort((_,j)=>new Date(j.fechaPresentacion).getTime()-new Date(_.fechaPresentacion).getTime()):[],[s,e]),N=async(_,j)=>{const I=s.find(k=>k.id===_);if(!I)return;const T={...I,grupos:I.grupos.map(k=>k.integrantes.some(M=>M.nombre===e.nombreCompleto)?{...k,integrantes:k.integrantes.map(M=>M.nombre===e.nombreCompleto?{...M,rol:j||void 0}:M)}:k)};try{await Pmt(T)}catch(k){console.error("Error updating role:",k),alert("No se pudo actualizar el rol.")}},C=_=>{const j=parseFloat(_);return isNaN(j)?"bg-slate-400":j<4?"bg-red-500":j<5.5?"bg-yellow-500":"bg-green-500"};return l?i.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[m&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>g(null),children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:_=>_.stopPropagation(),children:[i.jsx("div",{className:"text-8xl animate-bounce",children:m.emoji}),i.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"Subiste de Rango!"}),i.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:m.nombre}),i.jsx("p",{className:"text-slate-600 mt-4",children:m.mensaje}),i.jsx("button",{onClick:()=>g(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"Genial!"})]})}),f&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>A(!1),children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:_=>_.stopPropagation(),children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),i.jsx("div",{className:"overflow-y-auto space-y-3",children:Xj.map(_=>{const j=u==null?void 0:u.insigniasGanadas.some(I=>I.nombre===_.nombre);return i.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${j?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[i.jsx("div",{className:"text-5xl",children:_.emoji}),i.jsxs("div",{children:[i.jsx("h3",{className:`font-bold ${j?"text-amber-700":"text-slate-600"}`,children:_.nombre}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",_.promedioMin," y ",_.promedioMax]})]})]},_.nombre)})})]})}),i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),i.jsx("p",{className:"text-slate-500 mb-6",children:"Aqu puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&i.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),i.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),i.jsx("button",{onClick:()=>A(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),i.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),i.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),v.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(_=>i.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800",children:_.asignatura}),i.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),i.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${C(_.promedio)}`,children:_.promedio})]}),i.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),_.actividades.map(j=>i.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-700",children:j.nombreActividad}),i.jsx("p",{className:"text-xs text-slate-500",children:new Date(j.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),i.jsx("span",{className:`font-semibold ${j.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:j.estado==="Trabajado"?" Trabajado":" No Trabajado"})]},j.id))]})]},_.asignatura))}):i.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[i.jsx("span",{className:"text-5xl",children:""}),i.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"An sin registros"}),i.jsx("p",{className:"text-slate-500 mt-2",children:"Todava no tienes evaluaciones formativas registradas por tus profesores."})]})]}),y.length>0&&i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),i.jsx("div",{className:"space-y-4",children:y.map(_=>{const j=_.miGrupo.integrantes.filter(T=>T.nombre!==e.nombreCompleto&&T.rol).map(T=>T.rol),I=voe.filter(T=>!j.includes(T));return i.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[i.jsx("h3",{className:"font-bold text-slate-800",children:_.nombreActividad}),i.jsxs("p",{className:"text-sm text-slate-500",children:[_.asignatura," - Presentacin: ",new Date(_.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),i.jsxs("div",{className:"mt-3 pt-3 border-t",children:[i.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",_.miGrupo.numero]}),i.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:_.miGrupo.integrantes.map(T=>i.jsxs("li",{className:"grid grid-cols-2 items-center",children:[i.jsx("span",{className:T.nombre===e.nombreCompleto?"font-bold":"",children:T.nombre}),T.nombre===e.nombreCompleto?i.jsxs("select",{value:T.rol||"",onChange:k=>N(_.id,k.target.value),className:"text-sm p-1 border rounded w-full",children:[i.jsx("option",{value:"",children:"-- Seleccionar rol --"}),T.rol&&!I.includes(T.rol)&&i.jsx("option",{value:T.rol,children:T.rol}),I.map(k=>i.jsx("option",{value:k,children:k},k))]}):i.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:T.rol||"Sin rol"})]},T.nombre))})]})]},_.id)})})]})]})},Rmt="proyectos_interdisciplinarios",Hpe="entregas_interdisciplinarias",Qpe=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaCompletado:((s=(a=t.fechaCompletado)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaCompletado}},Lmt=(e,t)=>{const r=Bt(ht(ut,Rmt),sr("cursos","array-contains",e));return lr(r,n=>{const a=n.docs.map(s=>Qpe(s));t(a)},n=>{console.error("Error al suscribirse a los proyectos:",n),t([])})},Mmt=(e,t)=>{const r=Bt(ht(ut,Hpe),sr("estudianteId","==",e));return lr(r,n=>{const a=n.docs.map(s=>Qpe(s));t(a)},n=>{console.error("Error al suscribirse a las entregas:",n),t([])})},Umt=async e=>{try{const{id:t,...r}=e,n=Wt(ut,Hpe,t),a={...r,fechaCompletado:xr.fromDate(new Date(r.fechaCompletado||Date.now()))};await bi(n,a,{merge:!0})}catch(t){throw console.error("Error al actualizar la entrega:",t),new Error("No se pudo guardar la entrega.")}},Hmt=({currentUser:e})=>{const[t,r]=w.useState([]),[n,a]=w.useState([]),[s,o]=w.useState(null),[l,c]=w.useState(!0);w.useEffect(()=>{if(!e.curso||!e.id){c(!1);return}c(!0);const f=Lmt(e.curso,r),A=Mmt(e.id,m=>{a(m),c(!1)});return()=>{f(),A()}},[e.curso,e.id]);const u=async f=>{try{await Umt(f)}catch(A){console.error("Failed to update submission:",A),alert("Hubo un error al guardar tu entrega.")}},d=({plan:f,tarea:A})=>{const m=w.useMemo(()=>{const j=n.find(I=>I.planificacionId===f.id&&I.tareaId===A.id);return j||{id:`${f.id}_${A.id}_${e.id}`,planificacionId:f.id,tareaId:A.id,estudianteId:e.id,estudianteNombre:e.nombreCompleto,completada:!1}},[f.id,A.id,n]),[g,x]=w.useState(!1),[v,y]=w.useState({observaciones:m.observacionesEstudiante||"",enlace:m.enlaceUrl||""}),N=j=>{var T;const I=(T=j.target.files)==null?void 0:T[0];I&&(alert(`Simulacin: Archivo "${I.name}" listo para subir.`),u({...m,archivoAdjunto:{nombre:I.name,url:`simulated/path/${I.name}`},fechaCompletado:new Date().toISOString()}))},C=()=>{u({...m,observacionesEstudiante:v.observaciones,enlaceUrl:v.enlace,fechaCompletado:new Date().toISOString()})},_=()=>{u({...m,completada:!m.completada,fechaCompletado:new Date().toISOString()})};return i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("input",{type:"checkbox",checked:m.completada,onChange:_,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:`font-semibold ${m.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",A.numero,": ",A.instrucciones]}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",A.fechaEntrega]}),A.recursoUrl&&i.jsx("a",{href:A.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),i.jsx("button",{onClick:()=>x(!g),className:"text-sm font-semibold",children:g?"Ocultar":"Entregar"})]}),g&&i.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[i.jsx("textarea",{value:v.observaciones,onChange:j=>y({...v,observaciones:j.target.value}),onBlur:C,placeholder:"Aadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),i.jsx("input",{type:"url",value:v.enlace,onChange:j=>y({...v,enlace:j.target.value}),onBlur:C,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),i.jsx("input",{type:"file",onChange:N,className:"text-sm"}),m.archivoAdjunto&&i.jsxs("p",{className:"text-xs text-green-600",children:[" Archivo subido: ",m.archivoAdjunto.nombre]})]}),m.feedbackProfesor&&i.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[i.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentacin del profesor:"}),i.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:m.feedbackProfesor})]})]})};return l?i.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),t.length>0?t.map(f=>{const A=f.tareas||[],g=n.filter(v=>v.planificacionId===f.id).filter(v=>v.completada).length,x=A.length>0?g/A.length*100:0;return i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[i.jsxs("button",{onClick:()=>o(s===f.id?null:f.id),className:"w-full text-left",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:f.nombreProyecto}),i.jsxs("div",{className:"mt-2 space-y-1",children:[i.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[i.jsx("span",{children:"Progreso"}),i.jsxs("span",{children:[Math.round(x),"%"]})]}),i.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:i.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${x}%`}})})]})]}),s===f.id&&i.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:A.length>0?A.map(v=>i.jsx(d,{plan:f,tarea:v},v.id)):i.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto an no tiene tareas asignadas."})})]},f.id)}):i.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[i.jsx("span",{className:"text-5xl",children:""}),i.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Todo al da!"}),i.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},Qmt=({ciclos:e})=>{var _,j,I,T,k;const[t,r]=w.useState(!1),[n,a]=w.useState(null),[s,o]=w.useState(null),[l,c]=w.useState(null),u=B=>{if(!B)return null;try{let M=B.trim();const P=M.match(/```json([\s\S]*?)```/i)||M.match(/```([\s\S]*?)```/i);P&&P[1]&&(M=P[1]);const S=M.indexOf("{"),L=M.lastIndexOf("}");return S!==-1&&L!==-1&&L>S&&(M=M.slice(S,L+1)),JSON.parse(M)}catch{return null}},d=e.length,f=e.filter(B=>B.videoObservacionUrl&&B.retroalimentacion.exito).length,A=new Set(e.map(B=>B.docenteInfo)).size,m=e.reduce((B,M)=>{if(!M.horaInicio||!M.horaTermino)return B;const P=new Date(`2000/01/01 ${M.horaInicio}`),L=(new Date(`2000/01/01 ${M.horaTermino}`).getTime()-P.getTime())/(1e3*60);return B+L},0)/e.length,g=e.reduce((B,M)=>{const P=new Date(M.fecha).toLocaleDateString("es-ES",{month:"long"});return B[P]=(B[P]||0)+1,B},{}),x=e.reduce((B,M)=>(M.asignaturaInfo&&(B[M.asignaturaInfo]=(B[M.asignaturaInfo]||0)+1),B),{}),v=Object.entries(x).sort(([,B],[,M])=>M-B).slice(0,5),y=w.useMemo(()=>e.map(B=>{var M,P,S;return{fecha:B.fecha,docente:B.docenteInfo,asignatura:B.asignaturaInfo,foco:(M=B.retroalimentacion)==null?void 0:M.foco,exito:(P=B.retroalimentacion)==null?void 0:P.exito,brecha:(S=B.retroalimentacion)==null?void 0:S.brecha}}).filter(B=>B.foco||B.brecha||B.exito),[e]),N=()=>{const B=Object.entries(g).map(([L,H])=>`${L}: ${H}`).join(", "),M=v.map(([L,H])=>`${L} (${H})`).join(", "),P=d?Math.round(f/d*100):0,S=y.slice(0,12).map(L=>`- ${new Date(L.fecha).toLocaleDateString()} | Docente: ${L.docente} | Asig.: ${L.asignatura}
         Exitos: ${L.exito||"-"}
         Foco: ${L.foco||"-"}
         Brecha: ${L.brecha?`min ${L.brecha.minutoInicial||"?"}-${L.brecha.minutoFinal||"?"} | preguntas: ${L.brecha.preguntas||"-"} | indicadores: ${L.brecha.indicadores||"-"}`:"-"}`).join(`
`);return`Eres un asesor pedaggico experto en OPR. Analiza los siguientes datos agregados de ciclos de observacin y retroalimentacin y devuelve un JSON con insights accionables para Subdireccin.

DATOS RESUMEN:
- Total de ciclos: ${d}
- Ciclos completados: ${f} (tasa: ${P}%)
- Docentes nicos observados: ${A}
- Tiempo promedio de observacin (min): ${isFinite(m)?Math.round(m):0}
- Distribucin por mes: ${B||"sin datos"}
- Asignaturas ms observadas (top 5): ${M||"sin datos"}

MUESTRAS DE FOCO/XITO/BRECHAS (mx. 12):
${S||"(no hay muestras)"}

DEVUELVE SOLO JSON (sin comentarios) con este esquema:
{
  "resumenGeneral": "string",
  "tendencias": ["string"],
  "riesgos": ["string"],
  "focosRecomendados": [
    { "foco": "string", "justificativo": "string opcional" }
  ],
  "proximosPasos": ["string"],
  "indicadores": [ { "nombre": "string", "valor": "string|number" } ]
}
`},C=async()=>{if(d){r(!0),a(null),c(null),o(null);try{const B=N(),M=await O7(B,1,!0,"OPR"),P=u(M);P?c(P):o(M)}catch(B){a((B==null?void 0:B.message)||"No se pudo obtener el anlisis con IA.")}finally{r(!1)}}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Tl,{className:"w-5 h-5 text-indigo-600"}),"Asistente IA del Ciclo OPR"]}),i.jsx("button",{onClick:C,disabled:t||d===0,className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium border ${t||d===0?"opacity-50 cursor-not-allowed":"hover:bg-slate-50 dark:hover:bg-slate-700"} border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-200`,title:d===0?"No hay ciclos para analizar":"Generar anlisis con IA",children:t?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-indigo-600"}),"Generando..."]}):i.jsx(i.Fragment,{children:"Generar anlisis"})})]}),n&&i.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:n}),!n&&(l||s)&&i.jsx("div",{className:"mt-2 grid grid-cols-1 lg:grid-cols-2 gap-4",children:l?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-3",children:[l.resumenGeneral&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Resumen"}),i.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:l.resumenGeneral})]}),(_=l.tendencias)!=null&&_.length?i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Tendencias"}),i.jsx("ul",{className:"list-disc pl-5 text-sm text-slate-700 dark:text-slate-300",children:l.tendencias.map((B,M)=>i.jsx("li",{children:B},M))})]}):null,(j=l.riesgos)!=null&&j.length?i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Riesgos"}),i.jsx("ul",{className:"list-disc pl-5 text-sm text-slate-700 dark:text-slate-300",children:l.riesgos.map((B,M)=>i.jsx("li",{children:B},M))})]}):null]}),i.jsxs("div",{className:"space-y-3",children:[(I=l.focosRecomendados)!=null&&I.length?i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Focos recomendados"}),i.jsx("ul",{className:"space-y-2",children:l.focosRecomendados.map((B,M)=>i.jsxs("li",{className:"text-sm text-slate-700 dark:text-slate-300",children:[i.jsx("span",{className:"font-medium",children:B.foco}),B.justificativo?i.jsx("span",{className:"block text-slate-600 dark:text-slate-400",children:B.justificativo}):null]},M))})]}):null,(T=l.proximosPasos)!=null&&T.length?i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Prximos pasos"}),i.jsx("ol",{className:"list-decimal pl-5 text-sm text-slate-700 dark:text-slate-300",children:l.proximosPasos.map((B,M)=>i.jsx("li",{children:B},M))})]}):null,(k=l.indicadores)!=null&&k.length?i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.indicadores.map((B,M)=>i.jsxs("div",{className:"px-3 py-2 rounded border dark:border-slate-700 text-sm",children:[i.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:B.nombre}),i.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-100",children:String(B.valor)})]},M))})]}):null]})]}):i.jsx("div",{className:"col-span-2 text-sm text-slate-700 dark:text-slate-300",children:i.jsx(NE,{content:s,context:"dashboard-opr-ai"})})}),!n&&!l&&!s&&i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Genera un anlisis para obtener tendencias, focos y prximos pasos basados en los ciclos registrados."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg",children:i.jsx(Tl,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Ciclos"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:d})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:i.jsx(pa,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Ciclos Completados"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:f})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/50 rounded-lg",children:i.jsx(qs,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docentes Observados"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:A})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:i.jsx(Dc,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Tiempo Promedio"}),i.jsxs("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[Math.round(m)," min"]})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(qo,{className:"w-5 h-5 text-indigo-600"}),"Ciclos por Mes"]}),i.jsx("div",{className:"space-y-2",children:Object.entries(g).map(([B,M])=>i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 capitalize",children:B}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:M})]}),i.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-2 bg-indigo-600 dark:bg-indigo-500 rounded-full",style:{width:`${M/d*100}%`}})})]})},B))})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(wu,{className:"w-5 h-5 text-amber-600"}),"Asignaturas Ms Observadas"]}),i.jsx("div",{className:"space-y-2",children:v.map(([B,M])=>i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:B}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:M})]}),i.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-2 bg-amber-600 dark:bg-amber-500 rounded-full",style:{width:`${M/Math.max(...Object.values(x))*100}%`}})})]})},B))})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Uc,{className:"w-5 h-5 text-blue-600"}),"Estado de los Ciclos"]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docente"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Fecha"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Asignatura"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estado"})]})}),i.jsx("tbody",{children:e.map(B=>i.jsxs("tr",{className:"border-t dark:border-slate-700",children:[i.jsx("td",{className:"py-2 px-3 text-sm text-slate-900 dark:text-slate-300",children:B.docenteInfo}),i.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:new Date(B.fecha).toLocaleDateString()}),i.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:B.asignaturaInfo}),i.jsx("td",{className:"py-2 px-3",children:B.videoObservacionUrl&&B.retroalimentacion.exito?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded",children:[i.jsx(pa,{className:"w-3 h-3"})," Completado"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded",children:[i.jsx(Uc,{className:"w-3 h-3"})," Pendiente"]})})]},B.id))})]})})]})]})},Vmt=({acompanamientoId:e,onEdit:t,readOnly:r=!1,allowDelete:n=!0})=>{const[a,s]=w.useState([]),[o,l]=w.useState(!0),[c,u]=w.useState(null);w.useEffect(()=>{l(!0),u(null);let m=null;try{m=xct(e,g=>{s(g),l(!1)},async g=>{console.warn("Suscripcin ciclos fall, usando fetch una vez.",g);try{const x=await aL(e);s(x)}catch(x){u((x==null?void 0:x.message)||"No se pudieron cargar los ciclos OPR.")}finally{l(!1)}})}catch(g){console.warn("Fallo suscripcin, hago fetch nico.",g),(async()=>{try{const x=await aL(e);s(x)}catch(x){u((x==null?void 0:x.message)||"No se pudieron cargar los ciclos OPR.")}finally{l(!1)}})()}return()=>{try{m&&m()}catch{}}},[e]);const d=async m=>{if(confirm("Eliminar este ciclo OPR? Esta accin no se puede deshacer."))try{await sL(m)}catch{alert("No se pudo eliminar el ciclo.")}},[f,A]=w.useState(!1);return o?i.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-amber-600"})," Cargando ciclos OPR..."]}):c?i.jsx("div",{className:"p-3 border border-red-300 dark:border-red-800 bg-red-50 dark:bg-red-900/20 rounded",children:i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:c})}):a.length?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Ciclos OPR"}),i.jsx("button",{onClick:()=>A(!f),className:"px-4 py-2 text-sm font-medium text-white bg-amber-600 hover:bg-amber-700 rounded-lg shadow-sm transition-colors",children:f?"Ver Lista":"Ver Dashboard"})]}),f?i.jsx("div",{children:i.jsx(Qmt,{ciclos:a})}):i.jsx("div",{className:"space-y-3",children:a.map(m=>{var g;return i.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm",children:i.jsxs("div",{className:"flex justify-between items-start gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(HM,{className:"w-4 h-4 text-purple-600"}),i.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:m.nombreCiclo||"Ciclo"}),i.jsxs("span",{className:"text-sm text-slate-500",children:[" ",new Date(m.fecha).toLocaleDateString("es-CL")]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-slate-600 dark:text-slate-300",children:[m.videoObservacionUrl&&i.jsxs("a",{className:"flex items-center gap-1 hover:underline text-blue-600 dark:text-blue-400",href:m.videoObservacionUrl,target:"_blank",rel:"noopener noreferrer",title:"Ver video de observacin",children:[i.jsx(doe,{className:"w-4 h-4"})," Video observacin"]}),((g=m.retroalimentacion)==null?void 0:g.videoModeloUrl)&&i.jsxs("a",{className:"flex items-center gap-1 hover:underline text-blue-600 dark:text-blue-400",href:m.retroalimentacion.videoModeloUrl,target:"_blank",rel:"noopener noreferrer",title:"Ver video modelo",children:[i.jsx(yy,{className:"w-4 h-4"})," Video modelo"]}),m.horaInicio&&m.horaTermino&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Dc,{className:"w-4 h-4"})," ",m.horaInicio,"",m.horaTermino]})]})]}),!r&&i.jsxs("div",{className:"flex items-center gap-2",children:[t&&i.jsx("button",{onClick:()=>t(m),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"Editar"}),n&&i.jsx("button",{onClick:()=>d(m.id),title:"Eliminar ciclo",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:i.jsx(Vn,{className:"w-4 h-4"})})]})]})},m.id)})})]}):i.jsx("div",{className:"p-6 text-center bg-slate-100 dark:bg-slate-800 rounded",children:i.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:"No hay ciclos OPR registrados para este acompaamiento."})})},ii=({label:e,value:t})=>t?i.jsxs("div",{className:"flex gap-2 text-sm",children:[i.jsx("div",{className:"text-slate-500 dark:text-slate-400 min-w-28",children:e}),i.jsx("div",{className:"text-slate-800 dark:text-slate-200 flex-1",children:t})]}):null,$mt=({ciclo:e,onClose:t})=>{const{nombreCiclo:r,fecha:n,horaInicio:a,horaTermino:s,videoObservacionUrl:o,detallesObservacion:l=[],retroalimentacion:c,planificacion:u,seguimiento:d}=e,f=e.docenteInfo||e.docente||"",A=e.cursoInfo||"",m=e.asignaturaInfo||"";return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:t,children:i.jsxs("div",{className:"w-full max-w-3xl bg-white dark:bg-slate-800 rounded-xl shadow-2xl overflow-hidden animate-fade-in-up",onClick:g=>g.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(HM,{className:"w-5 h-5 text-purple-600"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:r||"Ciclo OPR"})]}),i.jsx("button",{onClick:t,className:"p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-700",title:"Cerrar",children:i.jsx(xo,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"px-5 py-4 space-y-6 max-h-[80vh] overflow-auto",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(ii,{label:"Fecha",value:new Date(n).toLocaleDateString("es-CL")}),i.jsx(ii,{label:"Hora",value:a||s?`${a||""}${a&&s?"  ":""}${s||""}`:void 0}),i.jsx(ii,{label:"Docente",value:i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(R3e,{className:"w-4 h-4 text-sky-600"}),f]})}),i.jsx(ii,{label:"Curso / Asignatura",value:i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(ps,{className:"w-4 h-4 text-amber-600"}),[A,m].filter(Boolean).join("  ")]})}),o&&i.jsx(ii,{label:"Video",value:i.jsxs("a",{className:"inline-flex items-center gap-2 text-blue-600 dark:text-blue-400 hover:underline",href:o,target:"_blank",rel:"noopener noreferrer",children:[i.jsx(doe,{className:"w-4 h-4"})," Ver video de observacin"]})})]}),l!=null&&l.length?i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 mb-2 flex items-center gap-2",children:[i.jsx(Dc,{className:"w-4 h-4 text-blue-600"})," Registro detallado de observacin"]}),i.jsx("div",{className:"overflow-x-auto border rounded-md dark:border-slate-700",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 text-slate-600 dark:text-slate-300",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left p-2",children:"Minuto"}),i.jsx("th",{className:"text-left p-2",children:"Acciones Docente"}),i.jsx("th",{className:"text-left p-2",children:"Acciones Estudiantes"}),i.jsx("th",{className:"text-left p-2",children:"Actividades"})]})}),i.jsx("tbody",{children:l.map(g=>i.jsxs("tr",{className:"border-t dark:border-slate-700 align-top",children:[i.jsx("td",{className:"p-2 whitespace-nowrap",children:g.minuto}),i.jsx("td",{className:"p-2",children:g.accionesDocente||""}),i.jsx("td",{className:"p-2",children:g.accionesEstudiantes||""}),i.jsx("td",{className:"p-2",children:g.actividades||""})]},g.id))})]})})]}):null,c&&i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 mb-2 flex items-center gap-2",children:[i.jsx(yy,{className:"w-4 h-4 text-green-600"})," Retroalimentacin"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(ii,{label:"xito",value:c.exito}),i.jsx(ii,{label:"Foco",value:c.foco}),i.jsx(ii,{label:"Modelo",value:c.modelo}),i.jsx(ii,{label:"Elementos a identificar",value:c.elementosIdentificar})]}),c.brecha&&i.jsxs("div",{className:"mt-3 p-3 rounded border dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50",children:[i.jsx("div",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Anlisis de brecha"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm",children:[i.jsx(ii,{label:"Minuto inicial",value:c.brecha.minutoInicial}),i.jsx(ii,{label:"Minuto final",value:c.brecha.minutoFinal}),i.jsx(ii,{label:"Indicadores",value:c.brecha.indicadores})]}),i.jsx("div",{className:"mt-2 text-sm",children:i.jsx(ii,{label:"Preguntas",value:c.brecha.preguntas})})]})]}),u&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 mb-2",children:"Planificacin de prctica"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(ii,{label:"Preparacin",value:u.preparacion}),i.jsx(ii,{label:"Objetivo",value:u.objetivo}),i.jsx(ii,{label:"Actividad",value:u.actividad}),i.jsx(ii,{label:"Tiempo",value:u.tiempo})]})]}),d&&(d.fecha||d.curso||d.profesor||d.firma)&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[i.jsx(ii,{label:"Fecha",value:d.fecha}),i.jsx(ii,{label:"Curso",value:d.curso}),i.jsx(ii,{label:"Profesor",value:d.profesor}),i.jsx(ii,{label:"Firma",value:d.firma})]})]})]}),i.jsx("div",{className:"px-5 py-3 bg-slate-50 dark:bg-slate-700/50 border-t dark:border-slate-700 flex justify-end",children:i.jsx("button",{onClick:t,className:"px-4 py-2 rounded-md bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-100 hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cerrar"})})]})})},zmt=({data:e})=>i.jsx("div",{className:"space-y-4",children:e.map((r,n)=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),i.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:i.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),Gmt=({currentUser:e})=>{const[t,r]=w.useState([]),[n,a]=w.useState(!1),[s,o]=w.useState(null),[l,c]=w.useState(null),[u,d]=w.useState(K2),[f,A]=w.useState([]),[m,g]=w.useState(null),x=w.useCallback(async()=>{a(!0);try{let C;if(e.email)try{C=await bct(e.email.toLowerCase())}catch{C=await _Z(e.nombreCompleto)}else C=await _Z(e.nombreCompleto);const _=C.sort((j,I)=>{const T=j.fecha?new Date(j.fecha).getTime():0;return(I.fecha?new Date(I.fecha).getTime():0)-T});r(_),o(null)}catch(C){console.error("Error al cargar acompaamientos desde Firestore",C),o("No se pudieron cargar tus acompaamientos desde la nube.")}finally{a(!1)}},[e.nombreCompleto]),v=w.useCallback(async()=>{try{const C=await yct(e.nombreCompleto);C&&d(C)}catch(C){console.error("Error al cargar rbrica personalizada",C)}},[e.nombreCompleto]);w.useEffect(()=>{x(),v()},[x,v]),w.useEffect(()=>{(async()=>{try{const _=await ume(),j=(e.email||"").toLowerCase(),I=e.nombreCompleto,T=_.filter(k=>k.docenteEmailLower===j||k.docenteInfo===I||k.docente===I);T.sort((k,B)=>k.fecha<B.fecha?1:k.fecha>B.fecha?-1:0),A(T)}catch(_){console.warn("No se pudieron cargar Ciclos OPR independientes.",_),A([])}})()},[e.email,e.nombreCompleto]);const y=w.useMemo(()=>{if(!l)return[];const C={};return u.forEach(_=>{C[_.domain]={total:0,count:0},_.criteria.forEach(j=>{const I=l.rubricaResultados[j.name];I&&(C[_.domain].total+=I,C[_.domain].count++)})}),Object.entries(C).map(([_,j])=>({label:_,value:j.count>0?j.total/j.count:0}))},[l,u]),N=C=>{const _=new wr;_.setFont("helvetica","bold"),_.setFontSize(10),_.setTextColor(100),_.text("LICEO INDUSTRIAL DE RECOLETA",_.internal.pageSize.getWidth()/2,15,{align:"center"}),_.setFont("helvetica","bold"),_.setFontSize(16),_.setTextColor(40),_.text("Informe de Acompaamiento Docente",_.internal.pageSize.getWidth()/2,25,{align:"center"}),_.setFontSize(12),_.setFont("helvetica","normal"),Pi(_,{startY:35,body:[["Docente:",C.docente],["Fecha:",new Date(C.fecha).toLocaleDateString("es-CL")],["Asignatura:",C.asignatura],["Curso:",C.curso],["Bloques:",C.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let j=_.lastAutoTable.finalY+15;if(Object.keys(C.rubricaResultados).length>0){const k=[],B=["Dbil","Incipiente","Satisfactorio","Avanzado"];u.forEach(M=>{k.push([{content:M.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),M.criteria.forEach(P=>{const S=C.rubricaResultados[P.name],L=S?B[S-1]:"No evaluado";k.push([P.name,L])})}),Pi(_,{startY:j,head:[["Indicador","Nivel de Logro"]],body:k,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),j=_.lastAutoTable.finalY+15}const I=(k,B)=>{if(!B)return;j>250&&(_.addPage(),j=20,_.setFont("helvetica","bold"),_.setFontSize(10),_.setTextColor(100),_.text("LICEO INDUSTRIAL DE RECOLETA",_.internal.pageSize.getWidth()/2,15,{align:"center"}),j=25),_.setFont("helvetica","bold"),_.setFontSize(14),_.setTextColor(40),_.text(k,14,j),j+=8,_.setFont("helvetica","normal"),_.setFontSize(11),_.setTextColor(60);const M=_.splitTextToSize(B.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);_.text(M,14,j),j+=M.length*5+10};I("Observaciones Generales",C.observacionesGenerales),I("Retroalimentacin Consolidada",C.retroalimentacionConsolidada);const T=_.getNumberOfPages();for(let k=1;k<=T;k++)_.setPage(k),_.setFontSize(8),_.setTextColor(128),_.text(`Pgina ${k} de ${T}`,_.internal.pageSize.getWidth()/2,_.internal.pageSize.getHeight()-10,{align:"center"});_.save(`Acompanamiento_${e.nombreCompleto.replace(/\s/g,"_")}_${new Date(C.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return l?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("button",{onClick:()=>c(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:" Volver a mi historial"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompaamiento"}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(l.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",l.curso," - ",l.asignatura]})]}),i.jsxs("button",{onClick:()=>N(l),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[i.jsx(xoe,{})," Exportar PDF"]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2 space-y-6",children:i.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[i.jsx("h3",{children:"Retroalimentacin Consolidada (IA)"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:i.jsx("p",{className:"whitespace-pre-wrap",children:l.retroalimentacionConsolidada||"No se ha generado retroalimentacin."})}),i.jsx("h3",{children:"Observaciones Generales"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:i.jsx("p",{className:"whitespace-pre-wrap",children:l.observacionesGenerales||"Sin observaciones."})})]})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeo por Dominio"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:i.jsx(zmt,{data:y})})]})]}),l.id&&i.jsxs("div",{className:"mt-10",children:[i.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Mis Ciclos OPR"}),i.jsx("div",{className:"border rounded-lg dark:border-slate-700 p-4 bg-white dark:bg-slate-800",children:i.jsx(Vmt,{acompanamientoId:l.id,readOnly:!0,allowDelete:!1})})]})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompaamientos"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aqu encontrars el historial de tus observaciones de clase y la retroalimentacin asociada."}),n&&i.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompaamientos desde la nube..."}),s&&i.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),!n&&t.length===0&&i.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompaamientos registrados en la nube."}),i.jsx("div",{className:"space-y-4",children:!n&&t.length>0?t.map(C=>i.jsx("button",{onClick:()=>c(C),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[C.curso," - ",C.asignatura]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(C.fecha).toLocaleDateString("es-CL"),C.bloques&&` | Bloques: ${C.bloques}`]}),Object.keys(C.rubricaResultados).length>0&&i.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(C.rubricaResultados).length," criterios"]})]}),i.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},C.id)):!n&&i.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsx("span",{className:"text-5xl",children:""}),i.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"An no tienes acompaamientos de clase registrados."})]})}),i.jsxs("div",{className:"mt-10",children:[i.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Ciclos OPR Independientes"}),f.length===0?i.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded border dark:border-slate-700 text-slate-600 dark:text-slate-300",children:"No tienes ciclos OPR independientes registrados."}):i.jsx("div",{className:"space-y-3",children:f.map(C=>i.jsx("button",{onClick:()=>g(C),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:i.jsx("div",{className:"flex justify-between items-start gap-3",children:i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:C.nombreCiclo||"Ciclo"}),i.jsxs("span",{className:"text-sm text-slate-500",children:[" ",new Date(C.fecha).toLocaleDateString("es-CL")]})]}),C.cursoInfo&&C.asignaturaInfo&&i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:[C.cursoInfo,"  ",C.asignaturaInfo]})]})})},C.id))})]}),m&&i.jsx($mt,{ciclo:m,onClose:()=>g(null)})]})},qmt=e=>{console.log(" Iniciando suscripcin a todas las planificaciones...");try{const t=ht(Ar,"planificaciones"),r=Bt(t,Xt("fechaCreacion","desc"));return lr(r,a=>{const s=[];a.forEach(o=>{const l=o.data();s.push({id:o.id,...l})}),console.log(" Todas las planificaciones cargadas:",s.length),e(s)},a=>{throw console.error(" Error al cargar todas las planificaciones:",a),a})}catch(t){throw console.error(" Error al configurar suscripcin a todas las planificaciones:",t),t}},Kmt=(e,t)=>{if(console.log(" Iniciando suscripcin a planificaciones del usuario:",e),!e)throw console.error(" userId no proporcionado"),new Error("userId es requerido");try{const r=ht(Ar,"planificaciones"),n=Bt(r,sr("userId","==",e),Xt("fechaCreacion","desc"));return lr(n,s=>{const o=[];s.forEach(l=>{const c=l.data();o.push({id:l.id,...c})}),console.log(" Planificaciones del usuario cargadas:",o.length),t(o)},s=>{throw console.error(" Error al cargar planificaciones del usuario:",s),s})}catch(r){throw console.error(" Error al configurar suscripcin a planificaciones del usuario:",r),r}};function Wmt(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}const Xmt=Wmt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var Ymt={value:function(){}};function Vpe(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new VS(r)}function VS(e){this._=e}function Jmt(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}VS.prototype=Vpe.prototype={constructor:VS,on:function(e,t){var r=this._,n=Jmt(e+"",r),a,s=-1,o=n.length;if(arguments.length<2){for(;++s<o;)if((a=(e=n[s]).type)&&(a=Zmt(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(a=(e=n[s]).type)r[a]=vee(r[a],e.name,t);else if(t==null)for(a in r)r[a]=vee(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new VS(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function Zmt(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function vee(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=Ymt,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}const ept=Object.freeze(Object.defineProperty({__proto__:null,dispatch:Vpe},Symbol.toStringTag,{value:"Module"})),tpt=z1e(ept);var UO,bee;function rpt(){if(bee)return UO;bee=1;const e=tpt.dispatch,t=Math.PI/180,r={archimedean:x,rectangular:v},n=64,a=2048;UO=function(){var _=[256,256],j=s,I=o,T=c,k=l,B=l,M=u,P=d,S=x,L=[],H=1/0,q=e("word","end"),Q=null,z=Math.random,K={},Z=N;K.canvas=function(R){return arguments.length?(Z=C(R),K):Z},K.start=function(){var R=U(Z()),D=y((_[0]>>5)*_[1]),W=null,J=L.length,le=-1,ie=[],re=L.map(function(oe,be){return oe.text=j.call(this,oe,be),oe.font=I.call(this,oe,be),oe.style=k.call(this,oe,be),oe.weight=B.call(this,oe,be),oe.rotate=M.call(this,oe,be),oe.size=~~T.call(this,oe,be),oe.padding=P.call(this,oe,be),oe}).sort(function(oe,be){return be.size-oe.size});return Q&&clearInterval(Q),Q=setInterval(ce,0),ce(),K;function ce(){for(var oe=Date.now();Date.now()-oe<H&&++le<J&&Q;){var be=re[le];be.x=_[0]*(z()+.5)>>1,be.y=_[1]*(z()+.5)>>1,f(R,be,re,le),be.hasText&&Y(D,be,W)&&(ie.push(be),q.call("word",K,be),W?m(W,be):W=[{x:be.x+be.x0,y:be.y+be.y0},{x:be.x+be.x1,y:be.y+be.y1}],be.x-=_[0]>>1,be.y-=_[1]>>1)}le>=J&&(K.stop(),q.call("end",K,ie,W))}},K.stop=function(){Q&&(clearInterval(Q),Q=null);for(const R of L)delete R.sprite;return K};function U(R){const D=R.getContext("2d",{willReadFrequently:!0});R.width=R.height=1;const W=Math.sqrt(D.getImageData(0,0,1,1).data.length>>2);return R.width=(n<<5)/W,R.height=a/W,D.fillStyle=D.strokeStyle="red",{context:D,ratio:W}}function Y(R,D,W){_[0],_[1];for(var J=D.x,le=D.y,ie=Math.sqrt(_[0]*_[0]+_[1]*_[1]),re=S(_),ce=z()<.5?1:-1,oe=-ce,be,X,je;(be=re(oe+=ce))&&(X=~~be[0],je=~~be[1],!(Math.min(Math.abs(X),Math.abs(je))>=ie));)if(D.x=J+X,D.y=le+je,!(D.x+D.x0<0||D.y+D.y0<0||D.x+D.x1>_[0]||D.y+D.y1>_[1])&&(!W||g(D,W))&&!A(D,R,_[0])){for(var De=D.sprite,ke=D.width>>5,ue=_[0]>>5,we=D.x-(ke<<4),Ae=we&127,de=32-Ae,ae=D.y1-D.y0,fe=(D.y+D.y0)*ue+(we>>5),ge,xe=0;xe<ae;xe++){ge=0;for(var Ue=0;Ue<=ke;Ue++)R[fe+Ue]|=ge<<de|(Ue<ke?(ge=De[xe*ke+Ue])>>>Ae:0);fe+=ue}return!0}return!1}return K.timeInterval=function(R){return arguments.length?(H=R??1/0,K):H},K.words=function(R){return arguments.length?(L=R,K):L},K.size=function(R){return arguments.length?(_=[+R[0],+R[1]],K):_},K.font=function(R){return arguments.length?(I=C(R),K):I},K.fontStyle=function(R){return arguments.length?(k=C(R),K):k},K.fontWeight=function(R){return arguments.length?(B=C(R),K):B},K.rotate=function(R){return arguments.length?(M=C(R),K):M},K.text=function(R){return arguments.length?(j=C(R),K):j},K.spiral=function(R){return arguments.length?(S=r[R]||R,K):S},K.fontSize=function(R){return arguments.length?(T=C(R),K):T},K.padding=function(R){return arguments.length?(P=C(R),K):P},K.random=function(R){return arguments.length?(z=R,K):z},K.on=function(){var R=q.on.apply(q,arguments);return R===q?K:R},K};function s(_){return _.text}function o(){return"serif"}function l(){return"normal"}function c(_){return Math.sqrt(_.value)}function u(){return(~~(random()*6)-3)*30}function d(){return 1}function f(_,j,I,T){if(!j.sprite){var k=_.context,B=_.ratio;k.clearRect(0,0,(n<<5)/B,a/B);var M=0,P=0,S=0,L=I.length;for(--T;++T<L;){j=I[T],k.save(),k.font=j.style+" "+j.weight+" "+~~((j.size+1)/B)+"px "+j.font;const be=k.measureText(j.text),X=-Math.floor(be.width/2);let je=(be.width+1)*B,De=j.size<<1;if(j.rotate){var H=Math.sin(j.rotate*t),q=Math.cos(j.rotate*t),Q=je*q,z=je*H,K=De*q,Z=De*H;je=Math.max(Math.abs(Q+Z),Math.abs(Q-Z))+31>>5<<5,De=~~Math.max(Math.abs(z+K),Math.abs(z-K))}else je=je+31>>5<<5;if(De>S&&(S=De),M+je>=n<<5&&(M=0,P+=S,S=0),P+De>=a)break;k.translate((M+(je>>1))/B,(P+(De>>1))/B),j.rotate&&k.rotate(j.rotate*t),k.fillText(j.text,X,0),j.padding&&(k.lineWidth=2*j.padding,k.strokeText(j.text,X,0)),k.restore(),j.width=je,j.height=De,j.xoff=M,j.yoff=P,j.x1=je>>1,j.y1=De>>1,j.x0=-j.x1,j.y0=-j.y1,j.hasText=!0,M+=je}for(var U=k.getImageData(0,0,(n<<5)/B,a/B).data,Y=[];--T>=0;)if(j=I[T],!!j.hasText){for(var R=j.width,D=R>>5,W=j.y1-j.y0,J=0;J<W*D;J++)Y[J]=0;if(M=j.xoff,M==null)return;P=j.yoff;for(var le=0,ie=-1,re=0;re<W;re++){for(var J=0;J<R;J++){var ce=D*re+(J>>5),oe=U[(P+re)*(n<<5)+(M+J)<<2]?1<<31-J%32:0;Y[ce]|=oe,le|=oe}le?ie=re:(j.y0++,W--,re--,P++)}j.y1=j.y0+ie,j.sprite=Y.slice(0,(j.y1-j.y0)*D)}}}function A(_,j,I){I>>=5;for(var T=_.sprite,k=_.width>>5,B=_.x-(k<<4),M=B&127,P=32-M,S=_.y1-_.y0,L=(_.y+_.y0)*I+(B>>5),H,q=0;q<S;q++){H=0;for(var Q=0;Q<=k;Q++)if((H<<P|(Q<k?(H=T[q*k+Q])>>>M:0))&j[L+Q])return!0;L+=I}return!1}function m(_,j){var I=_[0],T=_[1];j.x+j.x0<I.x&&(I.x=j.x+j.x0),j.y+j.y0<I.y&&(I.y=j.y+j.y0),j.x+j.x1>T.x&&(T.x=j.x+j.x1),j.y+j.y1>T.y&&(T.y=j.y+j.y1)}function g(_,j){return _.x+_.x1>j[0].x&&_.x+_.x0<j[1].x&&_.y+_.y1>j[0].y&&_.y+_.y0<j[1].y}function x(_){var j=_[0]/_[1];return function(I){return[j*(I*=.1)*Math.cos(I),I*Math.sin(I)]}}function v(_){var j=4,I=j*_[0]/_[1],T=0,k=0;return function(B){var M=B<0?-1:1;switch(Math.sqrt(1+4*M*B)-M&3){case 0:T+=I;break;case 1:k+=j;break;case 2:T-=I;break;default:k-=j;break}return[T,k]}}function y(_){for(var j=[],I=-1;++I<_;)j[I]=0;return j}function N(){return document.createElement("canvas")}function C(_){return typeof _=="function"?_:function(){return _}}return UO}var npt=rpt();const apt=sc(npt),spt=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),ipt=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),opt=()=>i.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),lpt=e=>{const[t,r]=w.useState([]),[n,a]=w.useState(!0),[s,o]=w.useState(null),l=w.useMemo(()=>(e==null?void 0:e.profile)==="SUBDIRECCION",[e]);return w.useEffect(()=>{if(!(e!=null&&e.email)&&!(e!=null&&e.id)){o("Usuario no autenticado"),a(!1);return}try{let c;const u=d=>{r(d),a(!1),o(null)};if(l)c=qmt(u);else{const d=e.email||e.id||"";c=Kmt(u,d)}return c}catch(c){o(c instanceof Error?c.message:"Error al conectar con la base de datos"),a(!1)}},[e,l]),{planificaciones:t,loading:n,error:s,canViewAllPlans:l}},cpt=({plan:e,onClose:t})=>i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:r=>r.stopPropagation(),children:[i.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreUnidad}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.asignatura," | ",e.nivel," | Autor: ",e.autor||"N/A"]})]}),i.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:i.jsx(ipt,{})})]}),i.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[i.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),i.jsxs("p",{className:"mt-2",children:[i.jsx("strong",{children:"Indicadores de Evaluacin:"})," ",e.indicadoresEvaluacion]}),i.jsx("div",{className:"mt-3",children:i.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof e.progreso=="number"?`${e.progreso}%`:"No registrado"]})})]}),i.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",e.detallesLeccion.length,")"]}),i.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:e.detallesLeccion.map((r,n)=>i.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[i.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",n+1,": ",r.actividades]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("span",{children:[i.jsx("strong",{children:"Objetivo:"})," ",r.objetivosAprendizaje]}),i.jsxs("span",{children:[i.jsx("strong",{children:"Contenidos:"})," ",r.contenidosConceptuales]})]})]},n))}),e.reflexionUnidad&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexin Docente"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),e.reflexionUnidad.ordenHabilidades&&e.reflexionUnidad.ordenHabilidades.length>0?i.jsx("ul",{className:"space-y-2",children:e.reflexionUnidad.ordenHabilidades.map((r,n)=>i.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[i.jsxs("span",{className:"font-bold text-amber-500",children:[n+1,"."]})," ",r]},r))}):i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.fortalezas||"N/A"})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.mejoras||"N/A"})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafos"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),yee=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],upt=["1 Medio","2 Medio","3 Medio","4 Medio"],dpt=({words:e})=>{const t=w.useRef(null);return w.useEffect(()=>{if(!e.length||!t.current)return;const r=Nd(t.current);r.selectAll("*").remove();const n=apt().size([500,350]).words(e.map(s=>({...s}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(s=>Math.sqrt(s.value)*12).on("end",a);n.start();function a(s){r.attr("width",n.size()[0]).attr("height",n.size()[1]).append("g").attr("transform",`translate(${n.size()[0]/2},${n.size()[1]/2})`).selectAll("text").data(s).enter().append("text").style("font-size",o=>`${o.size}px`).style("font-family","Impact").style("fill",(o,l)=>q3(Xmt)(l.toString())).attr("text-anchor","middle").attr("transform",o=>`translate(${[o.x,o.y]})rotate(${o.rotate})`).text(o=>o.text)}},[e]),i.jsx("svg",{ref:t})},fpt=({planificaciones:e})=>{const[t,r]=w.useState("todos"),[n,a]=w.useState("todos"),s=w.useMemo(()=>["todos",...Array.from(new Set(e.map(d=>d.asignatura)))],[e]),o=w.useMemo(()=>e.filter(d=>(t==="todos"||d.nivel===t)&&(n==="todos"||d.asignatura===n)&&d.reflexionUnidad),[e,t,n]),l=w.useMemo(()=>{const d=yee.reduce((f,A)=>({...f,[A]:0}),{});return o.forEach(f=>{var A,m;return(m=(A=f.reflexionUnidad)==null?void 0:A.ordenHabilidades)==null?void 0:m.forEach((g,x)=>{d[g]!==void 0&&(d[g]+=yee.length-x)})}),Object.entries(d).map(([f,A])=>({text:f,value:A})).sort((f,A)=>A.value-f.value)},[o]),c=w.useMemo(()=>{const d=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),A=(o.map(m=>{var g,x;return`${((g=m.reflexionUnidad)==null?void 0:g.fortalezas)||""} ${((x=m.reflexionUnidad)==null?void 0:x.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((m,g)=>(d.has(g)||(m[g]=(m[g]||0)+1),m),{});return Object.entries(A).map(([m,g])=>({text:m,value:g})).sort((m,g)=>g.value-m.value).slice(0,50)},[o]),u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return i.jsxs("div",{className:"animate-fade-in",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),i.jsxs("select",{value:t,onChange:d=>r(d.target.value),className:u,children:[i.jsx("option",{value:"todos",children:"Todos los Niveles"}),upt.map(d=>i.jsx("option",{value:d,children:d},d))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsx("select",{value:n,onChange:d=>a(d.target.value),className:u,children:s.map(d=>i.jsx("option",{value:d,children:d==="todos"?"Todas las Asignaturas":d},d))})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),l.every(d=>d.value===0)?i.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):i.jsx("ul",{className:"space-y-3",children:l.map((d,f)=>i.jsxs("li",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:f+1}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:d.text}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:i.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${d.value/(l[0].value||1)*100}%`}})})]})]},d.text))})]}),i.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),c.length>0?i.jsx(dpt,{words:c}):i.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},hpt=({currentUser:e})=>{const{planificaciones:t,loading:r,error:n,canViewAllPlans:a}=lpt(e),[s,o]=w.useState("seguimiento"),[l,c]=w.useState("1"),[u,d]=w.useState(null),[f,A]=w.useState(null),m=w.useMemo(()=>{const v={"1":"1 Medio","2":"2 Medio","3":"3 Medio","4":"4 Medio"};return t.filter(y=>y.nivel===v[l]&&y.tipo==="Unidad")},[t,l]),g=[{key:"1",label:"1 Medio"},{key:"2",label:"2 Medio"},{key:"3",label:"3 Medio"},{key:"4",label:"4 Medio"}];if(!(e!=null&&e.id))return i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{children:"Usuario no autenticado."})});if(r)return i.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[i.jsx(opt,{}),i.jsx("span",{children:"Cargando planificaciones..."})]});if(n)return i.jsx("div",{className:"text-center py-8",children:i.jsxs("p",{className:"text-red-500",children:["Error: ",n]})});const x=()=>i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:i.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(v=>i.jsx("button",{onClick:()=>c(v.key),className:`${l===v.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:v.label},v.key))})}),m.length===0?i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):i.jsx("div",{className:"space-y-4",children:ma.map(v=>{const y=m.filter(C=>C.asignatura===v);if(y.length===0)return null;const N=u===v;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[i.jsxs("button",{onClick:()=>d(N?null:v),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:v}),i.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[y.length," unidad",y.length>1?"es":""]})]}),i.jsx("span",{className:`transform transition-transform ${N?"rotate-180":""}`,children:i.jsx(spt,{})})]}),N&&i.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:i.jsx("ul",{className:"space-y-3",children:y.map(C=>i.jsx("li",{children:i.jsxs("button",{onClick:()=>A(C),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:C.nombreUnidad}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",C.autor||"N/A"]})]})},C.id))})})]},v)})})]});return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),a&&i.jsx("div",{className:"text-sm text-amber-600 font-medium",children:" Vista administrativa"})]}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:i.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>o("seguimiento"),className:`${s==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),i.jsx("button",{onClick:()=>o("analisis"),className:`${s==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Anlisis de Reflexiones"})]})}),s==="seguimiento"&&x(),s==="analisis"&&i.jsx(fpt,{planificaciones:t.filter(v=>v.tipo==="Unidad")})]}),f&&i.jsx(cpt,{plan:f,onClose:()=>A(null)})]})},qT="analisisTaxonomicos",Apt=async()=>{try{const e=Bt(ht(Ar,qT),Xt("uploadDate","desc"));return(await Ir(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener todos los anlisis:",e),new Error("No se pudieron cargar los anlisis taxonmicos")}},mpt=async e=>{if(!e)return[];try{const t=Bt(ht(Ar,qT),sr("userId","==",e),Xt("uploadDate","desc"));return(await Ir(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener anlisis por usuario:",t),new Error("No se pudieron cargar los anlisis del usuario")}},ppt=async e=>{try{return{id:(await ln(ht(Ar,qT),e)).id,...e}}catch(t){throw console.error("Error al crear anlisis:",t),new Error("No se pudo crear el anlisis taxonmico")}},gpt=async e=>{try{const t=Wt(Ar,qT,e);await ca(t)}catch(t){throw console.error("Error al eliminar anlisis:",t,"ID:",e),new Error("No se pudo eliminar el anlisis taxonmico")}},Vy="multicopias",wH=e=>{if(e===null||typeof e!="object")return e;const t=Array.isArray(e)?[]:{};return Object.entries(e).forEach(([r,n])=>{n!==void 0&&(t[r]=typeof n=="object"&&n!==null?wH(n):n)}),t},wee=e=>{try{if(!e)return;if(typeof e.toDate=="function")return e.toDate().toISOString();if(e.seconds)return new Date(e.seconds*1e3+Math.floor((e.nanoseconds||0)/1e6)).toISOString()}catch{}},NH=e=>{const t=e.data()||{};return{...t,id:e.id,createdAt:wee(t.createdAt)||new Date().toISOString(),updatedAt:wee(t.updatedAt)||void 0}};async function xpt(e,t="multicopias"){const r=Date.now(),n=e.name.replace(/\s+/g,"_"),a=`${t}/${r}/${n}`,s=Od(b3,a);return await by(s,e),await LA(s)}async function $pe(e){const{id:t,createdAt:r,updatedAt:n,solicitanteEmailLower:a,...s}=e||{},o=s,l=wH({...o,estado:o.estado||"Enviada",solicitanteEmailLower:o.solicitanteEmail?o.solicitanteEmail.toLowerCase():void 0,createdAt:zn(),updatedAt:zn()});return(await ln(ht(ut,Vy),l)).id}async function zpe(e,t){if(!e)throw new Error("updateSolicitudMulticopia: id requerido");const r=wH({...t,updatedAt:zn()});await qi(Wt(ut,Vy,e),r)}function Gpe(e,t){const r=ht(ut,Vy);let n;return e.emailLower?n=Bt(r,sr("solicitanteEmailLower","==",e.emailLower),Xt("createdAt","desc")):e.solicitanteId?n=Bt(r,sr("solicitanteId","==",e.solicitanteId),Xt("createdAt","desc")):n=Bt(r,Xt("createdAt","desc")),lr(n,a=>t(a.docs.map(NH)),a=>{console.error("subscribeMulticopiasPorSolicitante",a),t([])})}function qpe(e,t){const r=ht(ut,Vy),n=Bt(r,Xt("createdAt","desc"));return lr(n,a=>{const o=a.docs.map(NH).filter(l=>!(e.nivel&&e.nivel!=="Todos"&&(l.nivel||"")!==e.nivel||e.curso&&e.curso!=="Todos"&&(l.curso||"")!==e.curso||e.asignatura&&e.asignatura!=="Todas"&&(l.asignatura||"")!==e.asignatura||e.docenteNombre&&e.docenteNombre!=="Todos"&&(l.solicitanteNombre||"")!==e.docenteNombre||e.estado&&e.estado!=="Todos"&&(l.estado||"Enviada")!==e.estado));t(o)},a=>{console.error("subscribeMulticopiasAllConFiltros",a),t([])})}async function _2(e,t,r,n){if(!e)throw new Error("cambiarEstadoMulticopia: id requerido");const a={estado:t};t==="Visada"&&(a.visadoPor=r),t==="Aceptada"&&(a.aceptadoPor=r),t==="Rechazada"&&(a.rechazadoPor=r,n!=null&&n.motivoRechazo&&(a.motivoRechazo=n.motivoRechazo)),t==="Completada"&&(a.completadoPor=r),await zpe(e,a)}async function Kpe(e){try{if(!e.solicitanteNombre&&!e.solicitanteEmail)return;await boe({docenteNombre:e.solicitanteNombre,docenteEmail:e.solicitanteEmail,tipo:"alerta",titulo:"Multicopia aceptada",mensaje:"Su solicitud fue aceptada. La multicopia estar lista en un plazo mximo de 48 horas.",estudianteNombre:void 0,estudianteId:void 0,accionRequerida:void 0})}catch(t){console.warn("No se pudo crear notificacin de aceptacin:",t)}}async function Wpe(e,t){if(!e)throw new Error("eliminarSolicitudMulticopia: id requerido");if(t!=null&&t.adjuntoUrl)try{const r=Od(b3,t.adjuntoUrl);await h3(r)}catch(r){console.warn("No se pudo eliminar adjunto de Storage (continuando con borrado de doc):",r)}await ca(Wt(ut,Vy,e))}async function Xpe(e={}){const{emailLower:t,max:r=200}=e;let n;const a=ht(ut,Vy);t?n=Bt(a,sr("solicitanteEmailLower","==",t)):n=Bt(a,Xt("createdAt","desc"));let o=(await Ir(n)).docs.map(NH).filter(l=>!!l.adjuntoUrl);return t&&(o=o.sort((l,c)=>(c.createdAt||"").localeCompare(l.createdAt||""))),o.slice(0,r)}const vpt=Object.freeze(Object.defineProperty({__proto__:null,cambiarEstadoMulticopia:_2,createSolicitudMulticopia:$pe,eliminarSolicitudMulticopia:Wpe,listarAdjuntosMulticopias:Xpe,notificarAceptacionMulticopia:Kpe,subscribeMulticopiasAllConFiltros:qpe,subscribeMulticopiasPorSolicitante:Gpe,updateSolicitudMulticopia:zpe,uploadAdjuntoMulticopia:xpt},Symbol.toStringTag,{value:"Module"})),Nee=["1 Medio","2 Medio","3 Medio","4 Medio"],Pm=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],lb={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},bpt=()=>i.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Cee=({currentUser:e})=>{const[t,r]=w.useState([]),[n,a]=w.useState(!1),[s,o]=w.useState(null),[l,c]=w.useState(null),[u,d]=w.useState(""),[f,A]=w.useState(!1),[m,g]=w.useState(null),[x,v]=w.useState(null),[y,N]=w.useState([]),[C,_]=w.useState(""),[j,I]=w.useState(""),[T,k]=w.useState(""),[B,M]=w.useState(""),[P,S]=w.useState(""),[L,H]=w.useState("resumen"),q=w.useCallback(async()=>{if(e!=null&&e.id){a(!0);try{const D=e.profile==="SUBDIRECCION"?await Apt():await mpt(e.id);r(D),o(null)}catch(D){console.error("Error al cargar anlisis:",D),o("No se pudieron cargar los anlisis.")}finally{a(!1)}}},[e]);w.useEffect(()=>{q()},[q]),w.useEffect(()=>{(async()=>{try{const D=(e.email||"").toLowerCase(),J=(await Xpe({emailLower:e.profile==="SUBDIRECCION"?void 0:D,max:300})).map(le=>({id:le.id,titulo:le.tituloMaterial,url:le.adjuntoUrl,createdAt:le.createdAt,asignatura:le.asignatura,nivel:le.nivel}));N(J)}catch(D){console.warn("No se pudieron cargar adjuntos de Multicopias:",D)}})()},[e]);const Q=async D=>{var J;const W=(J=D.target.files)==null?void 0:J[0];if(W){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(W.type)){o("Por favor, suba un archivo PDF o DOCX vlido.");return}g(W),d(W.name),o(null);const ie=new FileReader;ie.onloadend=()=>{var ce;const re=(ce=ie.result)==null?void 0:ce.split(",")[1];if(!re){o("No se pudo procesar el archivo. Puede que est vaco o corrupto."),v(null);return}v({mimeType:W.type,data:re})},ie.onerror=()=>o("Error al leer el archivo."),ie.readAsDataURL(W)}},z=async()=>{if(!u.trim()||!x&&!C){o("Debe subir un documento o seleccionar uno desde Multicopias, y asignarle un nombre para analizar.");return}if(!j||!T){o("Seleccione Nivel y Asignatura antes de analizar.");return}A(!0),o(null);const D=`
            Eres un experto en pedagoga y en la Taxonoma de Bloom. Analiza el siguiente documento de una evaluacin educativa.
            Tu tarea es:
            1. Identificar cada pregunta o tem de evaluacin en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonoma de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser vlido y tener la siguiente estructura:
               {
                 "analysisResults": [
                   { "question": "...", "habilidadBloom": "..." }
                 ],
                 "summary": {
                   "Recordar": 0,
                   "Comprender": 0,
                   "Aplicar": 0,
                   "Analizar": 0,
                   "Evaluar": 0,
                   "Crear": 0
                 }
               }
            Donde "summary" contiene el conteo total de preguntas por cada nivel de Bloom.
        `;Pm.reduce((W,J)=>({...W,[J]:{type:"number"}}),{});try{V9("Anlisis Taxonmico",e);const W=oa.currentUser;if(!W)throw new Error("Usuario no autenticado.");const J=await W.getIdToken(),le=await fetch("/api/analisisTaxonomico",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${J}`},body:JSON.stringify({prompt:D,fileData:x,fileUrl:C||void 0,documentName:u,nivelForm:j,asignaturaForm:T,userId:e.id})});if(!le.ok){const oe=await le.text();throw console.error("Error response from backend:",oe),new Error(`Error al analizar el documento con IA: ${le.statusText}`)}const ie=await le.json(),re={documentName:u,uploadDate:new Date().toISOString(),userId:e.id,analysisResults:ie.analysisResults,summary:ie.summary,nivel:j,asignatura:T},ce=await ppt(re);await q(),c(ce),d(""),g(null),v(null),_(""),I(""),k("")}catch(W){console.error(W);const J=W instanceof Error?W.message:"Hubo un error al analizar el documento.";o(J)}finally{A(!1)}},K=async D=>{if(window.confirm("Est seguro de eliminar este anlisis?"))try{await gpt(D),await q(),(l==null?void 0:l.id)===D&&c(null)}catch{o("No se pudo eliminar el anlisis.")}},Z=w.useMemo(()=>t.filter(D=>{const W=B?D.nivel===B:!0,J=P?D.asignatura===P:!0;return W&&J}),[t,B,P]),U=w.useMemo(()=>{const D={Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0};Z.forEach(J=>{Pm.forEach(le=>{var re;const ie=((re=J.summary)==null?void 0:re[le])||0;D[le]+=ie})});const W=Object.values(D).reduce((J,le)=>J+le,0);return{acc:D,total:W}},[Z]),Y=w.useMemo(()=>{const D=new Map;Z.forEach(J=>{const le=J.asignatura||"Sin asignatura";D.has(le)||D.set(le,{Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0});const ie=D.get(le);Pm.forEach(re=>{var ce;ie[re]+=((ce=J.summary)==null?void 0:ce[re])||0})});const W=Array.from(D.entries()).map(([J,le])=>({asignatura:J,counts:le,total:Object.values(le).reduce((ie,re)=>ie+re,0)}));return W.sort((J,le)=>le.total-J.total),W},[Z]),R=w.useMemo(()=>l?Object.values(l.summary).reduce((W,J)=>W+(J||0),0):0,[l]);return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Anlisis Taxonomico de Evaluaciones"}),s&&i.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),i.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:i.jsxs("div",{className:"space-y-1 text-center",children:[i.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:i.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),i.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[i.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:Q,accept:".pdf,.doc,.docx"}),i.jsx("span",{children:"Cargue un archivo"})]}),i.jsx("p",{className:"pl-1",children:"o arrstrelo aqu"})]}),i.jsx("p",{className:"text-xs text-slate-500",children:m?m.name:"PDF, DOCX hasta 10MB"})]})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"O seleccionar desde Multicopias"}),i.jsxs("div",{className:"relative",children:[i.jsxs("select",{value:C,onChange:D=>_(D.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 pl-10",children:[i.jsx("option",{value:"",children:" Seleccione un adjunto "}),y.map(D=>i.jsxs("option",{value:D.url,children:[D.titulo," ",D.nivel?` ${D.nivel}`:""," ",D.asignatura?` ${D.asignatura}`:""]},D.id))]}),i.jsx(Bb,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Se listan adjuntos que hayan sido subidos en Multicopias."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),i.jsxs("select",{value:j,onChange:D=>I(D.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione"}),Nee.map(D=>i.jsx("option",{value:D,children:D},D))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsxs("select",{value:T,onChange:D=>k(D.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione"}),ma.map(D=>i.jsx("option",{value:D,children:D},D))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),i.jsx("input",{type:"text",id:"documentName",value:u,onChange:D=>d(D.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsx("button",{onClick:z,disabled:f||!x&&!C,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:f?i.jsx(bpt,{}):"Analizar con IA"})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Anlisis"}),n?i.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):t.length===0?i.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay anlisis guardados."}):i.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:t.map(D=>i.jsxs("button",{onClick:()=>c(D),className:`w-full text-left p-3 rounded-md border ${(l==null?void 0:l.id)===D.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[i.jsx("p",{className:"font-semibold truncate",children:D.documentName}),i.jsx("p",{className:"text-xs text-slate-500",children:new Date(D.uploadDate).toLocaleString("es-CL")}),(D.nivel||D.asignatura)&&i.jsxs("p",{className:"text-xs text-slate-500",children:[D.nivel||"Nivel s/i","  ",D.asignatura||"Asignatura s/i"]})]},D.id))})]})]}),i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Nivel"}),i.jsxs("select",{value:B,onChange:D=>M(D.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todos"}),Nee.map(D=>i.jsx("option",{value:D,children:D},D))]})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Asignatura"}),i.jsxs("select",{value:P,onChange:D=>S(D.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todas"}),ma.map(D=>i.jsx("option",{value:D,children:D},D))]})]}),i.jsx("button",{type:"button",onClick:()=>{M(""),S("")},className:"px-4 py-2 rounded-md bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-200 font-semibold",children:"Limpiar filtros"})]})}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md",children:[i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 px-4",children:i.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>H("resumen"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${L==="resumen"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Resumen Global"}),i.jsx("button",{onClick:()=>H("comparacion"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${L==="comparacion"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Comparacin por Asignatura"})]})}),L==="resumen"?i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Resumen Global de Habilidades"}),i.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[Z.length," anlisis considerados"]})]}),i.jsx("div",{className:"space-y-3",children:Pm.map(D=>{const W=U.acc[D],J=U.total>0?W/U.total*100:0;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:D}),i.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[W," (",J.toFixed(0),"%)"]})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:i.jsx("div",{className:`${lb[D]} h-4 rounded-full`,style:{width:`${J}%`}})})]},D)})}),i.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 gap-3",children:Pm.map(D=>i.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg border dark:border-slate-700",children:[i.jsx("span",{className:"text-sm",children:D}),i.jsx("span",{className:`text-xs font-bold text-white px-2 py-1 rounded ${lb[D]}`,children:U.acc[D]})]},D))})]}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Comparacin por Asignatura"}),i.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[Y.length," asignaturas comparadas"]})]}),Y.length===0?i.jsx("div",{className:"text-sm text-slate-500",children:"No hay datos con los filtros actuales."}):i.jsx("div",{className:"space-y-5",children:Y.map(D=>{const W=D.total||1;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:D.asignatura}),i.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:[D.total," tems"]})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-5 overflow-hidden flex",children:Pm.map(J=>{const le=D.counts[J]||0,ie=le/W*100;return i.jsx("div",{className:`${lb[J]} h-5`,style:{width:`${ie}%`},title:`${J}: ${le} (${ie.toFixed(0)}%)`},J)})}),i.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:Pm.map(J=>i.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-300",children:[i.jsx("span",{className:`inline-block w-3 h-3 rounded ${lb[J]}`}),i.jsx("span",{children:J})]},J))})]},D.asignatura)})})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:l?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l.documentName}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(l.uploadDate).toLocaleString("es-CL"),(l.nivel||l.asignatura)&&i.jsxs(i.Fragment,{children:[" "," ",l.nivel||"Nivel s/i","  ",l.asignatura||"Asignatura s/i"]})]})]}),i.jsx("button",{onClick:()=>K(l.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado del Documento (",R," preguntas)"]}),i.jsx("div",{className:"space-y-3",children:Pm.map(D=>{const W=l.summary[D]||0,J=R>0?W/R*100:0;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:D}),i.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[W," (",J.toFixed(0),"%)"]})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:i.jsx("div",{className:`${lb[D]} h-4 rounded-full`,style:{width:`${J}%`}})})]},D)})})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Anlisis"}),i.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / tem"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:l.analysisResults.map((D,W)=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:D.question}),i.jsx("td",{className:"px-4 py-3 text-sm",children:i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${lb[D.habilidadBloom]}`,children:D.habilidadBloom})})]},W))})]})})]})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Anlisis"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo anlisis o seleccione uno del historial para ver los resultados aqu."})]})})]})]})]})},CH="notas_practica",ypt=e=>({id:e.id,...e.data()}),wpt=(e,t)=>{const r=Bt(ht(ut,CH),sr("estudianteId","==",e),Xt("createdAt","desc"));return lr(r,n=>{t(n.docs.map(a=>ypt(a)))})},Npt=async e=>{const t={...e};Object.keys(t).forEach(r=>{t[r]===void 0&&delete t[r]}),await ln(ht(ut,CH),{...t,createdAt:zn()})},Cpt=async e=>{await ca(Wt(ut,CH,e))};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vx=function(){return vx=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},vx.apply(this,arguments)};function Ept(e,t,r,n){return new(r||(r=Promise))(function(a,s){function o(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){var d;u.done?a(u.value):(d=u.value,d instanceof r?d:new r(function(f){f(d)})).then(o,l)}c((n=n.apply(e,[])).next())})}function jpt(e,t){var r,n,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(c){return function(u){return function(d){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&d[0]?n.return:d[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,d[1])).done)return a;switch(n=0,a&&(d=[2&d[0],a.value]),d[0]){case 0:case 1:a=d;break;case 4:return o.label++,{value:d[1],done:!1};case 5:o.label++,n=d[1],d=[0];continue;case 7:d=o.ops.pop(),o.trys.pop();continue;default:if(a=o.trys,!((a=a.length>0&&a[a.length-1])||d[0]!==6&&d[0]!==2)){o=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){o.label=d[1];break}if(d[0]===6&&o.label<a[1]){o.label=a[1],a=d;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(d);break}a[2]&&o.ops.pop(),o.trys.pop();continue}d=t.call(e,o)}catch(f){d=[6,f],n=0}finally{r=a=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([c,u])}}}function Hr(){return Hr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hr.apply(this,arguments)}function bx(e){return bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bx(e)}function Ype(e){var t=function(r,n){if(bx(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n);if(bx(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return bx(t)==="symbol"?t:String(t)}function Ub(e,t,r){return(t=Ype(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Eee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Sr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Eee(Object(r),!0).forEach(function(n){Ub(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Eee(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ype(n.key),n)}}function wL(e,t){return wL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},wL(e,t)}function i4(e){return i4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},i4(e)}function kpt(e,t){if(t&&(bx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(e)}function Spt(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=i4(e);if(t){var a=i4(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return kpt(this,r)}}function NL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Jpe(e,t){if(e){if(typeof e=="string")return NL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?NL(e,t):void 0}}function EH(e){return function(t){if(Array.isArray(t))return NL(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||Jpe(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var _pt=function(){function e(r){var n=this;this._insertTag=function(a){var s;s=n.tags.length===0?n.insertionPoint?n.insertionPoint.nextSibling:n.prepend?n.container.firstChild:n.before:n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(a,s),n.tags.push(a)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(s){var o=document.createElement("style");return o.setAttribute("data-emotion",s.key),s.nonce!==void 0&&o.setAttribute("nonce",s.nonce),o.appendChild(document.createTextNode("")),o.setAttribute("data-s",""),o}(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var a=function(s){if(s.sheet)return s.sheet;for(var o=0;o<document.styleSheets.length;o++)if(document.styleSheets[o].ownerNode===s)return document.styleSheets[o]}(n);try{a.insertRule(r,a.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),ud="-ms-",kee="-moz-",ia="-webkit-",jH="decl",Zpe="@keyframes",Tpt=Math.abs,KT=String.fromCharCode,Bpt=Object.assign;function ege(e){return e.trim()}function Aa(e,t,r){return e.replace(t,r)}function CL(e,t){return e.indexOf(t)}function Fo(e,t){return 0|e.charCodeAt(t)}function yC(e,t,r){return e.slice(t,r)}function Sh(e){return e.length}function kH(e){return e.length}function Rk(e,t){return t.push(e),e}var WT=1,ny=1,tge=0,zc=0,Ii=0,$y="";function XT(e,t,r,n,a,s,o){return{value:e,root:t,parent:r,type:n,props:a,children:s,line:WT,column:ny,length:o,return:""}}function t2(e,t){return Bpt(XT("",null,null,"",null,null,0),e,{length:-e.length},t)}function Tu(){return Ii=zc<tge?Fo($y,zc++):0,ny++,Ii===10&&(ny=1,WT++),Ii}function Yh(){return Fo($y,zc)}function $S(){return zc}function kE(e,t){return yC($y,e,t)}function wC(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function rge(e){return WT=ny=1,tge=Sh($y=e),zc=0,[]}function nge(e){return $y="",e}function zS(e){return ege(kE(zc-1,EL(e===91?e+2:e===40?e+1:e)))}function Ipt(e){for(;(Ii=Yh())&&Ii<33;)Tu();return wC(e)>2||wC(Ii)>3?"":" "}function Dpt(e,t){for(;--t&&Tu()&&!(Ii<48||Ii>102||Ii>57&&Ii<65||Ii>70&&Ii<97););return kE(e,$S()+(t<6&&Yh()==32&&Tu()==32))}function EL(e){for(;Tu();)switch(Ii){case e:return zc;case 34:case 39:e!==34&&e!==39&&EL(Ii);break;case 40:e===41&&EL(e);break;case 92:Tu()}return zc}function Opt(e,t){for(;Tu()&&e+Ii!==57&&(e+Ii!==84||Yh()!==47););return"/*"+kE(t,zc-1)+"*"+KT(e===47?e:Tu())}function Ppt(e){for(;!wC(Yh());)Tu();return kE(e,zc)}function See(e){return nge(GS("",null,null,null,[""],e=rge(e),0,[0],e))}function GS(e,t,r,n,a,s,o,l,c){for(var u=0,d=0,f=o,A=0,m=0,g=0,x=1,v=1,y=1,N=0,C="",_=a,j=s,I=n,T=C;v;)switch(g=N,N=Tu()){case 40:if(g!=108&&Fo(T,f-1)==58){CL(T+=Aa(zS(N),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:T+=zS(N);break;case 9:case 10:case 13:case 32:T+=Ipt(g);break;case 92:T+=Dpt($S()-1,7);continue;case 47:switch(Yh()){case 42:case 47:Rk(Fpt(Opt(Tu(),$S()),t,r),c);break;default:T+="/"}break;case 123*x:l[u++]=Sh(T)*y;case 125*x:case 59:case 0:switch(N){case 0:case 125:v=0;case 59+d:m>0&&Sh(T)-f&&Rk(m>32?Tee(T+";",n,r,f-1):Tee(Aa(T," ","")+";",n,r,f-2),c);break;case 59:T+=";";default:if(Rk(I=_ee(T,t,r,u,d,a,l,C,_=[],j=[],f),s),N===123)if(d===0)GS(T,t,I,I,_,s,f,l,j);else switch(A===99&&Fo(T,3)===110?100:A){case 100:case 109:case 115:GS(e,I,I,n&&Rk(_ee(e,I,I,0,0,a,l,C,a,_=[],f),j),a,j,f,l,n?_:j);break;default:GS(T,I,I,I,[""],j,0,l,j)}}u=d=m=0,x=y=1,C=T="",f=o;break;case 58:f=1+Sh(T),m=g;default:if(x<1){if(N==123)--x;else if(N==125&&x++==0&&(Ii=zc>0?Fo($y,--zc):0,ny--,Ii===10&&(ny=1,WT--),Ii==125))continue}switch(T+=KT(N),N*x){case 38:y=d>0?1:(T+="\f",-1);break;case 44:l[u++]=(Sh(T)-1)*y,y=1;break;case 64:Yh()===45&&(T+=zS(Tu())),A=Yh(),d=f=Sh(C=T+=Ppt($S())),N++;break;case 45:g===45&&Sh(T)==2&&(x=0)}}return s}function _ee(e,t,r,n,a,s,o,l,c,u,d){for(var f=a-1,A=a===0?s:[""],m=kH(A),g=0,x=0,v=0;g<n;++g)for(var y=0,N=yC(e,f+1,f=Tpt(x=o[g])),C=e;y<m;++y)(C=ege(x>0?A[y]+" "+N:Aa(N,/&\f/g,A[y])))&&(c[v++]=C);return XT(e,t,r,a===0?"rule":l,c,u,d)}function Fpt(e,t,r){return XT(e,t,r,"comm",KT(Ii),yC(e,2,-2),0)}function Tee(e,t,r,n){return XT(e,t,r,jH,yC(e,0,n),yC(e,n+1,-1),n)}function yx(e,t){for(var r="",n=kH(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function Bee(e,t,r,n){switch(e.type){case"@import":case jH:return e.return=e.return||e.value;case"comm":return"";case Zpe:return e.return=e.value+"{"+yx(e.children,n)+"}";case"rule":e.value=e.props.join(",")}return Sh(r=yx(e.children,n))?e.return=e.value+"{"+r+"}":""}function Iee(e){var t=kH(e);return function(r,n,a,s){for(var o="",l=0;l<t;l++)o+=e[l](r,n,a,s)||"";return o}}function Rpt(e){return function(t){t.root||(t=t.return)&&e(t)}}function age(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var Lpt=function(e,t,r){for(var n=0,a=0;n=a,a=Yh(),n===38&&a===12&&(t[r]=1),!wC(a);)Tu();return kE(e,zc)},Mpt=function(e,t){return nge(function(r,n){var a=-1,s=44;do switch(wC(s)){case 0:s===38&&Yh()===12&&(n[a]=1),r[a]+=Lpt(zc-1,n,a);break;case 2:r[a]+=zS(s);break;case 4:if(s===44){r[++a]=Yh()===58?"&\f":"",n[a]=r[a].length;break}default:r[a]+=KT(s)}while(s=Tu());return r}(rge(e),t))},Dee=new WeakMap,Upt=function(e){if(e.type==="rule"&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(!(r=r.parent))return;if((e.props.length!==1||t.charCodeAt(0)===58||Dee.get(r))&&!n){Dee.set(e,!0);for(var a=[],s=Mpt(t,a),o=r.props,l=0,c=0;l<s.length;l++)for(var u=0;u<o.length;u++,c++)e.props[c]=a[l]?s[l].replace(/&\f/g,o[u]):o[u]+" "+s[l]}}},Hpt=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function sge(e,t){switch(function(r,n){return 45^Fo(r,0)?(((n<<2^Fo(r,0))<<2^Fo(r,1))<<2^Fo(r,2))<<2^Fo(r,3):0}(e,t)){case 5103:return ia+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ia+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ia+e+kee+e+ud+e+e;case 6828:case 4268:return ia+e+ud+e+e;case 6165:return ia+e+ud+"flex-"+e+e;case 5187:return ia+e+Aa(e,/(\w+).+(:[^]+)/,ia+"box-$1$2-ms-flex-$1$2")+e;case 5443:return ia+e+ud+"flex-item-"+Aa(e,/flex-|-self/,"")+e;case 4675:return ia+e+ud+"flex-line-pack"+Aa(e,/align-content|flex-|-self/,"")+e;case 5548:return ia+e+ud+Aa(e,"shrink","negative")+e;case 5292:return ia+e+ud+Aa(e,"basis","preferred-size")+e;case 6060:return ia+"box-"+Aa(e,"-grow","")+ia+e+ud+Aa(e,"grow","positive")+e;case 4554:return ia+Aa(e,/([^-])(transform)/g,"$1"+ia+"$2")+e;case 6187:return Aa(Aa(Aa(e,/(zoom-|grab)/,ia+"$1"),/(image-set)/,ia+"$1"),e,"")+e;case 5495:case 3959:return Aa(e,/(image-set\([^]*)/,ia+"$1$`$1");case 4968:return Aa(Aa(e,/(.+:)(flex-)?(.*)/,ia+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+ia+e+e;case 4095:case 3583:case 4068:case 2532:return Aa(e,/(.+)-inline(.+)/,ia+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Sh(e)-1-t>6)switch(Fo(e,t+1)){case 109:if(Fo(e,t+4)!==45)break;case 102:return Aa(e,/(.+:)(.+)-([^]+)/,"$1"+ia+"$2-$3$1"+kee+(Fo(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~CL(e,"stretch")?sge(Aa(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Fo(e,t+1)!==115)break;case 6444:switch(Fo(e,Sh(e)-3-(~CL(e,"!important")&&10))){case 107:return Aa(e,":",":"+ia)+e;case 101:return Aa(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ia+(Fo(e,14)===45?"inline-":"")+"box$3$1"+ia+"$2$3$1-ms-$2box$3")+e}break;case 5936:switch(Fo(e,t+11)){case 114:return ia+e+ud+Aa(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ia+e+ud+Aa(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ia+e+ud+Aa(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ia+e+ud+e+e}return e}var Oee,Lk,qS=typeof document<"u",Qpt=qS?void 0:(Oee=function(){return age(function(){var e={};return function(t){return e[t]}})},Lk=new WeakMap,function(e){if(Lk.has(e))return Lk.get(e);var t=Oee(e);return Lk.set(e,t),t}),Vpt=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case jH:e.return=sge(e.value,e.length);break;case Zpe:return yx([t2(e,{value:Aa(e.value,"@","@"+ia)})],n);case"rule":if(e.length)return function(a,s){return a.map(s).join("")}(e.props,function(a){switch(function(s,o){return(s=o.exec(s))?s[0]:s}(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return yx([t2(e,{props:[Aa(a,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return yx([t2(e,{props:[Aa(a,/:(plac\w+)/,":"+ia+"input-$1")]}),t2(e,{props:[Aa(a,/:(plac\w+)/,":-moz-$1")]}),t2(e,{props:[Aa(a,/:(plac\w+)/,"-ms-input-$1")]})],n)}return""})}}],ige=function(e){var t=e.key;if(qS&&t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){y.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var n=e.stylisPlugins||Vpt,a,s,o={},l=[];qS&&(a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(y){for(var N=y.getAttribute("data-emotion").split(" "),C=1;C<N.length;C++)o[N[C]]=!0;l.push(y)}));var c=[Upt,Hpt];if(qS){var u,d=[Bee,Rpt(function(y){u.insert(y)})],f=Iee(c.concat(n,d));s=function(y,N,C,_){u=C,yx(See(y?y+"{"+N.styles+"}":N.styles),f),_&&(v.inserted[N.name]=!0)}}else{var A=[Bee],m=Iee(c.concat(n,A)),g=Qpt(n)(t),x=function(y,N){var C=N.name;return g[C]===void 0&&(g[C]=yx(See(y?y+"{"+N.styles+"}":N.styles),m)),g[C]};s=function(y,N,C,_){var j=N.name,I=x(y,N);return v.compat===void 0?(_&&(v.inserted[j]=!0),I):_?void(v.inserted[j]=I):I}}var v={key:t,sheet:new _pt({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:s};return v.sheet.hydrate(l),v};function xa(e,t,r){return e(r={path:t,exports:{},require:function(n,a){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(a==null&&r.path)}},r.exports),r.exports}var No=typeof Symbol=="function"&&Symbol.for,jL=No?Symbol.for("react.element"):60103,kL=No?Symbol.for("react.portal"):60106,KS=No?Symbol.for("react.fragment"):60107,WS=No?Symbol.for("react.strict_mode"):60108,XS=No?Symbol.for("react.profiler"):60114,YS=No?Symbol.for("react.provider"):60109,JS=No?Symbol.for("react.context"):60110,SL=No?Symbol.for("react.async_mode"):60111,o4=No?Symbol.for("react.concurrent_mode"):60111,ZS=No?Symbol.for("react.forward_ref"):60112,e5=No?Symbol.for("react.suspense"):60113,$pt=No?Symbol.for("react.suspense_list"):60120,t5=No?Symbol.for("react.memo"):60115,r5=No?Symbol.for("react.lazy"):60116,zpt=No?Symbol.for("react.block"):60121,Gpt=No?Symbol.for("react.fundamental"):60117,qpt=No?Symbol.for("react.responder"):60118,Kpt=No?Symbol.for("react.scope"):60119;function fu(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case jL:switch(e=e.type){case SL:case o4:case KS:case XS:case WS:case e5:return e;default:switch(e=e&&e.$$typeof){case JS:case ZS:case r5:case t5:case YS:return e;default:return t}}case kL:return t}}}function Pee(e){return fu(e)===o4}var Wpt={AsyncMode:SL,ConcurrentMode:o4,ContextConsumer:JS,ContextProvider:YS,Element:jL,ForwardRef:ZS,Fragment:KS,Lazy:r5,Memo:t5,Portal:kL,Profiler:XS,StrictMode:WS,Suspense:e5,isAsyncMode:function(e){return Pee(e)||fu(e)===SL},isConcurrentMode:Pee,isContextConsumer:function(e){return fu(e)===JS},isContextProvider:function(e){return fu(e)===YS},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===jL},isForwardRef:function(e){return fu(e)===ZS},isFragment:function(e){return fu(e)===KS},isLazy:function(e){return fu(e)===r5},isMemo:function(e){return fu(e)===t5},isPortal:function(e){return fu(e)===kL},isProfiler:function(e){return fu(e)===XS},isStrictMode:function(e){return fu(e)===WS},isSuspense:function(e){return fu(e)===e5},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===KS||e===o4||e===XS||e===WS||e===e5||e===$pt||typeof e=="object"&&e!==null&&(e.$$typeof===r5||e.$$typeof===t5||e.$$typeof===YS||e.$$typeof===JS||e.$$typeof===ZS||e.$$typeof===Gpt||e.$$typeof===qpt||e.$$typeof===Kpt||e.$$typeof===zpt)},typeOf:fu};xa(function(e,t){});var Fee=xa(function(e){e.exports=Wpt}),Ree={};Ree[Fee.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Ree[Fee.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var _L=typeof document<"u";function oge(e,t,r){var n="";return r.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):n+=a+" "}),n}var SH=function(e,t,r){var n=e.key+"-"+t.name;(r===!1||_L===!1&&e.compat!==void 0)&&e.registered[n]===void 0&&(e.registered[n]=t.styles)},_H=function(e,t,r){SH(e,t,r);var n=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a="",s=t;do{var o=e.insert(t===s?"."+n:"",s,e.sheet,!0);_L||o===void 0||(a+=o),s=s.next}while(s!==void 0);if(!_L&&a.length!==0)return a}},Xpt={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ypt=/[A-Z]|^ms/g,Jpt=/_EMO_([^_]+?)_([^]*?)_EMO_/g,lge=function(e){return e.charCodeAt(1)===45},Lee=function(e){return e!=null&&typeof e!="boolean"},HO=age(function(e){return lge(e)?e:e.replace(Ypt,"-$&").toLowerCase()}),Mee=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(Jpt,function(r,n,a){return _h={name:n,styles:a,next:_h},n})}return Xpt[e]===1||lge(e)||typeof t!="number"||t===0?t:t+"px"};function hN(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":if(r.anim===1)return _h={name:r.name,styles:r.styles,next:_h},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)_h={name:n.name,styles:n.styles,next:_h},n=n.next;var a=r.styles+";";return a}return function(c,u,d){var f="";if(Array.isArray(d))for(var A=0;A<d.length;A++)f+=hN(c,u,d[A])+";";else for(var m in d){var g=d[m];if(typeof g!="object")u!=null&&u[g]!==void 0?f+=m+"{"+u[g]+"}":Lee(g)&&(f+=HO(m)+":"+Mee(m,g)+";");else if(!Array.isArray(g)||typeof g[0]!="string"||u!=null&&u[g[0]]!==void 0){var x=hN(c,u,g);switch(m){case"animation":case"animationName":f+=HO(m)+":"+x+";";break;default:f+=m+"{"+x+"}"}}else for(var v=0;v<g.length;v++)Lee(g[v])&&(f+=HO(m)+":"+Mee(m,g[v])+";")}return f}(e,t,r);case"function":if(e!==void 0){var s=_h,o=r(e);return _h=s,hN(e,t,o)}break}if(t==null)return r;var l=t[r];return l!==void 0?l:r}var _h,Uee=/label:\s*([^\s;\n{]+)\s*(;|$)/g,YT=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,a="";_h=void 0;var s=e[0];s==null||s.raw===void 0?(n=!1,a+=hN(r,t,s)):a+=s[0];for(var o=1;o<e.length;o++)a+=hN(r,t,e[o]),n&&(a+=s[o]);Uee.lastIndex=0;for(var l,c="";(l=Uee.exec(a))!==null;)c+="-"+l[1];var u=function(d){for(var f,A=0,m=0,g=d.length;g>=4;++m,g-=4)f=1540483477*(65535&(f=255&d.charCodeAt(m)|(255&d.charCodeAt(++m))<<8|(255&d.charCodeAt(++m))<<16|(255&d.charCodeAt(++m))<<24))+(59797*(f>>>16)<<16),A=1540483477*(65535&(f^=f>>>24))+(59797*(f>>>16)<<16)^1540483477*(65535&A)+(59797*(A>>>16)<<16);switch(g){case 3:A^=(255&d.charCodeAt(m+2))<<16;case 2:A^=(255&d.charCodeAt(m+1))<<8;case 1:A=1540483477*(65535&(A^=255&d.charCodeAt(m)))+(59797*(A>>>16)<<16)}return(((A=1540483477*(65535&(A^=A>>>13))+(59797*(A>>>16)<<16))^A>>>15)>>>0).toString(36)}(a)+c;return{name:u,styles:a,next:_h}},Zpt=typeof document<"u",egt=function(e){return e()},cge=!!w.useInsertionEffect&&w.useInsertionEffect,uge=Zpt&&cge||egt,Hee=cge||w.useLayoutEffect,v1=typeof document<"u",TH={}.hasOwnProperty,l4=w.createContext(typeof HTMLElement<"u"?ige({key:"css"}):null);l4.Provider;var JT=function(e){return w.forwardRef(function(t,r){var n=w.useContext(l4);return e(t,n,r)})};v1||(JT=function(e){return function(t){var r=w.useContext(l4);return r===null?(r=ige({key:"css"}),w.createElement(l4.Provider,{value:r},e(t,r))):e(t,r)}});var BH=w.createContext({}),TL="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",tgt=function(e,t){var r={};for(var n in t)TH.call(t,n)&&(r[n]=t[n]);return r[TL]=e,r},rgt=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;SH(t,r,n);var a=uge(function(){return _H(t,r,n)});if(!v1&&a!==void 0){for(var s,o=r.name,l=r.next;l!==void 0;)o+=" "+l.name,l=l.next;return w.createElement("style",((s={})["data-emotion"]=t.key+" "+o,s.dangerouslySetInnerHTML={__html:a},s.nonce=t.sheet.nonce,s))}return null},ngt=JT(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var a=e[TL],s=[n],o="";typeof e.className=="string"?o=oge(t.registered,s,e.className):e.className!=null&&(o=e.className+" ");var l=YT(s,void 0,w.useContext(BH));o+=t.key+"-"+l.name;var c={};for(var u in e)!TH.call(e,u)||u==="css"||u===TL||(c[u]=e[u]);return c.ref=r,c.className=o,w.createElement(w.Fragment,null,w.createElement(rgt,{cache:t,serialized:l,isStringTag:typeof a=="string"}),w.createElement(a,c))});xa(function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});var Pr=function(e,t){var r=arguments;if(t==null||!TH.call(t,"css"))return w.createElement.apply(void 0,r);var n=r.length,a=new Array(n);a[0]=ngt,a[1]=tgt(e,t);for(var s=2;s<n;s++)a[s]=r[s];return w.createElement.apply(null,a)};JT(function(e,t){var r=e.styles,n=YT([r],void 0,w.useContext(BH));if(!v1){for(var a,s=n.name,o=n.styles,l=n.next;l!==void 0;)s+=" "+l.name,o+=l.styles,l=l.next;var c=t.compat===!0,u=t.insert("",{name:s,styles:o},t.sheet,c);return c?null:w.createElement("style",((a={})["data-emotion"]=t.key+"-global "+s,a.dangerouslySetInnerHTML={__html:u},a.nonce=t.sheet.nonce,a))}var d=w.useRef();return Hee(function(){var f=t.key+"-global",A=new t.sheet.constructor({key:f,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),m=!1,g=document.querySelector('style[data-emotion="'+f+" "+n.name+'"]');return t.sheet.tags.length&&(A.before=t.sheet.tags[0]),g!==null&&(m=!0,g.setAttribute("data-emotion",f),A.hydrate([g])),d.current=[A,m],function(){A.flush()}},[t]),Hee(function(){var f=d.current,A=f[0];if(f[1])f[1]=!1;else{if(n.next!==void 0&&_H(t,n.next,!0),A.tags.length){var m=A.tags[A.tags.length-1].nextElementSibling;A.before=m,A.flush()}t.insert("",n,A,!1)}},[t,n.name]),null});function IH(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return YT(t)}var agt=function e(t){for(var r=t.length,n=0,a="";n<r;n++){var s=t[n];if(s!=null){var o=void 0;switch(typeof s){case"boolean":break;case"object":if(Array.isArray(s))o=e(s);else for(var l in o="",s)s[l]&&l&&(o&&(o+=" "),o+=l);break;default:o=s}o&&(a&&(a+=" "),a+=o)}}return a};function sgt(e,t,r){var n=[],a=oge(e,n,r);return n.length<2?r:a+t(n)}var igt=function(e){var t,r=e.cache,n=e.serializedArr,a=uge(function(){for(var s="",o=0;o<n.length;o++){var l=_H(r,n[o],!1);v1||l===void 0||(s+=l)}if(!v1)return s});return v1||a.length===0?null:w.createElement("style",((t={})["data-emotion"]=r.key+" "+n.map(function(s){return s.name}).join(" "),t.dangerouslySetInnerHTML={__html:a},t.nonce=r.sheet.nonce,t))};JT(function(e,t){var r=[],n=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=YT(l,t.registered);return r.push(u),SH(t,u,!1),t.key+"-"+u.name},a={css:n,cx:function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return sgt(t.registered,n,agt(l))},theme:w.useContext(BH)},s=e.children(a);return w.createElement(w.Fragment,null,w.createElement(igt,{cache:t,serializedArr:r}),s)});function lo(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var a=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(a!=null){var s,o,l,c,u=[],d=!0,f=!1;try{if(l=(a=a.call(r)).next,n===0){if(Object(a)!==a)return;d=!1}else for(;!(d=(s=l.call(a)).done)&&(u.push(s.value),u.length!==n);d=!0);}catch(A){f=!0,o=A}finally{try{if(!d&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(f)throw o}}return u}}(e,t)||Jpe(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Oh(e,t){if(e==null)return{};var r,n,a=function(o,l){if(o==null)return{};var c,u,d={},f=Object.keys(o);for(u=0;u<f.length;u++)c=f[u],l.indexOf(c)>=0||(d[c]=o[c]);return d}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function fA(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function dge(e){return fA(e).getComputedStyle(e)}const Mk=Math.round;function fge(e){return Age(e)?(e.nodeName||"").toLowerCase():""}let Uk;function hge(e){return e instanceof fA(e).HTMLElement}function n5(e){return e instanceof fA(e).Element}function Age(e){return e instanceof fA(e).Node}function Qee(e){return typeof ShadowRoot>"u"?!1:e instanceof fA(e).ShadowRoot||e instanceof ShadowRoot}function mge(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=dge(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function ogt(){return/^((?!chrome|android).)*safari/i.test(function(){if(Uk)return Uk;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(Uk=e.brands.map(t=>t.brand+"/"+t.version).join(" "),Uk):navigator.userAgent}())}function pge(e){return n5(e)?e:e.contextElement}const gge={x:1,y:1};function Vee(e){const t=pge(e);if(!hge(t))return gge;const r=t.getBoundingClientRect(),{width:n,height:a,fallback:s}=function(c){const u=dge(c);let d=parseFloat(u.width),f=parseFloat(u.height);const A=c.offsetWidth,m=c.offsetHeight,g=Mk(d)!==A||Mk(f)!==m;return g&&(d=A,f=m),{width:d,height:f,fallback:g}}(t);let o=(s?Mk(r.width):r.width)/n,l=(s?Mk(r.height):r.height)/a;return o&&Number.isFinite(o)||(o=1),l&&Number.isFinite(l)||(l=1),{x:o,y:l}}function $ee(e,t,r,n){var a,s;t===void 0&&(t=!1),r===void 0&&(r=!1);const o=e.getBoundingClientRect(),l=pge(e);let c=gge;t&&(c=Vee(e));const u=l?fA(l):window,d=ogt()&&r;let f=(o.left+(d&&((a=u.visualViewport)==null?void 0:a.offsetLeft)||0))/c.x,A=(o.top+(d&&((s=u.visualViewport)==null?void 0:s.offsetTop)||0))/c.y,m=o.width/c.x,g=o.height/c.y;if(l){const x=fA(l),v=n;let y=x.frameElement;for(;y&&n&&v!==x;){const N=Vee(y),C=y.getBoundingClientRect(),_=getComputedStyle(y);C.x+=(y.clientLeft+parseFloat(_.paddingLeft))*N.x,C.y+=(y.clientTop+parseFloat(_.paddingTop))*N.y,f*=N.x,A*=N.y,m*=N.x,g*=N.y,f+=C.x,A+=C.y,y=fA(y).frameElement}}return{width:m,height:g,top:A,right:f+m,bottom:A+g,left:f,x:f,y:A}}function lgt(e){if(fge(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Qee(e)&&e.host||function(r){return((Age(r)?r.ownerDocument:r.document)||window.document).documentElement}(e);return Qee(t)?t.host:t}function xge(e){const t=lgt(e);return function(r){return["html","body","#document"].includes(fge(r))}(t)?t.ownerDocument.body:hge(t)&&mge(t)?t:xge(t)}function a5(e,t){var r;t===void 0&&(t=[]);const n=xge(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),s=fA(n);return a?t.concat(s,s.visualViewport||[],mge(n)?n:[]):t.concat(n,a5(n))}var BL=typeof document<"u"?w.useLayoutEffect:w.useEffect,cgt=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],c4=function(){};function ugt(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function dgt(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var s=[].concat(n);if(t&&e)for(var o in t)t.hasOwnProperty(o)&&t[o]&&s.push("".concat(ugt(e,o)));return s.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var zee=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):bx(e)==="object"&&e!==null?[e]:[];var t},Gee=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,Sr({},Oh(e,cgt))},Ls=function(e,t,r){var n=e.cx,a=e.getStyles,s=e.getClassNames,o=e.className;return{css:a(t,e),className:n(r??{},s(t,e),o)}};function ZT(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function vge(e){return ZT(e)?window.pageYOffset:e.scrollTop}function u4(e,t){ZT(e)?window.scrollTo(0,t):e.scrollTop=t}function fgt(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function Hk(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:c4,a=vge(e),s=t-a,o=10,l=0;function c(){var u=fgt(l+=o,a,s,r);u4(e,u),l<r?window.requestAnimationFrame(c):n(e)}c()}function qee(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=t.offsetHeight/3;n.bottom+a>r.bottom?u4(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):n.top-a<r.top&&u4(e,Math.max(t.offsetTop-a,0))}function Kee(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var bge=!1,hgt={get passive(){return bge=!0}},Qk=typeof window<"u"?window:{};Qk.addEventListener&&Qk.removeEventListener&&(Qk.addEventListener("p",c4,hgt),Qk.removeEventListener("p",c4,!1));var Agt=bge;function mgt(e){return e!=null}function Vk(e,t,r){return e?t:r}var pgt=["children","innerProps"],ggt=["children","innerProps"];function xgt(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,a=e.placement,s=e.shouldScroll,o=e.isFixedPosition,l=e.controlHeight,c=function(q){var Q=getComputedStyle(q),z=Q.position==="absolute",K=/(auto|scroll)/;if(Q.position==="fixed")return document.documentElement;for(var Z=q;Z=Z.parentElement;)if(Q=getComputedStyle(Z),(!z||Q.position!=="static")&&K.test(Q.overflow+Q.overflowY+Q.overflowX))return Z;return document.documentElement}(r),u={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return u;var d,f=c.getBoundingClientRect().height,A=r.getBoundingClientRect(),m=A.bottom,g=A.height,x=A.top,v=r.offsetParent.getBoundingClientRect().top,y=o||ZT(d=c)?window.innerHeight:d.clientHeight,N=vge(c),C=parseInt(getComputedStyle(r).marginBottom,10),_=parseInt(getComputedStyle(r).marginTop,10),j=v-_,I=y-x,T=j+N,k=f-N-x,B=m-y+N+C,M=N+x-_,P=160;switch(a){case"auto":case"bottom":if(I>=g)return{placement:"bottom",maxHeight:t};if(k>=g&&!o)return s&&Hk(c,B,P),{placement:"bottom",maxHeight:t};if(!o&&k>=n||o&&I>=n)return s&&Hk(c,B,P),{placement:"bottom",maxHeight:o?I-C:k-C};if(a==="auto"||o){var S=t,L=o?j:T;return L>=n&&(S=Math.min(L-C-l,t)),{placement:"top",maxHeight:S}}if(a==="bottom")return s&&u4(c,B),{placement:"bottom",maxHeight:t};break;case"top":if(j>=g)return{placement:"top",maxHeight:t};if(T>=g&&!o)return s&&Hk(c,M,P),{placement:"top",maxHeight:t};if(!o&&T>=n||o&&j>=n){var H=t;return(!o&&T>=n||o&&j>=n)&&(H=o?j-_:T-_),s&&Hk(c,M,P),{placement:"top",maxHeight:H}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return u}var Wee,yge=function(e){return e==="auto"?"bottom":e},wge=w.createContext(null),vgt=function(e){var t=e.children,r=e.minMenuHeight,n=e.maxMenuHeight,a=e.menuPlacement,s=e.menuPosition,o=e.menuShouldScrollIntoView,l=e.theme,c=(w.useContext(wge)||{}).setPortalPlacement,u=w.useRef(null),d=lo(w.useState(n),2),f=d[0],A=d[1],m=lo(w.useState(null),2),g=m[0],x=m[1],v=l.spacing.controlHeight;return BL(function(){var y=u.current;if(y){var N=s==="fixed",C=xgt({maxHeight:n,menuEl:y,minHeight:r,placement:a,shouldScroll:o&&!N,isFixedPosition:N,controlHeight:v});A(C.maxHeight),x(C.placement),c==null||c(C.placement)}},[n,a,s,o,r,c,v]),t({ref:u,placerProps:Sr(Sr({},e),{},{placement:g||yge(a),maxHeight:f})})},bgt=function(e){var t=e.children,r=e.innerRef,n=e.innerProps;return Pr("div",Hr({},Ls(e,"menu",{menu:!0}),{ref:r},n),t)},Nge=function(e,t){var r=e.theme,n=r.spacing.baseUnit,a=r.colors;return Sr({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px")})},ygt=Nge,wgt=Nge,Ngt=["size"],Cgt=["innerProps","isRtl","size"],QO,VO,Egt={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Cge=function(e){var t=e.size,r=Oh(e,Ngt);return Pr("svg",Hr({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Egt},r))},$O=function(e){return Pr(Cge,Hr({size:20},e),Pr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},Xee=function(e){return Pr(Cge,Hr({size:20},e),Pr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Ege=function(e,t){var r=e.isFocused,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return Sr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*a,":hover":{color:r?s.neutral80:s.neutral40}})},jgt=Ege,kgt=Ege,Sgt=function(){var e=IH.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(Wee||(QO=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],VO||(VO=QO.slice(0)),Wee=Object.freeze(Object.defineProperties(QO,{raw:{value:Object.freeze(VO)}})))),zO=function(e){var t=e.delay,r=e.offset;return Pr("span",{css:IH({animation:"".concat(Sgt," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},_gt=function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.innerRef,s=e.innerProps,o=e.menuIsOpen;return Pr("div",Hr({ref:a},Ls(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":n,"control--menu-is-open":o}),s,{"aria-disabled":r||void 0}),t)},Tgt=["data"],Bgt=function(e){var t=e.children,r=e.cx,n=e.getStyles,a=e.getClassNames,s=e.Heading,o=e.headingProps,l=e.innerProps,c=e.label,u=e.theme,d=e.selectProps;return Pr("div",Hr({},Ls(e,"group",{group:!0}),l),Pr(s,Hr({},o,{selectProps:d,theme:u,getStyles:n,getClassNames:a,cx:r}),c),Pr("div",null,t))},Igt=["innerRef","isDisabled","isHidden","inputClassName"],jge={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},Dgt={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Sr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},jge)},Ogt=function(e){return Sr({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},jge)},Yee=function(e){var t=e.children,r=e.innerProps;return Pr("div",r,t)},Pgt=function(e){var t=e.children,r=e.components,n=e.data,a=e.innerProps,s=e.isDisabled,o=e.removeProps,l=e.selectProps,c=r.Container,u=r.Label,d=r.Remove;return Pr(c,{data:n,innerProps:Sr(Sr({},Ls(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),a),selectProps:l},Pr(u,{data:n,innerProps:Sr({},Ls(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},t),Pr(d,{data:n,innerProps:Sr(Sr({},Ls(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},o),selectProps:l}))},Fgt={ClearIndicator:function(e){var t=e.children,r=e.innerProps;return Pr("div",Hr({},Ls(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||Pr($O,null))},Control:_gt,DropdownIndicator:function(e){var t=e.children,r=e.innerProps;return Pr("div",Hr({},Ls(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||Pr(Xee,null))},DownChevron:Xee,CrossIcon:$O,Group:Bgt,GroupHeading:function(e){var t=Gee(e);t.data;var r=Oh(t,Tgt);return Pr("div",Hr({},Ls(e,"groupHeading",{"group-heading":!0}),r))},IndicatorsContainer:function(e){var t=e.children,r=e.innerProps;return Pr("div",Hr({},Ls(e,"indicatorsContainer",{indicators:!0}),r),t)},IndicatorSeparator:function(e){var t=e.innerProps;return Pr("span",Hr({},t,Ls(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,r=e.value,n=Gee(e),a=n.innerRef,s=n.isDisabled,o=n.isHidden,l=n.inputClassName,c=Oh(n,Igt);return Pr("div",Hr({},Ls(e,"input",{"input-container":!0}),{"data-value":r||""}),Pr("input",Hr({className:t({input:!0},l),ref:a,style:Ogt(o),disabled:s},c)))},LoadingIndicator:function(e){var t=e.innerProps,r=e.isRtl,n=e.size,a=n===void 0?4:n,s=Oh(e,Cgt);return Pr("div",Hr({},Ls(Sr(Sr({},s),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Pr(zO,{delay:0,offset:r}),Pr(zO,{delay:160,offset:!0}),Pr(zO,{delay:320,offset:!r}))},Menu:bgt,MenuList:function(e){var t=e.children,r=e.innerProps,n=e.innerRef,a=e.isMulti;return Pr("div",Hr({},Ls(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:n},r),t)},MenuPortal:function(e){var t=e.appendTo,r=e.children,n=e.controlElement,a=e.innerProps,s=e.menuPlacement,o=e.menuPosition,l=w.useRef(null),c=w.useRef(null),u=lo(w.useState(yge(s)),2),d=u[0],f=u[1],A=w.useMemo(function(){return{setPortalPlacement:f}},[]),m=lo(w.useState(null),2),g=m[0],x=m[1],v=w.useCallback(function(){if(n){var _=function(T){var k=T.getBoundingClientRect();return{bottom:k.bottom,height:k.height,left:k.left,right:k.right,top:k.top,width:k.width}}(n),j=o==="fixed"?0:window.pageYOffset,I=_[d]+j;I===(g==null?void 0:g.offset)&&_.left===(g==null?void 0:g.rect.left)&&_.width===(g==null?void 0:g.rect.width)||x({offset:I,rect:_})}},[n,o,d,g==null?void 0:g.offset,g==null?void 0:g.rect.left,g==null?void 0:g.rect.width]);BL(function(){v()},[v]);var y=w.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),n&&l.current&&(c.current=function(_,j,I,T){T===void 0&&(T={});const{ancestorScroll:k=!0,ancestorResize:B=!0,elementResize:M=!0,animationFrame:P=!1}=T,S=k&&!P,L=S||B?[...n5(_)?a5(_):_.contextElement?a5(_.contextElement):[],...a5(j)]:[];L.forEach(z=>{S&&z.addEventListener("scroll",I,{passive:!0}),B&&z.addEventListener("resize",I)});let H,q=null;if(M){let z=!0;q=new ResizeObserver(()=>{z||I(),z=!1}),n5(_)&&!P&&q.observe(_),n5(_)||!_.contextElement||P||q.observe(_.contextElement),q.observe(j)}let Q=P?$ee(_):null;return P&&function z(){const K=$ee(_);!Q||K.x===Q.x&&K.y===Q.y&&K.width===Q.width&&K.height===Q.height||I(),Q=K,H=requestAnimationFrame(z)}(),I(),()=>{var z;L.forEach(K=>{S&&K.removeEventListener("scroll",I),B&&K.removeEventListener("resize",I)}),(z=q)==null||z.disconnect(),q=null,P&&cancelAnimationFrame(H)}}(n,l.current,v,{elementResize:"ResizeObserver"in window}))},[n,v]);BL(function(){y()},[y]);var N=w.useCallback(function(_){l.current=_,y()},[y]);if(!t&&o!=="fixed"||!g)return null;var C=Pr("div",Hr({ref:N},Ls(Sr(Sr({},e),{},{offset:g.offset,position:o,rect:g.rect}),"menuPortal",{"menu-portal":!0}),a),r);return Pr(wge.Provider,{value:A},t?H7.createPortal(C,t):C)},LoadingMessage:function(e){var t=e.children,r=t===void 0?"Loading...":t,n=e.innerProps,a=Oh(e,ggt);return Pr("div",Hr({},Ls(Sr(Sr({},a),{},{children:r,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),r)},NoOptionsMessage:function(e){var t=e.children,r=t===void 0?"No options":t,n=e.innerProps,a=Oh(e,pgt);return Pr("div",Hr({},Ls(Sr(Sr({},a),{},{children:r,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),r)},MultiValue:Pgt,MultiValueContainer:Yee,MultiValueLabel:Yee,MultiValueRemove:function(e){var t=e.children,r=e.innerProps;return Pr("div",Hr({role:"button"},r),t||Pr($O,{size:14}))},Option:function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.innerRef,o=e.innerProps;return Pr("div",Hr({},Ls(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":n,"option--is-selected":a}),{ref:s,"aria-disabled":r},o),t)},Placeholder:function(e){var t=e.children,r=e.innerProps;return Pr("div",Hr({},Ls(e,"placeholder",{placeholder:!0}),r),t)},SelectContainer:function(e){var t=e.children,r=e.innerProps,n=e.isDisabled,a=e.isRtl;return Pr("div",Hr({},Ls(e,"container",{"--is-disabled":n,"--is-rtl":a}),r),t)},SingleValue:function(e){var t=e.children,r=e.isDisabled,n=e.innerProps;return Pr("div",Hr({},Ls(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),n),t)},ValueContainer:function(e){var t=e.children,r=e.innerProps,n=e.isMulti,a=e.hasValue;return Pr("div",Hr({},Ls(e,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":a}),r),t)}},Jee=Number.isNaN||function(e){return typeof e=="number"&&e!=e};function Rgt(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],a=t[r],!(n===a||Jee(n)&&Jee(a)))return!1;var n,a;return!0}for(var Lgt={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},Zee=function(e){return Pr("span",Hr({css:Lgt},e))},Mgt={guidance:function(e){var t=e.isSearchable,r=e.isMulti,n=e.tabSelectsValue,a=e.context,s=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(n?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,n=r===void 0?"":r,a=e.labels,s=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return"option ".concat(n,s?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,n=e.options,a=e.label,s=a===void 0?"":a,o=e.selectValue,l=e.isDisabled,c=e.isSelected,u=e.isAppleDevice,d=function(m,g){return m&&m.length?"".concat(m.indexOf(g)+1," of ").concat(m.length):""};if(t==="value"&&o)return"value ".concat(s," focused, ").concat(d(o,r),".");if(t==="menu"&&u){var f=l?" disabled":"",A="".concat(c?" selected":"").concat(f);return"".concat(s).concat(A,", ").concat(d(n,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},Ugt=function(e){var t=e.ariaSelection,r=e.focusedOption,n=e.focusedValue,a=e.focusableOptions,s=e.isFocused,o=e.selectValue,l=e.selectProps,c=e.id,u=e.isAppleDevice,d=l.ariaLiveMessages,f=l.getOptionLabel,A=l.inputValue,m=l.isMulti,g=l.isOptionDisabled,x=l.isSearchable,v=l.menuIsOpen,y=l.options,N=l.screenReaderStatus,C=l.tabSelectsValue,_=l.isLoading,j=l["aria-label"],I=l["aria-live"],T=w.useMemo(function(){return Sr(Sr({},Mgt),d||{})},[d]),k=w.useMemo(function(){var H,q="";if(t&&T.onChange){var Q=t.option,z=t.options,K=t.removedValue,Z=t.removedValues,U=t.value,Y=K||Q||(H=U,Array.isArray(H)?null:H),R=Y?f(Y):"",D=z||Z||void 0,W=D?D.map(f):[],J=Sr({isDisabled:Y&&g(Y,o),label:R,labels:W},t);q=T.onChange(J)}return q},[t,T,g,o,f]),B=w.useMemo(function(){var H="",q=r||n,Q=!!(r&&o&&o.includes(r));if(q&&T.onFocus){var z={focused:q,label:f(q),isDisabled:g(q,o),isSelected:Q,options:a,context:q===r?"menu":"value",selectValue:o,isAppleDevice:u};H=T.onFocus(z)}return H},[r,n,f,g,T,a,o,u]),M=w.useMemo(function(){var H="";if(v&&y.length&&!_&&T.onFilter){var q=N({count:a.length});H=T.onFilter({inputValue:A,resultsMessage:q})}return H},[a,A,v,T,y,N,_]),P=(t==null?void 0:t.action)==="initial-input-focus",S=w.useMemo(function(){var H="";if(T.guidance){var q=n?"value":v?"menu":"input";H=T.guidance({"aria-label":j,context:q,isDisabled:r&&g(r,o),isMulti:m,isSearchable:x,tabSelectsValue:C,isInitialFocus:P})}return H},[j,r,n,m,g,x,v,T,o,C,P]),L=Pr(w.Fragment,null,Pr("span",{id:"aria-selection"},k),Pr("span",{id:"aria-focused"},B),Pr("span",{id:"aria-results"},M),Pr("span",{id:"aria-guidance"},S));return Pr(w.Fragment,null,Pr(Zee,{id:c},P&&L),Pr(Zee,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!P&&L))},GO=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],Hgt=new RegExp("["+GO.map(function(e){return e.letters}).join("")+"]","g"),kge={},qO=0;qO<GO.length;qO++)for(var KO=GO[qO],WO=0;WO<KO.letters.length;WO++)kge[KO.letters[WO]]=KO.base;var Sge=function(e){return e.replace(Hgt,function(t){return kge[t]})},Qgt=function(e,t){t===void 0&&(t=Rgt);var r=null;function n(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var o=e.apply(this,a);return r={lastResult:o,lastArgs:a,lastThis:this},o}return n.clear=function(){r=null},n}(Sge),ete=function(e){return e.replace(/^\s+|\s+$/g,"")},Vgt=function(e){return"".concat(e.label," ").concat(e.value)},$gt=["innerRef"];function zgt(e){var t=e.innerRef,r=function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];var l=Object.entries(n).filter(function(c){var u=lo(c,1)[0];return!s.includes(u)});return l.reduce(function(c,u){var d=lo(u,2),f=d[0],A=d[1];return c[f]=A,c},{})}(Oh(e,$gt),"onExited","in","enter","exit","appear");return Pr("input",Hr({ref:t},r,{css:IH({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var tte=["boxSizing","height","overflow","paddingRight","position"],rte={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function nte(e){e.preventDefault()}function ate(e){e.stopPropagation()}function ste(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function ite(){return"ontouchstart"in window||navigator.maxTouchPoints}var ote=!(typeof window>"u"||!window.document||!window.document.createElement),r2=0,cb={capture:!1,passive:!1},Ggt=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},qgt={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Kgt(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,a=function(o){var l=o.isEnabled,c=o.onBottomArrive,u=o.onBottomLeave,d=o.onTopArrive,f=o.onTopLeave,A=w.useRef(!1),m=w.useRef(!1),g=w.useRef(0),x=w.useRef(null),v=w.useCallback(function(I,T){if(x.current!==null){var k=x.current,B=k.scrollTop,M=k.scrollHeight,P=k.clientHeight,S=x.current,L=T>0,H=M-P-B,q=!1;H>T&&A.current&&(u&&u(I),A.current=!1),L&&m.current&&(f&&f(I),m.current=!1),L&&T>H?(c&&!A.current&&c(I),S.scrollTop=M,q=!0,A.current=!0):!L&&-T>B&&(d&&!m.current&&d(I),S.scrollTop=0,q=!0,m.current=!0),q&&function(Q){Q.cancelable&&Q.preventDefault(),Q.stopPropagation()}(I)}},[c,u,d,f]),y=w.useCallback(function(I){v(I,I.deltaY)},[v]),N=w.useCallback(function(I){g.current=I.changedTouches[0].clientY},[]),C=w.useCallback(function(I){var T=g.current-I.changedTouches[0].clientY;v(I,T)},[v]),_=w.useCallback(function(I){if(I){var T=!!Agt&&{passive:!1};I.addEventListener("wheel",y,T),I.addEventListener("touchstart",N,T),I.addEventListener("touchmove",C,T)}},[C,N,y]),j=w.useCallback(function(I){I&&(I.removeEventListener("wheel",y,!1),I.removeEventListener("touchstart",N,!1),I.removeEventListener("touchmove",C,!1))},[C,N,y]);return w.useEffect(function(){if(l){var I=x.current;return _(I),function(){j(I)}}},[l,_,j]),function(I){x.current=I}}({isEnabled:n===void 0||n,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),s=function(o){var l=o.isEnabled,c=o.accountForScrollbars,u=c===void 0||c,d=w.useRef({}),f=w.useRef(null),A=w.useCallback(function(g){if(ote){var x=document.body,v=x&&x.style;if(u&&tte.forEach(function(_){var j=v&&v[_];d.current[_]=j}),u&&r2<1){var y=parseInt(d.current.paddingRight,10)||0,N=document.body?document.body.clientWidth:0,C=window.innerWidth-N+y||0;Object.keys(rte).forEach(function(_){var j=rte[_];v&&(v[_]=j)}),v&&(v.paddingRight="".concat(C,"px"))}x&&ite()&&(x.addEventListener("touchmove",nte,cb),g&&(g.addEventListener("touchstart",ste,cb),g.addEventListener("touchmove",ate,cb))),r2+=1}},[u]),m=w.useCallback(function(g){if(ote){var x=document.body,v=x&&x.style;r2=Math.max(r2-1,0),u&&r2<1&&tte.forEach(function(y){var N=d.current[y];v&&(v[y]=N)}),x&&ite()&&(x.removeEventListener("touchmove",nte,cb),g&&(g.removeEventListener("touchstart",ste,cb),g.removeEventListener("touchmove",ate,cb)))}},[u]);return w.useEffect(function(){if(l){var g=f.current;return A(g),function(){m(g)}}},[l,A,m]),function(g){f.current=g}}({isEnabled:r});return Pr(w.Fragment,null,r&&Pr("div",{onClick:Ggt,css:qgt}),t(function(o){a(o),s(o)}))}var Wgt={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Xgt=function(e){var t=e.name,r=e.onFocus;return Pr("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:Wgt,value:"",onChange:function(){}})};function IL(e){var t;return typeof window<"u"&&window.navigator!=null&&e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform)}function _ge(){return IL(/^Mac/i)}function Ygt(){return IL(/^iPhone/i)||IL(/^iPad/i)||_ge()&&navigator.maxTouchPoints>1}var Jgt,Zgt={clearIndicator:kgt,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.theme,s=a.colors,o=a.borderRadius;return Sr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?s.neutral5:s.neutral0,borderColor:r?s.neutral10:n?s.primary:s.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:n?s.primary:s.neutral30}})},dropdownIndicator:jgt,group:function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},groupHeading:function(e,t){var r=e.theme,n=r.colors,a=r.spacing;return Sr({label:"group",cursor:"default",display:"block"},t?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*a.baseUnit,paddingRight:3*a.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return Sr({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?s.neutral10:s.neutral20,marginBottom:2*a,marginTop:2*a})},input:function(e,t){var r=e.isDisabled,n=e.value,a=e.theme,s=a.spacing,o=a.colors;return Sr(Sr({visibility:r?"hidden":"visible",transform:n?"translateZ(0)":""},Dgt),t?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:o.neutral80})},loadingIndicator:function(e,t){var r=e.isFocused,n=e.size,a=e.theme,s=a.colors,o=a.spacing.baseUnit;return Sr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*o})},loadingMessage:wgt,menu:function(e,t){var r,n=e.placement,a=e.theme,s=a.borderRadius,o=a.spacing,l=a.colors;return Sr((Ub(r={label:"menu"},function(c){return c?{bottom:"top",top:"bottom"}[c]:"bottom"}(n),"100%"),Ub(r,"position","absolute"),Ub(r,"width","100%"),Ub(r,"zIndex",1),r),t?{}:{backgroundColor:l.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:o.menuGutter,marginTop:o.menuGutter})},menuList:function(e,t){var r=e.maxHeight,n=e.theme.spacing.baseUnit;return Sr({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:n,paddingTop:n})},menuPortal:function(e){var t=e.rect,r=e.offset,n=e.position;return{left:t.left,position:n,top:r,width:t.width,zIndex:1}},multiValue:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors;return Sr({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:s.neutral10,borderRadius:a/2,margin:n.baseUnit/2})},multiValueLabel:function(e,t){var r=e.theme,n=r.borderRadius,a=r.colors,s=e.cropWithEllipsis;return Sr({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:n/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors,o=e.isFocused;return Sr({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:o?s.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},noOptionsMessage:ygt,option:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.theme,o=s.spacing,l=s.colors;return Sr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?l.primary:n?l.primary25:"transparent",color:r?l.neutral20:a?l.neutral0:"inherit",padding:"".concat(2*o.baseUnit,"px ").concat(3*o.baseUnit,"px"),":active":{backgroundColor:r?void 0:a?l.primary:l.primary50}})},placeholder:function(e,t){var r=e.theme,n=r.spacing,a=r.colors;return Sr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},singleValue:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing,s=n.colors;return Sr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?s.neutral40:s.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},valueContainer:function(e,t){var r=e.theme.spacing,n=e.isMulti,a=e.hasValue,s=e.selectProps.controlShouldRenderValue;return Sr({alignItems:"center",display:n&&a&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})}},XO={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},ext={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:Kee(),captureMenuScroll:!Kee(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var r=Sr({ignoreCase:!0,ignoreAccents:!0,stringify:Vgt,trim:!0,matchFrom:"any"},Jgt),n=r.ignoreCase,a=r.ignoreAccents,s=r.stringify,o=r.trim,l=r.matchFrom,c=o?ete(t):t,u=o?ete(s(e)):s(e);return n&&(c=c.toLowerCase(),u=u.toLowerCase()),a&&(c=Qgt(c),u=Sge(u)),l==="start"?u.substr(0,c.length)===c:u.indexOf(c)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function lte(e,t,r,n){return{type:"option",data:t,isDisabled:Bge(e,t,r),isSelected:Ige(e,t,r),label:Tge(e,t),value:d4(e,t),index:n}}function $k(e,t){return e.options.map(function(r,n){if("options"in r){var a=r.options.map(function(o,l){return lte(e,o,t,l)}).filter(function(o){return dte(e,o)});return a.length>0?{type:"group",data:r,options:a,index:n}:void 0}var s=lte(e,r,t,n);return dte(e,s)?s:void 0}).filter(mgt)}function cte(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,EH(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function ute(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,EH(n.options.map(function(a){return{data:a.data,id:"".concat(t,"-").concat(n.index,"-").concat(a.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function dte(e,t){var r=e.inputValue,n=r===void 0?"":r,a=t.data,s=t.isSelected,o=t.label,l=t.value;return(!Oge(e)||!s)&&Dge(e,{label:o,value:l,data:a},n)}var YO=function(e,t){var r;return((r=e.find(function(n){return n.data===t}))===null||r===void 0?void 0:r.id)||null},Tge=function(e,t){return e.getOptionLabel(t)},d4=function(e,t){return e.getOptionValue(t)};function Bge(e,t,r){return typeof e.isOptionDisabled=="function"&&e.isOptionDisabled(t,r)}function Ige(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=d4(e,t);return r.some(function(a){return d4(e,a)===n})}function Dge(e,t,r){return!e.filterOption||e.filterOption(t,r)}var Oge=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},txt=1,Pge=function(e){(function(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(l&&l.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),l&&wL(o,l)})(s,w.Component);var t,r,n,a=Spt(s);function s(o){var l;if(function(f,A){if(!(f instanceof A))throw new TypeError("Cannot call a class as a function")}(this,s),(l=a.call(this,o)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},l.blockOptionHover=!1,l.isComposing=!1,l.commonProps=void 0,l.initialTouchX=0,l.initialTouchY=0,l.openAfterFocus=!1,l.scrollToFocusedOptionOnUpdate=!1,l.userIsDragging=void 0,l.isAppleDevice=_ge()||Ygt(),l.controlRef=null,l.getControlRef=function(f){l.controlRef=f},l.focusedOptionRef=null,l.getFocusedOptionRef=function(f){l.focusedOptionRef=f},l.menuListRef=null,l.getMenuListRef=function(f){l.menuListRef=f},l.inputRef=null,l.getInputRef=function(f){l.inputRef=f},l.focus=l.focusInput,l.blur=l.blurInput,l.onChange=function(f,A){var m=l.props,g=m.onChange,x=m.name;A.name=x,l.ariaOnChange(f,A),g(f,A)},l.setValue=function(f,A,m){var g=l.props,x=g.closeMenuOnSelect,v=g.isMulti,y=g.inputValue;l.onInputChange("",{action:"set-value",prevInputValue:y}),x&&(l.setState({inputIsHiddenAfterUpdate:!v}),l.onMenuClose()),l.setState({clearFocusValueOnUpdate:!0}),l.onChange(f,{action:A,option:m})},l.selectOption=function(f){var A=l.props,m=A.blurInputOnSelect,g=A.isMulti,x=A.name,v=l.state.selectValue,y=g&&l.isOptionSelected(f,v),N=l.isOptionDisabled(f,v);if(y){var C=l.getOptionValue(f);l.setValue(v.filter(function(_){return l.getOptionValue(_)!==C}),"deselect-option",f)}else{if(N)return void l.ariaOnChange(f,{action:"select-option",option:f,name:x});g?l.setValue([].concat(EH(v),[f]),"select-option",f):l.setValue(f,"select-option")}m&&l.blurInput()},l.removeValue=function(f){var A=l.props.isMulti,m=l.state.selectValue,g=l.getOptionValue(f),x=m.filter(function(y){return l.getOptionValue(y)!==g}),v=Vk(A,x,x[0]||null);l.onChange(v,{action:"remove-value",removedValue:f}),l.focusInput()},l.clearValue=function(){var f=l.state.selectValue;l.onChange(Vk(l.props.isMulti,[],null),{action:"clear",removedValues:f})},l.popValue=function(){var f=l.props.isMulti,A=l.state.selectValue,m=A[A.length-1],g=A.slice(0,A.length-1),x=Vk(f,g,g[0]||null);l.onChange(x,{action:"pop-value",removedValue:m})},l.getFocusedOptionId=function(f){return YO(l.state.focusableOptionsWithIds,f)},l.getFocusableOptionsWithIds=function(){return ute($k(l.props,l.state.selectValue),l.getElementId("option"))},l.getValue=function(){return l.state.selectValue},l.cx=function(){for(var f=arguments.length,A=new Array(f),m=0;m<f;m++)A[m]=arguments[m];return dgt.apply(void 0,[l.props.classNamePrefix].concat(A))},l.getOptionLabel=function(f){return Tge(l.props,f)},l.getOptionValue=function(f){return d4(l.props,f)},l.getStyles=function(f,A){var m=l.props.unstyled,g=Zgt[f](A,m);g.boxSizing="border-box";var x=l.props.styles[f];return x?x(g,A):g},l.getClassNames=function(f,A){var m,g;return(m=(g=l.props.classNames)[f])===null||m===void 0?void 0:m.call(g,A)},l.getElementId=function(f){return"".concat(l.state.instancePrefix,"-").concat(f)},l.getComponents=function(){return f=l.props,Sr(Sr({},Fgt),f.components);var f},l.buildCategorizedOptions=function(){return $k(l.props,l.state.selectValue)},l.getCategorizedOptions=function(){return l.props.menuIsOpen?l.buildCategorizedOptions():[]},l.buildFocusableOptions=function(){return cte(l.buildCategorizedOptions())},l.getFocusableOptions=function(){return l.props.menuIsOpen?l.buildFocusableOptions():[]},l.ariaOnChange=function(f,A){l.setState({ariaSelection:Sr({value:f},A)})},l.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),l.focusInput())},l.onMenuMouseMove=function(f){l.blockOptionHover=!1},l.onControlMouseDown=function(f){if(!f.defaultPrevented){var A=l.props.openMenuOnClick;l.state.isFocused?l.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&l.onMenuClose():A&&l.openMenu("first"):(A&&(l.openAfterFocus=!0),l.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},l.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0||l.props.isDisabled)){var A=l.props,m=A.isMulti,g=A.menuIsOpen;l.focusInput(),g?(l.setState({inputIsHiddenAfterUpdate:!m}),l.onMenuClose()):l.openMenu("first"),f.preventDefault()}},l.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(l.clearValue(),f.preventDefault(),l.openAfterFocus=!1,f.type==="touchend"?l.focusInput():setTimeout(function(){return l.focusInput()}))},l.onScroll=function(f){typeof l.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&ZT(f.target)&&l.props.onMenuClose():typeof l.props.closeMenuOnScroll=="function"&&l.props.closeMenuOnScroll(f)&&l.props.onMenuClose()},l.onCompositionStart=function(){l.isComposing=!0},l.onCompositionEnd=function(){l.isComposing=!1},l.onTouchStart=function(f){var A=f.touches,m=A&&A.item(0);m&&(l.initialTouchX=m.clientX,l.initialTouchY=m.clientY,l.userIsDragging=!1)},l.onTouchMove=function(f){var A=f.touches,m=A&&A.item(0);if(m){var g=Math.abs(m.clientX-l.initialTouchX),x=Math.abs(m.clientY-l.initialTouchY);l.userIsDragging=g>5||x>5}},l.onTouchEnd=function(f){l.userIsDragging||(l.controlRef&&!l.controlRef.contains(f.target)&&l.menuListRef&&!l.menuListRef.contains(f.target)&&l.blurInput(),l.initialTouchX=0,l.initialTouchY=0)},l.onControlTouchEnd=function(f){l.userIsDragging||l.onControlMouseDown(f)},l.onClearIndicatorTouchEnd=function(f){l.userIsDragging||l.onClearIndicatorMouseDown(f)},l.onDropdownIndicatorTouchEnd=function(f){l.userIsDragging||l.onDropdownIndicatorMouseDown(f)},l.handleInputChange=function(f){var A=l.props.inputValue,m=f.currentTarget.value;l.setState({inputIsHiddenAfterUpdate:!1}),l.onInputChange(m,{action:"input-change",prevInputValue:A}),l.props.menuIsOpen||l.onMenuOpen()},l.onInputFocus=function(f){l.props.onFocus&&l.props.onFocus(f),l.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(l.openAfterFocus||l.props.openMenuOnFocus)&&l.openMenu("first"),l.openAfterFocus=!1},l.onInputBlur=function(f){var A=l.props.inputValue;l.menuListRef&&l.menuListRef.contains(document.activeElement)?l.inputRef.focus():(l.props.onBlur&&l.props.onBlur(f),l.onInputChange("",{action:"input-blur",prevInputValue:A}),l.onMenuClose(),l.setState({focusedValue:null,isFocused:!1}))},l.onOptionHover=function(f){if(!l.blockOptionHover&&l.state.focusedOption!==f){var A=l.getFocusableOptions().indexOf(f);l.setState({focusedOption:f,focusedOptionId:A>-1?l.getFocusedOptionId(f):null})}},l.shouldHideSelectedOptions=function(){return Oge(l.props)},l.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),l.focus()},l.onKeyDown=function(f){var A=l.props,m=A.isMulti,g=A.backspaceRemovesValue,x=A.escapeClearsValue,v=A.inputValue,y=A.isClearable,N=A.isDisabled,C=A.menuIsOpen,_=A.onKeyDown,j=A.tabSelectsValue,I=A.openMenuOnFocus,T=l.state,k=T.focusedOption,B=T.focusedValue,M=T.selectValue;if(!(N||typeof _=="function"&&(_(f),f.defaultPrevented))){switch(l.blockOptionHover=!0,f.key){case"ArrowLeft":if(!m||v)return;l.focusValue("previous");break;case"ArrowRight":if(!m||v)return;l.focusValue("next");break;case"Delete":case"Backspace":if(v)return;if(B)l.removeValue(B);else{if(!g)return;m?l.popValue():y&&l.clearValue()}break;case"Tab":if(l.isComposing||f.shiftKey||!C||!j||!k||I&&l.isOptionSelected(k,M))return;l.selectOption(k);break;case"Enter":if(f.keyCode===229)break;if(C){if(!k||l.isComposing)return;l.selectOption(k);break}return;case"Escape":C?(l.setState({inputIsHiddenAfterUpdate:!1}),l.onInputChange("",{action:"menu-close",prevInputValue:v}),l.onMenuClose()):y&&x&&l.clearValue();break;case" ":if(v)return;if(!C){l.openMenu("first");break}if(!k)return;l.selectOption(k);break;case"ArrowUp":C?l.focusOption("up"):l.openMenu("last");break;case"ArrowDown":C?l.focusOption("down"):l.openMenu("first");break;case"PageUp":if(!C)return;l.focusOption("pageup");break;case"PageDown":if(!C)return;l.focusOption("pagedown");break;case"Home":if(!C)return;l.focusOption("first");break;case"End":if(!C)return;l.focusOption("last");break;default:return}f.preventDefault()}},l.state.instancePrefix="react-select-"+(l.props.instanceId||++txt),l.state.selectValue=zee(o.value),o.menuIsOpen&&l.state.selectValue.length){var c=l.getFocusableOptionsWithIds(),u=l.buildFocusableOptions(),d=u.indexOf(l.state.selectValue[0]);l.state.focusableOptionsWithIds=c,l.state.focusedOption=u[d],l.state.focusedOptionId=YO(c,u[d])}return l}return t=s,r=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&qee(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(o){var l=this.props,c=l.isDisabled,u=l.menuIsOpen,d=this.state.isFocused;(d&&!c&&o.isDisabled||d&&u&&!o.menuIsOpen)&&this.focusInput(),d&&c&&!o.isDisabled?this.setState({isFocused:!1},this.onMenuClose):d||c||!o.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(qee(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(o,l){this.props.onInputChange(o,l)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(o){var l=this,c=this.state,u=c.selectValue,d=c.isFocused,f=this.buildFocusableOptions(),A=o==="first"?0:f.length-1;if(!this.props.isMulti){var m=f.indexOf(u[0]);m>-1&&(A=m)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:f[A],focusedOptionId:this.getFocusedOptionId(f[A])},function(){return l.onMenuOpen()})}},{key:"focusValue",value:function(o){var l=this.state,c=l.selectValue,u=l.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=c.indexOf(u);u||(d=-1);var f=c.length-1,A=-1;if(c.length){switch(o){case"previous":A=d===0?0:d===-1?f:d-1;break;case"next":d>-1&&d<f&&(A=d+1)}this.setState({inputIsHidden:A!==-1,focusedValue:c[A]})}}}},{key:"focusOption",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",l=this.props.pageSize,c=this.state.focusedOption,u=this.getFocusableOptions();if(u.length){var d=0,f=u.indexOf(c);c||(f=-1),o==="up"?d=f>0?f-1:u.length-1:o==="down"?d=(f+1)%u.length:o==="pageup"?(d=f-l)<0&&(d=0):o==="pagedown"?(d=f+l)>u.length-1&&(d=u.length-1):o==="last"&&(d=u.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:u[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(u[d])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(XO):Sr(Sr({},XO),this.props.theme):XO}},{key:"getCommonProps",value:function(){var o=this.clearValue,l=this.cx,c=this.getStyles,u=this.getClassNames,d=this.getValue,f=this.selectOption,A=this.setValue,m=this.props,g=m.isMulti,x=m.isRtl,v=m.options;return{clearValue:o,cx:l,getStyles:c,getClassNames:u,getValue:d,hasValue:this.hasValue(),isMulti:g,isRtl:x,options:v,selectOption:f,selectProps:m,setValue:A,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var o=this.props,l=o.isClearable,c=o.isMulti;return l===void 0?c:l}},{key:"isOptionDisabled",value:function(o,l){return Bge(this.props,o,l)}},{key:"isOptionSelected",value:function(o,l){return Ige(this.props,o,l)}},{key:"filterOption",value:function(o,l){return Dge(this.props,o,l)}},{key:"formatOptionLabel",value:function(o,l){if(typeof this.props.formatOptionLabel=="function"){var c=this.props.inputValue,u=this.state.selectValue;return this.props.formatOptionLabel(o,{context:l,inputValue:c,selectValue:u})}return this.getOptionLabel(o)}},{key:"formatGroupLabel",value:function(o){return this.props.formatGroupLabel(o)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var o=this.props,l=o.isDisabled,c=o.isSearchable,u=o.inputId,d=o.inputValue,f=o.tabIndex,A=o.form,m=o.menuIsOpen,g=o.required,x=this.getComponents().Input,v=this.state,y=v.inputIsHidden,N=v.ariaSelection,C=this.commonProps,_=u||this.getElementId("input"),j=Sr(Sr(Sr({"aria-autocomplete":"list","aria-expanded":m,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},m&&{"aria-controls":this.getElementId("listbox")}),!c&&{"aria-readonly":!0}),this.hasValue()?(N==null?void 0:N.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return c?w.createElement(x,Hr({},C,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:_,innerRef:this.getInputRef,isDisabled:l,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:f,form:A,type:"text",value:d},j)):w.createElement(zgt,Hr({id:_,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:c4,onFocus:this.onInputFocus,disabled:l,tabIndex:f,inputMode:"none",form:A,value:""},j))}},{key:"renderPlaceholderOrValue",value:function(){var o=this,l=this.getComponents(),c=l.MultiValue,u=l.MultiValueContainer,d=l.MultiValueLabel,f=l.MultiValueRemove,A=l.SingleValue,m=l.Placeholder,g=this.commonProps,x=this.props,v=x.controlShouldRenderValue,y=x.isDisabled,N=x.isMulti,C=x.inputValue,_=x.placeholder,j=this.state,I=j.selectValue,T=j.focusedValue,k=j.isFocused;if(!this.hasValue()||!v)return C?null:w.createElement(m,Hr({},g,{key:"placeholder",isDisabled:y,isFocused:k,innerProps:{id:this.getElementId("placeholder")}}),_);if(N)return I.map(function(M,P){var S=M===T,L="".concat(o.getOptionLabel(M),"-").concat(o.getOptionValue(M));return w.createElement(c,Hr({},g,{components:{Container:u,Label:d,Remove:f},isFocused:S,isDisabled:y,key:L,index:P,removeProps:{onClick:function(){return o.removeValue(M)},onTouchEnd:function(){return o.removeValue(M)},onMouseDown:function(H){H.preventDefault()}},data:M}),o.formatOptionLabel(M,"value"))});if(C)return null;var B=I[0];return w.createElement(A,Hr({},g,{data:B,isDisabled:y}),this.formatOptionLabel(B,"value"))}},{key:"renderClearIndicator",value:function(){var o=this.getComponents().ClearIndicator,l=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;if(!this.isClearable()||!o||u||!this.hasValue()||d)return null;var A={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return w.createElement(o,Hr({},l,{innerProps:A,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var o=this.getComponents().LoadingIndicator,l=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;return o&&d?w.createElement(o,Hr({},l,{innerProps:{"aria-hidden":"true"},isDisabled:u,isFocused:f})):null}},{key:"renderIndicatorSeparator",value:function(){var o=this.getComponents(),l=o.DropdownIndicator,c=o.IndicatorSeparator;if(!l||!c)return null;var u=this.commonProps,d=this.props.isDisabled,f=this.state.isFocused;return w.createElement(c,Hr({},u,{isDisabled:d,isFocused:f}))}},{key:"renderDropdownIndicator",value:function(){var o=this.getComponents().DropdownIndicator;if(!o)return null;var l=this.commonProps,c=this.props.isDisabled,u=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return w.createElement(o,Hr({},l,{innerProps:d,isDisabled:c,isFocused:u}))}},{key:"renderMenu",value:function(){var o=this,l=this.getComponents(),c=l.Group,u=l.GroupHeading,d=l.Menu,f=l.MenuList,A=l.MenuPortal,m=l.LoadingMessage,g=l.NoOptionsMessage,x=l.Option,v=this.commonProps,y=this.state.focusedOption,N=this.props,C=N.captureMenuScroll,_=N.inputValue,j=N.isLoading,I=N.loadingMessage,T=N.minMenuHeight,k=N.maxMenuHeight,B=N.menuIsOpen,M=N.menuPlacement,P=N.menuPosition,S=N.menuPortalTarget,L=N.menuShouldBlockScroll,H=N.menuShouldScrollIntoView,q=N.noOptionsMessage,Q=N.onMenuScrollToTop,z=N.onMenuScrollToBottom;if(!B)return null;var K,Z=function(W,J){var le=W.type,ie=W.data,re=W.isDisabled,ce=W.isSelected,oe=W.label,be=W.value,X=y===ie,je=re?void 0:function(){return o.onOptionHover(ie)},De=re?void 0:function(){return o.selectOption(ie)},ke="".concat(o.getElementId("option"),"-").concat(J),ue={id:ke,onClick:De,onMouseMove:je,onMouseOver:je,tabIndex:-1,role:"option","aria-selected":o.isAppleDevice?void 0:ce};return w.createElement(x,Hr({},v,{innerProps:ue,data:ie,isDisabled:re,isSelected:ce,key:ke,label:oe,type:le,value:be,isFocused:X,innerRef:X?o.getFocusedOptionRef:void 0}),o.formatOptionLabel(W.data,"menu"))};if(this.hasOptions())K=this.getCategorizedOptions().map(function(W){if(W.type==="group"){var J=W.data,le=W.options,ie=W.index,re="".concat(o.getElementId("group"),"-").concat(ie),ce="".concat(re,"-heading");return w.createElement(c,Hr({},v,{key:re,data:J,options:le,Heading:u,headingProps:{id:ce,data:W.data},label:o.formatGroupLabel(W.data)}),W.options.map(function(oe){return Z(oe,"".concat(ie,"-").concat(oe.index))}))}if(W.type==="option")return Z(W,"".concat(W.index))});else if(j){var U=I({inputValue:_});if(U===null)return null;K=w.createElement(m,v,U)}else{var Y=q({inputValue:_});if(Y===null)return null;K=w.createElement(g,v,Y)}var R={minMenuHeight:T,maxMenuHeight:k,menuPlacement:M,menuPosition:P,menuShouldScrollIntoView:H},D=w.createElement(vgt,Hr({},v,R),function(W){var J=W.ref,le=W.placerProps,ie=le.placement,re=le.maxHeight;return w.createElement(d,Hr({},v,R,{innerRef:J,innerProps:{onMouseDown:o.onMenuMouseDown,onMouseMove:o.onMenuMouseMove},isLoading:j,placement:ie}),w.createElement(Kgt,{captureEnabled:C,onTopArrive:Q,onBottomArrive:z,lockEnabled:L},function(ce){return w.createElement(f,Hr({},v,{innerRef:function(oe){o.getMenuListRef(oe),ce(oe)},innerProps:{role:"listbox","aria-multiselectable":v.isMulti,id:o.getElementId("listbox")},isLoading:j,maxHeight:re,focusedOption:y}),K)}))});return S||P==="fixed"?w.createElement(A,Hr({},v,{appendTo:S,controlElement:this.controlRef,menuPlacement:M,menuPosition:P}),D):D}},{key:"renderFormField",value:function(){var o=this,l=this.props,c=l.delimiter,u=l.isDisabled,d=l.isMulti,f=l.name,A=l.required,m=this.state.selectValue;if(A&&!this.hasValue()&&!u)return w.createElement(Xgt,{name:f,onFocus:this.onValueInputFocus});if(f&&!u){if(d){if(c){var g=m.map(function(y){return o.getOptionValue(y)}).join(c);return w.createElement("input",{name:f,type:"hidden",value:g})}var x=m.length>0?m.map(function(y,N){return w.createElement("input",{key:"i-".concat(N),name:f,type:"hidden",value:o.getOptionValue(y)})}):w.createElement("input",{name:f,type:"hidden",value:""});return w.createElement("div",null,x)}var v=m[0]?this.getOptionValue(m[0]):"";return w.createElement("input",{name:f,type:"hidden",value:v})}}},{key:"renderLiveRegion",value:function(){var o=this.commonProps,l=this.state,c=l.ariaSelection,u=l.focusedOption,d=l.focusedValue,f=l.isFocused,A=l.selectValue,m=this.getFocusableOptions();return w.createElement(Ugt,Hr({},o,{id:this.getElementId("live-region"),ariaSelection:c,focusedOption:u,focusedValue:d,isFocused:f,selectValue:A,focusableOptions:m,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var o=this.getComponents(),l=o.Control,c=o.IndicatorsContainer,u=o.SelectContainer,d=o.ValueContainer,f=this.props,A=f.className,m=f.id,g=f.isDisabled,x=f.menuIsOpen,v=this.state.isFocused,y=this.commonProps=this.getCommonProps();return w.createElement(u,Hr({},y,{className:A,innerProps:{id:m,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:v}),this.renderLiveRegion(),w.createElement(l,Hr({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:v,menuIsOpen:x}),w.createElement(d,Hr({},y,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),w.createElement(c,Hr({},y,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],n=[{key:"getDerivedStateFromProps",value:function(o,l){var c=l.prevProps,u=l.clearFocusValueOnUpdate,d=l.inputIsHiddenAfterUpdate,f=l.ariaSelection,A=l.isFocused,m=l.prevWasFocused,g=l.instancePrefix,x=o.options,v=o.value,y=o.menuIsOpen,N=o.inputValue,C=o.isMulti,_=zee(v),j={};if(c&&(v!==c.value||x!==c.options||y!==c.menuIsOpen||N!==c.inputValue)){var I=y?function(L,H){return cte($k(L,H))}(o,_):[],T=y?ute($k(o,_),"".concat(g,"-option")):[],k=u?function(L,H){var q=L.focusedValue,Q=L.selectValue.indexOf(q);if(Q>-1){if(H.indexOf(q)>-1)return q;if(Q<H.length)return H[Q]}return null}(l,_):null,B=function(L,H){var q=L.focusedOption;return q&&H.indexOf(q)>-1?q:H[0]}(l,I);j={selectValue:_,focusedOption:B,focusedOptionId:YO(T,B),focusableOptionsWithIds:T,focusedValue:k,clearFocusValueOnUpdate:!1}}var M=d!=null&&o!==c?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},P=f,S=A&&m;return A&&!S&&(P={value:Vk(C,_,_[0]||null),options:_,action:"initial-input-focus"},S=!m),(f==null?void 0:f.action)==="initial-input-focus"&&(P=null),Sr(Sr(Sr({},j),M),{},{prevProps:o,ariaSelection:P,prevWasFocused:S})}}],r&&jee(t.prototype,r),n&&jee(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}();Pge.defaultProps=ext;var rxt=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],nxt=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],DH=xa(function(e){function t(r){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),axt=xa(function(e){var t=DH.default;e.exports=function(r,n){if(t(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n||"default");if(t(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)},e.exports.__esModule=!0,e.exports.default=e.exports}),Fge=xa(function(e){var t=DH.default;e.exports=function(r){var n=axt(r,"string");return t(n)==="symbol"?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports}),sxt=xa(function(e){e.exports=function(t,r,n){return(r=Fge(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t},e.exports.__esModule=!0,e.exports.default=e.exports});xa(function(e){function t(r,n){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);n&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),a.push.apply(a,s)}return a}e.exports=function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?t(Object(a),!0).forEach(function(s){sxt(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r},e.exports.__esModule=!0,e.exports.default=e.exports}),xa(function(e){e.exports=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}),xa(function(e){function t(r,n){for(var a=0;a<n.length;a++){var s=n[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,Fge(s.key),s)}}e.exports=function(r,n,a){return n&&t(r.prototype,n),a&&t(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r},e.exports.__esModule=!0,e.exports.default=e.exports});var ixt=xa(function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});xa(function(e){e.exports=function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&ixt(t,r)},e.exports.__esModule=!0,e.exports.default=e.exports});var fte=xa(function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),oxt=xa(function(e){e.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}),lxt=xa(function(e){e.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},e.exports.__esModule=!0,e.exports.default=e.exports}),cxt=xa(function(e){var t=DH.default;e.exports=function(r,n){if(n&&(t(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lxt(r)},e.exports.__esModule=!0,e.exports.default=e.exports});xa(function(e){e.exports=function(t){var r=oxt();return function(){var n,a=fte(t);if(r){var s=fte(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return cxt(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports});var DL=xa(function(e){e.exports=function(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a},e.exports.__esModule=!0,e.exports.default=e.exports}),uxt=xa(function(e){e.exports=function(t){if(Array.isArray(t))return DL(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),dxt=xa(function(e){e.exports=function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),Rge=xa(function(e){e.exports=function(t,r){if(t){if(typeof t=="string")return DL(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?DL(t,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}),fxt=xa(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});xa(function(e){e.exports=function(t){return uxt(t)||dxt(t)||Rge(t)||fxt()},e.exports.__esModule=!0,e.exports.default=e.exports});var hxt=xa(function(e){e.exports=function(t){if(Array.isArray(t))return t},e.exports.__esModule=!0,e.exports.default=e.exports}),Axt=xa(function(e){e.exports=function(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,o,l,c=[],u=!0,d=!1;try{if(o=(n=n.call(t)).next,r===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=o.call(n)).done)&&(c.push(a.value),c.length!==r);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw s}}return c}},e.exports.__esModule=!0,e.exports.default=e.exports}),mxt=xa(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});xa(function(e){e.exports=function(t,r){return hxt(t)||Axt(t,r)||Rge(t,r)||mxt()},e.exports.__esModule=!0,e.exports.default=e.exports});var pxt=xa(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)>=0||(s[n]=t[n]);return s},e.exports.__esModule=!0,e.exports.default=e.exports});xa(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s=pxt(t,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s},e.exports.__esModule=!0,e.exports.default=e.exports}),xa(function(e){e.exports=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))},e.exports.__esModule=!0,e.exports.default=e.exports});var gxt=w.forwardRef(function(e,t){var r=function(a){var s=a.defaultOptions,o=s!==void 0&&s,l=a.cacheOptions,c=l!==void 0&&l,u=a.loadOptions;a.options;var d=a.isLoading,f=d!==void 0&&d,A=a.onInputChange,m=a.filterOption,g=m===void 0?null:m,x=Oh(a,nxt),v=x.inputValue,y=w.useRef(void 0),N=w.useRef(!1),C=lo(w.useState(Array.isArray(o)?o:void 0),2),_=C[0],j=C[1],I=lo(w.useState(v!==void 0?v:""),2),T=I[0],k=I[1],B=lo(w.useState(o===!0),2),M=B[0],P=B[1],S=lo(w.useState(void 0),2),L=S[0],H=S[1],q=lo(w.useState([]),2),Q=q[0],z=q[1],K=lo(w.useState(!1),2),Z=K[0],U=K[1],Y=lo(w.useState({}),2),R=Y[0],D=Y[1],W=lo(w.useState(void 0),2),J=W[0],le=W[1],ie=lo(w.useState(void 0),2),re=ie[0],ce=ie[1];c!==re&&(D({}),ce(c)),o!==J&&(j(Array.isArray(o)?o:void 0),le(o)),w.useEffect(function(){return N.current=!0,function(){N.current=!1}},[]);var oe=w.useCallback(function(je,De){if(!u)return De();var ke=u(je,De);ke&&typeof ke.then=="function"&&ke.then(De,function(){return De()})},[u]);w.useEffect(function(){o===!0&&oe(T,function(je){N.current&&(j(je||[]),P(!!y.current))})},[]);var be=w.useCallback(function(je,De){var ke=function(we,Ae,de){if(de){var ae=de(we,Ae);if(typeof ae=="string")return ae}return we}(je,De,A);if(!ke)return y.current=void 0,k(""),H(""),z([]),P(!1),void U(!1);if(c&&R[ke])k(ke),H(ke),z(R[ke]),P(!1),U(!1);else{var ue=y.current={};k(ke),P(!0),U(!L),oe(ke,function(we){N&&ue===y.current&&(y.current=void 0,P(!1),H(ke),z(we||[]),U(!1),D(we?Sr(Sr({},R),{},Ub({},ke,we)):R))})}},[c,oe,L,R,A]),X=Z?[]:T&&L?Q:_||[];return Sr(Sr({},x),{},{options:X,isLoading:M||f,onInputChange:be,filterOption:g})}(e),n=function(a){var s=a.defaultInputValue,o=s===void 0?"":s,l=a.defaultMenuIsOpen,c=l!==void 0&&l,u=a.defaultValue,d=u===void 0?null:u,f=a.inputValue,A=a.menuIsOpen,m=a.onChange,g=a.onInputChange,x=a.onMenuClose,v=a.onMenuOpen,y=a.value,N=Oh(a,rxt),C=lo(w.useState(f!==void 0?f:o),2),_=C[0],j=C[1],I=lo(w.useState(A!==void 0?A:c),2),T=I[0],k=I[1],B=lo(w.useState(y!==void 0?y:d),2),M=B[0],P=B[1],S=w.useCallback(function(Z,U){typeof m=="function"&&m(Z,U),P(Z)},[m]),L=w.useCallback(function(Z,U){var Y;typeof g=="function"&&(Y=g(Z,U)),j(Y!==void 0?Y:Z)},[g]),H=w.useCallback(function(){typeof v=="function"&&v(),k(!0)},[v]),q=w.useCallback(function(){typeof x=="function"&&x(),k(!1)},[x]),Q=f!==void 0?f:_,z=A!==void 0?A:T,K=y!==void 0?y:M;return Sr(Sr({},N),{},{inputValue:Q,menuIsOpen:z,onChange:S,onInputChange:L,onMenuClose:q,onMenuOpen:H,value:K})}(r);return w.createElement(Pge,Hr({ref:t},n))}),xxt=gxt,vxt=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(a=n;a--!=0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=n;a--!=0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!=0;){var o=s[a];if(!e(t[o],r[o]))return!1}return!0}return t!=t&&r!=r},Hb;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(Hb||(Hb={}));class zg{constructor({apiKey:t,authReferrerPolicy:r,channel:n,client:a,id:s="__googleMapsScriptId",language:o,libraries:l=[],mapIds:c,nonce:u,region:d,retries:f=3,url:A="https://maps.googleapis.com/maps/api/js",version:m}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=n,this.client=a,this.id=s||"__googleMapsScriptId",this.language=o,this.libraries=l,this.mapIds=c,this.nonce=u,this.region=d,this.retries=f,this.url=A,this.version=m,zg.instance){if(!vxt(this.options,zg.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(zg.instance.options)}`);return zg.instance}zg.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?Hb.FAILURE:this.done?Hb.SUCCESS:this.loading?Hb.LOADING:Hb.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(n=>{n?r(n.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),r=document.createElement("script");r.id=this.id,r.type="text/javascript",r.src=t,r.onerror=this.loadErrorCallback.bind(this),r.defer=!0,r.async=!0,this.nonce&&(r.nonce=this.nonce),document.head.appendChild(r)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var bxt=function(e,t,r){var n,a=e.bounds,s=e.location,o=function(c,u){var d={};for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&u.indexOf(f)<0&&(d[f]=c[f]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var A=0;for(f=Object.getOwnPropertySymbols(c);A<f.length;A++)u.indexOf(f[A])<0&&Object.prototype.propertyIsEnumerable.call(c,f[A])&&(d[f[A]]=c[f[A]])}return d}(e,["bounds","location"]),l=vx({input:t},o);return r&&(l.sessionToken=r),a&&(l.bounds=new((n=google.maps.LatLngBounds).bind.apply(n,function(){for(var c=0,u=0,d=arguments.length;u<d;u++)c+=arguments[u].length;var f=Array(c),A=0;for(u=0;u<d;u++)for(var m=arguments[u],g=0,x=m.length;g<x;g++,A++)f[A]=m[g];return f}([void 0],a)))),s&&(l.location=new google.maps.LatLng(s)),l},yxt=function(e){var t=e.autocompletionRequest,r=e.debounce,n=e.minLengthAutocomplete,a=e.placesService,s=e.sessionToken,o=e.withSessionToken,l=function(c,u,d){d===void 0&&(d={});var f=d.maxWait,A=w.useRef(null),m=w.useRef([]),g=d.leading,x=d.trailing===void 0||d.trailing,v=w.useRef(!1),y=w.useRef(null),N=w.useRef(!1),C=w.useRef(c);C.current=c;var _=w.useCallback(function(){clearTimeout(y.current),clearTimeout(A.current),A.current=null,m.current=[],y.current=null,v.current=!1},[]);w.useEffect(function(){return N.current=!1,function(){N.current=!0}},[]);var j=w.useCallback(function(){for(var T=[],k=0;k<arguments.length;k++)T[k]=arguments[k];m.current=T,clearTimeout(y.current),v.current&&(v.current=!1),y.current||!g||v.current||(C.current.apply(C,T),v.current=!0),y.current=setTimeout(function(){var B=!0;g&&v.current&&(B=!1),_(),!N.current&&x&&B&&C.current.apply(C,T)},u),f&&!A.current&&x&&(A.current=setTimeout(function(){var B=m.current;_(),N.current||C.current.apply(null,B)},f))},[f,u,_,g,x]),I=w.useCallback(function(){y.current&&(C.current.apply(null,m.current),_())},[_]);return[j,_,I]}(function(c,u){if(!a)return u([]);if(c.length<n)return u([]);var d=vx({},t);a.getPlacePredictions(bxt(d,c,o&&s),function(f){u((f||[]).map(function(A){return{label:A.description,value:A}}))})},r)[0];return l},hte=w.forwardRef(function(e,t){var r,n,a,s,o,l,c,u,d=function(x){var v=x.apiKey,y=x.apiOptions,N=x.onLoadFailed,C=w.useState(void 0),_=C[0],j=C[1],I=w.useState(void 0),T=I[0],k=I[1],B=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");j(new window.google.maps.places.AutocompleteService),k(new google.maps.places.AutocompleteSessionToken)};return w.useEffect(function(){v?Ept(void 0,void 0,void 0,function(){var M;return jpt(this,function(P){switch(P.label){case 0:if(!v)return[2];P.label=1;case 1:return P.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new zg(vx({apiKey:v},vx({libraries:["places"]},y))).load()];case 2:P.sent(),P.label=3;case 3:return B(),[3,5];case 4:return M=P.sent(),typeof N=="function"&&N(M),[3,5];case 5:return[2]}})}):B()},[]),{placesService:_,sessionToken:T,setSessionToken:k}}({apiKey:(r=e.apiKey)!==null&&r!==void 0?r:"",apiOptions:(n=e.apiOptions)!==null&&n!==void 0?n:{},onLoadFailed:(a=e.onLoadFailed)!==null&&a!==void 0?a:console.error}),f=d.placesService,A=d.sessionToken,m=d.setSessionToken,g=yxt({autocompletionRequest:(s=e.autocompletionRequest)!==null&&s!==void 0?s:{},debounce:(o=e.debounce)!==null&&o!==void 0?o:300,minLengthAutocomplete:(l=e.minLengthAutocomplete)!==null&&l!==void 0?l:0,placesService:f,sessionToken:A,withSessionToken:(c=e.withSessionToken)!==null&&c!==void 0&&c});return w.useImperativeHandle(t,function(){return{getSessionToken:function(){return A},refreshSessionToken:function(){m(new google.maps.places.AutocompleteSessionToken)}}},[A]),ft.createElement(xxt,vx({},(u=e.selectProps)!==null&&u!==void 0?u:{},{loadOptions:g,getOptionValue:function(x){return x.value.place_id}}))});/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var OL=function(e,t){return OL=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},OL(e,t)};function $f(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");OL(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var PL=function(){return PL=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},PL.apply(this,arguments)};function Kl(e,t,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(e,[])).next())})}function Al(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function zk(e,t,r){if(arguments.length===2)for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||t)}var OA=function(){function e(t,r,n,a){this.left=t,this.top=r,this.width=n,this.height=a}return e.prototype.add=function(t,r,n,a){return new e(this.left+t,this.top+r,this.width+n,this.height+a)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),eB=function(e,t){return OA.fromClientRect(e,t.getBoundingClientRect())},wxt=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),a=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new OA(0,0,n,a)},tB=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},di=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var o=e[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},Ate="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nxt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Gk=0;Gk<Ate.length;Gk++)Nxt[Ate.charCodeAt(Gk)]=Gk;var mte="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T2=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var qk=0;qk<mte.length;qk++)T2[mte.charCodeAt(qk)]=qk;var Cxt=function(e){var t=e.length*.75,r=e.length,n,a=0,s,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=T2[e.charCodeAt(n)],o=T2[e.charCodeAt(n+1)],l=T2[e.charCodeAt(n+2)],c=T2[e.charCodeAt(n+3)],d[a++]=s<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},Ext=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},jxt=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},wx=5,OH=11,JO=2,kxt=OH-wx,Lge=65536>>wx,Sxt=1<<wx,ZO=Sxt-1,_xt=1024>>wx,Txt=Lge+_xt,Bxt=Txt,Ixt=32,Dxt=Bxt+Ixt,Oxt=65536>>OH,Pxt=1<<kxt,Fxt=Pxt-1,pte=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},Rxt=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},Lxt=function(e,t){var r=Cxt(e),n=Array.isArray(r)?jxt(r):new Uint32Array(r),a=Array.isArray(r)?Ext(r):new Uint16Array(r),s=24,o=pte(a,s/2,n[4]/2),l=n[5]===2?pte(a,(s+n[4])/2):Rxt(n,Math.ceil((s+n[4])/4));return new Mxt(n[0],n[1],n[2],n[3],o,l)},Mxt=function(){function e(t,r,n,a,s,o){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=o}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>wx],r=(r<<JO)+(t&ZO),this.data[r];if(t<=65535)return r=this.index[Lge+(t-55296>>wx)],r=(r<<JO)+(t&ZO),this.data[r];if(t<this.highStart)return r=Dxt-Oxt+(t>>OH),r=this.index[r],r+=t>>wx&Fxt,r=this.index[r],r=(r<<JO)+(t&ZO),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),gte="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Uxt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Kk=0;Kk<gte.length;Kk++)Uxt[gte.charCodeAt(Kk)]=Kk;var Hxt="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",xte=50,Qxt=1,Mge=2,Uge=3,Vxt=4,$xt=5,vte=7,Hge=8,bte=9,rp=10,FL=11,yte=12,RL=13,zxt=14,B2=15,LL=16,Wk=17,n2=18,Gxt=19,wte=20,ML=21,a2=22,eP=23,ub=24,hu=25,I2=26,D2=27,db=28,qxt=29,Gg=30,Kxt=31,Xk=32,Yk=33,UL=34,HL=35,QL=36,NC=37,VL=38,s5=39,i5=40,tP=41,Qge=42,Wxt=43,Xxt=[9001,65288],Vge="!",Tn="",Jk="",$L=Lxt(Hxt),U0=[Gg,QL],zL=[Qxt,Mge,Uge,$xt],$ge=[rp,Hge],Nte=[D2,I2],Yxt=zL.concat($ge),Cte=[VL,s5,i5,UL,HL],Jxt=[B2,RL],Zxt=function(e,t){t===void 0&&(t="strict");var r=[],n=[],a=[];return e.forEach(function(s,o){var l=$L.get(s);if(l>xte?(a.push(!0),l-=xte):a.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(o),r.push(LL);if(l===Vxt||l===FL){if(o===0)return n.push(o),r.push(Gg);var c=r[o-1];return Yxt.indexOf(c)===-1?(n.push(n[o-1]),r.push(c)):(n.push(o),r.push(Gg))}if(n.push(o),l===Kxt)return r.push(t==="strict"?ML:NC);if(l===Qge||l===qxt)return r.push(Gg);if(l===Wxt)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(NC):r.push(Gg);r.push(l)}),[n,r,a]},rP=function(e,t,r,n){var a=n[r];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var s=r;s<=n.length;){s++;var o=n[s];if(o===t)return!0;if(o!==rp)break}if(a===rp)for(var s=r;s>0;){s--;var l=n[s];if(Array.isArray(e)?e.indexOf(l)!==-1:e===l)for(var c=r;c<=n.length;){c++;var o=n[c];if(o===t)return!0;if(o!==rp)break}if(l!==rp)break}return!1},Ete=function(e,t){for(var r=e;r>=0;){var n=t[r];if(n===rp)r--;else return n}return 0},evt=function(e,t,r,n,a){if(r[n]===0)return Tn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return Tn;var o=s-1,l=s+1,c=t[s],u=o>=0?t[o]:0,d=t[l];if(c===Mge&&d===Uge)return Tn;if(zL.indexOf(c)!==-1)return Vge;if(zL.indexOf(d)!==-1||$ge.indexOf(d)!==-1)return Tn;if(Ete(s,t)===Hge)return Jk;if($L.get(e[s])===FL||(c===Xk||c===Yk)&&$L.get(e[l])===FL||c===vte||d===vte||c===bte||[rp,RL,B2].indexOf(c)===-1&&d===bte||[Wk,n2,Gxt,ub,db].indexOf(d)!==-1||Ete(s,t)===a2||rP(eP,a2,s,t)||rP([Wk,n2],ML,s,t)||rP(yte,yte,s,t))return Tn;if(c===rp)return Jk;if(c===eP||d===eP)return Tn;if(d===LL||c===LL)return Jk;if([RL,B2,ML].indexOf(d)!==-1||c===zxt||u===QL&&Jxt.indexOf(c)!==-1||c===db&&d===QL||d===wte||U0.indexOf(d)!==-1&&c===hu||U0.indexOf(c)!==-1&&d===hu||c===D2&&[NC,Xk,Yk].indexOf(d)!==-1||[NC,Xk,Yk].indexOf(c)!==-1&&d===I2||U0.indexOf(c)!==-1&&Nte.indexOf(d)!==-1||Nte.indexOf(c)!==-1&&U0.indexOf(d)!==-1||[D2,I2].indexOf(c)!==-1&&(d===hu||[a2,B2].indexOf(d)!==-1&&t[l+1]===hu)||[a2,B2].indexOf(c)!==-1&&d===hu||c===hu&&[hu,db,ub].indexOf(d)!==-1)return Tn;if([hu,db,ub,Wk,n2].indexOf(d)!==-1)for(var f=s;f>=0;){var A=t[f];if(A===hu)return Tn;if([db,ub].indexOf(A)!==-1)f--;else break}if([D2,I2].indexOf(d)!==-1)for(var f=[Wk,n2].indexOf(c)!==-1?o:s;f>=0;){var A=t[f];if(A===hu)return Tn;if([db,ub].indexOf(A)!==-1)f--;else break}if(VL===c&&[VL,s5,UL,HL].indexOf(d)!==-1||[s5,UL].indexOf(c)!==-1&&[s5,i5].indexOf(d)!==-1||[i5,HL].indexOf(c)!==-1&&d===i5||Cte.indexOf(c)!==-1&&[wte,I2].indexOf(d)!==-1||Cte.indexOf(d)!==-1&&c===D2||U0.indexOf(c)!==-1&&U0.indexOf(d)!==-1||c===ub&&U0.indexOf(d)!==-1||U0.concat(hu).indexOf(c)!==-1&&d===a2&&Xxt.indexOf(e[l])===-1||U0.concat(hu).indexOf(d)!==-1&&c===n2)return Tn;if(c===tP&&d===tP){for(var m=r[s],g=1;m>0&&(m--,t[m]===tP);)g++;if(g%2!==0)return Tn}return c===Xk&&d===Yk?Tn:Jk},tvt=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=Zxt(e,t.lineBreak),n=r[0],a=r[1],s=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(a=a.map(function(l){return[hu,Gg,Qge].indexOf(l)!==-1?NC:l}));var o=t.wordBreak==="keep-all"?s.map(function(l,c){return l&&e[c]>=19968&&e[c]<=40959}):void 0;return[n,a,o]},rvt=function(){function e(t,r,n,a){this.codePoints=t,this.required=r===Vge,this.start=n,this.end=a}return e.prototype.slice=function(){return di.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),nvt=function(e,t){var r=tB(e),n=tvt(r,t),a=n[0],s=n[1],o=n[2],l=r.length,c=0,u=0;return{next:function(){if(u>=l)return{done:!0,value:null};for(var d=Tn;u<l&&(d=evt(r,s,a,++u,o))===Tn;);if(d!==Tn||u===l){var f=new rvt(r,d,c,u);return c=u,{value:f,done:!1}}return{done:!0,value:null}}}},avt=1,svt=2,SE=4,jte=8,f4=10,kte=47,AN=92,ivt=9,ovt=32,Zk=34,s2=61,lvt=35,cvt=36,uvt=37,eS=39,tS=40,i2=41,dvt=95,Tc=45,fvt=33,hvt=60,Avt=62,mvt=64,pvt=91,gvt=93,xvt=61,vvt=123,rS=63,bvt=125,Ste=124,yvt=126,wvt=128,_te=65533,nP=42,rx=43,Nvt=44,Cvt=58,Evt=59,CC=46,jvt=0,kvt=8,Svt=11,_vt=14,Tvt=31,Bvt=127,yh=-1,zge=48,Gge=97,qge=101,Ivt=102,Dvt=117,Ovt=122,Kge=65,Wge=69,Xge=70,Pvt=85,Fvt=90,yl=function(e){return e>=zge&&e<=57},Rvt=function(e){return e>=55296&&e<=57343},fb=function(e){return yl(e)||e>=Kge&&e<=Xge||e>=Gge&&e<=Ivt},Lvt=function(e){return e>=Gge&&e<=Ovt},Mvt=function(e){return e>=Kge&&e<=Fvt},Uvt=function(e){return Lvt(e)||Mvt(e)},Hvt=function(e){return e>=wvt},nS=function(e){return e===f4||e===ivt||e===ovt},h4=function(e){return Uvt(e)||Hvt(e)||e===dvt},Tte=function(e){return h4(e)||yl(e)||e===Tc},Qvt=function(e){return e>=jvt&&e<=kvt||e===Svt||e>=_vt&&e<=Tvt||e===Bvt},Vm=function(e,t){return e!==AN?!1:t!==f4},aS=function(e,t,r){return e===Tc?h4(t)||Vm(t,r):h4(e)?!0:!!(e===AN&&Vm(e,t))},aP=function(e,t,r){return e===rx||e===Tc?yl(t)?!0:t===CC&&yl(r):yl(e===CC?t:e)},Vvt=function(e){var t=0,r=1;(e[t]===rx||e[t]===Tc)&&(e[t]===Tc&&(r=-1),t++);for(var n=[];yl(e[t]);)n.push(e[t++]);var a=n.length?parseInt(di.apply(void 0,n),10):0;e[t]===CC&&t++;for(var s=[];yl(e[t]);)s.push(e[t++]);var o=s.length,l=o?parseInt(di.apply(void 0,s),10):0;(e[t]===Wge||e[t]===qge)&&t++;var c=1;(e[t]===rx||e[t]===Tc)&&(e[t]===Tc&&(c=-1),t++);for(var u=[];yl(e[t]);)u.push(e[t++]);var d=u.length?parseInt(di.apply(void 0,u),10):0;return r*(a+l*Math.pow(10,-o))*Math.pow(10,c*d)},$vt={type:2},zvt={type:3},Gvt={type:4},qvt={type:13},Kvt={type:8},Wvt={type:21},Xvt={type:9},Yvt={type:10},Jvt={type:11},Zvt={type:12},ebt={type:14},sS={type:23},tbt={type:1},rbt={type:25},nbt={type:24},abt={type:26},sbt={type:27},ibt={type:28},obt={type:29},lbt={type:31},GL={type:32},Yge=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(tB(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==GL;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case Zk:return this.consumeStringToken(Zk);case lvt:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(Tte(r)||Vm(n,a)){var s=aS(r,n,a)?svt:avt,o=this.consumeName();return{type:5,value:o,flags:s}}break;case cvt:if(this.peekCodePoint(0)===s2)return this.consumeCodePoint(),qvt;break;case eS:return this.consumeStringToken(eS);case tS:return $vt;case i2:return zvt;case nP:if(this.peekCodePoint(0)===s2)return this.consumeCodePoint(),ebt;break;case rx:if(aP(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case Nvt:return Gvt;case Tc:var l=t,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(aP(l,c,u))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(aS(l,c,u))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(c===Tc&&u===Avt)return this.consumeCodePoint(),this.consumeCodePoint(),nbt;break;case CC:if(aP(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case kte:if(this.peekCodePoint(0)===nP)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===nP&&(d=this.consumeCodePoint(),d===kte))return this.consumeToken();if(d===yh)return this.consumeToken()}break;case Cvt:return abt;case Evt:return sbt;case hvt:if(this.peekCodePoint(0)===fvt&&this.peekCodePoint(1)===Tc&&this.peekCodePoint(2)===Tc)return this.consumeCodePoint(),this.consumeCodePoint(),rbt;break;case mvt:var f=this.peekCodePoint(0),A=this.peekCodePoint(1),m=this.peekCodePoint(2);if(aS(f,A,m)){var o=this.consumeName();return{type:7,value:o}}break;case pvt:return ibt;case AN:if(Vm(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case gvt:return obt;case xvt:if(this.peekCodePoint(0)===s2)return this.consumeCodePoint(),Kvt;break;case vvt:return Jvt;case bvt:return Zvt;case Dvt:case Pvt:var g=this.peekCodePoint(0),x=this.peekCodePoint(1);return g===rx&&(fb(x)||x===rS)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case Ste:if(this.peekCodePoint(0)===s2)return this.consumeCodePoint(),Xvt;if(this.peekCodePoint(0)===Ste)return this.consumeCodePoint(),Wvt;break;case yvt:if(this.peekCodePoint(0)===s2)return this.consumeCodePoint(),Yvt;break;case yh:return GL}return nS(t)?(this.consumeWhiteSpace(),lbt):yl(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):h4(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:di(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();fb(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var n=!1;r===rS&&t.length<6;)t.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(di.apply(void 0,t.map(function(c){return c===rS?zge:c})),16),s=parseInt(di.apply(void 0,t.map(function(c){return c===rS?Xge:c})),16);return{type:30,start:a,end:s}}var o=parseInt(di.apply(void 0,t),16);if(this.peekCodePoint(0)===Tc&&fb(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];fb(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var s=parseInt(di.apply(void 0,l),16);return{type:30,start:o,end:s}}else return{type:30,start:o,end:o}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===tS?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===tS?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===yh)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===eS||r===Zk){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===yh||this.peekCodePoint(0)===i2)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),sS)}for(;;){var a=this.consumeCodePoint();if(a===yh||a===i2)return{type:22,value:di.apply(void 0,t)};if(nS(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===yh||this.peekCodePoint(0)===i2?(this.consumeCodePoint(),{type:22,value:di.apply(void 0,t)}):(this.consumeBadUrlRemnants(),sS);if(a===Zk||a===eS||a===tS||Qvt(a))return this.consumeBadUrlRemnants(),sS;if(a===AN)if(Vm(a,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),sS;else t.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;nS(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===i2||t===yh)return;Vm(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,n="";t>0;){var a=Math.min(r,t);n+=di.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),n},e.prototype.consumeStringToken=function(t){var r="",n=0;do{var a=this._value[n];if(a===yh||a===void 0||a===t)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===f4)return this._value.splice(0,n),tbt;if(a===AN){var s=this._value[n+1];s!==yh&&s!==void 0&&(s===f4?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):Vm(a,s)&&(r+=this.consumeStringSlice(n),r+=di(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=SE,n=this.peekCodePoint(0);for((n===rx||n===Tc)&&t.push(this.consumeCodePoint());yl(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===CC&&yl(a))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=jte;yl(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===Wge||n===qge)&&((a===rx||a===Tc)&&yl(s)||yl(a)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=jte;yl(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[Vvt(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],n=t[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),o=this.peekCodePoint(2);if(aS(a,s,o)){var l=this.consumeName();return{type:15,number:r,flags:n,unit:l}}return a===uvt?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(fb(t)){for(var r=di(t);fb(this.peekCodePoint(0))&&r.length<6;)r+=di(this.consumeCodePoint());nS(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||Rvt(n)||n>1114111?_te:n}return t===yh?_te:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(Tte(r))t+=di(r);else if(Vm(r,this.peekCodePoint(0)))t+=di(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),Jge=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new Yge;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},n=this.consumeToken();;){if(n.type===32||ubt(n,t))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?GL:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),_E=function(e){return e.type===15},zy=function(e){return e.type===17},Oa=function(e){return e.type===20},cbt=function(e){return e.type===0},qL=function(e,t){return Oa(e)&&e.value===t},Zge=function(e){return e.type!==31},ay=function(e){return e.type!==31&&e.type!==4},u0=function(e){var t=[],r=[];return e.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&t.push(r),t},ubt=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},Fp=function(e){return e.type===17||e.type===15},Di=function(e){return e.type===16||Fp(e)},exe=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Go={type:17,number:0,flags:SE},PH={type:16,number:50,flags:SE},np={type:16,number:100,flags:SE},O2=function(e,t,r){var n=e[0],a=e[1];return[qa(n,t),qa(typeof a<"u"?a:n,r)]},qa=function(e,t){if(e.type===16)return e.number/100*t;if(_E(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},txe="deg",rxe="grad",nxe="rad",axe="turn",rB={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case txe:return Math.PI*t.number/180;case rxe:return Math.PI/200*t.number;case nxe:return t.number;case axe:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},sxe=function(e){return e.type===15&&(e.unit===txe||e.unit===rxe||e.unit===nxe||e.unit===axe)},ixe=function(e){var t=e.filter(Oa).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Go,Go];case"to top":case"bottom":return Sd(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Go,np];case"to right":case"left":return Sd(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[np,np];case"to bottom":case"top":return Sd(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[np,Go];case"to left":case"right":return Sd(270)}return 0},Sd=function(e){return Math.PI*e/180},gp={name:"color",parse:function(e,t){if(t.type===18){var r=dbt[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3);return ap(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(t.value.length===4){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3),o=t.value.substring(3,4);return ap(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(o+o,16)/255)}if(t.value.length===6){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6);return ap(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(t.value.length===8){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6),o=t.value.substring(6,8);return ap(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(o,16)/255)}}if(t.type===20){var l=hA[t.value.toUpperCase()];if(typeof l<"u")return l}return hA.TRANSPARENT}},xp=function(e){return(255&e)===0},oo=function(e){var t=255&e,r=255&e>>8,n=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+n+","+r+","+t/255+")":"rgb("+a+","+n+","+r+")"},ap=function(e,t,r,n){return(e<<24|t<<16|r<<8|Math.round(n*255)<<0)>>>0},Bte=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},Ite=function(e,t){var r=t.filter(ay);if(r.length===3){var n=r.map(Bte),a=n[0],s=n[1],o=n[2];return ap(a,s,o,1)}if(r.length===4){var l=r.map(Bte),a=l[0],s=l[1],o=l[2],c=l[3];return ap(a,s,o,c)}return 0};function sP(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var Dte=function(e,t){var r=t.filter(ay),n=r[0],a=r[1],s=r[2],o=r[3],l=(n.type===17?Sd(n.number):rB.parse(e,n))/(Math.PI*2),c=Di(a)?a.number/100:0,u=Di(s)?s.number/100:0,d=typeof o<"u"&&Di(o)?qa(o,1):1;if(c===0)return ap(u*255,u*255,u*255,1);var f=u<=.5?u*(c+1):u+c-u*c,A=u*2-f,m=sP(A,f,l+1/3),g=sP(A,f,l),x=sP(A,f,l-1/3);return ap(m*255,g*255,x*255,d)},dbt={hsl:Dte,hsla:Dte,rgb:Ite,rgba:Ite},mN=function(e,t){return gp.parse(e,Jge.create(t).parseComponentValue())},hA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},fbt={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(Oa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},hbt={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},nB=function(e,t){var r=gp.parse(e,t[0]),n=t[1];return n&&Di(n)?{color:r,stop:n}:{color:r,stop:null}},Ote=function(e,t){var r=e[0],n=e[e.length-1];r.stop===null&&(r.stop=Go),n.stop===null&&(n.stop=np);for(var a=[],s=0,o=0;o<e.length;o++){var l=e[o].stop;if(l!==null){var c=qa(l,t);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,o=0;o<a.length;o++){var d=a[o];if(d===null)u===null&&(u=o);else if(u!==null){for(var f=o-u,A=a[u-1],m=(d-A)/(f+1),g=1;g<=f;g++)a[u+g-1]=m*g;u=null}}return e.map(function(x,v){var y=x.color;return{color:y,stop:Math.max(Math.min(1,a[v]/t),0)}})},Abt=function(e,t,r){var n=t/2,a=r/2,s=qa(e[0],t)-n,o=a-qa(e[1],r);return(Math.atan2(o,s)+Math.PI*2)%(Math.PI*2)},mbt=function(e,t,r){var n=typeof e=="number"?e:Abt(e,t,r),a=Math.abs(t*Math.sin(n))+Math.abs(r*Math.cos(n)),s=t/2,o=r/2,l=a/2,c=Math.sin(n-Math.PI/2)*l,u=Math.cos(n-Math.PI/2)*l;return[a,s-u,s+u,o-c,o+c]},ff=function(e,t){return Math.sqrt(e*e+t*t)},Pte=function(e,t,r,n,a){var s=[[0,0],[0,t],[e,0],[e,t]];return s.reduce(function(o,l){var c=l[0],u=l[1],d=ff(r-c,n-u);return(a?d<o.optimumDistance:d>o.optimumDistance)?{optimumCorner:l,optimumDistance:d}:o},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},pbt=function(e,t,r,n,a){var s=0,o=0;switch(e.size){case 0:e.shape===0?s=o=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.min(Math.abs(t),Math.abs(t-n)),o=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(e.shape===0)s=o=Math.min(ff(t,r),ff(t,r-a),ff(t-n,r),ff(t-n,r-a));else if(e.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(t),Math.abs(t-n)),c=Pte(n,a,t,r,!0),u=c[0],d=c[1];s=ff(u-t,(d-r)/l),o=l*s}break;case 1:e.shape===0?s=o=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.max(Math.abs(t),Math.abs(t-n)),o=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(e.shape===0)s=o=Math.max(ff(t,r),ff(t,r-a),ff(t-n,r),ff(t-n,r-a));else if(e.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(t),Math.abs(t-n)),f=Pte(n,a,t,r,!1),u=f[0],d=f[1];s=ff(u-t,(d-r)/l),o=l*s}break}return Array.isArray(e.size)&&(s=qa(e.size[0],n),o=e.size.length===2?qa(e.size[1],a):s),[s,o]},gbt=function(e,t){var r=Sd(180),n=[];return u0(t).forEach(function(a,s){if(s===0){var o=a[0];if(o.type===20&&o.value==="to"){r=ixe(a);return}else if(sxe(o)){r=rB.parse(e,o);return}}var l=nB(e,a);n.push(l)}),{angle:r,stops:n,type:1}},iS=function(e,t){var r=Sd(180),n=[];return u0(t).forEach(function(a,s){if(s===0){var o=a[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){r=ixe(a);return}else if(sxe(o)){r=(rB.parse(e,o)+Sd(270))%Sd(360);return}}var l=nB(e,a);n.push(l)}),{angle:r,stops:n,type:1}},xbt=function(e,t){var r=Sd(180),n=[],a=1,s=0,o=3,l=[];return u0(t).forEach(function(c,u){var d=c[0];if(u===0){if(Oa(d)&&d.value==="linear"){a=1;return}else if(Oa(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var f=gp.parse(e,d.values[0]);n.push({stop:Go,color:f})}else if(d.name==="to"){var f=gp.parse(e,d.values[0]);n.push({stop:np,color:f})}else if(d.name==="color-stop"){var A=d.values.filter(ay);if(A.length===2){var f=gp.parse(e,A[1]),m=A[0];zy(m)&&n.push({stop:{type:16,number:m.number*100,flags:m.flags},color:f})}}}}),a===1?{angle:(r+Sd(180))%Sd(360),stops:n,type:a}:{size:o,shape:s,stops:n,position:l,type:a}},oxe="closest-side",lxe="farthest-side",cxe="closest-corner",uxe="farthest-corner",dxe="circle",fxe="ellipse",hxe="cover",Axe="contain",vbt=function(e,t){var r=0,n=3,a=[],s=[];return u0(t).forEach(function(o,l){var c=!0;if(l===0){var u=!1;c=o.reduce(function(f,A){if(u)if(Oa(A))switch(A.value){case"center":return s.push(PH),f;case"top":case"left":return s.push(Go),f;case"right":case"bottom":return s.push(np),f}else(Di(A)||Fp(A))&&s.push(A);else if(Oa(A))switch(A.value){case dxe:return r=0,!1;case fxe:return r=1,!1;case"at":return u=!0,!1;case oxe:return n=0,!1;case hxe:case lxe:return n=1,!1;case Axe:case cxe:return n=2,!1;case uxe:return n=3,!1}else if(Fp(A)||Di(A))return Array.isArray(n)||(n=[]),n.push(A),!1;return f},c)}if(c){var d=nB(e,o);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},oS=function(e,t){var r=0,n=3,a=[],s=[];return u0(t).forEach(function(o,l){var c=!0;if(l===0?c=o.reduce(function(d,f){if(Oa(f))switch(f.value){case"center":return s.push(PH),!1;case"top":case"left":return s.push(Go),!1;case"right":case"bottom":return s.push(np),!1}else if(Di(f)||Fp(f))return s.push(f),!1;return d},c):l===1&&(c=o.reduce(function(d,f){if(Oa(f))switch(f.value){case dxe:return r=0,!1;case fxe:return r=1,!1;case Axe:case oxe:return n=0,!1;case lxe:return n=1,!1;case cxe:return n=2,!1;case hxe:case uxe:return n=3,!1}else if(Fp(f)||Di(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},c)),c){var u=nB(e,o);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},bbt=function(e){return e.type===1},ybt=function(e){return e.type===2},FH={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var n=mxe[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function wbt(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!mxe[e.name])}var mxe={"linear-gradient":gbt,"-moz-linear-gradient":iS,"-ms-linear-gradient":iS,"-o-linear-gradient":iS,"-webkit-linear-gradient":iS,"radial-gradient":vbt,"-moz-radial-gradient":oS,"-ms-radial-gradient":oS,"-o-radial-gradient":oS,"-webkit-radial-gradient":oS,"-webkit-gradient":xbt},Nbt={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(n){return ay(n)&&wbt(n)}).map(function(n){return FH.parse(e,n)})}},Cbt={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(Oa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Ebt={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return u0(t).map(function(r){return r.filter(Di)}).map(exe)}},jbt={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return u0(t).map(function(r){return r.filter(Oa).map(function(n){return n.value}).join(" ")}).map(kbt)}},kbt=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},b1;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(b1||(b1={}));var Sbt={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return u0(t).map(function(r){return r.filter(_bt)})}},_bt=function(e){return Oa(e)||Di(e)},aB=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Tbt=aB("top"),Bbt=aB("right"),Ibt=aB("bottom"),Dbt=aB("left"),sB=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return exe(r.filter(Di))}}},Obt=sB("top-left"),Pbt=sB("top-right"),Fbt=sB("bottom-right"),Rbt=sB("bottom-left"),iB=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Lbt=iB("top"),Mbt=iB("right"),Ubt=iB("bottom"),Hbt=iB("left"),oB=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return _E(r)?r.number:0}}},Qbt=oB("top"),Vbt=oB("right"),$bt=oB("bottom"),zbt=oB("left"),Gbt={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},qbt={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},Kbt={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(Oa).reduce(function(r,n){return r|Wbt(n.value)},0)}},Wbt=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Xbt={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Ybt={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},A4;(function(e){e.NORMAL="normal",e.STRICT="strict"})(A4||(A4={}));var Jbt={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return A4.STRICT;case"normal":default:return A4.NORMAL}}},Zbt={name:"line-height",initialValue:"normal",prefix:!1,type:4},Fte=function(e,t){return Oa(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:Di(e)?qa(e,t):t},e1t={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:FH.parse(e,t)}},t1t={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},KL={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},lB=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},r1t=lB("top"),n1t=lB("right"),a1t=lB("bottom"),s1t=lB("left"),i1t={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(Oa).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},o1t={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},cB=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},l1t=cB("top"),c1t=cB("right"),u1t=cB("bottom"),d1t=cB("left"),f1t={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},h1t={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},A1t={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&qL(t[0],"none")?[]:u0(t).map(function(r){for(var n={color:hA.TRANSPARENT,offsetX:Go,offsetY:Go,blur:Go},a=0,s=0;s<r.length;s++){var o=r[s];Fp(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:n.blur=o,a++):n.color=gp.parse(e,o)}return n})}},m1t={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},p1t={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=v1t[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},g1t=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},x1t=function(e){var t=e.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=t[0],n=t[1];t[2],t[3];var a=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var o=t[12],l=t[13];return t[14],t[15],t.length===16?[r,n,a,s,o,l]:null},v1t={matrix:g1t,matrix3d:x1t},Rte={type:16,number:50,flags:SE},b1t=[Rte,Rte],y1t={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(Di);return r.length!==2?b1t:[r[0],r[1]]}},w1t={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},pN;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(pN||(pN={}));var N1t={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return pN.BREAK_ALL;case"keep-all":return pN.KEEP_ALL;case"normal":default:return pN.NORMAL}}},C1t={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(zy(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},pxe={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},E1t={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return zy(t)?t.number:1}},j1t={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},k1t={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(Oa).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},S1t={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],n=[];return t.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},_1t={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},T1t={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(zy(t))return t.number;if(Oa(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},B1t={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(Oa).map(function(r){return r.value})}},I1t={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Qi=function(e,t){return(e&t)!==0},D1t={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},O1t={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=t.filter(Zge),s=0;s<a.length;s++){var o=a[s],l=a[s+1];if(o.type===20){var c=l&&zy(l)?l.number:1;n.push({counter:o.value,increment:c})}}return n}},P1t={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],n=t.filter(Zge),a=0;a<n.length;a++){var s=n[a],o=n[a+1];if(Oa(s)&&s.value!=="none"){var l=o&&zy(o)?o.number:0;r.push({counter:s.value,reset:l})}}return r}},F1t={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(_E).map(function(r){return pxe.parse(e,r)})}},R1t={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var n=[],a=t.filter(cbt);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var o=a[s].value,l=a[s+1].value;n.push({open:o,close:l})}return n}},Lte=function(e,t,r){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?r?n.open:n.close:""},L1t={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&qL(t[0],"none")?[]:u0(t).map(function(r){for(var n={color:255,offsetX:Go,offsetY:Go,blur:Go,spread:Go,inset:!1},a=0,s=0;s<r.length;s++){var o=r[s];qL(o,"inset")?n.inset=!0:Fp(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:a===2?n.blur=o:n.spread=o,a++):n.color=gp.parse(e,o)}return n})}},M1t={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],n=[];return t.filter(Oa).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},U1t={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},H1t={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return _E(t)?t.number:0}},Q1t=function(){function e(t,r){var n,a;this.animationDuration=mr(t,F1t,r.animationDuration),this.backgroundClip=mr(t,fbt,r.backgroundClip),this.backgroundColor=mr(t,hbt,r.backgroundColor),this.backgroundImage=mr(t,Nbt,r.backgroundImage),this.backgroundOrigin=mr(t,Cbt,r.backgroundOrigin),this.backgroundPosition=mr(t,Ebt,r.backgroundPosition),this.backgroundRepeat=mr(t,jbt,r.backgroundRepeat),this.backgroundSize=mr(t,Sbt,r.backgroundSize),this.borderTopColor=mr(t,Tbt,r.borderTopColor),this.borderRightColor=mr(t,Bbt,r.borderRightColor),this.borderBottomColor=mr(t,Ibt,r.borderBottomColor),this.borderLeftColor=mr(t,Dbt,r.borderLeftColor),this.borderTopLeftRadius=mr(t,Obt,r.borderTopLeftRadius),this.borderTopRightRadius=mr(t,Pbt,r.borderTopRightRadius),this.borderBottomRightRadius=mr(t,Fbt,r.borderBottomRightRadius),this.borderBottomLeftRadius=mr(t,Rbt,r.borderBottomLeftRadius),this.borderTopStyle=mr(t,Lbt,r.borderTopStyle),this.borderRightStyle=mr(t,Mbt,r.borderRightStyle),this.borderBottomStyle=mr(t,Ubt,r.borderBottomStyle),this.borderLeftStyle=mr(t,Hbt,r.borderLeftStyle),this.borderTopWidth=mr(t,Qbt,r.borderTopWidth),this.borderRightWidth=mr(t,Vbt,r.borderRightWidth),this.borderBottomWidth=mr(t,$bt,r.borderBottomWidth),this.borderLeftWidth=mr(t,zbt,r.borderLeftWidth),this.boxShadow=mr(t,L1t,r.boxShadow),this.color=mr(t,Gbt,r.color),this.direction=mr(t,qbt,r.direction),this.display=mr(t,Kbt,r.display),this.float=mr(t,Xbt,r.cssFloat),this.fontFamily=mr(t,S1t,r.fontFamily),this.fontSize=mr(t,_1t,r.fontSize),this.fontStyle=mr(t,I1t,r.fontStyle),this.fontVariant=mr(t,B1t,r.fontVariant),this.fontWeight=mr(t,T1t,r.fontWeight),this.letterSpacing=mr(t,Ybt,r.letterSpacing),this.lineBreak=mr(t,Jbt,r.lineBreak),this.lineHeight=mr(t,Zbt,r.lineHeight),this.listStyleImage=mr(t,e1t,r.listStyleImage),this.listStylePosition=mr(t,t1t,r.listStylePosition),this.listStyleType=mr(t,KL,r.listStyleType),this.marginTop=mr(t,r1t,r.marginTop),this.marginRight=mr(t,n1t,r.marginRight),this.marginBottom=mr(t,a1t,r.marginBottom),this.marginLeft=mr(t,s1t,r.marginLeft),this.opacity=mr(t,E1t,r.opacity);var s=mr(t,i1t,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=mr(t,o1t,r.overflowWrap),this.paddingTop=mr(t,l1t,r.paddingTop),this.paddingRight=mr(t,c1t,r.paddingRight),this.paddingBottom=mr(t,u1t,r.paddingBottom),this.paddingLeft=mr(t,d1t,r.paddingLeft),this.paintOrder=mr(t,M1t,r.paintOrder),this.position=mr(t,h1t,r.position),this.textAlign=mr(t,f1t,r.textAlign),this.textDecorationColor=mr(t,j1t,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=mr(t,k1t,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=mr(t,A1t,r.textShadow),this.textTransform=mr(t,m1t,r.textTransform),this.transform=mr(t,p1t,r.transform),this.transformOrigin=mr(t,y1t,r.transformOrigin),this.visibility=mr(t,w1t,r.visibility),this.webkitTextStrokeColor=mr(t,U1t,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=mr(t,H1t,r.webkitTextStrokeWidth),this.wordBreak=mr(t,N1t,r.wordBreak),this.zIndex=mr(t,C1t,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return xp(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return Qi(this.display,4)||Qi(this.display,33554432)||Qi(this.display,268435456)||Qi(this.display,536870912)||Qi(this.display,67108864)||Qi(this.display,134217728)},e}(),V1t=function(){function e(t,r){this.content=mr(t,D1t,r.content),this.quotes=mr(t,R1t,r.quotes)}return e}(),Mte=function(){function e(t,r){this.counterIncrement=mr(t,O1t,r.counterIncrement),this.counterReset=mr(t,P1t,r.counterReset)}return e}(),mr=function(e,t,r){var n=new Yge,a=r!==null&&typeof r<"u"?r.toString():t.initialValue;n.write(a);var s=new Jge(n.read());switch(t.type){case 2:var o=s.parseComponentValue();return t.parse(e,Oa(o)?o.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return rB.parse(e,s.parseComponentValue());case"color":return gp.parse(e,s.parseComponentValue());case"image":return FH.parse(e,s.parseComponentValue());case"length":var l=s.parseComponentValue();return Fp(l)?l:Go;case"length-percentage":var c=s.parseComponentValue();return Di(c)?c:Go;case"time":return pxe.parse(e,s.parseComponentValue())}break}},$1t="data-html2canvas-debug",z1t=function(e){var t=e.getAttribute($1t);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},WL=function(e,t){var r=z1t(e);return r===1||t===r},d0=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,WL(r,3))debugger;this.styles=new Q1t(t,window.getComputedStyle(r,null)),JL(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=eB(this.context,r),WL(r,4)&&(this.flags|=16)}return e}(),G1t="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Ute="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P2=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var lS=0;lS<Ute.length;lS++)P2[Ute.charCodeAt(lS)]=lS;var q1t=function(e){var t=e.length*.75,r=e.length,n,a=0,s,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=P2[e.charCodeAt(n)],o=P2[e.charCodeAt(n+1)],l=P2[e.charCodeAt(n+2)],c=P2[e.charCodeAt(n+3)],d[a++]=s<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},K1t=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},W1t=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},Nx=5,RH=11,iP=2,X1t=RH-Nx,gxe=65536>>Nx,Y1t=1<<Nx,oP=Y1t-1,J1t=1024>>Nx,Z1t=gxe+J1t,eyt=Z1t,tyt=32,ryt=eyt+tyt,nyt=65536>>RH,ayt=1<<X1t,syt=ayt-1,Hte=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},iyt=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},oyt=function(e,t){var r=q1t(e),n=Array.isArray(r)?W1t(r):new Uint32Array(r),a=Array.isArray(r)?K1t(r):new Uint16Array(r),s=24,o=Hte(a,s/2,n[4]/2),l=n[5]===2?Hte(a,(s+n[4])/2):iyt(n,Math.ceil((s+n[4])/4));return new lyt(n[0],n[1],n[2],n[3],o,l)},lyt=function(){function e(t,r,n,a,s,o){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=o}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Nx],r=(r<<iP)+(t&oP),this.data[r];if(t<=65535)return r=this.index[gxe+(t-55296>>Nx)],r=(r<<iP)+(t&oP),this.data[r];if(t<this.highStart)return r=ryt-nyt+(t>>RH),r=this.index[r],r+=t>>Nx&syt,r=this.index[r],r=(r<<iP)+(t&oP),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),Qte="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cyt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var cS=0;cS<Qte.length;cS++)cyt[Qte.charCodeAt(cS)]=cS;var uyt=1,lP=2,cP=3,Vte=4,$te=5,dyt=7,zte=8,uP=9,dP=10,Gte=11,qte=12,Kte=13,Wte=14,fP=15,fyt=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},hyt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var o=e[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},Ayt=oyt(G1t),xd="",hP="",myt=function(e){return Ayt.get(e)},pyt=function(e,t,r){var n=r-2,a=t[n],s=t[r-1],o=t[r];if(s===lP&&o===cP)return xd;if(s===lP||s===cP||s===Vte||o===lP||o===cP||o===Vte)return hP;if(s===zte&&[zte,uP,Gte,qte].indexOf(o)!==-1||(s===Gte||s===uP)&&(o===uP||o===dP)||(s===qte||s===dP)&&o===dP||o===Kte||o===$te||o===dyt||s===uyt)return xd;if(s===Kte&&o===Wte){for(;a===$te;)a=t[--n];if(a===Wte)return xd}if(s===fP&&o===fP){for(var l=0;a===fP;)l++,a=t[--n];if(l%2===0)return xd}return hP},gyt=function(e){var t=fyt(e),r=t.length,n=0,a=0,s=t.map(myt);return{next:function(){if(n>=r)return{done:!0,value:null};for(var o=xd;n<r&&(o=pyt(t,s,++n))===xd;);if(o!==xd||n===r){var l=hyt.apply(null,t.slice(a,n));return a=n,{value:l,done:!1}}return{done:!0,value:null}}}},xyt=function(e){for(var t=gyt(e),r=[],n;!(n=t.next()).done;)n.value&&r.push(n.value.slice());return r},vyt=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=t+"px",n.style.display="block",e.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(e.body.removeChild(n),s===t)return!0}}return!1},byt=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=t.firstChild,a=tB(n.data).map(function(c){return di(c)}),s=0,o={},l=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var f=d.x>o.x||d.y>o.y;return o=d,u===0?!0:f});return e.body.removeChild(t),l},yyt=function(){return typeof new Image().crossOrigin<"u"},wyt=function(){return typeof new XMLHttpRequest().responseType=="string"},Nyt=function(e){var t=new Image,r=e.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},Xte=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},Cyt=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=t.toDataURL();a.src=s;var o=XL(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),Yte(o).then(function(l){n.drawImage(l,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=e.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",Xte(c)?Yte(XL(r,r,0,0,u)):Promise.reject(!1)}).then(function(l){return n.drawImage(l,0,0),Xte(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},XL=function(e,t,r,n,a){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject");return o.setAttributeNS(null,"width",e.toString()),o.setAttributeNS(null,"height",t.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(l),l.appendChild(a),o},Yte=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Lo={get SUPPORT_RANGE_BOUNDS(){var e=vyt(document);return Object.defineProperty(Lo,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Lo.SUPPORT_RANGE_BOUNDS&&byt(document);return Object.defineProperty(Lo,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=Nyt(document);return Object.defineProperty(Lo,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?Cyt(document):Promise.resolve(!1);return Object.defineProperty(Lo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=yyt();return Object.defineProperty(Lo,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=wyt();return Object.defineProperty(Lo,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Lo,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Lo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},gN=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),Eyt=function(e,t,r,n){var a=Syt(t,r),s=[],o=0;return a.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(Lo.SUPPORT_RANGE_BOUNDS){var c=Jte(n,o,l.length).getClientRects();if(c.length>1){var u=LH(l),d=0;u.forEach(function(A){s.push(new gN(A,OA.fromDOMRectList(e,Jte(n,d+o,A.length).getClientRects()))),d+=A.length})}else s.push(new gN(l,OA.fromDOMRectList(e,c)))}else{var f=n.splitText(l.length);s.push(new gN(l,jyt(e,n))),n=f}else Lo.SUPPORT_RANGE_BOUNDS||(n=n.splitText(l.length));o+=l.length}),s},jyt=function(e,t){var r=t.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(n,t);var s=eB(e,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return OA.EMPTY},Jte=function(e,t,r){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(e,t),a.setEnd(e,t+r),a},LH=function(e){if(Lo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return xyt(e)},kyt=function(e,t){if(Lo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(n){return n.segment})}return Tyt(e,t)},Syt=function(e,t){return t.letterSpacing!==0?LH(e):kyt(e,t)},_yt=[32,160,4961,65792,65793,4153,4241],Tyt=function(e,t){for(var r=nvt(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),n=[],a,s=function(){if(a.value){var o=a.value.slice(),l=tB(o),c="";l.forEach(function(u){_yt.indexOf(u)===-1?c+=di(u):(c.length&&n.push(c),n.push(di(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},Byt=function(){function e(t,r,n){this.text=Iyt(r.data,n.textTransform),this.textBounds=Eyt(t,this.text,n,r)}return e}(),Iyt=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(Dyt,Oyt);case 2:return e.toUpperCase();default:return e}},Dyt=/(^|\s|:|-|\(|\))([a-z])/g,Oyt=function(e,t,r){return e.length>0?t+r.toUpperCase():e},xxe=function(e){$f(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return t}(d0),vxe=function(e){$f(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return t}(d0),bxe=function(e){$f(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=new XMLSerializer,o=eB(r,n);return n.setAttribute("width",o.width+"px"),n.setAttribute("height",o.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return t}(d0),yxe=function(e){$f(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(d0),YL=function(e){$f(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return t}(d0),Pyt=[{type:15,flags:0,unit:"px",number:3}],Fyt=[{type:16,flags:0,number:50}],Ryt=function(e){return e.width>e.height?new OA(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new OA(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},Lyt=function(e){var t=e.type===Myt?new Array(e.value.length+1).join(""):e.value;return t.length===0?e.placeholder||"":t},m4="checkbox",p4="radio",Myt="password",Zte=707406591,MH=function(e){$f(t,e);function t(r,n){var a=e.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=Lyt(n),(a.type===m4||a.type===p4)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=Ryt(a.bounds)),a.type){case m4:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=Pyt;break;case p4:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=Fyt;break}return a}return t}(d0),wxe=function(e){$f(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return t}(d0),Nxe=function(e){$f(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(d0),Cxe=function(e){$f(t,e);function t(r,n){var a=e.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=jxe(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?mN(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):hA.TRANSPARENT,o=n.contentWindow.document.body?mN(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):hA.TRANSPARENT;a.backgroundColor=xp(s)?xp(o)?a.styles.backgroundColor:o:s}}catch{}return a}return t}(d0),Uyt=["OL","UL","MENU"],o5=function(e,t,r,n){for(var a=t.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,kxe(a)&&a.data.trim().length>0)r.textNodes.push(new Byt(e,a,r.styles));else if(Qb(a))if(Bxe(a)&&a.assignedNodes)a.assignedNodes().forEach(function(l){return o5(e,l,r,n)});else{var o=Exe(e,a);o.styles.isVisible()&&(Hyt(a,o,n)?o.flags|=4:Qyt(o.styles)&&(o.flags|=2),Uyt.indexOf(a.tagName)!==-1&&(o.flags|=8),r.elements.push(o),a.slot,a.shadowRoot?o5(e,a.shadowRoot,o,n):!g4(a)&&!Sxe(a)&&!x4(a)&&o5(e,a,o,n))}},Exe=function(e,t){return ZL(t)?new xxe(e,t):_xe(t)?new vxe(e,t):Sxe(t)?new bxe(e,t):Vyt(t)?new yxe(e,t):$yt(t)?new YL(e,t):zyt(t)?new MH(e,t):x4(t)?new wxe(e,t):g4(t)?new Nxe(e,t):Txe(t)?new Cxe(e,t):new d0(e,t)},jxe=function(e,t){var r=Exe(e,t);return r.flags|=4,o5(e,t,r,r),r},Hyt=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||UH(e)&&r.styles.isTransparent()},Qyt=function(e){return e.isPositioned()||e.isFloating()},kxe=function(e){return e.nodeType===Node.TEXT_NODE},Qb=function(e){return e.nodeType===Node.ELEMENT_NODE},JL=function(e){return Qb(e)&&typeof e.style<"u"&&!l5(e)},l5=function(e){return typeof e.className=="object"},Vyt=function(e){return e.tagName==="LI"},$yt=function(e){return e.tagName==="OL"},zyt=function(e){return e.tagName==="INPUT"},Gyt=function(e){return e.tagName==="HTML"},Sxe=function(e){return e.tagName==="svg"},UH=function(e){return e.tagName==="BODY"},_xe=function(e){return e.tagName==="CANVAS"},ere=function(e){return e.tagName==="VIDEO"},ZL=function(e){return e.tagName==="IMG"},Txe=function(e){return e.tagName==="IFRAME"},tre=function(e){return e.tagName==="STYLE"},qyt=function(e){return e.tagName==="SCRIPT"},g4=function(e){return e.tagName==="TEXTAREA"},x4=function(e){return e.tagName==="SELECT"},Bxe=function(e){return e.tagName==="SLOT"},rre=function(e){return e.tagName.indexOf("-")>0},Kyt=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(n){return r.counters[n].pop()})},e.prototype.parse=function(t){var r=this,n=t.counterIncrement,a=t.counterReset,s=!0;n!==null&&n.forEach(function(l){var c=r.counters[l.counter];c&&l.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var o=[];return s&&a.forEach(function(l){var c=r.counters[l.counter];o.push(l.counter),c||(c=r.counters[l.counter]=[]),c.push(l.reset)}),o},e}(),nre={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},are={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Wyt={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Xyt={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},hb=function(e,t,r,n,a,s){return e<t||e>r?EC(e,a,s.length>0):n.integers.reduce(function(o,l,c){for(;e>=l;)e-=l,o+=n.values[c];return o},"")+s},Ixe=function(e,t,r,n){var a="";do r||e--,a=n(e)+a,e/=t;while(e*t>=t);return a},oi=function(e,t,r,n,a){var s=r-t+1;return(e<0?"-":"")+(Ixe(Math.abs(e),s,n,function(o){return di(Math.floor(o%s)+t)})+a)},kg=function(e,t,r){r===void 0&&(r=". ");var n=t.length;return Ixe(Math.abs(e),n,!1,function(a){return t[Math.floor(a%n)]})+r},jb=1,Rm=2,Lm=4,F2=8,H0=function(e,t,r,n,a,s){if(e<-9999||e>9999)return EC(e,4,a.length>0);var o=Math.abs(e),l=a;if(o===0)return t[0]+l;for(var c=0;o>0&&c<=4;c++){var u=o%10;u===0&&Qi(s,jb)&&l!==""?l=t[u]+l:u>1||u===1&&c===0||u===1&&c===1&&Qi(s,Rm)||u===1&&c===1&&Qi(s,Lm)&&e>100||u===1&&c>1&&Qi(s,F2)?l=t[u]+(c>0?r[c-1]:"")+l:u===1&&c>0&&(l=r[c-1]+l),o=Math.floor(o/10)}return(e<0?n:"")+l},sre="",ire="",ore="",AP="",EC=function(e,t,r){var n=r?". ":"",a=r?"":"",s=r?", ":"",o=r?" ":"";switch(t){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var l=oi(e,48,57,!0,n);return l.length<4?"0"+l:l;case 4:return kg(e,"",a);case 6:return hb(e,1,3999,nre,3,n).toLowerCase();case 7:return hb(e,1,3999,nre,3,n);case 8:return oi(e,945,969,!1,n);case 9:return oi(e,97,122,!1,n);case 10:return oi(e,65,90,!1,n);case 11:return oi(e,1632,1641,!0,n);case 12:case 49:return hb(e,1,9999,are,3,n);case 35:return hb(e,1,9999,are,3,n).toLowerCase();case 13:return oi(e,2534,2543,!0,n);case 14:case 30:return oi(e,6112,6121,!0,n);case 15:return kg(e,"",a);case 16:return kg(e,"",a);case 17:case 48:return H0(e,"",sre,"",a,Rm|Lm|F2);case 47:return H0(e,"",ire,"",a,jb|Rm|Lm|F2);case 42:return H0(e,"",sre,"",a,Rm|Lm|F2);case 41:return H0(e,"",ire,"",a,jb|Rm|Lm|F2);case 26:return H0(e,"","",ore,a,0);case 25:return H0(e,"","",ore,a,jb|Rm|Lm);case 31:return H0(e,"","",AP,s,jb|Rm|Lm);case 33:return H0(e,"","",AP,s,0);case 32:return H0(e,"","",AP,s,jb|Rm|Lm);case 18:return oi(e,2406,2415,!0,n);case 20:return hb(e,1,19999,Xyt,3,n);case 21:return oi(e,2790,2799,!0,n);case 22:return oi(e,2662,2671,!0,n);case 22:return hb(e,1,10999,Wyt,3,n);case 23:return kg(e,"");case 24:return kg(e,"");case 27:return oi(e,3302,3311,!0,n);case 28:return kg(e,"",a);case 29:return kg(e,"",a);case 34:return oi(e,3792,3801,!0,n);case 37:return oi(e,6160,6169,!0,n);case 38:return oi(e,4160,4169,!0,n);case 39:return oi(e,2918,2927,!0,n);case 40:return oi(e,1776,1785,!0,n);case 43:return oi(e,3046,3055,!0,n);case 44:return oi(e,3174,3183,!0,n);case 45:return oi(e,3664,3673,!0,n);case 46:return oi(e,3872,3881,!0,n);case 3:default:return oi(e,48,57,!0,n)}},Dxe="data-html2canvas-ignore",lre=function(){function e(t,r,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new Kyt,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var n=this,a=Yyt(t,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,o=t.defaultView.pageYOffset,l=a.contentWindow,c=l.document,u=ewt(a).then(function(){return Kl(n,void 0,void 0,function(){var d,f;return Al(this,function(A){switch(A.label){case 0:return this.scrolledElements.forEach(awt),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:A.sent(),A.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Zyt(c)]:[3,4];case 3:A.sent(),A.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(rwt(document.doctype)+"<html></html>"),nwt(this.referenceElement.ownerDocument,s,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},e.prototype.createElementClone=function(t){if(WL(t,2))debugger;if(_xe(t))return this.createCanvasClone(t);if(ere(t))return this.createVideoClone(t);if(tre(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return ZL(r)&&(ZL(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),rre(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return mP(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,o){return o&&typeof o.cssText=="string"?s+o.cssText:s},""),a=t.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var s=t.getContext("2d"),o=a.getContext("2d");if(o)if(!this.options.allowTaint&&s)o.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var l=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(l){var c=l.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}o.drawImage(t,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return a},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var a=t.ownerDocument.createElement("canvas");return a.width=t.offsetWidth,a.height=t.offsetHeight,a},e.prototype.appendChildNode=function(t,r,n){(!Qb(r)||!qyt(r)&&!r.hasAttribute(Dxe)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Qb(r)||!tre(r))&&t.appendChild(this.cloneNode(r,n))},e.prototype.cloneChildNodes=function(t,r,n){for(var a=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(Qb(s)&&Bxe(s)&&typeof s.assignedNodes=="function"){var o=s.assignedNodes();o.length&&o.forEach(function(l){return a.appendChildNode(r,l,n)})}else this.appendChildNode(r,s,n)},e.prototype.cloneNode=function(t,r){if(kxe(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&Qb(t)&&(JL(t)||l5(t))){var a=this.createElementClone(t);a.style.transitionProperty="none";var s=n.getComputedStyle(t),o=n.getComputedStyle(t,":before"),l=n.getComputedStyle(t,":after");this.referenceElement===t&&JL(a)&&(this.clonedReferenceElement=a),UH(a)&&owt(a);var c=this.counters.parse(new Mte(this.context,s)),u=this.resolvePseudoContent(t,a,o,xN.BEFORE);rre(t)&&(r=!0),ere(t)||this.cloneChildNodes(t,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(t,a,l,xN.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||l5(t))&&!Txe(t)||r)&&mP(s,a),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(g4(t)||x4(t))&&(g4(a)||x4(a))&&(a.value=t.value),a}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,n,a){var s=this;if(n){var o=n.content,l=r.ownerDocument;if(!(!l||!o||o==="none"||o==="-moz-alt-content"||n.display==="none")){this.counters.parse(new Mte(this.context,n));var c=new V1t(this.context,n),u=l.createElement("html2canvaspseudoelement");mP(n,u),c.content.forEach(function(f){if(f.type===0)u.appendChild(l.createTextNode(f.value));else if(f.type===22){var A=l.createElement("img");A.src=f.value,A.style.opacity="1",u.appendChild(A)}else if(f.type===18){if(f.name==="attr"){var m=f.values.filter(Oa);m.length&&u.appendChild(l.createTextNode(t.getAttribute(m[0].value)||""))}else if(f.name==="counter"){var g=f.values.filter(ay),x=g[0],v=g[1];if(x&&Oa(x)){var y=s.counters.getCounterValue(x.value),N=v&&Oa(v)?KL.parse(s.context,v.value):3;u.appendChild(l.createTextNode(EC(y,N,!1)))}}else if(f.name==="counters"){var C=f.values.filter(ay),x=C[0],_=C[1],v=C[2];if(x&&Oa(x)){var j=s.counters.getCounterValues(x.value),I=v&&Oa(v)?KL.parse(s.context,v.value):3,T=_&&_.type===0?_.value:"",k=j.map(function(P){return EC(P,I,!1)}).join(T);u.appendChild(l.createTextNode(k))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(l.createTextNode(Lte(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(l.createTextNode(Lte(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(l.createTextNode(f.value))}}),u.className=e8+" "+t8;var d=a===xN.BEFORE?" "+e8:" "+t8;return l5(r)?r.className.baseValue+=d:r.className+=d,u}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),xN;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(xN||(xN={}));var Yyt=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(Dxe,"true"),e.body.appendChild(r),r},Jyt=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},Zyt=function(e){return Promise.all([].slice.call(e.images,0).map(Jyt))},ewt=function(e){return new Promise(function(t,r){var n=e.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),t(e))},50)}})},twt=["all","d","content"],mP=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e.item(r);twt.indexOf(n)===-1&&t.style.setProperty(n,e.getPropertyValue(n))}return t},rwt=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},nwt=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},awt=function(e){var t=e[0],r=e[1],n=e[2];t.scrollLeft=r,t.scrollTop=n},swt=":before",iwt=":after",e8="___html2canvas___pseudoelement_before",t8="___html2canvas___pseudoelement_after",cre=`{
    content: "" !important;
    display: none !important;
}`,owt=function(e){lwt(e,"."+e8+swt+cre+`
         .`+t8+iwt+cre)},lwt=function(e,t){var r=e.ownerDocument;if(r){var n=r.createElement("style");n.textContent=t,e.appendChild(n)}},Oxe=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),cwt=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(gP(t)||hwt(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return Kl(this,void 0,void 0,function(){var r,n,a,s,o=this;return Al(this,function(l){switch(l.label){case 0:return r=Oxe.isSameOrigin(t),n=!pP(t)&&this._options.useCORS===!0&&Lo.SUPPORT_CORS_IMAGES&&!r,a=!pP(t)&&!r&&!gP(t)&&typeof this._options.proxy=="string"&&Lo.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!pP(t)&&!gP(t)&&!a&&!n?[2]:(s=t,a?[4,this.proxy(s)]:[3,2]);case 1:s=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(Awt(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),o._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=t.substring(0,256);return new Promise(function(s,o){var l=Lo.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")s(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(A){return o(A)},!1),f.readAsDataURL(c.response)}else o("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=o;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(t)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return o("Timed out ("+d+"ms) proxying "+a)}}c.send()})},e}(),uwt=/^data:image\/svg\+xml/i,dwt=/^data:image\/.*;base64,/i,fwt=/^data:image\/.*/i,hwt=function(e){return Lo.SUPPORT_SVG_DRAWING||!mwt(e)},pP=function(e){return fwt.test(e)},Awt=function(e){return dwt.test(e)},gP=function(e){return e.substr(0,4)==="blob"},mwt=function(e){return e.substr(-3).toLowerCase()==="svg"||uwt.test(e)},dr=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),Ab=function(e,t,r){return new dr(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},uS=function(){function e(t,r,n,a){this.type=1,this.start=t,this.startControl=r,this.endControl=n,this.end=a}return e.prototype.subdivide=function(t,r){var n=Ab(this.start,this.startControl,t),a=Ab(this.startControl,this.endControl,t),s=Ab(this.endControl,this.end,t),o=Ab(n,a,t),l=Ab(a,s,t),c=Ab(o,l,t);return r?new e(this.start,n,o,c):new e(c,l,s,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),wd=function(e){return e.type===1},pwt=function(){function e(t){var r=t.styles,n=t.bounds,a=O2(r.borderTopLeftRadius,n.width,n.height),s=a[0],o=a[1],l=O2(r.borderTopRightRadius,n.width,n.height),c=l[0],u=l[1],d=O2(r.borderBottomRightRadius,n.width,n.height),f=d[0],A=d[1],m=O2(r.borderBottomLeftRadius,n.width,n.height),g=m[0],x=m[1],v=[];v.push((s+c)/n.width),v.push((g+f)/n.width),v.push((o+x)/n.height),v.push((u+A)/n.height);var y=Math.max.apply(Math,v);y>1&&(s/=y,o/=y,c/=y,u/=y,f/=y,A/=y,g/=y,x/=y);var N=n.width-c,C=n.height-A,_=n.width-f,j=n.height-x,I=r.borderTopWidth,T=r.borderRightWidth,k=r.borderBottomWidth,B=r.borderLeftWidth,M=qa(r.paddingTop,t.bounds.width),P=qa(r.paddingRight,t.bounds.width),S=qa(r.paddingBottom,t.bounds.width),L=qa(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||o>0?fs(n.left+B/3,n.top+I/3,s-B/3,o-I/3,ha.TOP_LEFT):new dr(n.left+B/3,n.top+I/3),this.topRightBorderDoubleOuterBox=s>0||o>0?fs(n.left+N,n.top+I/3,c-T/3,u-I/3,ha.TOP_RIGHT):new dr(n.left+n.width-T/3,n.top+I/3),this.bottomRightBorderDoubleOuterBox=f>0||A>0?fs(n.left+_,n.top+C,f-T/3,A-k/3,ha.BOTTOM_RIGHT):new dr(n.left+n.width-T/3,n.top+n.height-k/3),this.bottomLeftBorderDoubleOuterBox=g>0||x>0?fs(n.left+B/3,n.top+j,g-B/3,x-k/3,ha.BOTTOM_LEFT):new dr(n.left+B/3,n.top+n.height-k/3),this.topLeftBorderDoubleInnerBox=s>0||o>0?fs(n.left+B*2/3,n.top+I*2/3,s-B*2/3,o-I*2/3,ha.TOP_LEFT):new dr(n.left+B*2/3,n.top+I*2/3),this.topRightBorderDoubleInnerBox=s>0||o>0?fs(n.left+N,n.top+I*2/3,c-T*2/3,u-I*2/3,ha.TOP_RIGHT):new dr(n.left+n.width-T*2/3,n.top+I*2/3),this.bottomRightBorderDoubleInnerBox=f>0||A>0?fs(n.left+_,n.top+C,f-T*2/3,A-k*2/3,ha.BOTTOM_RIGHT):new dr(n.left+n.width-T*2/3,n.top+n.height-k*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||x>0?fs(n.left+B*2/3,n.top+j,g-B*2/3,x-k*2/3,ha.BOTTOM_LEFT):new dr(n.left+B*2/3,n.top+n.height-k*2/3),this.topLeftBorderStroke=s>0||o>0?fs(n.left+B/2,n.top+I/2,s-B/2,o-I/2,ha.TOP_LEFT):new dr(n.left+B/2,n.top+I/2),this.topRightBorderStroke=s>0||o>0?fs(n.left+N,n.top+I/2,c-T/2,u-I/2,ha.TOP_RIGHT):new dr(n.left+n.width-T/2,n.top+I/2),this.bottomRightBorderStroke=f>0||A>0?fs(n.left+_,n.top+C,f-T/2,A-k/2,ha.BOTTOM_RIGHT):new dr(n.left+n.width-T/2,n.top+n.height-k/2),this.bottomLeftBorderStroke=g>0||x>0?fs(n.left+B/2,n.top+j,g-B/2,x-k/2,ha.BOTTOM_LEFT):new dr(n.left+B/2,n.top+n.height-k/2),this.topLeftBorderBox=s>0||o>0?fs(n.left,n.top,s,o,ha.TOP_LEFT):new dr(n.left,n.top),this.topRightBorderBox=c>0||u>0?fs(n.left+N,n.top,c,u,ha.TOP_RIGHT):new dr(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||A>0?fs(n.left+_,n.top+C,f,A,ha.BOTTOM_RIGHT):new dr(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=g>0||x>0?fs(n.left,n.top+j,g,x,ha.BOTTOM_LEFT):new dr(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||o>0?fs(n.left+B,n.top+I,Math.max(0,s-B),Math.max(0,o-I),ha.TOP_LEFT):new dr(n.left+B,n.top+I),this.topRightPaddingBox=c>0||u>0?fs(n.left+Math.min(N,n.width-T),n.top+I,N>n.width+T?0:Math.max(0,c-T),Math.max(0,u-I),ha.TOP_RIGHT):new dr(n.left+n.width-T,n.top+I),this.bottomRightPaddingBox=f>0||A>0?fs(n.left+Math.min(_,n.width-B),n.top+Math.min(C,n.height-k),Math.max(0,f-T),Math.max(0,A-k),ha.BOTTOM_RIGHT):new dr(n.left+n.width-T,n.top+n.height-k),this.bottomLeftPaddingBox=g>0||x>0?fs(n.left+B,n.top+Math.min(j,n.height-k),Math.max(0,g-B),Math.max(0,x-k),ha.BOTTOM_LEFT):new dr(n.left+B,n.top+n.height-k),this.topLeftContentBox=s>0||o>0?fs(n.left+B+L,n.top+I+M,Math.max(0,s-(B+L)),Math.max(0,o-(I+M)),ha.TOP_LEFT):new dr(n.left+B+L,n.top+I+M),this.topRightContentBox=c>0||u>0?fs(n.left+Math.min(N,n.width+B+L),n.top+I+M,N>n.width+B+L?0:c-B+L,u-(I+M),ha.TOP_RIGHT):new dr(n.left+n.width-(T+P),n.top+I+M),this.bottomRightContentBox=f>0||A>0?fs(n.left+Math.min(_,n.width-(B+L)),n.top+Math.min(C,n.height+I+M),Math.max(0,f-(T+P)),A-(k+S),ha.BOTTOM_RIGHT):new dr(n.left+n.width-(T+P),n.top+n.height-(k+S)),this.bottomLeftContentBox=g>0||x>0?fs(n.left+B+L,n.top+j,Math.max(0,g-(B+L)),x-(k+S),ha.BOTTOM_LEFT):new dr(n.left+B+L,n.top+n.height-(k+S))}return e}(),ha;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(ha||(ha={}));var fs=function(e,t,r,n,a){var s=4*((Math.sqrt(2)-1)/3),o=r*s,l=n*s,c=e+r,u=t+n;switch(a){case ha.TOP_LEFT:return new uS(new dr(e,u),new dr(e,u-l),new dr(c-o,t),new dr(c,t));case ha.TOP_RIGHT:return new uS(new dr(e,t),new dr(e+o,t),new dr(c,u-l),new dr(c,u));case ha.BOTTOM_RIGHT:return new uS(new dr(c,t),new dr(c,t+l),new dr(e+o,u),new dr(e,u));case ha.BOTTOM_LEFT:default:return new uS(new dr(c,u),new dr(c-o,u),new dr(e,t+l),new dr(e,t))}},v4=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},gwt=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},b4=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},xwt=function(){function e(t,r,n){this.offsetX=t,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return e}(),dS=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),vwt=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),bwt=function(e){return e.type===0},Pxe=function(e){return e.type===1},ywt=function(e){return e.type===2},ure=function(e,t){return e.length===t.length?e.some(function(r,n){return r===t[n]}):!1},wwt=function(e,t,r,n,a){return e.map(function(s,o){switch(o){case 0:return s.add(t,r);case 1:return s.add(t+n,r);case 2:return s.add(t+n,r+a);case 3:return s.add(t,r+a)}return s})},Fxe=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),Rxe=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new pwt(this.container),this.container.styles.opacity<1&&this.effects.push(new vwt(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new xwt(n,a,s))}if(this.container.styles.overflowX!==0){var o=v4(this.curves),l=b4(this.curves);ure(o,l)?this.effects.push(new dS(o,6)):(this.effects.push(new dS(o,2)),this.effects.push(new dS(l,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!Pxe(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var o=v4(n.curves),l=b4(n.curves);ure(o,l)||a.unshift(new dS(l,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return Qi(c.target,t)})},e}(),r8=function(e,t,r,n){e.container.elements.forEach(function(a){var s=Qi(a.flags,4),o=Qi(a.flags,2),l=new Rxe(a,e);Qi(a.styles.display,2048)&&n.push(l);var c=Qi(a.flags,8)?[]:n;if(s||o){var u=s||a.styles.isPositioned()?r:t,d=new Fxe(l);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var A=0;u.negativeZIndex.some(function(g,x){return f>g.element.container.styles.zIndex.order?(A=x,!1):A>0}),u.negativeZIndex.splice(A,0,d)}else if(f>0){var m=0;u.positiveZIndex.some(function(g,x){return f>=g.element.container.styles.zIndex.order?(m=x+1,!1):m>0}),u.positiveZIndex.splice(m,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);r8(l,d,s?d:r,c)}else a.styles.isInlineLevel()?t.inlineLevel.push(l):t.nonInlineLevel.push(l),r8(l,t,r,c);Qi(a.flags,8)&&Lxe(a,c)})},Lxe=function(e,t){for(var r=e instanceof YL?e.start:1,n=e instanceof YL?e.reversed:!1,a=0;a<t.length;a++){var s=t[a];s.container instanceof yxe&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=EC(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},Nwt=function(e){var t=new Rxe(e,null),r=new Fxe(t),n=[];return r8(t,r,r,n),Lxe(t.container,n),r},dre=function(e,t){switch(t){case 0:return _d(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return _d(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return _d(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return _d(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},Cwt=function(e,t){switch(t){case 0:return _d(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return _d(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return _d(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return _d(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},Ewt=function(e,t){switch(t){case 0:return _d(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return _d(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return _d(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return _d(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},jwt=function(e,t){switch(t){case 0:return fS(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return fS(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return fS(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return fS(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},fS=function(e,t){var r=[];return wd(e)?r.push(e.subdivide(.5,!1)):r.push(e),wd(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},_d=function(e,t,r,n){var a=[];return wd(e)?a.push(e.subdivide(.5,!1)):a.push(e),wd(r)?a.push(r.subdivide(.5,!0)):a.push(r),wd(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),wd(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},Mxe=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},y4=function(e){var t=e.styles,r=e.bounds,n=qa(t.paddingLeft,r.width),a=qa(t.paddingRight,r.width),s=qa(t.paddingTop,r.width),o=qa(t.paddingBottom,r.width);return r.add(n+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+a),-(t.borderTopWidth+t.borderBottomWidth+s+o))},kwt=function(e,t){return e===0?t.bounds:e===2?y4(t):Mxe(t)},Swt=function(e,t){return e===0?t.bounds:e===2?y4(t):Mxe(t)},xP=function(e,t,r){var n=kwt(kb(e.styles.backgroundOrigin,t),e),a=Swt(kb(e.styles.backgroundClip,t),e),s=_wt(kb(e.styles.backgroundSize,t),r,n),o=s[0],l=s[1],c=O2(kb(e.styles.backgroundPosition,t),n.width-o,n.height-l),u=Twt(kb(e.styles.backgroundRepeat,t),c,s,n,a),d=Math.round(n.left+c[0]),f=Math.round(n.top+c[1]);return[u,d,f,o,l]},mb=function(e){return Oa(e)&&e.value===b1.AUTO},hS=function(e){return typeof e=="number"},_wt=function(e,t,r){var n=t[0],a=t[1],s=t[2],o=e[0],l=e[1];if(!o)return[0,0];if(Di(o)&&l&&Di(l))return[qa(o,r.width),qa(l,r.height)];var c=hS(s);if(Oa(o)&&(o.value===b1.CONTAIN||o.value===b1.COVER)){if(hS(s)){var u=r.width/r.height;return u<s!=(o.value===b1.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=hS(n),f=hS(a),A=d||f;if(mb(o)&&(!l||mb(l))){if(d&&f)return[n,a];if(!c&&!A)return[r.width,r.height];if(A&&c){var m=d?n:a*s,g=f?a:n/s;return[m,g]}var x=d?n:r.width,v=f?a:r.height;return[x,v]}if(c){var y=0,N=0;return Di(o)?y=qa(o,r.width):Di(l)&&(N=qa(l,r.height)),mb(o)?y=N*s:(!l||mb(l))&&(N=y/s),[y,N]}var C=null,_=null;if(Di(o)?C=qa(o,r.width):l&&Di(l)&&(_=qa(l,r.height)),C!==null&&(!l||mb(l))&&(_=d&&f?C/n*a:r.height),_!==null&&mb(o)&&(C=d&&f?_/a*n:r.width),C!==null&&_!==null)return[C,_];throw new Error("Unable to calculate background-size for element")},kb=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},Twt=function(e,t,r,n,a){var s=t[0],o=t[1],l=r[0],c=r[1];switch(e){case 2:return[new dr(Math.round(n.left),Math.round(n.top+o)),new dr(Math.round(n.left+n.width),Math.round(n.top+o)),new dr(Math.round(n.left+n.width),Math.round(c+n.top+o)),new dr(Math.round(n.left),Math.round(c+n.top+o))];case 3:return[new dr(Math.round(n.left+s),Math.round(n.top)),new dr(Math.round(n.left+s+l),Math.round(n.top)),new dr(Math.round(n.left+s+l),Math.round(n.height+n.top)),new dr(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new dr(Math.round(n.left+s),Math.round(n.top+o)),new dr(Math.round(n.left+s+l),Math.round(n.top+o)),new dr(Math.round(n.left+s+l),Math.round(n.top+o+c)),new dr(Math.round(n.left+s),Math.round(n.top+o+c))];default:return[new dr(Math.round(a.left),Math.round(a.top)),new dr(Math.round(a.left+a.width),Math.round(a.top)),new dr(Math.round(a.left+a.width),Math.round(a.height+a.top)),new dr(Math.round(a.left),Math.round(a.height+a.top))]}},Bwt="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",fre="Hidden Text",Iwt=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),o=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",o.appendChild(n),a.src=Bwt,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(fre)),n.appendChild(s),n.appendChild(a);var l=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(fre)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return o.removeChild(n),{baseline:l,middle:c}},e.prototype.getMetrics=function(t,r){var n=t+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(t,r)),this._data[n]},e}(),Uxe=function(){function e(t,r){this.context=t,this.options=r}return e}(),Dwt=1e4,Owt=function(e){$f(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new Iwt(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return t.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},t.prototype.applyEffect=function(r){this.ctx.save(),ywt(r)&&(this.ctx.globalAlpha=r.opacity),bwt(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),Pxe(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return Kl(this,void 0,void 0,function(){var n;return Al(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return Kl(this,void 0,void 0,function(){return Al(this,function(n){switch(n.label){case 0:if(Qi(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var o=LH(r.text);o.reduce(function(l,c){return s.ctx.fillText(c,l,r.bounds.top+a),l+s.ctx.measureText(c).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),a=Mwt(r.fontFamily).join(", "),s=_E(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},t.prototype.renderTextNode=function(r,n){return Kl(this,void 0,void 0,function(){var a,s,o,l,c,u,d,f,A=this;return Al(this,function(m){return a=this.createFontStyle(n),s=a[0],o=a[1],l=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(o,l),u=c.baseline,d=c.middle,f=n.paintOrder,r.textBounds.forEach(function(g){f.forEach(function(x){switch(x){case 0:A.ctx.fillStyle=oo(n.color),A.renderTextWithLetterSpacing(g,n.letterSpacing,u);var v=n.textShadow;v.length&&g.text.trim().length&&(v.slice(0).reverse().forEach(function(y){A.ctx.shadowColor=oo(y.color),A.ctx.shadowOffsetX=y.offsetX.number*A.options.scale,A.ctx.shadowOffsetY=y.offsetY.number*A.options.scale,A.ctx.shadowBlur=y.blur.number,A.renderTextWithLetterSpacing(g,n.letterSpacing,u)}),A.ctx.shadowColor="",A.ctx.shadowOffsetX=0,A.ctx.shadowOffsetY=0,A.ctx.shadowBlur=0),n.textDecorationLine.length&&(A.ctx.fillStyle=oo(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(y){switch(y){case 1:A.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top+u),g.bounds.width,1);break;case 2:A.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top),g.bounds.width,1);break;case 3:A.ctx.fillRect(g.bounds.left,Math.ceil(g.bounds.top+d),g.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&g.text.trim().length&&(A.ctx.strokeStyle=oo(n.webkitTextStrokeColor),A.ctx.lineWidth=n.webkitTextStrokeWidth,A.ctx.lineJoin=window.chrome?"miter":"round",A.ctx.strokeText(g.text,g.bounds.left,g.bounds.top+u)),A.ctx.strokeStyle="",A.ctx.lineWidth=0,A.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=y4(r),o=b4(n);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return Kl(this,void 0,void 0,function(){var n,a,s,o,l,c,N,N,u,d,f,A,_,m,g,j,x,v,y,N,C,_,j;return Al(this,function(I){switch(I.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,o=0,l=n.textNodes,I.label=1;case 1:return o<l.length?(c=l[o],[4,this.renderTextNode(c,s)]):[3,4];case 2:I.sent(),I.label=3;case 3:return o++,[3,1];case 4:if(!(n instanceof xxe))return[3,8];I.label=5;case 5:return I.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return N=I.sent(),this.renderReplacedElement(n,a,N),[3,8];case 7:return I.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof vxe&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof bxe))return[3,12];I.label=9;case 9:return I.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return N=I.sent(),this.renderReplacedElement(n,a,N),[3,12];case 11:return I.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof Cxe&&n.tree?(u=new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=I.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),I.label=14;case 14:if(n instanceof MH&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===m4?n.checked&&(this.ctx.save(),this.path([new dr(n.bounds.left+f*.39363,n.bounds.top+f*.79),new dr(n.bounds.left+f*.16,n.bounds.top+f*.5549),new dr(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new dr(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new dr(n.bounds.left+f*.72983,n.bounds.top+f*.23),new dr(n.bounds.left+f*.84,n.bounds.top+f*.34085),new dr(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=oo(Zte),this.ctx.fill(),this.ctx.restore()):n.type===p4&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=oo(Zte),this.ctx.fill(),this.ctx.restore())),Pwt(n)&&n.value.length){switch(A=this.createFontStyle(s),_=A[0],m=A[1],g=this.fontMetrics.getMetrics(_,m).baseline,this.ctx.font=_,this.ctx.fillStyle=oo(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Rwt(n.styles.textAlign),j=y4(n),x=0,n.styles.textAlign){case 1:x+=j.width/2;break;case 2:x+=j.width;break}v=j.add(x,0,0,-j.height/2+1),this.ctx.save(),this.path([new dr(j.left,j.top),new dr(j.left+j.width,j.top),new dr(j.left+j.width,j.top+j.height),new dr(j.left,j.top+j.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new gN(n.value,v),s.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Qi(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(y=n.styles.listStyleImage,y.type!==0)return[3,18];N=void 0,C=y.url,I.label=15;case 15:return I.trys.push([15,17,,18]),[4,this.context.cache.match(C)];case 16:return N=I.sent(),this.ctx.drawImage(N,n.bounds.left-(N.width+10),n.bounds.top),[3,18];case 17:return I.sent(),this.context.logger.error("Error loading list-style-image "+C),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(_=this.createFontStyle(s)[0],this.ctx.font=_,this.ctx.fillStyle=oo(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",j=new OA(n.bounds.left,n.bounds.top+qa(n.styles.paddingTop,n.bounds.width),n.bounds.width,Fte(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new gN(r.listValue,j),s.letterSpacing,Fte(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),I.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return Kl(this,void 0,void 0,function(){var n,a,y,s,o,y,l,c,y,u,d,y,f,A,y,m,g,y,x,v,y;return Al(this,function(N){switch(N.label){case 0:if(Qi(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:N.sent(),n=0,a=r.negativeZIndex,N.label=2;case 2:return n<a.length?(y=a[n],[4,this.renderStack(y)]):[3,5];case 3:N.sent(),N.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:N.sent(),s=0,o=r.nonInlineLevel,N.label=7;case 7:return s<o.length?(y=o[s],[4,this.renderNode(y)]):[3,10];case 8:N.sent(),N.label=9;case 9:return s++,[3,7];case 10:l=0,c=r.nonPositionedFloats,N.label=11;case 11:return l<c.length?(y=c[l],[4,this.renderStack(y)]):[3,14];case 12:N.sent(),N.label=13;case 13:return l++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,N.label=15;case 15:return u<d.length?(y=d[u],[4,this.renderStack(y)]):[3,18];case 16:N.sent(),N.label=17;case 17:return u++,[3,15];case 18:f=0,A=r.inlineLevel,N.label=19;case 19:return f<A.length?(y=A[f],[4,this.renderNode(y)]):[3,22];case 20:N.sent(),N.label=21;case 21:return f++,[3,19];case 22:m=0,g=r.zeroOrAutoZIndexOrTransformedOrOpacity,N.label=23;case 23:return m<g.length?(y=g[m],[4,this.renderStack(y)]):[3,26];case 24:N.sent(),N.label=25;case 25:return m++,[3,23];case 26:x=0,v=r.positiveZIndex,N.label=27;case 27:return x<v.length?(y=v[x],[4,this.renderStack(y)]):[3,30];case 28:N.sent(),N.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var o=wd(a)?a.start:a;s===0?n.ctx.moveTo(o.x,o.y):n.ctx.lineTo(o.x,o.y),wd(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},t.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},t.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var o=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,l=o.createElement("canvas");l.width=Math.max(1,n),l.height=Math.max(1,a);var c=l.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),l},t.prototype.renderBackgroundImage=function(r){return Kl(this,void 0,void 0,function(){var n,a,s,o,l,c;return Al(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var f,A,m,M,Q,z,L,H,k,g,M,Q,z,L,H,x,v,y,N,C,_,j,I,T,k,B,M,P,S,L,H,q,Q,z,K,Z,U,Y,R,D,W,J;return Al(this,function(le){switch(le.label){case 0:if(d.type!==0)return[3,5];f=void 0,A=d.url,le.label=1;case 1:return le.trys.push([1,3,,4]),[4,s.context.cache.match(A)];case 2:return f=le.sent(),[3,4];case 3:return le.sent(),s.context.logger.error("Error loading background-image "+A),[3,4];case 4:return f&&(m=xP(r,n,[f.width,f.height,f.width/f.height]),M=m[0],Q=m[1],z=m[2],L=m[3],H=m[4],k=s.ctx.createPattern(s.resizeImage(f,L,H),"repeat"),s.renderRepeat(M,k,Q,z)),[3,6];case 5:bbt(d)?(g=xP(r,n,[null,null,null]),M=g[0],Q=g[1],z=g[2],L=g[3],H=g[4],x=mbt(d.angle,L,H),v=x[0],y=x[1],N=x[2],C=x[3],_=x[4],j=document.createElement("canvas"),j.width=L,j.height=H,I=j.getContext("2d"),T=I.createLinearGradient(y,C,N,_),Ote(d.stops,v).forEach(function(ie){return T.addColorStop(ie.stop,oo(ie.color))}),I.fillStyle=T,I.fillRect(0,0,L,H),L>0&&H>0&&(k=s.ctx.createPattern(j,"repeat"),s.renderRepeat(M,k,Q,z))):ybt(d)&&(B=xP(r,n,[null,null,null]),M=B[0],P=B[1],S=B[2],L=B[3],H=B[4],q=d.position.length===0?[PH]:d.position,Q=qa(q[0],L),z=qa(q[q.length-1],H),K=pbt(d,Q,z,L,H),Z=K[0],U=K[1],Z>0&&U>0&&(Y=s.ctx.createRadialGradient(P+Q,S+z,0,P+Q,S+z,Z),Ote(d.stops,Z*2).forEach(function(ie){return Y.addColorStop(ie.stop,oo(ie.color))}),s.path(M),s.ctx.fillStyle=Y,Z!==U?(R=r.bounds.left+.5*r.bounds.width,D=r.bounds.top+.5*r.bounds.height,W=U/Z,J=1/W,s.ctx.save(),s.ctx.translate(R,D),s.ctx.transform(1,0,0,W,0,0),s.ctx.translate(-R,-D),s.ctx.fillRect(P,J*(S-D)+D,L,H*J),s.ctx.restore()):s.ctx.fill())),le.label=6;case 6:return n--,[2]}})},s=this,o=0,l=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return o<l.length?(c=l[o],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,n,a){return Kl(this,void 0,void 0,function(){return Al(this,function(s){return this.path(dre(a,n)),this.ctx.fillStyle=oo(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,n,a,s){return Kl(this,void 0,void 0,function(){var o,l;return Al(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return o=Cwt(s,a),this.path(o),this.ctx.fillStyle=oo(r),this.ctx.fill(),l=Ewt(s,a),this.path(l),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return Kl(this,void 0,void 0,function(){var n,a,s,o,l,c,u,d,f=this;return Al(this,function(A){switch(A.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!xp(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],o=Fwt(kb(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),xp(n.backgroundColor)||(this.ctx.fillStyle=oo(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:A.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(m){f.ctx.save();var g=v4(r.curves),x=m.inset?0:Dwt,v=wwt(g,-x+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(f.path(g),f.ctx.clip(),f.mask(v)):(f.mask(g),f.ctx.clip(),f.path(v)),f.ctx.shadowOffsetX=m.offsetX.number+x,f.ctx.shadowOffsetY=m.offsetY.number,f.ctx.shadowColor=oo(m.color),f.ctx.shadowBlur=m.blur.number,f.ctx.fillStyle=m.inset?oo(m.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),A.label=2;case 2:l=0,c=0,u=s,A.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!xp(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return A.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,3)];case 6:return A.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,r.curves)];case 8:return A.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,r.curves)];case 10:A.sent(),A.label=11;case 11:l++,A.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,n,a,s,o){return Kl(this,void 0,void 0,function(){var l,c,u,d,f,A,m,g,x,v,y,N,C,_,j,I,j,I;return Al(this,function(T){return this.ctx.save(),l=jwt(s,a),c=dre(s,a),o===2&&(this.path(c),this.ctx.clip()),wd(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),wd(c[1])?(f=c[1].end.x,A=c[1].end.y):(f=c[1].x,A=c[1].y),a===0||a===2?m=Math.abs(u-f):m=Math.abs(d-A),this.ctx.beginPath(),o===3?this.formatPath(l):this.formatPath(c.slice(0,2)),g=n<3?n*3:n*2,x=n<3?n*2:n,o===3&&(g=n,x=n),v=!0,m<=g*2?v=!1:m<=g*2+x?(y=m/(2*g+x),g*=y,x*=y):(N=Math.floor((m+x)/(g+x)),C=(m-N*g)/(N-1),_=(m-(N+1)*g)/N,x=_<=0||Math.abs(x-C)<Math.abs(x-_)?C:_),v&&(o===3?this.ctx.setLineDash([0,g+x]):this.ctx.setLineDash([g,x])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=oo(r),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(wd(c[0])&&(j=c[3],I=c[0],this.ctx.beginPath(),this.formatPath([new dr(j.end.x,j.end.y),new dr(I.start.x,I.start.y)]),this.ctx.stroke()),wd(c[1])&&(j=c[1],I=c[2],this.ctx.beginPath(),this.formatPath([new dr(j.end.x,j.end.y),new dr(I.start.x,I.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return Kl(this,void 0,void 0,function(){var n;return Al(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=oo(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=Nwt(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(Uxe),Pwt=function(e){return e instanceof Nxe||e instanceof wxe?!0:e instanceof MH&&e.type!==p4&&e.type!==m4},Fwt=function(e,t){switch(e){case 0:return v4(t);case 2:return gwt(t);case 1:default:return b4(t)}},Rwt=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},Lwt=["-apple-system","system-ui"],Mwt=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return Lwt.indexOf(t)===-1}):e},Uwt=function(e){$f(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return t.prototype.render=function(r){return Kl(this,void 0,void 0,function(){var n,a;return Al(this,function(s){switch(s.label){case 0:return n=XL(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,Hwt(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=oo(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(Uxe),Hwt=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Qwt=function(){function e(t){var r=t.id,n=t.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,zk([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,zk([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,zk([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,zk([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),Vwt=function(){function e(t,r){var n;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new Qwt({id:this.instanceName,enabled:t.logging}),this.cache=(n=t.cache)!==null&&n!==void 0?n:new cwt(this,t)}return e.instanceCount=1,e}(),Hxe=function(e,t){return t===void 0&&(t={}),$wt(e,t)};typeof window<"u"&&Oxe.setContext(window);var $wt=function(e,t){return Kl(void 0,void 0,void 0,function(){var r,n,a,s,o,l,c,u,d,f,A,m,g,x,v,y,N,C,_,j,T,I,T,k,B,M,P,S,L,H,q,Q,z,K,Z,U,Y,R,D,W;return Al(this,function(J){switch(J.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(k=t.allowTaint)!==null&&k!==void 0?k:!1,imageTimeout:(B=t.imageTimeout)!==null&&B!==void 0?B:15e3,proxy:t.proxy,useCORS:(M=t.useCORS)!==null&&M!==void 0?M:!1},s=PL({logging:(P=t.logging)!==null&&P!==void 0?P:!0,cache:t.cache},a),o={windowWidth:(S=t.windowWidth)!==null&&S!==void 0?S:n.innerWidth,windowHeight:(L=t.windowHeight)!==null&&L!==void 0?L:n.innerHeight,scrollX:(H=t.scrollX)!==null&&H!==void 0?H:n.pageXOffset,scrollY:(q=t.scrollY)!==null&&q!==void 0?q:n.pageYOffset},l=new OA(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),c=new Vwt(s,l),u=(Q=t.foreignObjectRendering)!==null&&Q!==void 0?Q:!1,d={allowTaint:(z=t.allowTaint)!==null&&z!==void 0?z:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),f=new lre(c,e,d),A=f.clonedReferenceElement,A?[4,f.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=J.sent(),g=UH(A)||Gyt(A)?wxt(A.ownerDocument):eB(c,A),x=g.width,v=g.height,y=g.left,N=g.top,C=zwt(c,A,t.backgroundColor),_={canvas:t.canvas,backgroundColor:C,scale:(Z=(K=t.scale)!==null&&K!==void 0?K:n.devicePixelRatio)!==null&&Z!==void 0?Z:1,x:((U=t.x)!==null&&U!==void 0?U:0)+y,y:((Y=t.y)!==null&&Y!==void 0?Y:0)+N,width:(R=t.width)!==null&&R!==void 0?R:Math.ceil(x),height:(D=t.height)!==null&&D!==void 0?D:Math.ceil(v)},u?(c.logger.debug("Document cloned, using foreign object rendering"),T=new Uwt(c,_),[4,T.render(A)]):[3,3];case 2:return j=J.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+y+","+N+" with size "+x+"x"+v+" using computed rendering"),c.logger.debug("Starting DOM parsing"),I=jxe(c,A),C===I.styles.backgroundColor&&(I.styles.backgroundColor=hA.TRANSPARENT),c.logger.debug("Starting renderer for element at "+_.x+","+_.y+" with size "+_.width+"x"+_.height),T=new Owt(c,_),[4,T.render(I)];case 4:j=J.sent(),J.label=5;case 5:return(!((W=t.removeContainer)!==null&&W!==void 0)||W)&&(lre.destroy(m)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,j]}})})},zwt=function(e,t,r){var n=t.ownerDocument,a=n.documentElement?mN(e,getComputedStyle(n.documentElement).backgroundColor):hA.TRANSPARENT,s=n.body?mN(e,getComputedStyle(n.body).backgroundColor):hA.TRANSPARENT,o=typeof r=="string"?mN(e,r):r===null?hA.TRANSPARENT:4294967295;return t===n.documentElement?xp(a)?xp(s)?o:s:a:o};const Gwt=Object.freeze(Object.defineProperty({__proto__:null,default:Hxe},Symbol.toStringTag,{value:"Module"})),qwt=e=>{const[t,r]=w.useState(!1),[n,a]=w.useState(null);return w.useEffect(()=>{const s="google-maps-script";if(document.getElementById(s)||window.google){r(!0);return}const o=document.createElement("script");o.id=s,o.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,directions&loading=async`,o.async=!0,o.defer=!0,o.onload=()=>r(!0),o.onerror=()=>a(new Error("No se pudo cargar Google Maps.")),document.head.appendChild(o)},[e]),{isLoaded:t,error:n}},Qxe=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de prctica"},{elemento:"Ambiente laboral y clima organizacional"},{elemento:"Supervisin y mentora"},{elemento:"Oportunidades de aprendizaje"},{elemento:"Recursos y herramientas disponibles"},{elemento:"Seguridad y salud ocupacional"},{elemento:"Comunicacin interna"}],Kwt=["Mecnica Industrial","Mecnica Automotriz"],Wwt=()=>({nombre:"",rut:"",direccion:"",contacto:"",email:"",area:"",cupos:1,coordenadas:null,calificaciones:Qxe.map(e=>({...e,score:null})),estudiantesAsignados:[],docenteSupervisor:void 0}),hre=({empresas:e,isLoaded:t,route:r,heightPx:n})=>{const a=w.useRef(null),s=w.useRef(null),o=w.useRef([]),l=w.useRef(null),c=e.filter(u=>{var d,f;return((d=u.coordenadas)==null?void 0:d.lat)&&((f=u.coordenadas)==null?void 0:f.lng)});return w.useEffect(()=>{if(!(!t||!a.current||!window.google)){s.current||(s.current=new window.google.maps.Map(a.current,{center:{lat:-33.4489,lng:-70.6693},zoom:11})),l.current?l.current.getMap()==null&&l.current.setMap(s.current):l.current=new window.google.maps.DirectionsRenderer({map:s.current,suppressMarkers:!1,preserveViewport:!1}),o.current.forEach(u=>u.setMap(null)),o.current=[];for(const u of c){const d=new window.google.maps.Marker({position:u.coordenadas,map:s.current,title:u.nombre||"Empresa"});o.current.push(d)}if(c.length){const u=new window.google.maps.LatLngBounds;c.forEach(d=>u.extend(d.coordenadas)),s.current.fitBounds(u)}r?l.current.setDirections(r):l.current.setDirections({routes:[]})}},[t,c.length,!!r]),i.jsx("div",{id:"map-container-for-pdf",ref:a,style:{width:"100%",height:`${n??400}px`,borderRadius:8}})},Vxe=({data:e})=>{var o;const t=["#6366F1","#06B6D4","#22C55E","#F59E0B","#EF4444"],r=((o=e==null?void 0:e.porEspecialidad)==null?void 0:o.reduce((l,c)=>l+(c.value||0),0))||0,n=((e==null?void 0:e.ranking)||[]).filter(l=>l.coordenadas).length||0,a=(()=>{const l=((e==null?void 0:e.ranking)||[]).map(c=>c.promedio).filter(c=>!isNaN(c)&&c>0);return l.length?l.reduce((c,u)=>c+u,0)/l.length:0})(),s=new Set(((e==null?void 0:e.porSupervisor)||[]).map(l=>l.name)).size;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-tr from-indigo-500 to-indigo-400 text-white shadow-md",children:[i.jsx("div",{className:"text-xs opacity-90",children:"Empresas"}),i.jsx("div",{className:"text-2xl font-bold",children:r})]}),i.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-tr from-cyan-500 to-cyan-400 text-white shadow-md",children:[i.jsx("div",{className:"text-xs opacity-90",children:"Geo-localizadas"}),i.jsx("div",{className:"text-2xl font-bold",children:n})]}),i.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-tr from-emerald-500 to-emerald-400 text-white shadow-md",children:[i.jsx("div",{className:"text-xs opacity-90",children:"Promedio Calificacin"}),i.jsxs("div",{className:"text-2xl font-bold",children:[a.toFixed(1)," "]})]}),i.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-tr from-amber-500 to-amber-400 text-white shadow-md",children:[i.jsx("div",{className:"text-xs opacity-90",children:"Supervisores Activos"}),i.jsx("div",{className:"text-2xl font-bold",children:s})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900 col-span-1",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Especialidad"}),i.jsx($o,{width:"100%",height:300,children:i.jsxs(CT,{children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"grad1",x1:"0",y1:"0",x2:"1",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:"#6366F1"}),i.jsx("stop",{offset:"100%",stopColor:"#22C55E"})]})}),i.jsx(xE,{data:e.porEspecialidad,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,strokeWidth:3,stroke:"#ffffff",children:e.porEspecialidad.map((l,c)=>i.jsx(kA,{fill:t[c%t.length]},`cell-${c}`))}),i.jsx(Vo,{})]})}),i.jsx("div",{className:"-mt-24 h-0 flex items-center justify-center pointer-events-none select-none",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Total"}),i.jsx("div",{className:"text-2xl font-bold",children:r})]})})]}),i.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900 col-span-1 md:col-span-2",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Supervisor"}),i.jsx($o,{width:"100%",height:300,children:i.jsxs(Nf,{data:e.porSupervisor,layout:"vertical",margin:{left:12,right:12},children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"gradGreen",x1:"0",y1:"0",x2:"1",y2:"0",children:[i.jsx("stop",{offset:"0%",stopColor:"#06B6D4"}),i.jsx("stop",{offset:"100%",stopColor:"#22C55E"})]})}),i.jsx(Rc,{type:"number",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12}}),i.jsx(Lc,{type:"category",dataKey:"name",width:140,axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:12}}),i.jsx(Vo,{cursor:{fill:"rgba(148,163,184,0.15)"}}),i.jsx(jd,{dataKey:"value",fill:"url(#gradGreen)",name:"Empresas",radius:[8,8,8,8]})]})})]}),i.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900 col-span-1 lg:col-span-3",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Distribucin por Comuna"}),i.jsx($o,{width:"100%",height:300,children:i.jsxs(Nf,{data:e.porComuna,margin:{left:0,right:0},children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"gradIndigo",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:"#6366F1"}),i.jsx("stop",{offset:"100%",stopColor:"#8B5CF6"})]})}),i.jsx(Rc,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:12},interval:0,angle:-15,height:60,dy:10}),i.jsx(Lc,{axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12}}),i.jsx(Vo,{cursor:{fill:"rgba(99,102,241,0.08)"}}),i.jsx(jd,{dataKey:"value",name:"Empresas",fill:"url(#gradIndigo)",radius:[6,6,0,0]})]})})]}),i.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900 col-span-1",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Calificacin por mbito"}),i.jsx($o,{width:"100%",height:300,children:i.jsxs(Tat,{cx:"50%",cy:"50%",outerRadius:"80%",data:e.calificacionPorAmbito,children:[i.jsx(Qhe,{stroke:"#e2e8f0"}),i.jsx(vT,{dataKey:"subject",tick:{fill:"#64748b",fontSize:12}}),i.jsx(gT,{angle:30,domain:[0,5],tick:{fill:"#94a3b8",fontSize:10}}),i.jsx(k9,{name:"Promedio",dataKey:"A",stroke:"#06B6D4",fill:"#06B6D4",fillOpacity:.35}),i.jsx(Vo,{})]})})]}),i.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900 col-span-1 md:col-span-2",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Ranking de Empresas"}),i.jsx("div",{className:"overflow-y-auto max-h-[300px] divide-y",children:(e.ranking||[]).map((l,c)=>i.jsxs("div",{className:"flex items-center justify-between py-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-sm font-semibold text-slate-600",children:c+1}),i.jsx("span",{className:"font-medium",children:l.nombre})]}),i.jsxs("span",{className:"font-bold text-amber-500",children:[(l.promedio||0).toFixed(1)," "]})]},l.id||c))})]})]})]})},Xwt=({data:e})=>i.jsx(Vxe,{data:e}),Ywt=()=>{const{currentUser:e}=yE(),[t,r]=w.useState([]),[n,a]=w.useState([]),[s,o]=w.useState([]),[l,c]=w.useState("todos"),[u,d]=w.useState("list"),[f,A]=w.useState(!0),[m,g]=w.useState(null),[x,v]=w.useState(!0),[y,N]=w.useState(null),[C,_]=w.useState(null),[j,I]=w.useState(null),[T,k]=w.useState([]),[B,M]=w.useState(null),[P,S]=w.useState(!1),[L,H]=w.useState("DRIVING"),[q,Q]=w.useState(""),[z,K]=w.useState([]),[Z,U]=w.useState(void 0),[Y,R]=w.useState({}),[D,W]=w.useState({}),J="AIzaSyDjpSq97TvCxx7jIY7fEapTysmiZ1H30bg",{isLoaded:le,error:ie}=qwt(J),re=w.useMemo(()=>{const me=e==null?void 0:e.profile;return me===It.SUBDIRECCION||me===It.PROFESORADO||me===It.COORDINACION_TP},[e==null?void 0:e.profile]);w.useEffect(()=>{if(!re){v(!1);return}v(!0);const me=sme(r),Ve=Mlt(a),Xe=Llt(o),Ie=Hlt(K);return v(!1),()=>{me(),Ve(),Xe(),Ie(),Object.values(Y).forEach(Be=>{var et;return(et=Be.unsub)==null?void 0:et.call(Be)})}},[re]),w.useEffect(()=>{Object.values(Y).forEach(Ie=>{var Be;return(Be=Ie.unsub)==null?void 0:Be.call(Ie)});const me={},Ve=Ie=>!!Ie&&(Ie.startsWith("3")||Ie.startsWith("4"));let Xe=s.filter(Ie=>Ve(Ie.curso));return l!=="todos"&&(Xe=Xe.filter(Ie=>(Ie.curso||"")===l)),Xe.forEach(Ie=>{const Be=wpt(Ie.id,et=>{R(bt=>({...bt,[Ie.id]:{...bt[Ie.id]||{},notas:et}}))});me[Ie.id]={notas:[],unsub:Be}}),R(Ie=>({...Ie,...me})),()=>{Object.values(me).forEach(Ie=>Ie.unsub&&Ie.unsub())}},[s,l]);const ce=w.useMemo(()=>{const me=t.reduce((et,bt)=>{const jt=bt.area||"Sin especificar";return et[jt]=(et[jt]||0)+1,et},{}),Ve=t.reduce((et,bt)=>{var qt;const jt=((qt=bt.docenteSupervisor)==null?void 0:qt.nombreCompleto)||"Sin asignar";return et[jt]=(et[jt]||0)+1,et},{}),Xe=t.reduce((et,bt)=>{const jt=bt.direccion.split(",").map(ir=>ir.trim()),qt=jt.length>1?jt[1]:"Desconocida";return et[qt]=(et[qt]||0)+1,et},{}),Ie=Qxe.map(et=>{const bt=t.flatMap(qt=>{var ir;return(ir=qt.calificaciones.find(Ut=>Ut.elemento===et.elemento))==null?void 0:ir.score}).filter(qt=>qt!=null),jt=bt.length>0?bt.reduce((qt,ir)=>qt+ir,0)/bt.length:0;return{subject:et.elemento.split(" ")[0],A:jt,fullMark:5}}),Be=t.map(et=>{const bt=et.calificaciones.map(qt=>qt.score).filter(qt=>qt!=null),jt=bt.length>0?bt.reduce((qt,ir)=>qt+ir,0)/bt.length:0;return{...et,promedio:jt}}).filter(et=>et.promedio>0).sort((et,bt)=>bt.promedio-et.promedio);return{porEspecialidad:Object.entries(me).map(([et,bt])=>({name:et,value:bt})),porSupervisor:Object.entries(Ve).map(([et,bt])=>({name:et,value:bt})),porComuna:Object.entries(Xe).map(([et,bt])=>({name:et,value:bt})),calificacionPorAmbito:Ie,ranking:Be}},[t]),oe=async()=>{if(m)try{const me=new Set(m.estudiantesAsignados||[]),Ve=m.id,Xe=[];if(me.size>0){const Ie=new Map(s.map(Be=>[Be.id,Be]));for(const Be of t){if(Ve&&Be.id===Ve)continue;const et=Be.estudiantesAsignados||[];for(const bt of me)if(et.includes(bt)){const jt=Ie.get(bt);jt&&Xe.push({student:jt,empresa:Be})}}}if(Xe.length>0){const Be=`Algunos estudiantes ya estn asignados a otra empresa:

${Xe.map(jt=>` ${jt.student.nombreCompleto}${jt.student.curso?` (${jt.student.curso})`:""}  ${jt.empresa.nombre}`).join(`
`)}

Deseas reasignarlos a "${m.nombre}"? Esto los quitar de su empresa anterior.`;if(!window.confirm(Be))return;const bt=new Map;for(const{student:jt,empresa:qt}of Xe)bt.has(qt.id)||bt.set(qt.id,{empresa:qt,ids:new Set}),bt.get(qt.id).ids.add(jt.id);for(const{empresa:jt,ids:qt}of bt.values()){const ir=(jt.estudiantesAsignados||[]).filter(Ut=>!qt.has(Ut));await Ww({...jt,estudiantesAsignados:ir})}}await Ww(m),d("list"),g(null),N(null)}catch(me){console.error(me),alert("No se pudo guardar la empresa.")}},be=async me=>{window.confirm("Est seguro de eliminar esta empresa?")&&await Rlt(me)},X=(me,Ve)=>{g(Xe=>Xe?{...Xe,[me]:Ve}:null)},je=async me=>{var Ve;if(N(me),(Ve=me==null?void 0:me.value)!=null&&Ve.place_id&&le){const Xe=await De(me.value.place_id);X("direccion",me.label||""),X("coordenadas",Xe)}else X("direccion",(me==null?void 0:me.label)||"")},De=async me=>window.google?await new Promise(Ve=>{new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:me,fields:["geometry"]},(Ie,Be)=>{var et;Be===window.google.maps.places.PlacesServiceStatus.OK&&((et=Ie==null?void 0:Ie.geometry)!=null&&et.location)?Ve({lat:Ie.geometry.location.lat(),lng:Ie.geometry.location.lng()}):Ve(null)})}):null,ke=me=>{g(JSON.parse(JSON.stringify(me))),me.direccion&&N({label:me.direccion,value:{description:me.direccion}}),d("form")},ue=async me=>{var Ve;if(_(me),(Ve=me==null?void 0:me.value)!=null&&Ve.place_id&&le){const Xe=await De(me.value.place_id);I(Xe)}},we=me=>{k(Ve=>Ve.some(Xe=>Xe.id===me.id)?Ve.filter(Xe=>Xe.id!==me.id):[...Ve,me])},Ae=()=>{if(!j||T.length===0||!le)return;S(!0);const me=new window.google.maps.DirectionsService,Ve=T.filter(et=>et.coordenadas).map(et=>({location:et.coordenadas,stopover:!0})),Xe=Ve.slice(0,23);Ve.length>Xe.length&&console.warn("Se limitaron las paradas a 23 por restriccin de Google Directions.");const Ie=et=>({origin:j,destination:j,waypoints:Xe,optimizeWaypoints:!0,travelMode:et,region:"CL",provideRouteAlternatives:!1}),Be=async(et,bt=3)=>await new Promise((jt,qt)=>{const ir=Ut=>{me.route(Ie(et),(Nr,tr)=>{if(tr===window.google.maps.DirectionsStatus.OK&&Nr)jt(Nr);else if(tr===window.google.maps.DirectionsStatus.UNKNOWN_ERROR||tr===window.google.maps.DirectionsStatus.OVER_QUERY_LIMIT)if(Ut<bt){const Xr=400*Math.pow(2,Ut);setTimeout(()=>ir(Ut+1),Xr)}else qt(tr);else window.google.maps.DirectionsStatus.ZERO_RESULTS,qt(tr)})};ir(0)});(async()=>{try{const et=window.google.maps.TravelMode[L];let bt=await Be(et);M(bt)}catch(et){if(L==="TRANSIT")try{const bt=await Be(window.google.maps.TravelMode.DRIVING);M(bt),alert("No se encontr una ruta en transporte pblico. Se us Automvil como alternativa.")}catch(bt){console.error("Fallo al calcular ruta (fallback DRIVING):",bt),alert("No se pudo calcular la ruta en este momento. Intenta nuevamente ms tarde.")}else console.error("Fallo al calcular ruta:",et),alert("No se pudo calcular la ruta en este momento. Intenta nuevamente ms tarde.")}finally{S(!1)}})()},de=()=>{M(null),_(null),I(null),k([]),Q("")},ae=async()=>{if(!q||!C||!j||T.length===0){alert("Por favor, asigna un nombre a la ruta y asegrate de tener un punto de partida y empresas seleccionadas.");return}const me={nombre:q,startPoint:{label:C.label,coords:j},empresas:T.map(Ve=>({id:Ve.id,nombre:Ve.nombre,coordenadas:Ve.coordenadas})),travelMode:L,supervisor:Z};try{await Ult(me),alert("Ruta guardada con xito."),d("saved-routes")}catch{alert("Error al guardar la ruta.")}},fe=me=>{let Ve=0,Xe=0;const Ie=[],Be=et=>{let bt=et<0?~(et<<1):et<<1;for(;bt>=32;)Ie.push(String.fromCharCode((32|bt&31)+63)),bt>>=5;Ie.push(String.fromCharCode(bt+63))};for(const et of me){const bt=Math.round(et.lat*1e5),jt=Math.round(et.lng*1e5);Be(bt-Ve),Be(jt-Xe),Ve=bt,Xe=jt}return Ie.join("")},ge=me=>{var Ve;try{const Xe=(Ve=me==null?void 0:me.routes)==null?void 0:Ve[0];if(!Xe)return null;let Ie=[];if(Xe.overview_path&&Array.isArray(Xe.overview_path)&&Xe.overview_path.length)Ie=Xe.overview_path.map(bt=>({lat:bt.lat(),lng:bt.lng()}));else if(Xe.overview_polyline&&typeof Xe.overview_polyline.getPath=="function")Ie=Xe.overview_polyline.getPath().getArray().map(jt=>({lat:jt.lat(),lng:jt.lng()}));else return null;if(Ie.length>200){const bt=Math.ceil(Ie.length/200),jt=[];for(let qt=0;qt<Ie.length;qt+=bt)jt.push(Ie[qt]);jt[jt.length-1]!==Ie[Ie.length-1]&&jt.push(Ie[Ie.length-1]),Ie=jt}const Be=fe(Ie),et=new URL("https://maps.googleapis.com/maps/api/staticmap");return et.searchParams.set("size","1024x1024"),et.searchParams.set("scale","2"),et.searchParams.set("maptype","roadmap"),et.searchParams.append("path",`color:0x1e3a8aff|weight:4|enc:${Be}`),j&&et.searchParams.append("markers",`color:green|label:S|${j.lat},${j.lng}`),T.slice(0,5).forEach((bt,jt)=>{var qt,ir;if((qt=bt.coordenadas)!=null&&qt.lat&&((ir=bt.coordenadas)!=null&&ir.lng)){const Ut=String((jt+1)%10);et.searchParams.append("markers",`color:red|label:${Ut}|${bt.coordenadas.lat},${bt.coordenadas.lng}`)}}),et.searchParams.set("key",J),et.toString()}catch{return null}},xe=async me=>{const Ve=`/api/staticMap?u=${encodeURIComponent(me)}`,Xe=await fetch(Ve,{method:"GET"});if(!Xe.ok)throw new Error(`Proxy HTTP ${Xe.status}`);const Ie=await Xe.blob();return await new Promise((Be,et)=>{const bt=new FileReader;bt.onloadend=()=>Be(String(bt.result)),bt.onerror=et,bt.readAsDataURL(Ie)})},Ue=async()=>{if(!B){alert("Falta informacin para generar el PDF. Primero visualiza la ruta.");return}const me=new wr("p","mm","a4"),Ve=me.internal.pageSize.getWidth(),Xe=me.internal.pageSize.getHeight(),Ie=10,Be=Ve-Ie*2,et=16;me.setFillColor(15,23,42),me.rect(Ie,Ie,Be,et,"F"),me.setTextColor(255,255,255),me.setFontSize(14),me.text(`Ruta de Supervisin: ${q||"Sin nombre"}`,Ie+4,Ie+11),me.setFontSize(10);const bt=new Date,jt=String(bt.getDate()).padStart(2,"0"),qt=String(bt.getMonth()+1).padStart(2,"0"),ir=bt.getFullYear(),Ut=`Fecha: ${jt}-${qt}-${ir}`,Nr=`Modo: ${L==="DRIVING"?"Automvil":"Transporte Pblico"}`,tr=Z!=null&&Z.nombreCompleto?`Supervisor: ${Z.nombreCompleto}`:"",Xr=[Ut,Nr,tr].filter(Boolean).join("    ");me.text(Xr,Ie+Be-4,Ie+11,{align:"right"}),me.setTextColor(0,0,0);let hr=Ie+et+6;const Dr=document.getElementById("map-container-for-pdf"),or=Math.min(Be,120);let Yr=!1;try{const Tr=ge(B);if(Tr){const Zr=await xe(Tr);hr+or>Xe-Ie&&(me.addPage(),hr=Ie),me.addImage(Zr,"PNG",Ie,hr,or,or),hr+=or+6,Yr=!0}}catch{}if(!Yr&&Dr)try{const Zr=(await Hxe(Dr,{useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",scale:2})).toDataURL("image/png");hr+or>Xe-Ie&&(me.addPage(),hr=Ie),me.addImage(Zr,"PNG",Ie,hr,or,or),hr+=or+6,Yr=!0}catch{}Yr||(me.setDrawColor(200),me.setFillColor(245,245,245),hr+or>Xe-Ie&&(me.addPage(),hr=Ie),me.rect(Ie,hr,or,or,"FD"),me.setTextColor(120),me.setFontSize(11),me.text("Mapa no disponible para captura. (Se omiti en el PDF)",Ie+or/2,hr+or/2,{align:"center"}),me.setTextColor(0),hr+=or+6);const Xa=6;(Tr=>{hr+Xa>Xe-Ie&&(me.addPage(),hr=Ie),me.setFontSize(12),me.setFont("helvetica","bold"),me.text(Tr,Ie,hr),me.setFont("helvetica","normal"),hr+=Xa})("Detalles de la Ruta"),me.setFontSize(10);const Gn=B.routes[0].legs||[],is=Gn.reduce((Tr,Zr)=>{var Rn;return Tr+(((Rn=Zr.duration)==null?void 0:Rn.value)||0)},0),cn=(Gn.length>1?Gn.length-1:0)*(L==="TRANSIT"?45:30)*60,On=is+cn,Fn=Gn.reduce((Tr,Zr)=>{var Rn;return Tr+(((Rn=Zr.distance)==null?void 0:Rn.value)||0)},0),Ge=L==="DRIVING"?Fn/1e3/12*1300:0,Me=[{label:"Tiempo de viaje",value:`${Math.round(is/60)} min`},{label:"Tiempo en paradas",value:`${Math.round(cn/60)} min`},{label:"Duracin total",value:`${Math.round(On/60)} min`},{label:"Distancia total",value:`${(Fn/1e3).toFixed(1)} km`},{label:"Costo estimado",value:L==="DRIVING"?`$${Math.round(Ge).toLocaleString("es-CL")}`:""}],Qe=5,Ne=4,ve=(Be-Ne*(Qe-1))/Qe,Fe=16;let ze=Ie,He=hr+2;for(let Tr=0;Tr<Me.length;Tr++)He+Fe>Xe-Ie&&(me.addPage(),He=Ie,ze=Ie),me.setFillColor(248,250,252),me.setDrawColor(226,232,240),me.rect(ze,He,ve,Fe,"FD"),me.setTextColor(100,116,139),me.setFontSize(8),me.text(Me[Tr].label,ze+2,He+5),me.setTextColor(0,0,0),me.setFontSize(10),me.setFont("helvetica","bold"),me.text(String(Me[Tr].value),ze+2,He+11),me.setFont("helvetica","normal"),(Tr+1)%Qe===0?(ze=Ie,He+=Fe+2):ze+=ve+Ne;hr=He+(Me.length%Qe===0?0:Fe)+4;const Ye=2,rt=4,Ct=(Be-rt*(Ye-1))/Ye,Et=(Tr,Zr,Rn,Ji,Kc)=>{var Mu,Uu;const oc=`Tramo ${Ji+1}`,Rd=(Kc.start_address||"").split(",")[0],Js=(Kc.end_address||"").split(",")[0],Lu=`${Rd}  ${Js}
${((Mu=Kc.duration)==null?void 0:Mu.text)||""}  ${((Uu=Kc.distance)==null?void 0:Uu.text)||""}`,gn=2,Zs=Rn-gn*2,Hl=me.splitTextToSize(Lu,Zs),lc=5,Co=3.8,Ln=Hl.length*Co,cc=lc+2+Ln+2,Xo=Math.max(18,cc);me.setFillColor(248,250,252),me.setDrawColor(226,232,240),me.rect(Tr,Zr,Rn,Xo,"FD"),me.setTextColor(100,116,139),me.setFontSize(8),me.text(oc,Tr+gn,Zr+4),me.setTextColor(0,0,0),me.setFontSize(10),me.setFont("helvetica","normal");let Ld=Zr+4+2;for(const Ql of Hl)me.text(Ql,Tr+gn,Ld+5),Ld+=Co;return me.setFont("helvetica","normal"),Xo};let Qt=0,Ot=0,Kt=hr;for(let Tr=0;Tr<Gn.length;Tr++){const Zr=Ie+Qt*(Ct+rt);Kt+22>Xe-Ie&&(me.addPage(),Kt=Ie,hr=Ie,Qt=0,Ot=0);const Ji=Et(Zr,Kt,Ct,Tr,Gn[Tr]);Ot=Math.max(Ot,Ji),Qt++,Qt===Ye&&(Kt+=Ot+3,hr=Kt,Ot=0,Qt=0)}Qt!==0&&(hr=Kt+Ot+2);const Cr=Tr=>{hr+Tr>Xe-Ie&&(me.addPage(),hr=Ie)};Cr(20),me.setFontSize(11),me.setFont("helvetica","bold"),me.text("Firmas",Ie,hr),me.setFont("helvetica","normal"),hr+=8;const rn=T.map(Tr=>Tr.nombre||"Empresa"),Jr=3,an=12,va=(Be-an*(Jr-1))/Jr,Ys=14,Ya=[Ie,Ie+va+an,Ie+(va+an)*2];for(let Tr=0;Tr<rn.length;Tr++){const Zr=Tr%Jr;Zr===0&&Cr(Ys+8);const Rn=Ya[Zr];me.line(Rn,hr,Rn+va,hr),me.setFontSize(9);const Ji=`Firma representante: ${rn[Tr]}`;me.text(Ji.length>60?Ji.slice(0,59)+"":Ji,Rn+va/2,hr+6,{align:"center"}),Zr===Jr-1&&(hr+=Ys)}rn.length%Jr!==0&&(hr+=Ys),Cr(Ys+8);const os=Ya[1];me.line(os,hr,os+va,hr),me.setFontSize(9);const xs=Z!=null&&Z.nombreCompleto?`Firma profesor tutor: ${Z.nombreCompleto}`:"Firma profesor tutor";me.text(xs,os+va/2,hr+6,{align:"center"});try{me.save(`ruta-${q||"supervision"}.pdf`)}catch(Tr){console.error(Tr),alert("No se pudo descargar el PDF. Reintenta o prueba en otro navegador.")}},qe=me=>{_({label:me.startPoint.label,value:null}),I(me.startPoint.coords),k(me.empresas),H(me.travelMode),Q(me.nombre),U(me.supervisor),d("route")},Ze=async me=>{window.confirm("Ests seguro de que quieres eliminar esta ruta guardada?")&&(await Qlt(me),alert("Ruta eliminada."))},We=async(me,Ve)=>{try{const Xe=t.find(et=>(et.estudiantesAsignados||[]).includes(me.id))||null;if(!Ve){if(!Xe)return;const et=(Xe.estudiantesAsignados||[]).filter(bt=>bt!==me.id);await Ww({...Xe,estudiantesAsignados:et});return}const Ie=t.find(et=>et.id===Ve);if(!Ie){alert("Empresa no encontrada.");return}if(Xe&&Xe.id===Ie.id)return;if(Xe){const et=`"${me.nombreCompleto}" ya est asignado a "${Xe.nombre}".

Deseas reasignarlo a "${Ie.nombre}"?`;if(!window.confirm(et))return}if(Xe){const et=(Xe.estudiantesAsignados||[]).filter(bt=>bt!==me.id);await Ww({...Xe,estudiantesAsignados:et})}const Be=new Set(Ie.estudiantesAsignados||[]);Be.add(me.id),await Ww({...Ie,estudiantesAsignados:Array.from(Be)})}catch(Xe){console.error(Xe),alert("No se pudo asignar la empresa.")}};return x?i.jsx("div",{className:"text-center p-8",children:"Cargando..."}):re?ie?i.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-6 rounded-xl shadow-md",role:"alert",children:[i.jsx("p",{className:"font-bold text-lg",children:"Error de Configuracin de Google Maps"}),i.jsx("p",{className:"mt-2",children:ie.message}),i.jsxs("p",{className:"mt-4 text-sm",children:["Para solucionar este problema, por favor crea un archivo llamado ",i.jsx("code",{children:".env.local"})," en la raz del proyecto y aade la siguiente lnea:"]}),i.jsx("pre",{className:"bg-gray-800 text-white p-3 rounded-md mt-2 text-sm",children:"VITE_GOOGLE_MAPS_API_KEY=TU_API_KEY_DE_GOOGLE_MAPS"}),i.jsxs("p",{className:"mt-2 text-sm",children:["Reemplaza ",i.jsx("code",{children:"TU_API_KEY_DE_GOOGLE_MAPS"}),' con tu clave real. Asegrate de que la clave tenga habilitada la "Maps JavaScript API" y la "Places API" en tu consola de Google Cloud.']})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Gestin de Empresas"}),i.jsxs("div",{className:"flex items-center gap-4",children:[u!=="list"&&i.jsx("button",{onClick:()=>{d("list"),N(null),g(null),de()},className:"font-semibold hover:text-blue-600",children:" Volver al listado"}),u==="list"&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>d("dashboard"),title:"Dashboard",className:"bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[i.jsx(hoe,{size:18})," Dashboard"]}),i.jsx("button",{onClick:()=>d("estudiantes"),title:"Estudiantes",className:"bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Estudiantes"}),i.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-slate-100 dark:bg-slate-700 text-sm",children:[i.jsx("span",{children:"Vista moderna"}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",className:"sr-only peer",checked:f,onChange:me=>A(me.target.checked)}),i.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full dark:bg-gray-600 peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:bg-blue-600 after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all"})]})]}),i.jsx("button",{onClick:()=>d("saved-routes"),title:"Rutas Guardadas",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Rutas Guardadas"}),i.jsx("button",{onClick:()=>d("route"),title:"Ruta de Supervisin",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Ruta de Supervisin"}),i.jsx("button",{onClick:()=>d("map"),title:"Vista de Mapa",className:"bg-slate-200 hover:bg-slate-300 p-2 rounded-lg transition-colors",children:""}),i.jsx("button",{onClick:()=>{g(Wwt()),d("form")},className:"bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Crear Empresa"})]})]})]}),u==="dashboard"&&(f?i.jsx(Vxe,{data:ce}):i.jsx(Xwt,{data:ce})),u==="estudiantes"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Estudiantes (3 y 4)"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Curso"}),i.jsxs("select",{value:l,onChange:me=>c(me.target.value),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"todos",children:"Todos"}),dp.map(me=>i.jsx("option",{value:me,children:me},me))]})]})]}),(()=>{const me=Ie=>!!Ie&&(Ie.startsWith("3")||Ie.startsWith("4"));let Ve=s.filter(Ie=>me(Ie.curso));l!=="todos"&&(Ve=Ve.filter(Ie=>(Ie.curso||"")===l));const Xe=Ie=>{for(const Be of t){const et=Be.estudiantesAsignados||[];if(et.includes(Ie.id)||Ie.email&&et.includes(Ie.email))return Be}return null};return Ve.length===0?i.jsx("div",{className:"text-center p-8 text-slate-500 bg-slate-50 dark:bg-slate-700/30 rounded-lg",children:"No hay estudiantes para el filtro seleccionado."}):i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Ve.map(Ie=>{var et,bt,jt,qt,ir;const Be=Xe(Ie);return i.jsxs("div",{className:"p-4 rounded-xl border bg-white dark:bg-slate-900 flex flex-col gap-3 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 text-indigo-700 flex items-center justify-center font-bold",children:((et=Ie.nombreCompleto)==null?void 0:et.split(" ").map(Ut=>Ut[0]).slice(0,2).join(""))||"E"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:Ie.nombreCompleto}),i.jsx("div",{className:"text-xs text-slate-500",children:Ie.curso||""})]})]}),i.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700"}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(CG,{className:"w-4 h-4 text-slate-400 mt-1"}),i.jsxs("div",{children:[i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"Empresa:"})," ",(Be==null?void 0:Be.nombre)||"Sin empresa asignada"]}),i.jsx("div",{className:"text-xs text-slate-500",children:(Be==null?void 0:Be.direccion)||""})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(cx,{className:"w-4 h-4 text-slate-400 mt-1"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"Supervisor:"})," ",((bt=Be==null?void 0:Be.docenteSupervisor)==null?void 0:bt.nombreCompleto)||""]})]}),i.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700"}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx("label",{className:"text-xs text-slate-500",children:"Asignar empresa"}),i.jsxs("select",{value:(Be==null?void 0:Be.id)||"",onChange:Ut=>We(Ie,Ut.target.value),className:"border rounded-md px-2 py-1 text-sm dark:bg-slate-800 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Sin empresa"}),t.slice().sort((Ut,Nr)=>(Ut.nombre||"").localeCompare(Nr.nombre||"","es")).map(Ut=>i.jsx("option",{value:Ut.id,children:Ut.nombre},Ut.id))]})]}),i.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Notas de prctica"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("select",{value:((jt=D[Ie.id])==null?void 0:jt.color)||"yellow",onChange:Ut=>W(Nr=>{var tr;return{...Nr,[Ie.id]:{texto:((tr=Nr[Ie.id])==null?void 0:tr.texto)||"",color:Ut.target.value}}}),className:"border rounded px-1 py-0.5 text-xs dark:bg-slate-800 dark:border-slate-600",children:[i.jsx("option",{value:"yellow",children:"Amarillo"}),i.jsx("option",{value:"pink",children:"Rosado"}),i.jsx("option",{value:"green",children:"Verde"}),i.jsx("option",{value:"blue",children:"Azul"})]}),i.jsx("button",{className:"text-xs bg-indigo-500 hover:bg-indigo-600 text-white px-2 py-1 rounded",onClick:async()=>{var Xr,hr;const Ut=(((Xr=D[Ie.id])==null?void 0:Xr.texto)||"").trim(),Nr=((hr=D[Ie.id])==null?void 0:hr.color)||"yellow";if(!Ut)return;const tr={estudianteId:Ie.id,estudianteNombre:Ie.nombreCompleto,curso:Ie.curso,autorId:(e==null?void 0:e.id)||"system",autorNombre:(e==null?void 0:e.nombreCompleto)||"Usuario",texto:Ut,color:Nr};Be!=null&&Be.id&&(tr.empresaId=Be.id),Be!=null&&Be.nombre&&(tr.empresaNombre=Be.nombre),await Npt(tr),W(Dr=>({...Dr,[Ie.id]:{texto:"",color:Nr}}))},children:"Agregar"})]})]}),i.jsx("textarea",{value:((qt=D[Ie.id])==null?void 0:qt.texto)||"",onChange:Ut=>W(Nr=>{var tr;return{...Nr,[Ie.id]:{texto:Ut.target.value,color:((tr=Nr[Ie.id])==null?void 0:tr.color)||"yellow"}}}),placeholder:"Escribe una nota breve...",className:"w-full border rounded p-2 text-sm dark:bg-slate-800 dark:border-slate-600",rows:2}),i.jsx("div",{className:"space-y-2",children:(((ir=Y[Ie.id])==null?void 0:ir.notas)||[]).map(Ut=>i.jsxs("div",{className:`rounded p-2 text-sm shadow border ${Ut.color==="pink"?"bg-pink-50 border-pink-200":Ut.color==="green"?"bg-green-50 border-green-200":Ut.color==="blue"?"bg-blue-50 border-blue-200":"bg-yellow-50 border-yellow-200"}`,children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("div",{className:"font-medium text-slate-700",children:Ut.autorNombre||"Usuario"}),i.jsx("button",{onClick:()=>Cpt(Ut.id),className:"text-xs text-red-600 hover:underline",children:"Eliminar"})]}),i.jsx("div",{className:"text-slate-700 whitespace-pre-wrap",children:Ut.texto})]},Ut.id))})]})]},Ie.id)})})})()]}),u==="saved-routes"&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Rutas de Supervisin Guardadas"}),i.jsx("div",{className:"space-y-3",children:z.length===0?i.jsx("p",{className:"text-gray-500",children:"No tienes rutas guardadas."}):z.map(me=>i.jsxs("div",{className:"p-4 border rounded-lg flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold",children:me.nombre}),i.jsxs("p",{className:"text-sm text-slate-500",children:[me.empresas.length," paradas"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>qe(me),className:"bg-blue-500 text-white px-3 py-1 rounded-md text-sm",children:"Cargar"}),i.jsx("button",{onClick:()=>Ze(me.id),className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm",children:"Eliminar"})]})]},me.id))})]}),u==="route"&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Planificador de Ruta de Supervisin"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1. Ingresa un nombre para la ruta"}),i.jsx("input",{type:"text",value:q,onChange:me=>Q(me.target.value),placeholder:"Ej: Supervisin Zona Norte",className:"input-style w-full"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"2. Ingresa el punto de partida"}),i.jsx(hte,{apiKey:J,selectProps:{value:C,onChange:ue,placeholder:"Buscar direccin de partida..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3. Elige el modo de transporte"}),i.jsxs("div",{className:"flex gap-4 rounded-lg bg-slate-100 p-1",children:[i.jsx("button",{onClick:()=>H("DRIVING"),className:`w-full py-2 rounded-md transition ${L==="DRIVING"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Automvil"}),i.jsx("button",{onClick:()=>H("TRANSIT"),className:`w-full py-2 rounded-md transition ${L==="TRANSIT"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Transporte Pblico"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3.b Selecciona profesor supervisor (Coordinacin TP)"}),i.jsxs("select",{value:Z?JSON.stringify(Z):"",onChange:me=>{const Ve=me.target.value;U(Ve?JSON.parse(Ve):void 0)},className:"input-style w-full",children:[i.jsx("option",{value:"",children:"Sin supervisor"}),n.filter(me=>me.profile===It.COORDINACION_TP).map(me=>i.jsx("option",{value:JSON.stringify({id:me.id,nombreCompleto:me.nombreCompleto}),children:me.nombreCompleto},me.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"4. Selecciona las empresas a visitar"}),i.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-2 space-y-2",children:t.filter(me=>me.coordenadas).map(me=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:`route-${me.id}`,checked:T.some(Ve=>Ve.id===me.id),onChange:()=>we(me),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("label",{htmlFor:`route-${me.id}`,className:"ml-3 text-sm text-gray-700",children:me.nombre})]},me.id))})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("button",{onClick:Ae,disabled:!j||T.length===0||P,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:P?"Calculando...":"Visualizar Ruta"}),i.jsx("button",{onClick:ae,disabled:!q||!j||T.length===0,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Guardar Ruta"}),i.jsx("button",{onClick:Ue,disabled:!B,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Exportar PDF"}),i.jsx("button",{onClick:de,className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-lg transition-colors",children:"Limpiar"})]})]}),i.jsx("div",{})]}),B&&(()=>{var ir;const me=((ir=B.routes[0])==null?void 0:ir.legs)||[],Ve=me.reduce((Ut,Nr)=>{var tr;return Ut+(((tr=Nr.duration)==null?void 0:tr.value)||0)},0),Be=(me.length>1?me.length-1:0)*(L==="TRANSIT"?45:30)*60,et=Ve+Be,bt=me.reduce((Ut,Nr)=>{var tr;return Ut+(((tr=Nr.distance)==null?void 0:tr.value)||0)},0),jt=L==="DRIVING"?bt/1e3/12*1300:0,qt=(()=>{const Ut=new Date,Nr=String(Ut.getDate()).padStart(2,"0"),tr=String(Ut.getMonth()+1).padStart(2,"0"),Xr=Ut.getFullYear();return`${Nr}-${tr}-${Xr}`})();return i.jsxs("div",{className:"bg-white shadow-lg rounded-2xl mx-auto max-w-5xl p-6 font-sans text-gray-800 mt-6",children:[i.jsxs("div",{className:"bg-slate-900 text-white rounded-xl px-6 py-3 mb-4 flex justify-between items-center",children:[i.jsxs("div",{className:"font-bold",children:["Ruta de Supervisin: ",q||"Sin nombre"]}),i.jsxs("div",{className:"text-sm opacity-90 flex gap-3",children:[i.jsx("span",{children:qt}),i.jsx("span",{children:""}),i.jsx("span",{children:L==="DRIVING"?"Automvil":"Transporte Pblico"})]})]}),i.jsx("div",{className:"rounded-xl shadow-sm border overflow-hidden mb-6",children:i.jsx(hre,{empresas:T,isLoaded:le,route:B,heightPx:384})}),i.jsx("h3",{className:"text-lg font-bold mt-6",children:"Detalles de la Ruta"}),i.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3",children:[i.jsxs("div",{className:"p-3 rounded-lg bg-slate-50 border",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Tiempo de viaje"}),i.jsxs("div",{className:"font-semibold",children:[Math.round(Ve/60)," min"]})]}),i.jsxs("div",{className:"p-3 rounded-lg bg-slate-50 border",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Tiempo en paradas"}),i.jsxs("div",{className:"font-semibold",children:[Math.round(Be/60)," min"]})]}),i.jsxs("div",{className:"p-3 rounded-lg bg-slate-50 border",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Duracin total"}),i.jsxs("div",{className:"font-semibold",children:[Math.round(et/60)," min"]})]}),i.jsxs("div",{className:"p-3 rounded-lg bg-slate-50 border",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Distancia total"}),i.jsxs("div",{className:"font-semibold",children:[(bt/1e3).toFixed(1)," km"]})]}),i.jsxs("div",{className:"p-3 rounded-lg bg-slate-50 border",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Costo estimado"}),i.jsx("div",{className:"font-semibold",children:L==="DRIVING"?`$${Math.round(jt).toLocaleString("es-CL")}`:""})]})]}),i.jsx("div",{className:"mt-4 divide-y",children:me.map((Ut,Nr)=>{var tr,Xr;return i.jsx("div",{className:"py-2",children:i.jsxs("div",{className:"text-sm",children:["Tramo ",Nr+1,": ",(Ut.start_address||"").split(",")[0],"  ",(Ut.end_address||"").split(",")[0],". ",((tr=Ut.duration)==null?void 0:tr.text)||"","  ",((Xr=Ut.distance)==null?void 0:Xr.text)||""]})},Nr)})}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-8 mt-10",children:[T.map((Ut,Nr)=>i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"border-t-2 border-gray-400 h-10"}),i.jsxs("div",{className:"text-sm text-gray-600 mt-2 break-words",children:["Firma representante: ",Ut.nombre||"Empresa"]})]},Ut.id||Nr)),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"border-t-2 border-gray-400 h-10"}),i.jsx("div",{className:"text-sm text-gray-600 mt-2 break-words",children:Z!=null&&Z.nombreCompleto?`Firma profesor tutor: ${Z.nombreCompleto}`:"Firma profesor tutor"})]})]})]})})()]}),u==="map"&&i.jsx(hre,{empresas:t,isLoaded:le}),u==="list"&&i.jsx("div",{className:"space-y-3",children:t.length===0?i.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay empresas registradas."}):t.map(me=>{var Ve,Xe;return i.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg",children:me.nombre}),i.jsxs("p",{className:"text-sm text-slate-500",children:[me.rut," | ",me.direccion]}),i.jsxs("p",{className:"text-sm text-slate-600",children:["rea: ",me.area||"No especificada"," | Cupos: ",me.cupos," | Supervisor: ",((Ve=me.docenteSupervisor)==null?void 0:Ve.nombreCompleto)||"Ninguno"," | Estudiantes: ",((Xe=me.estudiantesAsignados)==null?void 0:Xe.length)||0]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:()=>ke(me),className:"text-sm font-semibold text-blue-600 hover:text-blue-800",children:"Editar"}),i.jsx("button",{onClick:()=>be(me.id),className:"text-sm text-red-500 hover:text-red-700",children:"Eliminar"})]})]})},me.id)})}),u==="form"&&m&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"id"in m?"Editando Empresa":"Nueva Empresa"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(CG,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{value:m.nombre,onChange:me=>X("nombre",me.target.value),placeholder:"Nombre Empresa",className:"input-style pl-10",required:!0})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(f4e,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{value:m.rut,onChange:me=>X("rut",me.target.value),placeholder:"RUT Empresa",className:"input-style pl-10",required:!0})]}),i.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[i.jsx(LN,{className:"absolute left-3 top-5 -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),i.jsx("div",{className:"w-full pl-10",children:i.jsx(hte,{apiKey:J,selectProps:{value:y,onChange:je,placeholder:"Buscar direccin..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(cx,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{value:m.contacto,onChange:me=>X("contacto",me.target.value),placeholder:"Contacto",className:"input-style pl-10"})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(Aoe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{type:"email",value:m.email||"",onChange:me=>X("email",me.target.value),placeholder:"Correo electrnico",className:"input-style pl-10"})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(qs,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{type:"number",value:m.cupos,onChange:me=>X("cupos",parseInt(me.target.value)||1),placeholder:"N de cupos",className:"input-style pl-10",min:"1"})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(I1,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsxs("select",{value:m.area||"",onChange:me=>X("area",me.target.value),className:"input-style pl-10 w-full",children:[i.jsx("option",{value:"",disabled:!0,children:"Seleccione un rea"}),Kwt.map(me=>i.jsx("option",{value:me,children:me},me))]})]}),i.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[i.jsx(cx,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsxs("select",{value:m.docenteSupervisor?JSON.stringify(m.docenteSupervisor):"",onChange:me=>{const Ve=me.target.value;X("docenteSupervisor",Ve?JSON.parse(Ve):void 0)},className:"input-style pl-10 w-full",children:[i.jsx("option",{value:"",children:"Sin supervisor asignado"}),n.map(me=>i.jsx("option",{value:JSON.stringify({id:me.id,nombreCompleto:me.nombreCompleto}),children:me.nombreCompleto},me.id))]})]}),i.jsxs("div",{className:"md:col-span-2 border rounded-lg p-4 bg-white dark:bg-slate-900",children:[i.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Estudiantes asignados"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-center",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Curso"}),i.jsxs("select",{className:"input-style w-full",value:l,onChange:me=>c(me.target.value),children:[i.jsx("option",{value:"todos",children:"Todos 3 y 4"}),i.jsx("option",{value:"3A",children:"3A"}),i.jsx("option",{value:"3B",children:"3B"}),i.jsx("option",{value:"3C",children:"3C"}),i.jsx("option",{value:"3D",children:"3D"}),i.jsx("option",{value:"4A",children:"4A"}),i.jsx("option",{value:"4B",children:"4B"}),i.jsx("option",{value:"4C",children:"4C"}),i.jsx("option",{value:"4D",children:"4D"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Selecciona estudiantes"}),i.jsxs("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-2",children:[s.filter(me=>{const Ve=(me.curso||"").toUpperCase(),Xe=/^([34])[A-D]$/.test(Ve),Ie=l==="todos"?Xe:Ve===l.toUpperCase();return Xe&&Ie}).map(me=>{const Ve=(m.estudiantesAsignados||[]).includes(me.id);return i.jsxs("label",{className:"flex items-center gap-2 py-1 px-2 rounded hover:bg-slate-50",children:[i.jsx("input",{type:"checkbox",checked:Ve,onChange:Xe=>{const Ie=new Set(m.estudiantesAsignados||[]);Xe.target.checked?Ie.add(me.id):Ie.delete(me.id),X("estudiantesAsignados",Array.from(Ie))},className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),i.jsxs("span",{className:"text-sm",children:[me.nombreCompleto," ",i.jsxs("span",{className:"text-slate-500",children:["(",me.curso||"",")"]})]})]},me.id)}),s.filter(me=>{const Ve=(me.curso||"").toUpperCase(),Xe=/^([34])[A-D]$/.test(Ve),Ie=l==="todos"?Xe:Ve===l.toUpperCase();return Xe&&Ie}).length===0&&i.jsx("div",{className:"text-sm text-slate-500 p-2",children:"No hay estudiantes para el filtro seleccionado."})]})]})]})]})]}),i.jsxs("div",{className:"space-y-4 pt-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Evaluacin de la Empresa"}),m.calificaciones.map((me,Ve)=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border",children:[i.jsx(poe,{className:"w-5 h-5 text-slate-400"}),i.jsx("span",{className:"flex-1 text-sm font-medium text-gray-700",children:me.elemento}),i.jsxs("select",{value:me.score||"",onChange:Xe=>{const Ie=[...m.calificaciones];Ie[Ve].score=Xe.target.value?parseInt(Xe.target.value):null,X("calificaciones",Ie)},className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[i.jsx("option",{value:"",children:"Sin calificar"}),[1,2,3,4,5].map(Xe=>i.jsx("option",{value:Xe,children:Xe},Xe))]})]},Ve))]}),i.jsx("div",{className:"pt-6",children:i.jsx("button",{onClick:oe,className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 rounded-lg transition-colors",disabled:!m.nombre||!m.rut,children:"Guardar Empresa"})})]})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Gestin de Empresas"}),i.jsx("div",{className:"p-4 rounded-lg border bg-amber-50 text-amber-800",children:"No tienes permisos para acceder a este mdulo. Requiere perfil de Subdireccin, Profesorado o Coordinacin TP."})]})},HH="dpd_actividades",$xe="dpd_respuestas",Jwt="usuarios";function Zwt(e,{includeArchived:t=!1}={}){const r=ht(ut,HH),n=t?Bt(r,Xt("createdAt","desc")):Bt(r,sr("isArchived","==",!1),Xt("createdAt","desc"));return lr(n,a=>{const s=a.docs.map(o=>({id:o.id,...o.data()}));e(s)})}async function e2t(e){const t=ht(ut,HH);return(await ln(t,{...e,isArchived:!1,createdAt:zn(),updatedAt:zn()})).id}async function t2t(e){const t=Wt(ut,HH,e);await ca(t)}function r2t(e,t){const r=ht(ut,$xe),n=Bt(r,sr("activityId","==",e),Xt("createdAt","desc"));return lr(n,a=>{const s=a.docs.map(o=>({id:o.id,...o.data()}));t(s)})}async function n2t(e){const t=ht(ut,$xe);return(await ln(t,{...e,createdAt:zn()})).id}function a2t(e,t){const r=ht(ut,Jwt),n=Bt(r,sr("profile","in",e));return lr(n,a=>{const s=a.docs.map(o=>{const l=o.data();return{id:o.id,nombre:(l==null?void 0:l.displayName)||(l==null?void 0:l.name)||(l==null?void 0:l.email)||"Sin nombre",profile:l==null?void 0:l.profile,email:l==null?void 0:l.email}});t(s)})}function zxe(e){return(e||"").trim().split(/\s+/).filter(Boolean).length}const w4=500,Are=()=>({titulo:"",dimension:"Liderazgo Curricular",subdimension:"Planificacin y organizacin del currculo",creadorPerfil:"PROFESORADO",creadorId:"",creadorNombre:"",preguntas:[],aiTema:"",aiCantidad:3}),o2=ft.memo(({title:e,icon:t,right:r,children:n})=>i.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-4 md:p-6 shadow-sm",children:[i.jsxs("header",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[t,e]}),r]}),n]})),s2t=ft.memo(({value:e,onChange:t,canCreate:r})=>{const n=(a,s)=>i.jsx("button",{onClick:()=>t(a),className:`px-3 py-1.5 rounded-lg text-sm border transition ${e===a?"bg-indigo-600 text-white border-indigo-600":"bg-white hover:bg-indigo-50"}`,disabled:a==="crear"&&!r,title:a==="crear"&&!r?"Tu perfil no crea actividades":"",children:s},a);return i.jsxs("div",{className:"flex items-center gap-2",children:[n("responder","Responder"),n("dashboard","Dashboard"),n("crear","Nueva actividad")]})}),i2t=ft.memo(({items:e,selectedId:t,onSelect:r,canDelete:n,onDelete:a})=>e.length?i.jsx("ul",{className:"space-y-2",children:e.map(s=>{const o=s.id===t;return i.jsxs("li",{children:[i.jsxs("button",{onClick:()=>r(s.id),className:`w-full flex items-center justify-between gap-2 rounded-xl border px-3 py-2 text-left transition ${o?"border-indigo-600 bg-indigo-600 text-white":"border-slate-200 bg-white hover:bg-indigo-50"}`,title:`${s.titulo}  ${s.dimension} / ${s.subdimension}`,children:[i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(r0,{className:"w-4 h-4"}),i.jsx("span",{className:"font-medium",children:s.titulo})]}),i.jsx(m3,{className:"w-4 h-4 opacity-70"})]}),n(s)&&i.jsx("button",{onClick:()=>a(s.id,s.titulo),className:"mt-1 text-xs text-red-600 hover:underline",title:"Eliminar actividad",children:"Eliminar"})]},s.id)})}):i.jsxs("div",{className:"p-4 text-sm text-slate-500 flex items-center gap-2",children:[i.jsx(r4e,{className:"w-4 h-4"})," An no hay actividades creadas."]})),vP=ft.memo(({label:e,value:t,pill:r})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-slate-500",children:[e,":"]}),r?i.jsx("span",{className:"px-2 py-0.5 rounded-full bg-indigo-50 text-indigo-700 text-xs",children:t}):i.jsx("span",{className:"font-medium",children:t})]})),o2t=ft.memo(({label:e,value:t,total:r=0})=>{const n=r>0?t/r*100:t>0?100:0,a=n>=75?"from-emerald-500":n>=50?"from-blue-500":n>=25?"from-amber-500":"from-rose-500";return i.jsxs("div",{className:"relative mt-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),i.jsx("span",{className:"text-sm font-medium text-slate-700",children:t})]}),i.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5",children:i.jsx("div",{className:`h-2.5 rounded-full bg-gradient-to-r ${a} to-transparent transition-all duration-500`,style:{width:`${Math.min(100,n)}%`}})})]})}),l2t=ft.memo(({option:e,options:t,onChangeText:r,onDelete:n})=>{const a=w.useCallback(o=>r(e.id,o.target.value),[e.id,r]),s=w.useCallback(()=>n(e.id),[e.id,n]);return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{value:e.text,onChange:a,className:"flex-1 border rounded-lg px-3 py-1.5",placeholder:`Opcin ${t.findIndex(o=>o.id===e.id)+1}`}),i.jsx("button",{onClick:s,className:"text-red-600 hover:text-red-700",title:"Eliminar opcin",children:i.jsx(Vn,{className:"w-4 h-4"})})]})}),c2t=ft.memo(({q:e,index:t,onRemove:r,onPatch:n})=>{const a=w.useCallback(f=>n(e.id,{enunciado:f.target.value}),[e.id,n]),s=w.useCallback(f=>n(e.id,{maxPalabras:parseInt(f.target.value||"500")}),[e.id,n]),o=w.useCallback(f=>n(e.id,{multiple:f.target.checked}),[e.id,n]),l=w.useCallback(()=>n(e.id,{opciones:[...e.opciones,{id:crypto.randomUUID(),text:""}]}),[e.id,e.opciones,n]),c=w.useCallback((f,A)=>{n(e.id,{opciones:e.opciones.map(m=>m.id===f?{...m,text:A}:m)})},[e.id,e.opciones,n]),u=w.useCallback(f=>n(e.id,{opciones:e.opciones.filter(A=>A.id!==f)}),[e.id,e.opciones,n]),d=w.useCallback(()=>r(e.id),[e.id,r]);return i.jsxs("div",{className:"border rounded-xl p-3",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("span",{className:"text-sm text-slate-600",children:["#",t+1,"  ",e.tipo==="abierta"?"Abierta":"Seleccin mltiple"]}),i.jsx("button",{onClick:d,className:"text-red-600 hover:text-red-700",title:"Eliminar",children:i.jsx(Vn,{className:"w-4 h-4"})})]}),i.jsx("input",{value:e.enunciado,onChange:a,className:"w-full border rounded-lg px-3 py-2 mb-2",placeholder:"Escribe el enunciado de la pregunta"}),e.tipo==="abierta"?i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("label",{className:"text-sm",children:"Mx. palabras"}),i.jsx("input",{type:"number",min:50,max:1e3,value:e.maxPalabras||w4,onChange:s,className:"w-24 border rounded-lg px-2 py-1"})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:e.multiple??!0,onChange:o})," Permitir seleccin mltiple"]}),e.opciones.map(f=>i.jsx(l2t,{option:f,options:e.opciones,onChangeText:c,onDelete:u},f.id)),i.jsx("button",{onClick:l,className:"text-sm text-sky-700 hover:underline",children:"+ Aadir opcin"})]})]})}),u2t=ft.memo(({q:e,respuestas:t,onChange:r})=>{var o,l;const n=w.useCallback(c=>r(e,c.target.value),[e,r]);if(e.tipo==="abierta"){const c=((o=t[e.id])==null?void 0:o.valorTexto)||"";return i.jsxs("div",{className:"border rounded-xl p-3",children:[i.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),i.jsx("textarea",{rows:5,value:c,onChange:n,placeholder:`Mximo ${e.maxPalabras||w4} palabras`,className:"w-full border rounded-lg px-3 py-2"}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[zxe(c)," / ",e.maxPalabras||w4," palabras"]})]})}const a=((l=t[e.id])==null?void 0:l.seleccionados)||[],s=c=>{let u=new Set(a);a.includes(c)?u.delete(c):e.multiple?u.add(c):u=new Set([c]),r(e,Array.from(u))};return i.jsxs("div",{className:"border rounded-xl p-3",children:[i.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),i.jsx("div",{className:"flex flex-col gap-2",children:(e.opciones||[]).map((c,u)=>{const d=a.includes(c);return i.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:e.multiple?"checkbox":"radio",name:e.multiple?`answer-${e.id}[]`:`answer-${e.id}`,checked:d,onChange:()=>s(c)}),i.jsx("span",{children:c})]},`${e.id}-${u}`)})})]})}),d2t=({currentUser:e})=>{var R;const[t,r]=w.useState("responder"),[n,a]=w.useState([]),[s,o]=w.useState(""),[l,c]=w.useState(""),[u,d]=w.useState(Are()),f=w.useCallback(D=>d(W=>({...W,...D})),[]),[A,m]=w.useState([]),[g,x]=w.useState({}),[v,y]=w.useState([]),N=FG.includes(e==null?void 0:e.profile)||(e==null?void 0:e.isAdmin);w.useEffect(()=>{const D=Zwt(W=>{a(W),o(J=>{var le;return J||(((le=W[0])==null?void 0:le.id)??"")})});return()=>D()},[]),w.useEffect(()=>{const D=a2t(["PROFESORADO","SUBDIRECCION"],W=>{m(W),d(J=>{if(J.creadorId)return J;const le=W.find(ie=>ie.id===(e==null?void 0:e.uid));return le?{...J,creadorId:le.id,creadorNombre:le.nombre,creadorPerfil:le.profile||J.creadorPerfil}:J})});return()=>D()},[e]),w.useEffect(()=>{if(!s)return;const D=r2t(s,y);return()=>D()},[s]);const C=w.useMemo(()=>n.find(D=>D.id===s),[n,s]);w.useMemo(()=>G0[u.dimension]||[],[u.dimension]),w.useEffect(()=>{d(D=>{const W=G0[D.dimension]||[],J=W.includes(D.subdimension)?D.subdimension:W[0]||"";return J===D.subdimension?D:{...D,subdimension:J}})},[u.dimension]);const _=w.useCallback(()=>{const D={id:crypto.randomUUID(),tipo:"abierta",enunciado:"Escribe aqu tu pregunta abierta",maxPalabras:w4};d(W=>({...W,preguntas:[...W.preguntas,D]}))},[]),j=w.useCallback(()=>{const D={id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:"Selecciona la(s) opcin(es) que corresponda(n)",opciones:[{id:crypto.randomUUID(),text:"Opcin 1"},{id:crypto.randomUUID(),text:"Opcin 2"},{id:crypto.randomUUID(),text:"Opcin 3"},{id:crypto.randomUUID(),text:"Opcin 4"}],multiple:!0};d(W=>({...W,preguntas:[...W.preguntas,D]}))},[]),I=w.useCallback((D,W)=>{d(J=>({...J,preguntas:J.preguntas.map(le=>le.id===D?{...le,...W}:le)}))},[]),T=w.useCallback(D=>{d(W=>({...W,preguntas:W.preguntas.filter(J=>J.id!==D)}))},[]),[k,B]=w.useState(!1),M=w.useCallback(async()=>{if(!(!u.aiTema||u.aiCantidad<1)){B(!0);try{const W=(await PUe(u.aiTema,u.aiCantidad)).map(J=>({id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:J.enunciado,opciones:J.opciones.slice(0,5).map(le=>({id:crypto.randomUUID(),text:le})),multiple:!0}));d(J=>({...J,preguntas:[...J.preguntas,...W]}))}finally{B(!1)}}},[u.aiTema,u.aiCantidad]),[P,S]=w.useState([]);w.useEffect(()=>{(async()=>{var J;if(!C)return;const W=[];for(const le of v)if(le.respuestas)for(const[ie,re]of Object.entries(le.respuestas)){const ce=C.preguntas.find(be=>be.id===ie);if(!ce||ce.tipo!=="abierta")continue;const oe=re;oe.tipo==="abierta"&&((J=oe.valorTexto)!=null&&J.trim())&&W.push(oe.valorTexto.trim())}if(console.log("Respuestas abiertas encontradas:",W.length),W.length>0)try{const le=await FUe(W,30);console.log("Keywords generadas:",le),S(le)}catch(le){console.error("Error al extraer keywords:",le),S([])}else S([])})()},[C,v]);const L=w.useMemo(()=>{if(!C)return{};const D={};for(const W of C.preguntas)W.tipo==="seleccion_multiple"&&(D[W.id]={},(W.opciones||[]).forEach(J=>D[W.id][J]=0));for(const W of v)for(const[J,le]of Object.entries(W.respuestas||{})){const ie=le;if((ie==null?void 0:ie.tipo)==="seleccion_multiple")for(const re of ie.seleccionados||[])D[J]||(D[J]={}),D[J][re]=(D[J][re]||0)+1}return D},[C,v]),H=w.useCallback(D=>D.map(W=>W.tipo==="abierta"?W:{...W,opciones:W.opciones.map(J=>J.text)}),[]),q=w.useCallback(()=>d(Are()),[]),Q=w.useCallback(async()=>{if(!u.titulo.trim())return alert("Debes ingresar un ttulo");if(!u.creadorId)return alert("Debes seleccionar un creador");const D={titulo:u.titulo,dimension:u.dimension,subdimension:u.subdimension,creadorId:u.creadorId,creadorNombre:u.creadorNombre,creadorPerfil:u.creadorPerfil,preguntas:H(u.preguntas)},W=await e2t(D);q(),o(W),r("responder")},[u,H,q]),z=w.useCallback(async(D,W)=>{var le;if(window.confirm(`Eliminar "${W}"?
Se eliminarn la actividad, sus preguntas y respuestas. Esta accin no se puede deshacer.`)){if(await t2t(D),s===D){const ie=n.filter(re=>re.id!==D);o(((le=ie[0])==null?void 0:le.id)||""),ie.length||r("crear")}alert("Actividad eliminada.")}},[s,n]),K=w.useCallback(async()=>{if(!C||!v.length)return;const D=new wr("p","mm","a4"),W=20;let J=W;D.setFontSize(20),D.text(`Informe: ${C.titulo}`,W,J),J+=10,D.setFontSize(12),D.text(`Dimensin: ${C.dimension}`,W,J+=10),D.text(`Subdimensin: ${C.subdimension}`,W,J+=7),D.text(`Creador: ${C.creadorNombre} (${C.creadorPerfil})`,W,J+=7),D.text(`Total de respuestas: ${v.length}`,W,J+=7),J+=10;for(const le of C.preguntas){if(J>250&&(D.addPage(),J=W),D.setFontSize(14),D.text(`Pregunta: ${le.enunciado}`,W,J+=10),J+=5,D.setFontSize(12),le.tipo==="seleccion_multiple"){const ie=L[le.id]||{},re=v.length;Object.entries(ie).forEach(([ce,oe])=>{const be=re>0?Math.round(oe/re*100):0;D.text(`${ce}: ${oe} respuestas (${be}%)`,W+5,J+=7)})}else{D.text("Respuestas:",W,J+=7);for(const ie of v){const re=ie.respuestas[le.id];if((re==null?void 0:re.tipo)==="abierta"&&re.valorTexto){J>250&&(D.addPage(),J=W),D.text(`${ie.userNombre}:`,W+5,J+=7);const ce=D.splitTextToSize(re.valorTexto,170);D.text(ce,W+10,J+=7),J+=ce.length*7}}}J+=10}if(P.length>0){J>250&&(D.addPage(),J=W),D.setFontSize(14),D.text("Conceptos clave detectados:",W,J+=10),D.setFontSize(12);const le=P.map(re=>`${re.keyword} (${Math.round(re.score*100)}%)`).join(", "),ie=D.splitTextToSize(le,170);D.text(ie,W,J+=7)}D.save(`informe_${C.titulo.replace(/\s+/g,"_")}.pdf`)},[C,v,L,P]),Z=w.useCallback(D=>{const W=e==null?void 0:e.isAdmin,J=D.creadorId===(e==null?void 0:e.uid);return N&&(W||J)},[e,N]),U=w.useCallback((D,W)=>{x(J=>({...J,[D.id]:D.tipo==="abierta"?{tipo:"abierta",valorTexto:W}:{tipo:"seleccion_multiple",seleccionados:W}}))},[]),Y=w.useCallback(async()=>{if(C){for(const D of C.preguntas){const W=g[D.id];if(W&&D.tipo==="abierta"&&D.maxPalabras){const J=zxe(W.valorTexto||"");if(J>D.maxPalabras)return alert(`La respuesta a "${D.enunciado}" supera el mximo de ${D.maxPalabras} palabras (${J}).`)}}await n2t({activityId:C.id,userId:(e==null?void 0:e.uid)||"anon",userNombre:(e==null?void 0:e.displayName)||(e==null?void 0:e.name)||"Annimo",respuestas:g}),x({}),alert("Respuestas enviadas!")}},[C,g,e]);return i.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 md:p-6 space-y-6",children:[i.jsxs("header",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(g3,{className:"w-7 h-7 text-indigo-600"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Desarrollo Profesional Docente"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Crea sesiones, responde y explora insights en tiempo real."})]})]}),i.jsx(s2t,{value:t,onChange:r,canCreate:N})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[i.jsx("aside",{className:"lg:col-span-4 xl:col-span-3",children:i.jsx(o2,{title:"Actividades",icon:i.jsx(r0,{className:"w-5 h-5 text-indigo-600"}),children:i.jsx(i2t,{items:n,selectedId:s,onSelect:D=>{o(D),r("responder")},canDelete:Z,onDelete:z})})}),i.jsxs("main",{className:"lg:col-span-8 xl:col-span-9 space-y-6",children:[t==="crear"&&N&&i.jsxs(o2,{title:"Nueva actividad / sesin",icon:i.jsx(_G,{className:"w-5 h-5 text-indigo-600"}),right:i.jsxs("button",{onClick:Q,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[i.jsx(Fl,{className:"w-4 h-4"}),"Guardar"]}),children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Ttulo"}),i.jsx("input",{value:u.titulo,onChange:D=>f({titulo:D.target.value}),placeholder:"Ej: Comunidades de aprendizaje 1",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"rea de trabajo (Dimensin PME)"}),i.jsx("select",{value:u.dimension,onChange:D=>f({dimension:D.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:Object.keys(G0).map(D=>i.jsx("option",{value:D,children:D},D))}),i.jsx("select",{value:u.subdimension,onChange:D=>f({subdimension:D.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:(G0[u.dimension]||[]).map(D=>i.jsx("option",{value:D,children:D},D))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Creador  Perfil"}),i.jsx("select",{value:u.creadorPerfil,onChange:D=>f({creadorPerfil:D.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:FG.map(D=>i.jsx("option",{value:D,children:D},D))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Creador  Usuario"}),i.jsxs("select",{value:u.creadorId,onChange:D=>{const W=D.target.value,J=A.find(le=>le.id===W);f({creadorId:W,creadorNombre:(J==null?void 0:J.nombre)||""})},className:"w-full border rounded-lg px-3 py-2 bg-white",children:[i.jsx("option",{value:"",children:"Seleccione"}),A.filter(D=>D.profile===u.creadorPerfil).map(D=>i.jsx("option",{value:D.id,children:D.nombre},D.id))]})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[i.jsx(yy,{className:"w-4 h-4"})," Preguntas"]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[i.jsxs("button",{onClick:_,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[i.jsx(gi,{className:"w-4 h-4"})," Abierta"]}),i.jsxs("button",{onClick:j,className:"inline-flex items-center gap-2 bg-sky-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[i.jsx(gi,{className:"w-4 h-4"})," Seleccin mltiple"]}),i.jsxs("div",{className:"ms-auto flex items-center gap-2",children:[i.jsxs("div",{className:"hidden md:inline-flex items-center gap-1 text-slate-500 text-xs",children:[i.jsx(goe,{className:"w-4 h-4"})," IA"]}),i.jsx("input",{value:u.aiTema,onChange:D=>f({aiTema:D.target.value}),placeholder:"Tema para IA (p. ej., evaluacin formativa)",className:"border rounded-lg px-3 py-1.5"}),i.jsx("input",{type:"number",min:1,max:10,value:u.aiCantidad,onChange:D=>f({aiCantidad:parseInt(D.target.value||"1")}),className:"w-20 border rounded-lg px-3 py-1.5"}),i.jsxs("button",{onClick:M,disabled:k||!u.aiTema,className:"inline-flex items-center gap-2 bg-fuchsia-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90 disabled:opacity-50",children:[i.jsx(lx,{className:"w-4 h-4"}),k?"Generando":"Generar con IA"]})]})]}),i.jsxs("div",{className:"space-y-4",children:[u.preguntas.map((D,W)=>i.jsx(c2t,{q:D,index:W,onRemove:T,onPatch:I},D.id)),u.preguntas.length===0&&i.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-2",children:[i.jsx(pa,{className:"w-4 h-4"}),"Aade preguntas abiertas o de seleccin mltiple (o usa IA)."]})]})]})]}),t==="responder"&&C&&i.jsx(o2,{title:`Responder: ${C.titulo}`,icon:i.jsx(qs,{className:"w-5 h-5 text-indigo-600"}),right:i.jsxs("button",{onClick:Y,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[i.jsx(Fl,{className:"w-4 h-4"}),"Enviar respuestas"]}),children:i.jsxs("div",{className:"grid gap-4",children:[i.jsxs("div",{className:"grid md:grid-cols-3 gap-3 text-sm",children:[i.jsx(vP,{pill:!0,label:"Dimensin",value:C.dimension}),i.jsx(vP,{pill:!0,label:"Subdimensin",value:C.subdimension}),i.jsx(vP,{pill:!0,label:"Creador",value:`${C.creadorNombre}  ${C.creadorPerfil}`})]}),C.preguntas.map(D=>i.jsx(u2t,{q:D,respuestas:g,onChange:U},D.id))]})}),t==="respuestas_individuales"&&C&&i.jsx(o2,{title:`Respuestas individuales: ${C.titulo}`,icon:i.jsx(qs,{className:"w-5 h-5 text-indigo-600"}),right:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:K,disabled:!v.length,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:v.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[i.jsx(Pf,{className:"w-4 h-4"}),"Descargar informe"]}),i.jsxs("button",{onClick:()=>{c(""),r("dashboard")},className:"inline-flex items-center gap-2 bg-slate-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[i.jsx(Tl,{className:"w-4 h-4"}),"Volver al dashboard"]})]}),children:i.jsxs("div",{className:"grid md:grid-cols-12 gap-6",children:[i.jsx("div",{className:"md:col-span-4 lg:col-span-3",children:i.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[i.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2",children:[i.jsx(wb,{className:"w-5 h-5 text-indigo-600"}),"Usuarios (",v.length,")"]}),i.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto pr-2",children:v.length>0?v.map(D=>{var W;return i.jsxs("button",{onClick:()=>c(D.userId),className:`w-full text-left p-3 rounded-lg transition-all duration-200 ${l===D.userId?"bg-indigo-50 text-indigo-700 font-medium border border-indigo-200 shadow-sm":"hover:bg-slate-50 border border-transparent"}`,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-1.5 bg-indigo-100 rounded-lg",children:i.jsx(wb,{className:"w-4 h-4 text-indigo-600"})}),i.jsx("span",{className:"font-medium",children:D.userNombre})]}),i.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1.5",children:[i.jsx(qo,{className:"w-3.5 h-3.5"}),new Date(((W=D.createdAt)==null?void 0:W.seconds)*1e3).toLocaleDateString()]})]},D.userId)}):i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(wb,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{className:"text-sm",children:"No hay respuestas todava"})]})})]})}),i.jsx("div",{className:"md:col-span-8 lg:col-span-9",children:l?i.jsxs(i.Fragment,{children:[i.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2 text-lg",children:[i.jsx(_G,{className:"w-5 h-5 text-indigo-600"}),"Respuestas de:"," ",i.jsx("span",{className:"text-indigo-600",children:(R=v.find(D=>D.userId===l))==null?void 0:R.userNombre})]}),i.jsx("div",{className:"space-y-6",children:C.preguntas.map(D=>{var le;const W=v.find(ie=>ie.userId===l),J=(le=W==null?void 0:W.respuestas)==null?void 0:le[D.id];return console.log("Respuesta encontrada:",{preguntaId:D.id,tipo:D.tipo,respuesta:J}),i.jsxs("div",{className:"bg-white p-6 border border-slate-200 rounded-xl shadow-sm",children:[i.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[i.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg shrink-0",children:D.tipo==="abierta"?i.jsx(TG,{className:"w-5 h-5 text-indigo-600"}):i.jsx(r1,{className:"w-5 h-5 text-indigo-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-900",children:D.enunciado}),i.jsx("p",{className:"text-sm text-slate-500 mt-1",children:D.tipo==="abierta"?"Respuesta abierta":"Seleccin mltiple"})]})]}),D.tipo==="abierta"?(J==null?void 0:J.tipo)==="abierta"&&J.valorTexto?i.jsx("div",{className:"mt-3 bg-slate-50 rounded-lg p-4",children:i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:J.valorTexto})}):i.jsx("p",{className:"text-slate-500 italic mt-3",children:"Sin respuesta"}):i.jsxs("div",{className:"space-y-2 mt-3",children:[(D.opciones||[]).map(ie=>{const ce=((J==null?void 0:J.tipo)==="seleccion_multiple"?J.seleccionados||[]:[]).includes(ie.text);return i.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-all ${ce?"border-indigo-200 bg-indigo-50 text-indigo-700 shadow-sm":"border-slate-200 text-slate-500"}`,children:[i.jsx("div",{className:"flex-shrink-0",children:ce?i.jsx(pa,{className:"w-4 h-4 text-indigo-600"}):i.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 rounded-full"})}),i.jsx("span",{className:"text-sm",children:typeof ie=="string"?ie:ie.text})]},typeof ie=="string"?ie:ie.id)}),!J&&i.jsx("p",{className:"text-slate-500 italic mt-1 text-sm",children:"Sin respuesta"})]})]},D.id)})})]}):i.jsx("div",{className:"text-center text-slate-500 py-12",children:"Selecciona un usuario para ver sus respuestas"})})]})}),t==="dashboard"&&C&&i.jsxs(o2,{title:`Dashboard: ${C.titulo}`,icon:i.jsx(FN,{className:"w-5 h-5 text-indigo-600"}),right:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>r("respuestas_individuales"),className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:[i.jsx(wb,{className:"w-4 h-4"}),"Ver respuestas individuales"]}),Z(C)&&i.jsxs("button",{onClick:()=>z(C.id,C.titulo),className:"inline-flex items-center gap-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[i.jsx(Vn,{className:"w-4 h-4"}),"Eliminar actividad"]})]}),children:[i.jsx("div",{className:"mb-6",children:i.jsxs("button",{onClick:K,disabled:!v.length,className:"w-full md:w-auto inline-flex items-center justify-center gap-2 bg-emerald-600 text-white px-6 py-3 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-lg font-medium",title:v.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[i.jsx(Pf,{className:"w-5 h-5"}),"Descargar Informe Global"]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[i.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:i.jsx(wb,{className:"w-5 h-5 text-indigo-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"Total respuestas"}),i.jsx("p",{className:"text-xl font-semibold",children:v.length})]})]})}),i.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:i.jsx(r1,{className:"w-5 h-5 text-emerald-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"Preguntas"}),i.jsx("p",{className:"text-xl font-semibold",children:C.preguntas.length})]})]})}),i.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:i.jsx(yA,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"Creador"}),i.jsx("p",{className:"text-sm font-medium truncate",children:C.creadorNombre})]})]})}),i.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:i.jsx(qo,{className:"w-5 h-5 text-purple-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"Fecha"}),i.jsx("p",{className:"text-sm font-medium",children:(()=>{const D=C.createdAt,W=D!=null&&D.toDate?D.toDate():D!=null&&D.seconds?new Date(D.seconds*1e3):D?new Date(D):null;return W?W.toLocaleDateString():"No disponible"})()})]})]})})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(t1,{className:"w-5 h-5 text-indigo-600"}),i.jsx("h4",{className:"font-semibold",children:"Resultados de seleccin mltiple"})]}),i.jsxs("div",{className:"space-y-4",children:[C.preguntas.filter(D=>D.tipo==="seleccion_multiple").map(D=>i.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[i.jsx("p",{className:"font-medium mb-3 text-slate-700",children:D.enunciado}),Object.entries(L[D.id]||{}).map(([W,J])=>i.jsx(o2t,{label:W,value:J},W)),i.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1",children:[i.jsx(D1,{className:"w-4 h-4"}),"Total respuestas: ",v.length]})]},D.id)),C.preguntas.filter(D=>D.tipo==="seleccion_multiple").length===0&&i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(r1,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{className:"text-sm",children:"No hay preguntas de seleccin mltiple en esta actividad."})]})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(e_e,{className:"w-5 h-5 text-indigo-600"}),i.jsx("h4",{className:"font-semibold",children:"Conceptos clave (IA)"})]}),P.length?i.jsx("div",{className:"flex flex-wrap gap-2",children:P.map(D=>i.jsx("span",{className:"rounded-full px-3 py-1.5 text-sm bg-gradient-to-r from-indigo-50 to-purple-50 text-indigo-700 border border-indigo-100 shadow-sm transition-transform hover:scale-105",style:{fontSize:`${12+Math.round(D.score*18)}px`},children:D.keyword},D.keyword))}):i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(TG,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{className:"text-sm",children:"An no hay suficientes respuestas abiertas para mostrar conceptos."})]})]})]})]})]})]})]})};var TE=e=>e.type==="checkbox",nx=e=>e instanceof Date,Zl=e=>e==null;const Gxe=e=>typeof e=="object";var vi=e=>!Zl(e)&&!Array.isArray(e)&&Gxe(e)&&!nx(e),f2t=e=>vi(e)&&e.target?TE(e.target)?e.target.checked:e.target.value:e,h2t=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,A2t=(e,t)=>e.has(h2t(t)),m2t=e=>{const t=e.constructor&&e.constructor.prototype;return vi(t)&&t.hasOwnProperty("isPrototypeOf")},QH=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function hs(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(QH&&(e instanceof Blob||n))&&(r||vi(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!m2t(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=hs(e[a]));else return e;return t}var uB=e=>/^\w*$/.test(e),As=e=>e===void 0,dB=e=>Array.isArray(e)?e.filter(Boolean):[],VH=e=>dB(e.replace(/["|']|\]/g,"").split(/\.|\[/)),pr=(e,t,r)=>{if(!t||!vi(e))return r;const n=(uB(t)?[t]:VH(t)).reduce((a,s)=>Zl(a)?a:a[s],e);return As(n)||n===e?As(e[t])?r:e[t]:n},kh=e=>typeof e=="boolean",za=(e,t,r)=>{let n=-1;const a=uB(t)?[t]:VH(t),s=a.length,o=s-1;for(;++n<s;){const l=a[n];let c=r;if(n!==o){const u=e[l];c=vi(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const mre={BLUR:"blur",FOCUS_OUT:"focusout"},Cd={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Q0={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},qxe=ft.createContext(null);qxe.displayName="HookFormContext";const p2t=()=>ft.useContext(qxe);var g2t=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(a,s,{get:()=>{const o=s;return t._proxyFormState[o]!==Cd.all&&(t._proxyFormState[o]=!n||Cd.all),e[o]}});return a};const Kxe=typeof window<"u"?ft.useLayoutEffect:ft.useEffect;var Hh=e=>typeof e=="string",x2t=(e,t,r,n,a)=>Hh(e)?(n&&t.watch.add(e),pr(r,e,a)):Array.isArray(e)?e.map(s=>(n&&t.watch.add(s),pr(r,s))):(n&&(t.watchAll=!0),r),n8=e=>Zl(e)||!Gxe(e);function Xm(e,t,r=new WeakSet){if(n8(e)||n8(t))return e===t;if(nx(e)&&nx(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const s of n){const o=e[s];if(!a.includes(s))return!1;if(s!=="ref"){const l=t[s];if(nx(o)&&nx(l)||vi(o)&&vi(l)||Array.isArray(o)&&Array.isArray(l)?!Xm(o,l,r):o!==l)return!1}}return!0}var v2t=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},Mc=e=>Array.isArray(e)?e:[e],pre=()=>{let e=[];return{get observers(){return e},next:a=>{for(const s of e)s.next&&s.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(s=>s!==a)}}),unsubscribe:()=>{e=[]}}},Wl=e=>vi(e)&&!Object.keys(e).length,$H=e=>e.type==="file",xf=e=>typeof e=="function",N4=e=>{if(!QH)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Wxe=e=>e.type==="select-multiple",zH=e=>e.type==="radio",b2t=e=>zH(e)||TE(e),bP=e=>N4(e)&&e.isConnected;function y2t(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=As(e)?n++:e[t[n++]];return e}function w2t(e){for(const t in e)if(e.hasOwnProperty(t)&&!As(e[t]))return!1;return!0}function ci(e,t){const r=Array.isArray(t)?t:uB(t)?[t]:VH(t),n=r.length===1?e:y2t(e,r),a=r.length-1,s=r[a];return n&&delete n[s],a!==0&&(vi(n)&&Wl(n)||Array.isArray(n)&&w2t(n))&&ci(e,r.slice(0,-1)),e}var Xxe=e=>{for(const t in e)if(xf(e[t]))return!0;return!1};function C4(e,t={}){const r=Array.isArray(e);if(vi(e)||r)for(const n in e)Array.isArray(e[n])||vi(e[n])&&!Xxe(e[n])?(t[n]=Array.isArray(e[n])?[]:{},C4(e[n],t[n])):Zl(e[n])||(t[n]=!0);return t}function Yxe(e,t,r){const n=Array.isArray(e);if(vi(e)||n)for(const a in e)Array.isArray(e[a])||vi(e[a])&&!Xxe(e[a])?As(t)||n8(r[a])?r[a]=Array.isArray(e[a])?C4(e[a],[]):{...C4(e[a])}:Yxe(e[a],Zl(t)?{}:t[a],r[a]):r[a]=!Xm(e[a],t[a]);return r}var l2=(e,t)=>Yxe(e,t,C4(t));const gre={value:!1,isValid:!1},xre={value:!0,isValid:!0};var Jxe=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!As(e[0].attributes.value)?As(e[0].value)||e[0].value===""?xre:{value:e[0].value,isValid:!0}:xre:gre}return gre},Zxe=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>As(e)?e:t?e===""?NaN:e&&+e:r&&Hh(e)?new Date(e):n?n(e):e;const vre={isValid:!1,value:null};var eve=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,vre):vre;function bre(e){const t=e.ref;return $H(t)?t.files:zH(t)?eve(e.refs).value:Wxe(t)?[...t.selectedOptions].map(({value:r})=>r):TE(t)?Jxe(e.refs).value:Zxe(As(t.value)?e.ref.value:t.value,e)}var N2t=(e,t,r,n)=>{const a={};for(const s of e){const o=pr(t,s);o&&za(a,s,o._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},E4=e=>e instanceof RegExp,c2=e=>As(e)?e:E4(e)?e.source:vi(e)?E4(e.value)?e.value.source:e.value:e,Vb=e=>({isOnSubmit:!e||e===Cd.onSubmit,isOnBlur:e===Cd.onBlur,isOnChange:e===Cd.onChange,isOnAll:e===Cd.all,isOnTouch:e===Cd.onTouched});const yre="AsyncFunction";var C2t=e=>!!e&&!!e.validate&&!!(xf(e.validate)&&e.validate.constructor.name===yre||vi(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===yre)),E2t=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),a8=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const y1=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const s=pr(e,a);if(s){const{_f:o,...l}=s;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(y1(l,t))break}else if(vi(l)&&y1(l,t))break}}};function wre(e,t,r){const n=pr(e,r);if(n||uB(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const s=a.join("."),o=pr(t,s),l=pr(e,s);if(o&&!Array.isArray(o)&&r!==s)return{name:r};if(l&&l.type)return{name:s,error:l};if(l&&l.root&&l.root.type)return{name:`${s}.root`,error:l.root};a.pop()}return{name:r}}var j2t=(e,t,r,n)=>{r(e);const{name:a,...s}=e;return Wl(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(o=>t[o]===(!n||Cd.all))},k2t=(e,t,r)=>!e||!t||e===t||Mc(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),S2t=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,_2t=(e,t)=>!dB(pr(e,t)).length&&ci(e,t),tve=(e,t,r)=>{const n=Mc(pr(e,r));return za(n,"root",t[r]),za(e,r,n),e},c5=e=>Hh(e);function Nre(e,t,r="validate"){if(c5(e)||Array.isArray(e)&&e.every(c5)||kh(e)&&!e)return{type:r,message:c5(e)?e:"",ref:t}}var pb=e=>vi(e)&&!E4(e)?e:{value:e,message:""},s8=async(e,t,r,n,a,s)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:f,max:A,pattern:m,validate:g,name:x,valueAsNumber:v,mount:y}=e._f,N=pr(r,x);if(!y||t.has(x))return{};const C=l?l[0]:o,_=S=>{a&&C.reportValidity&&(C.setCustomValidity(kh(S)?"":S||""),C.reportValidity())},j={},I=zH(o),T=TE(o),k=I||T,B=(v||$H(o))&&As(o.value)&&As(N)||N4(o)&&o.value===""||N===""||Array.isArray(N)&&!N.length,M=v2t.bind(null,x,n,j),P=(S,L,H,q=Q0.maxLength,Q=Q0.minLength)=>{const z=S?L:H;j[x]={type:S?q:Q,message:z,ref:o,...M(S?q:Q,z)}};if(s?!Array.isArray(N)||!N.length:c&&(!k&&(B||Zl(N))||kh(N)&&!N||T&&!Jxe(l).isValid||I&&!eve(l).isValid)){const{value:S,message:L}=c5(c)?{value:!!c,message:c}:pb(c);if(S&&(j[x]={type:Q0.required,message:L,ref:C,...M(Q0.required,L)},!n))return _(L),j}if(!B&&(!Zl(f)||!Zl(A))){let S,L;const H=pb(A),q=pb(f);if(!Zl(N)&&!isNaN(N)){const Q=o.valueAsNumber||N&&+N;Zl(H.value)||(S=Q>H.value),Zl(q.value)||(L=Q<q.value)}else{const Q=o.valueAsDate||new Date(N),z=U=>new Date(new Date().toDateString()+" "+U),K=o.type=="time",Z=o.type=="week";Hh(H.value)&&N&&(S=K?z(N)>z(H.value):Z?N>H.value:Q>new Date(H.value)),Hh(q.value)&&N&&(L=K?z(N)<z(q.value):Z?N<q.value:Q<new Date(q.value))}if((S||L)&&(P(!!S,H.message,q.message,Q0.max,Q0.min),!n))return _(j[x].message),j}if((u||d)&&!B&&(Hh(N)||s&&Array.isArray(N))){const S=pb(u),L=pb(d),H=!Zl(S.value)&&N.length>+S.value,q=!Zl(L.value)&&N.length<+L.value;if((H||q)&&(P(H,S.message,L.message),!n))return _(j[x].message),j}if(m&&!B&&Hh(N)){const{value:S,message:L}=pb(m);if(E4(S)&&!N.match(S)&&(j[x]={type:Q0.pattern,message:L,ref:o,...M(Q0.pattern,L)},!n))return _(L),j}if(g){if(xf(g)){const S=await g(N,r),L=Nre(S,C);if(L&&(j[x]={...L,...M(Q0.validate,L.message)},!n))return _(L.message),j}else if(vi(g)){let S={};for(const L in g){if(!Wl(S)&&!n)break;const H=Nre(await g[L](N,r),C,L);H&&(S={...H,...M(L,H.message)},_(H.message),n&&(j[x]=S))}if(!Wl(S)&&(j[x]={ref:C,...S},!n))return j}}return _(!0),j};const T2t={mode:Cd.onSubmit,reValidateMode:Cd.onChange,shouldFocusError:!0};function B2t(e={}){let t={...T2t,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:xf(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=vi(t.defaultValues)||vi(t.values)?hs(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:hs(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const A={array:pre(),state:pre()},m=t.criteriaMode===Cd.all,g=ae=>fe=>{clearTimeout(u),u=setTimeout(ae,fe)},x=async ae=>{if(!t.disabled&&(d.isValid||f.isValid||ae)){const fe=t.resolver?Wl((await T()).errors):await B(n,!0);fe!==r.isValid&&A.state.next({isValid:fe})}},v=(ae,fe)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((ae||Array.from(l.mount)).forEach(ge=>{ge&&(fe?za(r.validatingFields,ge,fe):ci(r.validatingFields,ge))}),A.state.next({validatingFields:r.validatingFields,isValidating:!Wl(r.validatingFields)}))},y=(ae,fe=[],ge,xe,Ue=!0,qe=!0)=>{if(xe&&ge&&!t.disabled){if(o.action=!0,qe&&Array.isArray(pr(n,ae))){const Ze=ge(pr(n,ae),xe.argA,xe.argB);Ue&&za(n,ae,Ze)}if(qe&&Array.isArray(pr(r.errors,ae))){const Ze=ge(pr(r.errors,ae),xe.argA,xe.argB);Ue&&za(r.errors,ae,Ze),_2t(r.errors,ae)}if((d.touchedFields||f.touchedFields)&&qe&&Array.isArray(pr(r.touchedFields,ae))){const Ze=ge(pr(r.touchedFields,ae),xe.argA,xe.argB);Ue&&za(r.touchedFields,ae,Ze)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=l2(a,s)),A.state.next({name:ae,isDirty:P(ae,fe),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else za(s,ae,fe)},N=(ae,fe)=>{za(r.errors,ae,fe),A.state.next({errors:r.errors})},C=ae=>{r.errors=ae,A.state.next({errors:r.errors,isValid:!1})},_=(ae,fe,ge,xe)=>{const Ue=pr(n,ae);if(Ue){const qe=pr(s,ae,As(ge)?pr(a,ae):ge);As(qe)||xe&&xe.defaultChecked||fe?za(s,ae,fe?qe:bre(Ue._f)):H(ae,qe),o.mount&&x()}},j=(ae,fe,ge,xe,Ue)=>{let qe=!1,Ze=!1;const We={name:ae};if(!t.disabled){if(!ge||xe){(d.isDirty||f.isDirty)&&(Ze=r.isDirty,r.isDirty=We.isDirty=P(),qe=Ze!==We.isDirty);const me=Xm(pr(a,ae),fe);Ze=!!pr(r.dirtyFields,ae),me?ci(r.dirtyFields,ae):za(r.dirtyFields,ae,!0),We.dirtyFields=r.dirtyFields,qe=qe||(d.dirtyFields||f.dirtyFields)&&Ze!==!me}if(ge){const me=pr(r.touchedFields,ae);me||(za(r.touchedFields,ae,ge),We.touchedFields=r.touchedFields,qe=qe||(d.touchedFields||f.touchedFields)&&me!==ge)}qe&&Ue&&A.state.next(We)}return qe?We:{}},I=(ae,fe,ge,xe)=>{const Ue=pr(r.errors,ae),qe=(d.isValid||f.isValid)&&kh(fe)&&r.isValid!==fe;if(t.delayError&&ge?(c=g(()=>N(ae,ge)),c(t.delayError)):(clearTimeout(u),c=null,ge?za(r.errors,ae,ge):ci(r.errors,ae)),(ge?!Xm(Ue,ge):Ue)||!Wl(xe)||qe){const Ze={...xe,...qe&&kh(fe)?{isValid:fe}:{},errors:r.errors,name:ae};r={...r,...Ze},A.state.next(Ze)}},T=async ae=>{v(ae,!0);const fe=await t.resolver(s,t.context,N2t(ae||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return v(ae),fe},k=async ae=>{const{errors:fe}=await T(ae);if(ae)for(const ge of ae){const xe=pr(fe,ge);xe?za(r.errors,ge,xe):ci(r.errors,ge)}else r.errors=fe;return fe},B=async(ae,fe,ge={valid:!0})=>{for(const xe in ae){const Ue=ae[xe];if(Ue){const{_f:qe,...Ze}=Ue;if(qe){const We=l.array.has(qe.name),me=Ue._f&&C2t(Ue._f);me&&d.validatingFields&&v([xe],!0);const Ve=await s8(Ue,l.disabled,s,m,t.shouldUseNativeValidation&&!fe,We);if(me&&d.validatingFields&&v([xe]),Ve[qe.name]&&(ge.valid=!1,fe))break;!fe&&(pr(Ve,qe.name)?We?tve(r.errors,Ve,qe.name):za(r.errors,qe.name,Ve[qe.name]):ci(r.errors,qe.name))}!Wl(Ze)&&await B(Ze,fe,ge)}}return ge.valid},M=()=>{for(const ae of l.unMount){const fe=pr(n,ae);fe&&(fe._f.refs?fe._f.refs.every(ge=>!bP(ge)):!bP(fe._f.ref))&&ie(ae)}l.unMount=new Set},P=(ae,fe)=>!t.disabled&&(ae&&fe&&za(s,ae,fe),!Xm(U(),a)),S=(ae,fe,ge)=>x2t(ae,l,{...o.mount?s:As(fe)?a:Hh(ae)?{[ae]:fe}:fe},ge,fe),L=ae=>dB(pr(o.mount?s:a,ae,t.shouldUnregister?pr(a,ae,[]):[])),H=(ae,fe,ge={})=>{const xe=pr(n,ae);let Ue=fe;if(xe){const qe=xe._f;qe&&(!qe.disabled&&za(s,ae,Zxe(fe,qe)),Ue=N4(qe.ref)&&Zl(fe)?"":fe,Wxe(qe.ref)?[...qe.ref.options].forEach(Ze=>Ze.selected=Ue.includes(Ze.value)):qe.refs?TE(qe.ref)?qe.refs.forEach(Ze=>{(!Ze.defaultChecked||!Ze.disabled)&&(Array.isArray(Ue)?Ze.checked=!!Ue.find(We=>We===Ze.value):Ze.checked=Ue===Ze.value||!!Ue)}):qe.refs.forEach(Ze=>Ze.checked=Ze.value===Ue):$H(qe.ref)?qe.ref.value="":(qe.ref.value=Ue,qe.ref.type||A.state.next({name:ae,values:hs(s)})))}(ge.shouldDirty||ge.shouldTouch)&&j(ae,Ue,ge.shouldTouch,ge.shouldDirty,!0),ge.shouldValidate&&Z(ae)},q=(ae,fe,ge)=>{for(const xe in fe){if(!fe.hasOwnProperty(xe))return;const Ue=fe[xe],qe=ae+"."+xe,Ze=pr(n,qe);(l.array.has(ae)||vi(Ue)||Ze&&!Ze._f)&&!nx(Ue)?q(qe,Ue,ge):H(qe,Ue,ge)}},Q=(ae,fe,ge={})=>{const xe=pr(n,ae),Ue=l.array.has(ae),qe=hs(fe);za(s,ae,qe),Ue?(A.array.next({name:ae,values:hs(s)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&ge.shouldDirty&&A.state.next({name:ae,dirtyFields:l2(a,s),isDirty:P(ae,qe)})):xe&&!xe._f&&!Zl(qe)?q(ae,qe,ge):H(ae,qe,ge),a8(ae,l)&&A.state.next({...r,name:ae}),A.state.next({name:o.mount?ae:void 0,values:hs(s)})},z=async ae=>{o.mount=!0;const fe=ae.target;let ge=fe.name,xe=!0;const Ue=pr(n,ge),qe=me=>{xe=Number.isNaN(me)||nx(me)&&isNaN(me.getTime())||Xm(me,pr(s,ge,me))},Ze=Vb(t.mode),We=Vb(t.reValidateMode);if(Ue){let me,Ve;const Xe=fe.type?bre(Ue._f):f2t(ae),Ie=ae.type===mre.BLUR||ae.type===mre.FOCUS_OUT,Be=!E2t(Ue._f)&&!t.resolver&&!pr(r.errors,ge)&&!Ue._f.deps||S2t(Ie,pr(r.touchedFields,ge),r.isSubmitted,We,Ze),et=a8(ge,l,Ie);za(s,ge,Xe),Ie?(!fe||!fe.readOnly)&&(Ue._f.onBlur&&Ue._f.onBlur(ae),c&&c(0)):Ue._f.onChange&&Ue._f.onChange(ae);const bt=j(ge,Xe,Ie),jt=!Wl(bt)||et;if(!Ie&&A.state.next({name:ge,type:ae.type,values:hs(s)}),Be)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?Ie&&x():Ie||x()),jt&&A.state.next({name:ge,...et?{}:bt});if(!Ie&&et&&A.state.next({...r}),t.resolver){const{errors:qt}=await T([ge]);if(qe(Xe),xe){const ir=wre(r.errors,n,ge),Ut=wre(qt,n,ir.name||ge);me=Ut.error,ge=Ut.name,Ve=Wl(qt)}}else v([ge],!0),me=(await s8(Ue,l.disabled,s,m,t.shouldUseNativeValidation))[ge],v([ge]),qe(Xe),xe&&(me?Ve=!1:(d.isValid||f.isValid)&&(Ve=await B(n,!0)));xe&&(Ue._f.deps&&Z(Ue._f.deps),I(ge,Ve,me,bt))}},K=(ae,fe)=>{if(pr(r.errors,fe)&&ae.focus)return ae.focus(),1},Z=async(ae,fe={})=>{let ge,xe;const Ue=Mc(ae);if(t.resolver){const qe=await k(As(ae)?ae:Ue);ge=Wl(qe),xe=ae?!Ue.some(Ze=>pr(qe,Ze)):ge}else ae?(xe=(await Promise.all(Ue.map(async qe=>{const Ze=pr(n,qe);return await B(Ze&&Ze._f?{[qe]:Ze}:Ze)}))).every(Boolean),!(!xe&&!r.isValid)&&x()):xe=ge=await B(n);return A.state.next({...!Hh(ae)||(d.isValid||f.isValid)&&ge!==r.isValid?{}:{name:ae},...t.resolver||!ae?{isValid:ge}:{},errors:r.errors}),fe.shouldFocus&&!xe&&y1(n,K,ae?Ue:l.mount),xe},U=ae=>{const fe={...o.mount?s:a};return As(ae)?fe:Hh(ae)?pr(fe,ae):ae.map(ge=>pr(fe,ge))},Y=(ae,fe)=>({invalid:!!pr((fe||r).errors,ae),isDirty:!!pr((fe||r).dirtyFields,ae),error:pr((fe||r).errors,ae),isValidating:!!pr(r.validatingFields,ae),isTouched:!!pr((fe||r).touchedFields,ae)}),R=ae=>{ae&&Mc(ae).forEach(fe=>ci(r.errors,fe)),A.state.next({errors:ae?r.errors:{}})},D=(ae,fe,ge)=>{const xe=(pr(n,ae,{_f:{}})._f||{}).ref,Ue=pr(r.errors,ae)||{},{ref:qe,message:Ze,type:We,...me}=Ue;za(r.errors,ae,{...me,...fe,ref:xe}),A.state.next({name:ae,errors:r.errors,isValid:!1}),ge&&ge.shouldFocus&&xe&&xe.focus&&xe.focus()},W=(ae,fe)=>xf(ae)?A.state.subscribe({next:ge=>"values"in ge&&ae(S(void 0,fe),ge)}):S(ae,fe,!0),J=ae=>A.state.subscribe({next:fe=>{k2t(ae.name,fe.name,ae.exact)&&j2t(fe,ae.formState||d,we,ae.reRenderRoot)&&ae.callback({values:{...s},...r,...fe,defaultValues:a})}}).unsubscribe,le=ae=>(o.mount=!0,f={...f,...ae.formState},J({...ae,formState:f})),ie=(ae,fe={})=>{for(const ge of ae?Mc(ae):l.mount)l.mount.delete(ge),l.array.delete(ge),fe.keepValue||(ci(n,ge),ci(s,ge)),!fe.keepError&&ci(r.errors,ge),!fe.keepDirty&&ci(r.dirtyFields,ge),!fe.keepTouched&&ci(r.touchedFields,ge),!fe.keepIsValidating&&ci(r.validatingFields,ge),!t.shouldUnregister&&!fe.keepDefaultValue&&ci(a,ge);A.state.next({values:hs(s)}),A.state.next({...r,...fe.keepDirty?{isDirty:P()}:{}}),!fe.keepIsValid&&x()},re=({disabled:ae,name:fe})=>{(kh(ae)&&o.mount||ae||l.disabled.has(fe))&&(ae?l.disabled.add(fe):l.disabled.delete(fe))},ce=(ae,fe={})=>{let ge=pr(n,ae);const xe=kh(fe.disabled)||kh(t.disabled);return za(n,ae,{...ge||{},_f:{...ge&&ge._f?ge._f:{ref:{name:ae}},name:ae,mount:!0,...fe}}),l.mount.add(ae),ge?re({disabled:kh(fe.disabled)?fe.disabled:t.disabled,name:ae}):_(ae,!0,fe.value),{...xe?{disabled:fe.disabled||t.disabled}:{},...t.progressive?{required:!!fe.required,min:c2(fe.min),max:c2(fe.max),minLength:c2(fe.minLength),maxLength:c2(fe.maxLength),pattern:c2(fe.pattern)}:{},name:ae,onChange:z,onBlur:z,ref:Ue=>{if(Ue){ce(ae,fe),ge=pr(n,ae);const qe=As(Ue.value)&&Ue.querySelectorAll&&Ue.querySelectorAll("input,select,textarea")[0]||Ue,Ze=b2t(qe),We=ge._f.refs||[];if(Ze?We.find(me=>me===qe):qe===ge._f.ref)return;za(n,ae,{_f:{...ge._f,...Ze?{refs:[...We.filter(bP),qe,...Array.isArray(pr(a,ae))?[{}]:[]],ref:{type:qe.type,name:ae}}:{ref:qe}}}),_(ae,!1,void 0,qe)}else ge=pr(n,ae,{}),ge._f&&(ge._f.mount=!1),(t.shouldUnregister||fe.shouldUnregister)&&!(A2t(l.array,ae)&&o.action)&&l.unMount.add(ae)}}},oe=()=>t.shouldFocusError&&y1(n,K,l.mount),be=ae=>{kh(ae)&&(A.state.next({disabled:ae}),y1(n,(fe,ge)=>{const xe=pr(n,ge);xe&&(fe.disabled=xe._f.disabled||ae,Array.isArray(xe._f.refs)&&xe._f.refs.forEach(Ue=>{Ue.disabled=xe._f.disabled||ae}))},0,!1))},X=(ae,fe)=>async ge=>{let xe;ge&&(ge.preventDefault&&ge.preventDefault(),ge.persist&&ge.persist());let Ue=hs(s);if(A.state.next({isSubmitting:!0}),t.resolver){const{errors:qe,values:Ze}=await T();r.errors=qe,Ue=hs(Ze)}else await B(n);if(l.disabled.size)for(const qe of l.disabled)ci(Ue,qe);if(ci(r.errors,"root"),Wl(r.errors)){A.state.next({errors:{}});try{await ae(Ue,ge)}catch(qe){xe=qe}}else fe&&await fe({...r.errors},ge),oe(),setTimeout(oe);if(A.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Wl(r.errors)&&!xe,submitCount:r.submitCount+1,errors:r.errors}),xe)throw xe},je=(ae,fe={})=>{pr(n,ae)&&(As(fe.defaultValue)?Q(ae,hs(pr(a,ae))):(Q(ae,fe.defaultValue),za(a,ae,hs(fe.defaultValue))),fe.keepTouched||ci(r.touchedFields,ae),fe.keepDirty||(ci(r.dirtyFields,ae),r.isDirty=fe.defaultValue?P(ae,hs(pr(a,ae))):P()),fe.keepError||(ci(r.errors,ae),d.isValid&&x()),A.state.next({...r}))},De=(ae,fe={})=>{const ge=ae?hs(ae):a,xe=hs(ge),Ue=Wl(ae),qe=Ue?a:xe;if(fe.keepDefaultValues||(a=ge),!fe.keepValues){if(fe.keepDirtyValues){const Ze=new Set([...l.mount,...Object.keys(l2(a,s))]);for(const We of Array.from(Ze))pr(r.dirtyFields,We)?za(qe,We,pr(s,We)):Q(We,pr(qe,We))}else{if(QH&&As(ae))for(const Ze of l.mount){const We=pr(n,Ze);if(We&&We._f){const me=Array.isArray(We._f.refs)?We._f.refs[0]:We._f.ref;if(N4(me)){const Ve=me.closest("form");if(Ve){Ve.reset();break}}}}if(fe.keepFieldsRef)for(const Ze of l.mount)Q(Ze,pr(qe,Ze));else n={}}s=t.shouldUnregister?fe.keepDefaultValues?hs(a):{}:hs(qe),A.array.next({values:{...qe}}),A.state.next({values:{...qe}})}l={mount:fe.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!fe.keepIsValid||!!fe.keepDirtyValues,o.watch=!!t.shouldUnregister,A.state.next({submitCount:fe.keepSubmitCount?r.submitCount:0,isDirty:Ue?!1:fe.keepDirty?r.isDirty:!!(fe.keepDefaultValues&&!Xm(ae,a)),isSubmitted:fe.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Ue?{}:fe.keepDirtyValues?fe.keepDefaultValues&&s?l2(a,s):r.dirtyFields:fe.keepDefaultValues&&ae?l2(a,ae):fe.keepDirty?r.dirtyFields:{},touchedFields:fe.keepTouched?r.touchedFields:{},errors:fe.keepErrors?r.errors:{},isSubmitSuccessful:fe.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},ke=(ae,fe)=>De(xf(ae)?ae(s):ae,fe),ue=(ae,fe={})=>{const ge=pr(n,ae),xe=ge&&ge._f;if(xe){const Ue=xe.refs?xe.refs[0]:xe.ref;Ue.focus&&(Ue.focus(),fe.shouldSelect&&xf(Ue.select)&&Ue.select())}},we=ae=>{r={...r,...ae}},de={control:{register:ce,unregister:ie,getFieldState:Y,handleSubmit:X,setError:D,_subscribe:J,_runSchema:T,_focusError:oe,_getWatch:S,_getDirty:P,_setValid:x,_setFieldArray:y,_setDisabledField:re,_setErrors:C,_getFieldArray:L,_reset:De,_resetDefaultValues:()=>xf(t.defaultValues)&&t.defaultValues().then(ae=>{ke(ae,t.resetOptions),A.state.next({isLoading:!1})}),_removeUnmounted:M,_disableForm:be,_subjects:A,_proxyFormState:d,get _fields(){return n},get _formValues(){return s},get _state(){return o},set _state(ae){o=ae},get _defaultValues(){return a},get _names(){return l},set _names(ae){l=ae},get _formState(){return r},get _options(){return t},set _options(ae){t={...t,...ae}}},subscribe:le,trigger:Z,register:ce,handleSubmit:X,watch:W,setValue:Q,getValues:U,reset:ke,resetField:je,clearErrors:R,unregister:ie,setError:D,setFocus:ue,getFieldState:Y};return{...de,formControl:de}}var Fm=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},yP=(e,t,r={})=>r.shouldFocus||As(r.shouldFocus)?r.focusName||`${e}.${As(r.focusIndex)?t:r.focusIndex}.`:"",wP=(e,t)=>[...e,...Mc(t)],NP=e=>Array.isArray(e)?e.map(()=>{}):void 0;function CP(e,t,r){return[...e.slice(0,t),...Mc(r),...e.slice(t)]}var EP=(e,t,r)=>Array.isArray(e)?(As(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],jP=(e,t)=>[...Mc(t),...Mc(e)];function I2t(e,t){let r=0;const n=[...e];for(const a of t)n.splice(a-r,1),r++;return dB(n).length?n:[]}var kP=(e,t)=>As(t)?[]:I2t(e,Mc(t).sort((r,n)=>r-n)),SP=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},Cre=(e,t,r)=>(e[t]=r,e);function D2t(e){const t=p2t(),{control:r=t.control,name:n,keyName:a="id",shouldUnregister:s,rules:o}=e,[l,c]=ft.useState(r._getFieldArray(n)),u=ft.useRef(r._getFieldArray(n).map(Fm)),d=ft.useRef(l),f=ft.useRef(!1);d.current=l,r._names.array.add(n),ft.useMemo(()=>o&&r.register(n,o),[r,o,n]),Kxe(()=>r._subjects.array.subscribe({next:({values:j,name:I})=>{if(I===n||!I){const T=pr(j,n);Array.isArray(T)&&(c(T),u.current=T.map(Fm))}}}).unsubscribe,[r,n]);const A=ft.useCallback(j=>{f.current=!0,r._setFieldArray(n,j)},[r,n]),m=(j,I)=>{const T=Mc(hs(j)),k=wP(r._getFieldArray(n),T);r._names.focus=yP(n,k.length-1,I),u.current=wP(u.current,T.map(Fm)),A(k),c(k),r._setFieldArray(n,k,wP,{argA:NP(j)})},g=(j,I)=>{const T=Mc(hs(j)),k=jP(r._getFieldArray(n),T);r._names.focus=yP(n,0,I),u.current=jP(u.current,T.map(Fm)),A(k),c(k),r._setFieldArray(n,k,jP,{argA:NP(j)})},x=j=>{const I=kP(r._getFieldArray(n),j);u.current=kP(u.current,j),A(I),c(I),!Array.isArray(pr(r._fields,n))&&za(r._fields,n,void 0),r._setFieldArray(n,I,kP,{argA:j})},v=(j,I,T)=>{const k=Mc(hs(I)),B=CP(r._getFieldArray(n),j,k);r._names.focus=yP(n,j,T),u.current=CP(u.current,j,k.map(Fm)),A(B),c(B),r._setFieldArray(n,B,CP,{argA:j,argB:NP(I)})},y=(j,I)=>{const T=r._getFieldArray(n);SP(T,j,I),SP(u.current,j,I),A(T),c(T),r._setFieldArray(n,T,SP,{argA:j,argB:I},!1)},N=(j,I)=>{const T=r._getFieldArray(n);EP(T,j,I),EP(u.current,j,I),A(T),c(T),r._setFieldArray(n,T,EP,{argA:j,argB:I},!1)},C=(j,I)=>{const T=hs(I),k=Cre(r._getFieldArray(n),j,T);u.current=[...k].map((B,M)=>!B||M===j?Fm():u.current[M]),A(k),c([...k]),r._setFieldArray(n,k,Cre,{argA:j,argB:T},!0,!1)},_=j=>{const I=Mc(hs(j));u.current=I.map(Fm),A([...I]),c([...I]),r._setFieldArray(n,[...I],T=>T,{},!0,!1)};return ft.useEffect(()=>{if(r._state.action=!1,a8(n,r._names)&&r._subjects.state.next({...r._formState}),f.current&&(!Vb(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!Vb(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(j=>{const I=pr(j.errors,n),T=pr(r._formState.errors,n);(T?!I&&T.type||I&&(T.type!==I.type||T.message!==I.message):I&&I.type)&&(I?za(r._formState.errors,n,I):ci(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const j=pr(r._fields,n);j&&j._f&&!(Vb(r._options.reValidateMode).isOnSubmit&&Vb(r._options.mode).isOnSubmit)&&s8(j,r._names.disabled,r._formValues,r._options.criteriaMode===Cd.all,r._options.shouldUseNativeValidation,!0).then(I=>!Wl(I)&&r._subjects.state.next({errors:tve(r._formState.errors,I,n)}))}r._subjects.state.next({name:n,values:hs(r._formValues)}),r._names.focus&&y1(r._fields,(j,I)=>{if(r._names.focus&&I.startsWith(r._names.focus)&&j.focus)return j.focus(),1}),r._names.focus="",r._setValid(),f.current=!1},[l,n,r]),ft.useEffect(()=>(!pr(r._formValues,n)&&r._setFieldArray(n),()=>{const j=(I,T)=>{const k=pr(r._fields,I);k&&k._f&&(k._f.mount=T)};r._options.shouldUnregister||s?r.unregister(n):j(n,!1)}),[n,r,a,s]),{swap:ft.useCallback(y,[A,n,r]),move:ft.useCallback(N,[A,n,r]),prepend:ft.useCallback(g,[A,n,r]),append:ft.useCallback(m,[A,n,r]),remove:ft.useCallback(x,[A,n,r]),insert:ft.useCallback(v,[A,n,r]),update:ft.useCallback(C,[A,n,r]),replace:ft.useCallback(_,[A,n,r]),fields:ft.useMemo(()=>l.map((j,I)=>({...j,[a]:u.current[I]||Fm()})),[l,a])}}function O2t(e={}){const t=ft.useRef(void 0),r=ft.useRef(void 0),[n,a]=ft.useState({isDirty:!1,isValidating:!1,isLoading:xf(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:xf(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!xf(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=B2t(e);t.current={...l,formState:n}}const s=t.current.control;return s._options=e,Kxe(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>a({...s._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),s._formState.isReady=!0,o},[s]),ft.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),ft.useEffect(()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)},[s,e.mode,e.reValidateMode]),ft.useEffect(()=>{e.errors&&(s._setErrors(e.errors),s._focusError())},[s,e.errors]),ft.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,e.shouldUnregister]),ft.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==n.isDirty&&s._subjects.state.next({isDirty:o})}},[s,n.isDirty]),ft.useEffect(()=>{e.values&&!Xm(e.values,r.current)?(s._reset(e.values,{keepFieldsRef:!0,...s._options.resetOptions}),r.current=e.values,a(o=>({...o}))):s._resetDefaultValues()},[s,e.values]),ft.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),t.current.formState=g2t(n,s),t.current}const i8=ht(Ar,"alternancias");async function P2t(e){return(await ln(i8,{...e,createdAt:zn(),updatedAt:zn()})).id}async function F2t({especialidad:e,pageSize:t=10,lastDoc:r}){let n=Bt(i8,Xt("createdAt","desc"),Dl(t));e&&(n=Bt(i8,sr("especialidad","==",e),Xt("createdAt","desc"),Dl(t))),r&&(n=Bt(n,_ie(r)));const a=await Ir(n);return{items:a.docs.map(o=>({id:o.id,...o.data()})),lastDoc:a.docs[a.docs.length-1]}}async function R2t(e,t){const r=Wt(Ar,"alternancias",e);await qi(r,{...t,updatedAt:zn()})}async function L2t(e){const t=Wt(Ar,"alternancias",e);await ca(t)}async function M2t(e,t,r){const n=ht(Ar,"alternancias",e,t);await ln(n,{...r,createdAt:zn()})}async function U2t(e,t){const r=ht(Ar,"alternancias",e,t);return(await Ir(r)).docs.map(a=>({id:a.id,...a.data()}))}async function H2t(e,t){const r=`alternancias/${e}/evidencias/${Date.now()}_${t.name}`,n=Od(Zx,r);await by(n,t);const a=await LA(n);return await M2t(e,"evidencias",{url:a,path:r,nombre:t.name}),{url:a,path:r}}const Sg=({title:e,icon:t,children:r,accent:n="indigo"})=>{const a={indigo:"border-indigo-200 bg-indigo-50/60",emerald:"border-emerald-200 bg-emerald-50/60",amber:"border-amber-200 bg-amber-50/60",sky:"border-sky-200 bg-sky-50/60",slate:"border-slate-200 bg-white/70"};return i.jsxs("div",{className:`rounded-2xl border ${a[n]} p-4 md:p-5 shadow-sm`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-9 h-9 rounded-xl bg-white shadow-sm border border-slate-200",children:t}),i.jsx("h2",{className:"text-lg md:text-xl font-semibold text-slate-800",children:e})]}),r]})},hl=({children:e,hint:t})=>i.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),t&&i.jsx("span",{className:"text-[11px] text-slate-500",children:t})]}),_g=({children:e,tone:t="indigo"})=>{const r={indigo:"bg-indigo-100 text-indigo-700 border-indigo-200",emerald:"bg-emerald-100 text-emerald-700 border-emerald-200",amber:"bg-amber-100 text-amber-800 border-amber-200",sky:"bg-sky-100 text-sky-700 border-sky-200"};return i.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${r[t]}`,children:e})},V0=({title:e,onClick:t,tone:r="neutral",children:n,type:a="button",disabled:s})=>{const o={primary:"bg-indigo-600 hover:bg-indigo-700 text-white border border-indigo-700 shadow-sm",danger:"bg-rose-600 hover:bg-rose-700 text-white border border-rose-700 shadow-sm",warning:"bg-amber-500 hover:bg-amber-600 text-white border border-amber-600 shadow-sm",success:"bg-emerald-600 hover:bg-emerald-700 text-white border border-emerald-700 shadow-sm",neutral:"bg-white hover:bg-slate-50 text-slate-700 border border-slate-200 shadow-sm"};return i.jsx("button",{type:a,title:e,onClick:t,disabled:s,className:`inline-flex items-center gap-2 px-3 py-2 rounded-xl text-sm transition ${o[r]} disabled:opacity-60`,children:n})},Q2t=({className:e})=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[i.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8Z"}),i.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),V2t=({currentUser:e})=>{const[t,r]=w.useState([]),[n,a]=w.useState(null),[s,o]=w.useState(!1),[l,c]=w.useState(!1),[u,d]=w.useState(null),[f,A]=w.useState([]),[m,g]=w.useState(!1),{register:x,control:v,handleSubmit:y,reset:N,watch:C,setValue:_,formState:{isSubmitting:j}}=O2t({defaultValues:{especialidad:"",curso:[],institucion:"",modulos:[],tipoAlternancia:[],fundamentacion:"",actividades:[],equipo:[],contrapartes:[],tutores:[],analisisCurricular:""}}),I=D2t({control:v,name:"actividades"}),T=["COORDINACION_TP","SUBDIRECCION"],k=((e==null?void 0:e.role)||"").toString().trim().toUpperCase();if(!(!k||T.some(D=>k.includes(D))))return i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"rounded-xl border border-rose-200 bg-rose-50/60 p-4 text-rose-700 flex items-center gap-2",children:[i.jsx(v3e,{className:"w-5 h-5"}),"Acceso no autorizado"]})});const M=D=>(D||"").replace(/\s*[-]\s*\d+\s*horas?$/i,"").trim(),P=(D,W)=>{var J;return!D||!W?[]:((J=gTe[D])==null?void 0:J[W])??[]},S=C("especialidad"),L=C("modulos")||[],H=w.useMemo(()=>S?ATe[S]??[]:[],[S]),q=w.useMemo(()=>S?pTe[S]??[]:[],[S]);w.useEffect(()=>{_("curso",[]),_("modulos",[]);const D=[...C("actividades")||[]].map(W=>({...W,modulo:"",oa:""}));_("actividades",D)},[S]),w.useEffect(()=>{const D=[...C("actividades")||[]].map(W=>W.modulo&&!L.includes(W.modulo)?{...W,modulo:"",oa:""}:W);_("actividades",D)},[L]);const Q=async()=>{o(!0);const{items:D}=await F2t({});r(D),o(!1)};w.useEffect(()=>{Q()},[]);const z=async D=>{n?await R2t(n,{...D}):await P2t({...D,createdBy:(e==null?void 0:e.email)||"desconocido"}),N(),a(null),await Q()},K=D=>{const W=Array.isArray(D.curso)?D.curso:D.curso?[D.curso]:[],J=Array.isArray(D.modulos)?D.modulos.map(ie=>M(ie)):[],le=Array.isArray(D.actividades)?D.actividades.map(ie=>({...ie,modulo:ie!=null&&ie.modulo?M(ie.modulo):"",oa:(ie==null?void 0:ie.oa)||""})):[];N({...D,curso:W,modulos:J,actividades:le}),a(D.id),window.scrollTo({top:0,behavior:"smooth"})},Z=async D=>{confirm("Eliminar esta alternancia?")&&(await L2t(D),await Q())},U=async(D,W)=>{await H2t(D,W),alert("Evidencia subida correctamente")},Y=async D=>{g(!0);const W=Array.isArray(D.curso)?D.curso:D.curso?[D.curso]:[],J=Array.isArray(D.modulos)?D.modulos:[],le=Array.isArray(D.actividades)?D.actividades.map(re=>({fecha:(re==null?void 0:re.fecha)||"",tipo:(re==null?void 0:re.tipo)||"",actividad:(re==null?void 0:re.actividad)||"",lugar:(re==null?void 0:re.lugar)||"",evidencias:(re==null?void 0:re.evidencias)||"",modulo:(re==null?void 0:re.modulo)||"",oa:(re==null?void 0:re.oa)||""})):[],ie={...D,curso:W,modulos:J,actividades:le};d(ie);try{const re=await U2t(D.id,"evidencias");A(re)}catch{A([])}c(!0),g(!1)},R=D=>{const W=Array.from(D.currentTarget.selectedOptions).map(J=>J.value);_("curso",W,{shouldDirty:!0})};return i.jsxs("div",{className:"p-4 md:p-6",children:[i.jsx("div",{className:"mb-6 rounded-2xl bg-gradient-to-r from-indigo-600 via-sky-600 to-emerald-600 text-white p-5 shadow-sm",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-11 h-11 rounded-xl bg-white/10 flex items-center justify-center",children:i.jsx(I1,{className:"w-6 h-6"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl md:text-2xl font-semibold",children:"Formacin por Alternancia"}),i.jsx("p",{className:"text-white/90 text-sm",children:"Registra planes, actividades y evidencias. Interfaz moderna, responsiva y con conos."})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(V0,{title:"Nuevo plan",onClick:()=>{N(),a(null)},tone:"neutral",children:[i.jsx(xo,{className:"w-4 h-4"}),"Limpiar"]}),i.jsxs(V0,{title:"Guardar",type:"submit",tone:"success",disabled:j,children:[j?i.jsx(pi,{className:"w-4 h-4 animate-spin"}):i.jsx(Fl,{className:"w-4 h-4"}),"Guardar"]})]})]})}),i.jsx(Sg,{title:"Planes guardados",icon:i.jsx(r0,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:s?i.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[i.jsx(pi,{className:"w-4 h-4 animate-spin"})," Cargando"]}):t.length===0?i.jsx("p",{className:"text-slate-500 text-sm",children:"No hay alternancias registradas"}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:t.map(D=>i.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm hover:shadow-md transition",children:i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-semibold",children:[i.jsx(Ph,{className:"w-4 h-4 text-indigo-600"}),D.especialidad]}),i.jsxs("div",{className:"text-sm text-slate-600 flex flex-wrap gap-2",children:[i.jsx(_g,{tone:"indigo",children:Array.isArray(D.curso)?D.curso.join(", "):D.curso}),i.jsx(_g,{tone:"sky",children:D.institucion}),(Array.isArray(D.tipoAlternancia)?D.tipoAlternancia:[]).slice(0,2).map(W=>i.jsx(_g,{tone:"emerald",children:W},W))]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(V0,{title:"Ver",onClick:()=>Y(D),children:[i.jsx(Q2t,{className:"w-4 h-4"})," Ver"]}),i.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-1 rounded-xl bg-amber-500 hover:bg-amber-600 text-white text-xs px-3 py-2 transition",children:[i.jsx(ev,{className:"w-4 h-4"}),i.jsx("input",{type:"file",className:"hidden",onChange:W=>W.target.files&&U(D.id,W.target.files[0])}),"Evidencia"]}),i.jsxs(V0,{title:"Editar",onClick:()=>K(D),children:[i.jsx(MN,{className:"w-4 h-4"})," Editar"]}),i.jsxs(V0,{title:"Eliminar",onClick:()=>Z(D.id),tone:"danger",children:[i.jsx(Vn,{className:"w-4 h-4"})," Eliminar"]})]})]})},D.id))})}),l&&u&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>c(!1)}),i.jsxs("div",{className:"relative z-10 w-full max-w-5xl max-h-[90vh] overflow-y-auto rounded-2xl bg-white shadow-xl border border-slate-200",children:[i.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between px-5 py-3 border-b bg-white/90 backdrop-blur",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-9 h-9 rounded-xl bg-indigo-50 border border-indigo-100 flex items-center justify-center",children:i.jsx(I1,{className:"w-5 h-5 text-indigo-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Plan de Alternancia"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Visualizacin detallada"})]})]}),i.jsxs(V0,{title:"Cerrar",onClick:()=>c(!1),children:[i.jsx(xo,{className:"w-4 h-4"})," Cerrar"]})]}),i.jsxs("div",{className:"p-5 space-y-5",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx(hl,{children:"Especialidad"}),i.jsxs("div",{className:"flex items-center gap-2 text-slate-800",children:[i.jsx(Ph,{className:"w-4 h-4 text-indigo-600"})," ",u.especialidad||"-"]})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx(hl,{children:"Institucin"}),i.jsxs("div",{className:"flex items-center gap-2 text-slate-800",children:[i.jsx(e1,{className:"w-4 h-4 text-sky-600"})," ",u.institucion||"-"]})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx(hl,{children:"Cursos"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:(u.curso||[]).map(D=>i.jsx(_g,{tone:"sky",children:D},D))})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx(hl,{children:"Tipos de Alternancia"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:(u.tipoAlternancia||[]).map(D=>i.jsx(_g,{tone:"emerald",children:D},D))})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx(hl,{children:"Mdulos"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:(u.modulos||[]).map(D=>i.jsx(_g,{tone:"indigo",children:D},D))})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx(hl,{children:"Creado por"}),i.jsx("div",{className:"text-slate-700 text-sm",children:u.createdBy||"-"})]})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Fundamentacin tcnicopedaggica"}),i.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:u.fundamentacion||""})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200",children:[i.jsx("div",{className:"px-4 py-3 border-b bg-slate-50/50",children:i.jsx("h4",{className:"font-semibold text-slate-800",children:"Plan de actividades"})}),u.actividades&&u.actividades.length>0?i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 text-left",children:"Fecha"}),i.jsx("th",{className:"p-2 text-left",children:"Tipo"}),i.jsx("th",{className:"p-2 text-left",children:"Actividad"}),i.jsx("th",{className:"p-2 text-left",children:"Lugar"}),i.jsx("th",{className:"p-2 text-left",children:"Mdulo"}),i.jsx("th",{className:"p-2 text-left",children:"OA"}),i.jsx("th",{className:"p-2 text-left",children:"Evidencias"})]})}),i.jsx("tbody",{className:"divide-y",children:u.actividades.map((D,W)=>i.jsxs("tr",{children:[i.jsx("td",{className:"p-2 text-slate-700",children:D.fecha||""}),i.jsx("td",{className:"p-2 text-slate-700",children:D.tipo||""}),i.jsx("td",{className:"p-2 text-slate-700",children:D.actividad||""}),i.jsx("td",{className:"p-2 text-slate-700",children:D.lugar||""}),i.jsx("td",{className:"p-2 text-slate-700",children:D.modulo||""}),i.jsx("td",{className:"p-2 text-slate-700",children:D.oa||""}),i.jsx("td",{className:"p-2 text-slate-700",children:D.evidencias||""})]},W))})]})}):i.jsx("div",{className:"p-4 text-sm text-slate-500",children:"Sin actividades registradas"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Equipo"}),(u.equipo||[]).length>0?i.jsx("ul",{className:"space-y-1 text-sm",children:u.equipo.map((D,W)=>i.jsxs("li",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-slate-700",children:D.nombre||""}),i.jsx("span",{className:"text-slate-500",children:D.rol||""})]},W))}):i.jsx("p",{className:"text-sm text-slate-500",children:"Sin equipo registrado"})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Contrapartes"}),(u.contrapartes||[]).length>0?i.jsx("ul",{className:"space-y-1 text-sm",children:u.contrapartes.map((D,W)=>i.jsxs("li",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-slate-700",children:D.nombre||""}),i.jsx("span",{className:"text-slate-500",children:D.rol||""})]},W))}):i.jsx("p",{className:"text-sm text-slate-500",children:"Sin contrapartes"})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Tutores"}),(u.tutores||[]).length>0?i.jsx("ul",{className:"space-y-1 text-sm",children:u.tutores.map((D,W)=>i.jsxs("li",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-slate-700",children:D.nombre||""}),i.jsx("span",{className:"text-slate-500",children:D.rol||""})]},W))}):i.jsx("p",{className:"text-sm text-slate-500",children:"Sin tutores"})]})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Anlisis Curricular"}),i.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:u.analisisCurricular||""})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200",children:[i.jsxs("div",{className:"px-4 py-3 border-b bg-slate-50/50 flex items-center justify-between",children:[i.jsx("h4",{className:"font-semibold text-slate-800",children:"Evidencias subidas"}),m&&i.jsx("span",{className:"text-sm text-slate-500",children:"Cargando"})]}),(f||[]).length>0?i.jsx("div",{className:"p-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:f.map(D=>i.jsxs("a",{href:D.url,target:"_blank",rel:"noreferrer",className:"group rounded-xl border border-slate-200 p-3 hover:shadow-sm transition bg-white flex items-center gap-3",children:[i.jsx(wF,{className:"w-5 h-5 text-emerald-600"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm text-slate-800 truncate group-hover:underline",children:D.nombre||"archivo"}),i.jsx("div",{className:"text-xs text-slate-500 truncate",children:D.path||""})]})]},D.id))}):i.jsx("div",{className:"p-4 text-sm text-slate-500",children:"No hay evidencias adjuntas"})]})]})]})]}),i.jsxs("form",{onSubmit:y(z),className:"mt-6 space-y-5",children:[i.jsx(Sg,{title:"Contexto de la Alternancia",icon:i.jsx(e1,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx(hl,{children:"Especialidad"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ph,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),i.jsxs("select",{...x("especialidad"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-indigo-100",children:[i.jsx("option",{value:"",children:"Selecciona"}),fTe.map(D=>i.jsx("option",{value:D,children:D},D))]})]})]}),i.jsxs("div",{children:[i.jsx(hl,{children:"Institucin"}),i.jsxs("div",{className:"relative",children:[i.jsx(e1,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),i.jsxs("select",{...x("institucion"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-sky-100",children:[i.jsx("option",{value:"",children:"Selecciona"}),hTe.map(D=>i.jsx("option",{value:D,children:D},D))]})]})]}),i.jsxs("div",{children:[i.jsx(hl,{hint:"Ctrl/Cmd + clic para seleccionar mltiples cursos.",children:"Cursos"}),i.jsxs("div",{className:"relative",children:[i.jsx(qs,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),i.jsx("select",{multiple:!0,size:4,...x("curso"),onChange:R,className:"w-full min-h-[120px] rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-emerald-100 disabled:opacity-50",disabled:!S,children:S?H.map(D=>i.jsx("option",{value:D,children:D},D)):i.jsx("option",{value:"",children:"Elige especialidad primero"})})]}),i.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:(C("curso")||[]).map(D=>i.jsx(_g,{tone:"sky",children:D},D))})]})]})}),i.jsx(Sg,{title:"Mdulos implicados",icon:i.jsx(g3,{className:"w-5 h-5 text-emerald-700"}),accent:"emerald",children:S?i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:q.map(D=>i.jsxs("label",{className:"flex items-start gap-2 rounded-xl border border-emerald-200 bg-white p-3 shadow-sm hover:shadow transition",children:[i.jsx("input",{type:"checkbox",value:D,className:"mt-1 accent-emerald-600",...x("modulos")}),i.jsx("span",{className:"text-sm text-slate-700",children:D})]},D))}):i.jsx("p",{className:"text-sm text-slate-500",children:"Elige una especialidad para ver los mdulos."})}),i.jsx(Sg,{title:"Tipo de Alternancia",icon:i.jsx(r1,{className:"w-5 h-5 text-amber-700"}),accent:"amber",children:i.jsx("div",{className:"flex gap-3 flex-wrap",children:mTe.map(D=>i.jsxs("label",{className:"inline-flex items-center gap-2 rounded-full border border-amber-200 bg-white px-3 py-2 text-sm shadow-sm hover:shadow transition",children:[i.jsx("input",{type:"checkbox",value:D,className:"accent-amber-600",...x("tipoAlternancia")}),i.jsx("span",{className:"text-slate-700",children:D})]},D))})}),i.jsx(Sg,{title:"Fundamentacin tcnicopedaggica",icon:i.jsx(X5e,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:i.jsx("textarea",{...x("fundamentacion"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Describe brevemente la finalidad pedaggica, vnculos curriculares y el aporte para los estudiantes."})}),i.jsx(Sg,{title:"Plan de actividades",icon:i.jsx(r0,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:i.jsxs("div",{className:"space-y-3",children:[I.fields.map((D,W)=>{const J=C(`actividades.${W}.modulo`)||"",le=P(S,J);return i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx(hl,{children:"Fecha"}),i.jsx(qo,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),i.jsx("input",{type:"date",placeholder:"Fecha",...x(`actividades.${W}.fecha`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),i.jsxs("div",{children:[i.jsx(hl,{children:"Tipo"}),i.jsx("input",{placeholder:"Pasanta, visita, taller...",...x(`actividades.${W}.tipo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),i.jsxs("div",{children:[i.jsx(hl,{children:"Actividad"}),i.jsx("input",{placeholder:"Descripcin breve",...x(`actividades.${W}.actividad`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(hl,{children:"Lugar"}),i.jsx(LN,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),i.jsx("input",{placeholder:"Empresa/IP/CFT/Lab",...x(`actividades.${W}.lugar`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(hl,{children:"Evidencias"}),i.jsx(wF,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),i.jsx("input",{placeholder:"Informe, fotos, lista asistencia...",...x(`actividades.${W}.evidencias`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]})]}),i.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx(hl,{children:"Mdulo"}),i.jsxs("select",{...x(`actividades.${W}.modulo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!S||L.length===0,children:[i.jsx("option",{value:"",children:!S&&"Elige especialidad arriba"||L.length===0&&"Selecciona mdulos arriba"||"Selecciona"}),L.map(ie=>i.jsx("option",{value:ie,children:ie},ie))]})]}),i.jsxs("div",{children:[i.jsx(hl,{children:"Objetivo de Aprendizaje (OA)"}),i.jsxs("select",{...x(`actividades.${W}.oa`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!J||le.length===0,children:[i.jsx("option",{value:"",children:J?le.length===0?"Sin OA definidos para este mdulo":"Selecciona":"Selecciona mdulo primero"}),le.map(ie=>i.jsx("option",{value:ie,children:ie},ie))]})]})]}),i.jsx("div",{className:"mt-3 flex justify-end",children:i.jsxs(V0,{title:"Eliminar fila",onClick:()=>I.remove(W),tone:"danger",children:[i.jsx(Vn,{className:"w-4 h-4"}),"Eliminar actividad"]})})]},D.id)}),i.jsxs(V0,{title:"Agregar actividad",onClick:()=>I.append({fecha:"",tipo:"",actividad:"",lugar:"",evidencias:"",modulo:"",oa:""}),tone:"primary",children:[i.jsx(gi,{className:"w-4 h-4"})," Agregar actividad"]})]})}),i.jsx(Sg,{title:"Anlisis Curricular",icon:i.jsx(Ph,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:i.jsx("textarea",{...x("analisisCurricular"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Mdulos implicados + OA/AE asociados + distribucin de horas (liceo/otro lugar)."})}),i.jsx("div",{className:"flex items-center justify-end gap-2",children:i.jsxs(V0,{title:"Guardar",type:"submit",tone:"success",disabled:j,children:[j?i.jsx(pi,{className:"w-4 h-4 animate-spin"}):i.jsx(pa,{className:"w-4 h-4"}),"Guardar"]})})]})]})},o8=["INCIPIENTE","EN_DESARROLLO","LOGRADO","SOBRESALIENTE"],$2t={INCIPIENTE:25},z2t=["AULA","TALLER","EMPRESA"],Ere={escalaMin:1,escalaMax:7,porcentajeAprobacion:60,notaAprobacion:4,regla:"lineal"},rve="tp_especialidades",nve="tp_modulos",G2t="tp_resultados_aprendizaje",q2t="tp_criterios_evaluacion",l8="tp_rubricas",ave="tp_evidencias",sve="tp_evaluaciones_comp",c8="config_evaluacion/competencias",jre=()=>Date.now(),ive=async()=>{const e=await bA(Wt(Ar,c8));return e.exists()?e.data():(await bi(Wt(Ar,c8),Ere),Ere)},K2t=(e,t)=>{const{escalaMin:r,escalaMax:n,porcentajeAprobacion:a,notaAprobacion:s}=t;if(e<=a){const o=(s-r)/(a-0||1);return Number((r+o*(e-0)).toFixed(1))}else{const o=(n-s)/(100-a||1);return Number((s+o*(e-a)).toFixed(1))}},W2t=async(e,t)=>{const r=await ive();let n=0,a=0;Object.entries(t).forEach(([l,c])=>{a+=c;const u=e[l],d=(u==null?void 0:u.puntaje)??$2t.INCIPIENTE;n+=d*c/100});const s=a?n/a*100:0,o=K2t(s,r);return{puntajeTotal:n,porcentaje:s,nota:o}},kre=e=>ln(ht(Ar,rve),e),X2t=e=>{const t=Bt(ht(Ar,rve),Xt("nombre"));return lr(t,r=>{e(r.docs.map(n=>({id:n.id,...n.data()})))},r=>{console.error("[competenciasHelper] subscribeEspecialidades error:",r),e([])})},Sre=e=>ln(ht(Ar,nve),e),_re=async e=>{const t=Bt(ht(Ar,nve),sr("especialidadId","==",e),Xt("nombre"));return(await Ir(t)).docs.map(n=>({id:n.id,...n.data()}))},Y2t=async e=>{const t=Bt(ht(Ar,G2t),sr("moduloId","==",e),Xt("codigo"));return(await Ir(t)).docs.map(n=>({id:n.id,...n.data()}))},J2t=async e=>{const t=Bt(ht(Ar,q2t),sr("raId","==",e),Xt("codigo"));return(await Ir(t)).docs.map(n=>({id:n.id,...n.data()}))},Z2t=async e=>e.id?(await qi(Wt(Ar,l8,e.id),{...e,updatedAt:jre()}),e.id):(await ln(ht(Ar,l8),{...e,updatedAt:jre()})).id,ove=async e=>{const t=Bt(ht(Ar,l8),sr("raId","==",e)),n=(await Ir(t)).docs[0];return n?{id:n.id,...n.data()}:null},eNt=async(e,t)=>{const r=Od(Zx,t),n=await by(r,e);return{url:await LA(n.ref),path:n.ref.fullPath}},tNt=e=>ln(ht(Ar,ave),e),rNt=(e,t)=>{const r=Bt(ht(Ar,ave),sr("raId","==",e),Xt("fecha","desc"));return lr(r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))},n=>{console.error("[competenciasHelper] subscribeEvidenciasByRA error:",n,"raId=",e),t([])})},nNt=async e=>{const t=await ove(e.raId),r=(t==null?void 0:t.ponderacionCE)??{},{puntajeTotal:n,porcentaje:a,nota:s}=await W2t(e.ceIdScores,r);return ln(ht(Ar,sve),{...e,puntajeTotal:n,porcentaje:a,nota:s})},aNt=(e,t)=>{const r=Bt(ht(Ar,sve),sr("raId","==",e),Xt("fecha","desc"));return lr(r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))},n=>{console.error("[competenciasHelper] subscribeEvaluacionesByRA error:",n,"raId=",e),t([])})},sNt=async e=>{const t=await ive();await bi(Wt(Ar,c8),{...t,...e},{merge:!0})},iNt=({raId:e,ces:t,rubrica:r,onSaved:n,currentUserId:a})=>{const[s,o]=w.useState(null);if(w.useEffect(()=>{o(e?r??{id:"",raId:e,niveles:o8,descriptores:[],ponderacionCE:Object.fromEntries(t.map(f=>[f.id,f.peso])),updatedAt:Date.now(),createdBy:a}:null)},[e,r,t,a]),!e)return i.jsx("div",{children:"Selecciona un RA para editar su rbrica."});if(!s)return null;const l=(f,A)=>{o(m=>m&&{...m,ponderacionCE:{...m.ponderacionCE,[f]:A}})},c=(f,A,m)=>{o(g=>{if(!g)return g;const x=g.descriptores.filter(v=>!(v.ceId===f&&v.nivel===A));return{...g,descriptores:[...x,{ceId:f,nivel:A,descriptor:m,puntaje:A==="SOBRESALIENTE"?100:A==="LOGRADO"?75:A==="EN_DESARROLLO"?50:25}]}})},u=w.useMemo(()=>Object.values(s.ponderacionCE).reduce((f,A)=>f+(Number(A)||0),0),[s.ponderacionCE]),d=async()=>{const f=await Z2t(s);n==null||n(f)};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Rbrica por CE (debe sumar 100%)"}),i.jsxs("div",{className:`px-2 py-1 rounded-full text-xs ${u===100?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:["Total: ",u,"%"]})]}),i.jsx("div",{className:"space-y-4",children:t.map(f=>i.jsxs("div",{className:"border rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold text-slate-800",children:[f.codigo,"  ",f.descriptor]}),i.jsxs("div",{className:"text-xs text-slate-500",children:["Evidencia esperada: ",f.evidenciaEsperada||""]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-xs text-slate-500",children:"Peso"}),i.jsx("input",{type:"number",className:"w-20 border rounded-lg px-2 py-1",value:s.ponderacionCE[f.id]??0,onChange:A=>l(f.id,Number(A.target.value))}),i.jsx("span",{className:"text-xs text-slate-500",children:"%"})]})]}),i.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3",children:o8.map(A=>{const m=s.descriptores.find(g=>g.ceId===f.id&&g.nivel===A);return i.jsxs("div",{className:"bg-slate-50 border rounded-lg p-3",children:[i.jsx("div",{className:"text-xs font-medium text-slate-600 mb-1",children:A.replace("_"," ")}),i.jsx("textarea",{className:"w-full border rounded-lg px-2 py-1 text-sm",rows:2,value:(m==null?void 0:m.descriptor)||"",onChange:g=>c(f.id,A,g.target.value),placeholder:"Descriptor observable y medible"})]},A)})})]},f.id))}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:d,className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl px-4 py-2",children:[i.jsx(Fl,{className:"w-4 h-4"}),i.jsx("span",{children:"Guardar rbrica"})]})})]})},oNt=({raId:e,currentUser:t,evidencias:r})=>{const[n,a]=w.useState(""),[s,o]=w.useState(""),[l,c]=w.useState("AULA"),[u,d]=w.useState(null),[f,A]=w.useState(""),[m,g]=w.useState(!1);if(!e)return i.jsx("div",{children:"Selecciona una RA para gestionar evidencias."});const x=async()=>{if(!(!u||!n)){g(!0);try{const v=u.name.split(".").pop(),y=`evidencias/${e}/${n}/${Date.now()}.${v}`,{url:N,path:C}=await eNt(u,y);await tNt({estudianteId:n,raId:e,ceId:s||void 0,url:N,tipo:lNt(u.name),fecha:Date.now(),autorId:t.id,contexto:l,observaciones:f,storagePath:C}),d(null),A(""),a(""),o("")}finally{g(!1)}}};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3",children:[i.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Estudiante (ID)",value:n,onChange:v=>a(v.target.value)}),i.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"CE (opcional)",value:s,onChange:v=>o(v.target.value)}),i.jsxs("select",{className:"border rounded-xl px-3 py-2",value:l,onChange:v=>c(v.target.value),children:[i.jsx("option",{value:"AULA",children:"AULA"}),i.jsx("option",{value:"TALLER",children:"TALLER"}),i.jsx("option",{value:"EMPRESA",children:"EMPRESA"})]}),i.jsx("input",{type:"file",onChange:v=>{var y;return d(((y=v.target.files)==null?void 0:y[0])||null)},className:"border rounded-xl px-3 py-2"})]}),i.jsx("textarea",{className:"w-full border rounded-xl px-3 py-2",rows:2,placeholder:"Observaciones",value:f,onChange:v=>A(v.target.value)}),i.jsxs("button",{onClick:x,disabled:m||!u||!n,className:`flex items-center gap-2 rounded-xl px-4 py-2 ${m||!u||!n?"bg-slate-200 text-slate-500":"bg-indigo-600 hover:bg-indigo-700 text-white"}`,children:[i.jsx(ev,{className:"w-4 h-4"}),i.jsx("span",{children:"Subir evidencia"})]}),i.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:r.map(v=>i.jsxs("a",{href:v.url,target:"_blank",rel:"noreferrer",className:"border rounded-xl p-3 hover:shadow",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[cNt(v.tipo),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:new Date(v.fecha).toLocaleString()}),i.jsxs("div",{className:"text-xs text-slate-500",children:[v.contexto,"  Est.: ",v.estudianteId]})]})]}),v.observaciones&&i.jsx("div",{className:"text-xs text-slate-600 mt-2",children:v.observaciones})]},v.id))})]})},lNt=e=>{var r;const t=(r=e.split(".").pop())==null?void 0:r.toLowerCase();return["png","jpg","jpeg","webp","gif"].includes(t||"")?"imagen":["mp4","mov","avi","mkv","webm"].includes(t||"")?"video":["pdf","doc","docx","ppt","pptx","xls","xlsx","txt","csv"].includes(t||"")?"documento":"otro"},cNt=e=>{switch(e){case"imagen":return i.jsx(R5,{className:"w-5 h-5 text-rose-600"});case"video":return i.jsx(X_e,{className:"w-5 h-5 text-indigo-600"});case"documento":return i.jsx(Ko,{className:"w-5 h-5 text-emerald-600"});default:return i.jsx(ev,{className:"w-5 h-5 text-slate-500"})}},Tre=["#6366F1","#22C55E","#F59E0B","#EF4444","#14B8A6","#8B5CF6","#F43F5E"],uNt=({raId:e})=>{const[t,r]=w.useState([]);if(w.useEffect(()=>{if(!e){r([]);return}const o=aNt(e,r);return()=>o()},[e]),!e)return i.jsx("div",{children:"Selecciona una RA para visualizar el dashboard."});const n=w.useMemo(()=>{const o={};return t.forEach(l=>{const c=l.curso||"";o[c]||(o[c]={curso:c,promedio:0,n:0}),o[c].promedio+=l.nota,o[c].n+=1}),Object.values(o).map(l=>({curso:l.curso,promedio:Number((l.promedio/(l.n||1)).toFixed(2)),n:l.n}))},[t]),a=w.useMemo(()=>{const o={"1.0-3.9":0,"4.0-4.9":0,"5.0-5.9":0,"6.0-7.0":0};return t.forEach(l=>{l.nota<4?o["1.0-3.9"]++:l.nota<5?o["4.0-4.9"]++:l.nota<6?o["5.0-5.9"]++:o["6.0-7.0"]++}),Object.entries(o).map(([l,c])=>({rango:l,value:c}))},[t]),s=()=>{const o=t.map(u=>({id:u.id,estudianteId:u.estudianteId,curso:u.curso,raId:u.raId,porcentaje:u.porcentaje,nota:u.nota,fecha:new Date(u.fecha).toISOString(),contexto:u.contexto})),l=zs.book_new(),c=zs.json_to_sheet(o);zs.book_append_sheet(l,c,"Evaluaciones_RA"),ky(l,`evaluaciones_${e}.xlsx`)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[i.jsx(Tl,{className:"w-5 h-5 text-indigo-600"}),"Resumen de logro por curso"]}),i.jsxs("button",{onClick:s,className:"flex items-center gap-2 border rounded-xl px-3 py-2 hover:bg-slate-50",children:[i.jsx(Pf,{className:"w-4 h-4"}),i.jsx("span",{children:"Descargar CSV"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx("div",{className:"h-72 border rounded-xl p-3",children:i.jsx($o,{width:"100%",height:"100%",children:i.jsxs(Nf,{data:n,children:[i.jsx(Rc,{dataKey:"curso"}),i.jsx(Lc,{domain:[1,7]}),i.jsx(Vo,{}),i.jsx(jd,{dataKey:"promedio"})]})})}),i.jsx("div",{className:"h-72 border rounded-xl p-3",children:i.jsx($o,{width:"100%",height:"100%",children:i.jsxs(CT,{children:[i.jsx(xE,{data:a,dataKey:"value",nameKey:"rango",outerRadius:90,label:!0,children:a.map((o,l)=>i.jsx(kA,{fill:Tre[l%Tre.length]},`c-${l}`))}),i.jsx(Vo,{}),i.jsx(Kp,{})]})})})]}),i.jsx("div",{className:"text-xs text-slate-500",children:"Nota: los promedios consideran la conversin lineal configurable (Decreto 67)."})]})},u2=({active:e,onClick:t,icon:r,label:n})=>i.jsxs("button",{onClick:t,className:`flex items-center gap-2 px-3 py-2 rounded-full transition 
    ${e?"bg-indigo-600 text-white shadow":"bg-white text-slate-700 hover:bg-slate-100 border"}`,children:[r,i.jsx("span",{className:"font-medium",children:n})]}),gb=({children:e,className:t})=>i.jsx("div",{className:`bg-white rounded-2xl shadow-sm border p-4 ${t||""}`,children:e}),dNt=({currentUser:e})=>{const[t,r]=w.useState("planificacion"),[n,a]=w.useState([]),[s,o]=w.useState([]),[l,c]=w.useState([]),[u,d]=w.useState([]),[f,A]=w.useState({}),[m,g]=w.useState(null),[x,v]=w.useState([]),[y,N]=w.useState(""),C=Q=>(Q||"").toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/\s+/g," ").trim(),_="automotriz",j="industrial",I=w.useMemo(()=>new Set(["modulo 01  ajuste de motores.","modulo 01 - ajuste de motores.","modulo 01 ajuste de motores.","modulo 02  lectura de planos y manuales tecnicos.","modulo 03  manejo de residuos y desechos automotrices.","modulo 04  mantenimiento de sistemas de seguridad y confortabilidad.","modulo 05  mantenimiento de sistemas electricos y electronicos."].map(C)),[]),T=w.useMemo(()=>new Set(["modulo 00  emprendimiento y empleabilidad (mecanica automotriz).","modulo 06  mantenimiento de motores.","modulo 07  mantenimiento de sistemas hidraulicos y neumaticos.","modulo 08  mantenimiento de los sistemas de transmision y frenos.","modulo 09  mantenimiento de sistemas de direccion y suspension."].map(C)),[]),k=w.useMemo(()=>new Set(["modulo 01  soldadura industrial.","modulo 02  mantenimiento de herramientas.","modulo 03  medicion y verificacion.","modulo 04  mecanica de banco.","modulo 05  lectura de manuales y planos.","modulo 06  emprendimiento y empleabilidad (mencion maquinas-herramientas).","modulo 07  torneado de piezas y conjuntos mecanicos.","modulo 08  fresado de piezas y conjuntos mecanicos.","modulo 09  taladrado y rectificado de piezas mecanicas.","modulo 10  mecanizado con maquinas de control numerico computacional (cnc)."].map(C)),[]),B=w.useMemo(()=>new Set(["modulo 03  manejo de residuos y desechos automotrices.","modulo 03 - manejo de residuos y desechos automotrices.","modulo 06  mantenimiento de motores.","modulo 06 - mantenimiento de motores."].map(C)),[]);w.useEffect(()=>{const Q=X2t(a);return()=>Q()},[]),w.useEffect(()=>{f.especialidadId?_re(f.especialidadId).then(o):o([]),A(Q=>({...Q,moduloId:void 0,raId:void 0})),c([]),d([]),g(null)},[f.especialidadId]),w.useEffect(()=>{const Q=n.find(K=>K.id===f.especialidadId);C(Q==null?void 0:Q.nombre).includes(_)?N(K=>K===""?"3":K):N("")},[f.especialidadId,n]),w.useEffect(()=>{f.moduloId?Y2t(f.moduloId).then(c):c([]),A(Q=>({...Q,raId:void 0})),d([]),g(null)},[f.moduloId]),w.useEffect(()=>{if(f.raId){J2t(f.raId).then(d),ove(f.raId).then(g);const Q=rNt(f.raId,v);return()=>Q()}else d([]),g(null),v([])},[f.raId]);const M=f.raId&&u.length>0,{especialidadesFiltradas:P,espFiltroFallback:S}=w.useMemo(()=>{if(!(n!=null&&n.length))return{especialidadesFiltradas:[],espFiltroFallback:!1};const Q=n.filter(z=>{const K=C(z.nombre);return K.includes(_)||K.includes(j)});return Q.length===0?{especialidadesFiltradas:n,espFiltroFallback:!0}:{especialidadesFiltradas:Q,espFiltroFallback:!1}},[n]),L=w.useMemo(()=>{const Q=n.find(z=>z.id===f.especialidadId);return C(Q==null?void 0:Q.nombre)},[n,f.especialidadId]),{modulosFiltrados:H,filtroFallback:q}=w.useMemo(()=>{let Q=!1;if(!(s!=null&&s.length))return{modulosFiltrados:[],filtroFallback:!1};if(L.includes(_)){if(!y)return{modulosFiltrados:[],filtroFallback:!1};const z=y==="3"?I:T,K=s.filter(Z=>z.has(C(Z.nombre)));return K.length===0?(Q=!0,{modulosFiltrados:s,filtroFallback:Q}):{modulosFiltrados:K,filtroFallback:Q}}if(L.includes(j)){const z=s.filter(K=>k.has(C(K.nombre)));return z.length===0&&s.length>0?(Q=!0,{modulosFiltrados:s,filtroFallback:Q}):{modulosFiltrados:z,filtroFallback:Q}}return{modulosFiltrados:s,filtroFallback:Q}},[s,L,y,I,T,k]);return i.jsxs("div",{className:"w-full min-h-screen bg-slate-50",children:[i.jsx("div",{className:"sticky top-0 z-10 bg-white border-b",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(g3,{className:"w-6 h-6 text-indigo-600"}),i.jsx("h1",{className:"text-xl font-semibold text-slate-800",children:"Evaluacin por Competencias EMTP"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(u2,{active:t==="planificacion",onClick:()=>r("planificacion"),icon:i.jsx(r0,{className:"w-4 h-4"}),label:"Planificar"}),i.jsx(u2,{active:t==="evaluar",onClick:()=>r("evaluar"),icon:i.jsx(d3e,{className:"w-4 h-4"}),label:"Evaluar"}),i.jsx(u2,{active:t==="evidencias",onClick:()=>r("evidencias"),icon:i.jsx(ev,{className:"w-4 h-4"}),label:"Evidencias"}),i.jsx(u2,{active:t==="dashboard",onClick:()=>r("dashboard"),icon:i.jsx(Tl,{className:"w-4 h-4"}),label:"Dashboard"}),i.jsx(u2,{active:t==="config",onClick:()=>r("config"),icon:i.jsx(UN,{className:"w-4 h-4"}),label:"Config"})]})]})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[i.jsx(gb,{children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Especialidad"}),i.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.especialidadId||"",onChange:Q=>A({especialidadId:Q.target.value}),children:[i.jsx("option",{value:"",children:" Selecciona "}),P.map(Q=>i.jsx("option",{value:Q.id,children:Q.nombre},Q.id))]}),S&&i.jsx("p",{className:"mt-1 text-xs text-amber-600",children:"Mostrando todas las especialidades por falta de coincidencia exacta con los nombres esperados (Automotriz/Industrial)."})]}),L.includes(_)&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Curso (Automotriz)"}),i.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:y,onChange:Q=>{N(Q.target.value),A(z=>({...z,moduloId:void 0,raId:void 0}))},children:[i.jsx("option",{value:"",children:" Selecciona "}),i.jsx("option",{value:"3",children:"3 medio"}),i.jsx("option",{value:"4",children:"4 medio TP"})]})]}),i.jsxs("div",{className:"sm:col-span-2",children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Mdulo"}),i.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.moduloId||"",onChange:Q=>A(z=>({...z,moduloId:Q.target.value})),children:[i.jsx("option",{value:"",children:" Selecciona "}),H.map(Q=>{const K=L.includes(_)&&B.has(C(Q.nombre))?`${Q.nombre}  Currculum Nacional`:Q.nombre;return i.jsx("option",{value:Q.id,children:K},Q.id)})]}),q&&i.jsx("p",{className:"mt-1 text-xs text-amber-600",children:"Mostrando todos los mdulos de la especialidad por falta de coincidencia exacta con la lista. Podemos alinear los nombres en Firestore para filtrar con precisin."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Resultado de Aprendizaje (RA)"}),i.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.raId||"",onChange:Q=>A(z=>({...z,raId:Q.target.value})),children:[i.jsx("option",{value:"",children:" Selecciona "}),l.map(Q=>i.jsxs("option",{value:Q.id,children:[Q.codigo,"  ",Q.enunciado.slice(0,60),Q.enunciado.length>60?"":""]},Q.id))]})]})]})}),t==="planificacion"&&i.jsx(gb,{children:i.jsx(iNt,{raId:f.raId,ces:u,rubrica:m,onSaved:Q=>{},currentUserId:e.id})}),t==="evaluar"&&i.jsxs(gb,{children:[!M&&i.jsx("div",{className:"text-slate-600",children:"Selecciona una RA con criterios (CE) para comenzar a evaluar."}),M&&i.jsx(fNt,{raId:f.raId,ces:u,currentUser:e})]}),t==="evidencias"&&i.jsx(gb,{children:i.jsx(oNt,{raId:f.raId,currentUser:e,evidencias:x})}),t==="dashboard"&&i.jsx(gb,{children:i.jsx(uNt,{raId:f.raId})}),t==="config"&&i.jsxs(gb,{children:[i.jsx(hNt,{}),i.jsxs("div",{className:"mt-6 border-t pt-4",children:[i.jsx(ANt,{especialidades:n,normalize:C,onSeeded:async()=>{if(f.especialidadId){const Q=await _re(f.especialidadId);o(Q)}}}),i.jsx("div",{className:"mt-4",children:i.jsx(SeedRAAutomotriz,{getModuloByName:Q=>s.find(z=>C(z.nombre)===C(Q))})})]})]})]})]})},fNt=({raId:e,ces:t,currentUser:r})=>{const[n,a]=w.useState(""),[s,o]=w.useState(r.curso||""),[l,c]=w.useState("AULA"),[u,d]=w.useState(""),[f,A]=w.useState({}),m=(v,y,N)=>{A(C=>({...C,[v]:{nivel:y,puntaje:N}}))},g=n&&Object.keys(f).length===t.length,x=async()=>{const v={estudianteId:n,curso:s,raId:e,ceIdScores:f,evaluadorId:r.id,fecha:Date.now(),contexto:l,retroalimentacion:u};await nNt(v),d(""),A({}),a("")};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Estudiante (ID)"}),i.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:n,onChange:v=>a(v.target.value),placeholder:"rut_o_uid"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Curso"}),i.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:s,onChange:v=>o(v.target.value),placeholder:"p.ej. 3B"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Contexto"}),i.jsx("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:l,onChange:v=>c(v.target.value),children:z2t.map(v=>i.jsx("option",{value:v,children:v},v))})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("button",{disabled:!g,onClick:x,className:`w-full flex items-center justify-center gap-2 rounded-xl px-3 py-2 transition ${g?"bg-emerald-600 hover:bg-emerald-700 text-white":"bg-slate-200 text-slate-500 cursor-not-allowed"}`,children:[i.jsx(pa,{className:"w-4 h-4"}),i.jsx("span",{children:"Guardar evaluacin"})]})})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:t.map(v=>i.jsxs("div",{className:"border rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h4",{className:"font-semibold text-slate-800",children:[v.codigo,"  ",v.descriptor]}),i.jsxs("span",{className:"text-xs text-slate-500",children:["Peso ",v.peso,"%"]})]}),i.jsx("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-2",children:o8.map(y=>{var N;return i.jsx("button",{onClick:()=>m(v.id,y,y==="SOBRESALIENTE"?100:y==="LOGRADO"?75:y==="EN_DESARROLLO"?50:25),className:`px-3 py-2 rounded-lg border text-sm ${((N=f[v.id])==null?void 0:N.nivel)===y?"bg-indigo-600 text-white":"bg-white hover:bg-slate-50"}`,children:y.replace("_"," ")},y)})})]},v.id))}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Retroalimentacin formativa"}),i.jsx("textarea",{value:u,onChange:v=>d(v.target.value),className:"mt-1 w-full border rounded-xl px-3 py-2",rows:3,placeholder:"Sugerencias especficas para mejorar..."})]})]})},hNt=()=>{const[e,t]=w.useState(60),[r,n]=w.useState(4),a=async()=>{await sNt({porcentajeAprobacion:e,notaAprobacion:r})};return i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Porcentaje de aprobacin (%)"}),i.jsx("input",{type:"number",className:"mt-1 w-full border rounded-xl px-3 py-2",value:e,onChange:s=>t(Number(s.target.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Nota de aprobacin"}),i.jsx("input",{type:"number",step:"0.1",className:"mt-1 w-full border rounded-xl px-3 py-2",value:r,onChange:s=>n(Number(s.target.value))})]}),i.jsx("button",{onClick:a,className:"self-end bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl px-4 py-2",children:"Guardar"})]})},ANt=({especialidades:e,normalize:t,onSeeded:r})=>{const[n,a]=w.useState(!1),[s,o]=w.useState(""),l=async()=>{a(!0),o("Sembrando especialidades y mdulos base");try{const c=m=>e.find(g=>t(g.nombre)===t(m));let u=c("Mecnica Automotriz"),d=c("Mecnica Industrial");u||(u={id:(await kre({nombre:"Mecnica Automotriz"})).id,nombre:"Mecnica Automotriz"}),d||(d={id:(await kre({nombre:"Mecnica Industrial"})).id,nombre:"Mecnica Industrial"});const f=["Mdulo 01  Ajuste de motores.","Mdulo 02  Lectura de planos y manuales tcnicos.","Mdulo 03  Manejo de residuos y desechos automotrices.","Mdulo 04  Mantenimiento de sistemas de seguridad y confortabilidad.","Mdulo 05  Mantenimiento de sistemas elctricos y electrnicos.","Mdulo 00  Emprendimiento y empleabilidad (mecnica automotriz).","Mdulo 06  Mantenimiento de motores.","Mdulo 07  Mantenimiento de sistemas hidrulicos y neumticos.","Mdulo 08  Mantenimiento de los sistemas de transmisin y frenos.","Mdulo 09  Mantenimiento de sistemas de direccin y suspensin."],A=["Mdulo 01  Soldadura industrial.","Mdulo 02  Mantenimiento de herramientas.","Mdulo 03  Medicin y verificacin.","Mdulo 04  Mecnica de banco.","Mdulo 05  Lectura de manuales y planos.","Mdulo 06  Emprendimiento y empleabilidad (mencin Mquinas-Herramientas).","Mdulo 07  Torneado de piezas y conjuntos mecnicos.","Mdulo 08  Fresado de piezas y conjuntos mecnicos.","Mdulo 09  Taladrado y rectificado de piezas mecnicas.","Mdulo 10  Mecanizado con mquinas de control numrico computacional (CNC)."];for(const m of f)await Sre({nombre:m,especialidadId:u.id});for(const m of A)await Sre({nombre:m,especialidadId:d.id});o("Datos base sembrados correctamente. Actualiza los selectores para verlos."),await r()}catch(c){console.error(c),o(`Error al sembrar: ${(c==null?void 0:c.message)||c}`)}finally{a(!1)}};return i.jsxs("div",{className:"mt-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{disabled:n,onClick:l,className:`px-4 py-2 rounded-xl text-white ${n?"bg-slate-400":"bg-amber-600 hover:bg-amber-700"}`,children:n?"Sembrando":"Sembrar datos base (Automotriz/Industrial)"}),s&&i.jsx("span",{className:"text-sm text-slate-600",children:s})]}),i.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Crea especialidades y mdulos mnimos si no existen an."})]})};function mNt(e){for(const t of e)if(t.textoBase&&t.textoBase.trim())return t.textoBase.trim();return null}function pNt(e){if(e.asignatura!=="Lectura")return e;const t={...e};let r=mNt(t.preguntas||[]);return!r&&t.descripcion&&t.descripcion.length>100&&(r=t.descripcion,t.preguntas&&t.preguntas.length>0&&(t.preguntas[0]={...t.preguntas[0],textoBase:r})),r&&(t.textoBase=r),t}const gNt=({currentUser:e})=>{const[t,r]=w.useState([]),[n,a]=w.useState(null),[s,o]=w.useState({}),[l,c]=w.useState(!0),[u,d]=w.useState(!1),[f,A]=w.useState(!1),[m,g]=w.useState(null),[x,v]=w.useState(null),[y,N]=w.useState(null),[C,_]=w.useState([]),[j,I]=w.useState(null),T=q=>{if(!q)return"";let Q=q.trim().toLowerCase();return Q=Q.replace(//g,""),Q=Q.replace(/\s+(medio|bsico|basico)/g,""),Q=Q.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),Q=Q.replace(/^(\d)(?![])/,"$1"),Q=Q.replace(/\s+/g,"").toUpperCase(),Q};w.useEffect(()=>{(async()=>{if(e.id)try{c(!0);const Q=T(e.curso||"");console.log(`[DEBUG] SimceEvaluacionEstudiante - Cargando evaluaciones para estudiante: ${e.id}, curso: ${e.curso} (normalizado: ${Q})`);const[z,K]=await Promise.all([Ss(()=>Promise.resolve().then(()=>ZR),void 0).then(Y=>Y.obtenerSetsPreguntasPorCurso(Q)),Ss(()=>Promise.resolve().then(()=>ZR),void 0).then(Y=>Y.obtenerSetsPreguntasPorEstudiante(e.id))]),Z=new Map;[...z,...K].forEach(Y=>Z.set(Y.id,Y));const U=Array.from(Z.values());r(U),B({porCurso:z.length,porEstudiante:K.length,total:U.length}),console.log(`[DEBUG] SimceEvaluacionEstudiante - Evaluaciones por curso: ${z.length}, por estudiante: ${K.length}, total: ${U.length}`)}catch(Q){console.error("Error al cargar evaluaciones:",Q),v("No se pudieron cargar las evaluaciones disponibles")}finally{c(!1)}})()},[e]);const[k,B]=w.useState(null),M=async q=>{var Q,z;try{c(!0),o({}),v(null),g(null),A(!1),console.log(`[DEBUG] Seleccionando evaluacin con ID: ${q}`);let K=await uN(q);if(console.log("[DEBUG] Evaluacin completa obtenida:",K),console.log("[DEBUG] Preguntas en la evaluacin:",((Q=K==null?void 0:K.preguntas)==null?void 0:Q.length)||0),K&&(K=pNt(K),console.log("[DEBUG] Evaluacin procesada con texto base asegurado"),a(K)),K!=null&&K.preguntas){const U=K.preguntas.some(Y=>Y.textoBase)||K.textoBase;if(console.log("[DEBUG] La evaluacin tiene texto base?",U),U){const Y=K.textoBase||((z=K.preguntas.find(R=>R.textoBase))==null?void 0:z.textoBase);console.log("[DEBUG] Texto base encontrado:",(Y==null?void 0:Y.substring(0,50))+"...")}}const Z=await KAe(e.id||"",q);if(console.log(`[DEBUG] Intentos existentes para esta evaluacin: ${Z.length}`),_(Z),Z.length>0){I(Z[0]),A(!0);const U=await uN(q);if(U){a(U);const Y=Z[0],R=U.preguntas.map(D=>{var J;const W=((J=Y.respuestas.find(le=>le.preguntaId===D.id))==null?void 0:J.alternativaSeleccionada)||"";return{preguntaId:D.id,pregunta:D,respuestaSeleccionada:W,esCorrecta:W===D.respuestaCorrecta}});g({porcentajeLogro:Y.porcentajeLogro,nivelLogro:Y.nivelLogro,respuestasCorrectas:R.filter(D=>D.esCorrecta).length,totalPreguntas:U.preguntas.length,detalle:R})}}else{const U=await uN(q);if(U){const Y=[...U.preguntas].sort(()=>Math.random()-.5);Y.forEach(R=>{R.alternativas=[...R.alternativas].sort(()=>Math.random()-.5)}),a({...U,preguntas:Y}),N(Date.now())}}}catch(K){console.error("Error al seleccionar evaluacin:",K),v("No se pudo cargar la evaluacin seleccionada")}finally{c(!1)}},P=(q,Q)=>{o({...s,[q]:Q})},S=async()=>{if(n)try{const q=n.preguntas.map(J=>J.id),Q=Object.keys(s);if(Q.length<q.length){v(`Debe responder todas las preguntas antes de enviar (faltan ${q.length-Q.length})`);return}d(!0);let z=0;const K=n.preguntas.map(J=>{const le=s[J.id],ie=le===J.respuestaCorrecta;return ie&&z++,{preguntaId:J.id,pregunta:J,respuestaSeleccionada:le,esCorrecta:ie}}),Z=n.preguntas.length,U=z/Z*100;let Y;U>=80?Y="Adecuado":U>=50?Y="Elemental":Y="Insuficiente";const R=Date.now(),D=y?Math.floor((R-y)/1e3):0,W={setId:n.id,estudianteId:e.id||"",estudianteNombre:e.nombreCompleto||"",respuestas:Object.entries(s).map(([J,le])=>{const ie=n.preguntas.find(ce=>ce.id===J),re=ie==null?void 0:ie.respuestaCorrecta;return{preguntaId:J,alternativaSeleccionadaId:String(le),esCorrecta:String(le)===re}}),porcentajeAciertos:U,nivelLogro:Y,fechaEnvio:new Date().toISOString()};await qAe(W),g({porcentajeLogro:U,nivelLogro:Y,respuestasCorrectas:z,totalPreguntas:Z,detalle:K}),A(!0)}catch(q){console.error("Error al enviar respuestas:",q),v("Ocurri un error al enviar sus respuestas. Intente nuevamente.")}finally{d(!1)}},L=q=>{const Q=Math.floor(q/60),z=q%60;return`${Q}:${z<10?"0":""}${z}`},H=q=>{switch(q){case"Adecuado":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"Elemental":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"Insuficiente":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-slate-100 text-slate-800 dark:bg-slate-900/30 dark:text-slate-300"}};return l?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(qh,{className:"w-8 h-8 text-indigo-500 animate-spin mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando evaluaciones..."})]}):i.jsx("div",{className:"space-y-6",children:n?f?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Resultados: ",n.titulo]}),i.jsx("button",{onClick:()=>{a(null),g(null),A(!1)},className:"text-slate-600 hover:text-slate-900 font-semibold dark:text-slate-400 dark:hover:text-slate-200",children:"Volver a evaluaciones"})]}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-6 rounded-lg mb-6",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Tu nivel de logro"}),i.jsx("div",{className:`text-lg font-bold px-4 py-1 rounded-md ${H((m==null?void 0:m.nivelLogro)||"")}`,children:m==null?void 0:m.nivelLogro}),i.jsxs("div",{className:"mt-4",children:[i.jsx(yF,{className:"w-16 h-16 mx-auto text-indigo-500 mb-2"}),i.jsxs("div",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400",children:[m==null?void 0:m.porcentajeLogro.toFixed(1),"%"]}),i.jsxs("div",{className:"text-slate-600 dark:text-slate-400",children:[m==null?void 0:m.respuestasCorrectas," de ",m==null?void 0:m.totalPreguntas," correctas"]})]})]}),i.jsx("div",{className:"w-full max-w-md h-6 bg-slate-200 dark:bg-slate-600 rounded-full overflow-hidden mt-4",children:i.jsx("div",{className:`h-full ${(m==null?void 0:m.nivelLogro)==="Adecuado"?"bg-green-500":(m==null?void 0:m.nivelLogro)==="Elemental"?"bg-yellow-500":"bg-red-500"}`,style:{width:`${(m==null?void 0:m.porcentajeLogro)||0}%`}})}),i.jsxs("div",{className:"flex justify-between w-full max-w-md text-xs mt-1",children:[i.jsx("span",{children:"0%"}),i.jsx("span",{children:"50%"}),i.jsx("span",{children:"100%"})]})]})}),i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Detalle de respuestas"}),i.jsx("div",{className:"space-y-6",children:m==null?void 0:m.detalle.map((q,Q)=>i.jsxs("div",{className:"p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("h4",{className:"font-bold mb-2",children:[i.jsxs("span",{className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 py-0.5 px-2 rounded-md mr-2",children:["Pregunta ",Q+1]}),q.pregunta.enunciado]}),i.jsx("div",{className:"ml-6 mt-3 space-y-2",children:q.pregunta.alternativas.map(z=>i.jsxs("div",{className:`flex items-start ${z.id===q.respuestaSeleccionada?z.id===q.pregunta.respuestaCorrecta?"text-green-700 dark:text-green-400 font-semibold":"text-red-700 dark:text-red-400 font-semibold":z.id===q.pregunta.respuestaCorrecta?"text-green-700 dark:text-green-400 font-semibold":""}`,children:[i.jsxs("div",{className:"font-bold mr-2 min-w-[20px]",children:[z.id,")"]}),i.jsx("div",{children:z.texto}),z.id===q.respuestaSeleccionada&&z.id===q.pregunta.respuestaCorrecta&&i.jsx(pa,{className:"w-4 h-4 ml-1 text-green-600 dark:text-green-400"}),z.id===q.respuestaSeleccionada&&z.id!==q.pregunta.respuestaCorrecta&&i.jsx(Bh,{className:"w-4 h-4 ml-1 text-red-600 dark:text-red-400"}),z.id!==q.respuestaSeleccionada&&z.id===q.pregunta.respuestaCorrecta&&i.jsx(pa,{className:"w-4 h-4 ml-1 text-green-600 dark:text-green-400"})]},z.id))}),i.jsx("div",{className:"mt-4 text-sm",children:i.jsxs("div",{className:"bg-green-50 text-green-800 dark:bg-green-900/20 dark:text-green-300 p-2 rounded-md",children:[i.jsx("span",{className:"font-semibold",children:"Explicacin:"})," ",q.pregunta.explicacion]})})]},q.preguntaId))}),i.jsx("div",{className:"mt-6 flex justify-center",children:i.jsx("button",{onClick:()=>{a(null),g(null),A(!1)},className:"py-2 px-4 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Volver a evaluaciones"})})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:n.titulo}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[n.asignatura," - ",n.preguntas.length," preguntas"]})]}),i.jsx("button",{onClick:()=>{window.confirm("Est seguro que desea salir? Se perdern todas las respuestas.")&&a(null)},className:"text-slate-600 hover:text-slate-900 font-semibold dark:text-slate-400 dark:hover:text-slate-200",children:"Cancelar"})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800 mb-6 flex items-start",children:[i.jsx(O1,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-500 mr-2 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-yellow-800 dark:text-yellow-400",children:"Instrucciones"}),i.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 list-disc pl-5",children:[i.jsx("li",{children:"Responde todas las preguntas antes de enviar."}),i.jsx("li",{children:"Solo tienes un intento para responder."}),i.jsx("li",{children:"Una vez enviado, podrs ver tu resultado y las respuestas correctas."}),i.jsx("li",{children:"No refresques ni cierres la pgina durante la evaluacin."})]})]})]}),x&&i.jsxs("div",{className:"mb-4 p-3 bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200 rounded-md flex items-center",children:[i.jsx(Bh,{className:"w-4 h-4 mr-2"}),x]}),(n.asignatura==="Lectura"||n.asignatura==="Competencia Lectora")&&(()=>{var Q,z;console.log("[DEBUG] Asignatura de Lectura detectada, buscando texto base");let q=n.textoBase||((Q=n.preguntas.find(K=>K.textoBase))==null?void 0:Q.textoBase)||((z=n.preguntas[0])==null?void 0:z.textoBase);return console.log("[DEBUG] Texto base encontrado:",q?"S":"NO"),q||(console.log("[WARNING] Es una evaluacin de Lectura pero no tiene texto base"),n.descripcion&&n.descripcion.length>50&&(q=` NOTA: El texto de comprensin no est disponible. La evaluacin podra estar incompleta. Comuncate con tu profesor.

`+n.descripcion,console.log("[DEBUG] Usando descripcin como texto base alternativo"))),q?i.jsxs("div",{className:"mb-8 p-5 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-700 shadow-sm",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg mr-3",children:i.jsx(ps,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-blue-800 dark:text-blue-200 text-lg",children:" Texto de Comprensin Lectora"}),i.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-sm",children:"Lee atentamente el siguiente texto antes de responder las preguntas"})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-md border border-blue-100 dark:border-blue-800",children:i.jsx("div",{className:"prose prose-sm max-w-none text-slate-800 dark:text-slate-200",children:i.jsx(NE,{content:q,context:"simce-texto-base"})})})]}):null})(),i.jsx("div",{className:"space-y-6",children:n.preguntas.map((q,Q)=>i.jsxs("div",{className:`p-4 rounded-lg border ${s[q.id]?"border-green-200 dark:border-green-700/50":"border-slate-200 dark:border-slate-700"}`,children:[i.jsxs("h4",{className:"font-bold mb-2",children:[i.jsxs("span",{className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 py-0.5 px-2 rounded-md mr-2",children:["Pregunta ",Q+1]}),q.enunciado]}),i.jsx("div",{className:"ml-6 mt-3 space-y-2",children:q.alternativas.map(z=>i.jsxs("div",{className:`flex items-center p-2 rounded-md cursor-pointer ${s[q.id]===z.id?"bg-indigo-100 dark:bg-indigo-900/50":"hover:bg-slate-100 dark:hover:bg-slate-700/50"}`,onClick:()=>P(q.id,z.id),children:[i.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center mr-3 ${s[q.id]===z.id?"border-indigo-600 dark:border-indigo-400":"border-slate-400 dark:border-slate-500"}`,children:s[q.id]===z.id&&i.jsx("div",{className:"w-3 h-3 rounded-full bg-indigo-600 dark:bg-indigo-400"})}),i.jsxs("div",{className:"font-bold mr-2",children:[z.id,")"]}),i.jsx("div",{children:z.texto})]},z.id))}),!s[q.id]&&i.jsx("div",{className:"mt-2 text-amber-600 dark:text-amber-400 text-sm",children:"Por favor selecciona una respuesta"})]},q.id))}),i.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[i.jsxs("div",{className:"text-slate-600 dark:text-slate-400 flex items-center",children:[i.jsx(Dc,{className:"w-4 h-4 mr-1"}),i.jsx("span",{className:"text-sm",children:y&&i.jsxs(i.Fragment,{children:["Tiempo transcurrido: ",L(Math.floor((Date.now()-y)/1e3))]})})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:[Object.keys(s).length," de ",n.preguntas.length," respondidas"]}),i.jsx("button",{onClick:S,disabled:u||Object.keys(s).length!==n.preguntas.length,className:"py-2 px-4 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 flex items-center gap-2",children:u?i.jsxs(i.Fragment,{children:[i.jsx(qh,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Enviando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(QM,{className:"w-4 h-4"}),i.jsx("span",{children:"Enviar respuestas"})]})})]})]})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones disponibles"}),k&&i.jsxs("div",{className:"mb-4 p-3 rounded-md bg-slate-50 dark:bg-slate-900/20 border border-slate-200 dark:border-slate-700 text-xs text-slate-600 dark:text-slate-300",children:[i.jsx("strong",{children:"Debug:"})," Detectadas ",i.jsx("b",{children:k.porCurso})," por curso, ",i.jsx("b",{children:k.porEstudiante})," por asignacin directa, ",i.jsx("b",{children:k.total})," total."]}),t.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(wF,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No hay evaluaciones asignadas para tu curso en este momento."})]}):i.jsx("div",{className:"space-y-4",children:t.map(q=>i.jsx("div",{className:"p-4 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>M(q.id),children:i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:`p-2 rounded-md mr-4 ${q.asignatura==="Lectura"||q.asignatura==="Competencia Lectora"?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"}`,children:q.asignatura==="Lectura"||q.asignatura==="Competencia Lectora"?i.jsx(ps,{className:"w-6 h-6"}):i.jsx(UM,{className:"w-6 h-6"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-lg",children:q.titulo}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:q.descripcion}),i.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:q.asignatura}),i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:[q.preguntas.length," preguntas"]}),i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:new Date(q.fechaAsignacion).toLocaleDateString()})]})]})]})},q.id))})]})})},xNt=({currentUser:e})=>{const[t,r]=w.useState([]),[n,a]=w.useState(null),[s,o]=w.useState([]),[l,c]=w.useState([]),[u,d]=w.useState(null),[f,A]=w.useState(!0),[m,g]=w.useState(null),[x,v]=w.useState("general"),[y,N]=w.useState("todos"),C=q=>typeof(q==null?void 0:q.porcentajeAciertos)=="number"?q.porcentajeAciertos:typeof(q==null?void 0:q.porcentajeLogro)=="number"?q.porcentajeLogro:0,_=q=>{const Q=q&&(q.fechaEnvio||q.fechaRealizacion)||null;return Q?new Date(Q).toLocaleDateString():"-"},j=q=>Array.isArray(q==null?void 0:q.respuestas)?q.respuestas.filter(Q=>Q==null?void 0:Q.esCorrecta).length:typeof(q==null?void 0:q.respuestasCorrectas)=="number"?q.respuestasCorrectas:"-",I=q=>{const Q=q&&(q.tiempoRealizacion??q.duracionSegundos);if(typeof Q=="number"&&Q>0){const z=Math.floor(Q/60),K=(Q%60).toString().padStart(2,"0");return`${z}:${K}`}return"-"};w.useEffect(()=>{(async()=>{try{A(!0);const Q=await WAe(e.id||"");r(Q)}catch(Q){console.error("Error al cargar evaluaciones:",Q),g("No se pudieron cargar las evaluaciones")}finally{A(!1)}})()},[e]);const T=async q=>{try{A(!0),g(null);const Q=await uN(q);if(Q){a(Q);const z=Array.isArray(Q.cursosAsignados)?Q.cursosAsignados:[];if(z.length>0){const K=await fv(),Z=J=>{if(!J)return"";let le=J.trim().toLowerCase();return le=le.replace(//g,""),le=le.replace(/\s+(medio|bsico|basico)/g,""),le=le.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),le=le.replace(/^(\d)(?![])/,"$1"),le=le.replace(/\s+/g,"").toUpperCase(),le},U=Z(z[0]),Y=K.filter(J=>J.profile==="ESTUDIANTE"&&Z(J.curso||"")===U);c(Y);const R=Y.map(J=>J.id);let D=[];if(R.length>0){const{obtenerResultadosPorCurso:J}=await Ss(async()=>{const{obtenerResultadosPorCurso:le}=await Promise.resolve().then(()=>ZR);return{obtenerResultadosPorCurso:le}},void 0);D=await J(q,R)}else D=await JR(q);o(D);const W=await XAe(q,z[0]);W&&d(W)}else{const K=await JR(q);o(K),c([]),d(null)}}}catch(Q){console.error("Error al seleccionar evaluacin:",Q),g("No se pudo cargar la informacin de la evaluacin seleccionada")}finally{A(!1)}},k=async()=>{console.log("Generando Excel...")},B=q=>{switch(q){case"Adecuado":return"text-green-600 dark:text-green-400";case"Elemental":return"text-yellow-600 dark:text-yellow-400";case"Insuficiente":return"text-red-600 dark:text-red-400";default:return"text-slate-600 dark:text-slate-400"}},M=q=>{switch(q){case"Adecuado":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"Elemental":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"Insuficiente":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-slate-100 text-slate-800 dark:bg-slate-900/30 dark:text-slate-300"}},P=()=>{if(!u)return null;const{porcentajeAdecuado:q,porcentajeElemental:Q,porcentajeInsuficiente:z}=u;return i.jsxs("div",{className:"mt-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Distribucin por niveles de logro"}),i.jsxs("div",{className:"w-full h-8 rounded-md overflow-hidden flex mb-2",children:[i.jsx("div",{className:"h-full bg-green-500 dark:bg-green-600 transition-all",style:{width:`${q}%`}}),i.jsx("div",{className:"h-full bg-yellow-500 dark:bg-yellow-600 transition-all",style:{width:`${Q}%`}}),i.jsx("div",{className:"h-full bg-red-500 dark:bg-red-600 transition-all",style:{width:`${z}%`}})]}),i.jsxs("div",{className:"flex justify-between text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 bg-green-500 dark:bg-green-600 rounded-sm mr-1"}),i.jsxs("span",{children:["Adecuado: ",q.toFixed(1),"%"]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 bg-yellow-500 dark:bg-yellow-600 rounded-sm mr-1"}),i.jsxs("span",{children:["Elemental: ",Q.toFixed(1),"%"]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 bg-red-500 dark:bg-red-600 rounded-sm mr-1"}),i.jsxs("span",{children:["Insuficiente: ",z.toFixed(1),"%"]})]})]})]})},S=()=>u?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-blue-100 dark:bg-blue-900/50",children:i.jsx(qs,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estudiantes evaluados"}),i.jsx("div",{className:"text-2xl font-bold",children:u.totalEstudiantes})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-indigo-100 dark:bg-indigo-900/50",children:i.jsx(loe,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Promedio de logro"}),i.jsxs("div",{className:"text-2xl font-bold",children:[u.promedioLogro.toFixed(1),"%"]})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-green-100 dark:bg-green-900/50",children:i.jsx(Q5e,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Nivel predominante"}),i.jsx("div",{className:`text-2xl font-bold ${B(u.nivelPredominante)}`,children:u.nivelPredominante})]})]})})]}),P(),i.jsxs("div",{className:"mt-8",children:[i.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Estadsticas por eje temtico"}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:i.jsx("div",{className:"space-y-4",children:u.porEjeTematico.map((q,Q)=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"font-medium",children:q.eje}),i.jsxs("span",{className:"text-sm",children:[q.promedio.toFixed(1),"%"]})]}),i.jsx("div",{className:"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-full",children:i.jsx("div",{className:`h-full rounded-full ${q.promedio>=80?"bg-green-500":q.promedio>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${q.promedio}%`}})})]},Q))})})]})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(qh,{className:"w-12 h-12 mx-auto mb-3 text-slate-400"}),i.jsx("p",{children:"No hay datos disponibles para mostrar"})]}),L=()=>{const Q=(l.length>0?l:[]).map(z=>({est:z,intento:s.find(K=>K.estudianteId===z.id)})).filter(({intento:z})=>y==="todos"?!0:z&&typeof z.nivelLogro=="string"&&z.nivelLogro.toLowerCase()===y);return i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Resultados por estudiante"}),i.jsx("div",{className:"flex space-x-2",children:i.jsxs("select",{className:"text-sm border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 px-2 py-1",value:y,onChange:z=>N(z.target.value),children:[i.jsx("option",{value:"todos",children:"Todos los niveles"}),i.jsx("option",{value:"adecuado",children:"Adecuado"}),i.jsx("option",{value:"elemental",children:"Elemental"}),i.jsx("option",{value:"insuficiente",children:"Insuficiente"})]})})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Estudiante"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Curso"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"% Logro"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Nivel"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Correctas"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Tiempo"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Fecha"})]})}),i.jsx("tbody",{children:Q.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"px-4 py-6 text-center text-slate-600 dark:text-slate-400",children:l.length===0?"No hay estudiantes detectados para el curso asignado o no hay intentos registrados.":"No hay datos para mostrar con los filtros seleccionados"})}):Q.map(({est:z,intento:K})=>i.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("td",{className:"px-4 py-3",children:(K==null?void 0:K.estudianteNombre)||z.nombreCompleto||""}),i.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400",children:z.curso||(K==null?void 0:K.curso)||"-"}),i.jsx("td",{className:"px-4 py-3 font-semibold",children:K?C(K).toFixed(1)+"%":""}),i.jsx("td",{className:"px-4 py-3",children:K?i.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${M(K.nivelLogro)}`,children:K.nivelLogro}):i.jsx("span",{className:"text-slate-400",children:""})}),i.jsx("td",{className:"px-4 py-3",children:K?`${j(K)}/${(n==null?void 0:n.preguntas.length)||"-"}`:""}),i.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400",children:K?I(K):""}),i.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400",children:K?_(K):""})]},z.id))})]})})})]})},H=()=>!n||!(u!=null&&u.porPregunta)||!u.porPregunta.length?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(qh,{className:"w-12 h-12 mx-auto mb-3 text-slate-400"}),i.jsx("p",{children:"No hay datos disponibles para mostrar"})]}):i.jsxs("div",{className:"mt-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Anlisis por pregunta"}),i.jsx("div",{className:"space-y-6",children:u.porPregunta.map((q,Q)=>{var K;const z=n.preguntas.find(Z=>Z.id===q.preguntaId);return z?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-bold mb-2",children:[i.jsxs("span",{className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 py-0.5 px-2 rounded-md mr-2",children:["Pregunta ",Q+1]}),z.enunciado]}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[i.jsx("span",{className:"font-medium",children:"Eje temtico:"})," ",z.ejeTematico||"No especificado"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Porcentaje de acierto"}),i.jsxs("div",{className:`text-xl font-bold ${q.porcentajeAcierto>=80?"text-green-600 dark:text-green-400":q.porcentajeAcierto>=50?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"}`,children:[q.porcentajeAcierto.toFixed(1),"%"]})]})]}),i.jsx("div",{className:"mt-4",children:i.jsx("div",{className:"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-full mb-2",children:i.jsx("div",{className:`h-full rounded-full ${q.porcentajeAcierto>=80?"bg-green-500":q.porcentajeAcierto>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${q.porcentajeAcierto}%`}})})}),i.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Distribucin de respuestas"}),i.jsx("div",{className:"space-y-2",children:q.distribucionRespuestas.map(Z=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs ${Z.alternativaId===z.respuestaCorrecta?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300"} mr-2`,children:Z.alternativaId}),i.jsx("div",{className:"flex-1",children:i.jsx("div",{className:"w-full h-4 bg-slate-200 dark:bg-slate-700 rounded-sm overflow-hidden",children:i.jsx("div",{className:`h-full ${Z.alternativaId===z.respuestaCorrecta?"bg-green-500 dark:bg-green-600":"bg-red-500 dark:bg-red-600"}`,style:{width:`${Z.porcentaje}%`}})})}),i.jsxs("div",{className:"ml-2 w-10 text-right text-sm",children:[Z.porcentaje.toFixed(0),"%"]})]},Z.alternativaId))})]}),i.jsxs("div",{children:[i.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Alternativa correcta"}),i.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded border border-green-200 dark:border-green-800 text-green-800 dark:text-green-300",children:i.jsxs("div",{className:"flex items-start",children:[i.jsxs("div",{className:"font-bold mr-2",children:[z.respuestaCorrecta,")"]}),i.jsx("div",{children:(K=z.alternativas.find(Z=>Z.id===z.respuestaCorrecta))==null?void 0:K.texto})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("h5",{className:"text-sm font-semibold mb-1",children:"Dificultad"}),i.jsx("div",{className:`inline-block px-3 py-1 rounded text-sm ${q.porcentajeAcierto>=80?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":q.porcentajeAcierto>=50?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:q.porcentajeAcierto>=80?"Baja":q.porcentajeAcierto>=50?"Media":"Alta"})]})]})]})]},q.preguntaId):null})})]});return f?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(qh,{className:"w-8 h-8 text-indigo-500 animate-spin mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando informacin..."})]}):i.jsx("div",{className:"space-y-6",children:n?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-slate-200 dark:border-slate-700 pb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:n.titulo}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[n.asignatura,"  ",s.length," estudiantes evaluados"]}),Array.isArray(n.cursosAsignados)&&n.cursosAsignados.length>0&&i.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[i.jsx("span",{className:"font-semibold text-xs text-indigo-700 dark:text-indigo-300",children:"Cursos asignados:"}),n.cursosAsignados.map((q,Q)=>i.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 py-0.5 px-2 rounded-full text-xs",children:q},q+Q))]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:k,className:"py-2 px-3 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center gap-1 text-sm",children:[i.jsx(Pf,{className:"w-4 h-4"}),i.jsx("span",{children:"Exportar"})]}),i.jsx("button",{onClick:()=>a(null),className:"py-2 px-3 bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded-md hover:bg-slate-300 dark:hover:bg-slate-600 text-sm",children:"Volver"})]})]}),m&&i.jsxs("div",{className:"mb-4 p-3 bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200 rounded-md flex items-center",children:[i.jsx(Bh,{className:"w-4 h-4 mr-2"}),m]}),i.jsxs("div",{className:"flex border-b border-slate-200 dark:border-slate-700 mb-6",children:[i.jsx("button",{className:`py-2 px-4 border-b-2 font-medium text-sm ${x==="general"?"border-indigo-600 text-indigo-600 dark:text-indigo-400 dark:border-indigo-400":"border-transparent text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,onClick:()=>v("general"),children:"Vista general"}),i.jsx("button",{className:`py-2 px-4 border-b-2 font-medium text-sm ${x==="porEstudiante"?"border-indigo-600 text-indigo-600 dark:text-indigo-400 dark:border-indigo-400":"border-transparent text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,onClick:()=>v("porEstudiante"),children:"Por estudiante"}),i.jsx("button",{className:`py-2 px-4 border-b-2 font-medium text-sm ${x==="porPregunta"?"border-indigo-600 text-indigo-600 dark:text-indigo-400 dark:border-indigo-400":"border-transparent text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,onClick:()=>v("porPregunta"),children:"Por pregunta"})]}),x==="general"&&S(),x==="porEstudiante"&&L(),x==="porPregunta"&&H()]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones para analizar"}),t.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Ph,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No hay evaluaciones SIMCE creadas an."})]}):i.jsx("div",{className:"space-y-4",children:t.map(q=>i.jsx("div",{className:"p-4 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>T(q.id),children:i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:`p-2 rounded-md mr-4 ${q.asignatura==="Lectura"||q.asignatura==="Competencia Lectora"?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"}`,children:q.asignatura==="Lectura"||q.asignatura==="Competencia Lectora"?i.jsx(ps,{className:"w-6 h-6"}):i.jsx(UM,{className:"w-6 h-6"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-lg",children:q.titulo}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:q.descripcion}),i.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:q.asignatura}),i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:[q.preguntas.length," preguntas"]}),i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:(()=>{try{const Q=q.fechaCreacion,z=typeof(Q==null?void 0:Q.toDate)=="function"?Q.toDate():new Date(Q);return isNaN(z.getTime())?"-":z.toLocaleDateString()}catch{return"-"}})()})]})]})]})},q.id))})]})})},AS=({currentUser:e})=>{const[t,r]=w.useState("generador"),n=(e==null?void 0:e.profile)===It.PROFESORADO||(e==null?void 0:e.profile)===It.SUBDIRECCION||(e==null?void 0:e.profile)===It.COORDINACION_TP,a=(e==null?void 0:e.profile)===It.ESTUDIANTE;return w.useEffect(()=>{a&&r("evaluacion")},[a]),i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluacin SIMCE"})}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md overflow-hidden",children:[i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex",children:[n&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>r("generador"),className:`flex items-center gap-2 px-4 py-3 ${t==="generador"?"text-indigo-600 border-b-2 border-indigo-600 font-medium":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[i.jsx(MN,{className:"w-4 h-4"}),i.jsx("span",{children:"Generador de Preguntas"})]}),i.jsxs("button",{onClick:()=>r("resultados"),className:`flex items-center gap-2 px-4 py-3 ${t==="resultados"?"text-indigo-600 border-b-2 border-indigo-600 font-medium":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[i.jsx(Tl,{className:"w-4 h-4"}),i.jsx("span",{children:"Resultados"})]})]}),a&&i.jsxs("button",{onClick:()=>r("evaluacion"),className:`flex items-center gap-2 px-4 py-3 ${t==="evaluacion"?"text-indigo-600 border-b-2 border-indigo-600 font-medium":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[i.jsx(r1,{className:"w-4 h-4"}),i.jsx("span",{children:"Mis Evaluaciones"})]})]})}),i.jsxs("div",{className:"p-6",children:[n&&t==="generador"&&i.jsx(got,{currentUser:e}),n&&t==="resultados"&&i.jsx(xNt,{currentUser:e}),a&&t==="evaluacion"&&i.jsx(gNt,{currentUser:e}),!n&&!a&&i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:"No tienes permisos para acceder a este mdulo."})})]})]})]})},vNt=["Enviada","Visada","Aceptada","Rechazada","Completada"],_P=({currentUser:e})=>{const t=e.profile===It.SUBDIRECCION,r=e.profile===It.COORDINACION_TP,[n,a]=w.useState(""),[s,o]=w.useState(ma[0]),[l,c]=w.useState(Y0[0]),[u,d]=w.useState(""),[f,A]=w.useState(30),[m,g]=w.useState(new Date().toISOString().split("T")[0]),[x,v]=w.useState(""),[y,N]=w.useState(null),[C,_]=w.useState(""),[j,I]=w.useState(null),[T,k]=w.useState(!1),[B,M]=w.useState([]),[P,S]=w.useState([]),[L,H]=w.useState("Todos"),[q,Q]=w.useState("Todas"),[z,K]=w.useState("Todos"),[Z,U]=w.useState("Todos"),[Y,R]=w.useState("Todos"),[D,W]=w.useState(null),[J,le]=w.useState(""),[ie,re]=w.useState(!1),[ce,oe]=w.useState(null),[be,X]=w.useState(!1),[je,De]=w.useState(!0),ke=w.useMemo(()=>{const Be=new Set;return P.forEach(et=>et.solicitanteNombre&&Be.add(et.solicitanteNombre)),["Todos",...Array.from(Be).sort()]},[P]),ue=w.useMemo(()=>{const Be=new Set;return P.forEach(et=>et.asignatura&&Be.add(et.asignatura)),["Todas",...Array.from(Be).sort()]},[P]),we=w.useMemo(()=>{const Be=new Set;return P.forEach(et=>et.curso&&Be.add(et.curso)),["Todos",...Array.from(Be).sort()]},[P]),Ae=w.useMemo(()=>P.length,[P]),de=w.useMemo(()=>P.reduce((Be,et)=>Be+(Number(et.cantidadCopias)||0),0),[P]),ae=Be=>{const et=new Map;for(const bt of P){const jt=(Be(bt)||"").trim()||"";et.set(jt,(et.get(jt)||0)+1)}return Array.from(et.entries()).map(([bt,jt])=>({name:bt,value:jt})).sort((bt,jt)=>jt.value-bt.value)},fe=w.useMemo(()=>ae(Be=>Be.estado||"Enviada"),[P]),ge=w.useMemo(()=>ae(Be=>Be.nivel||""),[P]),xe=w.useMemo(()=>ae(Be=>Be.asignatura||"").slice(0,10),[P]),Ue=w.useMemo(()=>ae(Be=>Be.solicitanteNombre||"").slice(0,10),[P]),qe=w.useMemo(()=>ae(Be=>Be.curso||"").slice(0,10),[P]),Ze={Enviada:"#f59e0b",Visada:"#3b82f6",Aceptada:"#10b981",Rechazada:"#ef4444",Completada:"#059669"},We=["#0ea5e9","#22c55e","#f97316","#6366f1","#14b8a6","#eab308","#ef4444","#8b5cf6","#06b6d4","#84cc16","#f43f5e"];w.useEffect(()=>{var et;const Be=Gpe({emailLower:(et=e.email)==null?void 0:et.toLowerCase()},M);if(t||r){const bt=qpe({nivel:Y,curso:L,asignatura:q,docenteNombre:z,estado:Z},S);return()=>{Be(),bt()}}return()=>{Be()}},[e.email,t,r,Y,L,q,z,Z]);const me=async Be=>{if(Be.preventDefault(),!n.trim()){I("Debe indicar un ttulo o descripcin del material.");return}try{k(!0),I(null);let et;if(y)try{const{uploadAdjuntoMulticopia:jt}=await Ss(async()=>{const{uploadAdjuntoMulticopia:qt}=await Promise.resolve().then(()=>vpt);return{uploadAdjuntoMulticopia:qt}},void 0);et=await jt(y,"multicopias")}catch(jt){console.warn("No se pudo subir el adjunto:",jt)}const bt={solicitanteId:e.id,solicitanteNombre:e.nombreCompleto,solicitanteEmail:e.email,tituloMaterial:n,asignatura:s,nivel:l,curso:u||void 0,cantidadCopias:Math.max(1,Number(f)||1),fechaEntregaDeseada:m,enlaceUrl:x||void 0,adjuntoUrl:et,comentarios:C||void 0,estado:"Enviada"};await $pe(bt),a(""),c(Y0[0]),d(""),A(30),v(""),N(null),_("")}catch(et){I((et==null?void 0:et.message)||"No se pudo crear la solicitud.")}finally{k(!1)}},Ve=()=>i.jsxs("form",{onSubmit:me,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Ttulo o descripcin del material"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{value:n,onChange:Be=>a(Be.target.value),className:"w-full border rounded-md px-3 py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"Ej: Prueba de ecuaciones lineales Unidad 2"}),i.jsx(Ko,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Asignatura"}),i.jsx("select",{value:s,onChange:Be=>o(Be.target.value),className:"w-full border rounded-md px-3 py-2",children:ma.map(Be=>i.jsx("option",{value:Be,children:Be},Be))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Nivel"}),i.jsx("select",{required:!0,value:l,onChange:Be=>c(Be.target.value),className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500",children:Y0.map(Be=>i.jsx("option",{value:Be,children:Be},Be))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Curso (opcional)"}),i.jsxs("select",{value:u,onChange:Be=>d(Be.target.value),className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500",children:[i.jsx("option",{value:"",children:""}),ja.map(Be=>i.jsx("option",{value:Be,children:Be},Be))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Cantidad de copias"}),i.jsx("input",{type:"number",min:1,value:f,onChange:Be=>A(parseInt(Be.target.value)||1),className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Fecha de entrega deseada"}),i.jsx("input",{type:"date",value:m,onChange:Be=>g(Be.target.value),className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Enlace al material (Drive, etc.)"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{value:x,onChange:Be=>v(Be.target.value),className:"w-full border rounded-md px-3 py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"https://..."}),i.jsx(L5,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"O subir archivo (opcional)"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"file",onChange:Be=>{var et;return N(((et=Be.target.files)==null?void 0:et[0])||null)},className:"block w-full text-sm text-slate-600 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"}),i.jsx(Bb,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400 pointer-events-none"})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Se guardar en Storage y se adjuntar a la solicitud."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Comentarios"}),i.jsx("textarea",{value:C,onChange:Be=>_(Be.target.value),rows:3,className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"Indicaciones adicionales"})]}),j&&i.jsx("p",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:j}),i.jsx("div",{className:"text-right",children:i.jsxs("button",{type:"submit",disabled:T,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400 shadow-sm",children:[i.jsx(QM,{className:"h-4 w-4"})," ",T?"Enviando":"Enviar solicitud"]})})]}),Xe=()=>i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Fecha"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Ttulo"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Asignatura"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Nivel"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Curso"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Cantidad"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Fecha deseada"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Material"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Estado"}),i.jsx("th",{className:"px-4 py-2"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200",children:B.map(Be=>i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"px-4 py-2 text-sm",children:Be.createdAt?new Date(Be.createdAt).toLocaleString("es-CL"):""}),i.jsx("td",{className:"px-4 py-2 text-sm font-medium text-slate-800",children:Be.tituloMaterial}),i.jsx("td",{className:"px-4 py-2 text-sm",children:Be.asignatura}),i.jsx("td",{className:"px-4 py-2 text-sm",children:Be.nivel}),i.jsx("td",{className:"px-4 py-2 text-sm",children:Be.curso||""}),i.jsx("td",{className:"px-4 py-2 text-sm",children:Be.cantidadCopias}),i.jsx("td",{className:"px-4 py-2 text-sm",children:Be.fechaEntregaDeseada}),i.jsxs("td",{className:"px-4 py-2 text-sm",children:[i.jsxs("div",{className:"flex gap-2 items-center",children:[Be.enlaceUrl&&i.jsx("a",{href:Be.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Enlace"}),Be.adjuntoUrl&&i.jsx("a",{href:Be.adjuntoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-emerald-600 hover:underline",children:"Archivo"}),!Be.enlaceUrl&&!Be.adjuntoUrl&&i.jsx("span",{className:"text-slate-400",children:""})]}),Be.estado==="Rechazada"&&Be.motivoRechazo&&i.jsxs("div",{className:"text-xs text-red-600 mt-1",children:["Motivo: ",Be.motivoRechazo]})]}),i.jsx("td",{className:"px-4 py-2 text-sm",children:i.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold ${Be.estado==="Aceptada"?"bg-green-100 text-green-800":Be.estado==="Rechazada"?"bg-red-100 text-red-700":Be.estado==="Visada"?"bg-blue-100 text-blue-800":Be.estado==="Completada"?"bg-emerald-100 text-emerald-800":"bg-yellow-100 text-yellow-800"}`,children:[Be.estado==="Aceptada"&&i.jsx(pa,{className:"h-3 w-3"}),Be.estado==="Rechazada"&&i.jsx(Bh,{className:"h-3 w-3"}),Be.estado==="Visada"&&i.jsx(ox,{className:"h-3 w-3"}),Be.estado==="Completada"&&i.jsx(x2,{className:"h-3 w-3"}),Be.estado==="Enviada"&&i.jsx(Bb,{className:"h-3 w-3"}),Be.estado]})}),i.jsx("td",{className:"px-4 py-2 text-sm text-right",children:(Be.estado==="Enviada"||Be.estado==="Rechazada")&&i.jsx("button",{title:"Eliminar",onClick:()=>oe(Be),className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-slate-200 text-slate-800 hover:bg-slate-300",children:i.jsx(Vn,{className:"h-4 w-4"})})})]},Be.id))})]})}),Ie=()=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-wrap gap-3 items-end",children:[i.jsxs("div",{className:"flex items-center gap-2 text-slate-600 w-full md:w-auto",children:[i.jsx(qC,{className:"h-4 w-4"})," ",i.jsx("span",{className:"text-sm",children:"Filtros"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Nivel"}),i.jsx("select",{value:Y,onChange:Be=>R(Be.target.value),className:"border rounded-md px-3 py-1.5",children:["Todos",...Y0].map(Be=>i.jsx("option",{value:Be,children:Be},Be))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Docente"}),i.jsx("select",{value:z,onChange:Be=>K(Be.target.value),className:"border rounded-md px-3 py-1.5",children:ke.map(Be=>i.jsx("option",{value:Be,children:Be},Be))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Asignatura"}),i.jsx("select",{value:q,onChange:Be=>Q(Be.target.value),className:"border rounded-md px-3 py-1.5",children:ue.map(Be=>i.jsx("option",{value:Be,children:Be},Be))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Curso"}),i.jsx("select",{value:L,onChange:Be=>H(Be.target.value),className:"border rounded-md px-3 py-1.5",children:we.map(Be=>i.jsx("option",{value:Be,children:Be},Be))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Estado"}),i.jsx("select",{value:Z,onChange:Be=>U(Be.target.value),className:"border rounded-md px-3 py-1.5",children:["Todos",...vNt].map(Be=>i.jsx("option",{value:Be,children:Be},Be))})]})]}),i.jsxs("div",{className:"mt-2",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-700",children:"Resumen grfico"}),i.jsxs("button",{onClick:()=>De(Be=>!Be),className:"text-xs px-3 py-1.5 rounded border bg-white hover:bg-slate-50",children:[je?"Ocultar":"Ver"," grficos"]})]}),je&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"col-span-1 lg:col-span-3 grid grid-cols-2 md:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"rounded-xl border p-4 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Total solicitudes"}),i.jsx("div",{className:"text-2xl font-bold",children:Ae})]}),i.jsxs("div",{className:"rounded-xl border p-4 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Total copias pedidas"}),i.jsx("div",{className:"text-2xl font-bold",children:de})]}),i.jsxs("div",{className:"rounded-xl border p-4 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Docentes nicos"}),i.jsx("div",{className:"text-2xl font-bold",children:new Set(P.map(Be=>Be.solicitanteNombre||"")).size})]}),i.jsxs("div",{className:"rounded-xl border p-4 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Asignaturas nicas"}),i.jsx("div",{className:"text-2xl font-bold",children:new Set(P.map(Be=>Be.asignatura||"")).size})]})]}),i.jsxs("div",{className:"rounded-xl border p-3 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Por estado"}),i.jsx("div",{className:"h-[240px]",children:i.jsx($o,{width:"100%",height:"100%",children:i.jsxs(CT,{children:[i.jsx(xE,{data:fe,dataKey:"value",nameKey:"name",outerRadius:80,children:fe.map((Be,et)=>i.jsx(kA,{fill:Ze[Be.name]||We[et%We.length]},`estado-${et}`))}),i.jsx(Vo,{}),i.jsx(Kp,{})]})})})]}),i.jsxs("div",{className:"rounded-xl border p-3 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Por nivel"}),i.jsx("div",{className:"h-[240px]",children:i.jsx($o,{width:"100%",height:"100%",children:i.jsxs(Nf,{data:ge,margin:{left:8,right:8,bottom:8},children:[i.jsx(Mh,{strokeDasharray:"3 3"}),i.jsx(Rc,{dataKey:"name",tick:{fontSize:12},interval:0,angle:-20,height:50,textAnchor:"end"}),i.jsx(Lc,{allowDecimals:!1}),i.jsx(Vo,{}),i.jsx(jd,{dataKey:"value",fill:"#3b82f6",radius:[4,4,0,0]})]})})})]}),i.jsxs("div",{className:"rounded-xl border p-3 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Por asignatura (Top 10)"}),i.jsx("div",{className:"h-[240px]",children:i.jsx($o,{width:"100%",height:"100%",children:i.jsxs(Nf,{data:xe,margin:{left:8,right:8,bottom:8},children:[i.jsx(Mh,{strokeDasharray:"3 3"}),i.jsx(Rc,{dataKey:"name",tick:{fontSize:11},interval:0,angle:-30,height:70,textAnchor:"end"}),i.jsx(Lc,{allowDecimals:!1}),i.jsx(Vo,{}),i.jsx(jd,{dataKey:"value",fill:"#10b981",radius:[4,4,0,0]})]})})})]}),i.jsxs("div",{className:"rounded-xl border p-3 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Por docente (Top 10)"}),i.jsx("div",{className:"h-[260px]",children:i.jsx($o,{width:"100%",height:"100%",children:i.jsxs(Nf,{data:Ue,margin:{left:8,right:8,bottom:8},children:[i.jsx(Mh,{strokeDasharray:"3 3"}),i.jsx(Rc,{dataKey:"name",tick:{fontSize:11},interval:0,angle:-30,height:70,textAnchor:"end"}),i.jsx(Lc,{allowDecimals:!1}),i.jsx(Vo,{}),i.jsx(jd,{dataKey:"value",fill:"#f59e0b",radius:[4,4,0,0]})]})})})]}),i.jsxs("div",{className:"rounded-xl border p-3 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Por curso (Top 10)"}),i.jsx("div",{className:"h-[240px]",children:i.jsx($o,{width:"100%",height:"100%",children:i.jsxs(Nf,{data:qe,margin:{left:8,right:8,bottom:8},children:[i.jsx(Mh,{strokeDasharray:"3 3"}),i.jsx(Rc,{dataKey:"name",tick:{fontSize:11},interval:0,angle:-30,height:70,textAnchor:"end"}),i.jsx(Lc,{allowDecimals:!1}),i.jsx(Vo,{}),i.jsx(jd,{dataKey:"value",fill:"#8b5cf6",radius:[4,4,0,0]})]})})})]})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Fecha"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Docente"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Ttulo"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Asignatura"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Nivel"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Curso"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Cantidad"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Fecha deseada"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Material"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Estado"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Motivo"}),i.jsx("th",{className:"px-3 py-2"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200",children:P.map(Be=>i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"px-3 py-2 text-sm",children:Be.createdAt?new Date(Be.createdAt).toLocaleString("es-CL"):""}),i.jsx("td",{className:"px-3 py-2 text-sm",children:Be.solicitanteNombre}),i.jsx("td",{className:"px-3 py-2 text-sm font-medium text-slate-800",children:Be.tituloMaterial}),i.jsx("td",{className:"px-3 py-2 text-sm",children:Be.asignatura}),i.jsx("td",{className:"px-3 py-2 text-sm",children:Be.nivel}),i.jsx("td",{className:"px-3 py-2 text-sm",children:Be.curso||""}),i.jsx("td",{className:"px-3 py-2 text-sm",children:Be.cantidadCopias}),i.jsx("td",{className:"px-3 py-2 text-sm",children:Be.fechaEntregaDeseada}),i.jsx("td",{className:"px-3 py-2 text-sm",children:i.jsxs("div",{className:"flex gap-2 items-center",children:[Be.enlaceUrl&&i.jsxs("a",{href:Be.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:underline",children:[i.jsx(L5,{className:"h-4 w-4"})," Enlace"]}),Be.adjuntoUrl&&i.jsxs("a",{href:Be.adjuntoUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-emerald-600 hover:underline",children:[i.jsx(Bb,{className:"h-4 w-4"})," Archivo"]}),!Be.enlaceUrl&&!Be.adjuntoUrl&&i.jsx("span",{className:"text-slate-400",children:""})]})}),i.jsx("td",{className:"px-3 py-2 text-sm",children:i.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold ${Be.estado==="Aceptada"?"bg-green-100 text-green-800":Be.estado==="Rechazada"?"bg-red-100 text-red-700":Be.estado==="Visada"?"bg-blue-100 text-blue-800":Be.estado==="Completada"?"bg-emerald-100 text-emerald-800":"bg-yellow-100 text-yellow-800"}`,children:[Be.estado==="Aceptada"&&i.jsx(pa,{className:"h-3 w-3"}),Be.estado==="Rechazada"&&i.jsx(Bh,{className:"h-3 w-3"}),Be.estado==="Visada"&&i.jsx(ox,{className:"h-3 w-3"}),Be.estado==="Completada"&&i.jsx(x2,{className:"h-3 w-3"}),Be.estado==="Enviada"&&i.jsx(Bb,{className:"h-3 w-3"}),Be.estado]})}),i.jsx("td",{className:"px-3 py-2 text-sm max-w-[240px] truncate",title:Be.motivoRechazo||"",children:Be.motivoRechazo||""}),i.jsxs("td",{className:"px-3 py-2 text-sm text-right space-x-2",children:[Be.estado==="Enviada"&&i.jsxs("button",{onClick:async()=>await _2(Be.id,"Visada",e.nombreCompleto),className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:[i.jsx(ox,{className:"h-4 w-4"})," Visar"]}),(Be.estado==="Enviada"||Be.estado==="Visada")&&i.jsxs("button",{onClick:async()=>{await _2(Be.id,"Aceptada",e.nombreCompleto),await Kpe(Be)},className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700",children:[i.jsx(pa,{className:"h-4 w-4"})," Aceptar"]}),Be.estado!=="Rechazada"&&Be.estado!=="Completada"&&i.jsxs("button",{onClick:()=>{W(Be),le("")},className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",children:[i.jsx(Bh,{className:"h-4 w-4"})," Rechazar"]}),Be.estado==="Aceptada"&&i.jsxs("button",{onClick:async()=>await _2(Be.id,"Completada",e.nombreCompleto),className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-emerald-600 text-white hover:bg-emerald-700",children:[i.jsx(x2,{className:"h-4 w-4"})," Completada"]}),e.id===Be.solicitanteId&&(Be.estado==="Enviada"||Be.estado==="Rechazada")&&i.jsxs("button",{title:"Eliminar",onClick:()=>oe(Be),className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-slate-200 text-slate-800 hover:bg-slate-300",children:[i.jsx(Vn,{className:"h-4 w-4"})," Eliminar"]})]})]},Be.id))})]})}),D&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl p-6 shadow-xl",children:[i.jsx("h3",{className:"text-lg font-bold mb-3",children:"Motivo de rechazo"}),i.jsx("p",{className:"text-sm text-slate-600 mb-3",children:"Indica brevemente el motivo del rechazo para que el docente pueda corregir o reenviar."}),i.jsx("textarea",{rows:4,value:J,onChange:Be=>le(Be.target.value),className:"w-full border-slate-300 rounded-md",placeholder:"Ej: El material no es legible o falta la portada."}),i.jsxs("div",{className:"mt-5 flex justify-end gap-2",children:[i.jsxs("button",{onClick:()=>{W(null),le("")},className:"inline-flex items-center gap-1 px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:[i.jsx(Bh,{className:"h-4 w-4"})," Cancelar"]}),i.jsx("button",{disabled:ie,onClick:async()=>{if(D)try{re(!0),await _2(D.id,"Rechazada",e.nombreCompleto,{motivoRechazo:J||void 0}),W(null),le("")}finally{re(!1)}},className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 disabled:bg-red-400",children:ie?"Guardando":i.jsxs(i.Fragment,{children:[i.jsx(Bh,{className:"h-4 w-4"})," Confirmar rechazo"]})})]})]})}),ce&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl p-6 shadow-xl",children:[i.jsxs("h3",{className:"text-lg font-bold mb-3 flex items-center gap-2 text-red-700",children:[i.jsx(Vn,{className:"h-5 w-5"})," Eliminar solicitud"]}),i.jsxs("p",{className:"text-sm text-slate-600 mb-3",children:["Esta accin eliminar la solicitud ",ce.tituloMaterial,". Si tiene un archivo adjunto, tambin se intentar borrar del almacenamiento."]}),i.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Deseas continuar?"}),i.jsxs("div",{className:"mt-1 flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>oe(null),className:"inline-flex items-center gap-1 px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),i.jsx("button",{disabled:be,onClick:async()=>{try{X(!0),await Wpe(ce.id,{adjuntoUrl:ce.adjuntoUrl}),oe(null)}catch{alert("No se pudo eliminar.")}finally{X(!1)}},className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 disabled:bg-red-400",children:be?"Eliminando":i.jsxs(i.Fragment,{children:[i.jsx(Vn,{className:"h-4 w-4"})," Eliminar"]})})]})]})})]});return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-2xl shadow",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx(g3,{className:"h-6 w-6 text-amber-600"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Multicopias"})]}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Gestiona solicitudes de copias de material evaluativo y pedaggico."}),(e.profile===It.PROFESORADO||r)&&i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-slate-800 dark:text-slate-200 mb-3",children:[i.jsx(Ko,{className:"h-5 w-5 text-amber-600"})," Nueva solicitud"]}),Ve()]}),(e.profile===It.PROFESORADO||r)&&i.jsxs("div",{className:"mb-10",children:[i.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-slate-800 dark:text-slate-200 mb-3",children:[i.jsx(wb,{className:"h-5 w-5 text-amber-600"})," Mis solicitudes"]}),Xe()]}),t&&i.jsxs("div",{children:[i.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-slate-800 dark:text-slate-200 mb-3",children:[i.jsx(x2,{className:"h-5 w-5 text-amber-600"})," Panel de Subdireccin"]}),Ie()]})]})};async function bNt(e){const t=ht(ut,"ensayo_evaluaciones"),r={...e,createdAt:zn(),tipo:"evaluacion_ensayo",indicadores:10};return(await ln(t,r)).id}async function yNt(e){const t=ht(ut,"ensayo_evaluaciones"),r=Bt(t,Xt("createdAt","desc"),Dl(e==null?void 0:e.max)),n=await Ir(r),a=[];n.forEach(o=>{const l=o.data();a.push({id:o.id,...l,createdAt:l.createdAt??null,tipo:l.tipo,indicadores:l.indicadores})});let s=a;return e!=null&&e.filtroCurso&&(s=s.filter(o=>(o.curso||"").toUpperCase()===e.filtroCurso.toUpperCase())),e!=null&&e.filtroAsignatura&&(s=s.filter(o=>(o.asignatura||"")===e.filtroAsignatura)),e!=null&&e.filtroProfesorId&&(s=s.filter(o=>(o.profesorId||"")===e.filtroProfesorId)),e!=null&&e.filtroCreadorId&&(s=s.filter(o=>(o.creadorId||"")===e.filtroCreadorId)),s}function u8(e){if(e!==void 0){if(e===null)return null;if(Array.isArray(e))return e.map(u8);if(typeof e=="object"){const t={};return Object.entries(e).forEach(([r,n])=>{const a=u8(n);a!==void 0&&(t[r]=a)}),t}return e}}async function wNt(e,t){const r=Wt(ut,"ensayo_evaluaciones",e),n=u8({...t});await qi(r,n)}async function NNt(e){const t=Wt(ut,"ensayo_evaluaciones",e);await ca(t)}const mS=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},pu=[1,2,3,4,5,6,7,8,9,10],d8={1:"Llega puntualmente a la evaluacin.",2:"Sigue las instrucciones dadas por el/la docente respecto a su ubicacin en la sala de clases.",3:"Sigue las instrucciones dadas por el/la docente respecto al inicio de la evaluacin.",4:"Se mantiene en silencio mientras desarrolla la evaluacin.",5:"Mantiene su celular o cualquier equipo tecnolgico en silencio y guardado.",6:"Levanta la mano si requiere consultar alguna duda.",7:"Espera en silencio mientras es atendido por el/la docente para resolver sus dudas.",8:"Se observa que el/la estudiante realiza el esfuerzo por llevar a trmino satisfactorio su evaluacin.",9:"Respeta los tiempos considerados para realizar la evaluacin y se mantiene en silencio una vez finalizada.",10:"Entrega el instrumento de evaluacin cuando se le solicita."},TP=({currentUser:e})=>{const[t,r]=w.useState("captura"),[n,a]=w.useState(""),[s,o]=w.useState("Lengua y Literatura"),[l,c]=w.useState(""),[u,d]=w.useState([]),[f,A]=w.useState(!1),[m,g]=w.useState(!1),[x,v]=w.useState(!1),[y,N]=w.useState([]),[C,_]=w.useState({}),[j,I]=w.useState(null),[T,k]=w.useState(!1),[B,M]=w.useState(""),[P,S]=w.useState(""),[L,H]=w.useState(""),[q,Q]=w.useState(!0),[z,K]=w.useState(""),[Z,U]=w.useState(""),[Y,R]=w.useState([]),[D,W]=w.useState({}),[J,le]=w.useState({});w.useEffect(()=>{A(!0),fv().then(X=>d(X)).finally(()=>A(!1))},[]);const ie=w.useMemo(()=>u.filter(X=>X.profile==="PROFESORADO"||X.profile==="PROFESORADO"),[u]);w.useEffect(()=>{const X=mS(n),je=u.filter(ke=>ke.profile==="ESTUDIANTE"&&mS(ke.curso||"")===X).map(ke=>({id:ke.id,nombre:ke.nombreCompleto}));R(je);const De={};je.forEach(ke=>{De[ke.id]={},pu.forEach(ue=>{De[ke.id][ue]=!0})}),W(De),le({})},[n,u]);const re=(X,je)=>{W(De=>{var ke;return{...De,[X]:{...De[X],[je]:!((ke=De[X])!=null&&ke[je])}}})},ce=X=>{if(J[X])return 0;const je=D[X];if(!je)return 0;const ke=pu.map(ue=>je[ue]?7:2).reduce((ue,we)=>ue+we,0)/pu.length;return Math.round(ke*10)/10},oe=w.useMemo(()=>{if(Y.length===0)return pu.map(je=>({indicador:je,porcentajeOn:0,promedio:0}));const X=Y.filter(je=>!J[je.id]);return X.length===0?pu.map(je=>({indicador:je,porcentajeOn:0,promedio:0})):pu.map(je=>{const De=X.reduce((we,Ae)=>{var de;return we+((de=D[Ae.id])!=null&&de[je]?1:0)},0),ke=Math.round(De/X.length*100),ue=X.reduce((we,Ae)=>{var de;return we+((de=D[Ae.id])!=null&&de[je]?7:2)},0)/X.length;return{indicador:je,porcentajeOn:ke,promedio:Math.round(ue*10)/10}})},[Y,D,J]),be=async()=>{var X;if(!(!n||!s||!l||Y.length===0)){g(!0);try{await bNt({curso:mS(n),asignatura:s,profesorId:l,profesorNombre:((X=u.find(je=>je.id===l))==null?void 0:X.nombreCompleto)||"",creadorId:e.id,creadorNombre:e.nombreCompleto,fecha:new Date().toISOString(),resultados:Y.map(je=>{const De=!!J[je.id];return{estudianteId:je.id,estudianteNombre:je.nombre,indicadores:pu.map(ke=>{var ue;return(ue=D[je.id])!=null&&ue[ke]?7:2}),promedio:De?null:ce(je.id),ausente:De}})}),alert("Evaluacin guardada")}catch(je){console.error("Error guardando evaluacin de ensayo",je),alert("No se pudo guardar. Reintenta.")}finally{g(!1)}}};return w.useEffect(()=>{(async()=>{if(t==="guardados"){v(!0);try{let De=await yNt({max:200,filtroCurso:B?mS(B):void 0,filtroAsignatura:P||void 0,filtroProfesorId:L||void 0,filtroCreadorId:q?e.id:void 0});if(z){const ke=new Date(z+"T00:00:00");De=De.filter(ue=>{var we,Ae;return(((Ae=(we=ue.createdAt)==null?void 0:we.toDate)==null?void 0:Ae.call(we))||new Date(ue.fecha))>=ke})}if(Z){const ke=new Date(Z+"T23:59:59");De=De.filter(ue=>{var we,Ae;return(((Ae=(we=ue.createdAt)==null?void 0:we.toDate)==null?void 0:Ae.call(we))||new Date(ue.fecha))<=ke})}N(De)}finally{v(!1)}}})()},[t,e.id,B,P,L,q,z,Z]),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-2 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("button",{className:`px-3 py-2 text-sm inline-flex items-center gap-2 border-b-2 ${t==="captura"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"}`,onClick:()=>r("captura"),children:[i.jsx(r0,{className:"w-4 h-4"})," Captura"]}),i.jsxs("button",{className:`px-3 py-2 text-sm inline-flex items-center gap-2 border-b-2 ${t==="guardados"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"}`,onClick:()=>r("guardados"),children:[i.jsx(B4e,{className:"w-4 h-4"})," Guardados"]})]}),t==="guardados"&&i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Ensayos guardados"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-md border border-slate-300 text-slate-700 hover:bg-slate-50",onClick:()=>kNt(y),title:"Exportar CSV (aplica filtros)",children:[i.jsx(Pf,{className:"w-3.5 h-3.5"})," Exportar CSV"]}),i.jsx("button",{className:"text-xs text-slate-500 hover:text-slate-700",onClick:()=>r("captura"),children:"Ir a captura"})]})]}),i.jsx(CNt,{guardados:y}),i.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-6 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500",children:"Curso"}),i.jsxs("select",{value:B,onChange:X=>M(X.target.value),className:"w-full border rounded-md px-2 py-1 text-sm",children:[i.jsx("option",{value:"",children:"Todos"}),ja.map(X=>i.jsx("option",{value:X,children:X},X))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500",children:"Asignatura"}),i.jsxs("select",{value:P,onChange:X=>S(X.target.value),className:"w-full border rounded-md px-2 py-1 text-sm",children:[i.jsx("option",{value:"",children:"Todas"}),ma.map(X=>i.jsx("option",{value:X,children:X},X))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500",children:"Profesor/a"}),i.jsxs("select",{value:L,onChange:X=>H(X.target.value),className:"w-full border rounded-md px-2 py-1 text-sm",children:[i.jsx("option",{value:"",children:"Todos"}),u.filter(X=>X.profile==="PROFESORADO").map(X=>i.jsx("option",{value:X.id,children:X.nombreCompleto},X.id))]})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-600",children:[i.jsx("input",{type:"checkbox",checked:q,onChange:X=>Q(X.target.checked)})," Solo mis registros"]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500",children:"Desde"}),i.jsx("input",{type:"date",value:z,onChange:X=>K(X.target.value),className:"w-full border rounded-md px-2 py-1 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500",children:"Hasta"}),i.jsx("input",{type:"date",value:Z,onChange:X=>U(X.target.value),className:"w-full border rounded-md px-2 py-1 text-sm"})]})]}),i.jsx("div",{className:"mt-3 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-900/40",children:[i.jsx("th",{className:"px-2 py-2 text-left text-xs font-semibold text-slate-500",children:"Detalle"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Fecha"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Curso"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Asignatura"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Profesor"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Creador/a"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"N Estudiantes"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Exportar"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Acciones"})]})}),i.jsxs("tbody",{children:[x&&i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"px-4 py-6 text-center text-slate-500",children:"Cargando"})}),!x&&y.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"px-4 py-6 text-center text-slate-500",children:"No hay ensayos guardados."})}),y.map(X=>{var je,De,ke;return i.jsxs(ft.Fragment,{children:[i.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700/50 hover:bg-slate-50/50",children:[i.jsx("td",{className:"px-2 py-2",children:i.jsxs("button",{className:"inline-flex items-center gap-1 text-sm text-slate-600 hover:text-slate-800",onClick:()=>_(ue=>({...ue,[X.id]:!ue[X.id]})),children:[C[X.id]?i.jsx(SS,{className:"w-4 h-4"}):i.jsx(m3,{className:"w-4 h-4"}),C[X.id]?"Ocultar":"Ver"]})}),i.jsx("td",{className:"px-3 py-2 text-sm",children:(((De=(je=X.createdAt)==null?void 0:je.toDate)==null?void 0:De.call(je))||new Date(X.fecha)).toLocaleString()}),i.jsx("td",{className:"px-3 py-2 text-sm",children:X.curso}),i.jsx("td",{className:"px-3 py-2 text-sm",children:X.asignatura}),i.jsx("td",{className:"px-3 py-2 text-sm",children:X.profesorNombre}),i.jsx("td",{className:"px-3 py-2 text-sm",children:X.creadorNombre}),i.jsx("td",{className:"px-3 py-2 text-sm",children:((ke=X.resultados)==null?void 0:ke.length)??0}),i.jsx("td",{className:"px-3 py-2 text-sm",children:i.jsxs("button",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-md border border-slate-300 text-slate-700 hover:bg-slate-50",onClick:()=>jNt(X),title:"Exportar CSV de esta evaluacin",children:[i.jsx(Pf,{className:"w-3.5 h-3.5"})," CSV"]})}),i.jsx("td",{className:"px-3 py-2 text-sm",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-md border border-slate-300 text-slate-700 hover:bg-slate-50",onClick:()=>I(X),title:"Editar",children:[i.jsx(x3,{className:"w-3.5 h-3.5"})," Editar"]}),i.jsxs("button",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-md border border-red-300 text-red-700 hover:bg-red-50",onClick:async()=>{if(confirm("Eliminar esta evaluacin? Esta accin no se puede deshacer."))try{await NNt(X.id),N(we=>we.filter(Ae=>Ae.id!==X.id))}catch(we){alert("No se pudo eliminar"),console.error(we)}},title:"Eliminar",children:[i.jsx(Vn,{className:"w-3.5 h-3.5"})," Eliminar"]})]})})]}),C[X.id]&&i.jsx("tr",{className:"bg-slate-50/40 dark:bg-slate-900/30",children:i.jsx("td",{colSpan:9,className:"px-4 py-3",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Estudiante"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Ausente"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Promedio"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Indicadores"})]})}),i.jsx("tbody",{children:(X.resultados||[]).map((ue,we)=>i.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700/40",children:[i.jsx("td",{className:"px-3 py-1.5 whitespace-nowrap",children:ue.estudianteNombre}),i.jsx("td",{className:"px-3 py-1.5",children:ue.ausente?i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full bg-slate-200 text-slate-700 text-xs",children:"S"}):i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full bg-emerald-100 text-emerald-700 text-xs",children:"No"})}),i.jsx("td",{className:"px-3 py-1.5 font-semibold",children:ue.ausente?"":(ue.promedio??0).toFixed(1)}),i.jsx("td",{className:"px-3 py-1.5",children:i.jsx("div",{className:"flex items-center gap-1",children:(ue.indicadores||[]).map((Ae,de)=>i.jsx("span",{className:`w-4 h-4 rounded-full border ${Ae>=7?"bg-emerald-500 border-emerald-600":"bg-red-400 border-red-500"}`,title:`${de+1}: ${Ae.toFixed(1)}`},de))})})]},ue.estudianteId||we))})]})})})})]},X.id)})]})]})})]})}),j&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>!T&&I(null)}),i.jsxs("div",{className:"relative bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 w-full max-w-2xl p-4 shadow-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-sm font-semibold",children:"Editar evaluacin"}),i.jsx("button",{className:"p-1 text-slate-500 hover:text-slate-700",onClick:()=>!T&&I(null),children:i.jsx(xo,{className:"w-4 h-4"})})]}),i.jsxs("form",{onSubmit:async X=>{X.preventDefault(),k(!0);try{await wNt(j.id,{curso:j.curso,asignatura:j.asignatura,profesorId:j.profesorId,profesorNombre:j.profesorNombre,creadorId:j.creadorId,creadorNombre:j.creadorNombre,fecha:j.fecha}),N(je=>je.map(De=>De.id===j.id?{...De,...j}:De)),I(null)}catch(je){console.error(je),alert("No se pudo guardar cambios")}finally{k(!1)}},className:"space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500",children:"Curso"}),i.jsx("select",{value:j.curso,onChange:X=>I({...j,curso:X.target.value}),className:"w-full border rounded-md px-2 py-1 text-sm",children:ja.map(X=>i.jsx("option",{value:X,children:X},X))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500",children:"Asignatura"}),i.jsx("select",{value:j.asignatura,onChange:X=>I({...j,asignatura:X.target.value}),className:"w-full border rounded-md px-2 py-1 text-sm",children:ma.map(X=>i.jsx("option",{value:X,children:X},X))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500",children:"Profesor/a"}),i.jsx("select",{value:j.profesorId,onChange:X=>{const je=X.target.value,De=u.find(ke=>ke.id===je);I({...j,profesorId:je,profesorNombre:(De==null?void 0:De.nombreCompleto)||j.profesorNombre})},className:"w-full border rounded-md px-2 py-1 text-sm",children:u.filter(X=>X.profile==="PROFESORADO").map(X=>i.jsx("option",{value:X.id,children:X.nombreCompleto},X.id))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500",children:"Fecha (ISO)"}),i.jsx("input",{type:"datetime-local",value:new Date(j.fecha).toISOString().slice(0,16),onChange:X=>{const je=new Date(X.target.value).toISOString();I({...j,fecha:je})},className:"w-full border rounded-md px-2 py-1 text-sm"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-3 py-1.5 text-sm rounded-md border",onClick:()=>I(null),disabled:T,children:"Cancelar"}),i.jsx("button",{type:"submit",className:"px-3 py-1.5 text-sm rounded-md bg-amber-500 text-white hover:bg-amber-600 disabled:opacity-50",disabled:T,children:T?"Guardando":"Guardar cambios"})]})]}),i.jsx("div",{className:"mt-4 text-xs text-slate-500",children:"Nota: La edicin de resultados individuales no est habilitada an en este modal."})]})]}),t==="captura"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200 mb-3",children:"Indicadores evaluados"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 text-sm",children:pu.map(X=>i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 text-xs font-bold shrink-0",children:X}),i.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:d8[X]})]},X))})]}),Y.length>0&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200 mb-3",children:"Desempeo del curso por indicador"}),i.jsx("div",{className:"space-y-2",children:oe.map(X=>i.jsxs("div",{className:"grid grid-cols-12 items-center gap-2",children:[i.jsxs("div",{className:"col-span-12 md:col-span-3 lg:col-span-2 text-xs text-slate-600 dark:text-slate-300",children:[X.indicador,". ",d8[X.indicador]]}),i.jsx("div",{className:"col-span-12 md:col-span-6 lg:col-span-7",children:i.jsx("div",{className:"w-full h-3 rounded-full bg-slate-100 dark:bg-slate-700 overflow-hidden",children:i.jsx("div",{className:"h-3 bg-emerald-500",style:{width:`${X.porcentajeOn}%`}})})}),i.jsxs("div",{className:"col-span-12 md:col-span-3 lg:col-span-3 flex justify-between text-xs text-slate-700 dark:text-slate-200",children:[i.jsxs("span",{className:"font-medium",children:[X.porcentajeOn,"% con 7.0"]}),i.jsxs("span",{children:["Prom: ",X.promedio.toFixed(1)]})]})]},X.indicador))})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Curso"}),i.jsxs("select",{value:n,onChange:X=>a(X.target.value),className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"",children:"Seleccione"}),ja.map(X=>i.jsx("option",{value:X,children:X},X))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Asignatura"}),i.jsx("select",{value:s,onChange:X=>o(X.target.value),className:"w-full border rounded-md px-3 py-2",children:ma.map(X=>i.jsx("option",{value:X,children:X},X))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Profesor responsable"}),i.jsxs("select",{value:l,onChange:X=>c(X.target.value),className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"",children:"Seleccione"}),ie.map(X=>i.jsx("option",{value:X.id,children:X.nombreCompleto},X.id))]})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("button",{onClick:be,disabled:!n||!s||!l||m,className:"inline-flex items-center gap-2 px-4 py-2 rounded-md bg-amber-500 text-white hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed",children:[m?i.jsx(pi,{className:"w-4 h-4 animate-spin"}):i.jsx(Fl,{className:"w-4 h-4"})," Guardar"]})})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow border border-slate-200 dark:border-slate-700 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-900/40",children:[i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Estudiante"}),pu.map(X=>i.jsx("th",{className:"px-2 py-2 text-center text-xs font-semibold text-slate-500",children:X},X)),i.jsx("th",{className:"px-3 py-2 text-center text-xs font-semibold text-slate-500",children:"Prom."})]})}),i.jsxs("tbody",{children:[f&&i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"px-4 py-6 text-center text-slate-500",children:"Cargando estudiantes"})}),!f&&Y.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"px-4 py-6 text-center text-slate-500",children:"Seleccione curso para listar estudiantes."})}),Y.map(X=>i.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700/50 hover:bg-slate-50/50",children:[i.jsx("td",{className:"px-4 py-2 text-sm whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(cx,{className:"w-4 h-4 text-slate-400"})," ",X.nombre]}),i.jsxs("label",{className:"inline-flex items-center gap-1 text-xs text-slate-600",children:[i.jsx("input",{type:"checkbox",checked:!!J[X.id],onChange:je=>le(De=>({...De,[X.id]:je.target.checked}))}),"Ausente"]})]})}),pu.map(je=>{var ke;const De=((ke=D[X.id])==null?void 0:ke[je])??!0;return i.jsx("td",{className:"px-2 py-2 text-center",children:i.jsx("button",{type:"button",onClick:()=>!J[X.id]&&re(X.id,je),disabled:!!J[X.id],className:`inline-flex items-center justify-center w-7 h-7 rounded-full border transition ${J[X.id]?"opacity-40 cursor-not-allowed bg-slate-50 border-slate-200":De?"bg-green-100 border-green-300 text-green-700":"bg-red-50 border-red-300 text-red-600"}`,title:J[X.id]?"Ausente":De?"7.0":"2.0",children:De?i.jsx(GC,{className:"w-4 h-4"}):i.jsx(__e,{className:"w-4 h-4"})})},je)}),i.jsx("td",{className:"px-3 py-2 text-center font-semibold text-slate-700",children:J[X.id]?"":ce(X.id).toFixed(1)})]},X.id))]})]})})]})]})},CNt=({guardados:e})=>{const t=ft.useMemo(()=>{let r=e.length,n=0,a=0,s=0,o=0,l=0;const c=Array(10).fill(0),u=Array(10).fill(0);e.forEach(A=>{const m=A.resultados||[];n+=m.length,m.forEach(g=>{g.ausente?s+=1:(a+=1,typeof g.promedio=="number"&&(o+=g.promedio,l+=1),(g.indicadores||[]).forEach((x,v)=>{x>=7&&(c[v]+=1),u[v]+=1}))})});const d=l>0?Math.round(o/l*10)/10:0,f=c.map((A,m)=>{const g=u[m]||0;return g>0?Math.round(A/g*100):0});return{evaluaciones:r,estudiantes:n,presentes:a,ausentes:s,promedioGlobal:d,indicadoresPct:f}},[e]);return i.jsxs("div",{className:"mt-3 space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[i.jsx(d2,{label:"Evaluaciones",value:t.evaluaciones}),i.jsx(d2,{label:"Estudiantes",value:t.estudiantes}),i.jsx(d2,{label:"Presentes",value:t.presentes}),i.jsx(d2,{label:"Ausentes",value:t.ausentes}),i.jsx(d2,{label:"Prom. global",value:t.promedioGlobal.toFixed(1)})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-xs font-semibold text-slate-500 mb-2",children:"Porcentaje 7.0 por indicador"}),i.jsx("div",{className:"space-y-2",children:pu.map((r,n)=>i.jsxs("div",{className:"grid grid-cols-12 items-center gap-2",children:[i.jsxs("div",{className:"col-span-12 md:col-span-3 lg:col-span-2 text-xs text-slate-600 dark:text-slate-300",children:[r,". ",d8[r]]}),i.jsx("div",{className:"col-span-12 md:col-span-6 lg:col-span-7",children:i.jsx("div",{className:"w-full h-3 rounded-full bg-slate-100 dark:bg-slate-700 overflow-hidden",children:i.jsx("div",{className:"h-3 bg-emerald-500",style:{width:`${t.indicadoresPct[n]}%`}})})}),i.jsx("div",{className:"col-span-12 md:col-span-3 lg:col-span-3 flex justify-end text-xs text-slate-700 dark:text-slate-200",children:i.jsxs("span",{className:"font-medium",children:[t.indicadoresPct[n],"%"]})})]},r))})]})]})},d2=({label:e,value:t})=>i.jsxs("div",{className:"p-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[i.jsx("div",{className:"text-xs text-slate-500",children:e}),i.jsx("div",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:t})]});function ENt(e){if(e==null)return"";const t=String(e).replace(/"/g,'""');return/[",\n]/.test(t)?'"'+t+'"':t}function lve(e,t){const r=t.map(o=>o.map(ENt).join(",")).join(`
`),n=new Blob([r],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(n),s=document.createElement("a");s.href=a,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a)}function jNt(e){var a,s;const t=["EvaluacionID","Fecha","Curso","Asignatura","Profesor","Creador","EstudianteID","Estudiante","Ausente","Promedio",...pu.map(o=>`Indicador_${o}`)],r=(((s=(a=e.createdAt)==null?void 0:a.toDate)==null?void 0:s.call(a))||new Date(e.fecha)).toISOString(),n=[t];(e.resultados||[]).forEach(o=>{const l=[e.id,r,e.curso,e.asignatura,e.profesorNombre,e.creadorNombre,o.estudianteId,o.estudianteNombre,o.ausente?"SI":"NO",o.ausente?"":String(o.promedio??"")],c=(o.indicadores||[]).map(u=>typeof u=="number"?u.toFixed(1):"");n.push([...l,...c])}),lve(`evaluacion_${e.id}.csv`,n)}function kNt(e){const r=[["EvaluacionID","Fecha","Curso","Asignatura","Profesor","Creador","EstudianteID","Estudiante","Ausente","Promedio",...pu.map(a=>`Indicador_${a}`)]];e.forEach(a=>{var o,l;const s=(((l=(o=a.createdAt)==null?void 0:o.toDate)==null?void 0:l.call(o))||new Date(a.fecha)).toISOString();(a.resultados||[]).forEach(c=>{const u=[a.id,s,a.curso,a.asignatura,a.profesorNombre,a.creadorNombre,c.estudianteId,c.estudianteNombre,c.ausente?"SI":"NO",c.ausente?"":String(c.promedio??"")],d=(c.indicadores||[]).map(f=>typeof f=="number"?f.toFixed(1):"");r.push([...u,...d])})});const n=new Date().toISOString().slice(0,19).replace(/[:T]/g,"-");lve(`evaluaciones_filtradas_${n}.csv`,r)}const SNt={"1 Medio":"1","2 Medio":"2","3 Medio":"3","4 Medio":"4"};function _Nt(e){const t=SNt[e]||"";return ja.filter(r=>r.startsWith(t))}function TNt(){const[e,t]=w.useState({}),[r,n]=w.useState(!0);w.useEffect(()=>{const s=Oce(o=>{t(o||{}),n(!1)});return()=>s&&s()},[]);const a=w.useMemo(()=>Y0.map(s=>({nivel:s,cursos:_Nt(s)})).filter(s=>s.cursos.length>0),[]);return i.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h1",{className:"text-2xl md:text-3xl font-semibold",children:"Horario semanal del liceo"}),r&&i.jsx("span",{className:"text-sm text-gray-500",children:"Cargando"})]}),i.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:Kh.map(s=>i.jsxs("section",{className:"rounded-xl border border-gray-200 dark:border-gray-800 bg-white dark:bg-slate-900 shadow-sm overflow-hidden",children:[i.jsx("header",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-slate-800/40",children:i.jsx("h2",{className:"text-lg font-semibold",children:s})}),i.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:a.map(({nivel:o,cursos:l})=>i.jsxs("div",{className:"p-3 md:p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"h-5 w-1.5 rounded bg-amber-500"}),i.jsx("h3",{className:"text-base md:text-lg font-medium",children:o}),i.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[l.length," curso(s)"]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"text-left text-gray-600 dark:text-gray-300",children:[i.jsx("th",{className:"px-2 py-2 font-semibold sticky left-0 bg-white dark:bg-slate-900 z-10",children:"BLOQUE"}),i.jsx("th",{className:"px-2 py-2 font-semibold",children:"INICIO"}),i.jsx("th",{className:"px-2 py-2 font-semibold",children:"FINAL"}),l.map(c=>i.jsx("th",{className:"px-2 py-2 font-semibold whitespace-nowrap",children:c},c))]})}),i.jsx("tbody",{children:Hs.map(c=>{const u=String(c.bloque);return i.jsxs("tr",{className:"border-t border-gray-100 dark:border-gray-800 align-top",children:[i.jsx("td",{className:"px-2 py-2 font-medium sticky left-0 bg-white dark:bg-slate-900 z-10",children:c.bloque}),i.jsx("td",{className:"px-2 py-2 text-gray-600 dark:text-gray-300",children:c.inicio}),i.jsx("td",{className:"px-2 py-2 text-gray-600 dark:text-gray-300",children:c.fin}),l.map(d=>{var x,v;const f=(v=(x=e==null?void 0:e[s])==null?void 0:x[u])==null?void 0:v[d],A=(f==null?void 0:f.asignatura)||"",m=(f==null?void 0:f.profesor)||"",g=!!(A||m);return i.jsx("td",{className:`px-2 py-2 ${g?"bg-white dark:bg-slate-900":"bg-gray-50 dark:bg-slate-800/30"}`,children:i.jsxs("div",{className:"min-w-[9rem] md:min-w-[12rem] lg:min-w-[14rem] xl:min-w-[16rem]",children:[i.jsx("div",{className:"font-medium leading-5 truncate",title:A,children:A||""}),i.jsx("div",{className:"text-xs text-gray-500 truncate",title:m,children:m})]})},d)})]},c.bloque)})})]})})]},o))})]},s))})]})}const fB="intranet_entries",BNt=(e,t)=>{try{const r=Bt(ht(Ar,fB),Xt("createdAt","desc"));return lr(r,n=>{const a=[];n.forEach(s=>a.push({id:s.id,...s.data()})),e(a)},n=>t&&t(n))}catch(r){return t&&t(r),()=>{}}},INt=async e=>{const t=oa.currentUser;if(!t)throw new Error("No autenticado");const r={...e,creadoPor:t.email||"desconocido",createdAt:e.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()};return(await ln(ht(Ar,fB),r)).id},Bre=async(e,t)=>{const r={...t,updatedAt:new Date().toISOString()},n=JSON.parse(JSON.stringify(r));await qi(Wt(Ar,fB,e),n)},DNt=async e=>{await ca(Wt(Ar,fB,e))},ONt=e=>e.replace(/[^a-zA-Z0-9._-]/g,"_");function PNt(e,t){const r=Date.now(),n=ONt(t);return`${e==="image"?"intranet/images":"intranet/videos"}/${r}_${n}`}function Ire(e,t,r){return new Promise((n,a)=>{const s=PNt(t,e.name),o=Od(Zx,s),l=RM(o,e,{contentType:e.type});l.on("state_changed",c=>{const u=c.bytesTransferred/c.totalBytes*100;r==null||r(Math.round(u))},a,async()=>{try{const c=await LA(l.snapshot.ref);n({url:c,path:s})}catch(c){a(c)}})})}async function FNt(e){try{await h3(Od(Zx,e))}catch(t){console.warn("No se pudo eliminar del storage:",t)}}const hB="intranet_notes",RNt=(e,t)=>{try{const r=Bt(ht(Ar,hB),Xt("destacado","desc"),Xt("fechaPublicacion","desc"));return lr(r,n=>{const a=[];n.forEach(s=>a.push({id:s.id,...s.data()})),e(a)},n=>t&&t(n))}catch(r){return t&&t(r),()=>{}}},LNt=async e=>{const t=oa.currentUser;if(!t)throw new Error("No autenticado");const r={...e,destacado:e.destacado??!1,autor:t.displayName||t.email||"Usuario",autorId:t.uid,fechaPublicacion:new Date().toISOString()};return(await ln(ht(Ar,hB),r)).id},MNt=async(e,t)=>{const r=JSON.parse(JSON.stringify(t));await qi(Wt(Ar,hB,e),r)},UNt=async e=>{await ca(Wt(Ar,hB,e))},BP={titulo:"",resumen:"",contenidoHtml:"",etiquetas:[],enlaces:[],imagenes:[],videos:[],destacado:!1,autorNombre:""},cve=({label:e})=>i.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300 ring-1 ring-amber-200/60 dark:ring-amber-800/40",children:[i.jsx(E3e,{className:"w-3.5 h-3.5 mr-1.5"})," ",e]}),jC=e=>{try{return e?new URL(e).hostname.replace(/^www\./,""):""}catch{return e||""}},f8=e=>{const t=jC(e);return t?`https://www.google.com/s2/favicons?sz=64&domain=${encodeURIComponent(t)}`:void 0},Dre=(e,t=28)=>e?e.length>t?e.slice(0,t-1)+"":e:"",HNt=({draft:e,setDraft:t,newLink:r,setNewLink:n,showPreview:a,setShowPreview:s,editing:o,saveDraft:l,cancelEdit:c,imgUploadPct:u,setImgUploadPct:d,vidUploadPct:f,setVidUploadPct:A})=>{var _,j,I,T;const m=k=>{try{return new URL(k),!0}catch{return!1}},[g,x]=w.useState(!1),[v,y]=w.useState(!1),N=async k=>{const B=Array.from(k);for(const M of B){if(!/^image\/(png|jpe?g|gif)$/i.test(M.type)){alert("Formato de imagen no soportado. Usa PNG, JPG o GIF.");continue}if(M.size>10*1024*1024){alert("Imagen supera 10 MB.");continue}try{d(0);const{url:S}=await Ire(M,"image",L=>d(L));t(L=>({...L,imagenes:[...L.imagenes||[],{url:S}]}))}catch(S){alert((S==null?void 0:S.message)||"Error al subir imagen")}finally{d(null)}}},C=async k=>{const B=Array.from(k);for(const M of B){if(!/^(video\/mp4|video\/quicktime)$/i.test(M.type)){alert("Formato de video no soportado. Usa MP4 o MOV.");continue}if(M.size>500*1024*1024){alert("Video supera 500 MB.");continue}try{A(0);const{url:S}=await Ire(M,"video",L=>A(L));t(L=>({...L,videos:[...L.videos||[],{url:S}]}))}catch(S){alert((S==null?void 0:S.message)||"Error al subir video")}finally{A(null)}}};return i.jsxs("div",{className:"bg-white p-5 md:p-6 rounded-xl shadow border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-5",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-slate-900",children:o?"Editar entrada":"Nueva entrada"}),e.destacado&&i.jsx("span",{className:"inline-flex items-center text-xs font-semibold text-amber-700 bg-amber-50 border border-amber-200 px-2 py-0.5 rounded-full",children:"Destacado"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:c,className:"inline-flex items-center gap-2 px-3 py-2 rounded-md bg-slate-100 text-slate-700 hover:bg-slate-200",children:[i.jsx(xo,{className:"w-4 h-4"})," Cancelar"]}),i.jsxs("button",{disabled:u!==null||f!==null,onClick:l,className:"inline-flex items-center gap-2 px-3 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60 disabled:cursor-not-allowed",children:[i.jsx(Fl,{className:"w-4 h-4"})," Guardar"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Ttulo"}),i.jsx("input",{value:e.titulo,onChange:k=>t({...e,titulo:k.target.value}),className:"w-full mt-1 rounded-md border border-slate-300 px-3 py-2 text-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ttulo de la entrada"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Contenido principal (HTML bsico o texto)"}),i.jsx("textarea",{rows:14,value:e.contenidoHtml,onChange:k=>t({...e,contenidoHtml:k.target.value}),className:"w-full mt-1 rounded-md border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Puedes pegar HTML limpio (sin scripts) o escribir texto plano."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Etiquetas (separadas por comas)"}),i.jsx("input",{value:(e.etiquetas||[]).join(", "),onChange:k=>t({...e,etiquetas:k.target.value.split(",").map(B=>B.trim()).filter(Boolean)}),className:"w-full mt-1 rounded-md border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"ej: admisin, protocolos, reuniones"}),i.jsx("div",{className:"mt-2",children:!!((_=e.etiquetas)!=null&&_.length)&&i.jsx("div",{className:"flex flex-wrap gap-2",children:e.etiquetas.map(k=>i.jsx(cve,{label:k},k))})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Enlaces externos"}),i.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 mt-1",children:[i.jsx("input",{placeholder:"Ttulo (opcional)",value:r.titulo||"",onChange:k=>n({...r,titulo:k.target.value}),className:"sm:flex-1 rounded-md border border-slate-300 px-3 py-2"}),i.jsx("input",{placeholder:"https://sitio.com/recurso",value:r.url,onChange:k=>n({...r,url:k.target.value}),className:"sm:flex-[2] rounded-md border border-slate-300 px-3 py-2"}),i.jsxs("button",{type:"button",onClick:()=>{if(!r.url||!m(r.url)){alert("Ingresa una URL vlida.");return}const k=[...e.enlaces||[]];k.push({url:r.url.trim(),...r.titulo?{titulo:r.titulo.trim()}:{}}),t({...e,enlaces:k}),n({url:""})},className:"inline-flex items-center justify-center gap-2 px-3 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700",children:[i.jsx(gi,{className:"w-4 h-4"})," Agregar enlace"]})]}),!!((j=e.enlaces)!=null&&j.length)&&i.jsx("div",{className:"mt-3 space-y-2",children:e.enlaces.map((k,B)=>i.jsxs("div",{className:"flex items-center justify-between gap-3 px-3 py-2 rounded-md bg-slate-50 border border-slate-200",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700 min-w-0",children:[f8(k.url)&&i.jsx("img",{src:f8(k.url),alt:k.titulo||k.url,className:"w-4 h-4 rounded"}),i.jsx("span",{className:"font-medium truncate max-w-[220px] sm:max-w-[260px]",title:k.titulo||k.url,children:k.titulo||jC(k.url)}),i.jsx("span",{className:"text-slate-400",children:""}),i.jsxs("a",{href:k.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:underline whitespace-nowrap",children:[i.jsx(ix,{className:"w-3.5 h-3.5"})," Abrir"]})]}),i.jsx("button",{onClick:()=>t({...e,enlaces:(e.enlaces||[]).filter((M,P)=>P!==B)}),className:"p-1 rounded hover:bg-red-50 text-red-600",title:"Eliminar",children:i.jsx(Vn,{className:"w-4 h-4"})})]},B))})]}),i.jsx("div",{className:"flex items-center gap-3",children:i.jsxs("label",{className:"inline-flex items-center gap-2 text-sm font-medium text-slate-700",children:[i.jsx("input",{type:"checkbox",checked:!!e.destacado,onChange:k=>t({...e,destacado:k.target.checked})}),i.jsx(_S,{className:"w-4 h-4"})," Destacado"]})})]}),i.jsxs("div",{className:"space-y-5",children:[i.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800",children:"Resumen"}),i.jsx("span",{className:"text-xs text-slate-500",children:"Opcional"})]}),i.jsx("textarea",{rows:5,value:e.resumen||"",onChange:k=>t({...e,resumen:k.target.value}),className:"mt-2 w-full rounded-md border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Breve sntesis para el feed"})]}),i.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white shadow-sm",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-slate-200",children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800",children:"Previsualizacin"}),i.jsx("button",{onClick:()=>s(k=>!k),className:"inline-flex items-center gap-1 text-sm text-slate-600 hover:text-slate-800",children:a?i.jsxs(i.Fragment,{children:[i.jsx(H_e,{className:"w-4 h-4"})," Ocultar"]}):i.jsxs(i.Fragment,{children:[i.jsx(ox,{className:"w-4 h-4"})," Mostrar"]})})]}),i.jsx("div",{className:"p-3 min-h-[8rem]",children:a?i.jsx("div",{className:"prose prose-sm max-w-none",children:i.jsx(NE,{content:e.contenidoHtml,context:"intranet-editor-preview"})}):i.jsx("div",{className:"text-slate-500 text-sm",children:"Activa la previsualizacin para ver el contenido renderizado."})})]}),i.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white shadow-sm",children:[i.jsxs("div",{className:"p-3 border-b border-slate-200",children:[i.jsxs("h4",{className:"text-sm font-semibold text-slate-800 flex items-center gap-2",children:[i.jsx(R5,{className:"w-4 h-4"})," Imgenes"]}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Formatos: PNG, JPG, GIF. Mx. 10 MB."})]}),i.jsx("div",{onDragOver:k=>{k.preventDefault(),x(!0)},onDragLeave:()=>x(!1),onDrop:k=>{var B;k.preventDefault(),x(!1),(B=k.dataTransfer.files)!=null&&B.length&&N(k.dataTransfer.files)},className:`m-3 rounded-md border-2 ${g?"border-blue-500 bg-blue-50":"border-dashed border-slate-300"} p-4 text-center cursor-pointer`,children:i.jsxs("label",{className:"block",children:[i.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:k=>{k.target.files&&N(k.target.files),k.currentTarget.value=""}}),i.jsxs("div",{className:"flex flex-col items-center gap-2 text-slate-600",children:[u!==null?i.jsx(pi,{className:"w-6 h-6 animate-spin"}):i.jsx(EG,{className:"w-6 h-6"}),i.jsx("span",{className:"text-sm",children:"Arrastra y suelta o haz click para subir"}),u!==null&&i.jsxs("div",{className:"w-full max-w-xs mt-1",children:[i.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-2 bg-blue-600",style:{width:`${Math.round(u)}%`}})}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Subiendo imagen ",Math.round(u),"%"]})]})]})]})}),!!((I=e.imagenes)!=null&&I.length)&&i.jsx("div",{className:"px-3 pb-3 grid grid-cols-3 gap-2",children:e.imagenes.map((k,B)=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:k.url,alt:k.titulo||`img-${B}`,className:"w-full h-20 object-cover rounded-md"}),i.jsx("button",{type:"button",onClick:()=>t({...e,imagenes:(e.imagenes||[]).filter((M,P)=>P!==B)}),className:"absolute top-1 right-1 p-1 rounded bg-white/90 hover:bg-white",children:i.jsx(xo,{className:"w-3.5 h-3.5"})})]},B))})]}),i.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white shadow-sm",children:[i.jsxs("div",{className:"p-3 border-b border-slate-200",children:[i.jsxs("h4",{className:"text-sm font-semibold text-slate-800 flex items-center gap-2",children:[i.jsx(wu,{className:"w-4 h-4"})," Videos"]}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Formatos: MP4, MOV. Mx. 500 MB. Tambin puedes pegar URLs."})]}),i.jsxs("div",{className:"m-3",children:[i.jsxs("div",{onDragOver:k=>{k.preventDefault(),y(!0)},onDragLeave:()=>y(!1),onDrop:k=>{var B;k.preventDefault(),y(!1),(B=k.dataTransfer.files)!=null&&B.length&&C(k.dataTransfer.files)},className:`rounded-md border-2 ${v?"border-blue-500 bg-blue-50":"border-dashed border-slate-300"} p-4 text-center cursor-pointer`,children:[i.jsxs("label",{className:"block",children:[i.jsx("input",{type:"file",accept:"video/*",multiple:!0,className:"hidden",onChange:k=>{k.target.files&&C(k.target.files),k.currentTarget.value=""}}),i.jsxs("div",{className:"flex flex-col items-center gap-2 text-slate-600",children:[f!==null?i.jsx(pi,{className:"w-6 h-6 animate-spin"}):i.jsx(EG,{className:"w-6 h-6"}),i.jsx("span",{className:"text-sm",children:"Arrastra y suelta o haz click para subir"})]})]}),f!==null&&i.jsxs("div",{className:"w-full max-w-xs mt-3 mx-auto",children:[i.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-2 bg-blue-600",style:{width:`${Math.round(f)}%`}})}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1 text-center",children:["Subiendo video ",Math.round(f),"%"]})]})]}),i.jsxs("div",{className:"mt-3 flex gap-2",children:[i.jsx("input",{placeholder:"https://video-ejemplo.com/archivo.mp4",className:"flex-1 rounded-md border border-slate-300 px-3 py-2",onKeyDown:k=>{const B=k.currentTarget.value.trim();if(k.key==="Enter"){if(!m(B)){alert("URL de video no vlida.");return}t(M=>({...M,videos:[...M.videos||[],{url:B}]})),k.currentTarget.value=""}}}),i.jsx("button",{type:"button",onClick:k=>{var P;const B=k.currentTarget.previousSibling,M=(P=B==null?void 0:B.value)==null?void 0:P.trim();if(M){if(!m(M)){alert("URL de video no vlida.");return}t(S=>({...S,videos:[...S.videos||[],{url:M}]})),B.value=""}},className:"inline-flex items-center justify-center gap-2 px-3 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700",children:"Agregar URL"})]}),!!((T=e.videos)!=null&&T.length)&&i.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:e.videos.map((k,B)=>i.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-md bg-slate-50 border border-slate-200 text-sm",children:[i.jsx(wu,{className:"w-4 h-4"})," ",k.titulo||jC(k.url),i.jsx("button",{type:"button",onClick:()=>t({...e,videos:(e.videos||[]).filter((M,P)=>P!==B)}),className:"ml-2 p-1 rounded hover:bg-slate-200",children:i.jsx(xo,{className:"w-3.5 h-3.5"})})]},B))})]})]})]})]})]})},QNt=ft.memo(HNt),VNt=({currentUser:e})=>{const t=e.profile===It.SUBDIRECCION,r=[It.SUBDIRECCION,It.PROFESORADO,It.COORDINACION_TP].includes(e.profile),n=[It.PROFESORADO,It.COORDINACION_TP].includes(e.profile),a=[It.SUBDIRECCION,It.PROFESORADO,It.COORDINACION_TP].includes(e.profile),[s,o]=w.useState([]),[l,c]=w.useState(!0),[u,d]=w.useState(null),[f,A]=w.useState(null),[m,g]=w.useState(BP),[x,v]=w.useState(!1),[y,N]=w.useState(!1),[C,_]=w.useState({url:""}),[j,I]=w.useState(null),[T,k]=w.useState(null),[B,M]=w.useState([]),[P,S]=w.useState(!0),[L,H]=w.useState({titulo:"",mensaje:"",color:"yellow"}),[q,Q]=w.useState({order:[],colors:{},version:1}),[z,K]=w.useState(!1),[Z,U]=w.useState(null),[Y,R]=w.useState(null),D=w.useMemo(()=>[{id:"auto",label:"Auto",Comp:goe},{id:"file",label:"Documento",Comp:Ko},{id:"folder",label:"Carpeta",Comp:s4e},{id:"link",label:"Enlace",Comp:L5},{id:"image",label:"Imagen",Comp:R5},{id:"video",label:"Video",Comp:wu},{id:"calendar",label:"Calendario",Comp:qo},{id:"megaphone",label:"Anuncio",Comp:moe},{id:"book",label:"Libro/Gua",Comp:ps},{id:"users",label:"Personas",Comp:qs},{id:"settings",label:"Ajustes",Comp:UN},{id:"star",label:"Destacado",Comp:poe},{id:"message",label:"Mensaje",Comp:yy},{id:"bell",label:"Notificacin",Comp:G5e},{id:"clipboard",label:"Lista",Comp:r0},{id:"check",label:"Aprobado",Comp:GC},{id:"alert",label:"Alerta",Comp:O1},{id:"pin",label:"Pin",Comp:_S},{id:"mappin",label:"Ubicacin",Comp:LN},{id:"graduation",label:"Educacin",Comp:yA},{id:"briefcase",label:"Portafolio",Comp:I1},{id:"building",label:"Edificio",Comp:e1},{id:"sheet",label:"Hoja de clculo",Comp:p3},{id:"barchart",label:"Grfico barras",Comp:Tl},{id:"piechart",label:"Grfico torta",Comp:t1},{id:"heart",label:"Corazn",Comp:A4e},{id:"lightbulb",label:"Idea",Comp:j4e},{id:"rocket",label:"Cohete",Comp:s3e},{id:"globe",label:"Globo",Comp:c4e},{id:"map",label:"Mapa",Comp:F4e},{id:"clock",label:"Reloj",Comp:D_e},{id:"mail",label:"Correo",Comp:Aoe},{id:"phone",label:"Telfono",Comp:X4e},{id:"camera",label:"Cmara",Comp:c_e},{id:"play",label:"Reproducir",Comp:C_e}],[]),[W,J]=w.useState("auto"),[le,ie]=w.useState(""),re=de=>{R(de),J(de.iconId||"auto")},ce=()=>{R(null)};w.useEffect(()=>{if(!r)return;c(!0);const de=BNt(ae=>{o(ae),Q(fe=>{const ge=new Set(ae.map(Ze=>Ze.id)),xe=fe.order.filter(Ze=>ge.has(Ze)),Ue={};Object.entries(fe.colors).forEach(([Ze,We])=>{ge.has(Ze)&&(Ue[Ze]=String(We))});const qe={...fe,order:xe,colors:Ue};return oe(qe),qe}),c(!1)},ae=>{console.error("Error al suscribirse a intranet:",ae),d("No se pudo cargar la intranet."),c(!1)});return()=>{try{de&&de()}catch{}}},[r]),w.useEffect(()=>{if(!r)return;S(!0);const de=RNt(ae=>{M(ae),S(!1)},ae=>{console.error("Error al suscribirse a intranet_notes:",ae),S(!1)});return()=>{try{de&&de()}catch{}}},[r]),w.useEffect(()=>{if(n)try{const de=localStorage.getItem(`intranet_prefs_${e.id}`);if(de){const ae=JSON.parse(de);ae&&typeof ae=="object"&&Q({order:ae.order||[],colors:ae.colors||{},version:1})}}catch{}},[n,e.id]);const oe=de=>{try{localStorage.setItem(`intranet_prefs_${e.id}`,JSON.stringify(de))}catch{}},be=(de,ae)=>{Q(fe=>{const ge={...fe,colors:{...fe.colors}};return ae?ge.colors[de]=ae:delete ge.colors[de],oe(ge),ge})},X=(de,ae)=>{Q(fe=>{const ge=s.map(me=>me.id),xe=fe.order.filter(me=>ge.includes(me)).concat(ge.filter(me=>!fe.order.includes(me))),Ue=xe.indexOf(de);if(Ue<0)return fe;const qe=ae==="up"?Ue-1:Ue+1;if(qe<0||qe>=xe.length)return fe;const Ze=xe.slice();[Ze[Ue],Ze[qe]]=[Ze[qe],Ze[Ue]];const We={...fe,order:Ze,colors:fe.colors,version:fe.version};return oe(We),We})},je=()=>{A(null),g({...BP,autorNombre:e.nombreCompleto}),v(!0)},De=({e:de,index:ae})=>{var We,me,Ve,Xe;const fe="p-1.5 rounded-md bg-slate-100 hover:bg-slate-200 text-slate-700",ge=q.colors[de.id],xe=()=>{var Ie,Be,et;return(Ie=de.videos)!=null&&Ie.length?wu:(Be=de.imagenes)!=null&&Be.length?R5:(et=de.enlaces)!=null&&et.length?ix:Ko},Ue=w.useMemo(()=>{const Ie={};return D.forEach(({id:Be,Comp:et})=>{Be!=="auto"&&(Ie[Be]=et)}),Ie},[D]),qe=de.iconId&&de.iconId!=="auto"&&Ue[de.iconId]||xe(),Ze=n&&z;return i.jsxs("div",{className:`relative rounded-xl shadow-sm hover:shadow-md transition overflow-hidden border bg-white ${Ze?"cursor-move":""} ${Z===de.id?"opacity-80 ring-2 ring-blue-400":""}`,style:{borderColor:"var(--tw-colors-slate-200)",borderLeft:ge?`6px solid ${ge}`:void 0},draggable:Ze,onDragStart:Ie=>{Ze&&(U(de.id),Ie.dataTransfer.setData("text/plain",de.id),Ie.dataTransfer.effectAllowed="move")},onDragEnd:()=>U(null),onDragOver:Ie=>{Ze&&(Ie.preventDefault(),Ie.dataTransfer.dropEffect="move")},onDrop:Ie=>{if(!Ze)return;Ie.preventDefault();const Be=Ie.dataTransfer.getData("text/plain"),et=de.id;!Be||Be===et||(Q(bt=>{const jt=s.map(hr=>hr.id),qt=bt.order.filter(hr=>jt.includes(hr)).concat(jt.filter(hr=>!bt.order.includes(hr))),ir=qt.indexOf(Be),Ut=qt.indexOf(et);if(ir<0||Ut<0)return bt;const Nr=qt.slice(),[tr]=Nr.splice(ir,1);Nr.splice(Ut,0,tr);const Xr={...bt,order:Nr};return oe(Xr),Xr}),U(null))},children:[t&&i.jsxs("div",{className:"absolute top-2 right-2 z-20 flex items-center gap-1",children:[i.jsx("button",{onClick:()=>ke(de),className:fe,title:"Editar contenido",children:i.jsx(MN,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>re(de),className:fe,title:"Editar icono",children:i.jsx(_S,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>Ae(de.id),className:"p-1.5 rounded-md bg-slate-100 hover:bg-slate-200 text-red-600",title:"Eliminar",children:i.jsx(Vn,{className:"w-4 h-4"})})]}),n&&z&&i.jsxs("div",{className:"absolute top-2 left-2 z-20 flex items-center gap-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{type:"button",className:"px-1.5 py-1 rounded-md border border-slate-300 bg-white hover:bg-slate-50 text-xs",onClick:()=>X(de.id,"up"),title:"Subir",children:""}),i.jsx("button",{type:"button",className:"px-1.5 py-1 rounded-md border border-slate-300 bg-white hover:bg-slate-50 text-xs",onClick:()=>X(de.id,"down"),title:"Bajar",children:""})]}),i.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[i.jsx("input",{type:"color",value:ge||"#ffffff",onChange:Ie=>be(de.id,Ie.target.value),title:"Color"}),i.jsx("button",{type:"button",className:"px-1.5 py-1 rounded-md border border-slate-300 bg-white hover:bg-slate-50",onClick:()=>be(de.id,void 0),title:"Quitar color",children:""})]})]}),i.jsxs("div",{className:"p-4 relative z-0",children:[i.jsx("div",{className:"flex items-start justify-between gap-3",children:i.jsxs("div",{className:"min-w-0",children:[i.jsx("h4",{className:"text-lg font-semibold text-slate-900 dark:text-white truncate",title:de.titulo,children:de.titulo}),i.jsxs("p",{className:"text-sm text-slate-700/80 dark:text-slate-300/90",children:[new Date(de.createdAt).toLocaleString("es-CL"),"  ",de.autorNombre||de.creadoPor]})]})}),!!de.resumen&&i.jsx("p",{className:"mt-1 text-slate-800 dark:text-slate-200",children:de.resumen}),i.jsx("div",{className:"mt-3 prose prose-slate max-w-none dark:prose-invert text-sm",children:i.jsx(NE,{content:de.contenidoHtml,context:"intranet-entry"})}),!!((We=de.etiquetas)!=null&&We.length)&&i.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:de.etiquetas.map(Ie=>i.jsx(cve,{label:Ie},Ie))}),!!((me=de.enlaces)!=null&&me.length)&&i.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:de.enlaces.map((Ie,Be)=>{const et=jC(Ie.url),bt=f8(Ie.url),jt=Ie.titulo||et||"Abrir";return i.jsxs("a",{href:Ie.url,target:"_blank",rel:"noopener noreferrer",className:"min-w-0 inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-blue-50 text-blue-700 ring-1 ring-blue-200 hover:bg-blue-100 dark:bg-blue-900/20 dark:text-blue-300 dark:ring-blue-800 text-sm transition max-w-full",children:[bt&&i.jsx("img",{src:bt,alt:et,className:"w-4 h-4 rounded shrink-0"}),i.jsx("span",{className:"font-medium truncate max-w-[180px] sm:max-w-[220px]",title:jt,children:Dre(jt,30)}),i.jsx(ix,{className:"w-3.5 h-3.5 shrink-0"})]},Be)})}),!!((Ve=de.imagenes)!=null&&Ve.length)&&i.jsx("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-3 gap-2",children:de.imagenes.map((Ie,Be)=>i.jsx("img",{src:Ie.url,alt:Ie.titulo||`img-${Be}`,className:"w-full h-32 object-cover rounded-md"},Be))}),!!((Xe=de.videos)!=null&&Xe.length)&&i.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:de.videos.map((Ie,Be)=>i.jsxs("a",{href:Ie.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-amber-50 text-amber-700 ring-1 ring-amber-200 hover:bg-amber-100 dark:bg-amber-900/20 dark:text-amber-300 dark:ring-amber-800 text-sm transition",children:[i.jsx(wu,{className:"w-4 h-4"})," ",Dre(Ie.titulo||jC(Ie.url)||"Video",30),i.jsx(ix,{className:"w-3.5 h-3.5"})]},Be))}),i.jsx("div",{className:"mt-6 grid place-items-center pointer-events-none select-none",children:i.jsx(qe,{className:"text-slate-300 w-16 h-16 md:w-20 md:h-20"})})]})]})},ke=de=>{A(de);const{id:ae,createdAt:fe,creadoPor:ge,...xe}=de;g({...xe}),v(!0)},ue=()=>{A(null),g(BP),v(!1)},we=async()=>{try{const de={...m};if(!de.titulo||!de.contenidoHtml){alert("Ttulo y contenido son obligatorios");return}f?await Bre(f.id,de):await INt(de),ue(),v(!1)}catch(de){alert((de==null?void 0:de.message)||"No se pudo guardar la entrada")}},Ae=async de=>{var ae,fe;if(confirm("Eliminar esta entrada?"))try{const ge=s.find(Ue=>Ue.id===de),xe=[];(ae=ge==null?void 0:ge.imagenes)==null||ae.forEach(Ue=>{Ue.storagePath&&xe.push(Ue.storagePath)}),(fe=ge==null?void 0:ge.videos)==null||fe.forEach(Ue=>{Ue.storagePath&&xe.push(Ue.storagePath)}),xe.length&&await Promise.all(xe.map(Ue=>FNt(Ue).catch(()=>{}))),await DNt(de)}catch(ge){alert((ge==null?void 0:ge.message)||"No se pudo eliminar")}};return r?i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Intranet"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Informacin institucional, enlaces y recursos para el profesorado y coordinacin."})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[n&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>K(de=>!de),className:`inline-flex items-center gap-2 px-3 py-2 rounded-lg border ${z?"bg-blue-600 text-white border-blue-600":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50"}`,children:z?"Salir de personalizacin":"Personalizar"}),z&&i.jsx("button",{onClick:()=>{const de={order:[],colors:{},version:1};Q(de),oe(de)},className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border bg-white text-slate-700 border-slate-300 hover:bg-slate-50",children:"Restablecer"})]}),t&&i.jsxs("button",{onClick:je,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-amber-500 text-white hover:bg-amber-600",children:[i.jsx(gi,{className:"w-4 h-4"})," Nueva entrada"]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 md:p-6 rounded-xl shadow border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Notas rpidas"}),a&&i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("select",{value:L.color,onChange:de=>H(ae=>({...ae,color:de.target.value})),className:"rounded-md border border-slate-300 px-2 py-1 text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",title:"Color del post-it",children:[i.jsx("option",{value:"yellow",children:"Amarillo"}),i.jsx("option",{value:"lime",children:"Verde"}),i.jsx("option",{value:"sky",children:"Celeste"}),i.jsx("option",{value:"red",children:"Rojo"}),i.jsx("option",{value:"violet",children:"Violeta"})]}),i.jsxs("button",{onClick:async()=>{if(!L.titulo||!L.mensaje){alert("Ttulo y mensaje son obligatorios");return}try{await LNt({titulo:L.titulo,mensaje:L.mensaje,color:L.color}),H({titulo:"",mensaje:"",color:L.color})}catch(de){alert((de==null?void 0:de.message)||"No se pudo crear la nota")}},className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-slate-800 text-white hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:[i.jsx(gi,{className:"w-4 h-4"})," Agregar Nota"]})]})]}),a&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[i.jsx("input",{value:L.titulo,onChange:de=>H(ae=>({...ae,titulo:de.target.value})),placeholder:"Ttulo de la nota",className:"rounded-md border border-slate-300 px-3 py-2 dark:bg-slate-700 dark:border-slate-600 dark:text-white"}),i.jsx("input",{value:L.mensaje,onChange:de=>H(ae=>({...ae,mensaje:de.target.value})),placeholder:"Mensaje (breve)",className:"rounded-md border border-slate-300 px-3 py-2 dark:bg-slate-700 dark:border-slate-600 dark:text-white"}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300",children:[i.jsx(_S,{className:"w-4 h-4"})," Usa estas notas para comunicar situaciones importantes."]})]}),P?i.jsx("div",{className:"text-slate-600 dark:text-slate-300",children:"Cargando notas"}):B.length===0?i.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"No hay notas an."}):i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6",children:B.map((de,ae)=>{const fe={yellow:"bg-yellow-200 dark:bg-yellow-800/50",lime:"bg-lime-200 dark:bg-lime-800/50",sky:"bg-sky-200 dark:bg-sky-800/50",red:"bg-red-200 dark:bg-red-800/50",violet:"bg-violet-200 dark:bg-violet-800/50"},ge=["-rotate-2","rotate-1","rotate-2","-rotate-1","rotate-1"][ae%5],xe=e.profile===It.SUBDIRECCION||de.autor===e.nombreCompleto,Ue=[It.SUBDIRECCION,It.PROFESORADO].includes(e.profile);return i.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${fe[de.color||"yellow"]} transform ${ge}`,children:[de.destacado&&i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:i.jsx("span",{className:"text-5xl",role:"img","aria-label":"Nota fijada",children:""})}),i.jsx("h4",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-3 break-words",children:de.titulo}),i.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[80px]",children:de.mensaje}),i.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold",children:de.autor}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(de.fechaPublicacion).toLocaleString("es-CL")})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[Ue&&i.jsx("button",{onClick:async()=>{try{await MNt(de.id,{destacado:!de.destacado})}catch{alert("No se pudo fijar")}},title:de.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:i.jsx("span",{className:`text-xl transition-opacity ${de.destacado?"opacity-100":"opacity-30"}`,children:""})}),xe&&i.jsx("button",{onClick:async()=>{if(confirm("Eliminar nota?"))try{await UNt(de.id)}catch{alert("No se pudo eliminar")}},title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},de.id)})})]}),t&&x&&i.jsx(QNt,{draft:m,setDraft:g,newLink:C,setNewLink:_,showPreview:y,setShowPreview:N,editing:!!f,saveDraft:we,cancelEdit:ue,imgUploadPct:j,setImgUploadPct:I,vidUploadPct:T,setVidUploadPct:k}),l?i.jsx("div",{className:"text-slate-600 dark:text-slate-300",children:"Cargando intranet..."}):s.length===0?i.jsx("div",{className:"p-8 text-center rounded-xl bg-slate-50 dark:bg-slate-800 border dark:border-slate-700",children:"An no hay entradas publicadas."}):i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:(()=>{const de=s.slice().sort((ae,fe)=>+!!fe.destacado-+!!ae.destacado);if(n){const ae=q.order.filter(xe=>de.find(Ue=>Ue.id===xe)),fe=de.filter(xe=>!ae.includes(xe.id));return[...ae.map(xe=>de.find(Ue=>Ue.id===xe)).filter(Boolean),...fe].map((xe,Ue)=>i.jsx(De,{e:xe,index:Ue},xe.id))}return de.map((ae,fe)=>i.jsx(De,{e:ae,index:fe},ae.id))})()}),t&&Y&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:ce}),i.jsxs("div",{className:"relative w-full max-w-lg mx-4 bg-white rounded-xl shadow-xl border border-slate-200 p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h5",{className:"text-slate-800 font-semibold",children:"Apariencia de tarjeta (icono)"}),i.jsx("button",{onClick:ce,className:"p-1 rounded hover:bg-slate-100","aria-label":"Cerrar",children:i.jsx(xo,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Icono"}),i.jsx("input",{type:"text",value:le,onChange:de=>ie(de.target.value),placeholder:"Buscar icono...",className:"w-40 rounded-md border border-slate-300 px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsx("div",{className:"mt-2 grid grid-cols-5 gap-2",children:D.filter(de=>de.label.toLowerCase().includes(le.toLowerCase())||de.id.includes(le.toLowerCase())).map(de=>{const ae=de.Comp,fe=W===de.id||de.id==="auto"&&W==="auto";return i.jsxs("button",{type:"button",onClick:()=>J(de.id),className:`flex flex-col items-center justify-center gap-1 px-2 py-2 rounded-md border text-xs ${fe?"border-blue-600 bg-blue-50 text-blue-700":"border-slate-200 hover:bg-slate-50 text-slate-700"}`,title:de.label,children:[i.jsx(ae,{className:"w-5 h-5"}),i.jsx("span",{className:"truncate w-full text-center",children:de.label})]},de.id)})})]}),i.jsxs("div",{className:"mt-4 flex flex-wrap justify-end gap-2",children:[i.jsx("button",{onClick:ce,className:"px-3 py-2 rounded-md bg-slate-100 text-slate-700 hover:bg-slate-200",children:"Cancelar"}),i.jsx("button",{onClick:async()=>{if(Y)try{await Bre(Y.id,{gradiente:null,iconId:W==="auto"?null:W}),ce()}catch(de){alert((de==null?void 0:de.message)||"No se pudo guardar")}},className:"px-3 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700",children:"Guardar"})]})]})]})]}):i.jsx("div",{className:"p-6 rounded-xl bg-white dark:bg-slate-800 border dark:border-slate-700",children:"No autorizado."})},$Nt=({currentUser:e})=>{const[t,r]=w.useState([]),[n,a]=w.useState(""),[s,o]=w.useState([]),[l,c]=w.useState(!1),[u,d]=w.useState(!1),[f,A]=w.useState(null),[m,g]=w.useState(""),[x,v]=w.useState(""),[y,N]=w.useState(""),[C,_]=w.useState([]),[j,I]=w.useState(null),[T,k]=w.useState(""),B=w.useMemo(()=>{const U=t.flatMap(Y=>Array.isArray(Y.tags)?Y.tags:[]);return Array.from(new Set(U))},[t]),M=w.useRef(null),P=w.useMemo(()=>e.profile===It.SUBDIRECCION,[e.profile]);w.useEffect(()=>{const U=J0e(r);return()=>U()},[]),w.useEffect(()=>{var U;(U=M.current)==null||U.scrollIntoView({behavior:"smooth"})},[s]);const S=async()=>{const U=n.trim();if(U){o(Y=>[...Y,{role:"user",text:U}]),a(""),c(!0);try{const Y=C.length>0?C:void 0,R=s.slice(-4).map(J=>({role:J.role,text:J.text})),D=await Wat(U,3,Y,R),W=Array.isArray(D.citations)?D.citations.map(J=>({index:J.index,id:J.id,title:J.title})):[];o(J=>[...J,{role:"assistant",text:D.answer,citations:W}])}catch(Y){console.error("Error consultando Documentacin:",Y);const R=(Y==null?void 0:Y.message)||"Ocurri un error al consultar la documentacin.";o(D=>[...D,{role:"assistant",text:R}])}finally{c(!1)}}},L=async()=>{if(P&&f)try{d(!0);const U=m.trim()||f.name.replace(/\.[^.]+$/,"").replace(/[_-]+/g," "),Y=await Z0e(U,x.trim()||"",y.split(",").map(D=>D.trim()).filter(Boolean)),R=await eAe(Y,f);await V_(Y,R.storagePath,U,x.trim()||"",y.split(",").map(D=>D.trim()).filter(Boolean),R.contentType),A(null),g(""),v(""),N("")}catch(U){console.error("Upload error:",U)}finally{d(!1)}},H=async U=>{if(P)try{d(!0),await V_(U.id,U.storagePath,U.title,U.description||"",Array.isArray(U.tags)?U.tags:[],U.contentType||void 0)}catch(Y){console.error("Reindex error:",Y)}finally{d(!1)}},q=async U=>{try{if(!U.storagePath)return;const{ref:Y,getDownloadURL:R}=await Ss(async()=>{const{ref:J,getDownloadURL:le}=await Promise.resolve().then(()=>o5e);return{ref:J,getDownloadURL:le}},void 0),{storage:D}=await Ss(async()=>{const{storage:J}=await Promise.resolve().then(()=>MM);return{storage:J}},void 0),W=await R(Y(D,U.storagePath));k(U.title),I(W)}catch(Y){console.error("Error abriendo documento:",Y)}},Q=U=>{_(Y=>Y.includes(U)?Y.filter(R=>R!==U):[...Y,U])},z=()=>_([]),K=U=>{U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),S())},Z=P;return i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-white dark:bg-slate-800 ring-1 ring-slate-200 dark:ring-slate-700",children:[i.jsx(Ko,{className:"w-5 h-5 text-amber-500"}),i.jsx("span",{className:"font-semibold",children:"Documentacin institucional"})]}),Z&&i.jsxs("div",{className:"flex-1 min-w-[280px] flex flex-wrap gap-2 items-center",children:[i.jsxs("label",{className:"inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-white dark:bg-slate-800 ring-1 ring-slate-200 dark:ring-slate-700 cursor-pointer",children:[i.jsx(Bb,{className:"w-4 h-4"}),i.jsx("input",{type:"file",className:"hidden",accept:"application/pdf,text/plain",onChange:U=>{var Y;return A(((Y=U.target.files)==null?void 0:Y[0])||null)}}),i.jsx("span",{className:"text-sm",children:f?f.name:"Seleccionar archivo (PDF/TXT)"})]}),i.jsx("input",{value:m,onChange:U=>g(U.target.value),placeholder:"Ttulo (opcional)",className:"px-3 py-2 rounded-xl bg-white dark:bg-slate-800 ring-1 ring-slate-200 dark:ring-slate-700 text-sm"}),i.jsx("input",{value:x,onChange:U=>v(U.target.value),placeholder:"Descripcin (opcional)",className:"px-3 py-2 rounded-xl bg-white dark:bg-slate-800 ring-1 ring-slate-200 dark:ring-slate-700 text-sm flex-1"}),i.jsx("input",{value:y,onChange:U=>N(U.target.value),placeholder:"Tags (coma)",className:"px-3 py-2 rounded-xl bg-white dark:bg-slate-800 ring-1 ring-slate-200 dark:ring-slate-700 text-sm"}),i.jsxs("button",{disabled:u||!f,onClick:L,className:"inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-amber-500 text-white hover:bg-amber-600 disabled:opacity-50",children:[u?i.jsx(pi,{className:"w-4 h-4 animate-spin"}):i.jsx(ev,{className:"w-4 h-4"})," Subir e indexar"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-slate-800 rounded-2xl ring-1 ring-slate-200 dark:ring-slate-700 p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"font-semibold",children:"Repositorio"}),P&&i.jsx(UN,{className:"w-4 h-4 text-slate-500",title:"Slo Subdireccin configura"})]}),i.jsxs("div",{className:"mb-3 flex flex-wrap gap-2",children:[B.map(U=>i.jsx("button",{onClick:()=>Q(U),className:`text-xs px-2 py-1 rounded-full ring-1 ${C.includes(U)?"bg-amber-500 text-white ring-amber-500":"bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-200 ring-slate-200 dark:ring-slate-600"}`,children:U},U)),C.length>0&&i.jsx("button",{onClick:z,className:"text-xs px-2 py-1 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-200 ring-1 ring-slate-200 dark:ring-slate-600",children:"Limpiar"})]}),i.jsxs("div",{className:"space-y-2 max-h-[60vh] overflow-auto",children:[t.length===0&&i.jsx("div",{className:"text-sm text-slate-500",children:"An no hay documentos cargados."}),t.filter(U=>C.length===0||Array.isArray(U.tags)&&U.tags.some(Y=>C.includes(Y))).map(U=>i.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700/40",children:[i.jsx("div",{className:"w-9 h-9 rounded-lg bg-amber-50 text-amber-600 dark:bg-amber-500/20 dark:text-amber-300 flex items-center justify-center",children:i.jsx(Ko,{className:"w-5 h-5"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-medium truncate",title:U.title,children:U.title}),U.description&&i.jsx("div",{className:"text-xs text-slate-500 truncate",title:U.description,children:U.description}),i.jsxs("div",{className:"text-[11px] text-slate-400 mt-1",children:[U.pageCount?`${U.pageCount} pg.`:""," ",U.contentText?` ${U.contentText.length} chars`:""]}),Array.isArray(U.tags)&&U.tags.length>0&&i.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:U.tags.map(Y=>i.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-200 ring-1 ring-slate-200 dark:ring-slate-600",children:Y},Y))})]}),P&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:`text-slate-400 ${U.storagePath?"hover:text-indigo-600":"opacity-40 cursor-not-allowed"}`,title:U.storagePath?"Ver documento":"No hay archivo asociado para ver",onClick:()=>U.storagePath&&q(U),disabled:!U.storagePath,children:i.jsx(ox,{className:"w-4 h-4"})}),i.jsx("button",{className:`text-slate-400 ${U.storagePath?"hover:text-emerald-600":"opacity-40 cursor-not-allowed"}`,title:U.storagePath?"Reindexar":"No hay archivo asociado para reindexar",onClick:()=>U.storagePath&&H(U),disabled:!U.storagePath,children:i.jsx(o3e,{className:"w-4 h-4"})}),i.jsx("button",{className:"text-slate-400 hover:text-red-600",title:"Eliminar",onClick:()=>tAe(U.id),children:i.jsx(Vn,{className:"w-4 h-4"})})]})]},U.id))]})]}),i.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 rounded-2xl ring-1 ring-slate-200 dark:ring-slate-700 p-4 flex flex-col min-h-[60vh]",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"w-9 h-9 rounded-lg bg-emerald-50 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-300 flex items-center justify-center",children:i.jsx(yy,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Asistente de Documentacin"}),i.jsx("div",{className:"text-xs text-slate-500",children:"Pregunta sobre reglamentos, protocolos y documentos institucionales"})]})]}),B.length>0&&i.jsxs("div",{className:"mb-3 flex flex-wrap items-center gap-2",children:[i.jsx("span",{className:"text-xs text-slate-500",children:"Filtrar por temas:"}),B.map(U=>i.jsx("button",{onClick:()=>Q(U),className:`text-xs px-2 py-1 rounded-full ring-1 ${C.includes(U)?"bg-emerald-600 text-white ring-emerald-600":"bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-200 ring-slate-200 dark:ring-slate-600"}`,children:U},`chat-${U}`)),C.length>0&&i.jsx("button",{onClick:z,className:"text-xs px-2 py-1 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-200 ring-1 ring-slate-200 dark:ring-slate-600",children:"Limpiar"})]}),i.jsxs("div",{className:"flex-1 overflow-auto space-y-3",children:[s.map((U,Y)=>i.jsxs("div",{className:`max-w-[85%] rounded-2xl px-4 py-2 ${U.role==="user"?"ml-auto bg-amber-100 dark:bg-amber-900/40 text-slate-900 dark:text-slate-100":"bg-slate-100 dark:bg-slate-700/60 text-slate-800 dark:text-slate-100"}`,children:[i.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:U.text}),U.citations&&U.citations.length>0&&i.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:U.citations.map(R=>i.jsxs("span",{className:"text-[11px] px-2 py-0.5 rounded-full bg-white/70 dark:bg-slate-800/70 ring-1 ring-slate-200 dark:ring-slate-600",title:R.title,children:["Doc ",R.index]},R.id))})]},Y)),i.jsx("div",{ref:M})]}),i.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[i.jsx("input",{value:n,onChange:U=>a(U.target.value),onKeyDown:K,placeholder:"Escribe tu pregunta",className:"flex-1 px-4 py-3 rounded-xl bg-white dark:bg-slate-900 ring-1 ring-slate-200 dark:ring-slate-700"}),i.jsxs("button",{onClick:S,disabled:l||!n.trim(),className:"inline-flex items-center gap-2 px-4 py-3 rounded-xl bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-50",children:[l?i.jsx(pi,{className:"w-4 h-4 animate-spin"}):i.jsx(QM,{className:"w-4 h-4"})," Enviar"]})]})]})]}),j&&i.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:()=>I(null),children:i.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full h-[90vh] max-w-5xl overflow-hidden flex flex-col",onClick:U=>U.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"font-medium truncate mr-2",children:T}),i.jsx("button",{className:"text-slate-500 hover:text-slate-800",onClick:()=>I(null),title:"Cerrar",children:i.jsx(xo,{className:"w-5 h-5"})})]}),i.jsx("div",{className:"flex-1 bg-slate-50 dark:bg-slate-800",children:i.jsx("iframe",{src:`${j}#toolbar=1&navpanes=0`,className:"w-full h-full",title:T})})]})})]})},zNt=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},GNt=({currentUser:e,onLogout:t,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,unreadMessagesCount:s,refreshUnreadCount:o})=>{const l=e.profile,c=w.useMemo(()=>{const I=cTe[l]||[];return l!==It.ESTUDIANTE?I:I.filter(T=>{if(T.name==="Asistencia a Empresa"){const k=zNt(e.curso||"");return k.startsWith("3")||k.startsWith("4")}return!0})},[l,e.curso]),[u,d]=w.useState(null),[f,A]=w.useState(!1),[m,g]=w.useState(!1),[x,v]=w.useState({planificacion:!0,evaluacion:!0,reflexion:!0,herramientas:!0,sd_gestion:!0,sd_planificacion:!0,sd_reflexion:!0,sd_herramientas:!0,coord_gestion:!0,coord_formacion:!0,coord_utilidades:!0}),y=w.useRef([]);w.useEffect(()=>{c&&c.length>0?d(c[0]):d(null)},[l,c]);const N=w.useCallback(I=>{d(I),window.innerWidth<768&&A(!1)},[]),C=w.useCallback(I=>{const T=c.find(k=>k.name===I);T&&N(T)},[c,N]),_=()=>i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center h-16 px-4 border-b border-slate-200 bg-white",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-9 h-9 rounded-full bg-amber-400 flex items-center justify-center",children:i.jsx("span",{className:"text-slate-900 inline-flex items-center justify-center",children:i.jsx(q3e,{className:"w-4 h-4"})})}),!m&&i.jsx("span",{className:"text-blue-900 font-extrabold text-xl tracking-tight",children:"Gestin LIR"})]}),i.jsx("button",{type:"button",onClick:()=>g(I=>!I),className:"ml-auto w-9 h-9 inline-flex items-center justify-center rounded-md hover:bg-slate-100 transition",title:m?"Expandir":"Colapsar",children:m?i.jsx(m3,{className:"w-5 h-5 text-slate-600"}):i.jsx(RN,{className:"w-5 h-5 text-slate-600"})})]}),i.jsx("nav",{className:"flex-1 overflow-y-auto p-3 bg-white",children:l===It.PROFESORADO&&!m?i.jsxs("div",{className:"space-y-3",children:[[{id:"planificacion",title:"Planificacin",items:["Intranet","Planificacin","Recursos de Aprendizaje","Interdisciplinario","Inclusin"]},{id:"evaluacion",title:"Evaluacin",items:["Evaluacin de Ensayo","Evaluacin de Aprendizajes","Evaluaciones Formativas","Evaluacin de Competencias","Actividades Remotas","SIMCE"]},{id:"reflexion",title:"Reflexin",items:["Anlisis Taxonmico","Mis Acompaamientos","Desarrollo Profesional"]},{id:"herramientas",title:"Herramientas",items:["Documentacin"]}].map(I=>{const T=!!x[I.id],k=I.items.map(B=>c.find(M=>M.name===B)).filter(Boolean);return k.length===0?null:i.jsxs("div",{className:"rounded-xl bg-white border border-slate-200 overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 hover:bg-slate-50 transition",onClick:()=>v(B=>({...B,[I.id]:!B[I.id]})),"aria-expanded":T,children:[i.jsx("span",{className:"text-sm font-semibold text-blue-900",children:I.title}),i.jsx(SS,{className:`w-4 h-4 text-slate-500 transition-transform ${T?"rotate-180":""}`})]}),T&&i.jsx("div",{className:"px-2 pb-2",children:k.map(B=>{const M=(u==null?void 0:u.name)===B.name;return i.jsxs("button",{onClick:()=>N(B),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-lg transition-all mt-1
                              ${M?"bg-amber-400/90 text-slate-900 font-semibold":"text-blue-900 hover:bg-slate-50"}`,title:B.name,children:[i.jsx("span",{className:`shrink-0 ${M?"text-slate-900":"text-blue-900"}`,children:B.icon}),i.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:B.name})]},B.name)})})]},I.id)}),c.filter(I=>!["Intranet","Planificacin","Recursos de Aprendizaje","Interdisciplinario","Inclusin","Evaluacin de Aprendizajes","Evaluaciones Formativas","Evaluacin de Competencias","Actividades Remotas","SIMCE","Anlisis Taxonmico","Mis Acompaamientos","Desarrollo Profesional"].includes(I.name)).length>0&&i.jsxs("div",{className:"rounded-xl bg-white border border-slate-200 overflow-hidden",children:[i.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-blue-900",children:"Otros"}),i.jsx("div",{className:"px-2 pb-2",children:c.filter(I=>!["Intranet","Planificacin","Recursos de Aprendizaje","Interdisciplinario","Inclusin","Evaluacin de Aprendizajes","Evaluaciones Formativas","Evaluacin de Competencias","Actividades Remotas","SIMCE","Anlisis Taxonmico","Mis Acompaamientos","Desarrollo Profesional"].includes(I.name)).map(I=>{const T=(u==null?void 0:u.name)===I.name;return i.jsxs("button",{onClick:()=>N(I),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-lg transition-all mt-1
                              ${T?"bg-amber-400/90 text-slate-900 font-semibold":"text-blue-900 hover:bg-slate-50"}`,title:I.name,children:[i.jsx("span",{className:`shrink-0 ${T?"text-slate-900":"text-blue-900"}`,children:I.icon}),i.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:I.name})]},I.name)})})]})]}):l===It.SUBDIRECCION&&!m?i.jsxs("div",{className:"space-y-3",children:[[{id:"sd_gestion",title:"Gestin",items:["Intranet","Administracin","Horario del liceo","Registro de inasistencias y reemplazos docentes","Crear horarios","Seguimiento de acciones pedaggicas"]},{id:"sd_planificacion",title:"Planificacin",items:["Planificacin","Seguimiento Curricular","Interdisciplinario","Inclusin"]},{id:"sd_reflexion",title:"Reflexin",items:["Acompaamiento docente","Anlisis Taxonmico","Dashboard"]},{id:"sd_herramientas",title:"Herramientas",items:["Documentacin","Calendario Acadmico"]}].map(I=>{const T=!!x[I.id],k=I.items.map(B=>c.find(M=>M.name===B)).filter(Boolean);return k.length===0?null:i.jsxs("div",{className:"rounded-xl bg-white border border-slate-200 overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 hover:bg-slate-50 transition",onClick:()=>v(B=>({...B,[I.id]:!B[I.id]})),"aria-expanded":T,children:[i.jsx("span",{className:"text-sm font-semibold text-blue-900",children:I.title}),i.jsx(SS,{className:`w-4 h-4 text-slate-500 transition-transform ${T?"rotate-180":""}`})]}),T&&i.jsx("div",{className:"px-2 pb-2",children:k.map(B=>{const M=(u==null?void 0:u.name)===B.name;return i.jsxs("button",{onClick:()=>N(B),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-lg transition-all mt-1
                              ${M?"bg-amber-400/90 text-slate-900 font-semibold":"text-blue-900 hover:bg-slate-50"}`,title:B.name,children:[i.jsx("span",{className:`shrink-0 ${M?"text-slate-900":"text-blue-900"}`,children:B.icon}),i.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:B.name})]},B.name)})})]},I.id)}),c.filter(I=>!["Intranet","Administracin","Registro de inasistencias y reemplazos docentes","Crear horarios","Seguimiento de acciones pedaggicas","Seguimiento Curricular","Interdisciplinario","Inclusin","Acompaamiento docente","Anlisis Taxonmico","Dashboard","Calendario Acadmico"].includes(I.name)).length>0&&i.jsxs("div",{className:"rounded-xl bg-white border border-slate-200 overflow-hidden",children:[i.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-blue-900",children:"Otros"}),i.jsx("div",{className:"px-2 pb-2",children:c.filter(I=>!["Intranet","Administracin","Registro de inasistencias y reemplazos docentes","Crear horarios","Seguimiento de acciones pedaggicas","Seguimiento Curricular","Interdisciplinario","Inclusin","Acompaamiento docente","Anlisis Taxonmico","Dashboard","Calendario Acadmico"].includes(I.name)).map(I=>{const T=(u==null?void 0:u.name)===I.name;return i.jsxs("button",{onClick:()=>N(I),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-lg transition-all mt-1
                              ${T?"bg-amber-400/90 text-slate-900 font-semibold":"text-blue-900 hover:bg-slate-50"}`,title:I.name,children:[i.jsx("span",{className:`shrink-0 ${T?"text-slate-900":"text-blue-900"}`,children:I.icon}),i.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:I.name})]},I.name)})})]})]}):l===It.COORDINACION_TP&&!m?i.jsx("div",{className:"space-y-3",children:[{id:"coord_gestion",title:"Gestin",items:["Seguimiento Dual","Asistencia Dual","Gestin de Empresas","Paol"]},{id:"coord_formacion",title:"Formacin",items:["Alternancia TP","Desarrollo Profesional","Evaluacin de Ensayo","SIMCE"]},{id:"coord_utilidades",title:"Utilidades",items:["Documentacin","Calendario Acadmico","Multicopias"]}].map(I=>{const T=!!x[I.id],k=I.items.map(B=>c.find(M=>M.name===B)).filter(Boolean);return k.length===0?null:i.jsxs("div",{className:"rounded-xl bg-white border border-slate-200 overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 hover:bg-slate-50 transition",onClick:()=>v(B=>({...B,[I.id]:!B[I.id]})),"aria-expanded":T,children:[i.jsx("span",{className:"text-sm font-semibold text-blue-900",children:I.title}),i.jsx(SS,{className:`w-4 h-4 text-slate-500 transition-transform ${T?"rotate-180":""}`})]}),T&&i.jsx("div",{className:"px-2 pb-2",children:k.map(B=>{const M=(u==null?void 0:u.name)===B.name;return i.jsxs("button",{onClick:()=>N(B),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-lg transition-all mt-1
                              ${M?"bg-amber-400/90 text-slate-900 font-semibold":"text-blue-900 hover:bg-slate-50"}`,title:B.name,children:[i.jsx("span",{className:`shrink-0 ${M?"text-slate-900":"text-blue-900"}`,children:B.icon}),i.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:B.name})]},B.name)})})]},I.id)})}):i.jsx("div",{className:"space-y-1",onKeyDown:I=>{var k,B,M;const T=y.current.findIndex(P=>P===document.activeElement);if(I.key==="ArrowDown"){I.preventDefault();const P=Math.min(T===-1?0:T+1,y.current.length-1);(k=y.current[P])==null||k.focus()}else if(I.key==="ArrowUp"){I.preventDefault();const P=Math.max(T===-1?0:T-1,0);(B=y.current[P])==null||B.focus()}else I.key==="Enter"&&T>=0&&((M=y.current[T])==null||M.click())},children:c.map((I,T)=>{const k=(u==null?void 0:u.name)===I.name;return i.jsxs("button",{ref:B=>y.current[T]=B,onClick:()=>N(I),className:`w-full group flex items-center ${m?"justify-center px-2":"justify-start px-4"} gap-3 py-3 rounded-xl transition-all
                    ${k?"bg-amber-400/90 text-slate-900 font-semibold":"text-blue-900 hover:bg-slate-50"}`,title:m?I.name:void 0,children:[i.jsx("span",{className:`shrink-0 ${k?"text-slate-900":"text-blue-900"}`,children:I.icon}),!m&&i.jsx("span",{className:"text-[1.05rem] leading-tight whitespace-normal break-words text-left",children:I.name})]},I.name)})})})]}),j=()=>{if(!u)return i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl border border-slate-200 dark:border-slate-700 h-full w-full flex items-center justify-center",children:i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Seleccione un mdulo del men para comenzar."})});if(u.name==="Intranet")return i.jsx(VNt,{currentUser:e});if(u.name==="Documentacin")return i.jsx($Nt,{currentUser:e});if(u.name==="Calendario Acadmico")return i.jsx(cst,{profile:l});if(u.name==="Desarrollo Profesional")return i.jsx(d2t,{currentUser:e});if(l===It.SUBDIRECCION){if(u.name==="Dashboard")return i.jsx(K7e,{currentUser:e});if(u.name==="Administracin")return i.jsx(_ot,{});if(u.name==="Horario del liceo")return i.jsx(TNt,{});if(u.name==="Planificacin")return i.jsx(RJ,{currentUser:e});if(u.name==="Multicopias")return i.jsx(_P,{currentUser:e});if(u.name==="Evaluacin de Ensayo")return i.jsx(TP,{currentUser:e});if(u.name==="Seguimiento Curricular")return i.jsx(hpt,{currentUser:e});if(u.name==="Acompaamiento docente")return i.jsx(Ect,{currentUser:e});if(u.name==="Anlisis Taxonmico")return i.jsx(Cee,{currentUser:e});if(u.name==="SIMCE")return i.jsx(AS,{currentUser:e});if(u.name==="Interdisciplinario")return i.jsx(BZ,{});if(u.name==="Registro de inasistencias y reemplazos docentes")return i.jsx(V7e,{currentUser:e});if(u.name==="Crear horarios")return i.jsx(VUe,{});if(u.name==="Seguimiento de acciones pedaggicas")return i.jsx(Lat,{});if(u.name==="Inclusin")return i.jsx(EZ,{currentUser:e})}if(l===It.PROFESORADO){if(u.name==="Planificacin")return i.jsx(RJ,{currentUser:e});if(u.name==="Mis Acompaamientos")return i.jsx(Gmt,{currentUser:e});if(u.name==="Recursos de Aprendizaje")return i.jsx(_mt,{});if(u.name==="Multicopias")return i.jsx(_P,{currentUser:e});if(u.name==="Anlisis Taxonmico")return i.jsx(Cee,{currentUser:e});if(u.name==="SIMCE")return i.jsx(AS,{currentUser:e});if(u.name==="Interdisciplinario")return i.jsx(BZ,{});if(u.name==="Inclusin")return i.jsx(EZ,{currentUser:e});if(u.name==="Actividades Remotas")return i.jsx(slt,{});if(u.name==="Evaluacin de Ensayo")return i.jsx(TP,{currentUser:e});if(u.name==="Evaluacin de Aprendizajes")return i.jsx(jot,{});if(u.name==="Evaluaciones Formativas")return i.jsx(oct,{currentUser:e});if(u.name==="Evaluacin de Competencias")return i.jsx(dNt,{currentUser:e})}if(l===It.COORDINACION_TP){if(u.name==="Seguimiento Dual")return i.jsx(Mot,{});if(u.name==="Asistencia Dual")return i.jsx(zlt,{});if(u.name==="Paol")return i.jsx(qct,{});if(u.name==="Multicopias")return i.jsx(_P,{currentUser:e});if(u.name==="Evaluacin de Ensayo")return i.jsx(TP,{currentUser:e});if(u.name==="SIMCE")return i.jsx(AS,{currentUser:e});if(u.name==="Gestin de Empresas")return i.jsx(Ywt,{});if(u.name==="Alternancia TP")return i.jsx(V2t,{})}if(l===It.ESTUDIANTE){if(u.name==="Auto-aprendizaje")return i.jsx(plt,{currentUser:e});if(u.name==="Evaluacin Formativa")return i.jsx(Fmt,{currentUser:e});if(u.name==="Tareas Interdisciplinarias")return i.jsx(Hmt,{currentUser:e});if(u.name==="SIMCE")return i.jsx(AS,{currentUser:e});if(u.name==="Asistencia a Empresa")return i.jsx(Tlt,{currentUser:e})}return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl border border-slate-200 dark:border-slate-700 h-full w-full animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:u.name}),i.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aqu ir la funcionalidad de ",i.jsx("span",{className:"font-semibold",children:u.name}),"."]})})]})};return i.jsxs("div",{className:"h-screen flex flex-col bg-slate-50 dark:bg-slate-900",children:[i.jsx(ETe,{currentUser:e,onLogout:t,onNavigate:C,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,toggleSidebar:()=>A(I=>!I),unreadMessagesCount:s,refreshUnreadCount:o}),i.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f&&i.jsx("div",{onClick:()=>A(!1),className:"fixed inset-0 bg-black/40 backdrop-blur-[1px] z-20 md:hidden"}),i.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 ${m?"w-16":"w-72"} 
          bg-white text-blue-900 flex flex-col transform md:translate-x-0
          ${f?"translate-x-0":"-translate-x-full"} md:translate-x-0
          transition-all duration-300 ease-in-out border-r border-slate-200`,children:i.jsx(_,{})}),i.jsx("main",{className:"flex-1 overflow-y-auto",children:i.jsxs("div",{className:"relative p-5 md:p-8 space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{className:"md:hidden inline-flex items-center justify-center w-10 h-10 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 transition",onClick:()=>A(!0),title:"Abrir men",children:i.jsx(M4e,{className:"w-5 h-5"})}),(u==null?void 0:u.icon)&&i.jsx("span",{className:"inline-flex items-center justify-center w-9 h-9 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700",children:u.icon}),i.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-slate-800 dark:text-slate-100",children:(u==null?void 0:u.name)??"Dashboard"})]})}),i.jsx("div",{className:"min-h-[60vh]",children:j()})]})})]})]})},uve=w.createContext({});function qNt(e){const t=w.useRef(null);return t.current===null&&(t.current=e()),t.current}const GH=w.createContext(null),dve=w.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function KNt(e=!0){const t=w.useContext(GH);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:a}=t,s=w.useId();w.useEffect(()=>{e&&a(s)},[e]);const o=w.useCallback(()=>e&&n&&n(s),[s,n,e]);return!r&&n?[!1,o]:[!0]}const qH=typeof window<"u",WNt=qH?w.useLayoutEffect:w.useEffect,Bu=e=>e;let fve=Bu;function KH(e){let t;return()=>(t===void 0&&(t=e()),t)}const sy=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},AA=e=>e*1e3,mA=e=>e/1e3,XNt={useManualTiming:!1};function YNt(e){let t=new Set,r=new Set,n=!1,a=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(u){s.has(u)&&(c.schedule(u),e()),u(o)}const c={schedule:(u,d=!1,f=!1)=>{const m=f&&n?t:r;return d&&s.add(u),m.has(u)||m.add(u),u},cancel:u=>{r.delete(u),s.delete(u)},process:u=>{if(o=u,n){a=!0;return}n=!0,[t,r]=[r,t],t.forEach(l),t.clear(),n=!1,a&&(a=!1,c.process(u))}};return c}const pS=["read","resolveKeyframes","update","preRender","render","postRender"],JNt=40;function hve(e,t){let r=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},s=()=>r=!0,o=pS.reduce((y,N)=>(y[N]=YNt(s),y),{}),{read:l,resolveKeyframes:c,update:u,preRender:d,render:f,postRender:A}=o,m=()=>{const y=performance.now();r=!1,a.delta=n?1e3/60:Math.max(Math.min(y-a.timestamp,JNt),1),a.timestamp=y,a.isProcessing=!0,l.process(a),c.process(a),u.process(a),d.process(a),f.process(a),A.process(a),a.isProcessing=!1,r&&t&&(n=!1,e(m))},g=()=>{r=!0,n=!0,a.isProcessing||e(m)};return{schedule:pS.reduce((y,N)=>{const C=o[N];return y[N]=(_,j=!1,I=!1)=>(r||g(),C.schedule(_,j,I)),y},{}),cancel:y=>{for(let N=0;N<pS.length;N++)o[pS[N]].cancel(y)},state:a,steps:o}}const{schedule:as,cancel:Rp,state:Ro,steps:IP}=hve(typeof requestAnimationFrame<"u"?requestAnimationFrame:Bu,!0),Ave=w.createContext({strict:!1}),Ore={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},iy={};for(const e in Ore)iy[e]={isEnabled:t=>Ore[e].some(r=>!!t[r])};function ZNt(e){for(const t in e)iy[t]={...iy[t],...e[t]}}const eCt=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function j4(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||eCt.has(e)}let mve=e=>!j4(e);function tCt(e){e&&(mve=t=>t.startsWith("on")?!j4(t):e(t))}try{tCt(require("@emotion/is-prop-valid").default)}catch{}function rCt(e,t,r){const n={};for(const a in e)a==="values"&&typeof e.values=="object"||(mve(a)||r===!0&&j4(a)||!t&&!j4(a)||e.draggable&&a.startsWith("onDrag"))&&(n[a]=e[a]);return n}function nCt(e){if(typeof Proxy>"u")return e;const t=new Map,r=(...n)=>e(...n);return new Proxy(r,{get:(n,a)=>a==="create"?e:(t.has(a)||t.set(a,e(a)),t.get(a))})}const AB=w.createContext({});function kC(e){return typeof e=="string"||Array.isArray(e)}function mB(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const WH=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],XH=["initial",...WH];function pB(e){return mB(e.animate)||XH.some(t=>kC(e[t]))}function pve(e){return!!(pB(e)||e.variants)}function aCt(e,t){if(pB(e)){const{initial:r,animate:n}=e;return{initial:r===!1||kC(r)?r:void 0,animate:kC(n)?n:void 0}}return e.inherit!==!1?t:{}}function sCt(e){const{initial:t,animate:r}=aCt(e,w.useContext(AB));return w.useMemo(()=>({initial:t,animate:r}),[Pre(t),Pre(r)])}function Pre(e){return Array.isArray(e)?e.join(" "):e}const iCt=Symbol.for("motionComponentSymbol");function $b(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function oCt(e,t,r){return w.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):$b(r)&&(r.current=n))},[t])}const YH=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),lCt="framerAppearId",gve="data-"+YH(lCt),{schedule:JH}=hve(queueMicrotask,!1),xve=w.createContext({});function cCt(e,t,r,n,a){var s,o;const{visualElement:l}=w.useContext(AB),c=w.useContext(Ave),u=w.useContext(GH),d=w.useContext(dve).reducedMotion,f=w.useRef(null);n=n||c.renderer,!f.current&&n&&(f.current=n(e,{visualState:t,parent:l,props:r,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const A=f.current,m=w.useContext(xve);A&&!A.projection&&a&&(A.type==="html"||A.type==="svg")&&uCt(f.current,r,a,m);const g=w.useRef(!1);w.useInsertionEffect(()=>{A&&g.current&&A.update(r,u)});const x=r[gve],v=w.useRef(!!x&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,x))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,x)));return WNt(()=>{A&&(g.current=!0,window.MotionIsMounted=!0,A.updateFeatures(),JH.render(A.render),v.current&&A.animationState&&A.animationState.animateChanges())}),w.useEffect(()=>{A&&(!v.current&&A.animationState&&A.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,x)}),v.current=!1))}),A}function uCt(e,t,r,n){const{layoutId:a,layout:s,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:vve(e.parent)),e.projection.setOptions({layoutId:a,layout:s,alwaysMeasureLayout:!!o||l&&$b(l),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,layoutScroll:c,layoutRoot:u})}function vve(e){if(e)return e.options.allowProjection!==!1?e.projection:vve(e.parent)}function dCt({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:a}){var s,o;e&&ZNt(e);function l(u,d){let f;const A={...w.useContext(dve),...u,layoutId:fCt(u)},{isStatic:m}=A,g=sCt(u),x=n(u,m);if(!m&&qH){hCt();const v=ACt(A);f=v.MeasureLayout,g.visualElement=cCt(a,x,A,t,v.ProjectionNode)}return i.jsxs(AB.Provider,{value:g,children:[f&&g.visualElement?i.jsx(f,{visualElement:g.visualElement,...A}):null,r(a,u,oCt(x,g.visualElement,d),x,m,g.visualElement)]})}l.displayName=`motion.${typeof a=="string"?a:`create(${(o=(s=a.displayName)!==null&&s!==void 0?s:a.name)!==null&&o!==void 0?o:""})`}`;const c=w.forwardRef(l);return c[iCt]=a,c}function fCt({layoutId:e}){const t=w.useContext(uve).id;return t&&e!==void 0?t+"-"+e:e}function hCt(e,t){w.useContext(Ave).strict}function ACt(e){const{drag:t,layout:r}=iy;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const mCt=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ZH(e){return typeof e!="string"||e.includes("-")?!1:!!(mCt.indexOf(e)>-1||/[A-Z]/u.test(e))}function Fre(e){const t=[{},{}];return e==null||e.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function eQ(e,t,r,n){if(typeof t=="function"){const[a,s]=Fre(n);t=t(r!==void 0?r:e.custom,a,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,s]=Fre(n);t=t(r!==void 0?r:e.custom,a,s)}return t}const h8=e=>Array.isArray(e),pCt=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),gCt=e=>h8(e)?e[e.length-1]||0:e,Bl=e=>!!(e&&e.getVelocity);function u5(e){const t=Bl(e)?e.get():e;return pCt(t)?t.toValue():t}function xCt({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:r},n,a,s){const o={latestValues:vCt(n,a,s,e),renderState:t()};return r&&(o.onMount=l=>r({props:n,current:l,...o}),o.onUpdate=l=>r(l)),o}const bve=e=>(t,r)=>{const n=w.useContext(AB),a=w.useContext(GH),s=()=>xCt(e,t,n,a);return r?s():qNt(s)};function vCt(e,t,r,n){const a={},s=n(e,{});for(const A in s)a[A]=u5(s[A]);let{initial:o,animate:l}=e;const c=pB(e),u=pve(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let d=r?r.initial===!1:!1;d=d||o===!1;const f=d?l:o;if(f&&typeof f!="boolean"&&!mB(f)){const A=Array.isArray(f)?f:[f];for(let m=0;m<A.length;m++){const g=eQ(e,A[m]);if(g){const{transitionEnd:x,transition:v,...y}=g;for(const N in y){let C=y[N];if(Array.isArray(C)){const _=d?C.length-1:0;C=C[_]}C!==null&&(a[N]=C)}for(const N in x)a[N]=x[N]}}}return a}const Gy=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],hv=new Set(Gy),yve=e=>t=>typeof t=="string"&&t.startsWith(e),wve=yve("--"),bCt=yve("var(--"),tQ=e=>bCt(e)?yCt.test(e.split("/*")[0].trim()):!1,yCt=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Nve=(e,t)=>t&&typeof e=="number"?t.transform(e):e,PA=(e,t,r)=>r>t?t:r<e?e:r,qy={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},SC={...qy,transform:e=>PA(0,1,e)},gS={...qy,default:1},BE=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Mm=BE("deg"),Jh=BE("%"),Ur=BE("px"),wCt=BE("vh"),NCt=BE("vw"),Rre={...Jh,parse:e=>Jh.parse(e)/100,transform:e=>Jh.transform(e*100)},CCt={borderWidth:Ur,borderTopWidth:Ur,borderRightWidth:Ur,borderBottomWidth:Ur,borderLeftWidth:Ur,borderRadius:Ur,radius:Ur,borderTopLeftRadius:Ur,borderTopRightRadius:Ur,borderBottomRightRadius:Ur,borderBottomLeftRadius:Ur,width:Ur,maxWidth:Ur,height:Ur,maxHeight:Ur,top:Ur,right:Ur,bottom:Ur,left:Ur,padding:Ur,paddingTop:Ur,paddingRight:Ur,paddingBottom:Ur,paddingLeft:Ur,margin:Ur,marginTop:Ur,marginRight:Ur,marginBottom:Ur,marginLeft:Ur,backgroundPositionX:Ur,backgroundPositionY:Ur},ECt={rotate:Mm,rotateX:Mm,rotateY:Mm,rotateZ:Mm,scale:gS,scaleX:gS,scaleY:gS,scaleZ:gS,skew:Mm,skewX:Mm,skewY:Mm,distance:Ur,translateX:Ur,translateY:Ur,translateZ:Ur,x:Ur,y:Ur,z:Ur,perspective:Ur,transformPerspective:Ur,opacity:SC,originX:Rre,originY:Rre,originZ:Ur},Lre={...qy,transform:Math.round},rQ={...CCt,...ECt,zIndex:Lre,size:Ur,fillOpacity:SC,strokeOpacity:SC,numOctaves:Lre},jCt={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},kCt=Gy.length;function SCt(e,t,r){let n="",a=!0;for(let s=0;s<kCt;s++){const o=Gy[s],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||r){const u=Nve(l,rQ[o]);if(!c){a=!1;const d=jCt[o]||o;n+=`${d}(${u}) `}r&&(t[o]=u)}}return n=n.trim(),r?n=r(t,a?"":n):a&&(n="none"),n}function nQ(e,t,r){const{style:n,vars:a,transformOrigin:s}=e;let o=!1,l=!1;for(const c in t){const u=t[c];if(hv.has(c)){o=!0;continue}else if(wve(c)){a[c]=u;continue}else{const d=Nve(u,rQ[c]);c.startsWith("origin")?(l=!0,s[c]=d):n[c]=d}}if(t.transform||(o||r?n.transform=SCt(t,e.transform,r):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=s;n.transformOrigin=`${c} ${u} ${d}`}}const _Ct={offset:"stroke-dashoffset",array:"stroke-dasharray"},TCt={offset:"strokeDashoffset",array:"strokeDasharray"};function BCt(e,t,r=1,n=0,a=!0){e.pathLength=1;const s=a?_Ct:TCt;e[s.offset]=Ur.transform(-n);const o=Ur.transform(t),l=Ur.transform(r);e[s.array]=`${o} ${l}`}function Mre(e,t,r){return typeof e=="string"?e:Ur.transform(t+r*e)}function ICt(e,t,r){const n=Mre(t,e.x,e.width),a=Mre(r,e.y,e.height);return`${n} ${a}`}function aQ(e,{attrX:t,attrY:r,attrScale:n,originX:a,originY:s,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...u},d,f){if(nQ(e,u,f),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:A,style:m,dimensions:g}=e;A.transform&&(g&&(m.transform=A.transform),delete A.transform),g&&(a!==void 0||s!==void 0||m.transform)&&(m.transformOrigin=ICt(g,a!==void 0?a:.5,s!==void 0?s:.5)),t!==void 0&&(A.x=t),r!==void 0&&(A.y=r),n!==void 0&&(A.scale=n),o!==void 0&&BCt(A,o,l,c,!1)}const sQ=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Cve=()=>({...sQ(),attrs:{}}),iQ=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Eve(e,{style:t,vars:r},n,a){Object.assign(e.style,t,a&&a.getProjectionStyles(n));for(const s in r)e.style.setProperty(s,r[s])}const jve=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function kve(e,t,r,n){Eve(e,t,void 0,n);for(const a in t.attrs)e.setAttribute(jve.has(a)?a:YH(a),t.attrs[a])}const k4={};function DCt(e){Object.assign(k4,e)}function Sve(e,{layout:t,layoutId:r}){return hv.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!k4[e]||e==="opacity")}function oQ(e,t,r){var n;const{style:a}=e,s={};for(const o in a)(Bl(a[o])||t.style&&Bl(t.style[o])||Sve(o,e)||((n=r==null?void 0:r.getValue(o))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(s[o]=a[o]);return s}function _ve(e,t,r){const n=oQ(e,t,r);for(const a in e)if(Bl(e[a])||Bl(t[a])){const s=Gy.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[s]=e[a]}return n}function OCt(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const Ure=["x","y","width","height","cx","cy","r"],PCt={useVisualState:bve({scrapeMotionValuesFromProps:_ve,createRenderState:Cve,onUpdate:({props:e,prevProps:t,current:r,renderState:n,latestValues:a})=>{if(!r)return;let s=!!e.drag;if(!s){for(const l in a)if(hv.has(l)){s=!0;break}}if(!s)return;let o=!t;if(t)for(let l=0;l<Ure.length;l++){const c=Ure[l];e[c]!==t[c]&&(o=!0)}o&&as.read(()=>{OCt(r,n),as.render(()=>{aQ(n,a,iQ(r.tagName),e.transformTemplate),kve(r,n)})})}})},FCt={useVisualState:bve({scrapeMotionValuesFromProps:oQ,createRenderState:sQ})};function Tve(e,t,r){for(const n in t)!Bl(t[n])&&!Sve(n,r)&&(e[n]=t[n])}function RCt({transformTemplate:e},t){return w.useMemo(()=>{const r=sQ();return nQ(r,t,e),Object.assign({},r.vars,r.style)},[t])}function LCt(e,t){const r=e.style||{},n={};return Tve(n,r,e),Object.assign(n,RCt(e,t)),n}function MCt(e,t){const r={},n=LCt(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}function UCt(e,t,r,n){const a=w.useMemo(()=>{const s=Cve();return aQ(s,t,iQ(n),e.transformTemplate),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};Tve(s,e.style,e),a.style={...s,...a.style}}return a}function HCt(e=!1){return(r,n,a,{latestValues:s},o)=>{const c=(ZH(r)?UCt:MCt)(n,s,o,r),u=rCt(n,typeof r=="string",e),d=r!==w.Fragment?{...u,...c,ref:a}:{},{children:f}=n,A=w.useMemo(()=>Bl(f)?f.get():f,[f]);return w.createElement(r,{...d,children:A})}}function QCt(e,t){return function(n,{forwardMotionProps:a}={forwardMotionProps:!1}){const o={...ZH(n)?PCt:FCt,preloadedFeatures:e,useRender:HCt(a),createVisualElement:t,Component:n};return dCt(o)}}function Bve(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function gB(e,t,r){const n=e.getProps();return eQ(n,t,r!==void 0?r:n.custom,e)}const VCt=KH(()=>window.ScrollTimeline!==void 0);class $Ct{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,r){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=r}attachTimeline(t,r){const n=this.animations.map(a=>{if(VCt()&&a.attachTimeline)return a.attachTimeline(t);if(typeof r=="function")return r(a)});return()=>{n.forEach((a,s)=>{a&&a(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let r=0;r<this.animations.length;r++)t=Math.max(t,this.animations[r].duration);return t}runAll(t){this.animations.forEach(r=>r[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class zCt extends $Ct{then(t,r){return Promise.all(this.animations).then(t).catch(r)}}function lQ(e,t){return e?e[t]||e.default||e:void 0}const A8=2e4;function Ive(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<A8;)t+=r,n=e.next(t);return t>=A8?1/0:t}function cQ(e){return typeof e=="function"}function Hre(e,t){e.timeline=t,e.onfinish=null}const uQ=e=>Array.isArray(e)&&typeof e[0]=="number",GCt={linearEasing:void 0};function qCt(e,t){const r=KH(e);return()=>{var n;return(n=GCt[t])!==null&&n!==void 0?n:r()}}const S4=qCt(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Dve=(e,t,r=10)=>{let n="";const a=Math.max(Math.round(t/r),2);for(let s=0;s<a;s++)n+=e(sy(0,a-1,s))+", ";return`linear(${n.substring(0,n.length-2)})`};function Ove(e){return!!(typeof e=="function"&&S4()||!e||typeof e=="string"&&(e in m8||S4())||uQ(e)||Array.isArray(e)&&e.every(Ove))}const R2=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,m8={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:R2([0,.65,.55,1]),circOut:R2([.55,0,1,.45]),backIn:R2([.31,.01,.66,-.59]),backOut:R2([.33,1.53,.69,.99])};function Pve(e,t){if(e)return typeof e=="function"&&S4()?Dve(e,t):uQ(e)?R2(e):Array.isArray(e)?e.map(r=>Pve(r,t)||m8.easeOut):m8[e]}const hf={x:!1,y:!1};function Fve(){return hf.x||hf.y}function KCt(e,t,r){var n;if(e instanceof Element)return[e];if(typeof e=="string"){let a=document;const s=(n=void 0)!==null&&n!==void 0?n:a.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}function Rve(e,t){const r=KCt(e),n=new AbortController,a={passive:!0,...t,signal:n.signal};return[r,a,()=>n.abort()]}function Qre(e){return t=>{t.pointerType==="touch"||Fve()||e(t)}}function WCt(e,t,r={}){const[n,a,s]=Rve(e,r),o=Qre(l=>{const{target:c}=l,u=t(l);if(typeof u!="function"||!c)return;const d=Qre(f=>{u(f),c.removeEventListener("pointerleave",d)});c.addEventListener("pointerleave",d,a)});return n.forEach(l=>{l.addEventListener("pointerenter",o,a)}),s}const Lve=(e,t)=>t?e===t?!0:Lve(e,t.parentElement):!1,dQ=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,XCt=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function YCt(e){return XCt.has(e.tagName)||e.tabIndex!==-1}const L2=new WeakSet;function Vre(e){return t=>{t.key==="Enter"&&e(t)}}function DP(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const JCt=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=Vre(()=>{if(L2.has(r))return;DP(r,"down");const a=Vre(()=>{DP(r,"up")}),s=()=>DP(r,"cancel");r.addEventListener("keyup",a,t),r.addEventListener("blur",s,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function $re(e){return dQ(e)&&!Fve()}function ZCt(e,t,r={}){const[n,a,s]=Rve(e,r),o=l=>{const c=l.currentTarget;if(!$re(l)||L2.has(c))return;L2.add(c);const u=t(l),d=(m,g)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",A),!(!$re(m)||!L2.has(c))&&(L2.delete(c),typeof u=="function"&&u(m,{success:g}))},f=m=>{d(m,r.useGlobalTarget||Lve(c,m.target))},A=m=>{d(m,!1)};window.addEventListener("pointerup",f,a),window.addEventListener("pointercancel",A,a)};return n.forEach(l=>{!YCt(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(r.useGlobalTarget?window:l).addEventListener("pointerdown",o,a),l.addEventListener("focus",u=>JCt(u,a),a)}),s}function eEt(e){return e==="x"||e==="y"?hf[e]?null:(hf[e]=!0,()=>{hf[e]=!1}):hf.x||hf.y?null:(hf.x=hf.y=!0,()=>{hf.x=hf.y=!1})}const Mve=new Set(["width","height","top","left","right","bottom",...Gy]);let d5;function tEt(){d5=void 0}const Zh={now:()=>(d5===void 0&&Zh.set(Ro.isProcessing||XNt.useManualTiming?Ro.timestamp:performance.now()),d5),set:e=>{d5=e,queueMicrotask(tEt)}};function fQ(e,t){e.indexOf(t)===-1&&e.push(t)}function hQ(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class AQ{constructor(){this.subscriptions=[]}add(t){return fQ(this.subscriptions,t),()=>hQ(this.subscriptions,t)}notify(t,r,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,r,n);else for(let s=0;s<a;s++){const o=this.subscriptions[s];o&&o(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Uve(e,t){return t?e*(1e3/t):0}const zre=30,rEt=e=>!isNaN(parseFloat(e));class nEt{constructor(t,r={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,a=!0)=>{const s=Zh.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=Zh.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=rEt(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new AQ);const n=this.events[t].add(r);return t==="change"?()=>{n(),as.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Zh.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>zre)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,zre);return Uve(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _C(e,t){return new nEt(e,t)}function aEt(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,_C(r))}function sEt(e,t){const r=gB(e,t);let{transitionEnd:n={},transition:a={},...s}=r||{};s={...s,...n};for(const o in s){const l=gCt(s[o]);aEt(e,o,l)}}function iEt(e){return!!(Bl(e)&&e.add)}function p8(e,t){const r=e.getValue("willChange");if(iEt(r))return r.add(t)}function Hve(e){return e.props[gve]}const Qve=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,oEt=1e-7,lEt=12;function cEt(e,t,r,n,a){let s,o,l=0;do o=t+(r-t)/2,s=Qve(o,n,a)-e,s>0?r=o:t=o;while(Math.abs(s)>oEt&&++l<lEt);return o}function IE(e,t,r,n){if(e===t&&r===n)return Bu;const a=s=>cEt(s,0,1,e,r);return s=>s===0||s===1?s:Qve(a(s),t,n)}const Vve=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,$ve=e=>t=>1-e(1-t),zve=IE(.33,1.53,.69,.99),mQ=$ve(zve),Gve=Vve(mQ),qve=e=>(e*=2)<1?.5*mQ(e):.5*(2-Math.pow(2,-10*(e-1))),pQ=e=>1-Math.sin(Math.acos(e)),Kve=$ve(pQ),Wve=Vve(pQ),Xve=e=>/^0[^.\s]+$/u.test(e);function uEt(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Xve(e):!0}const vN=e=>Math.round(e*1e5)/1e5,gQ=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function dEt(e){return e==null}const fEt=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,xQ=(e,t)=>r=>!!(typeof r=="string"&&fEt.test(r)&&r.startsWith(e)||t&&!dEt(r)&&Object.prototype.hasOwnProperty.call(r,t)),Yve=(e,t,r)=>n=>{if(typeof n!="string")return n;const[a,s,o,l]=n.match(gQ);return{[e]:parseFloat(a),[t]:parseFloat(s),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},hEt=e=>PA(0,255,e),OP={...qy,transform:e=>Math.round(hEt(e))},ax={test:xQ("rgb","red"),parse:Yve("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+OP.transform(e)+", "+OP.transform(t)+", "+OP.transform(r)+", "+vN(SC.transform(n))+")"};function AEt(e){let t="",r="",n="",a="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),a=e.substring(4,5),t+=t,r+=r,n+=n,a+=a),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const g8={test:xQ("#"),parse:AEt,transform:ax.transform},zb={test:xQ("hsl","hue"),parse:Yve("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Jh.transform(vN(t))+", "+Jh.transform(vN(r))+", "+vN(SC.transform(n))+")"},pl={test:e=>ax.test(e)||g8.test(e)||zb.test(e),parse:e=>ax.test(e)?ax.parse(e):zb.test(e)?zb.parse(e):g8.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?ax.transform(e):zb.transform(e)},mEt=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function pEt(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(gQ))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(mEt))===null||r===void 0?void 0:r.length)||0)>0}const Jve="number",Zve="color",gEt="var",xEt="var(",Gre="${}",vEt=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function TC(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},a=[];let s=0;const l=t.replace(vEt,c=>(pl.test(c)?(n.color.push(s),a.push(Zve),r.push(pl.parse(c))):c.startsWith(xEt)?(n.var.push(s),a.push(gEt),r.push(c)):(n.number.push(s),a.push(Jve),r.push(parseFloat(c))),++s,Gre)).split(Gre);return{values:r,split:l,indexes:n,types:a}}function ebe(e){return TC(e).values}function tbe(e){const{split:t,types:r}=TC(e),n=t.length;return a=>{let s="";for(let o=0;o<n;o++)if(s+=t[o],a[o]!==void 0){const l=r[o];l===Jve?s+=vN(a[o]):l===Zve?s+=pl.transform(a[o]):s+=a[o]}return s}}const bEt=e=>typeof e=="number"?0:e;function yEt(e){const t=ebe(e);return tbe(e)(t.map(bEt))}const Lp={test:pEt,parse:ebe,createTransformer:tbe,getAnimatableNone:yEt},wEt=new Set(["brightness","contrast","saturate","opacity"]);function NEt(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(gQ)||[];if(!n)return e;const a=r.replace(n,"");let s=wEt.has(t)?1:0;return n!==r&&(s*=100),t+"("+s+a+")"}const CEt=/\b([a-z-]*)\(.*?\)/gu,x8={...Lp,getAnimatableNone:e=>{const t=e.match(CEt);return t?t.map(NEt).join(" "):e}},EEt={...rQ,color:pl,backgroundColor:pl,outlineColor:pl,fill:pl,stroke:pl,borderColor:pl,borderTopColor:pl,borderRightColor:pl,borderBottomColor:pl,borderLeftColor:pl,filter:x8,WebkitFilter:x8},vQ=e=>EEt[e];function rbe(e,t){let r=vQ(e);return r!==x8&&(r=Lp),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const jEt=new Set(["auto","none","0"]);function kEt(e,t,r){let n=0,a;for(;n<e.length&&!a;){const s=e[n];typeof s=="string"&&!jEt.has(s)&&TC(s).values.length&&(a=e[n]),n++}if(a&&r)for(const s of t)e[s]=rbe(r,a)}const qre=e=>e===qy||e===Ur,Kre=(e,t)=>parseFloat(e.split(", ")[t]),Wre=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const a=n.match(/^matrix3d\((.+)\)$/u);if(a)return Kre(a[1],t);{const s=n.match(/^matrix\((.+)\)$/u);return s?Kre(s[1],e):0}},SEt=new Set(["x","y","z"]),_Et=Gy.filter(e=>!SEt.has(e));function TEt(e){const t=[];return _Et.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const oy={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Wre(4,13),y:Wre(5,14)};oy.translateX=oy.x;oy.translateY=oy.y;const Cx=new Set;let v8=!1,b8=!1;function nbe(){if(b8){const e=Array.from(Cx).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const a=TEt(n);a.length&&(r.set(n,a),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const a=r.get(n);a&&a.forEach(([s,o])=>{var l;(l=n.getValue(s))===null||l===void 0||l.set(o)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}b8=!1,v8=!1,Cx.forEach(e=>e.complete()),Cx.clear()}function abe(){Cx.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(b8=!0)})}function BEt(){abe(),nbe()}class bQ{constructor(t,r,n,a,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=a,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Cx.add(this),v8||(v8=!0,as.read(abe),as.resolveKeyframes(nbe))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:a}=this;for(let s=0;s<t.length;s++)if(t[s]===null)if(s===0){const o=a==null?void 0:a.get(),l=t[t.length-1];if(o!==void 0)t[0]=o;else if(n&&r){const c=n.readValue(r,l);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=l),a&&o===void 0&&a.set(t[0])}else t[s]=t[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Cx.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Cx.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const sbe=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),IEt=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function DEt(e){const t=IEt.exec(e);if(!t)return[,];const[,r,n,a]=t;return[`--${r??n}`,a]}function ibe(e,t,r=1){const[n,a]=DEt(e);if(!n)return;const s=window.getComputedStyle(t).getPropertyValue(n);if(s){const o=s.trim();return sbe(o)?parseFloat(o):o}return tQ(a)?ibe(a,t,r+1):a}const obe=e=>t=>t.test(e),OEt={test:e=>e==="auto",parse:e=>e},lbe=[qy,Ur,Jh,Mm,NCt,wCt,OEt],Xre=e=>lbe.find(obe(e));class cbe extends bQ{constructor(t,r,n,a,s){super(t,r,n,a,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),tQ(u))){const d=ibe(u,r.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Mve.has(n)||t.length!==2)return;const[a,s]=t,o=Xre(a),l=Xre(s);if(o!==l)if(qre(o)&&qre(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let a=0;a<t.length;a++)uEt(t[a])&&n.push(a);n.length&&kEt(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=oy[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const a=r[r.length-1];a!==void 0&&t.getValue(n,a).jump(a,!1)}measureEndState(){var t;const{element:r,name:n,unresolvedKeyframes:a}=this;if(!r||!r.current)return;const s=r.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=a.length-1,l=a[o];a[o]=oy[n](r.measureViewportBox(),window.getComputedStyle(r.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([c,u])=>{r.getValue(c).set(u)}),this.resolveNoneKeyframes()}}const Yre=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Lp.test(e)||e==="0")&&!e.startsWith("url("));function PEt(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function FEt(e,t,r,n){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],o=Yre(a,t),l=Yre(s,t);return!o||!l?!1:PEt(e)||(r==="spring"||cQ(r))&&n}const REt=e=>e!==null;function xB(e,{repeat:t,repeatType:r="loop"},n){const a=e.filter(REt),s=t&&r!=="loop"&&t%2===1?0:a.length-1;return!s||n===void 0?a[s]:n}const LEt=40;class ube{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:a=0,repeatDelay:s=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Zh.now(),this.options={autoplay:t,delay:r,type:n,repeat:a,repeatDelay:s,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>LEt?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&BEt(),this._resolved}onKeyframesResolved(t,r){this.resolvedAt=Zh.now(),this.hasAttemptedResolve=!0;const{name:n,type:a,velocity:s,delay:o,onComplete:l,onUpdate:c,isGenerator:u}=this.options;if(!u&&!FEt(t,n,a,s))if(o)this.options.duration=0;else{c&&c(xB(t,this.options,r)),l&&l(),this.resolveFinishedPromise();return}const d=this.initPlayback(t,r);d!==!1&&(this._resolved={keyframes:t,finalKeyframe:r,...d},this.onPostResolved())}onPostResolved(){}then(t,r){return this.currentFinishedPromise.then(t,r)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Cs=(e,t,r)=>e+(t-e)*r;function PP(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function MEt({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let a=0,s=0,o=0;if(!t)a=s=o=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;a=PP(c,l,e+1/3),s=PP(c,l,e),o=PP(c,l,e-1/3)}return{red:Math.round(a*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:n}}function _4(e,t){return r=>r>0?t:e}const FP=(e,t,r)=>{const n=e*e,a=r*(t*t-n)+n;return a<0?0:Math.sqrt(a)},UEt=[g8,ax,zb],HEt=e=>UEt.find(t=>t.test(e));function Jre(e){const t=HEt(e);if(!t)return!1;let r=t.parse(e);return t===zb&&(r=MEt(r)),r}const Zre=(e,t)=>{const r=Jre(e),n=Jre(t);if(!r||!n)return _4(e,t);const a={...r};return s=>(a.red=FP(r.red,n.red,s),a.green=FP(r.green,n.green,s),a.blue=FP(r.blue,n.blue,s),a.alpha=Cs(r.alpha,n.alpha,s),ax.transform(a))},QEt=(e,t)=>r=>t(e(r)),DE=(...e)=>e.reduce(QEt),y8=new Set(["none","hidden"]);function VEt(e,t){return y8.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function $Et(e,t){return r=>Cs(e,t,r)}function yQ(e){return typeof e=="number"?$Et:typeof e=="string"?tQ(e)?_4:pl.test(e)?Zre:qEt:Array.isArray(e)?dbe:typeof e=="object"?pl.test(e)?Zre:zEt:_4}function dbe(e,t){const r=[...e],n=r.length,a=e.map((s,o)=>yQ(s)(s,t[o]));return s=>{for(let o=0;o<n;o++)r[o]=a[o](s);return r}}function zEt(e,t){const r={...e,...t},n={};for(const a in r)e[a]!==void 0&&t[a]!==void 0&&(n[a]=yQ(e[a])(e[a],t[a]));return a=>{for(const s in n)r[s]=n[s](a);return r}}function GEt(e,t){var r;const n=[],a={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const o=t.types[s],l=e.indexes[o][a[o]],c=(r=e.values[l])!==null&&r!==void 0?r:0;n[s]=c,a[o]++}return n}const qEt=(e,t)=>{const r=Lp.createTransformer(t),n=TC(e),a=TC(t);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?y8.has(e)&&!a.values.length||y8.has(t)&&!n.values.length?VEt(e,t):DE(dbe(GEt(n,a),a.values),r):_4(e,t)};function fbe(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?Cs(e,t,r):yQ(e)(e,t)}const KEt=5;function hbe(e,t,r){const n=Math.max(t-KEt,0);return Uve(r-e(n),t-n)}const Qs={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},RP=.001;function WEt({duration:e=Qs.duration,bounce:t=Qs.bounce,velocity:r=Qs.velocity,mass:n=Qs.mass}){let a,s,o=1-t;o=PA(Qs.minDamping,Qs.maxDamping,o),e=PA(Qs.minDuration,Qs.maxDuration,mA(e)),o<1?(a=u=>{const d=u*o,f=d*e,A=d-r,m=w8(u,o),g=Math.exp(-f);return RP-A/m*g},s=u=>{const f=u*o*e,A=f*r+r,m=Math.pow(o,2)*Math.pow(u,2)*e,g=Math.exp(-f),x=w8(Math.pow(u,2),o);return(-a(u)+RP>0?-1:1)*((A-m)*g)/x}):(a=u=>{const d=Math.exp(-u*e),f=(u-r)*e+1;return-RP+d*f},s=u=>{const d=Math.exp(-u*e),f=(r-u)*(e*e);return d*f});const l=5/e,c=YEt(a,s,l);if(e=AA(e),isNaN(c))return{stiffness:Qs.stiffness,damping:Qs.damping,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:e}}}const XEt=12;function YEt(e,t,r){let n=r;for(let a=1;a<XEt;a++)n=n-e(n)/t(n);return n}function w8(e,t){return e*Math.sqrt(1-t*t)}const JEt=["duration","bounce"],ZEt=["stiffness","damping","mass"];function ene(e,t){return t.some(r=>e[r]!==void 0)}function ejt(e){let t={velocity:Qs.velocity,stiffness:Qs.stiffness,damping:Qs.damping,mass:Qs.mass,isResolvedFromDuration:!1,...e};if(!ene(e,ZEt)&&ene(e,JEt))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),a=n*n,s=2*PA(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:Qs.mass,stiffness:a,damping:s}}else{const r=WEt(e);t={...t,...r,mass:Qs.mass},t.isResolvedFromDuration=!0}return t}function Abe(e=Qs.visualDuration,t=Qs.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:a}=r;const s=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],l={done:!1,value:s},{stiffness:c,damping:u,mass:d,duration:f,velocity:A,isResolvedFromDuration:m}=ejt({...r,velocity:-mA(r.velocity||0)}),g=A||0,x=u/(2*Math.sqrt(c*d)),v=o-s,y=mA(Math.sqrt(c/d)),N=Math.abs(v)<5;n||(n=N?Qs.restSpeed.granular:Qs.restSpeed.default),a||(a=N?Qs.restDelta.granular:Qs.restDelta.default);let C;if(x<1){const j=w8(y,x);C=I=>{const T=Math.exp(-x*y*I);return o-T*((g+x*y*v)/j*Math.sin(j*I)+v*Math.cos(j*I))}}else if(x===1)C=j=>o-Math.exp(-y*j)*(v+(g+y*v)*j);else{const j=y*Math.sqrt(x*x-1);C=I=>{const T=Math.exp(-x*y*I),k=Math.min(j*I,300);return o-T*((g+x*y*v)*Math.sinh(k)+j*v*Math.cosh(k))/j}}const _={calculatedDuration:m&&f||null,next:j=>{const I=C(j);if(m)l.done=j>=f;else{let T=0;x<1&&(T=j===0?AA(g):hbe(C,j,I));const k=Math.abs(T)<=n,B=Math.abs(o-I)<=a;l.done=k&&B}return l.value=l.done?o:I,l},toString:()=>{const j=Math.min(Ive(_),A8),I=Dve(T=>_.next(j*T).value,j,30);return j+"ms "+I}};return _}function tne({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const f=e[0],A={done:!1,value:f},m=k=>l!==void 0&&k<l||c!==void 0&&k>c,g=k=>l===void 0?c:c===void 0||Math.abs(l-k)<Math.abs(c-k)?l:c;let x=r*t;const v=f+x,y=o===void 0?v:o(v);y!==v&&(x=y-f);const N=k=>-x*Math.exp(-k/n),C=k=>y+N(k),_=k=>{const B=N(k),M=C(k);A.done=Math.abs(B)<=u,A.value=A.done?y:M};let j,I;const T=k=>{m(A.value)&&(j=k,I=Abe({keyframes:[A.value,g(A.value)],velocity:hbe(C,k,A.value),damping:a,stiffness:s,restDelta:u,restSpeed:d}))};return T(0),{calculatedDuration:null,next:k=>{let B=!1;return!I&&j===void 0&&(B=!0,_(k),T(k)),j!==void 0&&k>=j?I.next(k-j):(!B&&_(k),A)}}}const tjt=IE(.42,0,1,1),rjt=IE(0,0,.58,1),mbe=IE(.42,0,.58,1),njt=e=>Array.isArray(e)&&typeof e[0]!="number",ajt={linear:Bu,easeIn:tjt,easeInOut:mbe,easeOut:rjt,circIn:pQ,circInOut:Wve,circOut:Kve,backIn:mQ,backInOut:Gve,backOut:zve,anticipate:qve},rne=e=>{if(uQ(e)){fve(e.length===4);const[t,r,n,a]=e;return IE(t,r,n,a)}else if(typeof e=="string")return ajt[e];return e};function sjt(e,t,r){const n=[],a=r||fbe,s=e.length-1;for(let o=0;o<s;o++){let l=a(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||Bu:t;l=DE(c,l)}n.push(l)}return n}function ijt(e,t,{clamp:r=!0,ease:n,mixer:a}={}){const s=e.length;if(fve(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=sjt(t,n,a),c=l.length,u=d=>{if(o&&d<e[0])return t[0];let f=0;if(c>1)for(;f<e.length-2&&!(d<e[f+1]);f++);const A=sy(e[f],e[f+1],d);return l[f](A)};return r?d=>u(PA(e[0],e[s-1],d)):u}function ojt(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const a=sy(0,t,n);e.push(Cs(r,1,a))}}function ljt(e){const t=[0];return ojt(t,e.length-1),t}function cjt(e,t){return e.map(r=>r*t)}function ujt(e,t){return e.map(()=>t||mbe).splice(0,e.length-1)}function T4({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const a=njt(n)?n.map(rne):rne(n),s={done:!1,value:t[0]},o=cjt(r&&r.length===t.length?r:ljt(t),e),l=ijt(o,t,{ease:Array.isArray(a)?a:ujt(t,a)});return{calculatedDuration:e,next:c=>(s.value=l(c),s.done=c>=e,s)}}const djt=e=>{const t=({timestamp:r})=>e(r);return{start:()=>as.update(t,!0),stop:()=>Rp(t),now:()=>Ro.isProcessing?Ro.timestamp:Zh.now()}},fjt={decay:tne,inertia:tne,tween:T4,keyframes:T4,spring:Abe},hjt=e=>e/100;class wQ extends ube{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:r,motionValue:n,element:a,keyframes:s}=this.options,o=(a==null?void 0:a.KeyframeResolver)||bQ,l=(c,u)=>this.onKeyframesResolved(c,u);this.resolver=new o(s,l,r,n,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:r="keyframes",repeat:n=0,repeatDelay:a=0,repeatType:s,velocity:o=0}=this.options,l=cQ(r)?r:fjt[r]||T4;let c,u;l!==T4&&typeof t[0]!="number"&&(c=DE(hjt,fbe(t[0],t[1])),t=[0,100]);const d=l({...this.options,keyframes:t});s==="mirror"&&(u=l({...this.options,keyframes:[...t].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=Ive(d));const{calculatedDuration:f}=d,A=f+a,m=A*(n+1)-a;return{generator:d,mirroredGenerator:u,mapPercentToKeyframes:c,calculatedDuration:f,resolvedDuration:A,totalDuration:m}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,r=!1){const{resolved:n}=this;if(!n){const{keyframes:k}=this.options;return{done:!0,value:k[k.length-1]}}const{finalKeyframe:a,generator:s,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:u,totalDuration:d,resolvedDuration:f}=n;if(this.startTime===null)return s.next(0);const{delay:A,repeat:m,repeatType:g,repeatDelay:x,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-d/this.speed,this.startTime)),r?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const y=this.currentTime-A*(this.speed>=0?1:-1),N=this.speed>=0?y<0:y>d;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let C=this.currentTime,_=s;if(m){const k=Math.min(this.currentTime,d)/f;let B=Math.floor(k),M=k%1;!M&&k>=1&&(M=1),M===1&&B--,B=Math.min(B,m+1),!!(B%2)&&(g==="reverse"?(M=1-M,x&&(M-=x/f)):g==="mirror"&&(_=o)),C=PA(0,1,M)*f}const j=N?{done:!1,value:c[0]}:_.next(C);l&&(j.value=l(j.value));let{done:I}=j;!N&&u!==null&&(I=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return T&&a!==void 0&&(j.value=xB(c,this.options,a)),v&&v(j.value),T&&this.finish(),j}get duration(){const{resolved:t}=this;return t?mA(t.calculatedDuration):0}get time(){return mA(this.currentTime)}set time(t){t=AA(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=mA(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=djt,onPlay:r,startTime:n}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),r&&r();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const Ajt=new Set(["opacity","clipPath","filter","transform"]);function mjt(e,t,r,{delay:n=0,duration:a=300,repeat:s=0,repeatType:o="loop",ease:l="easeInOut",times:c}={}){const u={[t]:r};c&&(u.offset=c);const d=Pve(l,a);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:n,duration:a,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const pjt=KH(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),B4=10,gjt=2e4;function xjt(e){return cQ(e.type)||e.type==="spring"||!Ove(e.ease)}function vjt(e,t){const r=new wQ({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:e[0]};const a=[];let s=0;for(;!n.done&&s<gjt;)n=r.sample(s),a.push(n.value),s+=B4;return{times:void 0,keyframes:a,duration:s-B4,ease:"linear"}}const pbe={anticipate:qve,backInOut:Gve,circInOut:Wve};function bjt(e){return e in pbe}class nne extends ube{constructor(t){super(t);const{name:r,motionValue:n,element:a,keyframes:s}=this.options;this.resolver=new cbe(s,(o,l)=>this.onKeyframesResolved(o,l),r,n,a),this.resolver.scheduleResolve()}initPlayback(t,r){let{duration:n=300,times:a,ease:s,type:o,motionValue:l,name:c,startTime:u}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof s=="string"&&S4()&&bjt(s)&&(s=pbe[s]),xjt(this.options)){const{onComplete:f,onUpdate:A,motionValue:m,element:g,...x}=this.options,v=vjt(t,x);t=v.keyframes,t.length===1&&(t[1]=t[0]),n=v.duration,a=v.times,s=v.ease,o="keyframes"}const d=mjt(l.owner.current,c,t,{...this.options,duration:n,times:a,ease:s});return d.startTime=u??this.calcStartTime(),this.pendingTimeline?(Hre(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:f}=this.options;l.set(xB(t,this.options,r)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:n,times:a,type:o,ease:s,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:r}=t;return mA(r)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:r}=t;return mA(r.currentTime||0)}set time(t){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.currentTime=AA(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:r}=t;return r.playbackRate}set speed(t){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:r}=t;return r.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:r}=t;return r.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:r}=this;if(!r)return Bu;const{animation:n}=r;Hre(n,t)}return Bu}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:r,keyframes:n,duration:a,type:s,ease:o,times:l}=t;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:d,onComplete:f,element:A,...m}=this.options,g=new wQ({...m,keyframes:n,duration:a,type:s,ease:o,times:l,isGenerator:!0}),x=AA(this.time);u.setWithVelocity(g.sample(x-B4).value,g.sample(x).value,B4)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:r,name:n,repeatDelay:a,repeatType:s,damping:o,type:l}=t;if(!r||!r.owner||!(r.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=r.owner.getProps();return pjt()&&n&&Ajt.has(n)&&!c&&!u&&!a&&s!=="mirror"&&o!==0&&l!=="inertia"}}const yjt={type:"spring",stiffness:500,damping:25,restSpeed:10},wjt=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Njt={type:"keyframes",duration:.8},Cjt={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ejt=(e,{keyframes:t})=>t.length>2?Njt:hv.has(e)?e.startsWith("scale")?wjt(t[1]):yjt:Cjt;function jjt({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:a,repeat:s,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const NQ=(e,t,r,n={},a,s)=>o=>{const l=lQ(n,e)||{},c=l.delay||n.delay||0;let{elapsed:u=0}=n;u=u-AA(c);let d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:A=>{t.set(A),l.onUpdate&&l.onUpdate(A)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:s?void 0:a};jjt(l)||(d={...d,...Ejt(e,d)}),d.duration&&(d.duration=AA(d.duration)),d.repeatDelay&&(d.repeatDelay=AA(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(f=!0)),f&&!s&&t.get()!==void 0){const A=xB(d.keyframes,l);if(A!==void 0)return as.update(()=>{d.onUpdate(A),d.onComplete()}),new zCt([])}return!s&&nne.supports(d)?new nne(d):new wQ(d)};function kjt({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function gbe(e,t,{delay:r=0,transitionOverride:n,type:a}={}){var s;let{transition:o=e.getDefaultTransition(),transitionEnd:l,...c}=t;n&&(o=n);const u=[],d=a&&e.animationState&&e.animationState.getState()[a];for(const f in c){const A=e.getValue(f,(s=e.latestValues[f])!==null&&s!==void 0?s:null),m=c[f];if(m===void 0||d&&kjt(d,f))continue;const g={delay:r,...lQ(o||{},f)};let x=!1;if(window.MotionHandoffAnimation){const y=Hve(e);if(y){const N=window.MotionHandoffAnimation(y,f,as);N!==null&&(g.startTime=N,x=!0)}}p8(e,f),A.start(NQ(f,A,m,e.shouldReduceMotion&&Mve.has(f)?{type:!1}:g,e,x));const v=A.animation;v&&u.push(v)}return l&&Promise.all(u).then(()=>{as.update(()=>{l&&sEt(e,l)})}),u}function N8(e,t,r={}){var n;const a=gB(e,t,r.type==="exit"?(n=e.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(s=r.transitionOverride);const o=a?()=>Promise.all(gbe(e,a,r)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:A}=s;return Sjt(e,t,d+u,f,A,r)}:()=>Promise.resolve(),{when:c}=s;if(c){const[u,d]=c==="beforeChildren"?[o,l]:[l,o];return u().then(()=>d())}else return Promise.all([o(),l(r.delay)])}function Sjt(e,t,r=0,n=0,a=1,s){const o=[],l=(e.variantChildren.size-1)*n,c=a===1?(u=0)=>u*n:(u=0)=>l-u*n;return Array.from(e.variantChildren).sort(_jt).forEach((u,d)=>{u.notify("AnimationStart",t),o.push(N8(u,t,{...s,delay:r+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function _jt(e,t){return e.sortNodePosition(t)}function Tjt(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const a=t.map(s=>N8(e,s,r));n=Promise.all(a)}else if(typeof t=="string")n=N8(e,t,r);else{const a=typeof t=="function"?gB(e,t,r.custom):t;n=Promise.all(gbe(e,a,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}const Bjt=XH.length;function xbe(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?xbe(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<Bjt;r++){const n=XH[r],a=e.props[n];(kC(a)||a===!1)&&(t[n]=a)}return t}const Ijt=[...WH].reverse(),Djt=WH.length;function Ojt(e){return t=>Promise.all(t.map(({animation:r,options:n})=>Tjt(e,r,n)))}function Pjt(e){let t=Ojt(e),r=ane(),n=!0;const a=c=>(u,d)=>{var f;const A=gB(e,d,c==="exit"?(f=e.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(A){const{transition:m,transitionEnd:g,...x}=A;u={...u,...x,...g}}return u};function s(c){t=c(e)}function o(c){const{props:u}=e,d=xbe(e.parent)||{},f=[],A=new Set;let m={},g=1/0;for(let v=0;v<Djt;v++){const y=Ijt[v],N=r[y],C=u[y]!==void 0?u[y]:d[y],_=kC(C),j=y===c?N.isActive:null;j===!1&&(g=v);let I=C===d[y]&&C!==u[y]&&_;if(I&&n&&e.manuallyAnimateOnMount&&(I=!1),N.protectedKeys={...m},!N.isActive&&j===null||!C&&!N.prevProp||mB(C)||typeof C=="boolean")continue;const T=Fjt(N.prevProp,C);let k=T||y===c&&N.isActive&&!I&&_||v>g&&_,B=!1;const M=Array.isArray(C)?C:[C];let P=M.reduce(a(y),{});j===!1&&(P={});const{prevResolvedValues:S={}}=N,L={...S,...P},H=z=>{k=!0,A.has(z)&&(B=!0,A.delete(z)),N.needsAnimating[z]=!0;const K=e.getValue(z);K&&(K.liveStyle=!1)};for(const z in L){const K=P[z],Z=S[z];if(m.hasOwnProperty(z))continue;let U=!1;h8(K)&&h8(Z)?U=!Bve(K,Z):U=K!==Z,U?K!=null?H(z):A.add(z):K!==void 0&&A.has(z)?H(z):N.protectedKeys[z]=!0}N.prevProp=C,N.prevResolvedValues=P,N.isActive&&(m={...m,...P}),n&&e.blockInitialAnimation&&(k=!1),k&&(!(I&&T)||B)&&f.push(...M.map(z=>({animation:z,options:{type:y}})))}if(A.size){const v={};A.forEach(y=>{const N=e.getBaseTarget(y),C=e.getValue(y);C&&(C.liveStyle=!0),v[y]=N??null}),f.push({animation:v})}let x=!!f.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(x=!1),n=!1,x?t(f):Promise.resolve()}function l(c,u){var d;if(r[c].isActive===u)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(A=>{var m;return(m=A.animationState)===null||m===void 0?void 0:m.setActive(c,u)}),r[c].isActive=u;const f=o(c);for(const A in r)r[A].protectedKeys={};return f}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>r,reset:()=>{r=ane(),n=!0}}}function Fjt(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Bve(t,e):!1}function Tg(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ane(){return{animate:Tg(!0),whileInView:Tg(),whileHover:Tg(),whileTap:Tg(),whileDrag:Tg(),whileFocus:Tg(),exit:Tg()}}class rg{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Rjt extends rg{constructor(t){super(t),t.animationState||(t.animationState=Pjt(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();mB(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let Ljt=0;class Mjt extends rg{constructor(){super(...arguments),this.id=Ljt++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const a=this.node.animationState.setActive("exit",!t);r&&!t&&a.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const Ujt={animation:{Feature:Rjt},exit:{Feature:Mjt}};function BC(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function OE(e){return{point:{x:e.pageX,y:e.pageY}}}const Hjt=e=>t=>dQ(t)&&e(t,OE(t));function bN(e,t,r,n){return BC(e,t,Hjt(r),n)}const sne=(e,t)=>Math.abs(e-t);function Qjt(e,t){const r=sne(e.x,t.x),n=sne(e.y,t.y);return Math.sqrt(r**2+n**2)}class vbe{constructor(t,r,{transformPagePoint:n,contextWindow:a,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=MP(this.lastMoveEventInfo,this.history),A=this.startEvent!==null,m=Qjt(f.offset,{x:0,y:0})>=3;if(!A&&!m)return;const{point:g}=f,{timestamp:x}=Ro;this.history.push({...g,timestamp:x});const{onStart:v,onMove:y}=this.handlers;A||(v&&v(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,f)},this.handlePointerMove=(f,A)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=LP(A,this.transformPagePoint),as.update(this.updatePoint,!0)},this.handlePointerUp=(f,A)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=MP(f.type==="pointercancel"?this.lastMoveEventInfo:LP(A,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,v),g&&g(f,v)},!dQ(t))return;this.dragSnapToOrigin=s,this.handlers=r,this.transformPagePoint=n,this.contextWindow=a||window;const o=OE(t),l=LP(o,this.transformPagePoint),{point:c}=l,{timestamp:u}=Ro;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=r;d&&d(t,MP(l,this.history)),this.removeListeners=DE(bN(this.contextWindow,"pointermove",this.handlePointerMove),bN(this.contextWindow,"pointerup",this.handlePointerUp),bN(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Rp(this.updatePoint)}}function LP(e,t){return t?{point:t(e.point)}:e}function ine(e,t){return{x:e.x-t.x,y:e.y-t.y}}function MP({point:e},t){return{point:e,delta:ine(e,bbe(t)),offset:ine(e,Vjt(t)),velocity:$jt(t,.1)}}function Vjt(e){return e[0]}function bbe(e){return e[e.length-1]}function $jt(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const a=bbe(e);for(;r>=0&&(n=e[r],!(a.timestamp-n.timestamp>AA(t)));)r--;if(!n)return{x:0,y:0};const s=mA(a.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const o={x:(a.x-n.x)/s,y:(a.y-n.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const ybe=1e-4,zjt=1-ybe,Gjt=1+ybe,wbe=.01,qjt=0-wbe,Kjt=0+wbe;function Fu(e){return e.max-e.min}function Wjt(e,t,r){return Math.abs(e-t)<=r}function one(e,t,r,n=.5){e.origin=n,e.originPoint=Cs(t.min,t.max,e.origin),e.scale=Fu(r)/Fu(t),e.translate=Cs(r.min,r.max,e.origin)-e.originPoint,(e.scale>=zjt&&e.scale<=Gjt||isNaN(e.scale))&&(e.scale=1),(e.translate>=qjt&&e.translate<=Kjt||isNaN(e.translate))&&(e.translate=0)}function yN(e,t,r,n){one(e.x,t.x,r.x,n?n.originX:void 0),one(e.y,t.y,r.y,n?n.originY:void 0)}function lne(e,t,r){e.min=r.min+t.min,e.max=e.min+Fu(t)}function Xjt(e,t,r){lne(e.x,t.x,r.x),lne(e.y,t.y,r.y)}function cne(e,t,r){e.min=t.min-r.min,e.max=e.min+Fu(t)}function wN(e,t,r){cne(e.x,t.x,r.x),cne(e.y,t.y,r.y)}function Yjt(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Cs(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Cs(r,e,n.max):Math.min(e,r)),e}function une(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function Jjt(e,{top:t,left:r,bottom:n,right:a}){return{x:une(e.x,r,a),y:une(e.y,t,n)}}function dne(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function Zjt(e,t){return{x:dne(e.x,t.x),y:dne(e.y,t.y)}}function ekt(e,t){let r=.5;const n=Fu(e),a=Fu(t);return a>n?r=sy(t.min,t.max-n,e.min):n>a&&(r=sy(e.min,e.max-a,t.min)),PA(0,1,r)}function tkt(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const C8=.35;function rkt(e=C8){return e===!1?e=0:e===!0&&(e=C8),{x:fne(e,"left","right"),y:fne(e,"top","bottom")}}function fne(e,t,r){return{min:hne(e,t),max:hne(e,r)}}function hne(e,t){return typeof e=="number"?e:e[t]||0}const Ane=()=>({translate:0,scale:1,origin:0,originPoint:0}),Gb=()=>({x:Ane(),y:Ane()}),mne=()=>({min:0,max:0}),ui=()=>({x:mne(),y:mne()});function pd(e){return[e("x"),e("y")]}function Nbe({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function nkt({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function akt(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function UP(e){return e===void 0||e===1}function E8({scale:e,scaleX:t,scaleY:r}){return!UP(e)||!UP(t)||!UP(r)}function Rg(e){return E8(e)||Cbe(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Cbe(e){return pne(e.x)||pne(e.y)}function pne(e){return e&&e!=="0%"}function I4(e,t,r){const n=e-r,a=t*n;return r+a}function gne(e,t,r,n,a){return a!==void 0&&(e=I4(e,a,n)),I4(e,r,n)+t}function j8(e,t=0,r=1,n,a){e.min=gne(e.min,t,r,n,a),e.max=gne(e.max,t,r,n,a)}function Ebe(e,{x:t,y:r}){j8(e.x,t.translate,t.scale,t.originPoint),j8(e.y,r.translate,r.scale,r.originPoint)}const xne=.999999999999,vne=1.0000000000001;function skt(e,t,r,n=!1){const a=r.length;if(!a)return;t.x=t.y=1;let s,o;for(let l=0;l<a;l++){s=r[l],o=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Kb(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Ebe(e,o)),n&&Rg(s.latestValues)&&Kb(e,s.latestValues))}t.x<vne&&t.x>xne&&(t.x=1),t.y<vne&&t.y>xne&&(t.y=1)}function qb(e,t){e.min=e.min+t,e.max=e.max+t}function bne(e,t,r,n,a=.5){const s=Cs(e.min,e.max,a);j8(e,t,r,s,n)}function Kb(e,t){bne(e.x,t.x,t.scaleX,t.scale,t.originX),bne(e.y,t.y,t.scaleY,t.scale,t.originY)}function jbe(e,t){return Nbe(akt(e.getBoundingClientRect(),t))}function ikt(e,t,r){const n=jbe(e,r),{scroll:a}=t;return a&&(qb(n.x,a.offset.x),qb(n.y,a.offset.y)),n}const kbe=({current:e})=>e?e.ownerDocument.defaultView:null,okt=new WeakMap;class lkt{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ui(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const a=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(OE(d).point)},s=(d,f)=>{const{drag:A,dragPropagation:m,onDragStart:g}=this.getProps();if(A&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=eEt(A),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),pd(v=>{let y=this.getAxisMotionValue(v).get()||0;if(Jh.test(y)){const{projection:N}=this.visualElement;if(N&&N.layout){const C=N.layout.layoutBox[v];C&&(y=Fu(C)*(parseFloat(y)/100))}}this.originPoint[v]=y}),g&&as.postRender(()=>g(d,f)),p8(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(d,f)=>{const{dragPropagation:A,dragDirectionLock:m,onDirectionLock:g,onDrag:x}=this.getProps();if(!A&&!this.openDragLock)return;const{offset:v}=f;if(m&&this.currentDirection===null){this.currentDirection=ckt(v),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,v),this.updateAxis("y",f.point,v),this.visualElement.render(),x&&x(d,f)},l=(d,f)=>this.stop(d,f),c=()=>pd(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new vbe(t,{onSessionStart:a,onStart:s,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:kbe(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:s}=this.getProps();s&&as.postRender(()=>s(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:a}=this.getProps();if(!n||!xS(t,a,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=Yjt(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,s=this.constraints;r&&$b(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&a?this.constraints=Jjt(a.layoutBox,r):this.constraints=!1,this.elastic=rkt(n),s!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&pd(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=tkt(a.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!$b(t))return!1;const n=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const s=ikt(n,a.root,this.visualElement.getTransformPagePoint());let o=Zjt(a.layout.layoutBox,s);if(r){const l=r(nkt(o));this.hasMutatedConstraints=!!l,l&&(o=Nbe(l))}return o}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:a,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=pd(d=>{if(!xS(d,r,this.currentDirection))return;let f=c&&c[d]||{};o&&(f={min:0,max:0});const A=a?200:1e6,m=a?40:1e7,g={type:"inertia",velocity:n?t[d]:0,bounceStiffness:A,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(d,g)});return Promise.all(u).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return p8(this.visualElement,t),n.start(NQ(t,n,0,r,this.visualElement,!1))}stopAnimation(){pd(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){pd(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),a=n[r];return a||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){pd(r=>{const{drag:n}=this.getProps();if(!xS(r,n,this.currentDirection))return;const{projection:a}=this.visualElement,s=this.getAxisMotionValue(r);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[r];s.set(t[r]-Cs(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!$b(r)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};pd(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();a[o]=ekt({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),pd(o=>{if(!xS(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(Cs(c,u,a[o]))})}addListeners(){if(!this.visualElement.current)return;okt.set(this.visualElement,this);const t=this.visualElement.current,r=bN(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();$b(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,s=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),as.read(n);const o=BC(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(pd(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=c[d].translate,f.set(f.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),r(),s(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:s=!1,dragElastic:o=C8,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:a,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function xS(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function ckt(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class ukt extends rg{constructor(t){super(t),this.removeGroupControls=Bu,this.removeListeners=Bu,this.controls=new lkt(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Bu}unmount(){this.removeGroupControls(),this.removeListeners()}}const yne=e=>(t,r)=>{e&&as.postRender(()=>e(t,r))};class dkt extends rg{constructor(){super(...arguments),this.removePointerDownListener=Bu}onPointerDown(t){this.session=new vbe(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:kbe(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:yne(t),onStart:yne(r),onMove:n,onEnd:(s,o)=>{delete this.session,a&&as.postRender(()=>a(s,o))}}}mount(){this.removePointerDownListener=bN(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const f5={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function wne(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const f2={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Ur.test(e))e=parseFloat(e);else return e;const r=wne(e,t.target.x),n=wne(e,t.target.y);return`${r}% ${n}%`}},fkt={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,a=Lp.parse(e);if(a.length>5)return n;const s=Lp.createTransformer(e),o=typeof a[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;a[0+o]/=l,a[1+o]/=c;const u=Cs(l,c,.5);return typeof a[2+o]=="number"&&(a[2+o]/=u),typeof a[3+o]=="number"&&(a[3+o]/=u),s(a)}};class hkt extends w.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:a}=this.props,{projection:s}=t;DCt(Akt),s&&(r.group&&r.group.add(s),n&&n.register&&a&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),f5.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:a,isPresent:s}=this.props,o=n.projection;return o&&(o.isPresent=s,a||t.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||as.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),JH.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Sbe(e){const[t,r]=KNt(),n=w.useContext(uve);return i.jsx(hkt,{...e,layoutGroup:n,switchLayoutGroup:w.useContext(xve),isPresent:t,safeToRemove:r})}const Akt={borderRadius:{...f2,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:f2,borderTopRightRadius:f2,borderBottomLeftRadius:f2,borderBottomRightRadius:f2,boxShadow:fkt};function mkt(e,t,r){const n=Bl(e)?e:_C(e);return n.start(NQ("",n,t,r)),n.animation}function pkt(e){return e instanceof SVGElement&&e.tagName!=="svg"}const gkt=(e,t)=>e.depth-t.depth;class xkt{constructor(){this.children=[],this.isDirty=!1}add(t){fQ(this.children,t),this.isDirty=!0}remove(t){hQ(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(gkt),this.isDirty=!1,this.children.forEach(t)}}function vkt(e,t){const r=Zh.now(),n=({timestamp:a})=>{const s=a-r;s>=t&&(Rp(n),e(s-t))};return as.read(n,!0),()=>Rp(n)}const _be=["TopLeft","TopRight","BottomLeft","BottomRight"],bkt=_be.length,Nne=e=>typeof e=="string"?parseFloat(e):e,Cne=e=>typeof e=="number"||Ur.test(e);function ykt(e,t,r,n,a,s){a?(e.opacity=Cs(0,r.opacity!==void 0?r.opacity:1,wkt(n)),e.opacityExit=Cs(t.opacity!==void 0?t.opacity:1,0,Nkt(n))):s&&(e.opacity=Cs(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let o=0;o<bkt;o++){const l=`border${_be[o]}Radius`;let c=Ene(t,l),u=Ene(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Cne(c)===Cne(u)?(e[l]=Math.max(Cs(Nne(c),Nne(u),n),0),(Jh.test(u)||Jh.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||r.rotate)&&(e.rotate=Cs(t.rotate||0,r.rotate||0,n))}function Ene(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const wkt=Tbe(0,.5,Kve),Nkt=Tbe(.5,.95,Bu);function Tbe(e,t,r){return n=>n<e?0:n>t?1:r(sy(e,t,n))}function jne(e,t){e.min=t.min,e.max=t.max}function dd(e,t){jne(e.x,t.x),jne(e.y,t.y)}function kne(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Sne(e,t,r,n,a){return e-=t,e=I4(e,1/r,n),a!==void 0&&(e=I4(e,1/a,n)),e}function Ckt(e,t=0,r=1,n=.5,a,s=e,o=e){if(Jh.test(t)&&(t=parseFloat(t),t=Cs(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Cs(s.min,s.max,n);e===s&&(l-=t),e.min=Sne(e.min,t,r,l,a),e.max=Sne(e.max,t,r,l,a)}function _ne(e,t,[r,n,a],s,o){Ckt(e,t[r],t[n],t[a],t.scale,s,o)}const Ekt=["x","scaleX","originX"],jkt=["y","scaleY","originY"];function Tne(e,t,r,n){_ne(e.x,t,Ekt,r?r.x:void 0,n?n.x:void 0),_ne(e.y,t,jkt,r?r.y:void 0,n?n.y:void 0)}function Bne(e){return e.translate===0&&e.scale===1}function Bbe(e){return Bne(e.x)&&Bne(e.y)}function Ine(e,t){return e.min===t.min&&e.max===t.max}function kkt(e,t){return Ine(e.x,t.x)&&Ine(e.y,t.y)}function Dne(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Ibe(e,t){return Dne(e.x,t.x)&&Dne(e.y,t.y)}function One(e){return Fu(e.x)/Fu(e.y)}function Pne(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Skt{constructor(){this.members=[]}add(t){fQ(this.members,t),t.scheduleRender()}remove(t){if(hQ(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(a=>t===a);if(r===0)return!1;let n;for(let a=r;a>=0;a--){const s=this.members[a];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function _kt(e,t,r){let n="";const a=e.x.translate/t.x,s=e.y.translate/t.y,o=(r==null?void 0:r.z)||0;if((a||s||o)&&(n=`translate3d(${a}px, ${s}px, ${o}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:A,skewX:m,skewY:g}=r;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),f&&(n+=`rotateX(${f}deg) `),A&&(n+=`rotateY(${A}deg) `),m&&(n+=`skewX(${m}deg) `),g&&(n+=`skewY(${g}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const Lg={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},M2=typeof window<"u"&&window.MotionDebug!==void 0,HP=["","X","Y","Z"],Tkt={visibility:"hidden"},Fne=1e3;let Bkt=0;function QP(e,t,r,n){const{latestValues:a}=t;a[e]&&(r[e]=a[e],t.setStaticValue(e,0),n&&(n[e]=0))}function Dbe(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=Hve(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:a,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",as,!(a||s))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&Dbe(n)}function Obe({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(o={},l=t==null?void 0:t()){this.id=Bkt++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,M2&&(Lg.totalNodes=Lg.resolvedTargetDeltas=Lg.recalculatedProjection=0),this.nodes.forEach(Okt),this.nodes.forEach(Mkt),this.nodes.forEach(Ukt),this.nodes.forEach(Pkt),M2&&window.MotionDebug.record(Lg)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new xkt)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new AQ),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=pkt(o),this.instance=o;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let f;const A=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=vkt(A,250),f5.hasAnimatedSinceResize&&(f5.hasAnimatedSinceResize=!1,this.nodes.forEach(Lne))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:A,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||d.getDefaultTransition()||zkt,{onLayoutAnimationStart:v,onLayoutAnimationComplete:y}=d.getProps(),N=!this.targetLayout||!Ibe(this.targetLayout,g)||m,C=!A&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||A&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,C);const _={...lQ(x,"layout"),onPlay:v,onComplete:y};(d.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else A||Lne(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Rp(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Hkt),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Dbe(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Rne);return}this.isUpdating||this.nodes.forEach(Rkt),this.isUpdating=!1,this.nodes.forEach(Lkt),this.nodes.forEach(Ikt),this.nodes.forEach(Dkt),this.clearAllSnapshots();const l=Zh.now();Ro.delta=PA(0,1e3/60,l-Ro.timestamp),Ro.timestamp=l,Ro.isProcessing=!0,IP.update.process(Ro),IP.preRender.process(Ro),IP.render.process(Ro),Ro.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,JH.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Fkt),this.sharedNodes.forEach(Qkt)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,as.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){as.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ui(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Bbe(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(l||Rg(this.latestValues)||d)&&(a(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),Gkt(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return ui();const c=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(qkt))){const{scroll:d}=this.root;d&&(qb(c.x,d.offset.x),qb(c.y,d.offset.y))}return c}removeElementScroll(o){var l;const c=ui();if(dd(c,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:f,options:A}=d;d!==this.root&&f&&A.layoutScroll&&(f.wasRoot&&dd(c,o),qb(c.x,f.offset.x),qb(c.y,f.offset.y))}return c}applyTransform(o,l=!1){const c=ui();dd(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Kb(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Rg(d.latestValues)&&Kb(c,d.latestValues)}return Rg(this.latestValues)&&Kb(c,this.latestValues),c}removeTransform(o){const l=ui();dd(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Rg(u.latestValues))continue;E8(u.latestValues)&&u.updateSnapshot();const d=ui(),f=u.measurePageBox();dd(d,f),Tne(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Rg(this.latestValues)&&Tne(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ro.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:A}=this.options;if(!(!this.layout||!(f||A))){if(this.resolvedRelativeTargetAt=Ro.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ui(),this.relativeTargetOrigin=ui(),wN(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),dd(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ui(),this.targetWithTransforms=ui()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Xjt(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):dd(this.target,this.layout.layoutBox),Ebe(this.target,this.targetDelta)):dd(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ui(),this.relativeTargetOrigin=ui(),wN(this.relativeTargetOrigin,this.target,m.target),dd(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}M2&&Lg.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||E8(this.parent.latestValues)||Cbe(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Ro.timestamp&&(u=!1),u)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;dd(this.layoutCorrected,this.layout.layoutBox);const A=this.treeScale.x,m=this.treeScale.y;skt(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=ui());const{target:g}=l;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(kne(this.prevProjectionDelta.x,this.projectionDelta.x),kne(this.prevProjectionDelta.y,this.projectionDelta.y)),yN(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==A||this.treeScale.y!==m||!Pne(this.projectionDelta.x,this.prevProjectionDelta.x)||!Pne(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),M2&&Lg.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Gb(),this.projectionDelta=Gb(),this.projectionDeltaWithTransform=Gb()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},f=Gb();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const A=ui(),m=c?c.source:void 0,g=this.layout?this.layout.source:void 0,x=m!==g,v=this.getStack(),y=!v||v.members.length<=1,N=!!(x&&!y&&this.options.crossfade===!0&&!this.path.some($kt));this.animationProgress=0;let C;this.mixTargetDelta=_=>{const j=_/1e3;Mne(f.x,o.x,j),Mne(f.y,o.y,j),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(wN(A,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Vkt(this.relativeTarget,this.relativeTargetOrigin,A,j),C&&kkt(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=ui()),dd(C,this.relativeTarget)),x&&(this.animationValues=d,ykt(d,u,this.latestValues,j,N,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Rp(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=as.update(()=>{f5.hasAnimatedSinceResize=!0,this.currentAnimation=mkt(0,Fne,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Fne),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&Pbe(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||ui();const f=Fu(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+f;const A=Fu(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+A}dd(l,c),Kb(l,d),yN(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Skt),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&QP("z",o,u,this.animationValues);for(let d=0;d<HP.length;d++)QP(`rotate${HP[d]}`,o,u,this.animationValues),QP(`skew${HP[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Tkt;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=u5(o==null?void 0:o.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=u5(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Rg(this.latestValues)&&(x.transform=d?d({},""):"none",this.hasProjected=!1),x}const A=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=_kt(this.projectionDeltaWithTransform,this.treeScale,A),d&&(u.transform=d(A,u.transform));const{x:m,y:g}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,f.animationValues?u.opacity=f===this?(c=(l=A.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:A.opacityExit:u.opacity=f===this?A.opacity!==void 0?A.opacity:"":A.opacityExit!==void 0?A.opacityExit:0;for(const x in k4){if(A[x]===void 0)continue;const{correct:v,applyTo:y}=k4[x],N=u.transform==="none"?A[x]:v(A[x],f);if(y){const C=y.length;for(let _=0;_<C;_++)u[y[_]]=N}else u[x]=N}return this.options.layoutId&&(u.pointerEvents=f===this?u5(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(Rne),this.root.sharedNodes.clear()}}}function Ikt(e){e.updateLayout()}function Dkt(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=e.layout,{animationType:s}=e.options,o=r.source!==e.layout.source;s==="size"?pd(f=>{const A=o?r.measuredBox[f]:r.layoutBox[f],m=Fu(A);A.min=n[f].min,A.max=A.min+m}):Pbe(s,r.layoutBox,n)&&pd(f=>{const A=o?r.measuredBox[f]:r.layoutBox[f],m=Fu(n[f]);A.max=A.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+m)});const l=Gb();yN(l,n,r.layoutBox);const c=Gb();o?yN(c,e.applyTransform(a,!0),r.measuredBox):yN(c,n,r.layoutBox);const u=!Bbe(l);let d=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:A,layout:m}=f;if(A&&m){const g=ui();wN(g,r.layoutBox,A.layoutBox);const x=ui();wN(x,n,m.layoutBox),Ibe(g,x)||(d=!0),f.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=g,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function Okt(e){M2&&Lg.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Pkt(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Fkt(e){e.clearSnapshot()}function Rne(e){e.clearMeasurements()}function Rkt(e){e.isLayoutDirty=!1}function Lkt(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Lne(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Mkt(e){e.resolveTargetDelta()}function Ukt(e){e.calcProjection()}function Hkt(e){e.resetSkewAndRotation()}function Qkt(e){e.removeLeadSnapshot()}function Mne(e,t,r){e.translate=Cs(t.translate,0,r),e.scale=Cs(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function Une(e,t,r,n){e.min=Cs(t.min,r.min,n),e.max=Cs(t.max,r.max,n)}function Vkt(e,t,r,n){Une(e.x,t.x,r.x,n),Une(e.y,t.y,r.y,n)}function $kt(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const zkt={duration:.45,ease:[.4,0,.1,1]},Hne=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Qne=Hne("applewebkit/")&&!Hne("chrome/")?Math.round:Bu;function Vne(e){e.min=Qne(e.min),e.max=Qne(e.max)}function Gkt(e){Vne(e.x),Vne(e.y)}function Pbe(e,t,r){return e==="position"||e==="preserve-aspect"&&!Wjt(One(t),One(r),.2)}function qkt(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const Kkt=Obe({attachResizeListener:(e,t)=>BC(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),VP={current:void 0},Fbe=Obe({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!VP.current){const e=new Kkt({});e.mount(window),e.setOptions({layoutScroll:!0}),VP.current=e}return VP.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Wkt={pan:{Feature:dkt},drag:{Feature:ukt,ProjectionNode:Fbe,MeasureLayout:Sbe}};function $ne(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const a="onHover"+r,s=n[a];s&&as.postRender(()=>s(t,OE(t)))}class Xkt extends rg{mount(){const{current:t}=this.node;t&&(this.unmount=WCt(t,r=>($ne(this.node,r,"Start"),n=>$ne(this.node,n,"End"))))}unmount(){}}class Ykt extends rg{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=DE(BC(this.node.current,"focus",()=>this.onFocus()),BC(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function zne(e,t,r){const{props:n}=e;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const a="onTap"+(r==="End"?"":r),s=n[a];s&&as.postRender(()=>s(t,OE(t)))}class Jkt extends rg{mount(){const{current:t}=this.node;t&&(this.unmount=ZCt(t,r=>(zne(this.node,r,"Start"),(n,{success:a})=>zne(this.node,n,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const k8=new WeakMap,$P=new WeakMap,Zkt=e=>{const t=k8.get(e.target);t&&t(e)},eSt=e=>{e.forEach(Zkt)};function tSt({root:e,...t}){const r=e||document;$P.has(r)||$P.set(r,{});const n=$P.get(r),a=JSON.stringify(t);return n[a]||(n[a]=new IntersectionObserver(eSt,{root:e,...t})),n[a]}function rSt(e,t,r){const n=tSt(t);return k8.set(e,r),n.observe(e),()=>{k8.delete(e),n.unobserve(e)}}const nSt={some:0,all:1};class aSt extends rg{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:a="some",once:s}=t,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:nSt[a]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),A=u?d:f;A&&A(c)};return rSt(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(sSt(t,r))&&this.startObserver()}unmount(){}}function sSt({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const iSt={inView:{Feature:aSt},tap:{Feature:Jkt},focus:{Feature:Ykt},hover:{Feature:Xkt}},oSt={layout:{ProjectionNode:Fbe,MeasureLayout:Sbe}},D4={current:null},CQ={current:!1};function Rbe(){if(CQ.current=!0,!!qH)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>D4.current=e.matches;e.addListener(t),t()}else D4.current=!1}const lSt=[...lbe,pl,Lp],cSt=e=>lSt.find(obe(e)),Gne=new WeakMap;function uSt(e,t,r){for(const n in t){const a=t[n],s=r[n];if(Bl(a))e.addValue(n,a);else if(Bl(s))e.addValue(n,_C(a,{owner:e}));else if(s!==a)if(e.hasValue(n)){const o=e.getValue(n);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=e.getStaticValue(n);e.addValue(n,_C(o!==void 0?o:a,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const qne=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class dSt{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=bQ,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Zh.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,as.render(this.render,!1,!0))};const{latestValues:c,renderState:u,onUpdate:d}=o;this.onUpdate=d,this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=pB(r),this.isVariantNode=pve(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...A}=this.scrapeMotionValuesFromProps(r,{},this);for(const m in A){const g=A[m];c[m]!==void 0&&Bl(g)&&g.set(c[m],!1)}}mount(t){this.current=t,Gne.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),CQ.current||Rbe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:D4.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Gne.delete(this.current),this.projection&&this.projection.unmount(),Rp(this.notifyUpdate),Rp(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=hv.has(t),a=r.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&as.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=r.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{a(),s(),o&&o(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in iy){const r=iy[t];if(!r)continue;const{isEnabled:n,Feature:a}=r;if(!this.features[t]&&a&&n(this.props)&&(this.features[t]=new a(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ui()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<qne.length;n++){const a=qne[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const s="on"+a,o=t[s];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=uSt(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=_C(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){var n;let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(sbe(a)||Xve(a))?a=parseFloat(a):!cSt(a)&&Lp.test(r)&&(a=rbe(t,r)),this.setBaseTarget(t,Bl(a)?a.get():a)),Bl(a)?a.get():a}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props;let a;if(typeof n=="string"||typeof n=="object"){const o=eQ(this.props,n,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);o&&(a=o[t])}if(n&&a!==void 0)return a;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Bl(s)?s:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new AQ),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class Lbe extends dSt{constructor(){super(...arguments),this.KeyframeResolver=cbe}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Bl(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function fSt(e){return window.getComputedStyle(e)}class hSt extends Lbe{constructor(){super(...arguments),this.type="html",this.renderInstance=Eve}readValueFromInstance(t,r){if(hv.has(r)){const n=vQ(r);return n&&n.default||0}else{const n=fSt(t),a=(wve(r)?n.getPropertyValue(r):n[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:r}){return jbe(t,r)}build(t,r,n){nQ(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return oQ(t,r,n)}}class ASt extends Lbe{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ui}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(hv.has(r)){const n=vQ(r);return n&&n.default||0}return r=jve.has(r)?r:YH(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return _ve(t,r,n)}build(t,r,n){aQ(t,r,this.isSVGTag,n.transformTemplate)}renderInstance(t,r,n,a){kve(t,r,n,a)}mount(t){this.isSVGTag=iQ(t.tagName),super.mount(t)}}const mSt=(e,t)=>ZH(e)?new ASt(t):new hSt(t,{allowProjection:e!==w.Fragment}),pSt=QCt({...Ujt,...iSt,...Wkt,...oSt},mSt),gSt=nCt(pSt);function xSt(){!CQ.current&&Rbe();const[e]=w.useState(D4.current);return e}const Kne=({onSelectProfile:e,isAdminView:t=!1,allowedProfiles:r})=>{const n=xSt(),[a,s]=ft.useState(()=>{const u=typeof window<"u"?window.innerWidth:1280;return u<640?{cols:4,rows:2,amp:5,opMin:.05,opMax:.1}:u<1024?{cols:6,rows:2,amp:6,opMin:.06,opMax:.12}:{cols:6,rows:3,amp:8,opMin:.06,opMax:.14}});ft.useEffect(()=>{const u=()=>{const d=window.innerWidth;s(f=>d<640&&(f.cols!==4||f.rows!==2||f.amp!==5)?{cols:4,rows:2,amp:5,opMin:.05,opMax:.1}:d>=640&&d<1024&&(f.cols!==6||f.rows!==2||f.amp!==6)?{cols:6,rows:2,amp:6,opMin:.06,opMax:.12}:d>=1024&&(f.cols!==6||f.rows!==3||f.amp!==8)?{cols:6,rows:3,amp:8,opMin:.06,opMax:.14}:f)};return window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]);const o=ft.useMemo(()=>{const u=[ps,yF,qs,UN,yA,r0,Ph,ps,qs,yF,UN,Ph];let d=12345;const f=()=>(d=(d*1664525+1013904223)%4294967296,d/4294967296),{cols:A,rows:m,opMin:g,opMax:x}=a,v=A*m;return Array.from({length:v}).map((y,N)=>{const C=u[N%u.length],_=N%A,j=Math.floor(N/A),I=(_+.5)/A*100,T=(j+.5)/m*100,k=f()*10-5,B=f()*8-4,M=22+Math.floor(f()*14),P=g+f()*(x-g),S=f()*4,L=f()>.5?1:-1,H=f()>.5?1:-1;return{Icon:C,style:{left:`${I+k}%`,top:`${T+B}%`,width:`${M}px`,height:`${M}px`,opacity:P,filter:"blur(0.5px)"},delay:S,dirX:L,dirY:H}})},[a]),l=ft.useMemo(()=>new Map(OG.map(u=>[u.id,u])),[]),c=ft.useMemo(()=>r&&r.length>0?r.map(u=>l.get(u)).filter(Boolean):OG,[r,l]);return i.jsxs("div",{className:`relative flex flex-col items-center justify-center min-h-screen p-6 overflow-hidden
                    bg-gradient-to-br from-blue-50 via-blue-100 to-yellow-50
                    dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[i.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-20",children:[i.jsx("div",{className:`absolute -top-24 -left-16 h-72 w-72 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-yellow-300 to-yellow-200
                        dark:from-yellow-400/20 dark:to-yellow-500/20`}),i.jsx("div",{className:`absolute top-40 -right-10 h-80 w-80 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-blue-300 to-sky-300
                        dark:from-blue-500/20 dark:to-sky-500/20`}),i.jsx("div",{className:`absolute bottom-0 left-1/2 -translate-x-1/2 h-96 w-96 rounded-full blur-3xl opacity-30
                        bg-gradient-to-tr from-sky-200 to-blue-200
                        dark:from-sky-500/20 dark:to-blue-500/20`})]}),i.jsx("div",{className:"pointer-events-none absolute inset-0 -z-10",children:o.map(({Icon:u,style:d,delay:f,dirX:A,dirY:m},g)=>i.jsx(gSt.span,{className:"absolute text-[#1f2937]",style:d,initial:!1,animate:n?void 0:{x:[0,a.amp/2*A,0,-(a.amp/2)*A,0],y:[0,-a.amp*m,0,a.amp*m,0]},transition:n?void 0:{duration:12,repeat:1/0,ease:"easeInOut",delay:f},children:i.jsx(u,{className:"w-full h-full"})},g))}),i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("div",{className:"mb-4 flex justify-center items-center",children:i.jsx(VM,{})}),i.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-100 mt-2 drop-shadow-sm",children:"Gestin Pedaggica LIR"}),i.jsx("p",{className:"text-slate-700/80 dark:text-slate-300/80 mt-2 text-lg",children:t?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:c.map(u=>i.jsxs("button",{onClick:()=>e(u.id),className:`group relative overflow-hidden p-8 rounded-2xl
                       bg-white/10 dark:bg-white/5
                       backdrop-blur-xl border border-white/30 dark:border-white/10
                       shadow-lg hover:shadow-2xl hover:-translate-y-1.5
                       transition-all duration-300 ease-out
                       focus:outline-none focus:ring-4 focus:ring-yellow-400/40`,children:[i.jsx("div",{className:`pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100
                            transition-opacity duration-300
                            bg-gradient-to-br from-white/40 to-transparent`}),i.jsx("div",{className:"text-slate-800 dark:text-slate-200 group-hover:text-yellow-500 transition-colors duration-300",children:u.icon}),i.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-900 dark:text-slate-100 drop-shadow-[0_1px_0_rgba(0,0,0,0.1)]",children:u.label})]},u.id))}),i.jsxs("footer",{className:"absolute bottom-4 text-slate-600 dark:text-slate-400 text-sm",children:[" ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},vSt=()=>{const[e,t]=w.useState(null),[r,n]=w.useState(null),[a,s]=w.useState(!0),[o,l]=w.useState(null),[c,u]=w.useState(!1),[d,f]=w.useState(null),[A,m]=w.useState(!1),[g,x]=w.useState(null),[v,y]=w.useState(null);w.useEffect(()=>{const k=new URLSearchParams(window.location.search),B=k.get("auth"),M=k.get("userId");k.get("module"),B==="success"&&M&&(y("Autorizacin de Google Slides completada exitosamente!"),setTimeout(()=>{const P=window.location.pathname;window.history.replaceState({},document.title,P),y(null)},3e3))},[]),w.useEffect(()=>{const k=Tae(oa,async B=>{if(t(B),B)try{const M=await ioe(B.email);if(M){if(n(M),M.profile===It.SUBDIRECCION)u(!0);else if(M.profile===It.COORDINACION_TP){const P=localStorage.getItem(`lir-effective-profile-${B.email}`);P===It.PROFESORADO||P===It.COORDINACION_TP?(x(P),m(!1)):m(!0)}}else l("Usuario no encontrado en la base de datos. Contacte al administrador."),await WI()}catch{l("Error al conectar con la base de datos."),await WI()}else n(null),f(null),u(!1),l(null),m(!1),x(null);s(!1)});return()=>k()},[]);const N=async(k,B)=>{if(l(null),!k.trim()||!B.trim()){l("Por favor ingrese email y contrasea");return}try{await _5e(k.trim(),B)}catch(M){switch(M.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":l("Credenciales invlidas. Verifique su email y contrasea.");break;case"auth/too-many-requests":l("Demasiados intentos fallidos. Intente ms tarde.");break;case"auth/network-request-failed":l("Error de conexin. Verifique su internet.");break;default:l("Ocurri un error al intentar iniciar sesin.")}}},C=async k=>{try{await T5e(k)}catch(B){console.error("Error al enviar email de recuperacin:",B)}},_=k=>{f(k),u(!1)},j=()=>{(r==null?void 0:r.profile)===It.SUBDIRECCION?(u(!0),f(null)):(r==null?void 0:r.profile)===It.COORDINACION_TP&&(m(!0),x(null))},I=async()=>{try{await WI()}catch(k){console.error("Error al cerrar sesin:",k)}};if(a)return i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"mb-4 flex justify-center items-center",children:i.jsx(VM,{})}),i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicacin..."})]})});if(!e||!r)return i.jsx(xTe,{onLoginAttempt:N,onForgotPasswordRequest:C,error:o});if(c&&r.profile===It.SUBDIRECCION)return i.jsx(Kne,{onSelectProfile:_,isAdminView:!0});if(A&&r.profile===It.COORDINACION_TP){const k=[It.COORDINACION_TP,It.PROFESORADO];return i.jsx(Kne,{onSelectProfile:B=>{x(B),m(!1),e!=null&&e.email&&localStorage.setItem(`lir-effective-profile-${e.email}`,B)},isAdminView:!0,allowedProfiles:k})}const T=d||g||r.profile;return i.jsxs(i.Fragment,{children:[v&&i.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-green-500 text-white p-4 rounded-lg shadow-lg flex items-center gap-2",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("span",{children:v})]}),i.jsx(GNt,{currentUser:{...r,profile:T},onLogout:I,onChangeProfile:r.profile===It.SUBDIRECCION||r.profile===It.COORDINACION_TP?j:void 0,canChangeProfile:r.profile===It.SUBDIRECCION||r.profile===It.COORDINACION_TP})]})},Mbe=document.getElementById("root");if(!Mbe)throw new Error("Could not find root element to mount to");const bSt=rye.createRoot(Mbe);bSt.render(i.jsx(ft.StrictMode,{children:i.jsx(vSt,{})}));export{Ta as _,wSt as c,sc as g};
